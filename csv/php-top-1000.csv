title,viewcount,title,body,body,acceptedanswerid
"How do I check if a string contains a specific word?","3159605","","<p>Consider:</p>

<pre><code>$a = 'How are you?';

if ($a contains 'are')
    echo 'true';
</code></pre>

<p>Suppose I have the code above, what is the correct way to write the statement <code>if ($a contains 'are')</code>?</p>
","<p>You can use the <a href=""http://php.net/manual/en/function.strpos.php"" rel=""noreferrer""><code>strpos()</code></a> function which is used to find the occurrence of one string inside another one:</p>

<pre><code>$a = 'How are you?';

if (strpos($a, 'are') !== false) {
    echo 'true';
}
</code></pre>

<p>Note that the use of <code>!== false</code> is deliberate; <code>strpos()</code> returns either the offset at which the needle string begins in the haystack string, or the boolean <code>false</code> if the needle isn't found. Since 0 is a valid offset and 0 is ""falsey"", we can't use simpler constructs like <code>!strpos($a, 'are')</code>.</p>
","4366748"
"Get the full URL in PHP","1942000","","<p>I use this code to get the full URL:</p>

<pre><code>$actual_link = 'http://'.$_SERVER['HTTP_HOST'].$_SERVER['PHP_SELF'];
</code></pre>

<p>The problem is that I use some masks in my <code>.htaccess</code>, so what we see in the URL is not always the real path of the file.</p>

<p>What I need is to get the URL, what is written in the URL, nothing more and nothing less—the full URL.</p>

<p>I need to get how it appears in the Navigation Bar in the web browser, and not the real path of the file on the server.</p>
","<p>Have a look at <code>$_SERVER['REQUEST_URI']</code>, i.e.</p>

<pre><code>$actual_link = ""http://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]"";
</code></pre>

<p>(Note that the double quoted string syntax is <a href=""http://php.net/language.types.string#language.types.string.parsing.simple"" rel=""noreferrer"">perfectly correct</a>)</p>

<p>If you want to support both HTTP and HTTPS, you can use</p>

<pre><code>$actual_link = (isset($_SERVER['HTTPS']) ? ""https"" : ""http"") . ""://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]"";
</code></pre>

<p><strong>Editor's note:</strong> using this code has <strong>security implications</strong>. The client can set HTTP_HOST and REQUEST_URI to any arbitrary value it wants.</p>
","6768831"
"How do I get PHP errors to display?","1871967","","<p>I have checked my <code>PHP ini</code> file and display errors is set and also error reporting is <code>E_ALL</code>. I have restarted my Apache web server.</p>

<p>I have even put these lines at the top of my script, and it doesn't even catch simple parse errors. For example, I declare variables with a <code>""$""</code> and I don't close statements<code>"";""</code>. But all my scripts show a blank page on these errors, but I want to actually see the <strong>errors</strong> in my browser output. </p>

<pre><code>error_reporting(E_ALL);
ini_set('display_errors', 1);
</code></pre>

<p>What is left to do?</p>
","<p>This always works for me:</p>

<pre><code>ini_set('display_errors', 1);
ini_set('display_startup_errors', 1);
error_reporting(E_ALL);
</code></pre>

<p>However, this doesn't make PHP to show parse errors - the only way to show those errors is to modify your php.ini with this line:</p>

<pre><code>display_errors = on
</code></pre>
","21429652"
"PHP: Delete an element from an array","1739544","","<p>Is there an easy way to delete an element from an array using <code>PHP</code>, such that <code>foreach ($array)</code> no longer includes that element?</p>

<p>I thought that setting it to <code>null</code> would do it, but apparently it does not work.</p>
","<p>There are different ways to delete an array element, where some are more useful for some specific tasks than others.</p>

<h1>Delete one array element</h1>

<p>If you want to delete just one array element you can use <a href=""https://secure.php.net/manual/en/function.unset.php"" rel=""noreferrer""><code>unset()</code></a> or alternative <a href=""https://secure.php.net/manual/en/function.array-splice.php"" rel=""noreferrer""><code>array_splice()</code></a>.</p>

<p>Also if you have the value and don't know the key to delete the element you can use <a href=""http://php.net/manual/en/function.array-search.php"" rel=""noreferrer""><code>array_search()</code></a> to get the key.</p>

<h3><a href=""http://php.net/manual/en/function.unset.php"" rel=""noreferrer""><code>unset()</code></a> method</h3>

<p>Note that when you use <code>unset()</code> the array keys won't change/reindex. If you want to reindex the keys you can use <a href=""http://php.net/manual/en/function.array-values.php"" rel=""noreferrer""><code>array_values()</code></a> after <code>unset()</code> which will convert all keys to numerical enumerated keys starting from 0.</p>

<p>Code</p>

<pre><code>&lt;?php

    $array = array(0 =&gt; ""a"", 1 =&gt; ""b"", 2 =&gt; ""c"");
    unset($array[1]);
               //↑ Key which you want to delete

?&gt;
</code></pre>

<p>Output</p>

<pre><code>Array (
    [0] =&gt; a
    [2] =&gt; c
)
</code></pre>

<h3><a href=""http://php.net/manual/en/function.array-splice.php"" rel=""noreferrer""><code>array_splice()</code></a> method</h3>

<p>If you use <code>array_splice()</code> the keys will be automatically reindexed, but the associative keys won't change opposed to <code>array_values()</code> which will convert all keys to numerical keys.</p>

<p>Also <code>array_splice()</code> needs the offset, not the key!, as second parameter.</p>

<p>Code</p>

<pre><code>&lt;?php

    $array = array(0 =&gt; ""a"", 1 =&gt; ""b"", 2 =&gt; ""c"");
    array_splice($array, 1, 1);
                       //↑ Offset which you want to delete

?&gt;
</code></pre>

<p>Output</p>

<pre><code>Array (
    [0] =&gt; a
    [1] =&gt; c
)
</code></pre>

<p><code>array_splice()</code> same as <code>unset()</code> take the array by reference, this means you don't want to assign the return values of those functions back to the array.</p>

<h1>Delete multiple array elements</h1>

<p>If you want to delete multiple array elements and don't want to call <code>unset()</code> or <code>array_splice()</code> multiple times you can use the functions <code>array_diff()</code> or <code>array_diff_key()</code> depending on if you know the values or the keys of the elements which you want to delete.</p>

<h3><a href=""http://php.net/manual/en/function.array-diff.php"" rel=""noreferrer""><code>array_diff()</code></a> method</h3>

<p>If you know the values of the array elements which you want to delete, then you can use <code>array_diff()</code>. As before with <code>unset()</code> it won't change/reindex the keys of the array.</p>

<p>Code</p>

<pre><code>&lt;?php

    $array = array(0 =&gt; ""a"", 1 =&gt; ""b"", 2 =&gt; ""c"");
    $array = array_diff($array, [""a"", ""c""]);
                              //└────────┘→ Array values which you want to delete

?&gt;
</code></pre>

<p>Output</p>

<pre><code>Array (
    [1] =&gt; b
)
</code></pre>

<h3><a href=""http://php.net/manual/en/function.array-diff-key.php"" rel=""noreferrer""><code>array_diff_key()</code></a> method</h3>

<p>If you know the keys of the elements which you want to delete, then you want to use <code>array_diff_key()</code>. Here you have to make sure you pass the keys as keys in the second parameter and not as values. Otherwise you have to flip the array with <a href=""http://php.net/manual/en/function.array-flip.php"" rel=""noreferrer""><code>array_flip()</code></a>. And also here the keys won't change/reindex.</p>

<p>Code</p>

<pre><code>&lt;?php

    $array = array(0 =&gt; ""a"", 1 =&gt; ""b"", 2 =&gt; ""c"");
    $array = array_diff_key($array, [0 =&gt; ""xy"", ""2"" =&gt; ""xy""]);
                                   //↑           ↑ Array keys which you want to delete
?&gt;
</code></pre>

<p>Output</p>

<pre><code>Array (
    [1] =&gt; b
)
</code></pre>

<p>Also if you want to use <code>unset()</code> or <code>array_splice()</code> to delete multiple elements with the same value you can use <a href=""http://php.net/manual/en/function.array-keys.php"" rel=""noreferrer""><code>array_keys()</code></a> to get all the keys for a specific value and then delete all elements.</p>
","369608"
"What is the best IDE for PHP?","1359879","","<p>I'm a PHP developer and now I use <a href=""http://en.wikipedia.org/wiki/Notepad_%28software%29"" rel=""nofollow noreferrer"">Notepad++</a> for code editing, but lately I've been searching for an IDE to ease my work.</p>

<p>I've looked into <a href=""http://en.wikipedia.org/wiki/Eclipse_%28software%29"" rel=""nofollow noreferrer"">Eclipse</a>, <a href=""http://en.wikipedia.org/wiki/Aptana#Aptana_Studio"" rel=""nofollow noreferrer"">Aptana Studio</a> and several others, but I'm not really decided, they all look nice enough but a bit complicated. I'm sure it'll all get easy once I get used to it, but I don't want to waste my time.</p>

<p>This is what I'm looking for:</p>

<ul>
    <li>FTP support</li>
    <li>Code highlight</li>
    <li>SVN support would be great</li>
    <li>Ruby and JavaScript would be great</li>
</ul>
","<p>Are you sure you're looking for an IDE?  The features you're describing, along with the impression of being too complicated that you got from e.g. Aptana, suggest that perhaps all you really want is a good editor with syntax highlighting and integration with some common workflow tools.  For this, there are tons of options.</p>

<p>I've used <a href=""http://www.jedit.org/"" rel=""nofollow noreferrer"">jEdit</a> on several platforms successfully, and that alone puts it above most of the rest (many of the IDEs are cross-platform too, but Aptana and anything Eclipse-based is going to be pretty heavy-weight, if full-featured).  jEdit has ready-made plugins for everything on your list, and syntax highlighting for a wide range of languages.  You can also bring up a shell in the bottom of your window, invoke scripts from within the editor, and so forth.  It's not perfect (the UI is better than most Java UIs, but not perfect yet I don't think), but I've had good luck with it, and it'll be a hell of a lot simpler than Aptana/Eclipse.</p>

<p>That said, I do like Aptana quite a bit for web development, it does a lot of the grunt work for you once you're over the learning curve.</p>
","116345"
"How can I prevent SQL injection in PHP?","1305459","","<p>If user input is inserted without modification into an SQL query, then the application becomes vulnerable to <a href=""https://stackoverflow.com/a/332367/"">SQL injection</a>, like in the following example:</p>

<pre class=""lang-php prettyprint-override""><code>$unsafe_variable = $_POST['user_input']; 

mysql_query(""INSERT INTO `table` (`column`) VALUES ('$unsafe_variable')"");
</code></pre>

<p>That's because the user can input something like <code>value'); DROP TABLE table;--</code>, and the query becomes:</p>

<pre><code>INSERT INTO `table` (`column`) VALUES('value'); DROP TABLE table;--')
</code></pre>

<p>What can be done to prevent this from happening?</p>
","<p><strong>Use prepared statements and parameterized queries.</strong> These are SQL statements that are sent to and parsed by the database server separately from any parameters. This way it is impossible for an attacker to inject malicious SQL.</p>

<p>You basically have two options to achieve this:</p>

<ol>
<li><p>Using <a href=""http://php.net/manual/en/book.pdo.php"" rel=""noreferrer"">PDO</a> (for any supported database driver):</p>

<pre class=""lang-php prettyprint-override""><code>$stmt = $pdo-&gt;prepare('SELECT * FROM employees WHERE name = :name');

$stmt-&gt;execute(array('name' =&gt; $name));

foreach ($stmt as $row) {
    // do something with $row
}
</code></pre></li>
<li><p>Using <a href=""http://php.net/manual/en/book.mysqli.php"" rel=""noreferrer"">MySQLi</a> (for MySQL):</p>

<pre class=""lang-php prettyprint-override""><code>$stmt = $dbConnection-&gt;prepare('SELECT * FROM employees WHERE name = ?');
$stmt-&gt;bind_param('s', $name); // 's' specifies the variable type =&gt; 'string'

$stmt-&gt;execute();

$result = $stmt-&gt;get_result();
while ($row = $result-&gt;fetch_assoc()) {
    // do something with $row
}
</code></pre></li>
</ol>

<p>If you're connecting to a database other than MySQL, there is a driver-specific second option that you can refer to (e.g. <code>pg_prepare()</code> and <code>pg_execute()</code> for PostgreSQL). PDO is the universal option.</p>

<h2>Correctly setting up the connection</h2>

<p>Note that when using <code>PDO</code> to access a MySQL database <em>real</em> prepared statements are <strong>not used by default</strong>. To fix this you have to disable the emulation of prepared statements. An example of creating a connection using PDO is:</p>

<pre class=""lang-php prettyprint-override""><code>$dbConnection = new PDO('mysql:dbname=dbtest;host=127.0.0.1;charset=utf8', 'user', 'pass');

$dbConnection-&gt;setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
$dbConnection-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
</code></pre>

<p>In the above example the error mode isn't strictly necessary, <strong>but it is advised to add it</strong>. This way the script will not stop with a <code>Fatal Error</code> when something goes wrong. And it gives the developer the chance to <code>catch</code> any error(s) which are <code>throw</code>n as <code>PDOException</code>s.</p>

<p>What is <strong>mandatory</strong>, however, is the first <code>setAttribute()</code> line, which tells PDO to disable emulated prepared statements and use <em>real</em> prepared statements. This makes sure the statement and the values aren't parsed by PHP before sending it to the MySQL server (giving a possible attacker no chance to inject malicious SQL).</p>

<p>Although you can set the <code>charset</code> in the options of the constructor, it's important to note that 'older' versions of PHP (&lt; 5.3.6) <a href=""http://php.net/manual/en/ref.pdo-mysql.connection.php"" rel=""noreferrer"">silently ignored the charset parameter</a> in the DSN.</p>

<h2>Explanation</h2>

<p>What happens is that the SQL statement you pass to <code>prepare</code> is parsed and compiled by the database server. By specifying parameters (either a <code>?</code> or a named parameter like <code>:name</code> in the example above) you tell the database engine where you want to filter on. Then when you call <code>execute</code>, the prepared statement is combined with the parameter values you specify. </p>

<p>The important thing here is that the parameter values are combined with the compiled statement, not an SQL string. SQL injection works by tricking the script into including malicious strings when it creates SQL to send to the database. So by sending the actual SQL separately from the parameters, you limit the risk of ending up with something you didn't intend. Any parameters you send when using a prepared statement will just be treated as strings (although the database engine may do some optimization so parameters may end up as numbers too, of course). In the example above, if the <code>$name</code> variable contains <code>'Sarah'; DELETE FROM employees</code> the result would simply be a search for the string <code>""'Sarah'; DELETE FROM employees""</code>, and you will not end up with <a href=""http://xkcd.com/327/"" rel=""noreferrer"">an empty table</a>.</p>

<p>Another benefit of using prepared statements is that if you execute the same statement many times in the same session it will only be parsed and compiled once, giving you some speed gains.</p>

<p>Oh, and since you asked about how to do it for an insert, here's an example (using PDO):</p>

<pre class=""lang-php prettyprint-override""><code>$preparedStatement = $db-&gt;prepare('INSERT INTO table (column) VALUES (:column)');

$preparedStatement-&gt;execute(array('column' =&gt; $unsafeValue));
</code></pre>

<h2>Can prepared statements be used for dynamic queries?</h2>

<p>While you can still use prepared statements for the query parameters, the structure of the dynamic query itself cannot be parametrized and certain query features cannot be parametrized.</p>

<p>For these specific scenarios, the best thing to do is use a whitelist filter that restricts the possible values.</p>

<pre><code>// Value whitelist
// $dir can only be 'DESC' otherwise it will be 'ASC'
if (empty($dir) || $dir !== 'DESC') {
   $dir = 'ASC';
}
</code></pre>
","60496"
"How do I get a YouTube video thumbnail from the YouTube API?","1273051","","<p>If I have a YouTube video URL, is there any way to use PHP and cURL to get the associated thumbnail from the YouTube API?</p>
","<p>Each YouTube video has 4 generated images. They are predictably formatted as follows:</p>

<pre><code>https://img.youtube.com/vi/&lt;insert-youtube-video-id-here&gt;/0.jpg
https://img.youtube.com/vi/&lt;insert-youtube-video-id-here&gt;/1.jpg
https://img.youtube.com/vi/&lt;insert-youtube-video-id-here&gt;/2.jpg
https://img.youtube.com/vi/&lt;insert-youtube-video-id-here&gt;/3.jpg
</code></pre>

<p>The first one in the list is a full size image and others are thumbnail images. The default thumbnail image (ie. one of <code>1.jpg</code>, <code>2.jpg</code>, <code>3.jpg</code>) is:</p>

<pre><code>https://img.youtube.com/vi/&lt;insert-youtube-video-id-here&gt;/default.jpg
</code></pre>

<p>For the high quality version of the thumbnail use a url similar to this:</p>

<pre><code>https://img.youtube.com/vi/&lt;insert-youtube-video-id-here&gt;/hqdefault.jpg
</code></pre>

<p>There is also a medium quality version of the thumbnail, using a url similar to the HQ:</p>

<pre><code>https://img.youtube.com/vi/&lt;insert-youtube-video-id-here&gt;/mqdefault.jpg
</code></pre>

<p>For the standard definition version of the thumbnail, use a url similar to this:</p>

<pre><code>https://img.youtube.com/vi/&lt;insert-youtube-video-id-here&gt;/sddefault.jpg
</code></pre>

<p>For the maximum resolution version of the thumbnail use a url similar to this:</p>

<pre><code>https://img.youtube.com/vi/&lt;insert-youtube-video-id-here&gt;/maxresdefault.jpg
</code></pre>

<p>All of the above urls are available over http too. Additionally, the slightly shorter hostname <code>i3.ytimg.com</code> works in place of <code>img.youtube.com</code> in the example urls above.</p>

<p>Alternatively, you can use the <a href=""https://developers.google.com/youtube/v3/"" rel=""noreferrer"">YouTube Data API (v3)</a> to get thumbnail images.</p>
","2068371"
"ToString() equivalent in PHP","1252072","","<p>How do I convert the value of a PHP variable to string?</p>

<p>I was looking for something better than concatenating with an empty string:</p>

<pre><code>$myText = $myVar . '';
</code></pre>

<p>Like the <code>ToString()</code> method in Java or .NET.</p>
","<p>You can use the <a href=""http://us3.php.net/manual/en/language.types.type-juggling.php"" rel=""noreferrer"">casting operators</a>:</p>

<pre><code>$myText = (string)$myVar;
</code></pre>

<p>There are more details for string casting and conversion in the <a href=""http://us3.php.net/manual/en/language.types.string.php#language.types.string.casting"" rel=""noreferrer"">Strings section</a> of the PHP manual, including special handling for booleans and nulls.</p>
","28111"
"PHP: ""Notice: Undefined variable"", ""Notice: Undefined index"", and ""Notice: Undefined offset""","1233948","","<p>I am running a PHP script, and keep getting errors like:</p>

<blockquote>
  <p>Notice: Undefined variable: my_variable_name in C:\wamp\www\mypath\index.php on line 10</p>
  
  <p>Notice: Undefined index: my_index C:\wamp\www\mypath\index.php on line 11</p>
</blockquote>

<p>Line 10 and 11 looks like this:</p>

<pre><code>echo ""My variable value is: "" . $my_variable_name;
echo ""My index value is: "" . $my_array[""my_index""];
</code></pre>

<p>What do these errors mean?</p>

<p>Why do they appear all of a sudden? I used to use this script for years and I've never had any problem.</p>

<p>What do I need to do to fix them? </p>

<blockquote>
  <p><strong>This is a General Reference question</strong> for people to link to as duplicate, instead of having to explain the issue over and over again. I feel this is necessary because most  real-world answers on this issue are very specific. </p>
  
  <p>Related Meta discussion:</p>
  
  <ul>
  <li><a href=""https://meta.stackexchange.com/questions/62258/what-can-be-done-about-repetitive-questions"">What can be done about repetitive questions?</a></li>
  <li><a href=""https://meta.stackexchange.com/questions/63762/do-reference-questions-make-sense"">Do “reference questions” make sense?</a></li>
  </ul>
</blockquote>
","<h1>Notice: Undefined variable</h1>

<p>From the vast wisdom of the <a href=""http://php.net/manual/en/language.variables.basics.php#example-112"" rel=""noreferrer"">PHP Manual</a>:</p>

<blockquote>
  <p>Relying on the default value of an uninitialized variable is problematic in the case of including one file into another which uses the same variable name. It is also a major <a href=""http://www.php.net/manual/en/security.globals.php"" rel=""noreferrer"">security risk</a> with <a href=""http://www.php.net/manual/en/ini.core.php#ini.register-globals"" rel=""noreferrer"">register_globals</a> turned on. <a href=""http://www.php.net/manual/en/errorfunc.constants.php#errorfunc.constants.errorlevels.e-notice"" rel=""noreferrer"">E_NOTICE</a> level error is issued in case of working with uninitialized variables, however not in the case of appending elements to the uninitialized array. <a href=""http://www.php.net/manual/en/function.isset.php"" rel=""noreferrer"">isset()</a> language construct can be used to detect if a variable has been already initialized. Additionally and more ideal is the solution of <a href=""http://php.net/manual/en/function.empty.php"" rel=""noreferrer"">empty()</a> since it does not generate a warning or error message if the variable is not initialized. </p>
</blockquote>

<p>From <a href=""http://php.net/manual/en/function.empty.php"" rel=""noreferrer"">PHP documentation</a>:</p>

<blockquote>
  <p>No warning is generated if the variable does not exist. That means
     <strong>empty()</strong> is essentially the concise equivalent to <strong>!isset($var) || $var
     == false</strong>.</p>
</blockquote>

<p>This means that you could use only <code>empty()</code> to determine if the variable is set, and in addition it checks the variable against the following, <code>0,"""",null</code>.</p>

<p>Example:</p>

<p>

<pre><code>$o = [];
@$var = ["""",0,null,1,2,3,$foo,$o['myIndex']];
array_walk($var, function($v) {
    echo (!isset($v) || $v == false) ? 'true ' : 'false';
    echo ' ' . (empty($v) ? 'true' : 'false');
    echo ""\n"";
});
</code></pre>

<p>Test the above snippet in the <a href=""https://3v4l.org/5Wvgj"" rel=""noreferrer"">3v4l.org online PHP editor</a></p>

<p>Although PHP does not require a variable declaration, it does recommend it in order to avoid some security vulnerabilities or bugs where one would forget to give a value to a variable that will be used later in the script. What PHP does in the case of undeclared variables is issue a very low level error, <code>E_NOTICE</code>, one that is not even reported by default, but the Manual <a href=""http://www.php.net/manual/en/errorfunc.configuration.php#ini.error-reporting"" rel=""noreferrer"">advises to allow</a> during development.</p>

<p>Ways to deal with the issue:</p>

<ol>
<li><p><strong>Recommended:</strong> Declare your variables, for example when you try to append a string to an undefined variable. Or use <a href=""http://www.php.net/manual/en/function.isset.php"" rel=""noreferrer""><code>isset()</code></a> / <a href=""http://php.net/manual/en/function.empty.php"" rel=""noreferrer""><code>!empty()</code></a>  to check if they are declared before referencing them, as in:</p>

<pre><code>//Initializing variable
$value = """"; //Initialization value; Examples
             //"""" When you want to append stuff later
             //0  When you want to add numbers later
//isset()
$value = isset($_POST['value']) ? $_POST['value'] : '';
//empty()
$value = !empty($_POST['value']) ? $_POST['value'] : '';
</code></pre>

<p>This has become much cleaner as of PHP 7.0, now you can use the <a href=""https://wiki.php.net/rfc/isset_ternary"" rel=""noreferrer"">null coalesce operator</a>:</p>

<pre><code>// Null coalesce operator - No need to explicitly initialize the variable.
$value = $_POST['value'] ?? '';
</code></pre></li>
<li><p>Set a <a href=""http://www.php.net/manual/en/function.set-error-handler.php"" rel=""noreferrer"">custom error handler</a> for E_NOTICE and redirect the messages away from the standard output (maybe to a log file):  </p>

<pre><code>set_error_handler('myHandlerForMinorErrors', E_NOTICE | E_STRICT)
</code></pre></li>
<li><p>Disable E_NOTICE from reporting. A quick way to exclude just <code>E_NOTICE</code> is:</p>

<pre><code>error_reporting( error_reporting() &amp; ~E_NOTICE )
</code></pre></li>
<li><p>Suppress the error with the <a href=""http://php.net/manual/en/language.operators.errorcontrol.php"" rel=""noreferrer"">@ operator</a>.</p></li>
</ol>

<p><strong>Note:</strong> It's strongly recommended to implement just point 1.</p>

<h1>Notice: Undefined index / Undefined offset</h1>

<p>This notice appears when you (or PHP) try to access an undefined index of an array.</p>

<p>Ways to deal with the issue:</p>

<ol>
<li><p>Check if the index exists before you access it. For this you can use <a href=""http://php.net/manual/en/function.isset.php"" rel=""noreferrer""><code>isset()</code></a> or <a href=""http://php.net/manual/en/function.array-key-exists.php"" rel=""noreferrer""><code>array_key_exists()</code></a>:</p>

<pre><code>//isset()
$value = isset($array['my_index']) ? $array['my_index'] : '';
//array_key_exists()
$value = array_key_exists('my_index', $array) ? $array['my_index'] : '';
</code></pre></li>
<li><p>The language construct <a href=""http://php.net/manual/en/function.list.php"" rel=""noreferrer""><code>list()</code></a> may generate this when it attempts to access an array index that does not exist:</p>

<pre><code>list($a, $b) = array(0 =&gt; 'a');
//or
list($one, $two) = explode(',', 'test string');
</code></pre></li>
</ol>

<p>Two variables are used to access two array elements, however there is only one array element, index <code>0</code>, so this will generate:</p>

<blockquote>
  <p>Notice: Undefined offset: 1</p>
</blockquote>

<h1><code>$_POST</code> / <code>$_GET</code> / <code>$_SESSION</code> variable</h1>

<p>The notices above appear often when working with <code>$_POST</code>, <code>$_GET</code> or <code>$_SESSION</code>. For <code>$_POST</code> and <code>$_GET</code> you just have to check if the index exists or not before you use them. For <code>$_SESSION</code> you have to make sure you have the session started with <a href=""http://php.net/manual/en/function.session-start.php"" rel=""noreferrer""><code>session_start()</code></a> and that the index also exists.</p>

<p>Also note that all 3 variables are <a href=""http://php.net/manual/en/language.variables.superglobals.php"" rel=""noreferrer"">superglobals</a>. This means they need to be written in uppercase.</p>

<p>Related:</p>

<ul>
<li><a href=""https://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12778634#12778634"">Notice: Undefined variable</a></li>
<li><a href=""https://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12770836#12770836"">Notice: Undefined Index</a> </li>
</ul>
","4261200"
"Convert date format yyyy-mm-dd => dd-mm-yyyy","1177230","","<p>I am trying to convert a date from yyyy-mm-dd to dd-mm-yyyy (but not in SQL); however I don't know how the date function requires a timestamp, and I can't get a timestamp from this string.</p>

<p>How is this possible?</p>
","<p>Use <code>strtotime()</code> and <code>date()</code>:</p>

<pre><code>$originalDate = ""2010-03-21"";
$newDate = date(""d-m-Y"", strtotime($originalDate));
</code></pre>

<p>(see <a href=""http://php.net/strtotime"" rel=""noreferrer"">strtotime</a> and <a href=""http://php.net/date"" rel=""noreferrer"">date</a> docs on the PHP site).</p>

<p><strong>Edit</strong>: Note that this was a quick solution to the original question. For more extensive conversions, you should really be using the <a href=""http://php.net/manual/en/class.datetime.php"" rel=""noreferrer""><code>DateTime</code></a> class to parse &amp; format :-)</p>
","2487938"
"jQuery Ajax POST example with PHP","1041266","","<p>I am trying to send data from a form to a database. Here is the form I am using:</p>

<pre><code>&lt;form name=""foo"" action=""form.php"" method=""POST"" id=""foo""&gt;
    &lt;label for=""bar""&gt;A bar&lt;/label&gt;
    &lt;input id=""bar"" name=""bar"" type=""text"" value="""" /&gt;
    &lt;input type=""submit"" value=""Send"" /&gt;
&lt;/form&gt;
</code></pre>

<p>The typical approach would be to submit the form, but this causes the browser to redirect. Using jQuery and <a href=""http://en.wikipedia.org/wiki/Ajax_%28programming%29"" rel=""noreferrer"">Ajax</a>, is it possible to capture all of the form's data and submit it to a PHP script (in example, <em>form.php</em>)?</p>
","<p>Basic usage of <a href=""https://api.jquery.com/jQuery.ajax/"" rel=""noreferrer""><code>.ajax</code></a> would look something like this:</p>

<p><strong>HTML:</strong></p>

<pre><code>&lt;form id=""foo""&gt;
    &lt;label for=""bar""&gt;A bar&lt;/label&gt;
    &lt;input id=""bar"" name=""bar"" type=""text"" value="""" /&gt;

    &lt;input type=""submit"" value=""Send"" /&gt;
&lt;/form&gt;
</code></pre>

<p><strong>JQuery:</strong></p>

<pre><code>// Variable to hold request
var request;

// Bind to the submit event of our form
$(""#foo"").submit(function(event){

    // Prevent default posting of form - put here to work in case of errors
    event.preventDefault();

    // Abort any pending request
    if (request) {
        request.abort();
    }
    // setup some local variables
    var $form = $(this);

    // Let's select and cache all the fields
    var $inputs = $form.find(""input, select, button, textarea"");

    // Serialize the data in the form
    var serializedData = $form.serialize();

    // Let's disable the inputs for the duration of the Ajax request.
    // Note: we disable elements AFTER the form data has been serialized.
    // Disabled form elements will not be serialized.
    $inputs.prop(""disabled"", true);

    // Fire off the request to /form.php
    request = $.ajax({
        url: ""/form.php"",
        type: ""post"",
        data: serializedData
    });

    // Callback handler that will be called on success
    request.done(function (response, textStatus, jqXHR){
        // Log a message to the console
        console.log(""Hooray, it worked!"");
    });

    // Callback handler that will be called on failure
    request.fail(function (jqXHR, textStatus, errorThrown){
        // Log the error to the console
        console.error(
            ""The following error occurred: ""+
            textStatus, errorThrown
        );
    });

    // Callback handler that will be called regardless
    // if the request failed or succeeded
    request.always(function () {
        // Reenable the inputs
        $inputs.prop(""disabled"", false);
    });

});
</code></pre>

<p><em>Note: Since jQuery 1.8, <code>.success()</code>, <code>.error()</code> and <code>.complete()</code> are deprecated in favor of <code>.done()</code>, <code>.fail()</code> and <code>.always()</code>.</em></p>

<p><em>Note: Remember that the above snippet has to be done after DOM ready, so you should put it inside a <a href=""https://api.jquery.com/ready/"" rel=""noreferrer""><code>$(document).ready()</code></a> handler (or use the <code>$()</code> shorthand).</em></p>

<p><em>Tip: You can <a href=""http://www.jquerybyexample.net/2012/06/what-is-chaining-in-jquery.html"" rel=""noreferrer"">chain</a> the callback handlers like this: <code>$.ajax().done().fail().always();</code></em></p>

<p><strong>PHP (that is, form.php):</strong></p>

<pre><code>// You can access the values posted by jQuery.ajax
// through the global variable $_POST, like this:
$bar = isset($_POST['bar']) ? $_POST['bar'] : null;
</code></pre>

<p><em>Note: Always <a href=""https://stackoverflow.com/questions/1314518/sanitizing-users-data-in-get-by-php"">sanitize posted data</a>, to prevent injections and other malicious code.</em></p>

<p>You could also use the shorthand <a href=""https://api.jquery.com/jQuery.post/"" rel=""noreferrer""><code>.post</code></a> in place of <code>.ajax</code> in the above JavaScript code:</p>

<pre><code>$.post('/form.php', serializedData, function(response) {
    // Log the response to the console
    console.log(""Response: ""+response);
});
</code></pre>

<p><em>Note: The above JavaScript code is made to work with jQuery 1.8 and later, but it should work with previous versions down to jQuery 1.5.</em></p>
","5004276"
"NOW() function in PHP","1041049","","<p>Is there a PHP function that returns the date &amp; time in the same format as the MySQL function <code>NOW()</code>? </p>

<p>I know how to do it using <code>date()</code>, but I am asking if there is a function only for this. </p>

<p>For example to return:</p>

<pre><code>2009-12-01 00:00:00
</code></pre>
","<p>Not besides <code>date(""Y-m-d H:i:s"")</code></p>
","1995565"
"How to fix ""Headers already sent"" error in PHP","950590","","<p>When running my script, I am getting several errors like this:</p>

<blockquote>
  <p>Warning: Cannot modify header information - headers already sent by (<strong>output started at /some/file.php:12</strong>) in <strong>/some/file.php</strong> on <strong>line 23</strong></p>
</blockquote>

<p>The lines mentioned in the error messages contain <a href=""http://php.net/header"" rel=""noreferrer""><code>header()</code></a> and <a href=""http://php.net/setcookie"" rel=""noreferrer""><code>setcookie()</code></a> calls.</p>

<p>What could be the reason for this? And how to fix it?</p>
","<h2>No output before sending headers!</h2>

<p>Functions that send/modify HTTP headers must be invoked <strong><em>before any output is made</em></strong>.
<kbd><a href=""https://stackoverflow.com/a/8028979/345031""><strong>summary ⇊</strong></a></kbd>
Otherwise the call fails:</p>

<blockquote>
  <p>Warning: Cannot modify header information - headers already sent (output started at <i>script:line</i>)</p>
</blockquote>

<p>Some functions modifying the HTTP header are:</p>

<ul>
<li><a href=""http://php.net/header"" rel=""noreferrer""><code>header</code></a> / <a href=""http://php.net/header_remove"" rel=""noreferrer""><code>header_remove</code></a></li>
<li><a href=""http://php.net/session_start"" rel=""noreferrer""><code>session_start</code></a> / <a href=""http://php.net/session_regenerate_id"" rel=""noreferrer""><code>session_regenerate_id</code></a></li>
<li><a href=""http://php.net/setcookie"" rel=""noreferrer""><code>setcookie</code></a> / <a href=""http://php.net/setrawcookie"" rel=""noreferrer""><code>setrawcookie</code></a></li>
</ul>

<p>Output can be:</p>

<ul>
<li><p><em>Unintentional:</em></p>

<ul>
<li>Whitespace before <code>&lt;?php</code> or after <code>?&gt;</code></li>
<li>The <a href=""http://en.wikipedia.org/wiki/Byte_order_mark"" rel=""noreferrer"">UTF-8 Byte Order Mark</a> specifically</li>
<li>Previous error messages or notices</li>
</ul></li>
</ul>



<ul>
<li><p><em>Intentional:</em></p>

<ul>
<li><code>print</code>, <code>echo</code> and other functions producing output</li>
<li>Raw <code>&lt;html&gt;</code> sections prior <code>&lt;?php</code> code. </li>
</ul></li>
</ul>

<h2>Why does it happen?</h2>

<p>To understand why headers must be sent before output it's necessary
to look at a typical <a href=""http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol"" rel=""noreferrer"">HTTP</a>
response. PHP scripts mainly generate HTML content, but also pass a
set of HTTP/CGI headers to the webserver:</p>

<pre><code>HTTP/1.1 200 OK
Powered-By: PHP/5.3.7
Vary: Accept-Encoding
Content-Type: text/html; charset=utf-8

&lt;html&gt;&lt;head&gt;&lt;title&gt;PHP page output page&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;&lt;h1&gt;Content&lt;/h1&gt; &lt;p&gt;Some more output follows...&lt;/p&gt;
and &lt;a href=""/""&gt; &lt;img src=internal-icon-delayed&gt; &lt;/a&gt;
</code></pre>

<p>The page/output always <em>follows</em> the headers. PHP has to pass the
headers to the webserver first. It can only do that once.
After the double linebreak it can nevermore amend them.</p>

<p>When PHP receives the first output (<code>print</code>, <code>echo</code>, <code>&lt;html&gt;</code>) it will
<em>flush</em> all collected headers. Afterwards it can send all the output
it wants. But sending further HTTP headers is impossible then.</p>

<h2>How can you find out where the premature output occured?</h2>

<p>The <code>header()</code> warning contains all relevant information to
locate the problem cause:</p>

<blockquote>
  <p>Warning: Cannot modify header information - headers already sent by
  <strong><em>(output started at</em></strong> /www/usr2345/htdocs/<b>auth.php:52</b>) in
  /www/usr2345/htdocs/index.php on line 100</p>
</blockquote>

<p>Here ""line 100"" refers to the script where the <code>header()</code> <em>invocation</em> failed.</p>

<p>The ""<em>output started at</em>"" note within the parenthesis is more significant.
It denominates the source of previous output. In this example it's <code>auth.php</code>
and <strong>line <code>52</code></strong>. That's where you had to look for premature output.</p>

<p><em>Typical causes:</em></p>

<ol>
<li><h3>Print, echo</h3>

<p>Intentional output from <code>print</code> and <code>echo</code> statements will terminate
the opportunity to send HTTP headers. The application flow must
be restructured to avoid that. Use <a href=""http://php.net/function"" rel=""noreferrer"">functions</a>
and templating schemes. Ensure <code>header()</code> calls occur <em>before</em> messages
are written out.</p>

<p>Functions that produce output include</p>

<ul>
<li><code>print</code>, <code>echo</code>, <code>printf</code>, <code>vprintf</code></li>
<li><code>trigger_error</code>, <code>ob_flush</code>, <code>ob_end_flush</code>, <code>var_dump</code>, <code>print_r</code></li>
<li><code>readfile</code>, <code>passthru</code>, <code>flush</code>, <code>imagepng</code>, <code>imagejpeg</code></li>
</ul>

<p><br> among others and user-defined functions.</p></li>
<li><h3>Raw HTML areas</h3>

<p>Unparsed HTML sections in a <code>.php</code> file are direct output as well.
Script conditions that will trigger a <code>header()</code> call must be noted
before <em>any</em> raw <code>&lt;html&gt;</code> blocks.</p>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;?php
    // Too late for headers already.
</code></pre>

<p>Use a templating scheme to separate processing from output logic.</p>

<ul>
<li>Place form processing code atop scripts.</li>
<li>Use temporary string variables to defer messages.</li>
<li>The actual output logic and intermixed HTML output should follow last.<br>
<br></li>
</ul></li>
<li><h3>Whitespace before <code>&lt;?php</code> for ""script.php <strong>line 1</strong>"" warnings</h3>

<p>If the warning refers to output in line <strong><code>1</code></strong>, then it's mostly
leading <strong>whitespace</strong>, text or HTML before the opening <code>&lt;?php</code> token.</p>

<pre><code> &lt;?php
# There's a SINGLE space/newline before &lt;? - Which already seals it.
</code></pre>

<p>Similarly it can occur for appended scripts or script sections:</p>

<pre><code>?&gt;

&lt;?php
</code></pre>

<p>PHP actually eats up a <em>single</em> linebreak after close tags. But it won't
compensate multiple newlines or tabs or spaces shifted into such gaps.</p></li>
<li><h3>UTF-8 BOM</h3>

<p>Linebreaks and spaces alone can be a problem. But there are also ""invisible""
character sequences which can cause this. Most famously the
<a href=""http://en.wikipedia.org/wiki/Byte_order_mark"" rel=""noreferrer""><strong>UTF-8 BOM</strong> (Byte-Order-Mark)</a>
which isn't displayed by most text editors. It's the byte sequence <code>EF BB BF</code>, which
is optional and redundant for UTF-8 encoded documents. PHP however has to treat
it as raw output. It may show up as the characters <code>ï»¿</code> in the output (if the client
interprets the document as Latin-1) or similar ""garbage"".</p>

<p>In particular graphical editors and Java based IDEs are oblivious to its
presence. They don't visualize it (obliged by the Unicode standard).
Most programmer and console editors however do:</p>

<p><img src=""https://i.stack.imgur.com/aXgWY.png"" width=""590"" height=""140"" alt=""joes editor showing UTF-8 BOM placeholder, and MC editor a dot""></p>

<p>There it's easy to recognize the problem early on. Other editors may identify
its presence in a file/settings menu (Notepad++ on Windows can identify and
<a href=""https://stackoverflow.com/questions/3589358/fix-utf8-bom"">remedy the problem</a>),
Another option to inspect the BOMs presence is resorting to an <strong>hexeditor</strong>.
On *nix systems <a href=""http://linux.die.net/man/1/hexdump"" rel=""noreferrer""><code>hexdump</code></a> is usually available,
if not a graphical variant which simplifies auditing these and other issues:</p>

<p><img src=""https://i.stack.imgur.com/QyqUr.png"" width=""560"" height=""87"" alt=""beav hexeditor showing utf-8 bom""></p>

<p>An easy fix is to set the text editor to save files as ""UTF-8 (no BOM)""
or similar such nomenclature. Often newcomers otherwise resort to creating new
files and just copy&amp;pasting the previous code back in.</p>

<h3>Correction utilities <img src=""https://i.stack.imgur.com/wnAS9.gif"" width=""30"" height=""20""></h3>

<p>There are also automated tools to examine and rewrite text files
(<a href=""https://stackoverflow.com/questions/1068650/using-awk-to-remove-the-byte-order-mark""><code>sed</code>/<code>awk</code></a> or <code>recode</code>).
For PHP specifically there's the <a href=""http://freshcode.club/projects/phptags"" rel=""noreferrer""><code>phptags</code> tag tidier</a>.
It rewrites close and open tags into long and short forms, but also easily
fixes leading and trailing whitespace, Unicode and UTF-x BOM issues:</p>

<pre><code>phptags  --whitespace  *.php
</code></pre>

<p>It's sane to use on a whole include or project directory.</p></li>
<li><h3>Whitespace after <code>?&gt;</code></h3>

<p>If the error source is mentioned as behind the
<a href=""https://stackoverflow.com/questions/4410704/php-closing-tag"">closing <code>?&gt;</code></a>
then this is where some whitespace or raw text got written out.
The PHP end marker does not terminate script executation at this
point. Any text/space characters after it will be written out as page content
still.</p>

<p>It's commonly advised, in particular to newcomers, that trailing <code>?&gt;</code> PHP
close tags should be omitted. This <em>eschews</em> a small portion of these cases.
(Quite commonly <code>include()d</code> scripts are the culprit.)</p></li>
<li><h3>Error source mentioned as ""Unknown on line 0""</h3>

<p>It's typically a PHP extension or php.ini setting if no error source
is concretized.</p>

<ul>
<li>It's occasionally the <code>gzip</code> stream encoding setting
<a href=""https://stackoverflow.com/questions/622192/php-warning-headers-already-sent-in-unknown"">or the <code>ob_gzhandler</code></a>.</li>
<li>But it could also be any doubly loaded <code>extension=</code> module
generating an implicit PHP startup/warning message.<br>
<br></li>
</ul></li>
<li><h3>Preceding error messages</h3>

<p>If another PHP statement or expression causes a warning message or
notice being printeded out, that also counts as premature output.</p>

<p>In this case you need to eschew the error,
delay the statement execution, or suppress the message with e.g.
<a href=""http://php.net/isset"" rel=""noreferrer""><code>isset()</code></a> or <a href=""http://php.net/@"" rel=""noreferrer""><code>@()</code></a> -
when either doesn't obstruct debugging later on.</p></li>
</ol>

<h2>No error message</h2>

<p>If you have <code>error_reporting</code> or <code>display_errors</code> disabled per <code>php.ini</code>,
then no warning will show up. But ignoring errors won't make the problem go
away. Headers still can't be sent after premature output.</p>

<p>So when <code>header(""Location: ..."")</code> redirects silently fail it's very
advisable to probe for warnings. Reenable them with two simple commands
atop the invocation script:</p>

<pre><code>error_reporting(E_ALL);
ini_set(""display_errors"", 1);
</code></pre>

<p>Or <code>set_error_handler(""var_dump"");</code> if all else fails.</p>

<p>Speaking of redirect headers, you should often use an idiom like
this for final code paths:</p>

<pre><code>exit(header(""Location: /finished.html""));
</code></pre>

<p>Preferrably even a utility function, which prints a user message
in case of <code>header()</code> failures.</p>

<h2>Output buffering as workaround</h2>

<p>PHPs <a href=""http://www.php.net/manual/en/intro.outcontrol.php"" rel=""noreferrer"">output buffering</a>
is a workaround to alleviate this issue. It often works reliably, but shouldn't
substitute for proper application structuring and separating output from control
logic. Its actual purpose is minimizing chunked transfers to the webserver.</p>

<ol>
<li><p>The <a href=""http://php.net/manual/en/outcontrol.configuration.php"" rel=""noreferrer""><code>output_buffering=</code></a>
setting nevertheless can help.
Configure it in the <a href=""http://www.php.net/manual/en/configuration.file.php"" rel=""noreferrer"">php.ini</a>
or via <a href=""http://www.php.net/manual/en/configuration.changes.php"" rel=""noreferrer"">.htaccess</a>
or even <a href=""http://php.net/manual/en/configuration.file.per-user.php"" rel=""noreferrer"">.user.ini</a> on
modern FPM/FastCGI setups.<br>
Enabling it will allow PHP to buffer output instead of passing it to the webserver
instantly. PHP thus can aggregate HTTP headers.</p></li>
<li><p>It can likewise be engaged with a call to <a href=""http://php.net/ob_start"" rel=""noreferrer""><code>ob_start();</code></a>
atop the invocation script. Which however is less reliable for multiple reasons:</p>

<ul>
<li><p>Even if <code>&lt;?php ob_start(); ?&gt;</code> starts the first script, whitespace or a
BOM might get shuffled before, <a href=""https://stackoverflow.com/questions/2168956/php-header-problem-even-i-use-ob-start-and-ob-end-flush"">rendering it ineffective</a>.</p></li>
<li><p>It can conceal whitespace for HTML output. But as soon as the application
logic attempts to send binary content (a generated image for example),
the buffered extraneous output becomes a problem. (Necessitating <code>ob_clean()</code>
as furher workaround.)</p></li>
<li><p>The buffer is limited in size, and can easily overrun when left to defaults.
And that's not a rare occurence either, <a href=""https://stackoverflow.com/questions/17643837/php-headers-already-sent-error-depending-on-output-length"">difficult to track down</a>
when it happens.</p></li>
</ul></li>
</ol>

<p>Both approaches therefore may become unreliable - in particular when switching between
development setups and/or production servers. Which is why output buffering is
widely considered just a crutch / strictly a workaround.</p>

<p>See also the <a href=""http://www.php.net/manual/en/outcontrol.examples.basic.php"" rel=""noreferrer"">basic usage example</a>
in the manual, and for more pros and cons:</p>

<ul>
<li><a href=""https://stackoverflow.com/questions/2832010/what-is-output-buffering"">What is output buffering?</a></li>
<li><a href=""https://stackoverflow.com/questions/2148114/why-use-output-buffering-in-php"">Why use output buffering in PHP?</a></li>
<li><a href=""https://stackoverflow.com/questions/4731375/is-using-output-buffering-considered-a-bad-practice"">Is using output buffering considered a bad practice?</a></li>
<li><a href=""https://stackoverflow.com/questions/2919569/use-case-for-output-buffering-as-the-correct-solution-to-headers-already-sent"">Use case for output buffering as the correct solution to &quot;headers already sent&quot;</a></li>
</ul>

<h3>But it worked on the other server!?</h3>

<p>If you didn't get the headers warning before, then the <a href=""http://php.net/manual/en/outcontrol.configuration.php"" rel=""noreferrer"">output buffering
 php.ini setting</a>
 has changed. It's likely unconfigured on the current/new server.</p>

<h2>Checking with <code>headers_sent()</code></h2>

<p>You can always use <a href=""http://php.net/headers_sent"" rel=""noreferrer""><code>headers_sent()</code></a> to probe if
it's still possible to... send headers. Which is useful to conditionally print
an info or apply other fallback logic.</p>

<pre><code>if (headers_sent()) {
    die(""Redirect failed. Please click on this link: &lt;a href=...&gt;"");
}
else{
    exit(header(""Location: /user.php""));
}
</code></pre>

<p>Useful fallback workarounds are:</p>

<ul>
<li><h3>HTML <code>&lt;meta&gt;</code> tag</h3>

<p>If your application is structurally hard to fix, then an easy (but
somewhat unprofessional) way to allow redirects is injecting a HTML
<code>&lt;meta&gt;</code> tag. A redirect can be achieved with:</p>

<pre><code> &lt;meta http-equiv=""Location"" content=""http://example.com/""&gt;
</code></pre>

<p>Or with a short delay:</p>

<pre><code> &lt;meta http-equiv=""Refresh"" content=""2; url=../target.html""&gt;
</code></pre>

<p>This leads to non-valid HTML when utilized past the <code>&lt;head&gt;</code> section.
Most browsers still accept it.</p></li>
<li><h3>JavaScript redirect</h3>

<p>As alternative a <a href=""https://stackoverflow.com/questions/503093/how-can-i-make-a-redirect-page-in-jquery-javascript"">JavaScript redirect</a>
can be used for page redirects:</p>

<pre><code> &lt;script&gt; location.replace(""target.html""); &lt;/script&gt;
</code></pre>

<p>While this is often more HTML compliant than the <code>&lt;meta&gt;</code> workaround,
it incurs a reliance on JavaScript-capable clients.</p></li>
</ul>

<p>Both approaches however make acceptable fallbacks when genuine HTTP header()
calls fail. Ideally you'd always combine this with a user-friendly message and
clickable link as last resort. (Which for instance is what the <a href=""http://php.net/http_redirect"" rel=""noreferrer"">http_redirect()</a>
PECL extension does.)</p>

<h2>Why <code>setcookie()</code> and <code>session_start()</code> are also affected</h2>

<p>Both <code>setcookie()</code> and <code>session_start()</code> need to send a <code>Set-Cookie:</code> HTTP header.
The same conditions therefore apply, and similar error messages will be generated
for premature output situations.</p>

<p>(Of course they're furthermore affected by disabled cookies in the browser,
or even proxy issues. The session functionality obviously also depends on free
disk space and other php.ini settings, etc.)</p>

<h2>Further links</h2>

<ul>
<li>Google provides a <a href=""http://www.google.com/search?q=php+headers+already+sent"" rel=""noreferrer"">lengthy list of similar discussions</a>.</li>
<li>And of course <a href=""https://stackoverflow.com/search?q=[php]+headers+already+sent"">many specific cases</a> have been covered on Stack Overflow as well.</li>
<li>The Wordpress FAQ explains <a href=""http://codex.wordpress.org/FAQ_Troubleshooting#How_do_I_solve_the_Headers_already_sent_warning_problem.3F"" rel=""noreferrer"">How do I solve the Headers already sent warning problem?</a> in a generic manner.</li>
<li>Adobe Community: <a href=""http://kb2.adobe.com/community/publishing/505/cpsid_50572.html"" rel=""noreferrer"">PHP development: why redirects don't work (headers already sent)</a></li>
<li>Nucleus FAQ: <a href=""http://faq.nucleuscms.org/item/79"" rel=""noreferrer"">What does ""page headers already sent"" mean?</a></li>
<li>One of the more thorough explanations is <a href=""http://web.archive.org/web/20080430141149/http://www.expertsrt.com/tutorials/Matt/HTTP_headers.html"" rel=""noreferrer"">HTTP Headers and the PHP header() Function - A tutorial by NicholasSolutions</a> (Internet Archive link).
It covers HTTP in detail and gives a few guidelines for rewriting scripts.</li>
</ul>
","8028987"
"Get the first element of an array","941610","","<p>I have an array:  </p>

<p><code>array( 4 =&gt; 'apple', 7 =&gt; 'orange', 13 =&gt; 'plum' )</code></p>

<p>I would like to get the first element of this array. Expected result: <i>string</i> <code>apple</code>  </p>

<p>One requirement: <em>it cannot be done with passing by reference</em>, so <code>array_shift</code> is not a good solution.</p>

<p>How can I do this?</p>
","<p>Original answer, but costly (O(n)):</p>

<pre><code>array_shift(array_values($array));
</code></pre>

<p>In O(1):</p>

<pre><code>array_pop(array_reverse($array));
</code></pre>

<p><strong>Edited with suggestions from comments for other use cases etc...</strong></p>

<p>If modifying (in the sense of resetting array pointers) of <code>$array</code> is not a problem, you might use:</p>

<pre><code>reset($array);
</code></pre>

<p>This should be theoretically more efficient, if a array ""copy"" is needed:</p>

<pre><code>array_shift(array_slice($array, 0, 1)); 
</code></pre>

<p>With PHP 5.4+ (but might cause an index error if empty):</p>

<pre><code>array_values($array)[0];
</code></pre>
","3771228"
"How do I convert a string to a number in PHP?","903900","","<p>I want to convert these types of values, <code>'3'</code>, <code>'2.34'</code>, <code>'0.234343'</code>, etc. to a number. In JavaScript we can use <code>Number()</code>, but is there any similar method available in PHP?</p>

<pre><code>Input             Output
'2'               2
'2.34'            2.34
'0.3454545'       0.3454545
</code></pre>
","<p>You don't typically need to do this, since PHP will coerce the type for you in most circumstances. For situations where you do want to explicitly convert the type, <a href=""http://www.php.net/manual/en/language.types.type-juggling.php#language.types.typecasting""><em>cast</em></a> it:</p>

<pre><code>$num = ""3.14"";
$int = (int)$num;
$float = (float)$num;
</code></pre>
","8529687"
"Converting an integer to a string in PHP","880074","","<p>Is there a way to convert an integer to a string in PHP?</p>
","<p>You can use the <code>strval()</code> function to convert a number to a string.</p>

<p>From a maintenance perspective its obvious what you are trying to do rather than some of the other more esoteric answers.  Of course, it depends on your context.</p>

<pre><code>$var = 5;

// Inline variable parsing
echo ""I'd like {$var} waffles""; // = ""I'd like 5 waffles

// String concatenation 
echo ""I'd like "".$var."" waffles""; // I'd like 5 waffles

// Explicit cast 
$items = (string)$var; // $items === ""5"";

// Function call
$items = strval($var); // $items === ""5"";
</code></pre>
","1035658"
"PHP random string generator","837526","","<p>I'm trying to create a randomized string in PHP, and I get absolutely no output with this:</p>

<pre><code>&lt;?php
function RandomString()
{
    $characters = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
    $randstring = '';
    for ($i = 0; $i &lt; 10; $i++) {
        $randstring = $characters[rand(0, strlen($characters))];
    }
    return $randstring;
}
RandomString();
echo $randstring;
</code></pre>

<p>What am I doing wrong?</p>
","<p>To answer this question specifically, two problems: </p>

<ol>
<li><code>$randstring</code> is not in scope when you echo it.</li>
<li>The characters are not getting concatenated together in the loop.</li>
</ol>

<p>Here's a code snippet with the corrections:</p>

<pre><code>function generateRandomString($length = 10) {
    $characters = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
    $charactersLength = strlen($characters);
    $randomString = '';
    for ($i = 0; $i &lt; $length; $i++) {
        $randomString .= $characters[rand(0, $charactersLength - 1)];
    }
    return $randomString;
}
</code></pre>

<p>Output the random string with the call below:</p>

<pre><code>// Echo the random string.
// Optionally, you can give it a desired string length.
echo generateRandomString();
</code></pre>

<blockquote>
  <p><strong>Please note that this generates predictable random strings. If you want to create secure tokens, <a href=""https://stackoverflow.com/a/31107425/2373138"">see this answer</a>.</strong></p>
</blockquote>
","4356295"
"Set HTTP header to UTF-8 using PHP","794052","","<p>I have several <a href=""http://en.wikipedia.org/wiki/PHP"" rel=""noreferrer"">PHP</a> pages echoing out various things into <a href=""http://en.wikipedia.org/wiki/HTML"" rel=""noreferrer"">HTML</a> pages with the following code.</p>

<pre><code>&lt;meta http-equiv=""Content-type"" content=""text/html; charset=utf-8"" /&gt;
</code></pre>

<p>However, when I validate using the <a href=""https://en.wikipedia.org/wiki/W3C_Markup_Validation_Service"" rel=""noreferrer"">W3C validator</a> it comes up with:</p>

<blockquote>
  <p>The character encoding specified in the HTTP header (iso-8859-1) is different from the value in the  element (utf-8).</p>
</blockquote>

<p>I am quite new to PHP, and I was wondering if I could and should change the header for the PHP files to match the HTML files.</p>
","<p>Use <a href=""http://php.net/header"" rel=""noreferrer""><code>header</code></a> to modify the HTTP header:</p>

<pre><code>header('Content-Type: text/html; charset=utf-8');
</code></pre>

<p>Note to call this function before any output has been sent to the client. Otherwise the header has been sent too and you obviously can’t change it any more. You can check that with <a href=""http://php.net/headers_sent"" rel=""noreferrer""><code>headers_sent</code></a>. See the <a href=""http://php.net/header"" rel=""noreferrer"">manual page of <code>header</code></a> for more information.</p>
","4279294"
"How to strip all spaces out of a string in php?","788285","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/1279774/to-strip-whitespaces-inside-a-variable-in-php"">To strip whitespaces inside a variable in PHP</a>  </p>
</blockquote>



<p>How can i <strong>strip</strong> / <strong>remove</strong> all <strong>spaces</strong> of a <strong>string</strong> in PHP?</p>

<p>I have a <strong>string</strong> like <code>$string = ""this is my string"";</code>
the output should be  <code>""thisismystring""</code></p>

<p>How can i do that?</p>
","<p>Do you just mean spaces or all whitespace?</p>

<p>For just spaces, use <a href=""http://php.net/manual/en/function.str-replace.php"" rel=""noreferrer"">str_replace</a>:</p>

<pre><code>$string = str_replace(' ', '', $string);
</code></pre>

<p>For all whitespace, use <a href=""http://php.net/manual/en/function.preg-replace.php"" rel=""noreferrer"">preg_replace</a>:</p>

<pre><code>$string = preg_replace('/\s+/', '', $string);
</code></pre>

<p>(From <a href=""https://stackoverflow.com/questions/1279774/to-strip-whitespaces-inside-a-variable-in-php"">here</a>).</p>
","2109339"
"How do I use PHP to get the current year?","785578","","<p>I want to put a copyright notice in the footer of a web site, but I think it's incredibly tacky for the year to be out-of-date. How would I make the year update automatically with <a href=""http://en.wikipedia.org/wiki/PHP#History"">PHP&nbsp;4</a> and <a href=""http://en.wikipedia.org/wiki/PHP#History"">PHP&nbsp;5</a>?</p>
","<p>You can use either <a href=""http://php.net/manual/en/function.date.php"" rel=""noreferrer"">date</a> or <a href=""http://php.net/manual/en/function.strftime.php"" rel=""noreferrer"">strftime</a>. In this case I'd say it doesn't matter as a year is a year, no matter what (unless there's a locale that formats the year differently?)</p>

<p>For example:</p>

<pre><code>&lt;?php echo date(""Y""); ?&gt;
</code></pre>

<p>On a side note, when formatting dates in PHP it matters when you want to format your date in a different locale than your default. If so, you have to use setlocale and strftime. According to the <a href=""http://php.net/manual/en/function.date.php"" rel=""noreferrer"">php manual</a> on date:</p>

<blockquote>
  <p>To format dates in other languages,
  you should use the setlocale() and
  strftime()  functions instead of
  date().</p>
</blockquote>

<p>From this point of view, I think it would be best to use strftime as much as possible, if you even have a remote possibility of having to localize your application. If that's not an issue, pick the one you like best.</p>
","64097"
"How do I expire a PHP session after 30 minutes?","751958","","<p>I need to keep a session alive for 30 minutes and then destroy it. </p>
","<p>You should implement a session timeout of your own. Both options mentioned by others (<a href=""http://php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime"" rel=""noreferrer""><em>session.gc_maxlifetime</em></a> and <a href=""http://php.net/manual/en/session.configuration.php#ini.session.cookie-lifetime"" rel=""noreferrer""><em>session.cookie_lifetime</em></a>) are not reliable. I'll explain the reasons for that.</p>

<p><strong>First:</strong></p>

<blockquote>
  <p><strong>session.gc_maxlifetime</strong><br>
  <em>session.gc_maxlifetime</em> specifies the number of seconds after which data will be seen as 'garbage' and cleaned up. Garbage collection occurs during session start.</p>
</blockquote>

<p>But the garbage collector is only started with a probability of <a href=""http://php.net/manual/en/session.configuration.php#ini.session.gc-probability"" rel=""noreferrer""><em>session.gc_probability</em></a> divided by <a href=""http://php.net/manual/en/session.configuration.php#ini.session.gc-divisor"" rel=""noreferrer""><em>session.gc_divisor</em></a>. And using the default values for those options (1 and 100 respectively), the chance is only at 1%.</p>

<p>Well, you could simply adjust these values so that the garbage collector is started more often. But when the garbage collector is started, it will check the validity for every registered session. And that is cost-intensive.</p>

<p>Furthermore, when using PHP's default <a href=""http://php.net/manual/en/session.configuration.php#ini.session.save-handler"" rel=""noreferrer""><em>session.save_handler</em></a> files, the session data is stored in files in a path specified in <a href=""http://php.net/manual/en/session.configuration.php#ini.session.save-path"" rel=""noreferrer""><em>session.save_path</em></a>. With that session handler, the age of the session data is calculated on the file's last modification date and not the last access date:</p>

<blockquote>
  <p><strong>Note:</strong> If you are using the default file-based session handler, your filesystem must keep track of access times (atime). Windows FAT does not so you will have to come up with another way to handle garbage collecting your session if you are stuck with a FAT filesystem or any other filesystem where atime tracking is not available. Since PHP 4.2.3 it has used mtime (modified date) instead of atime. So, you won't have problems with filesystems where atime tracking is not available.</p>
</blockquote>

<p>So it additionally might occur that a session data file is deleted while the session itself is still considered as valid because the session data was not updated recently.</p>

<p><strong>And second:</strong></p>

<blockquote>
  <p><strong>session.cookie_lifetime</strong><br>
  <em>session.cookie_lifetime</em> specifies the lifetime of the cookie in seconds which is sent to the browser. […]</p>
</blockquote>

<p>Yes, that's right. This only affects the cookie lifetime and the session itself may still be valid. But it's the server's task to invalidate a session, not the client. So this doesn't help anything. In fact, having <em>session.cookie_lifetime</em> set to <code>0</code> would make the session’s cookie a real <a href=""http://en.wikipedia.org/wiki/HTTP_cookie#Session_cookie"" rel=""noreferrer"">session cookie</a> that is only valid until the browser is closed.</p>

<p><strong>Conclusion / best solution:</strong></p>

<p>The best solution is to implement a session timeout of your own. Use a simple time stamp that denotes the time of the last activity (i.e. request) and update it with every request:</p>

<pre><code>if (isset($_SESSION['LAST_ACTIVITY']) &amp;&amp; (time() - $_SESSION['LAST_ACTIVITY'] &gt; 1800)) {
    // last request was more than 30 minutes ago
    session_unset();     // unset $_SESSION variable for the run-time 
    session_destroy();   // destroy session data in storage
}
$_SESSION['LAST_ACTIVITY'] = time(); // update last activity time stamp
</code></pre>

<p>Updating the session data with every request also changes the session file's modification date so that the session is not removed by the garbage collector prematurely.</p>

<p>You can also use an additional time stamp to regenerate the session ID periodically to avoid attacks on sessions like <a href=""http://www.owasp.org/index.php/Session_fixation"" rel=""noreferrer"">session fixation</a>:</p>

<pre><code>if (!isset($_SESSION['CREATED'])) {
    $_SESSION['CREATED'] = time();
} else if (time() - $_SESSION['CREATED'] &gt; 1800) {
    // session started more than 30 minutes ago
    session_regenerate_id(true);    // change session ID for the current session and invalidate old session ID
    $_SESSION['CREATED'] = time();  // update creation time
}
</code></pre>

<p><strong>Notes:</strong></p>

<ul>
<li><code>session.gc_maxlifetime</code> should be at least equal to the lifetime of this custom expiration handler (1800 in this example);</li>
<li>if you want to expire the session after 30 minutes of <em>activity</em> instead of after 30 minutes <em>since start</em>, you'll also need to use <code>setcookie</code> with an expire of <code>time()+60*30</code> to keep the session cookie active.</li>
</ul>
","1270960"
"PHP - how to create a newline character?","738417","","<p>In PHP I am trying to create a newline character:</p>

<pre><code>echo $clientid;
echo ' ';
echo $lastname;
echo ' ';
echo '\r\n';
</code></pre>

<p>Afterwards I open the created file in Notepad and it writes the newline literally:</p>

<blockquote>
  <p>1 John Doe\r\n 1 John Doe\r\n 1 John Doe\r\n</p>
</blockquote>

<p>I have tried many variations of the <code>\r\n</code>, but none work.  Why isn't the newline turning into a newline?</p>
","<p>Only <a href=""http://php.net/manual/en/language.types.string.php#language.types.string.syntax.double"" rel=""noreferrer"">double quoted strings</a> interpret the escape sequences <code>\r</code> and <code>\n</code> as '0x0D' and '0x0A' respectively, so you want:</p>

<pre><code>""\r\n""
</code></pre>

<p><a href=""http://php.net/manual/en/language.types.string.php#language.types.string.syntax.single"" rel=""noreferrer"">Single quoted strings</a>, on the other hand, only know the escape sequences <code>\\</code> and <code>\'</code>.</p>

<p>So unless you concatenate the single quoted string with a line break generated elsewhere (e. g., using double quoted string <code>""\r\n""</code> or using <a href=""http://php.net/chr"" rel=""noreferrer""><code>chr</code> function</a> <code>chr(0x0D).chr(0x0A)</code>), the only other way to have a line break within a single quoted string is to literally type it with your editor:</p>

<pre><code>$s = 'some text before the line break
some text after';
</code></pre>

<p>Make sure to check your editor for its line break settings if you require some specific character sequence (<code>\r\n</code> for example).</p>
","4238438"
"Change the maximum upload file size","702715","","<p>I have a website hosted on a PC I have no access to. I have an upload form allowing people to upload mp3 files up to 30MB big. My server side script is done in PHP.</p>

<p>Every time I try and upload a file, I receive an error claiming that the file exceeds the maximum size allowed, so I need to increase the size. My research on the web suggested changing the <code>.htaccess</code> file which I do not have access to, so that won't work. Others suggested that I should add a custom <code>php.ini</code> file to my root which did not work. Any other suggestions?</p>
","<p>You need to set the value of <code>upload_max_filesize</code> and <code>post_max_size</code> in your php.ini :</p>

<pre class=""lang-none prettyprint-override""><code>; Maximum allowed size for uploaded files.
upload_max_filesize = 40M

; Must be greater than or equal to upload_max_filesize
post_max_size = 40M
</code></pre>

<p>After modifying php.ini file(s), you need to restart your HTTP server to use new configuration.</p>

<p>If you can't change your php.ini, you're out of luck.  You cannot change these values at run-time; uploads of file larger than the value specified in php.ini will have failed by the time execution reaches your call to <code>ini_set</code>.</p>

<p>See the <a href=""http://php.net/manual/en/ini.core.php"" rel=""noreferrer"">Description of core php.ini directives</a>.</p>
","2184541"
"Remove the last character from string","697686","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/2053830/php-remove-last-character-if-its-a-period"">PHP - Remove last character if it&#39;s a period?</a>  </p>
</blockquote>



<p>Which is fastest way to remove last character from string?</p>

<p>I have a string like</p>

<pre><code>a,b,c,d,e,
</code></pre>

<p>I would like to remove last ',' and get the remaining string back</p>

<pre><code>OUTPUT: a,b,c,d,e
</code></pre>

<p>What the fastest way to do this?</p>
","<p>First I try without space <code>rtrim($arraynama,"","");</code> and get error result.</p>

<p>Then I add a space and get good result: <code>$newarraynama=rtrim($arraynama,"", "");</code></p>
","5593009"
"Convert HTML + CSS to PDF with PHP?","692225","","<p>Ok, I'm now banging my head against a brick wall with this one.</p>

<p>I have an HTML (not XHTML) document that renders fine in Firefox 3 and IE 7.  It uses fairly basic CSS to style it and renders fine in HTML.</p>

<p>I'm now after a way of converting it to PDF.  I have tried:</p>

<ul>
<li><a href=""https://github.com/dompdf/dompdf"" rel=""noreferrer"">DOMPDF</a>: it had huge problems with tables.  I factored out my large nested tables and it helped (before it was just consuming up to 128M of memory then dying--thats my limit on memory in php.ini) but it makes a complete mess of tables and doesn't seem to get images.  The tables were just basic stuff with some border styles to add some lines at various points;</li>
<li><a href=""https://github.com/spipu/html2pdf"" rel=""noreferrer"">HTML2PDF and HTML2PS</a>: I actually had better luck with this.  It rendered some of the images (all the images are Google Chart URLs) and the table formatting was much better but it seemed to have some complexity problem I haven't figured out yet and kept dying with unknown node_type() errors.  Not sure where to go from here; and</li>
<li><a href=""http://www.msweet.org/projects.php?Z1"" rel=""noreferrer"">Htmldoc</a>: this seems to work fine on basic HTML but has almost no support for CSS whatsoever so you have to do everything in HTML (I didn't realize it was still 2001 in Htmldoc-land...) so it's useless to me.</li>
</ul>

<p>I tried a Windows app called Html2Pdf Pilot that actually did a pretty decent job but I need something that at a minimum runs on Linux and ideally runs on-demand via PHP on the Webserver.</p>

<p>I really can't believe I'm this stuck.  Am I missing something?</p>
","<p><strong>Imporant:</strong> Please note that this answer was written in 2009 and it might not be the most cost-effective solution today in 2017. Browsers and other open source renderers have become <em>a lot</em> better at this than they were back then. </p>

<hr>

<p>Have a look at <a href=""http://princexml.com"" rel=""noreferrer"">PrinceXML</a>.</p>

<p>It's definitely the best HTML/CSS to PDF converter out there, although it's not free (But hey, your programming might not be free either, so if it saves you 10 hours of work, you're home free (since you also need to take into account that the alternative solutions will require you to setup a dedicated server with the right software)</p>

<p>Oh yeah, did I mention that this is the first (and probably only) HTML2PDF solution that does full <a href=""http://princexml.com/samples/acid2/acid2.pdf"" rel=""noreferrer"">ACID2</a> ?</p>

<p><a href=""http://princexml.com/samples/"" rel=""noreferrer"">PrinceXML Samples</a></p>
","434827"
"Convert PHP object to associative array","680930","","<p>I'm integrating an API to my website which works with data stored in objects while my code is written using arrays.</p>

<p>I'd like a quick and dirty function to convert an object to an array.</p>
","<p>Just typecast it</p>

<pre><code>$array =  (array) $yourObject;
</code></pre>

<p>From <a href=""http://www.php.net/manual/en/language.types.array.php"" rel=""noreferrer"">http://www.php.net/manual/en/language.types.array.php</a></p>

<blockquote>
  <p>If an object is converted to an array, the result is an array whose elements are the object's properties. The keys are the member variable names, with a few notable exceptions: integer properties are unaccessible; private variables have the class name prepended to the variable name; protected variables have a '*' prepended to the variable name. These prepended values have null bytes on either side.</p>
</blockquote>

<p><strong>Example: Simple Object</strong></p>

<pre><code>$object = new StdClass;
$object-&gt;foo = 1;
$object-&gt;bar = 2;

var_dump( (array) $object );
</code></pre>

<p><em>Output:</em></p>

<pre><code>array(2) {
  'foo' =&gt; int(1)
  'bar' =&gt; int(2)
} 
</code></pre>

<p><strong>Example: Complex Object</strong></p>

<pre><code>class Foo
{
    private $foo;
    protected $bar;
    public $baz;

    public function __construct()
    {
        $this-&gt;foo = 1;
        $this-&gt;bar = 2;
        $this-&gt;baz = new StdClass;
    }
}

var_dump( (array) new Foo );
</code></pre>

<p><em>Output (with \0s edited in for clarity):</em></p>

<pre><code>array(3) {
  '\0Foo\0foo' =&gt; int(1)
  '\0*\0bar' =&gt; int(2)
  'baz' =&gt; class stdClass#2 (0) {}
}
</code></pre>

<p><em>Output with <code>var_export</code> instead of <code>var_dump</code>:</em></p>

<pre><code>array (
  '' . ""\0"" . 'Foo' . ""\0"" . 'foo' =&gt; 1,
  '' . ""\0"" . '*' . ""\0"" . 'bar' =&gt; 2,
  'baz' =&gt; 
  stdClass::__set_state(array(
  )),
)
</code></pre>

<p>Typecasting this way will not do deep casting of the object graph and you need to apply the null bytes (as explained in the manual quote) to access any non-public attributes. So this works best when casting StdClass objects or objects with only public properties. For quick and dirty (what you asked for) it's fine.</p>

<p>Also see this in-depth blog post: </p>

<ul>
<li><a href=""http://ocramius.github.io/blog/fast-php-object-to-array-conversion/"" rel=""noreferrer"">http://ocramius.github.io/blog/fast-php-object-to-array-conversion/</a></li>
</ul>
","4345609"
"How to add elements to an empty array in PHP?","667700","","<p>If I define an array in PHP such as (I don't define its size):</p>

<pre class=""lang-php prettyprint-override""><code>$cart = array();
</code></pre>

<p>Do I simply add elements to it using the following?</p>

<pre class=""lang-php prettyprint-override""><code>$cart[] = 13;
$cart[] = ""foo"";
$cart[] = obj;
</code></pre>

<p>Don't arrays in PHP have an add method, for example, <code>cart.add(13)</code>?</p>
","<p>Both <a href=""http://php.net/manual/en/function.array-push.php"" rel=""noreferrer""><code>array_push</code></a> and the method you described will work.</p>

<pre><code>&lt;?php
$cart = array();
$cart[] = 13;
$cart[] = 14;
// etc
?&gt;
</code></pre>

<p>Is the same as: </p>

<pre><code>&lt;?php
$cart = array();
array_push($cart, 13);
array_push($cart, 14);

// Or 
$cart = array();
array_push($cart, 13, 14);
?&gt;
</code></pre>
","676703"
"Send email using the GMail SMTP server from a PHP page","664562","","<p>I am trying to send an email via GMail's SMTP server from a PHP page, but I get this error:</p>

<blockquote>
  <p>authentication failure [SMTP: SMTP server does no support authentication (code: 250, response: mx.google.com at your service, [98.117.99.235] SIZE 35651584 8BITMIME STARTTLS ENHANCEDSTATUSCODES PIPELINING)]</p>
</blockquote>

<p>Can anyone help?  Here is my code:</p>

<pre><code>&lt;?php
require_once ""Mail.php"";

$from = ""Sandra Sender &lt;sender@example.com&gt;"";
$to = ""Ramona Recipient &lt;ramona@microsoft.com&gt;"";
$subject = ""Hi!"";
$body = ""Hi,\n\nHow are you?"";

$host = ""smtp.gmail.com"";
$port = ""587"";
$username = ""testtest@gmail.com"";
$password = ""testtest"";

$headers = array ('From' =&gt; $from,
  'To' =&gt; $to,
  'Subject' =&gt; $subject);
$smtp = Mail::factory('smtp',
  array ('host' =&gt; $host,
    'port' =&gt; $port,
    'auth' =&gt; true,
    'username' =&gt; $username,
    'password' =&gt; $password));

$mail = $smtp-&gt;send($to, $headers, $body);

if (PEAR::isError($mail)) {
  echo(""&lt;p&gt;"" . $mail-&gt;getMessage() . ""&lt;/p&gt;"");
 } else {
  echo(""&lt;p&gt;Message successfully sent!&lt;/p&gt;"");
 }
?&gt;
</code></pre>
","<pre><code>// Pear Mail Library
require_once ""Mail.php"";

$from = '&lt;fromaddress@gmail.com&gt;';
$to = '&lt;toaddress@yahoo.com&gt;';
$subject = 'Hi!';
$body = ""Hi,\n\nHow are you?"";

$headers = array(
    'From' =&gt; $from,
    'To' =&gt; $to,
    'Subject' =&gt; $subject
);

$smtp = Mail::factory('smtp', array(
        'host' =&gt; 'ssl://smtp.gmail.com',
        'port' =&gt; '465',
        'auth' =&gt; true,
        'username' =&gt; 'johndoe@gmail.com',
        'password' =&gt; 'passwordxxx'
    ));

$mail = $smtp-&gt;send($to, $headers, $body);

if (PEAR::isError($mail)) {
    echo('&lt;p&gt;' . $mail-&gt;getMessage() . '&lt;/p&gt;');
} else {
    echo('&lt;p&gt;Message successfully sent!&lt;/p&gt;');
}
</code></pre>
","2748837"
"mysql_fetch_array()/mysql_fetch_assoc()/mysql_fetch_row()/mysql_num_rows etc... expects parameter 1 to be resource","664153","","<p>I am trying to select data from a MySQL table, but I get one of the following error messages:</p>

<blockquote>
  <p>mysql_fetch_array() expects parameter 1 to be resource, boolean given</p>
</blockquote>

<p>or</p>

<blockquote>
  <p>mysqli_fetch_array() expects parameter 1 to be mysqli_result, boolean given</p>
</blockquote>

<p>or</p>

<blockquote>
  <p>Call to a member function fetch_array() on boolean / non-object</p>
</blockquote>

<p>This is my code:</p>

<pre><code>$username = $_POST['username'];
$password = $_POST['password'];

$result = mysql_query('SELECT * FROM Users WHERE UserName LIKE $username');

while($row = mysql_fetch_array($result)) {
    echo $row['FirstName'];
}
</code></pre>

<p>The same applies to code like </p>

<pre><code>$result = mysqli_query($mysqli, 'SLECT ...');
// mysqli_fetch_array() expects parameter 1 to be mysqli_result, boolean given
while( $row=mysqli_fetch_array($result) ) {
    ...
</code></pre>

<p>and</p>

<pre><code>$result = $mysqli-&gt;query($mysqli, 'SELCT ...');
// Call to a member function fetch_assoc() on a non-object
while( $row=$result-&gt;fetch_assoc($result) ) {
    ...
</code></pre>

<p>and </p>

<pre><code>$result = $pdo-&gt;query('SLECT ...', PDO::FETCH_ASSOC);
// Invalid argument supplied for foreach()
foreach( $result as $row ) {
    ...
</code></pre>

<p>and </p>

<pre><code>$stmt = $mysqli-&gt;prepare('SLECT ...');
// Call to a member function bind_param() on a non-object
$stmt-&gt;bind_param(...)
</code></pre>

<p>and</p>

<pre><code>$stmt = $pdo-&gt;prepare('SLECT ...');
// Call to a member function bindParam() on a non-object
$stmt-&gt;bindParam(...)
</code></pre>
","<p>A query may fail for various reasons in which case both the mysql_* and the mysqli extension will return <code>false</code> from their respective query functions/methods. You need to test for that error condition and handle it accordingly.</p>

<p><strong><a href=""http://docs.php.net/book.mysql"" rel=""noreferrer"">mysql_* extension</a></strong>:</p>

<blockquote>
  <p><strong>NOTE</strong> The <a href=""https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php"">mysql_ functions are deprecated</a> and have been removed in php version 7.</p>
</blockquote>

<p>Check <code>$result</code> before passing it to <code>mysql_fetch_array</code>. You'll find that it's <code>false</code> because the query failed. See the <a href=""http://php.net/manual/en/function.mysql-query.php"" rel=""noreferrer""><code>mysql_query</code></a> documentation for possible return values and suggestions for how to deal with them.</p>

<pre><code>$username = mysql_real_escape_string($_POST['username']);
$password = $_POST['password'];
$result = mysql_query(""SELECT * FROM Users WHERE UserName LIKE '$username'"");

if($result === FALSE) { 
    die(mysql_error()); // TODO: better error handling
}

while($row = mysql_fetch_array($result))
{
    echo $row['FirstName'];
}
</code></pre>

<p><strong><a href=""http://docs.php.net/book.mysqli"" rel=""noreferrer"">mysqli extension</a></strong><br>
<em>procedural style</em>:</p>

<pre><code>$username = mysqli_real_escape_string($mysqli, $_POST['username']);
$result = mysqli_query($mysqli, ""SELECT * FROM Users WHERE UserName LIKE '$username'"");

// mysqli_query returns false if something went wrong with the query
if($result === FALSE) { 
    yourErrorHandler(mysqli_error($mysqli));
}
else {
    // as of php 5.4 mysqli_result implements Traversable, so you can use it with foreach
    foreach( $result as $row ) {
        ...
</code></pre>

<p><em>oo-style</em>:  </p>

<pre><code>$username = $mysqli-&gt;escape_string($_POST['username']);
$result = $mysqli-&gt;query(""SELECT * FROM Users WHERE UserName LIKE '$username'"");

if($result === FALSE) { 
    yourErrorHandler($mysqli-&gt;error); // or $mysqli-&gt;error_list
}
else {
    // as of php 5.4 mysqli_result implements Traversable, so you can use it with foreach
    foreach( $result as $row ) {
      ...
</code></pre>

<p><em>using a prepared statement:</em></p>

<pre><code>$stmt = $mysqli-&gt;prepare('SELECT * FROM Users WHERE UserName LIKE ?');
if ( !$stmt ) {
    yourErrorHandler($mysqli-&gt;error); // or $mysqli-&gt;error_list
}
else if ( !$stmt-&gt;bind_param('s', $_POST['username']) ) {
    yourErrorHandler($stmt-&gt;error); // or $stmt-&gt;error_list
}
else if ( !$stmt-&gt;execute() ) {
    yourErrorHandler($stmt-&gt;error); // or $stmt-&gt;error_list
}
else {
    $result = $stmt-&gt;get_result();
    // as of php 5.4 mysqli_result implements Traversable, so you can use it with foreach
    foreach( $result as $row ) {
      ...
</code></pre>

<hr>

<p>These examples only illustrate <em>what</em> should be done (error handling), not how to do it. Production code shouldn't use <a href=""http://www.phpfreaks.com/blog/or-die-must-die"" rel=""noreferrer""><code>or die</code></a> when outputting HTML, else it will (at the very least) generate invalid HTML. Also, database error messages shouldn't be displayed to non-admin users, as it <a href=""http://msdn.microsoft.com/en-us/library/ms995351.aspx#securityerrormessages_topic2"" rel=""noreferrer"">discloses too much information</a>.</p>
","2973209"
"How can I write to console in PHP?","662733","","<p>Is it possible write string or log into the console?</p>

<h2>What I mean</h2>

<p>Just like in jsp, if we print something like <code>system.out.println(""some"")</code> it will be there at console not at page.</p>
","<p><strong>Firefox</strong></p>

<p>On Firefox you can use an extension called <a href=""http://www.firephp.org/"" rel=""noreferrer"">FirePHP</a> which enables the logging and dumping of information from your PHP applications to the console. This is an addon to the awesome web development extension <a href=""http://getfirebug.com/"" rel=""noreferrer"">Firebug</a>.</p>

<ul>
<li><a href=""http://www.studytrails.com/blog/using-firephp-in-firefox-to-debug-php/"" rel=""noreferrer"">http://www.studytrails.com/blog/using-firephp-in-firefox-to-debug-php/</a></li>
</ul>

<p><strong>Chrome</strong></p>

<p>However if you are using Chrome there is a PHP debugging tool called <a href=""http://code.google.com/p/webug/"" rel=""noreferrer"">webug</a> or <a href=""http://www.chromephp.com/"" rel=""noreferrer"">Chrome Logger</a>.</p>

<p>More recently <a href=""https://github.com/itsgoingd/clockwork-chrome"" rel=""noreferrer"">Clockwork</a> is in active development which extends the Developer Tools by adding a new panel to provide useful debugging and profiling information. It provides out of the box support for <a href=""http://laravel.com"" rel=""noreferrer"">Laravel 4</a> and <a href=""http://www.slimframework.com/news/version-2"" rel=""noreferrer"">Slim 2</a> and support can be added via its extensible API. </p>

<p><strong>Using Xdebug</strong></p>

<p>A better way to debug your PHP would be via <a href=""http://xdebug.org/"" rel=""noreferrer"">Xdebug</a>. Most browsers provide helper extensions to help you pass the required cookie/query string to initialize the debugging process. </p>

<ul>
<li>Chrome - <a href=""https://chrome.google.com/webstore/detail/xdebug-helper/eadndfjplgieldjbigjakmdgkmoaaaoc"" rel=""noreferrer"">Xdebug Helper</a></li>
<li>Firefox - <a href=""https://addons.mozilla.org/en-us/firefox/addon/the-easiest-xdebug/"" rel=""noreferrer"">The easiest Xdebug</a></li>
<li>Opera - <a href=""https://addons.opera.com/en/extensions/details/xdebug/"" rel=""noreferrer"">Xdebug</a></li>
<li>Safari - <a href=""https://github.com/benmatselby/xdebug-toggler"" rel=""noreferrer"">Xdebug Toggler</a></li>
</ul>
","4323450"
"startsWith() and endsWith() functions in PHP","662136","","<p>How can I write two functions that would take a string and return if it starts with the specified character/string or ends with it?</p>

<p>For example:</p>

<pre><code>$str = '|apples}';

echo startsWith($str, '|'); //Returns true
echo endsWith($str, '}'); //Returns true
</code></pre>
","<pre><code>function startsWith($haystack, $needle)
{
     $length = strlen($needle);
     return (substr($haystack, 0, $length) === $needle);
}

function endsWith($haystack, $needle)
{
    $length = strlen($needle);

    return $length === 0 || 
    (substr($haystack, -$length) === $needle);
}
</code></pre>

<p>Use this if you don't want to use a regex.</p>
","834355"
"How to calculate the difference between two dates using PHP?","641641","","<p>I have two dates of the form:</p>

<pre><code>Start Date: 2007-03-24 
End Date: 2009-06-26
</code></pre>

<p>Now I need to find the difference between these two in the following form:</p>

<pre><code>2 years, 3 months and 2 days
</code></pre>

<p>How can I do this in PHP?</p>
","<blockquote>
  <p>For PHP &lt; 5.3 otherwise see jurka's answer below</p>
</blockquote>

<p>You can use strtotime() to convert two dates to unix time and then calculate the number of seconds between them. From this it's rather easy to calculate different time periods.</p>

<pre><code>$date1 = ""2007-03-24"";
$date2 = ""2009-06-26"";

$diff = abs(strtotime($date2) - strtotime($date1));

$years = floor($diff / (365*60*60*24));
$months = floor(($diff - $years * 365*60*60*24) / (30*60*60*24));
$days = floor(($diff - $years * 365*60*60*24 - $months*30*60*60*24)/ (60*60*24));

printf(""%d years, %d months, %d days\n"", $years, $months, $days);
</code></pre>

<p><strong>Edit:</strong> Obviously the preferred way of doing this is like described by jurka below. My code is generally only recommended if you don't have PHP 5.3 or better. </p>

<p>Several people in the comments have pointed out that the code above is only an approximation. I still believe that for most purposes that's fine, since the usage of a range is more to provide a sense of how much time has passed or remains rather than to provide precision - if you want to do that, just output the date. </p>

<p>Despite all that, I've decided to address the complaints. If you truly need an exact range but haven't got access to PHP 5.3, use the code below (it should work in PHP 4 as well). This is a direct port of the code that PHP uses internally to calculate ranges, with the exception that it doesn't take daylight savings time into account. That means that it's off by an hour at most, but except for that it should be correct.</p>

<pre><code>&lt;?php

/**
 * Calculate differences between two dates with precise semantics. Based on PHPs DateTime::diff()
 * implementation by Derick Rethans. Ported to PHP by Emil H, 2011-05-02. No rights reserved.
 * 
 * See here for original code:
 * http://svn.php.net/viewvc/php/php-src/trunk/ext/date/lib/tm2unixtime.c?revision=302890&amp;view=markup
 * http://svn.php.net/viewvc/php/php-src/trunk/ext/date/lib/interval.c?revision=298973&amp;view=markup
 */

function _date_range_limit($start, $end, $adj, $a, $b, $result)
{
    if ($result[$a] &lt; $start) {
        $result[$b] -= intval(($start - $result[$a] - 1) / $adj) + 1;
        $result[$a] += $adj * intval(($start - $result[$a] - 1) / $adj + 1);
    }

    if ($result[$a] &gt;= $end) {
        $result[$b] += intval($result[$a] / $adj);
        $result[$a] -= $adj * intval($result[$a] / $adj);
    }

    return $result;
}

function _date_range_limit_days($base, $result)
{
    $days_in_month_leap = array(31, 31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31);
    $days_in_month = array(31, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31);

    _date_range_limit(1, 13, 12, ""m"", ""y"", &amp;$base);

    $year = $base[""y""];
    $month = $base[""m""];

    if (!$result[""invert""]) {
        while ($result[""d""] &lt; 0) {
            $month--;
            if ($month &lt; 1) {
                $month += 12;
                $year--;
            }

            $leapyear = $year % 400 == 0 || ($year % 100 != 0 &amp;&amp; $year % 4 == 0);
            $days = $leapyear ? $days_in_month_leap[$month] : $days_in_month[$month];

            $result[""d""] += $days;
            $result[""m""]--;
        }
    } else {
        while ($result[""d""] &lt; 0) {
            $leapyear = $year % 400 == 0 || ($year % 100 != 0 &amp;&amp; $year % 4 == 0);
            $days = $leapyear ? $days_in_month_leap[$month] : $days_in_month[$month];

            $result[""d""] += $days;
            $result[""m""]--;

            $month++;
            if ($month &gt; 12) {
                $month -= 12;
                $year++;
            }
        }
    }

    return $result;
}

function _date_normalize($base, $result)
{
    $result = _date_range_limit(0, 60, 60, ""s"", ""i"", $result);
    $result = _date_range_limit(0, 60, 60, ""i"", ""h"", $result);
    $result = _date_range_limit(0, 24, 24, ""h"", ""d"", $result);
    $result = _date_range_limit(0, 12, 12, ""m"", ""y"", $result);

    $result = _date_range_limit_days(&amp;$base, &amp;$result);

    $result = _date_range_limit(0, 12, 12, ""m"", ""y"", $result);

    return $result;
}

/**
 * Accepts two unix timestamps.
 */
function _date_diff($one, $two)
{
    $invert = false;
    if ($one &gt; $two) {
        list($one, $two) = array($two, $one);
        $invert = true;
    }

    $key = array(""y"", ""m"", ""d"", ""h"", ""i"", ""s"");
    $a = array_combine($key, array_map(""intval"", explode("" "", date(""Y m d H i s"", $one))));
    $b = array_combine($key, array_map(""intval"", explode("" "", date(""Y m d H i s"", $two))));

    $result = array();
    $result[""y""] = $b[""y""] - $a[""y""];
    $result[""m""] = $b[""m""] - $a[""m""];
    $result[""d""] = $b[""d""] - $a[""d""];
    $result[""h""] = $b[""h""] - $a[""h""];
    $result[""i""] = $b[""i""] - $a[""i""];
    $result[""s""] = $b[""s""] - $a[""s""];
    $result[""invert""] = $invert ? 1 : 0;
    $result[""days""] = intval(abs(($one - $two)/86400));

    if ($invert) {
        _date_normalize(&amp;$a, &amp;$result);
    } else {
        _date_normalize(&amp;$b, &amp;$result);
    }

    return $result;
}

$date = ""1986-11-10 19:37:22"";

print_r(_date_diff(strtotime($date), time()));
print_r(_date_diff(time(), strtotime($date)));
</code></pre>
","676828"
"Refresh a page using PHP","635020","","<p>How can I refresh a page using PHP periodically? If I can not do it by PHP, what is the best recommended scenario?</p>
","<p>You can do it with PHP:</p>

<pre><code>header(""Refresh:0"");
</code></pre>

<p>It refreshes your current page, and if you need to redirect it to another page, use following:</p>

<pre><code>header(""Refresh:0; url=page2.php"");
</code></pre>
","20878550"
"PHP: show a number to 2 decimal places","630510","","<p>What's the correct way to round a PHP string to 2 decimal places?</p>

<pre><code>$number = ""520""; // It's a string from a DB

$formatted_number = round_to_2dp($number);

echo $formatted_number;
</code></pre>

<p>Output is ""520.00"";</p>

<p>How function <code>round_to_2dp()</code>  definition should be?</p>
","<p>You can use <a href=""http://php.net/number_format"">number_format()</a>:</p>

<pre><code>return number_format((float)$number, 2, '.', '');
</code></pre>

<p>Example:</p>

<pre><code>$foo = ""105"";
echo number_format((float)$foo, 2, '.', '');  // Outputs -&gt; 105.00
</code></pre>

<p>This function returns a <strong>string</strong>.</p>
","4483561"
"Convert from MySQL datetime to another format with PHP","630405","","<p>I have a <code>datetime</code> column in MySQL. </p>

<p>How can I convert it to the display as <strong>mm/dd/yy H:M (AM/PM)</strong> using PHP?</p>
","<p>To convert a date retrieved from MySQL into the format requested (<code>mm/dd/yy H:M (AM/PM)</code>):</p>

<pre><code>// $datetime is something like: 2014-01-31 13:05:59
$time = strtotime($datetimeFromMysql);
$myFormatForView = date(""m/d/y g:i A"", $time);
// $myFormatForView is something like: 01/31/14 1:05 PM
</code></pre>

<p>Refer to the <a href=""http://php.net/manual/en/function.date.php#refsect1-function.date-parameters"" rel=""noreferrer"">PHP date formatting options</a> to adjust the format.</p>
","136872"
"Showing all errors and warnings","624712","","<p><strong>UPDATE 2:</strong></p>

<p>I have now removed the following from the .php file:</p>

<pre><code>&lt;?php error_reporting( E_ALL ); ?&gt;
</code></pre>

<p>I have set display_erros in php.ini as follows:</p>

<blockquote>
  <p>display_errors = On</p>
</blockquote>

<p>error reporting is set to the following in php.ini</p>

<blockquote>
  <p>error_reporting = E_ALL | E_STRICT</p>
</blockquote>

<p>After restarting apache, I still get no errors/warnings.</p>

<p><strong>UPDATE 1:</strong></p>

<p>I have changed error_reporting in php.ini from:</p>

<blockquote>
  <p>error_reporting = E_ALL &amp;
  ~E_DEPRECATED</p>
</blockquote>

<p>to</p>

<blockquote>
  <p>error_reporting = E_ALL | E_STRICT</p>
</blockquote>

<p>After which I restarted apache, e.g.</p>

<blockquote>
  <p>/etc/init.d/apache2 restart</p>
</blockquote>

<p>But the page will still not display errors/warnings of any kind.</p>

<p><strong>ORIGINAL QUESTION:</strong></p>

<p>The following script is generating an warning because the $err being inside the if statement.  Why is this warning not being displayed on the php page in a web browser?  I have to look at apache logs to see the warning.  Also, if I delibarately change the ""insert into"" to ""delete into"", it does not display an error on the php page.  Why are the errors not displaying on the actual php page?</p>

<pre><code>&lt;?php
    error_reporting( E_ALL );
?&gt;

&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;&lt;/title&gt;
        &lt;link rel=""icon"" type=""image/png"" href=""favicon.ico""&gt;

        &lt;?php
            if( $_SERVER['REQUEST_METHOD']=='POST' ) {
                $err = array();

                if( empty( $_POST['display_name'] ) ) $err[] = ""display name field is required"";
                if( empty( $_POST['email'] ) ) $err[] = ""email field is required"";
                if( empty( $_POST['password'] ) ) $err[] = ""password field is required"";

                if( !$err ) {
                    try {
                        $DBH = new PDO( ""mysql:host=localhost;dbname=database1"", ""user"", ""pass"" );
                        $DBH -&gt; setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

                        $STH = $DBH -&gt; prepare( ""delete into table1 (display_name, email, password) values ( :display_name, :email, :password )"" );

                        $STH -&gt; bindParam( ':display_name', $_POST['display_name'], PDO::PARAM_STR, 100 );
                        $STH -&gt; bindParam( ':email', $_POST['email'], PDO::PARAM_STR, 100 );
                        $STH -&gt; bindParam( ':password', $_POST['password'], PDO::PARAM_STR, 100 );

                        $STH -&gt; execute();

                        $STH = $DBH -&gt; prepare( ""delete into table2 ( username, status, users_id ) values ( :username, :status, :users_id )"" );

                        $strStatus = 1;

                        $STH -&gt; bindParam( ':username', $_POST['display_name'], PDO::PARAM_STR, 100 );
                        $STH -&gt; bindParam( ':status', $strStatus, PDO::PARAM_INT, 1 );
                        $STH -&gt; bindParam( ':users_id', $_POST['referer'], PDO::PARAM_INT, 1 );

                        $STH -&gt; execute();

                        $DBH = null;
                    } catch( PDOException $e ) {
                        echo $e -&gt; getMessage();
                    }

                    header( ""Location: "".$_SERVER['PHP_SELF'] );
                    exit;
                } else {
                    foreach( $_POST as $key =&gt; $val ) {
                        $form[$key] = htmlspecialchars($val);
                    }
                }
            } else {
                $form['display_name'] = $form['email'] = $form['password'] = '';
            }
        ?&gt;
    &lt;/head&gt;

    &lt;body&gt;
        &lt;?php foreach( $err as $line ) { ?&gt;
        &lt;div style=""error""&gt;&lt;?php echo $line; ?&gt;&lt;/div&gt;
        &lt;?php } ?&gt;

        &lt;h1&gt;register&lt;/h1&gt;

        &lt;form method=""post""&gt;
            referers id:&lt;br /&gt;
            &lt;input type=""text"" name=""referer"" /&gt;&lt;br /&gt;&lt;br /&gt;

            name:&lt;br /&gt;
            &lt;input type=""text"" name=""display_name"" value=""&lt;?php echo $form['display_name']; ?&gt;"" /&gt;&lt;br /&gt;&lt;br /&gt;

            email:&lt;br /&gt;
            &lt;input type=""text"" name=""email"" value=""&lt;?php echo $form['email']; ?&gt;"" /&gt;&lt;br /&gt;&lt;br /&gt;

            password:&lt;br /&gt;
            &lt;input type=""text"" name=""password"" value=""&lt;?php echo $form['password']; ?&gt;"" /&gt;&lt;br /&gt;&lt;br /&gt;

            &lt;input type=""submit"" value=""register"" /&gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
","<p>Display errors could be turned off in the <code>php.ini</code> or your Apache config file.</p>

<p>You can turn it on in the script:</p>

<pre><code>error_reporting(E_ALL);
ini_set('display_errors', 1);
</code></pre>

<p>You should see the same messages in the PHP error log.</p>
","5438125"
"Returning JSON from a PHP Script","618196","","<p>I want to return JSON from a PHP script.</p>

<p>Do I just echo the result? Do I have to set the <code>Content-Type</code> header?</p>
","<p>While you're usually fine without it, you can and should set the Content-Type header:</p>

<pre><code>&lt;?PHP
$data = /** whatever you're serializing **/;
header('Content-Type: application/json');
echo json_encode($data);
</code></pre>

<p>If I'm not using a particular framework, I usually allow some request params to modify the output behavior.  It can be useful, generally for quick troubleshooting, to not send a header, or sometimes print_r the data payload to eyeball it (though in most cases, it shouldn't be necessary).</p>
","4064468"
"PHP + curl, HTTP POST sample code?","612476","","<p>Can anyone show me how to do a php curl with an HTTP POST?</p>

<p>I want to send data like this:</p>

<pre><code>username=user1, password=passuser1, gender=1
</code></pre>

<p>To <code>www.domain.com</code></p>

<p>I expect the curl to return a response like <code>result=OK</code>.  Are there any examples?</p>
","<pre><code>&lt;?php
//
// A very simple PHP example that sends a HTTP POST to a remote site
//

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL,""http://www.example.com/tester.phtml"");
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS,
            ""postvar1=value1&amp;postvar2=value2&amp;postvar3=value3"");

// in real life you should use something like:
// curl_setopt($ch, CURLOPT_POSTFIELDS, 
//          http_build_query(array('postvar1' =&gt; 'value1')));

// receive server response ...
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$server_output = curl_exec ($ch);

curl_close ($ch);

// further processing ....
if ($server_output == ""OK"") { ... } else { ... }

?&gt;
</code></pre>
","2138534"
"How to send an email using PHP?","609653","","<p>I am using PHP on a website and I want to add emailing functionality.</p>

<p>I have WAMPSERVER installed.</p>

<p>How do I send an email using PHP?</p>
","<p>Using PHP's <a href=""http://php.net/manual/en/function.mail.php"" rel=""noreferrer""><code>mail()</code></a> function it's possible. Remember mail function will not work in Local server.</p>

<pre><code>&lt;?php
$to      = 'nobody@example.com';
$subject = 'the subject';
$message = 'hello';
$headers = 'From: webmaster@example.com' . ""\r\n"" .
    'Reply-To: webmaster@example.com' . ""\r\n"" .
    'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers);
?&gt; 
</code></pre>

<p>Reference:</p>

<ul>
<li><a href=""http://php.net/manual/en/function.mail.php"" rel=""noreferrer"">http://php.net/manual/en/function.mail.php</a></li>
</ul>
","5335311"
"Where does PHP store the error log? (php5, apache, fastcgi, cpanel)","609116","","<p>I am on shared hosting and have Cpanel, Apache, PHP is run by fastcgi.  Where does PHP store the error log?</p>

<p>Is there any other way I can find the error log on shared hosting environment instead of having to go through entire site structure to look for error_log files?</p>

<p>I have access to the <code>php.ini</code> (I am using PHP version 5.2.16).</p>
","<p>Php stores error logs in <code>/var/log/apache2</code> if php is an apache2 module. 
Shared hosts are often storing log files in your root directory <code>/log</code> subfolder.
But...if you have access to a <code>php.ini</code> file you can do this:</p>

<pre><code>error_log = /var/log/php-scripts.log
</code></pre>

<p><em>According to <strong>rinogo</strong>'s comment: If you're using cPanel, the master log file you're probably looking for is stored (by default) at</em></p>

<pre><code>/usr/local/apache/logs/error_log
</code></pre>

<p>If all else fails you can check the location of the log file using</p>

<pre><code>&lt;?php phpinfo(); ?&gt;
</code></pre>
","5127884"
"Remove empty array elements","597263","","<p>Some elements in my array are empty strings based on what the user has submitted. I need to remove those elements. I have this:</p>

<pre><code>foreach($linksArray as $link)
{
    if($link == '')
    {
        unset($link);
    }
}
print_r($linksArray);
</code></pre>

<p>But it doesn't work, <code>$linksArray</code> still has empty elements. I have also tried doing it with the <code>empty()</code> function but the outcome is the same.  </p>
","<p>As you're dealing with an array of strings, you can simply use <a href=""https://secure.php.net/manual/en/function.array-filter.php"" rel=""noreferrer""><code>array_filter()</code></a>, which conveniently handles all this for you:</p>

<pre><code>print_r(array_filter($linksArray));
</code></pre>

<p>Keep in mind that <strong>if no callback is supplied</strong>, all entries of array equal to <code>FALSE</code> (see <a href=""http://php.net/manual/en/language.types.boolean.php#language.types.boolean.casting"" rel=""noreferrer"">converting to boolean</a>) will be removed. So if you need to preserve elements that are i.e. exact string <code>'0'</code>, you will need a custom callback:</p>

<pre><code>// PHP &lt; 5.3
print_r(array_filter($linksArray, create_function('$value', 'return $value !== """";')));

// PHP 5.3 and later
print_r(array_filter($linksArray, function($value) { return $value !== ''; }));
</code></pre>
","3654309"
"Import file size limit in PHPMyAdmin","595053","","<p>I have changed all the php.ini parameters I know:
upload_max_filesize, post_max_size.</p>

<p>Why am I still seeing 2MB?</p>

<p>Im using Zend Server CE, on a Ubuntu VirtualBox over Windows 7 host.</p>
","<p>You probably didn't restart your server ;)</p>

<p>Or you modified the wrong <code>php.ini</code>.</p>

<p>Or you actually managed to do both ^^</p>
","3958659"
"How to Call a PHP Function on the Click of a Button","587494","","<p>I am a rookie in PHP and have just started learning the basics of this language.</p>

<p>I have created a page called functioncalling.php that contains two buttons, Submit and Insert. As a beginner in PHP, I want to test which function is executed when a button gets clicked. I want the output to come on the same page. So I created two functions, one for each button. The source code for functioncalling.php is as follows:</p>

<p></p>

<pre><code>&lt;html&gt;
&lt;body&gt;
&lt;form action=""functioncalling.php""&gt;
    &lt;input type=""text"" name=""txt"" /&gt;
    &lt;input type=""submit"" name=""insert"" value=""insert"" onclick=""insert()"" /&gt;
    &lt;input type=""submit"" name=""select"" value=""select"" onclick=""select()"" /&gt;
&lt;/form&gt;
&lt;?php
function select(){
   echo ""The select function is called."";
}
function insert(){
   echo ""The insert function is called."";
}
?&gt;
</code></pre>

<p>The problem here is that I don't get any output after any of the buttons are clicked.</p>

<p>Can anyone please tell me where exactly am I going wrong? Replies at the earliest will be highly appreciated. Thank you in advance.</p>
","<p>Button click is <code>client side</code> whereas PHP is <code>server side</code>, but you can achieve this by using <code>ajax</code></p>

<pre><code> $('.button').click(function() {

 $.ajax({
  type: ""POST"",
  url: ""some.php"",
  data: { name: ""John"" }
}).done(function( msg ) {
  alert( ""Data Saved: "" + msg );
});    

    });
</code></pre>

<p><strong>In your php file:</strong></p>

<pre><code>&lt;?php
function abc($name){
//your code here
}
 ?&gt;
</code></pre>
","20738409"
"How to call a JavaScript function from PHP?","585826","","<p>How to call a JavaScript function from PHP?</p>

<pre><code>&lt;?php

  jsfunction();
  // or
  echo(jsfunction());
  // or
  // Anything else?
</code></pre>

<p>The following code is from <em>xyz.html</em> (on a button click) it calls a <code>wait()</code> in an external <em>xyz.js</em>. This <code>wait()</code> calls wait.php.</p>

<pre><code>function wait() 
{
  xmlhttp=GetXmlHttpObject();
  var url=""wait.php""; \
  xmlhttp.onreadystatechange=statechanged; 
  xmlhttp.open(""GET"", url, true); 
  xmlhttp.send(null);
} 

function statechanged()
{ 
  if(xmlhttp.readyState==4) {
       document.getElementById(""txt"").innerHTML=xmlhttp.responseText;
  }
}
</code></pre>

<p>and <em>wait.php</em></p>

<pre><code>&lt;?php echo ""&lt;script&gt; loadxml(); &lt;/script&gt;""; 
</code></pre>

<p>where <code>loadxml()</code> calls code from another PHP file the same way. </p>

<p>The <code>loadxml()</code> is working fine otherwise, but it is not being called the way I want it.</p>
","<p>As far as PHP is concerned (or really, a web server in general), an HTML page is nothing more complicated than a big string.</p>

<p>All the fancy work you can do with language like PHP - reading from databases and web services and all that - the ultimate end goal is the exact same basic principle: generate a string of HTML*.</p>

<p>Your big HTML string doesn't become anything more special than that until it's loaded by a web browser. Once a browser loads the page, <em>then</em> all the other magic happens - layout, box model stuff, DOM generation, and many other things, including JavaScript execution.</p>

<p>So, you don't ""call JavaScript from PHP"", you ""include a JavaScript function call in your output"".</p>

<p>There are many ways to do this, but here are a couple.</p>

<p>Using just PHP:</p>

<pre><code>echo '&lt;script type=""text/javascript""&gt;',
     'jsfunction();',
     '&lt;/script&gt;'
;
</code></pre>

<p>Escaping from php mode to direct output mode:</p>

<pre><code>&lt;?php
    // some php stuff
?&gt;
&lt;script type=""text/javascript""&gt;
    jsFunction();
&lt;/script&gt;
</code></pre>

<p>You don't need to return a function name or anything like that.  First of all, stop writing AJAX requests by hand.  You're only making it hard on yourself.  Get jQuery or one of the other excellent frameworks out there.</p>

<p>Secondly, understand that you already are going to be executing javascript code once the response is received from the AJAX call.</p>

<p>Here's an example of what I think you're doing with jQuery's AJAX</p>

<pre><code>$.get(
    'wait.php',
    {},
    function(returnedData) {
        document.getElementById(""txt"").innerHTML = returnedData;

        //  Ok, here's where you can call another function
        someOtherFunctionYouWantToCall();

        // But unless you really need to, you don't have do
        // We're already in the middle of a function execution
        // right here, so you might as well put your code here
    },
    'text'
);

function someOtherFunctionYouWantToCall() {
    // stuff
}
</code></pre>

<p>Now, if you're dead-set on sending a function name from PHP back to the AJAX call, you can do that too.  </p>

<pre><code>$.get(
    'wait.php',
    {},
    function(returnedData) {
        // Assumes returnedData has a javascript function name
        window[returnedData]();
    },
    'text'
);
</code></pre>

<p>* Or JSON or XML etc.</p>
","1045885"
"PHP 7: Missing VCRUNTIME140.dll","581259","","<p>I have an error when I start PHP&nbsp;7 on Windows. When I run <code>php</code> on the command line, it returns a message box with system error:</p>

<blockquote>
  <p>The program can't start because VCRUNTIME140.dll is missing from your computer. Try reinstalling the program to fix this problem.</p>
</blockquote>

<p>After that, <code>CLI</code> is crashing.</p>

<p>As I don't want to install a DLL file from an external website, I don't know how to fix this!</p>

<p><strong>PHP version:</strong> <a href=""http://windows.php.net/downloads/qa/php-7.0.0alpha1-Win32-VC14-x64.zip"" rel=""noreferrer"">7.0.0alpha1 VC14 x64 Thread Safe</a></p>
","<p>On the <em>side bar</em> of the <a href=""http://windows.php.net/qa/"" rel=""noreferrer"">PHP 7 alpha download page</a>, it does say this:</p>

<blockquote>
  <p>VC9, VC11 &amp; VC14
  More recent versions of PHP are built with VC9, VC11
  or VC14 (Visual Studio 2008, 2012 or 2015 compiler respectively) and
  include improvements in performance and stability.</p>
  
  <ul>
  <li><p>The VC9 builds require you to have the Visual C++ Redistributable for Visual Studio 2008 SP1 <a href=""http://www.microsoft.com/en-us/download/details.aspx?id=5582"" rel=""noreferrer"">x86</a> or <a href=""http://www.microsoft.com/en-us/download/details.aspx?id=15336"" rel=""noreferrer"">x64</a> installed</p></li>
  <li><p>The VC11 builds require to have the Visual C++ Redistributable for Visual Studio 2012 <a href=""http://www.microsoft.com/en-us/download/details.aspx?id=30679"" rel=""noreferrer"">x86 or x64</a> installed</p></li>
  <li><p>The VC14 builds require to have the Visual C++ Redistributable for Visual Studio 2015 <a href=""https://www.microsoft.com/en-us/download/details.aspx?id=48145"" rel=""noreferrer"">x86 or x64</a> installed</p></li>
  </ul>
</blockquote>

<p><sup>There's been a problem with some of those links, so the files are also available from <a href=""http://www.softpedia.com/get/Programming/Components-Libraries/Microsoft-Visual-C-Redistributable-Package.shtml#download"" rel=""noreferrer"">Softpedia</a>.</sup></p>

<p>In the case of the PHP 7 alpha, it's the last option that's required.</p>

<p>I think that the placement of this information is poor, as it's kind of marginalized (i.e.: it's basically literally in the margin!) whereas it's actually critical for the software to run.</p>

<p>I documented my experiences of getting PHP 7 alpha up and running on Windows 8.1 in <a href=""http://blog.adamcameron.me/2015/06/php-getting-php7-alpha-running-on.html"" rel=""noreferrer"">PHP: getting PHP7 alpha running on Windows 8.1</a>, and it covers some more symptoms that might crop up. They're out of scope for this question but might help other people.</p>

<p>Other symptom of this issue:</p>

<ul>
<li>Apache not starting, claiming <code>php7apache2_4.dll</code> is missing despite it definitely being in place, and offering nothing else in any log.</li>
<li><code>php-cgi.exe - The FastCGI process exited unexpectedly</code> (as per @ftexperts's comment below)</li>
</ul>

<p>Attempted solution:</p>

<ul>
<li>Using the <code>php7apache2_4.dll</code> file from an earlier PHP 7 dev build. <em>This did not work.</em></li>
</ul>

<p>(I include those for googleability.)</p>
","30826746"
"Fatal error: Maximum execution time of 30 seconds exceeded","578675","","<p>I am downloading a JSON file from an online source and and when it runs through the loop I am getting this error:</p>

<blockquote>
  <p>Fatal error: Maximum execution time of 30 seconds exceeded in C:\wamp\www\temp\fetch.php on line 24</p>
</blockquote>
","<p>Your loop might be endless. If it is not, you could extend the maximum execution time like this:</p>

<pre><code>ini_set('max_execution_time', 300); //300 seconds = 5 minutes</code></pre>
","5164954"
"When to use self over $this?","578256","","<p>In PHP 5, what is the difference between using <code>self</code> and <code>$this</code>?</p>

<p>When is each appropriate?</p>
","<h1>Short Answer</h1>

<blockquote>
  <p>Use <code>$this</code> to refer to the current
  object. Use <code>self</code> to refer to the
  current class. In other words, use
  <code>$this-&gt;member</code> for non-static members,
  use <code>self::$member</code> for static members.</p>
</blockquote>

<h1>Full Answer</h1>

<p>Here is an example of <strong>correct</strong> usage of <code>$this</code> and <code>self</code> for non-static and static member variables:</p>

<pre><code>&lt;?php
class X {
    private $non_static_member = 1;
    private static $static_member = 2;

    function __construct() {
        echo $this-&gt;non_static_member . ' '
           . self::$static_member;
    }
}

new X();
?&gt;
</code></pre>

<p>Here is an example of <strong>incorrect</strong> usage of <code>$this</code> and <code>self</code> for non-static and static member variables:</p>

<pre><code>&lt;?php
class X {
    private $non_static_member = 1;
    private static $static_member = 2;

    function __construct() {
        echo self::$non_static_member . ' '
           . $this-&gt;static_member;
    }
}

new X();
?&gt;
</code></pre>

<p>Here is an example of <strong>polymorphism</strong> with <code>$this</code> for member functions:</p>

<pre><code>&lt;?php
class X {
    function foo() {
        echo 'X::foo()';
    }

    function bar() {
        $this-&gt;foo();
    }
}

class Y extends X {
    function foo() {
        echo 'Y::foo()';
    }
}

$x = new Y();
$x-&gt;bar();
?&gt;
</code></pre>

<p>Here is an example of <strong>suppressing polymorphic behaviour</strong> by using <code>self</code> for member functions:</p>

<pre><code>&lt;?php
class X {
    function foo() {
        echo 'X::foo()';
    }

    function bar() {
        self::foo();
    }
}

class Y extends X {
    function foo() {
        echo 'Y::foo()';
    }
}

$x = new Y();
$x-&gt;bar();
?&gt;
</code></pre>

<blockquote>
  <p>The idea is that <code>$this-&gt;foo()</code> calls the <code>foo()</code> member function of whatever >is the exact type of the current object. If the object is of <code>type X</code>, it thus >calls <code>X::foo()</code>. If the object is of <code>type Y</code>, it calls <code>Y::foo()</code>. But with >self::foo(), <code>X::foo()</code> is always called.</p>
</blockquote>

<p>From <a href=""http://www.phpbuilder.com/board/showthread.php?t=10354489"" rel=""noreferrer"">http://www.phpbuilder.com/board/showthread.php?t=10354489</a>:</p>

<p>By <a href=""http://board.phpbuilder.com/member.php?145249-laserlight"" rel=""noreferrer"">http://board.phpbuilder.com/member.php?145249-laserlight</a></p>
","151976"
"Get URL query string","575635","","<p>What is the ""less code needed"" way to get parameters from a URL query string which is formatted like the following?</p>

<blockquote>
  <p>www.mysite.com/category/subcategory?myqueryhash</p>
</blockquote>

<p>Output should be: <code>myqueryhash</code></p>

<p>I am aware of this approach:</p>

<pre><code>www.mysite.com/category/subcategory?q=myquery

&lt;?php
   echo $_GET['q'];  //Output: myquery
?&gt;
</code></pre>
","<p><code>$_SERVER['QUERY_STRING']</code> contains the data that you are looking for.</p>

<hr>

<p><strong>DOCUMENTATION</strong></p>

<ul>
<li><a href=""http://se2.php.net/reserved.variables.server.php"" rel=""noreferrer""><strong>php.net</strong>:  $_SERVER - Manual</a></li>
</ul>
","8469777"
"Saving image from PHP URL","569627","","<p>I need to save an image from a PHP URL to my PC.
Let's say I have a page, <code>http://example.com/image.php</code>, holding a single ""flower"" image, nothing else. How can I save this image from the URL with a new name (using PHP)?</p>
","<p>If you have <code>allow_url_fopen</code> set to <code>true</code>:</p>

<pre><code>$url = 'http://example.com/image.php';
$img = '/my/folder/flower.gif';
file_put_contents($img, file_get_contents($url));
</code></pre>

<p>Else use <a href=""http://www.php.net/manual/en/book.curl.php"" rel=""noreferrer"">cURL</a>:</p>

<pre><code>$ch = curl_init('http://example.com/image.php');
$fp = fopen('/my/folder/flower.gif', 'wb');
curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_exec($ch);
curl_close($ch);
fclose($fp);
</code></pre>
","724449"
"How to pass variables and data from PHP to JavaScript?","559441","","<p>I have a variable in PHP, and I need its value in my JavaScript code. How can I get my variable from PHP to JavaScript?</p>

<p>I have code that looks like this:</p>

<pre><code>&lt;?php
     ...
     $val = $myService-&gt;getValue(); // makes an api and db call
?&gt;
</code></pre>

<p>I have JavaScript code that needs <code>val</code> and looks along the lines of:</p>

<pre><code>&lt;script&gt;
    myPlugin.start($val); // tried this, didn't work
    &lt;?php myPlugin.start($val); ?&gt; // this didn't work either
    myPlugin.start(&lt;?=$val?&gt; // this works sometimes, but sometimes it fails
&lt;/script&gt;
</code></pre>
","<p>There are actually several approaches to do this. Some require more overhead than others, and some are considered better than others.</p>

<p>In no particular order:</p>

<ol>
<li>Use AJAX to get the data you need from the server.</li>
<li>Echo the data into the page somewhere, and use JavaScript to get the information from the DOM.</li>
<li>Echo the data directly to JavaScript.</li>
</ol>

<p>In this post, we'll examine each of the above methods, and see the pros and cons of each, as well as how to implement them.</p>

<h1>1. Use AJAX to get the data you need from the server</h1>

<p>This method is considered the best, because <strong>your server side and client side scripts are completely separate</strong>.</p>

<h3>Pros</h3>

<ul>
<li><strong>Better separation between layers</strong> - If tomorrow you stop using PHP, and want to move to a servlet, a REST API, or some other service, you don't have to change much of the JavaScript code.</li>
<li><strong>More readable</strong> - JavaScript is JavaScript, PHP is PHP. Without mixing the two, you get more readable code on both languages.</li>
<li><strong>Allows for async data transfer</strong> - Getting the information from PHP might be time/resources expensive. Sometimes you just don't want to wait for the information, load the page, and have the information reach whenever.</li>
<li><strong>Data is not directly found on the markup</strong> - This means that your markup is kept clean of any additional data, and only JavaScript sees it.</li>
</ul>

<h3>Cons</h3>

<ul>
<li><strong>Latency</strong> - AJAX creates an HTTP request, and HTTP requests are carried over network and have network latencies.</li>
<li><strong>State</strong> - Data fetched via a separate HTTP request won't include any information from the HTTP request that fetched the HTML document. You may need this information (e.g. if the HTML document is generated in response to a form submission) and, if you do, will have to transfer it across somehow. If you have ruled out embedding the data in the page (which you have if you are using this technique) then that limits you to cookies/sessions which may be subject to race conditions.</li>
</ul>

<h2>Implementation Example</h2>

<p>With AJAX, you need two pages, one is where PHP generates the output, and the second is where JavaScript gets that output:</p>

<h3>get-data.php</h3>

<pre><code>/* Do some operation here, like talk to the database, the file-session
 * The world beyond, limbo, the city of shimmers, and Canada.
 * 
 * AJAX generally uses strings, but you can output JSON, HTML and XML as well. 
 * It all depends on the Content-type header that you send with your AJAX
 * request. */

echo json_encode(42); //In the end, you need to <strong>echo</strong> the result. 
                      //All data should be <em>json_encode()</em>d.

                      //You can json_encode() any value in PHP, arrays, strings,
                      //even objects.

</code></pre>

<h3>index.php (or whatever the actual page is named like)</h3>

<pre><code>&lt;!-- snip --&gt;
&lt;script&gt;
    function reqListener () {
      console.log(this.responseText);
    }

    var oReq = new XMLHttpRequest(); //New request object
    oReq.onload = function() {
        //This is where you handle what to do with the response.
        //The actual data is found on this.responseText
        alert(this.responseText); //Will alert: 42
    };
    oReq.open(""get"", ""get-data.php"", true);
    //                               ^ Don't block the rest of the execution.
    //                                 Don't wait until the request finishes to 
    //                                 continue.
    oReq.send();
&lt;/script&gt;
&lt;!-- snip --&gt;
</code></pre>

<p>The above combination of the two files will alert <code>42</code> when the file finishes loading.</p>

<h2>Some more reading material</h2>

<ul>
<li><strong><a href=""https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest"" rel=""noreferrer"">Using XMLHttpRequest - MDN</a></strong></li>
<li><strong><a href=""https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest"" rel=""noreferrer"">XMLHttpRequest object reference - MDN</a></strong></li>
<li><strong><a href=""https://stackoverflow.com/questions/14220321/how-to-return-the-response-from-an-ajax-call"">How do I return the response from an asynchronous call?</a></strong></li>
</ul>

<h1>2. Echo the data into the page somewhere, and use JavaScript to get the information from the DOM</h1>

<p>This method is less preferable to AJAX, but it still has its advantages. It's still <em>relatively</em> separated between PHP and JavaScript in a sense that there is no PHP directly in the JavaScript.</p>

<h3>Pros</h3>

<ul>
<li><strong>Fast</strong> - DOM operations are often quick, and you can store and access a lot of data relatively quickly.</li>
</ul>

<h3>Cons</h3>

<ul>
<li><strong>Potentially Unsemantic Markup</strong> - Usually, what happens is that you use some sort of <code>&lt;input type=hidden&gt;</code> to store the information, because it's easier to get the information out of <code>inputNode.value</code>, but doing so means that you have a meaningless element in your HTML. HTML has the <code>&lt;meta&gt;</code> element for data about the document, and HTML 5 introduces <code>data-*</code> attributes for data specifically for reading with JS that can be associated with particular elements.</li>
<li><strong>Dirties up the Source</strong> - Data that PHP generates is outputted directly to the HTML source, meaning that you get a bigger and less focused HTML source.</li>
<li><strong>Harder to get structured data</strong> - Structured data will have to be valid HTML, otherwise you'll have to escape and convert strings yourself.</li>
<li><strong>Tightly couples PHP to your data logic</strong> - Because PHP is used in presentation, you can't separate the two cleanly.</li>
</ul>

<h2>Implementation Example</h2>

<p>With this, the idea is to create some sort of element which will not be displayed to the user, but is visible to JavaScript.</p>

<h3>index.php</h3>

<pre><code>&lt;!-- snip --&gt;
&lt;div id=""dom-target"" style=""display: none;""&gt;
    &lt;?php 
        $output = ""42""; //Again, do some operation, get the output.
        echo htmlspecialchars($output); /* You have to escape because the result
                                           will not be valid HTML otherwise. */
    ?&gt;
&lt;/div&gt;
&lt;script&gt;
    var div = document.getElementById(""dom-target"");
    var myData = div.textContent;
&lt;/script&gt;
&lt;!-- snip --&gt;
</code></pre>

<h1>3. Echo the data directly to JavaScript</h1>

<p>This is probably the easiest to understand, and the most horrible to use. Don't do this unless you know what you're doing.</p>

<h3>Pros</h3>

<ul>
<li><strong>Very easily implemented</strong> - It takes very little to implement this, and understand.</li>
<li><strong>Does not dirty source</strong> - Variables are outputted directly to JavaScript, so the DOM is not affected.</li>
</ul>

<h3>Cons</h3>

<ul>
<li><strong><em>Insecure</em></strong> - PHP has no trivial JavaScript escape functions, and they aren't trivial to implement. Especially when using user inputs, you are <strong>extremely</strong> vulnerable to second tier injections. <strong>Disputed</strong> see comments</li>
<li><strong>Tightly couples PHP to your data logic</strong> - Because PHP is used in presentation, you can't separate the two cleanly.</li>
<li><strong>Structured data is hard</strong> - You can probably do JSON... kinda. But XML and HTML will require special attention.</li>
</ul>

<h2>Implementation Example</h2>

<p>Implementation is relatively straightforward:</p>

<pre><code>&lt;!-- snip --&gt;
&lt;script&gt;
    var data = &lt;?php echo json_encode(""42"", JSON_HEX_TAG); ?&gt;; //Don't forget the extra semicolon!
&lt;/script&gt;
&lt;!-- snip --&gt;
</code></pre>

<p>Good luck!</p>
","23740549"
"Get the client IP address using PHP","556647","","<p>I want to get the client IP address who uses my website. I am using the PHP <code>$_SERVER</code> superglobal:</p>

<pre><code>$_SERVER['REMOTE_ADDR'];
</code></pre>

<p>But I see it can not give the correct IP address using this. I get my IP address and see it is different from my IP address and I can also see my IP address in some website like:</p>

<pre><code>http://whatismyipaddress.com/
</code></pre>

<p>I paste the IP address which give my PHP function but this website shows no result about this. How does this problem come about and how can I get IP address of the client?</p>
","<p>The simplest way to get the visitor’s/client’s <a href=""http://en.wikipedia.org/wiki/IP_address"" rel=""noreferrer"">IP address</a> is using the <code>$_SERVER['REMOTE_ADDR']</code> or <code>$_SERVER['REMOTE_HOST']</code> variables.</p>

<p>However, sometimes this does not return the correct IP address of the visitor, so we can use some other server variables to get the IP address.</p>

<p>The below both functions are equivalent with the difference only in how and from where the values are retrieved.</p>

<p>getenv() is used to get the value of an environment variable in PHP.</p>

<pre><code>// Function to get the client IP address
function get_client_ip() {
    $ipaddress = '';
    if (getenv('HTTP_CLIENT_IP'))
        $ipaddress = getenv('HTTP_CLIENT_IP');
    else if(getenv('HTTP_X_FORWARDED_FOR'))
        $ipaddress = getenv('HTTP_X_FORWARDED_FOR');
    else if(getenv('HTTP_X_FORWARDED'))
        $ipaddress = getenv('HTTP_X_FORWARDED');
    else if(getenv('HTTP_FORWARDED_FOR'))
        $ipaddress = getenv('HTTP_FORWARDED_FOR');
    else if(getenv('HTTP_FORWARDED'))
       $ipaddress = getenv('HTTP_FORWARDED');
    else if(getenv('REMOTE_ADDR'))
        $ipaddress = getenv('REMOTE_ADDR');
    else
        $ipaddress = 'UNKNOWN';
    return $ipaddress;
}
</code></pre>

<p>$_SERVER is an array that contains server variables created by the web server.</p>

<pre><code>// Function to get the client IP address
function get_client_ip() {
    $ipaddress = '';
    if (isset($_SERVER['HTTP_CLIENT_IP']))
        $ipaddress = $_SERVER['HTTP_CLIENT_IP'];
    else if(isset($_SERVER['HTTP_X_FORWARDED_FOR']))
        $ipaddress = $_SERVER['HTTP_X_FORWARDED_FOR'];
    else if(isset($_SERVER['HTTP_X_FORWARDED']))
        $ipaddress = $_SERVER['HTTP_X_FORWARDED'];
    else if(isset($_SERVER['HTTP_FORWARDED_FOR']))
        $ipaddress = $_SERVER['HTTP_FORWARDED_FOR'];
    else if(isset($_SERVER['HTTP_FORWARDED']))
        $ipaddress = $_SERVER['HTTP_FORWARDED'];
    else if(isset($_SERVER['REMOTE_ADDR']))
        $ipaddress = $_SERVER['REMOTE_ADDR'];
    else
        $ipaddress = 'UNKNOWN';
    return $ipaddress;
}
</code></pre>
","15699240"
"Dude, where's my php.ini?","555778","","<p>A few years ago I installed Apache 2.2x and PHP 5.3.1 on a Linux server I maintain.  I used .tar.gz's and built them as instructed (instead of rpms and what-have-you). And all was fine.</p>

<p>Today I need to install <a href=""http://us2.php.net/ibm_db2"" rel=""noreferrer"">this</a> which seems like a PHP library.  I went through all the steps up to make install, and I find ibm_db2.so in <code>$PHP_HOME/lib/extensions/somecomplicatedname/ibm_db2.so</code></p>

<p>The great catch is the last step is to configure php.ini but there is NO php.ini on my system. Horror of horrors. PHP works fine, except of course for this new-fangled ibm_db2 thingamagic that I want to use so somebody can use a GUI to tinker with <code>DB2</code>. (I tried a small php script which fails and indicates that the ibm_db2 functions are not available).</p>

<p>I have to deal with PHP once every few years, so please enlighten me at a very basic level about what I could do to enable web-based GUI access to <code>DB2</code>.</p>
","<p>Best way to find this is:
create a php file and add the following code:</p>

<pre><code>&lt;?php phpinfo(); ?&gt;
</code></pre>

<p>and open it in browser, it will show the file which is actually being read!</p>

<p>Updates by OP:</p>

<ol>
<li>The previously accepted <a href=""https://stackoverflow.com/questions/8684609/dude-wheres-my-php-ini/8684638#8684638"">answer</a> is likely to be faster and more convenient for you, but it is not always correct. See comments on that answer.</li>
<li>Please also note the more convenient alternative <code>&lt;?php echo php_ini_loaded_file(); ?&gt;</code> mentioned in <a href=""https://stackoverflow.com/questions/8684609/dude-wheres-my-php-ini/24342463#24342463"">this answer</a>.</li>
</ol>
","17185370"
"Sort Multi-dimensional Array by Value","553825","","<p>How can I sort this array by the value of the ""order"" key? Even though the values are currently sequential, they will not always be.</p>

<pre><code>Array
(
    [0] =&gt; Array
        (
            [hashtag] =&gt; a7e87329b5eab8578f4f1098a152d6f4
            [title] =&gt; Flower
            [order] =&gt; 3
        )

    [1] =&gt; Array
        (
            [hashtag] =&gt; b24ce0cd392a5b0b8dedc66c25213594
            [title] =&gt; Free
            [order] =&gt; 2
        )

    [2] =&gt; Array
        (
            [hashtag] =&gt; e7d31fc0602fb2ede144d18cdffd816b
            [title] =&gt; Ready
            [order] =&gt; 1
        )
)
</code></pre>
","<p>Try a <code>usort</code>: If you are still on PHP 5.2 or earlier, you'll have to define a sorting function first:</p>

<pre><code>function sortByOrder($a, $b) {
    return $a['order'] - $b['order'];
}

usort($myArray, 'sortByOrder');
</code></pre>

<p>Starting in PHP 5.3, you can use an anonymous function:</p>

<pre><code>usort($myArray, function($a, $b) {
    return $a['order'] - $b['order'];
});
</code></pre>

<p>And finally with PHP 7 you can use the ""spaceship operator"":</p>

<pre><code>usort($myArray, function($a, $b) {
    return $a['order'] &lt;=&gt; $b['order'];
});
</code></pre>

<p>To extend this to multi-dimensional sorting, reference the second/third sorting elements if the first is zero - best explained below. You can also use this for sorting on sub-elements.</p>

<pre><code>usort($myArray, function($a, $b) {
    $retval = $a['order'] &lt;=&gt; $b['order'];
    if ($retval == 0) {
        $retval = $a['suborder'] &lt;=&gt; $b['suborder'];
        if ($retval == 0) {
            $retval = $a['details']['subsuborder'] &lt;=&gt; $b['details']['subsuborder'];
        }
    }
    return $retval;
});
</code></pre>

<p>If you need to retain key associations, use <code>uasort()</code> - see <a href=""http://php.net/manual/en/array.sorting.php"" rel=""noreferrer"">comparison of array sorting functions</a> in the manual</p>
","2699159"
"PHP Pass variable to next page","545902","","<p>It seems pretty simple but I can't find a good way to do it.</p>

<p>Say in the first page I create a variable</p>

<pre><code>$myVariable = ""Some text"";
</code></pre>

<p>And the form's action for that page is ""Page2.php"". So in Page2.php, how can I have access to that variable? I know I can do it with sessions but I think it's too much for a simple string, and I do only need to pass a simple string (a file name).</p>

<p>How can I achieve this?</p>

<p>Thanks!</p>
","<p>HTML / HTTP is stateless, in other words, what you did / saw on the previous page, is completely unconnected with the current page. <em>Except</em> if you use something like sessions, cookies or GET / POST variables. Sessions and cookies are quite easy to use, with session being by far more secure than cookies. More secure, but not completely secure.</p>

<p><strong>Session:</strong></p>

<pre><code>//On page 1
$_SESSION['varname'] = $var_value;

//On page 2
$var_value = $_SESSION['varname'];
</code></pre>

<p>Remember to run the <code>session_start();</code> statement on both these pages before you try to access the <code>$_SESSION</code> array, and also before any output is sent to the browser.</p>

<p><strong>Cookie:</strong></p>

<pre><code>//One page 1
$_COOKIE['varname'] = $var_value;

//On page 2
$var_value = $_COOKIE['varname'];
</code></pre>

<p>The big difference between sessions and cookies is that the value of the variable will be stored on the server if you're using sessions, and on the client if you're using cookies. I can't think of any good reason to use cookies instead of sessions, except if you want data to persist between sessions, but even then it's perhaps better to store it in a DB, and retrieve it based on a username or id.</p>

<p><strong>GET and POST</strong></p>

<p>You can add the variable in the link to the next page:</p>

<pre><code>&lt;a href=""page2.php?varname=&lt;?php echo $var_value ?&gt;""&gt;Page2&lt;/a&gt;
</code></pre>

<p>This will create a GET variable. </p>

<p>Another way is to include a hidden field in a form that submits to page two:</p>

<pre><code>&lt;form method=""get"" action=""page2.php""&gt;
    &lt;input type=""hidden"" name=""varname"" value=""var_value""&gt;
    &lt;input type=""submit""&gt;
&lt;/form&gt;
</code></pre>

<p>And then on page two:</p>

<pre><code>//Using GET
$var_value = $_GET['varname'];

//Using POST
$var_value = $_POST['varname'];

//Using GET, POST or COOKIE.
$var_value = $_REQUEST['varname'];
</code></pre>

<p>Just change the method for the form to <code>post</code> if you want to do it via post. Both are equally insecure, although GET is easier to hack.</p>

<p>The fact that each new request is, except for session data, a totally new instance of the script caught me when I first started coding in PHP. Once you get used to it, it's quite simple though.</p>
","872522"
"Finding the number of days between two dates","541009","","<p>How to find number of days between two dates using PHP?</p>
","<pre><code>$now = time(); // or your date as well
$your_date = strtotime(""2010-01-01"");
$datediff = $now - $your_date;

echo round($datediff / (60 * 60 * 24));
</code></pre>
","2040589"
"PHP array delete by value (not key)","534502","","<p>I have a PHP array as follows:</p>

<pre><code>$messages = [312, 401, 1599, 3, ...];
</code></pre>

<p>I want to delete the element containing the value <code>$del_val</code> (for example, <code>$del_val=401</code>), but I don't know its key. This might help: <strong>each value can only be there once</strong>.</p>

<p>I'm looking for the simplest function to perform this task please.</p>
","<p>Using <a href=""http://php.net/manual/en/function.array-search.php"" rel=""noreferrer""><code>array_search()</code></a> and <a href=""http://br2.php.net/unset"" rel=""noreferrer""><code>unset</code></a>, try the following:</p>

<pre><code>if (($key = array_search($del_val, $messages)) !== false) {
    unset($messages[$key]);
}
</code></pre>

<p><code>array_search()</code> returns the key of the element it finds, which can be used to remove that element from the original array using <code>unset()</code>. It will return <code>FALSE</code> on failure, however it can return a false-y value on success (your key may be <code>0</code> for example), which is why the strict comparison <code>!==</code> operator is used.</p>

<p>The <code>if()</code> statement will check whether <code>array_search()</code> returned a value, and will only perform an action if it did.</p>
","7225113"
"How to get URL of current page in PHP","534396","","<p>In PHP, how can I get the URL of the current page? Preferably just the parts after <a href=""http://domain.com"" rel=""noreferrer"">http://domain.com</a>.</p>
","<pre><code>$_SERVER['REQUEST_URI']
</code></pre>

<p>For more details on what info is available in the $_SERVER array, see <a href=""http://us3.php.net/manual/en/reserved.variables.server.php"" rel=""noreferrer"">the PHP manual page for it</a>.</p>

<p>If you also need the query string (the bit after the <code>?</code> in a URL), that part is in this variable:</p>

<pre><code>$_SERVER['QUERY_STRING']
</code></pre>
","1283330"
"How to read if a checkbox is checked in PHP?","532809","","<p>How to read if a checkbox is checked in PHP?</p>
","<p>If your HTML page looks like this:  </p>

<pre><code>&lt;input type=""checkbox"" name=""test"" value=""value1""&gt;
</code></pre>

<p>After submitting the form you can check it with:  </p>

<pre><code>isset($_POST['test'])
</code></pre>

<p>or  </p>

<pre><code>if ($_POST['test'] == 'value1') ...
</code></pre>
","4554784"
"MySQL query String contains","529560","","<p>I've been trying to figure out how I can make a query with MySQL that checks if the value (string <code>$haystack</code> ) in a certain column contains certain data (string <code>$needle</code>), like this:</p>

<pre><code>mysql_query(""
SELECT *
FROM `table`
WHERE `column`.contains('{$needle}')
"");
</code></pre>

<p>In PHP, the function is called <code>substr($haystack, $needle)</code>, so maybe:</p>

<pre><code>WHERE substr(`column`, '{$needle}')=1
</code></pre>
","<p>Quite simple actually:</p>

<pre><code>mysql_query(""
SELECT *
FROM `table`
WHERE `column` LIKE '%{$needle}%'
"");
</code></pre>

<p>The <code>%</code> is a wildcard for any character. Do note that this can get slow on very large datasets so if your database grows you'll need to use fulltext indices.</p>
","2602274"
"Converting string to Date and DateTime","523878","","<p>If I have a PHP string in the format of <code>mm-dd-YYYY</code> (for example, 10-16-2003), how do I properly convert that to a <code>Date</code> and then a <code>DateTime</code> in the format of <code>YYYY-mm-dd</code>? The only reason I ask for both <code>Date</code> and <code>DateTime</code> is because I need one in one spot, and the other in a different spot.</p>
","<p>Use <code>strtotime()</code> on your first date then <code>date('Y-m-d')</code> to convert it back:</p>

<pre><code>$time = strtotime('10/16/2003');

$newformat = date('Y-m-d',$time);

echo $newformat;
// 2003-10-16
</code></pre>

<p>Make note that there is a difference between using forward slash <code>/</code> and hyphen <code>-</code> in the <a href=""http://php.net/strtotime"" rel=""noreferrer""><code>strtotime()</code></a> function. To quote from php.net:</p>

<blockquote>
  <p>Dates in the m/d/y or d-m-y formats
  are disambiguated by looking at the
  separator between the various
  components: if the separator is a
  slash (/), then the American m/d/y is
  assumed; whereas if the separator is a
  dash (-) or a dot (.), then the
  European d-m-y format is assumed.</p>
</blockquote>
","6239010"
"How can I parse a JSON file with PHP?","523757","","<p>I tried to parse a JSON file using PHP. But I am stuck now.</p>

<p>This is the content of my JSON file:</p>

<pre><code>{
    ""John"": {
        ""status"":""Wait""
    },
    ""Jennifer"": {
        ""status"":""Active""
    },
    ""James"": {
        ""status"":""Active"",
        ""age"":56,
        ""count"":10,
        ""progress"":0.0029857,
        ""bad"":0
    }
}
</code></pre>

<p>And this is what I have tried so far:</p>

<pre><code>&lt;?php

$string = file_get_contents(""/home/michael/test.json"");
$json_a = json_decode($string, true);

echo $json_a['John'][status];
echo $json_a['Jennifer'][status];
</code></pre>

<p>But because I don't know the names (like <code>'John'</code>, <code>'Jennifer'</code>) and all available keys and values (like <code>'age'</code>, <code>'count'</code>) beforehand, I think I need to create some foreach loop.</p>

<p>I would appreciate an example for this.</p>
","<p>To iterate over a multidimensional array, you can use <a href=""http://us2.php.net/manual/en/recursivearrayiterator.getchildren.php"" rel=""noreferrer"">RecursiveArrayIterator</a></p>

<pre><code>$jsonIterator = new RecursiveIteratorIterator(
    new RecursiveArrayIterator(json_decode($json, TRUE)),
    RecursiveIteratorIterator::SELF_FIRST);

foreach ($jsonIterator as $key =&gt; $val) {
    if(is_array($val)) {
        echo ""$key:\n"";
    } else {
        echo ""$key =&gt; $val\n"";
    }
}
</code></pre>

<p>Output:</p>

<pre><code>John:
status =&gt; Wait
Jennifer:
status =&gt; Active
James:
status =&gt; Active
age =&gt; 56
count =&gt; 10
progress =&gt; 0.0029857
bad =&gt; 0
</code></pre>

<p><a href=""http://codepad.org/Gtk8DqJE"" rel=""noreferrer"">run on codepad</a></p>
","4343691"
"How to 'insert if not exists' in MySQL?","515445","","<p>I started by googling, and found this <a href=""http://www.xaprb.com/blog/2005/09/25/insert-if-not-exists-queries-in-mysql/"" rel=""noreferrer"">article</a> which talks about mutex tables.</p>

<p>I have a table with ~14 million records. If I want to add more data in the same format, is there a way to ensure the record I want to insert does not already exist without using a pair of queries (ie, one query to check and one to insert is the result set is empty)?</p>

<p>Does a <code>unique</code> constraint on a field guarantee the <code>insert</code> will fail if it's already there?</p>

<p>It seems that with <em>merely</em> a constraint, when I issue the insert via php, the script croaks.</p>
","<p>use <code>INSERT IGNORE INTO table</code></p>

<p>see <a href=""http://bogdan.org.ua/2007/10/18/mysql-insert-if-not-exists-syntax.html"" rel=""noreferrer"">http://bogdan.org.ua/2007/10/18/mysql-insert-if-not-exists-syntax.html</a></p>

<p>there's also <code>INSERT … ON DUPLICATE KEY UPDATE</code> syntax, you can find explanations on <a href=""http://dev.mysql.com/doc/refman/5.1/en/insert-on-duplicate.html"" rel=""noreferrer"">dev.mysql.com</a></p>

<hr>

<p><strong>Post from bogdan.org.ua according to <a href=""http://webcache.googleusercontent.com/search?q=cache:bogdan.org.ua/2007/10/18/mysql-insert-if-not-exists-syntax.html"" rel=""noreferrer"">Google's webcache</a>:</strong></p>

<blockquote>
  <p>18th October 2007</p>
  
  <p>To start: as of the latest MySQL, syntax presented in the title is not
  possible. But there are several very easy ways to accomplish what is
  expected using existing functionality.</p>
  
  <p>There are 3 possible solutions: using INSERT IGNORE, REPLACE, or
  INSERT … ON DUPLICATE KEY UPDATE.</p>
  
  <p>Imagine we have a table:</p>

<pre><code>CREATE TABLE `transcripts` (
`ensembl_transcript_id` varchar(20) NOT NULL,
`transcript_chrom_start` int(10) unsigned NOT NULL,
`transcript_chrom_end` int(10) unsigned NOT NULL,
PRIMARY KEY (`ensembl_transcript_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
</code></pre>
  
  <p>Now imagine that we have an automatic pipeline importing transcripts
  meta-data from Ensembl, and that due to various reasons the pipeline
  might be broken at any step of execution. Thus, we need to ensure two
  things: 1) repeated executions of the pipeline will not destroy our
  database, and 2) repeated executions will not die due to ‘duplicate
  primary key’ errors.</p>
  
  <p>Method 1: using REPLACE</p>
  
  <p>It’s very simple:</p>

<pre><code>REPLACE INTO `transcripts`
SET `ensembl_transcript_id` = ‘ENSORGT00000000001′,
`transcript_chrom_start` = 12345,
`transcript_chrom_end` = 12678;
</code></pre>
  
  <p>If the record exists, it will be overwritten; if it does not yet
  exist, it will be created. However, using this method isn’t efficient
  for our case: we do not need to overwrite existing records, it’s fine
  just to skip them.</p>
  
  <p>Method 2: using INSERT IGNORE Also very simple:</p>

<pre><code>INSERT IGNORE INTO `transcripts`
SET `ensembl_transcript_id` = ‘ENSORGT00000000001′,
`transcript_chrom_start` = 12345,
`transcript_chrom_end` = 12678;
</code></pre>
  
  <p>Here, if the ‘ensembl_transcript_id’ is already present in the
  database, it will be silently skipped (ignored). (To be more precise,
  here’s a quote from MySQL reference manual: “If you use the IGNORE
  keyword, errors that occur while executing the INSERT statement are
  treated as warnings instead. For example, without IGNORE, a row that
  duplicates an existing UNIQUE index or PRIMARY KEY value in the table
  causes a duplicate-key error and the statement is aborted.”.) If the
  record doesn’t yet exist, it will be created.</p>
  
  <p>This second method has several potential weaknesses, including
  non-abortion of the query in case any other problem occurs (see the
  manual). Thus it should be used if previously tested without the
  IGNORE keyword.</p>
  
  <p>There is one more option: to use INSERT … ON DUPLICATE KEY UPDATE
  syntax, and in the UPDATE part just do nothing do some meaningless
  (empty) operation, like calculating 0+0 (Geoffray suggests doing the
  id=id assignment for the MySQL optimization engine to ignore this
  operation). Advantage of this method is that it only ignores duplicate
  key events, and still aborts on other errors.</p>
  
  <p>As a final notice: this post was inspired by Xaprb. I’d also advise to
  consult his other post on writing flexible SQL queries.</p>
</blockquote>
","1361368"
"Remove all special characters from a string","515296","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/3022185/regular-expression-sanitize-php"">Regular Expression Sanitize (PHP)</a>  </p>
</blockquote>



<p>I am facing an issue with URLs, I want to be able to convert titles that could contain anything and have them stripped of all special characters so they only have letters and numbers and of course I would like to replace spaces with hyphens.</p>

<p>How would this be done? I've heard a lot about regular expressions (regex) being used...</p>
","<p>Easy peasy:</p>

<pre><code>function clean($string) {
   $string = str_replace(' ', '-', $string); // Replaces all spaces with hyphens.

   return preg_replace('/[^A-Za-z0-9\-]/', '', $string); // Removes special chars.
}
</code></pre>

<p><b>Usage:</b></p>

<pre><code>echo clean('a|""bc!@£de^&amp;$f g');
</code></pre>

<p>Will output: <code>abcdef-g</code></p>

<p><b>Edit:</b></p>

<blockquote>
  <p>Hey, just a quick question, how can I prevent multiple hyphens from being next to each other? and have them replaced with just 1?</p>
</blockquote>

<pre><code>function clean($string) {
   $string = str_replace(' ', '-', $string); // Replaces all spaces with hyphens.
   $string = preg_replace('/[^A-Za-z0-9\-]/', '', $string); // Removes special chars.

   return preg_replace('/-+/', '-', $string); // Replaces multiple hyphens with single one.
}
</code></pre>
","14114419"
"How to get multiple selected values of select box in php?","514224","","<p>I have a html form which has a select list box from which you can select multiple values because its multiple property is set to multiple. Consider form method is 'GET'. The html code for the form is as follows:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;html&gt;
    &lt;head&gt;
    &lt;title&gt;Untitled Document&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;form id=""form1"" name=""form1"" method=""get"" action=""display.php""&gt;
      &lt;table width=""300"" border=""1""&gt;
        &lt;tr&gt;
          &lt;td&gt;&lt;label&gt;Multiple Selection &lt;/label&gt;&amp;nbsp;&lt;/td&gt;
          &lt;td&gt;&lt;select name=""select2"" size=""3"" multiple=""multiple"" tabindex=""1""&gt;
            &lt;option value=""11""&gt;eleven&lt;/option&gt;
            &lt;option value=""12""&gt;twelve&lt;/option&gt;
            &lt;option value=""13""&gt;thirette&lt;/option&gt;
            &lt;option value=""14""&gt;fourteen&lt;/option&gt;
            &lt;option value=""15""&gt;fifteen&lt;/option&gt;
            &lt;option value=""16""&gt;sixteen&lt;/option&gt;
            &lt;option value=""17""&gt;seventeen&lt;/option&gt;
            &lt;option value=""18""&gt;eighteen&lt;/option&gt;
            &lt;option value=""19""&gt;nineteen&lt;/option&gt;
            &lt;option value=""20""&gt;twenty&lt;/option&gt;
          &lt;/select&gt;
          &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;&amp;nbsp;&lt;/td&gt;
          &lt;td&gt;&lt;input type=""submit"" name=""Submit"" value=""Submit"" tabindex=""2"" /&gt;&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
    &lt;/form&gt;
    &lt;/body&gt;
    &lt;/html&gt;</code></pre>
</div>
</div>
</p>

<p>I want to display the selected values in select list box on display.php page. So how are the selected values accessed on display.php page using <code>$_GET[]</code> array.</p>
","<p>If you want PHP to treat <code>$_GET['select2']</code> as an array of options just add square brackets to the name of the <em>select element</em> like this: <code>&lt;select name=""select2[]"" multiple …</code></p>

<p>Then you can acces the array in your PHP script</p>

<pre><code>&lt;?php
header(""Content-Type: text/plain"");

foreach ($_GET['select2'] as $selectedOption)
    echo $selectedOption.""\n"";
</code></pre>

<p><code>$_GET</code> may be substituted by <code>$_POST</code> depending on the <code>&lt;form method=""…""</code> value.</p>
","2407401"
"How can I echo HTML in PHP?","502511","","<p>I want to conditionally output HTML to generate a page, so what's the easiest way to echo multiline snippets of HTML in PHP 4+? Would I need to use a template framework like Smarty?</p>

<pre><code>echo '&lt;html&gt;', ""\n""; // I'm sure there's a better way!
echo '&lt;head&gt;', ""\n"";
echo '&lt;/head&gt;', ""\n"";
echo '&lt;body&gt;', ""\n"";
echo '&lt;/body&gt;', ""\n"";
echo '&lt;/html&gt;', ""\n"";
</code></pre>
","<p>There are a few ways to echo HTML in PHP.</p>

<h2>1. In between PHP tags</h2>

<pre><code>&lt;?php if(condition){ ?&gt;
     &lt;!-- HTML here --&gt;
&lt;?php } ?&gt;
</code></pre>

<h2>2. In an echo</h2>

<pre><code>if(condition){
     echo ""HTML here"";
}
</code></pre>

<p>With echos, if you wish to use double quotes in your HTML you must use single quote echos like so:</p>

<pre><code>echo '&lt;input type=""text""&gt;';
</code></pre>

<p>Or you can escape them like so:</p>

<pre><code>echo ""&lt;input type=\""text\""&gt;"";
</code></pre>

<h2>3. Heredocs</h2>

<h2>4. Nowdocs (as of PHP 5.3.0)</h2>

<p><strong>Template engines</strong> are used for using PHP in documents that contain mostly HTML. In fact, PHP's original purpose was to be a templating language. That's why with PHP you can use things like short tags to echo variables (e.g. <code>&lt;?=$someVariable?&gt;</code>). </p>

<p>There are other template engines (such as Smarty, Twig, etc.) that make the syntax even more concise (e.g. <code>{{someVariable}}</code>).</p>

<p>The primary benefit of using a template engine is keeping the design (Presentation Logic) separate from the coding (Business Logic). It also makes the code cleaner and easier to maintain in the long run.</p>

<p>If you have any more questions feel free to leave a comment.
Further reading is available on these things in the <a href=""http://www.php.net/manual/en/language.types.string.php"" rel=""noreferrer"">PHP Documentation</a>.</p>

<p>God Bless!</p>

<hr>

<p><strong>NOTE:</strong> PHP short tags <code>&lt;?</code> and <code>?&gt;</code> are discouraged because they are only available if enabled with <code>short_open_tag</code> php.ini configuration file directive, or if PHP was configured with the <code>--enable-short-tags</code> option. <a href=""https://stackoverflow.com/a/200666/1488917"">They are available, regardless of settings from 5.4 onwards</a>.  </p>
","1100424"
"Reference — What does this symbol mean in PHP?","500026","","<h3>What is this?</h3>

<p>This is a collection of questions that come up every now and then about syntax in PHP. This is also a Community Wiki, so everyone is invited to participate in maintaining this list. </p>

<h3>Why is this?</h3>

<p>It used to be hard to find questions about operators and other syntax tokens.¹<br>
The main idea is to have links to existing questions on Stack Overflow, so it's easier for us to reference them, not to copy over content from the PHP Manual.</p>

<p>¹ Note: Since January 2013, Stack Overflow <a href=""https://meta.stackexchange.com/questions/160100/a-new-search-engine-for-stack-exchange"">does support special characters</a>. Just surround the search terms by quotes, e.g. <a href=""https://stackoverflow.com/search?q=%5Bphp%5D%20%22===%22%20vs%20%22==%22""><code>[php] ""=="" vs ""===""</code></a></p>

<h3>What should I do here?</h3>

<p>If you have been pointed here by someone because you have asked such a question, please find the particular syntax below. The linked pages to the <a href=""http://php.net/manual/en/index.php"" rel=""noreferrer"">PHP manual</a> along with the linked questions will likely answer your question then. If so, you are encouraged to upvote the answer. This list is not meant as a substitute to the help others provided.</p>

<h2>The List</h2>

<p>If your particular token is not listed below, you might find it in the <a href=""http://www.php.net/manual/en/tokens.php"" rel=""noreferrer"">List of Parser Tokens</a>.</p>

<hr>

<p><code>&amp;</code> <a href=""http://www.php.net/manual/en/language.operators.bitwise.php"" rel=""noreferrer"">Bitwise Operators</a> or <a href=""http://www.php.net/manual/en/language.references.php"" rel=""noreferrer"">References</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/1676897"">What does it mean to start a PHP function with an ampersand?</a></li>
<li><a href=""https://stackoverflow.com/questions/600202"">Understanding PHP &amp; (ampersand, bitwise and) operator</a></li>
<li><a href=""https://stackoverflow.com/questions/2209934/"">PHP &quot;&amp;&quot; operator</a></li>
<li><a href=""https://stackoverflow.com/questions/2376348"">Difference between &amp; and &amp;&amp; in PHP</a></li>
<li><a href=""https://stackoverflow.com/questions/1006652"">What does &quot;&amp;&quot; mean here in PHP?</a></li>
<li><a href=""https://stackoverflow.com/questions/2297592"">What does &quot;&amp;&quot; mean in this case?</a></li>
<li><a href=""https://stackoverflow.com/questions/2422907"">What does the &quot;&amp;&quot; sign mean in PHP?</a></li>
<li><a href=""https://stackoverflow.com/questions/2478149"">What does this signature mean (&amp;) in PHP?</a></li>
<li><a href=""https://stackoverflow.com/questions/3957584"">How does the &quot;&amp;&quot; operator work in a PHP function?</a></li>
<li><a href=""https://stackoverflow.com/questions/4705262"">What does &amp; in &amp;2 mean in PHP?</a></li>
<li><a href=""https://stackoverflow.com/questions/4705838"">When should I use a bitwise operator?</a></li>
<li><a href=""https://stackoverflow.com/questions/21058439"">Is there ever a need to use ampersand in front of an object?</a> (&amp;$)</li>
</ul>

<hr>

<p><code>=&amp;</code> <a href=""http://www.php.net/manual/en/language.references.php"" rel=""noreferrer"">References</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/1768343"">Reference assignment operator in PHP, =&amp;</a></li>
<li><a href=""https://stackoverflow.com/questions/1367454"">What do the &quot;=&amp;&quot; and &quot;&amp;=&quot; operators in PHP mean?</a></li>
<li><a href=""https://stackoverflow.com/questions/3177342"">What do the &#39;&amp;=&#39; and &#39;=&amp;&#39; operators do?</a></li>
<li><a href=""https://stackoverflow.com/questions/2081806"">What does =&amp; mean in PHP?</a></li>
</ul>

<hr>

<p><code>&amp;=</code> <a href=""http://www.php.net/manual/en/language.operators.bitwise.php"" rel=""noreferrer"">Bitwise Operators</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/1367454"">What do the &quot;=&amp;&quot; and &quot;&amp;=&quot; operators in PHP mean?</a></li>
<li><a href=""https://stackoverflow.com/questions/3177342"">What do the &#39;&amp;=&#39; and &#39;=&amp;&#39; operators do?</a></li>
</ul>

<hr>

<p><code>&amp;&amp;</code> <a href=""http://www.php.net/manual/en/language.operators.logical.php"" rel=""noreferrer"">Logical Operators</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/2803321"">&#39;AND&#39; vs &#39;&amp;&amp;&#39; as operator</a></li>
<li><a href=""https://stackoverflow.com/questions/2376348"">Difference between &amp; and &amp;&amp; in PHP</a></li>
<li><a href=""https://stackoverflow.com/questions/4746865"">Is there any difference between &quot;and&quot; and &quot;&amp;&amp;&quot; operators in PHP?</a></li>
<li><a href=""https://stackoverflow.com/questions/4502092"">PHP - and / or keywords</a></li>
</ul>

<hr>

<p><code>%</code> <a href=""http://www.php.net/manual/en/language.operators.arithmetic.php"" rel=""noreferrer"">Arithmetic Operators</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/1934173"">What does the percent sign mean in PHP?</a></li>
<li><a href=""https://stackoverflow.com/questions/3204919"">What is the PHP operator % and how do I use it in real-world examples?</a></li>
</ul>

<hr>

<p><code>!!</code> <a href=""http://www.php.net/manual/en/language.operators.logical.php"" rel=""noreferrer"">Logical Operators</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/2127260"">Double not (!!) operator in PHP</a></li>
</ul>

<hr>

<p><code>@</code> <a href=""http://www.php.net/manual/en/language.operators.errorcontrol.php"" rel=""noreferrer"">Error Control Operators</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/1032161"">What is the use of the @ symbol in PHP?</a></li>
<li><a href=""https://stackoverflow.com/questions/3551527"">&#39;At&#39; symbol before variable name in PHP: @$_POST</a></li>
<li><a href=""https://stackoverflow.com/questions/3984864"">PHP functions and @functions</a></li>
<li><a href=""https://stackoverflow.com/questions/4872340"">Should I use @ in my PHP code?</a></li>
</ul>

<hr>

<p><code>?:</code> <a href=""http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary"" rel=""noreferrer"">Ternary Operator</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/1080247"">What are the PHP operators &quot;?&quot; and &quot;:&quot; called and what do they do?</a></li>
<li><a href=""https://stackoverflow.com/questions/1993409"">?: operator (the &#39;Elvis operator&#39;) in PHP</a></li>
<li><a href=""https://stackoverflow.com/questions/4055355"">Where can I read about conditionals done with &quot;?&quot; and &quot;:&quot; (colon)?</a></li>
<li><a href=""https://stackoverflow.com/questions/4210187"">Using PHP 5.3 ?: operator</a></li>
</ul>

<hr>

<p><code>??</code> <a href=""https://wiki.php.net/rfc/isset_ternary"" rel=""noreferrer"">Null Coalesce Operator</a> (since PHP 7)</p>

<ul>
<li><a href=""https://stackoverflow.com/questions/7278835"">C#&#39;s null coalescing operator (??) in PHP?</a></li>
</ul>

<hr>

<p><code>:</code> <a href=""http://www.php.net/manual/en/control-structures.alternative-syntax.php"" rel=""noreferrer"">Alternative syntax for control structures</a>, <a href=""http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary"" rel=""noreferrer"">Ternary Operator</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/2908095"">What is &quot;:&quot; in PHP?</a></li>
<li><a href=""https://stackoverflow.com/questions/4747761"">What does &quot;:&quot; mean in PHP?</a></li>
</ul>

<hr>

<p><code>::</code> <a href=""http://www.php.net/manual/en/language.oop5.paamayim-nekudotayim.php"" rel=""noreferrer"">Scope Resolution Operator</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/2903564"">What do two colons mean in PHP?</a></li>
<li><a href=""https://stackoverflow.com/questions/2588298"">What&#39;s the meaning of the PHP token name T_PAAMAYIM_NEKUDOTAYIM?</a></li>
<li><a href=""https://stackoverflow.com/questions/3173501"">What&#39;s the difference between :: (double colon) and -&gt; (arrow) in PHP?</a></li>
<li><a href=""https://stackoverflow.com/questions/1912902"">What exactly are late static bindings in PHP?</a></li>
<li><a href=""https://stackoverflow.com/questions/4120755"">static::staticFunctionName()</a></li>
<li><a href=""https://stackoverflow.com/questions/8734823"">Unexpected T_PAAMAYIM_NEKUDOTAYIM, expecting T_NS_Separator</a></li>
</ul>

<hr>

<p><code>\</code> <a href=""http://php.net/namespaces"" rel=""noreferrer"">Namespaces</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/10788400"">Backslash in PHP -- what does it mean?</a></li>
<li><a href=""https://stackoverflow.com/questions/4790020"">What does a \ (backslash) do in PHP (5.3+)?</a></li>
</ul>

<hr>

<p><code>-&gt;</code> <a href=""http://www.php.net/manual/en/language.oop5.php"" rel=""noreferrer"">Classes And Objects</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/2588149"">What is the &quot;-&gt;&quot; PHP operator called and how do you say it when reading code out loud?</a></li>
<li><a href=""https://stackoverflow.com/questions/3037526"">Where do we use the object operator &quot;-&gt;&quot; in PHP?</a></li>
<li><a href=""https://stackoverflow.com/questions/3173501"">What&#39;s the difference between :: (double colon) and -&gt; (arrow) in PHP?</a></li>
<li><a href=""https://stackoverflow.com/questions/2316370"">What does the PHP syntax $var1-&gt;$var2 mean?</a></li>
<li><a href=""https://stackoverflow.com/questions/4502587"">What does &quot;-&gt;&quot; mean/refer to in PHP?</a></li>
</ul>

<hr>

<p><code>=&gt;</code> <a href=""http://www.php.net/manual/en/language.types.array.php"" rel=""noreferrer"">Arrays</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/1241819"">What does &quot;=&gt;&quot; mean in PHP?</a></li>
<li><a href=""https://stackoverflow.com/questions/1655336"">Use of =&gt; in PHP</a></li>
<li><a href=""https://stackoverflow.com/questions/4758791"">What does $k =&gt; $v in foreach($ex as $k=&gt;$v) mean?</a></li>
</ul>

<hr>

<p><code>^</code> <a href=""http://www.php.net/manual/en/language.operators.bitwise.php"" rel=""noreferrer"">Bitwise Operators</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/2674920"">How does the bitwise operator XOR (&#39;^&#39;) work?</a></li>
<li><a href=""https://stackoverflow.com/questions/2724936"">What does ^ mean in PHP?</a></li>
</ul>

<hr>

<p><code>&gt;&gt;</code> <a href=""http://www.php.net/manual/en/language.operators.bitwise.php"" rel=""noreferrer"">Bitwise Operators</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/2790329"">What does &gt;&gt; mean in PHP?</a></li>
</ul>

<hr>

<p><code>&lt;&lt;</code> <a href=""http://www.php.net/manual/en/language.operators.bitwise.php"" rel=""noreferrer"">Bitwise Operators</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/9718689/strange-print-behaviour-in-php"">Strange print behaviour in PHP?</a></li>
</ul>

<hr>

<p><code>&lt;&lt;&lt;</code> <a href=""http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc"" rel=""noreferrer"">Heredoc or Nowdoc</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/5539669"">What does &lt;&lt;&lt;END mean in PHP?</a></li>
<li><a href=""https://stackoverflow.com/questions/1048481"">PHP expression &lt;&lt;&lt;EOB</a></li>
<li><a href=""https://stackoverflow.com/questions/3700042"">In PHP, what does &quot;&lt;&lt;&lt;&quot; represent?</a></li>
<li><a href=""https://stackoverflow.com/questions/2090081"">Using &lt;&lt;&lt;CON in PHP</a></li>
<li><a href=""https://stackoverflow.com/questions/2333779"">What&#39;s this kind of syntax in PHP?</a></li>
</ul>

<hr>

<p><code>=</code> <a href=""http://www.php.net/manual/en/language.operators.assignment.php"" rel=""noreferrer"">Assignment Operators</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/2063480"">The 3 different equals</a></li>
</ul>

<hr>

<p><code>==</code> <a href=""http://www.php.net/manual/en/language.operators.comparison.php"" rel=""noreferrer"">Comparison Operators</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/80646"">How do the PHP equality (== double equals) and identity (=== triple equals) comparison operators differ?</a></li>
<li><a href=""https://stackoverflow.com/questions/1663451"">PHP != and == operators</a></li>
<li><a href=""https://stackoverflow.com/questions/2063480"">The 3 different equals</a></li>
<li><a href=""https://stackoverflow.com/questions/15813490/"">Type-juggling and (strict) greater/lesser-than comparisons in PHP</a></li>
</ul>

<hr>

<p><code>===</code> <a href=""http://www.php.net/manual/en/language.operators.comparison.php"" rel=""noreferrer"">Comparison Operators</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/1117967"">What does &quot;===&quot; mean?</a></li>
<li><a href=""https://stackoverflow.com/questions/80646"">How do the PHP equality (== double equals) and identity (=== triple equals) comparison operators differ?</a></li>
<li><a href=""https://stackoverflow.com/questions/2063480"">The 3 different equals</a></li>
<li><a href=""https://stackoverflow.com/questions/15813490/"">Type-juggling and (strict) greater/lesser-than comparisons in PHP</a></li>
</ul>

<hr>

<p><code>!==</code> <a href=""http://www.php.net/manual/en/language.operators.comparison.php"" rel=""noreferrer"">Comparison Operators</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/1298083"">What does !== comparison operator in PHP mean?</a></li>
<li><a href=""https://stackoverflow.com/questions/1139154"">Is there a difference between !== and != in PHP?</a></li>
</ul>

<hr>

<p><code>!=</code> <a href=""http://www.php.net/manual/en/language.operators.comparison.php"" rel=""noreferrer"">Comparison Operators</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/1663451"">PHP != and == operators</a></li>
<li><a href=""https://stackoverflow.com/questions/1139154"">Is there a difference between !== and != in PHP?</a></li>
<li><a href=""https://stackoverflow.com/questions/6356826"">comparing, !== versus !=</a></li>
<li><a href=""https://stackoverflow.com/questions/9671785/what-is-the-difference-between-and"">What is the difference between &lt;&gt; and !=</a></li>
</ul>

<hr>

<p><code>&lt;&gt;</code> <a href=""http://www.php.net/manual/en/language.operators.comparison.php"" rel=""noreferrer"">Comparison Operators</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/249312"">PHP operator &lt;&gt;</a></li>
<li><a href=""https://stackoverflow.com/questions/589391"">PHP&#39;s &lt;&gt; operator</a></li>
<li><a href=""https://stackoverflow.com/questions/9671785"">What is the difference between &lt;&gt; and !=</a></li>
<li><a href=""https://stackoverflow.com/questions/15813490/"">Type-juggling and (strict) greater/lesser-than comparisons in PHP</a></li>
</ul>

<hr>

<p><code>&lt;=&gt;</code> <a href=""http://www.php.net/manual/en/language.operators.comparison.php"" rel=""noreferrer"">Comparison Operators</a> (since PHP 7.0)</p>

<ul>
<li><a href=""https://stackoverflow.com/a/31298778"">Spaceship (three way comparison) operator</a></li>
</ul>

<hr>

<p><code>|</code> <a href=""http://www.php.net/manual/en/language.operators.bitwise.php"" rel=""noreferrer"">Bitwise Operators</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/2233835"">What is the difference between the | and || operators?</a></li>
<li><a href=""https://stackoverflow.com/questions/13811922"">What Does Using A Single Pipe &#39;|&#39; In A Function Argument Do?</a></li>
</ul>

<hr>

<p><code>||</code> <a href=""http://www.php.net/manual/en/language.operators.logical.php"" rel=""noreferrer"">Logical Operators</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/2233835"">What is the difference between the | and || operators?</a></li>
<li><a href=""https://stackoverflow.com/questions/4502092"">PHP - and / or keywords</a></li>
<li><a href=""https://stackoverflow.com/questions/5666741"">What exactly does || mean?</a></li>
<li><a href=""https://stackoverflow.com/questions/12213283"">The behaviour of the or operator in PHP</a></li>
</ul>

<hr>

<p><code>~</code> <a href=""http://www.php.net/manual/en/language.operators.bitwise.php"" rel=""noreferrer"">Bitwise Operators</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/1967360"">What does this ~ operator mean here?</a></li>
</ul>

<hr>

<p><code>+</code> <a href=""http://www.php.net/manual/en/language.operators.arithmetic.php"" rel=""noreferrer"">Arithmetic Operators</a>, <a href=""http://www.php.net/manual/en/language.operators.array.php"" rel=""noreferrer"">Array Operators</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/2140090"">+ operator for array in PHP?</a></li>
</ul>

<hr>

<p><code>+=</code> and <code>-=</code> <a href=""http://www.php.net/manual/en/language.operators.assignment.php"" rel=""noreferrer"">Assignment Operators</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/542995"">What is += used for?</a></li>
<li><a href=""https://stackoverflow.com/questions/7140158"">What does `$page -= 1` in my PHP document mean?</a></li>
</ul>

<hr>

<p><code>++</code> and <code>--</code> <a href=""http://www.php.net/manual/en/language.operators.increment.php"" rel=""noreferrer"">Incrementing/Decrementing Operators</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/1968371"">Understanding Incrementing</a></li>
<li><a href=""https://stackoverflow.com/a/3737177"">Answer below</a></li>
</ul>

<hr>

<p><code>.=</code> <a href=""http://www.php.net/manual/en/language.operators.assignment.php"" rel=""noreferrer"">Assignment Operators</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/2202331"">What is the difference between .= and += in PHP?</a></li>
<li><a href=""https://stackoverflow.com/questions/1241432"">To understand a line of PHP</a></li>
</ul>

<hr>

<p><code>.</code> <a href=""http://www.php.net/manual/en/language.operators.string.php"" rel=""noreferrer"">String Operators</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/1466408"">Difference between period and comma when concatenating with echo versus return?</a></li>
<li><a href=""https://stackoverflow.com/questions/6484968"">What does a . (dot) do in PHP?</a></li>
</ul>

<hr>

<p><code>,</code> <a href=""http://php.net/manual/en/functions.arguments.php"" rel=""noreferrer"">Function Arguments</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/1466408"">Difference between period and comma when concatenating with echo versus return?</a></li>
</ul>

<p><code>,</code> <a href=""http://php.net/manual/en/language.variables.scope.php"" rel=""noreferrer"">Variable Declarations</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/41383218"">What do commas mean in a variable declaration?</a></li>
</ul>

<hr>

<p><code>$$</code> <a href=""http://php.net/manual/en/language.variables.variable.php"" rel=""noreferrer"">Variable Variables</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/2715654"">What does $$ (dollar dollar or double dollar) mean in PHP?</a></li>
<li><a href=""https://stackoverflow.com/questions/4169882"">what is &quot;$$&quot; in PHP</a></li>
<li><a href=""https://stackoverflow.com/questions/4891872"">$function() and $$variable</a></li>
</ul>

<hr>

<p><code>`</code> <a href=""http://php.net/manual/en/language.operators.execution.php"" rel=""noreferrer"">Execution Operator</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/6002296"">What are the backticks `` called?</a></li>
</ul>

<hr>

<p><code>&lt;?=</code> <a href=""http://php.net/manual/en/ini.core.php#ini.short-open-tag"" rel=""noreferrer"">Short Open Tags</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/1963901"">What does this symbol mean in PHP &lt;?=</a></li>
<li><a href=""https://stackoverflow.com/questions/2020445"">What does &#39;&lt;?=&#39; mean in PHP?</a></li>
<li><a href=""https://stackoverflow.com/questions/1959256/what-does-mean"">What does &lt;?= mean?</a></li>
</ul>

<hr>

<p><code>[]</code> <a href=""http://www.php.net/manual/en/language.types.array.php"" rel=""noreferrer"">Arrays</a> (short syntax since PHP 5.4)</p>

<ul>
<li><a href=""https://stackoverflow.com/q/20709055/2758197"">PHP arrays... What is/are the meaning(s) of an empty bracket?</a></li>
<li><a href=""https://stackoverflow.com/questions/6933345"">What is the meaning of []</a></li>
<li><a href=""https://stackoverflow.com/questions/2431629"">Php array_push() vs myArray[]</a></li>
<li><a href=""https://stackoverflow.com/questions/3908576"">What does [] mean when reading from a PHP array?</a></li>
<li><a href=""https://stackoverflow.com/questions/4271874"">Shorthand for arrays: literal <code>$var = []</code> empty array</a></li>
</ul>

<hr>

<p><code>&lt;?</code> <a href=""http://www.php.net/manual/en/language.basic-syntax.php"" rel=""noreferrer"">Opening and Closing tags</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/200640"">Are PHP short tags acceptable to use?</a></li>
</ul>

<hr>

<p><code>...</code> <a href=""http://php.net/manual/en/functions.arguments.php#functions.variable-arg-list"" rel=""noreferrer"">Argument unpacking</a> (since PHP 5.6)</p>

<hr>

<p><code>**</code> <a href=""http://www.php.net/manual/en/migration56.new-features.php#migration56.new-features.exponentiation"" rel=""noreferrer"">Exponentiation</a> (since PHP 5.6)</p>

<hr>

<p><code>#</code> <a href=""http://php.net/manual/en/language.basic-syntax.comments.php"" rel=""noreferrer"">One-line shell-style comment</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/9093609/can-i-use-hashes-for-comments-in-php"">Can I use hashes for comments in PHP?</a></li>
</ul>

<hr>
","<p><strong><a href=""http://php.net/manual/en/language.operators.increment.php"" rel=""noreferrer"">Incrementing / Decrementing Operators</a></strong></p>

<p><code>++</code> increment operator</p>

<p><code>--</code> decrement operator</p>

<pre class=""lang-none prettyprint-override""><code>Example    Name              Effect
---------------------------------------------------------------------
++$a       Pre-increment     Increments $a by one, then returns $a.
$a++       Post-increment    Returns $a, then increments $a by one.
--$a       Pre-decrement     Decrements $a by one, then returns $a.
$a--       Post-decrement    Returns $a, then decrements $a by one.
</code></pre>

<p>These can go before or after the variable.</p>

<p>If put before the variable, the increment/decrement operation is done to the variable <strong>first</strong> then the result is returned. If put after the variable, the variable is <strong>first</strong> returned, then the increment/decrement operation is done.</p>

<p>For example:</p>

<pre><code>$apples = 10;
for ($i = 0; $i &lt; 10; ++$i) {
    echo 'I have ' . $apples-- . "" apples. I just ate one.\n"";
}
</code></pre>

<p><strong><a href=""http://codepad.org/5ZD3j0xb"" rel=""noreferrer"">Live example</a></strong></p>

<p>In the case above <code>++$i</code> is used, since it is faster. <code>$i++</code> would have the same results.</p>

<p>Pre-increment is a little bit faster, because it really increments the variable and after that 'returns' the result. Post-increment creates a special variable, copies there the value of the first variable and only after the first variable is used, replaces its value with second's.</p>

<p>However, you must use <code>$apples--</code>, since first you want to display the current number of apples, and <strong>then</strong> you want to subtract one from it.</p>

<p>You can also increment letters in PHP:</p>

<pre><code>$i = ""a"";
while ($i &lt; ""c"") {
    echo $i++;
}
</code></pre>

<p>Once <code>z</code> is reached <code>aa</code> is next, and so on.</p>

<blockquote>
  <p>Note that character variables can be incremented but not decremented and even so only plain ASCII characters (a-z and A-Z) are supported.</p>
</blockquote>

<hr>

<p><strong>Stack Overflow Posts:</strong></p>

<ul>
<li><strong><a href=""https://stackoverflow.com/questions/1968371/understanding-incrementing"">Understanding Incrementing</a></strong>  </li>
</ul>
","3737177"
"HTTP Content-Type Header and JSON","499527","","<p>Ok so I have always been trying to avoid using most of the HTTP protocol's properties or how ever you may please to call them for the sake of fear of the unknown. However I said to myself that I'm going to face fear today and start using headers purposely. What I have been trying to achieve here is send <code>json</code> data to the browser and use it right away. For example if I have an ajax handler function on ready state 4 which looks like so</p>

<pre><code>function ajaxHandler(response){
    alert(response.text);
}
</code></pre>

<p>and I have set the content-type header in my php</p>

<pre><code>header('Content-Type: application/json');
echo json_encode(array('text' =&gt; 'omrele'));
</code></pre>

<p>My question is: Why can't I directly access the property from the handler function, when the browser is clearly told that the incoming data is <code>application/json</code>?</p>
","<p>The <code>Content-Type</code> header is just used as info for your application.  The browser doesn't care what it is.  The browser just returns you the data from the AJAX call.  If you want to parse it as JSON, you need to do that on your own.</p>

<p>The header is there so your app can detect what data was returned and how it should handle it.  You need to look at the header, and if it's <code>application/json</code> then parse it as JSON.</p>

<p>This is actually how jQuery works.  If you don't tell it what to do with the result, it uses the <code>Content-Type</code> to detect what to do with it.</p>
","20620606"
"PDOException “could not find driver”","499385","","<p>I have just installed Debian Lenny with Apache, MySQL, and PHP and I am receiving a PDOException <code>could not find driver</code>.</p>

<p>This is the specific line of code it is referring to:</p>

<p><code>$dbh = new PDO('mysql:host=' . DB_HOST . ';dbname=' . DB_NAME, DB_USER, DB_PASS)</code></p>

<p><code>DB_HOST</code>, <code>DB_NAME</code>, <code>DB_USER</code>, and <code>DB_PASS</code> are constants that I have defined. It works fine on the production server (and on my previous Ubuntu Server setup).</p>

<p>Is this something to do with my PHP installation?</p>

<p>Searching the internet has not helped, all I get is experts-exchange and examples, but no solutions.</p>
","<p>You need to have a module called pdo_mysql. Looking for following in phpinfo(),</p>

<pre><code>pdo_mysql

PDO Driver for MySQL, client library version =&gt; 5.1.44
</code></pre>
","2852997"
"Parse error: Syntax error, unexpected end of file in my PHP code","492661","","<p>I got an error:</p>

<pre><code>Parse error: syntax error, unexpected end of file in the line
</code></pre>

<p>With this code:</p>

<pre><code>&lt;html&gt;
    &lt;?php
        function login()
        {
            // Login function code
        }
        if (login())
    {?&gt;

    &lt;h2&gt;Welcome Administrator&lt;/h2&gt;
    &lt;a href=\""upload.php\""&gt;Upload Files&lt;/a&gt;
    &lt;br /&gt;
    &lt;a href=\""points.php\""&gt;Edit Points Tally&lt;/a&gt;

    &lt;?php}
        else
        {
            echo ""Incorrect login details. Please login"";
        }
    ?&gt;
    Some more HTML code
&lt;/html&gt;
</code></pre>

<p>What's the problem?</p>
","<p>You should avoid this (at the end of your code):</p>

<pre><code>{?&gt;
</code></pre>

<p>and this:</p>

<pre><code>&lt;?php}
</code></pre>

<p>You shouldn't put brackets directly close to the open/close <code>php</code> tag, but it separate with a space:</p>

<pre><code>{ ?&gt;
&lt;?php {
</code></pre>

<p>also avoid <code>&lt;?</code> and use <code>&lt;?php</code></p>
","11482620"
"If isset $_POST","487153","","<p>I have a form on one page that submits to another page. There, it checks if the input mail is filled. If so then do something and if it is not filled, do something else. I don't understand why it always says that it is set, even if I send an empty form. What is missing or wrong?</p>

<p>step2.php:</p>

<pre><code>&lt;form name=""new user"" method=""post"" action=""step2_check.php""&gt; 
&lt;input type=""text"" name=""mail""/&gt; &lt;br /&gt;
&lt;input type=""password"" name=""password""/&gt;&lt;br /&gt;
&lt;input type=""submit""  value=""continue""/&gt;
&lt;/form&gt;
</code></pre>

<p>step2_check:</p>

<pre><code>if (isset($_POST[""mail""])) {
    echo ""Yes, mail is set"";    
}else{  
    echo ""N0, mail is not set"";
}
</code></pre>
","<p>Change it to this:</p>

<pre><code>if (isset($_POST[""mail""]) &amp;&amp; !empty($_POST[""mail""])) {
    echo ""Yes, mail is set"";    
}else{  
    echo ""N0, mail is not set"";
}
</code></pre>

<p>So $_POST is always set, but its content might be empty.</p>

<p>Since !empty() already checks whether the value is set, you can also use this version:</p>

<pre><code>if (!empty($_POST[""mail""])) {
    echo ""Yes, mail is set"";    
}else{  
    echo ""N0, mail is not set"";
}
</code></pre>
","13045314"
"Invalid argument supplied for foreach()","486035","","<p>It often happens to me to handle data that can be either an array or a null variable and to feed some <code>foreach</code> with these data.</p>

<pre><code>$values = get_values();

foreach ($values as $value){
  ...
}
</code></pre>

<p>When you feed a foreach with data that are not an array, you get a warning:</p>

<blockquote>
  <p>Warning: Invalid argument supplied for foreach() in [...]</p>
</blockquote>

<p>Assuming it's not possible to refactor the <code>get_values()</code> function to always return an array (backward compatibility, not available source code, whatever other reason), I'm wondering which is the cleanest and most efficient way to avoid these warnings:</p>

<ul>
<li>Casting <code>$values</code> to array</li>
<li>Initializing <code>$values</code> to array</li>
<li>Wrapping the <code>foreach</code> with an <code>if</code></li>
<li>Other (please suggest)</li>
</ul>
","<p>Personally I find this to be the most clean - not sure if it's the most efficient, mind!</p>

<pre><code>if (is_array($values) || is_object($values))
{
    foreach ($values as $value)
    {
        ...
    }
}
</code></pre>

<p>The reason for my preference is it doesn't allocate an empty array when you've got nothing to begin with anyway.</p>
","2630032"
"PHP date() format when inserting into datetime in MySQL","483499","","<p>What is the correct format to pass to the <code>date()</code> function in PHP if I want to insert the result into a MySQL <code>datetime</code> type column?</p>

<p>I've been trying <code>date(""Y-M-D G:i:s"")</code> but that just inserts ""0000-00-00 00:00:00"" everytime.</p>
","<p>The problem is that you're using <code>'M'</code> and <code>'D'</code>, which are a textual representations, MySQL is expecting a numeric representation of the format <code>2010-02-06 19:30:13</code></p>

<p>Try: <code>date(""Y-m-d H:i:s"")</code> which uses the numeric equivalents.</p>

<p>edit: switched <code>G</code> to <code>H</code>, though it may not have impact, you probably want to use 24-hour format with leading 0s.</p>
","2215359"
"How to check whether an array is empty using PHP?","477687","","<p><code>players</code> will either be empty or a comma separated list (or a single value). What is the easiest way to check if it's empty? I'm assuming I can do so as soon as I fetch the <code>$gameresult</code> array into <code>$gamerow</code>? In this case it would probably be more efficient to skip exploding the <code>$playerlist</code> if it's empty, but for the sake of argument, how would I check if an array is empty as well?</p>

<pre><code>$gamerow = mysql_fetch_array($gameresult);
$playerlist = explode("","", $gamerow['players']);
</code></pre>
","<p>If you just need to check if there are ANY elements in the array</p>

<pre><code>if (empty($playerlist)) {
     // list is empty.
}
</code></pre>

<p>If you need to clean out empty values before checking (generally done to prevent <code>explode</code>ing weird strings):</p>

<pre><code>foreach ($playerlist as $key =&gt; $value) {
    if (empty($value)) {
       unset($playerlist[$key]);
    }
}
if (empty($playerlist)) {
   //empty array
}
</code></pre>
","2216063"
"Check whether an array is empty","462804","","<p>I have the following code</p>

<pre><code>&lt;?php

$error = array();
$error['something'] = false;
$error['somethingelse'] = false;

if (!empty($error))
{
    echo 'Error';
}
else
{
    echo 'No errors';
}

?&gt;
</code></pre>

<p>However, <code>empty($error)</code> still returns <code>true</code>, even though nothing is set.</p>

<p>What's not right?</p>
","<p>There are two elements in array and this definitely doesn't mean that array is empty. As a quick workaround you can do following:</p>

<pre><code>$errors = array_filter($errors);

if (!empty($errors)) {
}
</code></pre>

<p><code>array_filter()</code> function's default behavior will remove all values from array which are equal to <code>null</code>, <code>0</code>, <code>''</code> or <code>false</code>.</p>

<p>Otherwise in your particular case <code>empty()</code> construct will always return <code>true</code> if there is at least one element even with ""empty"" value.</p>
","8329005"
"Using $_POST to get select option value from HTML","462273","","<p>I use <code>select</code> as below:</p>

<pre><code>&lt;select name=""taskOption""&gt;
    &lt;option&gt;First&lt;/option&gt;
    &lt;option&gt;Second&lt;/option&gt;
    &lt;option&gt;Third&lt;/option&gt;
&lt;/select&gt;
</code></pre>

<p>How do I get the value from the <code>select</code> option and store it into a variable for future use, in PHP?</p>
","<p>Use this way:</p>

<pre><code>$selectOption = $_POST['taskOption'];
</code></pre>

<p>But it is always better to give values to your <code>&lt;option&gt;</code> tags.</p>

<pre><code>&lt;select name=""taskOption""&gt;
  &lt;option value=""1""&gt;First&lt;/option&gt;
  &lt;option value=""2""&gt;Second&lt;/option&gt;
  &lt;option value=""3""&gt;Third&lt;/option&gt;
&lt;/select&gt;
</code></pre>
","17139538"
"How to push both value and key into array","461900","","<p>Take a look at this code:</p>

<pre><code>$GET = array();    
$key = 'one=1';
$rule = explode('=', $key);
/* array_push($GET, $rule[0] =&gt; $rule[1]); */
</code></pre>

<p>I'm looking for something like this so that:</p>

<pre><code>print_r($GET);
/* output: $GET[one =&gt; 1, two =&gt; 2, ...] */
</code></pre>

<p>Is there a function to do this? (because <code>array_push</code> won't work this way)</p>
","<p>Nope, there is no <code>array_push()</code> equivalent for associative arrays because there is no way determine the next key. </p>

<p>You'll have to use</p>

<pre><code>$arrayname[indexname] = $value;
</code></pre>
","2121551"
"How to get useful error messages in PHP?","460467","","<p>I find programming in PHP quite frustrating. Quite often I will try and run the script and just get a blank screen back. No error message, just empty screen. The cause might have been a simple syntax error (wrong bracket, missing semicolon), or a failed function call, or something else entirely.</p>

<p>It is very difficult to figure out what went wrong. I end up commenting out code, entering ""echo"" statements everywhere, etc. trying to narrow down the problem. But there surely must be a better way, right?.</p>

<p>So, is there a way to get PHP to produce useful error message like Java does?
Can anyone recommend good PHP debugging tips, tools and techniques?</p>
","<p>For syntax errors, you need to enable error display in the php.ini. By default these are turned off because you don't want a ""customer"" seeing the error messages. <a href=""http://php.net/manual/en/errorfunc.configuration.php#ini.error-reporting"" rel=""noreferrer"">Check this page</a> in the PHP documentation for information on the 2 directives: <code>error_reporting</code> and <code>display_errors</code>. <code>display_errors</code> is probably the one you want to change. If you can't modify the php.ini, you can also add the following lines to an .htaccess file:</p>

<pre><code>php_flag  display_errors        on
php_value error_reporting       2039
</code></pre>

<p>You may want to consider using the value of E_ALL (as mentioned by Gumbo) for your version of PHP for <code>error_reporting</code> to get all of the errors. <a href=""http://docs.php.net/manual/en/errorfunc.constants.php"" rel=""noreferrer"">more info</a></p>

<p>3 other items: (1) You can check the error log file as it will have all of the errors (unless logging has been disabled). (2) Adding the following 2 lines will help you debug errors that are not syntax errors:</p>

<pre><code>error_reporting(-1);
ini_set('display_errors', 'On');
</code></pre>

<p>(3) Another option is to use an editor that checks for errors when you type, such as <a href=""http://www.nusphere.com/products/phped.htm"" rel=""noreferrer"">PhpEd</a>. PhpEd also comes with a debugger which can provide more detailed information. (The PhpEd debugger is very similar to xdebug and integrates directly into the editor so you use 1 program to do everything.)</p>

<p>Cartman's <a href=""http://www.ibm.com/developerworks/library/os-debug/"" rel=""noreferrer"">link</a> is also very good: <a href=""http://www.ibm.com/developerworks/library/os-debug/"" rel=""noreferrer"">http://www.ibm.com/developerworks/library/os-debug/</a></p>
","845025"
"How to echo an array in PHP?","458015","","<p>I have this array</p>

<pre><code>Array
(
  [data] =&gt; Array
    (
      [0] =&gt; Array
        (
          [page_id] =&gt; 204725966262837
          [type] =&gt; WEBSITE
        )

      [1] =&gt; Array
        (
          [page_id] =&gt; 163703342377960
          [type] =&gt; COMMUNITY
        )
      )
)
</code></pre>

<p>My question is how can I just echo the content without this structure? I tried </p>

<pre><code>foreach ($results as $result) {
    echo $result-&gt;type; 
    echo ""&lt;br&gt;"";
} 
</code></pre>
","<p>This will do</p>

<pre><code>foreach($results['data'] as $result) {
    echo $result['type'], '&lt;br&gt;';
}
</code></pre>
","9816938"
"How to make PDF file downloadable in HTML link?","454916","","<p>I am giving link of a pdf file on my web page for download, like below</p>

<pre><code>&lt;a href=""myfile.pdf""&gt;Download Brochure&lt;/a&gt;
</code></pre>

<p>The problem is when user clicks on this link then</p>

<ul>
<li>If the user have installed Adobe Acrobat, then it opens the file in the same browser window in Adobe Reader.</li>
<li>If the Adobe Acrobat is not installed then it pop-up to the user for Downloading the file.</li>
</ul>

<p>But I want it always pop-up to the user for download, irrespective of ""Adobe acrobat"" is installed or not.</p>

<p>Please tell me how i can do this?</p>
","<p>Instead of linking to the .PDF file, instead do something like </p>

<pre><code>&lt;a href=""pdf_server.php?file=pdffilename""&gt;Download my eBook&lt;/a&gt;
</code></pre>

<p>which outputs a custom header, opens the PDF (binary safe) and prints the data to the user's browser, then they can choose to save the PDF despite their browser settings.  The pdf_server.php should look like this:</p>

<pre><code>header(""Content-Type: application/octet-stream"");

$file = $_GET[""file""] ."".pdf"";
header(""Content-Disposition: attachment; filename="" . urlencode($file));   
header(""Content-Type: application/octet-stream"");
header(""Content-Type: application/download"");
header(""Content-Description: File Transfer"");            
header(""Content-Length: "" . filesize($file));
flush(); // this doesn't really matter.
$fp = fopen($file, ""r"");
while (!feof($fp))
{
    echo fread($fp, 65536);
    flush(); // this is essential for large downloads
} 
fclose($fp); 
</code></pre>

<p>PS: and obviously run some sanity checks on the ""file"" variable to prevent people from stealing your files such as don't accept file extensions, deny slashes, add .pdf to the value</p>
","364950"
"Matching a space in regex","454110","","<p>I need to match a space character in a PHP regular expression. Anyone got any ideas?</p>

<p>I mean like ""gavin schulz"", the space in between the two words. I am using a regular expression to make sure that I only allow letters, number and a space. But I'm not sure how to find the space. This is what I have right now:</p>

<pre><code>$newtag = preg_replace(""/[^a-zA-Z0-9s|]/"", """", $tag);
</code></pre>
","<p>If you're looking for a space, that would be <code>"" ""</code> (one space).</p>

<p>If you're looking for one or more, it's <code>""  *""</code> (that's <em>two</em> spaces and an asterisk) or <code>"" +""</code> (one space and a plus).</p>

<p>If you're looking for common spacing, use <code>""[ X]""</code> or <code>""[ X][ X]*""</code> or <code>""[ X]+""</code> where <code>X</code> is the physical tab character (and each is preceded by a single space in all those examples).</p>

<p>These will work in <em>every</em>* regex engine I've ever seen (some of which don't even have the one-or-more <code>""+""</code> character, ugh).</p>

<p>If you know you'll be using one of the more modern regex engines, <code>""\s""</code> and its variations are the way to go. In addition, I believe word boundaries match start and end of lines as well, important when you're looking for words that may appear without preceding or following spaces.</p>

<p>For PHP specifically, <a href=""http://www.wellho.net/regex/php.html"" rel=""noreferrer"">this page</a> may help.</p>

<p>From your edit, it appears you want to remove all non valid characters The start of this is (note the space inside the regex):</p>

<pre><code>$newtag = preg_replace (""/[^a-zA-Z0-9 ]/"", """", $tag);
#                                    ^ space here
</code></pre>

<p>If you also want trickery to ensure there's only one space between each word and none at the start or end, that's a little more complicated (and probably another question) but the basic idea would be:</p>

<pre><code>$newtag = preg_replace (""/ +/"", "" "", $tag); # convert all multispaces to space
$newtag = preg_replace (""/^ /"", """", $tag);  # remove space from start
$newtag = preg_replace (""/ $/"", """", $tag);  # and end
</code></pre>
","559404"
"""date(): It is not safe to rely on the system's timezone settings...""","453957","","<p>I got this error when I requested to update the <a href=""http://en.wikipedia.org/wiki/PHP"">PHP</a> version from 5.2.17 to PHP 5.3.21 on the server.</p>

<pre><code>&lt;div style=""border:1px solid #990000;padding-left:20px;margin:0 0 10px 0;""&gt;

&lt;h4&gt;A PHP Error was encountered&lt;/h4&gt;

&lt;p&gt;Severity: Warning&lt;/p&gt;
&lt;p&gt;Message:  date(): It is not safe to rely on the system's timezone settings. You are *required* to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected 'America/New_York' for 'EDT/-4.0/DST' instead&lt;/p&gt;
&lt;p&gt;Filename: libraries/Log.php&lt;/p&gt;
&lt;p&gt;Line Number: 86&lt;/p&gt;

&lt;/div&gt;
Warning: date(): It is not safe to rely on the system's timezone settings. You are *required* to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected 'America/New_York' for 'EDT/-4.0/DST' instead in /filelocation right here/system/libraries/Log.php on line 86

Warning: date(): It is not safe to rely on the system's timezone settings. You are *required* to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected 'America/New_York' for 'EDT/-4.0/DST' instead in /filelocation right here/system/libraries/Log.php on line 99
&lt;div style=""border:1px solid #990000;padding-left:20px;margin:0 0 10px 0;""&gt;

&lt;h4&gt;A PHP Error was encountered&lt;/h4&gt;

&lt;p&gt;Severity: Warning&lt;/p&gt;
&lt;p&gt;Message:  date(): It is not safe to rely on the system's timezone settings. You are *required* to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected 'America/New_York' for 'EDT/-4.0/DST' instead&lt;/p&gt;
&lt;p&gt;Filename: libraries/Log.php&lt;/p&gt;
&lt;p&gt;Line Number: 99&lt;/p&gt;

&lt;/div&gt;
</code></pre>
","<p>You probably need to put the timezone in a configuration line in your <code>php.ini</code> file. You should have a block like this in your php.ini file:</p>

<pre><code>[Date]
; Defines the default timezone used by the date functions
; http://php.net/date.timezone
date.timezone = America/New_York
</code></pre>

<p>If not, add it (replacing the timezone by yours). After configuring, make sure to restart httpd (<code>service httpd restart</code>).</p>

<p>Here is the <a href=""http://www.php.net/manual/en/timezones.php"">list of supported timezones</a>.</p>
","16765214"
"How to get the file extension in PHP?","452994","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/173868/how-to-extract-a-file-extension-in-php"">How to extract a file extension in PHP?</a>  </p>
</blockquote>



<p>I wish to get the file extension of an image I am uploading, but I just get an array back. </p>

<pre><code>$userfile_name = $_FILES['image']['name'];
$userfile_extn = explode(""."", strtolower($_FILES['image']['name']));
</code></pre>

<p>Is there a way to just get the extension itself?</p>
","<p>No need to use string functions. You can use something that's actually designed for what you want: <a href=""http://php.net/manual/en/function.pathinfo.php"" rel=""noreferrer""><code>pathinfo()</code></a>:</p>

<pre><code>$path = $_FILES['image']['name'];
$ext = pathinfo($path, PATHINFO_EXTENSION);
</code></pre>
","10368236"
"Execute PHP function with onClick","448376","","<p>I am searching for a simple solution to call a <strong>PHP function</strong> only when <strong>a-tag</strong> is clicked.</p>

<p><strong>PHP:</strong></p>

<pre><code>function removeday() { ... }
</code></pre>

<p><strong>HTML:</strong></p>

<pre><code>&lt;a href="""" onclick=""removeday()"" class=""deletebtn""&gt;Delete&lt;/a&gt;
</code></pre>

<p><strong>UPDATE:</strong> the html and PHP code are in the same PHP file</p>
","<p>First, understand that you have three languages working together.</p>

<ul>
<li><p>PHP: Is only run by the server and responds to requests like clicking on a link (GET) or submitting a form (POST).</p></li>
<li><p>HTML &amp; JavaScript: Is only run in someone's browser (excluding NodeJS).</p></li>
</ul>

<p>I'm assuming your file looks something like:</p>

<pre><code>&lt;html&gt;
&lt;?php
  function runMyFunction() {
    echo 'I just ran a php function';
  }

  if (isset($_GET['hello'])) {
    runMyFunction();
  }
?&gt;

Hello there!
&lt;a href='index.php?hello=true'&gt;Run PHP Function&lt;/a&gt;
&lt;/html&gt;
</code></pre>

<p>Because PHP only responds to requests (GET, POST, PUT, PATCH, and DELETE via $_REQUEST), this is how you have to run a PHP function even though they're in the same file.  This gives you a level of security, ""Should I run this script for this user or not?"".</p>

<p>If you don't want to refresh the page, you can make a request to PHP without refreshing via a method called Asynchronous JavaScript and XML (AJAX).</p>

<p>That is something you can look up on YouTube though.  Just search ""jquery ajax""</p>

<p>I recommend Laravel to anyone new to start off right: <a href=""http://laravel.com/"" rel=""noreferrer"">http://laravel.com/</a></p>
","19323407"
"What is stdClass in PHP?","445725","","<p>Please define what <code>stdClass</code> is.</p>
","<p><code>stdClass</code> is PHP's generic empty class, kind of like <code>Object</code> in Java or <code>object</code> in Python (<strong>Edit:</strong> but not actually used as universal base class; thanks <em>@Ciaran for</em> <a href=""https://stackoverflow.com/a/992654/911182"">pointing this out</a>).</p>

<p>It is useful for anonymous objects, dynamic properties, etc. </p>

<p>See <a href=""http://krisjordan.com/dynamic-properties-in-php-with-stdclass"" rel=""noreferrer"">Dynamic Properties in PHP and StdClass</a> for example.</p>
","931419"
"Illegal string offset Warning PHP","445056","","<p>I get a strange PHP error after updating my php version to 5.4.0-3.</p>

<p>I have this array:</p>

<pre><code>Array
(
    [host] =&gt; 127.0.0.1
    [port] =&gt; 11211
)
</code></pre>

<p>When I try to access it like this I get strange warnings</p>

<pre><code> print $memcachedConfig['host'];
 print $memcachedConfig['port'];


 Warning: Illegal string offset 'host' in ....
 Warning: Illegal string offset 'port' in ...
</code></pre>

<p>I really don't want to just edit my php.ini and re-set the error level.</p>

<p>Thanks for any help!</p>
","<p>Please try this way.... I have tested this code.... It works....</p>

<pre><code>$memcachedConfig = array(""host"" =&gt; ""127.0.0.1"",""port"" =&gt; ""11211"");
print_r ($memcachedConfig['host']);
</code></pre>
","9869249"
"Passing an array to a query using a WHERE clause","431019","","<p>Given an array of ids <code>$galleries = array(1,2,5)</code> I want to have a SQL query that uses the values of the array in its WHERE clause like:</p>

<pre class=""lang-sql prettyprint-override""><code>SELECT *
FROM galleries
WHERE id = /* values of array $galleries... eg. (1 || 2 || 5) */
</code></pre>

<p>How can I generate this query string to use with MySQL?</p>
","<blockquote>
  <p><strong>BEWARE!</strong> This answer contains a severe <a href=""https://stackoverflow.com/questions/60174/how-can-i-prevent-sql-injection-in-php"">SQL injection</a> vulnerability. Do NOT use the code samples as presented here, without making sure that any external input is sanitized.</p>
</blockquote>

<pre><code>$ids = join(""','"",$galleries);   
$sql = ""SELECT * FROM galleries WHERE id IN ('$ids')"";
</code></pre>
","907821"
"How to get(extract) a file extension in PHP?","430506","","<p>This is a question you can read everywhere on the web with various answers :</p>

<pre><code>$ext = end(explode('.', $filename));
$ext = substr(strrchr($filename, '.'), 1);
$ext = substr($filename, strrpos($filename, '.') + 1);
$ext = preg_replace('/^.*\.([^.]+)$/D', '$1', $filename);

$exts = split(""[/\\.]"", $filename);
$n    = count($exts)-1;
$ext  = $exts[$n];
</code></pre>

<p>etc.</p>

<p>However, there is always ""the best way"" and it should be on stackoverflow.</p>
","<p>People from other scripting languages always think theirs is better because they have a built in function to do that and not PHP (I am looking at pythonistas right now :-)).</p>

<p>In fact, it does exist, but few people know it. Meet <a href=""http://php.net/manual/en/function.pathinfo.php"" rel=""noreferrer""><code>pathinfo()</code></a>:</p>

<pre><code>$ext = pathinfo($filename, PATHINFO_EXTENSION);
</code></pre>

<p>This is fast and built-in. <code>pathinfo()</code> can give you other information, such as canonical path, depending on the constant you pass to it.</p>

<p>Remember that if you want to be able to deal with non ASCII characters, you need to set the locale first. E.G:</p>

<pre><code>setlocale(LC_ALL,'en_US.UTF-8');
</code></pre>

<p>Also note this doesn't take in consideration the file content or mimetype, you only get the extension. But it's what you asked for.</p>

<p>Lastly, note that this works only for a file path, not a URL ressources path, which are covered using PARSE_URL.</p>

<p>Enjoy</p>
","173876"
"Get absolute path of current script","429703","","<p>I have searched high and low and get a lot of different solutions and varialbles containing info to get the absolute path. But they seem to work under some conditions and not under others. Is there one silver bullet way to get the absolute path to the current executing script in php? For me the script will be running from the command line but it should just as well function if run within apache etc.</p>

<p><strong>Clarification: The initial executed script, not the file we are currently in</strong></p>
","<p><code>__FILE__</code> constant will give you absolute path to current file.</p>

<p><strong>UPD</strong>:</p>

<p>As soon as question was changed to retrieve the script that initiated runtime the only (??) <strong>reliable</strong> way to do that is to use the <a href=""http://php.net/manual/en/function.debug-backtrace.php"" rel=""noreferrer""><code>debug_backtrace</code></a> function.</p>

<pre><code>$stack = debug_backtrace();
$firstFrame = $stack[count($stack) - 1];
$initialFile = $firstFrame['file'];
</code></pre>
","4645110"
"PHP page redirect","429542","","<p>Can PHP make a redirect call after executing a function?  I am creating a function on the completion of which I want it to redirect to a file located in the same root folder.  Can it be done?</p>

<pre><code> if {
      //i am using echo here
 }

 else if ($_SESSION['qnum'] &gt; 10) { 
            session_destroy();
            echo ""Some error occured."";
            //redirect to user.php
        }
</code></pre>
","<p>Yes, you would use the <a href=""http://us3.php.net/manual/en/function.header.php"" rel=""noreferrer"">header</a> function. </p>

<pre><code>header(""Location: http://www.yourwebsite.com/user.php""); /* Redirect browser */
exit();
</code></pre>

<p>It is a good practice to call <code>exit()</code> right afterwords so that code below it does not get executed.</p>

<p>Also, from the documentation:</p>

<blockquote>
  <p>Remember that header() must be called before any actual output is sent, either by normal HTML tags, blank lines in a file, or from PHP. It is a very common error to read code with include(), or require(), functions, or another file access function, and have spaces or empty lines that are output before header() is called. The same problem exists when using a single PHP/HTML file.</p>
</blockquote>

<p>This means you should not echo anything right before the <code>header()</code> function, as doing so will more than likely throw an error. Also, you will need to verify that this code gets run before any other output as well.</p>
","2112394"
"Create a folder if it doesn't already exist","423946","","<p>I've run into a few cases with WordPress installs with Bluehost where I've encountered errors with my WordPress theme because the uploads folder <code>wp-content/uploads</code> was not present.</p>

<p>Apparently the Bluehost cPanel WP installer does not create this folder, though HostGator does.</p>

<p>So I need to add code to my theme that checks for the folder and creates it otherwise.</p>
","<p>Try this:</p>

<pre><code>if (!file_exists('path/to/directory')) {
    mkdir('path/to/directory', 0777, true);
}
</code></pre>

<p>Note that <code>0777</code> is already the default mode for directories and may still be modified by the current umask.</p>
","2303377"
"Get first key in a (possibly) associative array?","421995","","<p>What's the best way to determine the first key in a possibly associative array? My first thought it to just foreach the array and then immediately breaking it, like this:</p>

<pre><code>foreach ($an_array as $key =&gt; $val) break;
</code></pre>

<p>Thus having $key contain the first key, but this seems inefficient. Does anyone have a better solution?</p>
","<p>You can use <a href=""http://php.net/reset"" rel=""noreferrer""><code>reset</code></a> and <a href=""http://php.net/key"" rel=""noreferrer""><code>key</code></a>:</p>

<pre><code>reset($array);
$first_key = key($array);
</code></pre>

<p>It's essentially the same as your initial code, but with a little less overhead, and it's more obvious what is happening.</p>

<p>Just remember to call <code>reset</code>, or you may get any of the keys in the array. You can also use <a href=""http://php.net/end"" rel=""noreferrer""><code>end</code></a> instead of <code>reset</code> to get the last key.</p>

<p>If you wanted the key to get the first value, <code>reset</code> actually returns it:</p>

<pre><code>$first_value = reset($array);
</code></pre>

<p>There is one special case to watch out for though (so check the length of the array first):</p>

<pre><code>$arr1 = array(false);
$arr2 = array();
var_dump(reset($arr1) === reset($arr2)); // bool(true)
</code></pre>
","1028677"
"Facebook API - How do I get a Facebook user's profile image through the Facebook API (without requiring the user to ""Allow"" the application)","415850","","<p>I'm working on a <a href=""http://en.wikipedia.org/wiki/Content_management_system"" rel=""noreferrer"">CMS</a> that fetches a user's profile image from their Facebook <a href=""http://en.wikipedia.org/wiki/Uniform_Resource_Locator"" rel=""noreferrer"">URL</a> (that is, <a href=""http://facebook.com/users_unique_url"" rel=""noreferrer"">http://facebook.com/users_unique_url</a>). How can I accomplish this? Is there a Faceboook API call that fetches a user's profile image URL without the user needing to <em>Allow</em> the application?</p>
","<p>Simply fetch the data through this <a href=""http://en.wikipedia.org/wiki/Uniform_Resource_Locator"" rel=""noreferrer"">URL</a>:</p>

<p><a href=""http://graph.facebook.com/userid_here/picture"" rel=""noreferrer"">http://graph.facebook.com/userid_here/picture</a></p>

<p>Replace <code>userid_here</code> with id of the user you want to get the photo of. You can also use HTTPS as well.</p>

<p>You can use the PHP's <code>file_get_contents</code> function to read that URL and process the retrieved data.</p>

<p><strong>Resource:</strong></p>

<p><a href=""http://developers.facebook.com/docs/api"" rel=""noreferrer"">http://developers.facebook.com/docs/api</a></p>

<p><strong>Note:</strong> In <code>php.ini</code>, you need to make sure that the <a href=""http://en.wikipedia.org/wiki/OpenSSL"" rel=""noreferrer"">OpenSSL</a> extension is enabled to use the<code>file_get_contents</code> function of PHP to read that URL.</p>
","2821117"
"Deprecated: mysql_connect()","414828","","<p>I am getting this warning, but the program still runs correctly.</p>

<p>The MySQL code is showing me a message in PHP:</p>

<blockquote>
  <p>Deprecated: mysql_connect(): The mysql extension is deprecated and
  will be removed in the future: use mysqli or PDO instead in
  C:\xampp\htdocs\task\media\new\connect.inc.php on line 2</p>
</blockquote>

<p>My <code>connect.inc.php</code> page is</p>

<pre><code>&lt;?php
  $connect = mysql_connect('localhost','root','');
  mysql_select_db('dbname');
?&gt;
</code></pre>

<p>What does this mean and how can I eliminate the message?</p>
","<p>There are few solutions for your problem.</p>

<p>The way with MySQLi would be like this:</p>

<pre><code>&lt;?php
$connection = mysqli_connect('localhost', 'username', 'password', 'database');
</code></pre>

<p>To run database queries is also simple and nearly identical with the old way:</p>

<pre><code>&lt;?php
// Old way
mysql_query('CREATE TEMPORARY TABLE `table`', $connection);
// New way
mysqli_query($connection, 'CREATE TEMPORARY TABLE `table`');
</code></pre>

<p>Turn off all deprecated warnings including them from mysql_*:</p>

<pre><code>&lt;?php
error_reporting(E_ALL ^ E_DEPRECATED);
</code></pre>
","21797209"
"How to convert an array to object in PHP?","414577","","<p>How can i convert an array like this to object?</p>

<pre>
    [128] => Array
        (
            [status] => Figure A.
 Facebook's horizontal scrollbars showing up on a 1024x768 screen resolution.
        )

    [129] => Array
        (
            [status] => The other day at work, I had some spare time
        )

)
</pre>
","<p>This one worked for me</p>

<pre><code>  function array_to_obj($array, &amp;$obj)
  {
    foreach ($array as $key =&gt; $value)
    {
      if (is_array($value))
      {
      $obj-&gt;$key = new stdClass();
      array_to_obj($value, $obj-&gt;$key);
      }
      else
      {
        $obj-&gt;$key = $value;
      }
    }
  return $obj;
  }

function arrayToObject($array)
{
 $object= new stdClass();
 return array_to_obj($array,$object);
}
</code></pre>

<p><strong>usage :</strong></p>

<pre><code>$myobject = arrayToObject($array);
print_r($myobject);
</code></pre>

<p><strong>returns :</strong></p>

<pre><code>    [127] =&gt; stdClass Object
        (
            [status] =&gt; Have you ever created a really great looking website design
        )

    [128] =&gt; stdClass Object
        (
            [status] =&gt; Figure A.
 Facebook's horizontal scrollbars showing up on a 1024x768 screen resolution.
        )

    [129] =&gt; stdClass Object
        (
            [status] =&gt; The other day at work, I had some spare time
        )
</code></pre>

<p><strong>like usual you can loop it like:</strong></p>

<pre><code>foreach($myobject as $obj)
{
  echo $obj-&gt;status;
}
</code></pre>
","1869569"
"String comparison using == vs. strcmp","412727","","<p>It seems that PHP's <code>==</code> operator is case sensitive? So is there any reason to use <code>strcmp()</code>? Is it safe to do something like:</p>

<pre><code>if ( $password == $password2 ) { ... }
</code></pre>
","<p>The reason to use it is because <a href=""http://php.net/strcmp"" rel=""noreferrer""><code>strcmp</code></a></p>

<blockquote>
  <p>returns &lt; 0 if str1 is less than str2; > 0 if str1 is greater than str2, and 0 if they are equal.</p>
</blockquote>

<p><code>==</code> only returns <code>true</code> or <code>false</code>, it doesn't tell you which is the ""greater"" string.</p>
","3333369"
"json_decode to array","409437","","<p>I am trying to decode a JSON string into an array but i get the following error.</p>

<blockquote>
  <p>Fatal error: Cannot use object of type
  stdClass as array in
  C:\wamp\www\temp\asklaila.php on line
  6</p>
</blockquote>

<p>Here is the code:</p>

<pre><code>&lt;?php
$json_string = 'http://www.domain.com/jsondata.json';

$jsondata = file_get_contents($json_string);
$obj = json_decode($jsondata);
print_r($obj['Result']);
?&gt;
</code></pre>
","<p>As per <a href=""http://php.net/json_decode"" rel=""noreferrer"">the documentation</a>, you need to specify if you want an associative array instead of an object from <code>json_decode</code>, this would be the code:</p>

<pre><code>json_decode($jsondata, true);
</code></pre>
","5164417"
"Call to undefined function curl_init().?","408040","","<p>When i am going to implement Authorize.net payment gateway. However, I got this error: </p>

<blockquote>
  <p>Call to undefined function curl_init()</p>
</blockquote>

<p>Please let me know what is wrong in it.</p>
","<p>If you're on Windows:</p>

<p>Go to your php.ini file and remove the <code>;</code> mark from the beginning of the following line:</p>

<pre><code>;extension=php_curl.dll
</code></pre>

<p>After you have saved the file you <em>must</em> restart your HTTP server software (e.g. Apache) before this can take effect.</p>

<hr>

<p>For Ubuntu 13.0 and above, simply use the debundled package. In a terminal type the following to install it and do not forgot to restart server.</p>

<pre><code>sudo apt-get install php-curl
</code></pre>

<p>Or if you're using the old PHP5</p>

<pre><code>sudo apt-get install php5-curl
</code></pre>
","6382581"
"Download File to server from URL","407938","","<p>Well, this one seems quite simple, and it is. All you have to do to download a file to your server is:</p>

<pre><code>file_put_contents(""Tmpfile.zip"", file_get_contents(""http://someurl/file.zip""));
</code></pre>

<p>Only there is one problem. What if you have a large file, like 100mb. Then, you will run out of memory, and not be able to download the file.</p>

<p>What I want is a way to write the file to the disk as I am downloading it. That way, I can download bigger files, without running into memory problems.</p>
","<p>Since PHP 5.1.0, <a href=""http://php.net/file_put_contents"" rel=""noreferrer""><code>file_put_contents()</code></a> supports writing piece-by-piece by passing a stream-handle as the <code>$data</code> parameter:</p>

<pre><code>file_put_contents(""Tmpfile.zip"", fopen(""http://someurl/file.zip"", 'r'));
</code></pre>

<p>From the manual:</p>

<blockquote>
  <p>If <strong><em>data</em></strong> [that is the second argument] is a stream resource, the remaining buffer of that stream will be copied to the specified file. This is similar with using
  <a href=""http://php.net/stream_copy_to_stream"" rel=""noreferrer""><code>stream_copy_to_stream()</code></a>.</p>
</blockquote>

<p>(Thanks <a href=""https://stackoverflow.com/users/367456/hakre"">Hakre</a>.)</p>
","3938551"
"How to find the foreach index","407444","","<p>Is it possible to find the <code>foreach</code> index?</p>

<p>in a <code>for</code> loop as follows:</p>

<pre><code>for ($i = 0; $i &lt; 10; ++$i) {
   echo $i . ' ';
}
</code></pre>

<p><code>$i</code> will give you the index.</p>

<p>Do I have to use the <code>for</code> loop or is there some way to get the index in the <code>foreach</code> loop?</p>
","<pre><code>foreach($array as $key=&gt;$value) {
    // do stuff
}
</code></pre>

<p><code>$key</code> is the index of each <code>$array</code> element</p>
","141114"
"What's the best method for sanitizing user input with PHP?","407361","","<p>Is there a catchall function somewhere that works well for sanitizing user input for SQL injection and XSS attacks, while still allowing certain types of html tags?</p>
","<p>It's a common misconception that user input can be filtered. PHP even has a (now deprecated) ""feature"", called magic-quotes, that builds on this idea. It's nonsense. Forget about filtering (Or cleaning, or whatever people call it).</p>

<p>What you should do, to avoid problems is quite simple: Whenever you embed a string within foreign code, you must escape it, according to the rules of that language. For example, if you embed a string in some SQL targeting MySql, you must escape the string with MySql's function for this purpose (<code>mysqli_real_escape_string</code>). (Or, in case of databases, using prepared statements are an better approach, when possible)</p>

<p>Another example is HTML: If you embed strings within HTML markup, you must escape it with <a href=""http://php.net/manual/function.htmlspecialchars.php"" rel=""nofollow noreferrer""><code>htmlspecialchars</code></a>. This means that every single <code>echo</code> or <code>print</code> statement should use <code>htmlspecialchars</code>.</p>

<p>A third example could be shell commands: If you are going to embed strings (Such as arguments) to external commands, and call them with <a href=""http://php.net/manual/function.exec.php"" rel=""nofollow noreferrer""><code>exec</code></a>, then you must use <a href=""http://php.net/manual/function.escapeshellcmd.php"" rel=""nofollow noreferrer""><code>escapeshellcmd</code></a> and <a href=""http://php.net/manual/function.escapeshellarg.php"" rel=""nofollow noreferrer""><code>escapeshellarg</code></a>.</p>

<p>And so on and so forth ...</p>

<p>The <em>only</em> case where you need to actively filter data, is if you're accepting preformatted input. Eg. if you let your users post HTML markup, that you plan to display on the site. However, you should be wise to avoid this at all cost, since no matter how well you filter it, it will always be a potential security hole.</p>
","130323"
"How to log in to phpMyAdmin with WAMP, what is the username and password?","407119","","<p>What does the word ""root"" mean in <a href=""http://en.wikipedia.org/wiki/PhpMyAdmin"">phpMyAdmin</a>?</p>

<p>Whenever I write <code>localhost/phpmyadmin</code> on the address bar, I am asked to enter a username and a password, but I don't know what they are. I don't remember when and where I set them. From where can I get my username and password to login to phpMyAdmin?</p>
","<p>Try username = root and password is blank.</p>
","18012098"
"How to get the jQuery $.ajax error response text?","405864","","<p>I am sending an error response to my jQuery.
However, I can not get the response text (in the example below this would be <strong>Gone to the beach</strong>)</p>

<p>The only thing jQuery says is 'error'.</p>

<p>See this example for details:</p>

<p>php</p>

<pre><code>&lt;?
    header('HTTP/1.1 500 Internal Server Error');
    print ""Gone to the beach""
?&gt;
</code></pre>

<p>jQuery</p>

<pre><code>$.ajax({
    type:     ""post"",
    data:     {id: 0},
    cache:    false,
    url:      ""doIt.php"",
    dataType: ""text"",
    error: function (request, error) {
        console.log(arguments);
        alert("" Can't do because: "" + error);
    },
    success: function () {
        alert("" Done ! "");
    }
});
</code></pre>

<p>Now my result ist:</p>

<p>log:</p>

<pre><code> [XMLHttpRequest readyState=4 status=500, ""error"", undefined]
</code></pre>

<p>alert:</p>

<blockquote>
  <p>Can't do because: error</p>
</blockquote>

<p>Any ideas?</p>
","<p>Try:</p>

<pre><code>error: function(xhr, status, error) {
  var err = eval(""("" + xhr.responseText + "")"");
  alert(err.Message);
}
</code></pre>
","1637051"
"How to pop an alert message box using PHP?","405478","","<p>How to pop an alert message box using PHP?</p>
","<p>You could use Javascript:</p>

<pre><code>// This is in the PHP file and sends a Javascript alert to the client
$message = ""wrong answer"";
echo ""&lt;script type='text/javascript'&gt;alert('$message');&lt;/script&gt;"";
</code></pre>
","13851576"
"""Connect failed: Access denied for user 'root'@'localhost' (using password: YES)"" from php function","404766","","<p>I wrote some function used by a php webpage, in order to interact with a mysql database. When I test them on my server I get this error:</p>

<pre><code>""Connect failed: Access denied for user 'root'@'localhost' (using password: YES)"" 
</code></pre>

<p>I am able to use them on my pc (using XAMPP) and I can navigate through the tables of the database using the command line in the server. Instead, the webpage fails to connect. I've checked the password but with no results, it's correct (otherwise I could not log in to mysql from the command line). </p>

<p>The call of the function is the following:</p>

<pre><code>$conn = new mysqli(""localhost"", ""root"", ""password"", ""shop"");
</code></pre>

<p>Have I to set something in my server? Thanks</p>

<p>Edit:
PHP version 5.3.3-7+squeeze1
mysql version:  5.1.49-3
both on debian</p>
","<p>I solved in this way:
I logged in with root username</p>

<pre><code>mysql -u root -p -h localhost
</code></pre>

<p>I created a new user with</p>

<pre><code>CREATE USER 'francesco'@'localhost' IDENTIFIED BY 'some_pass';
</code></pre>

<p>then I created the database</p>

<pre><code>CREATE DATABASE shop;
</code></pre>

<p>I granted privileges for new user for this database</p>

<pre><code>GRANT ALL PRIVILEGES ON shop.* TO 'francesco'@'localhost';
</code></pre>

<p>Then I logged out root and logged in new user</p>

<pre><code>quit;
mysql -u francesco -p -h localhost
</code></pre>

<p>I rebuilt my database using a script</p>

<pre><code>source shop.sql;
</code></pre>

<p>And that's it.. Now from php works without problems with the call</p>

<pre><code> $conn = new mysqli(""localhost"", ""francesco"", ""some_pass"", ""shop"");
</code></pre>

<p>Thanks to all for your time :)</p>
","6454005"
"How to show an alert box in PHP?","404618","","<p>I want to display an alert box showing a message with PHP.</p>

<p>Here is my PHP code:</p>

<pre><code>&lt;?php  
  header(""Location:form.php"");

  echo '&lt;script language=""javascript""&gt;';
  echo 'alery(message successfully sent)';  //not showing an alert box.
  echo '&lt;/script&gt;';
  exit;
?&gt;
</code></pre>

<p>But it is not working.  How do I show an alert Box in PHP?</p>
","<p>use this code</p>

<pre><code>echo '&lt;script language=""javascript""&gt;';
echo 'alert(""message successfully sent"")';
echo '&lt;/script&gt;';
</code></pre>

<p>The problem was:</p>

<ol>
<li>you missed <code>""</code> </li>
<li>It should be <code>alert</code> not <code>alery</code></li>
</ol>
","13837459"
"How to enable PHP short tags?","403728","","<p>I have a web application on a Linux server which starts with <code>&lt;?</code></p>

<p>I needed to copy this application to a windows environment and everything is working fine except that an SQL statement is being rendered differently. I don't know if this has to do with the script beginning with <code>&lt;?php</code> instead of <code>&lt;?</code> because I don't know from where to enable the <code>&lt;?</code> from the <code>PHP.ini</code> so I changed it to <code>&lt;?php</code></p>

<p>I know that these 2 statements are supposed to mean the same but I need to test it with <code>&lt;?</code> in order to ensure that the application is exactly the same. This way I can eliminate another possibility.</p>

<p>Thanks</p>
","<p>Set</p>

<pre><code>short_open_tag=On
</code></pre>

<p>in <a href=""http://php.net/manual/en/ini.core.php"" rel=""noreferrer"">php.ini</a></p>

<p>And restart your Apache server.</p>
","2185331"
"Difference between require, include and require_once?","402390","","<p>In PHP:</p>

<ul>
<li>When should I use <code>require</code> vs. <code>include</code>?</li>
<li>When should I use <code>require_once</code> vs. <code>require</code>?</li>
</ul>
","<p>There are <code>require</code> and <code>include_once</code> as well.</p>

<p>So your question should be... </p>

<ol>
<li>When should I use <code>require</code> vs. <code>include</code>?</li>
<li>When should I use <code>require_once</code> vs. <code>require</code></li>
</ol>

<p>The answer to 1 is described <a href=""http://www.w3schools.com/php/php_includes.asp"" rel=""noreferrer"">here</a>.</p>

<blockquote>
  <p>The require() function is identical to include(), except that it handles errors differently. If an error occurs, the include() function generates a warning, but the script will continue execution. The require() generates a fatal error, and the script will stop.</p>
</blockquote>

<p>The answer to 2 can be found <a href=""http://php.net/manual/en/function.require-once.php"" rel=""noreferrer"">here</a>.</p>

<blockquote>
  <p>The require_once() statement is identical to require() except PHP will check if the file has already been included, and if so, not include (require) it again.</p>
</blockquote>
","2418514"
"How do I convert an object to an array?","401531","","<pre><code>&lt;?php
   print_r($response-&gt;response-&gt;docs);
?&gt;
</code></pre>

<p>Outputs the following:</p>

<pre><code>    Array 
(
    [0] =&gt; Object 
            (
                [_fields:private] =&gt; Array 
                                    (
                                        [id]=&gt;9093 
                                        [name]=&gt;zahir
                                    ) 
            Object 
            ( 
                [_fields:private] =&gt; Array 
                                    (
                                        [id]=&gt;9094 
                                        [name]=&gt;hussain
                                    )..
            )
)
</code></pre>

<p>How can I convert this object to an array?  I'd like to output the following:</p>

<pre><code>Array
(
    [0]=&gt;
    (
        [id]=&gt;9093 
        [name]=&gt;zahir
    ) 
    [1]=&gt;
    (
        [id]=&gt;9094 
        [name]=&gt;hussain
    )...
)
</code></pre>

<p>Is this possible?</p>
","<p>You should look at <a href=""http://php.net/manual/function.get-object-vars.php"" rel=""noreferrer"">get_object_vars</a> , as your properties are declared private you should call this inside the class and return its results. </p>

<p>Be careful, for primitive data types like strings it will  work great, but I don't know how it behaves with nested objects.</p>

<p>in your case you have to do something like;</p>

<pre><code>&lt;?php
   print_r(get_object_vars($response-&gt;response-&gt;docs));
?&gt;
</code></pre>
","2477159"
"What does the PHP error message ""Notice: Use of undefined constant"" mean?","399559","","<p>PHP is writing this error in the logs: ""Notice: Use of undefined constant"".</p>

<p><strong>Error in logs:</strong></p>

<pre><code>PHP Notice:  Use of undefined constant department - assumed 'department' (line 5)
PHP Notice:  Use of undefined constant name - assumed 'name' (line 6)
PHP Notice:  Use of undefined constant email - assumed 'email' (line 7)
PHP Notice:  Use of undefined constant message - assumed 'message' (line 8)
</code></pre>

<p><strong>Relevant lines of code:</strong></p>

<pre><code>$department = mysql_real_escape_string($_POST[department]);
$name = mysql_real_escape_string($_POST[name]);
$email = mysql_real_escape_string($_POST[email]);
$message = mysql_real_escape_string($_POST[message]);
</code></pre>

<p>What does it mean and why am I seeing it?</p>
","<p>You should quote your array keys:</p>

<pre><code>$department = mysql_real_escape_string($_POST['department']);
$name = mysql_real_escape_string($_POST['name']);
$email = mysql_real_escape_string($_POST['email']);
$message = mysql_real_escape_string($_POST['message']);
</code></pre>

<p>As is, it was looking for constants called <code>department</code>, <code>name</code>, <code>email</code>, <code>message</code>, etc. When it doesn't find such a constant, PHP (bizarrely) interprets it as a string ('department', etc).  Obviously, this can easily break if you do defined  such a constant later (though it's bad style to have lower-case constants).</p>
","2941174"
"Call a REST API in PHP","397696","","<p>Our client had given me a REST API to which I need to make a PHP call to. But as a matter of fact the documentation given with the API is very limited, so I don't really know how to call the service.</p>

<p>I've tried to Google it, but the only thing that came up was an already expired Yahoo! tutorial on how to call the service. Not mentioning the headers or anything in depth information. </p>

<p>Is there any decent information around how to call a REST API, or some documentation about it? Because even on W3schools, they only describes the SOAP method. What are different options for making rest API in PHP?</p>
","<p>You can access any REST API with PHPs <code>cURL</code> Extension. However, the API Documentation (Methods, Parameters etc.) must be provided by your Client!</p>

<p>Example:</p>

<pre><code>// Method: POST, PUT, GET etc
// Data: array(""param"" =&gt; ""value"") ==&gt; index.php?param=value

function CallAPI($method, $url, $data = false)
{
    $curl = curl_init();

    switch ($method)
    {
        case ""POST"":
            curl_setopt($curl, CURLOPT_POST, 1);

            if ($data)
                curl_setopt($curl, CURLOPT_POSTFIELDS, $data);
            break;
        case ""PUT"":
            curl_setopt($curl, CURLOPT_PUT, 1);
            break;
        default:
            if ($data)
                $url = sprintf(""%s?%s"", $url, http_build_query($data));
    }

    // Optional Authentication:
    curl_setopt($curl, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
    curl_setopt($curl, CURLOPT_USERPWD, ""username:password"");

    curl_setopt($curl, CURLOPT_URL, $url);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);

    $result = curl_exec($curl);

    curl_close($curl);

    return $result;
}
</code></pre>
","9802854"
"Remove a cookie","396031","","<p>When I want to remove a Cookie I try</p>

<pre><code>unset($_COOKIE['hello']);
</code></pre>

<p>I see in my cookie browser from firefox that the cookie still exists. How can I really remove the cookie?</p>
","<p>You May Try this</p>

<pre><code>if (isset($_COOKIE['remember_user'])) {
    unset($_COOKIE['Hello']);
    unset($_COOKIE['HelloTest1']);
    setcookie('Hello', null, -1, '/');
    setcookie('HelloTest1', null, -1, '/');
    return true;
} else {
    return false;
}
</code></pre>
","19972329"
"JSON encode MySQL results","395778","","<p>How do I use the <code>json_encode()</code> function with MySQL query results? Do I need to iterate through the rows or can I just apply it to the entire results object?</p>
","<pre><code>$sth = mysqli_query(""SELECT ..."");
$rows = array();
while($r = mysqli_fetch_assoc($sth)) {
    $rows[] = $r;
}
print json_encode($rows);
</code></pre>

<p>The function <code>json_encode</code> needs PHP >= 5.2 and the <strong>php-json</strong> package - as mentioned <a href=""https://stackoverflow.com/questions/7318191/enable-json-encode-in-php"">here</a></p>

<p><em>NOTE</em>: <code>mysql</code> is deprecated as of PHP 5.5.0, use <code>mysqli</code> extension instead <a href=""http://php.net/manual/en/migration55.deprecated.php"" rel=""noreferrer"">http://php.net/manual/en/migration55.deprecated.php</a>.</p>
","383664"
"Using AND/OR in if else PHP statement","394727","","<p>How do you use 'AND/OR' in an if else PHP statement? Would it be:</p>

<p>1) AND</p>

<pre><code>if ($status = 'clear' AND $pRent == 0) {
    mysql_query(""UPDATE rent 
                    SET dNo = '$id', 
                        status = 'clear', 
                        colour = '#3C0' 
                  WHERE rent.id = $id"");
} 
</code></pre>

<p>2) OR</p>

<pre><code>if ($status = 'clear' OR $pRent == 0) {
    mysql_query(""UPDATE rent 
                    SET dNo = '$id', 
                        status = 'clear', 
                        colour = '#3C0' 
                  WHERE rent.id = $id"");
} 
</code></pre>
","<p>Yes. The answer is yes.<br>
<a href=""http://www.php.net/manual/en/language.operators.logical.php"">http://www.php.net/manual/en/language.operators.logical.php</a></p>

<hr>

<p>Two things though:</p>

<ul>
<li>Many programmers prefer <code>&amp;&amp;</code> and <code>||</code> instead of <code>and</code> and <code>or</code>, but they work the same (safe for precedence).</li>
<li><code>$status = 'clear'</code> should probably be <code>$status == 'clear'</code>. <code>=</code> is assignment, <code>==</code> is comparison.</li>
</ul>
","4405820"
"GET URL parameter in PHP","394312","","<p>I'm trying to pass a URL as a url parameter in php but when I try to get this parameter I get nothing </p>

<p>I'm using the following url form:</p>

<pre><code>http://localhost/dispatch.php?link=www.google.com
</code></pre>

<p>I'm trying to get it through:</p>

<pre><code>$_GET['link'];
</code></pre>

<p>But nothing returned. What is the problem?</p>
","<p><code>$_GET</code> is not a function or language construct—it's just a variable (an array). Try:</p>

<pre><code>&lt;?php
echo $_GET['link'];
</code></pre>

<p>In particular, it's a <a href=""http://es1.php.net/manual/en/language.variables.superglobals.php"" rel=""noreferrer"">superglobal</a>: a built-in variable that's populated by PHP and is available in all scopes (you can use it from inside a function without the <a href=""http://es1.php.net/manual/en/language.variables.scope.php"" rel=""noreferrer"">global</a> keyword).</p>

<p>Since the variable might not exist, you could (and should) ensure your code does not trigger notices with:</p>

<pre><code>&lt;?php
if (isset($_GET['link'])) {
    echo $_GET['link'];
} else {
    // Fallback behaviour goes here
}
</code></pre>

<p>Alternatively, if you want to skip manual index checks and maybe add further validations you can use the <a href=""http://php.net/filter"" rel=""noreferrer"">filter</a> extension:</p>

<pre><code>&lt;?php
echo filter_input(INPUT_GET, 'link', FILTER_SANITIZE_URL);
</code></pre>
","5884896"
"PHP: How to generate a random, unique, alphanumeric string?","388947","","<p>How would it be possible to generate a random, unique string using numbers and letters for use in a verify link? Like when you create an account on a website, and it sends you an email with a link, and you have to click that link in order to verify your account...yeah...one of those.</p>

<p>How can I generate one of those using PHP?</p>

<p><strong>Update:</strong> Just remembered about <a href=""http://php.net/uniqid"" rel=""noreferrer""><code>uniqid()</code></a>. It's a PHP function that generates a unique identifier based on the current time in microseconds. I think I'll use that.</p>
","<blockquote>
  <p><strong>Security Notice</strong>: This solution should not be used in situations where the quality of your randomness can affect the security of an application. In particular, <a href=""https://stackoverflow.com/a/31419246/2224584""><code>rand()</code> and <code>uniqid()</code> are not cryptographically secure random number generators</a>. See <a href=""https://stackoverflow.com/a/13733588/2224584"">Scott's answer</a> for a secure alternative.</p>
</blockquote>

<p>If you do not need it to be absolutely unique over time:</p>

<p><code>md5(uniqid(rand(), true))</code></p>

<p>Otherwise (given you have already determined a unique login for your user):</p>

<pre><code>md5(uniqid($your_user_login, true))
</code></pre>
","1846229"
"Send email with PHP from html form on submit with the same script","388110","","<p>I want to send an email with PHP when a user has finished filling in an HTML form and then emailing information from the form. I want to do it from the same script that displays the web page that has the form.</p>

<p>I found this code, but the mail does not send.</p>

<pre><code>&lt;?php 

if (isset($_POST['submit'])) {
    $to = $_POST['email']; 
    $subject = $_POST['name'];
    $message = getRequestURI();
    $from = ""zenphoto@example.com"";
    $headers = ""From:"" . $from;

    if (mail($to, $subject, $message, $headers)) {
        echo ""Mail Sent."";
    }
    else {
        echo ""failed"";
    }
}

?&gt;
</code></pre>

<p>What is the code to send an email in PHP?</p>
","<h2>EDIT (#1)</h2>

<p>If I understand correctly, you wish to have everything in one page and execute it from the same page.</p>

<p>You can use the following code to send mail from a single page, for example <code>index.php</code> or <code>contact.php</code> </p>

<p>The only difference between this one and my original answer is the <code>&lt;form action="""" method=""post""&gt;</code> where the action has been left blank.</p>

<p>It is better to use <code>header('Location: thank_you.php');</code> instead of <code>echo</code> in the PHP handler to redirect the user to another page afterwards.</p>

<h3>Copy the entire code below into one file.</h3>

<pre><code>&lt;?php 
if(isset($_POST['submit'])){
    $to = ""email@example.com""; // this is your Email address
    $from = $_POST['email']; // this is the sender's Email address
    $first_name = $_POST['first_name'];
    $last_name = $_POST['last_name'];
    $subject = ""Form submission"";
    $subject2 = ""Copy of your form submission"";
    $message = $first_name . "" "" . $last_name . "" wrote the following:"" . ""\n\n"" . $_POST['message'];
    $message2 = ""Here is a copy of your message "" . $first_name . ""\n\n"" . $_POST['message'];

    $headers = ""From:"" . $from;
    $headers2 = ""From:"" . $to;
    mail($to,$subject,$message,$headers);
    mail($from,$subject2,$message2,$headers2); // sends a copy of the message to the sender
    echo ""Mail Sent. Thank you "" . $first_name . "", we will contact you shortly."";
    // You can also use header('Location: thank_you.php'); to redirect to another page.
    }
?&gt;

&lt;!DOCTYPE html&gt;
&lt;head&gt;
&lt;title&gt;Form submission&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;form action="""" method=""post""&gt;
First Name: &lt;input type=""text"" name=""first_name""&gt;&lt;br&gt;
Last Name: &lt;input type=""text"" name=""last_name""&gt;&lt;br&gt;
Email: &lt;input type=""text"" name=""email""&gt;&lt;br&gt;
Message:&lt;br&gt;&lt;textarea rows=""5"" name=""message"" cols=""30""&gt;&lt;/textarea&gt;&lt;br&gt;
&lt;input type=""submit"" name=""submit"" value=""Submit""&gt;
&lt;/form&gt;

&lt;/body&gt;
&lt;/html&gt; 
</code></pre>

<hr>

<h2>Original answer</h2>

<hr>

<p>I wasn't quite sure as to what the question was, but am under the impression that a copy of the message is to be sent to the person who filled in the form.</p>

<p>Here is a tested/working copy of an HTML form and PHP handler. This uses the PHP <code>mail()</code> function.</p>

<p>The PHP handler will also send a copy of the message to the person who filled in the form.</p>

<p>You can use two forward slashes <code>//</code> in front of a line of code if you're not going to use it.</p>

<p><strong>For example:</strong> <code>// $subject2 = ""Copy of your form submission"";</code> will not execute.</p>

<h3>HTML FORM:</h3>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;head&gt;
&lt;title&gt;Form submission&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;form action=""mail_handler.php"" method=""post""&gt;
First Name: &lt;input type=""text"" name=""first_name""&gt;&lt;br&gt;
Last Name: &lt;input type=""text"" name=""last_name""&gt;&lt;br&gt;
Email: &lt;input type=""text"" name=""email""&gt;&lt;br&gt;
Message:&lt;br&gt;&lt;textarea rows=""5"" name=""message"" cols=""30""&gt;&lt;/textarea&gt;&lt;br&gt;
&lt;input type=""submit"" name=""submit"" value=""Submit""&gt;
&lt;/form&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<hr>

<h3>PHP handler (mail_handler.php)</h3>

<p>(Uses info from HTML form and sends the Email)</p>

<pre><code>&lt;?php 
if(isset($_POST['submit'])){
    $to = ""email@example.com""; // this is your Email address
    $from = $_POST['email']; // this is the sender's Email address
    $first_name = $_POST['first_name'];
    $last_name = $_POST['last_name'];
    $subject = ""Form submission"";
    $subject2 = ""Copy of your form submission"";
    $message = $first_name . "" "" . $last_name . "" wrote the following:"" . ""\n\n"" . $_POST['message'];
    $message2 = ""Here is a copy of your message "" . $first_name . ""\n\n"" . $_POST['message'];

    $headers = ""From:"" . $from;
    $headers2 = ""From:"" . $to;
    mail($to,$subject,$message,$headers);
    mail($from,$subject2,$message2,$headers2); // sends a copy of the message to the sender
    echo ""Mail Sent. Thank you "" . $first_name . "", we will contact you shortly."";
    // You can also use header('Location: thank_you.php'); to redirect to another page.
    // You cannot use header and echo together. It's one or the other.
    }
?&gt;
</code></pre>

<hr>

<p><strong>To send as HTML:</strong></p>

<p>If you wish to send mail as HTML and for both instances, then you will need to create two separate sets of HTML headers with different variable names.</p>

<p>Read the manual on <code>mail()</code> to learn how to send emails as HTML:</p>

<ul>
<li><a href=""http://php.net/manual/en/function.mail.php"" rel=""noreferrer"">http://php.net/manual/en/function.mail.php</a></li>
</ul>

<hr>

<p><strong>Footnotes:</strong></p>

<ul>
<li>In regards to HTML5</li>
</ul>

<p>You have to specify the URL of the service that will handle the submitted data, using the action attribute.</p>

<p>As outlined at <a href=""https://www.w3.org/TR/html5/forms.html"" rel=""noreferrer"">https://www.w3.org/TR/html5/forms.html</a> under <em>4.10.1.3 Configuring a form to communicate with a server</em>. For complete information, consult the page.</p>

<p>Therefore, <code>action=""""</code> will not work in HTML5.</p>

<p>The proper syntax would be:</p>

<ul>
<li><code>action=""handler.xxx""</code> or </li>
<li><code>action=""http://www.example.com/handler.xxx""</code>.</li>
</ul>

<p>Note that <code>xxx</code> will be the extension of the type of file used to handle the process. This could be a <code>.php</code>, <code>.cgi</code>, <code>.pl</code>, <code>.jsp</code> file extension etc.</p>

<hr>

<p>Consult the following Q&amp;A on Stack if sending mail fails: </p>

<ul>
<li><a href=""https://stackoverflow.com/questions/24644436/php-mail-form-doesnt-complete-sending-e-mail"">PHP mail form doesn&#39;t complete sending e-mail</a></li>
</ul>
","18382062"
"How to get base URL with PHP?","387190","","<p>I am using <a href=""http://en.wikipedia.org/wiki/XAMPP"" rel=""noreferrer"">XAMPP</a> on Windows&nbsp;Vista. In my development, I have <code>http://127.0.0.1/test_website/</code>.</p>

<p>How do I get <code>http://127.0.0.1/test_website/</code> with PHP?</p>

<p>I tried something like these, but none of them worked.</p>

<pre><code>echo dirname(__FILE__)
or
echo basename(__FILE__);
etc.
</code></pre>
","<p>Try this:</p>

<pre><code>&lt;?php echo ""http://"" . $_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI']; ?&gt;
</code></pre>

<p>Learn more about the <a href=""http://www.php.net/manual/en/reserved.variables.server.php"" rel=""noreferrer""><code>$_SERVER</code> Predefined Variable</a></p>

<p>If you plan on using https, you can use this:</p>

<pre><code>function url(){
  return sprintf(
    ""%s://%s%s"",
    isset($_SERVER['HTTPS']) &amp;&amp; $_SERVER['HTTPS'] != 'off' ? 'https' : 'http',
    $_SERVER['SERVER_NAME'],
    $_SERVER['REQUEST_URI']
  );
}

echo url();
#=&gt; http://127.0.0.1/foo
</code></pre>

<p>Per <a href=""https://stackoverflow.com/questions/2297403/http-host-vs-server-name"">this answer</a>, please make sure to configure your Apache properly so you can safely depend on <code>SERVER_NAME</code>.</p>

<pre><code>&lt;VirtualHost *&gt;
    ServerName example.com
    UseCanonicalName on
&lt;/VirtualHost&gt; 
</code></pre>

<p><strong>NOTE</strong>: If you're depending on <code>HTTP_HOST</code> key (which contains user input), you still have to make some cleanup, remove spaces, commas, carriage return , anything that is not a valid character for a domain. Check php builtin <a href=""http://www.php.net/manual/en/function.parse-url.php"" rel=""noreferrer"">parse_url</a> functions for example.</p>
","2820771"
"Allowed memory size of 33554432 bytes exhausted (tried to allocate 43148176 bytes) in php","385355","","<p>This error message is being presented, any suggestions?</p>

<blockquote>
  <p>Allowed memory size of 33554432 bytes exhausted (tried to allocate
  43148176 bytes) in php</p>
</blockquote>
","<p>At last I found the answer:</p>

<p>Just add this below line to before line of you getting error in your file</p>

<p><code>ini_set('memory_limit', '-1');</code></p>

<p>It will take unlimited memory usage of server, it's working fine.</p>

<p>Thanks for giving suggestion friends.</p>
","430516"
"PHP Fatal error: Cannot redeclare class","383410","","<p>Does anyone know what can cause this problem?</p>

<pre><code>PHP Fatal error: Cannot redeclare class
</code></pre>
","<p>It means you've already created a class.</p>

<p>For instance:</p>

<pre><code>class Foo {}

// some code here

class Foo {}
</code></pre>

<p>That second Foo would throw the error.</p>
","708146"
"How to get time difference in minutes in PHP","382033","","<p>How to calculate minute difference between two date-times in PHP?</p>
","<p>Subtract the past most one from the future most one and divide by 60. </p>

<p>Times are done in Unix format so they're just a big number showing the number of seconds from <code>January 1, 1970, 00:00:00 GMT</code></p>
","365214"
"Get $_POST from multiple checkboxes","381229","","<p>I have 1 form in with multiple checkboxes in it (each with the code):</p>

<pre><code>&lt;input type=""checkbox"" name=""check_list"" value=""&lt;? echo $row['Report ID'] ?&gt;""&gt;
</code></pre>

<p>Where <code>$row['Report ID']</code> is a primary key in a database -so each value is different.</p>

<p>How would I be able to tell which checkboxes have been checked? (Maybe multiple)</p>

<p>(In context:) Its for an inbox system and I have a button below that I want (when clicked) to delete all messages (id's of: <code>$row['Report ID']</code>) which have the checkbox's checked...</p>

<p>How would I do this?</p>

<p>Thanks alot...</p>
","<p>Set the name in the form to <code>check_list[]</code> and you will be able to access all the checkboxes as an array(<code>$_POST['check_list'][]</code>).</p>

<p>Here's a little sample as requested:</p>

<pre><code>&lt;form action=""test.php"" method=""post""&gt;
&lt;input type=""checkbox"" name=""check_list[]"" value=""value 1""&gt;
&lt;input type=""checkbox"" name=""check_list[]"" value=""value 2""&gt;
&lt;input type=""checkbox"" name=""check_list[]"" value=""value 3""&gt;
&lt;input type=""checkbox"" name=""check_list[]"" value=""value 4""&gt;
&lt;input type=""checkbox"" name=""check_list[]"" value=""value 5""&gt;
&lt;input type=""submit"" /&gt;
&lt;/form&gt;
&lt;?php
if(!empty($_POST['check_list'])) {
    foreach($_POST['check_list'] as $check) {
            echo $check; //echoes the value set in the HTML form for each checked checkbox.
                         //so, if I were to check 1, 3, and 5 it would echo value 1, value 3, value 5.
                         //in your case, it would echo whatever $row['Report ID'] is equivalent to.
    }
}
?&gt;
</code></pre>
","4997271"
"Convert DateTime to String PHP","380751","","<p>ok, I already researched a lot of site on how can i convert PHP DateTime object to String.
I always see ""String to DateTime"" and not ""DateTime to String""</p>

<p>PHP DateTime can be echoed, but what i want to process my DateTime with PHP string functions.</p>

<p>Now my question is how can I make PHP dateTime Object to a string
starting from this kind of codes</p>

<pre><code>&lt;?php
$dts = new DateTime(); //this returns the current date time
echo strlen($dts);
?&gt;
</code></pre>
","<p>You can use the <a href=""http://www.php.net/manual/en/datetime.format.php""><code>format</code></a> method of the <code>DateTime</code> class:</p>

<pre><code>$date = new DateTime('2000-01-01');
$result = $date-&gt;format('Y-m-d H:i:s');
</code></pre>

<p>If <code>format</code> fails for some reason, it will return <code>FALSE</code>. In some applications, it might make sense to handle the failing case:</p>

<pre><code>if ($result) {
  echo $result;
} else { // format failed
  echo ""Unknown Time"";
}
</code></pre>
","10569065"
"Best way to initialize (empty) array in PHP","380277","","<p>In certain other languages (AS3 for example), it has been noted that initializing a new array is faster if done like this <code>var foo = []</code> rather than <code>var foo = new Array()</code> for reasons of object creation and instantiation. I wonder whether there are any equivalences in PHP?</p>

<pre><code>class Foo {
    private $arr = array(); // is there another / better way?
}
</code></pre>
","<p>In ECMAScript implementations (for instance, ActionScript or JavaScript), <code>Array()</code> is a constructor function and <code>[]</code> is part of the array literal grammar. Both are optimized and executed in completely different ways, with the literal grammar not being dogged by the overhead of calling a function.</p>

<p>PHP, on the other hand, has language constructs that may look like functions but aren't treated as such. Even with PHP 5.4, which supports <code>[]</code> as an alternative, there is no difference in overhead because, as far as the compiler/parser is concerned, they are completely synonymous.</p>

<pre><code>// Before 5.4, you could only write
$array = array(
    ""foo"" =&gt; ""bar"",
    ""bar"" =&gt; ""foo"",
);

// As of PHP 5.4, the following is synonymous with the above
$array = [
    ""foo"" =&gt; ""bar"",
    ""bar"" =&gt; ""foo"",
];
</code></pre>

<p>If you need to support older versions of PHP, use the former syntax. There's also an argument for readability but, being a long-time JS developer, the latter seems rather natural to me.  I actually made the mistake of trying to initialise arrays using <code>[]</code> when I was first learning PHP.</p>

<p>This <a href=""https://wiki.php.net/rfc/shortsyntaxforarrays"" rel=""noreferrer"">change</a> to the language was originally proposed and rejected due to a majority vote against by core developers with the following reason:</p>

<blockquote>
  <p><em>This patch will not be accepted because slight majority of the core developers voted against. Though if you take a accumulated mean between core developers and userland votes seems to show the opposite it would be irresponsible to submit a patch witch is not supported or maintained in the long run.</em></p>
</blockquote>

<p>However, it appears there was a change of heart leading up to 5.4, perhaps influenced by the implementations of support for popular databases like MongoDB (which use ECMAScript syntax).</p>
","5966855"
"Apache is not running from XAMPP Control Panel ( Error: Apache shutdown unexpectedly. This may be due to a blocked port)","374160","","<p>I have installed XAMPP (xampp-win32-1.8.2-0-VC9-installer.exe) on Windows 7 successfully. But unfortunately, the following error was found during running Apache from XAMPP Control Panel: </p>

<pre><code>5:38:38 PM  [Apache]    Error: Apache shutdown unexpectedly.
5:38:38 PM  [Apache]    This may be due to a blocked port, missing dependencies, 
5:38:38 PM  [Apache]    improper privileges, a crash, or a shutdown by another method.
5:38:38 PM  [Apache]    Press the Logs button to view error logs and check
5:38:38 PM  [Apache]    the Windows Event Viewer for more clues
5:38:38 PM  [Apache]    If you need more help, copy and post this
5:38:38 PM  [Apache]    entire log window on the forums
</code></pre>

<p><img src=""https://i.stack.imgur.com/z95JC.png"" alt=""Error on running Apache at XAMPP Controm Panel""></p>
","<p>There are many possible answers for this problem. The most common and most likely is that you're running another program which is blocking port 80 or 443. If you've installed Skype, then you've found your problem! Change apache's port settings to 81 and apache will work. There's a good tutorial on that To check this you can open up your command line by clicking the start menu, and typing 'cmd', and enter the command</p>

<pre><code>    netstat -nab
</code></pre>

<p>this wil return a list of programs that will vaguely resemble this pattern</p>

<pre><code>    [someprogram.exe]
    UDP     [fe80::numbers:numbers:numbers:numbers%numbers]:portnumber
</code></pre>

<p>You need to find a line (or lines) ending in :80 and terminate them in order to start apache. If there is no line ending in :80, there are more things you can do.</p>

<p>First, navigate to xampp's directory (default is c:\xampp) and double click apache_start.bat. This will open up a comand line and return more detailed errors about why apache can't run. Mostly, be looking for syntax errors that you could've created by editing your httpd.conf, or httpd-ssl.conf files. This is very easy to do if you've edited it and are a new user.</p>

<p>If still this fails, your last hope is to check the apache error log by clicking on the logs tab in apache's row in the xampp control panel and clicking error log.</p>

<p>If none of this works, don't give up! You got this!</p>

<p><strong>Edit:</strong> If you change the port of apache, you will also have to go into httpd.conf (located in xampp/apache/conf) and near line 184, replace</p>

<p><code>ServerName localhost:80</code></p>

<p>with</p>

<p><code>ServerName localhost:81</code></p>

<p>It is also possible to specify port 81 in the url of your localhost, i.e. </p>

<p>localhost:81/my_project.php</p>
","17977528"
"How to enable cURL in PHP / XAMPP","373137","","<p>How do I enable cURL in PHP?</p>

<p>​​</p>
","<p>Since you're using XAMPP, uncomment the line</p>

<pre><code>;extension=php_curl.dll
</code></pre>

<p>in <code>xampp\apache\bin\php.ini</code>, and then restart the Apache service.</p>

<p>NB: In newer XAMPP versions, PHP has moved to root xampp folder <code>xampp\php\php.ini</code>.</p>
","1347340"
"How to send a GET request from PHP?","369192","","<p>I'm planning to use PHP for a simple requirement.  I need to download a XML content from a URL, for which I need to send HTTP GET request to that URL.</p>

<p>How do I do it in PHP?</p>
","<p>Unless you need more than just the contents of the file, you could use <a href=""http://us.php.net/manual/en/function.file-get-contents.php"" rel=""noreferrer""><code>file_get_contents</code></a>.</p>

<pre><code>$xml = file_get_contents(""http://www.example.com/file.xml"");
</code></pre>

<p>For anything more complex, I'd use <a href=""http://us3.php.net/curl"" rel=""noreferrer"">cURL</a>.</p>
","959069"
"How to pass JavaScript variables to PHP?","363982","","<p>I want to pass JavaScript variables to PHP using a hidden input in a form. </p>

<p>But I can't get the value of <code>$_POST['hidden1']</code> into <code>$salarieid</code>. Is there something wrong? </p>

<p>Here is the code: </p>

<pre><code>&lt;script type=""text/javascript""&gt;
// view which the user has chosen
function func_load3(name){
    var oForm = document.forms[""myform""];
    var oSelectBox = oForm.select3;
    var iChoice = oSelectBox.selectedIndex;
    //alert(""you have choosen: "" + oSelectBox.options[iChoice].text );
    //document.write(oSelectBox.options[iChoice].text);
    var sa = oSelectBox.options[iChoice].text;
    document.getElementById(""hidden1"").value = sa;
}
&lt;/script&gt;

&lt;form name=""myform"" action=""&lt;?php echo $_SERVER['$PHP_SELF']; ?&gt;"" method=""POST""&gt;
        &lt;input type=""hidden"" name=""hidden1"" id=""hidden1""  /&gt;
&lt;/form&gt;

&lt;?php
   $salarieid = $_POST['hidden1'];
   $query = ""select * from salarie where salarieid = "".$salarieid;
   echo $query;
   $result = mysql_query($query);
?&gt;

&lt;table&gt;
   code for display the query result. 
&lt;/table&gt;
</code></pre>
","<p>You cannot pass variable values from the current page javascript to the current page PHP code... PHP code runs at the server side and it doesn't know anything about what is going on on the client side.</p>

<p>You need to pass variables to PHP code from html-form using another mechanism, such as submitting form on GET or POST methods.</p>

<pre><code>&lt;DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;My Test Form&lt;/title&gt;
  &lt;/head&gt;

  &lt;body&gt;
    &lt;form method=""POST""&gt;
      &lt;p&gt;Please, choose the salary id to proceed result:&lt;/p&gt;
      &lt;p&gt;
        &lt;label for=""salarieids""&gt;SalarieID:&lt;/label&gt;
        &lt;?php
          $query = ""SELECT * FROM salarie"";
          $result = mysql_query($query);
          if ($result) :
        ?&gt;
        &lt;select id=""salarieids"" name=""salarieid""&gt;
          &lt;?php
            while ($row = mysql_fetch_assoc($result)) {
              echo '&lt;option value=""', $row['salaried'], '""&gt;', $row['salaried'], '&lt;/option&gt;'; //between &lt;option&gt;&lt;/option&gt; tags you can output something more human-friendly (like $row['name'], if table ""salaried"" have one) 
            }
          ?&gt;
        &lt;/select&gt;
        &lt;?php endif ?&gt;
      &lt;/p&gt;
      &lt;p&gt;
        &lt;input type=""submit"" value=""Sumbit my choice""/&gt;
      &lt;/p&gt;
    &lt;/form&gt;

    &lt;?php if isset($_POST['salaried']) : ?&gt;
      &lt;?php
        $query = ""SELECT * FROM salarie WHERE salarieid = "" . $_POST['salarieid'];
        $result = mysql_query($query);
        if ($result) :
      ?&gt;
        &lt;table&gt;
          &lt;?php
            while ($row = mysql_fetch_assoc($result)) {
              echo '&lt;tr&gt;';
              echo '&lt;td&gt;', $row['salaried'], '&lt;/td&gt;&lt;td&gt;', $row['bla-bla-bla'], '&lt;/td&gt;' ...; // and others
              echo '&lt;/tr&gt;';
            }
          ?&gt;
        &lt;/table&gt;
      &lt;?php endif?&gt;
    &lt;?php endif ?&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
","1917626"
"Warning: Cannot modify header information - headers already sent by ERROR","363760","","<blockquote>
  <p><strong>Possible Duplicate:</strong>
  <a href=""https://stackoverflow.com/questions/8028957/headers-already-sent-by-php"">Headers already sent by PHP</a></p>
</blockquote>



<p>I've been struggling with this error for a while now.</p>

<p>To start with, I just thought it was white space, but after further research I think it might be a problem similar to this:</p>

<blockquote>
  <p>Look for any statements that could send output to the user before this header statement. If you find one or more, change your code to move the header statement before them. Complex conditional statements may complicate the issue, but they may also help solve the problem. Consider a conditional expression at the top of the PHP script that determines the header value as early as possible and sets it there.</p>
</blockquote>

<p>I'm guessing the include header is causing the problem along with the header(), but I'm not sure how to rearrange the code to get rid of this error.</p>

<p>How do I remove the error?</p>

<pre><code>&lt;?php
    $username = $password = $token = $fName = """";

    include_once 'header.php';

    if (isset($_POST['username']) &amp;&amp; isset($_POST['password']))
        $username = sanitizeString($_POST['username']);

    $password = sanitizeString($_POST['password']); //Set temporary username and password variables
    $token    = md5(""$password""); //Encrypt temporary password

    if ($username != 'admin')
    {
        header(""Location:summary.php"");
    }
    elseif($username == 'admin')
    {
        header(""Location:admin.php"");
    }
    elseif($username == '')
    {
        header(""Location:index.php"");
    }
    else
        die (""&lt;body&gt;&lt;div class='container'&gt;&lt;p class='error'&gt;Invalid username or password.&lt;/p&gt;&lt;/div&gt;&lt;/body&gt;"");

    if ($username == """" || $token == """")
    {
        echo ""&lt;body&gt;&lt;div class='container'&gt;&lt;p class='error'&gt;Please enter your username and password&lt;/p&gt;&lt;/div&gt;&lt;/body&gt;"";
    }
    else
    {
        $query = ""SELECT * FROM members WHERE username='$username'AND password = '$token'""; //Look in table for username entered
        $result = mysql_query($query);
        if (!$result)
            die (""Database access failed: "" . mysql_error());
        elseif (mysql_num_rows($result) &gt; 0)
        {
            $row = mysql_fetch_row($result);
            $_SESSION['username'] = $username; //Set session variables
            $_SESSION['password'] = $token;

            $fName = $row[0];
        }
    }
?&gt;
</code></pre>
","<p>The long term answer is that all output from your PHP scripts should be buffered in variables. This includes headers and body output. Then at the end of your scripts do any output you need.</p>

<p>The very quick fix for your problem will be to add</p>

<pre><code>ob_start();
</code></pre>

<p>as the very first thing in your script if you only need it in this one script. If you need it in all your scripts add it as the very first thing in your header.php file.</p>

<p>This turns on PHP's output buffering feature. In PHP when you output something (do an echo or print) if has to send the HTTP headers at that time. If you turn on output buffering you can output in the script but PHP doesn't have to send the headers until the buffer is flushed. If you turn it on and don't turn it off PHP will automatically flush everything in the buffer after the script finishes running. There really is no harm in just turning it on in almost all cases and could give you a small performance increase under some configurations.</p>

<p>If you have access to change your php.ini configuration file you can find and change or add the following</p>

<pre><code>output_buffering = On
</code></pre>

<p>This will turn output buffering out without the need to call ob_start().</p>

<p>To find out more about output buffering check out <a href=""http://php.net/manual/en/book.outcontrol.php"" rel=""noreferrer"">http://php.net/manual/en/book.outcontrol.php</a></p>
","9709170"
"The mysql extension is deprecated and will be removed in the future: use mysqli or PDO instead","362976","","<p>When I attempt to connect to a MySQL server from PHP, I see the following error:</p>

<blockquote>
  <p>Deprecated: The mysql extension is deprecated and will be removed in the future: use mysqli or PDO instead in /path/to/filename.php on line 123</p>
</blockquote>

<p>The code on the referenced line is:</p>

<pre><code>mysql_connect($server, $username, $password);
</code></pre>

<p>I am certain that the arguments are correct, and this exact code has been working for years without problem.  Indeed, I obtained it from a well-sourced tutorial on PHP.</p>

<ol>
<li><p>Why is this happening?</p></li>
<li><p>How can I fix it?</p></li>
<li><p>I understand that it's possible to suppress deprecation errors by setting <code>error_reporting</code> in <code>php.ini</code> to exclude <code>E_DEPRECATED</code>:</p>

<pre><code>error_reporting = E_ALL ^ E_DEPRECATED
</code></pre>

<p>What will happen if I do that?</p></li>
</ol>
","<ol>
<li><blockquote>
  <p>Why is this happening?</p>
</blockquote>

<p>The entire <code>ext/mysql</code> PHP extension, which provides all functions named with the prefix <code>mysql_</code>, was <a href=""http://php.net/manual/en/changelog.mysql.php"" rel=""noreferrer"">officially deprecated in PHP v5.5.0</a> and <a href=""https://secure.php.net/manual/en/migration70.removed-exts-sapis.php"" rel=""noreferrer"">removed in PHP v7</a>.</p>

<p>It was originally introduced in PHP v2.0 (November 1997) for MySQL v3.20, and no new features have been added since 2006.  Coupled with the lack of new features are difficulties in maintaining such old code amidst complex security vulnerabilities.</p>

<p>The manual has contained warnings against its use in new code since June 2011.</p></li>
<li><blockquote>
  <p>How can I fix it?</p>
</blockquote>

<p>As the error message suggests, there are two other MySQL extensions that you can consider: <a href=""http://php.net/manual/en/book.mysqli.php"" rel=""noreferrer"">MySQLi</a> and <a href=""http://php.net/manual/en/ref.pdo-mysql.php"" rel=""noreferrer"">PDO_MySQL</a>, either of which can be used instead of <code>ext/mysql</code>.  Both have been in PHP core since v5.0, so if you're using a version that is throwing these deprecation errors then you can almost certainly just start using them right away&mdash;i.e. without any installation effort.</p>

<p>They differ slightly, but offer a number of advantages over the old extension including API support for transactions, stored procedures and prepared statements (thereby providing <a href=""https://stackoverflow.com/a/60496"">the best way</a> to defeat <a href=""https://stackoverflow.com/q/332365"">SQL injection attacks</a>).  PHP developer Ulf Wendel has written <a href=""http://blog.ulf-wendel.de/2012/php-mysql-why-to-upgrade-extmysql/"" rel=""noreferrer"">a thorough comparison of the features</a>.</p>

<p>Hashphp.org has an <a href=""http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers"" rel=""noreferrer"">excellent tutorial on migrating from <code>ext/mysql</code> to PDO</a>.</p></li>
<li><blockquote>
  <p>I understand that it's possible to suppress deprecation errors by setting <code>error_reporting</code> in <code>php.ini</code> to exclude <code>E_DEPRECATED</code>:</p>

<pre><code>error_reporting = E_ALL ^ E_DEPRECATED
</code></pre>
  
  <p>What will happen if I do that?</p>
</blockquote>

<p>Yes, it is possible to suppress such error messages and continue using the old <code>ext/mysql</code> extension for the time being.  But <strong>you really shouldn't do this</strong>&mdash;this is a final warning from the developers that the extension may not be bundled with future versions of PHP (indeed, as already mentioned, it has been removed from PHP v7).  Instead, you should take this opportunity to migrate your application <em>now</em>, before it's too late.</p>

<p>Note also that this technique will suppress <em>all</em> <code>E_DEPRECATED</code> messages, not just those to do with the <code>ext/mysql</code> extension: therefore you may be unaware of other upcoming changes to PHP that would affect your application code.  It is, of course, possible to only suppress errors that arise on the expression at issue by using PHP's <a href=""http://php.net/manual/en/language.operators.errorcontrol.php"" rel=""noreferrer"">error control operator</a>&mdash;i.e. prepending the relevant line with <code>@</code>&mdash;however this will suppress <em>all</em> errors raised by that expression, not just <code>E_DEPRECATED</code> ones.</p></li>
</ol>

<hr>

<h3>What should you do?</h3>

<ul>
<li><p><strong>You are starting a new project.</strong></p>

<p>There is <em>absolutely no reason</em> to use <code>ext/mysql</code>&mdash;choose one of the other, more modern, extensions instead and reap the rewards of the benefits they offer.</p></li>
<li><p><strong>You have (your own) legacy codebase that currently depends upon <code>ext/mysql</code>.</strong></p>

<p>It would be wise to perform regression testing: you really shouldn't be changing <em>anything</em> (especially upgrading PHP) until you have identified all of the potential areas of impact, planned around each of them and then thoroughly tested your solution in a staging environment.</p>

<ul>
<li><p><strong>Following good coding practice, your application was developed in a loosely integrated/modular fashion and the database access methods are all self-contained in one place that can easily be swapped out for one of the new extensions.</strong></p>

<p>Spend half an hour rewriting this module to use one of the other, more modern, extensions; test thoroughly.  You can later introduce further refinements to reap the rewards of the benefits they offer.</p></li>
<li><p><strong>The database access methods are scattered all over the place and cannot easily be swapped out for one of the new extensions.</strong></p>

<p>Consider whether you really need to upgrade to PHP v5.5 at this time.</p>

<p>You should begin planning to replace <code>ext/mysql</code> with one of the other, more modern, extensions in order that you can reap the rewards of the benefits they offer; you might also use it as an opportunity to refactor your database access methods into a more modular structure.</p>

<p>However, if you have an <em>urgent</em> need to upgrade PHP right away, you might consider suppressing deprecation errors for the time being: but first be sure to identify any other deprecation errors that are also being thrown.</p></li>
</ul></li>
<li><p><strong>You are using a third party project that depends upon <code>ext/mysql</code>.</strong></p>

<p>Consider whether you really need to upgrade to PHP v5.5 at this time.</p>

<p>Check whether the developer has released any fixes, workarounds or guidance in relation to this specific issue; or, if not, pressure them to do so by bringing this matter to their attention.  If you have an <em>urgent</em> need to upgrade PHP right away, you might consider suppressing deprecation errors for the time being: but first be sure to identify any other deprecation errors that are also being thrown.</p>

<p>It is absolutely essential to perform regression testing.</p></li>
</ul>
","13944958"
"PHP and Enumerations","362044","","<p>I know that PHP doesn't have native Enumerations. But I have become accustomed to them from the Java world. I would love to use enums as a way to give predefined values which IDEs' auto completion features could understand.</p>

<p>Constants do the trick, but there's the namespace collision problem and (or actually <em>because</em>) they're global. Arrays don't have the namespace problem, but they're too vague, they can be overwritten at runtime and IDEs rarely (never?) know how to autofill their keys.</p>

<p>Are there any solutions/workarounds you commonly use? Does anyone recall whether the PHP guys have had any thoughts or decisions around enums?</p>
","<p>Depending upon use case, I would normally use something <em>simple</em> like the following:</p>

<pre><code>abstract class DaysOfWeek
{
    const Sunday = 0;
    const Monday = 1;
    // etc.
}

$today = DaysOfWeek::Sunday;
</code></pre>

<p>However, other use cases may require more validation of constants and values. Based on the comments below about reflection, and <a href=""https://stackoverflow.com/a/21536800/102937"">a few other notes</a>, here's an expanded example which may better serve a much wider range of cases:</p>

<pre><code>abstract class BasicEnum {
    private static $constCacheArray = NULL;

    private static function getConstants() {
        if (self::$constCacheArray == NULL) {
            self::$constCacheArray = [];
        }
        $calledClass = get_called_class();
        if (!array_key_exists($calledClass, self::$constCacheArray)) {
            $reflect = new ReflectionClass($calledClass);
            self::$constCacheArray[$calledClass] = $reflect-&gt;getConstants();
        }
        return self::$constCacheArray[$calledClass];
    }

    public static function isValidName($name, $strict = false) {
        $constants = self::getConstants();

        if ($strict) {
            return array_key_exists($name, $constants);
        }

        $keys = array_map('strtolower', array_keys($constants));
        return in_array(strtolower($name), $keys);
    }

    public static function isValidValue($value, $strict = true) {
        $values = array_values(self::getConstants());
        return in_array($value, $values, $strict);
    }
}
</code></pre>

<p>By creating a simple enum class that extends BasicEnum, you now have the ability to use methods thusly for simple input validation:</p>

<pre><code>abstract class DaysOfWeek extends BasicEnum {
    const Sunday = 0;
    const Monday = 1;
    const Tuesday = 2;
    const Wednesday = 3;
    const Thursday = 4;
    const Friday = 5;
    const Saturday = 6;
}

DaysOfWeek::isValidName('Humpday');                  // false
DaysOfWeek::isValidName('Monday');                   // true
DaysOfWeek::isValidName('monday');                   // true
DaysOfWeek::isValidName('monday', $strict = true);   // false
DaysOfWeek::isValidName(0);                          // false

DaysOfWeek::isValidValue(0);                         // true
DaysOfWeek::isValidValue(5);                         // true
DaysOfWeek::isValidValue(7);                         // false
DaysOfWeek::isValidValue('Friday');                  // false
</code></pre>

<p>As a side note, any time I use reflection at least once <strong>on a static/const class where the data won't change</strong> (such as in an enum), I cache the results of those reflection calls, since using fresh reflection objects each time will eventually have a noticeable performance impact (Stored in an assocciative array for multiple enums).</p>

<p>Now that most people have <strong>finally</strong> upgraded to at least 5.3, and <code>SplEnum</code> is available, that is certainly a viable option as well--as long as you don't mind the traditionally unintuitive notion of having actual enum <em>instantiations</em> throughout your codebase. In the above example, <code>BasicEnum</code> and <code>DaysOfWeek</code> cannot be instantiated at all, nor should they be.</p>
","254543"
"""Cannot send session cache limiter - headers already sent""","360139","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/3801178/php-headers-already-sent"">PHP headers already sent</a><br>
  <a href=""https://stackoverflow.com/questions/8028957/headers-already-sent-by-php"">Headers already sent by PHP</a>  </p>
</blockquote>



<p>Having a problem with sessions which is becoming very annoying. Every time I try to start a session on a particular page I get the following error: </p>

<pre><code>Warning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent (output started at ............ on line 23
</code></pre>

<p>using this code:</p>

<pre><code>&lt;?php
session_start();
if(isset($_SESSION['user']))
    {
        $user = $_SESSION['user'];
        echo ""$user"";
    }
else
    {
    }
?&gt; 
</code></pre>

<p>Is it suggesting I've already used <code>session_start();</code> ? Ive had a look around but nothing really clears this up for me. </p>

<p>Thanks</p>
","<p>""Headers already sent"" means that your PHP script already sent the HTTP headers, and as such it can't make modifications to them now.</p>

<p>Check that you don't send ANY content before calling <code>session_start</code>. Better yet, just make <code>session_start</code> the first thing you do in your PHP file (so put it at the absolute beginning, before all HTML etc).</p>
","8812777"
"PHP code is not being executed, instead code shows on the page","358271","","<p>I'm trying to execute some PHP code on a project (using Dreamweaver) but the code isn't being run.</p>

<p>When I check the source code, the PHP code appears as HTML tags (I can see it in the source code). Apache is running properly (I'm working with XAMPP), the PHP pages are being opened properly but the PHP code isn't being executed.</p>

<p>Does someone have a suggestion about what is happening?</p>

<p><strong>Note:</strong> The file is already named as <code>filename.php</code></p>

<p><strong>Edit:</strong>
The Code..:</p>

<pre><code>&lt;?
include_once(""/code/configs.php"");
?&gt;
</code></pre>

<p><img src=""https://i.stack.imgur.com/FVVLX.png"" alt=""The print""></p>
","<p>Sounds like there is something wrong with your configuration, here are a few things you can check:</p>

<ol>
<li><p>Make sure that PHP is installed and running correctly. This may sound silly, but you never know. An easy way to check is to run <code>php -v</code> from a command line and see if returns version information or any errors.</p></li>
<li><p>Make sure that the PHP module is listed <strong>and uncommented</strong> inside of your Apache's httpd.conf This should be something like <code>LoadModule php5_module ""c:/php/php5apache2_2.dll""</code> in the file. Search for <code>LoadModule php</code>, and make sure that there is no comment (<code>;</code>) in front of it.</p></li>
<li><p>Make sure that Apache's httpd.conf file has the PHP MIME type in it. This should be something like <code>AddType application/x-httpd-php .php</code>. This tells Apache to run <code>.php</code> files as PHP. Search for AddType, and then make sure there is an entry for PHP, <strong>and that it is uncommented</strong>.</p></li>
<li><p>Make sure your file has the <code>.php</code> extension on it, or whichever extension specified in the MIME definition in point #3, otherwise it will not be executed as PHP.</p></li>
<li><p>Make sure you are not using <a href=""http://php.net/manual/en/language.basic-syntax.phptags.php"" rel=""noreferrer"">short tags</a> in the PHP file (<code>&lt;?</code>), these are  <em>not enabled on all servers</em> by default and their use is discouraged. Use <code>&lt;?php</code> instead (or <a href=""http://php.net/manual/en/ini.core.php#ini.short-open-tag"" rel=""noreferrer"">enable short tags in your php.ini</a> with <code>short_open_tag=On</code> if you have code that relies on them). </p></li>
<li><p>Make sure you are accessing your file over your webserver using an URL like <code>http://localhost/file.php</code> not via local file access <code>file://localhost/www/file.php</code></p></li>
</ol>

<p>And lastly check the <a href=""http://php.net/install"" rel=""noreferrer"">PHP manual for further setup tips</a>.</p>
","5121589"
"How to determine the first and last iteration in a foreach loop?","352485","","<p>The question is simple. I have a <code>foreach</code> loop in my code:</p>

<pre><code>foreach($array as $element) {
    //code
}
</code></pre>

<p>In this loop, I want to react differently when we are in first or last iteration.</p>

<p>How to do this?</p>
","<p>You could use a counter:</p>

<pre><code>$i = 0;
$len = count($array);
foreach ($array as $item) {
    if ($i == 0) {
        // first
    } else if ($i == $len - 1) {
        // last
    }
    // …
    $i++;
}
</code></pre>
","1070256"
"Fastest way to convert string to integer in PHP","351321","","<p>Using PHP, what's the fastest way to convert a string like this: <code>""123""</code> to an integer?</p>

<p>Why is that particular method the fastest? What happens if it gets unexpected input, such as <code>""hello""</code> or an array?</p>
","<p>I've just set up a quick benchmarking exercise:</p>

<pre><code>Function             time to run 1 million iterations
--------------------------------------------
(int) ""123"":                0.55029
intval(""123""):              1.0115  (183%)

(int) ""0"":                  0.42461
intval(""0""):                0.95683 (225%)

(int) int:                  0.1502
intval(int):                0.65716 (438%)

(int) array(""a"", ""b""):      0.91264
intval(array(""a"", ""b"")):    1.47681 (162%)

(int) ""hello"":              0.42208
intval(""hello""):            0.93678 (222%)
</code></pre>

<p>On average, calling intval() is two and a half times slower, and the difference is the greatest if your input already is an integer.</p>

<p>I'd be interested to know <em>why</em> though.</p>

<hr>

<p>Update: I've run the tests again, this time with coercion <code>(0 + $var)</code></p>

<pre><code>| INPUT ($x)      |  (int) $x  |intval($x) |  0 + $x   |
|-----------------|------------|-----------|-----------|
| ""123""           |   0.51541  |  0.96924  |  0.33828  |
| ""0""             |   0.42723  |  0.97418  |  0.31353  |
| 123             |   0.15011  |  0.61690  |  0.15452  |
| array(""a"", ""b"") |   0.8893   |  1.45109  |  err!     |
| ""hello""         |   0.42618  |  0.88803  |  0.1691   |
|-----------------|------------|-----------|-----------|
</code></pre>

<p><strong>Addendum:</strong> I've just come across a slightly unexpected behaviour which you should be aware of when choosing one of these methods:</p>

<pre><code>$x = ""11"";
(int) $x;      // int(11)
intval($x);    // int(11)
$x + 0;        // int(11)

$x = ""0x11"";
(int) $x;      // int(0)
intval($x);    // int(0)
$x + 0;        // int(17) !

$x = ""011"";
(int) $x;      // int(11)
intval($x);    // int(11)
$x + 0;        // int(11) (not 9)
</code></pre>

<p><sub>Tested using PHP 5.3.1</sub></p>
","239173"
"Get first n characters of a string","350568","","<p>How can I get the first n characters of a string in PHP? What's the fastest way to trim a string to a specific number of characters, and append '...' if needed?</p>
","<pre><code>//The simple version for 10 Characters from the beginning of the string
$string = substr($string,0,10).'...';
</code></pre>

<p>Update:</p>

<p>Based on suggestion for checking length (and also ensuring similar lengths on trimmed and untrimmed strings):</p>

<pre><code>$string = (strlen($string) &gt; 13) ? substr($string,0,10).'...' : $string;
</code></pre>

<p>So you will get a string of max 13 characters; either 13 (or less) normal characters or 10 characters followed by '...'</p>

<p>Update 2:</p>

<p>Or as function:</p>

<pre><code>function truncate($string, $length, $dots = ""..."") {
    return (strlen($string) &gt; $length) ? substr($string, 0, $length - strlen($dots)) . $dots : $string;
}
</code></pre>

<p>Update 3:</p>

<p>It's been a while since I wrote this answer and I don't actually use this code any more. I prefer this function which prevents breaking the string in the middle of a word using the <code>wordwrap</code> function:</p>

<pre><code>function truncate($string,$length=100,$append=""&amp;hellip;"") {
  $string = trim($string);

  if(strlen($string) &gt; $length) {
    $string = wordwrap($string, $length);
    $string = explode(""\n"", $string, 2);
    $string = $string[0] . $append;
  }

  return $string;
}
</code></pre>
","3161830"
"What is the difference between public, private, and protected?","347436","","<p>When and why should I use <code>public</code>, <code>private</code>, and <code>protected</code> functions and variables inside a class? What is the difference between them?</p>

<p>Examples:</p>

<pre><code>// Public
public $variable;
public function doSomething() {
  // ...
}

// Private
private $variable;
private function doSomething() {
  // ...
}

// Protected
protected $variable;
protected function doSomething() {
  // ...
}
</code></pre>
","<p>You use:</p>

<ul>
<li><p><code>public</code> scope to make that variable/function available from anywhere, other classes and instances of the object.</p></li>
<li><p><code>private</code> scope when you want your variable/function to be visible in its own class only.</p></li>
<li><p><code>protected</code> scope when you want to make your variable/function visible in all classes that extend current class including the parent class.</p></li>
</ul>

<p><strong>More:</strong> (For comprehensive information)</p>

<ul>
<li><a href=""http://php.net/manual/en/language.oop5.visibility.php"" rel=""noreferrer"">http://php.net/manual/en/language.oop5.visibility.php</a></li>
</ul>
","4361582"
"What is the difference between HTTP_HOST and SERVER_NAME in PHP?","347353","","<p>When would you consider using one over the other and why?</p>
","<p>The <code>HTTP_HOST</code> is obtained from the <a href=""http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.23"" rel=""noreferrer"">HTTP request header</a> and this is what the client actually used as ""target host"" of the request. The <code>SERVER_NAME</code> is defined in server config. Which one to use depends on what you need it for. You should now however realize that the one is a client-controlled value which may thus not be reliable for use in business logic and the other is a server-controlled value which is more reliable. You however need to ensure that the webserver in question has the <code>SERVER_NAME</code> correctly configured. Taking Apache HTTPD as an example, here's an extract from <a href=""http://httpd.apache.org/docs/2.2/mod/core.html#servername"" rel=""noreferrer"">its documentation</a>:</p>

<blockquote>
  <p>If no <code>ServerName</code> is specified, then the server attempts to deduce the hostname by performing a reverse lookup on the IP address. If no port is specified in the <code>ServerName</code>, then the server will use the port from the incoming request. For optimal reliability and predictability, you should specify an explicit hostname and port using the <code>ServerName</code> directive.</p>
</blockquote>

<hr>

<p><strong>Update</strong>: after checking <a href=""https://stackoverflow.com/a/2297446"">the answer of Pekka on your question</a> which contains a link to <a href=""https://stackoverflow.com/a/1461430"">bobince's answer</a> that PHP would always return <code>HTTP_HOST</code>'s value for <code>SERVER_NAME</code>, which goes against my own PHP 4.x + Apache HTTPD 1.2.x experiences from a couple of years ago, I blew some dust from my current XAMPP environment on Windows XP (Apache HTTPD 2.2.1 with PHP 5.2.8), started it, created a PHP page which prints the both values, created a Java test application using <a href=""http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html"" rel=""noreferrer""><code>URLConnection</code></a> to modify the <code>Host</code> header and tests taught me that this is indeed (incorrectly) the case.</p>

<p>After first suspecting PHP and digging in some <a href=""http://www.google.com/search?q=server_name+http_host+site%3Abugs.php.net"" rel=""noreferrer"">PHP bug reports</a> regarding the subject, I learned that the root of the problem is in web server used, that it incorrectly returned HTTP <code>Host</code> header when <code>SERVER_NAME</code> was requested. So I dug into <a href=""http://www.google.com/search?q=server_name+http_host+site%3Abz.apache.org+httpd"" rel=""noreferrer"">Apache HTTPD bug reports</a> using <a href=""http://www.google.com/search?q=php+servername+site%3Abz.apache.org+httpd"" rel=""noreferrer"">various keywords</a> regarding the subject and I finally found a <a href=""https://bz.apache.org/bugzilla/show_bug.cgi?id=44614"" rel=""noreferrer"">related bug</a>. This behaviour was introduced since around Apache HTTPD 1.3. You need to set <a href=""http://httpd.apache.org/docs/2.2/mod/core.html#usecanonicalname"" rel=""noreferrer""><code>UseCanonicalName</code></a> directive to <code>on</code> in the <code>&lt;VirtualHost&gt;</code> entry of the <code>ServerName</code> in <code>httpd.conf</code> (also check the warning at the bottom of <a href=""http://httpd.apache.org/docs/2.2/mod/core.html#usecanonicalname"" rel=""noreferrer"">the document</a>!).</p>

<pre><code>&lt;VirtualHost *&gt;
    ServerName example.com
    UseCanonicalName on
&lt;/VirtualHost&gt; 
</code></pre>

<p>This worked for me. </p>

<p>Summarized, <code>SERVER_NAME</code> is more reliable, but you're <strong>dependent</strong> on the server config!</p>
","2297421"
"Send attachments with PHP Mail()?","346900","","<p>I need to send a pdf with mail, is it possible? </p>

<pre><code>$to = ""xxx"";
$subject = ""Subject"" ;
$message = 'Example message with &lt;b&gt;html&lt;/b&gt;';
$headers  = 'MIME-Version: 1.0' . ""\r\n"";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . ""\r\n"";
$headers .= 'From: xxx &lt;xxx&gt;' . ""\r\n"";
mail($to,$subject,$message,$headers);
</code></pre>

<p>What am I missing?</p>
","<p>I agree with @MihaiIorga in the comments – use the PHPMailer script. You sound like you're rejecting it because you want the easier option. Trust me, PHPMailer <strong>is</strong> the easier option by a very large margin compared to trying to do it yourself with PHP's built-in <code>mail()</code> function. PHP's <code>mail()</code> function really isn't very good.</p>

<p>To use PHPMailer:</p>

<ul>
<li>Download the PHPMailer script from here: <a href=""http://github.com/PHPMailer/PHPMailer"" rel=""noreferrer"">http://github.com/PHPMailer/PHPMailer</a></li>
<li>Extract the archive and copy the script's folder to a convenient place in your project.</li>
<li>Include the main script file -- <code>require_once('path/to/file/class.phpmailer.php');</code></li>
</ul>

<p>Now, sending emails with attachments goes from being insanely difficult to incredibly easy:</p>

<pre><code>$email = new PHPMailer();
$email-&gt;From      = 'you@example.com';
$email-&gt;FromName  = 'Your Name';
$email-&gt;Subject   = 'Message Subject';
$email-&gt;Body      = $bodytext;
$email-&gt;AddAddress( 'destinationaddress@example.com' );

$file_to_attach = 'PATH_OF_YOUR_FILE_HERE';

$email-&gt;AddAttachment( $file_to_attach , 'NameOfFile.pdf' );

return $email-&gt;Send();
</code></pre>

<p>It's just that one line <code>$email-&gt;AddAttachment();</code> -- you couldn't ask for any easier.</p>

<p>If you do it with PHP's <code>mail()</code> function, you'll be writing stacks of code, and you'll probably have lots of really difficult to find bugs.</p>
","12302354"
"Array to String PHP?","346755","","<p>What is the best method for converting a PHP array into a string?<br>
I have the variable <code>$type</code> which is an array of types. </p>

<pre><code>$type = $_POST[type];
</code></pre>

<p>I want to store it as a single string in my database with each entry separated by <code>|</code> :</p>

<blockquote>
  <p>Sports|Festivals|Other</p>
</blockquote>
","<p>Simply use <a href=""http://php.net/implode"" rel=""noreferrer"">implode</a></p>

<pre><code>implode(""|"",$type);
</code></pre>
","7490505"
"PHP Parse/Syntax Errors; and How to solve them?","344555","","<p>Everyone runs into syntax errors. Even experienced programmers make typos. For newcomers it's just part of the learning process. However, it's often easy to interpret error messages such as:   </p>

<blockquote>
  <p>PHP Parse error: syntax error, unexpected '{' in index.php on line 20</p>
</blockquote>

<p>The unexpected symbol isn't always the real culprit. But the line number gives a rough idea where to start looking.</p>

<blockquote>
  <p>Always look at the <strong>code context</strong>. The syntax mistake often hides in the mentioned <em>or</em> in <strong>previous code lines</strong>. Compare your code against syntax examples from the manual.</p>
</blockquote>

<p>While not every case matches the other. Yet there are some <a href=""https://stackoverflow.com/a/18050072"">general steps to <strong>solve syntax mistakes</strong></a>.
This references summarized the common pitfalls:</p>

<ul>
<li><p><a href=""https://stackoverflow.com/a/18092277"">Unexpected T_STRING</a></p></li>
<li><p><a href=""https://stackoverflow.com/a/18092267"">Unexpected T_VARIABLE <br> Unexpected '$varname' (T_VARIABLE)</a></p></li>
<li><p><a href=""https://stackoverflow.com/a/18092288"">Unexpected T_CONSTANT_ENCAPSED_STRING <br> Unexpected T_ENCAPSED_AND_WHITESPACE</a></p></li>
<li><p><a href=""https://stackoverflow.com/questions/18050071/php-parse-syntax-errors-and-how-to-solve-them#29500670"">Unexpected $end</a></p></li>
<li><p><a href=""https://stackoverflow.com/questions/3723748/php-version-5-2-14-parse-error-syntax-error-unexpected-t-function-expecting"">Unexpected T_FUNCTION</a>…</p></li>
<li><p><a href=""https://stackoverflow.com/a/18092308"">Unexpected <code>{</code></a></p></li>
<li><p><a href=""https://stackoverflow.com/a/18092308"">Unexpected <code>}</code></a></p></li>
<li><p><a href=""https://stackoverflow.com/a/18092308"">Unexpected <code>(</code></a></p></li>
<li><p><a href=""https://stackoverflow.com/a/18092308"">Unexpected <code>)</code></a></p></li>
<li><p><a href=""https://stackoverflow.com/a/29505827"">Unexpected <code>[</code></a></p></li>
<li><p><a href=""https://stackoverflow.com/a/29505827"">Unexpected <code>]</code></a></p></li>
<li><p><a href=""https://stackoverflow.com/a/18092318"">Unexpected T_IF <br> Unexpected T_FOREACH <br> Unexpected T_FOR <br> Unexpected T_WHILE <br> Unexpected T_DO <br> Unexpected T_PRINT <br> Unexpected T_ECHO</a></p></li>
<li><p><a href=""https://stackoverflow.com/a/47202089"">Unexpected T_LNUMBER</a></p></li>
<li><p><a href=""https://stackoverflow.com/questions/4934754/t-inline-html-whats-wrong-with-this"">Unexpected T_INLINE_HTML</a>…</p></li>
<li><p><a href=""https://stackoverflow.com/questions/1966010/what-does-this-mean-parse-error-syntax-error-unexpected-t-paamayim-nekudotay"">Unexpected T_PAAMAYIM_NEKUDOTAYIM</a>…</p></li>
<li><p><a href=""https://stackoverflow.com/questions/3990212/help-with-this-error-message-unexpected-t-object-operator"">Unexpected T_OBJECT_OPERATOR</a>… </p></li>
<li><p><a href=""https://stackoverflow.com/questions/2622624/parse-error-syntax-error-unexpected-t-double-arrow-php"">Unexpected T_DOUBLE_ARROW</a>…
</p></li>
<li><p><a href=""https://stackoverflow.com/questions/11208725/parse-error-syntax-error-unexpected-t-sl-php-heredoc"">Unexpected T_SL</a>…
</p></li>
<li><p><a href=""https://stackoverflow.com/questions/4419095/syntax-error-unexpected-t-boolean-or"">Unexpected T_BOOLEAN_OR</a>…
<br>
<a href=""https://stackoverflow.com/questions/11500935/parse-error-syntax-error-unexpected-t-boolean-and-expecting-in"">Unexpected T_BOOLEAN_AND</a>…
</p></li>
<li><p><a href=""https://stackoverflow.com/a/30142092/345031"">Unexpected T_IS_EQUAL <br>
Unexpected T_IS_GREATER_OR_EQUAL <br>
Unexpected T_IS_IDENTICAL <br>
Unexpected T_IS_NOT_EQUAL <br>
Unexpected T_IS_NOT_IDENTICAL <br>
Unexpected T_IS_SMALLER_OR_EQUAL <br>
Unexpected <code>&lt;</code> <br>
Unexpected <code>&gt;</code></a></p></li>
<li><p><a href=""https://stackoverflow.com/questions/6263105/parsing-error-syntax-error-unexpected-t-ns-separator"">Unexpected T_NS_SEPARATOR</a>…
</p></li>
<li><p><a href=""https://stackoverflow.com/questions/17156251/unexpected-character-in-input-ascii-92-state-1"">Unexpected character in input: '<code>\</code>' (ASCII=92) state=1</a></p></li>
<li><p><a href=""https://stackoverflow.com/questions/13341378/php-parse-error-syntax-error-unexpected-t-public"">Unexpected 'public' (T_PUBLIC) <br> Unexpected 'private' (T_PRIVATE) <br> Unexpected 'protected' (T_PROTECTED) <br> Unexpected 'final' (T_FINAL)</a>…</p></li>
<li><p><a href=""https://stackoverflow.com/questions/4668557/parse-error-syntax-error-unexpected-t-static"">Unexpected T_STATIC</a>…
</p></li>
<li><p><a href=""https://stackoverflow.com/questions/32205590/laravel-parse-error-syntax-error-unexpected-t-class-expecting-t-string-or-t-v"">Unexpected T_CLASS</a>…</p></li>
<li><p><a href=""https://stackoverflow.com/questions/27783613/parse-error-syntax-error-unexpected-t-dnumber-in-home-a3206525-public-html-ea"">Unexpected T_DNUMBER</a></p></li>
<li><p><a href=""https://stackoverflow.com/questions/29241208/php-parse-error-syntax-error-unexpected-in"">Unexpected <code>,</code></a> <em>(comma)</em>
</p></li>
<li><p><a href=""https://stackoverflow.com/questions/10969342/parse-error-syntax-error-unexpected-expecting-or"">Unpexected <code>.</code></a> <em>(period)</em>
</p></li>
<li><p><a href=""https://stackoverflow.com/questions/12961248/php-string-parse-error-with-necessary-semicolon-after-variable"">Unexpected <code>;</code></a> <em>(semicolon)</em></p></li>
<li><p><a href=""https://stackoverflow.com/q/32905365/3933332"">Unexpected <code>*</code></a> <em>(asterisk)</em></p></li>
<li><p><a href=""https://stackoverflow.com/questions/33178974/parse-error-unexpected-works-fine-in-localhost"">Unexpected <code>:</code></a> <em>(colon)</em></p></li>
</ul>

<p>Closely related references:</p>

<ul>
<li><a href=""https://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php"">What does this error mean in PHP? (runtime errors)</a>

<ul>
<li><a href=""https://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12770089/#12770089"">Parse error: syntax error, unexpected T_XXX</a></li>
<li><a href=""https://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/13935532#13935532"">Parse error: syntax error, unexpected T_ENCAPSED_AND_WHITESPACE</a></li>
<li><a href=""https://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/15539535#15539535"">Parse error: syntax error, unexpected T_VARIABLE</a></li>
</ul></li>
<li><a href=""https://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php"">What does this symbol mean in PHP? (language tokens)</a></li>
<li><a href=""https://stackoverflow.com/questions/14303353/double-quotes-are-not-copied-normally-how-can-i-edit-them"">Those <code>“”</code> smart  <code>‘’</code> quotes mean nothing to PHP</a></li>
</ul>

<p>And:</p>

<ul>
<li>The <a href=""http://www.php.net/manual/en/"" rel=""noreferrer"">PHP manual on php.net</a> and its various <a href=""http://php.net/tokens"" rel=""noreferrer"">language tokens</a></li>
<li>Or Wikipedias <a href=""http://en.wikipedia.org/wiki/PHP_syntax_and_semantics"" rel=""noreferrer"">syntax introduction on PHP</a>.</li>
<li>And lastly our <a href=""https://stackoverflow.com/tags/php/info""><strong>php</strong> tag-wiki</a> of course.</li>
</ul>

<p>While Stackoverflow is also welcoming rookie coders, it's mostly targetted at professional programming questions.</p>

<ul>
<li>Answering everyones coding mistakes and narrow typos is considered mostly off-topic.</li>
<li>So please take the time to follow the <a href=""https://stackoverflow.com/a/18050072"">basic steps</a>, before posting syntax fixing requests.</li>
<li>If you still have to, please show your own solving initiative, attempted fixes, and your thought process on what looks or might be wrong.</li>
</ul>

<p>If your <em>browser</em> displays error messages such as ""SyntaxError: illegal character"", then it's not actually <a href=""/questions/tagged/php"" class=""post-tag"" title=""show questions tagged &#39;php&#39;"" rel=""tag"">php</a>-related, but a <a href=""/questions/tagged/javascript"" class=""post-tag"" title=""show questions tagged &#39;javascript&#39;"" rel=""tag"">javascript</a>-<a href=""https://stackoverflow.com/questions/2120093/how-to-find-javascript-syntax-errors"">syntax error</a>.</p>
","<h3>What are syntax errors?</h3>

<p>PHP belongs to the <a href=""http://en.wikipedia.org/wiki/List_of_C-based_programming_languages"" rel=""noreferrer"">C-style</a> and <a href=""http://en.wikipedia.org/wiki/Imperative_programming"" rel=""noreferrer"">imperative</a> programming languages. It has rigid grammar rules, which it cannot recover from when encountering misplaced symbols or identifiers. It can't guess your coding intentions.</p>

<p><img src=""https://i.stack.imgur.com/jY6k7.gif"" alt=""function definition syntax abstract""></p>

<h3>Most important tips</h3>

<p>There are a few basic precautions you can always take:</p>

<ul>
<li><p>Use proper <strong>code indentation</strong>, or adopt any lofty coding style.<br>
Readability prevents irregularities.</p></li>
<li><p>Use an <a href=""http://en.wikipedia.org/wiki/List_of_PHP_editors"" rel=""noreferrer""><strong><em>IDE</em></strong> or editor for PHP</a> with <strong>syntax highlighting</strong>.<br>
Which also help with parens/bracket balancing.</p>

<p><img src=""https://i.stack.imgur.com/z2FBC.png"" alt=""Expected: semicolon""></p></li>
<li><p>Read the <a href=""http://www.php.net/langref"" rel=""noreferrer"">language reference</a> and examples in the manual.<br>
Twice, to become somewhat proficient.</p></li>
</ul>

<h3>How to interpret parser errors?</h3>

<p>A typical syntax error message reads:</p>

<blockquote>
  <p>Parse error: syntax error, unexpected <strong>T_STRING</strong>, expecting <strong>'<code>;</code>'</strong> in <em>file.php</em> on <strong>line</strong> <em>217</em></p>
</blockquote>

<p>Which lists the <em>possible</em> location of a syntax mistake. See the mentioned <strong>file name</strong> and <strong>line number</strong>.</p>

<p>A <a href=""http://php.net/tokens"" rel=""noreferrer"">moniker</a> such as <code>T_STRING</code> explains which symbol the parser/tokenizer couldn't process finally. This isn't necessarily the cause of the syntax mistake however.</p>

<p>It's important to look into <strong>previous code lines</strong> as well. Often syntax errors are just mishaps that happened earlier. The error line number is just where the parser conclusively gave up to process it all.</p>

<h2>Solving syntax errors</h2>

<p>There are many approaches to narrow down and fix syntax hiccups.</p>

<ul>
<li><p>Open the mentioned source file. Look at the mentioned <strong>code line</strong>.</p>

<ul>
<li><p>For runaway strings and misplaced operators this is usually where you find the culprit.</p></li>
<li><p>Read the line left to right and imagine what each symbol does.</p></li>
</ul></li>
<li><p>More regularily you need to look at <strong>preceding lines</strong> as well.</p>

<ul>
<li><p>In particular missing <code>;</code> semicolons are missing at the previous line end / statement. (At least from the stylistic viewpoint. )   </p></li>
<li><p>If <code>{</code> code blocks <code>}</code> are incorrectly closed or nested, you may need to investigate even further up the source code. Use proper <em>code indendation</em> to simplify that.</p></li>
</ul></li>
<li><p>Look at the <strong>syntax colorization</strong> !</p>

<ul>
<li><p>Strings and variables and constants should all have different colors.</p></li>
<li><p>Operators <code>+-*/.</code> should be be tinted distinct as well. Else they might be in the wrong context.</p></li>
<li><p>If you see string colorization extend too far or too short, then you have found an unescaped or missing closing <code>""</code> or <code>'</code> string marker.</p></li>
<li><p>Having two same-colored punctuation characters next to each other can also mean trouble. Usually operators are lone, if it's not <code>++</code> or <code>--</code> or parentheses following an operator. Two strings/identifiers directly following each other are incorrect in most contexts.</p></li>
</ul></li>
<li><p><strong>Whitespace is your friend</strong>.<br>
 Follow <em>any</em> coding style.
   </p></li>
<li><p>Break up long lines temporarily.</p>

<ul>
<li><p>You can freely <strong>add newlines</strong> between operators or constants and strings. The parser will then concretise the line number for parsing errors. Instead of looking at very lengthy code, you can isolate the missing or misplaced syntax symbol.</p></li>
<li><p>Split up complex <code>if</code> statements into distinct or nested if conditions.</p></li>
<li><p>Instead of lengthy math formulas or logic chains, use temporary variables to simplify the code. (More readable = less errors.)</p></li>
<li><p>Add newlines between:</p>

<ol>
<li>Code you can easily identify as correct,</li>
<li>The parts you're unsure about,</li>
<li>And the lines which the parser complains about.<br></li>
</ol>

<p>Partitioning up long code blocks <em>really</em> helps locating the origin of syntax errors.</p></li>
</ul></li>
<li><p><strong>Comment out</strong> offending code.</p>

<ul>
<li><p>If you can't isolate the problem source, start to comment out (and thus temporarily remove) blocks of code.</p></li>
<li><p>As soon as you got rid of the parsing error, you have found the problem source. Look more closely there.</p></li>
<li><p>Sometimes you want to temporarily remove complete function/method blocks. (In case of unmatched curly braces and wrongly indented code.)</p></li>
<li><p>When you can't resolve the syntax issue, try to <strong>rewrite</strong> the commented out sections <strong>from scratch</strong>.</p></li>
</ul></li>
<li><p>As newcomer avoid some of the confusing syntax constructs.</p>

<ul>
<li><p>The ternary <code>? :</code> condition operator can compact code and is useful indeed. But it doesn't aid readability in all cases. Prefer plain <code>if</code> statements while unversed.</p></li>
<li><p>PHPs alternative syntax (<code>if:</code>/<code>elseif:</code>/<code>endif;</code>) is common for templates, but arguably less easy to follow than normal <code>{</code> code <code>}</code> blocks.</p></li>
</ul></li>
<li><p>The most prevalent newcomer mistakes are:</p>

<ul>
<li><p>Missing semicolons <code>;</code> for terminating statements / lines.</p></li>
<li><p>Mismatched string quotes for <code>""</code> or <code>'</code> and unescaped quotes within.</p></li>
<li><p>Forgotten operators, in particular for string <code>.</code> concatenation.</p></li>
<li><p>Unbalanced <code>(</code> parentheses <code>)</code>. Count them in the reported line. Are there an equal number of them?</p></li>
</ul></li>
<li><p>Don't forget that solving one syntax problem can uncover the next.</p>

<ul>
<li><p>If you make one issue go away, but another crops up in some code below, you're mostly on the right path.</p></li>
<li><p>If after editing a new syntax error crops up in the same line, then your attempted change was possibly a failure. (Not always though.)</p></li>
</ul></li>
<li><p>Restore a backup of previously working code, if you can't fix it.</p>

<ul>
<li>Adopt a source code versioning system. You can always view a <code>diff</code> of the broken and last working version. Which might be enlightening as to what the syntax problem is.
<br></li>
</ul></li>
<li><p><strong>Invisible stray unicode characters</strong>: In some cases you need to <a href=""https://stackoverflow.com/questions/28952930/parse-error-syntax-error-unexpected-t-variable/28953112#28953112"">use a hexeditor</a> or different editor/viewer on your source. Some problems cannot be found just from looking at your code.</p>

<ul>
<li><p>Try <a href=""https://stackoverflow.com/questions/3001177/how-do-i-grep-for-all-non-ascii-characters-in-unix""><code>grep --color -P -n ""[\x80-\xFF]"" file.php</code></a> as first measure to find non-ASCII symbols.</p></li>
<li><p>In particular BOMs, zero-width spaces, or non-breaking spaces, and smart quotes regularily can find their way into source code.</p></li>
</ul></li>
<li><p>Take care of which <strong>type of linebreaks</strong> are saved in files. </p>

<ul>
<li><p>PHP just honors <kbd>\n</kbd> newlines, not <kbd>\r</kbd> carriage returns.</p></li>
<li><p>Which is occasionally an issue for MacOS users (even on OS X for misconfigured editors).</p></li>
<li><p>It often only surfaces as issue when single-line <code>//</code> or <code>#</code> comments are used. Multiline <code>/*...*/</code> comments do seldomly disturb the parser when linebreaks get ignored.</p></li>
</ul></li>
<li><p>If your <strong>syntax error does not transmit over the web</strong>:<br>
 It happens that you have a syntax error on your machine. But posting the very same file online does not exhibit it anymore. Which can only mean one of two things:</p>

<ul>
<li><p>You are looking at the wrong file!</p></li>
<li><p>Or your code contained invisible stray Unicode. (See above)<br>
You can easily find out: Just copy your code back from the web form into your text editor.</p></li>
</ul></li>
<li><p>Check your <strong>PHP version</strong>. Not all syntax constructs are available on every server.</p></li>
<li><p>Don't use <a href=""http://www.php.net/reserved.keywords"" rel=""noreferrer"">PHPs reserved keywords</a> as identifiers for functions / methods, classes or constants.</p></li>
<li><p>Trial-and-error is your last resort.</p></li>
</ul>

<p>If all else fails, you can always <strong>google</strong> your error message. Syntax symbols aren't as easy to search for (Stack Overflow itself is indexed by <a href=""http://symbolhound.com/"" rel=""noreferrer"">SymbolHound</a> though). Therefore it may take looking through a few more pages before you find something relevant.</p>

<p>Further guides:</p>

<ul>
<li><a href=""http://www.onlamp.com/pub/a/php/2004/08/12/debuggingphp.html"" rel=""noreferrer"">PHP Debugging Basics</a> by David Sklar</li>
<li><a href=""http://jason.pureconcepts.net/2013/05/fixing-php-errors/"" rel=""noreferrer"">Fixing PHP Errors</a> by Jason McCreary</li>
<li><a href=""http://www.phpreferencebook.com/misc/php-errors-common-mistakes/"" rel=""noreferrer"">PHP Errors – 10 Common Mistakes</a> by Mario Lurig</li>
<li><a href=""http://coursesweb.net/php-mysql/common-php-errors-solution_t"" rel=""noreferrer"">Common PHP Errors and Solutions</a></li>
<li><a href=""http://diythemes.com/thesis/troubleshoot-wordpress-website/"" rel=""noreferrer"">How to Troubleshoot and Fix your WordPress Website</a></li>
<li><a href=""http://coding.smashingmagazine.com/2011/11/30/a-guide-to-php-error-messages-for-designers/"" rel=""noreferrer"">A Guide To PHP Error Messages For Designers</a> - Smashing Magazine</li>
</ul>

<h3>White screen of death</h3>

<p>If your website is just blank, then typically a syntax error is the cause.<br>
Enable their display with:</p>

<ul>
<li><code>error_reporting = E_ALL</code></li>
<li><code>display_errors = 1</code></li>
</ul>

<p>In your <a href=""http://www.php.net/manual/en/configuration.file.php"" rel=""noreferrer""><code>php.ini</code></a> generally,
or via <a href=""http://www.php.net/manual/en/configuration.changes.php"" rel=""noreferrer""><code>.htaccess</code></a> for mod_php,
or even <a href=""http://php.net/manual/en/configuration.file.per-user.php"" rel=""noreferrer""><code>.user.ini</code></a> with FastCGI setups.</p>

<p>Enabling it within the broken script is too late, because PHP can't even interpret/run the first line. A quick workaround is crafting a wrapper script, say <code>test.php</code>:</p>

<pre><code>&lt;?php
   error_reporting(E_ALL);
   ini_set(""display_errors"", 1);
   include(""./broken-script.php"");
</code></pre>

<p>Then invoke the failing code by accessing this wrapper script.</p>

<p>It also helps to enable PHPs <code>error_log</code> and look into your <a href=""http://www.cyberciti.biz/faq/apache-logs/"" rel=""noreferrer"">webservers <code>error.log</code></a> when a script crashes with HTTP 500 responses.</p>
","18050072"
"Formatting a number with leading zeros in PHP","344302","","<p>I have a variable which contains the value <code>1234567</code>.</p>

<p>I would like it to contain exactly 8 digits, i.e. <code>01234567</code>.</p>

<p>Is there a PHP function for that?</p>
","<p>Use <a href=""http://fi2.php.net/manual/en/function.sprintf.php"" rel=""noreferrer""><code>sprintf</code></a> :</p>

<pre><code>sprintf('%08d', 1234567);
</code></pre>

<p>Alternatively you can also use <a href=""http://www.php.net/manual/en/function.str-pad.php"" rel=""noreferrer""><code>str_pad</code></a>:</p>

<pre><code>str_pad($value, 8, '0', STR_PAD_LEFT);
</code></pre>
","1699980"
"What is the best collation to use for MySQL with PHP?","343194","","<p>I'm wondering if there is a ""best"" choice for collation in MySQL for a general website where you aren't 100% sure of what will be entered? I understand that all the encodings should be the same, such as MySQL, Apache, the HTML and anything inside PHP.</p>

<p>In the past I have set PHP to output in ""UTF-8"", but which collation does this match in MySQL? I'm thinking it's one of the UTF-8 ones, but I have used <code>utf8_unicode_ci</code>, <code>utf8_general_ci</code>, and <code>utf8_bin</code> before.</p>
","<p>The main difference is sorting accuracy (when comparing characters in the language) and performance. The only special one is utf8_bin which is for comparing characters in binary format.</p>

<p><code>utf8_general_ci</code> is somewhat faster than <code>utf8_unicode_ci</code>, but less accurate (for sorting). The <em>specific language utf8 encoding</em> (such as <code>utf8_swedish_ci</code>) contain additional language rules that make them the most accurate to sort for those languages. Most of the time I use <code>utf8_unicode_ci</code> (I prefer accuracy to small performance improvements), unless I have a good reason to prefer a specific language.</p>

<p>You can read more on specific unicode character sets on the MySQL manual - <a href=""http://dev.mysql.com/doc/refman/5.0/en/charset-unicode-sets.html"" rel=""noreferrer"">http://dev.mysql.com/doc/refman/5.0/en/charset-unicode-sets.html</a></p>
","367725"
"How do you parse and process HTML/XML in PHP?","341156","","<p>How can one parse HTML/XML and extract information from it?</p>
","<h2>Native XML Extensions</h2>

<p>I prefer using one of the <a href=""http://php.net/manual/en/refs.xml.php"" rel=""noreferrer"">native XML extensions</a> since they come bundled with PHP, are usually faster than all the 3rd party libs and give me all the control I need over the markup. </p>

<h3><a href=""http://php.net/manual/en/book.dom.php"" rel=""noreferrer"">DOM</a></h3>

<blockquote>
  <p>The DOM extension allows you to operate on XML documents through the DOM API with PHP 5. It is an implementation of the W3C's Document Object Model Core Level 3, a platform- and language-neutral interface that allows programs and scripts to dynamically access and update the content, structure and style of documents.</p>
</blockquote>

<p>DOM is capable of parsing and modifying real world (broken) HTML and it can do <a href=""http://schlitt.info/opensource/blog/0704_xpath.html"" rel=""noreferrer"">XPath queries</a>. It is based on <a href=""http://xmlsoft.org/html/libxml-HTMLparser.html"" rel=""noreferrer"">libxml</a>. </p>

<p>It takes some time to get productive with DOM, but that time is well worth it IMO. Since DOM is a language-agnostic interface, you'll find implementations in many languages, so if you need to change your programming language, chances are you will already know how to use that language's DOM API then.</p>

<p>A basic usage example can be found in <a href=""https://stackoverflow.com/questions/3820666/regular-expression-for-grabbing-the-href-attribute-of-an-a-element/3820783#3820783"">Grabbing the href attribute of an A element</a> and a general conceptual overview can be found at <a href=""https://stackoverflow.com/questions/4979836/noob-question-about-domdocument-in-php/4983721#4983721"">DOMDocument in php</a></p>

<p><a href=""https://stackoverflow.com/search?q=DOM+HTML+[PHP]&amp;submit=search"">How to use the DOM extension has been covered extensively on StackOverflow</a>, so if you choose to use it, you can be sure most of the issues you run into can be solved by searching/browsing Stack Overflow.</p>

<h3><a href=""http://php.net/manual/en/book.xmlreader.php"" rel=""noreferrer"">XMLReader</a></h3>

<blockquote>
  <p>The XMLReader extension is an XML pull parser. The reader acts as a cursor going forward on the document stream and stopping at each node on the way. </p>
</blockquote>

<p>XMLReader, like DOM, is based on libxml. I am not aware of how to trigger the HTML Parser Module, so chances are using XMLReader for parsing broken HTML might be less robust than using DOM where you can explicitly tell it to use libxml's HTML Parser Module.</p>

<p>A basic usage example can be found at <a href=""https://stackoverflow.com/questions/3299033/getting-all-values-from-h1-tags-using-php/3299140#3299140"">getting all values from h1 tags using php</a></p>

<h3><a href=""http://php.net/manual/en/book.xml.php"" rel=""noreferrer"">XML Parser</a></h3>

<blockquote>
  <p>This extension lets you create XML parsers and then define handlers for different XML events. Each XML parser also has a few parameters you can adjust.</p>
</blockquote>

<p>The XML Parser library is also based on libxml, and implements a <a href=""http://en.wikipedia.org/wiki/Simple_API_for_XML"" rel=""noreferrer"">SAX</a> style XML push parser. It may be a better choice for memory management than DOM or SimpleXML, but will be more difficult to work with than the pull parser implemented by XMLReader.</p>

<h3><a href=""http://php.net/manual/en/book.simplexml.php"" rel=""noreferrer"">SimpleXml</a></h3>

<blockquote>
  <p>The SimpleXML extension provides a very simple and easily usable toolset to convert XML to an object that can be processed with normal property selectors and array iterators. </p>
</blockquote>

<p>SimpleXML is an option when you know the HTML is valid XHTML. If you need to parse broken HTML, don't even consider SimpleXml because it will choke.</p>

<p>A basic usage example can be found at <a href=""https://stackoverflow.com/questions/4906073/a-simple-program-to-crud-node-and-node-values-of-xml-file"">A simple program to CRUD node and node values of xml file</a> and there is <a href=""http://php.net/manual/en/simplexml.examples-basic.php"" rel=""noreferrer"">lots of additional examples in the PHP Manual</a>.</p>

<hr>

<h2>3rd Party Libraries (libxml based)</h2>

<p>If you prefer to use a 3rd-party lib, I'd suggest using a lib that actually uses <a href=""http://php.net/manual/en/book.dom.php"" rel=""noreferrer"">DOM</a>/<a href=""http://xmlsoft.org/"" rel=""noreferrer"">libxml</a> underneath instead of string parsing.</p>

<h3><a href=""http://www.fluentdom.org"" rel=""noreferrer"">FluentDom</a></h3>

<blockquote>
  <p>FluentDOM provides a jQuery-like fluent XML interface for the DOMDocument in PHP. Selectors are written in XPath or CSS (using a CSS to XPath converter). Current versions extend the DOM implementing standard interfaces and add features from the DOM Living Standard. FluentDOM can load formats like JSON, CSV, JsonML, RabbitFish and others. Can be installed via Composer.</p>
</blockquote>

<h3><a href=""https://github.com/wasinger/htmlpagedom/blob/master/README.md"" rel=""noreferrer"">HtmlPageDom</a></h3>

<blockquote>
  <p>Wa72\HtmlPageDom` is a PHP library for easy manipulation of HTML
  documents using  It requires <a href=""https://github.com/symfony/DomCrawler"" rel=""noreferrer"">DomCrawler from Symfony2
  components</a> for traversing  the
  DOM tree and extends it by adding methods for manipulating the DOM
  tree of HTML documents.</p>
</blockquote>

<h3><a href=""http://code.google.com/p/phpquery/"" rel=""noreferrer"">phpQuery</a> (not updated for years)</h3>

<blockquote>
  <p>phpQuery is a server-side, chainable, CSS3 selector driven Document Object Model (DOM) API based on jQuery JavaScript Library written in PHP5 and provides additional Command Line Interface (CLI). </p>
</blockquote>

<p>Also see: <a href=""https://github.com/electrolinux/phpquery"" rel=""noreferrer"">https://github.com/electrolinux/phpquery</a></p>

<h3><a href=""http://framework.zend.com/manual/current/en/modules/zend.dom.intro.html"" rel=""noreferrer"">Zend_Dom</a></h3>

<blockquote>
  <p>Zend_Dom provides tools for working with DOM documents and structures. Currently, we offer Zend_Dom_Query, which provides a unified interface for querying DOM documents utilizing both XPath and CSS selectors. </p>
</blockquote>

<h3><a href=""http://querypath.org/"" rel=""noreferrer"">QueryPath</a></h3>

<blockquote>
  <p>QueryPath is a PHP library for manipulating XML and HTML. It is designed to work not only with local files, but also with web services and database resources. It implements much of the jQuery interface (including CSS-style selectors), but it is heavily tuned for server-side use.  Can be installed via Composer.</p>
</blockquote>

<h3><a href=""http://github.com/theseer/fDOMDocument"" rel=""noreferrer"">fDOMDocument</a></h3>

<blockquote>
  <p>fDOMDocument extends the standard DOM to use exceptions at all occasions of errors instead of PHP warnings or notices. They also add various custom methods and shortcuts for convenience and to simplify the usage of DOM.</p>
</blockquote>

<h3><a href=""http://sabre.io/xml/"" rel=""noreferrer"">sabre/xml</a></h3>

<blockquote>
  <p>sabre/xml is a library that wraps and extends the XMLReader and XMLWriter classes to create a simple ""xml to object/array"" mapping system and design pattern. Writing and reading XML is single-pass and can therefore be fast and require low memory on large xml files.</p>
</blockquote>

<h3><a href=""https://github.com/servo-php/fluidxml"" rel=""noreferrer"">FluidXML</a></h3>

<blockquote>
  <p>FluidXML is a PHP library for manipulating XML with a concise and fluent API.
  It leverages XPath and the fluent programming pattern to be fun and effective.</p>
</blockquote>

<hr>

<h2>3rd-Party (not libxml-based)</h2>

<p>The benefit of building upon DOM/libxml is that you get good performance out of the box because you are based on a native extension. However, not all 3rd-party libs go down this route.  Some of them listed below</p>

<h3><a href=""http://simplehtmldom.sourceforge.net/manual.htm#section_traverse"" rel=""noreferrer"">PHP Simple HTML DOM Parser</a></h3>

<blockquote>
  <ul>
  <li>An HTML DOM parser written in PHP5+ lets you manipulate HTML in a very easy way!</li>
  <li>Require PHP 5+.</li>
  <li>Supports invalid HTML.</li>
  <li>Find tags on an HTML page with selectors just like jQuery.</li>
  <li>Extract contents from HTML in a single line.</li>
  </ul>
</blockquote>

<p>I generally do not recommend this parser. The codebase is horrible and the parser itself is rather slow and memory hungry. Not all jQuery Selectors (such as <a href=""https://api.jquery.com/child-selector/"" rel=""noreferrer"">child selectors</a>) are possible. Any of the libxml based libraries should outperform this easily.</p>

<h3><a href=""https://github.com/paquettg/php-html-parser"" rel=""noreferrer"">PHP Html Parser</a></h3>

<blockquote>
  <p>PHPHtmlParser is a simple, flexible, html parser which allows you to select tags using any css selector, like jQuery. The goal is to assiste in the development of tools which require a quick, easy way to scrap html, whether it's valid or not! This project was original supported by sunra/php-simple-html-dom-parser but the support seems to have stopped so this project is my adaptation of his previous work.</p>
</blockquote>

<p>Again, I would not recommend this parser. It is rather slow with high CPU usage. There is also no function to clear memory of created DOM objects. These problems scale particularly with nested loops. The documentation itself is inaccurate and misspelled, with no responses to fixes since 14 Apr 16.</p>

<h3><a href=""https://code.google.com/p/ganon/"" rel=""noreferrer"">Ganon</a></h3>

<blockquote>
  <ul>
  <li>A universal tokenizer and HTML/XML/RSS DOM Parser
  
  <ul>
  <li>Ability to manipulate elements and their attributes</li>
  <li>Supports invalid HTML and UTF8</li>
  </ul></li>
  <li>Can perform advanced CSS3-like queries on elements (like jQuery -- namespaces supported) </li>
  <li>A HTML beautifier (like HTML Tidy)
  
  <ul>
  <li>Minify CSS and Javascript</li>
  <li>Sort attributes, change character case, correct indentation, etc. </li>
  </ul></li>
  <li>Extensible
  
  <ul>
  <li>Parsing documents using callbacks based on current character/token</li>
  <li>Operations separated in smaller functions for easy overriding </li>
  </ul></li>
  <li>Fast and Easy </li>
  </ul>
</blockquote>

<p>Never used it. Can't tell if it's any good.</p>

<hr>

<h2>HTML 5</h2>

<p>You can use the above for parsing HTML5, but <a href=""https://stackoverflow.com/questions/4029341/dom-parser-that-allows-html5-style-in-script-tag/4029412"">there can be quirks</a> due to the markup HTML5 allows. So for HTML5 you want to consider using a dedicated parser, like</p>

<p><a href=""https://github.com/html5lib/html5lib-php"" rel=""noreferrer"">html5lib</a></p>

<blockquote>
  <p>A Python and PHP implementations of a HTML parser based on the WHATWG HTML5 specification for maximum compatibility with major desktop web browsers. </p>
</blockquote>

<p>We might see more dedicated parsers once HTML5 is finalized. There is also a blogpost by the W3's titled <a href=""http://www.w3.org/QA/2008/07/html5-parsing-howto.html"" rel=""noreferrer"">How-To for html 5 parsing</a> that is worth checking out.</p>

<hr>

<h2>WebServices</h2>

<p>If you don't feel like programming PHP, you can also use web services. In general, I found very little utility for these, but that's just me and my use cases.</p>

<h3><a href=""http://developer.yahoo.com/yql/guide/running-chapt.html"" rel=""noreferrer"">YQL</a></h3>

<blockquote>
  <p>The YQL Web Service enables applications to query, filter, and combine data from different sources across the Internet. YQL statements have a SQL-like syntax, familiar to any developer with database experience.</p>
</blockquote>

<h3><a href=""http://scraperwiki.com/api/1.0"" rel=""noreferrer"">ScraperWiki</a>.</h3>

<blockquote>
  <p>ScraperWiki's external interface allows you to extract data in the form you want for use on the web or in your own applications. You can also extract information about the state of any scraper.</p>
</blockquote>

<hr>

<h2>Regular Expressions</h2>

<p>Last and <strong>least recommended</strong>, you can extract data from HTML with <a href=""https://stackoverflow.com/search?q=regular%20expression%20tutorials"">regular expressions</a>. In general using Regular Expressions on HTML is discouraged. </p>

<p>Most of the snippets you will find on the web to match markup are brittle. In most cases they are only working for a very particular piece of HTML. Tiny markup changes, like adding whitespace somewhere, or adding or changing attributes in a tag, can make the regex fails when it's not properly written. You should know what you are doing before using regex on HTML.</p>

<p>HTML parsers already know the syntactical rules of HTML. Regular expressions have to be taught for each new regex you write. Regex are fine in some cases, but it really depends on your use-case.</p>

<p>You <a href=""https://stackoverflow.com/questions/4231382/regular-expression-pattern-not-matching-anywhere-in-string/4234491#4234491"">can write more reliable parsers</a>, but writing a <em>complete and reliable</em> custom parser with regular expressions is a waste of time when the aforementioned libraries already exist and do a much better job on this.</p>

<p>Also see <a href=""http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html"" rel=""noreferrer"">Parsing Html The Cthulhu Way</a></p>

<hr>

<h2>Books</h2>

<p>If you want to spend some money, have a look at</p>

<ul>
<li><a href=""http://www.phparch.com/books/phparchitects-guide-to-web-scraping-with-php"" rel=""noreferrer"">PHP Architect's Guide to Webscraping with PHP</a></li>
</ul>

<p>I am not affiliated with PHP Architect or the authors.</p>
","3577662"
"How to check if a string starts with a specified string?","340003","","<p>I'm trying to check if a string starts with <code>http</code>. How can I do this check?</p>

<pre><code>$string1 = 'google.com';
$string2 = 'http://www.google.com';
</code></pre>
","<pre><code>substr( $string_n, 0, 4 ) === ""http""
</code></pre>

<p>If you're trying to make sure it's not another protocol. I'd use <code>http://</code> instead, since https would also match, and other things such as http-protocol.com.</p>

<pre><code>substr( $string_n, 0, 7 ) === ""http://""
</code></pre>

<p>And in general:</p>

<pre><code>substr($string, 0, strlen($query)) === $query
</code></pre>
","2790919"
"How do I get the last inserted ID of a MySQL table in PHP?","337606","","<p>I have a table into which new data is frequently inserted. I need to get the very last ID of the table. How can I do this?</p>

<p>Is it similar to <code>SELECT MAX(id) FROM table</code>?</p>
","<p>If you're using PDO, use <a href=""http://php.net/manual/en/pdo.lastinsertid.php"" rel=""nofollow noreferrer""><code>PDO::lastInsertId</code></a>.</p>

<p>If you're using Mysqli, use <a href=""http://php.net/manual/en/mysqli.insert-id.php"" rel=""nofollow noreferrer""><code>mysqli::$insert_id</code></a>.</p>

<p>If you're still using Mysql:</p>

<blockquote>
  <p><a href=""https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php""><strong>Please, don't use <code>mysql_*</code> functions in new code</strong></a>. They are no longer maintained <a href=""https://wiki.php.net/rfc/mysql_deprecation"" rel=""nofollow noreferrer"">and are officially deprecated</a>. See the <a href=""http://uk.php.net/manual/en/function.mysql-connect.php"" rel=""nofollow noreferrer""><strong>red box</strong></a>? Learn about <a href=""http://en.wikipedia.org/wiki/Prepared_statement"" rel=""nofollow noreferrer""><em>prepared statements</em></a> instead, and use <a href=""http://php.net/pdo"" rel=""nofollow noreferrer"">PDO</a> or <a href=""http://php.net/mysqli"" rel=""nofollow noreferrer"">MySQLi</a> - <a href=""http://php.net/manual/en/mysqlinfo.api.choosing.php"" rel=""nofollow noreferrer"">this article</a> will help you decide which. If you choose PDO, <a href=""http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers"" rel=""nofollow noreferrer"">here is a good tutorial</a>.</p>
</blockquote>

<p><sub>But if you have to, use <a href=""http://php.net/manual/en/function.mysql-insert-id.php"" rel=""nofollow noreferrer""><code>mysql_insert_id</code></a>.</sub></p>
","1685867"
"MySQL: Select only unique values from a column","337578","","<p>I have a MySQL table which contains the following type of information:</p>

<pre><code>    Date            product 
2011-12-12           azd
2011-12-12           yxm
2011-12-10           sdx
2011-12-10           ssdd  
</code></pre>

<p>Here is an example of a script I use to get data from this table:</p>

<pre><code>&lt;?php

$con = mysql_connect(""localhost"",""username"",""password"");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db(""db"", $con);
$sql=mysql_query(""SELECT * FROM buy ORDER BY Date"");
while($row = mysql_fetch_array($sql))
{

 echo ""&lt;li&gt;&lt;a href='http://www.website/"". $row['Date']."".html'&gt;buy "". date(""j, M Y"", strtotime($row[""Date""])).""&lt;/a&gt;&lt;/li&gt;"";

    }
    mysql_close($con);
?&gt; 
</code></pre>

<p>This script displays every date from the table, e.g.</p>

<pre><code>12.dec 2011
12.dec.2011
10.dec.2011
10.dec.2011
</code></pre>

<p>I would like to only display unique dates, e.g.</p>

<pre><code>12.dec.2011
10.dec.2011
</code></pre>
","<p>Use the <a href=""https://dev.mysql.com/doc/refman/5.0/en/distinct-optimization.html"">DISTINCT</a> operator in MySQL:</p>

<pre><code>SELECT DISTINCT(Date) AS Date FROM buy ORDER BY Date DESC;
</code></pre>
","8571928"
"PHP string ""contains""","337380","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/1019169/how-can-i-check-if-a-word-is-contained-in-another-string-using-php"">How can I check if a word is contained in another string using PHP?</a>  </p>
</blockquote>



<p>What would be the most efficient way to check whether a string contains a ""."" or not?</p>

<p>I know you can do this in many different ways like with <a href=""http://en.wikipedia.org/wiki/Regular_expression"" rel=""noreferrer"">regular expressions</a> or loop through the string to see if it contains a dot (""."").</p>
","<pre><code>if (strpos($str, '.') !== FALSE)
{
 echo 'Found it';
}
else
{
 echo 'Not found.';
}
</code></pre>

<p>Note that you need to compare with the <code>!==</code> operator. If you use <code>!=</code> or <code>&lt;&gt;</code> and the <code>'.'</code> is found at position <code>0</code>, hey! <code>0</code> compares equal to <code>FALSE</code> and you lose. This will cause you to point a production website at a development database over the weekend, causing no end of joy when you return monday.</p>
","13577070"
"Remove warning messages in PHP","337187","","<p>I have some PHP code. When I run it, a warning message appears.</p>

<p>How can I remove/suppress/ignore these warning messages?</p>
","<p>You really should fix whatever's causing the warning, but you can control visibility of errors with <a href=""http://fi2.php.net/manual/en/function.error-reporting.php"" rel=""noreferrer"">error_reporting</a>. To skip warning messages, you could use something like:</p>

<pre><code>error_reporting(E_ERROR | E_PARSE);
</code></pre>
","1987588"
"MySQL query to get column names?","334227","","<p>I'd like to get all of a mysql table's col names into an array in php?</p>

<p>Is there a query for this? </p>
","<p>The best way is to use the <a href=""http://dev.mysql.com/doc/refman/5.0/en/information-schema.html"">INFORMATION_SCHEMA</a> metadata virtual database.  Specifically the <a href=""http://dev.mysql.com/doc/refman/5.0/en/columns-table.html"">INFORMATION_SCHEMA.COLUMNS</a> table...</p>

<pre><code>SELECT `COLUMN_NAME` 
FROM `INFORMATION_SCHEMA`.`COLUMNS` 
WHERE `TABLE_SCHEMA`='yourdatabasename' 
    AND `TABLE_NAME`='yourtablename';
</code></pre>

<p>It's VERY powerful, and can give you TONS of information without need to parse text (Such as column type, whether the column is nullable, max column size, character set, etc)...</p>

<p>Oh, and it's standard SQL (Whereas <code>SHOW ...</code> is a MySQL specific extension)...</p>

<p>For more information about the difference between <code>SHOW...</code> and using the <code>INFORMATION_SCHEMA</code> tables, check out the MySQL <a href=""http://dev.mysql.com/doc/refman/5.1/en/information-schema.html"">Documentation on <code>INFORMATION_SCHEMA</code> in general</a>...</p>
","4165253"
"Convert one date format into another in PHP","333406","","<p>Is there a simple way to convert one date format into another date format in PHP?</p>

<p>I have this:</p>

<pre><code>$old_date = date('y-m-d-h-i-s');            // works

$middle = strtotime($old_date);             // returns bool(false)

$new_date = date('Y-m-d H:i:s', $middle);   // returns 1970-01-01 00:00:00
</code></pre>

<p>But I'd of course like it to return a current date rather than the crack 'o dawn. What am I doing wrong?</p>
","<p>The second parameter to <code>date()</code> needs to be a proper timestamp (seconds since January 1, 1970). You are passing a string, which date() can't recognize.</p>

<p>You can use <a href=""http://de.php.net/manual/en/function.strtotime.php"" rel=""noreferrer""><strong>strtotime()</strong></a> to convert a date string into a timestamp. However, even strtotime() doesn't recognize the <code>y-m-d-h-i-s</code> format.</p>

<p><strong>PHP 5.3 and up</strong></p>

<p>Use <a href=""http://php.net/manual/en/datetime.createfromformat.php"" rel=""noreferrer""><code>DateTime::createFromFormat</code></a>. It allows you to specify an exact mask - using the <code>date()</code> syntax - to parse incoming string dates with.</p>

<p><strong>PHP 5.2 and lower</strong></p>

<p>You will have to parse the elements (year, month, day, hour, minute, second) manually using <code>substr()</code> and hand the results to <a href=""http://de.php.net/manual/en/function.mktime.php"" rel=""noreferrer""><strong>mktime()</strong></a> that will build you a timestamp. </p>

<p>But that's a lot of work! I recommend using a different format that strftime() can understand. strftime() understands <em>any</em>  date input short of <code>the next time joe will slip on the ice</code>. for example, this works:</p>

<pre><code>$old_date = date('l, F d y h:i:s');              // returns Saturday, January 30 10 02:06:34
$old_date_timestamp = strtotime($old_date);
$new_date = date('Y-m-d H:i:s', $old_date_timestamp);   
</code></pre>
","2167925"
"Correct file permissions for WordPress","332922","","<p>I've had a look over <a href=""http://codex.wordpress.org/Changing_File_Permissions"">here</a> but didn't find any details on the best file permissions.  I also took a look at some of WordPress's form's questions over <a href=""http://wordpress.org/support/topic/what-are-correct-file-permissions-1"">here too</a> but anybody that suggests 777 obviously needs a little lesson in security.</p>

<p>In short my question is this.  What permissions should I have for the following:</p>

<ol>
<li>root folder storing all the WordPress content</li>
<li>wp-admin</li>
<li>wp-content</li>
<li>wp-includes</li>
</ol>

<p>and then all the files in each of those folders?</p>
","<p>When you setup WP you (the webserver) may need write access to the files. So the access rights may need to be loose.</p>

<pre class=""lang-sh prettyprint-override""><code>chown www-data:www-data  -R * # Let Apache be owner
find . -type d -exec chmod 755 {} \;  # Change directory permissions rwxr-xr-x
find . -type f -exec chmod 644 {} \;  # Change file permissions rw-r--r--
</code></pre>

<p><strong>After the setup you <em>should</em> tighten the access rights</strong>, according to <a href=""http://codex.wordpress.org/Hardening_WordPress"" rel=""noreferrer"">Hardening WordPress</a> all files except for wp-content should be writable by your user account only. wp-content must be writable by <em>www-data</em> too.</p>

<pre class=""lang-sh prettyprint-override""><code>chown &lt;username&gt;:&lt;username&gt;  -R * # Let your useraccount be owner
chown www-data:www-data wp-content # Let apache be owner of wp-content
</code></pre>

<p>Maybe you want to change the contents in wp-content later on. In this case you could</p>

<ul>
<li>temporarily change to the user to <em>www-data</em> with <code>su</code>,</li>
<li>give wp-content group write access 775 and join the group <em>www-data</em> or </li>
<li>give your user the access rights to the folder using <a href=""https://wiki.archlinux.org/index.php/Access_Control_Lists"" rel=""noreferrer"">ACLs</a>.</li>
</ul>

<p>Whatever you do, make sure the files have rw permissions for <em>www-data</em>.</p>
","23755604"
"How can I get the current page's full URL on a Windows/IIS server?","331604","","<p>I moved a <a href=""http://en.wikipedia.org/wiki/WordPress"" rel=""noreferrer"">WordPress</a> installation to a new folder on a Windows/<a href=""http://en.wikipedia.org/wiki/Internet_Information_Services"" rel=""noreferrer"">IIS</a> server. I'm setting up 301 redirects in PHP, but it doesn't seem to be working. My post URLs have the following format:</p>

<pre class=""lang-none prettyprint-override""><code>http:://www.example.com/OLD_FOLDER/index.php/post-title/
</code></pre>

<p>I can't figure out how to grab the <code>/post-title/</code> part of the URL.</p>

<p><code>$_SERVER[""REQUEST_URI""]</code> - which everyone seems to recommend - is returning an empty string. <code>$_SERVER[""PHP_SELF""]</code> is just returning <code>index.php</code>. Why is this, and how can I fix it?</p>
","<p>Maybe, because you are under IIS,     </p>

<pre><code>$_SERVER['PATH_INFO']
</code></pre>

<p>is what you want, based on the URLs you used to explain.</p>

<p>For Apache, you'd use <code>$_SERVER['REQUEST_URI']</code>.</p>
","189125"
"PHP 5 disable strict standards error","330817","","<p>I need to setup my PHP script at the top to disable error reporting for strict standards.</p>

<p>Can anybody help ?</p>
","<p>Do you want to disable error reporting, or just prevent the user from seeing it? It’s usually a good idea to log errors, even on a production site.</p>

<pre><code># in your PHP code:
ini_set('display_errors', '0');     # don't show any errors...
error_reporting(E_ALL | E_STRICT);  # ...but do log them
</code></pre>

<p>They will be logged to your standard system log, or use the <code>error_log</code> directive to specify exactly where you want errors to go.</p>
","1248996"
"Call to a member function on a non-object","330787","","<p>So I'm refactoring my code to implement more OOP.  I set up a class to hold page attributes.</p>

<pre><code>class PageAtrributes 
{
  private $db_connection;
  private $page_title;

    public function __construct($db_connection) 
    {
        $this-&gt;db_connection = $db_connection;
        $this-&gt;page_title = '';
    }

    public function get_page_title()
    {
        return $this-&gt;page_title;
    }

    public function set_page_title($page_title)
    {
        $this-&gt;page_title = $page_title;
    }
}
</code></pre>

<p>Later on I call the set_page_title() function like so</p>

<pre><code>function page_properties($objPortal) {    
    $objPage-&gt;set_page_title($myrow['title']);
}
</code></pre>

<p>When I do I receive the error message:</p>

<blockquote>
  <p>Call to a member function set_page_title() on a non-object</p>
</blockquote>

<p>So what am I missing?</p>
","<p>It means that <code>$objPage</code> is not an instance of an object.  Can we see the code you used to initialize the variable?</p>

<p>As you expect a specific object type, you can also make use of <a href=""http://php.net/manual/en/functions.arguments.php#functions.arguments.type-declaration"" rel=""noreferrer"">PHPs type-hinting feature<sup><em>Docs</em></sup></a> to get the error when your logic is violated:</p>

<pre><code>function page_properties(PageAtrributes $objPortal) {    
    ...
    $objPage-&gt;set_page_title($myrow['title']);
}
</code></pre>

<p>This function will only accept <code>PageAtrributes</code> for the first parameter.</p>
","54572"
"select count(*) from table of mysql in php","330643","","<p>I am able to get both the value and row of the mysql query result.</p>

<p>But I am struggling to get the single output of a query. e.g.:</p>

<pre><code>$result = mysql_query(""SELECT COUNT(*) FROM Students;"");
</code></pre>

<p>I need the result to display. But I am not getting the result.</p>

<p>I have tried with the following methods:</p>

<ol>
<li><code>mysql_fetch_assoc()</code></li>
<li><code>mysql_free_result()</code></li>
<li><code>mysql_fetch_row()</code></li>
</ol>

<p>But I didn't succeed to display (get) the actual value.</p>
","<p>You need to alias the aggregate using the <code>as</code> keyword in order to call it from <code>mysql_fetch_assoc</code></p>

<pre><code>$result=mysql_query(""SELECT count(*) as total from Students"");
$data=mysql_fetch_assoc($result);
echo $data['total'];
</code></pre>
","6907776"
"How do you debug PHP scripts?","329933","","<p>How do you debug <strong>PHP</strong> scripts?</p>

<p>I am aware of basic debugging such as using the Error Reporting. The breakpoint debugging in <strong>PHPEclipse</strong> is also quite useful.</p>

<p>What is the <strong>best</strong> (in terms of fast and easy) way to debug in phpStorm or any other IDE?</p>
","<p>Try <a href=""https://eclipse.org/pdt/"" rel=""noreferrer"">Eclipse PDT</a> to setup an Eclipse environment that has debugging features like you mentioned. The ability to step into the code is a much better way to debug then the old method of var_dump and print at various points to see where your flow goes wrong. When all else fails though and all I have is SSH and vim I still <code>var_dump()</code>/<code>die()</code> to find where the code goes south.</p>
","890"
"How to get parameters from a URL string?","327513","","<p>I have a HTML form field <code>$_POST[""url""]</code> having  some URL strings as the value.
Example values are:</p>

<pre>
https://example.com/test/1234?email=xyz@test.com
https://example.com/test/1234?basic=2&email=xyz2@test.com
https://example.com/test/1234?email=xyz3@test.com
https://example.com/test/1234?email=xyz4@test.com&testin=123
https://example.com/test/the-page-here/1234?someurl=key&email=xyz5@test.com
</pre>

<p>etc.</p>

<p>How can I get only the <code>email</code> parameter from these URLs/values?</p>

<p>Please note that I am not getting these strings from browser address bar.</p>
","<p>You can use the <a href=""http://php.net/manual/en/function.parse-url.php"" rel=""noreferrer""><code>parse_url()</code></a> and <a href=""http://php.net/manual/en/function.parse-str.php"" rel=""noreferrer""><code>parse_str()</code></a> for that.</p>

<pre><code>$parts = parse_url($url);
parse_str($parts['query'], $query);
echo $query['email'];
</code></pre>

<p>If you want to get the <code>$url</code> dynamically with PHP, take a look at this question: </p>

<p><a href=""https://stackoverflow.com/questions/6768793/get-the-full-url-in-php"">Get the full URL in PHP</a></p>
","11480852"
"using jquery $.ajax to call a PHP function","327332","","<p>This may be a simple answer, but I'm using jquery's $.ajax to call a PHP script. What i want to do is basically put that PHP script inside a function and call the PHP function from javascript. </p>

<pre><code>&lt;?php 
if(isset($_POST['something'] {
    //do something
}
?&gt;
</code></pre>

<p>to this</p>

<pre><code>&lt;?php
function test() {
    if(isset($_POST['something'] {
         //do something. 
    }
}
?&gt;
</code></pre>

<p>How would i call that function in javascript? Right now i'm just using $.ajax with the PHP file listed. </p>
","<p>Use <code>$.ajax</code> to call a server context (or URL, or whatever) to invoke a particular 'action'.  What you want is something like:</p>

<pre><code>$.ajax({ url: '/my/site',
         data: {action: 'test'},
         type: 'post',
         success: function(output) {
                      alert(output);
                  }
});
</code></pre>

<p>On the server side, the <code>action</code> POST parameter should be read and the corresponding value should point to the method to invoke, e.g.:</p>

<pre><code>if(isset($_POST['action']) &amp;&amp; !empty($_POST['action'])) {
    $action = $_POST['action'];
    switch($action) {
        case 'test' : test();break;
        case 'blah' : blah();break;
        // ...etc...
    }
}
</code></pre>

<p>I believe that's a simple incarnation of the <a href=""http://en.wikipedia.org/wiki/Command_pattern"" rel=""noreferrer"">Command pattern</a>.</p>
","2269397"
"How to increase maximum execution time in php","326648","","<p>I want to increase <em>maximum execution time</em> in php , not by changing <code>php.ini</code> file. </p>

<p>I want to Increase it from my php file.</p>

<p>Is this possible?</p>
","<pre><code>ini_set('max_execution_time', 300); //300 seconds = 5 minutes
</code></pre>

<p>Place this at the top of your PHP script and let your script loose!</p>

<p>Taken from <a href=""http://davidwalsh.name/increase-php-script-execution-time-limit-ini_set"">Increase PHP Script Execution Time Limit Using ini_set()</a></p>
","16171228"
"Fatal error: Uncaught Error: Call to undefined function mysql_connect()","326213","","<p>I am trying to do a simple connection with XAMPP and sql server.
but when ever I try to enter data or connect to the database, I get this error.</p>

<blockquote>
  <p>Fatal error: Uncaught Error: Call to undefined function mysql_connect() in C:\xampp\htdocs\register.php:22<br>
  Stack trace: #0 {main} thrown in C:\xampp\htdocs\register.php on line 22</p>
</blockquote>

<p>Example of line 22:</p>

<pre><code>$db = mysql_connect($mysql_hostname , $mysql_username) 
</code></pre>
","<p><strong>mysql_*</strong> functions have been removed in PHP7!</p>

<p>You probably have a php7 in XAMPP
Please use PDO and... Feel the power of the light side:)</p>

<p>Link to nice wiki page about :)</p>

<p><a href=""http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers"">PDO</a></p>
","34579855"
"move_uploaded_file gives ""failed to open stream: Permission denied "" error after all configurations I did","325989","","<p>I keep getting this error when trying to configure the upload directory with Apache 2.2 and PHP 5.3 on CentOS.</p>

<p>In php.ini:</p>

<pre><code>upload_tmp_dir = /var/www/html/mysite/tmp_file_upload/
</code></pre>

<p>In httpd.conf:</p>

<pre><code>Directory /var/www/html/mysite/tmp_file_upload/&gt;
    Options  -Indexes
    AllowOverride None
    Order allow,deny
    Allow from all
&lt;/Directory&gt;
&lt;Directory /var/www/html/mysite/images/&gt;
                Options -Indexes
&lt;/Directory&gt;
</code></pre>

<p>CentOS directory permissions:</p>

<pre><code>drwxrwxr-x 2 root root 4096 Nov 11 10:01 images
drwxr-xr-x 2 root root 4096 Nov 12 04:54 tmp_file_upload
</code></pre>

<p>No matter what I do, I keep getting this error from PHP when I upload the file:</p>

<blockquote>
  <p>Warning: move_uploaded_file(images/robot.jpg): failed to open stream: Permission denied in /var/www/html/mysite/process.php on line 78</p>
  
  <p>Warning: move_uploaded_file(): Unable to move '/tmp/phpsKD2Qm' to 'images/robot.jpg' in /var/www/html/mysite/process.php on line 78</p>
</blockquote>

<p>As you can see, it never did take the configuration from the php.ini file regarding the upload file.</p>

<p>What am I doing wrong here?</p>
","<p>This is because <code>images</code> and <code>tmp_file_upload</code> are only writable by <code>root</code> user. For upload to work we need to make the owner of those folders same as httpd process owner OR make them globally writable (bad practice).</p>

<ol>
<li>Check apache process owner: <code>$ps aux | grep httpd</code>. The first column will be the owner typically it will be <code>nobody</code></li>
<li><p>Change the owner of <code>images</code> and <code>tmp_file_upload</code> to be become <code>nobody</code> or whatever the owner you found in step 1.</p>

<pre><code>$sudo chown nobody /var/www/html/mysite/images/

$sudo chown nobody /var/www/html/mysite/tmp_file_upload/
</code></pre></li>
<li><p>Chmod <code>images</code> and <code>tmp_file_upload</code> now to be writable by the owner, if needed [Seems you already have this in place]. Mentioned in @Dmitry Teplyakov answer.</p>

<pre><code>$ sudo chmod -R 0755 /var/www/html/mysite/images/

$ sudo chmod -R 0755 /var/www/html/mysite/tmp_file_upload/
</code></pre></li>
<li><p>For more details why this behavior happend, check the manual <a href=""http://php.net/manual/en/ini.core.php#ini.upload-tmp-dir"" rel=""noreferrer"">http://php.net/manual/en/ini.core.php#ini.upload-tmp-dir</a> , note that it also talking about <code>open_basedir</code> directive.</p></li>
</ol>
","8104498"
"HTTPS and SSL3_GET_SERVER_CERTIFICATE:certificate verify failed, CA is OK","325108","","<p>I am using <a href=""http://www.apachefriends.org"" rel=""noreferrer"">XAMPP</a> for development. Recently I upgraded my installation of xampp from an old version to 1.7.3. </p>

<p>Now when I curl HTTPS enabled sites I get the following exception</p>

<blockquote>
  <p>Fatal error: Uncaught exception 'RequestCore_Exception' with message
  'cURL resource: Resource
      id #55; cURL error: SSL certificate problem, verify that the CA cert is OK. Details:
      error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed (60)'</p>
</blockquote>

<p>Everyone suggest using some specific curl options from PHP code to fix this problem. I think this shouldn't be the way. Because I didn't have any problem with my old version of XAMPP and happened only after installing the new version. </p>

<p>I need help to figure out what settings change in my PHP installation, Apache etc can fix this problem.</p>
","<p>curl used to include a list of accepted CAs, but no longer bundles ANY CA certs. So by default it'll reject all SSL certificates as unverifiable.</p>

<p>You'll have to get your CA's cert and point curl at it. More details at cURLS's <a href=""https://curl.haxx.se/docs/sslcerts.html"" rel=""noreferrer"">Details on Server SSL Certificates</a>.</p>
","6400746"
"Pretty-Printing JSON with PHP","322671","","<p>I'm building a PHP script that feeds JSON data to another script. My script builds data into a large associative array, and then outputs the data using <code>json_encode</code>. Here is an example script:</p>

<pre><code>$data = array('a' =&gt; 'apple', 'b' =&gt; 'banana', 'c' =&gt; 'catnip');
header('Content-type: text/javascript');
echo json_encode($data);
</code></pre>

<p>The above code yields the following output:</p>

<pre><code>{""a"":""apple"",""b"":""banana"",""c"":""catnip""}
</code></pre>

<p>This is great if you have a small amount of data, but I'd prefer something along these lines: </p>

<pre><code>{
    ""a"": ""apple"",
    ""b"": ""banana"",
    ""c"": ""catnip""
}
</code></pre>

<p>Is there a way to do this in PHP without an ugly hack? It seems like someone at <a href=""https://graph.facebook.com/19292868552"" rel=""noreferrer"">Facebook</a> figured it out.</p>
","<p>PHP 5.4 offers the <code>JSON_PRETTY_PRINT</code> option for use with the <code>json_encode()</code> call.</p>

<p><a href=""http://php.net/manual/en/function.json-encode.php"" rel=""nofollow noreferrer"">http://php.net/manual/en/function.json-encode.php</a></p>

<pre><code>&lt;?php
...
$json_string = json_encode($data, JSON_PRETTY_PRINT);
</code></pre>
","9120871"
"php test if number is odd or even","321720","","<p>What is the simplest most basic way to find out if a number/variable is odd or even in PHP?
Is it something to do with mod?</p>

<p>I've tried a few scripts but.. google isn't delivering at the moment.</p>
","<p>You were right in thinking mod was a good place to start.  Here is an expression which will return true if <code>$number</code> is even, false if odd:</p>

<pre><code>$number % 2 == 0
</code></pre>

<p>Works for every <a href=""http://php.net/manual/en/language.types.integer.php"">integer<sup><em>PHP</em></sup></a> value, see as well <a href=""http://php.net/manual/en/language.operators.arithmetic.php"">Arithmetic Operators<sup><em>PHP</em></sup></a>.</p>

<p><strong>Example:</strong></p>

<pre><code>$number = 20;
if ($number % 2 == 0) {
  print ""It's even"";
}
</code></pre>

<p>Output:</p>

<blockquote>
  <p>It's even</p>
</blockquote>
","7959256"
"Check if PHP session has already started","320519","","<p>I have a PHP file that is sometimes called from a page that has started a session and sometimes from a page that doesn't have session started. Therefore when I have <code>session_start()</code> on this script I sometimes get the error message for ""session already started"". For that I've put these lines:</p>

<pre><code>if(!isset($_COOKIE[""PHPSESSID""]))
{
  session_start();
}
</code></pre>

<p>but this time I got this warning message:</p>

<blockquote>
  <p>Notice: Undefined variable: _SESSION </p>
</blockquote>

<p>Is there a better way to check if session has already started?</p>

<p>If I use <code>@session_start</code> will it make things work properly and just shut up the warnings?</p>
","<p>Recommended way for versions of <strong>PHP >= 5.4.0</strong></p>

<pre><code>if (session_status() == PHP_SESSION_NONE) {
    session_start();
}
</code></pre>

<p>Source: <a href=""http://www.php.net/manual/en/function.session-status.php"">http://www.php.net/manual/en/function.session-status.php</a></p>

<p>For versions of <strong>PHP &lt; 5.4.0</strong></p>

<pre><code>if(session_id() == '') {
    session_start();
}
</code></pre>
","18542272"
"Compare given date with today","319519","","<p>I have following</p>

<pre><code>$var = ""2010-01-21 00:00:00.0""
</code></pre>

<p>I'd like to compare this date against today's date (i.e. I'd like to know if this <code>$var</code> is  before today or equals today or not)</p>

<p>What function would I need to use?</p>
","<pre><code>strtotime($var);
</code></pre>

<p>Turns it into a time value</p>

<pre><code>time() - strtotime($var);
</code></pre>

<p>Gives you the seconds since <code>$var</code></p>

<pre><code>if((time()-(60*60*24)) &lt; strtotime($var))
</code></pre>

<p>Will check if <code>$var</code> has been within the last day.</p>
","2113951"
"Get table column names in mysql?","314825","","<p>Is there a way to grab the columns name of a table in mysql?
using php</p>
","<p>You can use <a href=""http://dev.mysql.com/doc/refman/5.1/en/describe.html"" rel=""noreferrer"">DESCRIBE</a>:</p>

<pre><code>DESCRIBE my_table;
</code></pre>

<p>Or in newer versions you can use <a href=""http://dev.mysql.com/doc/refman/5.0/en/columns-table.html"" rel=""noreferrer"">INFORMATION_SCHEMA</a>:</p>

<pre><code>SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = 'my_database' AND TABLE_NAME = 'my_table';
</code></pre>

<p>Or you can use <a href=""http://dev.mysql.com/doc/refman/5.0/en/show-columns.html"" rel=""noreferrer"">SHOW COLUMNS</a>:</p>

<pre><code>SHOW COLUMNS FROM my_table;
</code></pre>
","1526722"
"Detecting request type in PHP (GET, POST, PUT or DELETE)","314739","","<p>How can I detect which request type was used (GET, POST, PUT or DELETE) in PHP?</p>
","<p>By using</p>

<pre><code>$_SERVER['REQUEST_METHOD']
</code></pre>

<h3>Example</h3>

<pre><code>if ($_SERVER['REQUEST_METHOD'] === 'POST') {
     // The request is using the POST method
}
</code></pre>

<p>For more details please see the <a href=""http://php.net/manual/en/reserved.variables.server.php"" rel=""noreferrer"">documentation for the $_SERVER variable</a>.</p>
","359050"
"Remove new lines from string","313068","","<pre><code>$string = ""
put returns between paragraphs

for linebreak add 2 spaces at end

"";
</code></pre>

<p>Want to remove all new lines from string.</p>

<p>I've this regex, it can catch all of them, the problem is I don't know with which function should I use it.</p>

<pre><code>/\r\n|\r|\n/
</code></pre>

<p><code>$string</code> should become:</p>

<pre><code>$string = ""put returns between paragraphs for linebreak add 2 spaces at end "";
</code></pre>
","<p>You have to be cautious of double line breaks, which would cause double spaces. Use this really efficient regular expression:</p>

<pre><code>$string = trim(preg_replace('/\s\s+/', ' ', $string));
</code></pre>

<p>Multiple spaces and newlines are replaced with a single space.</p>

<p><strong>Edit:</strong> As others have pointed out, this solution has issues matching single newlines in between words. This is not present in the example, but one can easily see how that situation could occur. An alternative is to do the following:</p>

<pre><code>$string = trim(preg_replace('/\s+/', ' ', $string));
</code></pre>
","3760830"
"How to convert array to SimpleXML","310899","","<p>How can I convert an array to a SimpleXML object in PHP?</p>
","<p>a short one:</p>

<pre><code>&lt;?php

$test_array = array (
  'bla' =&gt; 'blub',
  'foo' =&gt; 'bar',
  'another_array' =&gt; array (
    'stack' =&gt; 'overflow',
  ),
);
$xml = new SimpleXMLElement('&lt;root/&gt;');
array_walk_recursive($test_array, array ($xml, 'addChild'));
print $xml-&gt;asXML();
</code></pre>

<p>results in</p>

<pre><code>&lt;?xml version=""1.0""?&gt;
&lt;root&gt;
  &lt;blub&gt;bla&lt;/blub&gt;
  &lt;bar&gt;foo&lt;/bar&gt;
  &lt;overflow&gt;stack&lt;/overflow&gt;
&lt;/root&gt;
</code></pre>

<p>keys and values are swapped - you could fix that with <code>array_flip()</code> before the array_walk. <code>array_walk_recursive</code> requires PHP 5. you could use <code>array_walk</code> instead, but you won't get <code>'stack' =&gt; 'overflow'</code> in the xml then.</p>
","1397164"
"How do you use bcrypt for hashing passwords in PHP?","310744","","<p>Every now and then I hear the advice ""Use bcrypt for storing passwords in PHP, bcrypt rules"".</p>

<p>But what is <code>bcrypt</code>? PHP doesn't offer any such functions, Wikipedia babbles about a file-encryption utility and Web searches just reveal a few implementations of <a href=""http://en.wikipedia.org/wiki/Blowfish_%28cipher%29"" rel=""noreferrer"">Blowfish</a> in different languages. Now Blowfish is also available in PHP via <code>mcrypt</code>, but how does that help with storing passwords? Blowfish is a general purpose cipher, it works two ways. If it could be encrypted, it can be decrypted. Passwords need a one-way hashing function.</p>

<p>What is the explanation?</p>
","<p><code>bcrypt</code> is a hashing algorithm which is scalable with hardware (via a configurable number of rounds). Its slowness and multiple rounds ensures that an attacker must deploy massive funds and hardware to be able to crack your passwords. Add to that per-password <a href=""https://en.wikipedia.org/wiki/Salt_%28cryptography%29"" rel=""noreferrer"">salts</a> (<code>bcrypt</code> REQUIRES salts) and you can be sure that an attack is virtually unfeasible without either ludicrous amount of funds or hardware.</p>

<p><code>bcrypt</code> uses the <em>Eksblowfish</em> algorithm to hash passwords. While the encryption phase of <em>Eksblowfish</em> and <em>Blowfish</em> are exactly the same, the key schedule phase of <em>Eksblowfish</em> ensures that any subsequent state depends on both salt and key (user password), and no state can be precomputed without the knowledge of both. <strong>Because of this key difference, <code>bcrypt</code> is a one-way hashing algorithm.</strong> You cannot retrieve the plain text password without already knowing the salt, rounds <strong>and key</strong> (password). [<a href=""http://www.usenix.org/events/usenix99/provos/provos_html/node4.html"" rel=""noreferrer"">Source</a>]</p>

<h1>How to use bcrypt:</h1>

<h2>Using PHP >= 5.5-DEV</h2>

<p>Password hashing functions <a href=""http://php.net/password_hash"" rel=""noreferrer"">have now been built directly into PHP >= 5.5</a>. You may now use <a href=""http://php.net/password_hash"" rel=""noreferrer""><code>password_hash()</code></a> to create a <code>bcrypt</code> hash of any password:</p>

<pre><code>&lt;?php
// Usage 1:
echo password_hash('rasmuslerdorf', PASSWORD_DEFAULT).""\n"";
// $2y$10$xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
// For example:
// $2y$10$.vGA1O9wmRjrwAVXD98HNOgsNpDczlqm3Jq7KnEd1rVAGv3Fykk1a

// Usage 2:
$options = [
  'cost' =&gt; 11
];
echo password_hash('rasmuslerdorf', PASSWORD_BCRYPT, $options).""\n"";
// $2y$11$6DP.V0nO7YI3iSki4qog6OQI5eiO6Jnjsqg7vdnb.JgGIsxniOn4C
</code></pre>

<p>To verify a user provided password against an existing hash, you may use the <a href=""http://php.net/password_verify"" rel=""noreferrer""><code>password_verify()</code></a> as such:</p>

<pre><code>&lt;?php
// See the password_hash() example to see where this came from.
$hash = '$2y$07$BCryptRequires22Chrcte/VlQH0piJtjXl.0t1XkA8pw9dMXTpOq';

if (password_verify('rasmuslerdorf', $hash)) {
    echo 'Password is valid!';
} else {
    echo 'Invalid password.';
}
</code></pre>

<h2>Using PHP >= 5.3.7, &lt; 5.5-DEV (also RedHat PHP >= 5.3.3)</h2>

<p>There is a <a href=""https://github.com/ircmaxell/password_compat"" rel=""noreferrer"">compatibility library</a> on <a href=""http://en.wikipedia.org/wiki/GitHub"" rel=""noreferrer"">GitHub</a> created based on the source code of the above functions originally written in C, which  provides the same functionality. Once the compatibility library is installed, usage is the same as above (minus the shorthand array notation if you are still on the 5.3.x branch).</p>

<h2>Using PHP &lt; 5.3.7 <em>(DEPRECATED)</em></h2>

<p>You can use <code>crypt()</code> function to generate bcrypt hashes of input strings. This class can automatically generate salts and verify existing hashes against an input. <strong>If you are using a version of PHP higher or equal to 5.3.7, it is highly recommended you use the built-in function or the compat library</strong>. This alternative is provided only for historical purposes.</p>

<pre><code>class Bcrypt
{
  private $rounds;

  public function __construct($rounds = 12)
  {
    if (CRYPT_BLOWFISH != 1) {
      throw new Exception(""bcrypt not supported in this installation. See http://php.net/crypt"");
    }

    $this-&gt;rounds = $rounds;
  }

  public function hash($input)
  {
    $hash = crypt($input, $this-&gt;getSalt());

    if (strlen($hash) &gt; 13)
      return $hash;

    return false;
  }

  public function verify($input, $existingHash)
  {
    $hash = crypt($input, $existingHash);

    return $hash === $existingHash;
  }

  private function getSalt()
  {
    $salt = sprintf('$2a$%02d$', $this-&gt;rounds);

    $bytes = $this-&gt;getRandomBytes(16);

    $salt .= $this-&gt;encodeBytes($bytes);

    return $salt;
  }

  private $randomState;
  private function getRandomBytes($count)
  {
    $bytes = '';

    if (function_exists('openssl_random_pseudo_bytes') &amp;&amp;
        (strtoupper(substr(PHP_OS, 0, 3)) !== 'WIN')) { // OpenSSL is slow on Windows
      $bytes = openssl_random_pseudo_bytes($count);
    }

    if ($bytes === '' &amp;&amp; is_readable('/dev/urandom') &amp;&amp;
       ($hRand = @fopen('/dev/urandom', 'rb')) !== FALSE) {
      $bytes = fread($hRand, $count);
      fclose($hRand);
    }

    if (strlen($bytes) &lt; $count) {
      $bytes = '';

      if ($this-&gt;randomState === null) {
        $this-&gt;randomState = microtime();
        if (function_exists('getmypid')) {
          $this-&gt;randomState .= getmypid();
        }
      }

      for ($i = 0; $i &lt; $count; $i += 16) {
        $this-&gt;randomState = md5(microtime() . $this-&gt;randomState);

        if (PHP_VERSION &gt;= '5') {
          $bytes .= md5($this-&gt;randomState, true);
        } else {
          $bytes .= pack('H*', md5($this-&gt;randomState));
        }
      }

      $bytes = substr($bytes, 0, $count);
    }

    return $bytes;
  }

  private function encodeBytes($input)
  {
    // The following is code from the PHP Password Hashing Framework
    $itoa64 = './ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';

    $output = '';
    $i = 0;
    do {
      $c1 = ord($input[$i++]);
      $output .= $itoa64[$c1 &gt;&gt; 2];
      $c1 = ($c1 &amp; 0x03) &lt;&lt; 4;
      if ($i &gt;= 16) {
        $output .= $itoa64[$c1];
        break;
      }

      $c2 = ord($input[$i++]);
      $c1 |= $c2 &gt;&gt; 4;
      $output .= $itoa64[$c1];
      $c1 = ($c2 &amp; 0x0f) &lt;&lt; 2;

      $c2 = ord($input[$i++]);
      $c1 |= $c2 &gt;&gt; 6;
      $output .= $itoa64[$c1];
      $output .= $itoa64[$c2 &amp; 0x3f];
    } while (true);

    return $output;
  }
}
</code></pre>

<p>You can use this code like this:</p>

<pre><code>$bcrypt = new Bcrypt(15);

$hash = $bcrypt-&gt;hash('password');
$isGood = $bcrypt-&gt;verify('password', $hash);
</code></pre>

<p>Alternatively, you may also use the <a href=""http://www.openwall.com/phpass/"" rel=""noreferrer"">Portable PHP Hashing Framework</a>.</p>
","6337021"
"Sending POST data in Android","307138","","<p>I'm experienced with PHP, JavaScript and a lot of other scripting languages, but I don't have a lot of experience with Java or Android.</p>

<p>I'm looking for a way to send <strong>POST</strong> data to a PHP script and display the result.                </p>
","<p><strong>* (Re) Updated Answer which works on Android 6.0*</strong></p>

<pre><code>    public class CallAPI extends AsyncTask&lt;String, String, String&gt; {

        public CallAPI(){
            //set context variables if required
        }

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
        }


         @Override
         protected void doInBackground(String... params) {

            String urlString = params[0]; // URL to call

            String data = params[1]; //data to post

            OutputStream out = null;
            try {

                URL url = new URL(urlString);

                HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

                out = new BufferedOutputStream(urlConnection.getOutputStream());

                BufferedWriter writer = new BufferedWriter (new OutputStreamWriter(out, ""UTF-8""));

                writer.write(data);

                writer.flush();

                writer.close();

                out.close();

                urlConnection.connect();


            } catch (Exception e) {

                System.out.println(e.getMessage());



            }

        }
    }
</code></pre>

<p>References: </p>

<ul>
<li><a href=""https://developer.android.com/reference/java/net/HttpURLConnection.html"" rel=""noreferrer"">https://developer.android.com/reference/java/net/HttpURLConnection.html</a></li>
<li><a href=""https://stackoverflow.com/questions/9767952/how-to-add-parameters-to-httpurlconnection-using-post"">How to add parameters to HttpURLConnection using POST</a></li>
</ul>

<p><strong><em>Older Answer</em></strong></p>

<p><strong><em>Note: This solution is outdated. It only works on Android devices up to 5.1. Android 6.0 and above do not include the Apache http client used in this answer.</em></strong></p>

<p>Http Client from Apache Commons is the way to go. It is already included in android. Here's a simple example of how to do HTTP Post using it.</p>

<pre><code>public void postData() {
    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(""http://www.yoursite.com/script.php"");

    try {
        // Add your data
        List&lt;NameValuePair&gt; nameValuePairs = new ArrayList&lt;NameValuePair&gt;(2);
        nameValuePairs.add(new BasicNameValuePair(""id"", ""12345""));
        nameValuePairs.add(new BasicNameValuePair(""stringdata"", ""Hi""));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }
} 
</code></pre>
","2938787"
"How to solve PHP error 'Notice: Array to string conversion in...'","306593","","<p>I have a PHP file that tries to echo a <code>$_POST</code> and I get an error, here is the code:</p>

<pre><code>echo ""&lt;html&gt;"";
echo ""&lt;body&gt;"";
for($i=0; $i&lt;5;$i++){
    echo ""&lt;input name='C[]' value='$Texting[$i]' "" . 
         ""style='background-color:#D0A9F5;'&gt;&lt;/input&gt;"";

}
echo ""&lt;/body&gt;"";
echo ""&lt;/html&gt;"";
echo '&lt;input type=""submit"" value=""Save The Table"" name=""G""&gt;&lt;/input&gt;'
</code></pre>

<p>Here is the code to echo the POST.</p>

<pre><code>if(!empty($_POST['G'])){
    echo $_POST['C'];
}
</code></pre>

<p>But when the code runs I get an error like:</p>

<pre><code>Notice: Array to string conversion in 
C:\xampp\htdocs\PHIS\FinalSubmissionOfTheFormPHP.php on line 8
</code></pre>

<p>What does this error mean and how do I fix it?</p>
","<p>When you have many HTML inputs named <code>C[]</code> what you get in the POST array on the other end is an array of these values in <code>$_POST['C']</code>. So when you <code>echo</code> that, you are trying to print an array, so all it does is print <code>Array</code> and a notice.</p>

<p>To print properly an array, you either loop through it and <code>echo</code> each element, or you can use <code>print_r</code>.</p>

<p>Alternatively, if you don't know if it's an array or a string or whatever, you can use <code>var_dump($var)</code> which will tell you what type it is and what it's content is. Use that for debugging purposes only.</p>
","20017469"
"How does PHP 'foreach' actually work?","306482","","<p>Let me prefix this by saying that I know what <code>foreach</code> is, does and how to use it. This question concerns how it works under the bonnet, and I don't want any answers along the lines of ""this is how you loop an array with <code>foreach</code>"".</p>

<hr>

<p>For a long time I assumed that <code>foreach</code> worked with the array itself. Then I found many references to the fact that it works with a <em>copy</em> of the array, and I have since assumed this to be the end of the story. But I recently got into a discussion on the matter, and after a little experimentation found that this was not in fact 100% true.</p>

<p>Let me show what I mean. For the following test cases, we will be working with the following array:</p>

<pre><code>$array = array(1, 2, 3, 4, 5);
</code></pre>

<p><a href=""http://codepad.org/7DIeObk9"" rel=""noreferrer"">Test case 1</a>:</p>

<pre><code>foreach ($array as $item) {
  echo ""$item\n"";
  $array[] = $item;
}
print_r($array);

/* Output in loop:    1 2 3 4 5
   $array after loop: 1 2 3 4 5 1 2 3 4 5 */
</code></pre>

<p>This clearly shows that we are not working directly with the source array - otherwise the loop would continue forever, since we are constantly pushing items onto the array during the loop. But just to be sure this is the case:</p>

<p><a href=""http://codepad.org/nirz6Ufh"" rel=""noreferrer"">Test case 2</a>:</p>

<pre><code>foreach ($array as $key =&gt; $item) {
  $array[$key + 1] = $item + 2;
  echo ""$item\n"";
}

print_r($array);

/* Output in loop:    1 2 3 4 5
   $array after loop: 1 3 4 5 6 7 */
</code></pre>

<p>This backs up our initial conclusion, we are working with a copy of the source array during the loop, otherwise we would see the modified values during the loop. <em>But...</em></p>

<p>If we look in the <a href=""http://php.net/manual/en/control-structures.foreach.php"" rel=""noreferrer"">manual</a>, we find this statement:</p>

<blockquote>
  <p>When foreach first starts executing, the internal array pointer is automatically reset to the first element of the array.</p>
</blockquote>

<p>Right... this seems to suggest that <code>foreach</code> relies on the array pointer of the source array. But we've just proved that we're <em>not working with the source array</em>, right? Well, not entirely.</p>

<p><a href=""http://codepad.org/6n20ooMy"" rel=""noreferrer"">Test case 3</a>:</p>

<pre><code>// Move the array pointer on one to make sure it doesn't affect the loop
var_dump(each($array));

foreach ($array as $item) {
  echo ""$item\n"";
}

var_dump(each($array));

/* Output
  array(4) {
    [1]=&gt;
    int(1)
    [""value""]=&gt;
    int(1)
    [0]=&gt;
    int(0)
    [""key""]=&gt;
    int(0)
  }
  1
  2
  3
  4
  5
  bool(false)
*/
</code></pre>

<p>So, despite the fact that we are not working directly with the source array, we are working directly with the source array pointer - the fact that the pointer is at the end of the array at the end of the loop shows this. Except this can't be true - if it was, then <a href=""http://codepad.org/7DIeObk9"" rel=""noreferrer"">test case 1</a> would loop forever.</p>

<p>The PHP manual also states:</p>

<blockquote>
  <p>As foreach relies on the internal array pointer changing it within the loop may lead to unexpected behavior.</p>
</blockquote>

<p>Well, let's find out what that ""unexpected behavior"" is (technically, any behavior is unexpected since I no longer know what to expect).</p>

<p><a href=""http://codepad.org/JJp79xSd"" rel=""noreferrer"">Test case 4</a>:</p>

<pre><code>foreach ($array as $key =&gt; $item) {
  echo ""$item\n"";
  each($array);
}

/* Output: 1 2 3 4 5 */
</code></pre>

<p><a href=""http://codepad.org/IfwJyTCL"" rel=""noreferrer"">Test case 5</a>:</p>

<pre><code>foreach ($array as $key =&gt; $item) {
  echo ""$item\n"";
  reset($array);
}

/* Output: 1 2 3 4 5 */
</code></pre>

<p>...nothing that unexpected there, in fact it seems to support the ""copy of source"" theory.</p>

<hr>

<p><strong>The Question</strong></p>

<p>What is going on here? My C-fu is not good enough for me to able to extract a proper conclusion simply by looking at the PHP source code, I would appreciate it if someone could translate it into English for me.</p>

<p>It seems to me that <code>foreach</code> works with a <em>copy</em> of the array, but sets the array pointer of the source array to the end of the array after the loop.</p>

<ul>
<li>Is this correct and the whole story?</li>
<li>If not, what is it really doing?</li>
<li>Is there any situation where using functions that adjust the array pointer (<code>each()</code>, <code>reset()</code> et al.) during a <code>foreach</code> could affect the outcome of the loop?</li>
</ul>
","<p><code>foreach</code> supports iteration over three different kinds of values:</p>

<ul>
<li>Arrays</li>
<li>Normal objects</li>
<li><a href=""http://php.net/Traversable"" rel=""noreferrer""><code>Traversable</code></a> objects</li>
</ul>

<p>In the following I will try to explain precisely how iteration works in the different cases. By far the simplest case are <code>Traversable</code> objects, as for these <code>foreach</code> is essentially only syntax sugar for code along these lines:</p>

<pre><code>foreach ($it as $k =&gt; $v) { /* ... */ }

/* translates to: */

if ($it instanceof IteratorAggregate) {
    $it = $it-&gt;getIterator();
}
for ($it-&gt;rewind(); $it-&gt;valid(); $it-&gt;next()) {
    $v = $it-&gt;current();
    $k = $it-&gt;key();
    /* ... */
}
</code></pre>

<p>For internal classes actual method calls are avoided by using an internal API that essentially just mirrors the <code>Iterator</code> interface on the C level.</p>

<p>Iteration of arrays and plain objects is significantly more complicated. First of all, it should be noted that in PHP ""arrays"" are really ordered dictionaries and they will be traversed according to this order (which matches the insertion order as long as you didn't use something like <code>sort</code>). This is opposed to iterating by the natural order of the keys (how lists in other languages often work) or having no defined order at all (how dictionaries in other languages often work).</p>

<p>The same also applies to objects, as the object properties can be seen as another (ordered) dictionary mapping property names to their values, plus some visibility handling. In the majority of cases the object properties are not actually stored in this rather inefficient way. However if you start iterating over an object, the packed representation that is normally used will be converted to a real dictionary. At that point, iteration of plain objects becomes very similar to iteration of arrays (which is why I'm not discussing plain-object iteration much in here).</p>

<p>So far, so good. Iterating over a dictionary can't be too hard, right? The problems begin when you realize that an array/object can change during iteration. There are multiple ways this can happen:</p>

<ul>
<li>If you iterate by reference using <code>foreach ($arr as &amp;$v)</code> then <code>$arr</code> is turned into a reference and you can change it during iteration.</li>
<li>In PHP 5 the same applies even if you iterate by value, but the array was a reference beforehand: <code>$ref =&amp; $arr; foreach ($ref as $v)</code></li>
<li>Objects have by-handle passing semantics, which for must practical purposes means that they behave like references. So objects can always be changed during iteration.</li>
</ul>

<p>The problem with allowing modifications during iteration is the case where the element you are currently on is removed. Say you use a pointer to keep track of which array element you are currently at. If this element is now freed, you are left with a dangling pointer (usually resulting in a segfault).</p>

<p>There are different ways of solving this issue. PHP 5 and PHP 7 differ significantly in this regard and I'll describe both behaviors in the following. The summary is that PHP 5's approach was rather dumb and lead to all kinds of weird edge-case issues, while PHP 7's more involved approach results in more predictable and consistent behavior.</p>

<p>As a last preliminary, it should be noted that PHP uses reference counting and copy-on-write to manage memory. This means that if you ""copy"" a value, you actually just reuse the old value and increment its reference count (refcount). Only once you perform some kind of modification a real copy (called a ""duplication"") will be done. See <a href=""http://blog.golemon.com/2007/01/youre-being-lied-to.html"" rel=""noreferrer"">You're being lied to</a> for a more extensive introduction on this topic.</p>

<h2>PHP 5</h2>

<h3>Internal array pointer and HashPointer</h3>

<p>Arrays in PHP 5 have one dedicated ""internal array pointer"" (IAP), which properly supports modifications: Whenever an element is removed, there will be a check whether the IAP points to this element. If it does, it is advanced to the next element instead.</p>

<p>While foreach does make use of the IAP, there is an additional complication: There is only one IAP, but one array can be be part of multiple foreach loops:</p>

<pre><code>// Using by-ref iteration here to make sure that it's really
// the same array in both loops and not a copy
foreach ($arr as &amp;$v1) {
    foreach ($arr as &amp;$v) {
        // ...
    }
}
</code></pre>

<p>To support two simultaneous loops with only one internal array pointer, foreach performs the following schenanigans: Before the loop body is executed, foreach will back up a pointer to the current element and its hash into a per-foreach <code>HashPointer</code>. After the loop body runs, the IAP will be set back to this element if it still exists. If however the element has been removed, we'll just use whereever the IAP is currently at. This scheme mostly-kinda-sortof works, but there's a lot of weird behavior you can get out of it, some of which I'll demonstrate below.</p>

<h3>Array duplication</h3>

<p>The IAP is a visible feature of an array (exposed through the <code>current</code> family of functions), as such changes to the IAP count as modifications under copy-on-write semantics. This unfortunately means that foreach is in many cases forced to duplicate the array it is iterating over. The precise conditions are:</p>

<ol>
<li>The array is not a reference (is_ref=0). If it's a reference, then changes to it are <em>supposed</em> to propagate, so it should not be duplicated.</li>
<li>The array has refcount>1. If refcount is 1, then the array is not shared and we're free to modify it directly.</li>
</ol>

<p>If the array is not duplicated (is_ref=0, refcount=1), then only its refcount will be incremented (*). Additionally, if foreach by reference is used, then the (potentially duplicated) array will be turned into a reference.</p>

<p>Consider this code as an example where duplication occurs:</p>

<pre><code>function iterate($arr) {
    foreach ($arr as $v) {}
}

$outerArr = [0, 1, 2, 3, 4];
iterate($arr);
</code></pre>

<p>Here, <code>$arr</code> will be duplicated to prevent IAP changes on <code>$arr</code> from leaking to <code>$outerArr</code>. In terms of the conditions above, the array is not a reference (is_ref=0) and is used in two places (refcount=2). This requirement is unfortunate and an artifact of the suboptimal implementation (there is no concern of modification during iteration here, so we don't really need to use the IAP in the first place).</p>

<p>(*) Incrementing the refcount here sounds innocuous, but violates copy-on-write (COW) semantics: This means that we are going to modify the IAP of a refcount=2 array, while COW dictates that modifications can only be performed on refcount=1 values. This violation results in user-visible behavior change (while COW is normally transparent), because the IAP change on the iterated array will be observable -- but only until the first non-IAP modification on the array. Instead, the three ""valid"" options would have been a) to always duplicate, b) to not increment the refcount and thus allowing the iterated array to be arbitrarily modified in the loop, or c) don't use the IAP at all (the PHP 7 solution).</p>

<h3>Position advancement order</h3>

<p>There is one last implementation detail that you have to be aware of to properly understand the code samples below. The ""normal"" way of looping through some data structure would look something like this in pseudocode:</p>

<pre><code>reset(arr);
while (get_current_data(arr, &amp;data) == SUCCESS) {
    code();
    move_forward(arr);
}
</code></pre>

<p>However <code>foreach</code>, being a rather special snowflake, chooses to do things slightly differently:</p>

<pre><code>reset(arr);
while (get_current_data(arr, &amp;data) == SUCCESS) {
    move_forward(arr);
    code();
}
</code></pre>

<p>Namely, the array pointer is already moved forward <em>before</em> the loop body runs. This means that while the loop body is working on element <code>$i</code>, the IAP is already at element <code>$i+1</code>. This is the reason why code samples showing modification during iteration will always unset the <em>next</em> element, rather than the current one.</p>

<h3>Examples: Your test cases</h3>

<p>The three aspects described above should provide you with a mostly complete impression of the idiosyncracies of the foreach implementation and we can move on to discussing some examples. </p>

<p>The behavior of your test cases is simple to explain at this point:</p>

<ul>
<li><p>In test cases 1 and 2 <code>$array</code> starts off with refcount=1, so it will not be duplicated by foreach: Only the refcount is incremented. When the loop body subsequently modifies the array (which has refcount=2 at that point), the duplication will occur at that point. Foreach will continue working on an unmodified copy of <code>$array</code>.</p></li>
<li><p>In test case 3, once again the array is not duplicated, thus foreach will be modifying the IAP of the <code>$array</code> variable. At the end of the iteration the IAP is NULL (meaning iteration done), which <code>each</code> indicates by returning <code>false</code>.</p></li>
<li><p>In test cases 4 and 5 both <code>each</code> and <code>reset</code> are by-reference functions. The <code>$array</code> has a <code>refcount=2</code> when it is passed to them, so it has to be duplicated. As such <code>foreach</code> will be working on a separate array again.</p></li>
</ul>

<h3>Examples: Effects of <code>current</code> in foreach</h3>

<p>A good way to show the various duplication behaviors is to observe the behavior of the  <code>current()</code> function inside a foreach loop. Consider this example:</p>

<pre><code>foreach ($array as $val) {
    var_dump(current($array));
}
/* Output: 2 2 2 2 2 */
</code></pre>

<p>Here you should know that <code>current()</code> is a by-ref function (actually: prefer-ref), even though it does not modify the array. It has to be in order to play nice with all the other functions like <code>next</code> which are all by-ref. By-reference passing implies that the array has to be separated and thus <code>$array</code> and the foreach-array will be different. The reason you get <code>2</code> instead of <code>1</code> is also mentioned above: <code>foreach</code> advances the array pointer <em>before</em> running the user code, not after. So even though the code is at the first element, foreach already advanced the pointer to the second.</p>

<p>Now lets try a small modification:</p>

<pre><code>$ref = &amp;$array;
foreach ($array as $val) {
    var_dump(current($array));
}
/* Output: 2 3 4 5 false */
</code></pre>

<p>Here we have the is_ref=1 case, so the array is not copied (just like above). But now that it is a reference, the array no longer has to be duplicated when passing to the by-ref <code>current()</code> function. Thus <code>current()</code> and foreach work on the same array. You still see the off-by-one behavior though, due to the way <code>foreach</code> advances the pointer.</p>

<p>You get the same behavior when doing by-ref iteration:</p>

<pre><code>foreach ($array as &amp;$val) {
    var_dump(current($array));
}
/* Output: 2 3 4 5 false */
</code></pre>

<p>Here the important part is that foreach will make <code>$array</code> an is_ref=1 when it is iterated by reference, so basically you have the same situation as above.</p>

<p>Another small variation, this time we'll assign the array to another variable:</p>

<pre><code>$foo = $array;
foreach ($array as $val) {
    var_dump(current($array));
}
/* Output: 1 1 1 1 1 */
</code></pre>

<p>Here the refcount of the <code>$array</code> is 2 when the loop is started, so for once we actually have to do the duplication upfront. Thus <code>$array</code> and the array used by foreach will be completely separate from the outset. That's why you get the position of the IAP wherever it was before the loop (in this case it was at the first position).</p>

<h3>Examples: Modification during iteration</h3>

<p>Trying to account for modifications during iteration is where all our foreach troubles originated, so it serves to consider some examples for this case.</p>

<p>Consider these nested loops over the same array (where by-ref iteration is used to make sure it really is the same one):</p>

<pre><code>foreach ($array as &amp;$v1) {
    foreach ($array as &amp;$v2) {
        if ($v1 == 1 &amp;&amp; $v2 == 1) {
            unset($array[1]);
        }
        echo ""($v1, $v2)\n"";
    }
}

// Output: (1, 1) (1, 3) (1, 4) (1, 5)
</code></pre>

<p>The expected part here is that <code>(1, 2)</code> is missing from the output, because element <code>1</code> was removed. What's probably unexpected is that the outer loop stops after the first element. Why is that?</p>

<p>The reason behind this is the nested-loop hack described above: Before the loop body runs, the current IAP position and hash is backed up into a <code>HashPointer</code>. After the loop body it will be restored, but only if the element still exists, otherwise the current IAP position (whatever it may be) is used instead. In the example above this is exactly the case: The current element of the outer loop has been remove, so it will use the IAP, which has already been marked as finished by the inner loop!</p>

<p>Another consequence of the <code>HashPointer</code> backup+restore mechanism is that changes to the IAP though <code>reset()</code> etc. usually do not impact foreach. For example, the following code executes as if the <code>reset()</code> were not present at all:</p>

<pre><code>$array = [1, 2, 3, 4, 5];
foreach ($array as &amp;$value) {
    var_dump($value);
    reset($array);
}
// output: 1, 2, 3, 4, 5
</code></pre>

<p>The reason is that, while <code>reset()</code> temporarily modifies the IAP, it will be restored to the current foreach element after the loop body. To force <code>reset()</code> to make an effect on the loop, you have to additionally remove the current element, so that the backup/restore mechanism fails:</p>

<pre><code>$array = [1, 2, 3, 4, 5];
$ref =&amp; $array;
foreach ($array as $value) {
    var_dump($value);
    unset($array[1]);
    reset($array);
}
// output: 1, 1, 3, 4, 5
</code></pre>

<p>But, those examples are still sane. The real fun starts if you remember that the <code>HashPointer</code> restore uses a pointer to the element and its hash to determine whether it still exists. But: Hashes have collisions, and pointers can be reused! This means that, with a careful choice of array keys, we can make <code>foreach</code> believe that an element that has been removed still exists, so it will jump directly to it. An example:</p>

<pre><code>$array = ['EzEz' =&gt; 1, 'EzFY' =&gt; 2, 'FYEz' =&gt; 3];
$ref =&amp; $array;
foreach ($array as $value) {
    unset($array['EzFY']);
    $array['FYFY'] = 4;
    reset($array);
    var_dump($value);
}
// output: 1, 4
</code></pre>

<p>Here we should normally expect the output <code>1, 1, 3, 4</code> according to the previous rules. How what happens is that <code>'FYFY'</code> has the same hash as the removed element <code>'EzFY'</code>, and the allocator happens to reuse the same memory location to store the element. So foreach ends up directly jumping to the newly inserted element, thus short-cutting the loop.</p>

<h3>Substituting the iterated entity during the loop</h3>

<p>One last odd case that I'd like to mention, is is that PHP allows you to substitute the iterated entity during the loop. So you can start iterating on one array and then replace it with another array halfway through. Or start iterating on an array and then replace it with an object:</p>

<pre><code>$arr = [1, 2, 3, 4, 5];
$obj = (object) [6, 7, 8, 9, 10];

$ref =&amp; $arr;
foreach ($ref as $val) {
    echo ""$val\n"";
    if ($val == 3) {
        $ref = $obj;
    }
}
/* Output: 1 2 3 6 7 8 9 10 */
</code></pre>

<p>As you can see in this case PHP will just start iterating the other entity from the start once the substitution has happened.</p>

<h2>PHP 7</h2>

<h3>Hashtable iterators</h3>

<p>If you still remember, the main problem with array iteration was how to handle removal of elements mid-iteration. PHP 5 used a single internal array pointer (IAP) for this purpose, which was somewhat suboptimal, as one array pointer had to be stretched to support multiple simultaneous foreach loops <em>and</em> interaction with <code>reset()</code> etc. on top of that.</p>

<p>PHP 7 uses a different approach, namely it supports creating an arbitrary amount of external, safe hashtable iterators. These iterators have to be registered in the array, from which point on they have the same semantics as the IAP: If an array element is removed, all hashtable iterators pointing to that element will be advanced to the next element.</p>

<p>This means that foreach will no longer use the IAP <strong>at all</strong>. The foreach loop will be absolutely no effect on the results of <code>current()</code> etc. and its own behavior will never be influence by functions like  <code>reset()</code> etc.</p>

<h3>Array duplication</h3>

<p>Another important change between PHP 5 and PHP 7 relates to array duplication. Now that the IAP is no longer used, by-value array iteration will only do a refcount increment (instead of duplication the array) in all cases. If the array is modified during the foreach loop, at that point a duplication will occur (according to copy-on-write) and foreach will keep working on the old array.</p>

<p>In most cases this change is transparent and has no other effect than better performance. However there is one occasion where it results in different behavior, namely the case where the array was a reference beforehand:</p>

<pre><code>$array = [1, 2, 3, 4, 5];
$ref = &amp;$array;
foreach ($array as $val) {
    var_dump($val);
    $array[2] = 0;
}
/* Old output: 1, 2, 0, 4, 5 */
/* New output: 1, 2, 3, 4, 5 */
</code></pre>

<p>Previously by-value iteration of reference-arrays was special cases. In this case no duplication occurred, so all modifications of the array during iteration would be reflected by the loop. In PHP 7 this special case is gone: A by-value iteration of an array will <strong>always</strong> keep working on the original elements, disregarding any modifications during the loop.</p>

<p>This, of course, does not apply to by-reference iteration. If you iterate by-reference all modifications will be reflected by the loop. Interestingly, the same is true for by-value iteration of plain objects:</p>

<pre><code>$obj = new stdClass;
$obj-&gt;foo = 1;
$obj-&gt;bar = 2;
foreach ($obj as $val) {
    var_dump($val);
    $obj-&gt;bar = 42;
}
/* Old and new output: 1, 42 */
</code></pre>

<p>This reflects by-handle semantics of objects (i.e. they behave reference-like even in by-value contexts).</p>

<h3>Examples</h3>

<p>Lets consider a few examples, starting with your test cases:</p>

<ul>
<li><p>Test cases 1 and 2 retain the same output: By-value array iteration always keeps working on the original elements. (In this case even refcounting and duplication behavior is exactly the same between PHP 5 and PHP 7).</p></li>
<li><p>Test case 3 changes: Foreach no longer uses the IAP, so <code>each()</code> is not affected by the loop. It will have the same output before and after.</p></li>
<li><p>Test cases 4 and 5 stay the same: <code>each()</code> and <code>reset()</code> will duplicate the array before changing the IAP, while foreach still uses the original array. (Not that the IAP change would have mattered, even if the array was shared.)</p></li>
</ul>

<p>The second set of examples was related to the behavior of <code>current()</code> under different reference/refcounting configurations. This no longer makes sense, as <code>current()</code> is completely unaffected by the loop, so its return value always stays the same.</p>

<p>However, we get some interesting changes when considering modifications during iteration. I hope you will find the new behavior more sane. The first example:</p>

<pre><code>$array = [1, 2, 3, 4, 5];
foreach ($array as &amp;$v1) {
    foreach ($array as &amp;$v2) {
        if ($v1 == 1 &amp;&amp; $v2 == 1) {
            unset($array[1]);
        }
        echo ""($v1, $v2)\n"";
    }
}

// Old output: (1, 1) (1, 3) (1, 4) (1, 5)
// New output: (1, 1) (1, 3) (1, 4) (1, 5)
//             (3, 1) (3, 3) (3, 4) (3, 5)
//             (4, 1) (4, 3) (4, 4) (4, 5)
//             (5, 1) (5, 3) (5, 4) (5, 5) 
</code></pre>

<p>As you can see, the outer loop no longer aborts after the first iteration. The reason is that both loops now have entirely separate hashtable iterators, and there is no longer any cross-contamination of both loops through a shared IAP.</p>

<p>Another weird edge case that is fixed now, is the odd effect you get when you remove and add elements that happen to have the same hash:</p>

<pre><code>$array = ['EzEz' =&gt; 1, 'EzFY' =&gt; 2, 'FYEz' =&gt; 3];
foreach ($array as &amp;$value) {
    unset($array['EzFY']);
    $array['FYFY'] = 4;
    var_dump($value);
}
// Old output: 1, 4
// New output: 1, 3, 4
</code></pre>

<p>Previously the HashPointer restore mechanism jumped right to the new element, because it ""looked"" like it's the same as the remove element (due to colliding hash and pointer). As we no longer rely on the element hash for anything, this is no longer an issue.</p>
","14854568"
"open_basedir restriction in effect. File(/) is not within the allowed path(s):","306448","","<p>I'm getting this error on an avatar upload on my site.  I've never gotten it before and nothing was changed recently for me to begin getting this error...</p>

<pre><code>Warning: is_writable() [function.is-writable]: 
open_basedir restriction in effect. 
File(/) is not within the allowed path(s):
</code></pre>
","<p>Modify the <a href=""http://www.php.net/manual/en/ini.core.php#ini.open-basedir"" rel=""nofollow noreferrer""><code>open_basedir</code> settings</a> in your PHP configuration (See <a href=""http://www.php.net/manual/en/configuration.php"" rel=""nofollow noreferrer""><em>Runtime Configuration</em></a>).</p>

<p>The <code>open_basedir</code> setting is primarily used to prevent PHP scripts for a particular user from accessing files in another user's account. So usually, any files in your own account should be readable by your own scripts.</p>

<p>Example settings via <code>.htaccess</code> if PHP runs as Apache module on a Linux system:</p>

<pre><code>&lt;DirectoryMatch ""/home/sites/site81/""&gt;
    php_admin_value open_basedir ""/home/sites/site81/:/tmp/:/""
&lt;/DirectoryMatch&gt;
</code></pre>
","2916429"
"Converting a UNIX Timestamp to Formatted Date String","306107","","<p>Using PHP, I want to convert UNIX timestamps to date strings similar to this: <code>2008-07-17T09:24:17Z</code></p>

<p>How do I convert a timestamp such as <code>1333699439</code> to <code>2008-07-17T09:24:17Z</code>?</p>
","<p>Try this:</p>

<pre><code>&lt;?php
$timestamp=1333699439;
echo gmdate(""Y-m-d\TH:i:s\Z"", $timestamp);
?&gt;
</code></pre>
","10040407"
"Where is the php.ini file on a Linux/CentOS PC?","304854","","<p>I can't find PHP.ini location on my server. I've checked all Stack Overflow answers but I can't find my php.ini location.</p>

<p>I have Linux, Cent OS, zPanel. Last version of PHP.</p>

<p>My computer: Linux Mint 15 KDE.</p>
","<p>In your terminal/console (only Linux, in windows you need <a href=""http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html"">Putty</a>)</p>

<pre><code>ssh user@ip
php -i | grep ""Loaded Configuration File""
</code></pre>

<p>And it will show you something like this <code>Loaded Configuration File =&gt; /etc/php.ini</code>.</p>

<p><strong><em>ALTERNATIVE METHOD:</em></strong></p>

<p>You can make a php file on your website, which run: <code>&lt;?php phpinfo(); ?&gt;</code>, and you can see the php.ini location on the line with: <em>""Loaded Configuration File""</em>.</p>
","17850801"
"PHP cURL custom headers","304762","","<p>I'm wondering if/how you can add custom headers to a cURL HTTP request in PHP. I'm trying to emulate how iTunes grabs artwork and it uses these non-standard headers:</p>

<pre><code>X-Apple-Tz: 0
X-Apple-Store-Front: 143444,12
</code></pre>

<p>How could I add these headers to a request?</p>
","<pre><code>curl_setopt($ch, CURLOPT_HTTPHEADER, array(
    'X-Apple-Tz: 0',
    'X-Apple-Store-Front: 143444,12'
    ));
</code></pre>

<p><a href=""http://www.php.net/manual/en/function.curl-setopt.php"">http://www.php.net/manual/en/function.curl-setopt.php</a></p>
","8115709"
"SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax — PHP — PDO","303297","","<p>I've looked through all the other stackoverflow (and google) posts with the same problem, but none seemed to address my problem.</p>

<p>I am using pdo and php.</p>

<p>My code:</p>

<pre><code>$vals = array(
 ':from'=&gt;$email,
 ':to'=&gt;$recipient,
 ':name'=&gt;$name,
 ':subject'=&gt;$subject,
 ':message'=&gt;$message
);
print_r($vals);
try {

 $pdo = new PDOConfig();

 $pdo-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

 $sql = ""SELECT * FROM messages WHERE `message` LIKE :message"";

 $q = $pdo-&gt;prepare($sql);
 $q-&gt;execute(array(':message' =&gt; $vals[':message']));
 $resp = $q-&gt;fetchAll();

 foreach ($resp as $row) {
  throw new Exception('Please do not post the same message twice!');
 }

 $sql = ""INSERT INTO messages (from, to, name, subject, message) VALUES (:from, :to, :name, :subject, :message)"";
 $q = $pdo-&gt;prepare($sql);
 $q-&gt;execute($vals);


} 
catch(PDOException $e) {
   echo $e-&gt;getMessage();
}
</code></pre>

<p>and the first print_r gives</p>

<pre><code>Array ( [:from] =&gt; abc@gmail.com [:to] =&gt; lala@me.com [:name] =&gt; abc [:subject] =&gt; abc [:message] =&gt; abc )
</code></pre>

<p>which is expected (none are null)</p>

<p>but it outputs the error</p>

<blockquote>
  <p>QLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'from, to, name, subject, message) VALUES ('abc@gmail.com', 'lala@me.com' at line 1</p>
</blockquote>

<p>No idea how to fix this... ideas?</p>
","<p><code>from</code> is a keyword in SQL. You may not used it as a column name without quoting it. In MySQL, things like column names are quoted using backticks, i.e. <code>`from`</code>.</p>

<p>Personally, I wouldn't bother; I'd just rename the column.</p>

<p>PS. as pointed out in the comments, <code>to</code> is another SQL keyword so it needs to be quoted, too. Conveniently, the folks at drupal.org maintain a <a href=""https://www.drupal.org/docs/develop/coding-standards/list-of-sql-reserved-words"" rel=""noreferrer"">list of reserved words in SQL</a>.</p>
","4544085"
"Lost connection to MySQL server at 'reading initial communication packet', system error: 0","302856","","<p>I am getting error:</p>

<blockquote>
  <p>""Lost connection to MySQL server at 'reading initial communication packet, system error: 0""</p>
</blockquote>

<p>while I am going to connect my db.</p>

<p>If I am using localhost everything is working fine.
But when I am using my live IP address like below, it's getting error:</p>

<pre><code>mysql_connect(""202.131.xxx.106:xxxx"", ""xxxx"", ""xxxxx"") or die(mysql_error());
</code></pre>
","<p>Someone here: <a href=""http://forums.mysql.com/read.php?52,166244,258515#msg-258515"">http://forums.mysql.com/read.php?52,166244,258515#msg-258515</a> suggests that it might be a firewall problem:</p>

<blockquote>
  <p>I have just had this problem and found
  it was my firewall. I use PCTools
  Firewall Plus and it wasn't allowing
  full access to MySQL. Once I changed
  that it was fine. Hope that helps.</p>
</blockquote>

<p>Could that be it?</p>

<p>Also, somehere here: <a href=""http://forums.mysql.com/read.php?52,151255,213970#msg-213970"">http://forums.mysql.com/read.php?52,151255,213970#msg-213970</a> suggests that it might be because the MySQL server is bound to the loop-back IP (127.0.0.1 / localhost) which effectively cuts you off from connecting from ""outside"".</p>

<p>If this is the case, you need to upload the script to the webserver (which is probably also running the MySQL server) and keep your server host as 'localhost'</p>
","5756263"
"Create a CSV File for a user in PHP","301985","","<p>I have data in a MySQL database. I am sending the user a URL to get their data out as a CSV file.</p>

<p>I have the e-mailing of the link, MySQL query, etc. covered.</p>

<p>How can I, when they click the link, have a pop-up to download a CVS with the record from MySQL? </p>

<p>I have all the information to get the record already. I just don't see how to have PHP create the CSV file and let them download a file with a .csv extension.</p>
","<p>Try:</p>

<pre><code>header(""Content-type: text/csv"");
header(""Content-Disposition: attachment; filename=file.csv"");
header(""Pragma: no-cache"");
header(""Expires: 0"");

echo ""record1,record2,record3\n"";
die;
</code></pre>

<p>etc</p>

<p>Edit: Here's a snippet of code I use to optionally encode CSV fields:</p>

<pre><code>function maybeEncodeCSVField($string) {
    if(strpos($string, ',') !== false || strpos($string, '""') !== false || strpos($string, ""\n"") !== false) {
        $string = '""' . str_replace('""', '""""', $string) . '""';
    }
    return $string;
}
</code></pre>
","217434"
"How to get last key in an array?","300786","","<p>How can I get the last key of an array?</p>
","<p>A solution would be to use a combination of <a href=""http://php.net/end"" rel=""noreferrer""><code>end</code></a> and <a href=""http://php.net/manual/en/function.key.php"" rel=""noreferrer""><code>key</code></a> <em>(quoting)</em> :</p>

<ul>
<li><code>end()</code> advances array 's internal pointer to the last element, and returns its value. </li>
<li><code>key()</code> returns the index element of the current array position. </li>
</ul>

<p>So, a portion of code such as this one should do the trick :</p>

<pre><code>$array = array(
    'first' =&gt; 123,
    'second' =&gt; 456,
    'last' =&gt; 789, 
);

end($array);         // move the internal pointer to the end of the array
$key = key($array);  // fetches the key of the element pointed to by the internal pointer

var_dump($key);
</code></pre>

<p>Will output :</p>

<pre><code>string 'last' (length=4)
</code></pre>

<p>i.e. the key of the last element of my array.</p>
","2348213"
"How do I turn off PHP Notices?","300531","","<pre><code>Notice: Constant DIR_FS_CATALOG already defined
</code></pre>

<p>I've already commented out <a href=""http://php.net/display_errors"" rel=""noreferrer""><code>display_errors</code></a> in <code>php.ini</code>, but is not working.</p>

<p>How do I make PHP to not output such things to browsers?</p>

<p><strong>UPDATE</strong></p>

<p>I put <code>display_errors = Off</code> there but it's still reporting such notices,</p>

<p>Is this an issue with PHP 5.3?</p>

<p>Reporting numerous <strong>Call Stack</strong> too..</p>
","<p>You can set <code>display_errors</code> to <code>0</code> or use the <a href=""http://www.php.net/manual/en/errorfunc.configuration.php#ini.error-reporting"" rel=""noreferrer""><code>error_reporting()</code></a> function.</p>

<p>However, notices are annoying (I can <a href=""https://stackoverflow.com/questions/1960509/isset-and-empty-make-code-ugly"">partly sympathize</a>) but they serve a purpose. You shouldn't be defining a constant twice, the second time won't work and the constant will remain unchanged!</p>
","2867077"
"Get JSON object from URL","300480","","<p>I have a URL that returns a JSON object like this:</p>

<pre><code>{
    ""expires_in"":5180976,
    ""access_token"":""AQXzQgKTpTSjs-qiBh30aMgm3_Kb53oIf-VA733BpAogVE5jpz3jujU65WJ1XXSvVm1xr2LslGLLCWTNV5Kd_8J1YUx26axkt1E-vsOdvUAgMFH1VJwtclAXdaxRxk5UtmCWeISB6rx6NtvDt7yohnaarpBJjHWMsWYtpNn6nD87n0syud0""
} 
</code></pre>

<p>I want to get the <code>access_token</code> value. So how can I retrieve it through PHP?</p>
","<pre><code>$json = file_get_contents('url_here');
$obj = json_decode($json);
echo $obj-&gt;access_token;
</code></pre>

<p>For this to work, <code>file_get_contents</code> requires that <code>allow_url_fopen</code> is enabled. This can be done at runtime by including:</p>

<pre><code>ini_set(""allow_url_fopen"", 1);
</code></pre>

<p>You can also use <a href=""http://www.php.net/manual/en/function.curl-init.php"" rel=""noreferrer""><code>curl</code></a> to get the url. To use curl, you can use the example found <a href=""https://stackoverflow.com/a/16701318/475125"">here</a>:</p>

<pre><code>$ch = curl_init();
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_URL, 'url_here');
$result = curl_exec($ch);
curl_close($ch);

$obj = json_decode($result);
echo $obj-&gt;access_token;
</code></pre>
","15617547"
"Extract numbers from a string","299982","","<p>I want to extract the numbers from a string that contains numbers and letters like:</p>

<pre><code>""In My Cart : 11 items""
</code></pre>

<p>I want here to get the number <code>11</code> or any other number.</p>
","<pre><code>$str = 'In My Cart : 11 12 items';
preg_match_all('!\d+!', $str, $matches);
print_r($matches);
</code></pre>
","6278312"
"How do I make a request using HTTP basic authentication with PHP curl?","299041","","<p>I'm building a REST web service client in PHP and at the moment I'm using curl to make requests to the service.</p>

<p>How do I use curl to make authenticated (http basic) requests? Do I have to add the headers myself?</p>
","<p>You want this:</p>

<pre><code>curl_setopt($process, CURLOPT_USERPWD, $username . "":"" . $password);  
</code></pre>

<p>Zend has a REST client and zend_http_client and I'm sure PEAR has some sort of wrapper.
But its easy enough to do on your own.</p>

<p>So the entire request might look something like this:</p>

<pre><code>$process = curl_init($host);
curl_setopt($process, CURLOPT_HTTPHEADER, array('Content-Type: application/xml', $additionalHeaders));
curl_setopt($process, CURLOPT_HEADER, 1);
curl_setopt($process, CURLOPT_USERPWD, $username . "":"" . $password);
curl_setopt($process, CURLOPT_TIMEOUT, 30);
curl_setopt($process, CURLOPT_POST, 1);
curl_setopt($process, CURLOPT_POSTFIELDS, $payloadName);
curl_setopt($process, CURLOPT_RETURNTRANSFER, TRUE);
$return = curl_exec($process);
curl_close($process);
</code></pre>
","2140445"
"Where is PHP.ini in Mac OS X Lion? Thought it was in /usr/local/php5/lib","298872","","<p>I wanted to run some PHP right on my Mac, uncommented httpd.conf, activated web sharing, installed MySQL etc.
I can't seem to find my PHP files, most importantly, PHP.ini.</p>

<p>On my old machine it was located in /usr/local/php5/lib
But php5 directory doesn't exist in /usr/local..</p>

<p>Do I need to get a package or am I looking in the incorrect place?</p>

<p>Running OS X 10.7.3, PHP 5.3.8, Apache/2.2.21</p>

<p>Thanks.</p>
","<p>You should find it in /private/etc if it exists, otherwise:</p>

<pre><code>sudo cp /private/etc/php.ini.default /private/etc/php.ini
</code></pre>
","9343210"
"Creating default object from empty value in PHP?","298860","","<p>I see this error only after upgrading my PHP environment to PHP 5.4 and beyond. The error points to this line of code:</p>

<p>Error:</p>

<blockquote>
  <p>Creating default object from empty value</p>
</blockquote>

<p>Code:</p>

<pre><code>$res-&gt;success = false;
</code></pre>

<p>Do I first need to declare my <code>$res</code> object?</p>
","<p>Your new environment may have <code>E_STRICT</code> warnings <a href=""http://www.php.net/manual/en/errorfunc.configuration.php#ini.error-reporting"" rel=""noreferrer"">enabled in <code>error_reporting</code></a> if it is  PHP &lt;= 5.3, or if simply have <code>error_reporting</code> set to at least <code>E_WARNING</code> with PHP 5.4+. . That error is triggered when <code>$res</code> is <code>NULL</code> or not yet initialized:</p>

<pre><code>$res = NULL;
$res-&gt;success = false; // Warning: Creating default object from empty value
</code></pre>

<p>PHP will report a different error message if <code>$res</code> is already initialized to some value but is not an object:</p>

<pre><code>$res = 33;
$res-&gt;success = false; // Warning: Attempt to assign property of non-object
</code></pre>

<p>In order to comply with <code>E_STRICT</code> standards prior to PHP 5.4, or the normal <code>E_WARNING</code> error level in PHP >= 5.4, assuming you are trying to create a generic object and assign the property <code>success</code>, you need to declare <code>$res</code> as an object of <code>stdClass</code> in the global namespace:</p>

<pre><code>$res = new \stdClass();
$res-&gt;success = false;
</code></pre>
","8900730"
"SET NAMES utf8 in MySQL?","298526","","<p>I often see something similar to this below in PHP scripts using MySQL</p>

<pre><code>query(""SET NAMES utf8"");   
</code></pre>

<p>I have never had to do this for any project yet so I have a couple basic questions about it.  </p>

<ol>
<li>Is this something that is done with PDO only?</li>
<li>If it is not a PDO specific thing, then what is the purpose of doing it?  I realize it is setting the encoding for mysql but I mean, I have never had to use it so why would I want to use it?  </li>
</ol>
","<p>It is needed whenever you want to send data to the server having characters that cannot be represented in pure ASCII, like 'ñ' or 'ö'.</p>

<p>That if the MySQL instance is not configured to expect UTF-8 encoding by default from client connections (many are, depending on your location and platform.)</p>

<p>Read <a href=""http://www.joelonsoftware.com/articles/Unicode.html"" rel=""noreferrer"">http://www.joelonsoftware.com/articles/Unicode.html</a> in case you aren't aware how Unicode works.</p>

<p>Read <a href=""https://stackoverflow.com/questions/1650591/whether-to-use-set-names"">Whether to use &quot;SET NAMES&quot;</a> to see SET NAMES alternatives and what exactly is it about.</p>
","2159453"
"PHP foreach loop key value","297646","","<p>I am running this DB call to get me multi-dimensional array
I am trying to get the keys of each but when I try it comes up blank or as array.   </p>

<pre><code>$root_array = array();
$sites = $this-&gt;sites($member_id);
foreach ($sites as $site){
    $records = $this-&gt;db-&gt;select('p.name as place_name, p.id as place_id,p.active as place_status')
                -&gt;from('places p')
                -&gt;join('members_permissions pm','pm.sites_id = p.sites_id and pm.members_id ='.$member_id)
                -&gt;where('p.active', 0)
                -&gt;get();

    $places = $records-&gt;result_array();
    $places['name'] = $site['name'];
    foreach($places as $place){
       $root_array[$site['name']][] = $place;
    }

}
return $root_array;
</code></pre>

<p>here is my php that loops through:</p>

<pre><code>&lt;?php foreach($places as $site): ?&gt;
    &lt;h5&gt;&lt;?=key($site)?&gt;&lt;/h5&gt;
        &lt;?php foreach($site as $place): ?&gt;
            &lt;h6&gt;&lt;?=$place['place_name']?&gt;&lt;/h6&gt;
        &lt;?php endforeach?&gt;

&lt;?php endforeach ?&gt;
</code></pre>

<p>Also when I run a test which just spits out the array this is the result,
What I am trying to render is <strong>[Philadelphia]</strong></p>

<pre><code>[Philadelphia] =&gt; Array
        (
            [0] =&gt; Array
                (
                    [place_name] =&gt; XYX
                    [place_id] =&gt; 103200
                    [place_status] =&gt; 0
                )

            [1] =&gt; Array
                (
                [place_name] =&gt; YYYY
                [place_id] =&gt; 232323
                [place_status] =&gt; 0
            )
</code></pre>
","<p>You can access your array keys like so:</p>

<pre><code>foreach ($array as $key =&gt; $value)
</code></pre>
","1834719"
"Add number of days to a date","296601","","<p>I want to add  number of days to current date:
I am using following code:</p>

<pre><code>$i=30;
echo $date = strtotime(date(""Y-m-d"", strtotime($date)) . "" +"".$i.""days"");
</code></pre>

<p>But instead of getting proper date i am getting this:
<strong>2592000</strong> </p>

<p>Please suggest.</p>
","<p>This should be</p>

<pre><code>echo date('Y-m-d', strtotime(""+30 days""));
</code></pre>

<p><code>strtotime</code> </p>

<blockquote>
  <p>expects to be given a string containing a US English date format and will try to parse that format into a Unix timestamp (the number of seconds since January 1 1970 00:00:00 UTC), relative to the timestamp given in now, or the current time if now  is not supplied.</p>
</blockquote>

<p>while <code>date</code></p>

<blockquote>
  <p>Returns a string formatted according to the given format string using the given integer timestamp  or the current time if no timestamp is given.</p>
</blockquote>

<p>See the manual pages for</p>

<ul>
<li><a href=""http://www.php.net/manual/en/function.strtotime.php"" rel=""noreferrer"">http://www.php.net/manual/en/function.strtotime.php</a></li>
<li><a href=""http://www.php.net/manual/en/function.date.php"" rel=""noreferrer"">http://www.php.net/manual/en/function.date.php</a></li>
</ul>

<p>and their function signatures. </p>
","2332688"
"List all files in one directory PHP","294288","","<p>What would be the best way to list all the files in one directory with PHP? Is there a $_SERVER function to do this? I would like to list all the files in the usernames/ directory and loop over that result with a link, so that I can just click the hyperlink of the filename to get there. Thanks!</p>
","<p>Check this out : <a href=""http://php.net/manual/en/function.readdir.php"">readdir()</a><br/><br/>
This bit of code should list all entries in a certain directory:</p>

<pre><code>if ($handle = opendir('.')) {

    while (false !== ($entry = readdir($handle))) {

        if ($entry != ""."" &amp;&amp; $entry != "".."") {

            echo ""$entry\n"";
        }
    }

    closedir($handle);
}
</code></pre>

<hr>

<p><strong>Edit</strong>: miah's solution is much more elegant than mine, you should use his solution instead.</p>
","15774700"
"What is the size limit of a post request?","293764","","<p>Sorry if this is duplicate,I would think it would be but couldn't find anything.</p>

<p>I have a flex application that I am posting data back to a php/mysql server via IE. I haven't run into any problems yet, but knowing this ahead of time might save me a bunch of frustration and work. Is there a size limit to posting data via http? </p>

<p>This article says no:
<a href=""http://www.netlobo.com/ie_form_submit.html"" rel=""noreferrer"">http://www.netlobo.com/ie_form_submit.html</a></p>

<p>This discussion says yes:
<a href=""http://bytes.com/topic/php/answers/538226-what-maximum-limit-using-post-method"" rel=""noreferrer"">http://bytes.com/topic/php/answers/538226-what-maximum-limit-using-post-method</a></p>

<p>And it all goes back and forth what I'm able to find online. So <strong>please</strong> limit answers to personally tested/verified numbers.</p>

<p>I am wanting to post back an XML string that can be quite large (say up to 5mb).</p>

<p>If it makes any difference: browser will always be IE (our product requires it), post is coming from and httpService in flex, web server is php, DB is mySql. </p>
","<p>It depends on a server configuration. If you're working with PHP under Linux or similar, you can control it using .htaccess configuration file, like so:</p>

<pre><code>#set max post size
php_value post_max_size 20M
</code></pre>

<p>And, yes, I can personally attest to the fact that this works :)</p>

<p>If you're using IIS, I don't have any idea how you'd set this particular value.</p>
","2364875"
"php shell_exec() vs exec()","290818","","<p>I'm struggling to understand the difference between <code>shell_exec()</code> and <code>exec()</code>...</p>

<p>I've always used <code>exec()</code> to execute server side commands, when would I use <code>shell_exec()</code>?</p>

<p>Is <code>shell_exec()</code> just a shorthand for <code>exec()</code>?  It seems to be the same thing with fewer parameters.</p>
","<p><code>shell_exec</code> returns all of the output stream as a string. <code>exec</code> returns the last line of the output by default, but can provide all output as an array specifed as the second parameter.</p>

<p>See</p>

<ul>
<li><a href=""http://php.net/manual/en/function.shell-exec.php"" rel=""noreferrer"">http://php.net/manual/en/function.shell-exec.php</a></li>
<li><a href=""http://php.net/manual/en/function.exec.php"" rel=""noreferrer"">http://php.net/manual/en/function.exec.php</a></li>
</ul>
","7093892"
"How to pass an array within a query string?","290737","","<p>Is there a standard way of passing an array through a query string? </p>

<p>To be clear, I have a query string with multiple values, one of which would be an array value.  I want that query string value to be treated as an array- I don't want the array to be exploded so that it is indistinguishable from the other query string variables.</p>

<p>Also, according to this <a href=""https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript/2880929#2880929"">post answer</a>, the author suggests that query string support for arrays is not defined.  Is this accurate?  </p>

<p><strong>EDIT:</strong></p>

<p>Based on @Alex's answer, there is no standard way of doing this, so my follow up is then what is an easy way to <em>recognize</em> that the paramater I'm reading is an array in both <strong>PHP</strong> and <strong>Javascript</strong>?  </p>

<p>Would it be acceptable to name multiple params the same name, and that way I would know that they belong to an array? Example:</p>

<pre><code>?myarray=value1&amp;myarray=value2&amp;myarray=value3...
</code></pre>

<p>Or would this be bad practice?</p>
","<p>Here's what I figured out:</p>

<p>Submitting multi-value form fields, i.e. submitting arrays through GET/POST vars, can be done several different ways, as a standard is not necessarily spelled out.</p>

<p>Three possible ways to send multi-value fields or arrays would be:</p>

<ul>
<li><code>?cars[]=Saab&amp;cars[]=Audi</code> <em>(Best way- PHP reads this into an array)</em></li>
<li><code>?cars=Saab&amp;cars=Audi</code> <em>(Bad way- PHP will only register last value)</em></li>
<li><code>?cars=Saab,Audi</code> <em>(Haven't tried this)</em></li>
</ul>

<h3>Form Examples</h3>

<p>On a form, multi-valued fields could take the form of a <strong>select box set to multiple</strong>:</p>

<pre><code>&lt;form&gt; 
    &lt;select multiple=""multiple"" name=""cars[]""&gt; 
        &lt;option&gt;Volvo&lt;/option&gt; 
        &lt;option&gt;Saab&lt;/option&gt; 
        &lt;option&gt;Mercedes&lt;/option&gt; 
    &lt;/select&gt;
&lt;/form&gt;
</code></pre>

<p><em>(NOTE: In this case, it would be important to name the select control <code>some_name[]</code>, so that the resulting request vars would be registered as an array by PHP)</em>  </p>

<p>... or as <strong>multiple hidden fields with the same name</strong>:</p>

<pre><code>&lt;input type=""hidden"" name=""cars[]"" value=""Volvo""&gt;
&lt;input type=""hidden"" name=""cars[]"" value=""Saab""&gt;
&lt;input type=""hidden"" name=""cars[]"" value=""Mercedes""&gt;
</code></pre>

<hr>

<p><strong>NOTE:</strong> Using <code>field[]</code> for multiple values is really poorly documented. I don't see any mention of it in the section on multi-valued keys in <a href=""http://en.wikipedia.org/wiki/Query_string"">Query string - Wikipedia</a>, or in the <a href=""http://www.w3.org/TR/html4/interact/forms.html#h-17.6.1"">W3C docs</a> dealing with multi-select inputs.</p>

<hr>

<p><strong>UPDATE</strong></p>

<p>As commenters have pointed out, this is very much framework-specific. Some examples:</p>

<p><strong>Query string:</strong></p>

<pre><code>?list_a=1&amp;list_a=2&amp;list_a=3&amp;list_b[]=1&amp;list_b[]=2&amp;list_b[]=3&amp;list_c=1,2,3
</code></pre>

<p><strong>Rails:</strong></p>

<pre><code>""list_a"": ""3"", 
""list_b"":[
    ""1"",
    ""2"",
    ""3""
  ], 
""list_c"": ""1,2,3""
</code></pre>

<p><strong>Angular:</strong></p>

<pre><code> ""list_a"": [
    ""1"",
    ""2"",
    ""3""
  ],
  ""list_b[]"": [
    ""1"",
    ""2"",
    ""3""
  ],
  ""list_c"": ""1,2,3""
</code></pre>

<p>(Angular <a href=""https://github.com/angular/angular.js/issues/3121"">discussion</a>)</p>

<p>See comments for examples in <strong>node.js</strong>, <strong>Wordpress</strong>, <strong>ASP.net</strong></p>

<hr>

<p><strong>Maintaining order:</strong>
One more thing to consider is that if you need to maintain the <em>order</em> of your items (i.e. array as an ordered list), you really only have one option, which is passing a delimited list of values, and explicitly converting it to an array yourself.</p>
","9547490"
"PHP: How to remove specific element from an array?","290694","","<p>How do I remove an element from an array when I know the elements name? for example:</p>

<p>I have an array:</p>

<pre><code>$array = (apple, orange, strawberry, blueberry, kiwi);
</code></pre>

<p>the user enters <code>strawberry</code></p>

<p><code>strawberry</code> is removed.</p>

<p>To fully explain:</p>

<p>I have a database that stores a list of items separated by a comma. The code pulls in the list based on a user choice where that choice is located. So, if they choose strawberry they code pulls in every entry were strawberry is located then converts that to an array using split(). I want to them remove the user chosen items, for this example strawberry, from the array.</p>
","<p>Use <a href=""http://php.net/array_search"" rel=""noreferrer""><code>array_search</code></a> to get the key and remove it with <a href=""http://php.net/unset"" rel=""noreferrer""><code>unset</code></a> if found:</p>

<pre><code>if (($key = array_search('strawberry', $array)) !== false) {
    unset($array[$key]);
}
</code></pre>

<p><code>array_search</code> returns <em>false</em> (<em>null</em> until PHP 4.2.0) if no item has been found.</p>

<p>And if there can be multiple items with the same value, you can use <a href=""http://php.net/array_keys"" rel=""noreferrer""><code>array_keys</code></a> to get the keys to all items:</p>

<pre><code>foreach (array_keys($array, 'strawberry') as $key) {
    unset($array[$key]);
}
</code></pre>
","2449093"
"How do you Encrypt and Decrypt a PHP String?","290415","","<p>What I mean is:</p>

<pre><code>Original String + Salt or Key --&gt; Encrypted String
Encrypted String + Salt or Key --&gt; Decrypted (Original String)
</code></pre>

<p>Maybe something like:</p>

<pre><code>""hello world!"" + ""ABCD1234"" --&gt; Encrypt --&gt; ""2a2ffa8f13220befbe30819047e23b2c"" (may be, for e.g)
""2a2ffa8f13220befbe30819047e23b2c"" --&gt; Decrypt with ""ABCD1234"" --&gt; ""hello world!""
</code></pre>

<ul>
<li>In PHP, how can you do this?</li>
</ul>

<p>Attempted to use <strong><code>Crypt_Blowfish</code></strong>, but it didn't work for me.</p>
","<p><strong>What not to do</strong></p>

<blockquote>
  <p><strong>WARNING:<br>
  This answer uses <a href=""https://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#ECB"" rel=""nofollow"">ECB</a>. ECB is not an encryption mode, it's only a building block. Using ECB as demonstrated in this answer does not actually encrypt the string securely. Do not use ECB in your code. See <a href=""https://stackoverflow.com/a/30159120"">Scott's answer</a> for a good solution.</strong></p>
</blockquote>

<p>I got it on myself. Actually i found some answer on google and just modified something. <strong>The result is completely insecure however.</strong></p>

<pre><code>&lt;?php
define(""ENCRYPTION_KEY"", ""!@#$%^&amp;*"");
$string = ""This is the original data string!"";

echo $encrypted = encrypt($string, ENCRYPTION_KEY);
echo ""&lt;br /&gt;"";
echo $decrypted = decrypt($encrypted, ENCRYPTION_KEY);

/**
 * Returns an encrypted &amp; utf8-encoded
 */
function encrypt($pure_string, $encryption_key) {
    $iv_size = mcrypt_get_iv_size(MCRYPT_BLOWFISH, MCRYPT_MODE_ECB);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
    $encrypted_string = mcrypt_encrypt(MCRYPT_BLOWFISH, $encryption_key, utf8_encode($pure_string), MCRYPT_MODE_ECB, $iv);
    return $encrypted_string;
}

/**
 * Returns decrypted original string
 */
function decrypt($encrypted_string, $encryption_key) {
    $iv_size = mcrypt_get_iv_size(MCRYPT_BLOWFISH, MCRYPT_MODE_ECB);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
    $decrypted_string = mcrypt_decrypt(MCRYPT_BLOWFISH, $encryption_key, $encrypted_string, MCRYPT_MODE_ECB, $iv);
    return $decrypted_string;
}
?&gt;
</code></pre>
","16606352"
"How to find the last day of the month from date?","290047","","<p>How can I get the last day of the month in PHP?</p>

<p>Given:</p>

<pre><code>$a_date = ""2009-11-23""
</code></pre>

<p>I want 2009-11-30; and given</p>

<pre><code>$a_date = ""2009-12-23""
</code></pre>

<p>I want 2009-12-31.</p>
","<p><code>t</code> returns the number of days in the month of a given date (see <a href=""http://us.php.net/manual/en/function.date.php"" rel=""noreferrer"">the docs for <code>date</code></a>):</p>

<pre><code>$a_date = ""2009-11-23"";
echo date(""Y-m-t"", strtotime($a_date));
</code></pre>
","1686742"
"in_array() and multidimensional array","289079","","<p>I use <code>in_array()</code> to check whether a value exists in an array like below,</p>

<pre><code>$a = array(""Mac"", ""NT"", ""Irix"", ""Linux"");
if (in_array(""Irix"", $a)) 
{
    echo ""Got Irix"";
}

//print_r($a);
</code></pre>

<p>but what about an multidimensional array (below) - how can I check that value whether it exists in the multi-array?</p>

<pre><code>$b = array(array(""Mac"", ""NT""), array(""Irix"", ""Linux""));

print_r($b);
</code></pre>

<p>or I shouldn't be using <code>in_array()</code> when comes to the multidimensional array?</p>
","<p><code>in_array()</code> does not work on multidimensional arrays. You could write a recursive function to do that for you:</p>

<pre><code>function in_array_r($needle, $haystack, $strict = false) {
    foreach ($haystack as $item) {
        if (($strict ? $item === $needle : $item == $needle) || (is_array($item) &amp;&amp; in_array_r($needle, $item, $strict))) {
            return true;
        }
    }

    return false;
}
</code></pre>

<p>Usage:</p>

<pre><code>$b = array(array(""Mac"", ""NT""), array(""Irix"", ""Linux""));
echo in_array_r(""Irix"", $b) ? 'found' : 'not found';
</code></pre>
","4128377"
"Detect encoding and make everything UTF-8","288310","","<p>I'm reading out lots of texts from various RSS feeds and inserting them into my database.</p>

<p>Of course, there are several different character encodings used in the feeds, e.g. UTF-8 and ISO-8859-1.</p>

<p>Unfortunately, there are sometimes problems with the encodings of the texts. Example:</p>

<p>1) The ""ß"" in ""Fußball"" should look like this in my database: ""ÂŸ"". If it is a ""ÂŸ"", it is displayed correctly.</p>

<p>2) Sometimes, the ""ß"" in ""Fußball"" looks like this in my database: ""ÃƒÂŸ"". Then it is displayed wrongly, of course.</p>

<p>3) In other cases, the ""ß"" is saved as a ""ß"" - so without any change. Then it is also displayed wrongly.</p>

<p>What can I do to avoid the cases 2 and 3?</p>

<p>How can I make everything the same encoding, preferably UTF-8? When must I use utf8_encode(), when must I use utf8_decode() (it's clear what the effect is but when must I use the functions?) and when must I do nothing with the input?</p>

<p>Can you help me and tell me how to make everything the same encoding? Perhaps with the function mb-detect-encoding()? Can I write a function for this? So my problems are:
1) How to find out what encoding the text uses
2) How to convert it to UTF-8 - whatever the old encoding is</p>

<p><strong>EDIT:</strong>
Would a function like this work?</p>

<pre><code>function correct_encoding($text) {
    $current_encoding = mb_detect_encoding($text, 'auto');
    $text = iconv($current_encoding, 'UTF-8', $text);
    return $text;
}
</code></pre>

<p>I've tested it but it doesn't work. What's wrong with it?</p>
","<p>If you apply utf8_encode() to an already UTF8 string it will return a garbled UTF8 output.</p>

<p>I made a function that addresses all this issues.  It´s called Encoding::toUTF8().</p>

<p>You dont need to know what the encoding of your strings is. It can be Latin1 (iso 8859-1), Windows-1252 or UTF8, or the string can have a mix of them. Encoding::toUTF8() will convert everything to UTF8.</p>

<p>I did it because a service was giving me a feed of data all messed up, mixing UTF8 and Latin1 in the same string.</p>

<p>Usage:</p>

<pre><code>require_once('Encoding.php'); 
use \ForceUTF8\Encoding;  // It's namespaced now.

$utf8_string = Encoding::toUTF8($utf8_or_latin1_or_mixed_string);

$latin1_string = Encoding::toLatin1($utf8_or_latin1_or_mixed_string);
</code></pre>

<p>Download:</p>

<p><a href=""https://github.com/neitanod/forceutf8"" rel=""noreferrer"">https://github.com/neitanod/forceutf8</a></p>

<p>Update:</p>

<p>I've included another function, Encoding::fixUFT8(), which will fix every UTF8 string that looks garbled.  </p>

<p>Usage:</p>

<pre><code>require_once('Encoding.php'); 
use \ForceUTF8\Encoding;  // It's namespaced now.

$utf8_string = Encoding::fixUTF8($garbled_utf8_string);
</code></pre>

<p>Examples:</p>

<pre><code>echo Encoding::fixUTF8(""FÃ©dÃ©ration Camerounaise de Football"");
echo Encoding::fixUTF8(""FÃÂ©dÃÂ©ration Camerounaise de Football"");
echo Encoding::fixUTF8(""FÃÂÃÂ©dÃÂÃÂ©ration Camerounaise de Football"");
echo Encoding::fixUTF8(""FÃÂ©dération Camerounaise de Football"");
</code></pre>

<p>will output:</p>

<pre><code>Fédération Camerounaise de Football
Fédération Camerounaise de Football
Fédération Camerounaise de Football
Fédération Camerounaise de Football
</code></pre>

<p>Update: I've transformed the function (forceUTF8) into a family of static functions on a class called Encoding.  The new function is Encoding::toUTF8().</p>
","3479832"
"Enabling error display in php via htaccess only","287676","","<p>I am testing a website online.</p>

<p>Right now, the errors are not being displayed (But I know they exist).</p>

<p>I have access to only the <code>.htaccess</code> file.</p>

<p>How do i make all errors to display using my <code>.htaccess</code> file</p>

<p><strong>EDIT</strong></p>

<p>I added these lines to my <code>.htaccess</code>: </p>

<pre><code>php_flag display_startup_errors on
php_flag display_errors on
php_flag html_errors on
</code></pre>

<p>and the pages NOW display </p>

<blockquote>
  <p>Internal server error</p>
</blockquote>
","<p>.htaccess:</p>

<pre><code>php_flag display_startup_errors on
php_flag display_errors on
php_flag html_errors on
php_flag  log_errors on
php_value error_log  /home/path/public_html/domain/PHP_errors.log
</code></pre>
","6128036"
"Trying to get property of non-object in","287567","","<p>on Control page:</p>

<pre><code>&lt;?php
  include 'pages/db.php'; 
  $results = mysql_query(""SELECT * FROM sidemenu WHERE `menu_id`='"".$menu.""' ORDER BY `id` ASC LIMIT 1"", $con);
  $sidemenus = mysql_fetch_object($results);
?&gt;
</code></pre>

<p>on View Page:</p>

<pre><code>&lt;?php foreach ($sidemenus as $sidemenu): ?&gt;
  &lt;?php echo $sidemenu-&gt;mname.""&lt;br /&gt;"";?&gt;
&lt;?php endforeach; ?&gt;
</code></pre>

<p>Error is:</p>

<blockquote>
  <p>Notice: Trying to get property of non-object in C:\wamp\www\phone\pages\init.php on line 22</p>
</blockquote>

<p>Can you fix it? I don't have any idea what happened.</p>
","<p>Check the manual for <a href=""http://php.net/manual/en/function.mysql-fetch-object.php""><code>mysql_fetch_object()</code></a>. It returns an object, not an array of objects.</p>

<p>I'm guessing you want something like this</p>

<pre><code>$results = mysql_query(""SELECT * FROM sidemenu WHERE `menu_id`='"".$menu.""' ORDER BY `id` ASC LIMIT 1"", $con);

$sidemenus = array();
while ($sidemenu = mysql_fetch_object($results)) {
    $sidemenus[] = $sidemenu;
}
</code></pre>

<hr>

<p>Might I suggest you have a look at PDO. <code>PDOStatement::fetchAll(PDO::FETCH_OBJ)</code> does what you assumed <code>mysql_fetch_object()</code> to do</p>
","5891939"
"How can I split a comma delimited string into an array in PHP?","287551","","<p>I need to split my string input into an array at the commas.</p>

<p>How can I go about accomplishing this?</p>

<h3>Input:</h3>

<pre><code>9,admin@example.com,8
</code></pre>
","<p>Try <a href=""http://us2.php.net/manual/en/function.explode.php"" rel=""noreferrer"">explode</a>:</p>

<pre><code>$myString = ""9,admin@example.com,8"";
$myArray = explode(',', $myString);
print_r($myArray);
</code></pre>

<p>Output :</p>

<pre><code>Array
(
    [0] =&gt; 9
    [1] =&gt; admin@example.com
    [2] =&gt; 8
)
</code></pre>
","1125740"
"""Connection for controluser as defined in your configuration failed"" with phpMyAdmin in XAMPP","285832","","<p>I have just installed XAMPP on my Windows XP machine, and I get an error saying:</p>

<blockquote>
  <p>Connection for controluser as defined in your configuration failed.</p>
</blockquote>

<p>Before I installed XAMPP, I had a MySQL database installed and it had a password. I changed and put the password in config.inc.php for MySQL, and I got this error: </p>

<pre><code>&lt;?php
if (!empty($_SERVER['HTTPS']) &amp;&amp; ('on' == $_SERVER['HTTPS'])) {
    $uri = 'https://';
} else {
    $uri = 'http://';
}
$uri .= $_SERVER['HTTP_HOST'];
header('Location: '.$uri.'/xampp/');
exit;
?&gt;
</code></pre>

<p>When I try to access index.php, it seems like something is wrong with the XAMPP installation.  What can I do to fix this problem?</p>
","<ol>
<li>Open phpMyAdmin in a browser and log in as root.</li>
<li>Create a database called <code>phpmyadmin</code></li>
<li>Create a user called <code>pma</code> and set the ""host"" to the hostname or IP address of your web server (if the web server and MySQL are on the same box use <code>localhost</code>), make a note of the password, and grant the new user full control over the <code>phpmyadmin</code> database. It is recommended that this user does not have access to anything other than this database.</li>
<li>Go to the phpMyAdmin installation directory, where you should find a sub-directory called <code>sql</code>.</li>
<li>In <code>sql</code> you will find a file called <code>create_tables.sql</code>. Open it in a text editor.</li>
<li>In phpMyAdmin, select the <code>phpmyadmin</code> database and click on the ""SQL"" tab.</li>
<li>Copy/paste the entire text from <code>create_tables.sql</code> into the text box, and run the query.</li>
<li><p>Open the config.inc.php file in the phpMyAdmin install directory, and add the following lines (or change the existing settings if they are already there):</p>

<pre class=""lang-php prettyprint-override""><code>$cfg['Servers'][1]['pmadb'] = 'phpmyadmin';
$cfg['Servers'][1]['controluser'] = 'pma';
$cfg['Servers'][1]['controlpass'] = '&lt;your password&gt;';

// Note: The list below may grow as PMA evolves and more control tables are added
// Use your common sense! Don't just blindly copypasta, look at what it means!
$cfg['Servers'][1]['bookmarktable'] = 'pma_bookmark';
$cfg['Servers'][1]['relation'] = 'pma_relation';
$cfg['Servers'][1]['userconfig'] = 'pma_userconfig';
$cfg['Servers'][1]['table_info'] = 'pma_table_info';
$cfg['Servers'][1]['column_info'] = 'pma_column_info';
$cfg['Servers'][1]['history'] = 'pma_history';
$cfg['Servers'][1]['recent'] = 'pma_recent';
$cfg['Servers'][1]['table_uiprefs'] = 'pma_table_uiprefs';
$cfg['Servers'][1]['tracking'] = 'pma_tracking';
$cfg['Servers'][1]['table_coords'] = 'pma_table_coords';
$cfg['Servers'][1]['pdf_pages'] = 'pma_pdf_pages';
$cfg['Servers'][1]['designer_coords'] = 'pma_designer_coords';
</code></pre></li>
<li><p>Save and close the file.</p></li>
</ol>

<p><strong>IMPORTANT</strong> - PMA loads the config on login, evaluates it and stores it into the session data so the message will not disappear until you do this:</p>

<ol start=""10"">
<li>Log out of phpMyAdmin and log in again</li>
</ol>

<p>Problem solved.</p>
","11506495"
"PHP $_SERVER['HTTP_HOST'] vs. $_SERVER['SERVER_NAME'], am I understanding the man pages correctly?","285737","","<p>I did a lot of searching and also read the PHP <a href=""http://php.net/reserved.variables.server"" rel=""nofollow noreferrer"">$_SERVER</a> docs. Do I have this right regarding which to use for my PHP scripts for simple link definitions used throughout my site?</p>

<p><code>$_SERVER['SERVER_NAME']</code> is based on your web servers config file (Apache2 in my case), and varies depending on a few directives: (1) VirtualHost, (2) ServerName, (3) UseCanonicalName, etc.</p>

<p><code>$_SERVER['HTTP_HOST']</code> is based on the request from the client.</p>

<p>Therefore, it would seem to me that the proper one to use in order to make my scripts as compatible as possible would be <code>$_SERVER['HTTP_HOST']</code>. Is this assumption correct?</p>

<p><strong>Followup comments:</strong></p>

<p>I guess I got a little paranoid after reading this article and noting that some folks said ""they wouldn't trust any of the <code>$_SERVER</code> vars"":</p>

<ul>
<li><p><a href=""http://markjaquith.wordpress.com/2009/09/21/php-server-vars-not-safe-in-forms-or-links/"" rel=""nofollow noreferrer"">http://markjaquith.wordpress.com/2009/09/21/php-server-vars-not-safe-in-forms-or-links/</a></p></li>
<li><p><a href=""http://php.net/manual/en/reserved.variables.server.php#89567"" rel=""nofollow noreferrer"">http://php.net/manual/en/reserved.variables.server.php#89567</a> (comment: Vladimir Kornea 14-Mar-2009 01:06)</p></li>
</ul>

<p>Apparently the discussion is mainly about <code>$_SERVER['PHP_SELF']</code> and why you shouldn't use it in the form action attribute without proper escaping to prevent XSS attacks.</p>

<p>My conclusion about my original question above is that it is ""safe"" to use <code>$_SERVER['HTTP_HOST']</code> for all links on a site without having to worry about XSS attacks, even when used in forms.</p>

<p>Please correct me if I'm wrong.</p>
","<p>That’s probably everyone’s first thought. But it’s a little bit more difficult. See <a href=""http://shiflett.org/blog/2006/mar/server-name-versus-http-host"" rel=""noreferrer"">Chris Shiflett’s article <em><code>SERVER_NAME</code> Versus <code>HTTP_HOST</code></em></a>.</p>

<p>It seems that there is no silver bullet. Only when you <a href=""http://httpd.apache.org/docs/2.2/mod/core.html#usecanonicalname"" rel=""noreferrer"">force Apache to use the canonical name</a> you will always get the right server name with <code>SERVER_NAME</code>.</p>

<p>So you either go with that or you check the host name against a white list:</p>

<pre><code>$allowed_hosts = array('foo.example.com', 'bar.example.com');
if (!isset($_SERVER['HTTP_HOST']) || !in_array($_SERVER['HTTP_HOST'], $allowed_hosts)) {
    header($_SERVER['SERVER_PROTOCOL'].' 400 Bad Request');
    exit;
}
</code></pre>
","1459794"
"How to remove the first character of string in PHP?","285671","","<pre><code>$str=':this is a applepie :) ';
</code></pre>

<p>How to use <a href=""https://en.wikipedia.org/wiki/PHP"" rel=""noreferrer"">PHP</a>, Remove the first character <code>:</code>  </p>
","<p>To remove every <code>:</code> from the beginning of a string, you can use <a href=""http://php.net/ltrim"" rel=""noreferrer"">ltrim</a>:</p>

<pre class=""lang-php prettyprint-override""><code>$str = '::f:o:';
$str = ltrim($str, ':');
var_dump($str); //=&gt; 'f:o:'
</code></pre>
","4638589"
"Facebook Graph API, how to get users email?","284638","","<p>I'm using the Graph API, but I can't figure out how to get a logged-in users email address.</p>

<p>The intro to Graph states ""The Graph API can provide access to all of the basic account registration data you would typically request in a sign-up form for your site, including name, email address, profile picture, and birthday""</p>

<p>All well and good, but how do I access that info?</p>

<p>This is what I have so far:</p>

<pre><code>$json = $facebook-&gt;api('/me');

$first = $json['first_name']; // gets first name
$last = $json['last_name'];
</code></pre>
","<p>The only way to get the users e-mail address is to request extended permissions on the email field.  The user must allow you to see this and you cannot get the e-mail addresses of the user's friends.</p>

<p><a href=""http://developers.facebook.com/docs/authentication/permissions"" rel=""noreferrer"">http://developers.facebook.com/docs/authentication/permissions</a></p>

<p>You can do this if you are using Facebook connect by passing scope=email in the get string of your call to the Auth Dialog.</p>

<p>I'd recommend using an <a href=""https://github.com/facebook/facebook-php-sdk"" rel=""noreferrer"">SDK</a> instead of file_get_contents as it makes it far easier to perform the <a href=""http://developers.facebook.com/docs/authentication/"" rel=""noreferrer"">Oauth</a> authentication.</p>
","3611781"
"How to get first 5 characters from string","284466","","<p>How to get first 5 characters from string using php</p>

<pre><code>$myStr = ""HelloWordl"";
</code></pre>

<p>result should be like this</p>

<pre><code>$result = ""Hello"";
</code></pre>
","<p>For <a href=""http://en.wikipedia.org/wiki/Single-byte_encoding"" rel=""noreferrer"">single-byte strings</a> (e.g. US-ASCII, ISO 8859 family, etc.) use <a href=""http://php.net/substr"" rel=""noreferrer""><code>substr</code></a> and for <a href=""http://en.wikipedia.org/wiki/Multi-byte_character_set"" rel=""noreferrer"">multi-byte strings</a> (e.g. UTF-8, UTF-16, etc.) use <a href=""http://php.net/mb_substr"" rel=""noreferrer""><code>mb_substr</code></a>:</p>

<pre><code>// singlebyte strings
$result = substr($myStr, 0, 5);
// multibyte strings
$result = mb_substr($myStr, 0, 5);
</code></pre>
","3787576"
"In PHP, how do you change the key of an array element?","284087","","<p>I have an associative array in the form <code>key =&gt; value</code> where key is a numerical value, however it is not a sequential numerical value. The key is actually an ID number and the value is a count. This is fine for most instances, however I want a function that gets the human-readable name of the array and uses that for the key, without changing the value.</p>

<p>I didn't see a function that does this, but I'm assuming I need to provide the old key and new key (both of which I have) and transform the array. Is there an efficient way of doing this?</p>
","<pre><code>$arr[$newkey] = $arr[$oldkey];
unset($arr[$oldkey]);
</code></pre>
","240676"
"Get the current script file name","283998","","<p>If I have PHP script, how can I get the filename from inside that script?</p>

<p>Also, given the name of a script of the form <code>jquery.js.php</code>, how can I extract just the ""jquery.js"" part?</p>
","<p>Just use the <a href=""http://php.net/manual/en/language.constants.predefined.php"" rel=""noreferrer"">PHP magic constant</a> <code>__FILE__</code> to get the current filename.</p>

<p>But it seems you want the part without <code>.php</code>. So...</p>

<pre><code>basename(__FILE__, '.php'); 
</code></pre>

<p>A more generic file extension remover would look like this...</p>

<pre><code>function chopExtension($filename) {
    return pathinfo($filename, PATHINFO_FILENAME);
}

var_dump(chopExtension('bob.php')); // string(3) ""bob""
var_dump(chopExtension('bob.i.have.dots.zip')); // string(15) ""bob.i.have.dots""
</code></pre>

<p>Using standard string library functions is <a href=""http://codepad.org/fDO0AvHD"" rel=""noreferrer"">much quicker</a>, as you'd expect.</p>

<pre><code>function chopExtension($filename) {
    return substr($filename, 0, strrpos($filename, '.'));
}
</code></pre>
","4221345"
"Adding one day to a date","282089","","<p>My code to add one day to a date returns a date before day adding: 
<code>2009-09-30 20:24:00</code> date after adding one day SHOULD be rolled over to the next month: <code>1970-01-01 17:33:29</code></p>

<pre><code>&lt;?php

    //add day to date test for month roll over

    $stop_date = date('Y-m-d H:i:s', strtotime(""2009-09-30 20:24:00""));

    echo 'date before day adding: '.$stop_date; 

    $stop_date = date('Y-m-d H:i:s', strtotime('+1 day', $stop_date));

    echo ' date after adding one day. SHOULD be rolled over to the next month: '.$stop_date;
?&gt;
</code></pre>

<p>I have used pretty similar code before, what am I doing wrong here?</p>
","<pre><code>&lt;?php
$stop_date = '2009-09-30 20:24:00';
echo 'date before day adding: ' . $stop_date; 
$stop_date = date('Y-m-d H:i:s', strtotime($stop_date . ' +1 day'));
echo 'date after adding 1 day: ' . $stop_date;
?&gt;
</code></pre>

<p>For PHP 5.2.0+, you may also do as follows:</p>

<pre><code>$stop_date = new DateTime('2009-09-30 20:24:00');
echo 'date before day adding: ' . $stop_date-&gt;format('Y-m-d H:i:s'); 
$stop_date-&gt;modify('+1 day');
echo 'date after adding 1 day: ' . $stop_date-&gt;format('Y-m-d H:i:s');
</code></pre>
","1394811"
"Back to previous page with header( ""Location: "" ); in PHP","281978","","<p>The title of this question kind of explains my question. How do I redirect the PHP page visitor back to their previous page with the <code>header( ""Location: URL of previous page"" );</code></p>
","<p>try:</p>

<pre><code>header('Location: ' . $_SERVER['HTTP_REFERER']);
</code></pre>

<p>Note that this may not work with secure pages (HTTPS) and it's a pretty bad idea overall as the header can be hijacked, sending the user to some other destination. The header may not even be sent by the browser.</p>

<p>Ideally, you will want to either:</p>

<ul>
<li>Append the return address to the request as a query variable (eg. ?back=/list)</li>
<li>Define a return page in your code (ie. all successful form submissions redirect to the listing page)</li>
<li>Provide the user the option of where they want to go next (eg. Save and continue editing or just Save)</li>
</ul>
","5285044"
"Checking if the string is empty","281416","","<p>I have a function isNotEmpty which returns true if the string is not empty and false if the string is empty. I've found out that it is not working if I pass an empty string through it. </p>

<pre><code>function isNotEmpty($input) 
{
    $strTemp = $input;
    $strTemp = trim($strTemp);

    if(strTemp != '') //Also tried this ""if(strlen($strTemp) &gt; 0)""
    {
         return true;
    }

    return false;
}
</code></pre>

<p>The validation of the string using isNotEmpty is done:</p>

<pre><code>if(isNotEmpty($userinput['phoneNumber']))
{
    //validate the phone number
}
else
{
    echo ""Phone number not entered&lt;br/&gt;"";
}
</code></pre>

<p>If the string is empty the else doesn't execute, I don't understand why, can someone please shed some light on this please.</p>
","<p>Simple problem actually. Change:</p>

<pre><code>if(strTemp != '')
</code></pre>

<p>to </p>

<pre><code>if($strTemp != '')
</code></pre>

<p>Arguably you may also want to change it to:</p>

<pre><code>if($strTemp !== '')
</code></pre>

<p>since <code>!= ''</code> will return true if you pass is numeric 0 and a few other cases due to <a href=""http://sldn.softlayer.com/01/2009/php-type-conversions-for-comparison/"" rel=""noreferrer"">PHP's automatic type conversion</a>.</p>

<p>Also bear in mind PHP has an <a href=""http://www.php.net/empty"" rel=""noreferrer"">empty()</a> function already.</p>
","719002"
"Can PHP cURL retrieve response headers AND body in a single request?","281415","","<p>Is there any way to get both headers and body for a cURL request using PHP? I found that this option:</p>

<pre><code>curl_setopt($ch, CURLOPT_HEADER, true);
</code></pre>

<p>is going to return the <strong>body plus headers</strong>, but then I need to parse it to get the body. Is there any way to get both in a more usable (and secure) way?</p>

<p>Note that for ""single request"" I mean avoiding issuing a HEAD request prior of GET/POST.</p>
","<p>One solution to this was posted in the PHP documentation comments: <a href=""http://www.php.net/manual/en/function.curl-exec.php#80442"" rel=""noreferrer"">http://www.php.net/manual/en/function.curl-exec.php#80442</a></p>

<p><strong>Code example:</strong></p>

<pre><code>$ch = curl_init();
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_VERBOSE, 1);
curl_setopt($ch, CURLOPT_HEADER, 1);
// ...

$response = curl_exec($ch);

// Then, after your curl_exec call:
$header_size = curl_getinfo($ch, CURLINFO_HEADER_SIZE);
$header = substr($response, 0, $header_size);
$body = substr($response, $header_size);
</code></pre>

<p><strong>Warning:</strong> As noted in the comments below, this may not be reliable when used with proxy servers or when handling certain types of redirects. @Geoffrey's answer may handle these more reliably.</p>
","9183272"
"Is there a function to make a copy of a PHP array to another?","280459","","<p>Is there a function to make a copy of a PHP array to another?</p>

<p>I have been burned a few times trying to copy PHP arrays. I want to copy an array defined inside an object to a global outside it.</p>
","<p>In PHP arrays are assigned by copy, while objects are assigned by reference. This means that:</p>

<pre><code>$a = array();
$b = $a;
$b['foo'] = 42;
var_dump($a);
</code></pre>

<p>Will yield:</p>

<pre><code>array(0) {
}
</code></pre>

<p>Whereas:</p>

<pre><code>$a = new StdClass();
$b = $a;
$b-&gt;foo = 42;
var_dump($a);
</code></pre>

<p>Yields:</p>

<pre><code>object(stdClass)#1 (1) {
  [""foo""]=&gt;
  int(42)
}
</code></pre>

<p>You could get confused by intricacies such as <a href=""http://php.net/manual/en/class.arrayobject.php"" rel=""noreferrer""><code>ArrayObject</code></a>, which is an object that acts exactly like an array. Being an object however, it has reference semantics.</p>

<p>Edit: @AndrewLarsson raises a point in the comments below. PHP has a special feature called ""references"". They are somewhat similar to pointers in languages like C/C++, but not quite the same. If your array contains references, then while the array itself is passed by copy, the references will still resolve to the original target. That's of course usually the desired behaviour, but I thought it was worth mentioning.</p>
","1533214"
"PHP Remove key from associative array","278324","","<p>I have an PHP array that looks something like this: </p>

<pre><code>Index              Key        Value
[0]                1       Awaiting for Confirmation
[1]                2       Asssigned
[2]                3       In Progress
[3]                4       Completed
[4]                5       Mark As Spam
</code></pre>

<p>When I var_dump the array values i get this:</p>

<pre><code>array(5) { [0]=&gt; array(2) { [""key""]=&gt; string(1) ""1"" [""value""]=&gt; string(25) ""Awaiting for Confirmation"" } [1]=&gt; array(2) { [""key""]=&gt; string(1) ""2"" [""value""]=&gt; string(9) ""Asssigned"" } [2]=&gt; array(2) { [""key""]=&gt; string(1) ""3"" [""value""]=&gt; string(11) ""In Progress"" } [3]=&gt; array(2) { [""key""]=&gt; string(1) ""4"" [""value""]=&gt; string(9) ""Completed"" } [4]=&gt; array(2) { [""key""]=&gt; string(1) ""5"" [""value""]=&gt; string(12) ""Mark As Spam"" } } 
</code></pre>

<p>I wanted to remove  ""Completed"" and ""Mark As Spam"" I know I can unset[$array[3],$array[4]) will do the trick. But the problem is that sometime the index number can be different therefore is there a way to remove ""completed"" and ""Mark As Spam"" by matching the value name?</p>

<p>Thanks so much in advance</p>
","<p>Your array is quite strange : <strong>why not just use the <code>key</code> as index, and the <code>value</code> as... the value ?</strong></p>

<p>Wouldn't it be a lot easier if your array was declared like this :</p>

<pre><code>$array = array(
    1 =&gt; 'Awaiting for Confirmation', 
    2 =&gt; 'Asssigned', 
    3 =&gt; 'In Progress', 
    4 =&gt; 'Completed', 
    5 =&gt; 'Mark As Spam', 
);
</code></pre>

<p>That would allow you to use your values of <code>key</code> as indexes to access the array... </p>

<p>And you'd be able to use functions to search on the values, such <a href=""http://fr2.php.net/array_search"" rel=""noreferrer""><strong><code>as array_search()</code></strong></a> :</p>

<pre><code>$indexCompleted = array_search('Completed', $array);
unset($array[$indexCompleted]);

$indexSpam = array_search('Mark As Spam', $array);
unset($array[$indexSpam]);

var_dump($array);
</code></pre>

<p>Easier than with your array, no ?</p>

<p><br></p>

<hr>

<p>Instead, with your array that looks like this :</p>

<pre><code>$array = array(
    array('key' =&gt; 1, 'value' =&gt; 'Awaiting for Confirmation'), 
    array('key' =&gt; 2, 'value' =&gt; 'Asssigned'), 
    array('key' =&gt; 3, 'value' =&gt; 'In Progress'), 
    array('key' =&gt; 4, 'value' =&gt; 'Completed'), 
    array('key' =&gt; 5, 'value' =&gt; 'Mark As Spam'), 
);
</code></pre>

<p>You'll have to loop over all items, to analyse the <code>value</code>, and unset the right items :</p>

<pre><code>foreach ($array as $index =&gt; $data) {
    if ($data['value'] == 'Completed' || $data['value'] == 'Mark As Spam') {
        unset($array[$index]);
    }
}
var_dump($array);
</code></pre>

<p>Even if do-able, it's not that simple... and I insist : can you not change the format of your array, to work with a simpler key/value system ?</p>
","5450162"
"http://localhost/ not working on Windows 7. What's the problem?","278134","","<p>I have a big problem opening <a href=""http://localhost/"" rel=""noreferrer"">http://localhost/</a> on Windows 7 (beta). I installed this os and everything went great; when I installed Wamp I saw that localhost is not working at all. I just see this error:</p>

<blockquote>
  <h3>Failed to Connect</h3>
  
  <p>Firefox can't establish a connection to the server at localhost.</p>
</blockquote>

<p>in Mozilla and Explorer.</p>

<p>I removed Wamp and after some weeks (that means two weeks from today) I installed NetBeans on Windows 7. I created a test PHP script and when I debug it, I get the same error again. I tried to access it with ip 127.... but still the same. What is the problem?<br>
When i installed NetBeans I installed it in port 8080.</p>
","<p>To fix the port 80 problem do:</p>

<p>From cmd as administrator:</p>

<ol>
<li><code>sc config http start= demand</code> (you need a space after the equal sign and not before)</li>
<li>Reboot</li>
<li>Run the command (<code>netsh http show servicestate</code>) as administrator to check that the port 80 is in use</li>
</ol>

<p>After you have run this command, you can disable http.sys as follows:</p>

<ol>
<li><code>net stop http</code> (stop the process)</li>
<li><code>Sc config http start= disabled</code> (if you want to disable the service forever)</li>
</ol>

<p>it works for me.</p>
","1839118"
"PHP Fatal error: Using $this when not in object context","277885","","<p>I've got a problem:</p>

<p>I'm writing a new WebApp without a Framework.</p>

<p>In my <strong>index.php</strong> I'm using: <code>require_once('load.php');</code></p>

<p>And in <strong>load.php</strong> I'm using <code>require_once('class.php');</code> to load my <strong>class.php</strong>.</p>

<p>In my <strong>class.php</strong> I've got this error:</p>

<blockquote>
  <p>Fatal error: Using $this when not in object context in class.php on line ... (in this example it would be 11)</p>
</blockquote>

<p>An example how my <em>class.php</em> is written:</p>

<pre><code>class foobar {

    public $foo;

    public function __construct() {
        global $foo;

        $this-&gt;foo = $foo;
    }

    public function foobarfunc() {
        return $this-&gt;foo();
    }

    public function foo() {
        return $this-&gt;foo;
    }
}
</code></pre>

<p>In my <em>index.php</em> I'm loading maybe <code>foobarfunc()</code> like this:</p>

<pre><code>foobar::foobarfunc();
</code></pre>

<p>but can also be</p>

<pre><code>$foobar = new foobar;
$foobar-&gt;foobarfunc();
</code></pre>

<p>Why is the error coming?</p>
","<blockquote>
  <p>In my index.php I'm loading maybe
  foobarfunc() like this:</p>
</blockquote>

<pre><code> foobar::foobarfunc();  // Wrong, it is not static method
</code></pre>

<blockquote>
  <p>but can also be</p>
</blockquote>

<pre><code>$foobar = new foobar;  // correct
$foobar-&gt;foobarfunc();
</code></pre>

<p>You can not invoke method this way because it is not static method.</p>

<pre><code>foobar::foobarfunc();
</code></pre>

<p>You should instead use:</p>

<pre><code>foobar-&gt;foobarfunc();
</code></pre>

<p>If however you have created a static method something like:</p>

<pre><code>static $foo; // your top variable set as static

public static function foo() {
    return self::$foo;
}
</code></pre>

<p>then you can use this:</p>

<pre><code>foobar::foobarfunc();
</code></pre>
","2350948"
"Convert seconds to Hour:Minute:Second","276667","","<p>I need to convert seconds to ""Hour:Minute:Second"".</p>

<p>For example: ""685"" converted to ""00:11:25""</p>

<p>How can I achieve this?</p>
","<p>You can use the <a href=""http://us3.php.net/gmdate"" rel=""noreferrer""><code>gmdate()</code></a> function:</p>

<pre><code>echo gmdate(""H:i:s"", 685);
</code></pre>
","3172358"
"How to use FormData for ajax file upload","276494","","<p>This is my html which I'm generating dynamically using drag and drop functionality.</p>

<pre><code>&lt;form method=""POST"" id=""contact"" name=""13"" class=""form-horizontal wpc_contact"" novalidate=""novalidate"" enctype=""multipart/form-data""&gt;
&lt;fieldset&gt;
    &lt;div id=""legend"" class=""""&gt;
        &lt;legend class=""""&gt;file demoe 1&lt;/legend&gt;
        &lt;div id=""alert-message"" class=""alert hidden""&gt;&lt;/div&gt;
    &lt;/div&gt;

    &lt;div class=""control-group""&gt;
        &lt;!-- Text input--&gt;
        &lt;label class=""control-label"" for=""input01""&gt;Text input&lt;/label&gt;
        &lt;div class=""controls""&gt;
            &lt;input type=""text"" placeholder=""placeholder"" class=""input-xlarge"" name=""name""&gt;
            &lt;p class=""help-block"" style=""display:none;""&gt;text_input&lt;/p&gt;
        &lt;/div&gt;
        &lt;div class=""control-group""&gt;  &lt;/div&gt;
        &lt;label class=""control-label""&gt;File Button&lt;/label&gt;

        &lt;!-- File Upload --&gt; 
        &lt;div class=""controls""&gt;
            &lt;input class=""input-file"" id=""fileInput"" type=""file"" name=""file""&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=""control-group""&gt;    

        &lt;!-- Button --&gt; 
        &lt;div class=""controls""&gt;
            &lt;button class=""btn btn-success""&gt;Button&lt;/button&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/fieldset&gt;
&lt;/form&gt; 
</code></pre>

<p>this is my js code...</p>

<pre><code>&lt;script&gt;
    $('.wpc_contact').submit(function(event){
        var formname = $('.wpc_contact').attr('name');
        var form = $('.wpc_contact').serialize();               
        var FormData = new FormData($(form)[1]);

        $.ajax({
            url : '&lt;?php echo plugins_url(); ?&gt;'+'/wpc-contact-form/resources/js/tinymce.php',
            data : {form:form,formname:formname,ipadd:ipadd,FormData:FormData},
            type : 'POST',
            processData: false,
            contentType: false,
            success : function(data){
            alert(data); 
            }
        });
   }
</code></pre>
","<p>For correct form data usage you need to do 2 steps. </p>

<p><strong>Preparations</strong></p>

<p>You can give your whole form to FormData() for processing</p>

<pre><code>var form = $('form')[0]; // You need to use standard javascript object here
var formData = new FormData(form);
</code></pre>

<p>or specify exact data for FormData()</p>

<pre><code>var formData = new FormData();
formData.append('section', 'general');
formData.append('action', 'previewImg');
// Attach file
formData.append('image', $('input[type=file]')[0].files[0]); 
</code></pre>

<p><strong>Sending form</strong></p>

<p>Ajax request with jquery will looks like this:</p>

<pre><code>$.ajax({
    url: 'Your url here',
    data: formData,
    type: 'POST',
    contentType: false, // NEEDED, DON'T OMIT THIS (requires jQuery 1.6+)
    processData: false, // NEEDED, DON'T OMIT THIS
    // ... Other options like success and etc
});
</code></pre>

<p>After this it will send ajax request like you submit regular form with <code>enctype=""multipart/form-data""</code></p>

<p>Update: This request cannot work without <code>type:""POST""</code> in options, cause all files must be sent via POST request.  </p>

<p><strong>Note:</strong>  <code>contentType: false</code> only available <a href=""http://api.jquery.com/jQuery.ajax/"" rel=""noreferrer"">from jQuery 1.6 onwards</a></p>
","21045034"
"How to extract img src, title and alt from html using php?","276418","","<p>I would like to create a page where all images which reside on my website are listed with title and alternative representation.</p>

<p>I already wrote me a little program to find and load all HTML files, but now I am stuck at how to extract <code>src</code>, <code>title</code> and <code>alt</code> from this HTML:</p>

<pre><code>&lt;img <b>src</b>=""/image/fluffybunny.jpg"" <b>title</b>=""Harvey the bunny"" <b>alt</b>=""a cute little fluffy bunny"" /></code></pre>

<p>I guess this should be done with some regex, but since the order of the tags may vary, and I need all of them, I don't really know how to parse this in an elegant way (I could do it the hard char by char way, but that's painful).</p>
","<h2>EDIT : now that I know better</h2>

<p>Using regexp to solve this kind of problem is <a href=""https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454"">a bad idea</a> and will likely lead in unmaintainable and unreliable code. Better use an <a href=""http://simplehtmldom.sourceforge.net/"" rel=""noreferrer"">HTML parser</a>. </p>

<h2>Solution With regexp</h2>

<p>In that case it's better to split the process into two parts :</p>

<ul>
<li>get all the img tag</li>
<li>extract their metadata</li>
</ul>

<p>I will assume your doc is not xHTML strict so you can't use an XML parser. E.G. with this web page source code :</p>

<pre><code>/* preg_match_all match the regexp in all the $html string and output everything as 
an array in $result. ""i"" option is used to make it case insensitive */

preg_match_all('/&lt;img[^&gt;]+&gt;/i',$html, $result); 

print_r($result);
Array
(
    [0] =&gt; Array
        (
            [0] =&gt; &lt;img src=""/Content/Img/stackoverflow-logo-250.png"" width=""250"" height=""70"" alt=""logo link to homepage"" /&gt;
            [1] =&gt; &lt;img class=""vote-up"" src=""/content/img/vote-arrow-up.png"" alt=""vote up"" title=""This was helpful (click again to undo)"" /&gt;
            [2] =&gt; &lt;img class=""vote-down"" src=""/content/img/vote-arrow-down.png"" alt=""vote down"" title=""This was not helpful (click again to undo)"" /&gt;
            [3] =&gt; &lt;img src=""http://www.gravatar.com/avatar/df299babc56f0a79678e567e87a09c31?s=32&amp;d=identicon&amp;r=PG"" height=32 width=32 alt=""gravatar image"" /&gt;
            [4] =&gt; &lt;img class=""vote-up"" src=""/content/img/vote-arrow-up.png"" alt=""vote up"" title=""This was helpful (click again to undo)"" /&gt;

[...]
        )

)
</code></pre>

<p>Then we get all the img tag attributes with a loop :</p>

<pre><code>$img = array();
foreach( $result as $img_tag)
{
    preg_match_all('/(alt|title|src)=(""[^""]*"")/i',$img_tag, $img[$img_tag]);
}

print_r($img);

Array
(
    [&lt;img src=""/Content/Img/stackoverflow-logo-250.png"" width=""250"" height=""70"" alt=""logo link to homepage"" /&gt;] =&gt; Array
        (
            [0] =&gt; Array
                (
                    [0] =&gt; src=""/Content/Img/stackoverflow-logo-250.png""
                    [1] =&gt; alt=""logo link to homepage""
                )

            [1] =&gt; Array
                (
                    [0] =&gt; src
                    [1] =&gt; alt
                )

            [2] =&gt; Array
                (
                    [0] =&gt; ""/Content/Img/stackoverflow-logo-250.png""
                    [1] =&gt; ""logo link to homepage""
                )

        )

    [&lt;img class=""vote-up"" src=""/content/img/vote-arrow-up.png"" alt=""vote up"" title=""This was helpful (click again to undo)"" /&gt;] =&gt; Array
        (
            [0] =&gt; Array
                (
                    [0] =&gt; src=""/content/img/vote-arrow-up.png""
                    [1] =&gt; alt=""vote up""
                    [2] =&gt; title=""This was helpful (click again to undo)""
                )

            [1] =&gt; Array
                (
                    [0] =&gt; src
                    [1] =&gt; alt
                    [2] =&gt; title
                )

            [2] =&gt; Array
                (
                    [0] =&gt; ""/content/img/vote-arrow-up.png""
                    [1] =&gt; ""vote up""
                    [2] =&gt; ""This was helpful (click again to undo)""
                )

        )

    [&lt;img class=""vote-down"" src=""/content/img/vote-arrow-down.png"" alt=""vote down"" title=""This was not helpful (click again to undo)"" /&gt;] =&gt; Array
        (
            [0] =&gt; Array
                (
                    [0] =&gt; src=""/content/img/vote-arrow-down.png""
                    [1] =&gt; alt=""vote down""
                    [2] =&gt; title=""This was not helpful (click again to undo)""
                )

            [1] =&gt; Array
                (
                    [0] =&gt; src
                    [1] =&gt; alt
                    [2] =&gt; title
                )

            [2] =&gt; Array
                (
                    [0] =&gt; ""/content/img/vote-arrow-down.png""
                    [1] =&gt; ""vote down""
                    [2] =&gt; ""This was not helpful (click again to undo)""
                )

        )

    [&lt;img src=""http://www.gravatar.com/avatar/df299babc56f0a79678e567e87a09c31?s=32&amp;d=identicon&amp;r=PG"" height=32 width=32 alt=""gravatar image"" /&gt;] =&gt; Array
        (
            [0] =&gt; Array
                (
                    [0] =&gt; src=""http://www.gravatar.com/avatar/df299babc56f0a79678e567e87a09c31?s=32&amp;d=identicon&amp;r=PG""
                    [1] =&gt; alt=""gravatar image""
                )

            [1] =&gt; Array
                (
                    [0] =&gt; src
                    [1] =&gt; alt
                )

            [2] =&gt; Array
                (
                    [0] =&gt; ""http://www.gravatar.com/avatar/df299babc56f0a79678e567e87a09c31?s=32&amp;d=identicon&amp;r=PG""
                    [1] =&gt; ""gravatar image""
                )

        )

   [..]
        )

)
</code></pre>

<p>Regexps are CPU intensive so you may want to cache this page. If you have no cache system, you can tweak your own by using <a href=""http://fr2.php.net/manual/fr/function.ob-start.php"" rel=""noreferrer"">ob_start</a> and loading / saving from a text file.</p>

<h2>How does this stuff work ?</h2>

<p>First, we use <a href=""http://fr2.php.net/manual/fr/function.preg-match-all.php"" rel=""noreferrer"">preg_ match_ all</a>, a function that gets every string matching the pattern and ouput it in it's third parameter.</p>

<p>The regexps :</p>

<pre><code>&lt;img[^&gt;]+&gt;
</code></pre>

<p>We apply it on all html web pages. It can be read as <em>every string that starts with ""<code>&lt;img</code>"", contains non "">"" char and ends with a ></em>.</p>

<pre><code>(alt|title|src)=(""[^""]*"")
</code></pre>

<p>We apply it successively on each img tag. It can be read as <em>every string starting with ""alt"", ""title"" or ""src"", then a ""="", then a ' "" ', a bunch of stuff that are not ' "" ' and ends with a ' "" '. Isolate the sub-strings between ()</em>. </p>

<p>Finally, every time you want to deal with regexps, it handy to have good tools to quickly test them. Check this <a href=""http://regex.larsolavtorvik.com/"" rel=""noreferrer"">online regexp tester</a>.</p>

<p>EDIT : answer to the first comment.</p>

<p>It's true that I did not think about the (hopefully few) people using single quotes.</p>

<p>Well, if you use only ', just replace all the "" by '. </p>

<p>If you mix both. First you should slap yourself :-), then try to use (""|') instead or "" and [^ø] to replace [^""].</p>
","143455"
"How to display HTML tags as plain text","275371","","<p>I have an input form on my website where HTML is allowed and I'm trying to add instructions about the use of HTML tags. I'd like the text to</p>

<pre><code>&lt;strong&gt;Look just like this line - so then know how to type it&lt;/strong&gt;
</code></pre>

<p>But so far all I get is:</p>

<p><strong>Look just like this line - so then know how to type it</strong></p>

<p>How can I show the tags so people know what to type?</p>
","<p>replace <code>&lt;</code> by <code>&amp;lt;</code> and <code>&gt;</code> by <code>&amp;gt;</code></p>
","6817293"
"Convert php array to Javascript","273403","","<p>How can I convert a PHP array in a format like this</p>

<pre><code>Array
(
    [0] =&gt; 001-1234567
    [1] =&gt; 1234567
    [2] =&gt; 12345678
    [3] =&gt; 12345678
    [4] =&gt; 12345678
    [5] =&gt; AP1W3242
    [6] =&gt; AP7X1234
    [7] =&gt; AS1234
    [8] =&gt; MH9Z2324
    [9] =&gt; MX1234
    [10] =&gt; TN1A3242
    [11] =&gt; ZZ1234
)
</code></pre>

<p>to a Javascript array in the format below?</p>

<pre><code>var cities = [
    ""Aberdeen"",
    ""Ada"",
    ""Adamsville"",
    ""Addyston"",
    ""Adelphi"",
    ""Adena"",
    ""Adrian"",
    ""Akron"",
    ""Albany""
];
</code></pre>
","<p><strong><a href=""https://stackoverflow.com/a/5619038/367456"">Spudley's answer is fine</a>.</strong></p>

<blockquote>
  <p><strong>Security Notice:</strong> <em>The following should not be necessary any longer for you</em></p>
</blockquote>

<p>If you don't have PHP 5.2 you can use something like this:</p>

<pre><code>function js_str($s)
{
    return '""' . addcslashes($s, ""\0..\37\""\\"") . '""';
}

function js_array($array)
{
    $temp = array_map('js_str', $array);
    return '[' . implode(',', $temp) . ']';
}

echo 'var cities = ', js_array($php_cities_array), ';';
</code></pre>
","5619163"
"how to bypass Access-Control-Allow-Origin?","271251","","<p>I'm doing a ajax call to my own server on a platform which they set prevent these ajax calls (but I need it to fetch the data from my server to display retrieved data from my server's database).
My ajax script is working , it can send the data over to my server's php script to allow it to process.
However it cannot get the processed data back as it is blocked by <code>""Access-Control-Allow-Origin""</code></p>

<p>I have no access to that platform's source/core. so I can't remove the script that it disallowing me to do so.
(P/S I used Google Chrome's Console and found out this error)</p>

<p>The Ajax code as shown below:</p>

<pre><code> $.ajax({
     type: ""GET"",
     url: ""http://example.com/retrieve.php"",
     data: ""id="" + id + ""&amp;url="" + url,
     dataType: 'json',   
     cache: false,
     success: function(data)
      {
        var friend = data[1];              
        var blog = data[2];           
        $('#user').html(""&lt;b&gt;Friends: &lt;/b&gt;""+friend+""&lt;b&gt;&lt;br&gt; Blogs: &lt;/b&gt;""+blog);

      } 
  });
</code></pre>

<p>or is there a <code>JSON</code> equivalent code to the ajax script above ?  I think <code>JSON</code> is allowed.</p>

<p>I hope someone could help me out.</p>
","<p>put it on top of retrieve.php</p>

<pre><code> header('Access-Control-Allow-Origin: *');  
</code></pre>

<p>It is important to note that the <code>header()</code> must be called before any actual output is sent. </p>

<p><strong>Wrong</strong> </p>

<pre><code>&lt;html&gt;
&lt;?php
header('Access-Control-Allow-Origin: *'); 
?&gt;
</code></pre>

<p><strong>Correct</strong></p>

<pre><code>&lt;?php
header('Access-Control-Allow-Origin: *'); 
?&gt;
&lt;html&gt;
</code></pre>
","7564919"
"Pass a PHP string to a JavaScript variable (and escape newlines)","271215","","<p>What is the easiest way to encode a PHP string for output to a JavaScript variable?</p>

<p>I have a PHP string which includes quotes and newlines.  I need the contents of this string to be put into a JavaScript variable.</p>

<p>Normally, I would just construct my JavaScript in a PHP file, à la:</p>

<pre><code>&lt;script&gt;
  var myvar = ""&lt;?php echo $myVarValue;?&gt;"";
&lt;/script&gt;
</code></pre>

<p>However, this doesn't work when <code>$myVarValue</code> contains quotes or newlines.</p>
","<p>Expanding on someone else's answer:</p>

<pre><code>&lt;script&gt;
  var myvar = &lt;?php echo json_encode($myVarValue); ?&gt;;
&lt;/script&gt;
</code></pre>

<p>Using <a href=""http://php.net/json_encode"" rel=""noreferrer"">json_encode()</a> requires:</p>

<ul>
<li>PHP 5.2.0 or greater</li>
<li><code>$myVarValue</code> encoded as UTF-8 (or US-ASCII, of course)</li>
</ul>

<p>Since UTF-8 supports full Unicode, it should be safe to convert on the fly.</p>

<p>Note that because <code>json_encode</code> escapes forward slashes, even a string that contains <code>&lt;/script&gt;</code> will be escaped safely for printing with a script block.</p>
","169035"
"Regular Expression to find a string included between two characters while EXCLUDING the delimiters","269165","","<p>I need to extract from a string a set of characters which are included between two delimiters, without returning the delimiters themselves.</p>

<p>A simple example should be helpful:</p>

<p><strong>Target</strong>: extract the substring between square brackets, without returning the brackets themselves.</p>

<p><strong>Base string</strong>: <em>This is a test string [more or less]</em></p>

<p>If I use the following reg. ex.</p>

<pre>\[.*?\]</pre>

<p>The match is <strong>[more or less]</strong>. I need to get only <strong>more or less</strong> (without the brackets).  </p>

<p>Is it possible to do it?</p>
","<p>Easy done:</p>

<pre><code>(?&lt;=\[)(.*?)(?=\])
</code></pre>

<p>Technically that's using lookaheads and lookbehinds. See <a href=""http://www.regular-expressions.info/lookaround.html"" rel=""noreferrer"">Lookahead and Lookbehind Zero-Width Assertions</a>. The pattern consists of:</p>

<ul>
<li>is preceded by a [ that is not captured (lookbehind);</li>
<li>a non-greedy captured group. It's non-greedy to stop at the first ]; and</li>
<li>is followed by a ] that is not captured (lookahead).</li>
</ul>

<p>Alternatively you can just capture what's between the square brackets:</p>

<pre><code>\[(.*?)\]
</code></pre>

<p>and return the first captured group instead of the entire match.</p>
","1454936"
"How to declare a global variable in php?","269161","","<p>I have code something like this:</p>

<pre><code>&lt;?
    $a=""localhost"";
    function body(){
        global $a;
        echo $a;
    }

    function head(){
        global $a;
        echo $a;
    }

    function footer(){
        global $a;
        echo $a;
    }
?&gt;
</code></pre>

<p>is there any way to define the global variable in one place and make the variable <code>$a</code> accessible in all the functions at once? without making use of <code>global $a;</code> more?</p>
","<p>The <a href=""http://php.net/manual/en/reserved.variables.globals.php""><code>$GLOBALS</code></a> array can be used instead:</p>

<pre><code>$GLOBALS['a'] = 'localhost';

function body(){

    echo $GLOBALS['a'];
}
</code></pre>

<p>From the <a href=""http://php.net/manual/en/reserved.variables.globals.php"">Manual</a>:</p>

<blockquote>
  <p>An associative array containing references to all variables which are currently defined in the global scope of the script. The variable names are the keys of the array.</p>
</blockquote>

<hr>

<p>If you have a set of functions that need some common variables, a class with properties may be a good choice instead of a global:</p>

<pre><code>class MyTest
{
    protected $a;

    public function __construct($a)
    {
        $this-&gt;a = $a;
    }

    public function head()
    {
        echo $this-&gt;a;
    }

    public function footer()
    {
        echo $this-&gt;a;
    }
}

$a = 'localhost';
$obj = new MyTest($a);
</code></pre>
","13530536"
"What is the difference between single-quoted and double-quoted strings in PHP?","268850","","<p>I'm not an expert in PHP programming, but I'm a little confused why I see some code in PHP with string placed in single quotes and sometimes in double quotes.</p>

<p>I just know in .NET, or C language, if it is in single quote, that means it is a character, not a string.</p>
","<p><a href=""http://php.net/manual/en/language.types.string.php"" rel=""noreferrer""><strong>PHP strings</strong></a> can be specified not just in <em>two</em> ways, but in <strong>four</strong> ways.</p>

<ol>
<li><a href=""http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.single"" rel=""noreferrer""><strong>Single quoted strings</strong></a> will display things almost completely ""as is."" Variables and most escape sequences will not be interpreted. The exception is that to display a literal single quote, you can escape it with a back slash <code>\'</code>, and to display a back slash, you can escape it with another backslash <code>\\</code> (<strong>So yes, even single quoted strings are parsed</strong>).</li>
<li><a href=""http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.double"" rel=""noreferrer""><strong>Double quote strings</strong></a> will display a host of escaped characters (including some regexes), and variables in the strings will be evaluated. An important point here is that <strong>you can use curly braces to isolate the name of the variable you want evaluated</strong>. For example let's say you have the variable <code>$type</code> and you what to <code>echo ""The $types are""</code> That will look for the variable <code>$types</code>. To get around this use <code>echo ""The {$type}s are""</code> You can put the left brace before or after the dollar sign. Take a look at <a href=""http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing"" rel=""noreferrer"">string parsing</a> to see how to use array variables and such.</li>
<li><a href=""http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc"" rel=""noreferrer""><strong>Heredoc</strong></a> string syntax works like double quoted strings. It starts with <code>&lt;&lt;&lt;</code>. After this operator, an identifier is provided, then a newline. The string itself follows, and then the same identifier again to close the quotation. You don't need to escape quotes in this syntax. </li>
<li><a href=""http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc"" rel=""noreferrer""><strong>Nowdoc</strong></a> (since PHP 5.3.0) string syntax works essentially like single quoted strings. The difference is that not even single quotes or backslashes have to be escaped. A nowdoc is identified with the same <code>&lt;&lt;&lt;</code> sequence used for heredocs, but the identifier which follows is enclosed in single quotes, e.g. <code>&lt;&lt;&lt;'EOT'</code>. <strong>No parsing is done in nowdoc.</strong></li>
</ol>

<p><strong>Speed:</strong><br>
I would not put too much weight on single quotes being faster than double quotes. They probably are faster in certain situations. Here's an article <a href=""http://phplens.com/lens/php-book/optimizing-debugging-php.php"" rel=""noreferrer"">explaining one manner in which single and double quotes are essentially equally fast since PHP 4.3</a> (<code>Useless Optimizations</code> toward the bottom, section <code>C</code>). Also, this <a href=""http://www.phpbench.com/"" rel=""noreferrer""><strong>benchmarks page</strong></a> has a single vs double quote comparison. Most of the comparisons are the same. There is one comparison where double quotes are slower than single quotes.</p>
","3446286"
"How can I get stock quotes using Google Finance API?","268421","","<p>I'm looking for access to financial data from Google services. </p>

<p>I found <a href=""http://finance.google.com/finance/info?client=ig&amp;q=NASDAQ:MSFT"" rel=""noreferrer"">this URL</a> that gets the stock data for Microsoft.</p>

<p>What are all the possible parameters that Google allows for this kind of HTTP request? I'd like to see all the different information that I could get.</p>
","<p>There's a whole API for managing portfolios. *Link removed. Google no longer provides a developer API for this.</p>

<p>Getting stock quotes is a little harder.  I found one article where someone got stock quotes using Google Spreadsheets.</p>

<p>You can also use the <a href=""http://googlefinanceblog.blogspot.com/2007/10/api-gadgets-and-tabs-oh-my.html"" rel=""nofollow noreferrer"">gadgets</a> but I guess that's not what you're after.</p>

<p>The API you mention is interesting but doesn't seem to be documented (as far as I've been able to find anyway).</p>

<p>Here is some information on <a href=""http://computerprogramming.suite101.com/article.cfm/an_introduction_to_google_finance"" rel=""nofollow noreferrer"">historical prices</a>, just for reference sake.</p>
","527780"
"PHP Fatal Error Failed opening required File","267713","","<p>I am getting the following error from Apache</p>

<p><strong>[Sat Mar 19 23:10:50 2011] [warn] mod_fcgid: stderr: PHP Fatal error:  require_once() [function.require]: Failed opening required '/common/configs/config_templates.inc.php' (include_path='.:/usr/share/pear:/usr/share/php') in /home/viapics1/public_html/common/configs/config.inc.php on line 158</strong></p>

<p>I am definately not an expert of Apache but the file config.inc.php &amp; config_templates.inc.php are there. I also tried navigating to a test.html page I placed in common/configs/ so I assume there is no rights issues going on. I also set the rights on config_templates.inc.php to give everyone read, write, and execute rights. Not sure what to do at this point, I checked to see if there was a /usr/share/php directory and I found there was not but when I did yum install php it said it had the latest. Ideas? </p>
","<p>It's not actually an Apache related question. Nor even a PHP related one.
To understand tis error you have to distinguish a virtual server path from a filesystem path.</p>

<p><code>require</code> operator works with files. But there is no</p>

<pre><code>                          /common/configs/config_templates.inc.php
</code></pre>

<p>file on the server, but rather </p>

<pre><code>/home/viapics1/public_html/common/configs/config_templates.inc.php
</code></pre>

<p>The <code>/home/viapics1/public_html</code> part is called ""Document root"" and it connects a virtual world with a real one. If you change your code to something like</p>

<pre><code>require_once $_SERVER['DOCUMENT_ROOT'].'/common/configs/config_templates.inc.php';
</code></pre>

<p>it will work from any file placed in any directory.   </p>
","5364274"
"How to find the php.ini file used by the command line?","265764","","<p>I need to enable pdo_mysql in my EasyPhp environment, so I went to php.ini file and uncommented the following line:</p>

<pre><code>extension=php_pdo_mysql.dll
</code></pre>

<p>Unfortunately I still have the same problem.
I'm using the CLI so I suppose I need to locate the php.ini file used by the CLI. How can I find it?</p>
","<p>Just run <code>php --ini</code></p>
","3744845"
"send javaScript variable to php variable","265231","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/1917576/how-to-pass-javascript-variables-to-php"">How to pass JavaScript variables to PHP?</a>  </p>
</blockquote>



<p>First I thought that I had to convert javascript to php, but then I found out that I cannot because of server and client side executions. So now I simply want to send ONE variable</p>

<pre><code>&lt;script type=""text/javascript""&gt;
function scriptvariable()
{        
    var theContents = ""the variable"";
}
&lt;/script&gt;
</code></pre>

<p>to a php variable </p>

<pre><code>&lt;?php
$phpvariable
?&gt;
</code></pre>

<p>That function in the javascript executes when let's say I click on a button.</p>

<p>Now I have no idea on how to assign that phpvariable to the javascript one to use the phpvariable to look up stuff in my Database. 
I know I can add it to my url or some thing and refresh the page.. But I would like to do it with AJAX as I might have to use this Ajax method further in my webpage... </p>

<p>So is there an easy way to do this without having to dump pages of code on my page to do one simple thing?</p>
","<p>As Jordan already said you have to post back the javascript variable to your server before the server can handle the value. To do this you can either program a javascript function that submits a form - or you can use ajax / jquery. <a href=""http://api.jquery.com/jQuery.post/"" rel=""noreferrer"">jQuery.post</a></p>

<p>Maybe the most easiest approach for you is something like this</p>

<pre><code>function myJavascriptFunction() { 
  var javascriptVariable = ""John"";
  window.location.href = ""myphpfile.php?name="" + javascriptVariable; 
}
</code></pre>

<p>On your myphpfile.php you can use <code>$_GET['name']</code> after your javascript was executed.</p>

<p>Regards</p>
","8191166"
"Find the last element of an array while using a foreach loop in PHP","265195","","<p>I am writing a SQL query creator using some parameters. In Java, it's very easy to detect the last element of an array from inside the for loop by just checking the current array position with the array length.</p>

<pre><code>for(int i=0; i&lt; arr.length;i++){
     boolean isLastElem = i== (arr.length -1) ? true : false;        
}
</code></pre>

<p>In PHP they have non-integer indexes to access arrays. So you must iterate over an array using a foreach loop. This becomes problematic when you need to take some decision (in my case to append or/and parameter while building query). </p>

<p>I am sure there must be some standard way of doing this. </p>

<p>How do you solve this in PHP?</p>
","<p>It sounds like you want something like this:</p>

<pre><code>$numItems = count($arr);
$i = 0;
foreach($arr as $key=&gt;$value) {
  if(++$i === $numItems) {
    echo ""last index!"";
  }
}    
</code></pre>

<p>That being said, you don't -have- to iterate over an ""array"" using <code>foreach</code> in php.  </p>
","665138"
"PHP + MySQL transactions examples","264438","","<p>I really haven't found normal example of PHP file where MySQL transactions are being used. Can you show me simple example of that? </p>

<p>And one more question. I've already done a lot of programming and didn't use transactions. Can I put a PHP function or something in <code>header.php</code> that if one <code>mysql_query</code> fails, then the others fail too?</p>

<hr>

<p>I think I have figured it out, is it right?:</p>

<pre><code>mysql_query(""SET AUTOCOMMIT=0"");
mysql_query(""START TRANSACTION"");

$a1 = mysql_query(""INSERT INTO rarara (l_id) VALUES('1')"");
$a2 = mysql_query(""INSERT INTO rarara (l_id) VALUES('2')"");

if ($a1 and $a2) {
    mysql_query(""COMMIT"");
} else {        
    mysql_query(""ROLLBACK"");
}
</code></pre>
","<p>The idea I generally use when working with transactions looks like this <em>(semi-pseudo-code)</em>:</p>

<pre><code>try {
    // First of all, let's begin a transaction
    $db-&gt;beginTransaction();

    // A set of queries; if one fails, an exception should be thrown
    $db-&gt;query('first query');
    $db-&gt;query('second query');
    $db-&gt;query('third query');

    // If we arrive here, it means that no exception was thrown
    // i.e. no query has failed, and we can commit the transaction
    $db-&gt;commit();
} catch (Exception $e) {
    // An exception has been thrown
    // We must rollback the transaction
    $db-&gt;rollback();
}
</code></pre>

<p><br>
Note that, with this idea, if a query fails, an Exception must be thrown:</p>

<ul>
<li>PDO can do that, depending on how you configure it

<ul>
<li>See <a href=""http://www.php.net/manual/en/pdo.setattribute.php"" rel=""noreferrer""><code>PDO::setAttribute</code></a></li>
<li>and <code>PDO::ATTR_ERRMODE</code> and <code>PDO::ERRMODE_EXCEPTION</code></li>
</ul></li>
<li>else, with some other API, you might have to test the result of the function used to execute a query, and throw an exception yourself.</li>
</ul>

<p><br>
Unfortunately, there is no magic involved. You cannot just put an instruction somewhere and have transactions done automatically: you still have to specific which group of queries must be executed in a transaction.</p>

<p>For example, quite often you'll have a couple of queries before the transaction <em>(before the <code>begin</code>)</em> and another couple of queries after the transaction <em>(after either <code>commit</code> or <code>rollback</code>)</em> and you'll want those queries executed no matter what happened <em>(or not)</em> in the transaction.</p>
","2708247"
"Simplest PHP example for retrieving user_timeline with Twitter API version 1.1","263983","","<p>Because of the Twitter API 1.0 retirement as of <a href=""https://dev.twitter.com/blog/api-v1-retirement-date-extended-to-june-11"" rel=""noreferrer"">June 11th 2013</a>, the script below does not work anymore.</p>

<pre><code>// Create curl resource 
$ch = curl_init(); 
// Set url 
curl_setopt($ch, CURLOPT_URL, ""http://twitter.com/statuses/user_timeline/myscreenname.json?count=10""); 
// Return the transfer as a string 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
// $output contains the output string 
$output = curl_exec($ch); 
// Close curl resource to free up system resources 
curl_close($ch);

if ($output) 
{
    $tweets = json_decode($output,true);

    foreach ($tweets as $tweet)
    {
        print_r($tweet);
    }
}
</code></pre>

<p>How can I get the user_timeline (recent statuses) with the least code possible?</p>

<p>I found this: <a href=""https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline"" rel=""noreferrer"">https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline</a>
but I get the following error:</p>

<pre><code>""{""errors"":[{""message"":""Could not authenticate you"",""code"":32}]}""
</code></pre>

<p>There are a lot of classes out there but after trying several none of them seem to work because of these updates at Twitter, plus some of them are pretty advanced classes with a lot of functionality that I don't really need. </p>

<p>What is the simplest/shortest way to get the recent user statuses with PHP?</p>
","<h1>So you want to use the Twitter v1.1 API?</h1>

<p><em><a href=""https://github.com/J7mbo/twitter-api-php"" rel=""noreferrer"">Note: the files for these are on GitHub</a></em>.</p>

<p>Version 1.0 <a href=""https://dev.twitter.com/docs/application-permission-model"" rel=""noreferrer""><strong>will soon be deprecated</strong></a> and unauthorised requests won't be allowed. So, here's a post to help you do just that, along with a PHP class to make your life easier.</p>

<blockquote>
  <p><strong>1. Create a developer account:</strong> Set yourself up a <a href=""https://dev.twitter.com/"" rel=""noreferrer"">developer account</a> on Twitter</p>
</blockquote>

<p>You need to visit the official Twitter developer site and register for a developer account.
This is a <strong>free</strong> and necessary step to make requests for the v1.1 API.</p>

<blockquote>
  <p><strong>2. Create an application:</strong> Create an application on the Twitter developer site</p>
</blockquote>

<p>What? You thought you could make unauthenticated requests? Not with Twitter's v1.1 API.
You need to visit <a href=""http://dev.twitter.com/apps"" rel=""noreferrer"">http://dev.twitter.com/apps</a> and click the ""Create Application"" button.</p>

<p><img src=""https://i.stack.imgur.com/gxmnH.png"" alt=""Enter image description here""></p>

<p>On this page, fill in whatever details you want. For me, it didn't matter, because I just wanted to make a load of block requests to get rid of spam followers. The point is you are going to get yourself <em>a set of unique keys</em> to use for your application.</p>

<p>So, the point of creating an application is to give yourself (and Twitter) a set of keys. These are:</p>

<ul>
<li>The consumer key</li>
<li>The consumer secret</li>
<li>The access token</li>
<li>The access token secret</li>
</ul>

<p>There's a little bit of information <a href=""https://dev.twitter.com/docs/auth/oauth/single-user-with-examples"" rel=""noreferrer"">here</a> on what these tokens for.</p>

<blockquote>
  <p><strong>3. Create access tokens</strong>: You'll need these to make successful requests</p>
</blockquote>

<p><a href=""http://en.wikipedia.org/wiki/OAuth"" rel=""noreferrer"">OAuth</a> requests a few tokens. So you need to have them generated for you.</p>

<p><img src=""https://i.stack.imgur.com/gEbUQ.png"" alt=""Enter image description here""></p>

<p>Click ""create my access token"" at the bottom. Then once you scroll to the bottom again, you'll have some newly generated keys. You need to grab the four previously labelled keys from this page for your API calls, so make a note of them somewhere.</p>

<blockquote>
  <p><strong>4. Change access level</strong>: You don't want read-only, do you?</p>
</blockquote>

<p>If you want to make any decent use of this API, you'll need to change your settings to Read &amp; Write if you're doing anything other than standard data retrieval using <a href=""http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods"" rel=""noreferrer"">GET</a> requests.</p>

<p><img src=""https://i.stack.imgur.com/hRHyp.png"" alt=""Enter image description here""></p>

<p>Choose the ""Settings"" tab near the top of the page.</p>

<p><img src=""https://i.stack.imgur.com/pW1tl.png"" alt=""Enter image description here""></p>

<p>Give your application read / write access, and hit ""Update"" at the bottom.</p>

<p>You can <a href=""https://dev.twitter.com/docs/application-permission-model"" rel=""noreferrer"">read more about the applications permission model</a> that Twitter uses here.</p>

<hr>

<blockquote>
  <p><strong>5. Write code to access the API</strong>: I've done most of it for you</p>
</blockquote>

<p>I combined the code above, with some modifications and changes, into a PHP class so it's really simple to make the requests you require.</p>

<p>This uses <strong>OAuth</strong> and the <strong>Twitter v1.1 API</strong>, and the class I've created which you can find below.</p>

<pre><code>require_once('TwitterAPIExchange.php');

/** Set access tokens here - see: https://dev.twitter.com/apps/ **/
$settings = array(
    'oauth_access_token' =&gt; ""YOUR_OAUTH_ACCESS_TOKEN"",
    'oauth_access_token_secret' =&gt; ""YOUR_OAUTH_ACCESS_TOKEN_SECRET"",
    'consumer_key' =&gt; ""YOUR_CONSUMER_KEY"",
    'consumer_secret' =&gt; ""YOUR_CONSUMER_SECRET""
);
</code></pre>

<p>Make sure you put the keys you got from your application above in their respective spaces.</p>

<p>Next you need to choose a URL you want to make a request to. Twitter has their <strong><a href=""https://dev.twitter.com/docs/api/1.1"" rel=""noreferrer"">API documentation</a></strong> to help you choose which URL and also the request type (POST or GET).</p>

<pre><code>/** URL for REST request, see: https://dev.twitter.com/docs/api/1.1/ **/
$url = 'https://api.twitter.com/1.1/blocks/create.json';
$requestMethod = 'POST';
</code></pre>

<p>In the documentation, each URL states what you can pass to it. If we're using the ""blocks"" URL like the one above, I can pass the following POST parameters:</p>

<pre><code>/** POST fields required by the URL above. See relevant docs as above **/
$postfields = array(
    'screen_name' =&gt; 'usernameToBlock', 
    'skip_status' =&gt; '1'
);
</code></pre>

<p>Now that you've set up what you want to do with the API, it's time to make the actual request.</p>

<pre><code>/** Perform the request and echo the response **/
$twitter = new TwitterAPIExchange($settings);
echo $twitter-&gt;buildOauth($url, $requestMethod)
             -&gt;setPostfields($postfields)
             -&gt;performRequest();
</code></pre>

<p>And for a <strong><a href=""http://en.wikipedia.org/wiki/POST_%28HTTP%29"" rel=""noreferrer"">POST</a></strong> request, that's it!</p>

<p>For a <strong>GET</strong> request, it's a little different. Here's an example:</p>

<pre><code>/** Note: Set the GET field BEFORE calling buildOauth(); **/
$url = 'https://api.twitter.com/1.1/followers/ids.json';
$getfield = '?username=J7mbo';
$requestMethod = 'GET';
$twitter = new TwitterAPIExchange($settings);
echo $twitter-&gt;setGetfield($getfield)
             -&gt;buildOauth($url, $requestMethod)
             -&gt;performRequest();     
</code></pre>

<hr>

<p><strong>Final code example</strong>: For a simple GET request for a list of my followers.</p>

<pre><code>$url = 'https://api.twitter.com/1.1/followers/list.json';
$getfield = '?username=J7mbo&amp;skip_status=1';
$requestMethod = 'GET';
$twitter = new TwitterAPIExchange($settings);
echo $twitter-&gt;setGetfield($getfield)
             -&gt;buildOauth($url, $requestMethod)
             -&gt;performRequest();  
</code></pre>

<p><strong><a href=""https://github.com/J7mbo/twitter-api-php"" rel=""noreferrer"">I've put these files on GitHub</a></strong> with credit to @lackovic10 and @rivers! I hope someone finds it useful; I know I did (I used it for bulk blocking in a loop).</p>

<blockquote>
  <p>Also, for those on Windows who are having problems with SSL certificates, look at <a href=""https://snippets.webaware.com.au/howto/stop-turning-off-curlopt_ssl_verifypeer-and-fix-your-php-config/"" rel=""noreferrer"">this post</a>. This library uses cURL under the hood so you need to make sure you have your cURL certs set up probably. Google is also your friend.</p>
</blockquote>
","15314662"
"PHP mysql insert date format","263683","","<p>Im using jQuery datepicker
the format of the datepicker is this <code>08/25/2012</code></p>

<p>i have errors when inserting to my database it insert only 0000-00-00 00 00 00</p>

<p>my codes is</p>

<pre><code>&lt;?php
$id = $_POST['id'];
$name = $_POST['name'];
$date = $_POST['date'];
$sql = mysql_query( ""INSERT INTO user_date VALUE( '', '$name', '$date')"" ) or die ( mysql_error() );
echo 'insert successful';
?&gt;
</code></pre>

<p>im sure my insert is correct....</p>
","<p>As stated in <a href=""http://dev.mysql.com/doc/en/date-and-time-literals.html"" rel=""noreferrer"">Date and Time Literals</a>:</p>

<blockquote>
  <p>MySQL recognizes <a href=""http://dev.mysql.com/doc/en/datetime.html"" rel=""noreferrer""><code>DATE</code></a> values in these formats:</p>
  
  <ul>
  <li><p>As a string in either <code>'YYYY-MM-DD'</code> or <code>'YY-MM-DD'</code> format. A “relaxed” syntax is permitted: Any punctuation character may be used as the delimiter between date parts. For example, <code>'2012-12-31'</code>, <code>'2012/12/31'</code>, <code>'2012^12^31'</code>, and <code>'2012@12@31'</code> are equivalent.</p></li>
  <li><p>As a string with no delimiters in either <code>'YYYYMMDD'</code> or <code>'YYMMDD'</code> format, provided that the string makes sense as a date. For example, <code>'20070523'</code> and <code>'070523'</code> are interpreted as <code>'2007-05-23'</code>, but <code>'071332'</code> is illegal (it has nonsensical month and day parts) and becomes <code>'0000-00-00'</code>.</p></li>
  <li><p>As a number in either <code>YYYYMMDD</code> or <code>YYMMDD</code> format, provided that the number makes sense as a date. For example, <code>19830905</code> and <code>830905</code> are interpreted as <code>'1983-09-05'</code>.</p></li>
  </ul>
</blockquote>

<p>Therefore, the string <code>'08/25/2012'</code> is not a valid MySQL date literal.  You have four options (in some vague order of preference, without any further information of your requirements):</p>

<ol>
<li><p>Configure Datepicker to provide dates in a supported format using an <a href=""http://api.jqueryui.com/datepicker/#option-altField"" rel=""noreferrer""><code>altField</code></a> together with its <a href=""http://api.jqueryui.com/datepicker/#option-altFormat"" rel=""noreferrer""><code>altFormat</code> option</a>:</p>

<pre><code>&lt;input type=""hidden"" id=""actualDate"" name=""actualDate""/&gt;
</code></pre>

<pre><code>$( ""selector"" ).datepicker({
    altField : ""#actualDate""
    altFormat: ""yyyy-mm-dd""
});
</code></pre>

<p>Or, if you're happy for users to see the date in <code>YYYY-MM-DD</code> format, simply set the <a href=""http://api.jqueryui.com/datepicker/#option-dateFormat"" rel=""noreferrer""><code>dateFormat</code> option</a> instead:</p>

<pre><code>$( ""selector"" ).datepicker({
    dateFormat: ""yyyy-mm-dd""
});
</code></pre></li>
<li><p>Use MySQL's <a href=""http://dev.mysql.com/doc/en/date-and-time-functions.html#function_str-to-date"" rel=""noreferrer""><code>STR_TO_DATE()</code></a> function to convert the string:</p>

<pre class=""lang-sql prettyprint-override""><code>INSERT INTO user_date VALUES ('', '$name', STR_TO_DATE('$date', '%m/%d/%Y'))
</code></pre></li>
<li><p>Convert the string received from jQuery into something that PHP understands as a date, such as a <a href=""http://php.net/manual/en/class.datetime.php"" rel=""noreferrer""><code>DateTime</code></a> object:</p>

<pre class=""lang-php prettyprint-override""><code>$dt = \DateTime::createFromFormat('m/d/Y', $_POST['date']);
</code></pre>

<p>and then either:</p>

<ul>
<li><p>obtain a suitable formatted string:</p>

<pre class=""lang-php prettyprint-override""><code>$date = $dt-&gt;format('Y-m-d');
</code></pre></li>
<li><p>obtain the UNIX timestamp:</p>

<pre class=""lang-php prettyprint-override""><code>$timestamp = $dt-&gt;getTimestamp();
</code></pre>

<p>which is then passed directly to MySQL's <a href=""http://dev.mysql.com/doc/en/date-and-time-functions.html#function_from-unixtime"" rel=""noreferrer""><code>FROM_UNIXTIME()</code></a> function:</p>

<pre class=""lang-sql prettyprint-override""><code>INSERT INTO user_date VALUES ('', '$name', FROM_UNIXTIME($timestamp))
</code></pre></li>
</ul></li>
<li><p>Manually manipulate the string into a valid literal:</p>

<pre class=""lang-php prettyprint-override""><code>$parts = explode('/', $_POST['date']);
$date  = ""$parts[2]-$parts[0]-$parts[1]"";
</code></pre></li>
</ol>

<hr>

<h2>Warning</h2>

<ol>
<li><p><strong>Your code is vulnerable to SQL injection.</strong>  You <em>really</em> should be using <a href=""https://stackoverflow.com/a/60496/623041"">prepared statements</a>, into which you pass your variables as parameters that do not get evaluated for SQL.  If you don't know what I'm talking about, or how to fix it, read the story of <a href=""https://stackoverflow.com/questions/332365/xkcd-sql-injection-please-explain"">Bobby Tables</a>. </p></li>
<li><p>Also, as stated in <a href=""http://www.php.net/manual/en/intro.mysql.php"" rel=""noreferrer"">the introduction</a> to the PHP manual chapter on the <code>mysql_*</code> functions:</p>

<blockquote>
  <p>This extension is deprecated as of PHP 5.5.0, and is not recommended for writing new code as it will be removed in the future. Instead, either the <a href=""http://www.php.net/manual/en/book.mysqli.php"" rel=""noreferrer"">mysqli</a> or <a href=""http://www.php.net/manual/en/ref.pdo-mysql.php"" rel=""noreferrer"">PDO_MySQL</a> extension should be used. See also the <a href=""http://www.php.net/manual/en/mysqlinfo.api.choosing.php"" rel=""noreferrer"">MySQL API Overview</a> for further help while choosing a MySQL API.</p>
</blockquote></li>
<li><p>You appear to be using either a <code>DATETIME</code> or <code>TIMESTAMP</code> column for holding a date value; I recommend you consider using MySQL's <code>DATE</code> type instead.  As explained in <a href=""http://dev.mysql.com/doc/en/datetime.html"" rel=""noreferrer"">The <code>DATE</code>, <code>DATETIME</code>, and <code>TIMESTAMP</code> Types</a>:</p>

<blockquote>
  <p>The <code>DATE</code> type is used for values with a date part but no time part. MySQL retrieves and displays DATE values in <code>'YYYY-MM-DD'</code> format. The supported range is <code>'1000-01-01'</code> to <code>'9999-12-31'</code>.</p>
  
  <p>The <code>DATETIME</code> type is used for values that contain both date and time parts. MySQL retrieves and displays <code>DATETIME</code> values in <code>'YYYY-MM-DD HH:MM:SS'</code> format. The supported range is <code>'1000-01-01 00:00:00'</code> to <code>'9999-12-31 23:59:59'</code>.</p>
  
  <p>The <code>TIMESTAMP</code> data type is used for values that contain both date and time parts. <code>TIMESTAMP</code> has a range of <code>'1970-01-01 00:00:01'</code> UTC to <code>'2038-01-19 03:14:07'</code> UTC.</p>
</blockquote></li>
</ol>
","12120457"
"PHP file_get_contents() returns ""failed to open stream: HTTP request failed!""","263626","","<p>I am having problems calling a url from PHP code. I need to call a service using a query string from my PHP code. If I type the url into a browser, it works ok, but if I use file-get-contents() to make the call, I get:</p>

<blockquote>
  <p>Warning: file-get-contents(http://.... ) failed to open stream: HTTP request failed! HTTP/1.1 202 Accepted in ...</p>
</blockquote>

<p>The code I am using is:</p>

<pre><code>$query=file_get_contents('http://###.##.##.##/mp/get?mpsrc=http://mybucket.s3.amazonaws.com/11111.mpg&amp;mpaction=convert format=flv');
echo($query);
</code></pre>

<p>Like I said - call from the browser and it works fine. Any suggestions?</p>

<p>I have also tried with another url such as:</p>

<pre><code>$query=file_get_contents('http://www.youtube.com/watch?v=XiFrfeJ8dKM');
</code></pre>

<p>This works fine... could it be that the url I need to call has a second <code>http://</code> in it?</p>
","<p>Try using cURL. </p>

<pre><code>&lt;?php

$curl_handle=curl_init();
curl_setopt($curl_handle, CURLOPT_URL,'http://###.##.##.##/mp/get?mpsrc=http://mybucket.s3.amazonaws.com/11111.mpg&amp;mpaction=convert format=flv');
curl_setopt($curl_handle, CURLOPT_CONNECTTIMEOUT, 2);
curl_setopt($curl_handle, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl_handle, CURLOPT_USERAGENT, 'Your application name');
$query = curl_exec($curl_handle);
curl_close($curl_handle);

?&gt;
</code></pre>
","697540"
"How to sort an array of associative arrays by value of a given key in PHP?","262990","","<p>Given this array:</p>

<pre><code>$inventory = array(

   array(""type""=&gt;""fruit"", ""price""=&gt;3.50),
   array(""type""=&gt;""milk"", ""price""=&gt;2.90),
   array(""type""=&gt;""pork"", ""price""=&gt;5.43),

);
</code></pre>

<p>I would like to <strong>sort <code>$inventory</code>'s elements by price</strong> to get:</p>

<pre><code>$inventory = array(

   array(""type""=&gt;""pork"", ""price""=&gt;5.43),
   array(""type""=&gt;""fruit"", ""price""=&gt;3.50),
   array(""type""=&gt;""milk"", ""price""=&gt;2.90),

);
</code></pre>

<p>How can I do this?</p>
","<p>You are right, the function you're looking for is <a href=""http://docs.php.net/manual/en/function.array-multisort.php"" rel=""noreferrer""><code>array_multisort()</code></a>.</p>

<p>Here's an example taken straight from the manual and adapted to your case:</p>

<pre><code>$price = array();
foreach ($inventory as $key =&gt; $row)
{
    $price[$key] = $row['price'];
}
array_multisort($price, SORT_DESC, $inventory);
</code></pre>
","1598385"
"How to compare two dates in php","261919","","<p>How to compare two dates in php if dates are in format <code>'03_01_12'</code> and <code>'31_12_11'</code> .</p>

<p>I am using this code:</p>

<pre><code>$date1=date('d_m_y');
$date2='31_12_11';
if(strtotime($date1) &lt; strtotime($date2))
   echo '1 is small ='.strtotime($date1).','.$date1;
else
   echo '2 is small ='.strtotime($date2).','.$date2;
</code></pre>

<p>But its not working..</p>
","<p>You will have to make sure that your dates are valid date objects.</p>

<p>Try this:</p>

<pre><code>$date1=date('d/m/y');
$tempArr=explode('_', '31_12_11');
$date2 = date(""d/m/y"", mktime(0, 0, 0, $tempArr[1], $tempArr[0], $tempArr[2]));
</code></pre>

<p>You can then perform the <code>strtotime()</code> method to get the difference.</p>
","8723327"
"When do I use the PHP constant ""PHP_EOL""?","261289","","<p>When is it a good idea to use <a href=""http://us3.php.net/manual/en/reserved.constants.php"" rel=""noreferrer""><code>PHP_EOL</code></a>?</p>

<p>I sometimes see this in code samples of PHP. Does this handle DOS/Mac/Unix endline issues?</p>
","<p>Yes, <code>PHP_EOL</code> is ostensibly used to find the newline character in a cross-platform-compatible way, so it handles DOS/Unix issues.</p>
","128564"
"How do you connect to multiple MySQL databases on a single webpage?","261174","","<p>I have information spread out across a few databases and want to put all the information onto one webpage using PHP.  I was wondering how I can connect to multiple databases on a single PHP webpage.</p>

<p>I know how to connect to a single database using:</p>

<pre><code>$dbh = mysql_connect($hostname, $username, $password) 
        or die(""Unable to connect to MySQL"");
</code></pre>

<p>However, can I just use multiple ""mysql_connect"" commands to open the other databases, and how would PHP know what database I want the information pulled from if I do have multiple databases connected.</p>
","<p>You can make multiple calls to <code>mysql_connect()</code>, but if the parameters are the same you need to pass true for the '<code>$new_link</code>' (fourth) parameter, otherwise the same connection is reused. For example:</p>

<pre><code>$dbh1 = mysql_connect($hostname, $username, $password); 
$dbh2 = mysql_connect($hostname, $username, $password, true); 

mysql_select_db('database1', $dbh1);
mysql_select_db('database2', $dbh2);
</code></pre>

<p>Then to query database 1 pass the first link identifier:</p>

<pre><code>mysql_query('select * from tablename', $dbh1);
</code></pre>

<p>and for database 2 pass the second:</p>

<pre><code>mysql_query('select * from tablename', $dbh2);
</code></pre>

<p>If you do not pass a link identifier then the last connection created is used (in this case the one represented by <code>$dbh2</code>) e.g.: </p>

<pre><code>mysql_query('select * from tablename');
</code></pre>

<p><strong>Other options</strong></p>

<p>If the MySQL user has access to both databases and they are on the same host (i.e. both DBs are accessible from the same connection) you could:</p>

<ul>
<li>Keep one connection open and call <code>mysql_select_db()</code> to swap between as necessary. I am not sure this is a clean solution and you could end up querying the wrong database.</li>
<li>Specify the database name when you reference tables within your queries (e.g. <code>SELECT * FROM database2.tablename</code>). This is likely to be a pain to implement.</li>
</ul>

<p>Also please read troelskn's answer because that is a better approach if you are able to use PDO rather than the older extensions.</p>
","274919"
"break out of if and foreach","260999","","<p>I have a foreach loop and an if statement. If a match is found i need to ultimately break out of the foreach. </p>

<pre><code>foreach($equipxml as $equip) {
    $current_device = $equip-&gt;xpath(""name"");
    if ( $current_device[0] == $device ) {
        // found a match in the file            
        $nodeid = $equip-&gt;id;
        &lt;break out of if and foreach here&gt;
    }       
}
</code></pre>
","<p><code>if</code> is not a loop structure, so you cannot ""break out of it"". </p>

<p>You can, however, break out of the <code>foreach</code> by simply calling <a href=""http://www.php.net/break"" rel=""noreferrer""><code>break</code></a>. In your example it has the desired effect:</p>

<pre><code>foreach($equipxml as $equip) {
    $current_device = $equip-&gt;xpath(""name"");
    if ( $current_device[0] == $device ) {
        // found a match in the file            
        $nodeid = $equip-&gt;id;

        // will leave the foreach loop and also the if statement
        break;
    }
    this_command_is_not_executed_after_a_match_is_found();
}
</code></pre>

<hr>

<p>Just for completeness for others that stumble upon this question looking for an answer.. </p>

<p><a href=""http://www.php.net/break"" rel=""noreferrer""><code>break</code></a> takes an optional argument, which defines <em>how many</em> loop structures it should break. Example:</p>

<pre><code>foreach (array('1','2','3') as $a) {
    echo ""$a "";
    foreach (array('3','2','1') as $b) {
        echo ""$b "";
        if ($a == $b) { 
            break 2;  // this will break both foreach loops
        }
    }
    echo "". "";  // never reached
}
echo ""!"";
</code></pre>

<p>Resulting output:</p>

<blockquote>
  <p>1 3 2 1 !</p>
</blockquote>

<hr>

<p>If - for some obscure reason - you want to <a href=""http://www.php.net/break"" rel=""noreferrer""><code>break</code></a> out of an <code>if</code> statement (which is not a loop structure and thus not breakable per definition), you can simply wrap your <code>if</code> in a tiny loop structure so you can jump out of that code block.</p>

<p>Please note that this is a total hack and normally you would not want to do this:</p>

<pre><code>do if ($foo)
{
  // Do something first...

  // Shall we continue with this block, or exit now?
  if ($abort === true) break;

  // Continue doing something...

} while (false);
</code></pre>

<p>The example above is taken from a <a href=""http://www.php.net/manual/en/control-structures.if.php#90073"" rel=""noreferrer"">comment in the PHP docs</a></p>

<p>If you wonder about the syntax: It works because an abbreviated syntax is used here. The outer curly braces can be left out because the loop structure contains only a single statement: <code>if ($foo) { .. }</code>.</p>

<p>Another example for this:<br><code>do $i++; while ($i &lt; 100)</code> is equivalent to <code>do { $i++; } while ($i &lt; 100)</code>.</p>
","9215741"
"send email using Gmail SMTP server through PHP Mailer","260646","","<p>I would like to send an email using <strong>Gmail SMTP</strong> server through <strong>PHP Mailer</strong>.</p>

<p>this is my code</p>

<pre><code>&lt;?php
require_once('class.phpmailer.php');

$mail = new PHPMailer();
$mail-&gt;IsSMTP();
$mail-&gt;CharSet=""UTF-8"";
$mail-&gt;SMTPSecure = 'tls';
$mail-&gt;Host = 'smtp.gmail.com';
$mail-&gt;Port = 587;
$mail-&gt;Username = 'MyUsername@gmail.com';
$mail-&gt;Password = 'valid password';
$mail-&gt;SMTPAuth = true;

$mail-&gt;From = 'MyUsername@gmail.com';
$mail-&gt;FromName = 'Mohammad Masoudian';
$mail-&gt;AddAddress('anotherValidGmail@gmail.com');
$mail-&gt;AddReplyTo('phoenixd110@gmail.com', 'Information');

$mail-&gt;IsHTML(true);
$mail-&gt;Subject    = ""PHPMailer Test Subject via Sendmail, basic"";
$mail-&gt;AltBody    = ""To view the message, please use an HTML compatible email viewer!"";
$mail-&gt;Body    = ""Hello"";

if(!$mail-&gt;Send())
{
  echo ""Mailer Error: "" . $mail-&gt;ErrorInfo;
}
else
{
  echo ""Message sent!"";
}
?&gt;
</code></pre>

<p>but i recieve this following error</p>

<pre><code>Mailer Error: SMTP Error: The following recipients failed: anotherValidGmail@gmail.com

SMTP server error: SMTP AUTH is required for message submission on port 587
</code></pre>

<p>my domain is <a href=""http://www.vatandesign.ir"">vatandesign.ir</a></p>
","<pre><code>$mail = new PHPMailer(); // create a new object
$mail-&gt;IsSMTP(); // enable SMTP
$mail-&gt;SMTPDebug = 1; // debugging: 1 = errors and messages, 2 = messages only
$mail-&gt;SMTPAuth = true; // authentication enabled
$mail-&gt;SMTPSecure = 'ssl'; // secure transfer enabled REQUIRED for Gmail
$mail-&gt;Host = ""smtp.gmail.com"";
$mail-&gt;Port = 465; // or 587
$mail-&gt;IsHTML(true);
$mail-&gt;Username = ""email@gmail.com"";
$mail-&gt;Password = ""password"";
$mail-&gt;SetFrom(""example@gmail.com"");
$mail-&gt;Subject = ""Test"";
$mail-&gt;Body = ""hello"";
$mail-&gt;AddAddress(""email@gmail.com"");

 if(!$mail-&gt;Send()) {
    echo ""Mailer Error: "" . $mail-&gt;ErrorInfo;
 } else {
    echo ""Message has been sent"";
 }
</code></pre>

<p>This code above has been tested and worked for me.</p>

<p>It could be that you needed <code>$mail-&gt;SMTPSecure = 'ssl';</code></p>

<p>Also make sure you don't have two step verification switched on for that account as that can cause problems also.</p>

<p>UPDATED</p>

<p>You could try changing $mail->SMTP to:</p>

<pre><code>$mail-&gt;SMTPSecure = 'tls';
</code></pre>

<p>It's worth noting that some SMTP servers block connections.
Some SMTP servers don't support <code>SSL</code> (or <code>TLS</code>) connections.</p>
","16048485"
"index.php not loading by default","259816","","<p>I have just installed CentOS, Apache and PHP. When I visit my site <a href=""http://example.com/myapp/"" rel=""noreferrer"">http://example.com/myapp/</a>, it says ""forbidden"". By default it's not loading the index.php file.</p>

<p>When I visit <a href=""http://example.com/myapp/index.php"" rel=""noreferrer"">http://example.com/myapp/index.php</a>, it works fine.</p>

<p>Any idea how to fix that issue? </p>
","<p>Apache needs to be configured to recognize index.php as an index file.</p>

<p>The simplest way to accomplish this..</p>

<ol>
<li><p>Create a .htaccess file in your web root.</p></li>
<li><p>Add the line...</p></li>
</ol>

<blockquote>
  <blockquote>
    <p>DirectoryIndex index.php</p>
  </blockquote>
</blockquote>

<p>Here is a resource regarding the matter...<br>
<a href=""http://www.twsc.biz/twsc_hosting_htaccess.php"" rel=""noreferrer"">http://www.twsc.biz/twsc_hosting_htaccess.php</a></p>

<p>Edit: I'm assuming apache is configured to allow .htaccess files. If it isn't, you'll have to modify the setting in apache's configuration file (httpd.conf)</p>
","2384452"
"How do I get the query builder to output its raw SQL query as a string?","258677","","<p>Given the following code:</p>

<pre class=""lang-php prettyprint-override""><code>DB::table('users')-&gt;get();
</code></pre>

<p>I want to get the raw SQL query string that the query builder above will generate, so in this example it would be <code>SELECT * FROM users</code>.</p>

<p>How do I do this?</p>
","<p>To output to the screen the last queries ran you can use this</p>

<pre class=""lang-php prettyprint-override""><code>dd(DB::getQueryLog());
</code></pre>

<p>I believe the most recent queries will be at the bottom of the array.</p>

<p>You will have something like that:</p>

<pre class=""lang-none prettyprint-override""><code>array(1) {
  [0]=&gt;
  array(3) {
    [""query""]=&gt;
    string(21) ""select * from ""users""""
    [""bindings""]=&gt;
    array(0) {
    }
    [""time""]=&gt;
    string(4) ""0.92""
  }
}
</code></pre>

<p>As per <a href=""https://stackoverflow.com/questions/18236294/how-do-i-get-the-query-builder-to-output-its-raw-sql-query-as-a-string#comment56908005_18236656"">Joshua's</a> comment below, this is turned off by default now. To use, you'll need to enable it manually using:</p>

<pre><code>DB::enableQueryLog();
</code></pre>
","18236656"
"How to enable curl, installed Ubuntu LAMP stack?","258202","","<p>I have installed ubuntu Lamp stack. But the curl is not enabled, neither can I can find the extension listed in the INI file. I added manually but it didn't work either.</p>

<p>How should I enable Curl then?</p>
","<p>From <a href=""http://buzznol.blogspot.com/2008/12/install-curl-extension-for-php-in.html"" rel=""noreferrer"">http://buzznol.blogspot.com/2008/12/install-curl-extension-for-php-in.html</a>:</p>

<pre><code>sudo apt-get install php5-curl
</code></pre>

<p>After installing libcurl you should  restart the web server with one of the following commands,</p>

<p><code>sudo /etc/init.d/apache2 restart</code> OR <code>sudo service apache2 restart</code></p>
","2939827"
"Forbidden :You don't have permission to access /phpmyadmin on this server","258128","","<p>Hi I have installed phpmyadmin on my centos machine and when I try to hit <code>phpmyadmin</code> through my browser I get this error :</p>

<pre><code>Forbidden
You don't have permission to access `phpmyadmin` on this server.
</code></pre>

<p>My <code>phpmyadmin.conf</code> file has following content:</p>

<pre><code># phpMyAdmin - Web based MySQL browser written in php
# 
# Allows only localhost by default
#
# But allowing phpMyAdmin to anyone other than localhost should be considered
# dangerous unless properly secured by SSL

Alias /phpMyAdmin /usr/share/phpMyAdmin
Alias /phpmyadmin /usr/share/phpMyAdmin


&lt;Directory /usr/share/phpMyAdmin/&gt;
   &lt;IfModule mod_authz_core.c&gt;
     # Apache 2.4
     &lt;RequireAny&gt;
       Require ip 127.0.0.1
       Require ip ::1
     &lt;/RequireAny&gt;
   &lt;/IfModule&gt;
   &lt;IfModule !mod_authz_core.c&gt;
     # Apache 2.2
     Order Deny,Allow
     Deny from All
     Allow from 127.0.0.1
     Allow from ::1
   &lt;/IfModule&gt;
&lt;/Directory&gt;

&lt;Directory /usr/share/phpMyAdmin/setup/&gt;
   &lt;IfModule mod_authz_core.c&gt;
     # Apache 2.4
     &lt;RequireAny&gt;
       Require ip 127.0.0.1
       Require ip ::1
     &lt;/RequireAny&gt;
   &lt;/IfModule&gt;
   &lt;IfModule !mod_authz_core.c&gt;
     # Apache 2.2
     Order Deny,Allow
     Deny from All
     Allow from 127.0.0.1
     Allow from ::1
   &lt;/IfModule&gt;
&lt;/Directory&gt;

# These directories do not require access over HTTP - taken from the original
# phpMyAdmin upstream tarball
#
&lt;Directory /usr/share/phpMyAdmin/libraries/&gt;
    Order Deny,Allow
    Deny from All
    Allow from None
&lt;/Directory&gt;

&lt;Directory /usr/share/phpMyAdmin/setup/lib/&gt;
    Order Deny,Allow
    Deny from All
    Allow from None
&lt;/Directory&gt;

&lt;Directory /usr/share/phpMyAdmin/setup/frames/&gt;
    Order Deny,Allow
    Deny from All
    Allow from None
&lt;/Directory&gt;

# This configuration prevents mod_security at phpMyAdmin directories from
# filtering SQL etc.  This may break your mod_security implementation.
#
#&lt;IfModule mod_security.c&gt;
#    &lt;Directory /usr/share/phpMyAdmin/&gt;
#        SecRuleInheritance Off
#    &lt;/Directory&gt;
#&lt;/IfModule&gt;
</code></pre>

<p>Kindly help me resolve this issue. Any lead is appreciated.</p>

<p>Thanks</p>
","<p>You need to follow the following steps:</p>

<p>Find line that read follows</p>

<pre><code>Require ip 127.0.0.1
</code></pre>

<p>Replace with your workstation IP address:</p>

<pre><code>Require ip 10.1.3.53
</code></pre>

<p>Again find the following line:</p>

<pre><code>Allow from 127.0.0.1
</code></pre>

<p>Replace as follows:</p>

<pre><code>Allow from 10.1.3.53
</code></pre>

<p>Also find <code>deny from all</code> and comment it in the entire file.</p>

<p>Save and close the file.<code>Restart Apache httpd server</code>:</p>

<pre><code># service httpd restart
</code></pre>
","23244098"
"How do I get a file name from a full path with PHP?","256599","","<p>For example, how do I get <code>Output.map</code></p>

<p><strong>from</strong></p>

<p><code>F:\Program Files\SSH Communications Security\SSH Secure Shell\Output.map</code></p>

<p>with PHP?</p>
","<p>You're looking for <a href=""https://secure.php.net/manual/en/function.basename.php"" rel=""nofollow noreferrer""><code>basename</code></a>.</p>

<p>The example from the PHP manual:</p>

<pre><code>&lt;?php
$path = ""/home/httpd/html/index.php"";
$file = basename($path);         // $file is set to ""index.php""
$file = basename($path, "".php""); // $file is set to ""index""
?&gt;
</code></pre>
","1418197"
"How to add a line break within echo in PHP?","256380","","<p>I was trying to add a line break for a sentence, and I added <code>/n</code>  in following code.</p>

<pre><code>echo ""Thanks for your email. /n  Your orders details are below:"".PHP_EOL;
echo 'Thanks for your email. /n  Your orders details are below:'.PHP_EOL;
</code></pre>

<p>For some reasons, the I got server error as the result. How do I fix it?</p>
","<p><code>\n</code> is a line break. <code>/n</code> is not.</p>

<hr>

<p>use of <code>\n</code> with </p>

<h2><strong>1. echo directly to page</strong></h2>

<p>Now if you are trying to echo string to the page:  </p>

<pre><code>echo  ""kings \n garden"";
</code></pre>

<p><strong><em>output</em></strong> will be: </p>

<pre><code>kings garden
</code></pre>

<p>you won't get <code>garden</code> in new line because PHP is a server-side language, and you are sending output as HTML, you need to  create line breaks in HTML. HTML doesn't understand <code>\n</code>. You need to use the <a href=""http://php.net/manual/en/function.nl2br.php"" rel=""noreferrer""><code>nl2br()</code></a> function for that. </p>

<p>What it does is: </p>

<blockquote>
  <p>Returns string with <code>&lt;br /&gt;</code> or <code>&lt;br&gt;</code> inserted before all newlines (\r\n, \n\r, \n and \r).</p>
</blockquote>

<pre><code>echo  nl2br (""kings \n garden"");
</code></pre>

<p><a href=""http://codepad.viper-7.com/vc7HJB"" rel=""noreferrer"">Output</a> </p>

<pre><code>kings
garden
</code></pre>

<blockquote>
  <p><strong>Note</strong> Make sure you're echoing/printing <code>\n</code> in double quotes, else it will be rendered literally as \n. because php interpreter parse string in single quote with concept of <strong><em>as is</em></strong> </p>
</blockquote>

<pre><code>so ""\n"" not '\n'
</code></pre>

<h2> <strong>2. write to text file</strong></h2>

<p>Now if you echo to text file you can use just <code>\n</code> and it will echo to a new line, like: </p>

<pre><code>$myfile = fopen(""test.txt"", ""w+"")  ;

$txt = ""kings \n garden"";
fwrite($myfile, $txt);
fclose($myfile);
</code></pre>

<p>output will be: </p>

<pre><code>kings
 garden
</code></pre>
","12994798"
"Installing PDO driver on MySQL Linux server","255844","","<p>I was suggested, not long ago, to change my code to use PDO in order to parameterize my queries and safely save HTML in the database.</p>

<p>Well, here are the main problems:</p>

<ol>
<li><p>I looked at <a href=""http://php.net/manual/en/ref.pdo-mysql.php"" rel=""nofollow noreferrer"">http://php.net/manual/en/ref.pdo-mysql.php</a>, and I don't really get where I should put that <code>$ ./configure --with-pdo-mysql</code> string...</p></li>
<li><p>The site I'm building actually only requires PDO for one page. While I may consider re-writing it, it would take a while and I need the pages to be running soon, so I can't turn off MySQL completely. If I do install PDO, will I still be able to use <code>mysql_*</code> handlers?</p></li>
</ol>

<p>The server in question is running PHP Version 5.4.6-1ubuntu1 and Apache/2.2.22 (Ubuntu). I'm also running a phpMyAdmin database, if it matters.</p>
","<p>On Ubuntu you should be able to install the necessary PDO parts from apt using <code>sudo apt-get install php5-mysql</code></p>

<p>There is no limitation between using PDO and mysql_ simultaneously. You will however need to create two connections to your DB, one with mysql_ and one using PDO.</p>
","13375097"
"Laravel 5 Failed opening required bootstrap/../vendor/autoload.php","255515","","<p>I have recently installed Laravel 5 via composer. I tried creating a new controller using artisan and I get the following error:</p>

<blockquote>
  <p>bootstrap/../vendor/autoload.php. Failed to open stream: No such file or directory. The ""vendor"" folder does not exist. </p>
</blockquote>

<p>Am I missing something?</p>
","<p>Turns out I didn't enable openssl in my php.ini so when I created my new project with composer it was installed from source. I changed that and ran </p>

<pre><code>composer update
</code></pre>

<p>now the vendor folder was created.</p>
","28491937"
"PHP - concatenate or directly insert variables in string","255173","","<p>I am wondering, What is the proper way for inserting PHP variables into a string?
<br/><br/>
<strong>This way:</strong><br/></p>

<pre><code>echo ""Welcome "".$name.""!""
</code></pre>

<p><strong>Or this way:</strong><br/></p>

<pre><code>echo ""Welcome $name!""
</code></pre>

<p>Both of these methods work in my <code>PHP v5.3.5</code>. The latter is shorter and simpler but I'm not sure if the first is better formatting or accepted as more proper.</p>
","<p>Between those two syntaxes, you should really choose the one you prefer :-)</p>

<p>Personally, I would go with your second solution in such a case <em>(Variable interpolation)</em>, which I find easier to both write and read.</p>

<p>The result will be the same; and even if there are performance implications, those won't matter<sup> 1</sup>.</p>

<p><br>
As a sidenote, so my answer is a bit more complete: the day you'll want to do something like this:</p>

<pre><code>echo ""Welcome $names!"";
</code></pre>

<p>PHP will interpret your code as if you were trying to use the <code>$names</code> variable -- which doesn't exist.</p>

<p>That day, you'll need to use <code>{}</code>: </p>

<pre><code>echo ""Welcome {$name}s!""
</code></pre>

<p>No need to fallback to concatenations.</p>

<p><br>
Also note that your first syntax:</p>

<pre><code>echo ""Welcome "".$name.""!"";
</code></pre>

<p>Could probably be <em>optimized</em>, avoiding concatenations, using:</p>

<pre><code>echo ""Welcome "", $name, ""!"";
</code></pre>

<p><em>(But, as I said earlier, this doesn't matter much...)</em></p>

<p><br>
<sub>1 - Unless you are doing hundreds of thousands of concatenations vs interpolations -- and it's probably not quite the case.</sub></p>
","5605970"
"Tracking the script execution time in PHP","254182","","<p>PHP must track the amount of CPU time a particular script has used in order to enforce the max_execution_time limit.  </p>

<p>Is there a way to get access to this inside of the script?  I'd like to include some logging with my tests about how much CPU was burnt in the actual PHP (the time is not incremented when the script is sitting and waiting for the database).</p>

<p>I am using a Linux box.  </p>
","<p>On unixoid systems (and in php 7.0.0 on Windows as well), you can use <a href=""http://php.net/getrusage"" rel=""noreferrer"">getrusage</a>, like:</p>

<pre><code>// Script start
$rustart = getrusage();

// Code ...

// Script end
function rutime($ru, $rus, $index) {
    return ($ru[""ru_$index.tv_sec""]*1000 + intval($ru[""ru_$index.tv_usec""]/1000))
     -  ($rus[""ru_$index.tv_sec""]*1000 + intval($rus[""ru_$index.tv_usec""]/1000));
}

$ru = getrusage();
echo ""This process used "" . rutime($ru, $rustart, ""utime"") .
    "" ms for its computations\n"";
echo ""It spent "" . rutime($ru, $rustart, ""stime"") .
    "" ms in system calls\n"";
</code></pre>

<p>Note that you don't need to calculate a difference if you are spawning a php instance for every test.</p>
","535040"
"PHP Redirect with POST data","254117","","<p>I did some research on this topic, and there are some experts who have said that it is not <a href=""https://stackoverflow.com/questions/3045097/php-redirect-and-send-data-via-post"">possible</a>, so I would like to ask for an alternative solution.</p>

<p>My situation:</p>

<p>Page A: [checkout.php] Customer fills in their billing details.</p>

<p>Page B: [process.php] Generate an invoice number and store customer details in database.</p>

<p>Page C: [thirdparty.com] Third Payment Gateway (ONLY ACCEPT POST DATA).</p>

<p>Customer fills in their details and sets up their cart in Page A, then POSTs to Page B. Inside process.php, store the POSTed data inside the database and generate an invoice number. After that, POST the customer data and invoice number to thirdparty.com payment gateway. The problem is doing POST in page B. cURL is able to POST the data to Page C, but the problem is the page didn't redirect to page C. The customer needs to fill in Credit Card details on Page C.</p>

<p>The third party payment gateway did give us the API sample, the sample is POST the invoice number together with customer detail.
We don't want the system to generate an excess of unwanted invoice numbers.</p>

<p>Is there any solution for this?
Our current solution is for the customer to fill detail in Page A, then in Page B we create another page showing all the customer details there, where the user can click a CONFIRM button to POST to Page C.</p>

<p>Our goal is for customers to only have to click once.</p>

<p>Hope my question is clear :)</p>
","<p>Generate a form on Page B with all the required data and action set to Page C and submit it with JavaScript on page load. Your data will be sent to Page C without much hassle to the user. </p>

<p>This is the only way to do it. A redirect is a 303 HTTP header that you can read up on <a href=""http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html"" rel=""noreferrer"">http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html</a>, but I'll quote some of it:</p>

<blockquote>
  <p>The response to the request can be
  found under a different URI and SHOULD
  be retrieved using a GET method on
  that resource. This method exists
  primarily to allow the output of a
  POST-activated script to redirect the
  user agent to a selected resource. The
  new URI is not a substitute reference
  for the originally requested resource.
  The 303 response MUST NOT be cached,
  but the response to the second
  (redirected) request might be
  cacheable.</p>
</blockquote>

<p>The only way to achieve what you're doing is with a intermediate page that sends the user to Page C. Here's a small/simple snippet on how you can achieve that:</p>

<pre><code>&lt;form id=""myForm"" action=""Page_C.php"" method=""post""&gt;
&lt;?php
    foreach ($_POST as $a =&gt; $b) {
        echo '&lt;input type=""hidden"" name=""'.htmlentities($a).'"" value=""'.htmlentities($b).'""&gt;';
    }
?&gt;
&lt;/form&gt;
&lt;script type=""text/javascript""&gt;
    document.getElementById('myForm').submit();
&lt;/script&gt;
</code></pre>

<p>You should also have a simple ""confirm"" form inside a noscript tag to make sure users without Javascript will be able to use your service. </p>
","5576700"
"Javascript Equivalent to PHP Explode()","253666","","<p>I have a string that looks like this:</p>

<blockquote>
  <p>0000000020C90037:TEMP:data</p>
</blockquote>

<p>And I need to grab everything after the first colon, so that I have TEMP:data.</p>

<p>I don't often work in Javascript, if it were PHP I would do this:</p>

<pre><code>$str = '0000000020C90037:TEMP:data';
$arr = explode("":"", $str);
$var = $arr[1]."":"".$arr[2];
</code></pre>
","<pre><code>//Loading the variable
var mystr = '0000000020C90037:TEMP:data';

//Splitting it with : as the separator
var myarr = mystr.split("":"");

//Then read the values from the array where 0 is the first
var myvar = myarr[0] + "":"" + myarr[1];
</code></pre>
","4514357"
"PHP get domain name","253592","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/2297403/http-host-vs-server-name"">HTTP_HOST vs. SERVER_NAME</a>  </p>
</blockquote>



<p>Hello,</p>

<p>I want to get the domain name for where the script is running. How can that be done with PHP?
I see that <code>$_SERVER['HTTP_HOST']</code> as well as <code>$_SERVER['SERVER_NAME']</code> contain this information.
Will that variable always work and should I use one over the other?</p>

<p>Thank you.</p>
","<p>Similar question has been asked in stackoverflow before. </p>

<p>See here: <a href=""https://stackoverflow.com/questions/1459739/php-serverhttp-host-vs-serverserver-name-am-i-understanding-the-man"">PHP $_SERVER[&#39;HTTP_HOST&#39;] vs. $_SERVER[&#39;SERVER_NAME&#39;], am I understanding the man pages correctly?</a></p>

<p>Also see this article: <a href=""http://shiflett.org/blog/2006/mar/server-name-versus-http-host"" rel=""noreferrer"">http://shiflett.org/blog/2006/mar/server-name-versus-http-host</a> </p>

<blockquote>
  <p>Recommended using HTTP_HOST, and
  falling back on SERVER_NAME only if
  HTTP_HOST was not set. He said that
  SERVER_NAME could be unreliable on the
  server for a variety of reasons,
  including:</p>
  
  <ul>
  <li>no DNS support</li>
  <li>misconfigured</li>
  <li>behind load balancing software</li>
  </ul>
  
  <p><em>Source</em>:
  <em><a href=""http://discussion.dreamhost.com/thread-4388.html"" rel=""noreferrer"">http://discussion.dreamhost.com/thread-4388.html</a></em></p>
</blockquote>
","5404865"
"How can I capture the result of var_dump to a string?","253560","","<p>I'd like to capture the output of <a href=""http://us3.php.net/manual/en/function.var-dump.php"" rel=""noreferrer""><code>var_dump</code></a> to a string.</p>

<p>The PHP docs say;</p>

<blockquote>
  <p>As with anything that outputs its result directly to the browser, the <a href=""http://us3.php.net/manual/en/ref.outcontrol.php"" rel=""noreferrer"">output-control functions</a> can be used to capture the output of this function, and save it in a string (for example).</p>
</blockquote>

<p>Can someone give me an example of how that might work?</p>

<p><code>print_r()</code> isn't a valid possibility because it's not going to give me the information that I need.</p>
","<p>Use output buffering:</p>

<pre><code>&lt;?php
ob_start();
var_dump($someVar);
$result = ob_get_clean();
?&gt;
</code></pre>
","139491"
"How to put string in array, split by new line?","253548","","<p>I have a string with line breaks in my database. I want to convert that string into an array, and for every new line, jump one index place in the array.</p>

<p>If the string is:</p>

<blockquote>
  <p>My text1<br>
  My text2<br>
  My text3</p>
</blockquote>

<p>The result I want is this:</p>

<pre class=""lang-none prettyprint-override""><code>Array
(
    [0] =&gt; My text1
    [1] =&gt; My text2
    [2] =&gt; My text3
)
</code></pre>
","<p>You can use the <a href=""http://www.php.net/explode"" rel=""noreferrer""><code>explode</code></a> function, using ""<code>\n</code>"" as separator :</p>

<pre><code>$your_array = explode(""\n"", $your_string_from_db);
</code></pre>

<p>For instance, if you have this piece of code :</p>

<pre><code>$str = ""My text1\nMy text2\nMy text3"";
$arr = explode(""\n"", $str);
var_dump($arr);
</code></pre>

<p>You'd get this output :</p>

<pre><code>array
  0 =&gt; string 'My text1' (length=8)
  1 =&gt; string 'My text2' (length=8)
  2 =&gt; string 'My text3' (length=8)
</code></pre>

<p><br>
Note that you have to use a <a href=""http://php.net/manual/en/language.types.string.php#language.types.string.syntax.double"" rel=""noreferrer"">double-quoted string</a>, so <code>\n</code> is actually interpreted as a line-break.
<br><em>(see that manual page for more details)</em></p>
","1483501"
"mysql server port number","253545","","<p>I've just made a database on mysql on my server. I want to connect to this via my website using php. This is the contents of my connections file:</p>

<pre><code>$dbhost = 'localhost';
$dbuser = 'root';
$dbpass = 'password';

$conn = mysql_connect($dbhost, $dbuser, $dbpass)
    or die('Error connecting to mysql');

$dbname = 'epub';
mysql_select_db($dbname);
</code></pre>

<p>I know what the username/passwords are, and I know the IP address of the server. What I'm just wondering is how do I know which port to use?</p>
","<p>If your MySQL server runs on default settings, you don't need to specify that.</p>

<p>Default MySQL port is 3306.</p>

<p>[updated to show mysql_error() usage]</p>

<pre><code>$conn = mysql_connect($dbhost, $dbuser, $dbpass)
    or die('Error connecting to mysql: '.mysql_error());
</code></pre>
","3736420"
"How to search by key=>value in a multidimensional array in PHP","253044","","<p>Is there any fast way to get all subarrays where a key value pair was found in a multidimensional array? I can't say how deep the array will be.</p>

<p>Simple example array:</p>

<pre><code>$arr = array(0 =&gt; array(id=&gt;1,name=&gt;""cat 1""),
             1 =&gt; array(id=&gt;2,name=&gt;""cat 2""),
             2 =&gt; array(id=&gt;3,name=&gt;""cat 1"")
);
</code></pre>

<p>When I search for key=name and value=""cat 1"" the function should return:</p>

<pre><code>array(0 =&gt; array(id=&gt;1,name=&gt;""cat 1""),
      1 =&gt; array(id=&gt;3,name=&gt;""cat 1"")
);
</code></pre>

<p>I guess the function has to be recursive to get down to the deepest level.</p>
","<p>Code:</p>

<pre><code>function search($array, $key, $value)
{
    $results = array();

    if (is_array($array)) {
        if (isset($array[$key]) &amp;&amp; $array[$key] == $value) {
            $results[] = $array;
        }

        foreach ($array as $subarray) {
            $results = array_merge($results, search($subarray, $key, $value));
        }
    }

    return $results;
}

$arr = array(0 =&gt; array(id=&gt;1,name=&gt;""cat 1""),
             1 =&gt; array(id=&gt;2,name=&gt;""cat 2""),
             2 =&gt; array(id=&gt;3,name=&gt;""cat 1""));

print_r(search($arr, 'name', 'cat 1'));
</code></pre>

<p>Output:</p>

<pre><code>Array
(
    [0] =&gt; Array
        (
            [id] =&gt; 1
            [name] =&gt; cat 1
        )

    [1] =&gt; Array
        (
            [id] =&gt; 3
            [name] =&gt; cat 1
        )

)
</code></pre>

<p>If efficiency is important you could write it so all the recursive calls store their results in the same temporary <code>$results</code> array rather than merging arrays together, like so:</p>

<pre><code>function search($array, $key, $value)
{
    $results = array();
    search_r($array, $key, $value, $results);
    return $results;
}

function search_r($array, $key, $value, &amp;$results)
{
    if (!is_array($array)) {
        return;
    }

    if (isset($array[$key]) &amp;&amp; $array[$key] == $value) {
        $results[] = $array;
    }

    foreach ($array as $subarray) {
        search_r($subarray, $key, $value, $results);
    }
}
</code></pre>

<p>The key there is that <code>search_r</code> takes its fourth parameter by reference rather than by value; the ampersand <code>&amp;</code> is crucial.</p>

<p>FYI: If you have an older version of PHP then you have to specify the pass-by-reference part in the <em>call</em> to <code>search_r</code> rather than in its declaration. That is, the last line becomes <code>search_r($subarray, $key, $value, &amp;$results)</code>.</p>
","1019126"
"How do I check if a directory exists via PHP?","253027","","<p>I want to create a directory if it does'nt exist.</p>

<p>Is using <code>is_dir</code> enough for that purpose?</p>

<pre><code>if (!is_dir($dir)) {
    mkdir($dir);         
}
</code></pre>

<p>Or should I combine <code>is_dir</code> with <code>file_exists</code>?</p>

<pre><code>if (!file_exists($dir) &amp;&amp; !is_dir($dir)) {
    mkdir($dir);         
} 
</code></pre>
","<p>Both would return true on Unix systems - in Unix everything is a file, including directories. But to test if that name is taken, you should check both. There might be a regular file named 'foo', which would prevent you from creating a directory name 'foo'.</p>
","5425928"
"How to get the request parameters in symfony2","252415","","<p>I am very new to symfony. In other languages like java and others I can use <code>request.getParameter('parmeter name')</code> to get the value.</p>

<p>Is there anything similar that we can do with symfony2.<br>
I have seen some examples but none is working for me. Suppose I have a form field with the name <strong>username</strong>. In the form action I tried to use something like this:</p>

<pre><code>$request = $this-&gt;getRequest();
$username= $request-&gt;request-&gt;get('username'); 
</code></pre>

<p>I have also tried </p>

<p><code>$username = $request-&gt;getParameter('username');</code> </p>

<p>and</p>

<pre><code>$username=$request-&gt;request-&gt;getParameter('username');
</code></pre>

<p>But none of the options is working.However following worked fine:</p>

<pre><code>foreach($request-&gt;request-&gt;all() as $req){
    print_r($req['username']);
}
</code></pre>

<p>Where am I doing wrong in using <code>getParameter()</code> method. Any help will be appreciated.</p>
","<p>The naming is not all that intuitive:</p>

<pre><code>use Symfony\Component\HttpFoundation\Request;

public function updateAction(Request $request)
{
    // $_GET parameters
    $request-&gt;query-&gt;get('name');

    // $_POST parameters
    $request-&gt;request-&gt;get('name');
</code></pre>
","9788435"
"Getting the first character of a string with $str[0]","252023","","<p>I want to get the first letter of a string and I've noticed that <code>$str[0]</code> works great. I am just not sure whether this is 'good practice', as that notation is generally used with arrays. This feature doesn't seem to be very well documented so I'm turning to you guys to tell me if it's all right &ndash; in all respects &ndash; to use this notation?</p>

<p>Or should I just stick to the good ol' <code>substr($str, 0, 1)</code>?</p>

<p>Also, I noted that curly braces (<code>$str{0}</code>) works as well. What's up with that?</p>
","<p>Yes. Strings can be seen as character arrays, and the way to access a position of an array is to use the <code>[]</code> operator. Usually there's no problem at all in using <code>$str[0]</code> (and I'm pretty sure is much faster than the <code>substr()</code> method).</p>

<p>There is only one caveat with both methods: they will get the first <em>byte</em>, rather than the first <em>character</em>. This is important if you're using multibyte encodings (such as UTF-8). If you want to support that, use <code>mb_substr()</code>. Arguably, you should always assume multibyte input these days, so this is the <em>best</em> option, but it will be slightly slower.</p>
","1972111"
"Insert current date in datetime format mySQL","251985","","<p>I'm having problems getting the date inserted properly into my database.</p>

<pre><code>$date = date('m/d/Y h:i:s', time());
</code></pre>

<p>I use this format, and, it echoes out correctly, however, when, I insert</p>

<pre><code>mysql_query(""INSERT INTO table 
(dateposted) 
VALUES ('$date')"");
</code></pre>

<p>it doesn't appear to work successfully, and, the time remains 00:00:00
If you could find the solution that would be great, thanks.</p>
","<p>If you're looking to store the current time just use MYSQL's functions.</p>

<pre><code>mysql_query(""INSERT INTO `table` (`dateposted`) VALUES (now())"");
</code></pre>

<p>If you need to use PHP to do it, the format it <code>Y-m-d H:i:s</code> so try</p>

<pre><code>$date = date('Y-m-d H:i:s');
mysql_query(""INSERT INTO `table` (`dateposted`) VALUES ('$date')"");
</code></pre>
","9541074"
"How do I implement basic ""Long Polling""?","251712","","<p>I can find lots of information on how Long Polling works (For example, <a href=""http://jfarcand.wordpress.com/2007/05/15/new-adventures-in-comet-polling-long-polling-or-http-streaming-with-ajax-which-one-to-choose/"" rel=""noreferrer"">this</a>, and <a href=""http://en.wikipedia.org/wiki/Comet_(programming)#Ajax_with_long_polling"" rel=""noreferrer"">this</a>), but no <em>simple</em> examples of how to implement this in code.</p>

<p>All I can find is <a href=""http://code.google.com/p/cometd/"" rel=""noreferrer"">cometd</a>, which relies on the Dojo JS framework, and a fairly complex server system..</p>

<p>Basically, how would I use Apache to serve the requests, and how would I write a simple script (say, in PHP) which would ""long-poll"" the server for new messages?</p>

<p>The example doesn't have to be scaleable, secure or complete, it just needs to work!</p>
","<p>It's simpler than I initially thought.. Basically you have a page that does nothing, until the data you want to send is available (say, a new message arrives).</p>

<p>Here is a really basic example, which sends a simple string after 2-10 seconds. 1 in 3 chance of returning an error 404 (to show error handling in the coming Javascript example)</p>

<p><code>msgsrv.php</code></p>

<pre class=""lang-php prettyprint-override""><code>&lt;?php
if(rand(1,3) == 1){
    /* Fake an error */
    header(""HTTP/1.0 404 Not Found"");
    die();
}

/* Send a string after a random number of seconds (2-10) */
sleep(rand(2,10));
echo(""Hi! Have a random number: "" . rand(1,10));
?&gt;
</code></pre>

<p>Note: With a real site, running this on a regular web-server like Apache will quickly tie up all the ""worker threads"" and leave it unable to respond to other requests.. There are ways around this, but it is recommended to write a ""long-poll server"" in something like Python's <a href=""http://twistedmatrix.com/trac/"" rel=""noreferrer"">twisted</a>, which does not rely on one thread per request. <a href=""http://cometdproject.dojotoolkit.org/"" rel=""noreferrer"">cometD</a> is an popular one (which is available in several languages), and <a href=""http://www.tornadoweb.org/"" rel=""noreferrer"">Tornado</a> is a new framework made specifically for such tasks (it was built for FriendFeed's long-polling code)... but as a simple example, Apache is more than adequate! This script could easily be written in any language (I chose Apache/PHP as they are very common, and I happened to be running them locally)</p>

<p>Then, in Javascript, you request the above file (<code>msg_srv.php</code>), and wait for a response.  When you get one, you act upon the data. Then you request the file and wait again, act upon the data (and repeat)</p>

<p>What follows is an example of such a page.. When the page is loaded, it sends the initial request for the <code>msgsrv.php</code> file.. If it succeeds, we append the message to the <code>#messages</code> div, then after 1 second we call the waitForMsg function again, which triggers the wait.</p>

<p>The 1 second <code>setTimeout()</code> is a really basic rate-limiter, it works fine without this, but if <code>msgsrv.php</code> <em>always</em> returns instantly (with a syntax error, for example) - you flood the browser and it can quickly freeze up. This would better be done checking if the file contains a valid JSON response, and/or keeping a running total of requests-per-minute/second, and pausing appropriately.</p>

<p>If the page errors, it appends the error to the <code>#messages</code> div, waits 15 seconds and then tries again (identical to how we wait 1 second after each message)</p>

<p>The nice thing about this approach is it is very resilient. If the clients internet connection dies, it will timeout, then try and reconnect - this is inherent in how long polling works, no complicated error-handling is required</p>

<p>Anyway, the <code>long_poller.htm</code> code, using the jQuery framework:</p>

<pre class=""lang-html prettyprint-override""><code>&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;BargePoller&lt;/title&gt;
    &lt;script src=""http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js"" type=""text/javascript"" charset=""utf-8""&gt;&lt;/script&gt;

    &lt;style type=""text/css"" media=""screen""&gt;
      body{ background:#000;color:#fff;font-size:.9em; }
      .msg{ background:#aaa;padding:.2em; border-bottom:1px #000 solid}
      .old{ background-color:#246499;}
      .new{ background-color:#3B9957;}
    .error{ background-color:#992E36;}
    &lt;/style&gt;

    &lt;script type=""text/javascript"" charset=""utf-8""&gt;
    function addmsg(type, msg){
        /* Simple helper to add a div.
        type is the name of a CSS class (old/new/error).
        msg is the contents of the div */
        $(""#messages"").append(
            ""&lt;div class='msg ""+ type +""'&gt;""+ msg +""&lt;/div&gt;""
        );
    }

    function waitForMsg(){
        /* This requests the url ""msgsrv.php""
        When it complete (or errors)*/
        $.ajax({
            type: ""GET"",
            url: ""msgsrv.php"",

            async: true, /* If set to non-async, browser shows page as ""Loading..""*/
            cache: false,
            timeout:50000, /* Timeout in ms */

            success: function(data){ /* called when request to barge.php completes */
                addmsg(""new"", data); /* Add response to a .msg div (with the ""new"" class)*/
                setTimeout(
                    waitForMsg, /* Request next message */
                    1000 /* ..after 1 seconds */
                );
            },
            error: function(XMLHttpRequest, textStatus, errorThrown){
                addmsg(""error"", textStatus + "" ("" + errorThrown + "")"");
                setTimeout(
                    waitForMsg, /* Try again after.. */
                    15000); /* milliseconds (15seconds) */
            }
        });
    };

    $(document).ready(function(){
        waitForMsg(); /* Start the inital request */
    });
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div id=""messages""&gt;
        &lt;div class=""msg old""&gt;
            BargePoll message requester!
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
","333884"
"php_network_getaddresses: getaddrinfo failed: Name or service not known","251566","","<p>Here is a snippet of my code</p>

<pre><code>$fp = fsockopen($s['url'], 80, $errno, $errstr, 5);
if($fp){
        fwrite($fp, $out);
        fclose($fp);
</code></pre>

<p>When I run it, it outputs:</p>

<blockquote>
  <p>unable to connect to www.mydomain.net/1/file.php:80 (php_network_getaddresses: getaddrinfo failed: Name or service not known</p>
</blockquote>

<p>I can't figure out why. Any help would be greatly appreciated.</p>

<p>EDIT: I forgot to mention that I'm using this to submit GET data to the <code>$s['url']</code></p>
","<p>If you only want to submit GET data to the URL, you should use something straightforward like file_get_contents();</p>

<pre><code>$myGetData = ""?var1=val1&amp;var2=val2"";
file_get_contents($url.$myGetData);
</code></pre>
","2661580"
"how can I add key value pairs to an array?","250596","","<p>How can I add key value pairs to an array?</p>

<p>This won't work:</p>

<pre><code>public function getCategorieenAsArray(){

    $catList = array();

    $query = ""SELECT DISTINCT datasource_id, title FROM table"";
    if ($rs=C_DB::fetchRecordset($query)) {
        while ($row=C_DB::fetchRow($rs)) {
            if(!empty($row[""title""])){
            array_push($catList, $row[""datasource_id""] .""=&gt;"". $row[""title""] );
            }
        }
     }

    return($catList);
}
</code></pre>

<p>Because it gives me: </p>

<pre><code>Array ( [0] =&gt; 1=&gt;Categorie 1 [1] =&gt; 5=&gt;Categorie 2 [2] =&gt; 2=&gt;Caterorie 2 ) 
</code></pre>

<p>And I expect:</p>

<pre><code>Array ( [1] =&gt;Categorie 1 [5] =&gt; Categorie 2  ) 
</code></pre>
","<p>Use the <a href=""http://docs.php.net/manual/en/language.types.array.php#language.types.array.syntax.modifying"" rel=""noreferrer"">square bracket syntax</a>:</p>

<pre><code>if (!empty($row[""title""])) {
    $catList[$row[""datasource_id""]] = $row[""title""];
}
</code></pre>

<p><code>$row[""datasource_id""]</code> is the key for where the value of <code>$row[""title""]</code> is stored in.</p>
","1138382"
"How can I store and retrieve images from a MySQL database using PHP?","250377","","<p>How can I insert an image in MySQL and then retrieve it using PHP?</p>

<p>I have limited experience in either area, and I could use a little code to get me started in figuring this out.</p>
","<p>First you create a MySQL table to store images, like for example:</p>

<pre><code>create table testblob (
    image_id        tinyint(3)  not null default '0',
    image_type      varchar(25) not null default '',
    image           blob        not null,
    image_size      varchar(25) not null default '',
    image_ctgy      varchar(25) not null default '',
    image_name      varchar(50) not null default ''
);
</code></pre>

<p>Then you can write an image to the database like:</p>

<pre><code>/***
 * All of the below MySQL_ commands can be easily
 * translated to MySQLi_ with the additions as commented
 ***/ 
$imgData = file_get_contents($filename);
$size = getimagesize($filename);
mysql_connect(""localhost"", ""$username"", ""$password"");
mysql_select_db (""$dbname"");
// mysqli 
// $link = mysqli_connect(""localhost"", $username, $password,$dbname); 
$sql = sprintf(""INSERT INTO testblob
    (image_type, image, image_size, image_name)
    VALUES
    ('%s', '%s', '%d', '%s')"",
    /***
     * For all mysqli_ functions below, the syntax is:
     * mysqli_whartever($link, $functionContents); 
     ***/
    mysql_real_escape_string($size['mime']),
    mysql_real_escape_string($imgData),
    $size[3],
    mysql_real_escape_string($_FILES['userfile']['name'])
    );
mysql_query($sql);
</code></pre>

<p>You can display an image from the database in a web page with:</p>

<pre><code>$link = mysql_connect(""localhost"", ""username"", ""password"");
mysql_select_db(""testblob"");
$sql = ""SELECT image FROM testblob WHERE image_id=0"";
$result = mysql_query(""$sql"");
header(""Content-type: image/jpeg"");
echo mysql_result($result, 0);
mysql_close($link);
</code></pre>
","1638348"
"How to post data in PHP using file_get_contents?","250299","","<p>I'm using PHP's function <code>file_get_contents()</code> to fetch contents of a URL and then I process headers through the variable <code>$http_response_header</code>.</p>

<p>Now the problem is that some of the URLs need some data to be posted to the URL (for example, login pages). </p>

<p>How do I do that?</p>

<p>I realize using stream_context I may be able to do that but I am not entirely clear.</p>

<p>Thanks.</p>
","<p>Sending an HTTP POST request using <a href=""http://fr.php.net/file_get_contents"" rel=""noreferrer""><code>file_get_contents</code></a> is not that hard, actually : as you guessed, you have to use the <code>$context</code> parameter.</p>

<p><br>
There's an example given in the PHP manual, at this page : <a href=""http://fr2.php.net/manual/en/context.http.php"" rel=""noreferrer"">HTTP context options</a> <em>(quoting)</em> :</p>

<pre><code>$postdata = http_build_query(
    array(
        'var1' =&gt; 'some content',
        'var2' =&gt; 'doh'
    )
);

$opts = array('http' =&gt;
    array(
        'method'  =&gt; 'POST',
        'header'  =&gt; 'Content-type: application/x-www-form-urlencoded',
        'content' =&gt; $postdata
    )
);

$context  = stream_context_create($opts);

$result = file_get_contents('http://example.com/submit.php', false, $context);
</code></pre>

<p>Basically, you have to create a stream, with the right options <em>(there is a full list on that page)</em>, and use it as the third parameter to <code>file_get_contents</code> -- nothing more ;-)</p>

<p><br>
As a sidenote : generally speaking, to send HTTP POST requests, we tend to use curl, which provides a lot of options an all -- but streams are one of the nice things of PHP that nobody knows about... too bad...</p>
","2445332"
"htmlentities() vs. htmlspecialchars()","249745","","<p>What are the differences between <code>htmlspecialchars()</code> and <code>htmlentities()</code>. When should I use one or the other?</p>
","<p>From the PHP documentation for <a href=""http://us2.php.net/htmlentities"" rel=""noreferrer"">htmlentities</a>:</p>

<blockquote>
  <p>This function is identical to <code>htmlspecialchars()</code> in all ways, except with <code>htmlentities()</code>, all characters which have HTML character entity equivalents are translated into these entities. </p>
</blockquote>

<p>From the PHP documentation for <a href=""http://us.php.net/htmlspecialchars"" rel=""noreferrer"">htmlspecialchars</a>:</p>

<blockquote>
  <p>Certain characters have special significance in HTML, and should be represented by HTML entities if they are to preserve their meanings. This function returns a string with some of these conversions made; the translations made are those most useful for everyday web programming. If you require all HTML character entities to be translated, use <code>htmlentities()</code> instead.</p>
</blockquote>

<p>The difference is what gets encoded. The choices are everything (entities) or everything minus ""special"" characters, like ampersand, double and single quotes, less than, and greater than (specialchars).</p>

<p>I prefer to use <code>htmlspecialchars</code> whenever possible.</p>
","46491"
"What is cURL in PHP?","249497","","<p>In PHP, I see the word cURL in many PHP projects.  What is it?  How does it work?</p>

<p>Reference Link: (<a href=""https://stackoverflow.com/questions/3062324/what-is-curl-in-php#comment3135869_3062324"">What is cURL in PHP?</a>)</p>
","<p><a href=""http://php.net/curl"" rel=""noreferrer"">cURL</a> is a library that lets you make HTTP requests in PHP. Everything you need to know about it (and most other extensions) can be found in the <a href=""http://php.net/manual/en/book.curl.php"" rel=""noreferrer"">PHP manual</a>.</p>

<blockquote>
  <p>In order to use PHP's cURL functions
  you need to install the » libcurl
  package. PHP requires that you use
  libcurl 7.0.2-beta or higher. In PHP
  4.2.3, you will need libcurl version 7.9.0 or higher. From PHP 4.3.0, you will need a libcurl version that's
  7.9.8 or higher. PHP 5.0.0 requires a libcurl version 7.10.5 or greater.</p>
</blockquote>

<p>You can make HTTP requests  without cURL, too, though it requires <code>allow_url_fopen</code> to be enabled in your <code>php.ini</code> file.</p>

<pre><code>// Make a HTTP GET request and print it (requires allow_url_fopen to be enabled)
print file_get_contents('http://www.example.com/');
</code></pre>
","3062356"
"PHP multidimensional array search by value","248752","","<p>I have an array where I want to search the <code>uid</code> and get the key of the array.</p>

<h2>Examples</h2>

<p>Assume we have the following 2-dimensional array:</p>

<pre><code>$userdb = array(
    array(
        'uid' =&gt; '100',
        'name' =&gt; 'Sandra Shush',
        'pic_square' =&gt; 'urlof100'
    ),
    array(
        'uid' =&gt; '5465',
        'name' =&gt; 'Stefanie Mcmohn',
        'pic_square' =&gt; 'urlof100'
    ),
    array(
        'uid' =&gt; '40489',
        'name' =&gt; 'Michael',
        'pic_square' =&gt; 'urlof40489'
    )
);
</code></pre>

<p>The function call <code>search_by_uid(100)</code> (uid of first user) should return <code>0</code>.</p>

<p>The function call <code>search_by_uid(40489)</code> should return <code>2</code>.</p>

<p>I tried making loops, but I want a faster executing code.</p>
","<pre><code>function searchForId($id, $array) {
   foreach ($array as $key =&gt; $val) {
       if ($val['uid'] === $id) {
           return $key;
       }
   }
   return null;
}
</code></pre>

<p>This will work. You should call it like this:</p>

<pre><code>$id = searchForId('100', $userdb);
</code></pre>

<p>It is important to know that if you are using <code>===</code> operator compared types have to be exactly same, in this example you have to search <code>string</code> or just use <code>==</code> instead <code>===</code>.</p>

<p>Based on <strong><a href=""https://stackoverflow.com/a/24527099/819364"">angoru</a></strong> answer. In later versions of PHP (<code>&gt;= 5.5.0</code>) you can use one-liner.</p>

<pre><code>$key = array_search('100', array_column($userdb, 'uid'));
</code></pre>

<p>Here is documentation: <a href=""http://php.net/manual/en/function.array-column.php"" rel=""noreferrer"">http://php.net/manual/en/function.array-column.php</a>.</p>
","6661561"
"Turn off warnings and errors on php/mysql","247671","","<p>I am getting expected notices and warnings and would like to turn them off on my php file. errors are:</p>

<pre><code>Warning: fsockopen()
</code></pre>

<p>and notices are:</p>

<pre><code>Notice: A non well formed numeric value encountered in
</code></pre>

<p>I am planning to use cron for this php script and do not want to get any errors or notices logged anywhere.</p>
","<p>When you are sure your script is perfectly working, you can get rid of Warning and notices like this: Put this line at the beginning of your php script: </p>

<pre><code>error_reporting(E_ERROR);
</code></pre>

<p>Before that, when working on your script, i would advise you to properly debug your script so that all notice or warning disappear one by one.
So you should first set it as verbose as possible with:</p>

<pre><code>error_reporting(E_ERROR | E_WARNING | E_PARSE | E_NOTICE);
</code></pre>

<p>UPDATE : how to log errors instead of displaying them
As suggested in the comments, the better solution is to log errors into a file so only the php developer sees the error messages, not the users.
A possible implementation is via the .htaccess file, useful if you don't have access to the php.ini file (<a href=""http://perishablepress.com/press/2008/01/14/advanced-php-error-handling-via-htaccess/"" rel=""noreferrer"">source</a>).</p>

<pre><code># supress php errors
php_flag display_startup_errors off
php_flag display_errors off
php_flag html_errors off
php_value docref_root 0
php_value docref_ext 0
# enable PHP error logging
php_flag  log_errors on
php_value error_log  /home/path/public_html/domain/PHP_errors.log
# prevent access to PHP error log
&lt;Files PHP_errors.log&gt;
 Order allow,deny
 Deny from all
 Satisfy All
&lt;/Files&gt;
</code></pre>
","1645674"
"How to use cURL to get jSON data and decode the data?","247581","","<p>So I have a link that returns a jSON object, and I need to have it decoded and put into variables in PHP. </p>

<p><strong>URL</strong></p>

<pre><code>api.php?action=getThreads&amp;hash=123fajwersa&amp;node_id=4&amp;order_by=post_date&amp;order=desc&amp;limit=1&amp;grab_content&amp;content_limit=1
</code></pre>

<p>This is the object that it returns </p>

<pre><code>{
    ""count"": 1,
    ""threads"": {
        ""38752"": {
            ""thread_id"": 38752,
            ""node_id"": 4,
            ""title"": ""The ShadyCraft Beta Launch!"",
            ""reply_count"": 45,
            ""view_count"": 946,
            ""user_id"": 2,
            ""username"": ""Shady"",
            ""post_date"": 1366956695,
            ""sticky"": 0,
            ""discussion_state"": ""visible"",
            ""discussion_open"": 1,
            ""discussion_type"": """",
            ""first_post_id"": 226167,
            ""first_post_likes"": 7,
            ""last_post_date"": 1369094302,
            ""last_post_id"": 228226,
            ""last_post_user_id"": 2,
            ""last_post_username"": ""Shady"",
            ""prefix_id"": 19,
            ""tinhte_xentag_tags"": ""a:4:{i:0;s:9:\""minecraft\"";i:2;s:4:\""news\"";i:3;s:14:\""private server\"";i:1;s:10:\""shadycraft\"";}"",
            ""content"": {
                ""count"": 1,
                ""content"": {
                    ""226167"": {
                        ""post_id"": 226167,
                        ""thread_id"": 38752,
                        ""user_id"": 2,
                        ""username"": ""Shady"",
                        ""post_date"": 1366956695,
                        ""message"": ""[ATTACH=full]4143[\/ATTACH]\n \nWe've completely restructured ShadyCraft, and today will be the launch of the ShadyCraft beta.\n \nCurrent Features\n[LIST]\n[*]Towns\n[*]Nations\n[*]All out wars\n[*]A live update map\n[*]No White-list\n[*]Earn Money\n[*]Griefing allowed where possible\n[\/LIST]\nThese are just some features which have a lot more things behind them. For instance, there is town and nation upkeep, tax, kingdoms, mayors, and kings.\n \nWe really wanted to have the server self-governed and this is why griefing and PvP are allowed where ever they are possible. All towns and nations cannot be griefed by other members. You can create a town and buy plots for it and expand the town as you wish.\n \n[SIZE=4]All of this is shown in the live updating map located [URL='http:\/\/50.7.6.116:8123']here[\/URL].[\/SIZE]\n \n[SIZE=4][SIZE=6]Join the Beta Now[\/SIZE][\/SIZE]\n[SIZE=6]Server-IP: 50.7.6.116[\/SIZE]\n \n \n[USER=118053]Frenchy[\/USER] and [USER=4863]Wolfbane[\/USER]"",
                        ""ip_id"": 747429,
                        ""message_state"": ""visible"",
                        ""attach_count"": 1,
                        ""position"": 0,
                        ""likes"": 7,
                        ""like_users"": ""a:5:{i:0;a:2:{s:7:\""user_id\"";i:105699;s:8:\""username\"";s:6:\""kvothe\"";}i:1;a:2:{s:7:\""user_id\"";i:146724;s:8:\""username\"";s:12:\""Graveyard219\"";}i:2;a:2:{s:7:\""user_id\"";i:70182;s:8:\""username\"";s:9:\""wmbrown18\"";}i:3;a:2:{s:7:\""user_id\"";i:5473;s:8:\""username\"";s:9:\""Oblivious\"";}i:4;a:2:{s:7:\""user_id\"";i:118053;s:8:\""username\"";s:7:\""Frenchy\"";}}"",
                        ""warning_id"": 0,
                        ""warning_message"": """",
                        ""anonymous_posting_real_user_id"": 0,
                        ""anonymous_posting_real_username"": """"
                    }
                }
            }
        }
    }
}
</code></pre>

<p>I am really only interested in the </p>

<pre><code>""title"":""The ShadyCraft Beta Launch!"",  
""reply_count:""45, 
""view_count"": 946,  
""user_id"":2, 
""username"":""Shady"", 
""post_date"":1366956695, 
""sticky"":0, 
""discussion_state"":""visible"",
""discussion_open"":1,
</code></pre>

<p>and finally the message </p>

<pre><code>[ATTACH=full]4143[/ATTACH]

We've completely restructured ShadyCraft, and today will be the launch of the ShadyCraft beta.

Current Features
[LIST]
[*]Towns
[*]Nations
[*]All out wars
[*]A live update map
[*]No White-list
[*]Earn Money
[*]Griefing allowed where possible
[/LIST]
These are just some features which have a lot more things behind them. For instance, there is town and nation upkeep, tax, kingdoms, mayors, and kings.

We really wanted to have the server self-governed and this is why griefing and PvP are allowed where ever they are possible. All towns and nations cannot be griefed by other members. You can create a town and buy plots for it and expand the town as you wish.

[SIZE=4]All of this is shown in the live updating map located [URL='http://50.7.6.116:8123']here[/URL].[/SIZE]

[SIZE=4][SIZE=6]Join the Beta Now[/SIZE][/SIZE]
[SIZE=6]Server-IP: 50.7.6.116[/SIZE]


[USER=118053]Frenchy[/USER] and [USER=4863]Wolfbane[/USER]
</code></pre>

<p>So how can I extract the jSON object and put it in to correct variables in PHP, that I can later use? </p>

<p>Variables like: <code>$username</code>, <code>$user_id</code>, <code>$message</code>, <code>$title</code>, <code>$discussionState</code>, and so on.</p>

<p><strong>I just need to know how I can retrieve the jSON object, then extract the data into variables in PHP.</strong> </p>

<p>I am now able to get the PHP array, but I am having some troubles calling the correct values. Here is the array.</p>

<blockquote>
  <p>Array ( [count] => 1 [threads] => Array ( [13] => Array ( [thread_id]
  => 13 [node_id] => 4 [title] => Forum Integration nearly complete! [reply_count] => 0 [view_count] => 0 [user_id] => 59 [username] =>
  Faeron [post_date] => 1369257302 [sticky] => 0 [discussion_state] =>
  visible [discussion_open] => 1 [discussion_type] => [first_post_id] =>
  23 [first_post_likes] => 0 [last_post_date] => 1369257302
  [last_post_id] => 23 [last_post_user_id] => 59 [last_post_username] =>
  Faeron [prefix_id] => 1 [content] => Array ( [count] => 1 [content] =>
  Array ( [23] => Array ( [post_id] => 23 [thread_id] => 13 [user_id] =>
  59 [username] => Faeron [post_date] => 1369257302 [message] => It's
  been quite a while since we began to integrate the phanime Forums with
  the main site. We have now finished the integration with the phanime
  Forums and the main site. You will no longer notice that there are two
  platforms running phanime, but instead only one. Our next step is to
  theme the forums to make it look like the main site! [ip_id] => 268
  [message_state] => visible [attach_count] => 0 [position] => 0 [likes]
  => 0 [like_users] => a:0:{} [warning_id] => 0 [warning_message] => ) ) ) ) ) )</p>
</blockquote>

<p>Now lets say this array was named <code>$array</code> then to get the first element's value ""[count]"" can't I just say the following: <code>print $array[""[count]""]</code>  &lt;-- this returns an error. </p>

<p>What about the element that has a value as an array itself, which is the <code>[threads]</code> element. How do I get, perhaps the <code>[thread_id]</code> element's value? </p>
","<p>I think this one will answer your question :P</p>

<pre><code>$url=""https://.../api.php?action=getThreads&amp;hash=123fajwersa&amp;node_id=4&amp;order_by=post_date&amp;order=‌​desc&amp;limit=1&amp;grab_content&amp;content_limit=1"";
</code></pre>

<p><strong>Using <a href=""http://php.net/manual/pt_BR/book.curl.php"" rel=""noreferrer""><code>cURL</code></a></strong></p>

<pre><code>//  Initiate curl
$ch = curl_init();
// Disable SSL verification
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
// Will return the response, if false it print the response
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
// Set the url
curl_setopt($ch, CURLOPT_URL,$url);
// Execute
$result=curl_exec($ch);
// Closing
curl_close($ch);

// Will dump a beauty json :3
var_dump(json_decode($result, true));
</code></pre>

<p><strong>Using <a href=""http://php.net/manual/pt_BR/function.file-get-contents.php"" rel=""noreferrer""><code>file_get_contents</code></a></strong></p>

<pre><code>$result = file_get_contents($url);
// Will dump a beauty json :3
var_dump(json_decode($result, true));
</code></pre>

<p><strong>Accessing</strong></p>

<pre><code>$array[""threads""][13/* thread id */][""title""/* thread key */]
</code></pre>

<p><strong>And</strong></p>

<pre><code>$array[""threads""][13/* thread id */][""content""/* thread key */][""content""][23/* post id */][""message"" /* content key */];
</code></pre>
","16701318"
"How to convert xml into array in php?","247461","","<p>I want to convert below XML to PHP array. Any suggestions on how I can do this?</p>

<pre><code>&lt;aaaa Version=""1.0""&gt;
   &lt;bbb&gt;
     &lt;cccc&gt;
       &lt;dddd Id=""id:pass"" /&gt;
       &lt;eeee name=""hearaman"" age=""24"" /&gt;
     &lt;/cccc&gt;
   &lt;/bbb&gt;
&lt;/aaaa&gt;
</code></pre>
","<p>Another option is the SimpleXML extension (I believe it comes standard with most php installs.)</p>

<p><a href=""http://php.net/manual/en/book.simplexml.php"" rel=""noreferrer"">http://php.net/manual/en/book.simplexml.php</a></p>

<p>The syntax looks something like this for your example</p>

<pre><code>$xml = new SimpleXMLElement($xmlString);
echo $xml-&gt;bbb-&gt;cccc-&gt;dddd['Id'];
echo $xml-&gt;bbb-&gt;cccc-&gt;eeee['name'];
// or...........
foreach ($xml-&gt;bbb-&gt;cccc as $element) {
  foreach($element as $key =&gt; $val) {
   echo ""{$key}: {$val}"";
  }
}
</code></pre>
","6578969"
"How can I select and upload multiple files with HTML and PHP, using HTTP POST?","246892","","<p>I have experience doing this with single file uploads using <code>&lt;input type=""file""&gt;</code>.  However, I am having trouble doing uploading more than one at a time.</p>

<p>For example, I'd like to be able to select a series of images, then upload them to the server, all at once.</p>

<p><em>It would be great to use a single file input control, if possible.</em></p>

<p>Does anyone know how to accomplish this?  Thanks!</p>
","<p>This is possible in <a href=""http://en.wikipedia.org/wiki/File_select#Multiple_file_selection"" rel=""noreferrer"">HTML5</a>. Example (PHP 5.4):</p>

<pre><code>&lt;!doctype html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Test&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;form method=""post"" enctype=""multipart/form-data""&gt;
            &lt;input type=""file"" name=""my_file[]"" multiple&gt;
            &lt;input type=""submit"" value=""Upload""&gt;
        &lt;/form&gt;
        &lt;?php
            if (isset($_FILES['my_file'])) {
                $myFile = $_FILES['my_file'];
                $fileCount = count($myFile[""name""]);

                for ($i = 0; $i &lt; $fileCount; $i++) {
                    ?&gt;
                        &lt;p&gt;File #&lt;?= $i+1 ?&gt;:&lt;/p&gt;
                        &lt;p&gt;
                            Name: &lt;?= $myFile[""name""][$i] ?&gt;&lt;br&gt;
                            Temporary file: &lt;?= $myFile[""tmp_name""][$i] ?&gt;&lt;br&gt;
                            Type: &lt;?= $myFile[""type""][$i] ?&gt;&lt;br&gt;
                            Size: &lt;?= $myFile[""size""][$i] ?&gt;&lt;br&gt;
                            Error: &lt;?= $myFile[""error""][$i] ?&gt;&lt;br&gt;
                        &lt;/p&gt;
                    &lt;?php
                }
            }
        ?&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Here's what it looks like in Chrome after selecting 2 items in the file dialog:</p>

<p><img src=""https://i.stack.imgur.com/Dg5TW.png"" alt=""chrome multiple file select""></p>

<p>And here's what it looks like after clicking the ""Upload"" button.</p>

<p><img src=""https://i.stack.imgur.com/3Q140.png"" alt=""submitting multiple files to PHP""></p>

<p>This is just a sketch of a fully working answer. See <a href=""http://php.net/manual/en/features.file-upload.php"" rel=""noreferrer"">PHP Manual: Handling file uploads</a> for more information on proper, secure handling of file uploads in PHP.</p>
","8808915"
"PHP append one array to another (not array_push or +)","246335","","<p>How to append one array to another without comparing their keys?</p>

<pre><code>$a = array( 'a', 'b' );
$b = array( 'c', 'd' );
</code></pre>

<p>At the end it should be: <code>Array( [0]=&gt;a [1]=&gt;b [2]=&gt;c [3]=&gt;d )</code>
If I use something like <code>[]</code> or <code>array_push</code>, it will cause one of these results:</p>

<pre><code>Array( [0]=&gt;a [1]=&gt;b [2]=&gt;Array( [0]=&gt;c [1]=&gt;d ) )
//or
Array( [0]=&gt;c [1]=&gt;d )
</code></pre>

<p>It just should be something, doing this, but in a more elegant way:</p>

<pre><code>foreach ( $b AS $var )
    $a[] = $var;
</code></pre>
","<p><a href=""http://php.net/manual/en/function.array-merge.php"" rel=""noreferrer""><code>array_merge</code></a> is the elegant way:</p>

<pre><code>$a = array('a', 'b');
$b = array('c', 'd');
$merge = array_merge($a, $b); 
// $merge is now equals to array('a','b','c','d');
</code></pre>

<p>Doing something like:</p>

<pre><code>$merge = $a + $b;
// $merge now equals array('a','b')
</code></pre>

<p>Will not work, because the <code>+</code> operator does not actually merge them. If they <code>$a</code> has the same keys as <code>$b</code>, it won't do anything.</p>
","4268954"
"Upgrading PHP in XAMPP for Windows?","245747","","<p>I would like to know how you upgrade PHP in Xampp for Windows? I tried to download the latest PHP version from the main PHP site but when I check (phpinfo) I still get that the previous version is still in use.</p>
","<p>Take a backup of your htdocs and data folder (subfolder of MySQL folder), reinstall upgraded version and replace those folders.</p>

<p><strong>Note:</strong>
In case you have changed config files like <em>PHP (php.ini), Apache (httpd.conf)</em> or any other, please take back up of those files as well and replace them with newly installed version. </p>
","2154839"
"Form submit with AJAX passing form data to PHP without page refresh","245376","","<p>Can anyone tell me why this bit of code isn't working?</p>

<pre><code>&lt;html&gt;
  &lt;head&gt;
    &lt;script src=""http://code.jquery.com/jquery-1.9.1.js""&gt;&lt;/script&gt;
    &lt;script&gt;
      $(function () {
        $('form').bind('submit', function () {
          $.ajax({
            type: 'post',
            url: 'post.php',
            data: $('form').serialize(),
            success: function () {
              alert('form was submitted');
            }
          });
          return false;
        });
      });
    &lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;form&gt;
      &lt;input name=""time"" value=""00:00:00.00""&gt;&lt;br&gt;
      &lt;input name=""date"" value=""0000-00-00""&gt;&lt;br&gt;
      &lt;input name=""submit"" type=""button"" value=""Submit""&gt;
    &lt;/form&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>When I push submit nothing happens. In the receiving php file I'm using $_POST['time'] and $_POST['date'] to put the data in a mysql query but it's just not getting the data. Any suggestions? I'm assuming it's something to do with the submit button but I can't figure it out</p>
","<p>The form is submitting after the ajax request.</p>

<pre><code>&lt;html&gt;
  &lt;head&gt;
    &lt;script src=""http://code.jquery.com/jquery-1.9.1.js""&gt;&lt;/script&gt;
    &lt;script&gt;
      $(function () {

        $('form').on('submit', function (e) {

          e.preventDefault();

          $.ajax({
            type: 'post',
            url: 'post.php',
            data: $('form').serialize(),
            success: function () {
              alert('form was submitted');
            }
          });

        });

      });
    &lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;form&gt;
      &lt;input name=""time"" value=""00:00:00.00""&gt;&lt;br&gt;
      &lt;input name=""date"" value=""0000-00-00""&gt;&lt;br&gt;
      &lt;input name=""submit"" type=""submit"" value=""Submit""&gt;
    &lt;/form&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
","16616315"
"How to convert an image to base64 encoding?","244767","","<p>Can you please guide me how can I convert an image from a URL to base64 encoding?</p>
","<p>I think that it should be:</p>

<pre><code>$path = 'myfolder/myimage.png';
$type = pathinfo($path, PATHINFO_EXTENSION);
$data = file_get_contents($path);
$base64 = 'data:image/' . $type . ';base64,' . base64_encode($data);
</code></pre>
","13758760"
"How to get input field value using PHP","244717","","<p>I have a input field as follows:</p>

<pre><code>&lt;input type=""text"" name=""subject"" id=""subject"" value=""Car Loan""&gt;
</code></pre>

<p>I would like to get the input fields value <code>Car Loan</code> and assign it to a session. How do I do this using PHP or jQuery?</p>
","<p>Use PHP's <code>$_POST</code> or <code>$_GET</code> superglobals to retrieve the value of the input tag via the name of the HTML tag. </p>

<p>For Example, change the method in your form and then echo out the value by the name of the input:</p>

<p><strong>Using <code>$_GET</code> method:</strong></p>

<pre><code>&lt;form name=""form"" action="""" method=""get""&gt;
  &lt;input type=""text"" name=""subject"" id=""subject"" value=""Car Loan""&gt;
&lt;/form&gt;
</code></pre>

<p>To show the value: </p>

<pre><code>&lt;?php echo $_GET['subject']; ?&gt;
</code></pre>

<p><strong>Using <code>$_POST</code> method:</strong></p>

<pre><code>&lt;form name=""form"" action="""" method=""post""&gt;
  &lt;input type=""text"" name=""subject"" id=""subject"" value=""Car Loan""&gt;
&lt;/form&gt;
</code></pre>

<p>To show the value: </p>

<pre><code>&lt;?php echo $_POST['subject']; ?&gt;
</code></pre>
","13447651"
"PHP String to Float","244506","","<p>I am not familiar with PHP at all and had a quick question.</p>

<p>I have 2 variables @pricePerUnit and @invoicedUnits. Here's the code that is setting these to values:</p>

<pre><code>$InvoicedUnits = ((string) $InvoiceLineItem-&gt;InvoicedUnits);
$pricePerUnit = ((string) $InvoiceLineItem-&gt;PricePerUnit);
</code></pre>

<p>If I output this, I get the correct values. Lets say 5000 invoiced units and 1.00 for price.</p>

<p>Now, I need to show the total amount spent. When I multiply these two together it doesn't work (as expected, these are strings).</p>

<p>But I have no clue how to parse/cast/convert variables in PHP.</p>

<p>What should I do?</p>
","<pre><code>$rootbeer = (float) $InvoicedUnits;
</code></pre>

<p>Should do it for you. Check out <a href=""http://us2.php.net/language.types.type-juggling"" rel=""noreferrer"">Type-Juggling</a>. You should also read <a href=""http://us2.php.net/manual/en/language.types.string.php#language.types.string.conversion"" rel=""noreferrer"">String conversion to Numbers</a>.</p>
","481479"
"How to get form input array into PHP array","244344","","<p>I have a form like the one below which is posted to contacts.php, and the user can dynamically add more with jquery.</p>

<pre><code>&lt;input type=""text"" name=""name[]"" /&gt;
&lt;input type=""text"" name=""email[]"" /&gt;

&lt;input type=""text"" name=""name[]"" /&gt;
&lt;input type=""text"" name=""email[]"" /&gt;

&lt;input type=""text"" name=""name[]"" /&gt;
&lt;input type=""text"" name=""email[]"" /&gt;
</code></pre>

<p>If i echo them out in php with the code below</p>

<pre><code>$name = $_POST['name'];
$email = $_POST['account'];

foreach( $name as $v ) {
print $v;
}

foreach( $email as $v ) {
print $v;
}
</code></pre>

<p>I will get something like this:</p>

<blockquote>
  <p>name1name2name3email1email2email3</p>
</blockquote>

<p>how can I get those arrays into something like the code below</p>

<pre><code>function show_Names($n, $m)
{
return(""The name is $n and email is $m, thank you"");
}

$a = array(""name1"", ""name2"", ""name3"");
$b = array(""email1"", ""email2"", ""email3"");

$c = array_map(""show_Names"", $a, $b);
print_r($c);
</code></pre>

<p>so my output is like this:</p>

<blockquote>
  <p>The name is <i>name1</i> and email is <i>email1</i>, thank you<br>
  The name is <i>name2</i> and email is <i>email2</i>, thank you<br>
  The name is <i>name3</i> and email is <i>email3</i>, thank you  </p>
</blockquote>

<p>thank you for any help or advice</p>
","<p>They are already in arrays: <code>$name</code> is an array, as is <code>$email</code></p>

<p>So all you need to do is add a bit of processing to attack both arrays:</p>

<pre><code>$name = $_POST['name'];
$email = $_POST['account'];

foreach( $name as $key =&gt; $n ) {
  print ""The name is "".$n."" and email is "".$email[$key]."", thank you\n"";
}
</code></pre>

<p>To handle more inputs, just extend the pattern:</p>

<pre><code>$name = $_POST['name'];
$email = $_POST['account'];
$location = $_POST['location'];

foreach( $name as $key =&gt; $n ) {
  print ""The name is "".$n."", email is "".$email[$key].
        "", and location is "".$location[$key]."". Thank you\n"";
}
</code></pre>
","3314581"
"Error message Strict standards: Non-static method should not be called statically in php","244289","","<p>I have the following php. However when I see the index.php I get the following error message. </p>

<blockquote>
  <p>Strict standards: Non-static method
  Page::getInstanceByName() should not
  be called statically in
  /var/www/webworks/index.php on line 12</p>
</blockquote>

<p>I am hoping someone can tell me how to fix the problem.</p>

<p>Thanks in advance.</p>

<p>index.php</p>

<pre><code>// { common variables and functions
include_once('ww.incs/common.php');
$page=isset($_REQUEST['page'])?$_REQUEST['page']:'';
$id=isset($_REQUEST['id'])?(int)$_REQUEST['id']:0;
...

// { get current page id
if(!$id){
    if($page){ // load by name
        $r=Page::getInstanceByName($page);
        if($r &amp;&amp; isset($r-&gt;id))$id=$r-&gt;id;
    }
    if(!$id){ // else load by special
        $special=1;
        if(!$page){
            $r=Page::getInstanceBySpecial($special);
            if($r &amp;&amp; isset($r-&gt;id))$id=$r-&gt;id;
        }
    }
}

// { load page data
if($id){
    $PAGEDATA=(isset($r) &amp;&amp; $r)?$r : Page::getInstance($id);
}
else{
    echo '404 thing goes here';
    exit;
}
...
...
</code></pre>

<p>ww.incs/common.php</p>

<pre><code>&lt;?php
require dirname(__FILE__).'/basics.php';
...
...
</code></pre>

<p>ww.incs/basics.php</p>

<pre><code>session_start();
if(!function_exists('__autoload')){
    function __autoload($name) {
        require $name . '.php';
    }
}
...
...
</code></pre>

<p>Page.php</p>

<pre><code>class Page{
    static $instances             = array();
    static $instancesByName     = array();
    static $instancesBySpecial   = array();
    function __construct($v,$byField=0,$fromRow=0,$pvq=0){
        # byField: 0=ID; 1=Name; 3=special
        if (!$byField &amp;&amp; is_numeric($v)){ // by ID
            $r=$fromRow?$fromRow:($v?dbRow(""select * from pages where id=$v limit 1""):array());
        }
        else if ($byField == 1){ // by name
            $name=strtolower(str_replace('-','_',$v));
            $fname='page_by_name_'.md5($name);
            $r=dbRow(""select * from pages where name like '"".addslashes($name).""' limit 1"");
        }
        else if ($byField == 3 &amp;&amp; is_numeric($v)){ // by special
            $fname='page_by_special_'.$v;
            $r=dbRow(""select * from pages where special&amp;$v limit 1"");
        }
        else return false;
        if(!count($r || !is_array($r)))return false;
        if(!isset($r['id']))$r['id']=0;
        if(!isset($r['type']))$r['type']=0;
        if(!isset($r['special']))$r['special']=0;
        if(!isset($r['name']))$r['name']='NO NAME SUPPLIED';
        foreach ($r as $k=&gt;$v) $this-&gt;{$k}=$v;
        $this-&gt;urlname=$r['name'];
        $this-&gt;dbVals=$r;
        self::$instances[$this-&gt;id] =&amp; $this;
        self::$instancesByName[preg_replace('/[^a-z0-9]/','-',strtolower($this-&gt;urlname))] =&amp; $this;
        self::$instancesBySpecial[$this-&gt;special] =&amp; $this;
        if(!$this-&gt;vars)$this-&gt;vars='{}';
        $this-&gt;vars=json_decode($this-&gt;vars);
    }
    function getInstance($id=0,$fromRow=false,$pvq=false){
        if (!is_numeric($id)) return false;
        if (!@array_key_exists($id,self::$instances)) self::$instances[$id]=new Page($id,0,$fromRow,$pvq);
        return self::$instances[$id];
    }
    function getInstanceByName($name=''){
        $name=strtolower($name);
        $nameIndex=preg_replace('#[^a-z0-9/]#','-',$name);
        if(@array_key_exists($nameIndex,self::$instancesByName))return self::$instancesByName[$nameIndex];
        self::$instancesByName[$nameIndex]=new Page($name,1);
        return self::$instancesByName[$nameIndex];
    }
    function getInstanceBySpecial($sp=0){
        if (!is_numeric($sp)) return false;
        if (!@array_key_exists($sp,$instancesBySpecial)) $instancesBySpecial[$sp]=new Page($sp,3);
        return $instancesBySpecial[$sp];
    }
</code></pre>
","<p>Your methods are missing the <a href=""http://de2.php.net/manual/en/language.oop5.static.php"" rel=""noreferrer""><code>static</code> keyword</a>. Change</p>

<pre><code>function getInstanceByName($name=''){
</code></pre>

<p>to</p>

<pre><code>public static function getInstanceByName($name=''){
</code></pre>

<p>if you want to call them statically. </p>

<p>Note that static methods (and <a href=""https://stackoverflow.com/questions/3387459/when-to-use-a-singleton/3387530#3387530"">Singletons</a>) are <a href=""http://misko.hevery.com/2008/12/15/static-methods-are-death-to-testability/"" rel=""noreferrer"">death to testability</a>.</p>

<p>Also note that you are doing way too much work in the constructor, especially all that querying shouldn't be in there. All your constructor is supposed to do is set the object into a valid state. If you have to have data from outside the class to do that consider injecting it instead of pulling it. Also note that constructors cannot return anything. They will always return void so all these <code>return false</code> statements do nothing but end the construction.</p>
","4684514"
"Undefined function mysql_connect()","244006","","<p>I have ran <code>aptitude install php5-mysql</code> (and restarted MySQL/Apache 2), but I am still getting this error:</p>

<blockquote>
  <p>Fatal error: Call to undefined function mysql_connect() in /home/validate.php on line 21 </p>
</blockquote>

<p><code>phpinfo()</code> says the /etc/php5/apache2/conf.d/pdo_mysql.ini file has been parsed.</p>
","<p>Well, this is your chance! It looks like <a href=""http://php.net/manual/en/book.pdo.php"" rel=""noreferrer"">PDO</a> is ready; use that instead.</p>

<p>Try checking to see if the PHP MySQL extension module is being loaded:</p>

<pre><code>&lt;?php
    phpinfo();
?&gt;
</code></pre>

<p>If it's not there, add the following to the <code>php.ini</code> file:</p>

<pre><code>extension=php_mysql.dll
</code></pre>
","13825126"
"Adding days to $Date in PHP","243152","","<p>I have a date returned as part of a mySQL query in the form <code>2010-09-17</code></p>

<p>I would like to set the variables $Date2 to $Date5 as follows:</p>

<p><code>$Date2 = $Date + 1</code></p>

<p><code>$Date3 = $Date + 2</code></p>

<p>etc..</p>

<p>so that it returns <code>2010-09-18</code>, <code>2010-09-19</code> etc...</p>

<p>I have tried </p>

<pre><code>date('Y-m-d', strtotime($Date. ' + 1 day'))
</code></pre>

<p>but this gives me the date BEFORE <code>$Date</code>.</p>

<p>What is the correct way to get my Dates in the format form 'Y-m-d' so that they may be used in another query?</p>
","<p>All you have to do is use <code>days</code> instead of <code>day</code> like this:</p>

<pre><code>&lt;?php
$Date = ""2010-09-17"";
echo date('Y-m-d', strtotime($Date. ' + 1 days'));
echo date('Y-m-d', strtotime($Date. ' + 2 days'));
?&gt;
</code></pre>

<p>And it outputs correctly:</p>

<pre><code>2010-09-18
2010-09-19
</code></pre>
","3727821"
"Is there an equivalent for var_dump (PHP) in Javascript?","243011","","<p>We need to see what methods/fields an object has in Javascript.</p>
","<p>As the others said, you can use Firebug, and that will sort you out no worries on Firefox. Chrome &amp; Safari both have a built-in developer console which has an almost identical interface to Firebug's console, so your code should be portable across those browsers. For other browsers, there's <a href=""http://getfirebug.com/lite.html"" rel=""noreferrer"">Firebug Lite</a>.</p>

<p>If Firebug isn't an option for you, then try this simple script:</p>

<pre><code>function dump(obj) {
    var out = '';
    for (var i in obj) {
        out += i + "": "" + obj[i] + ""\n"";
    }

    alert(out);

    // or, if you wanted to avoid alerts...

    var pre = document.createElement('pre');
    pre.innerHTML = out;
    document.body.appendChild(pre)
}
</code></pre>

<p>I'd recommend against alerting each individual property: some objects have a LOT of properties and you'll be there all day clicking ""OK"", ""OK"", ""OK"", ""O... dammit that was the property I was looking for"".</p>
","323809"
"php is null or empty?","242938","","<p>I have a weird question regarding PHP and <em>NULL</em>, please see the following code:</p>

<pre><code>  $a = '';
  if($a == NULL) {
      echo 'is null';
  }
</code></pre>

<p>Why do I see <strong>is null</strong> ? if <code>$a</code> is empty!, is that a bug? Thank you.</p>
","<p>What you're looking for is:</p>

<pre><code>if($variable === NULL) {...}
</code></pre>

<p>PHP treats <em>NULL</em>, <em>false</em>, <em>0</em>, and the <em>empty</em> string as equal.</p>
","8236374"
"PDOException SQLSTATE[HY000] [2002] No such file or directory","242391","","<p>I believe that I've successfully deployed my (very basic) site to fortrabbit, but as soon as I connect to SSH to run some commands (such as <code>php artisan migrate</code> or <code>php artisan db:seed</code>) I get an error message:</p>

<pre><code>[PDOException]
SQLSTATE[HY000] [2002] No such file or directory
</code></pre>

<p>At some point the migration must have worked, because my tables are there - but this doesn't explain why it isn't working for me now.</p>
","<p>The error message indicates that a MySQL connection via socket is tried (which is not supported).</p>

<p>In the context of Laravel (artisan), you probably want to use a different / the correct environment. Eg: <code>php artisan migrate --env=production</code> (or whatever environment). See <a href=""http://laravel.com/docs/artisan#usage"" rel=""noreferrer"">here</a>.</p>
","20733001"
"Pass a PHP array to a JavaScript function","241871","","<p>I am trying to get a PHP array variable into a JavaScript variable.</p>

<p>This is my code:</p>

<pre><code>&lt;html&gt;
    &lt;head&gt;
        &lt;script type=""text/javascript""&gt;
              function drawChart(row,day,week,month,date)
              {
                  // Some code...
              }
        &lt;/script&gt;
    &lt;/head&gt;

    &lt;body&gt;
        &lt;?php
            for($counter = 0; $counter&lt;count($au); $counter++)
            {
                switch($au[$counter]-&gt;id)
                {
                    case pageID.'/insights/page_active_users/day':
                        $day[] = $au[$counter]-&gt;value;
                    break;
                    case pageID.'/insights/page_active_users/week':
                        $week[] = $au[$counter]-&gt;value;
                    break;
                    case pageID.'/insights/page_active_users/month':
                        $month[] = $au[$counter]-&gt;value;
                    break;
                }
            }
        ?&gt;
        &lt;script&gt;
            drawChart(600/50, '&lt;?php echo $day; ?&gt;', '&lt;?php echo $week; ?&gt;', '&lt;?php echo $month; ?&gt;', '&lt;?php echo createDatesArray(cal_days_in_month(CAL_GREGORIAN, date('m',strtotime('-1 day')), date('Y',strtotime('-1 day')))); ?&gt;');
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>I can't get value of the PHP array.</p>

<p>How do I fix this problem?</p>
","<p>In the following example you have an PHP array, then firstly create a JavaScript array by a PHP array:</p>

<pre><code>&lt;script type=""javascript""&gt;
    day = new Array(&lt;?php echo implode(',', $day); ?&gt;);
    week = new Array(&lt;?php echo implode(',',$week); ?&gt;);
    month = new Array(&lt;?php echo implode(',',$month); ?&gt;);

    &lt;!--  Then pass it to the JavaScript function:   --&gt;

    drawChart(&lt;?php echo count($day); ?&gt;, day, week, month);
&lt;/script&gt;
</code></pre>
","5051006"
"display data from SQL database into php/ html table","240427","","<p>OK I have a database on phpmyadmin (sql) and I want to display one of my tables into a table on HTML/PHP. I have searched online and can not implement this feature, so I'm wondering if someone could help me with the coding on this?</p>

<pre><code>database = 'hrmwaitrose'
username = 'root'
host = 'localhost'
</code></pre>

<p>NO PW</p>

<p>I would like to display the data from table name <code>employee</code></p>
","<p>You say you have a database on PhpMyAdmin, so you are using MySQL. PHP provides functions for connecting to a MySQL database.</p>

<pre><code>$connection = mysql_connect('localhost', 'root', ''); //The Blank string is the password
mysql_select_db('hrmwaitrose');

$query = ""SELECT * FROM employee""; //You don't need a ; like you do in SQL
$result = mysql_query($query);

echo ""&lt;table&gt;""; // start a table tag in the HTML

while($row = mysql_fetch_array($result)){   //Creates a loop to loop through results
echo ""&lt;tr&gt;&lt;td&gt;"" . $row['name'] . ""&lt;/td&gt;&lt;td&gt;"" . $row['age'] . ""&lt;/td&gt;&lt;/tr&gt;"";  //$row['index'] the index here is a field name
}

echo ""&lt;/table&gt;""; //Close the table in HTML

mysql_close(); //Make sure to close out the database connection
</code></pre>

<p>In the while loop (which runs every time we encounter a result row), we echo   which creates a new table row. I also add a  to contain the fields.</p>

<p>This is a very basic template. You see the other answers using mysqli_connect instead of mysql_connect. mysqli stands for mysql improved. It offers a better range of features. You notice it is also a little bit more complex. It depends on what you need.</p>
","15251402"
"Get original URL referer with PHP?","240396","","<p>I am using <code>$_SERVER['HTTP_REFERER'];</code> to get the referer Url. It works as expected until the user clicks another page and the referer changes to the last page.</p>

<p>How do I store the original referring Url?</p>
","<p>Store it either in a cookie (if it's acceptable for your situation), or in a session variable.</p>

<pre class=""lang-php prettyprint-override""><code>session_start();

if ( !isset( $_SESSION[""origURL""] ) )
    $_SESSION[""origURL""] = $_SERVER[""HTTP_REFERER""];
</code></pre>
","1864587"
"How can I output a UTF-8 CSV in PHP that Excel will read properly?","240142","","<p>I've got this very simple thing that just outputs some stuff in CSV format, but it's got to be UTF-8. I open this file in TextEdit or TextMate or Dreamweaver and it displays UTF-8 characters properly, but if I open it in Excel it's doing this silly íÄ kind of thing instead. Here's what I've got at the head of my document:</p>

<pre><code>header(""content-type:application/csv;charset=UTF-8"");
header(""Content-Disposition:attachment;filename=\""CHS.csv\"""");
</code></pre>

<p>This all seems to have the desired effect except Excel (Mac, 2008) doesn't want to import it properly. There's no options in Excel for me to ""open as UTF-8"" or anything, so … I'm getting a little annoyed.</p>

<p>I can't seem to find any clear solutions to this anywhere, despite a lot of people having the same problem. The thing I see the most is to include the BOM, but I can't exactly figure out how to do that. As you can see above I'm just <code>echo</code>ing this data, I'm not writing any file. I can do that if I need to, I'm just not because there doesn't seem like a need for it at this point. Any help?</p>

<p>Update: I tried echoing the BOM as <code>echo pack(""CCC"", 0xef, 0xbb, 0xbf);</code> which I just pulled from a site that was trying to detect the BOM. But Excel just appends those three characters to the very first cell when it imports, and still messes up the special characters.</p>
","<p>To quote <a href=""http://answers.microsoft.com/en-us/mac/forum/macoffice2011-macexcel/mac-excel-converts-utf-8-characters-to-underlines/7c4cdaa7-bfa3-41a2-8482-554ae235227b?msgId=c8295574-a053-48a6-b419-51523ce2a247"" rel=""nofollow noreferrer"">a Microsoft support engineer</a>,</p>

<blockquote>
  <p>Excel for Mac does not currently support UTF-8</p>
</blockquote>

<p><strong>Update, 2017</strong>: This is true of all versions of Microsoft Excel for Mac before <em>Office 2016</em>. Newer versions (from Office 365) do now support UTF-8.</p>

<p>In order to output UTF-8 content that Excel both on Windows and OS X will be able to successfully read, you will need to do two things:</p>

<ol>
<li><p>Make sure that you convert your UTF-8 text to UTF-16LE</p>

<pre><code>mb_convert_encoding($csv, 'UTF-16LE', 'UTF-8');
</code></pre></li>
<li><p>Make sure that you add the UTF-16LE byte order mark</p>

<pre><code>chr(255) . chr(254)
</code></pre></li>
</ol>

<p>The next problem that appears only with Excel on OS X (but <em>not</em> Windows) will be when viewing a CSV file with comma separated values, Excel will render rows only with one row and all of the text along with the commas in the first row.</p>

<p>The way to avoid this is to use tabs as your separated value.</p>

<p>I used <a href=""http://php.net/manual/en/function.fputcsv.php#84783"" rel=""nofollow noreferrer"">this function from the PHP comments</a> (using tabs ""\t"" instead of commas) and it worked perfectly on OS X and Windows Excel.</p>

<p>Note that to fix an issue with an empty column as the end of a row, that I did have to change the line of code that says:</p>

<pre><code>    $field_cnt = count($fields);
</code></pre>

<p>to</p>

<pre><code>    $field_cnt = count($fields)-1;
</code></pre>

<p>As some of the other comments on this page say, other spreadsheet apps like OpenOffice Calc, Apple's own Numbers and Google Doc's Spreadsheet have no issues with UTF-8 files with commas.</p>

<p>See <a href=""https://stackoverflow.com/questions/6588068/which-encoding-opens-csv-files-correctly-with-excel-on-both-mac-and-windows"">the table in this question</a> for what works and doesn't work for Unicode CSV files in Excel</p>

<hr>

<p>As a side note, I might add that if you are using <a href=""//getcomposer.org"" rel=""nofollow noreferrer"">Composer</a>, you should have a look at adding <a href=""http://csv.thephpleague.com/"" rel=""nofollow noreferrer""><code>League\Csv</code></a> to your requires. <code>League\Csv</code> has <a href=""http://csv.thephpleague.com/examples/"" rel=""nofollow noreferrer"">a really nice API for building CSV files</a>.</p>

<p>To use <code>League\Csv</code> with this method of creating CSV files, check out <a href=""https://github.com/thephpleague/csv/blob/8.x/examples/bom_excel_macos.php"" rel=""nofollow noreferrer"">this example</a></p>
","16766198"
"how to get the last char of a string in PHP?","240006","","<p>I need to get the last character of a string.
Say I have ""testers"" as input string and I want the result to be ""s"". how can I do that in PHP?</p>
","<pre><code>substr(""testers"", -1); // returns ""s""
</code></pre>
","2681810"
"Call php function from JavaScript","239124","","<p>Is there a way I can run a php function through a JS function?</p>

<p>something like this:</p>

<pre><code>&lt;script type=""text/javascript""&gt;
function test(){
document.getElementById(""php_code"").innerHTML=""&lt;?php 
query(""hello"");       ?&gt;"";    
}
&lt;/script&gt;

&lt;a href=""#"" style=""display:block; color:#000033; font-family:Tahoma; font-size:12px;""     
onclick=""test(); return false;""&gt; test &lt;/a&gt;
&lt;span id=""php_code""&gt; &lt;/span&gt;
</code></pre>

<p>I basically want to run the php function <code>query(""hello"")</code>, when I click on the href called ""Test"" which would call the php function.</p>
","<p>This is, in essence, what <a href=""https://developer.mozilla.org/en/ajax"" rel=""noreferrer"">AJAX</a> is <strong>for</strong>. Your page loads, and you add an event to an element. When the user causes the event to be triggered, say by clicking something, your Javascript uses the <a href=""https://developer.mozilla.org/en/XMLHttpRequest"" rel=""noreferrer"">XMLHttpRequest object</a> to send a request to a server.</p>

<p>After the server responds (presumably with output), another Javascript function/event gives you a place to work with that output, including simply sticking it into the page like any other piece of HTML.</p>

<p>You can do it ""by hand"" with plain Javascript , or you can use jQuery. Depending on the size of your project and particular situation, it may be more simple to just use plain Javascript .</p>

<h1>Plain Javascript</h1>

<p>In this very basic example, we send a request to <code>myAjax.php</code> when the user clicks a link. The server will generate some content, in this case ""hello world!"". We will put into the HTML element with the id <code>output</code>.</p>

<p><strong>The javascript</strong></p>

<pre><code>// handles the click event for link 1, sends the query
function getOutput() {
  getRequest(
      'myAjax.php', // URL for the PHP file
       drawOutput,  // handle successful request
       drawError    // handle error
  );
  return false;
}  
// handles drawing an error message
function drawError() {
    var container = document.getElementById('output');
    container.innerHTML = 'Bummer: there was an error!';
}
// handles the response, adds the html
function drawOutput(responseText) {
    var container = document.getElementById('output');
    container.innerHTML = responseText;
}
// helper function for cross-browser request object
function getRequest(url, success, error) {
    var req = false;
    try{
        // most browsers
        req = new XMLHttpRequest();
    } catch (e){
        // IE
        try{
            req = new ActiveXObject(""Msxml2.XMLHTTP"");
        } catch(e) {
            // try an older version
            try{
                req = new ActiveXObject(""Microsoft.XMLHTTP"");
            } catch(e) {
                return false;
            }
        }
    }
    if (!req) return false;
    if (typeof success != 'function') success = function () {};
    if (typeof error!= 'function') error = function () {};
    req.onreadystatechange = function(){
        if(req.readyState == 4) {
            return req.status === 200 ? 
                success(req.responseText) : error(req.status);
        }
    }
    req.open(""GET"", url, true);
    req.send(null);
    return req;
}
</code></pre>

<p><strong>The HTML</strong> </p>

<pre><code>&lt;a href=""#"" onclick=""return getOutput();""&gt; test &lt;/a&gt;
&lt;div id=""output""&gt;waiting for action&lt;/div&gt;
</code></pre>

<p><strong>The PHP</strong></p>

<pre><code>// file myAjax.php
&lt;?php
  echo 'hello world!';
?&gt;
</code></pre>

<p><strong>Try it out: <a href=""http://jsfiddle.net/GRMule/m8CTk/"" rel=""noreferrer"">http://jsfiddle.net/GRMule/m8CTk/</a></strong></p>

<hr>

<h1>With a javascript library (jQuery et al)</h1>

<p>Arguably, that is a lot of Javascript code. You can shorten that up by tightening the blocks or using more terse logic operators, of course, but there's still a lot going on there. If you plan on doing a lot of this type of thing on your project, you might be better off with a javascript library.</p>

<p>Using the same HTML and PHP from above, this is your entire script (with jQuery included on the page). I've tightened up the code a little to be more consistent with jQuery's general style, but you get the idea:</p>

<pre><code>// handles the click event, sends the query
var function getOutput() {
   $.ajax({
      url:'myAjax.php',
      complete: function (response) {
          $('#output').html(response.responseText);
      },
      error: function () {
          $('#output').html('Bummer: there was an error!');
      }
  });
  return false;
}
</code></pre>

<p><strong>Try it out: <a href=""http://jsfiddle.net/GRMule/WQXXT/"" rel=""noreferrer"">http://jsfiddle.net/GRMule/WQXXT/</a></strong></p>

<p>Don't rush out for jQuery just yet: adding any library is still adding hundreds or thousands of lines of code to your project just as surely as if you had written them. Inside the jQuery library file, you'll find similar code to that in the first example, plus a <strong>whole lot more</strong>. That may be a good thing, it may not. Plan, and consider your project's current size and future possibility for expansion and the target environment or platform.</p>

<p>If this is all you need to do, write the plain javascript once and you're done.</p>

<p><strong>Documentation</strong></p>

<ul>
<li><em>AJAX</em> on MDN - <a href=""https://developer.mozilla.org/en/ajax"" rel=""noreferrer"">https://developer.mozilla.org/en/ajax</a></li>
<li><code>XMLHttpRequest</code> on MDN - <a href=""https://developer.mozilla.org/en/XMLHttpRequest"" rel=""noreferrer"">https://developer.mozilla.org/en/XMLHttpRequest</a></li>
<li><code>XMLHttpRequest</code> on MSDN - <a href=""http://msdn.microsoft.com/en-us/library/ie/ms535874%28v=vs.85%29.aspx"" rel=""noreferrer"">http://msdn.microsoft.com/en-us/library/ie/ms535874%28v=vs.85%29.aspx</a></li>
<li>jQuery - <a href=""http://jquery.com/download/"" rel=""noreferrer"">http://jquery.com/download/</a></li>
<li><code>jQuery.ajax</code> - <a href=""http://api.jquery.com/jQuery.ajax/"" rel=""noreferrer"">http://api.jquery.com/jQuery.ajax/</a></li>
</ul>
","7165616"
"How to get single value from PHP array","239037","","<p>Example <code>print_r($myarray)</code></p>

<pre><code>Array
(
    [0] =&gt; Array
    (
        [id] =&gt; 6578765
        [name] =&gt; John Smith
        [first_name] =&gt; John
        [last_name] =&gt; Smith
        [link] =&gt; http://www.example.com
        [gender] =&gt; male
        [email] =&gt; email@domain.com
        [timezone] =&gt; 8
        [updated_time] =&gt; 2010-12-07T21:02:21+0000
    )
)
</code></pre>

<p>Question, how to get the <code>$myarray</code> in single value like:</p>

<pre><code>echo $myarray['email'];  will show email@domain.com
</code></pre>
","<p>Look at the keys and indentation in your <code>print_r</code>:</p>

<pre><code>echo $myarray[0]['email'];

echo $myarray[0]['gender'];
</code></pre>

<p>...etc</p>
","4384036"
"How do I read any request header in PHP","238719","","<p>How should I read any header in PHP?</p>

<p>For example the custom header: <code>X-Requested-With</code>.</p>
","<p><strong>IF</strong>: you only need a single header, instead of <em>all</em> headers, the quickest method is:</p>

<pre><code>&lt;?php
// Replace XXXXXX_XXXX with the name of the header you need in UPPERCASE (and with '-' replaced by '_')
$headerStringValue = $_SERVER['HTTP_XXXXXX_XXXX'];
</code></pre>

<p><br>
<strong>ELSE IF</strong>: you run PHP as an Apache module or, as of PHP 5.4, using FastCGI (simple method):</p>

<p><a href=""http://www.php.net/apache_request_headers"" rel=""noreferrer"">apache_request_headers()</a></p>

<pre><code>&lt;?php
$headers = apache_request_headers();

foreach ($headers as $header =&gt; $value) {
    echo ""$header: $value &lt;br /&gt;\n"";
}
</code></pre>

<p><br>
<strong>ELSE:</strong> In any other case, you can use (userland implementation):</p>

<pre><code>&lt;?php
function getRequestHeaders() {
    $headers = array();
    foreach($_SERVER as $key =&gt; $value) {
        if (substr($key, 0, 5) &lt;&gt; 'HTTP_') {
            continue;
        }
        $header = str_replace(' ', '-', ucwords(str_replace('_', ' ', strtolower(substr($key, 5)))));
        $headers[$header] = $value;
    }
    return $headers;
}

$headers = getRequestHeaders();

foreach ($headers as $header =&gt; $value) {
    echo ""$header: $value &lt;br /&gt;\n"";
}
</code></pre>

<p><br>
<strong>See Also</strong>:<br>
<a href=""http://php.net/manual/en/function.getallheaders.php"" rel=""noreferrer"">getallheaders()</a> - (PHP >= 5.4) <s>cross platform edition</s> Alias of <code>apache_request_headers()</code> 
<a href=""http://www.php.net/manual/en/function.apache-response-headers.php"" rel=""noreferrer"">apache_response_headers()</a> - Fetch all HTTP response headers.<br>
<a href=""http://www.php.net/manual/en/function.headers-list.php"" rel=""noreferrer"">headers_list()</a> - Fetch a list of headers to be sent.</p>
","541463"
"Generating a random password in php","238509","","<p>I am trying to generate a random password in php. </p>

<p>However I am getting all 'a's and the return type is of type array and I would like it to be a string. Any ideas on how to correct the code?</p>

<p>Thanks.</p>

<pre><code>function randomPassword() {
    $alphabet = ""abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"";
    for ($i = 0; $i &lt; 8; $i++) {
        $n = rand(0, count($alphabet)-1);
        $pass[$i] = $alphabet[$n];
    }
    return $pass;
}
</code></pre>
","<blockquote>
  <p><strong>Security warning</strong>: <code>rand()</code> is not a cryptographically secure pseudorandom number generator. Look elsewhere for <a href=""https://stackoverflow.com/a/31284266/2224584"">generating a cryptographically secure pseudorandom string in PHP</a>.</p>
</blockquote>

<p>Try this (use <code>strlen</code> instead of <code>count</code>, because <code>count</code> on a string is always <code>1</code>):</p>

<pre><code>function randomPassword() {
    $alphabet = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890';
    $pass = array(); //remember to declare $pass as an array
    $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache
    for ($i = 0; $i &lt; 8; $i++) {
        $n = rand(0, $alphaLength);
        $pass[] = $alphabet[$n];
    }
    return implode($pass); //turn the array into a string
}
</code></pre>

<p>Demo: <a href=""http://codepad.org/UL8k4aYK"" rel=""noreferrer"">http://codepad.org/UL8k4aYK</a></p>
","6101969"
"Best way to clear a PHP array's values","238309","","<p>Which is more efficient for clearing all values in an array? The first one would require me to use that function each time in the loop of the second example.</p>

<pre><code>foreach ($array as $i =&gt; $value) {
    unset($array[$i]);
}
</code></pre>

<p>Or this</p>

<pre><code>foreach($blah_blah as $blah) {
    $foo = array();
    //do something
    $foo = null;
}
</code></pre>
","<p>Like Zack said in the comments below you are able to simply re-instantiate it using </p>

<pre><code>$foo = array(); // $foo is still here
</code></pre>

<p>If you want something more powerful use unset since it also will clear $foo from the symbol table, if you need the array later on just instantiate it again.</p>

<pre><code>unset($foo); // $foo is gone
$foo = array(); // $foo is here again
</code></pre>
","10261949"
"Deleting all files from a folder using PHP?","236847","","<p>For example I had a folder called `Temp' and I wanted to delete or flush all files from this folder using PHP. Could I do this?</p>
","<pre><code>$files = glob('path/to/temp/*'); // get all file names
foreach($files as $file){ // iterate files
  if(is_file($file))
    unlink($file); // delete file
}
</code></pre>

<p>If you want to remove 'hidden' files like .htaccess, you have to use</p>

<pre><code>$files = glob('path/to/temp/{,.}*', GLOB_BRACE);
</code></pre>
","4594262"
"Questions every good PHP Developer should be able to answer","236092","","<p>I was going through <a href=""https://stackoverflow.com/questions/365489/questions-every-good-net-developer-should-be-able-to-answer"">Questions every good .Net developer should be able to answer</a> and was highly impressed with the content and approach of this question and so in the same spirit, I am asking this question for PHP Developer.</p>

<p><strong>What questions</strong> do you think should a good <strong>PHP programmer be able to respond to?</strong></p>

<p><strong>EDIT</strong> : I am marking this question as community wiki as it is not user specific and it aims to serve programming community at large. </p>

<p>Looking forward for some amazing responses. </p>

<p><strong>NOTE</strong> : Please answer questions too as suggested in the comments so that people could learn something new too regarding the language. </p>
","<p>Admittedly, I stole this question from somewhere else (can't remember where I read it any more) but thought it was funny:</p>

<p><strong>Q:</strong> What is <code>T_PAAMAYIM_NEKUDOTAYIM</code>?<br>
<strong>A:</strong> Its the scope resolution operator (double colon)</p>

<p>An experienced PHP'er immediately knows what it means.
Less experienced (and not Hebrew) developers may want to read <a href=""http://en.wikipedia.org/wiki/Scope_resolution_operator#PHP"" rel=""nofollow noreferrer"" title=""T_PAAMAYIM_NEKUDOTAYIM"">this</a>.</p>

<p>But more serious questions now:</p>

<hr>

<p><strong>Q:</strong> What is the cause of this warning: 'Warning: Cannot modify header information - headers already sent', and what is a good practice to prevent it?<br>
<strong>A:</strong> <strong>Cause:</strong> body data was sent, causing headers to be sent too.<br>
<strong>Prevention:</strong> Be sure to execute header specific code first before you output any body data. Be sure you haven't accidentally sent out whitespace or any other characters. </p>

<hr>

<p><strong>Q:</strong> What is wrong with this query: <code>""SELECT * FROM table WHERE id = $_POST[ 'id' ]""</code>?<br>
<strong>A:</strong> <em>1.</em> It is vulnarable to SQL injection. Never use user input directly in queries. Sanitize it first. Preferebly use prepared statements (<a href=""http://php.net/manual/en/book.pdo.php"" rel=""nofollow noreferrer"">PDO</a>) <em>2.</em> Don't select all columns (*), but specify every single column. This is predominantly ment to prevent queries hogging up memory when for instance a BLOB column is added at some point in the future.</p>

<hr>

<p><strong>Q:</strong> What is wrong with this if statement: <code>if( !strpos( $haystack, $needle ) ...</code>?<br>
<strong>A:</strong> <code>strpos</code> returns the index position of where it first found the $needle, which could be <code>0</code>. Since <code>0</code> also resolves to <code>false</code> the solution is to use strict comparison: <code>if( false !== strpos( $haystack, $needle )...</code></p>

<hr>

<p><strong>Q:</strong> What is the preferred way to write this if statement, and why?<br>
<code>if( 5 == $someVar )</code> or <code>if( $someVar == 5 )</code><br>
<strong>A:</strong> The former, as it prevents accidental assignment of 5 to $someVar when you forget to use 2 equalsigns (<code>$someVar = 5</code>), and will cause an error, the latter won't.</p>

<hr>

<p><strong>Q:</strong> Given this code:</p>

<pre><code>function doSomething( &amp;$arg )
{
    $return = $arg;
    $arg += 1;
    return $return;
}

$a = 3;
$b = doSomething( $a );
</code></pre>

<p>...what is the value of <code>$a</code> and <code>$b</code> after the function call and why?<br>
<strong>A:</strong> <code>$a</code> is <code>4</code> and <code>$b</code> is <code>3</code>. The former because $arg is passed by reference, the latter because the return value of the function is a copy of (not a reference to) the initial value of the argument.</p>

<hr>

<p><strong>OOP specific</strong></p>

<p><strong>Q:</strong> What is the difference between <code>public</code>, <code>protected</code> and <code>private</code> in a class definition?<br>
<strong>A:</strong> <code>public</code> makes a class member available to ""everyone"", <code>protected</code> makes the class member available to only itself and derived classes, <code>private</code> makes the class member only available to the class itself.</p>

<hr>

<p><strong>Q:</strong> What is wrong with this code:</p>

<pre><code>class SomeClass
{
    protected $_someMember;

    public function __construct()
    {
        $this-&gt;_someMember = 1;
    }

    public static function getSomethingStatic()
    {
        return $this-&gt;_someMember * 5; // here's the catch
    }
}
</code></pre>

<p><strong>A:</strong> Static methods don't have access to $this, because static methods can be executed without instantiating a class.</p>

<hr>

<p><strong>Q:</strong> What is the difference between an interface and an abstract class?<br>
<strong>A:</strong> An interface defines a contract between an implementing class is and an object that calls the interface. An abstract class pre-defines certain behaviour for classes that will extend it. To a certain degree this can also be considered a contract, since it garantuees certain methods to exist.</p>

<hr>

<p><strong>Q:</strong> What is wrong with classes that predominantly define getters and setters, that map straight to it's internal members, without actually having methods that execute behaviour?<br>
<strong>A:</strong> This might be a code smell since the object acts as an ennobled array, without much other use.</p>

<hr>

<p><strong>Q:</strong> Why is PHP's implementation of the use of interfaces sub-optimal?<br>
<strong>A:</strong> PHP doesn't allow you to define the expected return type of the method's, which essentially renders interfaces pretty useless. :-P</p>
","2118987"
"Among $_REQUEST, $_GET and $_POST which one is the fastest?","235810","","<p>Which of these code will be faster?</p>

<pre><code>$temp = $_REQUEST['s'];
</code></pre>

<p>or</p>

<pre><code>if (isset($_GET['s'])) {
  $temp = $_GET['s'];
}
else {
  $temp = $_POST['s'];
}
</code></pre>
","<p><a href=""http://php.net/manual/en/reserved.variables.request.php"" rel=""noreferrer""><code>$_REQUEST</code></a>, by default, contains the contents of <code>$_GET</code>, <code>$_POST</code> and <code>$_COOKIE</code>. </p>

<p>But it's only a default, which depends on <a href=""http://php.net/manual/en/ini.core.php#ini.variables-order"" rel=""noreferrer""><code>variables_order</code></a> ; and not sure you want to work with cookies.</p>

<p>If I had to choose, I would probably not use <code>$_REQUEST</code>, and I would choose <code>$_GET</code> or <code>$_POST</code> -- <strong>depending on what my application should do</strong> <em>(i.e. one or the other, but not both)</em> : generally speaking :</p>

<ul>
<li>You should use <code>$_GET</code> when someone is requesting data <strong>from</strong> your application.</li>
<li>And you should use <code>$_POST</code> when someone is pushing <em>(inserting or updating ; or deleting)</em> data <strong>to</strong> your application.</li>
</ul>

<p>Either way, there will not be much of a difference about performances : the difference will be negligible, compared to what the rest of your script will do.</p>
","1924958"
"how to write javascript code inside php","235137","","<p>i have a got a form, on clicking the submit button:</p>

<ol>
<li>I want to do some task in the same file (db task) AND</li>
<li>I want the form data to be sent to test.php with the redirection</li>
</ol>

<p>here is my code</p>

<pre><code>    &lt;?php
    if(isset($_POST['btn'])){
        //do some task
    ?&gt;
    &lt;script type=""text/javascript""&gt;
        var e = document.getElementById('testForm'); e.action='test.php'; e.submit();&lt;/script&gt;
    &lt;?php
    }
    ?&gt;
&lt;form name=""testForm"" id=""testForm""  method=""POST""  &gt;
    &lt;input type=""submit"" name=""btn"" value=""submit"" autofocus  onclick=""return true;""/&gt;
 &lt;/form&gt;
</code></pre>

<p>but not able to submit the form, if i call the javascript code on onClick, it works.what is the problem in this code, Is there any work around for this </p>
","<p>Just echo the javascript out inside the if function</p>

<pre><code> &lt;form name=""testForm"" id=""testForm""  method=""POST""  &gt;
     &lt;input type=""submit"" name=""btn"" value=""submit"" autofocus  onclick=""return true;""/&gt;
 &lt;/form&gt;
 &lt;?php
    if(isset($_POST['btn'])){
        echo ""
            &lt;script type=\""text/javascript\""&gt;
            var e = document.getElementById('testForm'); e.action='test.php'; e.submit();
            &lt;/script&gt;
        "";
     }
  ?&gt;
</code></pre>
","10596296"
"Insert new item in array on any position in PHP","235038","","<p>How can I insert a new item into an array on any position, for example in the middle of array?</p>
","<p>You may find this a little more intuitive. It only requires one function call to <a href=""http://www.php.net/manual/en/function.array-splice.php"" rel=""noreferrer""><code>array_splice</code></a>:</p>

<pre><code>$original = array( 'a', 'b', 'c', 'd', 'e' );
$inserted = array( 'x' ); // Not necessarily an array

array_splice( $original, 3, 0, $inserted ); // splice in at position 3
// $original is now a b c x d e
</code></pre>
","3797526"
"How to check if mod_rewrite is enabled in php?","234325","","<p>I was wondering if it is possible to check if <code>mod_rewrite</code> is enabled on <strong>Apache</strong> AND <strong>IIS</strong> in <strong><code>PHP</code></strong>.</p>

<p><strong>ModRewrite</strong> for IIS exists. Check it <a href=""http://www.micronovae.com/ModRewrite/ModRewrite.html"" rel=""noreferrer""><code>here</code></a>.</p>

<p>So, I'm looking for a PHP script that checks for <code>mod_rewrite</code> on <strong>Apache</strong> and <strong>IIS.</strong></p>

<p>Does anyone know such script or can write one?</p>

<p>Especially for Microsoft <strong>IIS</strong>.</p>

<p>Thanks!</p>
","<p>If you're using mod_php, you can use <code>apache_get_modules()</code>. This will return an array of all enabled modules, so to check if <code>mod_rewrite</code> is enabled, you could simply do</p>

<pre><code>in_array('mod_rewrite', apache_get_modules());
</code></pre>

<p>Unfortunately, you're most likely trying to do this with CGI, which makes it a little bit more difficult.</p>

<p>You can test it using the following, though</p>

<pre><code>strpos(shell_exec('/usr/local/apache/bin/apachectl -l'), 'mod_rewrite') !== false
</code></pre>

<p>If the above condition evaluates to <code>true</code>, then <code>mod_write</code> is enabled.</p>
","9021523"
"Get Root Directory Path of a PHP project","234320","","<p>I have this folder structure in my PHP project.
(this is as shown in eclips) </p>

<pre><code>-MySystem
    +Code
    +Data_Access
    -Public_HTML
        +css
        +js
        +Templates
    -resources
</code></pre>

<p>When I try this code</p>

<pre><code>echo $_SERVER['DOCUMENT_ROOT']
</code></pre>

<p>output is</p>

<blockquote>
  <p>D:/workspace</p>
</blockquote>

<p>How can I get the path to RootDirectory of the system (<code>MySystem</code>), without hardcoding the Folder Name?</p>
","<p>For <strong>PHP >= 5.3.0</strong> try</p>

<p>PHP <a href=""http://www.php.net/manual/en/language.constants.predefined.php"" rel=""noreferrer"">magic constants</a>.</p>

<pre><code>__DIR__
</code></pre>

<p>And make your path relatively.</p>

<p>For <strong>PHP &lt; 5.3.0</strong> try</p>

<pre><code>dirname(__FILE__)
</code></pre>
","8668853"
"Sending multiple data parameters with jQuery AJAX","234295","","<p>I am sending an ajax request to a php file as shown here:</p>

<pre><code>function checkDB(code, userid)
{

  $.ajax({
  type: ""POST"",
  url: ""&lt;?php bloginfo('template_url'); ?&gt;/profile/check_code.php"",
  data: 'code='+code+'userid='+userid,
  datatype: ""html"",
  success: function(result){

       if(result == 0)
        {
            $('#success').html( code + ' has been redeemed!');
            // alert('success');//testing purposes
        }
        else if(result == 2)
        {
            $('#err').html(  code + ' already exists and has already been redeemed....');
            //alert('fail');//testing purposes
        }else if(result == 1){
            $('#err').html(  code + ' redeem code doesnt exist');      
        }

        alert(result);      
      }
  })

}
</code></pre>

<p>This is sent calling the function on submit, like so:</p>

<pre><code>&lt;form method=""post"" class=""sc_ajaxxx"" id=""sc_add_voucherx"" name=""sc_ajax""  
     onsubmit=""checkDB(document.sc_ajax.sc_voucher_code.value, &lt;?php echo $user_id ?&gt;); return false;""&gt;
&lt;/form&gt;
</code></pre>

<p>The problem is that the user id php variable is not getting sent to the check_code.php page by ajax. or at least I cant seem to echo the id back to the page. </p>

<p>Is this the correct way of passing multiple values to a server-side page? Without the userid passing over, it works fine just passing over the code.</p>

<p>Thanks guys :)</p>
","<p>Here is how <code>POST</code> data should be formatted:</p>

<pre><code>key1=value1&amp;key2=value2&amp;key3=value3
</code></pre>

<p>In your case (note the <code>&amp;</code> as a separator):</p>

<pre><code>'code=' + code + '&amp;userid=' + userid
</code></pre>

<p>But jQuery does that for you if you specify your data as an object:</p>

<pre><code>data: { code: code, userid: userid }
</code></pre>
","9328781"
"Print array to a file","234209","","<p>I would like to print an array to a file.</p>

<p>I would like the file to look exactly similar like how a code like this looks.</p>

<p><code>print_r ($abc);</code> assuming $abc is an array.</p>

<p>Is there any one lines solution for this rather than regular for each look.</p>

<p>P.S - I currently use serialize but i want to make the files readable as readability is quite hard with serialized arrays.</p>
","<p>Either <a href=""http://de2.php.net/manual/en/function.var-export.php"" rel=""noreferrer""><code>var_export</code></a> or set <a href=""http://de2.php.net/manual/en/function.print-r.php"" rel=""noreferrer""><code>print_r</code></a> to return the output instead of printing it.</p>

<p><a href=""http://de2.php.net/manual/en/function.print-r.php"" rel=""noreferrer"">Example from PHP manual</a></p>

<pre><code>$b = array (
    'm' =&gt; 'monkey', 
    'foo' =&gt; 'bar', 
    'x' =&gt; array ('x', 'y', 'z'));

$results = print_r($b, true); // $results now contains output from print_r
</code></pre>

<p>You can then save <code>$results</code> with <a href=""http://de2.php.net/manual/en/function.file-put-contents.php"" rel=""noreferrer""><code>file_put_contents</code></a>. Or return it directly when writing to file:</p>

<pre><code>file_put_contents('filename.txt', print_r($b, true));
</code></pre>
","2628812"
"How to define an empty object in PHP","233646","","<p>with a new array I do this:</p>

<pre><code>$aVal = array();

$aVal[key1][var1] = ""something"";
$aVal[key1][var2] = ""something else"";
</code></pre>

<p>Is there a similar syntax for an object</p>

<pre><code>(object)$oVal = """";

$oVal-&gt;key1-&gt;var1 = ""something"";
$oVal-&gt;key1-&gt;var2 = ""something else"";
</code></pre>
","<pre><code>$x = new stdClass();
</code></pre>

<p>A <a href=""http://www.php.net/manual/en/language.oop5.basic.php#92123"" rel=""noreferrer"">comment in the manual</a> sums it up best:</p>

<blockquote>
  <p>stdClass is the default PHP object.
  stdClass has no properties, methods or
  parent. It does not support magic
  methods, and implements no interfaces.</p>
  
  <p>When you cast a scalar or array as
  Object, you get an instance of
  stdClass. You can use stdClass
  whenever you need a generic object
  instance.</p>
</blockquote>
","1434375"
"how to install and run phpize","233509","","<p>I have been meaning to install ffmpeg as an extension to my php setup. So before I can install it, I need to <code>phpize</code> it. I installed php5-dev by <code>sudo apt-get install php5-dev</code> But now when I run phpize I get the following error : </p>

<pre><code>phpize
Cannot find config.m4. 
Make sure that you run '/usr/bin/phpize' in the top level source directory of the module
</code></pre>

<p>The location of my php.ini is <code>/usr/local/zend/etc/php.ini</code></p>

<p>From another online resource i tried this </p>

<pre><code>sudo apt-get install autoconf automake libtool m4
</code></pre>

<p>But all of them are already installed. </p>

<p>Locate config.m4 didnt return anything.</p>

<p>Any pointers here how I can get phpize and thus, ffmpeg up and running ?</p>
","<p>On Debian/Ubuntu, it's in the php5-dev package.</p>

<pre><code>sudo apt-get install php5-dev
</code></pre>

<p>For PHP7 (from <a href=""https://stackoverflow.com/users/2706988/rahilwazir"">rahilwazir</a> comment):</p>

<pre><code>sudo apt-get install php7.0-dev
</code></pre>
","8982179"
"Row count with PDO","232970","","<p>There are many conflicting statements around. What is the best way to row count using PDO in PHP? Before using PDO, I just simply used <code>mysql_num_rows</code>.</p>

<p><code>fetchAll</code> is something I won't want because I may sometimes be dealing with large datasets, so not good for my use.</p>

<p>Do you have any suggestions?</p>
","<pre><code>$sql = ""SELECT count(*) FROM `table` WHERE foo = bar""; 
$result = $con-&gt;prepare($sql); 
$result-&gt;execute(); 
$number_of_rows = $result-&gt;fetchColumn(); 
</code></pre>

<p>Not the most elegant way to do it, plus it involves an extra query.</p>

<p>PDO has <code>PDOStatement::rowCount()</code>, which apparently does <strong>not</strong> work in MySql. What a pain.</p>

<p>From the PDO Doc:</p>

<blockquote>
  <p>For most databases,
  PDOStatement::rowCount() does not
  return the number of rows affected by
  a SELECT statement. Instead, use
  PDO::query() to issue a SELECT
  COUNT(*) statement with the same
  predicates as your intended SELECT
  statement, then use
  PDOStatement::fetchColumn() to
  retrieve the number of rows that will
  be returned. Your application can then
  perform the correct action.</p>
</blockquote>

<p>EDIT: The above code example uses a prepared statement, which is in many cases is probably unnecessary for the purpose of counting rows, so:</p>

<pre><code>$nRows = $pdo-&gt;query('select count(*) from blah')-&gt;fetchColumn(); 
echo $nRows;
</code></pre>
","883382"
"How to check if an array value exists?","232866","","<p>How can I check if <code>$something['say']</code> has the value of <code>'bla'</code> or <code>'omg'</code>?</p>

<pre><code>$something = array('say' =&gt; 'bla', 'say' =&gt; 'omg');
</code></pre>
","<p>Using <code>if</code>?</p>

<pre><code>if(isset($something['say']) &amp;&amp; $something['say'] == 'bla') {
    // do something
}
</code></pre>

<p>Btw, you are assigning an value with the key <code>say</code> twice, hence your array will result in an array with only one value.</p>
","2440508"
"PHP Warning: POST Content-Length of 8978294 bytes exceeds the limit of 8388608 bytes in Unknown on line 0","232225","","<p>I am getting this error when trying to upload an import on WordPress on my XAMPP local dev environment:</p>

<p>Warning: POST Content-Length of 8978294 bytes exceeds the limit of 8388608 bytes in Unknown on line 0</p>

<p>I changed the <code>upload_max_filesize</code> from <code>2M</code> to <code>1000M</code>, but that didn't seem to do anything. </p>

<p>Any ideas?</p>
","<p>8388608 bytes is 8M, the default limit in PHP. Update your <code>post_max_size</code> in php.ini to a larger value.</p>

<p><code>upload_max_filesize</code> sets the max file size that a user can upload while 
<code>post_max_size</code> sets the maximum amount of data that can be sent via a POST in a form.</p>

<p>So you can set <code>upload_max_filesize</code> to 1 meg, which will mean that the biggest single file a user can upload is 1 megabyte, but they could upload 5 of them at once if the <code>post_max_size</code> was set to 5.</p>
","11719522"
"Best way to use PHP to encrypt and decrypt passwords?","231744","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/5089841/php-2-way-encryption-i-need-to-store-passwords-that-can-be-retrieved"">PHP 2-way encryption: I need to store passwords that can be retrieved</a>  </p>
</blockquote>



<p>I plan to store foreign account information for my users on my website, aka rapidshare username and passwords, etc... I want to keep information secure, but I know that if I hash their information, I can't retrieve it for later use. </p>

<p>Base64 is decrypt-able so there's no point using that just plain off.
My idea is to scramble the user and pass before and after it gets base64ed that way even after you decrypt it, you get some funny looking text if you try to decrypt. Is there a php function that accepts values that will make an unique scramble of a string and de-scramble it later when the value is reinputed?</p>

<p>Any suggestions?</p>
","<p><strong>You should not encrypt passwords, instead you should hash them using an algorithm like bcrypt. <a href=""https://stackoverflow.com/a/6337021/2224584"">This answer explains how to properly implement password hashing in PHP</a>.</strong> Still, here is how you would encrypt/decrypt:</p>

<pre><code>$key = 'password to (en/de)crypt';
$string = ' string to be encrypted '; // note the spaces
</code></pre>

<p><strong>To Encrypt:</strong></p>

<pre><code>$iv = mcrypt_create_iv(
    mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC),
    MCRYPT_DEV_URANDOM
);

$encrypted = base64_encode(
    $iv .
    mcrypt_encrypt(
        MCRYPT_RIJNDAEL_128,
        hash('sha256', $key, true),
        $string,
        MCRYPT_MODE_CBC,
        $iv
    )
);
</code></pre>

<p><strong>To Decrypt:</strong></p>

<pre><code>$data = base64_decode($encrypted);
$iv = substr($data, 0, mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC));

$decrypted = rtrim(
    mcrypt_decrypt(
        MCRYPT_RIJNDAEL_128,
        hash('sha256', $key, true),
        substr($data, mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC)),
        MCRYPT_MODE_CBC,
        $iv
    ),
    ""\0""
);
</code></pre>

<hr>

<p><strong>Warning</strong>: The above example encrypts information, but it does not authenticate the ciphertext to prevent tampering. <a href=""https://paragonie.com/blog/2015/05/using-encryption-and-authentication-correctly"" rel=""noreferrer"">You should <em>not</em> rely on unauthenticated encryption for security</a>, especially since the code as provided is vulnerable to padding oracle attacks.</p>

<p>See also:</p>

<ul>
<li><a href=""https://stackoverflow.com/a/30189841/2224584"">https://stackoverflow.com/a/30189841/2224584</a></li>
<li><a href=""https://stackoverflow.com/a/30166085/2224584"">https://stackoverflow.com/a/30166085/2224584</a></li>
<li><a href=""https://stackoverflow.com/a/30159120/2224584"">https://stackoverflow.com/a/30159120/2224584</a></li>
</ul>

<p>Also, don't just use a ""password"" for an encryption key. <strong>Encryption keys are random strings.</strong></p>

<hr>

<p><a href=""http://3v4l.org/CJfSn"" rel=""noreferrer"">Demo at 3v4l.org</a>:</p>

<pre><code>echo 'Encrypted:' . ""\n"";
var_dump($encrypted); // ""m1DSXVlAKJnLm7k3WrVd51omGL/05JJrPluBonO9W+9ohkNuw8rWdJW6NeLNc688=""

echo ""\n"";

echo 'Decrypted:' . ""\n"";
var_dump($decrypted); // "" string to be encrypted ""
</code></pre>
","1289114"
"Which is a better way to check if an array has more than one element?","231214","","<p>I just need to check if an array has more than one element. 
I am trying to do it this way :</p>

<pre><code>if (isset($arr['1']))
</code></pre>

<p>the other traditional way is </p>

<pre><code>if (sizeof($arr)&gt;1)
</code></pre>

<p>Which of the two is better? In such situaions, how should I judge between two alternate methods?
Is there any performance check meter available to measure which is better?</p>
","<p>Use this</p>

<pre><code>if (sizeof($arr) &gt; 1) {
     ....
}
</code></pre>

<p>Or </p>

<pre><code>if (count($arr) &gt; 1) {
     ....
}
</code></pre>

<p><code>sizeof()</code> is an alias for <code>count()</code>, they work the same.</p>

<p><strong>Edit:</strong>
Answering the second part of the question:
The two lines of codes in the question are not alternative methods, they perform different functions. The first checks if the value at <code>$arr['1']</code> is set, while the second returns the number of elements in the array.</p>
","10024967"
"How to save an HTML5 Canvas as an image on a server?","230836","","<p>I'm working on a generative art project where I would like to allow users to save the resulting images from an algorithm. The general idea is:</p>

<ul>
<li>Create an image on an HTML5 Canvas using a generative algorithm</li>
<li>When the image is completed, allow users to save the canvas as an image file to the server</li>
<li>Allow the user to either download the image or add it to a gallery of pieces of produced using the algorithm.</li>
</ul>

<p>However, I’m stuck on the second step. After some help from Google, I found this <a href=""http://permadi.com/blog/2010/10/html5-saving-canvas-image-data-using-php-and-ajax/"" rel=""noreferrer"">blog post</a>, which seemed to be exactly what I wanted:</p>

<p>Which led to the JavaScript code:</p>

<pre><code>function saveImage() {
  var canvasData = canvas.toDataURL(""image/png"");
  var ajax = new XMLHttpRequest();

  ajax.open(""POST"", ""testSave.php"", false);
  ajax.onreadystatechange = function() {
    console.log(ajax.responseText);
  }
  ajax.setRequestHeader(""Content-Type"", ""application/upload"");
  ajax.send(""imgData="" + canvasData);
}
</code></pre>

<p>and corresponding PHP (testSave.php):</p>

<pre><code>&lt;?php
if (isset($GLOBALS[""HTTP_RAW_POST_DATA""])) {
  $imageData = $GLOBALS['HTTP_RAW_POST_DATA'];
  $filteredData = substr($imageData, strpos($imageData, "","") + 1);
  $unencodedData = base64_decode($filteredData);
  $fp = fopen('/path/to/file.png', 'wb');

  fwrite($fp, $unencodedData);
  fclose($fp);
}
?&gt;
</code></pre>

<p>But this doesn’t seem to do anything at all.</p>

<p>More Googling turns up this <a href=""http://www.kevinsookocheff.com/2011/07/27/saving-canvas-data-to-an-image-file-with-javascript-and-php/"" rel=""noreferrer"">blog post</a> which is based off of the previous tutorial. Not very different, but perhaps worth a try:</p>

<pre><code>$data = $_POST['imgData'];
$file = ""/path/to/file.png"";
$uri = substr($data,strpos($data, "","") + 1);

file_put_contents($file, base64_decode($uri));
echo $file;
</code></pre>

<p>This one creates a file (yay) but it’s corrupted and doesn’t seem to contain anything. It also appears to be empty (file size of 0).</p>

<p>Is there anything really obvious that I’m doing wrong? The path where I’m storing my file is writable, so that isn’t an issue, but nothing seems to be happening and I’m not really sure how to debug this.</p>

<h3>Edit</h3>

<p>Following Salvidor Dali’s link I changed the AJAX request to be:</p>

<pre><code>function saveImage() {
  var canvasData = canvas.toDataURL(""image/png"");
  var xmlHttpReq = false;

  if (window.XMLHttpRequest) {
    ajax = new XMLHttpRequest();
  }
  else if (window.ActiveXObject) {
    ajax = new ActiveXObject(""Microsoft.XMLHTTP"");
  }

  ajax.open(""POST"", ""testSave.php"", false);
  ajax.setRequestHeader(""Content-Type"", ""application/x-www-form-urlencoded"");
  ajax.onreadystatechange = function() {
    console.log(ajax.responseText);
  }
  ajax.send(""imgData="" + canvasData);
}
</code></pre>

<p>And now the image file is created and isn’t empty! It seems as if the content type matters and that changing it to <code>x-www-form-urlencoded</code> allowed the image data to be sent.</p>

<p>The console returns the (rather large) string of base64 code and the datafile is ~140 kB. However, I still can’t open it and it seems to not be formatted as an image.</p>
","<p>Here is an example how to achieve what you need:</p>

<p>1) <strong>Draw something</strong> (taken from <a href=""http://www.html5canvastutorials.com/tutorials/html5-canvas-shape-fill/"" rel=""noreferrer"">canvas tutorial</a>)</p>

<pre><code>&lt;canvas id=""myCanvas"" width=""578"" height=""200""&gt;&lt;/canvas&gt;
&lt;script&gt;
    var canvas = document.getElementById('myCanvas');
    var context = canvas.getContext('2d');

    // begin custom shape
    context.beginPath();
    context.moveTo(170, 80);
    context.bezierCurveTo(130, 100, 130, 150, 230, 150);
    context.bezierCurveTo(250, 180, 320, 180, 340, 150);
    context.bezierCurveTo(420, 150, 420, 120, 390, 100);
    context.bezierCurveTo(430, 40, 370, 30, 340, 50);
    context.bezierCurveTo(320, 5, 250, 20, 250, 50);
    context.bezierCurveTo(200, 5, 150, 20, 170, 80);

    // complete custom shape
    context.closePath();
    context.lineWidth = 5;
    context.fillStyle = '#8ED6FF';
    context.fill();
    context.strokeStyle = 'blue';
    context.stroke();
&lt;/script&gt;
</code></pre>

<p>2) <strong>Convert canvas image to URL format (base64)</strong></p>

<pre><code>var dataURL = canvas.toDataURL();
</code></pre>

<p>3) <strong>Send it to your server via Ajax</strong></p>

<pre><code>$.ajax({
  type: ""POST"",
  url: ""script.php"",
  data: { 
     imgBase64: dataURL
  }
}).done(function(o) {
  console.log('saved'); 
  // If you want the file to be visible in the browser 
  // - please modify the callback in javascript. All you
  // need is to return the url to the file, you just saved 
  // and than put the image in your browser.
});
</code></pre>

<p>3) <strong>Save base64 on your server as an image</strong> (here is <a href=""https://stackoverflow.com/questions/1532993/i-have-a-base64-encoded-png-how-do-i-write-the-image-to-a-file-in-php"">how to do this in PHP</a>, the same ideas is in every language. Server side in PHP can be <a href=""http://j-query.blogspot.com/2011/02/save-base64-encoded-canvas-image-to-png.html"" rel=""noreferrer"">found here</a>):</p>
","13198699"
"PHP 5.4 Call-time pass-by-reference - Easy fix available?","230630","","<p>Is there any way to easily fix this issue or do I really need to rewrite all the legacy code?</p>

<blockquote>
  <p>PHP Fatal error:  Call-time pass-by-reference has been removed in ... on line 30</p>
</blockquote>

<p>This happens everywhere as variables are passed into functions as references throughout the code.</p>
","<p>You should be denoting the call by reference in the function definition, not the actual call.  Since PHP started showing the deprecation errors in version 5.3,  I would say it would be a good idea to rewrite the code.</p>

<p><a href=""http://php.net/manual/language.references.pass.php"" rel=""noreferrer"">From the documentation</a>:</p>

<blockquote>
  <p><strong>There is no reference sign on a function call - only on function definitions.</strong> Function definitions alone are enough to correctly pass the argument by reference. As of PHP 5.3.0, you will get a warning saying that ""call-time pass-by-reference"" is deprecated when you use <code>&amp;</code> in <code>foo(&amp;$a);</code>.</p>
</blockquote>

<p>For example, instead of using:</p>

<pre><code>// Wrong way!
myFunc(&amp;$arg);               # Deprecated pass-by-reference argument
function myFunc($arg) { }
</code></pre>

<p>Use:</p>

<pre><code>// Right way!
myFunc($var);                # pass-by-value argument
function myFunc(&amp;$arg) { }
</code></pre>
","8971301"
"Delete directory with files in it?","230344","","<p>I wonder, what's the easiest way to delete a directory with all its files in it?</p>

<p>I'm using <code>rmdir(PATH . '/' . $value);</code> to delete a folder, however, if there are files inside of it, I simply can't delete it.</p>
","<p>There are at least two options available nowdays.</p>

<ol>
<li><p>Before deleting the folder, delete all it's files and folders (and this means recursion!). Here is an example:</p>

<pre><code>public static function deleteDir($dirPath) {
    if (! is_dir($dirPath)) {
        throw new InvalidArgumentException(""$dirPath must be a directory"");
    }
    if (substr($dirPath, strlen($dirPath) - 1, 1) != '/') {
        $dirPath .= '/';
    }
    $files = glob($dirPath . '*', GLOB_MARK);
    foreach ($files as $file) {
        if (is_dir($file)) {
            self::deleteDir($file);
        } else {
            unlink($file);
        }
    }
    rmdir($dirPath);
}
</code></pre></li>
<li><p>And if you are using 5.2+ you can use a RecursiveIterator to do it without needing to do the recursion yourself:</p>

<pre><code>$dir = 'samples' . DIRECTORY_SEPARATOR . 'sampledirtree';
$it = new RecursiveDirectoryIterator($dir, RecursiveDirectoryIterator::SKIP_DOTS);
$files = new RecursiveIteratorIterator($it,
             RecursiveIteratorIterator::CHILD_FIRST);
foreach($files as $file) {
    if ($file-&gt;isDir()){
        rmdir($file-&gt;getRealPath());
    } else {
        unlink($file-&gt;getRealPath());
    }
}
rmdir($dir);
</code></pre></li>
</ol>
","3349792"
"How do I add PHP code/file to HTML(.html) files?","229975","","<p>I can't use PHP in my HTML pages. For example, <code>index.html</code>. I've tried using both:</p>

<pre><code>&lt;? contents ?&gt; 
</code></pre>

<p>and </p>

<pre><code>&lt;?php contents ?&gt; 
</code></pre>

<p>Neither of these work. My server offers PHP, and when I use a the <code>.php</code> extension, it works properly. Is this a problem or do I have to change the preferences in <code>php.ini</code>?</p>
","<p>You can't run PHP in .html files because the server does not recognize that as a valid PHP extension unless you tell it to. To do this you need to create a .htaccess file in your root web directory and add this line to it:</p>

<pre><code>AddType application/x-httpd-php .htm .html
</code></pre>

<p>This will tell Apache to process files with a .htm or .html file extension as PHP files.</p>
","11312349"
"How to create multiple where clause query using Laravel Eloquent?","229748","","<p>I'm using the Laravel Eloquent query builder and I have a query where I want a <code>WHERE</code> clause on multiple conditions. It works, but it is not elegant. </p>

<p>Example:</p>

<pre><code>$results = User::
      where('this', '=', 1)
    -&gt;where('that', '=', 1)
    -&gt;where('this_too', '=', 1)
    -&gt;where('that_too', '=', 1)
    -&gt;where('this_as_well', '=', 1)
    -&gt;where('that_as_well', '=', 1)
    -&gt;where('this_one_too', '=', 1)
    -&gt;where('that_one_too', '=', 1)
    -&gt;where('this_one_as_well', '=', 1)
    -&gt;where('that_one_as_well', '=', 1)
    -&gt;get();
</code></pre>

<p>Is there a better way to do this, or should I stick with this method?</p>
","<p><strong>In Laravel 5.3</strong> you can use more granular wheres passed as array:</p>

<pre><code>$query-&gt;where([
    ['column_1', '=', 'value_1'],
    ['column_2', '&lt;&gt;', 'value_2'],
    [COLUMN, OPERATOR, VALUE],
    ...
])
</code></pre>

<p>Personally I haven't found use-case for this over just multiple <code>where</code> calls, but fact is you can use it.</p>

<p><strong>Since June 2014 you can pass an array to <code>where</code></strong></p>

<p>As long as you want all the <code>wheres</code> use <code>and</code> operator, you can group them this way:</p>

<pre><code>$matchThese = ['field' =&gt; 'value', 'another_field' =&gt; 'another_value', ...];

// if you need another group of wheres as an alternative:
$orThose = ['yet_another_field' =&gt; 'yet_another_value', ...];
</code></pre>

<p>Then:</p>

<pre><code>$results = User::where($matchThese)-&gt;get();

// with another group
$results = User::where($matchThese)
    -&gt;orWhere($orThose)
    -&gt;get();
</code></pre>

<p>The above will result in such query:</p>

<pre><code>SELECT * FROM users
  WHERE (field = value AND another_field = another_value AND ...)
  OR (yet_another_field = yet_another_value AND ...)
</code></pre>
","27522556"
"php.ini & SMTP= - how do you pass username & password","229616","","<p><code>My ISP</code> account requires that I send a username &amp; password for outbound <code>SMTP</code> mail. </p>

<p>How do I get <code>PHP</code> to use this when executing <code>php.mail()?</code> The <code>php.ini</code> file only contains entries for the server <code>(SMTP= )</code> and <code>From: (sendmail_from= )</code>.</p>
","<p>PHP <code>mail()</code> command does not support authentication. Your options:</p>

<ol>
<li><a href=""http://sourceforge.net/projects/phpmailer"" rel=""noreferrer"">PHPMailer</a>- <a href=""http://phpmailer.codeworxtech.com/index.php?pg=tutorial#2"" rel=""noreferrer"">Tutorial</a></li>
<li><a href=""http://pear.php.net/package/Mail"" rel=""noreferrer"">PEAR</a> - <a href=""http://email.about.com/od/emailprogrammingtips/qt/et073006.htm"" rel=""noreferrer"">Tutorial</a></li>
<li>Custom functions - See various solutions in the notes section: <a href=""http://php.net/manual/en/ref.mail.php"" rel=""noreferrer"">http://php.net/manual/en/ref.mail.php</a></li>
</ol>
","112305"
"Multiple returns from function","229159","","<p>Is it possible to have a function with 2 returns like this:</p>

<pre><code>function test($testvar)
{
  // do something

  return $var1;
  return $var2;
}
</code></pre>

<p>If so, how would I be able to get each return separately?</p>
","<p>There is no way of returning 2 variables.  Although you CAN propagate an array and return it; create a conditional to return a dynamic variable, etc.</p>

<p>For instance, this function would return <code>$var2</code></p>

<pre><code>function wtf($blahblah = true) {
    $var1 = ""ONe"";
    $var2 = ""tWo"";

    if($blahblah === true) {
      return $var2;
    }
    return $var1;
}
</code></pre>

<p>In application:</p>

<pre><code>echo wtf();
//would echo: tWo
echo wtf(""not true, this is false"");
//would echo: ONe
</code></pre>

<p>If you wanted them both, you could modify the function a bit</p>

<pre><code>function wtf($blahblah = true) {
    $var1 = ""ONe"";
    $var2 = ""tWo"";

    if($blahblah === true) {
      return $var2;
    }

    if($blahblah == ""both"") {
      return array($var1, $var2);
    }

    return $var1;
}

echo wtf(""both"")[0]
//would echo: ONe
echo wtf(""both"")[1]
//would echo: tWo

list($first, $second) = wtf(""both"")
// value of $first would be $var1, value of $second would be $var2
</code></pre>
","3451954"
"How to set upload_max_filesize in .htaccess?","228651","","<p>I have try to put theese 2 lines  </p>

<pre><code>php_value post_max_size 30M
php_value upload_max_filesize 30M
</code></pre>

<p>in my root .htaccess file but that brings me ""internal server error"" message ...<br>
php5 is running on the server<br>
I don't have access to php.ini so i think htaccess is my only chance.<br>
Can you tell me where is the mistake?<br>
Thanks in advance</p>
","<p><code>php_value upload_max_filesize 30M</code> is correct.</p>

<p>You will have to contact your hosters -- some don't allow you to change values in php.ini</p>
","2992438"
"POST data to a URL in PHP","228596","","<p>How can I send POST data to a URL in PHP (without a form)?</p>

<p>I'm going to use it for sending a variable to complete and submit a form.</p>
","<p>If you're looking to post data to a URL from PHP code itself (without using an html form) it can be done with curl.  It will look like this:</p>

<pre><code>$url = 'http://www.someurl.com';
$myvars = 'myvar1=' . $myvar1 . '&amp;myvar2=' . $myvar2;

$ch = curl_init( $url );
curl_setopt( $ch, CURLOPT_POST, 1);
curl_setopt( $ch, CURLOPT_POSTFIELDS, $myvars);
curl_setopt( $ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt( $ch, CURLOPT_HEADER, 0);
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, 1);

$response = curl_exec( $ch );
</code></pre>

<p>This will send the post variables to the specified url, and what the page returns will be in $response.</p>
","3080222"
"Access POST values in Symfony2 request object","228315","","<p>OK, this is a newbie question, but I can't find the answer anywhere.  In a controller in Symfony2, I want to access the POST value from one of my forms.  In the controller I have:</p>

<pre class=""lang-php prettyprint-override""><code>public function indexAction()
{ 
    $request = $this-&gt;get('request');
    if ($request-&gt;getMethod() == 'POST') {
        $form = $this-&gt;get('form.factory')-&gt;create(new ContactType());
        $form-&gt;bindRequest($request);
        if ($form-&gt;isValid()) {
            $name_value = $request-&gt;request-&gt;get('name');
</code></pre>

<p>Unfortunately <code>$name_value</code> isn't returning anything.  What am I doing wrong?  Thanks!  </p>
","<h1>Symfony 2.2</h1>

<p>this solution is deprecated since 2.3 and will be removed in 3.0, <a href=""http://symfony.com/doc/2.3/cookbook/form/direct_submit.html#passing-a-request-to-form-submit-deprecated"" rel=""noreferrer"">see documentation</a></p>

<pre><code>$form-&gt;getData();
</code></pre>

<p>gives you an array for the form parameters</p>

<p>from <a href=""http://symfony.com/pdf/Symfony_book_2.0.pdf?v=2"" rel=""noreferrer"">symfony2 book</a> page 162 (Chapter 12: Forms)</p>

<p>[...] sometimes, you may just want to use a form without a class, and get back an array of the submitted
data. This is actually really easy:</p>

<pre><code>public function contactAction(Request $request) {
  $defaultData = array('message' =&gt; 'Type your message here');
  $form = $this-&gt;createFormBuilder($defaultData)
  -&gt;add('name', 'text')
  -&gt;add('email', 'email')
  -&gt;add('message', 'textarea')
  -&gt;getForm();
  if ($request-&gt;getMethod() == 'POST') {
    $form-&gt;bindRequest($request);
    // data is an array with ""name"", ""email"", and ""message"" keys
    $data = $form-&gt;getData();
  }
  // ... render the form
}
</code></pre>

<p>You can also access POST values (in this case ""name"") directly through the request object, like so:</p>

<pre><code>$this-&gt;get('request')-&gt;request-&gt;get('name');
</code></pre>

<p><strong>Be advised, however, that in most cases using the getData() method is a better choice, since it
returns the data (usually an object) after it's been transformed by the form framework.</strong></p>

<p>When you want to access the form token, you have to use the answer of Problematic
<code>$postData = $request-&gt;request-&gt;get('contact');</code> because the <code>getData()</code> removes the element from the array</p>

<hr>

<h1>Symfony <strong>2.3</strong></h1>

<p>since 2.3 you should use <code>handleRequest</code> instead of <code>bindRequest</code>:</p>

<pre><code> $form-&gt;handleRequest($request);
</code></pre>

<p><a href=""http://symfony.com/doc/2.3/book/forms.html#handling-form-submissions"" rel=""noreferrer"">see documentation</a></p>
","12142437"
"Check if $_POST exists","227718","","<p>I'm trying to check whether a $_POST exists and if it does, print it inside another string, if not, don't print at all.</p>

<p>something like this:</p>

<pre><code>$fromPerson = '+from%3A'.$_POST['fromPerson'];

function fromPerson() {
    if !($_POST['fromPerson']) {
        print ''
    } else {
        print $fromPerson
    };
}

$newString = fromPerson();
</code></pre>

<p>Any help would be great!</p>
","<pre><code>if( isset($_POST['fromPerson']) )
{
     $fromPerson = '+from%3A'.$_POST['fromPerson'];
     echo $fromPerson;
}
</code></pre>
","3497060"
"How to use css style in php","227625","","<p>Im using php to display data from mysql. Here are my css statements:</p>

<pre><code>&lt;style type=”text/css”&gt;
table {
    margin: 8px;
}

th {
    font-family: Arial, Helvetica, sans-serif;
    font-size: .7em;
    background: #666;
    color: #FFF;
    padding: 2px 6px;
    border-collapse: separate;
    border: 1px solid #000;
}

td {
    font-family: Arial, Helvetica, sans-serif;
    font-size: .7em;
    border: 1px solid #DDD;
}
&lt;/style&gt;
</code></pre>

<p>They are used for displaying table, tableheader, tabledate.
Im new to php css, so im just wondering how to use the above css style in php displaying codes:</p>

<pre><code>&lt;?php&gt;
echo ""&lt;table&gt;"";
echo ""&lt;tr&gt;&lt;th&gt;ID&lt;/th&gt;&lt;th&gt;hashtag&lt;/th&gt;&lt;/tr&gt;"";
while($row = mysql_fetch_row($result))
{
    echo ""&lt;tr onmouseover=\""hilite(this)\"" onmouseout=\""lowlite(this)\""&gt;&lt;td&gt;$row[0]&lt;/td&gt;                &lt;td&gt;$row[1]&lt;/td&gt;&lt;/tr&gt;\n"";
}
echo ""&lt;/table&gt;"";
&lt;?&gt;
</code></pre>
","<p>Cascading Style Sheets (CSS) is a style sheet language used for describing the presentation semantics (the look and formatting) of a document written in a markup language.
more info : <a href=""http://en.wikipedia.org/wiki/Cascading_Style_Sheets"" rel=""noreferrer"">http://en.wikipedia.org/wiki/Cascading_Style_Sheets</a>
CSS is not a programming language, and does not have the tools that come with a server side language like PHP. However, we can use Server-side languages to generate style sheets.</p>

<pre><code>&lt;html&gt;
&lt;head&gt;
&lt;title&gt;...&lt;/title&gt;
&lt;style type=”text/css”&gt;
table {
margin: 8px;
}

th {
font-family: Arial, Helvetica, sans-serif;
font-size: .7em;
background: #666;
color: #FFF;
padding: 2px 6px;
border-collapse: separate;
border: 1px solid #000;
}

td {
font-family: Arial, Helvetica, sans-serif;
font-size: .7em;
border: 1px solid #DDD;
}
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;?php&gt;
echo ""&lt;table&gt;"";
echo ""&lt;tr&gt;&lt;th&gt;ID&lt;/th&gt;&lt;th&gt;hashtag&lt;/th&gt;&lt;/tr&gt;"";
while($row = mysql_fetch_row($result))
{
echo ""&lt;tr onmouseover=\""hilite(this)\"" onmouseout=\""lowlite(this)\""&gt;&lt;td&gt;$row[0]&lt;/td&gt;                &lt;td&gt;$row[1]&lt;/td&gt;&lt;/tr&gt;\n"";
}
echo ""&lt;/table&gt;"";
?&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
","13201561"
"Show values from a MySQL database table inside a HTML table on a webpage","226722","","<p>I want to retrieve the values from a database table and show them in a html table in a page.
I already searched for this but I couldn't find the answer, although this surely is something easy (this should be the basics of databases lol). I guess the terms I've searched are misleading.
The database table name is tickets, it has 6 fields right now (submission_id, formID, IP, name, email and message) but should have another field called ticket_number.
How can I get it to show all the values from the db in a html table like this:</p>

<pre><code>&lt;table border=""1""&gt;
  &lt;tr&gt;
    &lt;th&gt;Submission ID&lt;/th&gt;
    &lt;th&gt;Form ID&lt;/th&gt;
    &lt;th&gt;IP&lt;/th&gt;
    &lt;th&gt;Name&lt;/th&gt;
    &lt;th&gt;E-mail&lt;/th&gt;
    &lt;th&gt;Message&lt;/th&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;123456789&lt;/td&gt;
    &lt;td&gt;12345&lt;/td&gt;
    &lt;td&gt;123.456.789&lt;/td&gt;
    &lt;td&gt;John Johnny&lt;/td&gt;
    &lt;td&gt;johnny@johnysite.com&lt;/td&gt;
    &lt;td&gt;This is the message John sent you&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
</code></pre>

<p>And then all the other values below 'john'.</p>

<p>Thanks for the help in advance.</p>
","<p>Example taken from W3Schools: <a href=""http://www.w3schools.com/php/php_mysql_select.asp"" rel=""noreferrer"">PHP Select Data from MySQL</a></p>

<pre><code>&lt;?php
$con=mysqli_connect(""example.com"",""peter"",""abc123"",""my_db"");
// Check connection
if (mysqli_connect_errno())
{
echo ""Failed to connect to MySQL: "" . mysqli_connect_error();
}

$result = mysqli_query($con,""SELECT * FROM Persons"");

echo ""&lt;table border='1'&gt;
&lt;tr&gt;
&lt;th&gt;Firstname&lt;/th&gt;
&lt;th&gt;Lastname&lt;/th&gt;
&lt;/tr&gt;"";

while($row = mysqli_fetch_array($result))
{
echo ""&lt;tr&gt;"";
echo ""&lt;td&gt;"" . $row['FirstName'] . ""&lt;/td&gt;"";
echo ""&lt;td&gt;"" . $row['LastName'] . ""&lt;/td&gt;"";
echo ""&lt;/tr&gt;"";
}
echo ""&lt;/table&gt;"";

mysqli_close($con);
?&gt;
</code></pre>

<p>It's a good place to learn from!</p>
","17902527"
"Redirect with CodeIgniter","226666","","<p>Can anyone tell me why my redirect helper does not work the way I'd expect it to? I'm trying to redirect to the index method of my main controller, but it takes me <code>www.mysite.com/index/provider1/</code> when it should route to <code>www.mysite.com/provider1</code>. Does this make sense to anyone? I have index page in config set to blank, although I don't think that it is the issue. Does anyone have advice on how to fix this issue? Thanks in advance!</p>

<p><strong>Controller</strong>:</p>

<pre><code>if($provider == '') {
    redirect('/index/provider1/', 'location');
}
</code></pre>

<p><strong>.htaccess</strong>:</p>

<pre><code>RewriteEngine on

RewriteCond %{REQUEST_URI} !^(index\.php|files|images|js|css|robots\.txt|favicon\.ico)

RewriteCond %{HTTP_HOST} ^mysite.com/ttnf/
RewriteRule (.*) http://www.mysite.com/ttnf/$1 [R=301,L]

RewriteBase /ttnf/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L]

php_flag display_errors On
</code></pre>
","<h1>redirect()</h1>

<h3>URL Helper</h3>

<p><hr />
The redirect statement in code igniter sends the user to the specified web page using a redirect header statement.</p>

<p>This statement resides in the URL helper which is loaded in the following way:</p>

<pre><code>$this-&gt;load-&gt;helper('url');
</code></pre>

<p>The redirect function loads a local URI specified in the first parameter of the function call and built using the options specified in your config file.</p>

<p>The second parameter allows the developer to use different HTTP commands to perform the redirect ""location"" or ""refresh"". </p>

<p>According to the Code Igniter documentation: ""Location is faster, but on Windows servers it can sometimes be a problem."" </p>

<p>Example:</p>

<pre><code>if ($user_logged_in === FALSE)
{
     redirect('/account/login', 'refresh');
}
</code></pre>
","725200"
"How to delete a file via PHP?","226318","","<p>How do I delete a file from my server with PHP if the file is in another directory? </p>

<p>Here is my page layout:</p>

<ul>
<li><code>projects/backend/removeProjectData.php</code> (this file deletes all my entries for the database and should also delete the related file)</li>
<li><code>public_files/22.pdf</code> (the place where the file is located.) </li>
</ul>

<p>I'm using the <code>unlink</code> function:</p>

<p><code>unlink('../../public_files/' . $fileName);</code></p>

<p>But this always gives me an error that the file does not exist. Any ideas?</p>
","<p>The following should help</p>

<ul>
<li><a href=""http://php.net/realpath"" rel=""noreferrer""><code>realpath</code></a> — Returns canonicalized absolute pathname</li>
<li><a href=""http://php.net/is_writable"" rel=""noreferrer""><code>is_writable</code></a> — Tells whether the filename is writable</li>
<li><a href=""http://php.net/unlink"" rel=""noreferrer""><code>unlink</code></a> — Deletes a file</li>
</ul>

<p>Run your filepath through realpath, then check if the returned path is writable and if so, unlink it.</p>
","2371431"
"What's the best way to get the last element of an array without deleting it?","225601","","<p>Ok,</p>

<p>I know all about <a href=""http://www.php.net/array_pop"" rel=""noreferrer""><code>array_pop()</code></a>, but that deletes the last element.  What's the best way to get the last element of an array without deleting it?</p>

<p>EDIT: Here's a bonus:</p>

<pre><code>$array = array('a' =&gt; 'a', 'b' =&gt; 'b', 'c' =&gt; 'c');
</code></pre>

<p>or even</p>

<pre><code>$array = array('a', 'b', 'c', 'd');
unset($array[2]);
echo $array[sizeof($array) - 1]; // Output: PHP Notice:  Undefined offset:  2 in - on line 4
</code></pre>
","<p>Short and sweet.</p>

<p>I came up with solution to remove error message and preserve one-liner form and efficient performance:</p>

<pre><code>$lastEl = array_values(array_slice($array, -1))[0];
</code></pre>

<p>-- previous solution</p>

<pre><code>$lastEl = array_pop((array_slice($array, -1)));
</code></pre>

<p>Note: The extra parentheses are needed to avoid a <code>PHP Strict standards:  Only variables should be passed by reference</code>.</p>
","35957563"
"How to include a PHP variable inside a MySQL insert statement","225536","","<p>I'm trying to insert values in the contents table. It works fine if I do not have a PHP variable inside VALUES. When I put the variable <code>$type</code> inside VALUES then this doesn't work. What am I doing wrong?</p>

<pre><code>$type = 'testing';
mysql_query(""INSERT INTO contents (type, reporter, description) VALUES($type, 'john', 'whatever')"");
</code></pre>
","<p>The rules of adding strings into a query are plain and simple:</p>

<ol>
<li>The string should be enclosed in quotes.</li>
<li>Therefore, these quotes should be escaped in the data, as well as some other characters, using <code>mysql_real_escape_string()</code></li>
</ol>

<p>So, your code becomes</p>

<pre><code>$type     = 'testing';
$type     = mysql_real_escape_string($type);
$reporter = ""John O'Hara"";
$reporter = mysql_real_escape_string($reporter);

$query    = ""INSERT INTO contents (type, reporter, description) 
             VALUES('$type', '$reporter', 'whatever')"";
mysql_query($query) or trigger_error(mysql_error()."" in "".$query);
// note that when running mysql_query you have to always check for errors
</code></pre>

<p>But if you're going to add the variable in another part of a query, the rules change. </p>

<ul>
<li>To add a number, you have to cast it to its type explicitly. </li>
</ul>

<p>For example:</p>

<pre><code>$limit = intval($_GET['limit']); //casting to int type!
$query = ""SELECT * FROM table LIMIT $limit"";
</code></pre>

<ul>
<li>To add an identifier, it's better to choose it from some sort of white list, consists of hardcoded values</li>
</ul>

<p>For example:</p>

<pre><code>if ($_GET['sortorder'] == 'name') {
  $sortorder = 'name';
} else {
  $sortorder = 'id';
}
$query = ""SELECT * FROM table ORDER BY $sortorder"";
</code></pre>

<p><strong>To make it all simplified</strong> yet with guaranteed safety, one have to use some sort of <strong>placeholder system</strong> where the variable goes into a query not directly but via some proxy, called a placeholder.</p>

<p>So, your query call becomes something like this:</p>

<pre><code>$type     = 'testing';
$reporter = ""John O'Hara"";
pquery(""INSERT INTO contents (type, reporter, description) VALUES(?s, ?s, ?s)"",
        $type, $reporter,'whatever');
</code></pre>

<p>And there will be absolutely no need to worry about all these matters.</p>

<p>For the limited set of placeholders you can use <a href=""https://stackoverflow.com/tags/pdo/info"">PDO</a>. Though for real life usage you will need extended set which is offered by but a few libraries, one of which is <a href=""https://github.com/colshrapnel/safemysql"" rel=""noreferrer"">SafeMysql</a>.</p>
","7537500"
"Increase max execution time for php","225413","","<p>I have added <code>set_time_limit(0);</code> function to increase execution time but its executing only 2-3 minutes maximum.</p>

<pre><code>error_reporting(E_ALL);
error_reporting(1);
set_time_limit(0);
</code></pre>

<p>I want to search links from a site wich taking a long lime .</p>

<p>Any help would be greatly appreciated. </p>

<p>Thanks a lot.</p>
","<p><strong>PHP file (for example, my_lengthy_script.php)</strong></p>

<pre><code>ini_set('max_execution_time', 300); //300 seconds = 5 minutes
</code></pre>

<p><strong>.htaccess file</strong></p>

<pre><code>&lt;IfModule mod_php5.c&gt;
php_value max_execution_time 300
&lt;/IfModule&gt;
</code></pre>

<p><strong>More configuration options</strong></p>

<pre><code>&lt;IfModule mod_php5.c&gt;
php_value post_max_size 5M
php_value upload_max_filesize 5M
php_value memory_limit 128M
php_value max_execution_time 300
php_value max_input_time 300
php_value session.gc_maxlifetime 1200
&lt;/IfModule&gt;
</code></pre>

<p><strong>If wordpress, set this in the config.php file,</strong></p>

<pre><code>define('WP_MEMORY_LIMIT', '128M');
</code></pre>

<p><strong>If drupal, sites/default/settings.php</strong></p>

<pre><code>ini_set('memory_limit', '128M');
</code></pre>

<p><strong>If you are using other frameworks,</strong></p>

<pre><code>ini_set('memory_limit', '128M');
</code></pre>

<p>You can increase memory as <strong>gigabyte</strong>.</p>

<pre><code>ini_set('memory_limit', '3G'); // 3 Gigabytes
</code></pre>

<p>259200 means:-</p>

<pre><code>( 259200/(60x60 minutes) ) / 24 hours ===&gt; 3 Days
</code></pre>

<p><a href=""http://webexplorar.com/php-increase-max-execution-time-upload-size-memory-limit-in-php.ini"" rel=""noreferrer"">More details on my blog</a></p>
","14290695"
"Export to CSV via PHP","225363","","<p>Let's say I have a database.... is there a way I can export what I have from the database to a CSV file (and text file [if possible]) via PHP?</p>
","<p>I personally use this function to create CSV content from any array.</p>

<pre><code>function array2csv(array &amp;$array)
{
   if (count($array) == 0) {
     return null;
   }
   ob_start();
   $df = fopen(""php://output"", 'w');
   fputcsv($df, array_keys(reset($array)));
   foreach ($array as $row) {
      fputcsv($df, $row);
   }
   fclose($df);
   return ob_get_clean();
}
</code></pre>

<p>Then you can make your user download that file using something like:</p>

<pre><code>function download_send_headers($filename) {
    // disable caching
    $now = gmdate(""D, d M Y H:i:s"");
    header(""Expires: Tue, 03 Jul 2001 06:00:00 GMT"");
    header(""Cache-Control: max-age=0, no-cache, must-revalidate, proxy-revalidate"");
    header(""Last-Modified: {$now} GMT"");

    // force download  
    header(""Content-Type: application/force-download"");
    header(""Content-Type: application/octet-stream"");
    header(""Content-Type: application/download"");

    // disposition / encoding on response body
    header(""Content-Disposition: attachment;filename={$filename}"");
    header(""Content-Transfer-Encoding: binary"");
}
</code></pre>

<p>Usage example:</p>

<pre><code>download_send_headers(""data_export_"" . date(""Y-m-d"") . "".csv"");
echo array2csv($array);
die();
</code></pre>
","13474770"
"Laravel, get last insert id using Eloquent","224547","","<p>I'm currently using this code to insert data in a table:</p>

<pre><code>public function saveDetailsCompany()
{
    $post = Input::All();

    $data = new Company;

    $data-&gt;nombre = $post['name'];
    $data-&gt;direccion = $post['address'];
    $data-&gt;telefono = $post['phone'];
    $data-&gt;email = $post['email'];
    $data-&gt;giro = $post['type'];
    $data-&gt;fecha_registro = date(""Y-m-d H:i:s"");
    $data-&gt;fecha_modificacion = date(""Y-m-d H:i:s"");

    if($data-&gt;save()) {
        return Response::json(array('success' =&gt; true), 200);
    }
}
</code></pre>

<p>And I want to return the last ID inserted but I don't know how to get it.</p>

<p>Kind regards!</p>
","<p>After <code>save</code>, <code>$data-&gt;id</code> should be the last id inserted.</p>

<pre><code>return Response::json(array('success' =&gt; true, 'last_insert_id' =&gt; $data-&gt;id), 200);
</code></pre>
","21084888"
"Reading an Excel file in PHP","224486","","<p>I'm trying to read an Excel file (Office 2003). There is an Excel file that needs to be uploaded and its contents parsed.</p>

<p>Via Google, I can only find answers to these related (and insufficient topics): generating Excel files, reading Excel XML files, reading Excel CSV files, or incomplete abandoned projects. I own Office 2003 so if I need any files from there, they are available. It's installed on my box but isn't and can't be installed on my shared host.</p>

<p><b>Edit:</b> so far all answers point to <a href=""https://sourceforge.net/projects/phpexcelreader/"" rel=""noreferrer"">PHP-ExcelReader</a> and/or <a href=""https://devzone.zend.com/27/reading-and-writing-spreadsheets-with-php/"" rel=""noreferrer"">this additional article</a> about how to use it.</p>
","<p>I use <a href=""http://sourceforge.net/projects/phpexcelreader/"" rel=""noreferrer"">PHP-ExcelReader</a> to read xls files, and works great. </p>
","563803"
"How do I run PHP code when a user clicks on a link?","222991","","<p>I want to have a page run some PHP code when a user clicks on a link, without redirecting them. Is this possible with </p>

<pre><code>&lt;a href=""""&gt;&lt;/a&gt;
</code></pre>

<p>or with the javascript onclick event?</p>
","<p>Yeah, you'd need to have a javascript function triggered by an onclick that does an AJAX load of a page and then returns false, that way they won't be redirected in the browser.  You could use the following in jQuery, if that's acceptable for your project:</p>

<pre><code>&lt;script type=""text/javascript"" src=""jquery.min.js""&gt;&lt;/script&gt;
&lt;script type=""text/javascript""&gt;
function doSomething() {
    $.get(""somepage.php"");
    return false;
}
&lt;/script&gt;

&lt;a href=""#"" onclick=""doSomething();""&gt;Click Me!&lt;/a&gt;
</code></pre>

<p>You could also do a post-back if you need to use form values (use the $.post() method).</p>
","1280779"
"Writing a new line to file in PHP","222854","","<p>My code:</p>

<pre><code>$i = 0;
$file = fopen('ids.txt', 'w');
foreach ($gemList as $gem)
{
    fwrite($file, $gem-&gt;getAttribute('id') . '\n');
    $gemIDs[$i] = $gem-&gt;getAttribute('id');
    $i++;
}
fclose($file);
</code></pre>

<p>For some reason, it's writing <code>\n</code> as a string, so the file looks like this:</p>

<pre><code>40119\n40122\n40120\n42155\n36925\n45881\n42145\n45880
</code></pre>

<p>From Google'ing it tells me to use <code>\r\n</code>, but <code>\r</code> is a carriage return which doesn't seem to be what I want to do. I just want the file to look like this:</p>

<pre><code>40119
40122
40120
42155
36925
45881
42145
45880
</code></pre>

<p>Thanks.</p>
","<p>Replace <code>'\n'</code> with <code>""\n""</code>. The escape sequence is not recognized when you use <code>'</code>.</p>

<p>See the <a href=""http://php.net/manual/en/language.types.string.php"">manual</a>.</p>

<p>For the question of how to write line endings, see the note <a href=""http://www.php.net/manual/en/function.fopen.php"">here</a>. Basically, different operating systems have different conventions for line endings. Windows uses ""\r\n"", unix based operating systems use ""\n"". You should stick to one convention (I'd chose ""\n"") and open your file in binary mode (<code>fopen</code> should get ""wb"", not ""w"").</p>
","3066426"
"Page redirect after certain time PHP","222359","","<p>There is a certain PHP function for redirecting after some time. I saw it somewhere but can't remember. It's like the gmail redirection after logging in. Please, could anyone remind me?</p>
","<pre><code>header( ""refresh:5;url=wherever.php"" );
</code></pre>

<p>this is the php way to set <code>header</code> which will redirect you to <code>wherever.php</code> in <strong>5 seconds</strong></p>

<hr>

<blockquote>
  <p>Remember that header() must be called before any actual output is sent, either by normal HTML tags, blank lines in a file, or from PHP. It is a very common error to read code with include, or require, functions, or another file access function, and have spaces or empty lines that are output before header() is called. The same problem exists when using a single PHP/HTML file. (source <a href=""http://php.net/header"" rel=""noreferrer"">php.net</a>)</p>
</blockquote>
","6119499"
"PHP max_input_vars","222130","","<p>I'm getting a <code>max_input_vars</code> error message. </p>

<p>I understand there's a <code>php.ini</code> setting that can change this starting with version 5.3.9 however, I'm running version 5.1.6. </p>

<p>When I view the configuration information for my 5.1.6 server it shows <code>max_input_vars</code> value is 1000. </p>

<p>My question is: Even though I'm running 5.1.6, I see this setting from <code>phpinfo()</code> but it's not in the <code>php.ini</code> file. Does this mean that the value is hard coded in this version of PHP and can't be changed?</p>
","<p>You can add it to php.ini and it should work - just tested it on PHP 5.3.6.</p>
","10303926"
"How can I handle the warning of file_get_contents() function in PHP?","222016","","<p>I wrote a PHP code like this</p>

<pre><code>$site=""http://www.google.com"";
$content = file_get_content($site);
echo $content;
</code></pre>

<p>But when I remove ""http://"" from <code>$site</code> I get the following warning:</p>

<blockquote>
  <p>Warning:
  file_get_contents(www.google.com)
  [function.file-get-contents]: failed
  to open stream:</p>
</blockquote>

<p>I tried <code>try</code> and <code>catch</code> but it didn't work.</p>
","<p>Step 1: check the return code: <code>if($content === FALSE) { // handle error here... }</code></p>

<p>Step 2: suppress the warning by putting an <a href=""http://php.net/manual/en/language.operators.errorcontrol.php"" rel=""noreferrer"">error control operator</a> (i.e. <code>@</code>) in front of the call to <em>file_get_contents()</em>:
<code>$content = @file_get_contents($site);</code></p>
","272377"
"Get all variables sent with POST?","221995","","<p>I need to insert all variables sent with post, they were checkboxes each representing an user.</p>

<p>If I use GET I get something like this:</p>

<pre><code>?19=on&amp;25=on&amp;30=on
</code></pre>

<p>I need to insert the variables in the database.</p>

<p>How do I get all variables sent with POST? As an array or values separated with comas or something?</p>
","<p>The variable <code>$_POST</code> is automatically populated. </p>

<p>Try <code>var_dump($_POST);</code> to see the contents.</p>

<p>You can access individual values like this: <code>echo $_POST[""name""];</code></p>

<p>This, of course, assumes your form is using the typical form encoding (i.e. <code>enctype=”multipart/form-data”</code></p>

<p>If your post data is in another format (e.g. JSON or XML, you can do something like this:</p>

<pre class=""lang-php prettyprint-override""><code>$post = file_get_contents('php://input');
</code></pre>

<p>and <code>$post</code> will contain the raw data. </p>

<p>Assuming you're using the standard <code>$_POST</code> variable, you can test if a checkbox is checked like this:</p>

<pre class=""lang-php prettyprint-override""><code>if(isset($_POST['myCheckbox']) &amp;&amp; $_POST['myCheckbox'] == 'Yes')
{
     ...
}
</code></pre>

<p>If you have an array of checkboxes (e.g. </p>

<pre class=""lang-php prettyprint-override""><code>&lt;form action=""myscript.php"" method=""post""&gt;
  &lt;input type=""checkbox"" name=""myCheckbox[]"" value=""A"" /&gt;val1&lt;br /&gt;
  &lt;input type=""checkbox"" name=""myCheckbox[]"" value=""B"" /&gt;val2&lt;br /&gt;
  &lt;input type=""checkbox"" name=""myCheckbox[]"" value=""C"" /&gt;val3&lt;br /&gt;
  &lt;input type=""checkbox"" name=""myCheckbox[]"" value=""D"" /&gt;val4&lt;br /&gt;
  &lt;input type=""checkbox"" name=""myCheckbox[]"" value=""E"" /&gt;val5
  &lt;input type=""submit"" name=""Submit"" value=""Submit"" /&gt;
&lt;/form&gt;
</code></pre>

<p>Using <code>[ ]</code> in the checkbox name indicates that the selected values will be accessed by PHP script as an array. In this case <code>$_POST['myCheckbox']</code> won't return a single string but will return an array consisting of all the values of the checkboxes that were checked.</p>

<p>For instance, if I checked all the boxes, <code>$_POST['myCheckbox']</code> would be an array consisting of: <code>{A, B, C, D, E}</code>. Here's an example of how to retrieve the array of values and display them:</p>

<pre class=""lang-php prettyprint-override""><code>  $myboxes = $_POST['myCheckbox'];
  if(empty($myboxes))
  {
    echo(""You didn't select any boxes."");
  }
  else
  {
    $i = count($myboxes);
    echo(""You selected $i box(es): "");
    for($j = 0; $j &lt; $i; $j++)
    {
      echo($myboxes[$i] . "" "");
    }
  }
</code></pre>
","8207498"
"PHP Session timeout","221686","","<p>I am creating a session when a user logs in like so:</p>

<pre><code>$_SESSION['id'] = $id;
</code></pre>

<p>How can I specify a timeout on that session of X minutes and then have it perform a function or a page redirect once it has reached X minutes??</p>

<p>EDIT: I forgot to mention that I need the session to timeout due to inactivity.</p>
","<p>first, store the last time the user made a request</p>

<pre><code>&lt;?php
  $_SESSION['timeout'] = time();
?&gt;
</code></pre>

<p>in subsequent request, check how long ago they made their previous request (10 minutes in this example)</p>

<pre><code>&lt;?php
  if ($_SESSION['timeout'] + 10 * 60 &lt; time()) {
     // session timed out
  } else {
     // session ok
  }
?&gt;
</code></pre>
","3068766"
"How to get file_get_contents() to work with HTTPS?","221421","","<p>I'm working on setting up credit card processing and needed to use a workaround for CURL. The following code worked fine when I was using the test server (which wasn't calling an SSL URL), but now when I am testing it on the working server with HTTPS, it's failing with the error message ""failed to open stream"".</p>

<pre><code>function send($packet, $url) {
  $ctx = stream_context_create(
    array(
      'http'=&gt;array(
        'header'=&gt;""Content-type: application/x-www-form-urlencoded"",
        'method'=&gt;'POST',
        'content'=&gt;$packet
      )
    )
  );
  return file_get_contents($url, 0, $ctx);
}
</code></pre>
","<p>Try the following script to see if there is an https wrapper available for your php scripts.</p>

<pre><code>$w = stream_get_wrappers();
echo 'openssl: ',  extension_loaded  ('openssl') ? 'yes':'no', ""\n"";
echo 'http wrapper: ', in_array('http', $w) ? 'yes':'no', ""\n"";
echo 'https wrapper: ', in_array('https', $w) ? 'yes':'no', ""\n"";
echo 'wrappers: ', var_export($w);
</code></pre>

<p>the output should be something like</p>

<pre><code>openssl: yes
http wrapper: yes
https wrapper: yes
wrappers: array(11) {
  [...]
}
</code></pre>
","1975949"
"How do I compare two DateTime objects in PHP 5.2.8?","221413","","<p>This seems like something that should be pretty straight forward, but I have been stuck <em>page faulting</em> this problem for a while now, so here goes.</p>

<p>Having a look on the PHP documentation , the following two methods of the DateTime object would both seem to solve my problem:</p>

<ul>
<li><a href=""http://au.php.net/manual/en/datetime.diff.php"" rel=""nofollow noreferrer"">DateTime::diff</a> : Get the difference and use that to determine which is more ancient.</li>
<li><a href=""http://au.php.net/manual/en/datetime.gettimestamp.php"" rel=""nofollow noreferrer"">DateTime::getTimestamp</a> : Get the UNIX timestampt and compare those.</li>
</ul>

<p>Both these methods are marked in the <a href=""http://au.php.net/datetime"" rel=""nofollow noreferrer"">doco</a> as being available in version >= 5.3 (and, not surprisingly, if I try to call them I find they don't exist). I can't find any specific documentation for 5.2.8 so I am not sure if there are equivalent methods in my version.  I have <a href=""http://www.google.com.au/search?q=compare+DateTime+PHP&amp;ie=utf-8&amp;oe=utf-8&amp;aq=t&amp;rls=org.mozilla:en-US:official&amp;client=firefox-a"" rel=""nofollow noreferrer"">Googled</a> the problem and found an eclectic range of solutions, none of which answer my very simple requirements:</p>

<ul>
<li>How do I compare two DateTime objects?</li>
<li>Where can I find the doco for previous PHP versions? Specifically version 5.2.8?</li>
</ul>

<p>For some context, I have the following code:</p>

<pre><code>$st_dt = new DateTime(verifyParam ('start_date'));
$end_dt = new DateTime(verifyParam ('end_date'));

// is the end date more ancient than the start date?
if ($end_dt &lt; $start_dt) 
</code></pre>

<p>Apparently there is no comparison operator on this guy.  </p>

<p>EDIT: <em>Apparently</em> my assumptions  were completely false (thanks Milen for illustrating this so effectively).  There is a comparison operator and it works just fine thanks.  Sometimes I really miss a compiler.  The bug is in the code above, I am sure you will find it much faster than I did :).</p>

<p>I look forward to my embarrassment at the simplicity of your solution.</p>

<p>EDIT: And sure enough, embarrassment ensues ...</p>
","<p>The following seems to confirm that there are comparison operators for the DateTime class:</p>

<pre><code>dev:~# php
&lt;?php
date_default_timezone_set('Europe/London');

$d1 = new DateTime('2008-08-03 14:52:10');
$d2 = new DateTime('2008-01-03 11:11:10');
var_dump($d1 == $d2);
var_dump($d1 &gt; $d2);
var_dump($d1 &lt; $d2);
?&gt;
bool(false)
bool(true)
bool(false)
dev:~# php -v
PHP 5.2.6-1+lenny3 with Suhosin-Patch 0.9.6.2 (cli) (built: Apr 26 2009 20:09:03)
Copyright (c) 1997-2008 The PHP Group
Zend Engine v2.2.0, Copyright (c) 1998-2008 Zend Technologies
dev:~#
</code></pre>
","961116"
"Fatal error: Class 'SoapClient' not found","221181","","<p>I'm trying a simple web service example and I get this error even though I uncommented <code>extension=php_soap.dll</code> in the <code>php.ini</code> file:</p>

<blockquote>
  <p><strong>Fatal error:</strong> Class 'SoapClient' not found in C:\Program Files (x86)\EasyPHP-5.3.9\www\server.php on line 2</p>
</blockquote>
","<p><strong>Diagnose</strong></p>

<p>Look up the following inside your script file</p>

<pre><code>phpinfo();
</code></pre>

<p>If you can't find <code>Soap Client</code> set to <code>enabled</code> like so:
<img src=""https://i.stack.imgur.com/YWDtj.jpg"" alt=""the way soap should appear in phpinfo()""></p>

<p><strong>Fix</strong></p>

<p>Do the following:</p>

<ol>
<li>Locate <code>php.ini</code> in your <strong>apache</strong> bin folder, I.e <code>Apache/bin/php.ini</code></li>
<li>Remove the <code>;</code> from the beginning of <code>extension=php_soap.dll</code></li>
<li>Restart your Apache server</li>
<li>Look up your <code>phpinfo();</code> again and check if you see a similar picture to the one above</li>
<li>If you do, problem solved!</li>
</ol>

<p>On the other hand if this doesn't solve your issue, you may want to check the <a href=""http://www.php.net/manual/en/soap.requirements.php"" rel=""noreferrer"">requirements for SOAP here</a>. Also in the comment section you can find good advice on connecting to https.</p>
","11391550"
"Sending email with gmail smtp with codeigniter email library","221126","","<pre><code>&lt;?php
class Email extends Controller {

    function Email()
    {
        parent::Controller();   
        $this-&gt;load-&gt;library('email');
    }

    function index()
    {
        $config['protocol']    = 'smtp';
        $config['smtp_host']    = 'ssl://smtp.gmail.com';
        $config['smtp_port']    = '465';
        $config['smtp_timeout'] = '7';
        $config['smtp_user']    = 'mygmail@gmail.com';
        $config['smtp_pass']    = '*******';
        $config['charset']    = 'utf-8';
        $config['newline']    = ""\r\n"";
        $config['mailtype'] = 'text'; // or html
        $config['validation'] = TRUE; // bool whether to validate email or not      

        $this-&gt;email-&gt;initialize($config);

        $this-&gt;email-&gt;from('mygmail@gmail.com', 'myname');
        $this-&gt;email-&gt;to('target@gmail.com'); 

        $this-&gt;email-&gt;subject('Email Test');
        $this-&gt;email-&gt;message('Testing the email class.');  

        $this-&gt;email-&gt;send();

        echo $this-&gt;email-&gt;print_debugger();

        $this-&gt;load-&gt;view('email_view');
    }
}
</code></pre>

<p>I am getting this error:</p>

<pre><code>A PHP Error was encountered
Severity: Warning
Message: fsockopen() [function.fsockopen]: unable to connect to ssl://smtp.gmail.com:465 (Connection timed out)
Filename: libraries/Email.php
Line Number: 1641
</code></pre>

<p>Using <code>PORT 25/587</code></p>

<p>I got this error:</p>

<pre><code>A PHP Error was encountered
Severity: Warning
Message: fsockopen() [function.fsockopen]: SSL operation failed with code 1. OpenSSL Error messages: error:140770FC:SSL routines:func(119):reason(252)
Filename: libraries/Email.php
Line Number: 1641
</code></pre>

<p>I don't want to use phpmailer now. (Actually I have tried to use phpmailer, but I failed).</p>

<p>How do I solve this problem guys?</p>
","<pre><code>$config = Array(
    'protocol' =&gt; 'smtp',
    'smtp_host' =&gt; 'ssl://smtp.googlemail.com',
    'smtp_port' =&gt; 465,
    'smtp_user' =&gt; 'xxx',
    'smtp_pass' =&gt; 'xxx',
    'mailtype'  =&gt; 'html', 
    'charset'   =&gt; 'iso-8859-1'
);
$this-&gt;load-&gt;library('email', $config);
$this-&gt;email-&gt;set_newline(""\r\n"");

// Set to, from, message, etc.

$result = $this-&gt;email-&gt;send();
</code></pre>

<p>From the <a href=""http://web.archive.org/web/20091027211607/http://codeigniter.com/forums/viewthread/132443/"" rel=""noreferrer"">CodeIgniter Forums</a></p>
","1622996"
"Simplest way to detect a mobile device","220929","","<p>What is the simplest way to tell if a user is using a mobile device to browse my site using <code>PHP</code>?</p>

<p>I have come across many classes that you can use but I was hoping for a simple if condition! </p>

<p>Is there a way I can do this?</p>
","<p>Here is a source:</p>

<ul>
<li><a href=""http://detectmobilebrowser.com/"" rel=""noreferrer"">Detect Mobile Browser</a> </li>
<li><a href=""http://detectmobilebrowser.com/download/php"" rel=""noreferrer"">Download PHP script</a></li>
</ul>

<p><strong>Code:</strong></p>

<pre><code>&lt;?php

$useragent=$_SERVER['HTTP_USER_AGENT'];

if(preg_match('/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i',$useragent)||preg_match('/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i',substr($useragent,0,4)))

header('Location: http://detectmobilebrowser.com/mobile');

?&gt;
</code></pre>
","4117597"
"Maximum execution time in phpMyadmin","220750","","<p>When I try to execute (some) queries in phpMyadmin I get this error</p>

<blockquote>
  <p>Fatal error: Maximum execution time of 60 seconds exceeded in
  C:\xampp\phpmyadmin\libraries\dbi\mysql.dbi.lib.php on line 140</p>
</blockquote>

<p>because I have a very large table (over 9 millions records)</p>

<p>I have edited the file C:\xampp\php\php.ini </p>

<p>and changed the value of ""max execution time"" from 60 to 1000 then restarts the PHP and still have the same error.</p>

<p>Any solution?</p>
","<p>I have the same error, please go to</p>

<blockquote>
  <p>xampp\phpMyAdmin\libraries\config.default.php</p>
</blockquote>

<p>Look for : <code>$cfg['ExecTimeLimit'] = 600;</code></p>

<p>You can change '600' to any higher value, like '6000'.</p>

<p>Maximum execution time in seconds is (0 for no limit). </p>

<p>This will fix your error.</p>
","13858161"
"Returning JSON from PHP to JavaScript?","220422","","<p>I have a PHP script that's being called through jQuery AJAX. I want the PHP script to return the data in JSON format to the javascript. Here's the pseudo code in the PHP script:</p>

<pre><code>$json = ""{"";
foreach($result as $addr)
{
    foreach($addr as $line)
    {
        $json .= $line . ""\n"";
    }
    $json .= ""\n\n"";
}
$json .= ""}"";
</code></pre>

<p>Basically, I need the results of the two for loops to be inserted in $json.</p>
","<p>Php has an inbuilt JSON Serialising function.</p>

<pre><code>json_encode
</code></pre>

<p><a href=""http://nz.php.net/json_encode"" rel=""noreferrer"">json_encode</a></p>

<p><strong>Please</strong> use that if you can and don't suffer Not Invented Here syndrome.</p>
","682272"
"undefined offset PHP error","220303","","<p>I am receiving the following error in PHP</p>

<pre><code>Notice undefined offset 1: in C:\wamp\www\includes\imdbgrabber.php line 36
</code></pre>

<p>Here is the PHP code that causes it:</p>

<pre><code>&lt;?php

# ...

function get_match($regex, $content)  
{  
    preg_match($regex,$content,$matches);     

    return $matches[1]; // ERROR HAPPENS HERE
}
</code></pre>

<p>What does the error mean?</p>
","<p>If <a href=""http://php.net/preg_match"" rel=""noreferrer""><code>preg_match</code></a> did not find a match, <code>$matches</code> is an empty array. So you should check if <code>preg_match</code> found an match before accessing <code>$matches[0]</code>, for example:</p>

<pre><code>function get_match($regex,$content)
{
    if (preg_match($regex,$content,$matches)) {
        return $matches[0];
    } else {
        return null;
    }
}
</code></pre>
","2508238"
"How to increase the execution timeout in php?","219843","","<p>How to increase transaction timeout? I want to upload videos, but large size of videos not uploaded?</p>

<p>It throws error <code>The process *** exceeded the timeout of 60 seconds.</code></p>
","<p>You need to change some setting in your php.ini :</p>

<pre><code>upload_max_filesize = 2M 
;or whatever size you want

max_execution_time = 60
; also, higher if you must - sets the maximum time in seconds
</code></pre>

<p>Were your PHP.ini is located depends on your environment, more information: <a href=""http://php.net/manual/en/ini.list.php"" rel=""noreferrer"">http://php.net/manual/en/ini.list.php</a></p>
","3829437"
"How to get current PHP page name","219815","","<blockquote>
  <p><strong>Possible Duplicate:</strong> <br/>
  <a href=""https://stackoverflow.com/questions/4221333/get-the-current-script-file-name"">Get the current script file name</a></p>
</blockquote>



<p>I've a file called <code>demo.php</code> where I don't have any GET variables in the URL, so if I want to hide a button if am on this page I can't use something like this:</p>

<pre><code>if($_GET['name'] == 'value') {
  //Hide
} else {
  //show
}
</code></pre>

<p>So I want something like</p>

<pre><code>$filename = //get file name
if($filename == 'file_name.php') {
  //Hide
} else {
  //show
}
</code></pre>

<p>I don't want to declare unnecessary GET variables just for doing this...</p>
","<p>You can use <code>basename()</code> and <code>$_SERVER['PHP_SELF']</code> to get current page file name</p>

<pre><code>echo basename($_SERVER['PHP_SELF']); /* Returns The Current PHP File Name */
</code></pre>
","13032941"
"WAMP Server ERROR ""Forbidden You don't have permission to access /phpmyadmin/ on this server.""","219698","","<p>Hi Friends previously I am using XAMP Server but when I install joomla Templates it creates alots of error. Now I installed the WAMP, but the issues are:
1. I can access with 127.0.0.1, but I cant access with ""localhost"". 
2  When i access phpmyadmin i get this error. </p>

<p>Forbidden You don't have permission to access /phpmyadmin/ on this server.</p>

<pre><code> Alias /phpmyadmin ""c:/wamp/apps/phpmyadmin3.4.5/"" 

# to give access to phpmyadmin from outside 
# replace the lines
#
#        Order Deny,Allow
#   Deny from all
#   Allow from 127.0.0.1
#
# by
#
#        Order Allow,Deny 
#   Allow from all
#
</code></pre>

<blockquote>
  <p>After changing, it will look like this</p>
</blockquote>

<pre><code>&lt;Directory ""c:/wamp/apps/phpmyadmin3.4.5/""&gt;
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
        Order Deny,Allow
        Allow from all
&lt;/Directory&gt;
</code></pre>

<blockquote>
  <p>After this just restart Wamp</p>
</blockquote>
","<p>Go to <code>C:\wamp\alias</code>. Open the file <code>phpmyadmin.conf</code> and change </p>

<pre><code>&lt;Directory ""c:/wamp/apps/phpmyadmin3.5.1/""&gt;
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
        Order Deny,Allow
    Deny from all
    Allow from 127.0.0.1
&lt;/Directory&gt;
</code></pre>

<p>to</p>

<pre><code>&lt;Directory ""c:/wamp/apps/phpmyadmin3.5.1/""&gt;
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
        Order Allow,Deny
    Allow from all
&lt;/Directory&gt;
</code></pre>

<p>problem solved</p>
","14077982"
"How to store values from foreach loop into an array?","219496","","<p>Need to store values from foreach loop into an array, need help doing that. Code below does not work, only stores the last value, tried $items .= ..., but that is not doing the trick either, any help will be appreciated.</p>

<pre><code>&lt;?php
foreach($group_membership as $i =&gt; $username) {
 $items = array($username);
}

print_r($items);
?&gt;
</code></pre>
","<p>Declare the <code>$items</code> array outside the loop and use <code>$items[]</code> to add items to the array: </p>

<pre><code>$items = array();
foreach($group_membership as $username) {
 $items[] = $username;
}

print_r($items);
</code></pre>
","3045647"
"PHP/MySQL insert row then get 'id'","219404","","<p>The 'id' field of my table auto increases when I insert a row. I want to insert a row and then get that ID.</p>

<p>I would do it just as I said it, but is there a way I can do it without worrying about the time between inserting the row and getting the id?</p>

<p>I know I can query the database for the row that matches the information that was entered, but there is a high change there will be duplicates, with the only difference being the id.</p>
","<pre><code>$link = mysqli_connect('127.0.0.1', 'my_user', 'my_pass', 'my_db');
mysqli_query($link, ""INSERT INTO mytable (1, 2, 3, 'blah')"");
$id = mysqli_insert_id($link);
</code></pre>

<p>See <a href=""http://au.php.net/mysqli.insert_id"" rel=""nofollow noreferrer""><code>mysqli_insert_id()</code></a>.</p>

<p>Whatever you do, don't insert and then do a ""<code>SELECT MAX(id) FROM mytable</code>"". Like you say, it's a race condition and there's no need. <code>mysqli_insert_id()</code> already has this functionality.</p>
","897361"
"php var_dump() vs print_r()","219338","","<p>What is the difference between <code>var_dump()</code> and <code>print_r()</code> in terms of spitting out an array as string?</p>
","<p>The <code>var_dump</code> function displays structured information about variables/expressions including its <strong>type</strong> and <strong>value</strong>. Arrays are explored recursively with values indented to show structure. It also shows which array values and object properties are references.</p>

<p>The <code>print_r()</code> displays information about a variable in a way that's readable by humans. array values will be presented in a format that shows <strong>keys</strong> and <strong>elements</strong>. Similar notation is used for objects.</p>

<p><strong>Example:</strong></p>

<pre><code>$obj = (object) array('qualitypoint', 'technologies', 'India');
</code></pre>

<p><code>var_dump($obj)</code> will display below output in the screen.</p>

<pre><code>object(stdClass)#1 (3) {
 [0]=&gt; string(12) ""qualitypoint""
 [1]=&gt; string(12) ""technologies""
 [2]=&gt; string(5) ""India""
}
</code></pre>

<p>And, <code>print_r($obj)</code> will display below output in the screen.</p>

<pre><code>stdClass Object ( 
 [0] =&gt; qualitypoint
 [1] =&gt; technologies
 [2] =&gt; India
)
</code></pre>

<p><strong>More Info</strong></p>

<ul>
<li><a href=""http://php.net/manual/en/function.var-dump.php"" rel=""noreferrer"">var_dump</a></li>
<li><a href=""http://www.php.net/manual/en/function.print-r.php"" rel=""noreferrer"">print_r</a></li>
</ul>
","3406224"
"How to upload images into MySQL database using PHP code","219021","","<p>I am trying to save images in my database from HTML form. I have written PHP code to accomplish this task. The program is not generating any error message, but also not inserting image data in MySQL database. Kindly check it.
Here i am sharing a excerpt from my code.</p>

<pre><code>        /*-------------------
    IMAGE QUERY 
    ---------------*/


    $file   =$_FILES['image']['tmp_name'];
    if(!isset($file))
    {
      echo 'Please select an Image';
    }
    else 
    {
       $image_check = getimagesize($_FILES['image']['tmp_name']);
       if($image_check==false)
       {
        echo 'Not a Valid Image';
       }
       else
       {
        $image = file_get_contents ($_FILES['image']['tmp_name']);
        $image_name = $_FILES['image']['name'];
        if ($image_query = mysql_query (""insert into product_images values (1,'$image_name',$image )""))
        {
          echo $current_id;
         //echo 'Successfull';
        }
        else
        {
          echo mysql_error();
        }
       }
   }
        /*-----------------
    IMAGE QUERY END
    ---------------------*/

    &lt;form action='insert_product.php' method='POST' enctype='multipart/form-data' &gt;&lt;/br&gt;
            File        : &lt;input type='file' name= 'image' &gt;
    &lt;/form&gt;
</code></pre>

<blockquote>
  <p>Error Message
  You have an error in your SQL syntax; check the manual that
  corresponds to your MySQL server version for the right syntax to use
  near '' at line 1</p>
</blockquote>
","<p>Firstly, you should check if your <strong>image column is BLOB type</strong>!</p>

<p>I don't know anything about your SQL table, but if I'll try to make my own as an example.</p>

<p>We got fields <em><code>id</code></em> (int), <em><code>image</code></em> (blob) and <em><code>image_name</code></em> (varchar(64)).</p>

<p>So the code should look like this (assume ID is always '1' and let's use this mysql_query):</p>

<pre><code>$image = addslashes(file_get_contents($_FILES['image']['tmp_name'])); //SQL Injection defence!
$image_name = addslashes($_FILES['image']['name']);
$sql = ""INSERT INTO `product_images` (`id`, `image`, `image_name`) VALUES ('1', '{$image}', '{$image_name}')"";
if (!mysql_query($sql)) { // Error handling
    echo ""Something went wrong! :(""; 
}
</code></pre>

<p>You are doing it wrong in many ways. Don't use mysql functions - they are deprecated! Use <a href=""http://php.net/manual/en/book.pdo.php"">PDO</a> or <a href=""http://php.net/manual/en/book.mysqli.php"">MySQLi</a>. You should also think about storing files locations on disk. Using MySQL for storing images is thought to be Bad Idea™. Handling SQL table with big data like images can be problematic.</p>

<p>Also your HTML form is out of standards. It should look like this:</p>

<pre><code>&lt;form action=""insert_product.php"" method=""POST"" enctype=""multipart/form-data""&gt;
    &lt;label&gt;File: &lt;/label&gt;&lt;input type=""file"" name=""image"" /&gt;
    &lt;input type=""submit"" /&gt;
&lt;/form&gt;
</code></pre>

<hr>

<p>Sidenote:</p>

<p>When dealing with files and storing them as a BLOB, the data must be escaped using <a href=""http://php.net/manual/en/function.mysql-real-escape-string.php""><code>mysql_real_escape_string()</code></a>, otherwise it will result in a syntax error.</p>
","17718807"
"PHP Constants Containing Arrays?","219016","","<p>This failed:</p>

<pre><code> define('DEFAULT_ROLES', array('guy', 'development team'));
</code></pre>

<p>Apparently, constants can't hold arrays. What is the best way to get around this?</p>

<pre><code>define('DEFAULT_ROLES', 'guy|development team');

//...

$default = explode('|', DEFAULT_ROLES);
</code></pre>

<p>This seems like unnecessary effort.</p>
","<p><strong>NOTE: while this is the accepted answer, it's worth noting that in PHP 5.6+ you can have const arrays - <a href=""https://stackoverflow.com/a/27413238/6521"">see Andrea Faulds' answer below</a>.</strong></p>

<p>You can also serialize your array and then put it into the constant:</p>

<pre><code># define constant, serialize array
define (""FRUITS"", serialize (array (""apple"", ""cherry"", ""banana"")));

# use it
$my_fruits = unserialize (FRUITS);
</code></pre>
","1290388"
"How to generate .json file with PHP?","218505","","<pre><code>CREATE TABLE Posts
{
id INT PRIMARY KEY AUTO_INCREMENT,
title VARCHAR(200),
url VARCHAR(200)
}
</code></pre>

<p><strong>json.php code</strong></p>

<pre><code>&lt;?php
$sql=mysql_query(""select * from Posts limit 20"");
echo '{""posts"": [';
while($row=mysql_fetch_array($sql))
{
$title=$row['title'];
$url=$row['url'];
echo '

{

""title"":""'.$title.'"",

""url"":""'.$url.'""

},'; 
}
echo ']}';

?&gt;
</code></pre>

<p>I have to generate <code>results.json</code> file.</p>
","<p>Here is a sample code:</p>

<pre><code>&lt;?php 
$sql=""select * from Posts limit 20""; 

$response = array();
$posts = array();
$result=mysql_query($sql);
while($row=mysql_fetch_array($result)) { 
  $title=$row['title']; 
  $url=$row['url']; 

  $posts[] = array('title'=&gt; $title, 'url'=&gt; $url);
} 

$response['posts'] = $posts;

$fp = fopen('results.json', 'w');
fwrite($fp, json_encode($response));
fclose($fp);


?&gt; 
</code></pre>
","2467974"
"Warning: mysqli_connect(): (HY000/1045): Access denied for user 'username'@'localhost' (using password: YES)","218415","","<blockquote>
  <p>Warning: mysqli_connect(): (HY000/1045): Access denied for user 'username'@'localhost' (using password: YES) in C:\Users\xampp\htdocs\PHP_Login_Script\config.php on line 6</p>
  
  <p>Warning: mysqli_real_escape_string() expects parameter 1 to be mysqli, boolean given in C:\Users\xampp\htdocs\PHP_Login_Script\login.php on line 10</p>
  
  <p>Warning: mysqli_real_escape_string() expects parameter 1 to be mysqli, boolean given in C:\Users\xampp\htdocs\PHP_Login_Script\login.php on line 11</p>
  
  <p>Warning: mysqli_query() expects parameter 1 to be mysqli, boolean given in C:\Users\xampp\htdocs\PHP_Login_Script\login.php on line 15</p>
  
  <p>Warning: mysqli_fetch_array() expects parameter 1 to be mysqli_result, null given in C:\Users\xampp\htdocs\PHP_Login_Script\login.php on line 16</p>
  
  <p>Warning: mysqli_num_rows() expects parameter 1 to be mysqli_result, null given in C:\Users\xampp\htdocs\PHP_Login_Script\login.php on line 19</p>
</blockquote>

<p>I'm getting this error above on localhost even if my config file is like this: </p>

<pre><code>&lt;?php

    define(""DB_HOST"", ""localhost"");
    define(""DB_USER"", ""root"");
    define(""DB_PASSWORD"", """");
    define(""DB_DATABASE"", ""databasename"");

    $db = mysqli_connect(DB_SERVER, DB_USERNAME, DB_PASSWORD, DB_DATABASE);

?&gt;
</code></pre>

<p>This used to work, but now it doesn't anymore. Is there any problem with this code or is it not working now? <a href=""http://www.9lessons.info/2009/09/php-login-page-example.html"" rel=""noreferrer"">This</a> is the tutorial I am working on right now.</p>
","<p>That combination of username, host, and password is not allowed to connect to the server. Verify the permission tables (reloading grants if required) on the server and that you're connecting to the correct server.</p>
","25174218"
"PHP MySQL Order by Two Columns","218061","","<p>How do I sort a MySQL table by two columns?  </p>

<p>What I want are articles sorted by highest ratings first, then most recent date.  As an example, this would be a sample output (left # is the rating, then the article title, then the article date)</p>

<pre>
50 | This article rocks          | Feb 4, 2009
35 | This article is pretty good | Feb 1, 2009
5  | This Article isn't so hot   | Jan 25, 2009
</pre>

<p>The relevant SQL I'm using is:</p>

<pre><code>ORDER BY article_rating, article_time DESC
</code></pre>

<p>I can sort by one or the other, but not both.</p>
","<p>Default sorting is ascending, you need to add the keyword DESC to both your orders:</p>

<pre><code>ORDER BY article_rating DESC, article_time DESC
</code></pre>
","514947"
"How do I print all POST results when a form is submitted?","217095","","<p>I need to see all of the <code>POST</code> results that are submitted to the server for testing.</p>

<p>What would be an example of how I can create a new file to submit to that will echo out all of the fields which were submitted with that form?</p>

<p>It's dynamic, so some fields may have a name/ID of <code>field1, field2, field3</code>, etc.</p>
","<p>All the values are stored in the <code>$_POST</code> collection</p>

<pre><code>&lt;?php print_r($_POST); ?&gt;
</code></pre>

<p>or if you want something fancier that is easier to read use a foreach loop to loop through the <code>$_POST</code> collection and print the values.</p>

<pre><code>&lt;table&gt;
&lt;?php 


    foreach ($_POST as $key =&gt; $value) {
        echo ""&lt;tr&gt;"";
        echo ""&lt;td&gt;"";
        echo $key;
        echo ""&lt;/td&gt;"";
        echo ""&lt;td&gt;"";
        echo $value;
        echo ""&lt;/td&gt;"";
        echo ""&lt;/tr&gt;"";
    }


?&gt;
&lt;/table&gt;
</code></pre>
","9332766"
"deny direct access to a folder and file by htaccess","216591","","<p>Here is the scenario:</p>

<ul>
<li>There is a <code>index.php</code> file in root folder</li>
<li>some files are included in <code>index.php</code> which are in the <code>includes</code> folder.</li>
<li>1 other file (<code>submit.php</code>) is in the root folder for form submit action.</li>
</ul>

<p>I want to restrict direct user access to the files in <code>includes</code> folder by htaccess. also for <code>submit.php</code>. But include will work for <code>index.php</code> file. 
Like, if user types <code>www.domain.com/includes/somepage.php</code>, it will restrict it (may be redirect to a error page).</p>
","<p>I would just move the <code>includes</code> folder out of the web-root, but if you want to block direct access to the whole <code>includes</code> folder, you can put a <code>.htaccess</code> file in that folder that contains just:</p>

<pre><code>deny from all
</code></pre>

<p>That way you cannot open any file from that folder, but you can include them in php without any problems.</p>
","9282193"
"Unzip a file with php","215454","","<p>I want to unzip a file and this works fine</p>

<pre><code>system('unzip File.zip');
</code></pre>

<p>But I need to pass in the file name through the URL and can not get it to work, this is what I have. </p>

<pre><code>$master = $_GET[""master""];
system('unzip $master.zip'); 
</code></pre>

<p>What am I missing? I know it has to be something small and stupid I am overlooking.</p>

<p>Thank you, </p>
","<p>I can only assume your code came from a tutorial somewhere online? In that case, good job trying to figure it out by yourself. On the other hand, the fact that this code could actually be published online somewhere as the correct way to unzip a file is a bit frightening.</p>

<p>PHP has built-in extensions for dealing with compressed files. There should be no need to use <code>system</code> calls for this. <code>ZipArchive</code><a href=""http://php.net/manual/en/class.ziparchive.php""><sup><em>docs</em></sup></a> is one option.</p>

<pre><code>$zip = new ZipArchive;
$res = $zip-&gt;open('file.zip');
if ($res === TRUE) {
  $zip-&gt;extractTo('/myzips/extract_path/');
  $zip-&gt;close();
  echo 'woot!';
} else {
  echo 'doh!';
}
</code></pre>

<p>Also, as others have commented, <code>$HTTP_GET_VARS</code> has been deprecated since version 4.1 ... which was a reeeeeally long time ago. Don't use it. Use the <code>$_GET</code> superglobal instead.</p>

<p>Finally, be very careful about accepting whatever input is passed to a script via a <code>$_GET</code> variable.</p>

<h1>ALWAYS SANITIZE USER INPUT.</h1>

<hr>

<p><strong>UPDATE</strong></p>

<p>As per your comment, the best way to extract the zip file into the same directory in which it resides is to determine the hard path to the file and extract it specifically to that location. So, you could do:</p>

<pre><code>// assuming file.zip is in the same directory as the executing script.
$file = 'file.zip';

// get the absolute path to $file
$path = pathinfo(realpath($file), PATHINFO_DIRNAME);

$zip = new ZipArchive;
$res = $zip-&gt;open($file);
if ($res === TRUE) {
  // extract it to the path we determined above
  $zip-&gt;extractTo($path);
  $zip-&gt;close();
  echo ""WOOT! $file extracted to $path"";
} else {
  echo ""Doh! I couldn't open $file"";
}
</code></pre>
","8889126"
"How can I check if a URL exists via PHP?","215045","","<p>How do I check if a URL exists (not 404) in PHP?</p>
","<p>Here:</p>

<pre><code>$file = 'http://www.domain.com/somefile.jpg';
$file_headers = @get_headers($file);
if(!$file_headers || $file_headers[0] == 'HTTP/1.1 404 Not Found') {
    $exists = false;
}
else {
    $exists = true;
}
</code></pre>

<p>From <a href=""http://www.php.net/manual/en/function.file-exists.php#75064"" rel=""noreferrer"">here</a> and <a href=""http://www.php.net/manual/en/function.file-exists.php#74469"" rel=""noreferrer"">right below</a> the above post, there's a <a href=""http://php.net/manual/en/book.curl.php"" rel=""noreferrer"">curl</a> solution:</p>

<pre><code>function url_exists($url) {
    if (!$fp = curl_init($url)) return false;
    return true;
}
</code></pre>
","2280413"
"How do the PHP equality (== double equals) and identity (=== triple equals) comparison operators differ?","214902","","<p>What is the difference between <code>==</code> and <code>===</code>?</p>

<ul>
<li>How exactly does the loosely <code>==</code> comparison work?</li>
<li>How exactly does the strict <code>===</code> comparison work? </li>
</ul>

<p>What would be some useful examples?</p>
","<h1>Difference between <code>==</code> and <code>===</code></h1>

<p>The difference between the loosely <code>==</code> equal operator and the strict <code>===</code> identical operator is exactly explained in the <a href=""http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison"" rel=""noreferrer"">manual</a>:</p>

<blockquote>
  <p>Comparison Operators</p>

<pre>
┌──────────┬───────────┬───────────────────────────────────────────────────────────┐
│ Example  │ Name      │ Result                                                    │
├──────────┼───────────┼───────────────────────────────────────────────────────────┤
│$a ==  $b │ Equal     │ TRUE if $a is equal to $b after type juggling.            │
│$a === $b │ Identical │ TRUE if $a is equal to $b, and they are of the same type. │
└──────────┴───────────┴───────────────────────────────────────────────────────────┘
</pre>
</blockquote>

<hr />

<h1>Loosely <code>==</code> equal comparison</h1>

<p>If you are using the <code>==</code> operator, or any other comparison operator which uses loosely comparison such as <code>!=</code>, <code>&lt;&gt;</code> or <code>==</code>, you always have to look at the <strong>context</strong> to see what, where and why something gets converted to understand what is going on.</p>

<h3>Converting rules</h3>

<ul>
<li><a href=""http://php.net/manual/en/language.types.boolean.php#language.types.boolean.casting"" rel=""noreferrer"">Converting to boolean</a></li>
<li><a href=""http://php.net/manual/en/language.types.integer.php#language.types.integer.casting"" rel=""noreferrer"">Converting to integer</a></li>
<li><a href=""http://php.net/manual/en/language.types.float.php#language.types.float.casting"" rel=""noreferrer"">Converting to float</a></li>
<li><a href=""http://php.net/manual/en/language.types.string.php#language.types.string.casting"" rel=""noreferrer"">Converting to string</a></li>
<li><a href=""http://php.net/manual/en/language.types.array.php#language.types.array.casting"" rel=""noreferrer"">Converting to array</a></li>
<li><a href=""http://php.net/manual/en/language.types.object.php#language.types.object.casting"" rel=""noreferrer"">Converting to object</a></li>
<li><a href=""http://php.net/manual/en/language.types.resource.php#language.types.resource.casting"" rel=""noreferrer"">Converting to resource</a></li>
<li><a href=""http://php.net/manual/en/language.types.null.php#language.types.null.casting"" rel=""noreferrer"">Converting to NULL</a></li>
</ul>

<h3>Type comparison table</h3>

<p>As reference and example you can see the comparison table in the <a href=""http://php.net/manual/en/types.comparisons.php#types.comparisions-loose"" rel=""noreferrer"">manual</a>:</p>

<blockquote>
  <p>Loose comparisons with <code>==</code></p>

<pre>┌─────────┬───────┬───────┬───────┬───────┬───────┬───────┬───────┬───────┬───────┬─────────┬───────┬───────┐
│         │ TRUE  │ FALSE │   1   │   0   │  -1   │  ""1""  │  ""0""  │ ""-1""  │ NULL  │ array() │ ""php"" │  """"   │
├─────────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼─────────┼───────┼───────┤
│ TRUE    │ TRUE  │ FALSE │ TRUE  │ FALSE │ TRUE  │ TRUE  │ FALSE │ TRUE  │ FALSE │ FALSE   │ TRUE  │ FALSE │
│ FALSE   │ FALSE │ TRUE  │ FALSE │ TRUE  │ FALSE │ FALSE │ TRUE  │ FALSE │ TRUE  │ TRUE    │ FALSE │ TRUE  │
│ 1       │ TRUE  │ FALSE │ TRUE  │ FALSE │ FALSE │ TRUE  │ FALSE │ FALSE │ FALSE │ FALSE   │ FALSE │ FALSE │
│ 0       │ FALSE │ TRUE  │ FALSE │ TRUE  │ FALSE │ FALSE │ TRUE  │ FALSE │ TRUE  │ FALSE   │ TRUE  │ TRUE  │
│ -1      │ TRUE  │ FALSE │ FALSE │ FALSE │ TRUE  │ FALSE │ FALSE │ TRUE  │ FALSE │ FALSE   │ FALSE │ FALSE │
│ ""1""     │ TRUE  │ FALSE │ TRUE  │ FALSE │ FALSE │ TRUE  │ FALSE │ FALSE │ FALSE │ FALSE   │ FALSE │ FALSE │
│ ""0""     │ FALSE │ TRUE  │ FALSE │ TRUE  │ FALSE │ FALSE │ TRUE  │ FALSE │ FALSE │ FALSE   │ FALSE │ FALSE │
│ ""-1""    │ TRUE  │ FALSE │ FALSE │ FALSE │ TRUE  │ FALSE │ FALSE │ TRUE  │ FALSE │ FALSE   │ FALSE │ FALSE │
│ NULL    │ FALSE │ TRUE  │ FALSE │ TRUE  │ FALSE │ FALSE │ FALSE │ FALSE │ TRUE  │ TRUE    │ FALSE │ TRUE  │
│ array() │ FALSE │ TRUE  │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ TRUE  │ TRUE    │ FALSE │ FALSE │
│ ""php""   │ TRUE  │ FALSE │ FALSE │ TRUE  │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE   │ TRUE  │ FALSE │
│ """"      │ FALSE │ TRUE  │ FALSE │ TRUE  │ FALSE │ FALSE │ FALSE │ FALSE │ TRUE  │ FALSE   │ FALSE │ TRUE  │
└─────────┴───────┴───────┴───────┴───────┴───────┴───────┴───────┴───────┴───────┴─────────┴───────┴───────┘
</pre>
</blockquote>

<h1>Strict <code>===</code> identical comparison</h1>

<p>If you are using the <code>===</code> operator, or any other comparison operator which uses strict comparison such as <code>!==</code> or <code>===</code>, then you can always be sure that the types won't <em>magically</em> change, because there will be no converting going on. So with strict comparison the type and value have to be the same, not only the value.</p>

<h3>Type comparison table</h3>

<p>As reference and example you can see the comparison table in the <a href=""http://php.net/manual/en/types.comparisons.php#type.comparisons-strict"" rel=""noreferrer"">manual</a>:</p>

<blockquote>
  <p>Strict comparisons with <code>===</code></p>

<pre>┌─────────┬───────┬───────┬───────┬───────┬───────┬───────┬───────┬───────┬───────┬─────────┬───────┬───────┐
│         │ TRUE  │ FALSE │   1   │   0   │  -1   │  ""1""  │  ""0""  │ ""-1""  │ NULL  │ array() │ ""php"" │  """"   │
├─────────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼─────────┼───────┼───────┤
│ TRUE    │ TRUE  │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE   │ FALSE │ FALSE │
│ FALSE   │ FALSE │ TRUE  │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE   │ FALSE │ FALSE │
│ 1       │ FALSE │ FALSE │ TRUE  │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE   │ FALSE │ FALSE │
│ 0       │ FALSE │ FALSE │ FALSE │ TRUE  │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE   │ FALSE │ FALSE │
│ -1      │ FALSE │ FALSE │ FALSE │ FALSE │ TRUE  │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE   │ FALSE │ FALSE │
│ ""1""     │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ TRUE  │ FALSE │ FALSE │ FALSE │ FALSE   │ FALSE │ FALSE │
│ ""0""     │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ TRUE  │ FALSE │ FALSE │ FALSE   │ FALSE │ FALSE │
│ ""-1""    │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ TRUE  │ FALSE │ FALSE   │ FALSE │ FALSE │
│ NULL    │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ TRUE  │ FALSE   │ FALSE │ FALSE │
│ array() │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ TRUE    │ FALSE │ FALSE │
│ ""php""   │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE   │ TRUE  │ FALSE │
│ """"      │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE │ FALSE   │ FALSE │ TRUE  │
└─────────┴───────┴───────┴───────┴───────┴───────┴───────┴───────┴───────┴───────┴─────────┴───────┴───────┘
</pre>
</blockquote>
","80649"
"nginx error connect to php5-fpm.sock failed (13: Permission denied)","214413","","<p>I update nginx to <strong>1.4.7</strong> and php to <strong>5.5.12</strong>, After that I got the <strong>502 error</strong>. Before I update everything works fine.</p>

<p>nginx-error.log</p>

<pre><code>2014/05/03 13:27:41 [crit] 4202#0: *1 connect() to unix:/var/run/php5-fpm.sock failed (13: Permission denied) while connecting to upstream, client: xx.xxx.xx.xx, server: localhost, request: ""GET / HTTP/1.1"", upstream: ""fastcgi://unix:/var/run/php5-fpm.sock:"", host: ""xx.xx.xx.xx""
</code></pre>

<p>nginx.conf</p>

<pre><code>user  www www;
worker_processes  1;

        location / {
            root   /usr/home/user/public_html;
            index  index.php index.html index.htm;
        }
        location ~ [^/]\.php(/|$) {
            fastcgi_split_path_info ^(.+?\.php)(/.*)$;
            fastcgi_pass unix:/var/run/php5-fpm.sock;
            fastcgi_index index.php;
            fastcgi_param  SCRIPT_FILENAME    /usr/home/user/public_html$fastcgi_script_name;
            include fastcgi_params;
        }
</code></pre>
","<p>I had a similar error after php update. PHP fixed a <a href=""https://bugs.php.net/bug.php?id=67060"" rel=""noreferrer"">security bug</a> where <code>o</code> had <code>rw</code> permission to the socket file.</p>

<ol>
<li>Open <code>/etc/php5/fpm/pool.d/www.conf</code> or <code>/etc/php/7.0/fpm/pool.d/www.conf</code>, depending on your version. </li>
<li><p>Uncomment all permission lines, like:</p>

<pre><code>listen.owner = www-data
listen.group = www-data
listen.mode = 0660
</code></pre></li>
<li><p>Restart fpm - <code>sudo service php5-fpm restart</code> or <code>sudo service php7.0-fpm restart</code></p></li>
</ol>

<p><strong>Note</strong>: if your webserver runs as user other than www-data, you will need to update the <code>www.conf</code> file accordingly</p>
","23487409"
"PHP: How to check if image file exists?","214120","","<p>I need to see if a specific image exists on my cdn.</p>

<p>I've tried the following and it doesn't work:</p>

<pre><code>if (file_exists(http://www.example.com/images/$filename)) {
    echo ""The file exists"";
} else {
    echo ""The file does not exist"";
}
</code></pre>

<p>Even if the image exists or doesn't exist, it always says ""The file exists"". I'm not sure why its not working...</p>
","<p>You need the filename in quotation marks at least (as string):</p>

<pre><code>if (file_exists('http://www.mydomain.com/images/'.$filename)) {
 … }
</code></pre>

<p>Also, make sure <code>$filename</code> is properly validated. And then, it will only work when <a href=""http://php.net/filesystem.configuration#ini.allow-url-fopen"" rel=""noreferrer""><code>allow_url_fopen</code></a> is activated in your PHP config</p>
","7991450"
"How to add a PHP page to WordPress?","214114","","<p>I want to create a custom page for my WordPress blog that will execute my PHP code in it, whilst remaining a part of the overall site CSS/theme/design.</p>

<p>The PHP code will make use of 3rd party APIs (so I need to include other PHP files)</p>

<p>How do I accomplish this?</p>

<p>N.B.  I do not have a specific need to interact with the Wordpress API - apart from including certain other PHP libs I need I have no other dependencies in the PHP code I want to include in a WP page. So obviously any solution that didn't require learning the WP API would be the best one.</p>
","<p>You don't need to interact with the API or use a plugin.</p>

<p>First, duplicate <code>post.php</code> or <code>page.php</code> in your theme folder (under <code>/wp-content/themes/themename/</code>).</p>

<p>Rename the new file as <code>templatename.php</code> (where templatename is what you want to call your new template). To add your new template to the list of available templates, enter the following at the top of the new file:</p>

<pre><code>&lt;?php
/*
Template Name: Name of Template
*/
?&gt;
</code></pre>

<p>You can modify this file (using PHP) to include other files or whatever you need.</p>

<p>Then create a new page in your WordPress blog, and in the page editing screen you'll see a <em>Template</em> dropdown in the <em>Attributes</em> widget to the right. Select your new template and publish the page.</p>

<p>Your new page will use the PHP code defined in <code>templatename.php</code></p>
","2810723"
"PHP Notice: Undefined offset: 1 with array when reading data","212258","","<p>I am getting this PHP error:</p>

<pre><code>PHP Notice:  Undefined offset: 1
</code></pre>

<p>Here is the PHP code that throws it:</p>

<pre><code>$file_handle = fopen($path.""/Summary/data.txt"",""r""); //open text file
$data = array(); // create new array map

while (!feof($file_handle) ) {
    $line_of_text = fgets($file_handle); // read in each line
    $parts = array_map('trim', explode(':', $line_of_text, 2)); 
    // separates line_of_text by ':' trim strings for extra space
    $data[$parts[0]] = $parts[1]; 
    // map the resulting parts into array 
    //$results('NAME_BEFORE_:') = VALUE_AFTER_:
}
</code></pre>

<p>What does this error mean?  What causes this error?</p>
","<p>Change </p>

<pre><code>$data[$parts[0]] = $parts[1];
</code></pre>

<p>to</p>

<pre><code>if ( ! isset($parts[1])) {
   $parts[1] = null;
}

$data[$parts[0]] = $parts[1];
</code></pre>

<p>or simply:</p>

<pre><code>$data[$parts[0]] = isset($parts[1]) ? $parts[1] : null;
</code></pre>

<p>Not every line of your file has a colon in it and therefore explode on it returns an array of size 1.</p>

<p>According to <a href=""http://php.net/manual/en/function.explode.php"" rel=""noreferrer"">php.net possible return values from <strong>explode</strong></a>:</p>

<blockquote>
  <p>Returns an array of strings created by splitting the string parameter on boundaries formed by the delimiter.</p>
  
  <p>If delimiter is an empty string (""""), explode() will return FALSE. If delimiter contains a value that is not contained in string and a negative limit is used, then an empty array will be returned, <strong>otherwise an array containing string will be returned.</strong></p>
</blockquote>
","17456614"
"PHP Warning: Unknown: failed to open stream","211619","","<p>I edited the apache httpd.conf file recently for the mod_rewrite to work. I don't know if this problem originated from that or not, but i'm getting this problem from that day.<br>
This is what I see on the frontend when I run the software -  </p>

<blockquote>
  <p>Server error The website encountered
  an error while retrieving
  <a href=""http://localhost/prestashop/"" rel=""noreferrer"">http://localhost/prestashop/</a>. It may
  be down for maintenance or configured
  incorrectly.</p>
</blockquote>

<p>There is no specific file that triggers this. But I saw that usually small programs that consists of 4-5 php files, runs fine, but softwares with a lot of files(like PrestaShop) don't.<br>
I checked the logs and this is what I found.</p>

<pre><code>[Wed Mar 16 19:33:39 2011] [error] [client ::1] PHP Warning:  Unknown: failed to open stream: Permission denied in Unknown on line 0
[Wed Mar 16 19:33:39 2011] [error] [client ::1] PHP Fatal error:  Unknown: Failed opening required '/var/www/html/yomig/index.php' (include_path='.:/usr/share/pear:/usr/share/php') in Unknown on line 0
[Wed Mar 16 19:33:39 2011] [error] [client ::1] File does not exist: /var/www/html/favicon.ico
[Wed Mar 16 19:33:41 2011] [error] [client ::1] PHP Warning:  Unknown: failed to open stream: Permission denied in Unknown on line 0
[Wed Mar 16 19:33:41 2011] [error] [client ::1] PHP Fatal error:  Unknown: Failed opening required '/var/www/html/yomig/index.php' (include_path='.:/usr/share/pear:/usr/share/php') in Unknown on line 0
</code></pre>
","<p>Experienced the same error, for me it was caused because on my Mac I have changed the DocumentRoot to my users Sites directory.</p>

<p>To fix it, I ran the recursive command to ensure that the Apache service has read permissions.</p>

<pre><code>sudo chmod -R 755 ~/Sites
</code></pre>
","6576362"
"Assigning the return value of new by reference is deprecated","211593","","<p>I've just got an error.</p>

<p>When I try to assign an object like this: </p>

<pre><code>$obj_md = new MDB2();
</code></pre>

<p>The error I get is ""Assigning the return value of new by reference is deprecated"". Actually I've been looking for a solution but the only one I've seen is just turn down the politicy of php.ini (error_reporting). I've tried it too, but it didn't work. </p>

<p>It's so confusing..I hope you could help me. Thanks in advance.</p>
","<p>In PHP5 this idiom is deprecated</p>

<pre><code>$obj_md =&amp; new MDB2();
</code></pre>

<p>You sure you've not missed an ampersand in your sample code? That would generate the warning you state, but it is not required and can be removed.</p>

<p>To see why this idiom was used in PHP4, see <a href=""http://www.php.net/manual/en/oop4.newref.php"" rel=""noreferrer"">this manual page</a>.</p>
","1086559"
"Remove first 4 characters of a string with PHP","211298","","<p>How can I remove the first 4 characters of a string using PHP?</p>
","<p>You could use the <a href=""http://php.net/manual/en/function.substr.php"" rel=""noreferrer""><code>substr</code></a> function to return a substring starting from the 5th character:</p>

<pre><code>$str = ""The quick brown fox jumps over the lazy dog.""
$str2 = substr($str, 4); // ""quick brown fox jumps over the lazy dog.""
</code></pre>
","4286437"
"XAMPP : Couldn't start Apache (Windows 10)","211044","","<p>I'm using XAMPP, and I can start Apache, but, MySQL (PhpMyAdmin) start!</p>

<p>When I start, I get this error;</p>

<pre><code>10:07:49  [Apache]  Error: Apache shutdown unexpectedly.
10:07:49  [Apache]  This may be due to a blocked port, missing dependencies, 
10:07:49  [Apache]  improper privileges, a crash, or a shutdown by another method.
10:07:49  [Apache]  Press the Logs button to view error logs and check
10:07:49  [Apache]  the Windows Event Viewer for more clues
10:07:49  [Apache]  If you need more help, copy and post this
10:07:49  [Apache]  entire log window on the forums
</code></pre>

<p>I search on it, and, change the port of Apache in Config -> Service and Port setting. I have;</p>

<pre><code>Service name : Apache2.4
Main Port : 122
SSL port : 444
</code></pre>

<p>I also uninstall Skype (Windows 8/10/Metro version). Nothing Working. In the httpd.conf I have;</p>

<pre><code>Listen 122
ServerName localhost:122
</code></pre>

<p>I start it via apache_start.bat and get;</p>

<pre><code>(OS 10013)An attempt was made to access a socket in a way forbidden by its access permissions.  : AH00072: make_sock: could not bind to address [::]:445
(OS 10013)An attempt was made to access a socket in a way forbidden by its access permissions.  : AH00072: make_sock: could not bind to address 0.0.0.0:445
AH00451: no listening sockets available, shutting down
AH00015: Unable to open logs
</code></pre>

<p><strong>Please not that all the LOGS files dosen't exsist!</strong>
<strong>Skype is uninstalled.</strong></p>

<p>If you need more informations, please ask me.</p>
","<p><strong>Update : 4th August, 2015 :</strong></p>

<p>If you have done clean installation of Windows 10, you may not have the <strong>Word Wide Web Publishing Service</strong>. In that case, simple WAMP/XAMPP installation should work fine. </p>

<p>If it doesn't, try installing <strong><a href=""http://www.microsoft.com/en-us/download/details.aspx?id=30679"">Visual C++ Redistributable</a></strong> and then re-install WAMP/XAMPP. </p>

<hr>

<p>I was facing a similar problem with WAMP. In Windows 10 TP, the <strong>Word Wide Web Publishing Service</strong> comes pre-installed. This is related to IIS and you can remove it if you don't need it. </p>

<p>This blocks the port <code>80</code> making Apache act weirdly. You can do the following and try again.</p>

<ul>
<li>Go to Start, type in <strong>services.msc</strong> </li>
<li>Scroll down in the Services window to find the <strong>World Wide Web Publishing Service</strong>.</li>
<li>Right click on it and select <strong>Stop</strong>.</li>
</ul>

<p>This should make port <strong>80</strong> free and restarting WAMP/XAMPP should get you up and running!</p>

<p>There are other ways to do fix this. <a href=""http://praveenpuglia.com/make-wamp-work-on-windows-10-technical-preview/"">http://praveenpuglia.com/make-wamp-work-on-windows-10-technical-preview/</a></p>
","29602112"
"How to write html code inside <?php ?>","211024","","<p>I want to create table inside php script .. Is there any way that i could create table inside php script.?</p>

<pre><code>&lt;?php html code to create table ?&gt;
</code></pre>
","<p>You can do like</p>

<p><strong>HTML in PHP :</strong> </p>

<pre><code>&lt;?php
     echo ""&lt;table&gt;"";
     echo ""&lt;tr&gt;"";
     echo ""&lt;td&gt;Name&lt;/td&gt;"";
     echo ""&lt;td&gt;"".$name.""&lt;/td&gt;"";
     echo ""&lt;/tr&gt;"";
     echo ""&lt;/table&gt;"";
?&gt;
</code></pre>

<p>Or You can write like.</p>

<p><strong>PHP in HTML :</strong></p>

<pre><code>&lt;?php /*Do some PHP calculation or something*/ ?&gt;
     &lt;table&gt;
         &lt;tr&gt;
             &lt;td&gt;Name&lt;/td&gt;
             &lt;td&gt;&lt;?php echo $name;?&gt;&lt;/td&gt;
         &lt;/tr&gt;
     &lt;/table&gt;
</code></pre>

<p><br>
<code>&lt;?php /*Do some PHP calculation or something*/ ?&gt;</code>
Means: <br>You can open a PHP tag with <code>&lt;?php</code>, now add your PHP code, then close the tag with <code>?&gt;</code> and then write your html code. When needed to add more PHP, just open another PHP tag with <code>&lt;?php</code>.</p>
","18140338"
"Sort array of objects by object fields","210907","","<p>How can I sort this array of objects by one of its fields, like <code>name</code> or <code>count</code> ?</p>

<pre><code>  Array
(
    [0] =&gt; stdClass Object
        (
            [ID] =&gt; 1
            [name] =&gt; Mary Jane
            [count] =&gt; 420
        )

    [1] =&gt; stdClass Object
        (
            [ID] =&gt; 2
            [name] =&gt; Johnny
            [count] =&gt; 234
        )

    [2] =&gt; stdClass Object
        (
            [ID] =&gt; 3
            [name] =&gt; Kathy
            [count] =&gt; 4354
        )

   ....
</code></pre>
","<p>Use <a href=""http://php.net/manual/en/function.usort.php"" rel=""noreferrer"">usort</a>, here's an example adapted from the manual:</p>

<pre><code>function cmp($a, $b)
{
    return strcmp($a-&gt;name, $b-&gt;name);
}

usort($your_data, ""cmp"");
</code></pre>

<hr>

<p><em>edits imported from comments:</em></p>

<p>If you're sorting the array from inside the class and your sorting function <code>cmp</code> is also defined inside the class, then use this:</p>

<pre><code>usort($your_data, array($this, ""cmp""))
</code></pre>
","4282423"
"How to add new column to MYSQL table","210717","","<p>I am trying to add a new column to my MYSQL table using PHP. I am unsure how to alter my table so that the new column is created. In my assessment table I have </p>

<pre><code>assessmentid | q1 | q2 | q3 | q4 | q5 
</code></pre>

<p>Say I have a page with a textbox and i type q6 in to the textbox and press a button then the table is updated to </p>

<pre><code>assessmentid | q1 | q2 | q3 | q4 | q5 | q6
</code></pre>

<p>Thanks in advance</p>

<pre><code>&lt;?php 
include 'core/init.php';
include 'core/admininit.php';
include 'includes/overall/overall_header.php'; 
adminprotect_page();
include 'includes/adminmenu.php'; 
?&gt;      
&lt;?php

mysql_query(""ALTER TABLE `assessment` ADD newq INT(1) NOT NULL AFTER `q10`"");

?&gt;
&lt;h1&gt;Input Career Name&lt;/h1&gt;

    &lt;form method=""post"" action=""""&gt;

      Career Name
      &lt;input type=""text"" name=""newq"" size=""20""&gt;

     &lt;input type=""submit""
      name=""submit"" value=""Submit""&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>
","<p>your table:</p>

<pre><code>q1 | q2 | q3 | q4 | q5
</code></pre>

<p>you can also do </p>

<pre><code>ALTER TABLE yourtable ADD q6 VARCHAR( 255 ) after q5
</code></pre>
","16113752"
"mysqli_fetch_array() expects parameter 1 to be mysqli_result, boolean given in","210651","","<p>I'm have some trouble checking if an FB User_id already exists in my db (if it doesn't it should then accept user as a new one and else just load the canvas app). I ran it on my hosting server and there was no problem, but on my localhost it gives me the following error:</p>

<pre><code>mysqli_fetch_array() expects parameter 1 to be mysqli_result, boolean given in 
</code></pre>

<p>Here's my code:</p>

<pre><code>&lt;?
$fb_id = $user_profile['id'];
$locale = $user_profile['locale'];

if ($locale == ""nl_NL"") {
    //Checking User Data @ WT-Database
    $check1_task = ""SELECT * FROM `users` WHERE `fb_id` = "" . $fb_id . "" LIMIT 0, 30 "";
    $check1_res = mysqli_query($con, $check1_task);
    $checken2 = mysqli_fetch_array($check1_res);
    print $checken2;
    //If User does not exist @ WT-Database -&gt; insert
    if (!($checken2)) {
        $add = ""INSERT INTO users (fb_id, full_name, first_name, last_name, email) VALUES ('$fb_id', '$full_name', '$first_name', '$last_name', '$email')"";
        mysqli_query($con, $add);
    } 
    //Double-check, User won't be able to load app on failure inserting to database 
    if (!($checken2)) {
        echo ""Excuse us "" . $first_name . "". Something went terribly wrong! Please try again later!"";
        exit;
    } 
} else {
    include ('sorrylocale.html');
    exit;
}
</code></pre>

<p>I've read it has something to do with my query being wrong, but it has worked on my hosting provider so that can't be it!</p>
","<p>That query is failing and returning <code>false</code>. </p>

<p>put this after <code>mysqli_query()</code> to see whats going on.</p>

<pre><code>if (!$check1_res) {
    printf(""Error: %s\n"", mysqli_error($con));
    exit();
}
</code></pre>

<p>for more information:</p>

<p><a href=""http://www.php.net/manual/en/mysqli.error.php"" rel=""nofollow noreferrer"">http://www.php.net/manual/en/mysqli.error.php</a></p>
","15440076"
"How do I get the HTML code of a web page in PHP?","210246","","<p>I want to retrieve the HTML code of a link (web page) in PHP. For example, if the link is </p>

<p><a href=""https://stackoverflow.com/questions/ask"">https://stackoverflow.com/questions/ask</a></p>

<p>then I want the HTML code of the page which is served. I want to retrieve this HTML code and store it in a PHP variable.</p>

<p>How can I do this?</p>
","<p>If your PHP server allows url fopen wrappers then the simplest way is:</p>

<pre><code>$html = file_get_contents('http://stackoverflow.com/questions/ask');
</code></pre>

<p>If you need more control then you should look at the <a href=""http://www.php.net/curl"" rel=""noreferrer"">cURL</a> functions:</p>

<pre><code>$c = curl_init('http://stackoverflow.com/questions/ask');
curl_setopt($c, CURLOPT_RETURNTRANSFER, true);
//curl_setopt(... other options you want...)

$html = curl_exec($c);

if (curl_error($c))
    die(curl_error($c));

// Get the status code
$status = curl_getinfo($c, CURLINFO_HTTP_CODE);

curl_close($c);
</code></pre>
","819195"
"How to use PHP OPCache?","210229","","<p>PHP 5.5 has been released and it features a new code caching module called OPCache, but there doesn't appear to be any documentation for it. </p>

<p>So where is the documentation for it and how do I use OPcache?</p>
","<h1>Installation</h1>

<p>OpCache is compiled by default on PHP5.5+. However it is disabled by default. In order to start using OpCache in PHP5.5+ you will first have to enable it. To do this you would have to do the following.</p>

<p>Add the following line to your <code>php.ini</code>:</p>

<pre><code>zend_extension=/full/path/to/opcache.so (nix)
zend_extension=C:\path\to\php_opcache.dll (win)
</code></pre>

<p>Note that when the path contains spaces you should wrap it in quotes:</p>

<pre><code>zend_extension=""C:\Program Files\PHP5.5\ext\php_opcache.dll""
</code></pre>

<p>Also note that you will have to use the <code><b>zend_</b>extension</code> directive instead of the ""normal"" <code>extension</code> directive because it affects the actual Zend engine (i.e. the thing that runs PHP).</p>

<h1>Usage</h1>

<p>Currently there are four functions which you can use:</p>

<h3><a href=""http://php.net/opcache_get_configuration"" rel=""noreferrer""><code>opcache_get_configuration()</code></a>:</h3>

<p>Returns an array containing the currently used configuration OpCache uses. This includes all ini settings as well as version information and blacklisted files.</p>

<pre><code>var_dump(opcache_get_configuration());
</code></pre>

<h3><a href=""http://php.net/opcache_get_status"" rel=""noreferrer""><code>opcache_get_status()</code></a>:</h3>

<p>This will return an array with information about the current status of the cache. This information will include things like: the state the cache is in (enabled, restarting, full etc), the memory usage, hits, misses and some more useful information. It will also contain the cached scripts.</p>

<pre><code>var_dump(opcache_get_status());
</code></pre>

<h3><a href=""http://php.net/manual/en/function.opcache-reset.php"" rel=""noreferrer""><code>opcache_reset()</code></a>:</h3>

<p>Resets the entire cache. Meaning all possible cached scripts will be parsed again on the next visit.</p>

<pre><code>opcache_reset();
</code></pre>

<h3><a href=""http://php.net/manual/en/function.opcache-invalidate.php"" rel=""noreferrer""><code>opcache_invalidate()</code></a>:</h3>

<p>Invalidates a specific cached script. Meaning the script will be parsed again on the next visit.</p>

<pre><code>opcache_invalidate('/path/to/script/to/invalidate.php', true);
</code></pre>

<h1>Maintenance and reports</h1>

<p>There are some GUI's created to help maintain OpCache and generate useful reports. These tools leverage the above functions.</p>

<p><strong><em>OpCacheGUI</em></strong></p>

<p><sub><em>Disclaimer I am the author of this project</em></sub></p>

<p>Features:</p>

<ul>
<li>OpCache status</li>
<li>OpCache configuration</li>
<li>OpCache statistics</li>
<li>OpCache reset</li>
<li>Cached scripts overview</li>
<li>Cached scripts invalidation</li>
<li>Multilingual</li>
<li>Mobile device support</li>
<li>Shiny graphs</li>
</ul>

<p>Screenshots:</p>

<p><img src=""https://i.imgur.com/Py4YtsC.png"" alt=""status""></p>

<p><img src=""https://i.imgur.com/buzbl8V.png"" alt=""cached-scripts""></p>

<p><img src=""https://i.imgur.com/mEhfhDA.png"" alt=""graphs""></p>

<p><img src=""https://i.imgur.com/Mi3JegX.png"" alt=""mobilr""></p>

<p>URL: <a href=""https://github.com/PeeHaa/OpCacheGUI"" rel=""noreferrer"">https://github.com/PeeHaa/OpCacheGUI</a></p>

<p><strong><em>opcache-status</em></strong></p>

<p>Features:</p>

<ul>
<li>OpCache status</li>
<li>OpCache configuration</li>
<li>OpCache statistics</li>
<li>Cached scripts overview</li>
<li>Single file</li>
</ul>

<p>Screenshot:</p>

<p><img src=""https://i.stack.imgur.com/VneH7.png"" alt=""status""></p>

<p>URL: <a href=""https://github.com/rlerdorf/opcache-status"" rel=""noreferrer"">https://github.com/rlerdorf/opcache-status</a>  </p>

<p><strong><em>opcache-gui</em></strong></p>

<p>Features:</p>

<ul>
<li>OpCache status</li>
<li>OpCache configuration</li>
<li>OpCache statistics</li>
<li>OpCache reset</li>
<li>Cached scripts overview</li>
<li>Cached scripts invalidation</li>
<li>Automatic refresh</li>
</ul>

<p>Screenshot:</p>

<p><img src=""https://i.stack.imgur.com/ZxZch.png"" alt=""opcache-gui-overview""></p>

<p>URL: <a href=""https://github.com/amnuts/opcache-gui"" rel=""noreferrer"">https://github.com/amnuts/opcache-gui</a></p>
","17304671"
"PHP - Move a file into a different folder on the server","210059","","<p>I need to allow users on my website to delete their images off the server after they have uploaded them if they no longer want them. I was previously using the <code>unlink</code> function in PHP but have since been told that this can be quite risky and a security issue. (Previous code below:)</p>

<pre><code>if(unlink($path.'image1.jpg')){ 
     // deleted
}
</code></pre>

<p>Instead i now want to simply move the file into a different folder. This must be able to be done a long time after they have first uploaded the file so any time they log into their account. If i have the main folder which stores the users image(s):</p>

<pre><code>user/
</code></pre>

<p>and then within that a folder called del which is the destination to put their unwanted images:</p>

<pre><code>user/del/
</code></pre>

<p>Is there a command to move a file into a different folder? So that say:</p>

<pre><code>user/image1.jpg
</code></pre>

<p>moves to/becomes</p>

<pre><code>user/del/image1.jpg
</code></pre>
","<p>The <code>rename</code> function does this</p>

<p><a href=""http://php.net/manual/en/function.rename.php"" rel=""noreferrer"">docs rename</a></p>

<p><code>rename('image1.jpg', 'del/image1.jpg');</code></p>

<p>If you want to keep the existing file on the same place you should use <code>copy</code></p>

<p><a href=""http://php.net/copy"" rel=""noreferrer"">docs copy</a></p>

<p><code>copy('image1.jpg', 'del/image1.jpg');</code></p>

<p>If you want to move an uploaded file use the <code>move_uploaded_file</code>, although this is almost the same as <code>rename</code> this function also checks that the given file is a file that was uploaded via the <code>POST</code>, this prevents for example that a local file is moved </p>

<p><a href=""http://www.php.net/manual/en/function.move-uploaded-file.php"" rel=""noreferrer"">docs move_uploaded_file</a></p>

<pre><code>$uploads_dir = '/uploads';
foreach ($_FILES[""pictures""][""error""] as $key =&gt; $error) {
    if ($error == UPLOAD_ERR_OK) {
        $tmp_name = $_FILES[""pictures""][""tmp_name""][$key];
        $name = $_FILES[""pictures""][""name""][$key];
        move_uploaded_file($tmp_name, ""$uploads_dir/$name"");
    }
}
</code></pre>

<p><strong>code snipet from docs</strong></p>
","19139524"
"Checking if form has been submitted - PHP","209732","","<p>What is the best way of checking whether or not a form has been submitted to determine whether I should pass the form's variables to my validation class?</p>

<p>First I thought maybe:</p>

<pre><code>isset($_POST)
</code></pre>

<p>But that will always return true as a superglobal is defined everywhere. I don't want to have to iterate through each element of my form with:</p>

<pre><code>if(isset($_POST['element1']) || isset($_POST['element2']) || isset(...etc
</code></pre>

<p>Whilst writing this question I thought of a much more basic solution, add a hidden field to act as a flag that I can check.</p>

<p><strong>Is there a 'cleaner' way to do it than adding my own flag?</strong></p>
","<p>For general check if there was a <code>POST</code> action use: </p>

<pre><code>if (!empty($_POST))
</code></pre>

<p><strong>EDIT</strong>: As stated in the comments, this method won't work for in some cases (e.g. with check boxes and button without a name). You really should use:</p>

<pre><code>if ($_SERVER['REQUEST_METHOD'] == 'POST')
</code></pre>
","7711513"
"Make XAMPP/Apache serve file outside of htdocs","209697","","<p>Is it possible to configure <a href=""http://www.apachefriends.org/en/xampp.html"" rel=""noreferrer"">xampp</a> to serve up a file outside of the <code>htdocs</code> directory?</p>

<p>For instance, say I have a file located as follows:</p>

<p><code>C:\projects\transitCalculator\trunk\TransitCalculator.php</code></p>

<p>and my <a href=""http://www.apachefriends.org/en/xampp.html"" rel=""noreferrer"">xampp</a> files are normally served out from:</p>

<p><code>C:\xampp\htdocs\</code></p>

<p>(because that's the default configuration) Is there some way to make Apache recognize and serve up my <code>TransitCalculator.php</code> file without moving it under <code>htdocs</code>? Preferably I'd like Apache to serve up/have access to the entire contents of the projects directory, and I don't want to move the projects directory under <code>htdocs</code>.</p>

<p>edit: edited to add Apache to the question title to make Q/A more ""searchable""</p>
","<p>Ok, per <a href=""https://stackoverflow.com/questions/1408/#2471"">pix0r</a>'s, <a href=""https://stackoverflow.com/questions/1408/#1413"">Sparks</a>' and <a href=""https://stackoverflow.com/questions/1408/#1414"">Dave</a>'s answers it looks like there are three ways to do this:</p>

<hr>

<h2><a href=""https://stackoverflow.com/questions/1408/#2471"">Virtual Hosts</a></h2>

<ol>
<li>Open C:\xampp\apache\conf\extra\httpd-vhosts.conf.</li>
<li>Un-comment line 19 (<code>NameVirtualHost *:80</code>).</li>
<li><p>Add your virtual host (~line 36):</p>

<pre><code>&lt;VirtualHost *:80&gt;
    DocumentRoot C:\Projects\transitCalculator\trunk
    ServerName transitcalculator.localhost
    &lt;Directory C:\Projects\transitCalculator\trunk&gt;
        Order allow,deny
        Allow from all
    &lt;/Directory&gt;
&lt;/VirtualHost&gt;
</code></pre></li>
<li><p>Open your hosts file (C:\Windows\System32\drivers\etc\hosts).</p></li>
<li><p>Add</p>

<pre><code>127.0.0.1 transitcalculator.localhost #transitCalculator
</code></pre>

<p>to the end of the file (before the Spybot - Search &amp; Destroy stuff if you have that installed).</p></li>
<li>Save (You might have to save it to the desktop, change the permissions on the old hosts file (right click > properties), and copy the new one into the directory over the old one (or rename the old one) if you are using Vista and have trouble).</li>
<li>Restart Apache.</li>
</ol>

<p>Now you can access that directory by browsing to <a href=""http://transitcalculator.localhost/"" rel=""noreferrer"">http://transitcalculator.localhost/</a>.</p>

<hr>

<h2><a href=""https://stackoverflow.com/questions/1408/#1413"">Make an Alias</a></h2>

<ol>
<li><p>Starting ~line 200 of your <code>http.conf</code> file, copy everything between <code>&lt;Directory ""C:/xampp/htdocs""&gt;</code> and <code>&lt;/Directory&gt;</code> (~line 232) and paste it immediately below with <code>C:/xampp/htdocs</code> replaced with your desired directory (in this case <code>C:/Projects</code>) to give your server the correct permissions for the new directory.</p></li>
<li><p>Find the <code>&lt;IfModule alias_module&gt;&lt;/IfModule&gt;</code> section (~line 300) and add</p>

<pre><code>Alias /transitCalculator ""C:/Projects/transitCalculator/trunk""
</code></pre>

<p>(or whatever is relevant to your desires) below the <code>Alias</code> comment block, inside the module tags.</p></li>
</ol>

<hr>

<h2><a href=""https://stackoverflow.com/questions/1408/#1414"">Change your document root</a></h2>

<ol>
<li><p>Edit ~line 176 in C:\xampp\apache\conf\httpd.conf; change <code>DocumentRoot ""C:/xampp/htdocs""</code> to <code>#DocumentRoot ""C:/Projects""</code> (or whatever you want).</p></li>
<li><p>Edit ~line 203 to match your new location (in this case <code>C:/Projects</code>).</p></li>
</ol>

<hr>

<p><strong>Notes:</strong> </p>

<ul>
<li>You have to use forward slashes ""/"" instead of back slashes ""\"".</li>
<li>Don't include the trailing ""/"" at the end.</li>
<li><em>restart your server</em>.</li>
</ul>
","1421"
"Laravel: Get base url","209453","","<p>Simple question, but the answer seems quite hard to come by. In Codeigniter, I could load the url helper and then simply do</p>

<pre><code>echo base_url();
</code></pre>

<p>to get my site's URL. Is there an equivalent in Laravel?</p>
","<p>You can use the URL facade which lets you do calls to the <a href=""http://laravel.com/api/4.1/Illuminate/Routing/UrlGenerator.html"">URL generator</a></p>

<p>So you can do:</p>

<pre><code>URL::to('/');
</code></pre>

<p>You can also use the application container:</p>

<pre><code>$app-&gt;make('url')-&gt;to('/');
$app['url']-&gt;to('/');
App::make('url')-&gt;to('/');
</code></pre>

<p>Or inject the UrlGenerator:</p>

<pre><code>&lt;?php
namespace Vendor\Your\Class\Namespace;

use Illuminate\Routing\UrlGenerator;

class Classname
{
    protected $url;

    public function __construct(UrlGenerator $url)
    {
        $this-&gt;url = $url;
    }

    public function methodName()
    {
        $this-&gt;url-&gt;to('/');
    }
}
</code></pre>
","23060363"
"base_url() function not working in codeigniter","208300","","<p>I am developing a we application using codeigniter. I am trying to use base_url() function but it shows empty results. I have used autoload helper through autoload file, but then too it doesn't seem to work. Also I had defined base constants but all in vain. Please help.</p>

<pre><code>&lt;html xmlns=""http://www.w3.org/1999/xhtml""&gt;
    &lt;head&gt;
        &lt;title&gt;&lt;?php echo $title; ?&gt;&lt;/title&gt;        
        &lt;meta http-equiv=""Content-Type"" content=""text/html; charset=UTF-8""/&gt;
        &lt;link rel=""stylesheet"" href=""&lt;?php echo base_url();?&gt;/css/template/default.css"" type=""text/css"" /&gt;
        &lt;script type=""text/javascript""&gt;
            //&lt;![CDATA[
            base_url = '&lt;?= base_url();?&gt;';
            //]]&gt;
        &lt;/script&gt;
    &lt;/head&gt;
</code></pre>
","<p>In order to use <code>base_url()</code>, you must first have the URL Helper loaded. This can be done either in <code>application/config/autoload.php</code> (on or around line 67):</p>

<pre><code>$autoload['helper'] = array('url');
</code></pre>

<p>Or, manually:</p>

<pre><code>$this-&gt;load-&gt;helper('url');
</code></pre>

<p>Once it's loaded, be sure to keep in mind that <code>base_url()</code> doesn't implicitly print or echo out anything, rather it returns the value to be printed:</p>

<pre><code>echo base_url();
</code></pre>

<p>Remember also that the value returned is the site's base url as provided in the config file. CodeIgniter will accomodate an empty value in the config file as well:</p>

<blockquote>
  <p><em>If this (base_url) is not set then CodeIgniter will guess the protocol, domain and path to your installation.</em></p>
  
  <p>application/config/config.php, line 13</p>
</blockquote>
","6449396"
"Export MySQL data to Excel in PHP","208033","","<p>I'm trying to get my MySQL data to Excel file, but I'm having problems with Excel cells. All my text goes to one cell, I would like to have each row value in separate Excel cell. Here is my code:</p>

<pre><code>$queryexport = (""
SELECT username,password,fullname FROM ecustomer_users
WHERE fk_customer='"".$fk_customer.""'
"");

$row = mysql_fetch_assoc($queryexport);

$result = mysql_query($queryexport);
$header = '';

for ($i = 0; $i &lt; $count; $i++){
   $header .= mysql_field_name($result, $i).""\t"";
   }

while($row = mysql_fetch_row($result)){
   $line = '';
   foreach($row as $value){
          if(!isset($value) || $value == """"){
                 $value = ""\t"";
          }else{
                 $value = str_replace('""', '""""', $value);
                 $value = '""' . $value . '""' . ""\t"";
                 }
          $line .= $value;
          }
   $data .= trim($line).""\n"";
   $data = str_replace(""\r"", """", $data);

if ($data == """") {
   $data = ""\nno matching records found\n"";
   }
}
header(""Content-type: application/vnd.ms-excel; name='excel'"");
header(""Content-Disposition: attachment; filename=exportfile.xls"");
header(""Pragma: no-cache"");
header(""Expires: 0"");

// output data
echo $header.""\n"".$data;

mysql_close($conn);`
</code></pre>
","<p><em><strong>Just Try With The Following :</em></strong></p>

<p><strong>PHP Part :</strong></p>

<pre><code>&lt;?php
/*******EDIT LINES 3-8*******/
$DB_Server = ""localhost""; //MySQL Server    
$DB_Username = ""username""; //MySQL Username     
$DB_Password = ""password"";             //MySQL Password     
$DB_DBName = ""databasename"";         //MySQL Database Name  
$DB_TBLName = ""tablename""; //MySQL Table Name   
$filename = ""excelfilename"";         //File Name
/*******YOU DO NOT NEED TO EDIT ANYTHING BELOW THIS LINE*******/    
//create MySQL connection   
$sql = ""Select * from $DB_TBLName"";
$Connect = @mysql_connect($DB_Server, $DB_Username, $DB_Password) or die(""Couldn't connect to MySQL:&lt;br&gt;"" . mysql_error() . ""&lt;br&gt;"" . mysql_errno());
//select database   
$Db = @mysql_select_db($DB_DBName, $Connect) or die(""Couldn't select database:&lt;br&gt;"" . mysql_error(). ""&lt;br&gt;"" . mysql_errno());   
//execute query 
$result = @mysql_query($sql,$Connect) or die(""Couldn't execute query:&lt;br&gt;"" . mysql_error(). ""&lt;br&gt;"" . mysql_errno());    
$file_ending = ""xls"";
//header info for browser
header(""Content-Type: application/xls"");    
header(""Content-Disposition: attachment; filename=$filename.xls"");  
header(""Pragma: no-cache""); 
header(""Expires: 0"");
/*******Start of Formatting for Excel*******/   
//define separator (defines columns in excel &amp; tabs in word)
$sep = ""\t""; //tabbed character
//start of printing column names as names of MySQL fields
for ($i = 0; $i &lt; mysql_num_fields($result); $i++) {
echo mysql_field_name($result,$i) . ""\t"";
}
print(""\n"");    
//end of printing column names  
//start while loop to get data
    while($row = mysql_fetch_row($result))
    {
        $schema_insert = """";
        for($j=0; $j&lt;mysql_num_fields($result);$j++)
        {
            if(!isset($row[$j]))
                $schema_insert .= ""NULL"".$sep;
            elseif ($row[$j] != """")
                $schema_insert .= ""$row[$j]"".$sep;
            else
                $schema_insert .= """".$sep;
        }
        $schema_insert = str_replace($sep.""$"", """", $schema_insert);
        $schema_insert = preg_replace(""/\r\n|\n\r|\n|\r/"", "" "", $schema_insert);
        $schema_insert .= ""\t"";
        print(trim($schema_insert));
        print ""\n"";
    }   
?&gt;
</code></pre>

<p>I think this may help you to resolve your problem.</p>
","15700286"
"failed to open stream: No such file or directory in","207982","","<pre><code>&gt;     Warning: include_once(/PoliticalForum/headerSite.php) [function.include-once]: failed to open stream: No such file or
&gt; directory in C:\xampp\htdocs\PoliticalForum\mainHome.php on line 16
&gt; 
&gt; Warning: include_once() [function.include]: Failed opening
&gt; '/PoliticalForum/headerSite.php' for inclusion
&gt; (include_path='.;C:\xampp\php\PEAR') in
&gt; C:\xampp\htdocs\PoliticalForum\mainHome.php on line 16
</code></pre>

<p>Why do I get that Error when I use include_once:</p>

<pre><code>   include_once(""/PoliticalForum/headerSite.php"");
</code></pre>
","<p>It's because you have included a leading <code>/</code> in your file path.  The <code>/</code> makes it start at the top of your filesystem.  Note: <em>filesystem</em> path, not Web site path (you're not accessing it over HTTP). You can use a <em>relative</em> path with <code>include_once</code> (one that doesn't start with a leading <code>/</code>). </p>

<p>You can change it to this:</p>

<pre><code>include_once 'headerSite.php';
</code></pre>

<p>That will look first in the same directory as the file that's including it (i.e. <code>C:\xampp\htdocs\PoliticalForum\</code> in your example. </p>
","7794811"
"Explode PHP string by new line","207706","","<p>Simple, right?  Well, this isn't working :-\</p>

<pre><code>$skuList = explode('\n\r', $_POST['skuList']);
</code></pre>
","<p><strong>Best Practice</strong></p>

<p>As mentioned in the comment to the first answer, the best practice is to use the PHP constant <a href=""http://php.net/manual/en/reserved.constants.php"" rel=""noreferrer"">PHP_EOL</a> which represents the current system's EOL (<em>End Of Line</em>).</p>

<pre><code>$skuList = explode(PHP_EOL, $_POST['skuList']);
</code></pre>

<p>PHP provides a lot of other very <a href=""http://php.net/manual/en/reserved.constants.php"" rel=""noreferrer"">useful constants</a> that you can use to make your code system independent, see <a href=""http://php.net/manual/en/dir.constants.php"" rel=""noreferrer"">this link</a> to find useful and system independent directory constants.</p>

<p><strong>Warning</strong></p>

<p>These constants make your page system independent, but you might run into problems when moving from one system to another when you use the constants with data stored on another system. The new system's constants might be different from the previous system's and the stored data might not work anymore. So completely parse your data before storing it to remove any system dependent parts.</p>

<p><strong>UPDATE</strong></p>

<p>Andreas' comment made me realize that the 'Best Practice' solution I present here does not apply to the described use-case: the server's EOL (PHP) does not have anything to do with the EOL the browser (any OS) is using, but that (the browser) is where the string is coming from.</p>

<p>So please use the solution from @Alin_Purcaru (<a href=""https://stackoverflow.com/a/3997367/1387233"">three down</a>) to cover all your bases (and upvote his answer):</p>

<pre><code>$skuList = preg_split(""/\\r\\n|\\r|\\n/"", $_POST['skuList']);
</code></pre>
","29471912"
"Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in","207671","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/6169146/php-warning-sort-expects-parameter-1-to-be-array-resource-given"">PHP: Warning: sort() expects parameter 1 to be array, resource given </a>  </p>
</blockquote>



<p>Please help,</p>

<p>I get following Error:</p>

<p>Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in......</p>

<p>Here is my Query:</p>

<pre><code>$query = ""SELECT ListNumber FROM residential""; 
$result1 = mysql_query($query); 
    if (mysql_num_rows($result1) &gt;10){ 
        $difference = mysql_num_rows($result1) - 10; 
        $myQuery = ""SELECT * FROM `residential` ORDER BY `id` LIMIT 10,"". $difference; 
        $result2 = mysql_query($myQuery); 
echo $result2;
        $replace =  str_replace("", "","" | "", $result2);
    while ($line = mysql_fetch_array($result2, MYSQL_BOTH))
</code></pre>
","<p>Your query ($myQuery) is failing and therefore not producing a query resource, but instead producing FALSE.</p>

<p>To reveal what your dynamically generated query looks like and reveal the errors, try this:</p>

<pre><code>$result2 = mysql_query($myQuery) or die($myQuery.""&lt;br/&gt;&lt;br/&gt;"".mysql_error());
</code></pre>

<p>The error message will guide you to the solution, which from your comment below is related to using ORDER BY on a field that doesn't exist in the table you're SELECTing from.</p>
","5474103"
"PHP Undefined Index","207585","","<p>This is going to sound really stupid, but I cannot figure out why I am getting this error.</p>

<p>I have created a selection box, named ""query_age"" in my html form:</p>

<pre><code>&lt;form method=""get"" action=""user_list.php""&gt;
&lt;select name=""query_age""&gt;
  &lt;option value=""""&gt;Doesn't matter&lt;/option&gt;
  &lt;option value=""between 18 and 30""&gt;18 - 30&lt;/option&gt;
  &lt;option value=""between 31 and 40""&gt;31 - 40&lt;/option&gt;
  &lt;option value=""between 41 and 50""&gt;41 - 50&lt;/option&gt;
  &lt;option value=""between 51 and 60""&gt;51 - 60&lt;/option&gt;
  &lt;option value=""between 61 and 70""&gt;61 - 70&lt;/option&gt;
  &lt;option value=""between 71 and 80""&gt;71 - 80&lt;/option&gt;
  &lt;option value=""between 81 and 90""&gt;81 - 90&lt;/option&gt;
  &lt;option value=""&gt; 90""&gt;Older than 90&lt;/option&gt;
&lt;/select&gt;
</code></pre>

<p>In the corresponding php form, I have:</p>

<pre><code>$query_age = $_GET['query_age'];
</code></pre>

<p>When I run the page, I get this error:</p>

<blockquote>
  <p>Notice: Undefined index: query_age in index.php on line 19</p>
</blockquote>

<p>I don't understand why this is happening, and I'd love to know how to make it go away.</p>
","<p>I don't see php file, but that could be that -<br>
replace in your php file:</p>

<pre><code>$query_age = $_GET['query_age'];
</code></pre>

<p>with:</p>

<pre><code>$query_age = (isset($_GET['query_age']) ? $_GET['query_age'] : null);
</code></pre>

<p>Most probably, at first time you running your script without <code>?query_age=[something]</code> and <code>$_GET</code> has no key like <code>query_age</code>.</p>
","4842785"
"Force SSL/https using .htaccess and mod_rewrite","207563","","<p>How can I force to SSL/https using .htaccess and mod_rewrite page specific in PHP.</p>
","<p>For Apache, you can use <a href=""http://httpd.apache.org/docs/2.2/mod/mod_ssl.html"" rel=""noreferrer""><code>mod_ssl</code></a> to force SSL with the <a href=""http://httpd.apache.org/docs/2.2/mod/mod_ssl.html#sslrequiressl"" rel=""noreferrer""><code>SSLRequireSSL Directive</code></a>:</p>

<blockquote>
  <p>This directive forbids access unless HTTP over SSL (i.e. HTTPS) is enabled for the current connection. This is very handy inside the SSL-enabled virtual host or directories for defending against configuration errors that expose stuff that should be protected. When this directive is present all requests are denied which are not using SSL.</p>
</blockquote>

<p>This will not do a redirect to https though. To redirect, try the following with <a href=""http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html"" rel=""noreferrer""><code>mod_rewrite</code></a> in your .htaccess file</p>

<pre><code>RewriteEngine On
RewriteCond %{HTTPS} !=on
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
</code></pre>

<p>or any of the various approaches given at</p>

<ul>
<li><a href=""http://www.askapache.com/htaccess/http-https-rewriterule-redirect.html"" rel=""noreferrer"">http://www.askapache.com/htaccess/http-https-rewriterule-redirect.html</a></li>
</ul>

<p>You can also solve this from within PHP in case your provider has disabled .htaccess (which is unlikely since you asked for it, but anyway)</p>

<pre><code>if (!isset($_SERVER['HTTPS']) || $_SERVER['HTTPS'] !== 'on') {
    if(!headers_sent()) {
        header(""Status: 301 Moved Permanently"");
        header(sprintf(
            'Location: https://%s%s',
            $_SERVER['HTTP_HOST'],
            $_SERVER['REQUEST_URI']
        ));
        exit();
    }
}
</code></pre>
","4399158"
"Install php-mcrypt on CentOS 6","207439","","<p>I have been trying to install php-mcrypt for a while now. Everytime I get the ""No package php-mcrypt available."" returned to me. Here's what I've tried:</p>

<pre><code>root@ip-********** [~]# yum install php-mcrypt --enablerepo=centosplus (&lt;- both with and without this)
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
* base: p3plmirror01.prod.phx3.secureserver.net
* centosplus: p3plmirror01.prod.phx3.secureserver.net
* epel: mirrors.solfo.com
* extras: p3plmirror01.prod.phx3.secureserver.net
* updates: p3plmirror01.prod.phx3.secureserver.net
centosplus                                               | 3.5 kB     00:00
centosplus/primary_db                                    | 746 kB     00:00
Setting up Install Process
No package php-mcrypt available.
Error: Nothing to do
</code></pre>

<p>I have made sure to install the EPEL repository. At this point I'm just stumped. I've followed EVERY tutorial I've found online and get the same error.</p>

<p>Notes: <a href=""http://en.wikipedia.org/wiki/Go_Daddy"">Go Daddy</a> <a href=""http://en.wikipedia.org/wiki/Virtual_private_server"">VPS</a>, <a href=""http://en.wikipedia.org/wiki/CentOS"">CentOS</a> 6.4 64-bit, mcrypt installed without a hitch, but no php-mcrypt.</p>
","<p>Just a heads up to anyone else who is interested. I was able to figure it out. It was alot simpler then i thought. Under the WHM manager go to: Home >> Software >> EasyApache (Apache Update) >> There you have two options ""Build Profile"" or ""Customize Based On Profile"". I went Customize to keep my current config then followed the instructions on the page. Eventually there was a place to add and remove php modules. There you will  find ever module under the sun. Just select the one you want and rebuild the profile. It was really that simple.</p>

<p>I hope this helps someone!</p>
","17449520"
"Solution for ""Fatal error: Maximum function nesting level of '100' reached, aborting!"" in PHP","207362","","<p>I have made a function that finds all the URLs within an html file and repeats the same process for each html content linked to the discovered URLs. The function is recursive and can go on endlessly. However, I have put a limit on the recursion by setting a global variable which causes the recursion to stop after 100 recursions.</p>

<p>However, php returns this error:</p>

<blockquote>
  <p>Fatal error: Maximum function nesting level of '100' reached,
  aborting! in
  D:\wamp\www\crawler1\simplehtmldom_1_5\simple_html_dom.php on line
  1355</p>
</blockquote>

<p><img src=""https://i.stack.imgur.com/J6cIy.png"" alt=""ERROR""></p>

<p>I found a solution here: <a href=""https://stackoverflow.com/questions/4293775/increasing-nesting-functions-calls-limit"">Increasing nesting function calls limit</a> but this is not working in my case.</p>

<p><em>I am quoting one of the answers from the link mentioned above. Please do consider it.</em></p>

<blockquote>
  <p>""Do you have Zend, IonCube, or xDebug installed? If so, that is probably where you are getting this error from.</p>
  
  <p>I ran into this a few years ago, and it ended up being Zend putting that limit there, not PHP. Of course removing it will let >you go past the 100 iterations, but you will eventually hit the memory limits.""</p>
</blockquote>

<p>Is there a way to increase the maximum function nesting level in PHP</p>
","<p>A simple solution solved my problem. I just commented this line:</p>

<pre><code>zend_extension = ""d:/wamp/bin/php/php5.3.8/zend_ext/php_xdebug-2.1.2-5.3-vc9.dll
</code></pre>

<p>in my <code>php.ini</code> file. This extension was limiting the stack to <code>100</code> so I disabled it. The recursive function is now working as anticipated.</p>
","8667421"
"How to convert array to a string using methods other than JSON?","207142","","<p>What is a function in PHP used to convert array to string, other than using JSON?</p>

<p>I know there is a function that directly does like JSON. I just don't remember.</p>
","<p><a href=""http://php.net/manual/function.serialize.php""><code>serialize()</code></a> is the function you are looking for.  It will return a string representation of its input array or object in a PHP-specific internal format. The string may be converted back to its original form with <code>unserialize()</code>.</p>

<p>But beware, that not all objects are serializable, or some may be only partially serializable and unable to be completely restored with <code>unserialize()</code>.</p>

<pre><code>$array = array(1,2,3,'foo');
echo serialize($array);

// Prints
a:4:{i:0;i:1;i:1;i:2;i:2;i:3;i:3;s:3:""foo"";}
</code></pre>
","6817156"
"how to check and set max_allowed_packet mysql variable","206853","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/93128/mysql-error-1153-got-a-packet-bigger-than-max-allowed-packet-bytes"">MySQL Error 1153 - Got a packet bigger than ‘max_allowed_packet’ bytes</a>  </p>
</blockquote>



<p>Hi I am getting the error :</p>

<p><code>[1153] Got a packet bigger than 'max_allowed_packet'bytes</code></p>

<p>but I made no changes in my source code and the hosting states that they did not made any change in server settings.</p>

<p>I don't know what happened. But I am trying to find the reason.</p>

<p>so, how to check <code>max_allowed_packet</code> mysql variable by php script?</p>

<p>and is that possible to set it in source code?</p>
","<p><code>max_allowed_packet</code>
is set in mysql config, not on php side</p>

<pre><code>[mysqld]
max_allowed_packet=16M 
</code></pre>

<p>You can see it's curent value in mysql like this:</p>

<pre><code>SHOW VARIABLES LIKE 'max_allowed_packet';
</code></pre>

<p>You can try to change it like this, but it's unlikely this will work on shared hosting:</p>

<pre><code>SET GLOBAL max_allowed_packet=16777216;
</code></pre>

<p>You can read about it here <a href=""http://dev.mysql.com/doc/refman/5.1/en/packet-too-large.html"" rel=""noreferrer"">http://dev.mysql.com/doc/refman/5.1/en/packet-too-large.html</a></p>

<p><strong>EDIT</strong></p>

<p>The [mysqld] is necessary to make the <code>max_allowed_packet</code> working since at least mysql version 5.5. </p>

<p>Recently setup an instance on AWS EC2 with Drupal and Solr Search Engine, which required 32M <code>max_allowed_packet</code>. It you set the value under <code>[mysqld_safe]</code> (which is default settings came with the mysql installation) mode in /etc/my.cnf, it did no work. I did not dig into the problem. But after I change it to <code>[mysqld]</code> and restarted the mysqld, it worked.</p>
","5688506"
"PHP & MySQL: mysqli_num_rows() expects parameter 1 to be mysqli_result, boolean given","206641","","<p>I'm trying to Integrate HTML Purifier <a href=""http://htmlpurifier.org/"" rel=""noreferrer"">http://htmlpurifier.org/</a> to filter my user submitted data but I get the following error below. And I was wondering how can I fix this problem?</p>

<p>I get the following error.</p>

<pre><code>on line 22: mysqli_num_rows() expects parameter 1 to be mysqli_result, boolean given 
</code></pre>

<p>line 22 is. </p>

<pre><code>if (mysqli_num_rows($dbc) == 0) {
</code></pre>

<p>Here is the php code.</p>

<pre><code>if (isset($_POST['submitted'])) { // Handle the form.

    require_once '../../htmlpurifier/library/HTMLPurifier.auto.php';

    $config = HTMLPurifier_Config::createDefault();
    $config-&gt;set('Core.Encoding', 'UTF-8'); // replace with your encoding
    $config-&gt;set('HTML.Doctype', 'XHTML 1.0 Strict'); // replace with your doctype
    $purifier = new HTMLPurifier($config);


    $mysqli = mysqli_connect(""localhost"", ""root"", """", ""sitename"");
    $dbc = mysqli_query($mysqli,""SELECT users.*, profile.*
                                 FROM users 
                                 INNER JOIN contact_info ON contact_info.user_id = users.user_id 
                                 WHERE users.user_id=3"");

    $about_me = mysqli_real_escape_string($mysqli, $purifier-&gt;purify($_POST['about_me']));
    $interests = mysqli_real_escape_string($mysqli, $purifier-&gt;purify($_POST['interests']));



if (mysqli_num_rows($dbc) == 0) {
        $mysqli = mysqli_connect(""localhost"", ""root"", """", ""sitename"");
        $dbc = mysqli_query($mysqli,""INSERT INTO profile (user_id, about_me, interests) 
                                     VALUES ('$user_id', '$about_me', '$interests')"");
}



if ($dbc == TRUE) {
        $dbc = mysqli_query($mysqli,""UPDATE profile 
                                     SET about_me = '$about_me', interests = '$interests' 
                                     WHERE user_id = '$user_id'"");

        echo '&lt;p class=""changes-saved""&gt;Your changes have been saved!&lt;/p&gt;';
}


if (!$dbc) {
        // There was an error...do something about it here...
        print mysqli_error($mysqli);
        return;
}

}
</code></pre>
","<p><code>$dbc</code> is returning false.  Your query has an error in it:</p>

<pre><code>SELECT users.*, profile.* --You do not join with profile anywhere.
                                 FROM users 
                                 INNER JOIN contact_info 
                                 ON contact_info.user_id = users.user_id 
                                 WHERE users.user_id=3"");
</code></pre>

<p>The fix for this in general has been described by Raveren.</p>
","2546363"
"Print newline in PHP in single quotes","206300","","<p>I try to use single quotes as much as possible and I've noticed that I can't use \n in single quotes. I know I can just enter a newline literally by pressing return, but that screws up the indentation of my code.</p>

<p>Is there some ASCII character or something that I can type that will produce newline when I'm using single quotes?</p>
","<p>No, because single-quotes even inhibit hex code replacement.</p>

<pre><code>echo 'Hello, world!' . ""\xA"";
</code></pre>
","2531976"
"Date Difference in php on days?","206052","","<p>Is there a quick way to calculate date difference in php? For example:</p>

<pre><code>$date1 = '2009-11-12 12:09:08';
$date2 = '2009-12-01 08:20:11';
</code></pre>

<p>And then do a calculation, $date2 minus $date1</p>

<p>I read php.net documentation, but no luck. Is there a quick way to do it?</p>
","<p>strtotime will convert your date string to a unix time stamp. (seconds since the unix epoch.</p>

<pre><code>$ts1 = strtotime($date1);
$ts2 = strtotime($date2);

$seconds_diff = $ts2 - $ts1;
</code></pre>
","1940358"
"How can I find where I will be redirected using cURL?","205743","","<p>I'm trying to make curl follow a redirect but I can't quite get it to work right. I have a string that I want to send as a GET param to a server and get the resulting URL.</p>

<p>Example:</p>

<blockquote>
  <p>String = <em>Kobold Vermin</em><br>
  Url = <em>www.wowhead.com/search?q=Kobold+Worker</em></p>
</blockquote>

<p>If you go to that url it will redirect you to ""www.wowhead.com/npc=257"". I want curl to return this URL to my PHP code so that i can extract the ""npc=257"" and use it.</p>

<p>Current code:</p>

<pre><code>function npcID($name) {
    $urltopost = ""http://www.wowhead.com/search?q="" . $name;
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_USERAGENT, ""Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.1) Gecko/20061204 Firefox/2.0.0.1"");
    curl_setopt($ch, CURLOPT_URL, $urltopost);
    curl_setopt($ch, CURLOPT_REFERER, ""http://www.wowhead.com"");
    curl_setopt($ch, CURLOPT_HTTPHEADER, Array(""Content-Type:application/x-www-form-urlencoded""));
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
    return curl_getinfo($ch, CURLINFO_EFFECTIVE_URL);
}
</code></pre>

<p>This however returns <em>www.wowhead.com/search?q=Kobold+Worker</em> and not <em>www.wowhead.com/npc=257</em>.</p>

<p>I suspect PHP is returning before the external redirect happens. How can I fix this?</p>
","<p>To make cURL follow a redirect, use:</p>

<pre><code>curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
</code></pre>

<p>Erm... I don't think you're actually executing the curl... Try:</p>

<p><code>curl_exec($ch);</code></p>

<p>...after setting the options, and before the <code>curl_getinfo()</code> call.</p>

<p>EDIT: If you just want to find out where a page redirects to, I'd use the advice <a href=""http://zzz.rezo.net/HowTo-Expand-Short-URLs.html"" rel=""noreferrer"">here</a>, and just use Curl to grab the headers and extract the Location: header from them:</p>

<pre><code>$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$result = curl_exec($ch);
if (preg_match('~Location: (.*)~i', $result, $match)) {
   $location = trim($match[1]);
}
</code></pre>
","3520085"
"How to save a PNG image server-side, from a base64 data string","205529","","<p>I'm using Nihilogic's ""Canvas2Image"" JavaScript tool to convert canvas drawings to PNG images. 
What I need now is to turn those base64 strings that this tool generates, into actual PNG files on the server, using PHP.</p>

<p>In short, what I'm currently doing is to generate a file on the client side using Canvas2Image, then retrieve the base64-encoded data and send it to the server using AJAX:</p>

<pre><code>// Generate the image file
var image = Canvas2Image.saveAsPNG(canvas, true);   

image.id = ""canvasimage"";
canvas.parentNode.replaceChild(image, canvas);

var url = 'hidden.php',
data = $('#canvasimage').attr('src');

$.ajax({ 
    type: ""POST"", 
    url: url,
    dataType: 'text',
    data: {
        base64data : data
    }
});
</code></pre>

<p>At this point, ""hidden.php"" receives a data block that looks like <strong><em>data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABE...</em></strong></p>

<p>From this point on, I'm pretty much stumped. From what I've read, I believe that I'm supposed to use PHP's <em>imagecreatefromstring</em> function, but I'm not sure how to actually create an actual PNG image from the base64-encoded string and store it on my server.
Please aid!</p>
","<p>You need to extract the base64 image data from that string, decode it and then you can save it to disk, you don't need GD since it already is a png.</p>

<pre><code>$data = 'data:image/png;base64,AAAFBfj42Pj4';

list($type, $data) = explode(';', $data);
list(, $data)      = explode(',', $data);
$data = base64_decode($data);

file_put_contents('/tmp/image.png', $data);
</code></pre>

<p>And as a one-liner:</p>

<pre><code>$data = base64_decode(preg_replace('#^data:image/\w+;base64,#i', '', $data));
</code></pre>

<p>An efficient method for extracting, decoding, and checking for errors is:</p>

<pre><code>if (preg_match('/^data:image\/(\w+);base64,/', $data, $type)) {
    $data = substr($data, strpos($data, ',') + 1);
    $type = strtolower($type[1]); // jpg, png, gif

    if (!in_array($type, [ 'jpg', 'jpeg', 'gif', 'png' ])) {
        throw new \Exception('invalid image type');
    }

    $data = base64_decode($data);

    if ($data === false) {
        throw new \Exception('base64_decode failed');
    }
} else {
    throw new \Exception('did not match data URI with image data');
}

file_put_contents(""img.{$type}"", $data);
</code></pre>
","11511605"
"How to change the session timeout in PHP?","205094","","<p>I would like to extend the session timeout in php</p>

<p>I know that it is possible to do so by modifying the php.ini file.
But I don't have access to it.</p>

<p>So is it possible to do it only with php code?</p>
","<p>Session timeout is a notion that has to be implemented in code if you want strict guarantees; that's <em>the only way</em> you can be absolutely certain that no session ever will survive after X minutes of inactivity.</p>

<p>If relaxing this requirement a little is acceptable and you are fine with placing a <em>lower bound</em> instead of a strict limit to the duration, you can do so easily and without writing custom logic.</p>

<h2>Convenience in relaxed environments: how and why</h2>

<p><strong>If</strong> your sessions are implemented with cookies (which they probably are), and <strong>if</strong> the clients are not malicious, you can set an upper bound on the session duration by tweaking certain parameters. If you are using PHP's default session handling with cookies, setting <a href=""http://www.php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime""><code>session.gc_maxlifetime</code></a> along with <a href=""http://www.php.net/manual/en/function.session-set-cookie-params.php""><code>session_set_cookie_params</code></a> should work for you like this:</p>

<pre><code>// server should keep session data for AT LEAST 1 hour
ini_set('session.gc_maxlifetime', 3600);

// each client should remember their session id for EXACTLY 1 hour
session_set_cookie_params(3600);

session_start(); // ready to go!
</code></pre>

<p>This works by configuring the server to keep session data around for at least one hour of inactivity and instructing your clients that they should ""forget"" their session id after the same time span. <strong>Both of these steps are required to achieve the expected result.</strong></p>

<ul>
<li><p>If you don't tell the clients to forget their session id after an hour (or if the clients are malicious and choose to ignore your instructions) they will keep using the same session id and its effective duration will be non-deterministic. That is because sessions whose lifetime has expired on the server side are not garbage-collected immediately but only <a href=""http://www.php.net/manual/en/session.configuration.php#ini.session.gc-divisor"">whenever the session GC kicks in</a>.</p>

<p>GC is a potentially expensive process, so typically the probability is rather small or even zero (a website getting huge numbers of hits will probably forgo probabilistic GC entirely and schedule it to happen in the background every X minutes). In both cases (assuming non-cooperating clients) the lower bound for effective session lifetimes will be <code>session.gc_maxlifetime</code>, but the upper bound will be unpredictable.</p></li>
<li><p>If you don't set <code>session.gc_maxlifetime</code> to the same time span then the server might discard idle session data earlier than that; in this case, a client that still remembers their session id will present it but the server will find no data associated with that session, effectively behaving as if the session had just started.</p></li>
</ul>

<h2>Certainty in critical environments</h2>

<p>You can make things completely controllable by using custom logic to also place an <em>upper bound</em> on session inactivity; together with the lower bound from above this results in a strict setting.</p>

<p>Do this by saving the upper bound together with the rest of the session data:</p>

<pre><code>session_start(); // ready to go!

$now = time();
if (isset($_SESSION['discard_after']) &amp;&amp; $now &gt; $_SESSION['discard_after']) {
    // this session has worn out its welcome; kill it and start a brand new one
    session_unset();
    session_destroy();
    session_start();
}

// either new or old, it should live at most for another hour
$_SESSION['discard_after'] = $now + 3600;
</code></pre>

<h2>Session id persistence</h2>

<p>So far we have not been concerned at all with the exact values of each session id, only with the requirement that the data should exist as long as we need them to. Be aware that in the (unlikely) case that session ids matter to you, care must be taken to regenerate them with <code>session_regenerate_id</code> when required.</p>
","8311400"
"How to retrieve images from MySQL database and display in an html tag","204795","","<p>I created a MySQL database with a table using phpmyadmin.  I created this table with a BLOB column to hold a jpeg file.</p>

<p>I have issues with regards to the php variable <code>$result</code> here.</p>

<p>My code so far: (catalog.php):</p>

<pre><code>&lt;body&gt;
&lt;?php
  $link = mysql_connect(""localhost"", ""root"", """");
  mysql_select_db(""dvddb"");
  $sql = ""SELECT dvdimage FROM dvd WHERE id=1"";
  $result = mysql_query(""$sql"");
  mysql_close($link);

?&gt;
&lt;img src="""" width=""175"" height=""200"" /&gt;
&lt;/body&gt;
</code></pre>

<p>How can I get the variable $result from PHP into the HTML so I can display it in the <code>&lt;img&gt;</code> tag?</p>
","<p>You can't.  You need to create another php script to return the image data, e.g. getImage.php.  Change catalog.php to:</p>

<pre><code>&lt;body&gt;
&lt;img src=""getImage.php?id=1"" width=""175"" height=""200"" /&gt;
&lt;/body&gt;
</code></pre>

<p>Then getImage.php is</p>

<pre><code>&lt;?php

  $id = $_GET['id'];
  // do some validation here to ensure id is safe

  $link = mysql_connect(""localhost"", ""root"", """");
  mysql_select_db(""dvddb"");
  $sql = ""SELECT dvdimage FROM dvd WHERE id=$id"";
  $result = mysql_query(""$sql"");
  $row = mysql_fetch_assoc($result);
  mysql_close($link);

  header(""Content-type: image/jpeg"");
  echo $row['dvdimage'];
?&gt;
</code></pre>
","7793098"
"How can I call PHP functions by JavaScript?","204704","","<p>I am trying to call a php function from an external php file into the javascript. My code is different and large, so I am writing a sample code here. </p>

<p>This is my php code:</p>

<pre><code>&lt;?php
function add($a,$b){
  $c=$a+$b;
  return $c;
}
function mult($a,$b){
  $c=$a*$b;
  return $c;
}

function divide($a,$b){
  $c=$a/$b;
  return $c;
}
?&gt;
</code></pre>

<p>This is my javascript code:</p>

<pre><code>&lt;script&gt;
  var phpadd= add(1,2); //call the php add function
  var phpmult= mult(1,2); //call the php mult function
  var phpdivide= divide(1,2); //call the php divide function
&lt;/script&gt;
</code></pre>

<p>So this is what I want to do.</p>

<p>My original php file doesn't include these mathematical functions but the idea is same.</p>

<p>If somehow it doesn't have a proper solution, then please suggest me the alternative, but it should call values from external php.</p>
","<p>Yes, you can do ajax request to server with your data in request parameters, like this (very simple):</p>

<p>Note that the following code uses <a href=""http://jquery.com/"">jQuery</a></p>

<pre><code>jQuery.ajax({
    type: ""POST"",
    url: 'your_functions_address.php',
    dataType: 'json',
    data: {functionname: 'add', arguments: [1, 2]},

    success: function (obj, textstatus) {
                  if( !('error' in obj) ) {
                      yourVariable = obj.result;
                  }
                  else {
                      console.log(obj.error);
                  }
            }
});
</code></pre>

<p>and your_functions_address.php like this:</p>

<pre><code>    &lt;?php
    header('Content-Type: application/json');

    $aResult = array();

    if( !isset($_POST['functionname']) ) { $aResult['error'] = 'No function name!'; }

    if( !isset($_POST['arguments']) ) { $aResult['error'] = 'No function arguments!'; }

    if( !isset($aResult['error']) ) {

        switch($_POST['functionname']) {
            case 'add':
               if( !is_array($_POST['arguments']) || (count($_POST['arguments']) &lt; 2) ) {
                   $aResult['error'] = 'Error in arguments!';
               }
               else {
                   $aResult['result'] = add(floatval($_POST['arguments'][0]), floatval($_POST['arguments'][1]));
               }
               break;

            default:
               $aResult['error'] = 'Not found function '.$_POST['functionname'].'!';
               break;
        }

    }

    echo json_encode($aResult);

?&gt;
</code></pre>
","15758129"
"How can I remove 3 characters at the end of a string in php?","204703","","<p>How can I remove 3 characters at the end of a string in php? ""abcabcabc"" would become ""abcabc""!</p>
","<p>Just do:</p>

<pre><code>echo substr($string, 0, -3);
</code></pre>

<p>You don't need to use a <code>strlen</code> call, since, as noted in <a href=""http://us2.php.net/manual/en/function.substr.php"" rel=""noreferrer"">the <code>substr</code> docs</a>:</p>

<blockquote>
  <p>If length is given and is negative, then that many characters will be omitted from the end of string</p>
</blockquote>
","4915787"
"POST Content-Length exceeds the limit","204634","","<p>I get similar errors in my error_log in php when users are uploading their files </p>

<blockquote>
  <p>PHP Warning:  POST Content-Length of 11933650 bytes exceeds the limit of 8388608 bytes in Unknown on line 0</p>
</blockquote>

<p>In my php.ini (created custom ini file in public_html) would this solve this problem, how much would I have to set it to around 1GB? I am going to change my settings to this in php.ini, will it solve the problem?</p>

<pre><code>upload_max_filesize = 1000M ;1GB
post_max_size = 1000M
</code></pre>

<p>What would I set the 'memory_limit' limit to. </p>

<p>Also would this be correct in my script to check file uploaded size is &lt;1GB</p>

<pre><code>if($_FILES[""uploadedfile""][""size""]&lt;1000000)
</code></pre>
","<p>8388608 bytes is 8M, the default limit in PHP. Those changes to php.ini should indeed solve the problem (make sure your restart your Apache server after making them).</p>

<p>Memory limit shouldn't need to be changed here.</p>
","6279945"
"Directory index forbidden by Options directive","204512","","<p>I'm using the dompdf plugin for codeigniter: <a href=""http://codeigniter.com/wiki/PDF_generation_using_dompdf/"">http://codeigniter.com/wiki/PDF_generation_using_dompdf/</a></p>

<p>to generate pdfs from a form. This works on localhost, but on the live server I get this in the error log:</p>

<pre><code>Directory index forbidden by Options directive: /var/www/vhosts/domain.co.uk/httpdocs/mm/userdata/account1/invoices/
</code></pre>

<p>Any idea what this means? I've searched for answers, and found a few that suggest editing the httpd.conf, however I don't have access to this.</p>

<p>I've also tried adding a blank index.html file to the root and document directory (as also suggested elsewhere, but to no avail).</p>

<p>Any help greatly appreciated.</p>

<p>Thanks!</p>
","<p>Either the main <code>httpd.conf</code> or the <code>.htaccess</code> file in this directory or a nearby parent directory probably includes:</p>

<pre><code>Options -Indexes
</code></pre>

<p>Your host may have to set it to <code>+Indexes</code> if you don't have access in <code>.htaccess</code> and want to list &amp; browse the directory contents, absent a default <code>index.html, index.php</code>, etc. If the directory should not have a default file and you don't enable <code>Indexes</code>, you may only directly target the filenames of contents within it.</p>

<p>The <code>Indexes</code> option is commonly disabled by default on many Apache installations.</p>

<p>Full details are available in <a href=""http://httpd.apache.org/docs/current/mod/core.html#options"" rel=""noreferrer"">the Apache core documentation on <code>Options</code></a></p>
","5301794"
"PHP: How to send HTTP response code?","204226","","<p>I have a PHP script that needs to make responses with HTTP response codes (status-codes), like HTTP 200 OK, or some 4XX or 5XX code.</p>

<p>How can I do this in PHP?</p>
","<p>I just found this question and thought it needs a more comprehensive answer:</p>

<p>As of <strong>PHP 5.4</strong> there are three methods to accomplish this:</p>

<h2>Assembling the response code on your own (PHP >= 4.0)</h2>

<p>The <a href=""http://php.net/header"" rel=""noreferrer""><code>header()</code></a> function has a special use-case that detects a HTTP response line and lets you replace that with a custom one</p>

<pre><code>header(""HTTP/1.1 200 OK"");
</code></pre>

<p>However, this requires special treatment for (Fast)CGI PHP:</p>

<pre><code>$sapi_type = php_sapi_name();
if (substr($sapi_type, 0, 3) == 'cgi')
    header(""Status: 404 Not Found"");
else
    header(""HTTP/1.1 404 Not Found"");
</code></pre>

<p><strong>Note:</strong> According to the <a href=""http://www.w3.org/Protocols/rfc2616/rfc2616-sec6.html#sec6"" rel=""noreferrer"">HTTP RFC</a>, the <em>reason phrase</em> can be any custom string (that conforms to the standard), but for the sake of client compatibility I <em>do not</em> recommend putting a random string there.</p>

<p><strong>Note:</strong> <a href=""http://php.net/php-sapi-name"" rel=""noreferrer""><code>php_sapi_name()</code></a> requires <strong>PHP 4.0.1</strong></p>

<h2>3rd argument to header function (PHP >= 4.3)</h2>

<p>There are obviously a few problems when using that first variant. The biggest of which I think is that it is partly parsed by PHP or the web server and poorly documented.</p>

<p>Since 4.3, the <code>header</code> function has a 3rd argument that lets you set the response code somewhat comfortably, but using it requires the first argument to be a non-empty string. Here are two options:</p>

<pre><code>header(':', true, 404);
header('X-PHP-Response-Code: 404', true, 404);
</code></pre>

<p><strong>I recommend the 2nd one</strong>. The first <em>does</em> work on all browsers I have tested, but some minor browsers or web crawlers may have a problem with a header line that only contains a colon. The header field name in the 2nd. variant is of course not standardized in any way and could be modified, I just chose a hopefully descriptive name.</p>

<h2>http_response_code function (PHP >= 5.4)</h2>

<p>The <a href=""http://php.net/http-response-code"" rel=""noreferrer""><code>http_response_code()</code></a> function was introduced in PHP 5.4, and it made things <strong>a lot</strong> easier.</p>

<pre><code>http_response_code(404);
</code></pre>

<p>That's all.</p>

<h2>Compatibility</h2>

<p>Here is a function that I have cooked up when I needed compatibility below 5.4 but wanted the functionality of the ""new"" <code>http_response_code</code> function. I believe PHP 4.3 is more than enough backwards compatibility, but you never know...</p>

<pre><code>// For 4.3.0 &lt;= PHP &lt;= 5.4.0
if (!function_exists('http_response_code'))
{
    function http_response_code($newcode = NULL)
    {
        static $code = 200;
        if($newcode !== NULL)
        {
            header('X-PHP-Response-Code: '.$newcode, true, $newcode);
            if(!headers_sent())
                $code = $newcode;
        }       
        return $code;
    }
}
</code></pre>
","12018482"
"Laravel requires the Mcrypt PHP extension","204098","","<p>I am trying to use the <code>migrate</code> function in <code>Laravel 4</code> on <code>OSX</code>. However, I am getting the following error:</p>

<pre><code>Laravel requires the Mcrypt PHP extension.
</code></pre>

<p>As far as I understand, it's already enabled (see the image below).</p>

<p>What is wrong, and how can I fix it?</p>

<p><img src=""https://i.stack.imgur.com/ezq8a.png"" alt=""enter image description here""></p>
","<p>The web enabled extensions and command line enabled extensions can differ. Run <code>php -m</code> in your terminal and check to see if <code>mcrypt</code> is listed. If it's not then check where the command line is loading your <code>php.ini</code> file from by running <code>php --ini</code> from your terminal.</p>

<p>In this <code>php.ini</code> file you can enable the extension.</p>

<h2>OSX</h2>

<p>I have heard of people on OSX running in to problems due to the terminal pointing to the native PHP shipped with OSX. You should instead update your bash profile to include the actual path to your PHP. Something like this (I don't actually use OSX so this might not be 100%):</p>

<pre><code>export PATH=/usr/local/php5/bin:$PATH
</code></pre>

<h2>Ubuntu</h2>

<p>On earlier versions of Ubuntu (prior to 14.04) when you run <code>sudo apt-get install php5-mcrypt</code> it doesn't actually install the extension into the <code>mods-available</code>. You'll need to symlink it.</p>

<pre><code>sudo ln -s /etc/php5/conf.d/mcrypt.ini /etc/php5/mods-available/mcrypt.ini
</code></pre>

<p>On all Ubuntu versions you'll need to enable the mod once it's installed. You can do that with <code>php5enmod</code>.</p>

<pre><code>sudo php5enmod mcrypt
sudo service apache2 restart
</code></pre>

<blockquote>
  <p>NOTES </p>
  
  <ul>
  <li>PHP 7.1 deprecated mcrypt and 7.2 has <a href=""https://wiki.php.net/rfc/mcrypt-viking-funeral"" rel=""noreferrer"">removed the mcrypt extension entirely</a></li>
  <li>Laravel 5.1 and later <a href=""https://github.com/laravel/framework/issues/9020"" rel=""noreferrer"">removed the need for mcrypt</a></li>
  </ul>
</blockquote>
","16832214"
"How to get WordPress post featured image url","203772","","<p>I am using a this function to get the featured images</p>

<pre><code>&lt;a href=""#"" rel=""prettyPhoto""&gt;
&lt;?php the_post_thumbnail('thumbnail'); ?&gt;
&lt;/a&gt;
</code></pre>

<p>now i want to get the full featured image on click on anchor tag for which i need a featured image url in </p>

<pre><code>&lt;a href=""here"" rel=""prettyPhoto""&gt;
</code></pre>

<p>please help</p>
","<p>Check the code below and let me know if it works for you.</p>

<pre><code>&lt;?php if (has_post_thumbnail( $post-&gt;ID ) ): ?&gt;
  &lt;?php $image = wp_get_attachment_image_src( get_post_thumbnail_id( $post-&gt;ID ), 'single-post-thumbnail' ); ?&gt;
  &lt;div id=""custom-bg"" style=""background-image: url('&lt;?php echo $image[0]; ?&gt;')""&gt;

  &lt;/div&gt;
&lt;?php endif; ?&gt;
</code></pre>
","11261947"
"Only variable references should be returned by reference - Codeigniter","203350","","<p>After the server PHP upgrade I am getting the following error with PHP Version 5.6.2 on Apache 2.0</p>

<pre><code>A PHP Error was encountered
Severity: Notice
Message: Only variable references should be returned by reference
Filename: core/Common.php
Line Number: 257
</code></pre>

<p>How can I fix this?</p>
","<p>Edit filename: core/Common.php, line number: 257</p>

<p>Before</p>

<pre><code>return $_config[0] =&amp; $config; 
</code></pre>

<p>After</p>

<pre><code>$_config[0] =&amp; $config;
return $_config[0]; 
</code></pre>

<h1>Update</h1>

<p>Added by NikiC</p>

<p>In PHP assignment expressions always return the assigned value. So $_config[0] =&amp; $config returns $config - but not the variable itself, but a copy of its value. And returning a reference to a temporary value wouldn't be particularly useful (changing it wouldn't do anything).</p>

<h2>Update</h2>

<p>This fix has been merged into CI 2.2.1 (<a href=""https://github.com/bcit-ci/CodeIgniter/commit/69b02d0f0bc46e914bed1604cfbd9bf74286b2e3"" rel=""noreferrer"">https://github.com/bcit-ci/CodeIgniter/commit/69b02d0f0bc46e914bed1604cfbd9bf74286b2e3</a>). It's better to upgrade rather than modifying core framework files.</p>
","28348880"
"CodeIgniter: Unable to connect to your database server using the provided settings Error Message","203338","","<p>I have been using CI just fine using the MySQL driver. I want to use the MySQL driver instead, but as soon as I change it (just add the ‘i’ at the end of MySQL, and added the port number) I get the following error message</p>

<blockquote>
  <p>A Database Error Occurred</p>
  
  <p>Unable to connect to your database server using the provided settings.</p>
  
  <p>Filename: core/Loader.php</p>
  
  <p>Line Number: 232 </p>
</blockquote>

<p>my setting look like this:</p>

<pre><code>$db['default']['hostname'] = $hostname;
$db['default']['username'] = $username;
$db['default']['password'] = $password;
$db['default']['database'] = $database;
$db['default']['dbdriver'] = 'mysqli';
$db['default']['port']     = ""3306"";  
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 

where
$hostname = 'localhost';
$username = 'myusernamegoeshere';
$password = 'mypasswordgoeshere';
$database = 'mydatabasenamegoeshere'; 
</code></pre>

<p>I'm Using:</p>

<blockquote>
  <p>CI 2.0.2 php 5.3.4 Apache/2.2.17 (Unix) mysql 5.5.13 mysql.default_port 3306</p>
</blockquote>

<p>Am I doing anything wrong?</p>

<p>Thank you,</p>
","<p>For me the issue was in the php.ini file. The property mysql.default_socket was pointing to file in a non-existent directory. The property was pointing to <code>/var/mysql/mysql.sock</code> but in OSX, the file was located in <code>/tmp/mysql.sock</code>.</p>

<p>Once I updated the entry in php.ini and restarted the webserver, the issue was resolved.</p>
","11043416"
"PHP - Get key name of array value","202838","","<p>I have an array as the following:</p>

<pre><code>function example() {
    /* some stuff here that pushes items with
        dynamically created key strings into an array */

    return array( // now lets pretend it returns the created array
        'firstStringName' =&gt; $whatEver,
        'secondStringName' =&gt; $somethingElse
    );
}

$arr = example();

// now I know that $arr contains $arr['firstStringName'];
</code></pre>

<p>I need to find out the index of <code>$arr['firstStringName']</code> so that I am able to loop through <code>array_keys($arr)</code> and return the key string <code>'firstStringName'</code> by its index. How can I do that?</p>
","<p>If you have a value and want to find the key, use <a href=""http://php.net/manual/en/function.array-search.php"" rel=""noreferrer""><code>array_search()</code></a> like this:</p>

<pre><code>$arr = array ('first' =&gt; 'a', 'second' =&gt; 'b', );
$key = array_search ('a', $arr);
</code></pre>

<p><code>$key</code> will now contain the key for value <code>'a'</code> (that is, <code>'first'</code>).</p>
","8729491"
"What is .tpl files? php, web design","201586","","<p>A man wants me to redesign a site run in PHP (VideoCMS). But when I asked him to send me the source he has given me *.tpl files instead of *.php. There is some code inside them:</p>

<pre><code>{include file='header.tpl' p=""article""} 

&lt;br /&gt;
&lt;table width=""886"" border=""0"" cellspacing=""0"" cellpadding=""0""&gt;
  &lt;tr&gt;
    &lt;td width=""150"" valign=""top""&gt;
    &lt;div id=""reg_box""&gt;
    &lt;h3 class=""captions""&gt;{$lang.articles}&lt;/h3&gt;
        &lt;div id=""list_cats""&gt;
        &lt;ul&gt;
            {$article_categories}
        &lt;/ul&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;br /&gt;
    &lt;div id=""reg_box""&gt;
    &lt;h3 class=""captions""&gt;{$lang.members}&lt;/h3&gt;
    {if $logged_in == '1'}
    {include file='loggedin_body.tpl'} 
    {else}
    {include file='login_body.tpl'} 
    {/if}
</code></pre>

<p>or</p>

<pre><code>{include file='header.tpl' p=""index""} 

{php} $_SESSION['isFair'] = ""Yes""; {/php}
</code></pre>

<p>Question: what's the interpreter of the code? How to redesign this site?</p>
","<p>That looks like Smarty to me. Smarty is a template parser written in PHP.</p>

<p>You can read up on how to use <a href=""http://www.smarty.net"" rel=""noreferrer"">Smarty</a> in the <a href=""http://www.smarty.net/manual/en/smarty.for.designers.php"" rel=""noreferrer"">documentation</a>.</p>

<p><strong>If you can't get access to the CMS's source:</strong> To view the templates in your browser, just look at what variables Smarty is using and create a PHP file that populates the used variables with dummy data.</p>

<p>If I remember correctly, once Smarty is set up, you can use:</p>

<pre><code>$smarty-&gt;assign('nameofvar', 'some data');
</code></pre>

<p>to set the variables.</p>
","1808321"
"Changing upload_max_filesize on PHP","201568","","<p>I'm using PHP 5.3.0 and have encountered something that might be a bug (in which case I'll report it) or might be me - so I'm asking to make sure.</p>

<p>When running this code:</p>

<pre><code>&lt;?php
ini_set('upload_max_filesize', '10M');
echo ini_get('upload_max_filesize'), "", "" , ini_get('post_max_size')
</code></pre>

<p>I end up with:</p>

<pre><code>2M, 8M
</code></pre>

<p>This is despite my php.ini setting these higher:</p>

<pre><code>upload_max_filesize = 10M
post_max_size = 10M
</code></pre>

<p>(occuring only once)</p>

<p>Because the error occurs after setting the value as well as it being set in php.ini I'm inclined to think it's a bug. Can anyone confirm or point me where I'm going wrong?</p>

<p><strong>Update</strong>: Looks like restarting Apache fixed this - I always thought it didn't need to be restarted if you changed php.ini.</p>
","<p>You can't use <a href=""http://www.php.net/manual/en/faq.using.php#faq.using.shorthandbytes"" rel=""noreferrer"">shorthand notation</a> to set configuration values outside of PHP.ini. I assume it's falling back to 2MB as the compiled default when confronted with a bad value.</p>

<p>On the other hand, I don't think <code>upload_max_filesize</code> could be set using <code>ini_set()</code>. The <a href=""http://www.php.net/manual/en/ini.list.php"" rel=""noreferrer"">""official"" list</a> states that it is <code>PHP_INI_PERDIR</code> .</p>
","1122443"
"PHP, get file name without file extension","201497","","<p>I have this PHP code:</p>

<pre><code>function ShowFileExtension($filepath)
{
    preg_match('/[^?]*/', $filepath, $matches);
    $string = $matches[0];

    $pattern = preg_split('/\./', $string, -1, PREG_SPLIT_OFFSET_CAPTURE);

    if(count($pattern) &gt; 1)
    {
        $filenamepart = $pattern[count($pattern)-1][0];
        preg_match('/[^?]*/', $filenamepart, $matches);
        return strtolower($matches[0]);
    }
}
</code></pre>

<p>If I have a file named <code>my.zip</code>, this function returns <code>.zip</code>.</p>

<p>I want to do the reverse, I want the function to return <code>my</code> without the extension.</p>

<p>The file is just a string in a variable.</p>
","<p>No need for all that. Check out <a href=""http://de.php.net/manual/en/function.pathinfo.php"" rel=""noreferrer""><strong>pathinfo()</strong></a>, it gives you all the components of your path.</p>

<p>Example from the manual:</p>

<pre><code>$path_parts = pathinfo('/www/htdocs/index.html');

echo $path_parts['dirname'], ""\n"";
echo $path_parts['basename'], ""\n"";
echo $path_parts['extension'], ""\n"";
echo $path_parts['filename'], ""\n""; // filename is only since PHP 5.2.0
</code></pre>

<p>Output of the code:</p>

<pre><code>/www/htdocs
index.html
html
index
</code></pre>

<p>And alternatively you can get only certain parts like:</p>

<pre><code>echo pathinfo('/www/htdocs/index.html', PATHINFO_EXTENSION); // outputs html
</code></pre>
","2183512"
"Strtotime() doesn't work with dd/mm/YYYY format","200910","","<p>I really like the <code>strtotime()</code> function, but the user manual doesn't give a complete description of the supported date formats. <code>strtotime('dd/mm/YYYY')</code> doesn't work, it works only with <code>mm/dd/YYYY</code> format.</p>

<p>If I have date in <code>dd/mm/YYYY</code> format, how can I convert it to <code>YYYY-mm-dd</code>?
I can do it by using <code>explode()</code> function, but I think there are better solutions.</p>
","<p>Here is the simplified solution:</p>

<pre><code>$date = '25/05/2010';
$date = str_replace('/', '-', $date);
echo date('Y-m-d', strtotime($date));
</code></pre>

<p><strong>Result:</strong></p>

<pre><code>2010-05-25
</code></pre>

<p><a href=""http://php.net/manual/en/function.strtotime.php"" rel=""noreferrer"">The <code>strtotime</code> documentation</a> reads:</p>

<blockquote>
  <p>Dates in the <strong><em>m/d/y</em></strong> or <strong><em>d-m-y</em></strong> formats are disambiguated by looking at the separator between the various components: if the separator is a slash (<strong>/</strong>), then the American <strong><em>m/d/y</em></strong> is assumed; whereas if the separator is a dash (<strong>-</strong>) or a dot (<strong>.</strong>), then the European <strong><em>d-m-y</em></strong> format is assumed.</p>
</blockquote>
","2891949"
"Default value in Doctrine","200680","","<p>How do I set a default value in Doctrine 2?</p>
","<p>Database default values are not ""portably"" supported. The only way to use database default values is through the <code>columnDefinition</code> mapping attribute where you specify the <code>SQL</code> snippet (<code>DEFAULT</code> cause inclusive) for the column the field is mapped to.</p>

<p>You can use:</p>

<pre class=""lang-php prettyprint-override""><code>&lt;?php
/**
 * @Entity
 */
class myEntity {
    /**
     * @var string
     *
     * @Column(name=""myColumn"", type=""string"", length=""50"")
     */
    private $myColumn = 'myDefaultValue';
    ...
}
</code></pre>

<p>PHP-level default values are preferred as these are also properly available on newly created and persisted objects (Doctrine will not go back to the database after persisting a new object to get the default values).</p>
","3379560"
"Can't use method return value in write context","200406","","<p>I would think the following piece of code should work, but it doesn't <strong>(Edited: Now works in PHP 5.5+)</strong>:</p>

<pre><code>if (!empty($r-&gt;getError()))
</code></pre>

<p>Where <code>getError()</code> is simply:</p>

<pre><code>public function getError()
{
    return $this-&gt;error;
}
</code></pre>

<p>Yet I end up with this error:</p>

<blockquote>
  <p>can't use method return value in write context</p>
</blockquote>

<p>What does this mean? Isn't this just a read?</p>
","<p><code>empty()</code> needs to access the value by reference (in order to check whether that reference points to something that exists), and PHP before 5.5 didn't support references to temporary values returned from functions.</p>

<p>However, the real problem you have is that you use <code>empty()</code> at all, mistakenly believing that ""empty"" value is any different from ""false"".</p>

<p>Empty is just an alias for <code>!isset($thing) || !$thing</code>. When the thing you're checking always exists (in PHP results of function calls always exist), the <code>empty()</code> function is <em>nothing but a negation operator</em>.</p>

<p>PHP <strong>doesn't have concept of emptyness</strong>. Values that evaluate to false are empty, values that evaluate to true are non-empty. It's the same thing. This code:</p>

<pre><code>$x = something();
if (empty($x)) …
</code></pre>

<p>and this:</p>

<pre><code>$x = something();
if (!$x) …
</code></pre>

<p>has <strong>always the same result, in all cases, for all datatypes</strong> (because <code>$x</code> is defined <code>empty()</code> is redundant).</p>

<p>Return value from the method always exists (even if you don't have <code>return</code> statement, return value exists and contains <code>null</code>). Therefore:</p>

<pre><code>if (!empty($r-&gt;getError()))
</code></pre>

<p>is logically equivalent to:</p>

<pre><code>if ($r-&gt;getError())
</code></pre>
","4328049"
"jQuery AJAX file upload PHP","199973","","<p>I want to implement a simple file upload in my intranet-page, with the smallest setup possible.</p>

<p>This is my HTML part:</p>

<pre><code>&lt;input id=""sortpicture"" type=""file"" name=""sortpic"" /&gt;
&lt;button id=""upload""&gt;Upload&lt;/button&gt;
</code></pre>

<p>and this is my JS jquery script:</p>

<pre><code>$(""#upload"").on(""click"", function() {
    var file_data = $(""#sortpicture"").prop(""files"")[0];   
    var form_data = new FormData();
    form_data.append(""file"", file_data);
    alert(form_data);
    $.ajax({
        url: ""/uploads"",
        dataType: 'script',
        cache: false,
        contentType: false,
        processData: false,
        data: form_data,                         
        type: 'post',
        success: function(){
            alert(""works""); 
        }
    });
});
</code></pre>

<p>There is a folder named ""uploads"" in the root directory of the website, with change permissions for ""users"" and ""IIS_users"".</p>

<p>When I select a file with the file-form and press the upload button, the first alert returns ""[object FormData]"". the second alert doesn't get called and the""uploads"" folder is empty too!?</p>

<p>Can someone help my finding out whats wrong?</p>

<p>Also the next step should be, to rename the file with a server side generated name. Maybe someone can give me a solution for this, too.</p>
","<p>You need a script that runs on the server to move the file to the uploads directory. The jQuery <code>ajax</code> method (running in the browser) sends the form data to the server, then a script on the server handles the upload. Here's an example using PHP.</p>

<p>Your HTML is fine, but update your JS jQuery script to look like this:</p>

<pre><code>$('#upload').on('click', function() {
    var file_data = $('#sortpicture').prop('files')[0];   
    var form_data = new FormData();                  
    form_data.append('file', file_data);
    alert(form_data);                             
    $.ajax({
                url: 'upload.php', // point to server-side PHP script 
                dataType: 'text',  // what to expect back from the PHP script, if anything
                cache: false,
                contentType: false,
                processData: false,
                data: form_data,                         
                type: 'post',
                success: function(php_script_response){
                    alert(php_script_response); // display response from the PHP script, if any
                }
     });
});
</code></pre>

<p>And now for the server-side script, using PHP in this case.</p>

<p><em>upload.php</em>: a PHP script that runs on the server and directs the file to the uploads directory:</p>

<pre><code>&lt;?php

    if ( 0 &lt; $_FILES['file']['error'] ) {
        echo 'Error: ' . $_FILES['file']['error'] . '&lt;br&gt;';
    }
    else {
        move_uploaded_file($_FILES['file']['tmp_name'], 'uploads/' . $_FILES['file']['name']);
    }

?&gt;
</code></pre>

<hr>

<p>Also, a couple things about the destination directory: </p>

<ol>
<li>Make sure you have the <em>correct server path</em>, i.e., starting at the PHP script location what is the path to the uploads directory, and</li>
<li>Make sure it's <em>writeable</em>.</li>
</ol>

<p>And a little bit about the PHP function <a href=""http://php.net/manual/en/function.move-uploaded-file.php"" rel=""noreferrer""><code>move_uploaded_file</code></a>, used in the <em>upload.php</em> script:</p>

<pre><code>move_uploaded_file(

    // this is where the file is temporarily stored on the server when uploaded
    // do not change this
    $_FILES['file']['tmp_name'],

    // this is where you want to put the file and what you want to name it
    // in this case we are putting in a directory called ""uploads""
    // and giving it the original filename
    'uploads/' . $_FILES['file']['name']
);
</code></pre>

<p><code>$_FILES['file']['name']</code> is the name of the file as it is uploaded. You don't have to use that. You can give the file any name (server filesystem compatible) you want:</p>

<pre><code>move_uploaded_file(
    $_FILES['file']['tmp_name'],
    'uploads/my_new_filename.whatever'
);
</code></pre>

<p>And finally, be aware of your PHP <a href=""http://php.net/manual/en/ini.core.php#ini.upload-max-filesize"" rel=""noreferrer""><code>upload_max_filesize</code></a> AND <a href=""http://php.net/manual/en/ini.core.php#ini.post-max-size"" rel=""noreferrer""><code>post_max_size</code></a> configuration values, and be sure your test files do not exceed either. Here's some help how you <a href=""https://stackoverflow.com/questions/7190093/phpinfo-an-easy-way-for-seeing-it"">check PHP configuration</a> and how you <a href=""https://stackoverflow.com/questions/2184513/php-change-the-maximum-upload-file-size"">set max filesize and post settings</a>.</p>
","23981045"
"Redirect to specified URL on PHP script completion?","199093","","<p>How can I get a PHP function go to a specific website when it is done running?</p>

<p>For example:</p>

<pre><code>&lt;?php
  //SOMETHING DONE
  GOTO(http://example.com/thankyou.php);
?&gt;
</code></pre>

<p>I would really like the following...</p>

<pre><code>&lt;?php
  //SOMETHING DONE
  GOTO($url);
?&gt;
</code></pre>

<p>I want to do something like this:</p>

<pre><code>&lt;?php
  //SOMETHING DONE THAT SETS $url
  header('Location: $url');  
?&gt;
</code></pre>
","<pre><code>&lt;?
ob_start(); // ensures anything dumped out will be caught

// do stuff here
$url = 'http://example.com/thankyou.php'; // this can be set based on whatever

// clear out the output buffer
while (ob_get_status()) 
{
    ob_end_clean();
}

// no redirect
header( ""Location: $url"" );
?&gt;
</code></pre>
","353851"
"Ajax success event not working","199039","","<p>I have a registration form and am using <code>$.ajax</code> to submit it.</p>

<p><strong>This is my AJAX request:</strong></p>

<pre><code>$(document).ready(function() {
    $(""form#regist"").submit(function() {
        var str = $(""#regist"").serialize();
        $.ajax({
            type: 'POST',
            url: 'submit1.php',
            data: $(""#regist"").serialize(),
            dataType: 'json',
            success: function() {
                $(""#loading"").append(""&lt;h2&gt;you are here&lt;/h2&gt;"");
            }        
        });
        return false;        
    });
});
</code></pre>

<p>In my <em>submit1.php</em> file I check for the existence of fields <em>email address</em> and <em>username</em> in the database.
I wish to display an error message if those value exist <strong>without a page refresh</strong>.</p>

<p>How can I add this to the <em>success</em> callback of my AJAX request?</p>
","<p>The result is probably not in JSON format, so when jQuery tries to parse it as such, it fails. You can catch the error with <code>error:</code> callback function.</p>

<p>You don't seem to need JSON in that function anyways, so you can also take out the <code>dataType: 'json'</code> row.</p>
","1969520"
"How to loop through an associative array and get the key?","199014","","<p>My associative array: </p>

<pre><code>$arr = array(
   1 =&gt; ""Value1"",
   2 =&gt; ""Value2"",
   10 =&gt; ""Value10""
);
</code></pre>

<p>Using the following code, <code>$v</code> is filled with <code>$arr</code>'s values</p>

<pre><code> foreach($arr as $v){
    echo($v);    // Value1, Value2, Value10
 }
</code></pre>

<p>How do I get <code>$arr</code>'s keys instead?</p>

<pre><code> foreach(.....){
    echo($k);    // 1, 2, 10
 }
</code></pre>
","<p>You can do:</p>

<pre><code>foreach ($arr as $key =&gt; $value) {
 echo $key;
}
</code></pre>

<p>As described in <a href=""http://php.net/manual/en/control-structures.foreach.php"" rel=""noreferrer"">PHP docs</a>.</p>
","1951708"
"Passing arrays as url parameter","198926","","<p>What is the best way that I can pass an array as a url parameter? I was thinking if this is possible: </p>

<pre><code>$aValues = array();

$url = 'http://www.example.com?aParam='.$aValues;
</code></pre>

<p>or how about this:</p>

<pre><code>$url = 'http://www.example.com?aParam[]='.$aValues;
</code></pre>

<p>Ive read examples, but I find it messy:</p>

<pre><code>$url = 'http://www.example.com?aParam[]=value1&amp;aParam[]=value2&amp;aParam[]=value3';
</code></pre>
","<p>There is a very simple solution: <a href=""http://php.net/manual/en/function.http-build-query.php"" rel=""noreferrer""><code>http_build_query()</code></a>. It takes your query parameters as an associative array:</p>

<pre><code>$data = array(
    1,
    4,
    'a' =&gt; 'b',
    'c' =&gt; 'd'
);
$query = http_build_query(array('aParam' =&gt; $data));
</code></pre>

<p>will return</p>

<pre><code>string(63) ""aParam%5B0%5D=1&amp;aParam%5B1%5D=4&amp;aParam%5Ba%5D=b&amp;aParam%5Bc%5D=d""
</code></pre>

<p><code>http_build_query()</code> handles all the necessary escaping for you (<code>%5B</code> => <code>[</code> and <code>%5D</code> => <code>]</code>), so this string is equal to <code>aParam[0]=1&amp;aParam[1]=4&amp;aParam[a]=b&amp;aParam[c]=d</code>.</p>
","1764199"
"Using Jquery Ajax to retrieve data from Mysql","198022","","<p><code>list.php</code>: A simple ajax code that I want to display only records of the Mysql table:  </p>

<pre><code>&lt;html&gt;
        &lt;head&gt;
        &lt;script src=""jquery-1.9.1.min.js""&gt;
        &lt;/script&gt;

        &lt;script&gt;
        $(document).ready(function(){
        var response = '';
        $.ajax({ type: ""GET"",   
                 url: ""Records.php"",   
                 async: false,
                 success : function(text)
                 {
                     response = text;
                 }
        });

        alert(response);
        });
        &lt;/script&gt;
        &lt;/head&gt;
        &lt;body&gt;

        &lt;div id=""div1""&gt;&lt;h2&gt;Let jQuery AJAX Change This Text&lt;/h2&gt;  &lt;/div&gt;
        &lt;button&gt;Get Records&lt;/button&gt;

        &lt;/body&gt;
        &lt;/html&gt;
</code></pre>

<p>Records.php is the file to fetch records from Mysql.<br>
In the Database are only two fields: 'Name', 'Address'.</p>

<pre><code>        &lt;?php
                //database name = ""simple_ajax""
                //table name = ""users""

                $con = mysql_connect(""localhost"",""root"","""");
                $dbs = mysql_select_db(""simple_ajax"",$con);
                $result= mysql_query(""select * from users"");
                $array = mysql_fetch_row($result);
                ?&gt;
                    &lt;tr&gt;
                    &lt;td&gt;Name: &lt;/td&gt;
                    &lt;td&gt;Address: &lt;/td&gt;
                    &lt;/tr&gt;


                &lt;?php

                while ($row = mysql_fetch_array($result))
                 {

                    echo ""&lt;tr&gt;"";
                    echo ""&lt;td&gt;$row[1]&lt;/td&gt;"";
                    echo ""&lt;td&gt;$row[2]&lt;/td&gt;"";
                    echo ""&lt;/tr&gt;"";
                }   

                ?&gt; 
</code></pre>

<p>This code is not working.</p>
","<p>For retrieving data using Ajax+jQuery, you must write the following code:    </p>

<pre><code> &lt;html&gt;
 &lt;script type=""text/javascript"" src=""jquery-1.3.2.js""&gt; &lt;/script&gt;

 &lt;script type=""text/javascript""&gt;

 $(document).ready(function() {

    $(""#display"").click(function() {                

      $.ajax({    //create an ajax request to display.php
        type: ""GET"",
        url: ""display.php"",             
        dataType: ""html"",   //expect html to be returned                
        success: function(response){                    
            $(""#responsecontainer"").html(response); 
            //alert(response);
        }

    });
});
});

&lt;/script&gt;

&lt;body&gt;
&lt;h3 align=""center""&gt;Manage Student Details&lt;/h3&gt;
&lt;table border=""1"" align=""center""&gt;
   &lt;tr&gt;
       &lt;td&gt; &lt;input type=""button"" id=""display"" value=""Display All Data"" /&gt; &lt;/td&gt;
   &lt;/tr&gt;
&lt;/table&gt;
&lt;div id=""responsecontainer"" align=""center""&gt;

&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>For mysqli connection, write this:</p>

<pre><code>&lt;?php 
$con=mysqli_connect(""localhost"",""root"",""""); 
if (!$con)
{
    die('Could not connect: ' . mysqli_error());
}   
?&gt;
</code></pre>

<p>For displaying the data from database, you must write this :</p>

<pre><code>&lt;?php
include(""connection.php"");
mysqli_select_db(""samples"",$con);
$result=mysqli_query(""select * from student"",$con);

echo ""&lt;table border='1' &gt;
&lt;tr&gt;
&lt;td align=center&gt; &lt;b&gt;Roll No&lt;/b&gt;&lt;/td&gt;
&lt;td align=center&gt;&lt;b&gt;Name&lt;/b&gt;&lt;/td&gt;
&lt;td align=center&gt;&lt;b&gt;Address&lt;/b&gt;&lt;/td&gt;
&lt;td align=center&gt;&lt;b&gt;Stream&lt;/b&gt;&lt;/td&gt;&lt;/td&gt;
&lt;td align=center&gt;&lt;b&gt;Status&lt;/b&gt;&lt;/td&gt;"";

while($data = mysqli_fetch_row($result))
{   
    echo ""&lt;tr&gt;"";
    echo ""&lt;td align=center&gt;$data[0]&lt;/td&gt;"";
    echo ""&lt;td align=center&gt;$data[1]&lt;/td&gt;"";
    echo ""&lt;td align=center&gt;$data[2]&lt;/td&gt;"";
    echo ""&lt;td align=center&gt;$data[3]&lt;/td&gt;"";
    echo ""&lt;td align=center&gt;$data[4]&lt;/td&gt;"";
    echo ""&lt;/tr&gt;"";
}
echo ""&lt;/table&gt;"";
?&gt;
</code></pre>
","16894623"
"Passing base64 encoded strings in URL","197559","","<p>Is it safe to pass raw base64 encoded strings via GET parameters?</p>
","<p>No, you would need to url-encode it, since base64 strings can contain the ""+"", ""="" and ""/"" characters which could alter the meaning of your data - look like a sub-folder.</p>

<p>Valid base64 characters are below.</p>

<pre><code>ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
</code></pre>
","1374794"
"PHP: Convert any string to UTF-8 without knowing the original character set, or at least try","197321","","<p>I have an application that deals with clients from all over the world, and, naturally, I want everything going into my databases to be UTF-8 encoded. </p>

<p>The main problem for me is that I don't know what encoding the source of any string is going to be - it could be from a text box (using <code>&lt;form accept-charset=""utf-8""&gt;</code> is only useful if the user is actually submitted the form), or it could be from an uploaded text file, so I really have no control over the input.</p>

<p>What I need is a function or class that makes sure the stuff going into my database is, as far as is possible, UTF-8 encoded. I've tried <code>iconv(mb_detect_encoding($text), ""UTF-8"", $text);</code>
but that has problems (if the input is 'fiancée' it returns 'fianc'). I've tried a lot of things =/</p>

<p>For file uploads, I like the idea of asking the end user to specify the encoding they use, and show them previews of what the output will look like, but this doesn't help against nasty hackers (in fact, it could make their life a little easier).</p>

<p>I've read the other SO questions on the subject, but they seem to all have subtle differences like ""I need to parse RSS feeds"" or ""I scrape data from websites"" (or, indeed, ""You can't""). </p>

<p>But there must be something that at least has a good <em>try</em>!</p>
","<p>What you're asking for is extremely hard. If possible, getting the user to specify the encoding is the best. Preventing an attack shouldn't be much easier or harder that way.</p>

<p>However, you could try doing this:</p>

<pre><code>iconv(mb_detect_encoding($text, mb_detect_order(), true), ""UTF-8"", $text);
</code></pre>

<p>Setting it to strict might help you get a better result. </p>
","7980354"
"MySQL vs MySQLi when using PHP","196812","","<p>Which is better, MySQL or MySQLi? And why? Which should I use?</p>

<p>I mean better not just in terms of performance, but any other relevant feature.</p>
","<p>If you have a look at <a href=""http://php.net/manual/en/mysqli.overview.php"" rel=""noreferrer"">MySQL Improved Extension Overview</a>, it should tell you everything you need to know about the differences between the two. </p>

<p>The main useful features are: </p>

<ul>
<li>an Object-oriented interface</li>
<li>support for prepared statements</li>
<li>support for multiple statements</li>
<li>support for transactions</li>
<li>enhanced debugging capabilities</li>
<li>embedded server support.</li>
</ul>
","549000"
"Convert Base64 string to an image file?","195778","","<p>I am trying to convert my base64 image string to an image file. This is my Base64 string:</p>

<p><a href=""http://pastebin.com/ENkTrGNG"">http://pastebin.com/ENkTrGNG</a></p>

<p>Using following code to convert it into an image file:</p>

<pre><code>function base64_to_jpeg( $base64_string, $output_file ) {
    $ifp = fopen( $output_file, ""wb"" ); 
    fwrite( $ifp, base64_decode( $base64_string) ); 
    fclose( $ifp ); 
    return( $output_file ); 
}

$image = base64_to_jpeg( $my_base64_string, 'tmp.jpg' );
</code></pre>

<p>But I am getting an error of <code>invalid image</code>, whats wrong here?</p>
","<p>The problem is that <code>data:image/png;base64,</code> is included in the encoded contents. This will result in invalid image data when the base64 function decodes it. Remove that data in the function before decoding the string, like so.</p>

<pre><code>function base64_to_jpeg($base64_string, $output_file) {
    // open the output file for writing
    $ifp = fopen( $output_file, 'wb' ); 

    // split the string on commas
    // $data[ 0 ] == ""data:image/png;base64""
    // $data[ 1 ] == &lt;actual base64 string&gt;
    $data = explode( ',', $base64_string );

    // we could add validation here with ensuring count( $data ) &gt; 1
    fwrite( $ifp, base64_decode( $data[ 1 ] ) );

    // clean up the file resource
    fclose( $ifp ); 

    return $output_file; 
}
</code></pre>
","15153931"
"How to create an array from a CSV file using PHP and the fgetcsv function","195774","","<p>Can someone kindly provide a code to create an array from a CSV file using fgetcsv?</p>

<p>I've used the following code to create an array from a simple CSV file, but it doesn't work right when one of my fields has multiple commas - such as addresses.</p>

<pre><code>$lines =file('CSV Address.csv');

foreach($lines as $data)
{
list($name[],$address[],$status[])
= explode(',',$data);
}
</code></pre>

<p>*Also, str_getcsv is not supported by my hosting service.</p>

<p>The above code doesn't work with the following CSV file example.  First column is name, second column is address, third column is marital status.</p>

<pre><code>Scott L. Aranda,""123 Main Street, Bethesda, Maryland 20816"",Single
Todd D. Smith,""987 Elm Street, Alexandria, Virginia 22301"",Single
Edward M. Grass,""123 Main Street, Bethesda, Maryland 20816"",Married
Aaron G. Frantz,""987 Elm Street, Alexandria, Virginia 22301"",Married
Ryan V. Turner,""123 Main Street, Bethesda, Maryland 20816"",Single
</code></pre>
","<p>Like you said in your title, <a href=""http://www.php.net/manual/en/function.fgetcsv.php"" rel=""noreferrer"">fgetcsv</a> is the way to go. It's pretty darn easy to use.</p>

<pre><code>$file = fopen('myCSVFile.csv', 'r');
while (($line = fgetcsv($file)) !== FALSE) {
  //$line is an array of the csv elements
  print_r($line);
}
fclose($file);
</code></pre>

<p>You'll want to put more error checking in there in case <code>fopen()</code> fails, but this works to read a CSV file line by line and parse the line into an array.</p>
","1269615"
"How to call PHP function from string stored in a Variable","195126","","<p>I need to be able to call a function, but the function name is stored in a variable, is this possible? e.g:</p>

<pre>
function foo ()
{
  //code here
}

function bar ()
{
  //code here
}

$functionName = ""foo"";
// i need to call the function based on what is $functionName
</pre>

<p>Anyhelp would be great.</p>

<p>Thanks!</p>
","<p><a href=""http://php.net/manual/en/functions.variable-functions.php"" rel=""noreferrer""><code>$functionName()</code></a> or <a href=""http://php.net/manual/en/function.call-user-func.php"" rel=""noreferrer""><code>call_user_func($functionName)</code></a></p>
","1005890"
"Deny direct access to all .php files except index.php","195115","","<p>I want to deny direct access to all <code>.php</code> files except one: <code>index.php</code></p>

<p>The only access to the other <code>.php</code> files should be through php <code>include</code>.</p>

<p>If possible I want all files in the same folder.</p>

<p><strong>UPDATE:</strong></p>

<p>A general rule would be nice, so I don't need to go through all files. The risk is that I forget a file or line. </p>

<p><strong>UPDATE 2:</strong></p>

<p>The <code>index.php</code> is in a folder <code>www.myadress.com/myfolder/index.php</code></p>

<p>I want to deny access to all <code>.php</code> files in <code>myfolder</code> and subfolders to that folder.</p>
","<p>In index.php, add an access value like this:</p>

<pre><code>$access = 'my_value';
</code></pre>

<p>In every other file, include this check before even a single byte is echoed out by php:</p>

<pre><code>if(empty($access)) {
    header(""location:index.php""); 
    die();
}
</code></pre>

<p>This way, other php files will be accessible only through require / include and not through the url.</p>
","1340044"
"How to check if PHP array is associative or sequential?","194522","","<p>PHP treats all arrays as associative, so there aren't any built in functions. Can anyone recommend a fairly efficient way to check if an array contains only numeric keys?</p>

<p>Basically, I want to be able to differentiate between this:</p>

<pre><code>$sequentialArray = array('apple', 'orange', 'tomato', 'carrot');
</code></pre>

<p>and this:</p>

<pre><code>$assocArray = array('fruit1' =&gt; 'apple', 
                    'fruit2' =&gt; 'orange', 
                    'veg1' =&gt; 'tomato', 
                    'veg2' =&gt; 'carrot');
</code></pre>
","<p>You have asked two questions that are not quite equivalent:</p>

<ul>
<li>Firstly, how to determine whether an array has only numeric keys</li>
<li>Secondly, how to determine whether an array has <em>sequential</em> numeric keys, starting from 0</li>
</ul>

<p>Consider which of these behaviours you actually need. (It may be that either will do for your purposes.)</p>

<p>The first question (simply checking that all keys are numeric) is <a href=""https://stackoverflow.com/a/4254008/1709587"">answered well by Captain kurO</a>.</p>

<p>For the second question (checking whether the array is zero-indexed and sequential), you can use the following function:</p>

<pre class=""lang-php prettyprint-override""><code>function isAssoc(array $arr)
{
    if (array() === $arr) return false;
    return array_keys($arr) !== range(0, count($arr) - 1);
}

var_dump(isAssoc(array('a', 'b', 'c'))); // false
var_dump(isAssoc(array(""0"" =&gt; 'a', ""1"" =&gt; 'b', ""2"" =&gt; 'c'))); // false
var_dump(isAssoc(array(""1"" =&gt; 'a', ""0"" =&gt; 'b', ""2"" =&gt; 'c'))); // true
var_dump(isAssoc(array(""a"" =&gt; 'a', ""b"" =&gt; 'b', ""c"" =&gt; 'c'))); // true
</code></pre>
","173479"
"Send json post using php","194010","","<p>I have this data:</p>

<pre><code>{ 
    userID: 'a7664093-502e-4d2b-bf30-25a2b26d6021',
    itemKind: 0,
    value: 1,
    description: 'Boa saudaÁ„o.',
    itemID: '03e76d0a-8bab-11e0-8250-000c29b481aa'
}
</code></pre>

<p>and I need to post into json url:
<a href=""http://onleague.stormrise.pt:8031/OnLeagueRest/resources/onleague/Account/CreditAccount"">http://onleague.stormrise.pt:8031/OnLeagueRest/resources/onleague/Account/CreditAccount</a></p>

<p>using php 
how can I send this post?</p>
","<h3>Update</h3>

<p>This is a pretty old answer. I find the <a href=""http://guzzle.readthedocs.org/en/latest/"" rel=""noreferrer"">Guzzle library</a> very easy to use for working with HTTP in PHP.</p>

<hr>

<p>Do you actually need to post JSON data? If so, you're looking at a raw HTTP post.</p>

<p>The best method I know of to do this is via Zend Framework's HTTP client.</p>

<p>See here for raw post details - <a href=""http://framework.zend.com/manual/en/zend.http.client.advanced.html#zend.http.client.raw_post_data"" rel=""noreferrer"">http://framework.zend.com/manual/en/zend.http.client.advanced.html#zend.http.client.raw_post_data</a></p>

<p>It would be something like</p>

<pre><code>$data = array(
    'userID'      =&gt; 'a7664093-502e-4d2b-bf30-25a2b26d6021',
    'itemKind'    =&gt; 0,
    'value'       =&gt; 1,
    'description' =&gt; 'Boa saudaÁ„o.',
    'itemID'      =&gt; '03e76d0a-8bab-11e0-8250-000c29b481aa'
);

$json = json_encode($data);

$client = new Zend_Http_Client($uri);
$client-&gt;setRawData($json, 'application/json')-&gt;request('POST');
</code></pre>
","6213576"
"SyntaxError: JSON.parse: unexpected character at line 1 column 1 of the JSON data","193682","","<p>I've spend over 6 hours to find an exception or a special character to find in my code but I couldn't. I checked every similar messages in here.</p>

<p>I'm sending the form with magnific popup. First I'm using inline popup to open my form than I'm sending all inputs to main.js to validate. </p>

<p>So, I just need a third-eye. </p>

<p>I've got: <code>index.html</code>, <code>register.php</code>, <code>main.js</code></p>

<blockquote>
  <p><strong>Here's the code</strong></p>
</blockquote>

<p><a href=""http://pastebin.com/2nxEjHrC""><strong>FORM</strong></a></p>

<p><a href=""http://pastebin.com/v7UKTPYR""><strong>JS/AJAX</strong></a></p>

<p><a href=""http://pastebin.com/W9MZgjWP""><strong>PHP-register.php</strong></a></p>

<blockquote>
  <p><strong>Here goes the error messages</strong></p>
</blockquote>

<p><em>JSON Output</em>
<img src=""https://i.imgur.com/i45ESNs.png"" alt=""json""></p>

<p><strong>Chrome Console:</strong></p>

<p><img src=""https://i.imgur.com/A3rHJni.png"" alt=""chrome""></p>

<p><strong>Firefox console :</strong> 
<img src=""https://i.imgur.com/qEWD7UG.png"" alt=""firefox""></p>

<hr>

<p><strong>What am i  missing?</strong></p>
","<p>The fact the character is a &lt; make me think you have a PHP error, have you tried echoing all errors.</p>

<p>Since I  don't have your database, I'm going through your code trying to find errors, so far, I've updated your JS file</p>

<pre><code>$(""#register-form"").submit(function (event) {

    var entrance = $(this).find('input[name=""IsValid""]').val();
    var password = $(this).find('input[name=""objPassword""]').val();
    var namesurname = $(this).find('input[name=""objNameSurname""]').val();
    var email = $(this).find('input[name=""objEmail""]').val();
    var gsm = $(this).find('input[name=""objGsm""]').val();
    var adres = $(this).find('input[name=""objAddress""]').val();
    var termsOk = $(this).find('input[name=""objAcceptTerms""]').val();

    var formURL = $(this).attr(""action"");


    if (request) {
        request.abort(); // cancel if any process on pending
    }

    var postData = {
        ""objAskGrant"": entrance,
        ""objPass"": password,
        ""objNameSurname"": namesurname,
        ""objEmail"": email,
        ""objGsm"": parseInt(gsm),
        ""objAdres"": adres,
        ""objTerms"": termsOk
    };

    $.post(formURL,postData,function(data,status){
        console.log(""Data: "" + data + ""\nStatus: "" + status);
    });

    event.preventDefault();
});
</code></pre>

<p>PHP Edit:</p>

<pre><code> if (isset($_POST)) {

    $fValid = clear($_POST['objAskGrant']);
    $fTerms = clear($_POST['objTerms']);

    if ($fValid) {
        $fPass = clear($_POST['objPass']);
        $fNameSurname = clear($_POST['objNameSurname']);
        $fMail = clear($_POST['objEmail']);
        $fGsm = clear(int($_POST['objGsm']));
        $fAddress = clear($_POST['objAdres']);
        $UserIpAddress = ""hidden"";
        $UserCityLocation = ""hidden"";
        $UserCountry = ""hidden"";

        $DateTime = new DateTime();
        $result = $date-&gt;format('d-m-Y-H:i:s');
        $krr = explode('-', $result);
        $resultDateTime = implode("""", $krr);

        $data = array('error' =&gt; 'Yükleme Sırasında Hata Oluştu');

        $kayit = ""INSERT INTO tbl_Records(UserNameSurname, UserMail, UserGsm, UserAddress, DateAdded, UserIp, UserCityLocation, UserCountry, IsChecked, GivenPasscode) VALUES ('$fNameSurname', '$fMail', '$fGsm', '$fAddress', '$resultDateTime', '$UserIpAddress', '$UserCityLocation', '$UserCountry', '$fTerms', '$fPass')"";
        $retval = mysql_query( $kayit, $conn ); // Update with you connection details
            if ($retval) {
                $data = array('success' =&gt; 'Register Completed', 'postData' =&gt; $_POST);
            }

        } // valid ends
    }echo json_encode($data);
</code></pre>
","25744206"
"Getting checkbox values on submit","193253","","<p>I have 6 options, I want to get the checked values to store them in variable on second page. How do I go on doing that?<br/></p>

<pre><code>&lt;form action=""third.php"" method=""get""&gt;
    &lt;!-- Choices --&gt;
    Red     &lt;input type=""checkbox"" name=""color[]"" id=""color"" value=""Red""&gt;
    Green   &lt;input type=""checkbox"" name=""color[]"" id=""color"" value=""Green""&gt;
    Blue    &lt;input type=""checkbox"" name=""color[]"" id=""color"" value=""Blue""&gt;
    Cyan    &lt;input type=""checkbox"" name=""color[]"" id=""color"" value=""Cyan""&gt;
    Magenta &lt;input type=""checkbox"" name=""color[]"" id=""color"" value=""Magenta""&gt;
    Yellow  &lt;input type=""checkbox"" name=""color[]"" id=""color"" value=""Yellow""&gt;
    Black   &lt;input type=""checkbox"" name=""color[]"" id=""color"" value=""Black""&gt;
    &lt;!-- Submit --&gt;
    &lt;input type=""submit"" value=""submit""&gt;
&lt;/form&gt;
</code></pre>

<p>And <code>third.php</code> page :</p>

<pre><code>$color = $_GET['color'];

echo 'The color is '.$color;
</code></pre>

<p>If I remove <code>[]</code>, I get the color is on, when I do it like <code>color[]</code> I get a notice saying : </p>

<blockquote>
  <p>Array to string conversion</p>
</blockquote>

<p>What I want is the value of checked, checkboxes so I can store it in variable.</p>
","<p>A good method which is a favorite of mine and for many I'm sure, is to make use of <code>foreach</code> which will output each color you chose, and appear on screen one underneath each other. </p>

<p>When it comes to using checkboxes, you kind of do not have a choice but to use <code>foreach</code>, and that's why you only get one value returned from your array.</p>

<p>Here is an example using <code>$_GET</code>. You can however use <code>$_POST</code> and would need to make both directives match in both files in order to work properly.</p>

<h3>HTML FORM</h3>

<pre><code>&lt;form action=""third.php"" method=""get""&gt;
    Red&lt;input type=""checkbox"" name=""color[]"" id=""color"" value=""red""&gt;
    Green&lt;input type=""checkbox"" name=""color[]"" id=""color"" value=""green""&gt;
    Blue&lt;input type=""checkbox"" name=""color[]"" id=""color"" value=""blue""&gt;
    Cyan&lt;input type=""checkbox"" name=""color[]"" id=""color"" value=""cyan""&gt;
    Magenta&lt;input type=""checkbox"" name=""color[]"" id=""color"" value=""Magenta""&gt;
    Yellow&lt;input type=""checkbox"" name=""color[]"" id=""color"" value=""yellow""&gt;
    Black&lt;input type=""checkbox"" name=""color[]"" id=""color"" value=""black""&gt;
    &lt;input type=""submit"" value=""submit""&gt;
&lt;/form&gt;
</code></pre>

<h3>PHP (using $_GET) using <code>third.php</code> as your handler</h3>

<pre><code>&lt;?php

$name = $_GET['color'];

// optional
// echo ""You chose the following color(s): &lt;br&gt;"";

foreach ($name as $color){ 
    echo $color.""&lt;br /&gt;"";
}

?&gt;
</code></pre>

<p>Assuming having chosen red, green, blue and cyan as colors, will appear like this:</p>

<p>red<br>
green<br>
blue<br>
cyan  </p>

<hr>

<h2>OPTION #2</h2>

<p>You can also check if a color was chosen. If none are chosen, then a seperate message will appear.</p>

<pre><code>&lt;?php

$name = $_GET['color'];

if (isset($_GET['color'])) {
    echo ""You chose the following color(s): &lt;br&gt;"";

    foreach ($name as $color){
        echo $color.""&lt;br /&gt;"";
    }
} else {
    echo ""You did not choose a color."";
}

?&gt;
</code></pre>

<hr>

<h2>Additional options:</h2>

<p>To appear as a list: (<code>&lt;ul&gt;&lt;/ul&gt;</code> can be replaced by <code>&lt;ol&gt;&lt;/ol&gt;</code>)</p>

<pre><code>&lt;?php

$name = $_GET['color'];

if (isset($_GET['color'])) {
    echo ""You chose the following color(s): &lt;br&gt;"";
    echo ""&lt;ul&gt;"";
    foreach ($name as $color){
        echo ""&lt;li&gt;"" .$color.""&lt;/li&gt;"";
    }
    echo ""&lt;/ul&gt;"";
} else {
    echo ""You did not choose a color."";
}

?&gt;
</code></pre>

<hr>

<p>Flag: (August the 5th, 2016)</p>

<p><em>I've received 2 downvotes this morning and my comments we're removed; why? Whoever's doing this, is obvioulsy doing this with malice. The answer has received nothing but upvotes and now this. I mean seriously; wtf? – Fred -ii- 1 hour ago   declined - People are free to vote how they want, as long as you're not being targeted. I see no evidence of that. Your comments about votes were noise, flagged as such, and removed.</em></p>

<p>Answer to this: That's just the thing; <strong>I am.</strong></p>
","18424178"
"Can I store images in MySQL","192964","","<blockquote>
  <p><strong>Possible Duplicates:</strong><br>
  <a href=""https://stackoverflow.com/questions/1665730/images-in-mysql"">Images in MySQL</a><br>
  <a href=""https://stackoverflow.com/questions/3014578/storing-images-in-mysql"">Storing images in MySQL</a>  </p>
</blockquote>



<p>I'm trying to develop a website where users upload their images as part of registration. I want it that for each image, there should be a thumb created with PHP (which is not that difficult). I want to save the thumbs (since they are very small) in the database and I use MySQL. (I don't want to save the thumbs as physical files on the drive.)<br>
Does MySQL allow saving and retrieving image data and how do I go about it? If it doesn't support image data, is there any free database that does? I will be happy if a link can be provided.<br>
Thanks.</p>
","<p>Yes, you can store images in the database, but it's not advisable in my opinion, and it's not general practice. </p>

<p>A general practice is to store images in directories on the file system and store references to the images in the database. e.g. path to the image,the image name, etc.. Or alternatively, you may even store images on a content delivery network (CDN) or numerous hosts across some great expanse of physical territory, and store references to access those resources in the database.</p>

<p>Images can get quite large, greater than 1MB. And so storing images in a database can potentially put unnecessary load on your database and the network between your database and your web server if they're on different hosts. </p>

<p>I've worked at startups, mid-size companies and large technology companies with 400K+ employees. In my 11 years of professional experience, I've never seen anyone store images in a database. I say this to support the statement it is an uncommon practice.</p>
","6472268"
"PHP header() redirect with POST variables","192357","","<p>I'm working with PHP, and I'm making an action page which a form posts to. The page checks for errors, then if everything is fine, it redirects them to the page where the data has been posted. If not, I need to to redirect them back to the page they were at with an error and the POST variables. Here is the gist of how it works.</p>

<p>The HTML would look like this...</p>

<pre><code>&lt;form name=""example"" action=""action.php"" method=""POST""&gt;
  &lt;input type=""text"" name=""one""&gt;
  &lt;input type=""text"" name=""two""&gt;
  &lt;input type=""text"" name=""three""&gt;
  &lt;input type=""submit"" value=""Submit!""&gt;
&lt;/form&gt;
</code></pre>

<p>action.php would look like this...</p>

<pre><code>if(error_check($_POST['one']) == true){
    header('Location: form.php');
    // Here is where I need the data to POST back to the form page.
} else {
    // function to insert data into database
    header('Location: posted.php');
}
</code></pre>

<p>In the case of an error, I need it to POST back to the first page.
I can't use GET, because the input will be too large.
I don't want to use SESSION, if possible.
Is this possible? </p>
","<p>If you don't want to use sessions, the only thing you can do is POST to the same page. Which IMO is the best solution anyway.</p>

<pre><code>// form.php

&lt;?php

    if (!empty($_POST['submit'])) {
        // validate

        if ($allGood) {
            // put data into database or whatever needs to be done

            header('Location: nextpage.php');
            exit;
        }
    }

?&gt;

&lt;form action=""form.php""&gt;
    &lt;input name=""foo"" value=""&lt;?php if (!empty($_POST['foo'])) echo htmlentities($_POST['foo']); ?&gt;""&gt;
    ...
&lt;/form&gt;
</code></pre>

<p>This can be made more elegant, but you get the idea...</p>
","4281937"
"What is function overloading and overriding in php?","192163","","<p>In PHP, what do you mean by function overloading and function overriding. and what is the difference between both of them? couldn't figure out what is the difference between them.</p>
","<p><strong>Overloading</strong> is defining functions that have similar signatures, yet have different parameters. <strong>Overriding</strong> is only pertinent to derived classes, where the parent class has defined a method and the derived class wishes to <strong>override</strong> that method.</p>

<p>In PHP, you can only overload methods using the magic method <a href=""http://php.net/manual/en/language.oop5.overloading.php"" rel=""noreferrer""><code>__call</code></a>.</p>

<p>An example of <strong>overriding</strong>:</p>

<pre><code>&lt;?php

class Foo {
   function myFoo() {
      return ""Foo"";
   }
}

class Bar extends Foo {
   function myFoo() {
      return ""Bar"";
   }
}

$foo = new Foo;
$bar = new Bar;
echo($foo-&gt;myFoo()); //""Foo""
echo($bar-&gt;myFoo()); //""Bar""
?&gt;
</code></pre>
","2994767"
"Get current domain","191965","","<p>I have my site on server </p>

<pre><code>http://www.myserver.uk.com
</code></pre>

<p>For this i have two domain:</p>

<pre><code>http://one.com
</code></pre>

<p>and </p>

<pre><code>http://two.com
</code></pre>

<p>i would like get with PHP current domain, but if I use <code>$_SERVER['HTTP_HOST']</code> then this show me </p>

<pre><code>myserver.uk.com
</code></pre>

<p>instead of:</p>

<pre><code>one.com or two.com
</code></pre>

<p>How can i get domain, not the server name? I have PHP version 5.2</p>
","<p>try using this: <code>$_SERVER['SERVER_NAME']</code></p>

<p>or parse </p>

<pre><code>$_SERVER['REQUEST_URI']
</code></pre>

<p><strong>EDIT:</strong></p>

<blockquote>
  <p><a href=""http://php.net/manual/en/function.apache-request-headers.php"" rel=""noreferrer"">apache_request_headers()</a></p>
</blockquote>
","10717309"
"PHP convert date format dd/mm/yyyy => yyyy-mm-dd","191743","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/10367790/php-date-string-format"">PHP Date String Format</a>  </p>
</blockquote>



<p>I am trying to convert a date from <code>dd/mm/yyyy =&gt; yyyy-mm-dd</code>. I have using the mktime() function and other functions but I cannot seem to make it work. I have managed to <code>explode</code> the original date using <code>'/'</code> as the delimiter but I have no success changing the format and swapping the <code>'/'</code> with a <code>'-'</code>. </p>

<p>Any help will be greatly appreciated. </p>
","<blockquote>
  <p>Dates in the <code>m/d/y</code> or <code>d-m-y</code> formats are disambiguated by looking
  at the separator between the various components: if the separator is a
  slash (<code>/</code>), then the American <code>m/d/y</code> is assumed; whereas if the
  separator is a dash (<code>-</code>) or a dot (<code>.</code>), then the European <code>d-m-y</code>
  format is assumed. Check <a href=""https://devdocs.io/php/function.strtotime"" rel=""noreferrer"">more here</a>.</p>
</blockquote>

<p>Use the default date function.</p>

<pre><code>$var = ""20/04/2012"";
echo date(""Y-m-d"", strtotime($var) );
</code></pre>

<p><strong>EDIT</strong> I just tested it, and somehow, PHP doesn't work well with dd/mm/yyyy format. Here's another solution.</p>

<pre><code>$var = '20/04/2012';
$date = str_replace('/', '-', $var);
echo date('Y-m-d', strtotime($date));
</code></pre>
","10307005"
"Display an array in a readable/hierarchical format","191553","","<p>Here is the code for pulling the data for my array</p>

<pre><code>&lt;?php
    $link = mysqli_connect('localhost', 'root', '', 'mutli_page_form');

    $query = ""SELECT * FROM wills_children WHERE will=73"";

    $result = mysqli_query($link, $query) or die(mysqli_error($link));

    if ($result = mysqli_query($link, $query)) {

    /* fetch associative array */
    if($row = mysqli_fetch_assoc($result)) {
        $data = unserialize($row['children']);
    }

    /* free result set */
    mysqli_free_result($result);
    }
?&gt;
</code></pre>

<p>When I use print_r($data) it reads as:</p>

<pre><code>Array ( [0] =&gt; Array ( [0] =&gt; Natural Chlid 1 [1] =&gt; Natural Chlid 2 [2] =&gt; Natural Chlid 3 ) ) 
</code></pre>

<p>I would like it to read as:</p>

<p>Natural Child 1<br />
Natural Child 2<br />
Natural Child 3<br /></p>
","<p>Try this:</p>

<pre><code>foreach($data[0] as $child) {
   echo $child . ""\n"";
}
</code></pre>

<p>in place of <code>print_r($data)</code></p>
","5393128"
"PHP Multiple Checkbox Array","191226","","<p>I've looked around for a few examples here but a lot of them are either too advanced for my grasp of PHP or their examples are too specific to their own projects. I am currently struggling with a very basic part of a PHP form.</p>

<p>I am trying to create a form with a few checkboxes, each assigned a different value, I want these to be sent to a variable (array?) that I can echo/use later, in my case I will be sending the checked values in an email.</p>

<p>So far, I have tried a few variations, but the closest I have come to it is this...</p>

<pre><code>&lt;form method='post' id='userform' action='thisform.php'&gt;
&lt;tr&gt;
    &lt;td&gt;Trouble Type&lt;/td&gt;
    &lt;td&gt;
    &lt;input type='checkbox' name='checkboxvar' value='Option One'&gt;1&lt;br&gt;
    &lt;input type='checkbox' name='checkboxvar' value='Option Two'&gt;2&lt;br&gt;
    &lt;input type='checkbox' name='checkboxvar' value='Option Three'&gt;3
    &lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;input type='submit' class='buttons'&gt;
&lt;/form&gt;

&lt;?php
$checkboxvar[] = $_REQUEST['checkboxvar'];
?&gt;
</code></pre>

<p>Where I'd echo $checkboxvar[] into my email.
Am I going about this completely wrong? The other idea I had was to use a lot of if statements.</p>
","<pre><code>&lt;form method='post' id='userform' action='thisform.php'&gt; &lt;tr&gt;
    &lt;td&gt;Trouble Type&lt;/td&gt;
    &lt;td&gt;
    &lt;input type='checkbox' name='checkboxvar[]' value='Option One'&gt;1&lt;br&gt;
    &lt;input type='checkbox' name='checkboxvar[]' value='Option Two'&gt;2&lt;br&gt;
    &lt;input type='checkbox' name='checkboxvar[]' value='Option Three'&gt;3
    &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;input type='submit' class='buttons'&gt; &lt;/form&gt;

&lt;?php 
if (isset($_POST['checkboxvar'])) 
{
    print_r($_POST['checkboxvar']); 
}
?&gt;
</code></pre>

<p>You pass the form name as an array and then you can access all checked boxes using the var itself which would then be an array.</p>

<p>To echo checked options into your email you would then do this:</p>

<pre><code>echo implode(',', $_POST['checkboxvar']); // change the comma to whatever separator you want
</code></pre>

<p><strong>Please keep in mind you should always sanitize your input as needed.</strong></p>

<p>For the record, official docs on this exist: <a href=""http://php.net/manual/en/faq.html.php#faq.html.arrays"">http://php.net/manual/en/faq.html.php#faq.html.arrays</a></p>
","14026375"
"Comparing two dates","190835","","<p>How can I compare two dates in PHP?</p>

<p>In the database, the date looks like 2011-10-2.</p>

<p>If I wanted to compare today's date against the date in the database to see which one is greater, how would I do it?</p>

<p>I tried this,</p>

<pre><code>$today = date(""Y-m-d"");
$expire = $row-&gt;expireDate //from db

if($today &lt; $expireDate) { //do something; }
</code></pre>

<p>but it doesn't really work that way. What's another way of doing it?</p>

<p>Update: I know this post is kinda old but i just wanted to mention carbon, which is a class thats used with laravel but can be used with classic php and it does wonders with dates. check it out: <a href=""https://github.com/briannesbitt/Carbon"" rel=""noreferrer"">Carbon</a></p>
","<blockquote>
  <p>in the database the date looks like this 2011-10-2</p>
</blockquote>

<p>Store it in YYYY-MM-DD and then string comparison will work because '1' > '0', etc.</p>
","3847782"
"Better way to check variable for null or empty string?","190450","","<p>Since PHP is a dynamic language what's the best way of checking to see if a provided field is empty?  </p>

<p>I want to ensure that:</p>

<ol>
<li>null is considered an empty string</li>
<li>a white space only string is considered empty</li>
<li>that ""0"" is not considered empty</li>
</ol>

<p>This is what I've got so far:</p>

<pre><code>$question = trim($_POST['question']);

if ("""" === ""$question"") {
    // Handle error here
}
</code></pre>

<p>There must be a simpler way of doing this?</p>
","<pre><code>// Function for basic field validation (present and neither empty nor only white space
function IsNullOrEmptyString($question){
    return (!isset($question) || trim($question)==='');
}
</code></pre>
","381275"
"What's the use of ob_start() in php?","190345","","<p>Is <code>ob_start()</code> used for <code>output buffering</code> so that the headers are buffered and not sent to the browser? Am I making sense here? If not then why should we use <code>ob_start()</code>?</p>
","<p>Think of <code>ob_start()</code> as saying ""Start remembering everything that would normally be outputted, but don't quite do anything with it yet.""</p>

<p>For example:</p>

<pre><code>ob_start();
echo(""Hello there!""); //would normally get printed to the screen/output to browser
$output = ob_get_contents();
ob_end_clean();
</code></pre>

<p>There are two other functions you typically pair it with: <code>ob_get_contents()</code>, which basically gives you whatever has been ""saved"" to the buffer since it was turned on with <code>ob_start()</code>, and then <code>ob_end_clean()</code> or <code>ob_flush()</code>, which either stops saving things and discards whatever was saved, or stops saving and outputs it all at once, respectively.</p>
","4401992"
"PHP Array to JSON Array using json_encode();","189543","","<p>I've encoded an Array I've made using the inbuilt <code>json_encode();</code> function. I need it in the format of an Array of Arrays like so:</p>

<pre><code>[[""Afghanistan"",32,12],[""Albania"",32,12]]
</code></pre>

<p>However, it is returning as:</p>

<pre><code>[""2"":[""Afghanistan"",32,12],""4"":[""Albania"",32,12]]
</code></pre>

<p>How can I remove these row numbers without using any Regex trickery?</p>
","<p>If the array keys in your PHP array are not consecutive numbers, <code>json_encode()</code> <em>must</em> make the other construct an object since JavaScript arrays are always consecutively numerically indexed.  Use <a href=""http://us3.php.net/manual/en/function.array-values.php""><code>array_values()</code></a> on the outer structure in PHP to discard the original array keys and replace them with zero-based consecutive numbering:</p>

<h3>Example:</h3>

<pre><code>// Non-consecutive number keys are OK for PHP
// but not for a JavaScript array
$array = array(
  2 =&gt; array(""Afghanistan"",32,13),
  4 =&gt; array(""Albania"",32,12)
);

// array_values() removes the original keys and replaces
// with plain consecutive numbers
$out = array_values($array);
json_encode($out);
// [[""Afghanistan"",32,13],[""Albania"",32,12]]
</code></pre>
","11722121"
"insert multiple rows via a php array into mysql","189115","","<p>I'm passing a large dataset into a mysql table via php using insert commands and I'm wondering if its possible to insert approximately 1000 rows at a time via a query other than appending each value on the end of an mile long string and then executing it. I am using the codeigniter framework so its functions are also available to me.</p>
","<p>Assembling one <code>INSERT</code> statement with multiple rows is much faster in MySQL than one <code>INSERT</code> statement per row.</p>

<p>That said, it sounds like you might be running into string-handling problems in PHP, which is really an algorithm problem, not a language one. Basically, when working with large strings, you want to minimize unnecessary copying. Primarily, this means you want to avoid concatenation. The fastest and most memory efficient way to build a large string, such as for inserting hundreds of rows at one, is to take advantage of the <code>implode()</code> function and array assignment.</p>

<pre><code>$sql = array(); 
foreach( $data as $row ) {
    $sql[] = '(""'.mysql_real_escape_string($row['text']).'"", '.$row['category_id'].')';
}
mysql_query('INSERT INTO table (text, category) VALUES '.implode(',', $sql));
</code></pre>

<p>The advantage of this approach is that you don't copy and re-copy the SQL statement you've so far assembled with each concatenation; instead, PHP does this <em>once</em> in the <code>implode()</code> statement. This is a <em>big</em> win.</p>

<p>If you have lots of columns to put together, and one or more are very long, you could also build an inner loop to do the same thing and use <code>implode()</code> to assign the values clause to the outer array.</p>
","780046"
"Convert number to month name in PHP","188941","","<p>I have this PHP code:</p>

<pre><code>$monthNum = sprintf(""%02s"", $result[""month""]);
$monthName = date(""F"", strtotime($monthNum));

echo $monthName;
</code></pre>

<p>But it's returning <code>December</code> rather than <code>August</code>.</p>

<p><code>$result[""month""]</code> is equal to 8, so the <code>sprintf</code> function is adding a <code>0</code> to make it <code>08</code>.</p>
","<p><strong>The recommended way to do this:</strong></p>

<p>Nowadays, you should really be using DateTime objects for any date/time math. This requires you to have a PHP version >= 5.2. As shown in <a href=""https://stackoverflow.com/a/18467880/1438393"">Glavić's answer</a>, you can use the following:</p>

<pre><code>$monthNum  = 3;
$dateObj   = DateTime::createFromFormat('!m', $monthNum);
$monthName = $dateObj-&gt;format('F'); // March
</code></pre>

<p>The <a href=""http://www.php.net/manual/en/datetime.createfromformat.php"" rel=""noreferrer""><code>!</code> formatting character</a> is used to reset everything to the <a href=""https://stackoverflow.com/q/20822821/1438393"">Unix epoch</a>. The <code>m</code> format character is the numeric representation of a month, with leading zeroes. </p>

<p><strong>Alternative solution:</strong></p>

<p>If you're using an older PHP version and can't upgrade at the moment, you could this solution.
The second parameter of <a href=""http://php.net/date"" rel=""noreferrer""><code>date()</code></a> function accepts a timestamp, and you could use <a href=""http://php.net/mktime"" rel=""noreferrer""><code>mktime()</code></a> to create one, like so:</p>

<pre><code>$monthNum  = 3;
$monthName = date('F', mktime(0, 0, 0, $monthNum, 10)); // March
</code></pre>

<p>If you want the 3-letter month name like <code>Mar</code>, change <code>F</code> to <code>M</code>. The list of all available formatting options can be found in <a href=""http://php.net/manual/en/function.date.php"" rel=""noreferrer"">the PHP manual documentation</a>.</p>
","18467892"
"How to clear APC cache entries?","188913","","<p>I need to clear all APC cache entries when I deploy a new version of the site.
APC.php has a button for clearing all opcode caches, but I don't see buttons for clearing all User Entries, or all System Entries, or all Per-Directory Entries.</p>

<p>Is it possible to clear all cache entries via the command-line, or some other way?</p>
","<p>You can use the PHP function <code>apc_clear_cache</code>.</p>

<p>Calling <code>apc_clear_cache()</code> will clear the system cache and calling <code>apc_clear_cache('user')</code> will clear the user cache.</p>
","911219"
"How to redirect to another page using PHP","188849","","<p>I am building a website which includes a login page. I need to redirect the user to their profile page once they've logged in successfully, but I don't know how to do that in PHP (It's my first site). </p>

<p>I've searched the internet and have been told that the header() function should do the trick, but it will only work if I haven't outputted any information before using it. </p>

<p>That's the problem. I've outputted a bunch of information (including the HTML to build the login page itself). So how do I redirect the user from one page to the next?</p>

<p>What options do I have? Also, what is the best practice in these instances?</p>

<p>Thanks!</p>

<p>EDIT: Here's my entire login.php page</p>

<pre><code>&lt;?php 

session_start(); 

echo ""&lt;!DOCTYPE html&gt; 
  &lt;html&gt; 
     &lt;head&gt; 
        &lt;meta charset='utf-8'&gt; 
        &lt;title&gt;Sprout&lt;/title&gt;
    &lt;link rel='stylesheet' href='stylesheet.css' type='text/css'&gt;
     &lt;/head&gt;
 &lt;body&gt;
    &lt;div class='box'&gt;
    &lt;form action='login.php' method='post'&gt;
       Name&lt;br /&gt; &lt;input type='text' name='username' class='form'/&gt;&lt;br /&gt;
       Password&lt;br /&gt; &lt;input type='password' name='password' class='form'/&gt;
       &lt;input type='submit' value='Login' class='button' /&gt;
    &lt;/form&gt;
    &lt;/div&gt;
 &lt;/body&gt;
  &lt;/html&gt;"";

if ($_SERVER['REQUEST_METHOD'] == 'POST') 
{
    $username = $_POST[""username""];
    $password = $_POST[""password""];

    $dbhost = ""localhost"";
    $dbuser = ""root"";
    $dbpass = ""root"";

    $conn = mysql_connect($dbhost, $dbuser, $dbpass) or die (""Error connecting to database"");

    $dbname = ""database"";

    mysql_select_db($dbname);

    $query = ""SELECT username FROM users WHERE username = '$username' AND password = '$password'"";

    $result = mysql_query($query) or die (""Failed Query of "" . $query);


    while($row = mysql_fetch_assoc($result))
    {
            $_SESSION[""user""] = $username;
    }
}
?&gt;
</code></pre>
","<blockquote>
  <p>That's the problem. I've outputted a bunch of information (including the HTML to build the login page itself). So how do I redirect the user from one page to the next?</p>
</blockquote>

<p>This means your application design is pretty broken. You shouldn't be doing output while your business logic is running. Go an use a template engine (like <a href=""http://www.smarty.net/"">Smarty</a>) or quickfix it by using <a href=""http://php.net/manual/en/ref.outcontrol.php"">output buffering</a>).</p>

<p>Another option (not a good one though!) would be outputting JavaScript to redirect:</p>

<pre><code>&lt;script type=""text/javascript""&gt;location.href = 'newurl';&lt;/script&gt;
</code></pre>
","4871996"
"How to copy a file from one directory to another using PHP?","188743","","<p>Say I've got a file <code>test.php</code> in <code>foo</code> directory as well as <code>bar</code>. How can I replace <code>bar/test.php</code> with <code>foo/test.php</code> using <code>PHP</code>? I'm on Windows XP, a cross platform solution would be great but windows preferred.</p>
","<p>You could use the <a href=""http://fr2.php.net/copy"" rel=""noreferrer""><strong><code>copy()</code></strong></a> function :</p>

<pre><code>// Will copy foo/test.php to bar/test.php
// overwritting it if necessary
copy('foo/test.php', 'bar/test.php');
</code></pre>

<p><br>
Quoting a couple of relevant sentences from its manual page :</p>

<blockquote>
  <p>Makes a copy of the file source to
  dest.  <br> <br><strong>If the destination
  file already exists, it will be
  overwritten.</strong></p>
</blockquote>
","5772780"
"How do I pass parameters into a PHP script through a webpage?","188567","","<p>I am calling a PHP script whenever a webpage loads. However, there is a parameter that the PHP script needs to run (which I normally pass through the command line when I am testing the script). </p>

<p>How can I pass this argument every time the script is run when the page loads?</p>
","<p>Presumably you're passing the arguments in on the command line as follows:</p>

<pre><code>php /path/to/wwwpublic/path/to/script.php arg1 arg2
</code></pre>

<p>... and then accessing them in the script thusly:</p>

<pre><code>&lt;?php
// $argv[0] is '/path/to/wwwpublic/path/to/script.php'
$argument1 = $argv[1];
$argument2 = $argv[2];
?&gt;
</code></pre>

<p>What you need to be doing when passing arguments through HTTP (accessing the script over the web) is using the query string and access them through the $_GET superglobal:</p>

<p>Go to <a href=""http://yourdomain.com/path/to/script.php?argument1=arg1&amp;argument2=arg2"" rel=""noreferrer"">http://yourdomain.com/path/to/script.php?argument1=arg1&amp;argument2=arg2</a></p>

<p>... and access:</p>

<pre><code>&lt;?php
$argument1 = $_GET['argument1'];
$argument2 = $_GET['argument2'];
?&gt;
</code></pre>

<p>If you want the script to run regardless of where you call it from (command line or from the browser) you'll want something like the following:</p>

<p><strong>EDIT:</strong> as pointed out by Cthulhu in the comments, the most direct way to test which environment you're executing in is to use the <a href=""http://php.net/manual/en/reserved.constants.php#constant.php-sapi"" rel=""noreferrer"">PHP_SAPI</a> constant.  I've updated the code accordingly:</p>

<pre><code>&lt;?php
if (PHP_SAPI === 'cli') {
    $argument1 = $argv[1];
    $argument2 = $argv[2];
}
else {
    $argument1 = $_GET['argument1'];
    $argument2 = $_GET['argument2'];
}
?&gt;
</code></pre>
","9612273"
"Cannot simply use PostgreSQL table name (""relation does not exist"")","188397","","<p>I'm trying to run the following PHP script to do a simple database query:</p>

<pre><code>$db_host = ""localhost"";
$db_name = ""showfinder"";
$username = ""user"";
$password = ""password"";
$dbconn = pg_connect(""host=$db_host dbname=$db_name user=$username password=$password"")
    or die('Could not connect: ' . pg_last_error());

$query = 'SELECT * FROM sf_bands LIMIT 10';
$result = pg_query($query) or die('Query failed: ' . pg_last_error());
</code></pre>

<p>This produces the following error:</p>

<blockquote>
  <p>Query failed: ERROR: relation ""sf_bands"" does not exist</p>
</blockquote>

<p>In all the examples I can find where someone gets an error stating the relation does not exist, it's because they use uppercase letters in their table name. My table name does not have uppercase letters. Is there a way to query my table without including the database name, i.e. <code>showfinder.sf_bands</code>?</p>
","<p>From what I've read, this error means that you're not referencing the table name correctly.  One common reason is that the table is defined with a mixed-case spelling, and you're trying to query it with all lower-case.</p>

<p>In other words, the following fails:</p>

<pre><code>CREATE TABLE ""SF_Bands"" ( ... );

SELECT * FROM sf_bands;  -- ERROR!
</code></pre>

<p>Use double-quotes to delimit identifiers so you can use the specific mixed-case spelling as the table is defined.</p>

<pre><code>SELECT * FROM ""SF_Bands"";
</code></pre>

<hr>

<p>Re your comment, you can add a schema to the ""search_path"" so that when you reference a table name without qualifying its schema, the query will match that table name by checked each schema in order.  Just like <code>PATH</code> in the shell or <code>include_path</code> in PHP, etc.  You can check your current schema search path:</p>

<pre><code>SHOW search_path
  ""$user"",public
</code></pre>

<p>You can change your schema search path:</p>

<pre><code>SET search_path TO showfinder,public;
</code></pre>

<p>See also <a href=""http://www.postgresql.org/docs/8.3/static/ddl-schemas.html"" rel=""noreferrer"">http://www.postgresql.org/docs/8.3/static/ddl-schemas.html</a></p>
","695312"
"Failed to connect to mailserver at ""localhost"" port 25","187950","","<p>I keep getting this error when I try to send an e-mail in PHP:</p>

<pre><code>Warning: mail() [function.mail]: Failed to connect to mailserver at ""localhost"" port 25, verify your ""SMTP"" and ""smtp_port"" setting in php.ini or use ini_set() in C:\wamp\www\dressoholic\register.php on line 50
</code></pre>

<p>my php.ini looks like this:</p>

<pre><code>[mail function]
; For Win32 only.
; http://php.net/smtp
SMTP = localhost
; http://php.net/smtp-port
smtp_port = 25

; For Win32 only.
; http://php.net/sendmail-from
sendmail_from = you@yoursite.com
</code></pre>

<p>I'm using my laptop as a server.. What am I doing wrong? Thanks.</p>
","<p>You need to be running a mail server locally.
If this is Unix, enable sendmail
If this is Windows  install the Simple Mail Transfer Server (not sure if the name is correct) component of IIs.  E.g. for windows 2003 follow this: <a href=""http://msdn.microsoft.com/en-us/library/8b83ac7t.aspx"" rel=""noreferrer"">http://msdn.microsoft.com/en-us/library/8b83ac7t.aspx</a></p>
","4532491"
"Can you ""compile"" PHP code?","187867","","<p>I know that PHP is compiled to byte code before it is run on the server, and then that byte code can be cached so that the whole script doesn't have to be re-interpreted with every web access.</p>

<p>But can you ""compile"" php and upload a binary-ish file, which will just be run by the byte code interpreter?</p>
","<p>After this question was asked, Facebook launched <strong>HipHop for PHP</strong> which is probably the best-tested PHP compiler to date (seeing as it ran one of the world’s 10 biggest websites). However, Facebook discontinued it in favour of HHVM, which is a virtual machine, not a compiler.</p>

<p>Beyond that, googling <code>PHP compiler</code> turns up a number of 3rd party solutions.</p>

<p><a href=""http://www.php-compiler.net/"" rel=""nofollow noreferrer"">Phalanger</a></p>

<ul>
<li><a href=""https://github.com/devsense/phalanger/"" rel=""nofollow noreferrer"">GitHub</a> (download), <a href=""http://en.wikipedia.org/wiki/Phalanger_%28compiler%29"" rel=""nofollow noreferrer"">Wikipedia</a></li>
<li>compiles to .NET (CIL)</li>
</ul>

<p><a href=""https://github.com/pbiggar/phc"" rel=""nofollow noreferrer"">phc</a></p>

<ul>
<li>compiles to native binaries</li>
<li>not very active now (February 2014) – last version in 2011, last change in summer 2013</li>
</ul>

<p><a href=""http://www.roadsend.com/"" rel=""nofollow noreferrer"">Roadsend PHP Compiler</a></p>

<ul>
<li><a href=""https://github.com/weyrick/roadsend-php"" rel=""nofollow noreferrer"">GitHub</a>, <a href=""https://github.com/weyrick/roadsend-php-raven"" rel=""nofollow noreferrer"">GitHub of a rewrite</a></li>
<li>free, open source implementation of PHP with compiler</li>
<li>compiles to native binaries (Windows, Linux)</li>
<li><a href=""http://roadsend-php.blogspot.cz/2010/08/current-status.html"" rel=""nofollow noreferrer"">discontinued since 2010 till contributors found</a> – website down, stays on GitHub where last change is from early 2012</li>
</ul>

<p><a href=""http://www.php.net/manual/en/book.bcompiler.php"" rel=""nofollow noreferrer"">bcompiler</a></p>

<ul>
<li>PECL extension of PHP</li>
<li>experimental</li>
<li>compiles to PHP bytecode, but can wrap it in Windows binary that loads PHP interpreter (see <a href=""http://www.php.net/manual/en/function.bcompiler-write-exe-footer.php"" rel=""nofollow noreferrer""><code>bcompiler_write_exe_footer()</code> manual</a>)</li>
<li>looks discontinued now (February 2014) – last change in 2011</li>
</ul>

<p><a href=""http://www.projectzero.org/"" rel=""nofollow noreferrer"">Project Zero</a></p>

<ul>
<li><a href=""http://en.wikipedia.org/wiki/Project_Zero"" rel=""nofollow noreferrer"">Wikipedia</a>, <a href=""http://www.ibm.com/developerworks/ibm/zero/"" rel=""nofollow noreferrer"">IBM</a></li>
<li>incubator of changes for <a href=""https://www.ibm.com/developerworks/websphere/zones/smash/"" rel=""nofollow noreferrer"">WebSphere sMash</a></li>
<li>supported by IBM</li>
<li>compiles to Java bytecode</li>
<li>looks discontinued now (February 2014) – website down, looks like big hype in 2008 and 2009</li>
</ul>

<p><a href=""http://www.bambalam.se/bamcompile/"" rel=""nofollow noreferrer"">Bambalam</a></p>

<ul>
<li>compiles to stand-alone Windows binaries</li>
<li>the binaries contain bytecode and a launcher</li>
<li>looks discontinued now (February 2014) – last change in 2006</li>
</ul>

<p><a href=""http://sourceforge.net/projects/binaryphp/"" rel=""nofollow noreferrer"">BinaryPHP</a></p>

<ul>
<li>compiles to C++</li>
<li>looks discontinued now (February 2014) – last change in 2003</li>
</ul>
","1408499"
"Can you 'exit' a loop in PHP?","187497","","<p>I have a loop that is doing some error checking in my PHP code. Originally it looked something like this...</p>

<pre><code>foreach($results as $result) {
    if (!$condition) {
        $halt = true;
        ErrorHandler::addErrorToStack('Unexpected result.');
    }

    doSomething();
 }

if (!$halt) {
    // do what I want cos I know there was no error
}
</code></pre>

<p>This works all well and good, but it is still looping through despite after one error it needn't. Is there a way to escape the loop?</p>
","<p>You are looking for the <a href=""http://www.php.net/break"" rel=""noreferrer"">break</a> statement.</p>

<pre><code>$arr = array('one', 'two', 'three', 'four', 'stop', 'five');
while (list(, $val) = each($arr)) {
    if ($val == 'stop') {
        break;    /* You could also write 'break 1;' here. */
    }
    echo ""$val&lt;br /&gt;\n"";
}
</code></pre>
","588900"
"How to find out if you're using HTTPS without $_SERVER['HTTPS']","187073","","<p>I've seen many tutorials online that says you need to check <code>$_SERVER['HTTPS']</code> if the server is connection is secured with HTTPS. My problem is that on some of the servers I use, <code>$_SERVER['HTTPS']</code> is an undefined variable that results in an error. Is there another variable I can check that should always be defined?</p>

<p>Just to be clear, I am currently using this code to resolve if it is an HTTPS connection:</p>

<pre><code>if(isset($_SERVER['HTTPS'])) {
    if ($_SERVER['HTTPS'] == ""on"") {
        $secure_connection = true;
    }
}
</code></pre>
","<p>Chacha, per the PHP documentation: ""Set to a non-empty value if the script was queried through the HTTPS protocol."" So your if statement there will return false in many cases where HTTPS is indeed on. You'll want to verify that <code>$_SERVER['HTTPS']</code> exists and is non-empty. In cases where HTTPS is not set correctly for a given server, you can try checking if <code>$_SERVER['SERVER_PORT']  == 443</code>.</p>

<p>But note that some servers will also set <code>$_SERVER['HTTPS']</code> to a non-empty value, so be sure to check this variable also.</p>

<p>Reference: <a href=""http://php.net/manual/en/reserved.variables.server.php"" rel=""noreferrer"">Documentation for <code>$_SERVER</code> and <code>$HTTP_SERVER_VARS</code> [deprecated]</a></p>
","1175137"
"php foreach with multidimensional array","186570","","<p>I'm developing a php app that uses a database class to query mySQL.</p>

<p>the class is here: <a href=""http://net.tutsplus.com/tutorials/php/real-world-oop-with-php-and-mysql/"">http://net.tutsplus.com/tutorials/php/real-world-oop-with-php-and-mysql/</a></p>

<p>I made some tweaks on the class to fit my needs, but there is a problem (maybe a stupid one)</p>

<p>When using select() it returns a multidimensional array like that for a table that has 3 cols (id, firstname, lastname):</p>

<pre>
Array
(
    [0] => Array
        (
            [id] => 1
            [firstname] => Firstname one
            [lastname] => Lastname one
        )

    [1] => Array
        (
            [id] => 2
            [firstname] => Firstname two
            [lastname] => Lastname two
        )

    [2] => Array
        (
            [id] => 3
            [firstname] => Firstname three
            [lastname] => Lastname three
        )
)
</pre>

<p>Now I want this array to be used as a mysql result (mysql_fetch_assoc).</p>

<p>I know that it may be used with foreach() but this is with simple arrays. so I think that I have to redeclare a new foreach() withing each foreach(), but I think this could slow down or cause some higher server load.</p>

<p>So how to apply foreach() with this multidimensional array the simplest way?</p>

<p>Thanks</p>
","<p>You can use foreach here just fine.</p>

<pre><code>foreach ($rows as $row) {
    echo $row['id'];
    echo $row['firstname'];
    echo $row['lastname'];
}
</code></pre>

<p>I think you are used to accessing the data with numerical indicies (such as <code>$row[0]</code>), but this is not necessary.  We can use <a href=""http://www.tizag.com/phpT/arrays.php"">associative arrays</a> to get the data we're after.</p>
","6413677"
"PHP mailer multiple address","186544","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/1770765/phpmailer-addaddress"">PHPMailer AddAddress()</a>  </p>
</blockquote>



<p>Here is my code.</p>

<pre>
require('class.phpmailer.php');
$mail = new PHPMailer();

$email = 'email1@test.com, email2@test.com, email3@test.com';

    $sendmail = ""$email"";

    $mail->AddAddress($sendmail,""Subject"");
    $mail->Subject = ""Subject""; 
    $mail->Body    = $content;      

    if(!$mail->Send()) { # sending mail failed
        $msg=""Unknown Error has Occured. Please try again Later."";
    }
    else {
        $msg=""Your Message has been sent. We'll keep in touch with you soon."";
    }   
}
</pre>

<p><strong>The Problem</strong><br />
if <strong>$email</strong> value is only 1. It will send. But multiple don't send. What should I do for this. I know that in mail function you have to separate multiple emails by comma. But not working in phpmailer.</p>
","<p>You need to call the <code>AddAddress</code> method once for every recipient. Like so:</p>

<pre><code>$mail-&gt;AddAddress('person1@domain.com', 'Person One');
$mail-&gt;AddAddress('person2@domain.com', 'Person Two');
// ..
</code></pre>

<p>Better yet, add them as Carbon Copy recipients.</p>

<pre><code>$mail-&gt;AddCC('person1@domain.com', 'Person One');
$mail-&gt;AddCC('person2@domain.com', 'Person Two');
// ..
</code></pre>

<p>To make things easy, you should loop through an array to do this.</p>

<pre><code>$recipients = array(
   'person1@domain.com' =&gt; 'Person One',
   'person2@domain.com' =&gt; 'Person Two',
   // ..
);
foreach($recipients as $email =&gt; $name)
{
   $mail-&gt;AddCC($email, $name);
}
</code></pre>
","3149528"
"JavaScript equivalent of PHP's in_array()","186396","","<p>Is there a way in JavaScript to compare values from one array and see if it is in another array? </p>

<p>Similar to PHP's <a href=""http://www.php.net/in_array"" rel=""noreferrer""><code>in_array</code></a> function?</p>
","<p>No, it doesn't have one. For this reason most popular libraries come with one in their utility packages. Check out jQuery's <em><a href=""http://api.jquery.com/jQuery.inArray/"" rel=""noreferrer"">inArray</a></em> and Prototype's <em><a href=""http://prototypejs.org/doc/latest/language/Array/prototype/indexOf/"" rel=""noreferrer"">Array.indexOf</a></em> for examples. </p>

<p>jQuery's implementation of it is as simple as you might expect:</p>

<pre><code>function inArray(needle, haystack) {
    var length = haystack.length;
    for(var i = 0; i &lt; length; i++) {
        if(haystack[i] == needle) return true;
    }
    return false;
}
</code></pre>

<p>If you are dealing with a sane amount of array elements the above will do the trick nicely.</p>

<p><strong>EDIT</strong>: Whoops. I didn't even notice you wanted to see if an array was inside another. According to the PHP documentation this is the expected behavior of PHP's <a href=""http://www.php.net/in_array"" rel=""noreferrer""><code>in_array</code></a>:</p>

<pre><code>$a = array(array('p', 'h'), array('p', 'r'), 'o');

if (in_array(array('p', 'h'), $a)) {
    echo ""'ph' was found\n"";
}

if (in_array(array('f', 'i'), $a)) {
    echo ""'fi' was found\n"";
}

if (in_array('o', $a)) {
    echo ""'o' was found\n"";
}

// Output:
//  'ph' was found
//  'o' was found
</code></pre>

<p>The code posted by Chris and Alex does not follow this behavior. Alex's is the official version of Prototype's indexOf, and Chris's is more like PHP's <a href=""http://www.php.net/array_intersect"" rel=""noreferrer""><code>array_intersect</code></a>. This does what you want:</p>

<pre><code>function arrayCompare(a1, a2) {
    if (a1.length != a2.length) return false;
    var length = a2.length;
    for (var i = 0; i &lt; length; i++) {
        if (a1[i] !== a2[i]) return false;
    }
    return true;
}

function inArray(needle, haystack) {
    var length = haystack.length;
    for(var i = 0; i &lt; length; i++) {
        if(typeof haystack[i] == 'object') {
            if(arrayCompare(haystack[i], needle)) return true;
        } else {
            if(haystack[i] == needle) return true;
        }
    }
    return false;
}
</code></pre>

<p>And this my test of the above on it:</p>

<pre><code>var a = [['p','h'],['p','r'],'o'];
if(inArray(['p','h'], a)) {
    alert('ph was found');
}
if(inArray(['f','i'], a)) {
    alert('fi was found');
}
if(inArray('o', a)) {
    alert('o was found');
}  
// Results:
//   alerts 'ph' was found
//   alerts 'o' was found
</code></pre>

<p>Note that I intentionally did not extend the Array prototype as it is generally a bad idea to do so.</p>
","784015"
"How to use PHP with Visual Studio","186255","","<p>First let me say I've never used PHP but I'm looking to learn it, so my question is this how do you use PHP within Visual Studio Ultimate? is it similar to how you declare JQuery i.e  </p>

<pre><code>$(document).ready(function () 
{ 
    // Code goes here?  
});
</code></pre>

<p>I've done multiple searches on Google, but I don't get the answer I'm looking for.</p>

<p>Or do I need a complete different bit of software to use it?</p>
","<p>By default VS is not made to run PHP, but you can do it with extensions:</p>

<p>You can install an add-on with the extension manager, <a href=""http://visualstudiogallery.msdn.microsoft.com/6eb51f05-ef01-4513-ac83-4c5f50c95fb5?SRC=VSIDE"" rel=""noreferrer"">PHP Tools for Visual Studio</a>.</p>

<p>If you want to install it inside VS, go to Tools > Extension Manager > Online Gallery > Search for PHP where you will find PHP Tools (the link above) for Visual Studio. Also you have <a href=""https://www.vsphp.com/"" rel=""noreferrer"">VS.Php for Visual Studio</a>. Both are <strong>not free</strong>.</p>

<p>You have also a cool PHP compiler called Phalanger:
<img src=""https://i.stack.imgur.com/8va3r.png"" alt=""Phalanger PHP Compiler""></p>

<p>If I'm not mistaken, the code you wrote above is JavaScript (jQuery) and not PHP.</p>

<p>If you want cool standalone IDE's for PHP: (Free)</p>

<ul>
<li>Netbeans: <a href=""https://netbeans.org/downloads/start.html?platform=windows&amp;lang=en&amp;option=php"" rel=""noreferrer"">https://netbeans.org/downloads/start.html?platform=windows&amp;lang=en&amp;option=php</a></li>
<li>Eclipse: <a href=""http://www.eclipse.org/downloads/packages/eclipse-php-developers/heliosr"" rel=""noreferrer"">http://www.eclipse.org/downloads/packages/eclipse-php-developers/heliosr</a></li>
</ul>
","10529375"
"Detect Browser Language in PHP","186151","","<p>I use the following PHP script as index for my website.</p>

<p>This script should include a specific page depending on the browser's language (automatically detected).</p>

<p>This script does not work well with all browsers, so it always includes <code>index_en.php</code> for any detected language (the cause of the problem is most probably an issue with some Accept-Language header not being considered).</p>

<p>Could you please suggest me a more robust solution?</p>

<pre><code>&lt;?php
// Open session var
session_start();
// views: 1 = first visit; &gt;1 = second visit

// Detect language from user agent browser
function lixlpixel_get_env_var($Var)
{
     if(empty($GLOBALS[$Var]))
     {
         $GLOBALS[$Var]=(!empty($GLOBALS['_SERVER'][$Var]))?
         $GLOBALS['_SERVER'][$Var] : (!empty($GLOBALS['HTTP_SERVER_VARS'][$Var])) ? $GLOBALS['HTTP_SERVER_VARS'][$Var]:'';
     }
}

function lixlpixel_detect_lang()
{
     // Detect HTTP_ACCEPT_LANGUAGE &amp; HTTP_USER_AGENT.
     lixlpixel_get_env_var('HTTP_ACCEPT_LANGUAGE');
     lixlpixel_get_env_var('HTTP_USER_AGENT');

     $_AL=strtolower($GLOBALS['HTTP_ACCEPT_LANGUAGE']);
     $_UA=strtolower($GLOBALS['HTTP_USER_AGENT']);

     // Try to detect Primary language if several languages are accepted.
     foreach($GLOBALS['_LANG'] as $K)
     {
         if(strpos($_AL, $K)===0)
         return $K;
     }

     // Try to detect any language if not yet detected.
     foreach($GLOBALS['_LANG'] as $K)
     {
         if(strpos($_AL, $K)!==false)
         return $K;
     }
     foreach($GLOBALS['_LANG'] as $K)
     {
         //if(preg_match(""/[[( ]{$K}[;,_-)]/"",$_UA)) // matching other letters (create an error for seo spyder)
         return $K;
     }

     // Return default language if language is not yet detected.
     return $GLOBALS['_DLANG'];
}

// Define default language.
$GLOBALS['_DLANG']='en';

// Define all available languages.
// WARNING: uncomment all available languages

$GLOBALS['_LANG'] = array(
'af', // afrikaans.
'ar', // arabic.
'bg', // bulgarian.
'ca', // catalan.
'cs', // czech.
'da', // danish.
'de', // german.
'el', // greek.
'en', // english.
'es', // spanish.
'et', // estonian.
'fi', // finnish.
'fr', // french.
'gl', // galician.
'he', // hebrew.
'hi', // hindi.
'hr', // croatian.
'hu', // hungarian.
'id', // indonesian.
'it', // italian.
'ja', // japanese.
'ko', // korean.
'ka', // georgian.
'lt', // lithuanian.
'lv', // latvian.
'ms', // malay.
'nl', // dutch.
'no', // norwegian.
'pl', // polish.
'pt', // portuguese.
'ro', // romanian.
'ru', // russian.
'sk', // slovak.
'sl', // slovenian.
'sq', // albanian.
'sr', // serbian.
'sv', // swedish.
'th', // thai.
'tr', // turkish.
'uk', // ukrainian.
'zh' // chinese.
);

// Redirect to the correct location.
// Example Implementation aff var lang to name file
/*
echo 'The Language detected is: '.lixlpixel_detect_lang(); // For Demonstration
echo ""&lt;br /&gt;"";    
*/
$lang_var = lixlpixel_detect_lang(); //insert lang var system in a new var for conditional statement
/*
echo ""&lt;br /&gt;"";    

echo $lang_var; // print var for trace

echo ""&lt;br /&gt;"";    
*/
// Insert the right page iacoording with the language in the browser
switch ($lang_var){
    case ""fr"":
        //echo ""PAGE DE"";
        include(""index_fr.php"");//include check session DE
        break;
    case ""it"":
        //echo ""PAGE IT"";
        include(""index_it.php"");
        break;
    case ""en"":
        //echo ""PAGE EN"";
        include(""index_en.php"");
        break;        
    default:
        //echo ""PAGE EN - Setting Default"";
        include(""index_en.php"");//include EN in all other cases of different lang detection
        break;
}
?&gt;
</code></pre>
","<p><strong>why dont you keep it simple and clean</strong></p>

<pre><code>&lt;?php
$lang = substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2);
switch ($lang){
    case ""fr"":
        //echo ""PAGE FR"";
        include(""index_fr.php"");//include check session FR
        break;
    case ""it"":
        //echo ""PAGE IT"";
        include(""index_it.php"");
        break;
    case ""en"":
        //echo ""PAGE EN"";
        include(""index_en.php"");
        break;        
    default:
        //echo ""PAGE EN - Setting Default"";
        include(""index_en.php"");//include EN in all other cases of different lang detection
        break;
}
?&gt;
</code></pre>
","3770616"
"PHP calculate age","185745","","<p>I'm looking for a way to calculate the age of a person, given their DOB in the format dd/mm/yyyy.</p>

<p>I was using the following function which worked fine for several months until some kind of glitch  caused the while loop to never end and grind the entire site to a halt. Since there are almost 100,000 DOBs going through this function several times a day, it's hard to pin down what was causing this.</p>

<p>Does anyone have a more reliable way of calculating the age?</p>

<pre><code>//replace / with - so strtotime works
$dob = strtotime(str_replace(""/"",""-"",$birthdayDate));       
$tdate = time();

$age = 0;
while( $tdate &gt; $dob = strtotime('+1 year', $dob))
{
    ++$age;
}
return $age;
</code></pre>

<p>EDIT: this function seems to work OK some of the time, but returns ""40"" for a DOB of 14/09/1986</p>

<pre><code>return floor((time() - strtotime($birthdayDate))/31556926);
</code></pre>
","<p>This works fine.    </p>

<pre><code>&lt;?php
  //date in mm/dd/yyyy format; or it can be in other formats as well
  $birthDate = ""12/17/1983"";
  //explode the date to get month, day and year
  $birthDate = explode(""/"", $birthDate);
  //get age from date or birthdate
  $age = (date(""md"", date(""U"", mktime(0, 0, 0, $birthDate[0], $birthDate[1], $birthDate[2]))) &gt; date(""md"")
    ? ((date(""Y"") - $birthDate[2]) - 1)
    : (date(""Y"") - $birthDate[2]));
  echo ""Age is:"" . $age;
?&gt;
</code></pre>
","3776843"
"What is a Python equivalent of PHP's var_dump()?","185607","","<p>When debugging in PHP, I frequently find it useful to simply stick a <a href=""http://php.net/var-dump"" rel=""noreferrer"">var_dump()</a> in my code to show me what a variable is, what its value is, and the same for anything that it contains.</p>

<p>What is a good Python equivalent for this?</p>
","<p>To display a value nicely, you can use the <a href=""http://docs.python.org/library/pprint.html"" rel=""noreferrer"">pprint</a> module. The easiest way to dump all variables with it is to do</p>

<pre><code>from pprint import pprint

pprint(globals())
pprint(locals())
</code></pre>

<p>If you are running in CGI, a useful debugging feature is the <a href=""http://docs.python.org/library/cgitb.html"" rel=""noreferrer"">cgitb</a> module, which displays the value of local variables as part of the traceback.</p>
","383953"
"How to convert string to boolean php","185418","","<p>How can I convert string to <code>boolean</code>?</p>

<pre><code>$string = 'false';

$test_mode_mail = settype($string,'boolean');

var_dump($test_mode_mail);

if($test_mode_mail) echo 'test mode is on.';
</code></pre>

<p>it returns,</p>

<blockquote>
  <p>boolean true</p>
</blockquote>

<p>but it should be <code>boolean false</code>.</p>
","<p>Strings always evaluate to boolean true unless they have a value that's considered ""empty"" by PHP (taken from the <a href=""http://php.net/manual/en/function.empty.php"" rel=""noreferrer"">documentation for <code>empty</code></a>):</p>

<ol>
<li><code>""""</code> (an empty string);</li>
<li><code>""0""</code> (0 as a string)</li>
</ol>

<p>If you need to set a boolean based on the text value of a string, then you'll need to check for the presence or otherwise of that value. </p>

<pre><code>$test_mode_mail = $string === 'true'? true: false;
</code></pre>

<p>EDIT: The above code is intended for clarity of understanding.  In actual use the following code may be more appropriate: </p>

<pre><code>$test_mode_mail = ($string === 'true');
</code></pre>
","7336873"
"Convert utf8-characters to iso-88591 and back in PHP","185308","","<p>Some of my script are using different encoding, and when I try to combine them, this has becom an issue.</p>

<p>But I can't change the encoding they use, instead I want to change the encodig of the result from script A, and use it as parameter in script B. </p>

<p>So: is there any simple way to change a string from UTF-8 to ISO-88591 in PHP? I have looked at utf_encode and _decode, but they doesn't do what i want. Why doesn't there exsist any ""utf2iso()""-function, or similar?</p>

<p>I don't think I have characters that can't be written in ISO-format, so that shouldn't be an huge issue.</p>
","<p>Have a look at <a href=""http://php.net/function.iconv"" rel=""noreferrer""><code>iconv()</code></a> or <a href=""http://php.net/function.mb-convert-encoding"" rel=""noreferrer""><code>mb_convert_encoding()</code></a>.
Just by the way: why don't <a href=""http://php.net/function.utf8-encode"" rel=""noreferrer""><code>utf8_encode()</code></a> and <a href=""http://php.net/function.utf8-decode"" rel=""noreferrer""><code>utf8_decode()</code></a> work for you?</p>

<blockquote>
  <p><strong>utf8_decode</strong> —  Converts a string with
  ISO-8859-1 characters encoded with
  UTF-8 to single-byte ISO-8859-1</p>
  
  <p><strong>utf8_encode</strong> — Encodes an ISO-8859-1
  string to UTF-8</p>
</blockquote>

<p>So essentially</p>

<pre><code>$utf8 = 'ÄÖÜ'; // file must be UTF-8 encoded
$iso88591_1 = utf8_decode($utf8);
$iso88591_2 = iconv('UTF-8', 'ISO-8859-1', $utf8);
$iso88591_2 = mb_convert_encoding($utf8, 'ISO-8859-1', 'UTF-8');

$iso88591 = 'ÄÖÜ'; // file must be ISO-8859-1 encoded
$utf8_1 = utf8_encode($iso88591);
$utf8_2 = iconv('ISO-8859-1', 'UTF-8', $iso88591);
$utf8_2 = mb_convert_encoding($iso88591, 'UTF-8', 'ISO-8859-1');
</code></pre>

<p>all should do the same - with <code>utf8_en/decode()</code> requiring no special extension, <code>mb_convert_encoding()</code> requiring ext/mbstring and <code>iconv()</code> requiring ext/iconv.</p>
","374463"
"PHP Create and Save a txt file to root directory","184535","","<p>I am trying to create and save a file to the root directory of my site but I don't know where its creating to file as I cannot see any...I need to file to be overwritten everytime if possible too</p>

<p>Here is the code:</p>

<pre><code>$content = ""some text here"";
$fp = fopen(""myText.txt"",""wb"");
fwrite($fp,$content);
fclose($fp);
</code></pre>

<p>How can I set it to save on the root?</p>
","<p>It's creating the file in the same directory as your script.  Try this instead.</p>

<pre><code>$content = ""some text here"";
$fp = fopen($_SERVER['DOCUMENT_ROOT'] . ""/myText.txt"",""wb"");
fwrite($fp,$content);
fclose($fp);
</code></pre>
","9265401"
"PHP prepend leading zero before single digit number, on-the-fly","184386","","<p>PHP - Is there a quick, on-the-fly method to test for a single character string, then prepend a leading zero?</p>

<p>Example:</p>

<pre><code>$year = 11;
$month = 4;

$stamp = $year.add_single_zero_if_needed($month);  // Imaginary function

echo $stamp; // 1104
</code></pre>
","<p>You can use sprintf: <a href=""http://php.net/manual/en/function.sprintf.php"" rel=""noreferrer"">http://php.net/manual/en/function.sprintf.php</a></p>

<pre><code>&lt;?php
$num = 4;
$num_padded = sprintf(""%02d"", $num);
echo $num_padded; // returns 04
?&gt;
</code></pre>

<p>It will only add the zero if it's less than the required number of characters.</p>

<p><strong>Edit: As pointed out by @FelipeAls:</strong></p>

<p>When working with numbers, you should use <code>%d</code> (rather than <code>%s</code>), especially when there is the potential for negative numbers. If you're only using positive numbers, either option works fine.</p>

<p>For example:</p>

<p><code>sprintf(""%04s"", 10);</code> returns 0010<br>
<code>sprintf(""%04s"", -10);</code> returns 0-10</p>

<p>Where as:</p>

<p><code>sprintf(""%04d"", 10);</code> returns  0010<br>
<code>sprintf(""%04d"", -10);</code> returns -010</p>
","5659093"
"Object of class stdClass could not be converted to string","184286","","<p>I am having a problem with PHP at the moment, I am getting this error, </p>

<p><code>Object of class stdClass could not be converted to string</code> the error occurs when I run this portion of code in my site, </p>

<pre><code>function myaccount() {
    $data['user_data'] = $this-&gt;auth-&gt;get_userdata($this-&gt;uri-&gt;segment(3));
    //var_dump($data['user_data']);
    $this-&gt;load-&gt;model('users_model');
    $data['user_info'] = $this-&gt;users_model-&gt;get_user_and_roadmaps_by_id($this-&gt;uri-&gt;segment(3));
    $this-&gt;template-&gt;build('users/my_account', $data);
}
</code></pre>

<p>The line in which the error is occuring is this one, </p>

<pre><code>$data['user_data'] = $this-&gt;auth-&gt;get_userdata($this-&gt;uri-&gt;segment(3));
</code></pre>

<p>And this line is calling this function, </p>

<pre><code>   function get_userdata() {

        $CI =&amp; get_instance();

        if(!$this-&gt;logged_in()) {
            return false;
        } else {
            $query = $CI-&gt;db-&gt;get_where('users', array('user_id' =&gt; $CI-&gt;session-&gt;userdata('user_id')));
            return $query-&gt;row();
        }
    }
</code></pre>

<p>I don't really now what this problem is, so any help would be great.</p>
","<p>Most likely, the <code>userdata()</code> function is returning an object, not a string. Look into the documentation (or var_dump the return value) to find out which value you need to use.</p>
","3607572"
"Notice: Array to string conversion in","183660","","<p>I'm trying to select a value from a database and display it to the user using SELECT. However I keep getting this error:</p>

<pre><code>Notice: Array to string conversion in (pathname) on line 36.
</code></pre>

<p>I thought that the <code>@mysql_fetch_assoc();</code> would fix this but I still get the notice. This is the part of the code where I'm getting the error:</p>

<pre><code>  {
  $loggedin = 1;

  $get = @mysql_query(""SELECT money FROM players WHERE username = 
 '$_SESSION[username]'"");
  $money = @mysql_fetch_assoc($get);

  echo '&lt;p id= ""status""&gt;'.$_SESSION['username'].'&lt;br&gt;
  Money: '.$money.'.
  &lt;/p&gt;';
  }
</code></pre>

<p>What am I doing wrong? I'm pretty new to PHP.</p>
","<p>The problem is that $money is an array and you are treating it like a string or a variable which can be easily converted to string. You should say something like: </p>

<pre><code> '.... Money:'.$money['money']
</code></pre>
","11596709"
"Run a PHP file in a cron job using CPanel","183591","","<p>I am just trying to run a PHP script using a cron job within CPanel - is this the correct syntax:</p>

<pre><code>/usr/bin/php -q /home/username/public_html/cron/cron.php &gt;/dev/null
</code></pre>

<p>I am not getting any email notifications stating a cron has been completed, do I need to do anything specific with the PHP file?</p>
","<p>In crontab system :</p>

<ul>
<li><code>/usr/bin/php</code> is php binary path (different in some systems ex: freebsd <code>/usr/local/bin/php</code>, linux: <code>/usr/bin/php</code>)</li>
<li><code>/home/username/public_html/cron/cron.php</code> should be your php script path</li>
<li><code>/dev/null</code> should be cron output , ex: <code>/home/username/stdoutx.txt</code></li>
</ul>

<p>So you can monitor your cron by viewing cron output <code>/home/username/stdoutx.txt</code></p>
","7332945"
"Simplest two-way encryption using PHP","183450","","<p>What is the simplest way of doing two way encryption in common PHP installs?</p>

<p>I need to be able to encrypt data with a string key, and use the same key to decrypt on the other end.</p>

<p>The security isn't as big of a concern as the portability of the code, so I'd like to be able to keep things as simple as possible. Currently, I am using an RC4 implementation, but if I can find something natively supported I figure I can save a lot of unnecessary code.</p>
","<p><strong>Edited:</strong></p>

<p>You should really be using <a href=""https://php.net/openssl_encrypt"" rel=""noreferrer"">openssl_encrypt()</a> &amp; <a href=""https://php.net/openssl_decrypt"" rel=""noreferrer"">openssl_decrypt()</a></p>

<p>As <a href=""https://stackoverflow.com/a/30189841/2224584"">Scott</a> says, Mcrypt is not a good idea as it has not been updated since 2007.</p>

<p>There is even an RFC to remove Mcrypt from PHP - <a href=""https://wiki.php.net/rfc/mcrypt-viking-funeral"" rel=""noreferrer"">https://wiki.php.net/rfc/mcrypt-viking-funeral</a></p>
","9262137"
"php execute a background process","183253","","<p>I need to execute a directory copy upon a user action, but the directories are quite large, so I would like to be able to perform such an action without the user being aware of the time it takes for the copy to complete.</p>

<p>Any suggestions would be much appreciated.</p>
","<p>Assuming this is running on a Linux machine, I've always handled it like this:</p>

<pre><code>exec(sprintf(""%s &gt; %s 2&gt;&amp;1 &amp; echo $! &gt;&gt; %s"", $cmd, $outputfile, $pidfile));
</code></pre>

<p>This launches the command <code>$cmd</code>, redirects the command output to <code>$outputfile</code>, and writes the process id to <code>$pidfile</code>.</p>

<p>That lets you easily monitor what the process is doing and if it's still running.</p>

<pre><code>function isRunning($pid){
    try{
        $result = shell_exec(sprintf(""ps %d"", $pid));
        if( count(preg_split(""/\n/"", $result)) &gt; 2){
            return true;
        }
    }catch(Exception $e){}

    return false;
}
</code></pre>
","45966"
"CodeIgniter activerecord, retrieve last insert id?","183199","","<p>Are there any options to get the last insert id of a new record in CodeIgniter?</p>

<pre><code>$last_id = $this-&gt;db-&gt;insert('tablename',
    array('firstcolumn' =&gt; 'value',
    'secondcolumn' =&gt; 'value')
);
</code></pre>

<p>Considering the table consits of fields id (autoincrement) firstcolumn and secondcolumn.</p>

<p>This way you can use the insert id in the following code.</p>
","<p>Shame on me...</p>

<p>I looked at the <a href=""https://ellislab.com/codeigniter/user-guide/database/helpers.html"" rel=""noreferrer"">user guide</a> and the first function is <code>$this-&gt;db-&gt;insert_id();</code></p>

<p>This also works with activerecord inserts...</p>

<p>EDIT: I updated the link</p>
","1985980"
"How do I convert a PDF document to a preview image in PHP?","183168","","<p>What libraries, extensions etc. would be required to render a portion of a PDF document to an image file?</p>

<p>Most PHP PDF libraries that I have found center around creating PDF documents, but is there a simple way to render a document to an image format suitable for web use?</p>

<p>Our environment is a LAMP stack.</p>
","<p>You need <a href=""http://us3.php.net/imagick"" rel=""noreferrer""><code>ImageMagick</code></a> and <a href=""http://sourceforge.net/projects/ghostscript/"" rel=""noreferrer""><code>GhostScript</code></a></p>

<pre><code>&lt;?php
$im = new imagick('file.pdf[0]');
$im-&gt;setImageFormat('jpg');
header('Content-Type: image/jpeg');
echo $im;
?&gt;
</code></pre>

<p>The <code>[0]</code> means <code>page 1</code>. </p>
","467805"
"Find what 2 numbers add to something and multiply to something","183046","","<p>Hey so I'm making a factoring program and I'm wondering if anyone can give me any ideas on an efficient way to find what two numbers multiple to a specified number, and also add to a specified number.</p>

<p>for example I may have</p>

<p>(a)(b) = 6</p>

<p>a + b = 5</p>

<p>So essentially i just need a way to find the a and b values. In this case they would be 2 and 3. </p>

<p>Can anyone give me any ideas on where to start? Negative numbers must also be considered for use.</p>
","<p>Come on guys, there is no need to loop, just use simple math to solve this equation system:</p>

<p>a*b = i;</p>

<p>a+b = j;</p>

<p>a = j/b;</p>

<p>a = i-b;</p>

<p>j/b = i-b; so:</p>

<p>b + j/b + i = 0</p>

<p><strong>b^2 + i*b + j = 0</strong></p>

<p>From here, its a quadratic equation, and it's trivial to find <strong>b</strong> (just implement the <a href=""http://en.wikipedia.org/wiki/Quadratic_equation#Quadratic_formula"" rel=""noreferrer"">quadratic equation formula</a>) and from there get the value for <strong>a</strong>.</p>

<p>EDIT:</p>

<p>There you go:</p>

<pre><code>function finder($add,$product)
{

 $inside_root = $add*$add - 4*$product;

 if($inside_root &gt;=0)
 {

     $b = ($add + sqrt($inside_root))/2;
     $a = $add - $b;

     echo ""$a+$b = $add and $a*$b=$product\n"";

 }else
 {
   echo ""No real solution\n"";
 }
}
</code></pre>

<p>Real live action:</p>

<p><a href=""http://codepad.org/JBxMgHBd"" rel=""noreferrer"">http://codepad.org/JBxMgHBd</a></p>
","9605056"
"PHP: date function to get month of the date","183011","","<p>I want to be able to figure out the month of date variable. I'm ex vb.net and the way to do it there is just <code>date.Month</code>. How do I do this in PHP?</p>

<p>Thanks,</p>

<p>Jonesy</p>

<p>I used <code>date_format($date, ""m""); //01, 02..12</code></p>

<p>This is what I wanted, question now is how do I compare this to an int since <code>$monthnumber = 01</code> just becomes <code>1</code></p>
","<p>See <a href=""http://php.net/date"" rel=""nofollow noreferrer"">http://php.net/date</a></p>

<p><code>date('M')</code> or <code>date('n')</code> or <code>date('m')</code>...</p>

<p><strong>Update</strong></p>

<blockquote>
  <p><em>m</em>  Numeric representation of a month, with leading zeros    <strong>01 through 12</strong></p>
  
  <p><em>n</em>  Numeric representation of a month, without leading zeros  <strong>1 through 12</strong></p>
  
  <p><em>F</em>  Alphabetic representation of a month  <strong>January through December</strong></p>
</blockquote>
","3768094"
"PHP code to convert a MySQL query to CSV","182913","","<p>What is the most efficient way to convert a MySQL query to CSV in PHP please?</p>

<p>It would be best to avoid temp files as this reduces portability (dir paths and setting file-system permissions required).</p>

<p>The CSV should also include one top line of field names.</p>
","<pre><code>SELECT * INTO OUTFILE ""c:/mydata.csv""
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '""'
LINES TERMINATED BY ""\n""
FROM my_table;
</code></pre>

<p>(<em>the documentation for this is here: <a href=""http://dev.mysql.com/doc/refman/5.0/en/select.html"" rel=""noreferrer"">http://dev.mysql.com/doc/refman/5.0/en/select.html</a></em>)</p>

<p>or:</p>

<pre><code>$select = ""SELECT * FROM table_name"";

$export = mysql_query ( $select ) or die ( ""Sql error : "" . mysql_error( ) );

$fields = mysql_num_fields ( $export );

for ( $i = 0; $i &lt; $fields; $i++ )
{
    $header .= mysql_field_name( $export , $i ) . ""\t"";
}

while( $row = mysql_fetch_row( $export ) )
{
    $line = '';
    foreach( $row as $value )
    {                                            
        if ( ( !isset( $value ) ) || ( $value == """" ) )
        {
            $value = ""\t"";
        }
        else
        {
            $value = str_replace( '""' , '""""' , $value );
            $value = '""' . $value . '""' . ""\t"";
        }
        $line .= $value;
    }
    $data .= trim( $line ) . ""\n"";
}
$data = str_replace( ""\r"" , """" , $data );

if ( $data == """" )
{
    $data = ""\n(0) Records Found!\n"";                        
}

header(""Content-type: application/octet-stream"");
header(""Content-Disposition: attachment; filename=your_desired_name.xls"");
header(""Pragma: no-cache"");
header(""Expires: 0"");
print ""$header\n$data"";
</code></pre>
","125125"
"Notice: Trying to get property of non-object error","182677","","<p>i am trying to get data from:</p>

<p><a href=""http://api.convoytrucking.net/api.php?api_key=public&amp;show=player&amp;player_name=Mick_Gibson"">http://api.convoytrucking.net/api.php?api_key=public&amp;show=player&amp;player_name=Mick_Gibson</a></p>

<p>but if i want to get player_name variable with this code:</p>

<pre><code>&lt;?  
$js = file_get_contents('http://api.convoytrucking.net/api.php?api_key=public&amp;show=player&amp;player_name=Mick_Gibson');
  $pjs = json_decode($js);
  var_dump($pjs-&gt;{'player_name'});
?&gt;
</code></pre>

<p>i get error:</p>

<blockquote>
  <p>Notice: Trying to get property of non-object in **\htdocs\index.php on
  line 9  + var_dump() returns: NULL</p>
</blockquote>

<p><code>var_dump($pjs)</code> returns:</p>

<pre><code>array(1) { [0]=&gt; object(stdClass)#52 (15) { [""player_name""]=&gt; string(11) ""Mick_Gibson"" [""player_id""]=&gt; int(88) [""rank""]=&gt; string(12) ""FIRE TURTLEE"" [""lastseen""]=&gt; int(1393797692) [""registration_date""]=&gt; string(19) ""2012-08-10 17:01:34"" [""last_mission_date""]=&gt; string(19) ""2014-03-02 21:41:50"" [""time_offset""]=&gt; int(1) [""house_id""]=&gt; int(611) [""fines""]=&gt; int(0) [""wanted""]=&gt; int(0) [""police_badge""]=&gt; bool(true) [""vip""]=&gt; bool(false) [""staff""]=&gt; NULL [""stats""]=&gt; object(stdClass)#53 (23) { [""score""]=&gt; int(2941) [""convoy_score""]=&gt; int(818) [""ARTIC""]=&gt; int(515) [""DUMPER""]=&gt; int(565) [""TANKER""]=&gt; int(56) [""CEMENT""]=&gt; int(163) [""TRASH""]=&gt; int(7) [""ARMORED""]=&gt; int(9) [""VAN""]=&gt; int(501) [""TOW""]=&gt; int(502) [""COACH""]=&gt; int(4) [""LIMO""]=&gt; int(97) [""ARRESTS""]=&gt; int(272) [""GTA""]=&gt; int(67) [""BURGLAR""]=&gt; int(122) [""HEIST""]=&gt; int(1) [""PLANE""]=&gt; int(48) [""HELI""]=&gt; int(12) [""FAILED""]=&gt; int(312) [""OVERLOADS""]=&gt; int(160) [""TRUCK_LOADS""]=&gt; int(1275) [""ODOMETER""]=&gt; int(28320798) [""TIME""]=&gt; int(2078450) } [""achievements""]=&gt; array(4) { [0]=&gt; string(20) ""Professional Trucker"" [1]=&gt; string(13) ""Gravel Hauler"" [2]=&gt; string(12) ""Delivery Boy"" [3]=&gt; string(7) ""Wrecker"" } } }
</code></pre>
","<p>This is because <code>$pjs</code> is an one-element-array of objects, so first you should access the array element, which is an object and then access its attributes.</p>

<pre><code>echo $pjs[0]-&gt;player_name;
</code></pre>

<p>Actually dump result that you pasted tells it very clearly.</p>
","22636902"
"How do I install cURL on Windows?","182263","","<p>I have followed all the instructions here: <a href=""http://www.tonyspencer.com/2003/10/22/curl-with-php-and-apache-on-windows/"" rel=""noreferrer"">http://www.tonyspencer.com/2003/10/22/curl-with-php-and-apache-on-windows/</a></p>

<p>to install &amp; config apache
get the PHP5 packages
and get the CURL packages.</p>

<p>I run the apache and run a PHP script. no problem.
but when I run the php script with curl, it fails. </p>

<p>It returns:  <code>**Call to undefined function curl_version() in C:\Program Files\Apache Software Foundation\Apache2.2\htdocs\testing.php on line 5**</code></p>

<p>In which line 5 is a called to <code>curl_init()</code></p>

<p>I output the php -i  to see whether the right path to extension is called.  It is correctly set:</p>

<pre><code>extension_dir =&gt; C:\PHP\ext =&gt; C:\PHP\ext
cURL support =&gt; enabled
cURL Information =&gt; libcurl/7.16.0 OpenSSL/0.9.8g zlib/1.2.3
</code></pre>

<p>I even tried to run <code>curl_version()</code>  but still, same kind of error comes up.<br>
It looks like the PHP can't find the CURL extension, but the <code>php.ini</code> (and also php -i) shows that it is set.</p>

<p>any idea? :)</p>

<pre><code>P.S&gt;  System I m running on:
Windows XP
Apache 2.2
PHP 5.2.6
CURL Win32 Generic Binaries: Win32 2000/XP  metalink    7.19.0  binary  SSL enabled     Daniel Stenberg     249 KB
</code></pre>

<p>I didn't get this:  </p>

<pre><code>Win32 2000/XP   7.19.0  libcurl     SSL enabled     Günter Knauf    1.55 MB
Should I get this one instead?
</code></pre>

<hr>

<p>The reason I need to use CURL is that it is the requirement from my project.  So, I can only stick with that.
XAMPP... how does it work in Windows?   Is there any site that you can recommend?  Thanks.</p>

<p>I have tried a lot of things on installing cURL and check everything, but still, I'm stilling circling around the problem and have no idea what's going on.  </p>

<p>The Apache server uses the right PHP.ini.  and the PHP.ini has the correct extension_dir and extension=php_curl.dll
I have no idea why it doesn't work.   even I follow every step for setting it up. :(</p>
","<p>You're probably mistaking what PHP.ini you need to edit. first, add a PHPinfo(); to a info.php, and run it from your browser.</p>

<p>Write down the PHP ini directory path you see in the variables list now!
You will probably notice that it's different from your PHP-CLI ini file.</p>

<p>Enable the extension</p>

<p>You're done :-)</p>
","181555"
"PHP - add 1 day to date format mm-dd-yyyy","182121","","<pre><code>&lt;?php
    $date = ""04-15-2013"";
    $date = strtotime($date);
    $date = strtotime(""+1 day"", $date);
    echo date('m-d-Y', $date);
?&gt;
</code></pre>

<p>This is driving me crazy and seems so simple. I'm pretty new to PHP, but I can't figure this out. The echo returns <code>01-01-1970</code>.</p>

<p>The $date will be coming from a <code>POST</code> in the format <code>m-d-Y</code>, I need to add one day and have it as a new variable to be used later.</p>

<p>Do I have to convert $date to <code>Y-m-d</code>, add 1 day, then convert back to <code>m-d-Y</code>?
Would I be better off learning how to use <code>DateTime</code>?</p>
","<p>there you go</p>

<pre><code>$date = ""04-15-2013"";
$date1 = str_replace('-', '/', $date);
$tomorrow = date('m-d-Y',strtotime($date1 . ""+1 days""));

echo $tomorrow;
</code></pre>

<p>this will output</p>

<pre><code>04-16-2013
</code></pre>

<p><strong>Documentation for both function</strong>
<br><a href=""http://php.net/manual/it/function.date.php"">date</a>
<br><a href=""http://php.net/manual/en/function.strtotime.php"">strtotime</a></p>
","16018644"
"How to fix 'Notice: Undefined index:' in PHP form action?","181326","","<p>I received the following error message when I tried to submit the content to my form. How may i fixed it?</p>

<p>Notice: Undefined index: filename in D:\wamp\www\update.php on line 4</p>

<p>example Update.php code:</p>

<pre><code>&lt;?php

$index = 1;
$filename = $_POST['filename'];

echo $filename;


?&gt;
</code></pre>

<p>and $_POST['filename'] comes from another page:</p>

<pre><code>&lt;?php
$db = substr($string[0],14) . ""_"" . substr($string[1],14) . ""_db.txt"";
?&gt;

&lt;input type=""hidden"" name=""filename"" value=""&lt;?php echo $db; ?&gt;""&gt;
</code></pre>
","<p><code>Assuming</code> you only copy/pasted the relevant code and your form includes <code>&lt;form method=""POST""&gt;</code> </p>

<hr>

<pre><code>if(isset($_POST['filename'])){
    $filename = $_POST['filename'];
}
if(isset($filename)){ 
    echo $filename;
}
</code></pre>

<p>If <code>_POST</code> is not set the <code>filename</code> variable won't be either in the above example.</p>

<p>An alternative way:</p>

<pre><code>$filename = false;
if(isset($_POST['filename'])){
    $filename = $_POST['filename'];
 } 
    echo $filename; //guarenteed to be set so isset not needed
</code></pre>

<p>In this example filename is set regardless of the situation with <code>_POST</code>. This should demonstrate the use of <code>isset</code> nicely.</p>

<p>More information here:
<a href=""http://php.net/manual/en/function.isset.php"">http://php.net/manual/en/function.isset.php</a></p>
","14097958"
"How to generate graphs and charts from mysql database in php","181134","","<p><strong>How can I generate graphs and charts from a mysql database using php?</strong></p>

<p>I'm trying to use ""chart director"" but I can't even install it properly, because I'm using php version 5.3, and it's using a deprecated function <code>dl</code>.</p>

<p>Do you know of any alternatives that:</p>

<ul>
<li>fully support php 5.3</li>
<li>are easy to use for beginners</li>
<li>can access the mysql database and chart its data</li>
</ul>
","<p>You can use JPGraph and Graphpite</p>

<p><a href=""http://jpgraph.net/"">http://jpgraph.net/</a></p>

<p><a href=""http://graphpite.sourceforge.net/"">http://graphpite.sourceforge.net/</a></p>
","4352618"
"Check whether a request is GET or POST ","180687","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/359047/php-detecting-request-type-get-post-put-or-delete"">PHP detecting request type (GET, POST, PUT or DELETE)</a>  </p>
</blockquote>



<p>This should be an easy one.</p>

<p>I have a script, and in the script I want to determine whether the request arrive via <code>GET</code> or <code>POST</code> method. </p>

<p>What is the correct way to do it?</p>

<p>I am thinking of using something like this</p>

<pre><code>if (isset($_POST)) {
    // do post
} else  {
    // do get
}
</code></pre>

<p>But deep in my heart I don't feel this is the right way. Any idea?</p>
","<p>Better use <a href=""http://docs.php.net/manual/en/reserved.variables.server.php"" rel=""noreferrer""><code>$_SERVER['REQUEST_METHOD']</code></a>:</p>

<pre><code>if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    // …
}
</code></pre>
","1372163"
"How to remove line breaks (no characters!) from the string?","180682","","<p>This might appear to be a dupe, but rest assured it isn't - I have searched both SO as well as the rest of the web for an answer to my problem and ended up finding the same insufficient ""solutions"" over and over. Anyhow, here it goes:</p>

<p>I'm saving user input from a textarea to a MySQL database (within a WordPress environment, but that ought not to matter to this problem, I believe). It is later retrieved from the DB to be shown to Admins in the backend of the site. The problem occurs when users submit text with line breaks (i.e. hit the Enter key).</p>

<p>A sample string might look like this:</p>

<pre><code>Dear friends, I just wanted so Hello. How are you guys? I'm fine, thanks!

Greetings,
Bill
</code></pre>

<p>There are no end of line characters (""\n"", ""\r"", or the like) in the string.</p>

<p>I am using <code>nl2br()</code> on it to generate HTML output, but that's not enough. The result then is:</p>

<pre><code>Dear friends, I just wanted so Hello. How are you guys? I'm fine, thanks!&lt;br /&gt;
&lt;br /&gt;
Greetings,&lt;br /&gt;
Bill
</code></pre>

<p>Which, as far as I understand it, is the expected <code>nl2br()</code> result, as that inserts the tags and isn't supposed to replace the line-breaks in the first place?</p>

<p>However the format I need would be this:</p>

<pre><code>Dear friends, I just wanted so Hello. How are you guys? I'm fine, thanks!&lt;br /&gt;&lt;br /&gt;Greetings,&lt;br /&gt;Bill
</code></pre>

<p>If the string had EOL characters such as ""\n"" in it, I'd hit it with either <code>str_replace()</code> or <code>preg_replace()</code> and be done with it, but I have no clue what needle to feed either of those functions if there ain't no characters there in the first place.</p>

<p>I can manually access the relevant field in the DB, hit Backspace for every linebreak and what I later on want to do with the string works. So I know I need the above format.</p>
","<p>You should be able to replace it with a preg that removes all newlines and carriage returns. The code is:</p>

<pre><code>preg_replace( ""/\r|\n/"", """", $yourString );
</code></pre>

<p>Even thought the <code>\n</code> characters are not appearing, if you are getting carriage returns there is an invisible character there. The preg replace should grab and fix those.</p>
","10757755"
"How do I resolve a HTTP 414 ""Request URI too long"" error?","180518","","<p>I have developed a PHP web app. I am giving an option to the user to update multiple issues on one go. In doing so, sometimes the user is encountering this error. Is there any way to increase the lenght of URL in apache?</p>
","<p>Under Apache, the limit is a configurable value, <strong><a href=""http://httpd.apache.org/docs/2.2/mod/core.html#limitrequestline"" rel=""noreferrer""><code>LimitRequestLine</code></a></strong>. Change this value to something larger than its default of 8190 if you want to support a longer request URI. The value is in <em>/etc/apache2/apache2.conf</em>. If not, add a new line (<code>LimitRequestLine 10000</code>) under <code>AccessFileName .htaccess</code>. </p>

<p>However, note that if you're actually running into this limit, you are probably abusing <code>GET</code> to begin with. You should use <code>POST</code> to transmit this sort of data -- especially since you even concede that you're using it to update values. If you check the link above, you'll notice that Apache even says ""Under normal conditions, the value should not be changed from the default.""</p>
","2891598"
"Array as session variable","180297","","<p>Is it possible to make an array a session variable in PHP. The situation is that I have a table (page 1) with some cells having a link to a particular page. The next page will have a list of names (page 2, which I want to keep in a session array) with their respective checkboxes. On submitting this form, it will lead to a transaction page (page 3, where values of posted checkboxes are kept in a database for corresponding names). Now, if I return to the first page and click another cell, will the session array contain the new list of names or the old ones?</p>
","<p>Yes, PHP supports arrays as session variables.  See <a href=""https://web.archive.org/web/20080707052007/http://www.phpriot.com/articles/intro-php-sessions/7"" rel=""noreferrer"">this page</a> for an example.</p>

<p>As for your second question: once you set the session variable, it will remain the same until you either change it or <a href=""http://fr.php.net/session_unset"" rel=""noreferrer""><code>unset</code></a> it.  So if the 3rd page doesn't change the session variable, it will stay the same until the 2nd page changes it again.</p>
","2306169"
"How to embed images in email","180274","","<p>I need to embed an image in e-mail. How do I do it?</p>

<p>I do not want to use third party tool, nor am I interested in language specific answer (but it is PHP, in case you are wondering).</p>

<p>I am merely interested in format of resulting e-mail body.</p>
","<p>As you are aware, everything passed as email message has to be textualized. </p>

<ul>
<li>You must create an email with a multipart/mime message.</li>
<li>If you're adding a physical image, the image must be base 64 encoded and assigned a Content-ID (cid). If it's an URL, then the <code>&lt;img /&gt;</code> tag is sufficient (the url of the image must be linked to a Source ID).</li>
</ul>

<p>A Typical email example will look like this:</p>

<pre><code>From: foo1atbar.net
To: foo2atbar.net
Subject: A simple example
Mime-Version: 1.0
Content-Type: multipart/related; boundary=""boundary-example""; type=""text/html""

--boundary-example
Content-Type: text/html; charset=""US-ASCII""

... text of the HTML document, which might contain a URI
referencing a resource in another body part, for example
through a statement such as:
&lt;IMG SRC=""cid:foo4atfoo1atbar.net"" ALT=""IETF logo""&gt;

--boundary-example
Content-Location: CID:somethingatelse ; this header is disregarded
Content-ID: &lt;foo4atfoo1atbar.net&gt;
Content-Type: IMAGE/GIF
Content-Transfer-Encoding: BASE64

R0lGODlhGAGgAPEAAP/////ZRaCgoAAAACH+PUNv
cHlyaWdodCAoQykgMTk5LiBVbmF1dGhvcml6ZWQgZHV
wbGljYXRpb24gcHJvaGliaXRlZC4A etc...

--boundary-example--
</code></pre>

<p>As you can see, the <code>Content-ID: &lt;foo4atfoo1atbar.net&gt;</code> ID is matched to the <code>&lt;IMG&gt;</code> at <code>SRC=""cid:foo4atfoo1atbar.net""</code>. That way, the client browser will render your image as a content and not as an attachement.</p>

<p>Hope this helps.</p>
","4312865"
"Trying to get property of non-object - CodeIgniter","179977","","<p>I'm trying to make update form, that is going to retrieve the data for the specific ID selected, and fill in the form, so its going to be available for updating.</p>

<p>When I click edit on the specific entry (Product in my case), it takes me to the <code>edit_product_view</code>, but states the error <strong>""Trying to get property of non-object""</strong> for every variable that I use in <code>set_values</code> of the form elements.</p>

<p>Using <code>print_r</code>, I get the correct associative array, so it's passed correctly.</p>

<p>This is excerpt of my <code>edit_product_view</code>.</p>

<pre><code>&lt;h2&gt;&lt;?php echo $heading; ?&gt;&lt;/h2&gt;
&lt;hr&gt;
&lt;table id=""newproduct""&gt;
&lt;?php echo form_open('products/edit/'.$product-&gt;id); ?&gt;
&lt;tr&gt;
    &lt;td class=""label""&gt;&lt;?php echo form_label('Name:');?&gt;&lt;/td&gt;
    &lt;td&gt;&lt;?php echo form_input('prodname', set_value('prodname', $product-&gt;prodname));?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;td class=""label""&gt;&lt;?php echo form_label('Product Type:');?&gt;&lt;/td&gt;
    &lt;td&gt;&lt;?php echo form_dropdown('ptname_fk', $product_types, set_value('ptname_fk', $product-&gt;ptname_fk));?&gt;&lt;/td&gt;
&lt;/tr&gt;
</code></pre>

<p><code>$product</code> is the array holding all the key-value pairs, but I cannot fill the form for some reason.</p>

<p>Thank you in advance!</p>
","<p>To access the elements in the array, use array notation: <code>$product['prodname']</code></p>

<p><code>$product-&gt;prodname</code> is object notation, which can only be used to access object attributes and methods.</p>
","5175178"
"array_push() with key value pair","179720","","<p>I have an existing array to which I want to add a value.</p>

<p>I'm trying to achieve that using <code>array_push()</code> to no avail.</p>

<p>Below is my code:</p>

<pre><code>$data = array(
    ""dog"" =&gt; ""cat""
);

array_push($data['pussy'], 'wagon');
</code></pre>

<p>What I want to achieve is to add <em>pussy</em> as a key to the <code>$data</code> array with <em>wagon</em> as value so as to access it as in the snippet below:</p>

<pre><code>echo $data['pussy']; // the expected output is: wagon
</code></pre>

<p>How can I achieve that?</p>
","<p>So what about having:</p>

<pre><code>$data['pussy']='wagon';
</code></pre>
","1355074"
"download file using an ajax request","179697","","<p>I want to send an  ""ajax download request"" when I click on a button, so I tried in this way:</p>

<p>javascript:</p>

<pre><code>var xhr = new XMLHttpRequest();
xhr.open(""GET"", ""download.php"");
xhr.send();
</code></pre>

<p>download.php:</p>

<pre><code>&lt;?
header(""Cache-Control: public"");
header(""Content-Description: File Transfer"");
header(""Content-Disposition: attachment; filename= file.txt"");
header(""Content-Transfer-Encoding: binary"");    
readfile(""file.txt"");
?&gt;
</code></pre>

<p>but doesn't work as expected, how can I do ? Thank you in advance</p>
","<p><strong>Update April 27, 2015</strong></p>

<p>Up and coming to the HTML5 scene is the <a href=""http://webdesign.tutsplus.com/tutorials/quick-tip-using-the-html5-download-attribute--cms-23880"" rel=""noreferrer"">download attribute</a>. It's <a href=""http://caniuse.com/#feat=download"" rel=""noreferrer"">supported</a> in Firefox and Chrome, and soon to come to IE11. Depending on your needs, you could use it instead of an AJAX request (or using <code>window.location</code>) so long as the file you want to download is on the same origin as your site.</p>

<p>You could always make the AJAX request/<code>window.location</code> a fallback by using <a href=""https://stackoverflow.com/questions/12112844/how-to-detect-support-for-the-html5-download-attribute"">some JavaScript</a> to test if <code>download</code> is supported and if not, switching it to call <code>window.location</code>.</p>

<p><strong>Original answer</strong></p>

<p>You can't have an AJAX request open the download prompt since you physically have to navigate to the file to prompt for download. Instead, you could use a success function to navigate to download.php. This will open the download prompt but won't change the current page.</p>

<pre><code>$.ajax({
    url: 'download.php',
    type: 'POST',
    success: function() {
        window.location = 'download.php';
    }
});
</code></pre>

<p>Even though this answers the question, it's better to just use <code>window.location</code> and avoid the AJAX request entirely.</p>
","20830337"
"How to set 777 permission on a particular folder?","179623","","<p>How to set 777 permission on folder.</p>

<ul>
<li>i need to Set the permission of the following folder to 777:
admin\includes\module_installation</li>
</ul>

<p>I do no idea how to set the permission 777 on particular folder in window 7?? </p>

<p>Please help me how can I set it? 
I am using windows 7.</p>
","<p><code>777</code> is a permission in Unix based system with full read/write/execute permission to owner, group and everyone.. in general we give this permission to assets which are not much needed to  be hidden from public on a web server, for example images..</p>

<p>You said <code>I am using windows 7.</code> if that means that your web server is Windows based then you should login to that and right click the folder and set permissions to <code>everyone</code> and if you are on a windows client and server is unix/linux based then use some ftp software and in the parent directory right click and change the permission for the folder.</p>

<p>If you want permission to be set on <code>sub-directories</code> too then usually their is option to set permission recursively use that.</p>

<p>And, if you feel like doing it from command line the use putty and login to server and go to the parent directory <code>includes</code> and write the following command</p>

<pre><code>chmod 0777 module_installation/
</code></pre>

<p>for recursive </p>

<pre><code>chmod -R 0777 module_installation/
</code></pre>

<p>Hope this will help you</p>
","11389857"
"Remove excess whitespace from within a string","179542","","<p>I receive a string from a database query, then I remove all HTML tags, carriage returns and newlines before I put it in a CSV file. Only thing is, I can't find a way to remove the <strong>excess</strong> white space from <em>between</em> the strings.</p>

<p>What would be the best way to remove the inner whitespace characters?</p>
","<p>Not sure exactly what you want but here are two situations:</p>

<ol>
<li><p>If you are just dealing with excess <kbd>whitespace</kbd> on the beginning or end of the string you can use <code>trim()</code>, <code>ltrim()</code> or <code>rtrim()</code> to remove it.</p></li>
<li><p>If you are dealing with extra spaces within a string consider a <code>preg_replace</code> of multiple <kbd>whitespaces</kbd> <code>"" ""*</code> with a single <kbd>whitespace</kbd> <code>"" ""</code>.</p></li>
</ol>

<p><strong>Example:</strong></p>

<pre><code>$foo = preg_replace('/\s+/', ' ', $foo);
</code></pre>
","1703409"
"PHP: Get key from array?","179147","","<p>I am sure that this is super easy and built-in function in PHP, but I have yet not seen it.</p>

<p>Here's what I am doing for the moment:</p>

<pre><code>foreach($array as $key =&gt; $value) {
    echo $key; // Would output ""subkey"" in the example array
    print_r($value);
}
</code></pre>

<p>Could I do something like the following instead and thereby save myself from writing ""$key => $value"" in every foreach loop? (psuedocode)</p>

<pre><code>foreach($array as $subarray) {
    echo arrayKey($subarray); // Will output the same as ""echo $key"" in the former example (""subkey""
    print_r($value);
}
</code></pre>

<p>Thanks!</p>

<p>The array:</p>

<pre><code>Array
(
    [subKey] =&gt; Array
        (
            [value] =&gt; myvalue
        )

)
</code></pre>
","<p>You can use <a href=""http://php.net/manual/en/function.key.php"" rel=""noreferrer"">key()</a>:</p>

<pre><code>&lt;?php
$array = array(
    ""one"" =&gt; 1,
    ""two"" =&gt; 2,
    ""three"" =&gt; 3,
    ""four"" =&gt; 4
);

while($element = current($array)) {
    echo key($array).""\n"";
    next($array);
}
?&gt;
</code></pre>
","3318107"
"What is the use of the @ symbol in PHP?","178917","","<p>I have seen uses of <code>@</code> in front of certain functions, like the following:</p>

<pre><code>$fileHandle = @fopen($fileName, $writeAttributes);
</code></pre>

<p>What is the use of this symbol?</p>
","<p>It suppresses error messages — see <a href=""http://php.net/manual/language.operators.errorcontrol.php"" rel=""noreferrer"">Error Control Operators</a> in the PHP manual.</p>
","1032169"
"Angularjs - simple form submit","178446","","<p>I am going through learning curve with AngularJs and I am finding that there are virtually no examples that serve real world use.</p>

<p>I am trying to get a clear understanding of how to submit a form with the most standard components and pass it on to a PHP file.. </p>

<p>My <a href=""http://jsfiddle.net/bYeZQ/10/"">fiddle</a>.</p>

<p>Does anyone have any good examples on submitting simple, un-polluted, forms that would help me and probably numerous other Angularjs beginners..</p>

<p>When I say a clean form I am referring to something like this..</p>

<pre><code>&lt;div ng-app=""myApp""&gt;

    &lt;form name=""saveTemplateData"" action=""#"" ng-controller=""FormCtrl"" ng-submit=""submitForm()""&gt;

        First name:    &lt;br/&gt;&lt;input type=""text"" ng-model=""form.firstname""&gt;    &lt;br/&gt;&lt;br/&gt;
        Email Address: &lt;br/&gt;&lt;input type=""text"" ng-model=""form.emailaddress""&gt; &lt;br/&gt;&lt;br/&gt;

        &lt;textarea rows=""3"" cols=""25"" ng-model=""form.textareacontent""&gt;&lt;/textarea&gt;

            &lt;br/&gt;&lt;br/&gt;

        &lt;input type=""radio"" ng-model=""form.gender"" value=""female"" /&gt;Female ...
        &lt;input type=""radio"" ng-model=""form.gender"" value=""male"" /&gt;Male &lt;br/&gt;

            &lt;br/&gt;&lt;br/&gt;

        &lt;input type=""checkbox"" ng-model=""form.member"" value=""5""/&gt; Already a member

            &lt;br/&gt;&lt;br/&gt;

        &lt;input type=""file"" ng-model=""form.file_profile"" id=""file_profile""&gt;&lt;br/&gt;
        &lt;input type=""file"" ng-model=""form.file_avatar"" id=""file_avatar""&gt;

            &lt;br/&gt;&lt;br/&gt;

        &lt;!-- &lt;button ng-click=""save()"" &gt;Save&lt;/button&gt; --&gt;
        &lt;input type=""submit"" ngClick=""Submit"" &gt;

    &lt;/form&gt;

&lt;/div&gt;
</code></pre>

<p>My ng-app code...</p>

<pre><code>var app = angular.module('myApp', []);
app.controller('FormCtrl', function ($scope, $http) {

     var formData = {
        firstname: ""default"",
        emailaddress: ""default"",
        textareacontent: ""default"",
        gender: ""default"",
        member: false,
        file_profile: ""default"",
        file_avatar: ""default""
    };

    $scope.save = function() {
        formData = $scope.form;
    };

    $scope.submitForm = function() {
        console.log(""posting data...."");
        formData = $scope.form;
        console.log(formData);
        //$http.post('form.php', JSON.stringify(data)).success(function(){/*success callback*/});
    };

 });
</code></pre>

<p>I guess three questions I have from here on are...</p>

<ol>
<li>How is my php file supposed to interact with this (how to I get the json string to an array in php file)?</li>
<li>How would I submit value of a checkbox when the checkbox is true?</li>
<li>I find a lot of information abotu using jQuery with Angular to submit images,, I see there is an image object in this submission already,, how do I retrieve that data? What are considerations to include with images?</li>
</ol>

<p>I am willing to take any clear and concise information and assemble a good learning example for everyone... </p>

<p>My <a href=""http://jsfiddle.net/bYeZQ/10/"">fiddle</a></p>
","<p>I have been doing quite a bit of research and in attempt to resolve a different issue I ended up coming to a good portion of the solution in my other post here:</p>

<p><a href=""https://stackoverflow.com/questions/20084549/angularjs-form-post-data-not-posted/"">Angularjs - Form Post Data Not Posted?</a></p>

<p>The solution does not include uploading images currently but I intend to expand upon and create a clear and well working example. If updating these posts is possible I will keep them up to date all the way until a stable and easy to learn from example is compiled.</p>
","20085876"
"No input file specified","178100","","<p>I'm running <a href=""http://anchorcms.com/"" rel=""noreferrer"">Anchor CMS</a> and I just upgraded to version 0.8. When I try and run the installer I get a 'No input file specified' error. I believe it's more than likely a .htaccess problem but I'm not sure what the correct settings should be.</p>

<p>My site can be found <a href=""http://coleroberts.me/anchor-cms-master/"" rel=""noreferrer"">here</a>.</p>

<p>My .htaccess is set to:</p>

<pre><code>&lt;IfModule mod_rewrite.c&gt;
RewriteEngine On
RewriteBase {base}

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all other URLs to index.php/URL
RewriteRule ^(.*)$ {index} [L]
&lt;/IfModule&gt;

&lt;IfModule !mod_rewrite.c&gt;
ErrorDocument 404 index.php
&lt;/IfModule&gt;
</code></pre>

<p>I'm also using a GoDaddy as the hosting provider if that helps. </p>
","<p>The <em>No input file specified</em> is a message you are presented with because of the implementation of PHP on your server, which in this case indicates a CGI implementation (can be verified with <a href=""http://php.net/phpinfo""><code>phpinfo()</code></a>).</p>

<p>Now, to properly explain this, you need to have some basic understanding on how your system works with URL's. Based on your .htaccess file, it seems that your CMS expects the URL to passed along as a <code>PATH_INFO</code> variable. CGI and FastCGI implementations do not have <code>PATH_INFO</code> available, so when trying to pass the URI along, PHP fails with that message. </p>

<p>We need to find an alternative.</p>

<p>One option is to try and fix this. Looking into the documentation for <a href=""http://php.net/manual/en/ini.core.php#ini.cgi.fix-pathinfo"">core php.ini directives</a> you can see that you can change the workings for your implementation. Although, GoDaddy probably won't allow you to change PHP settings on a shared enviroment.</p>

<p><strong>We need to find an alternative to modifying PHP settings</strong><br>
Looking into <code>system/uri.php</code> on line 40, you will see that the CMS attempts two types of URI detection - the first being <code>PATH_INFO</code>, which we just learned won't work - the other being the <code>REQUEST_URI</code>.</p>

<p>This should basically, be enough - but the parsing of the URI passed, will cause you more trouble, as the URI, which you could pass to <code>REQUEST_URI</code> variable, forces <a href=""http://php.net/parse_url""><code>parse_url()</code></a> to only return the URL path - which basically puts you back to zero.</p>

<p>Now, there's actually only one possibilty left - and that's changing the core of the CMS. The URI detection part is insufficient.</p>

<p>Add <code>QUERY_STRING</code> to the array on line 40 as <em>the first element</em> in <code>system/uri.php</code> and change your .htaccess to look like this:</p>

<pre><code>RewriteEngine On 

RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 

RewriteRule ^(.*)$ index.php?/$1 [L]
</code></pre>

<p>This will pass the URI you request to <code>index.php</code> as <code>QUERY_STRING</code> and have the URI detection to find it.</p>

<p>This, on the other hand, makes it impossible to update the CMS without changing core files till this have been fixed. That sucks...</p>

<p><strong>Need a better option?</strong><br>
Find a better CMS.</p>
","14578219"
"Laravel 4 eloquent WHERE with OR AND OR?","177977","","<p>How do I say <code>WHERE (a=1 OR b=1) AND (c=1 OR d=1)</code></p>

<p>For more complicated queries am I supposed to use raw SQL?</p>
","<p>Make use of <a href=""https://laravel.com/docs/master/queries#parameter-grouping"" rel=""noreferrer"">Parameter Grouping</a> (<a href=""https://laravel.com/docs/4.2/queries#advanced-wheres"" rel=""noreferrer"">Laravel 4.2</a>). For your example, it'd be something like this:</p>

<pre><code>Model::where(function ($query) {
    $query-&gt;where('a', '=', 1)
          -&gt;orWhere('b', '=', 1);
})-&gt;where(function ($query) {
    $query-&gt;where('c', '=', 1)
          -&gt;orWhere('d', '=', 1);
});
</code></pre>
","16995151"
"Get current category ID of the active page","177922","","<p>Looking to pull the category ID of a specific page in WordPress that is listing all posts using that specific category.  Tried the below but not working.  I am able to get the category name using <code>single_term_title</code>.</p>

<pre><code>$category = single_term_title("""", false);
$catid = get_cat_ID( $category );
</code></pre>

<p><code>$category</code> is displaying ""Entertainment"" for example. But I also need the ID of ""Entertainment"".  How would I go about this?</p>
","<p>You can try using <a href=""http://codex.wordpress.org/Function_Reference/get_the_category"" rel=""noreferrer""><code>get_the_category()</code></a>:</p>

<pre><code>$categories = get_the_category();
$category_id = $categories[0]-&gt;cat_ID;
</code></pre>
","8829863"
"Secure hash and salt for PHP passwords","177655","","<p>It is currently said that MD5 is partially unsafe. Taking this into consideration, I'd like to know which mechanism to use for password protection.</p>

<p>This question, <a href=""https://stackoverflow.com/questions/348109/is-double-hashing-a-password-less-secure-than-just-hashing-it-once"">Is “double hashing” a password less secure than just hashing it once?</a> 
suggests that hashing multiple times may be a good idea, whereas <a href=""https://stackoverflow.com/questions/55862/how-to-implement-password-protection-for-individual-files#55904"">How to implement password protection for individual files?</a> suggests using salt.</p>

<p>I'm using PHP. I want a safe and fast password encryption system. Hashing a password a million times may be safer, but also slower. How to achieve a good balance between speed and safety? Also, I'd prefer the result to have a constant number of characters.</p>

<ol>
<li>The hashing mechanism must be available in PHP</li>
<li>It must be safe</li>
<li>It can use salt (in this case, are all salts equally good? Is there any way to generate good salts?)</li>
</ol>

<p>Also, should I store two fields in the database (one using MD5 and another one using SHA, for example)? Would it make it safer or unsafer?</p>

<p>In case I wasn't clear enough, I want to know which hashing function(s) to use and how to pick a good salt in order to have a safe and fast password protection mechanism.</p>

<p><em>Related questions that don't quite cover my question:</em></p>

<p><a href=""https://stackoverflow.com/questions/157998/whats-the-difference-between-sha-and-md5-in-php"">What's the difference between SHA and MD5 in PHP</a><br>
<a href=""https://stackoverflow.com/questions/30946/simple-password-encryption"">Simple Password Encryption</a><br>
<a href=""https://stackoverflow.com/questions/198803/secure-methods-of-storing-keys-passwords-for-asp-net"">Secure methods of storing keys, passwords for asp.net</a><br>
<a href=""https://stackoverflow.com/questions/205153/how-would-you-implement-salted-passwords-in-tomcat-5-5"">How would you implement salted passwords in Tomcat 5.5</a></p>
","<blockquote>
  <p><strong>DISCLAIMER</strong>: This answer was written in 2008.</p>
  
  <p>Since then, PHP has given us <a href=""http://php.net/manual/en/function.password-hash.php"" rel=""noreferrer""><code>password_hash</code></a> and <a href=""http://php.net/manual/en/function.password-verify.php"" rel=""noreferrer""><code>password_verify</code></a> and, since their introduction, they are the recommended password hashing &amp; checking method.</p>
  
  <p>The theory of the answer is still a good read though.</p>
</blockquote>

<h2>TL;DR</h2>

<h3>Don'ts</h3>

<ul>
<li>Don't limit what characters users can enter for passwords. Only idiots do this.</li>
<li>Don't limit the length of a password. If your users want a sentence with supercalifragilisticexpialidocious in it, don't prevent them from using it.</li>
<li>Never store your user's password in plain-text.</li>
<li>Never email a password to your user <em>except when they have lost theirs, and you sent a temporary one.</em></li>
<li>Never, ever log passwords in any manner.</li>
<li>Never hash passwords with <a href=""http://arstechnica.com/security/2012/12/oh-great-new-attack-makes-some-password-cracking-faster-easier-than-ever/"" rel=""noreferrer"">SHA1</a> or MD5 or even SHA256! <a href=""http://securityledger.com/new-25-gpu-monster-devours-passwords-in-seconds/"" rel=""noreferrer"">Modern crackers</a> can exceed 60 and 180 billion hashes/second (respectively).</li>
<li>Don't mix <a href=""http://blog.ircmaxell.com/2015/03/security-issue-combining-bcrypt-with.html"" rel=""noreferrer"">bcrypt and with the <em>raw</em> output of hash()</a>, either use hex output or base64_encode it. (This applies to any input that may have a rogue <code>\0</code> in it, which can seriously weaken security.)</li>
</ul>

<h3>Dos</h3>

<ul>
<li>Use scrypt when you can; bcrypt if you cannot.</li>
<li>Use PBKDF2 if you cannot use either bcrypt or scrypt, with SHA2 hashes.</li>
<li>Reset everyone's passwords when the database is compromised.</li>
<li>Implement a reasonable 8-10 character minimum length, plus require at least 1 upper case letter, 1 lower case letter, a number, and a symbol. This will improve the entropy of the password, in turn making it harder to crack. (See the ""What makes a good password?"" section for some debate.)</li>
</ul>

<h2>Why hash passwords anyway?</h2>

<p>The objective behind hashing passwords is simple: preventing malicious access to user accounts by compromising the database. So the goal of password hashing is to deter a hacker or cracker by costing them too much time or money to calculate the plain-text passwords. And time/cost are the best deterrents in your arsenal.</p>

<p>Another reason that you want a good, robust hash on a user accounts is to give you enough time to change all the passwords in the system. If your database is compromised you will need enough time to at <em>least</em> lock the system down, if not change every password in the database.</p>

<p>Jeremiah Grossman, CTO of Whitehat Security, <a href=""http://blog.whitehatsec.com/cracking-aes-256-dmgs-and-epic-self-pwnage/"" rel=""noreferrer"">stated on his blog</a> after a recent password recovery that required brute-force breaking of his password protection:</p>

<blockquote>
  <p>Interestingly, in living out this nightmare, I learned A LOT I didn’t know about password cracking, storage, and complexity. <em>I’ve come to appreciate why password storage is ever so much more important than password complexity. If you don’t know how your password is stored, then all you really can depend upon is complexity.</em> This might be common knowledge to password and crypto pros, but for the average InfoSec or Web Security expert, I highly doubt it.</p>
</blockquote>

<p>(Emphasis mine.)</p>

<h2>What makes a <em>good</em> password anyway?</h2>

<p><a href=""http://xkcd.com/936/"" rel=""noreferrer"">Entropy</a>. (Not that I fully subscribe to Randall's viewpoint.)</p>

<p>In short, entropy is how much variation is within the password. When a password is only lowercase roman letters, that's only 26 characters. That isn't much variation. Alpha-numeric passwords are better, with 36 characters. But allowing upper and lower case, with symbols, is roughly 96 characters. That's a lot better than just letters. One problem is, to make our passwords memorable we insert patterns—which reduces entropy. Oops!</p>

<p>Password entropy is <a href=""https://ritcyberselfdefense.wordpress.com/2011/09/24/how-to-calculate-password-entropy/"" rel=""noreferrer"">approximated</a> easily. Using the full range of ascii characters (roughly 96 typeable characters) yields an entropy of 6.6 per character, which at 8 characters for a password is still too low (52.679 bits of entropy) for future security. But the good news is: longer passwords, and passwords with unicode characters, really increase the entropy of a password and make it harder to crack.</p>

<p>There's a longer discussion of password entropy on the <a href=""https://crypto.stackexchange.com/questions/374/how-should-i-calculate-the-entropy-of-a-password"">Crypto StackExchange</a> site. A good Google search will also turn up a lot of results.</p>

<p>In the comments I talked with @popnoodles, who pointed out that <em>enforcing</em> a password policy of X length with X many letters, numbers, symbols, etc, can actually reduce entropy by making the password scheme more predictable. I do agree. Randomess, as truly random as possible, is always the safest but least memorable solution.</p>

<p>So far as I've been able to tell, making the world's best password is a Catch-22. Either its not memorable, too predictable, too short, too many unicode characters (hard to type on a Windows/Mobile device), too long, etc. No password is truly good enough for our purposes, so we must protect them as though they were in Fort Knox.</p>

<h2>Best practices</h2>

<p>Bcrypt and <a href=""http://www.tarsnap.com/scrypt.html"" rel=""noreferrer"">scrypt</a> are the current best practices. <a href=""http://www.tarsnap.com/scrypt.html"" rel=""noreferrer"">Scrypt</a> will be better than bcrypt in time, but it hasn't seen adoption as a standard by Linux/Unix or by webservers, and hasn't had in-depth reviews of its algorithm posted yet. But still, the future of the algorithm does look promising. If you are working with Ruby there is an <a href=""http://rubygems.org/gems/scrypt"" rel=""noreferrer"">scrypt gem</a> that will help you out, and Node.js now has its own <a href=""https://npmjs.org/package/scrypt"" rel=""noreferrer"">scrypt</a> package. You can use Scrypt in PHP either via the <a href=""https://pecl.php.net/package/scrypt"" rel=""noreferrer"">Scrypt</a> extension or the <a href=""https://paragonie.com/book/pecl-libsodium/read/07-password-hashing.md"" rel=""noreferrer"">Libsodium</a> extension (both are available in PECL).</p>

<p>I highly suggest reading the documentation for the <a href=""http://us.php.net/crypt"" rel=""noreferrer"">crypt function</a> if you want to understand how to use bcrypt, or finding yourself a <a href=""https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php/6337021#6337021"">good</a> <a href=""https://gist.github.com/1070401"" rel=""noreferrer"">wrapper</a> or use something like <a href=""http://www.openwall.com/phpass/"" rel=""noreferrer"">PHPASS</a> for a more legacy implementation. I recommend a minimum of 12 rounds of bcrypt, if not 15 to 18.</p>

<p>I changed my mind about using bcrypt when I learned that bcrypt only uses blowfish's key schedule, with a variable cost mechanism. The latter lets you increase the cost to brute-force a password by increasing blowfish's already expensive key schedule.</p>

<h2>Average practices</h2>

<p>I almost can't imagine this situation anymore. <a href=""http://www.openwall.com/phpass/"" rel=""noreferrer"">PHPASS</a> supports PHP 3.0.18 through 5.3, so it is usable on almost every installation imaginable—and should be used if you don't <em>know for certain</em> that your environment supports bcrypt.</p>

<p>But suppose that you cannot use bcrypt or PHPASS at all. What then?</p>

<p>Try an implementation of <a href=""http://www.itnewb.com/tutorial/Encrypting-Passwords-with-PHP-for-Storage-Using-the-RSA-PBKDF2-Standard"" rel=""noreferrer"">PDKBF2</a> with the <a href=""https://security.stackexchange.com/questions/3959/recommended-of-iterations-when-using-pkbdf2-sha256"">maximum number of rounds</a> that your environment/application/user-perception can tolerate. The lowest number I'd recommend is 2500 rounds. Also, make sure to use <a href=""http://php.net/hash_hmac"" rel=""noreferrer"">hash_hmac()</a> if it is available to make the operation harder to reproduce.</p>

<h2>Future Practices</h2>

<p>Coming in PHP 5.5 is a <a href=""http://php.net/manual/en/ref.password.php"" rel=""noreferrer"">full password protection library</a> that abstracts away any pains of working with bcrypt. While most of us are stuck with PHP 5.2 and 5.3 in most common environments, especially shared hosts, @ircmaxell has built a <a href=""https://github.com/ircmaxell/password_compat"" rel=""noreferrer"">compatibility layer</a> for the coming API that is backward compatible to PHP 5.3.7.</p>

<h2>Cryptography Recap &amp; Disclaimer</h2>

<p>The computational power required to actually <em>crack</em> a hashed password doesn't exist. The only way for computers to ""crack"" a password is to recreate it and simulate the hashing algorithm used to secure it. The speed of the hash is linearly related to its ability to be brute-forced. Worse still, most hash algorithms can be easily parallelized to perform even faster. This is why costly schemes like bcrypt and scrypt are so important.</p>

<p>You cannot possibly foresee all threats or avenues of attack, and so you must make your best effort to protect your users <strong>up front</strong>. If you do not, then you might even miss the fact that you were attacked until it's too late... <em>and you're liable</em>. To avoid that situation, act paranoid to begin with. Attack your own software (internally) and attempt to steal user credentials, or modify other user's accounts or access their data. If you don't test the security of your system, then you cannot blame anyone but yourself.</p>

<p>Lastly: I am not a cryptographer. Whatever I've said is my opinion, but I happen to think it's based on good ol' common sense ... and lots of reading. Remember, be as paranoid as possible, make things as hard to intrude as possible, and then, if you are still worried, contact a white-hat hacker or cryptographer to see what they say about your code/system.</p>
","401684"
"retrieve data from db and display it in table in php .. see this code whats wrong with it?","177534","","<pre><code>  $db = mysql_connect(""localhost"", ""root"", """");
  $er = mysql_select_db(""ram"");
  $query = ""insert into names values('$name','$add1','$add2','$mail')"";
  $result = mysql_query($query);
  print ""&lt;p&gt; Person's Information Inserted &lt;/p&gt;"";
  $result = mysql_query(""SELECT * FROM names"");
?&gt;

&lt;table border=""2""&gt;
   &lt;tr&gt;
      &lt;th&gt;Name&lt;/th&gt;
      &lt;th&gt;Address Line 1&lt;/th&gt;
      &lt;th&gt;Address Line 2 &lt;/th&gt;
      &lt;th&gt;E-mail Id &lt;/th&gt;
    &lt;/tr&gt;
    &lt;? 
    while ($array = mysql_fetch_row($result));
    {
        print ""&lt;tr&gt; &lt;td&gt;"";
        echo $array[0]; 
        print ""&lt;/td&gt; &lt;td&gt;"";
        echo $array[1]; 
        print ""&lt;/td&gt; &lt;td&gt;"";
        echo $array[2]; 
        print ""&lt;/td&gt; &lt;td&gt;"";
        echo $array[3]; 
        print ""&lt;/td&gt; &lt;/tr&gt;"";
    }
?&gt;
</code></pre>
","<p>Try this:</p>

<pre><code>&lt;?php

 # Init the MySQL Connection
  if( !( $db = mysql_connect( 'localhost' , 'root' , '' ) ) )
    die( 'Failed to connect to MySQL Database Server - #'.mysql_errno().': '.mysql_error();
  if( !mysql_select_db( 'ram' ) )
    die( 'Connected to Server, but Failed to Connect to Database - #'.mysql_errno().': '.mysql_error();

 # Prepare the INSERT Query
  $insertTPL = 'INSERT INTO `name` VALUES( ""%s"" , ""%s"" , ""%s"" , ""%s"" )';
  $insertSQL = sprintf( $insertTPL ,
                 mysql_real_escape_string( $name ) ,
                 mysql_real_escape_string( $add1 ) ,
                 mysql_real_escape_string( $add2 ) ,
                 mysql_real_escape_string( $mail ) );
 # Execute the INSERT Query
  if( !( $insertRes = mysql_query( $insertSQL ) ) ){
    echo '&lt;p&gt;Insert of Row into Database Failed - #'.mysql_errno().': '.mysql_error().'&lt;/p&gt;';
  }else{
    echo '&lt;p&gt;Person\'s Information Inserted&lt;/p&gt;'
  }

 # Prepare the SELECT Query
  $selectSQL = 'SELECT * FROM `names`';
 # Execute the SELECT Query
  if( !( $selectRes = mysql_query( $selectSQL ) ) ){
    echo 'Retrieval of data from Database Failed - #'.mysql_errno().': '.mysql_error();
  }else{
    ?&gt;
&lt;table border=""2""&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Name&lt;/th&gt;
      &lt;th&gt;Address Line 1&lt;/th&gt;
      &lt;th&gt;Address Line 2&lt;/th&gt;
      &lt;th&gt;Email Id&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;?php
      if( mysql_num_rows( $selectRes )==0 ){
        echo '&lt;tr&gt;&lt;td colspan=""4""&gt;No Rows Returned&lt;/td&gt;&lt;/tr&gt;';
      }else{
        while( $row = mysql_fetch_assoc( $selectRes ) ){
          echo ""&lt;tr&gt;&lt;td&gt;{$row['name']}&lt;/td&gt;&lt;td&gt;{$row['addr1']}&lt;/td&gt;&lt;td&gt;{$row['addr2']}&lt;/td&gt;&lt;td&gt;{$row['mail']}&lt;/td&gt;&lt;/tr&gt;\n"";
        }
      }
    ?&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
    &lt;?php
  }

?&gt;
</code></pre>

<hr>

<h2>Notes, Cautions and Caveats</h2>

<p>Your initial solution did not show any obvious santisation of the values before passing them into the Database. This is how SQL Injection attacks (or even un-intentional errors being passed through SQL) occur. Don't do it!</p>

<p>Your database does not seem to have a Primary Key. Whilst these are not, technically, necessary in all usage, they are a good practice, and make for a much more reliable way of referring to a specific row in a table, whether for adding related tables, or for making changes within that table.</p>

<p>You need to check every action, at every stage, for errors. Most PHP functions are nice enough to have a response they will return under an error condition. It is your job to check for those conditions as you go - never assume that PHP will do what you expect, how you expect, and in the order you expect. This is how accident happen...</p>

<p>My provided code above contains alot of points where, if an error has occured, a message will be returned. Try it, see if any error messages are reported, look at the Error Message, and, if applicable, the Error Code returned and do some research.</p>

<p>Good luck.</p>
","4332175"
"Parsing JSON object in PHP using json_decode","177507","","<p>I tried to request the weather from a web service supplying data in <code>JSON</code> format. My PHP request code, which did not succeed was:</p>

<pre><code>$url=""http://www.worldweatheronline.com/feed/weather.ashx?q=schruns,austria&amp;format=json&amp;num_of_days=5&amp;key=8f2d1ea151085304102710"";
$json = file_get_contents($url);
$data = json_decode($json, TRUE);
echo $data[0]-&gt;weather-&gt;weatherIconUrl[0]-&gt;value;    
</code></pre>

<p>This is some of the data that was returned. Some of the details have been truncated for brevity, but object integrity is retained:</p>

<pre><code>{ ""data"": 
    { ""current_condition"": 
        [ { ""cloudcover"": ""31"",
            ... } ],  
      ""request"": 
        [ { ""query"": ""Schruns, Austria"",
            ""type"": ""City"" } ],
      ""weather"": 
        [ { ""date"": ""2010-10-27"",
            ""precipMM"": ""0.0"",
            ""tempMaxC"": ""3"",
            ""tempMaxF"": ""38"",
            ""tempMinC"": ""-13"",
            ""tempMinF"": ""9"",
            ""weatherCode"": ""113"",
            ""weatherDesc"": [ {""value"": ""Sunny"" } ],
            ""weatherIconUrl"": [ {""value"": ""http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0001_sunny.png"" } ],
            ""winddir16Point"": ""N"",
            ""winddirDegree"": ""356"",
            ""winddirection"": ""N"",
            ""windspeedKmph"": ""5"",
            ""windspeedMiles"": ""3"" }, 
          { ""date"": ""2010-10-28"",
            ... },

          ... ]
        }
    }
}
</code></pre>
","<p>This appears to work:</p>

<pre><code>$url = 'http://www.worldweatheronline.com/feed/weather.ashx?q=schruns,austria&amp;format=json&amp;num_of_days=5&amp;key=8f2d1ea151085304102710%22';
$content = file_get_contents($url);
$json = json_decode($content, true);

foreach($json['data']['weather'] as $item) {
    print $item['date'];
    print ' - ';
    print $item['weatherDesc'][0]['value'];
    print ' - ';
    print '&lt;img src=""' . $item['weatherIconUrl'][0]['value'] . '"" border=""0"" alt="""" /&gt;';
    print '&lt;br&gt;';
}
</code></pre>

<p>If you set the second parameter of json_decode to true, you get an array, so you cant use the -> syntax. I would also suggest you install the <a href=""http://benhollis.net/blog/2009/02/24/jsonview-view-json-documents-in-firefox/"" rel=""noreferrer"">JSONview Firefox extension</a>, so you can view generated json documents in a nice formatted tree view similiar to how Firefox displays XML structures. This makes things a lot easier. </p>
","4037046"
"How can I get the last 7 characters of a PHP string?","177074","","<p>How would I go about grabbing the last 7 characters of the string below?</p>

<p>For example:</p>

<pre><code>$dynamicstring = ""2490slkj409slk5409els"";
$newstring = some_function($dynamicstring);
echo ""The new string is: "" . $newstring;
</code></pre>

<p>Which would display:</p>

<pre class=""lang-none prettyprint-override""><code>The new string is: 5409els
</code></pre>
","<p>Use <a href=""http://us.php.net/manual/en/function.substr.php"" rel=""noreferrer""><code>substr()</code></a> with a negative number for the 2nd argument.</p>

<pre><code>$newstring = substr($dynamicstring, -7);
</code></pre>

<p>From the <a href=""http://us.php.net/manual/en/function.substr.php"" rel=""noreferrer"">php docs</a>:</p>

<blockquote>
  <p><code>string substr ( string $string , int $start [, int $length ] )</code></p>
  
  <p><strong>If start is negative, the returned string will start at the start'th character from the end of string.</strong></p>
</blockquote>
","10542328"
"ini_set(""memory_limit"") in PHP 5.3.3 is not working at all","177041","","<p>I had this working before : </p>

<pre><code>echo ini_get(""memory_limit"").""\n"";
ini_set(""memory_limit"",""256M"");
echo ini_get(""memory_limit"").""\n"";
</code></pre>

<p>That would input this : </p>

<pre><code>32M
256M
</code></pre>

<p>on a php script executed by command line.
I updated from 5.2 to 5.3, and from now, this directive is not working at all  : this gives me : </p>

<pre><code>32M
32M
</code></pre>

<p>and then make my script fail with a fatal Error...</p>

<p>I checked the php documentation, and googled it, and I didn't find anywhere that ""memory_limit"" had been deprecated. </p>

<p>Does anyone have a solution?</p>
","<p>Most likely your sushosin updated, which changed the default of suhosin.memory_limit from disabled to 0 (which won't allow any updates to memory_limit).</p>

<p>On Debian, change /etc/php5/conf.d/suhosin.ini </p>

<blockquote>
  <p>;suhosin.memory_limit = 0</p>
</blockquote>

<p>to </p>

<blockquote>
  <p>suhosin.memory_limit = 2G</p>
</blockquote>

<p>Or whichever value you are comfortable with. You can find the changelog of Sushosin at <a href=""http://www.hardened-php.net/hphp/changelog.html"" rel=""noreferrer"">http://www.hardened-php.net/hphp/changelog.html</a>, which says:</p>

<blockquote>
  <p>Changed the way the memory_limit protection is implemented</p>
</blockquote>
","5727492"
"How to remove html special chars?","176843","","<p>I am creating a RSS feed file for my application in which I want to remove HTML tags, which is done by <code>strip_tags</code>. But <code>strip_tags</code> is not removing HTML special code chars: </p>

<pre><code>&amp;nbsp; &amp;amp; &amp;copy; 
</code></pre>

<p>etc.</p>

<p>Please tell me any function which I can use to remove these special code chars from my string.</p>
","<p>Either decode them using <code>html_entity_decode</code> or remove them using <code>preg_replace</code>:</p>

<pre><code>$Content = preg_replace(""/&amp;#?[a-z0-9]+;/i"","""",$Content); 
</code></pre>

<p>(From <a href=""http://www.webmasterworld.com/forum88/7046.htm"" rel=""noreferrer"">here</a>)</p>

<p>EDIT: Alternative according to Jacco's comment</p>

<blockquote>
  <p>might be nice to replace the '+' with
  {2,8} or something. This will limit
  the chance of replacing entire
  sentences when an unencoded '&amp;' is
  present.</p>
</blockquote>

<pre><code>$Content = preg_replace(""/&amp;#?[a-z0-9]{2,8};/i"","""",$Content); 
</code></pre>
","657670"
"How to validate phone number using PHP?","176783","","<p>How to validate phone number using php</p>
","<p>Since phone numbers must conform to a pattern, you can use regular expressions to match the entered phone number against the pattern you define in regexp.</p>

<p>php has both ereg and preg_match() functions. I'd suggest using preg_match() as there's more documentation for this style of regex.</p>

<p>An example</p>

<pre><code>$phone = '000-0000-0000';

if(preg_match(""/^[0-9]{3}-[0-9]{4}-[0-9]{4}$/"", $phone)) {
  // $phone is valid
}
</code></pre>
","3090921"
"Is there a way to follow redirects with command line cURL","176571","","<p>I know that in a php script:</p>

<pre><code>curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
</code></pre>

<p>will follow redirects. Is there a way to follow redirects with command line cURL?</p>
","<p>Use the location header flag:</p>

<p><code>curl -L &lt;URL&gt;</code></p>
","18474746"
"URL rewriting with PHP","176492","","<p>I have a URL that looks like:</p>

<pre><code>url.com/picture.php?id=51
</code></pre>

<p>How would I go about converting that URL to:</p>

<pre><code>picture.php/Some-text-goes-here/51
</code></pre>

<p>I think WordPress does the same.</p>

<p>How do I go about making friendly URLs in PHP?</p>
","<p>You can essentially do this 2 ways:</p>

<h2>The .htaccess route with mod_rewrite</h2>

<p>Add a file called <code>.htaccess</code> in your root folder, and add something like this:</p>

<pre><code>RewriteEngine on
RewriteRule ^/?Some-text-goes-here/([0-9]+)$ /picture.php?id=$1
</code></pre>

<p>This will tell Apache to enable mod_rewrite for this folder, and if it gets asked a URL matching the regular expression it rewrites it <em>internally</em> to what you want, without the end user seeing it. Easy, but inflexible, so if you need more power:</p>

<h2>The PHP route</h2>

<p>Put the following in your .htaccess instead:</p>

<pre><code>FallbackResource index.php
</code></pre>

<p>This will tell it to run your <code>index.php</code> for all files it cannot normally find in your site. In there you can then for example:</p>

<pre><code>$path = ltrim($_SERVER['REQUEST_URI'], '/');    // Trim leading slash(es)
$elements = explode('/', $path);                // Split path on slashes
if(empty($elements[0])) {                       // No path elements means home
    ShowHomepage();
} else switch(array_shift($elements))             // Pop off first item and switch
{
    case 'Some-text-goes-here':
        ShowPicture($elements); // passes rest of parameters to internal function
        break;
    case 'more':
        ...
    default:
        header('HTTP/1.1 404 Not Found');
        Show404Error();
}
</code></pre>

<p>This is how big sites and CMS-systems do it, because it allows far more flexibility in parsing URLs, config and database dependent URLs etc. For sporadic usage the hardcoded rewrite rules in <code>.htaccess</code> will do fine though.</p>
","16389034"
"Getting the screen resolution using PHP","176461","","<p>I need to find the screen resolution of a users screen who visits my website?</p>
","<p>You can't do it with pure PHP. You must do it with JavaScript. There are several articles written on how to do this.</p>

<p>Essentially, you can set a cookie or you can even do some Ajax to send the info to a PHP script. If you use jQuery, you can do it something like this:</p>

<p><strong>jquery:</strong></p>

<pre><code>$(function() {
    $.post('some_script.php', { width: screen.width, height:screen.height }, function(json) {
        if(json.outcome == 'success') {
            // do something with the knowledge possibly?
        } else {
            alert('Unable to let PHP know what the screen resolution is!');
        }
    },'json');
});
</code></pre>

<p><strong>PHP (some_script.php)</strong></p>

<pre><code>&lt;?php
// For instance, you can do something like this:
if(isset($_POST['width']) &amp;&amp; isset($_POST['height'])) {
    $_SESSION['screen_width'] = $_POST['width'];
    $_SESSION['screen_height'] = $_POST['height'];
    echo json_encode(array('outcome'=&gt;'success'));
} else {
    echo json_encode(array('outcome'=&gt;'error','error'=&gt;""Couldn't save dimension info""));
}
?&gt;
</code></pre>

<p>All that is really basic but it should get you somewhere. Normally screen resolution is not what you really want though. You may be more interested in the size of the actual browser's view port since that is actually where the page is rendered...</p>
","1504526"
"Php - Debugging Curl","176245","","<p>I'd like to see what the post fields in the request are before I send it. (For debugging purposes).</p>

<p>The php library (class) I'm using is already made (not by me), so I'm trying to understand it.</p>

<p>As far as I can tell, it uses <code>curl_setopt()</code> to set different options like headers and such and then it uses <code>curl_exec()</code> to send the request.</p>

<p>Ideas on how to see what post fields are being sent?</p>
","<p>You can enable the <code>CURLOPT_VERBOSE</code> option:</p>

<pre><code>curl_setopt($curlhandle, CURLOPT_VERBOSE, true);
</code></pre>

<p>When <code>CURLOPT_VERBOSE</code> is set, output is written to <strong>STDERR</strong> or the file specified using <code>CURLOPT_STDERR</code>. The output is very informative.</p>

<p>You can also use tcpdump or wireshark to watch the network traffic.</p>
","3760294"
"PHP - If variable is not empty, echo some html code","176239","","<p>I would like to display some html code if a variable is not empty, else I would like to display nothing.</p>

<p>I've tried this code but doesn't work:</p>

<pre><code>&lt;?php 
    $web = the_field('website');
    if (isset($web)) {
?&gt;
       &lt;span class=""field-label""&gt;Website: &lt;/span&gt;&lt;a href=""http://&lt;?php the_field('website'); ?&gt;"" target=""_blank""&gt;&lt;?php the_field('website'); ?&gt;&lt;/a&gt; 
&lt;?php
    } else { 
        echo ""Niente"";
    }
?&gt;
</code></pre>
","<pre><code>if (!empty($web)) {
?&gt;
    &lt;span class=""field-label""&gt;Website:  &lt;/span&gt;&lt;a href=""http://&lt;?php the_field('website'); ?&gt;"" target=""_blank""&gt;&lt;?php the_field('website'); ?&gt;&lt;/a&gt; 
&lt;?php
} else { echo ""Niente"";}
</code></pre>

<p><a href=""http://us.php.net/manual/en/function.empty.php"">http://us.php.net/manual/en/function.empty.php</a></p>
","9592874"
"How to use the CSV MIME-type?","175276","","<p>In a web application I am working on, the user can click on a link to a CSV file.  There is no header set for the mime-type, so the browser just renders it as text.  I would like for this file to be sent as a .csv file, so the user can directly open it with calc, excel, gnumeric, etc.  </p>

<pre><code>header('Content-Type: text/csv');
echo ""cell 1, cell 2"";
</code></pre>

<p>This code works as expected on my computer (Isn't that how it always is?) but does not work on another computer.</p>

<p>My browser is a nightly build of FF 3.0.1 (on linux).  The browsers it did not work in were IE 7 and FF 3.0 (on windows)</p>

<p>Are there any quirks I am unaware of?</p>
","<p>You could try to force the browser to open a ""Save As..."" dialog by doing something like:</p>

<pre><code>header('Content-type: text/csv');
header('Content-disposition: attachment;filename=MyVerySpecial.csv');
echo ""cell 1, cell 2"";
</code></pre>

<p>Which should work across most major browsers.</p>
","398239"
"Turn off deprecated errors php 5.3","174934","","<p>My server is running php 5.3 and My wordpress install is spitting these errors out on me causing the my session_start() to break.  </p>

<pre><code>Deprecated: Assigning the return value of new by reference is deprecated in /home//public_html/hub/wp-settings.php on line 647

Deprecated: Assigning the return value of new by reference is deprecated in /home//public_html/hub/wp-settings.php on line 662

Deprecated: Assigning the return value of new by reference is deprecated in /home//public_html/hub/wp-settings.php on line 669

Deprecated: Assigning the return value of new by reference is deprecated in /home//public_html/hub/wp-settings.php on line 676

Deprecated: Assigning the return value of new by reference is deprecated in /home//public_html/hub/wp-settings.php on line 712
</code></pre>

<p>This is annoying, but I do not want to turn off on screen error reporting. How do I disable these bothersome deprecated warnings?</p>

<p>I am running Wordpress 2.9.2.</p>
","<p>You can do it in code by calling the following functions.</p>

<pre><code>error_reporting(E_ERROR | E_WARNING | E_PARSE | E_NOTICE);
</code></pre>

<p>or</p>

<pre><code>error_reporting(E_ALL ^ E_DEPRECATED);
</code></pre>
","2803783"
"Go Back to Previous Page","174804","","<p>I am using a form to ""Rate"" a page. This form ""posts"" data to a php script elsewhere. I simply want to display a link after the form is processed which will bring the user back to previous page. Can I do this using javascript in my php script?</p>

<p>GF</p>
","<p>You can use a link to invoke <code>history.go(-1)</code> in Javascript, which is essentially equivalent to clicking the Back button. Ideally, however, it'd be better to just create a link back to the URL from whence the user was posted to the form - that way the proper ""flow"" of history is preserved and the user doesn't wonder why they have something to click ""Forward"" to which is actually just submitting the form again.</p>
","2548580"
"how to enable sqlite3 for php?","174732","","<p>I am trying to install sqlite3 for PHP in Ubuntu.</p>

<p>I install <code>apt-get php5-sqlite3</code> and edited <code>php.ini</code> to include sqlite3 extension.</p>

<p>When I run <code>phpinfo();</code> I get</p>

<pre><code>SQLITE3
SQLite3 support  enabled  
sqlite3 library version  3.4.2  
</code></pre>

<p>as shown above, <code>sqlite3</code> is enabled. However, I get ""Class SQLite3 not found"" when I use</p>

<pre><code> new SQLite3(""database"");
</code></pre>
","<p><strong>Edit: This answer is outdated, but can't be removed because it's accepted. Please see the solution from Stacey Richards for the correct answer.</strong></p>

<pre><code> sudo apt-get install php5-cli php5-dev make
 sudo apt-get install libsqlite3-0 libsqlite3-dev
 sudo apt-get install php5-sqlite3
 sudo apt-get remove php5-sqlite3
 cd ~
 wget http://pecl.php.net/get/sqlite3-0.6.tgz
 tar -zxf sqlite3-0.6.tgz
 cd sqlite3-0.6/
 sudo phpize
 sudo ./configure
 sudo make
 sudo make install
 sudo apache2ctl restart
</code></pre>

<p>Ripped from the <a href=""http://ubuntuforums.org/showthread.php?t=891767"" rel=""noreferrer"">ubuntu form</a>. </p>
","948954"
"Windows: XAMPP vs WampServer vs EasyPHP vs alternative","174440","","<p>There was a similar question asked here three years ago, but I want to open it up further to include all possible Windows/Apache/MySQL/PHP stacks.</p>

<p>Which to do you think is best?</p>

<p><strong>XAMPP</strong> seems to be the most popular, but I've read several bad things about it that make me wonder if it's as good as its popularity suggests. For example, I've heard that their default PHP configuration is very insecure (and apparently their admin app can't function without these holes being left open). This isn't terrible for a development situation, obviously, but you may end up relying on something like <code>register_globals</code>.</p>

<p>I also spotted something else which makes me concerned: The developers recommend that Vista users disable UAC in order to use their software! </p>

<p>For me that's a big red flag. Yes, there are problems with getting something like this running on Vista with UAC enabled, but disabling UAC should never be offered as a solution, especially for newbs (who need UAC more than anyone). It makes me very concerned.</p>

<p><strong>WampServer</strong> apparently is easier to switch versions of PHP or Apache, if you need to. But it comes with less features than XAMPP (no FTP server, for example).</p>

<p><strong>EasyPHP</strong> is one that I have no experience of, so I can't say, but it's apparently pretty popular, too.</p>

<p><strong>Alternatives?</strong> There a ton of other stacks <a href=""https://en.wikipedia.org/wiki/List_of_Apache%E2%80%93MySQL%E2%80%93PHP_packages"" rel=""noreferrer"">listed on Wikipedia</a>. Do any of these come recommended?</p>

<p>So which do you use, and why do you consider it the best? Did you just stick with the first one you tried?</p>

<p>I imagine most of us just want something quick, light, and up-to-date.</p>
","<p>I generally install Apache + PHP + MySQL by-hand, not using any package like those you're talking about.</p>

<p>It's a bit more work, yes; but knowing how to install and configure your environment is great -- and useful.</p>

<p>The first time, you'll need maybe half a day or a day to configure those. But, at least, you'll know how to do so.</p>

<p>And the next times, things will be far more easy, and you'll need less time.</p>

<p>Else, you might want to take a look at <a href=""http://www.zend.com/en/products/server/"" rel=""nofollow""><strong>Zend Server</strong></a> -- which is another package that bundles Apache + PHP + MySQL.</p>

<p>Or, as an alternative, don't use Windows.</p>

<p>If your production servers are running Linux, why not run Linux on your development machine?</p>

<p>And if you don't want to <em>(or cannot)</em> install Linux on your computer, use a Virtual Machine.</p>
","5580405"
"How to get Real IP from Visitor?","174194","","<p>I'm using this PHP code to get a visitor's IP address:</p>

<pre><code>&lt;?php echo $_SERVER['REMOTE_ADDR']; ?&gt;
</code></pre>

<p>But, I can't get the real IP address from visitors <em>when they are using a proxy</em>. Is there any way to get a visitor's IP address in this case?</p>
","<p>Try this php code.</p>

<pre><code>&lt;?PHP

function getUserIP()
{
    $client  = @$_SERVER['HTTP_CLIENT_IP'];
    $forward = @$_SERVER['HTTP_X_FORWARDED_FOR'];
    $remote  = $_SERVER['REMOTE_ADDR'];

    if(filter_var($client, FILTER_VALIDATE_IP))
    {
        $ip = $client;
    }
    elseif(filter_var($forward, FILTER_VALIDATE_IP))
    {
        $ip = $forward;
    }
    else
    {
        $ip = $remote;
    }

    return $ip;
}


$user_ip = getUserIP();

echo $user_ip; // Output IP address [Ex: 177.87.193.134]


?&gt;
</code></pre>
","13646735"
"Using str_replace so that it only acts on the first match?","174165","","<p>I want a version of <code>str_replace()</code> that only replaces the first occurrence of <code>$search</code> in the <code>$subject</code>. Is there an easy solution to this, or do I need a hacky solution?</p>
","<p>Can be done with <a href=""http://www.php.net/preg_replace"" rel=""noreferrer"">preg_replace</a>:</p>

<pre><code>function str_replace_first($from, $to, $subject)
{
    $from = '/'.preg_quote($from, '/').'/';

    return preg_replace($from, $to, $subject, 1);
}

echo str_replace_first('abc', '123', 'abcdef abcdef abcdef'); 
// outputs '123def abcdef abcdef'
</code></pre>

<p>The magic is in the optional fourth parameter [Limit]. From the documentation:</p>

<blockquote>
  <p>[Limit] - The maximum possible
  replacements for each pattern in each
  subject string. Defaults to -1 (no
  limit).</p>
</blockquote>

<p><br>Though, see <a href=""https://stackoverflow.com/questions/1252693/using-str-replace-so-that-it-only-acts-on-the-first-match#1252710"">zombat's answer</a> for a more efficient method (roughly, 3-4x faster).</p>
","1252705"
"Easy way to test a URL for 404 in PHP?","174152","","<p>I'm teaching myself some basic scraping and I've found that sometimes the URL's that I feed into my code return 404, which gums up all the rest of my code.</p>

<p>So I need a test at the top of the code to check if the URL returns 404 or not.</p>

<p>This would seem like a pretty straightfoward task, but Google's not giving me any answers.  I worry I'm searching for the wrong stuff.</p>

<p>One blog recommended I use this:</p>

<pre><code>$valid = @fsockopen($url, 80, $errno, $errstr, 30);
</code></pre>

<p>and then test to see if $valid if empty or not.</p>

<p>But I think the URL that's giving me problems has a redirect on it, so $valid is coming up empty for all values.  Or perhaps I'm doing something else wrong.</p>

<p>I've also looked into a ""head request"" but I've yet to find any actual code examples I can play with or try out. </p>

<p>Suggestions?  And what's this about curl?</p>
","<p>If you are using PHP's <a href=""http://us3.php.net/manual/en/ref.curl.php"" rel=""noreferrer""><code>curl</code> bindings</a>, you can check the error code using <a href=""http://us3.php.net/manual/en/function.curl-getinfo.php"" rel=""noreferrer""><code>curl_getinfo</code></a> as such:</p>

<pre><code>$handle = curl_init($url);
curl_setopt($handle,  CURLOPT_RETURNTRANSFER, TRUE);

/* Get the HTML or whatever is linked in $url. */
$response = curl_exec($handle);

/* Check for 404 (file not found). */
$httpCode = curl_getinfo($handle, CURLINFO_HTTP_CODE);
if($httpCode == 404) {
    /* Handle 404 here. */
}

curl_close($handle);

/* Handle $response here. */
</code></pre>
","408416"
"how to use phpexcel to read data and insert into database?","174140","","<p>I have a <code>php</code> application where I want to read data from excel, Insert into database and then generate pdf reports for specific users.
I searched over the internet a lot but nothing specific given about both things. if someone could provide a tutorial or something, that would be a real help.</p>
","<p>Using the PHPExcel library to read an Excel file and transfer the data into a database</p>

<pre><code>//  Include PHPExcel_IOFactory
include 'PHPExcel/IOFactory.php';

$inputFileName = './sampleData/example1.xls';

//  Read your Excel workbook
try {
    $inputFileType = PHPExcel_IOFactory::identify($inputFileName);
    $objReader = PHPExcel_IOFactory::createReader($inputFileType);
    $objPHPExcel = $objReader-&gt;load($inputFileName);
} catch(Exception $e) {
    die('Error loading file ""'.pathinfo($inputFileName,PATHINFO_BASENAME).'"": '.$e-&gt;getMessage());
}

//  Get worksheet dimensions
$sheet = $objPHPExcel-&gt;getSheet(0); 
$highestRow = $sheet-&gt;getHighestRow(); 
$highestColumn = $sheet-&gt;getHighestColumn();

//  Loop through each row of the worksheet in turn
for ($row = 1; $row &lt;= $highestRow; $row++){ 
    //  Read a row of data into an array
    $rowData = $sheet-&gt;rangeToArray('A' . $row . ':' . $highestColumn . $row,
                                    NULL,
                                    TRUE,
                                    FALSE);
    //  Insert row data array into your database of choice here
}
</code></pre>

<p>Anything more becomes very dependent on your database, and how you want the data structured in it</p>
","9697745"
"SQL injection that gets around mysql_real_escape_string()","174049","","<p>Is there an SQL injection possibility even when using <code>mysql_real_escape_string()</code> function?</p>

<p>Consider this sample situation. SQL is constructed in PHP like this:</p>

<pre><code>$login = mysql_real_escape_string(GetFromPost('login'));
$password = mysql_real_escape_string(GetFromPost('password'));

$sql = ""SELECT * FROM table WHERE login='$login' AND password='$password'"";
</code></pre>

<p>I have heard numerous people say to me that a code like that is still dangerous and possible to hack even with <code>mysql_real_escape_string()</code> function used. But I cannot think of any possible exploit?</p>

<p>Classic injections like this:</p>

<pre><code>aaa' OR 1=1 --
</code></pre>

<p>do not work.</p>

<p>Do you know of any possible injection that would get through the PHP code above?</p>
","<p>Consider the following query:</p>

<pre><code>$iId = mysql_real_escape_string(""1 OR 1=1"");    
$sSql = ""SELECT * FROM table WHERE id = $iId"";
</code></pre>

<p><code>mysql_real_escape_string()</code> will not protect you against this.
<strong>The fact that you use single quotes (<code>' '</code>) around your variables inside your query is what protects you against this.</strong> The following is also an option:</p>

<pre><code>$iId = (int)""1 OR 1=1"";
$sSql = ""SELECT * FROM table WHERE id = $iId"";
</code></pre>
","5741264"
"Get random item from array","173912","","<pre><code>$items = Array(523,3452,334,31,...5346);
</code></pre>

<p>Each item of this array is some number.</p>

<p><strong>How do I get random item from <code>$items</code>?</strong></p>
","<pre><code>echo $items[array_rand($items)];
</code></pre>

<p><a href=""http://php.net/array_rand"" rel=""noreferrer"">array_rand()</a></p>
","4233416"
"get next and previous day with PHP","173587","","<p>I have got two arrows set up, click for next day, next two days, soon and previous day, two days ago, soon. the code seem not working? as it only get one next and previous day.</p>

<pre><code>&lt;a href=""home.php?date=&lt;?= date('Y-m-d', strtotime('-1 day', strtotime($date))) ?&gt;"" class=""prev_day"" title=""Previous Day"" &gt;&lt;/a&gt; 
&lt;a href=""home.php?date=&lt;?= date('Y-m-d', strtotime('+1 day', strtotime($date))) ?&gt;"" class=""next_day"" title=""Next Day"" &gt;&lt;/a&gt;
</code></pre>

<p>is there a way if i click the next button, the date will continously change for the next day. for a moment it will only get one day ahead </p>
","<pre><code>date('Y-m-d', strtotime('+1 day', strtotime($date)))
</code></pre>

<p>Should read</p>

<pre><code>date('Y-m-d', strtotime(' +1 day'))
</code></pre>

<hr>

<p>Update to answer question asked in comment about continuously changing the date.</p>

<pre><code>&lt;?php
$date = isset($_GET['date']) ? $_GET['date'] : date('Y-m-d');
$prev_date = date('Y-m-d', strtotime($date .' -1 day'));
$next_date = date('Y-m-d', strtotime($date .' +1 day'));
?&gt;

&lt;a href=""?date=&lt;?=$prev_date;?&gt;""&gt;Previous&lt;/a&gt;
&lt;a href=""?date=&lt;?=$next_date;?&gt;""&gt;Next&lt;/a&gt;
</code></pre>

<p>This will increase and decrease the date by one from the date you are on at the time.</p>
","5883621"
"Handling data in a PHP JSON Object","173491","","<p>Trends data from Twitter Search API in JSON.</p>

<p>Grabbing the file using:</p>

<pre><code>$jsonurl = ""http://search.twitter.com/trends.json"";
$json = file_get_contents($jsonurl,0,null,null);
$json_output = json_decode($json);
</code></pre>

<p>How do I work with data from this object. As an array? Only really need to extract data from the [name] values.</p>

<p>JSON object contains:</p>

<pre><code>stdClass Object
(
    [trends] =&gt; Array
        (
            [0] =&gt; stdClass Object
                (
                    [name] =&gt; Vote
                    [url] =&gt; http://search.twitter.com/search?q=Vote
                )

            [1] =&gt; stdClass Object
                (
                    [name] =&gt; Halloween
                    [url] =&gt; http://search.twitter.com/search?q=Halloween
                )

            [2] =&gt; stdClass Object
                (
                    [name] =&gt; Starbucks
                    [url] =&gt; http://search.twitter.com/search?q=Starbucks
                )

            [3] =&gt; stdClass Object
                (
                    [name] =&gt; #flylady
                    [url] =&gt; http://search.twitter.com/search?q=%23flylady
                )

            [4] =&gt; stdClass Object
                (
                    [name] =&gt; #votereport
                    [url] =&gt; http://search.twitter.com/search?q=%23votereport
                )

            [5] =&gt; stdClass Object
                (
                    [name] =&gt; Election Day
                    [url] =&gt; http://search.twitter.com/search?q=%22Election+Day%22
                )

            [6] =&gt; stdClass Object
                (
                    [name] =&gt; #PubCon
                    [url] =&gt; http://search.twitter.com/search?q=%23PubCon
                )

            [7] =&gt; stdClass Object
                (
                    [name] =&gt; #defrag08
                    [url] =&gt; http://search.twitter.com/search?q=%23defrag08
                )

            [8] =&gt; stdClass Object
                (
                    [name] =&gt; Melbourne Cup
                    [url] =&gt; http://search.twitter.com/search?q=%22Melbourne+Cup%22
                )

            [9] =&gt; stdClass Object
                (
                    [name] =&gt; Cheney
                    [url] =&gt; http://search.twitter.com/search?q=Cheney
                )

        )

    [as_of] =&gt; Mon, 03 Nov 2008 21:49:36 +0000
)
</code></pre>
","<p>You mean something like this?</p>

<pre><code>&lt;?php

$jsonurl = ""http://search.twitter.com/trends.json"";
$json = file_get_contents($jsonurl,0,null,null);
$json_output = json_decode($json);

foreach ( $json_output-&gt;trends as $trend )
{
    echo ""{$trend-&gt;name}\n"";
}
</code></pre>
","263426"
"how to check if curl is enabled or disabled","173491","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/8786428/writing-a-function-in-php"">Writing a function in php</a>  </p>
</blockquote>



<p>I'm using the following code</p>

<pre><code>echo 'Curl: ', function_exists('curl_version') ? 'Enabled' : 'Disabled';
</code></pre>

<p>this can get it enabled or disabled</p>

<p>but i would like to make as function say function name is <code>_iscurl</code></p>

<p>then i can call it as following any where in my website code</p>

<pre><code>if (_iscurl()){
echo ""this is enabled""; // will do an action
}else{
echo ""this is disabled""; // will do another action
}
</code></pre>

<p>~ thanks</p>

<p>almost same as my previous question <a href=""https://stackoverflow.com/questions/13433660/how-to-check-if-allow-url-fopen-is-enabled-or-not"">check if allow_url_fopen is enabled or not</a></p>
","<p>Just return your existing check from a <a href=""http://php.net/manual/en/language.functions.php"">function</a>.</p>

<pre><code>function _isCurl(){
    return function_exists('curl_version');
}
</code></pre>
","13433965"
"How to include() all PHP files from a directory?","173455","","<p>Very quick n00b question, in PHP can I include a directory of scripts.</p>

<p>i.e. Instead of:</p>

<pre><code>include('classes/Class1.php');
include('classes/Class2.php');
</code></pre>

<p>is there something like:</p>

<pre><code>include('classes/*');
</code></pre>

<p>Couldn't seem to find a good way of including a collection of about 10 sub-classes for a particular class.</p>
","<pre><code>foreach (glob(""classes/*.php"") as $filename)
{
    include $filename;
}
</code></pre>
","599694"
"How to install PHP mbstring on CentOS 6.2","173349","","<p>How do I install mbstring with PHP on CentOS 6.2</p>

<p>I've tried:</p>

<pre><code>$ sudo yum install php-mbstring

Loaded plugins: fastestmirror, security
Loading mirror speeds from cached hostfile
 * base: mirror.net.cen.ct.gov
 * extras: centos.aol.com
 * updates: mirrors.seas.harvard.edu
Setting up Install Process
No package php-mbstring available.
Error: Nothing to do
</code></pre>

<p>But no packages were found?</p>
","<p>do the following:</p>

<pre><code>sudo nano /etc/yum.repos.d/CentOS-Base.repo
</code></pre>

<p>under the section <code>updates</code>, comment out the mirrorlist line (put a <code>#</code> in front of the line), then on a new line write:</p>

<pre><code>baseurl=http://centos.intergenia.de/$releasever/updates/$basearch/
</code></pre>

<p>now try:</p>

<pre><code>yum install php-mbstring
</code></pre>

<p>(afterwards you'll probably want to uncomment the mirrorlist and comment out the baseurl)</p>
","10278981"
"PHP - Failed to open stream : No such file or directory","173258","","<p>In PHP scripts, whether calling <code>include()</code>, <code>require()</code>, <code>fopen()</code>, or their derivatives such as <code>include_once</code>, <code>require_once</code>, or even, <code>move_uploaded_file()</code>, one often runs into an error or warning: </p>

<blockquote>
  <p>Failed to open stream : No such file or directory.</p>
</blockquote>

<p>What is a good process to quickly find the root cause of the problem?</p>
","<p>There are many reasons why one might run into this error and thus a good checklist of what to check first helps considerably.</p>

<p>Let's consider that we are troubleshooting the following line:</p>

<pre><code>require ""/path/to/file""
</code></pre>

<p><br></p>

<h1>Checklist</h1>

<p><br></p>

<h2>1. Check the file path for typos</h2>

<ul>
<li>either check manually (by visually checking the path)</li>
<li><p>or move whatever is called by <code>require*</code> or <code>include*</code> to its own variable, echo it, copy it, and try accessing it from a terminal:</p>

<pre><code>$path = ""/path/to/file"";

echo ""Path : $path"";

require ""$path"";
</code></pre>

<p>Then, in a terminal:</p>

<pre><code>cat &lt;file path pasted&gt;
</code></pre></li>
</ul>

<p><br></p>

<h2>2. Check that the file path is correct regarding relative vs absolute path considerations</h2>

<ul>
<li>if it is starting by a forward slash ""/"" then it is not referring to the root of your website's folder (the document root), but to the root of your server.

<ul>
<li>for example, your website's directory might be <code>/users/tony/htdocs</code></li>
</ul></li>
<li>if it is not starting by a forward slash then it is either relying on the include path (see below) or the path is relative. If it is relative, then PHP will calculate relatively to the path of the <a href=""https://secure.php.net/manual/en/function.getcwd.php"">current working directory</a>.

<ul>
<li>thus, not relatively to the path of your website's root, or to the file where you are typing</li>
<li>for that reason, always use absolute file paths</li>
</ul></li>
</ul>

<p>Best practices :</p>

<p>In order to make your script robust in case you move things around, while still generating an absolute path at runtime, you have 2 options :</p>

<ol>
<li>use <code>require __DIR__ . ""/relative/path/from/current/file""</code>. The <a href=""https://secure.php.net/manual/en/language.constants.predefined.php""><code>__DIR__</code> magic constant</a> returns the directory of the current file.</li>
<li><p>define a <code>SITE_ROOT</code> constant yourself :</p>

<ul>
<li>at the root of your website's directory, create a file, e.g. <code>config.php</code></li>
<li><p>in <code>config.php</code>, write</p>

<pre><code>define('SITE_ROOT', __DIR__);
</code></pre></li>
<li><p>in every file where you want to reference the site root folder, include <code>config.php</code>, and then use the <code>SITE_ROOT</code> constant wherever you like :</p>

<pre><code>require_once __DIR__.""/../config.php"";
...
require_once SITE_ROOT.""/other/file.php"";
</code></pre></li>
</ul></li>
</ol>

<p>These 2 practices also make your application more portable because it does not rely on ini settings like the include path.</p>

<p><br></p>

<h2>3. Check your include path</h2>

<p>Another way to include files, neither relatively nor purely absolutely, is to rely on the <a href=""https://secure.php.net/manual/en/ini.core.php#ini.include-path"">include path</a>. This is often the case for libraries or frameworks such as the Zend framework.</p>

<p>Such an inclusion will look like this :</p>

<pre><code>include ""Zend/Mail/Protocol/Imap.php""
</code></pre>

<p>In that case you will want to make sure that the folder where ""Zend"" is, is part of the include path.</p>

<p>You can check the include path with :</p>

<pre><code>echo get_include_path();
</code></pre>

<p>You can add a folder to it with :</p>

<pre><code>set_include_path(get_include_path()."":"".""/path/to/new/folder"");
</code></pre>

<p><br></p>

<h2>4. Check that your server has access to that file</h2>

<p>It might be that altogether, the user running the server process (Apache or php) simply doesn't have permission to read from or write to that file.</p>

<p>To check under what user the server is running you can use <a href=""https://secure.php.net/manual/en/function.posix-getpwuid.php"">posix_getpwuid</a> :</p>

<pre><code>$user = posix_getpwuid(posix_geteuid());

var_dump($user);
</code></pre>

<p>To find out the permissions on the file, type the following command in the terminal:</p>

<pre><code>ls -l &lt;path/to/file&gt;
</code></pre>

<p>and look at <a href=""https://en.wikipedia.org/wiki/File_system_permissions#Symbolic_notation"">permission symbolic notation</a></p>

<p><br></p>

<h2>5. Check PHP settings</h2>

<p>If none of the above worked, then the issue is probably that some PHP settings forbid it to access that file.</p>

<p>Three settings could be relevant :</p>

<ol>
<li><a href=""https://secure.php.net/manual/en/ini.core.php#ini.open-basedir"">open_basedir</a>

<ul>
<li>If this is set PHP won't be able to access any file outside of the specified directory (not even through a symbolic link).</li>
<li>However, the default behavior is for it not to be set in which case there is no restriction</li>
<li>This can be checked by either calling <a href=""https://secure.php.net/manual/en/function.phpinfo.php""><code>phpinfo()</code></a> or by using <code>ini_get(""open_basedir"")</code></li>
<li>You can change the setting either by editing your php.ini file or your httpd.conf file</li>
</ul></li>
<li><a href=""https://secure.php.net/manual/en/features.safe-mode.php"">safe mode</a>

<ul>
<li>if this is turned on restrictions might apply. However this has been removed in PHP 5.4. If you are still on a version that support safe mode upgrade to a PHP version that is <a href=""http://php.net/eol.php"">still being supported</a>.</li>
</ul></li>
<li><a href=""https://secure.php.net/manual/en/filesystem.configuration.php"">allow_url_fopen and allow_url_include</a>

<ul>
<li>this applies only to including or opening files through a network process such as http:// not when trying to include files on the local file system</li>
<li>this can be checked with <code>ini_get(""allow_url_include"")</code> and set with <code>ini_set(""allow_url_include"", ""1"")</code></li>
</ul></li>
</ol>

<p><br></p>

<h1>Corner cases</h1>

<p>If none of the above enabled to diagnose the problem, here are some special situations that could happen :</p>

<p><br></p>

<h2>1. Inclusion of library relying on include path</h2>

<p>It can happen that you include a library, for example the Zend framework, using a relative or absolute path. For example :</p>

<pre><code>require ""/usr/share/php/libzend-framework-php/Zend/Mail/Protocol/Imap.php""
</code></pre>

<p>But then you still get the same kind of error.</p>

<p>This could happen because the file that you have (successfully) included, has itself an include statement for another file, and that second include statement assumes that you have added the path of that library to the include path.</p>

<p>For example, the Zend framework file mentioned before could have the following include :</p>

<pre><code>include ""Zend/Mail/Protocol/Exception.php"" 
</code></pre>

<p>which is neither an inclusion by relative path, nor by absolute path. It is assuming that the Zend framework directory has been added to the include path.</p>

<p>In such a case, the only practical solution is to add the directory to your include path.</p>

<p><br></p>

<h2>2. SELinux</h2>

<p>If you are running Security-Enhanced Linux, then it might be the reason for the problem, by denying access to the file from the server.</p>

<p><strong>To check whether SELinux is enabled</strong> on your system, run the <code>sestatus</code> command in a terminal. If the command does not exist, then SELinux is not on your system. If it does exist, then it should tell you whether it is enforced or not.</p>

<p><strong>To check whether SELinux policies are the reason</strong> for the problem, you can try turning it off temporarily. However be CAREFUL, since this will disable protection entirely. Do not do this on your production server.</p>

<pre><code>setenforce 0
</code></pre>

<p>If you no longer have the problem with SELinux turned off, then this is the root cause.</p>

<p><strong>To solve it</strong>, you will have to configure SELinux accordingly.</p>

<p>The following context types will be necessary :</p>

<ul>
<li><code>httpd_sys_content_t</code> for files that you want your server to be able to read</li>
<li><code>httpd_sys_rw_content_t</code> for files on which you want read and write access</li>
<li><code>httpd_log_t</code> for log files</li>
<li><code>httpd_log_t</code> for the cache directory</li>
</ul>

<p>For example, to assign the <code>httpd_sys_content_t</code> context type to your website root directory, run :</p>

<pre><code>semanage fcontext -a -t http_sys_content_t ""/path/to/root(/.*)?""
restorecon -Rv /path/to/root
</code></pre>

<p>If your file is in a home directory, you will also need to turn on the <code>httpd_enable_homedirs</code> boolean :</p>

<pre><code>setsebool -P httpd_enable_homedirs 1
</code></pre>

<p>In any case, there could be a variety of reasons why SELinux would deny access to a file, depending on your policies. So you will need to enquire into that. <a href=""http://www.serverlab.ca/tutorials/linux/web-servers-linux/configuring-selinux-policies-for-apache-web-servers/"">Here</a> is a tutorial specifically on configuring SELinux for a web server.</p>

<p><br></p>

<h2>3. Symfony</h2>

<p>If you are using Symfony, and experiencing this error when uploading to a server, then it can be that the app's cache hasn't been reset, either because <code>app/cache</code> has been uploaded, or that cache hasn't been cleared.</p>

<p>You can test and fix this by running the following console command:</p>

<pre><code>cache:clear
</code></pre>
","36577021"
"Insert string at specified position","173234","","<p>Is there a PHP function that can do that?</p>

<p>I'm using <code>strpos</code> to get the position of a substring and I want to insert a <code>string</code> after that position.</p>
","<pre><code>$newstr = substr_replace($oldstr, $str_to_insert, $pos, 0);
</code></pre>

<p><a href=""http://php.net/substr_replace"" rel=""noreferrer"">http://php.net/substr_replace</a></p>
","17880260"
"PHP PDO: charset, set names?","173092","","<p>I had this previously in my normal mysql_* connection:</p>

<pre><code>mysql_set_charset(""utf8"",$link);
mysql_query(""SET NAMES 'UTF8'"");
</code></pre>

<p>Do I need it for the PDO? And where should I have it?</p>

<pre><code>$connect = new PDO(""mysql:host=$host;dbname=$db"", $user, $pass, array(PDO::ATTR_ERRMODE =&gt; PDO::ERRMODE_EXCEPTION));
</code></pre>
","<p>You'll have it in your connection string like:</p>

<pre><code>""mysql:host=$host;dbname=$db;charset=utf8""
</code></pre>

<p>HOWEVER, prior to PHP 5.3.6, the charset option was ignored. If you're running an older version of PHP, you must do it like this:</p>

<pre><code>$dbh = new PDO(""mysql:$connstr"",  $user, $password);
$dbh-&gt;exec(""set names utf8"");
</code></pre>
","4361485"
"Upgrading PHP on CentOS 6.5 (Final)","172838","","<p>I'm trying to update my PHP (currently v:5.3.3 to the latest stable PHP build) but it's not playing ball and it's saying there is nothing to update.</p>

<p>Any help would be useful.</p>

<p>Keeps saying:</p>

<blockquote>
  <p>No Packages marked for Update</p>
</blockquote>
","<p>As Jacob mentioned, the CentOS packages repo appears to only have PHP 5.3 available at the moment.  But these commands seemed to work for me...</p>

<pre><code>rpm -Uvh http://mirror.webtatic.com/yum/el6/latest.rpm
yum remove php-common       # Need to remove this, otherwise it conflicts
yum install php56w
yum install php56w-mysql
yum install php56w-common
yum install php56w-pdo
yum install php56w-opcache
php --version               # Verify version has been upgraded
</code></pre>

<p>You can alternatively use <code>php54w</code> or <code>php55w</code> if required.</p>

<p><strong><em>CAUTION!</em></strong><br>
This may potentially break your website if it doesn't fully resolve all your dependencies, so you may need a couple of extra packages in some cases. <a href=""https://webtatic.com/packages/php56/"" rel=""noreferrer"">See here</a> for a list of other PHP 5.6 modules that are available.</p>

<p>If you encounter a problem and need to reset back to the default, you can use these commands:</p>

<pre><code>sudo yum remove php56w
sudo yum remove php56w-common
sudo yum install php-common
sudo yum install php-mysql
sudo yum install php
</code></pre>

<p><em>(Thanks Fabrizio Bartolomucci)</em></p>
","24351302"
"PHP - MySQL connection not working: 2002 No such file or directory","172124","","<p>I'm trying to set up WordPress. I have Apache and MySQL running, and the accounts and database are all set up. I tried to make a simple connection:</p>

<pre><code>&lt;?php
    $conn = mysql_connect('localhost', 'USER', 'PASSWORD');
    if(!$conn) {
        echo 'Error: ' . mysql_errno() . ' - ' . mysql_error();
    }
?&gt;
</code></pre>

<p>And I always get this:</p>

<blockquote>
  <p>Error: 2002 - No such file or
  directory</p>
</blockquote>

<p>What file or directory could it be talking about?</p>

<p>I'm on a OS X Snow Leopard, using the built-in Apache. I installed MySQL using the x86_64 dmg.</p>

<p>UPDATE: I found that the socket is at /tmp/mysql.sock, so In php.ini, I replaced all occurrences of the wrong path with that.</p>
","<p>If you use Linux: the path to the mysql.sock file is wrong. This is usually because you are using (LAMPP) XAMPP and it isn't in /tmp/mysql.sock</p>

<p>Open the php.ini file and find this line:</p>

<pre><code>mysql.default_socket
</code></pre>

<p>And make it</p>

<pre><code>mysql.default_socket = /path/to/mysql.sock
</code></pre>
","1676741"
"Passing multiple variables to another page in url","171127","","<p>I'm passing a variable to another page in a url using sessions like this but it seems that I can't concatenate another variable to the same url and retrieve it in the next page  successfully  </p>

<p><strong>Page 1</strong></p>

<pre><code>session_start();
$event_id = $_SESSION['event_id'];
echo $event_id;

$url = ""http://localhost/main.php?email="" . $email_address . $event_id;     
</code></pre>

<p><strong>Page 2</strong></p>

<pre><code>if (isset($_GET['event_id'])) {
$event_id = $_GET['event_id'];}
echo $event_id;
</code></pre>

<p><code>echo $event_id</code> shows an error <code>Undefined variable</code> on page 2 but if I use just the <code>event_id</code> in the <code>$url</code> like here </p>

<pre><code> $url = ""http://localhost/main.php?event_id="" . $event_id;
</code></pre>

<p>That works fine, but I need to be able to use both variables in the url so that page 2 can retrieve get them.</p>
","<p>Use the ampersand <code>&amp;</code> to glue variables together:</p>

<pre><code>$url = ""http://localhost/main.php?email=$email_address&amp;event_id=$event_id"";
//                               ^ start of vars      ^next var
</code></pre>
","13102500"
"PHP substring extraction. Get the string before the first '/' or the whole string","171105","","<p>I am trying to extract a substring. I need some help with doing it in PHP.</p>

<p>Here are some sample strings I am working with and the results I need: </p>

<pre><code>home/cat1/subcat2 =&gt; home

test/cat2 =&gt; test

startpage =&gt; startpage
</code></pre>

<p>I want to get the string till the first <code>/</code>, but if no <code>/</code> is present, get the whole string.</p>

<p>I tried,</p>

<pre><code>substr($mystring, 0, strpos($mystring, '/'))
</code></pre>

<p>I think it says - get the position of <code>/</code> and then get the substring from position 0 to <em>that</em> position.</p>

<p>I don't know how to handle the case where there is no <code>/</code>, without making the statement too big.</p>

<p>Is there a way to handle that case also without making the PHP statement too complex?</p>
","<p>Use <a href=""http://php.net/explode""><code>explode()</code></a></p>

<pre><code>$arr = explode(""/"", $string, 2);
$first = $arr[0];
</code></pre>

<p>In this case, I'm using the <code>limit</code> parameter to <code>explode</code> so that php won't scan the string any more than what's needed.</p>
","1935929"
"How to access PHP variables in JavaScript or jQuery rather than <?php echo $variable ?>","171047","","<p>How do I access PHP variables in JavaScript or jQuery? Do I have to write </p>

<pre><code>&lt;?php echo $variable1 ?&gt;
&lt;?php echo $variable2 ?&gt;
&lt;?php echo $variable3 ?&gt;
...
&lt;?php echo $variablen ?&gt;
</code></pre>

<p>I know I can store some variables in cookies, and access these values via cookies, but values in cookies are relatively stable values. Moreover, there is a limit, you can not store many values in cookies, and the method is not that convenient. Is there a better way to do it?</p>
","<p>Your example shows the most simple way of passing PHP variables to JavaScript. You can also use json_encode for more complex things like arrays:</p>

<pre><code>&lt;?php
    $simple = 'simple string';
    $complex = array('more', 'complex', 'object', array('foo', 'bar'));
?&gt;
&lt;script type=""text/javascript""&gt;
    var simple = '&lt;?php echo $simple; ?&gt;';
    var complex = &lt;?php echo json_encode($complex); ?&gt;;
&lt;/script&gt;
</code></pre>

<p>Other than that, if you really want to ""interact"" between PHP and JavaScript you should use Ajax.</p>

<p>Using cookies for this is a very unsafe and unreliable way, as they are stored clientside and therefore open for any manipulation or won't even get accepted/saved. Don't use them for this type of interaction.
<a href=""http://docs.jquery.com/Ajax"" rel=""noreferrer"">jQuery.ajax</a> is a good start IMHO.</p>
","1808161"
"How to configure WAMP (localhost) to send email using Gmail?","171011","","<p>I want to use the mail() function from my localhost. I have WAMP installed and a Gmail account. I know that the SMTP for Gmail is smtp.gmail.com and the port is 465 (<a href=""http://mail.google.com/support/bin/answer.py?answer=78799"" rel=""noreferrer"">more info from gmail</a>).
What I need to configure in WAMP so I can use the mail() function?</p>

<p>Thanks!!</p>
","<p>Gmail servers use SMTP Authentication under SSL or TLS. I think that there is no way to use the <code>mail()</code> function under that circumstances, so you might want to check these alternatives:</p>

<ul>
<li><a href=""http://pear.php.net/package/Mail"" rel=""nofollow noreferrer"">PEAR::Mail</a></li>
<li><a href=""http://sourceforge.net/projects/phpmailer/"" rel=""nofollow noreferrer"">phpMailer</a></li>
<li><a href=""https://github.com/nette/mail"" rel=""nofollow noreferrer"">Nette\Mail</a></li>
</ul>

<p>They all support SMTP auth under SSL.</p>

<p>You'll need to enable the <code>php_openssl</code> extension in your php.ini.</p>

<p>Additional Resources:</p>

<ul>
<li><a href=""http://email.about.com/od/emailprogrammingtips/qt/et073006.htm"" rel=""nofollow noreferrer"">How to Send Email from a PHP Script Using SMTP Authentication</a> (using <code>PEAR::Mail</code>)</li>
<li><a href=""http://deepakssn.blogspot.com/2006/06/gmail-php-send-email-using-php-with.html"" rel=""nofollow noreferrer"">Send email using PHP with Gmail</a>  (using <em>phpMailer</em>)</li>
<li><a href=""https://doc.nette.org/en/2.3/mailing"" rel=""nofollow noreferrer"">Mailing</a> using <code>Nette\Mail</code></li>
</ul>
","600748"
"Laravel 4: how to ""order by"" using Eloquent ORM","170909","","<p>Simple question - how do I order by 'id' descending in Laravel 4.</p>

<p>The relevant part of my controller looks like this:</p>

<pre><code>$posts = $this-&gt;post-&gt;all()
</code></pre>

<p>As I understand you use this line:</p>

<pre><code>-&gt;orderBy('id', 'DESC');
</code></pre>

<p>But how does that fit in with my above code?</p>
","<p>If you are using post as a model (without dependency injection), you can also do:</p>

<pre><code>$posts = Post::orderBy('id', 'DESC')-&gt;get();
</code></pre>
","18289241"
"Set a cookie to never expire","170545","","<p>Looking at the <a href=""http://php.net/manual/en/function.setcookie.php"" rel=""noreferrer"">php documentation on setting a cookie</a> I see that I can set an expiration date for the cookie.  You can set the cookie to expire at the end of the browser session or at some time in the future but I do not see a way to set the cookie to never expire.  Is this even possible and how is this accomplished?</p>
","<p>All cookies expire as per the <a href=""http://www.faqs.org/rfcs/rfc2965.html"" rel=""noreferrer"">cookie specification</a>, so this is not a PHP limitation.</p>

<p>Use a far future date. For example, set a cookie that expires in ten years:</p>

<pre><code>setcookie(
  ""CookieName"",
  ""CookieValue"",
  time() + (10 * 365 * 24 * 60 * 60)
);
</code></pre>

<p>Note that if you set a date past <strong>2038</strong> in PHP, the number will wrap around and you'll get a cookie that expires instantly.</p>
","3290474"
"Parsing Domain From URL In PHP","170466","","<p>I need to build a function which parses the domain from a URL.</p>

<p>So, with </p>

<p><code>http://google.com/dhasjkdas/sadsdds/sdda/sdads.html</code> </p>

<p>or</p>

<p><code>http://www.google.com/dhasjkdas/sadsdds/sdda/sdads.html</code></p>

<p>it should return <code>google.com</code></p>

<p>with </p>

<p><code>http://google.co.uk/dhasjkdas/sadsdds/sdda/sdads.html</code></p>

<p>it should return <code>google.co.uk</code>.</p>
","<p>Check out <a href=""http://php.net/parse_url"" rel=""noreferrer""><code>parse_url()</code></a>:</p>

<pre><code>$url = 'http://google.com/dhasjkdas/sadsdds/sdda/sdads.html';
$parse = parse_url($url);
echo $parse['host']; // prints 'google.com'
</code></pre>

<p><code>parse_url</code> doesn't handle really badly mangled urls very well, but is fine if you generally expect decent urls.     </p>
","276525"
"Apache is downloading php files instead of displaying them","170095","","<p>OS and server information:</p>

<ul>
<li>CentOS 6.4 (Final)</li>
<li>Apache 2.2.15</li>
<li>PHP 5.5.1</li>
</ul>

<p>I previously had php 5.3.x installed but decided to upgrade. I first uninstalled the php 5.3.x and then installed php 5.5.1 but after the installation completed apache did not parse the php files it just downloaded them. I have checked similar questions here in stackoverflow but none of them have helped me so far.</p>

<p>For the record I have the following lines in my httpd.conf and php.conf that should make php work but don't:</p>

<pre><code>AddHandler application/x-httpd-php .php5 .php4 .php .php3 .php2 .phtml
AddType application/x-httpd-php .php5 .php4 .php .php3 .php2 .phtml
AddType application/x-httpd-php-source .phps
AddHandler php5-script .php
</code></pre>

<p>I would really appreciate any help.
Thank you.</p>

<p>EDIT:</p>

<p>I have these lines in the php.conf</p>

<pre><code>&lt;IfModule !worker.c&gt;
  LoadModule php5_module modules/libphp5.so
&lt;/IfModule&gt;
&lt;IfModule worker.c&gt;
  LoadModule php5_module modules/libphp5-zts.so
&lt;/IfModule&gt;
</code></pre>

<p>EDIT:</p>

<p>By removing the </p>

<pre><code>AddType application/x-httpd-php .php5 .php4 .php .php3 .php2 .phtml
</code></pre>

<p>apache no longer downloads the file. Now apache is showing the source code, but not all of it just part. I added</p>

<pre><code>AddType text/html .php
</code></pre>

<p>but no luck.</p>
","<p>The correct AddType for php is application/x-httpd-php</p>

<pre><code>AddType  application/x-httpd-php         .php
AddType  application/x-httpd-php-source  .phps
</code></pre>

<p>Also make sure your php module is loaded</p>

<pre><code>LoadModule php5_module        modules/mod_php55.so
</code></pre>

<p>When you're configuring apache then try to view the page from another browser - I've had days when chrome stubbornly caches the result and it keeps downloading the source code while in another browser it's just fine.</p>
","18457702"
"How to fix the session_register() deprecated issue?","170095","","<p>How to fix the <code>session_register()</code> deprecated problem in PHP 5.3</p>
","<p>Don't use it. The description says:</p>

<blockquote>
  <p>Register one or more global variables with the current session.</p>
</blockquote>

<p>Two things that came to my mind:</p>

<ol>
<li>Using global variables is not good anyway, find a way to avoid them.</li>
<li>You can still set variables with <code>$_SESSION['var'] = ""value""</code>.</li>
</ol>

<p>See also the warnings from the <a href=""http://php.net/manual/en/function.session-register.php"" rel=""noreferrer"">manual</a>:</p>

<blockquote>
  <p>If you want your script to work regardless of <code>register_globals</code>, you need to instead use the <code>$_SESSION</code> array as <code>$_SESSION</code> entries are automatically registered. If your script uses <code>session_register()</code>, it will <strong>not</strong> work in environments where the PHP directive <code>register_globals</code> is disabled.</p>
</blockquote>

<p>This is pretty important, because the <code>register_globals</code> directive <a href=""http://php.net/manual/en/ini.core.php"" rel=""noreferrer"">is set to <code>False</code> by default!</a></p>

<p>Further:</p>

<blockquote>
  <p>This registers a <code>global</code> variable. If you want to register a session variable from within a <strong>function</strong>, you need to make sure to make it global using the <code>global</code> keyword or the <code>$GLOBALS[]</code> array, or use the special session arrays as noted below.</p>
</blockquote>

<p>and </p>

<blockquote>
  <p>If you are using <code>$_SESSION</code> (or <code>$HTTP_SESSION_VARS</code>), do not use <code>session_register()</code>, <code>session_is_registered()</code>, and <code>session_unregister()</code>.</p>
</blockquote>
","3682629"
"Best way to create a PDF with PHP","169975","","<p>I've been reading up on creating a PDF file with PHP and am wondering what the easiest option is.</p>

<ol>
<li><p>Create a PDF template, open it and replace placeholder text
-- which function do I use to open an existing PDF for editing?</p></li>
<li><p>Create a PDF template and place text on it using co-ordinates</p></li>
<li><p>Create a HTML document then convert it to PDF using some sort of free tool?</p></li>
<li><p>Create a PDF from scratch using PHP (this seams like a time consuming way to do it).</p></li>
</ol>
","<p>The one that i know of as being best is the <a href=""http://www.fpdf.org/"" rel=""noreferrer"">FPDF</a>. It is great open-source solution for creating all sorts of PDF layouts. Thanks</p>

<p><a href=""http://www.fpdf.org/en/tutorial/index.php"" rel=""noreferrer"">See FPDF tutorials</a><br>
<a href=""http://www.fpdf.org/en/script/index.php"" rel=""noreferrer"">And scripts</a></p>
","2132051"
"define() vs const","169801","","<p>Pretty straightforward question: In PHP, when do you use </p>

<pre><code>define('FOO', 1);
</code></pre>

<p>and when do you use</p>

<pre><code>const FOO = 1;
</code></pre>

<p>What are the main differences between those two?</p>
","<p>As of PHP 5.3 there are two ways to <a href=""http://php.net/language.constants.syntax"" rel=""noreferrer"">define constants</a>: Either using the <code>const</code> keyword or using the <a href=""http://php.net/define"" rel=""noreferrer""><code>define()</code></a> function:</p>

<pre><code>const FOO = 'BAR';
define('FOO', 'BAR');
</code></pre>

<p>The fundamental difference between those two ways is that <code>const</code> defines constants at compile time, whereas <code>define</code> defines them at run time. This causes most of <code>const</code>'s disadvantages. Some disadvantages of <code>const</code> are:</p>

<ul>
<li><p><code>const</code> cannot be used to conditionally define constants. To define a global constant, it has to be used in the outermost scope:</p>

<pre><code>if (...) {
    const FOO = 'BAR';    // invalid
}
// but
if (...) {
    define('FOO', 'BAR'); // valid
}
</code></pre>

<p>Why would you want to do that anyways? One common application is to check whether the constant is already defined:</p>

<pre><code>if (!defined('FOO')) {
    define('FOO', 'BAR');
}
</code></pre></li>
<li><p><code>const</code> accepts a static scalar (number, string or other constant like <code>true</code>, <code>false</code>, <code>null</code>, <code>__FILE__</code>), whereas <code>define()</code> takes any expression. Since PHP 5.6 constant expressions are allowed in <code>const</code> as well:</p>

<pre><code>const BIT_5 = 1 &lt;&lt; 5;    // valid since PHP 5.6, invalid previously
define('BIT_5', 1 &lt;&lt; 5); // always valid
</code></pre></li>
<li><p><code>const</code> takes a plain constant name, whereas <code>define()</code> accepts any expression as name. This allows to do things like this:</p>

<pre><code>for ($i = 0; $i &lt; 32; ++$i) {
    define('BIT_' . $i, 1 &lt;&lt; $i);
}
</code></pre></li>
<li><p><code>const</code>s are always case sensitive, whereas <code>define()</code> allows you to define case insensitive constants by passing <code>true</code> as the third argument:</p>

<pre><code>define('FOO', 'BAR', true);
echo FOO; // BAR
echo foo; // BAR
</code></pre></li>
</ul>

<p>So, that was the bad side of things. Now let's look at the reason why I personally always use <code>const</code> unless one of the above situations occurs:</p>

<ul>
<li><code>const</code> simply reads nicer. It's a language construct instead of a function and also is consistent with how you define constants in classes.</li>
<li><p><code>const</code> defines a constant in the current namespace, while <code>define()</code> has to be passed the full namespace name:</p>

<pre><code>namespace A\B\C;
// To define the constant A\B\C\FOO:
const FOO = 'BAR';
define('A\B\C\FOO', 'BAR');
</code></pre></li>
<li><p>Since PHP 5.6 <code>const</code> constants can also be arrays, while <code>define()</code> does not support arrays yet. However arrays will be supported for both cases in PHP 7.</p>

<pre><code>const FOO = [1, 2, 3];    // valid in PHP 5.6
define('FOO', [1, 2, 3]); // invalid in PHP 5.6, valid in PHP 7.0
</code></pre></li>
<li><p>As <code>const</code>s are language constructs and defined at compile time they are a bit faster than <code>define()</code>s.</p>

<p>It is well known that PHP <code>define()</code>s are slow when using a large number of constants. People have even invented things like <a href=""http://php.net/apc_load_constants"" rel=""noreferrer""><code>apc_load_constants()</code></a> and <a href=""http://pecl.php.net/package/hidef"" rel=""noreferrer""><code>hidef</code></a> to get around this.</p>

<p><code>const</code>s make the definition of constants approximately twice as fast (on development machines with XDebug turned on even more). Lookup time on the other hand does not change (as both constant types share the same lookup table): <a href=""http://codepad.viper-7.com/dDqcGA"" rel=""noreferrer"">Demo</a>.</p></li>
</ul>

<p>Finally, note that <code>const</code> can also be used within a class or interface to define a <a href=""http://php.net/manual/en/language.oop5.constants.php"" rel=""noreferrer"">class constant</a> or interface constant. <code>define</code> cannot be used for this purpose:</p>

<pre><code>class Foo {
    const BAR = 2; // valid
}
// but
class Baz {
    define('QUX', 2); // invalid
}
</code></pre>

<p><strong>Summary</strong></p>

<p>Unless you need any type of conditional or expressional definition, use <code>const</code>s instead of <code>define()</code>s - simply for the sake of readability!</p>
","3193704"
"Get sum of MySQL column in PHP","169766","","<p>I have a column in a table that I would like to add up and return the sum. I have a loop, but it's not working.</p>

<pre><code>while ($row = mysql_fetch_assoc($result)){
    $sum += $row['Value'];
}

echo $sum;
</code></pre>
","<p>You can completely handle it in the MySQL query:</p>

<pre><code>SELECT SUM(column_name) FROM table_name;
</code></pre>

<p>In the PHP code, try this:</p>

<pre><code>$result = mysql_query('SELECT SUM(value) AS value_sum FROM codes'); 
$row = mysql_fetch_assoc($result); 
$sum = $row['value_sum'];
</code></pre>

<p>Using PDO (<code>mysql_query</code> is depreciated)</p>

<pre><code>$stmt = $handler-&gt;prepare(""SELECT SUM(value) AS value_sum FROM codes"");
$stmt-&gt;execute();

$row = $handler-&gt;fetchAll(PDO::FETCH_OBJ);
$sum = $row-&gt;value_sum;
</code></pre>
","5808565"
"How do I give PHP write access to a directory?","169301","","<p>I'm trying to use PHP to create a file, but it isn't working. I am assuming this is because it doesn't have write access (it's always been the problem before). I tried to test if this was the problem by making the folder chmod 0777, but that just ended up making every script in that directory return a 500 error message until I changed it back.
How do I give PHP write access to my file system so it can a create a file?</p>

<p>Edit: It is hosted on Hostgator shared hosting using Apache.</p>

<p>Edit 2: Someone asked for the code:
The code is a GD image script. I know the rest of it works as previously I was creating the image every ime it was called. Now I am trying to create them when new text is added and save them to a folder. The write line I have is:
imagejpeg(null,$file,85);</p>

<p>I also created a test file to check if it was just a broken script (mainly copied from tizag):
<a href=""http://gearboxshow.info/rkr/lesig.jpg/testfile.txt"" rel=""noreferrer"">http://gearboxshow.info/rkr/lesig.jpg/testfile.txt</a> (I don't know if/how to post the code here properly. Here is the contents of the PHP script, minus PHP tags.)</p>

<p>It returns 13,13,1 (separate lines), so it looks as if it thinks it wrote something, but the testfile.txt is blank (I uploaded a blank one), or non-existent (if I delete it).</p>

<p>Edit 3: The server runs CentOS.</p>
","<p>An very easy way is to let PHP create the directory itself in the first place.</p>

<pre><code>&lt;?php
 $dir = 'myDir';

 // create new directory with 744 permissions if it does not exist yet
 // owner will be the user/group the PHP script is run under
 if ( !file_exists($dir) ) {
     $oldmask = umask(0);  // helpful when used in linux server  
     mkdir ($dir, 0744);
 }

 file_put_contents ($dir.'/test.txt', 'Hello File');
</code></pre>

<p>This saves you the hassle with permissions.</p>
","2900727"
"Doctrine - How to print out the real sql, not just the prepared statement?","169215","","<p>We're using Doctrine, a PHP ORM. I am creating a query like this:</p>

<pre><code>$q = Doctrine_Query::create()-&gt;select('id')-&gt;from('MyTable');
</code></pre>

<p>and then in the function I'm adding in various where clauses and things as appropriate, like this</p>

<pre><code>$q-&gt;where('normalisedname = ? OR name = ?', array($string, $originalString));
</code></pre>

<p>Later on, before <code>execute()</code>-ing that query object, I want to print out the raw SQL in order to examine it, and do this:</p>

<pre><code>$q-&gt;getSQLQuery();
</code></pre>

<p>However that only prints out the prepared statement, not the full query. I want to see what it is sending to the MySQL, but instead it is printing out a prepared statement, including <code>?</code>'s. Is there some way to see the 'full' query?</p>
","<p>Doctrine is not sending a ""real SQL query"" to the database server : it is actually using prepared statements, which means :</p>

<ul>
<li>Sending the statement, for it to be prepared (this is what is returned by <code>$query-&gt;getSql()</code>)</li>
<li>And, then, sending the parameters (returned by <code>$query-&gt;getParameters()</code>)</li>
<li>and executing the prepared statements</li>
</ul>

<p>This means there is never a ""real"" SQL query on the PHP side — so, Doctrine cannot display it.</p>
","2095467"
"PHPMailer character encoding issues","168952","","<p>I try to use PHPMailer to send registration, activation. etc mail to users:</p>

<pre><code>require(""class.phpmailer.php"");
$mail -&gt; charSet = ""UTF-8"";
$mail = new PHPMailer();
$mail-&gt;IsSMTP();  
$mail-&gt;Host     = ""smtp.mydomain.org"";  
$mail-&gt;From     = ""name@mydomain.org"";
$mail-&gt;SMTPAuth = true; 
$mail-&gt;Username =""username""; 
$mail-&gt;Password=""passw""; 
//$mail-&gt;FromName = $header;
$mail-&gt;FromName = mb_convert_encoding($header, ""UTF-8"", ""auto"");
$mail-&gt;AddAddress($emladd);
$mail-&gt;AddAddress(""mytest@gmail.com"");
$mail-&gt;AddBCC('mytest2@mydomain.org', 'firstadd');
$mail-&gt;Subject  = $sub;
$mail-&gt;Body = $message;
$mail-&gt;WordWrap = 50;  
if(!$mail-&gt;Send()) {  
   echo 'Message was not sent.';  
   echo 'Mailer error: ' . $mail-&gt;ErrorInfo;  
}
</code></pre>

<p>The <code>$message</code> is contain latin characters. Unfortunately all webmail (gmail, webmail.mydomain.org, emailaddress.domain.xx) use different coding.</p>

<p>How can I force to use UTF-8 coding to show my mail exactly same on all mailbox?</p>

<p>I try to convert the mail header width <code>mb_convert_encoding()</code>, but with no luck. </p>
","<p>If you are 100% sure $message contain ISO-8859-1 you can use <a href=""http://ca.php.net/manual/en/function.utf8-encode.php"" rel=""noreferrer"">utf8_encode</a> as David says. Otherwise use  <a href=""http://ca.php.net/manual/en/function.mb-detect-encoding.php"" rel=""noreferrer"">mb_detect_encoding</a> and <a href=""http://ca.php.net/manual/en/function.mb-convert-encoding.php"" rel=""noreferrer"">mb_convert_encoding</a> on $message.</p>

<p>Also take note that</p>

<pre><code>$mail -&gt; charSet = ""UTF-8""; 
</code></pre>

<p>Should be replaced by:</p>

<pre><code>$mail-&gt;CharSet = 'UTF-8';
</code></pre>

<p><strong>And</strong> placed <strong>after</strong> the instantiation of the class (after the ""new""). The properties are case sensitive! See the <a href=""http://phpmailer.worxware.com/index.php?pg=properties"" rel=""noreferrer"">PHPMailer doc</a> fot the list &amp; exact spelling.</p>
","2493009"
"Package php5 have no installation candidate (Ubuntu 16.04)","168761","","<p>When i try to install php5 in Ubuntu 16.04 by using following code:</p>

<pre><code>sudo apt-get install php5 php5-mcrypt
</code></pre>

<p>I get following error:</p>

<pre><code>Reading package lists... Done
Building dependency tree       
Reading state information... Done
Package php5 is not available, but is referred to by another package.
This may mean that the package is missing, has been obsoleted, or
is only available from another source

E: Package 'php5' has no installation candidate
</code></pre>

<p>I have tried reinstalling but it does not help. </p>

<p>All this error was encountered after I updated my 15.10 Ubuntu to 16.04</p>
","<p>Ubuntu 16.04 comes with PHP7 as the standard, so there are no PHP5 packages</p>

<p>However if you like you can add a PPA to get those packages anyways:</p>

<p><strong>Remove all the stock php packages</strong></p>

<p>List installed php packages with <code>dpkg -l | grep php| awk '{print $2}' |tr ""\n"" "" ""</code> then remove unneeded packages with sudo aptitude purge your_packages_here or if you want to directly remove them all use :</p>

<pre><code>sudo aptitude purge `dpkg -l | grep php| awk '{print $2}' |tr ""\n"" "" ""`
</code></pre>

<p><strong>Add the PPA</strong></p>

<pre><code>sudo add-apt-repository ppa:ondrej/php
</code></pre>

<p><strong>Install your PHP Version</strong></p>

<pre><code>sudo apt-get update
sudo apt-get install php5.6
</code></pre>

<p>You can install php5.6 modules too ..</p>

<p><strong>Verify your version</strong></p>

<pre><code>sudo php -v
</code></pre>

<p>Based on <a href=""https://askubuntu.com/a/756186/532957"">https://askubuntu.com/a/756186/532957</a> (thanks @AhmedJerbi)</p>
","36789471"
"Converting timestamp to time ago in PHP e.g 1 day ago, 2 days ago...","168747","","<p>I am trying to convert a timestamp of the format <code>2009-09-12 20:57:19</code> and turn it into something like <code>3 minutes ago</code> with PHP.</p>

<p>I found a useful script to do this, but I think it's looking for a different format to be used as the time variable. The script I'm wanting to modify to work with this format is:</p>

<pre><code>function _ago($tm,$rcs = 0) {
    $cur_tm = time(); 
    $dif = $cur_tm-$tm;
    $pds = array('second','minute','hour','day','week','month','year','decade');
    $lngh = array(1,60,3600,86400,604800,2630880,31570560,315705600);

    for($v = sizeof($lngh)-1; ($v &gt;= 0)&amp;&amp;(($no = $dif/$lngh[$v])&lt;=1); $v--); if($v &lt; 0) $v = 0; $_tm = $cur_tm-($dif%$lngh[$v]);
        $no = floor($no);
        if($no &lt;&gt; 1)
            $pds[$v] .='s';
        $x = sprintf(""%d %s "",$no,$pds[$v]);
        if(($rcs == 1)&amp;&amp;($v &gt;= 1)&amp;&amp;(($cur_tm-$_tm) &gt; 0))
            $x .= time_ago($_tm);
        return $x;
    }
</code></pre>

<p>I think on those first few lines the script is trying to do something that looks like this (different date format math):</p>

<pre><code>$dif = 1252809479 - 2009-09-12 20:57:19;
</code></pre>

<p>How would I go about converting my timestamp into that (unix?) format?</p>
","<h3>Use example :</h3>

<pre class=""lang-php prettyprint-override""><code>echo time_elapsed_string('2013-05-01 00:22:35');
echo time_elapsed_string('@1367367755'); # timestamp input
echo time_elapsed_string('2013-05-01 00:22:35', true);
</code></pre>

<p>Input can be any <a href=""http://www.php.net/manual/en/datetime.formats.php"" rel=""noreferrer"">supported date and time format</a>.</p>

<h3>Output :</h3>

<pre class=""lang-none prettyprint-override""><code>4 months ago
4 months, 2 weeks, 3 days, 1 hour, 49 minutes, 15 seconds ago
</code></pre>

<h3>Function :</h3>

<pre class=""lang-php prettyprint-override""><code>function time_elapsed_string($datetime, $full = false) {
    $now = new DateTime;
    $ago = new DateTime($datetime);
    $diff = $now-&gt;diff($ago);

    $diff-&gt;w = floor($diff-&gt;d / 7);
    $diff-&gt;d -= $diff-&gt;w * 7;

    $string = array(
        'y' =&gt; 'year',
        'm' =&gt; 'month',
        'w' =&gt; 'week',
        'd' =&gt; 'day',
        'h' =&gt; 'hour',
        'i' =&gt; 'minute',
        's' =&gt; 'second',
    );
    foreach ($string as $k =&gt; &amp;$v) {
        if ($diff-&gt;$k) {
            $v = $diff-&gt;$k . ' ' . $v . ($diff-&gt;$k &gt; 1 ? 's' : '');
        } else {
            unset($string[$k]);
        }
    }

    if (!$full) $string = array_slice($string, 0, 1);
    return $string ? implode(', ', $string) . ' ago' : 'just now';
}
</code></pre>
","18602474"
"How to insert the current timestamp into MySQL database using a PHP insert query","168581","","<p>In my MySQL database, I have a table with structure</p>

<pre><code>username - varchar
insert_time - timestamp
</code></pre>

<p>This table was created in MySQL using the phpMyAdmin tool and for the <code>insert_time</code> column, I have mentioned default value as <code>0000-00-00 00:00:00</code>.</p>

<p>Now the problem is, I have to update this default value with the current timestamp later on, using a PHP script.</p>

<p>I tried doing the following PHP code:</p>

<pre><code>$update_query = 'UPDATE db.tablename SET insert_time=now() '.
                'WHERE username='.$somename;
</code></pre>

<p>When the PHP script is run, it fails, and is unable to insert anything into the database.</p>

<p>What am I doing wrong?</p>
","<p>What error message are you getting?</p>

<p>I'd guess your actual error is because your php variable isn't wrapped in quotes. Try this</p>

<pre><code>$update_query = ""UPDATE db.tablename SET insert_time=now() WHERE username='"" .$somename . ""'""; 
</code></pre>
","6075986"
"PHP - How to check if a string contain any text","168531","","<pre><code>&lt;?php
$a = '';

if($a exist 'some text')
    echo 'text';
?&gt;
</code></pre>

<p>Suppose I have the code above, how to write the statement ""if($a exist 'some text')""?</p>
","<p>Use <code>strpos</code></p>

<pre><code>$haystack = ""foo bar baz"";
$needle   = ""bar"";

if( strpos( $haystack, $needle ) !== false ) {
    echo ""\""bar\"" exists in the haystack variable"";
}
</code></pre>

<p>In your case:</p>

<pre><code>if( strpos( $a, 'some text' ) !== false ) echo 'text';
</code></pre>

<p>Note that my use of the <code>!==</code> operator (instead of <code>!= false</code> or <code>== true</code> or even just <code>if( strpos( ... ) ) {</code>) is because of the ""truthy""/""falsy"" nature of PHP's handling of the return value of <code>strpos</code>.</p>
","15305313"
"How do I get a PHP class constructor to call its parent's parent's constructor","168519","","<p>I need to have a class constructor in PHP call its parent's <strong>parent's</strong> (grandparent?) constructor without calling the parent constructor.</p>

<pre><code>// main class that everything inherits
class Grandpa 
{
    public function __construct()
    {

    }

}

class Papa extends Grandpa
{
    public function __construct()
    {
        // call Grandpa's constructor
        parent::__construct();
    }
}

class Kiddo extends Papa
{
    public function __construct()
    {
        // THIS IS WHERE I NEED TO CALL GRANDPA'S
        // CONSTRUCTOR AND NOT PAPA'S
    }
}
</code></pre>

<p>I know this is a bizarre thing to do and I'm attempting to find a means that doesn't smell bad but nonetheless, I'm curious if it's possible.</p>

<p><strong>EDIT</strong></p>

<p>I thought I should post the rationale for the chosen answer. The reason being; it most elegant solutionto the problem of wanting to call the ""grandparent's"" constructor while retaining all the values. It's certainly not the best approach nor is it OOP friendly, but that's not what the question was asking.</p>

<p>For anyone coming across this question at a later date - <em>Please find another solution</em>. I was able to find a much better approach that didn't wreak havoc on the class structure. So should you.</p>
","<p>The ugly workaround would be to pass a boolean param to Papa indicating that you do not wish to parse the code contained in it's constructor.  i.e:</p>

<pre><code>// main class that everything inherits
class Grandpa 
{
    public function __construct()
    {

    }

}

class Papa extends Grandpa
{
    public function __construct($bypass = false)
    {
        // only perform actions inside if not bypassing
        if (!$bypass) {

        }
        // call Grandpa's constructor
        parent::__construct();
    }
}

class Kiddo extends Papa
{
    public function __construct()
    {
        $bypassPapa = true;
        parent::__construct($bypassPapa);
    }
}
</code></pre>
","1557663"
"Increment value in mysql update query","168446","","<p>I have made this code for giving out +1 point, but it doesn't work properly.</p>

<pre><code>mysql_query(""
    UPDATE member_profile 
    SET points= ' "".$points."" ' + 1 
    WHERE user_id = '"".$userid.""'
"");
</code></pre>

<p>the $points variable is the user´s points right now.. I want it to plus one to it.. so example if he had like 5 points, it should be 5+1 = 6.. <strong>but it doesnt, it just changes to 1</strong></p>

<p>What have i done wrong? thank you</p>
","<p>You could also just do this:</p>

<pre><code>mysql_query(""
    UPDATE member_profile 
    SET points = points + 1
    WHERE user_id = '"".$userid.""'
"");
</code></pre>
","2259168"
"PHP, MySQL error: Column count doesn't match value count at row 1","168381","","<p>I'm getting this error:</p>

<p><code>Column count doesn't match value count at row 1</code></p>

<p>From the following code:</p>

<pre><code>$name = $_GET['name'];
$description = $_GET['description'];
$shortDescription = $_GET['shortDescription'];
$ingredients = $_GET['ingredients'];
$method = $_GET['method'];
//$image = $_GET['image'];
$username = $_GET['username'];
$length = $_GET['length'];
$dateAdded = uk_date();
$conn = mysql_connect('localhost', 'dbname', 'pass');
mysql_select_db('dbname');
$query = sprintf(""INSERT INTO dbname (id, Name, Description, shortDescription, Ingredients, Method, Length, dateAdded, Username) VALUES ('', '%s', '%s', '%s', '%s', '%s', '%s', '%s')"",
    mysql_real_escape_string($name),
    mysql_real_escape_string($description),
    mysql_real_escape_string($shortDescription),
    mysql_real_escape_string($ingredients),
    //mysql_real_escape_string($image),
    mysql_real_escape_string($length),
    mysql_real_escape_string($dateAdded),
    mysql_real_escape_string($username));

    $result = mysql_query($query) or die(mysql_error());
</code></pre>

<p>What does the error mean?</p>
","<p>You have 9 fields listed, but only 8 values. Try adding the method.</p>
","5931926"
"The first day of the current month in php using date_modify as DateTime object","168176","","<p>I can get Monday this week with:</p>

<pre><code>$monday = date_create()-&gt;modify('this Monday');
</code></pre>

<p>I would like to get with the same ease the 1st of this month. How can I achieve that?</p>

<p>Thanks</p>
","<p>Requires PHP 5.3 to work (""first day of"" is introduced in PHP 5.3). Otherwise the example above is the only way to do it:</p>

<pre><code>&lt;?php
    // First day of this month
    $d = new DateTime('first day of this month');
    echo $d-&gt;format('jS, F Y');

    // First day of a specific month
    $d = new DateTime('2010-01-19');
    $d-&gt;modify('first day of this month');
    echo $d-&gt;format('jS, F Y');

    // alternatively...
    echo date_create('2010-01-19')
      -&gt;modify('first day of this month')
      -&gt;format('jS, F Y');
</code></pre>

<p>In PHP 5.4+ you can do this:</p>

<pre><code>&lt;?php
    // First day of this month
    echo (new DateTime('first day of this month'))-&gt;format('jS, F Y');

    echo (new DateTime('2010-01-19'))
      -&gt;modify('first day of this month')
      -&gt;format('jS, F Y');
</code></pre>

<p>If you prefer a concise way to do this, and already have the year and month in numerical values, you can use <code>date()</code>:</p>

<pre><code>&lt;?php
    echo date('Y-m-01'); // first day of this month
    echo date(""$year-$month-01""); // first day of a month chosen by you
</code></pre>
","2094993"
"How to switch from POST to GET in PHP CURL","168111","","<p>I have tried switching from a previous Post request to a Get request. Which assumes its a Get but eventually does a post.</p>

<p>I tried the following in PHP :</p>

<pre><code>curl_setopt($curl_handle, CURLOPT_POSTFIELDS, null);
curl_setopt($curl_handle, CURLOPT_POST, FALSE);
curl_setopt($curl_handle, CURLOPT_HTTPGET, TRUE);
</code></pre>

<p>What am I missing?</p>

<p>Additional information:
I already have a connection that's setup to do a POST request. That completes successfully but later on when I try to reuse the connection and switch back to GET using the setopts above it still ends up doing a POST internally with incomplete POST headers. The problem is it believes its doing a GET but ends up putting a POST header without the content-length parameter and the connection fails witha 411 ERROR.</p>
","<p>Solved: The problem lies here:</p>

<p>I set <code>POST</code> via both <code>_CUSTOMREQUEST</code> and <code>_POST</code> and the <code>_CUSTOMREQUEST</code> persisted as <code>POST</code> while <code>_POST</code> switched to <code>_HTTPGET</code>. The Server assumed the header from <code>_CUSTOMREQUEST</code> to be the right one and came back with a 411.</p>

<pre><code>curl_setopt($curl_handle, CURLOPT_CUSTOMREQUEST, 'POST');
</code></pre>
","1229288"
"Get the query executed in Laravel 3/4","167884","","<p>How can I get the executed query in Laravel 3/4, using <strong>Fluent Query Builder or Eloquent ORM</strong>.</p>

<p>For example:</p>

<pre><code>DB::table('users')-&gt;where_status(1)-&gt;get();
</code></pre>

<p>Or <code>(posts (id, user_id, ...))</code></p>

<pre><code>User::find(1)-&gt;posts-&gt;get();
</code></pre>

<p>Or... How I can save in log, all queries executed.</p>
","<h1>Laravel 4</h1>

<p>In Laravel 4, you have to call <code>DB::getQueryLog()</code> to get all ran queries.</p>

<pre><code>$queries = DB::getQueryLog();
$last_query = end($queries);
</code></pre>

<p>Or you can download a profiler package. I'd recommend <a href=""https://packagist.org/packages/barryvdh/laravel-debugbar"">barryvdh/laravel-debugbar</a>, which is pretty neat. You can read for instructions on how to install in their <a href=""https://github.com/barryvdh/laravel-debugbar"">repository</a>.</p>

<hr>

<h1>Laravel 3</h1>

<p>In Laravel 3, you can get the last executed query from an <code>Eloquent</code> model calling the static method <code>last_query</code> on the <code>DB</code> class.</p>

<pre><code>DB::last_query();
</code></pre>

<p>This, however, requires that you enable the <code>profiler</code> option in <code>application/config/database.php</code>. Alternatively you could, as @dualed mentioned, enable the <code>profiler</code> option, in <code>application/config/application.php</code> or call <code>DB::profile()</code> to get all queries ran in the current request and their execution time.</p>
","14536215"
"Array of PHP Objects","167765","","<p>So I have been searching for a while and cannot find the answer to a simple question. Is it possible to have an array of objects in PHP? Such as:</p>

<pre><code>$ar=array();    
$ar[]=$Obj1    
$ar[]=$obj2
</code></pre>

<p>For some reason I have not been able to find the answer anywhere. I assume it is possible but I just need to make sure.</p>
","<p>The best place to find answers to general (and somewhat easy questions) such as this is to read up on <a href=""http://php.net"">PHP docs</a>. Specifically in your case you can read more on <a href=""http://us2.php.net/manual/en/language.types.object.php"">objects</a>. You can store stdObject and instantiated objects within an array. In fact, there is a process known as '<a href=""http://www.doctrine-project.org/documentation/manual/1_2/zh/working-with-models#fetching-objects"">hydration</a>' which populates the member variables of an object with values from a database row, then the object is stored in an array (possibly with other objects) and returned to the calling code for access.</p>

<p>-- Edit --</p>

<pre><code>class Car
{
    public $color;
    public $type;
}

$myCar = new Car();
$myCar-&gt;color = 'red';
$myCar-&gt;type = 'sedan';

$yourCar = new Car();
$yourCar-&gt;color = 'blue';
$yourCar-&gt;type = 'suv';

$cars = array($myCar, $yourCar);

foreach ($cars as $car) {
    echo 'This car is a ' . $car-&gt;color . ' ' . $car-&gt;type . ""\n"";
}
</code></pre>
","8612289"
"Get data from JSON file with PHP","167755","","<p>I'm trying to get data from the following JSON file using PHP. I specifically want ""temperatureMin"" and ""temperatureMax"".</p>

<p>It's probably really simple, but I have no idea how to do this. I'm stuck on what to do after file_get_contents(""file.json""). Some help would be greatly appreciated!</p>

<pre><code>{
    ""daily"": {
        ""summary"": ""No precipitation for the week; temperatures rising to 6° on Tuesday."",
        ""icon"": ""clear-day"",
        ""data"": [
            {
                ""time"": 1383458400,
                ""summary"": ""Mostly cloudy throughout the day."",
                ""icon"": ""partly-cloudy-day"",
                ""sunriseTime"": 1383491266,
                ""sunsetTime"": 1383523844,
                ""temperatureMin"": -3.46,
                ""temperatureMinTime"": 1383544800,
                ""temperatureMax"": -1.12,
                ""temperatureMaxTime"": 1383458400,
            }
        ]
    }
}
</code></pre>
","<p>Get the content of the JSON file using <a href=""http://php.net/file_get_contents"" rel=""noreferrer""><code>file_get_contents()</code></a>:</p>

<pre><code>$str = file_get_contents('http://example.com/example.json/');
</code></pre>

<p>Now decode the JSON using <a href=""http://php.net/json_decode"" rel=""noreferrer""><code>json_decode()</code></a>:</p>

<pre><code>$json = json_decode($str, true); // decode the JSON into an associative array
</code></pre>

<p>You have an associative array containing all the information. To figure out how to access the values you need, you can do the following:</p>

<pre><code>echo '&lt;pre&gt;' . print_r($json, true) . '&lt;/pre&gt;';
</code></pre>

<p>This will print out the contents of the array in a nice readable format. Then, you access the elements you want, like so:</p>

<pre><code>$temperatureMin = $json['daily']['data'][0]['temperatureMin'];
$temperatureMax = $json['daily']['data'][0]['temperatureMax'];
</code></pre>

<p>Or loop through the array however you wish:</p>

<pre><code>foreach ($json['daily']['data'] as $field =&gt; $value) {
    // Use $field and $value here
}
</code></pre>

<p><a href=""https://eval.in/60114"" rel=""noreferrer""><strong>Demo!</strong></a></p>
","19758995"
"How to remove duplicate values from a multi-dimensional array in PHP","167563","","<p>How can I remove duplicate values from a multi-dimensional array in PHP?</p>

<p>Example array:</p>

<pre><code>Array
(
    [0] =&gt; Array
    (
        [0] =&gt; abc
        [1] =&gt; def
    )

    [1] =&gt; Array
    (
        [0] =&gt; ghi
        [1] =&gt; jkl
    )

    [2] =&gt; Array
    (
        [0] =&gt; mno
        [1] =&gt; pql
    )

    [3] =&gt; Array
    (
        [0] =&gt; abc
        [1] =&gt; def
    )

    [4] =&gt; Array
    (
        [0] =&gt; ghi
        [1] =&gt; jkl
    )

    [5] =&gt; Array
    (
        [0] =&gt; mno
        [1] =&gt; pql
    )

)
</code></pre>
","<p>Here is another way. No intermediate variables are saved. </p>

<p>We used this to de-duplicate results from a variety of overlapping queries.</p>

<pre><code>$input = array_map(""unserialize"", array_unique(array_map(""serialize"", $input)));
</code></pre>
","946300"
"Redirect all to index.php htaccess","167416","","<p>My apologies for the 10000000th question on this topic, but i just can't get it to work the way i want it.</p>

<p>I'm writing a simple php mvc'ish framework. I want this framework to be able to be installed in any directory.</p>

<p>What my php script does :
Grabs the request uri and breaks it off into segments. Making segment 1 the controller and segment 2 the action. This goes all fine  when i do this:</p>

<p><a href=""http://www.domain.com/mvc/module/test/"">http://www.domain.com/mvc/module/test/</a></p>

<p>It will go to the specific module controller and method.
Now i have a default controller,  the home controller, which is in folder home.</p>

<p>Now when i acces this folder directly  <a href=""http://www.domain.com/mvc/home/"">http://www.domain.com/mvc/home/</a>
It will display a 403 forbidden, because this folder does exist, instead it should also go back to  <a href=""http://www.domain.com/mvc/index.php"">http://www.domain.com/mvc/index.php</a></p>

<p>If i would have installed the framework in a different folder, lets say folder framework it has to redirect back to <a href=""http://www.domain.com/framework/index.php"">http://www.domain.com/framework/index.php</a></p>

<p>I would like to redirect every folder and php file back to the index.php, leaving everything else the way it is.</p>

<p>My first problem i encountered was it never redirects to the right folder, always to the domain root folder.</p>

<p>This is what i tried :</p>

<pre><code>RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule . index.php [L]
</code></pre>

<p>I really hope someone could help me out or point me into the right direction!</p>

<p>Thanks alot!!</p>
","<p>Your rewrite rule looks almost ok.</p>

<p>First make sure that your <code>.htaccess</code> file is in your document root (the same place as <code>index.php</code>) or it'll only affect the sub-folder it's in (and any sub-folders within that - recursively).</p>

<p>Next make a slight change to your rule so it looks something like:</p>

<pre><code>RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?path=$1 [NC,L,QSA]
</code></pre>

<p>At the moment you're just matching on <code>.</code> which is <strong>one</strong> instance of any character, you need at least <code>.*</code> to match any number of instances of any character.</p>

<p>If you want the whole shebang installed in a sub-directory, such as <code>/mvc/</code> or <code>/framework/</code> the least complicated way to do it is to change the rewrite rule slightly to take that into account.</p>

<pre><code>RewriteRule ^(.*)$ /mvc/index.php?path=$1 [NC,L,QSA]
</code></pre>

<p>And ensure that your <code>index.php</code> is in that folder whilst the <code>.htaccess</code> file is in the document root.</p>

<hr>

<p>The <code>$path</code> variable will contain the fake directory structure, so <code>/mvc/module/test</code> for instance, which you can then use in index.php to determine the Controller and actions you want to perform.</p>

<p><strong>The flags:</strong></p>

<p><code>NC</code> = No Case (not case sensitive, not really necessary since there are no characters in the pattern)</p>

<p><code>L</code> = Last (it'll stop rewriting at after this Rewrite so make sure it's the last thing in your list of rewrites)</p>

<p><code>QSA</code> = Query String Apend, just in case you've got something like <code>?like=penguins</code> on the end which you want to keep and pass to index.php.</p>
","18406686"
"Display alert message and redirect after click on accept","167169","","<p>Well, I have a page with links to reports. Whenever somebody clicks on one report, they can download the excel file. However, sometimes there are no fields to make a report; in that case, I want to display an alert message and after they click on ""accept"", they get redirected to the main panel. When they click on the report, they go to a controller that uses a <code>switch</code> to get the data. If there's no data, the model returns <code>FALSE</code>; so at the end of the controller, I check:</p>

<pre><code>if ($result_array != FALSE)
    to_excel($result_array-&gt;result_array(), $xls,$campos);
else {
    echo ""&lt;script&gt;alert('There are no fields to generate a report');&lt;/script&gt;"";
    redirect('admin/ahm/panel');
}
</code></pre>

<p>If I get rid of <code>redirect('admin/ahm/panel');</code> then the alert works, but it moves the user to the page that was supposed to generate the excel file. But if I use the redirect, the controller moves the user to the main panel without showing the alert.</p>

<p>Any help is appreciated.</p>

<p>Thanks in advance.</p>
","<pre><code>echo ""&lt;script&gt;
alert('There are no fields to generate a report');
window.location.href='admin/ahm/panel';
&lt;/script&gt;"";
</code></pre>

<p>and get rid of <code>redirect</code> line below.</p>

<p>You were mixing up two different worlds.</p>
","11869779"
"How to check if an email address exists without sending an email?","167042","","<p>I have come across this <a href=""http://www.webdigi.co.uk/blog/2009/how-to-check-if-an-email-address-exists-without-sending-an-email/"" rel=""noreferrer"">PHP code to check email address using SMTP without sending an email</a>.</p>

<p>Has anyone tried anything similar or does it work for you? Can you tell if an email customer / user enters is correct &amp; exists?</p>
","<p>There are two methods you can <em>sometimes</em> use to determine if a recipient actually exists:</p>

<ol>
<li><p>You can connect to the server, and issue a VRFY command. Very few servers support this command, but it is intended for exactly this. If the server responds with a 2.0.0 DSN, the user exists.</p>

<p>VRFY user</p></li>
<li><p>You can issue a RCPT, and see if the mail is rejected. </p>

<p>MAIL FROM:&lt;&gt;</p>

<p>RCPT TO:&lt;user@domain&gt;</p></li>
</ol>

<p>If the user doesn't exist, you'll get a 5.1.1 DSN. However, just because the email is not rejected, does not mean the user exists. Some server will silently discard requests like this to prevent enumeration of their users. Other servers cannot verify the user, and have to accept the message regardless.</p>

<p>There is also an antispam technique called greylisting, which will cause the server to reject the address initially, expecting a real SMTP server would attempt a re-delivery some time later. This will mess up attempts to validate the address.</p>

<p>Honestly, if you're attempting to validate an address the best approach is to use a simple regex to block obviously invalid addresses, and then send an actual email with a link back to your system that will validate the email was received. This also ensures that they user entered their actual email, not a slight typo that happens to belong to somebody else.</p>
","566121"
"How to print SQL statement in codeigniter model","166969","","<p>I have a sql statement in my model,</p>

<p>I then say</p>

<pre><code>$query = $this-&gt;db-&gt;query($sql, array(fields, fields1);

if ($query) {
    return true:
} else {
    echo ""failed"";
    return false;
}
</code></pre>

<p>My query always fails, how do I get php to print the exact sql statement being sent to my database? And display that on my php view, page</p>
","<pre><code>print_r($query);
</code></pre>

<p>You can also use (in view) and you will see the SQL statement:</p>

<pre><code>$this-&gt;output-&gt;enable_profiler(TRUE);
</code></pre>

<p>Profiling user guide:
<a href=""http://ellislab.com/codeigniter/user-guide/general/profiling.html"" rel=""noreferrer"">http://ellislab.com/codeigniter/user-guide/general/profiling.html</a></p>
","6142168"
"Is there a pretty print for PHP?","166924","","<p>I'm fixing some PHP scripts and I'm missing ruby's pretty printer. i.e.</p>

<pre><code>require 'pp'
arr = {:one =&gt; 1}
pp arr
</code></pre>

<p>will output {:one => 1}. This even works with fairly complex objects and makes digging into an unknown script much easier. Is there some way to duplicate this functionality in PHP?</p>
","<p>Both <a href=""http://www.php.net/manual/en/function.print-r.php"" rel=""noreferrer""><code>print_r()</code></a> and <a href=""http://www.php.net/manual/en/function.var-dump.php"" rel=""noreferrer""><code>var_dump()</code></a> will output visual representations of objects within PHP.</p>

<pre><code>$arr = array('one' =&gt; 1);
print_r($arr);
var_dump($arr);
</code></pre>
","1168187"
"Turn Off Display Error PHP.ini","166913","","<p>I am trying to turn off all errors on my website. I have followed different tutorials on how to do this but I keep getting read and open error messages. Is there something I am missing? I have tried the following in my php.ini file:</p>

<pre><code>;Error display
display_startup_errors = Off
display_errors = Off
html_errors = Off
docref_root = 0
docref_ext = 0
</code></pre>

<p>For some reason when I do a fileopen() call for a file which does not exist, I still get the error displayed. This is not safe for a live website, for obvious reasons.</p>

<p>Thanks</p>
","<p>I always use something like this in a configuration file:</p>

<pre><code>// toggle this to change the setting
define('DEBUG', true); 
// you want all errors to be triggered
error_reporting(E_ALL); 

if(DEBUG == true)
{
    // you're developing, so you want all errors to be shown
    display_errors(true);
    // logging is usually overkill during dev
    log_errors(false); 
}
else
{
    // you don't want to display errors on a prod environment
    display_errors(false); 
    // you definitely wanna log any occurring
    log_errors(true); 
}
</code></pre>

<p>This allows easy toggling between debug settings. You can improve this further by checking on which server the code is running (dev, test, acceptance, prod) and change your settings accordingly.</p>

<p>Note that no errors will be logged if error_reporting is set to 0, as cleverly remarked by Korri.</p>
","15949445"
"How can I send a Firebase Cloud Messaging notification without use the Firebase Console?","166903","","<p>I'm starting with the new Google service for the notifications, <code>Firebase Cloud Messaging</code>. </p>

<p>Thanks to this code <a href=""https://github.com/firebase/quickstart-android/tree/master/messaging"">https://github.com/firebase/quickstart-android/tree/master/messaging</a> I was able to send notifications from my <strong>Firebase User Console</strong> to my Android device.</p>

<p>Is there any API or way to send a notification without use the Firebase console? I mean, for example, a PHP API or something like that, to create notifications from my own server directly.</p>
","<p>Firebase Cloud Messaging has a server-side APIs that you can call to send messages. See <a href=""https://firebase.google.com/docs/cloud-messaging/server"" rel=""noreferrer"">https://firebase.google.com/docs/cloud-messaging/server</a>. </p>

<p>Sending a message can be as simple as using <code>curl</code> to call a HTTP end-point. See <a href=""https://firebase.google.com/docs/cloud-messaging/server#implementing-http-connection-server-protocol"" rel=""noreferrer"">https://firebase.google.com/docs/cloud-messaging/server#implementing-http-connection-server-protocol</a></p>

<pre><code>curl -X POST --header ""Authorization: key=&lt;API_ACCESS_KEY&gt;"" \
    --Header ""Content-Type: application/json"" \
    https://fcm.googleapis.com/fcm/send \
    -d ""{\""to\"":\""&lt;YOUR_DEVICE_ID_TOKEN&gt;\"",\""notification\"":{\""body\"":\""Yellow\""},\""priority\"":10}""
</code></pre>
","37376757"
"Fatal error: Class 'MySQLi' not found","166685","","<p>I am doing a tutorial and am getting this error:</p>

<blockquote>
  <p>Fatal error: Class 'MySQLi' not found (LONG URL) on line 8</p>
</blockquote>

<p>The code on line 8 is:</p>

<pre><code>$mysqli = new MySQLi($db_server, $db_user, $db_pass, $db_name) or die(mysqli_error());
</code></pre>

<p>I saw online someone said to see if it was turned on in my phpinfo(), but there wasn't anything listed in there under for ""mysqli"".</p>

<p>Also, I am running PHP version 5.2.5</p>
","<p>Sounds like you just need to <a href=""http://www.php.net/manual/en/mysqli.installation.php"" rel=""noreferrer"">install MySQLi</a>.</p>

<p>If you think you've done that and still have a problem, please post your operating system and anything else that might help.</p>
","666822"
"How do I add 24 hours to a unix timestamp in php?","166625","","<p>I would like to add 24 hours to the timestamp for now. How do I find the unix timestamp number for 24 hours so I can add it to the timestamp for right now? </p>

<p>I also would like to know how to add 48 hours or multiple days to the current timestamp. </p>

<p>How can I go best about doing this?</p>
","<p>You probably want to add one day rather than 24 hours. Not all days have 24 hours due to daylight saving time:</p>

<pre><code>strtotime('+1 day', $timestamp);
</code></pre>
","2515070"
"How do I make a PHP form that submits to self?","166089","","<p>How do I make a self-posting/self-submitting form, i.e. a form that submits the results to itself, instead of submitting to another form?</p>
","<p>The proper way would be to use <code>$_SERVER[""PHP_SELF""]</code> (in conjunction with <code>htmlspecialchars</code> to avoid possible exploits). You can also just skip the <code>action=</code> part empty, which is not W3C valid, but currently works in most (all?) browsers - the default is to submit to self if it's empty.</p>

<p>Here is an example form that takes a name and email, and then displays the values you have entered upon submit:</p>

<pre><code>&lt;?php if (!empty($_POST)): ?&gt;
    Welcome, &lt;?php echo htmlspecialchars($_POST[""name""]); ?&gt;!&lt;br&gt;
    Your email is &lt;?php echo htmlspecialchars($_POST[""email""]); ?&gt;.&lt;br&gt;
&lt;?php else: ?&gt;
    &lt;form action=&lt;?php echo htmlspecialchars($_SERVER[""PHP_SELF""]); ?&gt; method=""post""&gt;
        Name: &lt;input type=""text"" name=""name""&gt;&lt;br&gt;
        Email: &lt;input type=""text"" name=""email""&gt;&lt;br&gt;
        &lt;input type=""submit""&gt;
    &lt;/form&gt;
&lt;?php endif; ?&gt;
</code></pre>
","5826877"
"php variable in html no other way than: <?php echo $var; ?>","166001","","<p>I work a lot in mixed HTML and PHP and most time I just want solid HTML with a few PHP variables in it so my code look like this:</p>

<pre><code>&lt;tr&gt;&lt;td&gt; &lt;input type=""hidden"" name=""type"" value=""&lt;?php echo $var; ?&gt;"" &gt;&lt;/td&gt;&lt;/tr&gt;
</code></pre>

<p>Which is quite ugly. Isn't there something shorter, more like the following?</p>

<pre><code>&lt;tr&gt;&lt;td&gt; &lt;input type=""hidden"" name=""type"" value=""$$var"" &gt;&lt;/td&gt;&lt;/tr&gt;
</code></pre>

<p>This is possible to but you get stuck with the <code>""""</code> (you have to replace them all with <code>''</code>) and the layout is gone</p>

<pre><code>echo ""&lt;tr&gt;&lt;td&gt; &lt;input type=""hidden"" name=""type"" value=""$var"" &gt;&lt;/td&gt;&lt;/tr&gt;""
</code></pre>

<p>Is there anything better?</p>
","<p>There's the short tag version of your code, which is <strong>now completely acceptable to use</strong> despite antiquated recommendations otherwise:</p>

<pre><code>&lt;tr&gt;&lt;td&gt; &lt;input type=""hidden"" name=""type"" value=""&lt;?= $var ?&gt;"" &gt;&lt;/td&gt;&lt;/tr&gt;
</code></pre>

<p>which (prior to PHP 5.4) requires short tags be enabled in your php configuration.  It functions exactly as the code you typed; these lines are literally identical in their internal implementation:</p>

<pre><code>&lt;?= $var1, $var2 ?&gt;
&lt;?php echo $var1, $var2 ?&gt;
</code></pre>

<p>That's about it for built-in solutions.  There are plenty of 3rd party template libraries that make it easier to embed data in your output, <a href=""http://www.smarty.net/"" rel=""noreferrer"">smarty</a> is a good place to start.</p>
","2150255"
"PHP Get name of current directory","165951","","<p>I have a php page inside a folder on my website.</p>

<p>I need to add the name of the current directory into a variable for example:</p>

<pre><code>$myVar = current_directory_name;
</code></pre>

<p>Is this possible?</p>
","<pre><code>getcwd();

or

dirname(__FILE__);

or (PHP5)

basename(__DIR__) 
</code></pre>

<p><a href=""http://php.net/manual/en/function.getcwd.php"">http://php.net/manual/en/function.getcwd.php</a></p>

<p><a href=""http://php.net/manual/en/function.dirname.php"">http://php.net/manual/en/function.dirname.php</a></p>

<p>You can use <code>basename()</code> to get the trailing part of the path :)</p>

<p>In your case, I'd say you are most likely looking to use <code>getcwd()</code>, <code>dirname(__FILE__)</code> is more useful when you have a file that needs to include another library and is included in another library.</p>

<p>Eg:</p>

<pre><code>main.php
libs/common.php
libs/images/editor.php
</code></pre>

<p>in your <code>common.php</code> you need to use functions in <code>editor.php</code>, so you use</p>

<p>common.php:</p>

<pre><code>require_once dirname(__FILE__) . '/images/editor.php';
</code></pre>

<p>main.php</p>

<pre><code>require_once libs/common.php
</code></pre>

<p>That way when common.php is <code>require'd</code> in <code>main.php</code>, the call of <code>require_once</code> in <code>common.php</code> will correctly includes <code>editor.php</code> in <code>images/editor.php</code> instead of trying to look in current directory where <code>main.php</code> is run.</p>
","9997400"
"Nginx 403 forbidden for all files","165559","","<p>I have nginx installed with PHP-FPM on a CentOS 5 box, but am struggling to get it to serve any of my files - whether PHP or not.</p>

<p>Nginx is running as www-data:www-data, and the default ""Welcome to nginx on EPEL"" site (owned by root:root with 644 permissions) loads fine.</p>

<p>The nginx configuration file has an include directive for <i>/etc/nginx/sites-enabled/*.conf,</i> and I have a configuration file <em>example.com.conf</em>, thus:</p>

<pre><code>server {
 listen 80;

 Virtual Host Name
 server_name www.example.com example.com;


 location / {
   root /home/demo/sites/example.com/public_html;
   index index.php index.htm index.html;
 }

 location ~ \.php$ {
  fastcgi_pass   127.0.0.1:9000;
  fastcgi_index  index.php;
  fastcgi_param  PATH_INFO $fastcgi_script_name;
  fastcgi_param  SCRIPT_FILENAME  /home/demo/sites/example.com/public_html$fastcgi_script_name;
  include        fastcgi_params;
 }
}
</code></pre>

<p>Despite public_html being owned by www-data:www-data with 2777 file permissions, this site fails to serve any content -</p>

<pre><code> [error] 4167#0: *4 open() ""/home/demo/sites/example.com/public_html/index.html"" failed (13: Permission denied), client: XX.XXX.XXX.XX, server: www.example.com, request: ""GET /index.html HTTP/1.1"", host: ""www.example.com""
</code></pre>

<p>I've found numerous other posts with users getting 403s from nginx, but most that I have seen involve either more complex setups with Ruby/Passenger (which in the past I've actually succeeded with) or are only receiving errors when the upstream PHP-FPM is involved, so they seem to be of little help.</p>

<p>Have I done something silly here?</p>
","<p>One permission requirement that is often overlooked is a user needs x permissions in every parent directory of a file to access that file.  Check the permissions on /, /home, /home/demo, etc. for www-data x access.  My guess is that /home is probably 770 and www-data can't chdir through it to get to any subdir.  If it is, try chmod o+x /home (or whatever dir is denying the request).</p>

<p>EDIT: To easily display all the permissions on a path, you can use <code>namei -om /path/to/check</code></p>
","6796648"
"Why shouldn't I use mysql_* functions in PHP?","165514","","<p>What are the technical reasons for why one shouldn't use <code>mysql_*</code> functions? (e.g. <code>mysql_query()</code>, <code>mysql_connect()</code> or <code>mysql_real_escape_string()</code>)?</p>

<p>Why should I use something else even if they work on my site?</p>

<p>If they don't work on my site, why do I get errors like </p>

<blockquote>
  <p>Warning: mysql_connect(): No such file or directory</p>
</blockquote>
","<p>The MySQL extension:</p>

<ul>
<li>Is not under active development</li>
<li>Is <strong>officially <a href=""https://wiki.php.net/rfc/mysql_deprecation"" rel=""noreferrer"">deprecated</a></strong> as of PHP 5.5 (released June 2013).</li>
<li>Has been <strong><a href=""https://wiki.php.net/rfc/remove_deprecated_functionality_in_php7#extmysql"" rel=""noreferrer"">removed</a> entirely</strong> as of PHP 7.0 (released December 2015)

<ul>
<li>This means that as of <a href=""http://php.net/supported-versions.php"" rel=""noreferrer"">31 Dec 2018</a> it will not exist in any supported version of PHP. Currently, it only gets <em>security</em> updates.</li>
</ul></li>
<li>Lacks an OO interface</li>
<li>Doesn't support:

<ul>
<li>Non-blocking, asynchronous queries</li>
<li><strong><a href=""http://php.net/manual/en/mysqli.quickstart.prepared-statements.php"" rel=""noreferrer"">Prepared statements</a> or parameterized queries</strong></li>
<li>Stored procedures</li>
<li>Multiple Statements</li>
<li>Transactions</li>
<li>The ""new"" password authentication method (on by default in MySQL 5.6; required in 5.7)</li>
<li>All of the functionality in MySQL 5.1</li>
</ul></li>
</ul>

<p>Since it is deprecated, using it makes your code less future proof. </p>

<p>Lack of support for prepared statements is particularly important as they provide a clearer, less error-prone method of escaping and quoting external data than manually escaping it with a separate function call.</p>

<p>See <a href=""http://php.net/manual/en/mysqlinfo.api.choosing.php"" rel=""noreferrer""><strong>the comparison of SQL extensions</strong></a>.</p>
","12860046"
"Weird PHP error: 'Can't use function return value in write context'","165449","","<p>I'm getting this error and I can't make head or tail of it.</p>

<p>The exact error message is:</p>

<blockquote>
  <p>Fatal error: Can't use function return
  value in write context in
  /home/curricle/public_html/descarga/index.php
  on line 48</p>
</blockquote>

<p>Line 48 is:</p>

<pre><code>if (isset($_POST('sms_code') == TRUE ) {
</code></pre>

<p>Anybody knows what's going on???</p>

<p>PS Here's the full function,  in case it helps:</p>

<pre><code>function validate_sms_code() {

    $state = NOTHING_SUBMITED;

    if (isset($_POST('sms_code') == TRUE ) {
        $sms_code = clean_up($_POST('sms_code'));
        $return_code = get_sepomo_code($sms_code);

        switch($return_code) {

          case 1:
            //no error
            $state = CORRECT_CODE;
            break;

          case 2:
            // code already used
            $state = CODE_ALREADY_USED;
            break;

          case 3:
            // wrong code
            $state = WRONG_CODE;
            break;

          case 4:
            // generic error
            $state = UNKNOWN_SEPOMO_CODE;
            break;

          default:
            // unknown error
            $state = UNKNOWN_SEPOMO_CODE;
            throw new Exception('Unknown sepomo code: ' . $return_code);
            break;
        }

    } else {
        $state = NOTHING_SUBMITED;
    }
    dispatch_on_state($state);
}
</code></pre>
","<p>You mean</p>

<pre><code>if (isset($_POST['sms_code']) == TRUE ) {
</code></pre>

<p>though incidentally you really mean</p>

<pre><code>if(isset($_POST['sms_code'])) {
</code></pre>
","1532699"
"HTML form submit to PHP script","165382","","<p>I am making an HTML form. I want the results to appear in the PHP script.</p>

<pre><code>&lt;form action=""chk_kw.php"" method=""post""&gt; &lt;br /&gt;
    &lt;select&gt; name=""website_string"" 
        &lt;option value="""" selected=""selected""&gt;&lt;/option&gt;
    &lt;option VALUE=""abc""&gt; ABC&lt;/option&gt;
    &lt;option VALUE=""def""&gt; def&lt;/option&gt;
        &lt;option VALUE=""hij""&gt; hij/option&gt;   
    &lt;/select&gt;
    &lt;input type=""submit"" name=""website_string""  &gt;
&lt;/form&gt;
</code></pre>

<p>The problem is I cannot get the value passed to the PHP. if I use value:</p>

<pre><code>&lt;INPUT TYPE=""submit"" name=""website_string"" value=""selected"" &gt;
</code></pre>

<p>It always passes the text in the quotes. In this case <code>""selected""</code>. How do I pass one of the strings from the option?   </p>
","<p>Try this:</p>

<pre><code>&lt;form method=""post"" action=""check.php""&gt;
    &lt;select name=""website_string""&gt;
        &lt;option value="""" selected=""selected""&gt;&lt;/option&gt;
        &lt;option VALUE=""abc""&gt; ABC&lt;/option&gt;
        &lt;option VALUE=""def""&gt; def&lt;/option&gt;
        &lt;option VALUE=""hij""&gt; hij&lt;/option&gt;
    &lt;/select&gt;
    &lt;INPUT TYPE=""submit"" name=""submit"" /&gt;
&lt;/form&gt;
</code></pre>

<p>Both your select control and your submit button had the same <code>name</code> attribute, so the last one used was the submit button when you clicked it.  All other syntax errors aside.</p>

<h3>check.php</h3>

<pre><code>&lt;?php
    echo $_POST['website_string'];
?&gt;
</code></pre>

<blockquote>
  <p><em>Obligatory disclaimer about using raw <code>$_POST</code> data. <strong>Sanitize anything you'll actually be using in application logic</strong>.</em></p>
</blockquote>
","4559516"
"Laravel's Blade: how can I set variables in a template?","165263","","<p>I'm reading Laravel Blade's <a href=""http://laravel.com/docs/views/templating"" rel=""noreferrer"">templating</a> docs and I can't find how I can assign variables inside a template for use later in the template. I can't do <code>{{ $old_section = ""whatever"" }}</code> because that will echo ""whatever"" and I don't want that.</p>

<p>I see that I can do <code>&lt;?php $old_section = ""whatever""; ?&gt;</code>, but that's not elegant.</p>

<p>Is there an elegant way to do that in Blade?</p>
","<p>It is discouraged to do in a view so there is no blade tag for it.
If you do want to do this in your blade view, you can either just open a php tag as you wrote it or register a new blade tag. Just an example:</p>

<pre class=""lang-php prettyprint-override""><code>&lt;?php
/**
 * &lt;code&gt;
 * {? $old_section = ""whatever"" ?}
 * &lt;/code&gt;
 */
Blade::extend(function($value) {
    return preg_replace('/\{\?(.+)\?\}/', '&lt;?php ${1} ?&gt;', $value);
});
</code></pre>
","13019365"
"Running a Python script from PHP","164876","","<p>I'm trying to run a Python script from PHP using the following command:</p>

<p><code>exec('/usr/bin/python2.7 /srv/http/assets/py/switch.py arg1 arg2');</code></p>

<p>However, PHP simply doesn't produce any output. Error reporting is set to E_ALL and display_errors is on.</p>

<p>Here's what I've tried:</p>

<ul>
<li>I used <code>python2</code>, <code>/usr/bin/python2</code> and <code>python2.7</code> instead of <code>/usr/bin/python2.7</code></li>
<li>I also used a relative path instead of an absolute path which didn't change anything either.</li>
<li>I tried using the commands <code>exec</code>, <code>shell_exec</code>, <code>system</code>.</li>
</ul>

<p>However, if I run</p>

<pre><code>if (exec('echo TEST') == 'TEST')
{
    echo 'exec works!';
}
</code></pre>

<p>it works perfectly fine while <code>shutdown now</code> doesn't do anything.</p>

<p>PHP has the permissions to access and execute the file.</p>

<p>EDIT: Thanks to Alejandro, I was able to fix the problem. If you have the same problem, don't forget that your webserver probably/hopefully doesn't run as root. <strong>Try logging in as your webserver's user or a user with similar permissions and try to run the commands yourself.</strong></p>
","<p>Tested on Ubuntu Server 10.04. I hope it helps you also on Arch Linux.</p>

<p>In PHP:</p>

<pre><code>&lt;?php 

$command = escapeshellcmd('/usr/custom/test.py');
$output = shell_exec($command);
echo $output;

?&gt;
</code></pre>

<p>In Python file 'test.py' verify this text in first line: <a href=""http://www.stackoverflow.com/questions/2429511/why-do-people-write-usr-bin-env-python-on-the-first-line-of-a-python-script/2429517"">(see shebang explain)</a>:</p>

<pre><code>#!/usr/bin/env python
</code></pre>

<p>Also Python file <a href=""http://www.php.net/manual/en/function.shell-exec.php#37971"" rel=""noreferrer"">should have correct privileges</a> (execution for user www-data / apache if PHP script runs in browser or through curl)
and/or must be ""executable"". Also all commands in .py file must have correct privileges.</p>

<pre><code>chmod +x myscript.py
</code></pre>
","19736494"
"What is unexpected T_VARIABLE in PHP?","164812","","<p>I get this PHP error:</p>

<blockquote>
  <p>Parse error: syntax error, unexpected
  T_VARIABLE</p>
</blockquote>

<p>From this line:</p>

<pre><code>$list[$i][$docinfo['attrs']['@groupby']] = $docinfo['attrs']['@count'];
</code></pre>

<p>Is there anything wrong with this line?</p>
","<p>There might be a semicolon or bracket missing a line before your pasted line.  It seems fine to me, every string is allowed as array index.</p>
","1464941"
"Using a .php file to generate a MySQL dump","164615","","<p>Here's the information I have:</p>

<p>I am working with a Linux based system using MySQL and PHP5.  I need to be able to generate a <code>mysqldump</code> from within a .php file, and then have that dump be stored in a file on the server in a location I would specify.</p>

<p>As I'm a PHP nooblet, I'd like someone to give me some assistance, guidance, or code, that would do what I require. This would have to be run remotely from the Internet.</p>
","<p>You can use the <a href=""http://www.php.net/manual/en/function.exec.php""><strong><code>exec()</code></strong></a> function to execute an external command.</p>

<p>Note: between <code>shell_exec()</code> and <code>exec()</code>, I would choose the second one, which doesn't return the output to the PHP script -- no need for the PHP script to get the whole SQL dump as a string : you only need it written to a file, and this can be done by the command itself.</p>

<p><br>
That external command will :</p>

<ul>
<li>be a call to <code>mysqldump</code>, with the right parameters, </li>
<li>and redirect the output to a file.</li>
</ul>

<p>For example :</p>

<pre><code>mysqldump --user=... --password=... --host=... DB_NAME &gt; /path/to/output/file.sql
</code></pre>

<p><br>
Which means your PHP code would look like this :</p>

<pre><code>exec('mysqldump --user=... --password=... --host=... DB_NAME &gt; /path/to/output/file.sql');
</code></pre>

<p><br>
<em>Of course, up to you to use the right connection information, replacing the <code>...</code> with those.</em></p>
","6750595"
"List of All Locales and Their Short Codes?","164527","","<p>I'm looking for a list of all locales and their short codes for a PHP application I am writing. Is there much variation in this data between platforms?</p>

<p>Also, if I am developing an international application, can I just support one version of English or are there significant differences in English across the world?</p>
","<p>The importance of locales is that your environment/os can provide formatting functionality for all installed locales even if you don't know about them when you write your application.  My Windows 7 system has 211 locales installed (listed below), so you wouldn't likely write any custom code or translation specific to this many locales.</p>

<p>The most important thing for various versions of English is in formatting numbers and dates.  Other differences are significant to the extent that you want and able to cater to specific variations.</p>

<pre><code>af-ZA
am-ET
ar-AE
ar-BH
ar-DZ
ar-EG
ar-IQ
ar-JO
ar-KW
ar-LB
ar-LY
ar-MA
arn-CL
ar-OM
ar-QA
ar-SA
ar-SY
ar-TN
ar-YE
as-IN
az-Cyrl-AZ
az-Latn-AZ
ba-RU
be-BY
bg-BG
bn-BD
bn-IN
bo-CN
br-FR
bs-Cyrl-BA
bs-Latn-BA
ca-ES
co-FR
cs-CZ
cy-GB
da-DK
de-AT
de-CH
de-DE
de-LI
de-LU
dsb-DE
dv-MV
el-GR
en-029
en-AU
en-BZ
en-CA
en-GB
en-IE
en-IN
en-JM
en-MY
en-NZ
en-PH
en-SG
en-TT
en-US
en-ZA
en-ZW
es-AR
es-BO
es-CL
es-CO
es-CR
es-DO
es-EC
es-ES
es-GT
es-HN
es-MX
es-NI
es-PA
es-PE
es-PR
es-PY
es-SV
es-US
es-UY
es-VE
et-EE
eu-ES
fa-IR
fi-FI
fil-PH
fo-FO
fr-BE
fr-CA
fr-CH
fr-FR
fr-LU
fr-MC
fy-NL
ga-IE
gd-GB
gl-ES
gsw-FR
gu-IN
ha-Latn-NG
he-IL
hi-IN
hr-BA
hr-HR
hsb-DE
hu-HU
hy-AM
id-ID
ig-NG
ii-CN
is-IS
it-CH
it-IT
iu-Cans-CA
iu-Latn-CA
ja-JP
ka-GE
kk-KZ
kl-GL
km-KH
kn-IN
kok-IN
ko-KR
ky-KG
lb-LU
lo-LA
lt-LT
lv-LV
mi-NZ
mk-MK
ml-IN
mn-MN
mn-Mong-CN
moh-CA
mr-IN
ms-BN
ms-MY
mt-MT
nb-NO
ne-NP
nl-BE
nl-NL
nn-NO
nso-ZA
oc-FR
or-IN
pa-IN
pl-PL
prs-AF
ps-AF
pt-BR
pt-PT
qut-GT
quz-BO
quz-EC
quz-PE
rm-CH
ro-RO
ru-RU
rw-RW
sah-RU
sa-IN
se-FI
se-NO
se-SE
si-LK
sk-SK
sl-SI
sma-NO
sma-SE
smj-NO
smj-SE
smn-FI
sms-FI
sq-AL
sr-Cyrl-BA
sr-Cyrl-CS
sr-Cyrl-ME
sr-Cyrl-RS
sr-Latn-BA
sr-Latn-CS
sr-Latn-ME
sr-Latn-RS
sv-FI
sv-SE
sw-KE
syr-SY
ta-IN
te-IN
tg-Cyrl-TJ
th-TH
tk-TM
tn-ZA
tr-TR
tt-RU
tzm-Latn-DZ
ug-CN
uk-UA
ur-PK
uz-Cyrl-UZ
uz-Latn-UZ
vi-VN
wo-SN
xh-ZA
yo-NG
zh-CN
zh-HK
zh-MO
zh-SG
zh-TW
zu-ZA
</code></pre>
","3191729"
"How do check if a PHP session is empty?","164455","","<p>Is this bad practice?</p>

<pre><code>if ($_SESSION['something'] == '')
{
    echo 'the session is empty';
}
</code></pre>

<p>Is there a way to check if its empty or it is not set? I'm actualy doing this:</p>

<pre><code>if (($_SESSION['something'] == '') || (!isset($_SESSION['something'])) {
    echo 'the session is either empty or doesn\'t exist';
}
</code></pre>

<p>Does <code>!isset</code> just checks if a <code>$_SESSION['']</code> exist and doesn't check if, is there are values in the array or not</p>
","<p>I would use <a href=""http://www.php.net/isset"" rel=""nofollow noreferrer""><code>isset</code></a> and <a href=""http://www.php.net/empty"" rel=""nofollow noreferrer""><code>empty</code></a>:</p>

<pre><code>session_start();
if(isset($_SESSION['blah']) &amp;&amp; !empty($_SESSION['blah'])) {
   echo 'Set and not empty, and no undefined index error!';
}
</code></pre>

<p><a href=""http://www.php.net/array_key_exists"" rel=""nofollow noreferrer""><code>array_key_exists</code></a> is a nice alternative to using <code>isset</code> to check for keys:</p>

<pre><code>session_start();
if(array_key_exists('blah',$_SESSION) &amp;&amp; !empty($_SESSION['blah'])) {
    echo 'Set and not empty, and no undefined index error!';
}
</code></pre>

<p>Make sure you're calling <code>session_start</code> before reading from or writing to the session array.</p>
","1519849"
"How to print a debug log?","164219","","<p>I'd like to debug this code but I guess ""printing a log to screen or file"" is fine for me.  </p>

<p>How should I print a log in php code?
The usual <code>print/printf</code> seems to go to HTML output not the console.</p>

<p>I have apache server executing the PHP code.  </p>
","<p>A lesser known trick is that mod_php maps stderr to the Apache log. And, there is a stream for that, so <code>file_put_contents('php://stderr', print_r($foo, TRUE))</code> will nicely dump the value of <code>$foo</code> into the Apache error log.</p>
","6079566"
"What is causing ""Unable to allocate memory for pool"" in PHP?","164219","","<p>I've occasionally run up against a server's memory allocation limit, particularly with a bloated application like Wordpress, but never encountered ""Unable to allocate memory for pool"" and having trouble tracking down any information.</p>

<p>Does anyone know what this means?  I've tried increasing the <code>memory_limit</code> without success.  I also haven't made any significant changes to the application. One day there was no problem, the next day I hit this error.</p>
","<p><strong><a href=""https://bugs.php.net/bug.php?id=58982"" rel=""noreferrer"">Probably is APC related.</a></strong></p>

<p>For the people having this problem, please specify you .ini  settings. Specifically your apc.mmap_file_mask setting.</p>

<p>For file-backed mmap, it should be set to something like:</p>

<pre><code>apc.mmap_file_mask=/tmp/apc.XXXXXX
</code></pre>

<p>To mmap directly from /dev/zero, use:</p>

<pre><code>apc.mmap_file_mask=/dev/zero
</code></pre>

<p>For POSIX-compliant shared-memory-backed mmap, use:</p>

<pre><code>apc.mmap_file_mask=/apc.shm.XXXXXX
</code></pre>
","3723338"
"successful/fail message pop up box after submit?","164110","","<p>Basically after clicking the submit button, I want a pop up box to pop up saying successful or fail, then clicking OK to confirm the message. At the moment i am getting a pop up box ""undefined"" followed by failed message pop up box.  <strong>HELP PLEASE!</strong></p>

<p>here is the script</p>

<pre><code>&lt;?php
include ('config.php');

if (isset($_POST['name'])) {

$name = ""name"";

$query = ""INSERT INTO pop ('id','name') VALUES ('','$name')"";
    $result = mysql_query($query,$cn);
    if ($result) {
    echo ""&lt;script type='text/javascript'&gt;alert('submitted successfully!')&lt;/script&gt;"";
}
else
{
    echo ""&lt;script type='text/javascript'&gt;alert('failed!')&lt;/script&gt;"";
}
}       
?&gt;

&lt;html&gt;
&lt;head&gt;
&lt;/head&gt;
&lt;body&gt;

    &lt;form action="""" method=""post""&gt;
    Name:&lt;input type=""text"" id=""name"" name=""name""/&gt;
    &lt;input type=""submit"" value=""submit"" name=""submit"" onclick=""alert();""/&gt;
    &lt;/form&gt;
&lt;/body&gt;
</code></pre>

<p></p>
","<p>You are echoing outside the body tag of your HTML.
Put your echos there, and you should be fine.</p>

<p>Also, remove the <code>onclick=""alert()""</code> from your submit. This is the cause for your first <code>undefined</code> message.</p>

<pre><code>&lt;?php
  $posted = false;
  if( $_POST ) {
    $posted = true;

    // Database stuff here...
    // $result = mysql_query( ... )
    $result = $_POST['name'] == ""danny""; // Dummy result
  }
?&gt;

&lt;html&gt;
  &lt;head&gt;&lt;/head&gt;
  &lt;body&gt;

  &lt;?php
    if( $posted ) {
      if( $result ) 
        echo ""&lt;script type='text/javascript'&gt;alert('submitted successfully!')&lt;/script&gt;"";
      else
        echo ""&lt;script type='text/javascript'&gt;alert('failed!')&lt;/script&gt;"";
    }
  ?&gt;
    &lt;form action="""" method=""post""&gt;
      Name:&lt;input type=""text"" id=""name"" name=""name""/&gt;
      &lt;input type=""submit"" value=""submit"" name=""submit""/&gt;
    &lt;/form&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
","16250636"
"How to initialize static variables","163825","","<p>I have this code:</p>

<pre><code>private static $dates = array(
  'start' =&gt; mktime( 0,  0,  0,  7, 30, 2009),  // Start date
  'end'   =&gt; mktime( 0,  0,  0,  8,  2, 2009),  // End date
  'close' =&gt; mktime(23, 59, 59,  7, 20, 2009),  // Date when registration closes
  'early' =&gt; mktime( 0,  0,  0,  3, 19, 2009),  // Date when early bird discount ends
);
</code></pre>

<p>Which gives me the following error:</p>

<blockquote>
  <p>Parse error: syntax error, unexpected '(', expecting ')' in /home/user/Sites/site/registration/inc/registration.class.inc on line 19</p>
</blockquote>

<p>So, I guess I am doing something wrong... but how can I do this if not like that? If I change the mktime stuff with regular strings, it works. So I know that I can do it <em>sort of</em> like that..</p>

<p>Anyone have some pointers?</p>
","<p>PHP can't parse non-trivial expressions in initializers.</p>

<p>I prefer to work around this by adding code right after definition of the class:</p>

<pre><code>class Foo {
  static $bar;
}
Foo::$bar = array(…);
</code></pre>

<p>or</p>

<pre><code>class Foo {
  private static $bar;
  static function init()
  {
    self::$bar = array(…);
  }
}
Foo::init();
</code></pre>

<hr>

<p><a href=""https://wiki.php.net/rfc/const_scalar_exprs"" rel=""noreferrer"">PHP 5.6</a> can handle some expressions now.</p>
","693799"
"Convert String To date in PHP","163590","","<p>How can I convert this string <code>05/Feb/2010:14:00:01</code> to unixtime ? </p>
","<p>For PHP 5.3 this should work. You may need to fiddle with passing $dateInfo['is_dst'], wasn't working for me anyhow.</p>

<pre><code>$date = '05/Feb/2010:14:00:01';
$dateInfo = date_parse_from_format('d/M/Y:H:i:s', $date);
$unixTimestamp = mktime(
    $dateInfo['hour'], $dateInfo['minute'], $dateInfo['second'],
    $dateInfo['month'], $dateInfo['day'], $dateInfo['year'],
    $dateInfo['is_dst']
);
</code></pre>

<p>Versions prior, this should work.</p>

<pre><code>$date = '05/Feb/2010:14:00:01';
$format = '@^(?P&lt;day&gt;\d{2})/(?P&lt;month&gt;[A-Z][a-z]{2})/(?P&lt;year&gt;\d{4}):(?P&lt;hour&gt;\d{2}):(?P&lt;minute&gt;\d{2}):(?P&lt;second&gt;\d{2})$@';
preg_match($format, $date, $dateInfo);
$unixTimestamp = mktime(
    $dateInfo['hour'], $dateInfo['minute'], $dateInfo['second'],
    date('n', strtotime($dateInfo['month'])), $dateInfo['day'], $dateInfo['year'],
    date('I')
);
</code></pre>

<p>You may not like regular expressions. You could annotate it, of course, but not everyone likes that either. So, this is an alternative.</p>

<pre><code>$day = $date[0].$date[1];
$month = date('n', strtotime($date[3].$date[4].$date[5]));
$year = $date[7].$date[8].$date[9].$date[10];
$hour = $date[12].$date[13];
$minute = $date[15].$date[16];
$second = $date[18].$date[19];
</code></pre>

<p>Or substr, or explode, whatever you wish to parse that string.</p>
","2223482"
"How to Debug Variables in Smarty like in PHP var_dump()","163490","","<p>I have some variables inside a template and I don't know where I assigned them. I need to know what is inside a particular variable; for instance, say I have a variable in smarty called <code>member</code>. I tried with <code>{debug}</code> but it didn't work, and no popup was shown. </p>

<p>How can I output/debug smarty variables using something like <code>var_dump()</code> inside the templates?</p>
","<p>You can use {php} tags</p>

<p><strong>Method 1 (won't work in Smarty 3.1 or later):</strong></p>

<pre><code>{php}

$var =
$this-&gt;get_template_vars('var');
var_dump($var);

{/php}
</code></pre>

<p><strong>Method 2:</strong></p>

<pre><code>{$var|@print_r}
</code></pre>

<p><strong>Method 3:</strong></p>

<pre><code>{$var|@var_dump}
</code></pre>

<p>Let me know if this helps.</p>
","2431853"
"How to secure database passwords in PHP?","163338","","<p>When a PHP application makes a database connection it of course generally needs to pass a login and password. If I'm using a single, minimum-permission login for my application, then the PHP needs to know that login and password somewhere. What is the best way to secure that password? It seems like just writing it in the PHP code isn't a good idea.</p>
","<p>Several people misread this as a question about how to <strong>store</strong> passwords in a database.  That is wrong.  It is about how to store the password that lets you get <strong>to</strong> the database.</p>

<p>The usual solution is to move the password out of source-code into a configuration file.  Then leave administration and securing that configuration file up to your system administrators.  That way developers do not need to know anything about the production passwords, and there is no record of the password in your source-control.</p>
","98021"
"convert php date to mysql format","163150","","<p>I have a date field in php which is using this code: </p>

<pre><code>$date = mysql_real_escape_string($_POST['intake_date']);
</code></pre>

<p>How do I convert this to MySql format 0000-00-00 for inclusion in db. Is it along the lines of: date('Y-m-d' strtotime($date);. The reason I ask, is because I have tried variations of this and I cannot seem to get it to work. Either displays as 1970 or some other variation of that. Many thanks</p>
","<pre><code>$date = mysql_real_escape_string($_POST['intake_date']);
</code></pre>

<p>1. If your MySQL column is <code>DATE</code> type:</p>

<pre><code>$date = date('Y-m-d', strtotime(str_replace('-', '/', $date)));
</code></pre>

<p>2. If your MySQL column is <code>DATETIME</code> type:</p>

<pre><code>$date = date('Y-m-d H:i:s', strtotime(str_replace('-', '/', $date)));
</code></pre>

<p>You haven't got to work <code>strototime()</code>, because it will not work with dash <code>-</code> separators, it will try to do a subtraction.</p>

<hr>

<p><strong>Update</strong>, the way your date is formatted you can't use <code>strtotime()</code>, use this code instead:</p>

<pre><code>$date = '02/07/2009 00:07:00';
$date = preg_replace('#(\d{2})/(\d{2})/(\d{4})\s(.*)#', '$3-$2-$1 $4', $date);
echo $date;
</code></pre>

<p>Output:</p>

<pre><code>2009-07-02 00:07:00
</code></pre>
","6791068"
"Undefined index error PHP","163028","","<p>I'm new in PHP and I'm getting this error:</p>

<blockquote>
  <p>Notice: Undefined index: productid in /var/www/test/modifyform.php on
  line 32</p>
  
  <p>Notice: Undefined index: name in /var/www/test/modifyform.php on line
  33</p>
  
  <p>Notice: Undefined index: price in /var/www/test/modifyform.php on line
  34</p>
  
  <p>Notice: Undefined index: description in /var/www/test/modifyform.php
  on line 35</p>
</blockquote>

<p>I couldn't find any solution online, so maybe someone can help me.</p>

<p>Here is the code:</p>

<pre><code>&lt;form action=""&lt;?php echo $_SERVER['PHP_SELF'];?&gt;"" method=""POST""&gt;
   &lt;input type=""hidden"" name=""rowID"" value=""&lt;?php echo $rowID;?&gt;""&gt;

   &lt;p&gt;
      Product ID:&lt;br /&gt;
      &lt;input type=""text"" name=""productid"" size=""8"" maxlength=""8"" value=""&lt;?php echo $productid;?&gt;"" /&gt;
   &lt;/p&gt;

   &lt;p&gt;
      Name:&lt;br /&gt;
      &lt;input type=""text"" name=""name"" size=""25"" maxlength=""25"" value=""&lt;?php echo $name;?&gt;"" /&gt;
   &lt;/p&gt;

   &lt;p&gt;
      Price:&lt;br /&gt;
      &lt;input type=""text"" name=""price"" size=""6"" maxlength=""6"" value=""&lt;?php echo $price;?&gt;"" /&gt;
   &lt;/p&gt;

   &lt;p&gt;
      Description:&lt;br /&gt;
      &lt;textarea name=""description"" rows=""5"" cols=""30""&gt;
      &lt;?php echo $description;?&gt;&lt;/textarea&gt;
   &lt;/p&gt;

   &lt;p&gt;
      &lt;input type=""submit"" name=""submit"" value=""Submit!"" /&gt;
   &lt;/p&gt;
   &lt;/form&gt;
   &lt;?php
   if (isset($_POST['submit'])) {
      $rowID = $_POST['rowID'];
      $productid = $_POST['productid']; //this is line 32 and so on...
      $name = $_POST['name'];
      $price = $_POST['price'];
      $description = $_POST['description'];

}
</code></pre>

<p>What I do after that (or at least I'm trying) is to update a table in MySQL.
I really can't understand why <code>$rowID</code> is defined while the other variables aren't.</p>

<p>Thank you for taking your time to answer me.
Cheers!</p>
","<p>Try:</p>

<pre class=""lang-php prettyprint-override""><code>&lt;?php

if (isset($_POST['name'])) {
    $name = $_POST['name'];
}

if (isset($_POST['price'])) {
    $price = $_POST['price'];
}

if (isset($_POST['description'])) {
    $description = $_POST['description'];
}

?&gt;
</code></pre>
","10613608"
"PHP convert XML to JSON","162976","","<p>I am trying to convert xml to json in php. If I do a simple convert using simple xml and json_encode none of the attributes in the xml show.</p>

<pre><code>$xml = simplexml_load_file(""states.xml"");
echo json_encode($xml);
</code></pre>

<p>So I am trying to manually parse it like this.</p>

<pre><code>foreach($xml-&gt;children() as $state)
{
    $states[]= array('state' =&gt; $state-&gt;name); 
}       
echo json_encode($states);
</code></pre>

<p>and the output for state is <code>{""state"":{""0"":""Alabama""}}</code> rather than <code>{""state"":""Alabama""}</code></p>

<p>What am I doing wrong?</p>

<p>XML:</p>

<pre><code>&lt;?xml version=""1.0"" ?&gt;
&lt;states&gt;
    &lt;state id=""AL""&gt;     
    &lt;name&gt;Alabama&lt;/name&gt;
    &lt;/state&gt;
    &lt;state id=""AK""&gt;
        &lt;name&gt;Alaska&lt;/name&gt;
    &lt;/state&gt;
&lt;/states&gt;
</code></pre>

<p>Output:</p>

<pre><code>[{""state"":{""0"":""Alabama""}},{""state"":{""0"":""Alaska""}
</code></pre>

<p>var dump:</p>

<pre><code>object(SimpleXMLElement)#1 (1) {
[""state""]=&gt;
array(2) {
[0]=&gt;
object(SimpleXMLElement)#3 (2) {
  [""@attributes""]=&gt;
  array(1) {
    [""id""]=&gt;
    string(2) ""AL""
  }
  [""name""]=&gt;
  string(7) ""Alabama""
}
[1]=&gt;
object(SimpleXMLElement)#2 (2) {
  [""@attributes""]=&gt;
  array(1) {
    [""id""]=&gt;
    string(2) ""AK""
  }
  [""name""]=&gt;
  string(6) ""Alaska""
}
}
}
</code></pre>
","<p>I figured it out. json_encode handles objects differently than strings. I cast the object to a string and it works now.</p>

<pre><code>foreach($xml-&gt;children() as $state)
{
    $states[]= array('state' =&gt; (string)$state-&gt;name); 
}       
echo json_encode($states);
</code></pre>
","8845727"
"How to get a substring between two strings in PHP?","162781","","<p>I need a function that returns the substring between two words (or two characters).
I'm wondering whether there is a php function that achieves that. I do not want to think about regex (well, I could do one but really don't think it's the best way to go). Thinking of <code>strpos</code> and <code>substr</code> functions.
Here's an example:<br/></p>

<pre><code>$string = ""foo I wanna a cake foo"";
</code></pre>

<p>We call the function: <code>$substring = getInnerSubstring($string,""foo"");</code> <br/>
It returns: "" I wanna a cake "".<br/></p>

<p>Thanks in advance. <br/></p>

<p><strong>Update:</strong>
Well, till now, I can just get a substring beteen two words in just one string, do you permit to let me go a bit farther and ask if I can extend the use of <code>getInnerSubstring($str,$delim)</code> to get any strings that are between delim value, example:</p>

<pre><code>$string ="" foo I like php foo, but foo I also like asp foo, foo I feel hero  foo"";
</code></pre>

<p>I get an array like <code>{""I like php"", ""I also like asp"", ""I feel hero""}</code>.</p>
","<p>If the strings are different (ie: [foo] &amp; [/foo]), take a look at <a href=""http://www.justin-cook.com/wp/2006/03/31/php-parse-a-string-between-two-strings/"" rel=""noreferrer"">this post</a> from Justin Cook.
I copy his code below:</p>

<pre><code>function get_string_between($string, $start, $end){
    $string = ' ' . $string;
    $ini = strpos($string, $start);
    if ($ini == 0) return '';
    $ini += strlen($start);
    $len = strpos($string, $end, $ini) - $ini;
    return substr($string, $ini, $len);
}

$fullstring = 'this is my [tag]dog[/tag]';
$parsed = get_string_between($fullstring, '[tag]', '[/tag]');

echo $parsed; // (result = dog)
</code></pre>
","9826656"
"Add php variable inside echo statement as href link address?","162663","","<p>I'm trying to use a php variable to add a href value for a link in an echo statement.</p>

<p>Here's a simplified version of the code I want to use. I know that I can't just add the variable into the echo statement, but I can't seem to find an example anywhere that works.</p>

<pre><code>$link_address = '#';
echo '&lt;a href=""$link_address""&gt;Link&lt;/a&gt;';
</code></pre>

<p>Any pointers appreciated.</p>
","<p>Try like</p>

<p><strong>HTML in PHP :</strong> </p>

<pre><code>echo ""&lt;a href='"".$link_address.""'&gt;Link&lt;/a&gt;"";
</code></pre>

<p>Or even you can try like</p>

<pre><code>echo ""&lt;a href='$link_address'&gt;Link&lt;/a&gt;"";
</code></pre>

<p>Or you can use PHP in HTML like</p>

<p><strong>PHP in HTML :</strong> </p>

<pre><code>&lt;a href=""&lt;?php echo $link_address;?&gt;""&gt; Link &lt;/a&gt;
</code></pre>
","18916978"
"Count number of iterations in a foreach loop","162199","","<p>How to calculate how many items in a foreach?</p>

<p>I want to count total rows.</p>

<pre><code>foreach ($Contents as $item) {
    $item[number];// if there are 15 $item[number] in this foreach, I want get the value : 15
}
</code></pre>

<p>Thanks.</p>
","<p>First of all, if you just want to find out the number of elements in an array, use <a href=""http://php.net/manual/en/function.count.php"" rel=""noreferrer""><code>count</code></a>. Now, to answer your question...</p>

<blockquote>
  <p>How to calculate how many items in a foreach?</p>
</blockquote>

<pre><code>$i = 0;
foreach ($Contents as $item) {
    $i++;
    $item[number];// if there are 15 $item[number] in this foreach, I want get the value : 15
}
</code></pre>

<p>You could also have a look at the answers over here:</p>

<ul>
<li><a href=""https://stackoverflow.com/questions/141108/how-to-find-the-foreach-index"">How to find the foreach index</a></li>
</ul>
","6220566"
"PHP PDO returning single row","162195","","<p><strong>UPDATE 2:</strong></p>

<p>So is this the most optimized it can get?</p>

<pre><code>$DBH = new PDO( ""connection string goes here"" );

$STH = $DBH -&gt; prepare( ""select figure from table1"" );

$STH -&gt; execute();

$result = $STH -&gt; fetch();

echo $result [""figure""];

$DBH = null;
</code></pre>

<p><strong>UPDATE 1:</strong></p>

<p>I know I can add limit to the sql query, but I also want to get rid of the foreach loop, which I should not need.</p>

<p><strong>ORIGINAL QUESTION:</strong></p>

<p>I have the following script which is good IMO for returning many rows from the database because of the ""foreach"" section.</p>

<p>How do I optimize this, if I know I will always only get 1 row from the database.  If I know I will only ever get 1 row from the database, I don't see why I need the foreach loop, but I don't know how to change the code.</p>

<pre><code>$DBH = new PDO( ""connection string goes here"" );

$STH = $DBH -&gt; prepare( ""select figure from table1"" );

$STH -&gt; execute();

$result = $STH -&gt; fetchAll();

foreach( $result as $row ) {
    echo $row[""figure""];
}

$DBH = null;
</code></pre>
","<p>Just fetch. only gets one row. So no foreach loop needed :D</p>

<pre><code>$row  = $STH -&gt; fetch();
</code></pre>

<p>example (ty northkildonan):</p>

<pre><code>$dbh = new PDO("" --- connection string --- ""); 
$stmt = $dbh-&gt;prepare(""SELECT name FROM mytable WHERE id=4 LIMIT 1""); 
$stmt-&gt;execute(); 
$row = $stmt-&gt;fetch();
</code></pre>
","5456660"
"Calling a PHP function from an HTML form in the same file?","162138","","<p>I'm trying to execute a PHP function in the same page after the user enters a text and presses a submit button.</p>

<p>The first I think of is using forms. When the user submits a form, a PHP function will be executed in the same page. The user will not be directed to another page. The processing will be done and displayed in the same page (without reloading)</p>

<p>Here is what I reach to:</p>

<p>In <strong>test.php</strong> file:</p>

<pre><code>    &lt;form action=""test.php"" method=""post""&gt;
            &lt;input type=""text"" name=""user"" placeholder=""enter a text"" /&gt;
            &lt;input type=""submit"" value=""submit"" onclick=""test()"" /&gt;
    &lt;/form&gt;
</code></pre>

<p>The PHP code [ <strong><code>test()</code> function</strong> ] is <strong><em>in the same file</em></strong> also:</p>

<pre><code>    &lt;?php
    function test() {
    echo $_POST[""user""]; //just an example of processing
    }    
    ?&gt;
</code></pre>

<p>However, I still getting a problem! Any one have an idea?</p>
","<p>This cannot be done in the fashion you are talking about. PHP is Server-Side while The form exists on the client-side.  You will need to look into using Javascript and/or AJAX if you don't want to refresh the page.</p>

<p><strong>test.php</strong></p>

<pre><code>&lt;form action=""javascript:void(0);"" method=""post""&gt;
    &lt;input type=""text"" name=""user"" placeholder=""enter a text"" /&gt;
    &lt;input type=""submit"" value=""submit"" /&gt;
&lt;/form&gt;

&lt;script type=""text/javascript""&gt;
    $(""form"").submit(function(){
        var str = $(this).serialize();
        $.ajax('getResult.php', str, function(result){
            alert(result); // the result variable will contain any text echoed by getResult.php
        }
        return(false);
    });
&lt;/script&gt;
</code></pre>

<p>It will call <code>getResult.php</code> and pass the serialized form to it so the PHP can read those values. Anything <code>getResult.php</code> echos will be returned to the JS function in the <code>result</code> variable back on <code>test.php</code> and (in this case) shown in an alert box.</p>

<p><strong>getResult.php</strong></p>

<pre><code>&lt;?php
    echo ""The name you typed is: "" . $_REQUEST['user'];
?&gt;
</code></pre>

<p><strong>NOTE</strong> This example uses jQuery, a 3rd-party Javascript Wrapper. I suggest you first develop a better understanding of how these web technologies work together before complicating things for yourself further.</p>
","5967362"
"Can I extend a class using more than 1 class in PHP?","162117","","<p>If I have several classes with functions that I need but want to store separately for organisation, can I extend a class to have both?</p>

<p>i.e. <code>class a extends b extends c</code></p>

<p>edit: I know how to extend classes one at a time, but I'm looking for a method to instantly extend a class using multiple base classes - AFAIK you can't do this in PHP but there should be ways around it without resorting to <code>class c extends b</code>, <code>class b extends a</code></p>
","<p>Answering your edit :</p>

<p>If you really want to fake multiple inheritance, you can use the magic function __call().</p>

<p>This is ugly though it works from class A user's point of view :</p>

<pre><code>class B {
    public function method_from_b($s) {
        echo $s;
    }
}

class C {
    public function method_from_c($s) {
        echo $s;
    }
}

class A extends B
{
  private $c;

  public function __construct()
  {
    $this-&gt;c = new C;
  }

  // fake ""extends C"" using magic function
  public function __call($method, $args)
  {
    $this-&gt;c-&gt;$method($args[0]);
  }
}


$a = new A;
$a-&gt;method_from_b(""abc"");
$a-&gt;method_from_c(""def"");
</code></pre>

<p>Prints ""abcdef""</p>
","356431"
"How to embed YouTube videos in PHP?","162045","","<p>Can anyone give me an idea how can we <em>show</em> or embed a YouTube video if we just have the URL or the Embed code?</p>
","<p>You have to ask users to store the 11 character code from the youtube video.</p>

<p>For e.g. <a href=""http://www.youtube.com/watch?v=Ahg6qcgoay4"" rel=""noreferrer"">http://www.youtube.com/watch?v=Ahg6qcgoay4</a></p>

<p>The eleven character code is : Ahg6qcgoay4</p>

<p>You then take this code and place it in your database. Then wherever you want to place the youtube video in your page, load the character from the database and put the following code:-</p>

<p>e.g. for Ahg6qcgoay4 it will be : </p>

<pre><code>&lt;object width=""425"" height=""350"" data=""http://www.youtube.com/v/Ahg6qcgoay4"" type=""application/x-shockwave-flash""&gt;&lt;param name=""src"" value=""http://www.youtube.com/v/Ahg6qcgoay4"" /&gt;&lt;/object&gt;
</code></pre>
","412499"
"How do I set the selected item in a drop down box","161986","","<p>Is there any way to set the selected item in a drop down box using the following 'type' code?</p>

<pre><code>&lt;select selected=""&lt;?php print($row[month]); ?&gt;""&gt;&lt;option value=""Janurary""&gt;January&lt;/option&gt;&lt;option value=""February""&gt;February&lt;/option&gt;&lt;option value=""March""&gt;March&lt;/option&gt;&lt;option value=""April""&gt;April&lt;/option&gt;&lt;/select&gt;
</code></pre>

<p>The database holds a month.. and I want to allow on the edit page, them to choose this month.. but it to be pre-filled with their current setting?</p>
","<p>You need to set the selected attribute of the correct option tag:</p>

<pre><code>&lt;option value=""January"" selected=""selected""&gt;January&lt;/option&gt;
</code></pre>

<p>Your PHP would look something like this:</p>

<pre><code>&lt;option value=""January""&lt;?=$row['month'] == 'January' ? ' selected=""selected""' : '';?&gt;&gt;January&lt;/option&gt;
</code></pre>

<p>I usually find it neater to create an array of values and loop through that to create a dropdown.</p>
","1336376"
"Insert array into MySQL database with PHP","161468","","<p>I have the following array I want to store in my database...</p>

<pre><code>$insData = array(
    'uid' =&gt; $fbme['id'],
    'first_name' =&gt; $fbme['first_name'],
    'last_name' =&gt; $fbme['last_name'],
    'email' =&gt; isset($fbme['email']) ? $fbme['email'] : '',
    'link' =&gt; $fbme['link'],
    'affiliations' =&gt; $networks,
    'birthday' =&gt; $info[0]['birthday_date'],
    'current_location' =&gt; isset($fbme['location']['name']) ? $fbme['location']['name'] : '',
    'education_history' =&gt; $education,
    'work' =&gt; $workInfo,
    'hometown_location' =&gt; isset($fbme['hometown']['name']) ? $fbme['hometown']['name'] : '',
    'interests' =&gt; $info[0]['interests'],
    'locale' =&gt; $info[0]['locale'],
    'movies' =&gt; $movies,
    'music' =&gt; $music,
    'political' =&gt; $info[0]['political'],
    'relationship_status' =&gt; $info[0]['relationship_status'],
    'sex' =&gt;  isset($fbme['gender']) ? $fbme['gender'] : '',
    'tv' =&gt; $television,
    'status' =&gt; '0',
    'created' =&gt; $now,
    'updated' =&gt; $now,
);
</code></pre>

<p>I've tried searching google on how to do this and all I can find is information stating my array needs to be split, before inserting into the table. Is this correct? Sorry for the naivity, very new to php.</p>
","<p><strong>You can not insert an array directly to <em>mysql</em> as <em>mysql</em> doesn't understand <em>php</em> data types.</strong> <em>Mysql</em> only understands <em>SQL</em>. So to insert an array into a mysql database you have to convert it to an sql statement. This can be done manually or by a library. The output should be an <code>INSERT</code> statement. </p>

<p>Here is a standard mysql insert statement. </p>

<pre><code>INSERT INTO TABLE1(COLUMN1, COLUMN2, ....) VALUES (VALUE1, VALUE2..)
</code></pre>

<p>If you <em>have a table with name <code>fbdata</code> with the columns which are presented in the keys of your array</em> you can insert with this small snippet. Here is how your array is converted to this statement.</p>

<pre><code>$columns = implode("", "",array_keys($insData));
$escaped_values = array_map('mysql_real_escape_string', array_values($insData));
$values  = implode("", "", $escaped_values);
$sql = ""INSERT INTO `fbdata`($columns) VALUES ($values)"";
</code></pre>

<p><strong>Update for PHP7</strong></p>

<p>Since PHP 5.5 <code>mysql_real_escape_string</code> has been deprecated and as of PHP7 it has been removed. See: <a href=""http://php.net/manual/en/mysqli.real-escape-string.php"">Php.net's documentation on the new procedure.</a></p>
","10054657"
"Passing $_POST values with cURL","160901","","<p>How do you pass <code>$_POST</code> values to a page using <code>cURL</code>?</p>
","<p>Should work fine.</p>

<pre><code>$data = array('name' =&gt; 'Ross', 'php_master' =&gt; true);

// You can POST a file by prefixing with an @ (for &lt;input type=""file""&gt; fields)
$data['file'] = '@/home/user/world.jpg';

$handle = curl_init($url);
curl_setopt($handle, CURLOPT_POST, true);
curl_setopt($handle, CURLOPT_POSTFIELDS, $data);
curl_exec($handle);
curl_close($handle)
</code></pre>

<p>We have two options here, <code>CURLOPT_POST</code> which turns HTTP POST on, and <code>CURLOPT_POSTFIELDS</code> which contains an array of our post data to submit. This can be used to submit data to <code>POST</code> <code>&lt;form&gt;</code>s.</p>

<hr>

<p>It is important to note that <code>curl_setopt($handle, CURLOPT_POSTFIELDS, $data);</code> takes the $data in two formats, and that this determines how the post data will be encoded.</p>

<ol>
<li><p><code>$data</code> as an <code>array()</code>: The data will be sent as <code>multipart/form-data</code> which is not always accepted by the server.</p>

<pre><code>$data = array('name' =&gt; 'Ross', 'php_master' =&gt; true);
curl_setopt($handle, CURLOPT_POSTFIELDS, $data);
</code></pre></li>
<li><p><code>$data</code> as url encoded string: The data will be sent as <code>application/x-www-form-urlencoded</code>, which is the default encoding for submitted html form data.</p>

<pre><code>$data = array('name' =&gt; 'Ross', 'php_master' =&gt; true);
curl_setopt($handle, CURLOPT_POSTFIELDS, http_build_query($data));
</code></pre></li>
</ol>

<p>I hope this will help others save their time.</p>

<p>See:  </p>

<ul>
<li><a href=""http://www.php.net/manual/en/function.curl-init.php"" rel=""noreferrer""><code>curl_init</code></a></li>
<li><a href=""http://www.php.net/manual/en/function.curl-setopt.php"" rel=""noreferrer""><code>curl_setopt</code></a></li>
</ul>
","28411"
"PHP - Check if two arrays are equal","160725","","<p>I'd like to check if two arrays are equal. I mean: same size, same index, same values. How can I do that?</p>

<p>Using <code>===</code> as suggested by a user, I expect that the following would print <strong>enter</strong> if at least one element in the array(s) are different, but in fact it does not.</p>

<pre><code>if (($_POST['atlOriginal'] !=== $oldAtlPosition) 
    or ($_POST['atl'] !=== $aext) 
    or ($_POST['sidesOriginal'] !=== $oldSidePosition) 
    or ($_POST['sidesOriginal'] !=== $sideext)) {

    echo ""enter"";
}
</code></pre>
","<pre><code>$arraysAreEqual = ($a == $b); // TRUE if $a and $b have the same key/value pairs.
$arraysAreEqual = ($a === $b); // TRUE if $a and $b have the same key/value pairs in the same order and of the same types.
</code></pre>

<p>See <a href=""http://www.php.net/manual/en/language.operators.array.php"" rel=""noreferrer"">Array Operators</a>.</p>

<p><strong>EDIT</strong></p>

<p>The inequality operator is <code>!=</code> while the non-identity operator is <code>!==</code> to match the equality 
operator <code>==</code> and the identity operator <code>===</code>.</p>
","5678990"
"Getter and Setter?","160516","","<p>I'm not a PHP developer, so I'm wondering if in PHP is more popular to use explicit getter/setters, in a pure OOP style, with private fields (the way I like):</p>

<pre><code>class MyClass {
    private $firstField;
    private $secondField;

    public function getFirstField() {
        return $this-&gt;firstField;
    }
    public function setFirstField($x) {
        $this-&gt;firstField = $x;
    }
    public function getSecondField() {
        return $this-&gt;secondField;
    }
    public function setSecondField($x) {
        $this-&gt;secondField = $x;
    }
}
</code></pre>

<p>or just public fields:</p>

<pre><code>class MyClass {
    public $firstField;
    public $secondField;
}
</code></pre>

<p>Thanks</p>
","<p>You can use <a href=""http://www.php.net/manual/en/language.oop5.overloading.php"" rel=""noreferrer"">php magic methods</a> <code>__get</code> and <code>__set</code>.</p>

<pre><code>&lt;?php
class MyClass {
  private $firstField;
  private $secondField;

  public function __get($property) {
    if (property_exists($this, $property)) {
      return $this-&gt;$property;
    }
  }

  public function __set($property, $value) {
    if (property_exists($this, $property)) {
      $this-&gt;$property = $value;
    }

    return $this;
  }
}
?&gt;
</code></pre>
","4478690"
"Completely removing phpMyAdmin","160444","","<p>I installed virtualmin and phpmyadmin separately using the apt-get command. phpMyAdmin didn't work because of Virtualmin's security settings (suexec).
When I visit mydomain.com/phpmyadmin, it would download the whole PHP page instead of execute it.
I tried disabling suexec but it didn't work.
So now I want to remove phpMyAdmin.
I removed it using the apt-get remove command and also deleted the /etc/phpmyadmin folder.
But still, when I visit mydomain.com/phpmyadmin, it downloads the page. It probably means phpmyadmin wasn't completely deleted.</p>

<p>What is the problem?</p>

<p>Please help.</p>
","<p>Try running these commands in that order, they're redundant but it's ok</p>

<pre><code>sudo dpkg -P phpmyadmin  
sudo rm -f /etc/apache2/conf.d/phpmyadmin.conf
sudo service apache2 restart
</code></pre>
","5136038"
"PHP foreach loop through multidimensional array","160427","","<p>I have an array:</p>

<pre><code>$arr_nav = array( array( ""id"" =&gt; ""apple"", 
          ""url"" =&gt; ""apple.html"",
          ""name"" =&gt; ""My Apple"" 
        ),
        array( ""id"" =&gt; ""orange"", 
          ""url"" =&gt; ""orange/oranges.html"",
          ""name"" =&gt; ""View All Oranges"",
        ),
        array( ""id"" =&gt; ""pear"", 
          ""url"" =&gt; ""pear.html"",
          ""name"" =&gt; ""A Pear""
        )       
 );
</code></pre>

<p>Which I would like to use a foreach loop to replace (which only allows me to set the number:</p>

<pre><code>for ($row = 0; $row &lt; 5; $row++)
</code></pre>

<p>with the ability to display a <code>.first</code> and <code>.last</code> class for the relevant array values</p>

<p><strong>Edit</strong></p>

<p>I would like the data to be echoed as:</p>

<pre><code>&lt;li id=""' . $arr_nav[$row][""id""] . '""&gt;&lt;a href=""' . $v_url_root . $arr_nav[$row][""url""] . '"" title=""' . $arr_nav[$row][""name""] . '""&gt;""' . $arr_nav[$row][""name""] . '&lt;/a&gt;&lt;/li&gt;' . ""\r\n"";
</code></pre>

<p>Many thanks for your quick responses. StackOverflow rocks!</p>
","<pre><code>$last = count($arr_nav) - 1;

foreach ($arr_nav as $i =&gt; $row)
{
    $isFirst = ($i == 0);
    $isLast = ($i == $last);

    echo ... $row['name'] ... $row['url'] ...;
}
</code></pre>
","842989"
"Creating a search form in PHP to search a database?","160305","","<p>I am currently trying to complete a project where the specifications are to use a search form to search through a packaging database. The database has lots of variables ranging from Sizes, names, types and meats. I need to create a search form where users can search using a number of different searches (such as searching for a lid tray that is 50 cm long). </p>

<p>I have spent all day trying to create some PHP code that can search for info within a test database I created. I have had numerous amounts of errors ranging from mysql_fetch_array errors, boolean errors and now currently my latest error is that my table doesn't seem to exist. Although i can enter data into it (html and php pages where I can enter data), I don't know what is causing this and I have started again a few times now. </p>

<p>Can anyone give me some idea or tips of what I am going to have to do currently? Here is just my small tests at the moment before I move onto the actual sites SQL database. </p>

<p><em>Creation of database:</em> </p>

<pre><code> &lt;body&gt;
  &lt;?php
     $con = mysql_connect(""localhost"", ""root"", """");
      if (!$con)
     {
      die('Could not connect: ' . mysql_error());
     }
      if (mysql_query(""CREATE DATABASE db_test"", $con))
     {
  echo ""Database created"";
     }
      else
    {
  echo ""Error creating database: "" . mysql_error();
    }


  mysql_select_db(""db_test"", $con);
  $sql = ""CREATE TABLE Liam
   ( 
  Code varchar (30),
  Description varchar (30),
  Category varchar (30),
  CutSize varchar (30),
   )"";

 mysql_query($sql, $con);
     mysql_close($con);
 ?&gt; 
   &lt;/body&gt;
</code></pre>

<p><em>HTML search form page:</em> </p>

<pre><code>&lt;body&gt;

      &lt;form action=""form.php"" method=""post""&gt;
        Search: &lt;input type=""text"" name=""term"" /&gt;&lt;br /&gt;
      &lt;input type=""submit"" name=""submit"" value=""Submit"" /&gt;
      &lt;/form&gt;

&lt;/body&gt;
</code></pre>

<p><em>The PHP code I am using to attempt to gather info from the database</em>
(I have rewritten this a few times, this code also displays the ""table.liam doesn't exist"")</p>

<pre><code>  &lt;body&gt;
   &lt;?php
 $con = mysql_connect (""localhost"", ""root"", """");
 mysql_select_db (""db_test"", $con);

  if (!$con)
    { 
    die (""Could not connect: "" . mysql_error());
    } 
    $sql = mysql_query(""SELECT * FROM Liam WHERE Description LIKE '%term%'"") or die
        (mysql_error());

       while ($row = mysql_fetch_array($sql)){
    echo 'Primary key: ' .$row['PRIMARYKEY'];
    echo '&lt;br /&gt; Code: ' .$row['Code'];
    echo '&lt;br /&gt; Description: '.$row['Description'];
    echo '&lt;br /&gt; Category: '.$row['Category'];
    echo '&lt;br /&gt; Cut Size: '.$row['CutSize']; 
  }

  mysql_close($con)
   ?&gt;
     &lt;/body&gt;
</code></pre>

<p>If anyone has any insight or can help me with this I would be very grateful! Thanks in advance.</p>
","<p>try this out let me know what happens.</p>

<p>Form:</p>

<pre><code>&lt;form action=""form.php"" method=""post""&gt; 
Search: &lt;input type=""text"" name=""term"" /&gt;&lt;br /&gt; 
&lt;input type=""submit"" value=""Submit"" /&gt; 
&lt;/form&gt; 
</code></pre>

<p>Form.php:</p>

<pre><code>$term = mysql_real_escape_string($_REQUEST['term']);    

$sql = ""SELECT * FROM liam WHERE Description LIKE '%"".$term.""%'"";
$r_query = mysql_query($sql);

while ($row = mysql_fetch_array($r_query)){ 
echo 'Primary key: ' .$row['PRIMARYKEY']; 
echo '&lt;br /&gt; Code: ' .$row['Code']; 
echo '&lt;br /&gt; Description: '.$row['Description']; 
echo '&lt;br /&gt; Category: '.$row['Category']; 
echo '&lt;br /&gt; Cut Size: '.$row['CutSize'];  
} 
</code></pre>

<p>Edit: Cleaned it up a little more.</p>

<p>Final Cut (my test file):</p>

<pre><code>&lt;?php
$db_hostname = 'localhost';
$db_username = 'demo';
$db_password = 'demo';
$db_database = 'demo';

// Database Connection String
$con = mysql_connect($db_hostname,$db_username,$db_password);
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db($db_database, $con);
?&gt;

&lt;!DOCTYPE html&gt;
&lt;html lang=""en""&gt;
    &lt;head&gt;
        &lt;meta charset=""utf-8"" /&gt;
        &lt;title&gt;&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
&lt;form action="""" method=""post""&gt;  
Search: &lt;input type=""text"" name=""term"" /&gt;&lt;br /&gt;  
&lt;input type=""submit"" value=""Submit"" /&gt;  
&lt;/form&gt;  
&lt;?php
if (!empty($_REQUEST['term'])) {

$term = mysql_real_escape_string($_REQUEST['term']);     

$sql = ""SELECT * FROM liam WHERE Description LIKE '%"".$term.""%'""; 
$r_query = mysql_query($sql); 

while ($row = mysql_fetch_array($r_query)){  
echo 'Primary key: ' .$row['PRIMARYKEY'];  
echo '&lt;br /&gt; Code: ' .$row['Code'];  
echo '&lt;br /&gt; Description: '.$row['Description'];  
echo '&lt;br /&gt; Category: '.$row['Category'];  
echo '&lt;br /&gt; Cut Size: '.$row['CutSize'];   
}  

}
?&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
","12747908"
"""Warning: Cannot modify header information - headers already sent by"" error","160223","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/8028957/headers-already-sent-by-php"">Headers already sent by PHP</a>  </p>
</blockquote>



<p>i keep receiving this error each time i try to submit the a form deletion form.</p>

<blockquote>
  <p>Warning: Cannot modify header
  information - headers already sent by
  (output started at
  C:\xampp\htdocs\speedycms\deleteclient.php:47)
  in
  C:\xampp\htdocs\speedycms\deleteclient.php
  on line 106</p>
</blockquote>

<p>is there something wrong with my code? what do i need to change to make it work?</p>

<pre><code>&lt;?php
if (!isset($_SESSION)) {
  session_start();
}
$MM_authorizedUsers = """";
$MM_donotCheckaccess = ""true"";

// *** Restrict Access To Page: Grant or deny access to this page
function isAuthorized($strUsers, $strGroups, $UserName, $UserGroup) { 
  // For security, start by assuming the visitor is NOT authorized. 
  $isValid = False; 

  // When a visitor has logged into this site, the Session variable MM_Username set equal to their username. 
  // Therefore, we know that a user is NOT logged in if that Session variable is blank. 
  if (!empty($UserName)) { 
    // Besides being logged in, you may restrict access to only certain users based on an ID established when they login. 
    // Parse the strings into arrays. 
    $arrUsers = Explode("","", $strUsers); 
    $arrGroups = Explode("","", $strGroups); 
    if (in_array($UserName, $arrUsers)) { 
      $isValid = true; 
    } 
    // Or, you may restrict access to only certain users based on their username. 
    if (in_array($UserGroup, $arrGroups)) { 
      $isValid = true; 
    } 
    if (($strUsers == """") &amp;&amp; true) { 
      $isValid = true; 
    } 
  } 
  return $isValid; 
}

$MM_restrictGoTo = ""login.php"";
if (!((isset($_SESSION['MM_Username'])) &amp;&amp; (isAuthorized("""",$MM_authorizedUsers, $_SESSION['MM_Username'], $_SESSION['MM_UserGroup'])))) {   
  $MM_qsChar = ""?"";
  $MM_referrer = $_SERVER['PHP_SELF'];
  if (strpos($MM_restrictGoTo, ""?"")) $MM_qsChar = ""&amp;"";
  if (isset($QUERY_STRING) &amp;&amp; strlen($QUERY_STRING) &gt; 0) 
  $MM_referrer .= ""?"" . $QUERY_STRING;
  $MM_restrictGoTo = $MM_restrictGoTo. $MM_qsChar . ""accesscheck="" . urlencode($MM_referrer);
  header(""Location: "". $MM_restrictGoTo); 
  exit;
}
?&gt;

&lt;?php
    require_once('Connections/speedycms.php');

    $client_id = mysql_real_escape_string($_GET['id']); 

    $con = mysql_connect($hostname_speedycms, $username_speedycms, $password_speedycms);

if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db(""speedycms"") or die(mysql_error());
?&gt;

&lt;?php
if (!function_exists(""GetSQLValueString"")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = """", $theNotDefinedValue = """") 
{
  if (PHP_VERSION &lt; 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists(""mysql_real_escape_string"") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case ""text"":
      $theValue = ($theValue != """") ? ""'"" . $theValue . ""'"" : ""NULL"";
      break;    
    case ""long"":
    case ""int"":
      $theValue = ($theValue != """") ? intval($theValue) : ""NULL"";
      break;
    case ""double"":
      $theValue = ($theValue != """") ? doubleval($theValue) : ""NULL"";
      break;
    case ""date"":
      $theValue = ($theValue != """") ? ""'"" . $theValue . ""'"" : ""NULL"";
      break;
    case ""defined"":
      $theValue = ($theValue != """") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

if ((isset($_GET['id'])) &amp;&amp; ($_GET['id'] != """") &amp;&amp; (isset($_POST['deleteForm']))) {
  $deleteSQL = sprintf(""DELETE FROM tbl_accident WHERE id=%s"",
                       GetSQLValueString($_GET['id'], ""int""));

  mysql_select_db($database_speedycms, $speedycms);
  $Result1 = mysql_query($deleteSQL, $speedycms) or die(mysql_error());

  $deleteGoTo = ""progress.php"";
  if (isset($_SERVER['QUERY_STRING'])) {
    $deleteGoTo .= (strpos($deleteGoTo, '?')) ? ""&amp;"" : ""?"";
    $deleteGoTo .= $_SERVER['QUERY_STRING'];
  }
  header(sprintf(""Location: %s"", $deleteGoTo));
}

mysql_select_db($database_speedycms, $speedycms);
$query_delete = ""SELECT * FROM tbl_accident  WHERE id=$client_id"";
$delete = mysql_query($query_delete, $speedycms) or die(mysql_error());
$row_delete = mysql_fetch_assoc($delete);
$totalRows_delete = mysql_num_rows($delete);
?&gt;

&lt;p class=""form2""&gt;Are you sure you wish to &lt;b&gt;delete&lt;/b&gt; the record for &lt;?php echo $row_delete['clientName']; ?&gt;?&lt;/p&gt;
                &lt;form name=""form"" method=""POST"" action=""&lt;?php echo $deleteAction; ?&gt;""&gt;
            &lt;p class=""form2""&gt;&lt;input type=""submit"" value=""Yes"" /&gt;
              &lt;input name=""no"" type=""button"" id=""no"" value=""No"" /&gt;
            &lt;/p&gt;
                              &lt;input type=""hidden"" name=""deleteForm"" value=""form"" /&gt;
        &lt;/form&gt;     
</code></pre>

<p>thanking you in advance!</p>
","<p>Lines 45-47:</p>

<pre><code>?&gt;

&lt;?php
</code></pre>

<p>That's sending a couple of newlines as output, so the headers are already dispatched. Just remove those 3 lines (it's all one big PHP block after all, no need to end PHP parsing and then start it again), as well as the similar block on lines 60-62, and it'll work.</p>

<p>Notice that the error message you got actually gives you a lot of information to help you find this yourself:</p>

<blockquote>
  <p>Warning: Cannot modify header
  information - headers already sent by
  (<strong>output started at
  C:\xampp\htdocs\speedycms\deleteclient.php:47</strong>)
  in
  <strong>C:\xampp\htdocs\speedycms\deleteclient.php
  on line 106</strong></p>
</blockquote>

<p>The two bolded sections tell you where the item is that sent output before the headers (line 47) and where the item is that was trying to send a header after output (line 106).</p>
","1912050"
"How to check for null in Twig?","160201","","<p>What construct should I use to check whether a value is NULL in a Twig template?</p>
","<p>Depending on what exactly you need:</p>

<ul>
<li><p><a href=""http://twig.sensiolabs.org/doc/tests/null.html"" rel=""noreferrer""><code>is null</code></a> checks whether the value is <code>null</code>:</p>

<pre class=""lang-none prettyprint-override""><code>{% if var is null %}
    {# do something #}
{% endif %}
</code></pre></li>
<li><p><a href=""http://twig.sensiolabs.org/doc/tests/defined.html"" rel=""noreferrer""><code>is defined</code></a> checks whether the variable is defined:</p>

<pre class=""lang-none prettyprint-override""><code>{% if var is not defined %}
    {# do something #}
{% endif %}
</code></pre></li>
</ul>

<p>Additionally the <a href=""http://twig.sensiolabs.org/doc/tests/sameas.html"" rel=""noreferrer""><code>is sameas</code></a> test, which does a type strict comparison of two values, might be of interest for checking values other than <code>null</code> (like <code>false</code>):</p>

<pre class=""lang-none prettyprint-override""><code>{% if var is sameas(false) %}
    {# do something %}
{% endif %}
</code></pre>
","4520470"
"Cannot start session without errors in phpMyAdmin","160120","","<p>I get the below error when pointing browser to phpMyAdmin</p>

<blockquote>
  <p>Cannot start session without errors, please check errors given in your PHP and/or webserver log file and configure your PHP installation properly.</p>
</blockquote>

<p>I have checked everything and can't seem to figure out what the problem is. </p>

<p>In my php.ini file I have:</p>

<pre><code>session.save_path = ""/var/lib/php/session""
</code></pre>

<p>Permissions:  </p>

<pre><code>drwxr-xr-x  2 root apache 4096 Feb 16 04:47 session
</code></pre>

<p>Nothing seems to work. Even changing permission on session directory to 777.</p>
","<p>Problem usually lies on your browser end. </p>

<p>You need to flush your browser cache, delete the cookies for the server/host and then retry loading phpMyAdmin.</p>

<p>If you want to go all out, clear out the session folder on the server as well.</p>

<p>One possible reason for this is a <a href=""http://drupal.org/node/352085#comment-1174195"" rel=""noreferrer"" title=""local or outside your house, the server is still the same kind of beast"">session data mismatch</a> between the browser and the webserver causing it to not be able to pull out the required session info and dumping this error dialogue on your lap. </p>
","5381358"
"Magento: get a static block as html in a phtml file","160070","","<p>I have a static block called <code>newest_product</code> (with content) and I would like to display it on a <code>.phtml</code> file as <kbd>html</kbd>. </p>

<p>I've tried this code:</p>

<pre><code>echo $this-&gt;getLayout()-&gt;createBlock('cms/block')-&gt;setBlockId('newest_product')-&gt;toHtml(); 
</code></pre>

<p>But this nothing is being displayed.</p>

<p>Am I using the wrong code?</p>
","<p>In the layout (app/design/frontend/your_theme/layout/default.xml):</p>

<pre><code>&lt;default&gt;
    &lt;cms_page&gt; &lt;!-- need to be redefined for your needs --&gt;
        &lt;reference name=""content""&gt;
            &lt;block type=""cms/block"" name=""cms_newest_product"" as=""cms_newest_product""&gt;
                &lt;action method=""setBlockId""&gt;&lt;block_id&gt;newest_product&lt;/block_id&gt;&lt;/action&gt;
            &lt;/block&gt;
        &lt;/reference&gt;
    &lt;/cms_page&gt;
&lt;/default&gt;
</code></pre>

<p>In your phtml template:</p>

<pre><code>&lt;?php echo $this-&gt;getChildHtml('newest_product'); ?&gt;
</code></pre>

<p>Don't forget about cache cleaning.</p>

<p>I think it help.</p>
","4669266"
"Difference between if () { } and if () : endif;","160033","","<p>Are there any differences between...</p>

<pre><code>if ($value) {

}
</code></pre>

<p>...and...</p>

<pre><code>if ($value):

endif;
</code></pre>

<p>?</p>
","<p>They are the same but the second one is great if you have MVC in your code and don't want to have a lot of echos in your code. For example, in my <code>.phtml</code> files (Zend Framework) I will write something like this:</p>

<pre><code>&lt;?php if($this-&gt;value): ?&gt;
Hello
&lt;?php elseif($this-&gt;asd): ?&gt;
Your name is: &lt;?= $this-&gt;name ?&gt;
&lt;?php else: ?&gt;
You don't have a name.
&lt;?php endif; ?&gt;
</code></pre>
","564139"
"file_get_contents(""php://input"") or $HTTP_RAW_POST_DATA, which one is better to get the body of JSON request?","159929","","<p>file_get_contents(""php://input"") or $HTTP_RAW_POST_DATA, which one is better to get the body of JSON request?</p>

<p>And which request type (<code>GET</code> or <code>POST</code>) should I use to send JSON data when using client side <code>XmlHTTPRequest</code>?</p>

<p>My question was inspired from this answer:
<a href=""https://stackoverflow.com/questions/813487/how-to-post-json-to-php-with-curl/813512#813512"">How to post JSON to PHP with curl</a></p>

<p>He says:</p>

<blockquote>
  <p>From a protocol perspective <code>file_get_contents(""php://input"")</code> is actually more correct, since you're not really processing http multipart form data anyway.</p>
</blockquote>
","<p>Actually <code>php://input</code> allows you to read raw POST data.</p>

<p><strong>It is a less memory intensive alternative to $HTTP_RAW_POST_DATA and does not need any special php.ini directives</strong>.</p>

<p><code>php://input</code> is not available with <code>enctype=""multipart/form-data""</code>.</p>

<p><strong>Reference:</strong> <a href=""http://php.net/manual/en/wrappers.php.php"" rel=""noreferrer"">http://php.net/manual/en/wrappers.php.php</a></p>
","2731431"
"How are echo and print different in PHP?","159814","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/7094118/reference-comparing-phps-print-and-echo"">Reference: Comparing PHP&#39;s print and echo</a>  </p>
</blockquote>



<p>Is there any major and fundamental difference between these two functions in PHP?</p>
","<p>From:
<a href=""http://web.archive.org/web/20090221144611/http://faqts.com/knowledge_base/view.phtml/aid/1/fid/40"" rel=""noreferrer"">http://web.archive.org/web/20090221144611/http://faqts.com/knowledge_base/view.phtml/aid/1/fid/40</a></p>

<ol>
<li><p>Speed.  There is a difference between the two, but speed-wise it
should be irrelevant which one you use.  echo is marginally faster 
since it doesn't set a return value if you really want to get down to the
nitty gritty.  </p></li>
<li><p>Expression. <code>print()</code> behaves like a function in that you can do: 
<code>$ret = print ""Hello World""</code>; And <code>$ret</code> will be <code>1</code>.  That means that print
can be used as part of a more complex expression where echo cannot.  An
example from the PHP Manual:</p></li>
</ol>

<pre class=""lang-php prettyprint-override""><code>$b ? print ""true"" : print ""false"";
</code></pre>

<p>print is also part of the precedence table which it needs to be if it 
is to be used within a complex expression. It is just about at the bottom
of the precedence list though.  Only "","" AND, OR and XOR are lower.</p>

<ol start=""3"">
<li>Parameter(s).  The grammar is: <code>echo expression [, expression[,
expression] ... ]</code> But <code>echo ( expression, expression )</code> is not valid. 
This would be valid: <code>echo (""howdy""),(""partner"")</code>; the same as: <code>echo
""howdy"",""partner""</code>; (Putting the brackets in that simple example 
serves
no purpose since there is no operator precedence issue with a single
term like that.)</li>
</ol>

<p>So, echo without parentheses can take multiple parameters, which get
concatenated:</p>

<pre><code>   echo  ""and a "", 1, 2, 3;   // comma-separated without parentheses
   echo (""and a 123"");        // just one parameter with parentheses
</code></pre>

<p><code>print()</code> can only take one parameter:</p>

<pre><code>   print (""and a 123"");
   print  ""and a 123"";
</code></pre>
","234255"
"How to install MySQLi","159322","","<p>I cannot find instructions about installing MySQLi on a Mac. Just to be clear, MySQL is up to date and I am running PHP 5. How do I install it? Where do I even get it from? Thanks for your help. I'll be giving an up vote and a check mark to whoever answers this!</p>
","<p>MySQLi is part of PHP. There should be a php-mysqli type package available, or you can take the PHP source and recompile that mysqli enabled. You may already have it installed, but it's done as a module and is disabled. Check your php.ini for <code>extension=mysqli.so</code> or similar. it may be commented out, or the .so file is present in your extensions directory but not linked to PHP via that extension= directive.</p>
","7250437"
"Calling a php function by onclick event","159143","","<p>I am trying to call a function by ""onclick"" event of the button.
When I do that it shows error message.
Can anybody help me out on this so that when I click on the button it should call the function and execute it.</p>

<p><strong>My php code is:</strong></p>

<pre><code>&lt;?php
    function hello() {
        echo ""Hello"";
    }
    echo ""&lt;input type='button' name='Release' onclick= hello(); value='Click to Release'&gt;"";
?&gt;
</code></pre>

<p>What is wrong with this code?</p>
","<p>First quote your javascript:</p>

<pre><code>onclick=""hello();""
</code></pre>

<p>Also you can't call a php function from javascript;
you need:</p>

<pre><code>&lt;script type=""text/javascript""&gt;
function hello()
{
alert (""hello"");
}
&lt;/script&gt;
</code></pre>
","7451081"
"How to pass POST parameters in a URL?","158667","","<p>Basically, I think that I can't, but would be very happy to be proven wrong.</p>

<p>I am generating an HTML menu dynamically in PHP, adding one item for each current user, so that I get something like <code>&lt;a href=""process_user.php?user=&lt;user&gt;&gt;</code>, but I have a preference for POST over GET.</p>

<p>Is there any way to pass the info as a POST parameter, rather than GET from a clickable HREF link?  </p>

<hr>

<p>Update: sorry, I am not allowed to use JS - I shoulda said, my bad</p>

<hr>

<p>Update to the update: it looks like @Rob is on to somethign with ""You could use a button instead of an anchor and just style the button to look like a link. That way you could have your values in hidden fields inside the same form to be sent via POST""</p>
","<p>You could use a form styled as a link, no JavaScript required:</p>

<pre><code>&lt;form action=""/do/stuff.php"" method=""post""&gt;
    &lt;input type=""hidden"" name=""user_id"" value=""123"" /&gt;
    &lt;button&gt;Go to user 123&lt;/button&gt;
&lt;/form&gt;
</code></pre>

<p>CSS:</p>

<pre><code>button {
    border: 0;
    padding: 0;
    display: inline;
    background: none;
    text-decoration: underline;
    color: blue;
}
button:hover {
    cursor: pointer;
}
</code></pre>

<p>See: <a href=""http://jsfiddle.net/SkQRN/"" rel=""nofollow noreferrer"">http://jsfiddle.net/SkQRN/</a></p>
","6210960"
"Simple PHP Pagination script","158596","","<p>I have rows of data coming from database, I would like to have a table with a simple pagination, what is the easiest way of doing it?<br>
I'd be glad if anyone could provide.</p>
","<p>This is a mix of HTML and code but it's pretty basic, easy to understand and should be fairly simple to decouple to suit your needs I think.</p>

<pre><code>try {

    // Find out how many items are in the table
    $total = $dbh-&gt;query('
        SELECT
            COUNT(*)
        FROM
            table
    ')-&gt;fetchColumn();

    // How many items to list per page
    $limit = 20;

    // How many pages will there be
    $pages = ceil($total / $limit);

    // What page are we currently on?
    $page = min($pages, filter_input(INPUT_GET, 'page', FILTER_VALIDATE_INT, array(
        'options' =&gt; array(
            'default'   =&gt; 1,
            'min_range' =&gt; 1,
        ),
    )));

    // Calculate the offset for the query
    $offset = ($page - 1)  * $limit;

    // Some information to display to the user
    $start = $offset + 1;
    $end = min(($offset + $limit), $total);

    // The ""back"" link
    $prevlink = ($page &gt; 1) ? '&lt;a href=""?page=1"" title=""First page""&gt;&amp;laquo;&lt;/a&gt; &lt;a href=""?page=' . ($page - 1) . '"" title=""Previous page""&gt;&amp;lsaquo;&lt;/a&gt;' : '&lt;span class=""disabled""&gt;&amp;laquo;&lt;/span&gt; &lt;span class=""disabled""&gt;&amp;lsaquo;&lt;/span&gt;';

    // The ""forward"" link
    $nextlink = ($page &lt; $pages) ? '&lt;a href=""?page=' . ($page + 1) . '"" title=""Next page""&gt;&amp;rsaquo;&lt;/a&gt; &lt;a href=""?page=' . $pages . '"" title=""Last page""&gt;&amp;raquo;&lt;/a&gt;' : '&lt;span class=""disabled""&gt;&amp;rsaquo;&lt;/span&gt; &lt;span class=""disabled""&gt;&amp;raquo;&lt;/span&gt;';

    // Display the paging information
    echo '&lt;div id=""paging""&gt;&lt;p&gt;', $prevlink, ' Page ', $page, ' of ', $pages, ' pages, displaying ', $start, '-', $end, ' of ', $total, ' results ', $nextlink, ' &lt;/p&gt;&lt;/div&gt;';

    // Prepare the paged query
    $stmt = $dbh-&gt;prepare('
        SELECT
            *
        FROM
            table
        ORDER BY
            name
        LIMIT
            :limit
        OFFSET
            :offset
    ');

    // Bind the query params
    $stmt-&gt;bindParam(':limit', $limit, PDO::PARAM_INT);
    $stmt-&gt;bindParam(':offset', $offset, PDO::PARAM_INT);
    $stmt-&gt;execute();

    // Do we have any results?
    if ($stmt-&gt;rowCount() &gt; 0) {
        // Define how we want to fetch the results
        $stmt-&gt;setFetchMode(PDO::FETCH_ASSOC);
        $iterator = new IteratorIterator($stmt);

        // Display the results
        foreach ($iterator as $row) {
            echo '&lt;p&gt;', $row['name'], '&lt;/p&gt;';
        }

    } else {
        echo '&lt;p&gt;No results could be displayed.&lt;/p&gt;';
    }

} catch (Exception $e) {
    echo '&lt;p&gt;', $e-&gt;getMessage(), '&lt;/p&gt;';
}
</code></pre>
","3707457"
"Prevent direct access to a php include file","158493","","<p>I have a php file which I will be using as exclusively as an include. Therefore I would like to throw an error instead of executing it when it's accessed directly by typing in the URL instead of being included.</p>

<p>Basically I need to do a check as follows in the php file:</p>

<pre><code>if ( $REQUEST_URL == $URL_OF_CURRENT_PAGE ) die (""Direct access not premitted"");
</code></pre>

<p>Is there an easy way to do this?</p>
","<p>The easiest way for the generic ""PHP app running on an Apache server that you may or may not fully control"" situation is to put your includes in a directory and deny access to that directory in your .htaccess file. To save people the trouble of Googling, if you're using Apache, put this in a file called "".htaccess"" in the directory you don't want to be accessible:</p>

<pre><code>Deny from all
</code></pre>

<p>If you actually have full control of the server (more common these days even for little apps than when I first wrote this answer), the best approach is to stick the files you want to protect outside of the directory that your web server is serving from. So if your app is in <code>/srv/YourApp/</code>, set the server to serve files from <code>/srv/YourApp/app/</code> and put the includes in <code>/srv/YourApp/includes</code>, so there literally isn't any URL that can access them.</p>
","409511"
"PHP: If internet explorer 6, 7, 8 , or 9","158254","","<p>I want to do a conditional in PHP for the different versions of Internet Explorer along the lines of:</p>

<p><code>if($browser == ie6){ //do this} elseif($browser == ie7) { //dothis } elseif...</code></p>

<p>I have seen many variations on similar code, but looking for something super simple that is very easy to code to do some simple if and else and do different things.</p>

<p>Thanks</p>

<p>EDIT: I need this to show some different messages to users so CSS conditionals etc are no good.</p>
","<p>This is what I ended up using a variation of, which checks for IE8 and below:</p>

<pre><code>if (preg_match('/MSIE\s(?P&lt;v&gt;\d+)/i', @$_SERVER['HTTP_USER_AGENT'], $B) &amp;&amp; $B['v'] &lt;= 8) {
    // Browsers IE 8 and below
} else {
    // All other browsers
}
</code></pre>
","5302437"
"How to remove non-alphanumeric characters?","158132","","<p>I need to remove all characters from a string which aren't in <code>a-z A-Z 0-9</code> set or are not spaces.</p>

<p>Does anyone have a function to do this?</p>
","<p>Sounds like you almost knew what you wanted to do already, you basically defined it as a regex.</p>

<pre><code>preg_replace(""/[^A-Za-z0-9 ]/"", '', $string);
</code></pre>
","659030"
"PHP mySQL - Insert new record into table with auto-increment on primary key","158051","","<p>Wondering if there is a shorthand version to insert a new record into a table that has the primary key enabled? (i.e. not having to include the key column in the query)
Lets say the key column is called ID, and the other columns are Fname, Lname, and Website</p>

<pre><code>$query = ""INSERT INTO myTable VALUES ('Fname', 'Lname', 'Website')"";
</code></pre>
","<p>Use the DEFAULT keyword:</p>

<pre><code>$query = ""INSERT INTO myTable VALUES (DEFAULT,'Fname', 'Lname', 'Website')"";
</code></pre>

<p>Also, you can specify the columns, (which is better practice):</p>

<pre><code>$query = ""INSERT INTO myTable
          (fname, lname, website)
          VALUES
          ('fname', 'lname', 'website')"";
</code></pre>

<p>Reference:</p>

<ul>
<li><a href=""http://dev.mysql.com/doc/refman/5.6/en/data-type-defaults.html"" rel=""noreferrer"">http://dev.mysql.com/doc/refman/5.6/en/data-type-defaults.html</a></li>
</ul>
","7492175"
"How to insert element into arrays at specific position?","157799","","<p>Let's imagine that we have two arrays:</p>

<pre><code>$array_1 = array(
  '0' =&gt; 'zero',
  '1' =&gt; 'one',
  '2' =&gt; 'two',
  '3' =&gt; 'three',
);

$array_2 = array(
  'zero'  =&gt; '0',
  'one'   =&gt; '1',
  'two'   =&gt; '2',
  'three' =&gt; '3',
);
</code></pre>

<p>Now, I'd like to insert <code>array('sample_key' =&gt; 'sample_value')</code> after third element of each array. How can I do it?</p>
","<pre><code>$res = array_slice($array, 0, 3, true) +
    array(""my_key"" =&gt; ""my_value"") +
    array_slice($array, 3, count($array)-3, true);
</code></pre>

<p>This example:</p>

<pre><code>$array = array(
  'zero'  =&gt; '0',
  'one'   =&gt; '1',
  'two'   =&gt; '2',
  'three' =&gt; '3',
);
$res = array_slice($array, 0, 3, true) +
    array(""my_key"" =&gt; ""my_value"") +
    array_slice($array, 3, count($array) - 1, true) ;
print_r($res);
</code></pre>

<p>gives:</p>

<pre>
Array
(
    [zero] => 0
    [one] => 1
    [two] => 2
    [my_key] => my_value
    [three] => 3
)
</pre>
","3354804"
"Apache shows php code instead of executing","157681","","<p>I have recently been trying to install php and apache on my computer. After many hours, they're installed. I have modified the httpd.conf and php.ini files like everyone says. I then created a simple php script:</p>

<pre><code>&lt;?php phpinfo(); ?&gt;
</code></pre>

<p>But when I try to run it with <code>http://127.0.0.1/phpinfo.php</code> it just shows the source code instead of executing. I am using apache2, php5 and windows vista. I have been searching all over the internet without success and am almost banging my head against the wall. Can anyone save me from a concussion?</p>

<p>EDITED LINES:</p>

<p>PHP.INI:</p>

<pre><code>short_open_tag = On
</code></pre>

<p>HTTPD.CONF</p>

<pre><code>LoadModule php5_module ""C:/php/php5apache2_2.dll""
AddType application/x-httpd-php .php
AddType application/x-httpd-php-source .phps
PHPIniDir ""C:/php""
</code></pre>
","<p>You must enable php! Check the folder <code>mods-enabled</code> in the Apache directory (default: /etc/apache2/) to see if you find a file named <code>php</code>. I don't remember the extension but I think it's <code>.so</code>.</p>

<p>Also check in <code>var/log/apache2/error.log</code> to see if you have any errors.</p>
","12142315"
"Upload Progress Bar in PHP","157596","","<p>Does anyone know how to get a progress bar for an upload in php? I am trying writing code for a photo album uploader. I would like a progress bar to display while the photos are uploading. </p>

<p>I am fairly new to php so I dont know everything about it. </p>
","<p>This is by far (after hours of googling and trying scripts) the simplest to set up and nicest uploader I've found</p>

<p><a href=""https://github.com/FineUploader/fine-uploader"" rel=""nofollow"">https://github.com/FineUploader/fine-uploader</a></p>

<p>It doesn't require APC or any other external PHP libraries, I can get file progress feedback on a shared host, and it claims to support html5 drag and drop (personally untested) and multiple file uploads.</p>
","3951200"
"How to prevent form resubmission when page is refreshed (F5 / CTRL+R)","157575","","<p>I have a simple form that submits text to my SQL table. The problem is that after the user submits the text, they can refresh the page and the data gets submitted again without filling the form again. I could redirect the user to another page after the text is submitted, but I want users to stay on the same page.</p>

<p>I remember reading something about giving each user a unique session id and comparing it with another value which solved the problem I am having but I forgot where it is.</p>
","<p>Use the Post/Redirect/Get pattern. <a href=""http://en.wikipedia.org/wiki/Post/Redirect/Get"" rel=""noreferrer"">http://en.wikipedia.org/wiki/Post/Redirect/Get</a></p>

<p>With my website, I will store a message in a cookie or session, redirect after the post, read the cookie/session, and then clear the value of that session or cookie variable.</p>
","6320124"
"jQuery UI Sortable, then write order into a database","157545","","<p>I want to use the jQuery UI <code>sortable</code> function to allow users to set an order and then on change, write it to the database and update it. Can someone write an example on how this would be done?</p>
","<p>The jQuery UI <a href=""http://api.jqueryui.com/sortable/"" rel=""noreferrer""><code>sortable</code></a> feature includes a <a href=""http://api.jqueryui.com/sortable/#method-serialize"" rel=""noreferrer""><code>serialize</code> method</a> to do this. It's quite simple, really. Here's a quick example that sends the data to the specified URL as soon as an element has changes position.</p>

<pre><code>$('#element').sortable({
    axis: 'y',
    update: function (event, ui) {
        var data = $(this).sortable('serialize');

        // POST to server using $.post or $.ajax
        $.ajax({
            data: data,
            type: 'POST',
            url: '/your/url/here'
        });
    }
});
</code></pre>

<p>What this does is that it creates an array of the elements using the elements <code>id</code>. So, I usually do something like this:</p>

<pre><code>&lt;ul id=""sortable""&gt;
   &lt;li id=""item-1""&gt;&lt;/li&gt;
   &lt;li id=""item-2""&gt;&lt;/li&gt;
   ...
&lt;/ul&gt;
</code></pre>

<p>When you use the <code>serialize</code> option, it will create a POST query string like this: <code>item[]=1&amp;item[]=2</code> etc. So if you make use - for example - your database IDs in the <code>id</code> attribute, you can then simply iterate through the POSTed array and update the elements' positions accordingly.</p>

<p>For example, in PHP:</p>

<pre><code>$i = 0;

foreach ($_POST['item'] as $value) {
    // Execute statement:
    // UPDATE [Table] SET [Position] = $i WHERE [EntityId] = $value
    $i++;
}
</code></pre>

<p><a href=""http://jsfiddle.net/ryTsN/"" rel=""noreferrer"">Example on jsFiddle.</a></p>
","15635201"
"http://localhost/index.php redirecting to http://localhost/xampp/","157487","","<p>Good day, fellows!</p>

<p>As the topic already says, localhost is redirecting me to the xampp page. What I try to do is to open a custom index.php page, which is inside my project folder and the project folder is inside the htdocs folder. Reinstalling xampp didn't help. Yesterday everything worked fine and nothing within .php were changed. Any help is appreciated!</p>
","<p>Index file in Xampp redirects to the xampp folder. 
Change the default project</p>

<pre><code>&lt;?php
    if (!empty($_SERVER['HTTPS']) &amp;&amp; ('on' == $_SERVER['HTTPS'])) {
        $uri = 'https://';
    } else {
        $uri = 'http://';
    }
    $uri .= $_SERVER['HTTP_HOST'];

    //CHANGE THIS LINE
    header('Location: '.$uri.'/xampp/');
    //header('Location: '.$uri.'/yourproject/');

    exit;
?&gt;
Something is wrong with the XAMPP installation :-(
</code></pre>

<p>OR put in the browser: <br></p>

<blockquote>
  <p>http:// localhost / <strong>YourProject</strong> / index.php</p>
</blockquote>
","15007413"
"What is the function __construct used for?","157207","","<p>I have been noticing <code>__construct</code> a lot with classes. I did a little reading and surfing the web, but I couldn't find an explanation I could understand. I am just beginning with OOP.</p>

<p>I was wondering if someone could give me a general idea of what it is, and then a simple example of how it is used with PHP?</p>
","<p><code>__construct</code> was introduced in PHP5 and it is the right way to define your, well, constructors (in PHP4 you used the name of the class for a constructor).
You are not required to define a constructor in your class, but if you wish to pass any parameters on object construction then you need one.</p>

<p>An example could go like this:</p>

<pre><code>class Database {
  protected $userName;
  protected $password;
  protected $dbName;

  public function __construct ( $UserName, $Password, $DbName ) {
    $this-&gt;userName = $UserName;
    $this-&gt;password = $Password;
    $this-&gt;dbName = $DbName;
  }
}

// and you would use this as:
$db = new Database ( 'user_name', 'password', 'database_name' );
</code></pre>

<p>Everything else is explained in the PHP manual: <a href=""http://php.net/manual/en/language.oop5.decon.php"" rel=""noreferrer"">click here</a></p>
","455929"
"PHP add elements to multidimensional array with array_push","157187","","<p>I have a multidimensional array $md_array and I want to add more elements to the sub-arrays recipe_type and cuisine coming from a loop that reads data from a table.</p>

<p>In the loop, I create a new table $newdata for each row:</p>

<pre><code>$newdata =  array (
          'wpseo_title' =&gt; 'test',
          'wpseo_desc' =&gt; 'test',
          'wpseo_metakey' =&gt; 'test'
        );
</code></pre>

<p>and then, using <code>array_push()</code> I need to append the $newdata arrays to the following multidimensional array:</p>

<pre><code>$md_array= array (
     'recipe_type' =&gt; 
      array (
        18 =&gt; 
        array (
          'wpseo_title' =&gt; 'Salads',
          'wpseo_desc' =&gt; 'Hundreads of recipes for Salads',
          'wpseo_metakey' =&gt; ''
        ),
        19 =&gt; 
        array (
          'wpseo_title' =&gt; 'Main dishes',
          'wpseo_desc' =&gt; 'Hundreads of recipes for Main dishes',
          'wpseo_metakey' =&gt; ''
        )
      ),
     'cuisine' =&gt; 
      array (
        22 =&gt; 
        array (
          'wpseo_title' =&gt; 'Italian',
          'wpseo_desc' =&gt; 'Secrets from Sicily in a click',
          'wpseo_metakey' =&gt; ''
        ),
        23 =&gt; 
        array (
          'wpseo_title' =&gt; 'Chinese',
          'wpseo_desc' =&gt; 'Oriental dishes were never this easy to make',
          'wpseo_metakey' =&gt; ''
        ),
        24 =&gt; 
        array (
          'wpseo_title' =&gt; 'Greek',
          'wpseo_desc' =&gt; 'Traditional Greek flavors in easy to make recipies',
          'wpseo_metakey' =&gt; ''
        )
      ) 
    );
</code></pre>

<p>Whats the syntax for adding a new element (array) to the recipe_type array with array_push? I could never get my head around multidimensional arrays and I'm a bit confused.</p>
","<p>if you want to add the data in the increment order inside your associative array you can do this:</p>

<pre><code>$newdata =  array (
      'wpseo_title' =&gt; 'test',
      'wpseo_desc' =&gt; 'test',
      'wpseo_metakey' =&gt; 'test'
    );

// for recipe

$md_array[""recipe_type""][] = $newdata;

//for cuisine

 $md_array[""cuisine""][] = $newdata;
</code></pre>

<p>this will get added to the recipe or cuisine depending on what was the last index.</p>

<p>Array push is usually used in the array when you have sequential index: $arr[0] , $ar[1].. you cannot use it in associative array directly. But since your sub array is had this kind of index you can still use it like this</p>

<pre><code>array_push($md_array[""cuisine""],$newdata);
</code></pre>
","16308305"
"urlencode vs rawurlencode?","157162","","<p>If I want to create a URL using a variable I have two choices to encode the string. <code>urlencode()</code> and <code>rawurlencode()</code>.</p>

<p>What exactly are the differences and which is preferred?</p>
","<p>It will depend on your purpose. If interoperability with other systems is important then it seems rawurlencode is the way to go. The one exception is legacy systems which expect the query string to follow form-encoding style of spaces encoded as + instead of %20 (in which case you need urlencode).</p>

<p><strong>rawurlencode</strong> follows RFC 1738 prior to PHP 5.3.0 and RFC 3986 afterwards (see <a href=""http://us2.php.net/manual/en/function.rawurlencode.php"" rel=""noreferrer"">http://us2.php.net/manual/en/function.rawurlencode.php</a>)</p>

<blockquote>
  <p>Returns a string in which all non-alphanumeric characters except -_.~ have been replaced with a percent (%) sign followed by two hex digits. This is the encoding described in » RFC 3986 for protecting literal characters from being interpreted as special URL delimiters, and for protecting URLs from being mangled by transmission media with character conversions (like some email systems). </p>
</blockquote>

<p>Note on RFC 3986 vs 1738. rawurlencode prior to php 5.3 encoded the tilde character (<code>~</code>) according to RFC 1738. As of PHP 5.3, however, rawurlencode follows RFC 3986 which does not require encoding tilde characters.</p>

<p><strong>urlencode</strong> encodes spaces as plus signs (not as <code>%20</code> as done in rawurlencode)(see <a href=""http://us2.php.net/manual/en/function.urlencode.php"" rel=""noreferrer"">http://us2.php.net/manual/en/function.urlencode.php</a>)</p>

<blockquote>
  <p>Returns a string in which all non-alphanumeric characters except -_. have been replaced with a percent (%) sign followed by two hex digits and spaces encoded as plus (+) signs. It is encoded the same way that the posted data from a WWW form is encoded, that is the same way as in application/x-www-form-urlencoded media type. This differs from the » RFC 3986 encoding (see rawurlencode()) in that for historical reasons, spaces are encoded as plus (+) signs. </p>
</blockquote>

<p>This corresponds to the definition for application/x-www-form-urlencoded in <a href=""http://www.ietf.org/rfc/rfc1866.txt"" rel=""noreferrer"">RFC 1866</a>.</p>

<p><strong>Additional Reading:</strong></p>

<p>You may also want to see the discussion at <a href=""http://bytes.com/groups/php/5624-urlencode-vs-rawurlencode"" rel=""noreferrer"">http://bytes.com/groups/php/5624-urlencode-vs-rawurlencode</a>.</p>

<p>Also, <a href=""http://www.ietf.org/rfc/rfc2396.txt"" rel=""noreferrer"">RFC 2396</a> is worth a look. RFC 2396 defines valid URI syntax. The main part we're interested in is from 3.4 Query Component: </p>

<blockquote>
  <p>Within a query component, the characters <code>"";"", ""/"", ""?"", "":"", ""@"",<br>
      ""&amp;"", ""="", ""+"", "","", and ""$""</code> are reserved.</p>
</blockquote>

<p>As you can see, the <code>+</code> is a reserved character in the query string and thus would need to be encoded as per RFC 3986 (as in rawurlencode).</p>
","996161"
"How to create comma separated list from array in PHP?","157090","","<p>I know how to loop through items of an array using foreach and append a comma, but it's always a pain having to take off the final comma. Is there an easy PHP way of doing it?</p>

<pre><code>$fruit = array('apple', 'banana', 'pear', 'grape');
</code></pre>

<p>Ultimately I want </p>

<pre><code>$result = ""apple, banana, pear, grape""
</code></pre>
","<p>You want to use <a href=""http://us3.php.net/manual/en/function.implode.php"" rel=""noreferrer"">implode</a> for this.</p>

<p>ie:
<code>$commaList = implode(', ', $fruit);</code></p>

<hr>

<p>There is a way to append commas without having a trailing one. You'd want to do this if you have to do some other manipulation at the same time. For example, maybe you want to quote each fruit and then separate them all by commas:</p>

<pre><code>$prefix = $fruitList = '';
foreach ($fruits as $fruit)
{
    $fruitList .= $prefix . '""' . $fruit . '""';
    $prefix = ', ';
}
</code></pre>

<p>Also, if you just do it the ""normal"" way of appending a comma after each item (like it sounds you were doing before), and you need to trim the last one off, just do <code>$list = rtrim($list, ', ')</code>. I see a lot of people unnecessarily mucking around with <code>substr</code> in this situation.</p>
","2435225"
"How to rename uploaded file before saving it into a directory?","156989","","<p>Below is the code I used in order to upload files into a directory. It works fine.
My main question is:</p>

<p><strong>move_uploaded_file()</strong> is the one that saves the uploaded file into the directory, and it is also my guess that <strong>move_uploaded_file()</strong> is the one that sets the name for it.</p>

<p>How could I change the name of my file to a random number?</p>

<p>I have tried to do so below:</p>

<pre><code>      $allowedExts = array(""gif"", ""jpeg"", ""jpg"", ""png"");
      $temp = explode(""."", $_FILES[""file""][""name""]);
      $extension = end($temp);
      if ((($_FILES[""file""][""type""] == ""image/gif"")
      || ($_FILES[""file""][""type""] == ""image/jpeg"")
      || ($_FILES[""file""][""type""] == ""image/jpg"")
      || ($_FILES[""file""][""type""] == ""image/pjpeg"")
      || ($_FILES[""file""][""type""] == ""image/x-png"")
      || ($_FILES[""file""][""type""] == ""image/png""))
      &amp;&amp; ($_FILES[""file""][""size""] &lt; 100000)
      &amp;&amp; in_array($extension, $allowedExts))
        {
        if ($_FILES[""file""][""error""] &gt; 0)
          {
          echo ""Return Code: "" . $_FILES[""file""][""error""] . ""&lt;br&gt;"";
          }
        else 
          {

            $fileName = $temp[0].""."".$temp[1];
            $temp[0] = rand(0, 3000); //Set to random number
            $fileName;

          if (file_exists(""../img/imageDirectory/"" . $_FILES[""file""][""name""]))
            {
            echo $_FILES[""file""][""name""] . "" already exists. "";
            }
          else
            {
            move_uploaded_file($_FILES[""file""][""tmp_name""], ""../img/imageDirectory/"" . $_FILES[""file""][""name""]);
            echo ""Stored in: "" . ""../img/imageDirectory/"" . $_FILES[""file""][""name""];
            }
          }
        }
      else
        {
        echo ""Invalid file"";
        }
</code></pre>

<p>I tried changing variables such as the <strong>$_FILES[""file""][""name""]</strong> and replacing it with the <strong>$fileName;</strong> variable so that the new name can be stored.</p>
","<p>You can simply change the name of the file by changing the name of the file in the second parameter of <code>move_uploaded_file</code>.</p>

<p>Instead of</p>

<pre><code>move_uploaded_file($_FILES[""file""][""tmp_name""], ""../img/imageDirectory/"" . $_FILES[""file""][""name""]);
</code></pre>

<p>Use</p>

<pre><code>$temp = explode(""."", $_FILES[""file""][""name""]);
$newfilename = round(microtime(true)) . '.' . end($temp);
move_uploaded_file($_FILES[""file""][""tmp_name""], ""../img/imageDirectory/"" . $newfilename);
</code></pre>

<p>Changed to reflect your question, will product a random number based on the current time and append the extension from the originally uploaded file. </p>
","18705701"
"A non well formed numeric value encountered","156872","","<p>I have a form that passes two dates (start and finish) to a PHP script that will add those to a DB. I am having problems validating this. I keep getting the following errors </p>

<p><strong>A non well formed numeric value encountered</strong></p>

<p>This is when I use the following </p>

<pre><code>date(""d"",$_GET['start_date']);
</code></pre>

<p>But when I use the <strong>strtotime()</strong> function as advised by many sites I get a unix timestamp date of 1/1/1970.
Any ideas how I can get the correct date?</p>
","<p>It could be because you are passing string as a second argument to the date function. Try <a href=""http://php.net/manual/en/function.strtotime.php"">strtotime</a>:</p>

<pre><code>date(""d"",strtotime($_GET['start_date']));
</code></pre>
","12709485"
"How do I Sort a Multidimensional Array in PHP","156490","","<p>I have CSV data loaded into a multidimensional array. In this way each ""row"" is a record and each ""column"" contains the same type of data.  I am using the function below to load my CSV file.</p>

<pre><code>function f_parse_csv($file, $longest, $delimiter)
{
  $mdarray = array();
  $file    = fopen($file, ""r"");
  while ($line = fgetcsv($file, $longest, $delimiter))
  {
    array_push($mdarray, $line);
  }
  fclose($file);
  return $mdarray;
}
</code></pre>

<p>I need to be able to specify a column to sort so that it rearranges the rows.  One of the columns contains date information in the format of <code>Y-m-d H:i:s</code> and I would like to be able to sort with the most recent date being the first row.</p>
","<p>You can use <a href=""http://php.net/manual/en/function.array-multisort.php"" rel=""noreferrer"">array_multisort()</a></p>

<p>Try something like this:</p>

<pre><code>foreach ($mdarray as $key =&gt; $row) {
    // replace 0 with the field's index/key
    $dates[$key]  = $row[0];
}

array_multisort($dates, SORT_DESC, $mdarray);
</code></pre>

<p>For PHP >= 5.5.0 just extract the column to sort by.  No need for the loop:</p>

<pre><code>array_multisort(array_column($mdarray, 0), SORT_DESC, $mdarray);
</code></pre>
","96870"
"intl extension: installing php_intl.dll","156321","","<p>I'm trying to locate <code>php_intl.dll</code> and install it.</p>

<p>Does anyone have any tips?</p>
","<p>The packages at <a href=""http://windows.php.net/download/"" rel=""noreferrer"">http://windows.php.net/download/</a> all contain the php_intl.dll which is located in the subdir ext/.<br>
All you have to do is to check if your <a href=""http://uk.php.net/manual/en/ini.core.php#ini.extension-dir"" rel=""noreferrer"">extension_dir</a> points to the right directory and add (or uncomment) the <a href=""http://uk.php.net/manual/en/ini.core.php#ini.extension"" rel=""noreferrer"">extension</a>=php_intl.dll directive.</p>
","1451770"
"Headers and client library minor version mismatch","156226","","<p>In PHP I'm getting the following warning whenever I try to connect to a database (via <code>mysql_connect</code>)</p>

<blockquote>
  <p>Warning: mysql_connect(): Headers and client library minor version mismatch. Headers:50162 Library:50524</p>
</blockquote>

<p>In my <code>php -i</code> output I have the following values listed under mysqli</p>

<blockquote>
  <p>Client API library version => 5.5.24</p>
  
  <p>Client API header version => 5.1.62</p>
</blockquote>

<p>I've tried updating php5-mysql <em>and</em> php but I'm already at the latest version of both of them. How do I go about updating the header version so I stop seeing this warning?</p>

<p><strong>EDIT</strong></p>

<p>My MySQL files should all be updated to be the latest version:</p>

<pre><code>$ apt-get install mysql.*5.5
. . .
mysql-client-5.5 is already the newest version.
mysql-server-core-5.5 is already the newest version.
mysql-server-5.5 is already the newest version.
mysql-testsuite-5.5 is already the newest version.
mysql-source-5.5 is already the newest version.
</code></pre>

<p>Removing old versions</p>

<pre><code>$ apt-get remove mysql.*5.1
. . .
Package handlersocket-mysql-5.1 is not installed, so not removed
Package mysql-cluster-client-5.1 is not installed, so not removed
Package mysql-cluster-server-5.1 is not installed, so not removed
Package mysql-client-5.1 is not installed, so not removed
Package mysql-client-core-5.1 is not installed, so not removed
Package mysql-server-5.1 is not installed, so not removed
Package mysql-server-core-5.1 is not installed, so not removed
Package mysql-source-5.1 is not installed, so not removed
</code></pre>
","<p>Your PHP was compiled with MySQL 5.1 but now it is linking a mysql library of 5.5.X family.
You have to upgrade PHP to a version compiled with MySQL 5.5 or revert back mysql client libraries to 5.1.x.</p>
","10768766"
"Best XML Parser for PHP","156087","","<p>I have used the XML Parser before, and even though it worked OK, I wasn't happy with it in general, it felt like I was using workarounds for things that should be basic functionality.</p>

<p>I recently saw SimpleXML but I haven't tried it yet. Is it any simpler? What advantages and disadvantages do both have? Any other parsers you've used?</p>
","<p>I would have to say <a href=""http://php.net/manual/simplexml.examples.php"" rel=""noreferrer"">SimpleXML</a> takes the cake because it is firstly an extension, written in C, and is very fast.  But second, the parsed document takes the form of a PHP object.  So you can ""query"" like <code>$root-&gt;myElement</code>.</p>
","188445"
"PHP Get Site URL Protocol - http vs https","156021","","<p>I've written a little function to establish the current site url protocol but I don't have SSL and don't know how to test if it works under https. <strong>Can you tell me if this is correct?</strong></p>

<pre><code>function siteURL()
{
    $protocol = (!empty($_SERVER['HTTPS']) &amp;&amp; $_SERVER['HTTPS'] !== 'off' || $_SERVER['SERVER_PORT'] == 443) ? ""https://"" : ""http://"";
    $domainName = $_SERVER['HTTP_HOST'].'/';
    return $protocol.$domainName;
}
define( 'SITE_URL', siteURL() );
</code></pre>

<p><strong>Is it necessary to do it like above or can I just do it like?:</strong></p>

<pre><code>function siteURL()
{
    $protocol = 'http://';
    $domainName = $_SERVER['HTTP_HOST'].'/'
    return $protocol.$domainName;
}
define( 'SITE_URL', siteURL() );
</code></pre>

<p>Under SSL, doesn't the server automatically convert the url to https even if the anchor tag url is using http? Is it necessary to check for the protocol?</p>

<p>Thank you!</p>
","<p>It is not automatic.  Your top function looks ok.</p>
","4503213"
"correct PHP headers for pdf file download","155893","","<p>I'm really struggling to get my application to open a pdf when the user clicks on a link.</p>

<p>So far the anchor tag redirects to a page which sends headers that are:</p>

<pre><code>$filename='./pdf/jobs/pdffile.pdf;

$url_download = BASE_URL . RELATIVE_PATH . $filename;


header(""Content-type:application/pdf"");



header(""Content-Disposition:inline;filename='$filename"");

readfile(""downloaded.pdf"");
</code></pre>

<p>this doesn't seem to work, has anybody successfully sorted this problem in the past?</p>
","<p>Example 2 on <a href=""http://www.w3schools.com/php/func_http_header.asp"" rel=""noreferrer"" title=""w3schools"">w3schools</a> shows what you are trying to achieve.</p>

<blockquote>
<pre><code>&lt;?php
header(""Content-type:application/pdf"");

// It will be called downloaded.pdf
header(""Content-Disposition:attachment;filename='downloaded.pdf'"");

// The PDF source is in original.pdf
readfile(""original.pdf"");
?&gt;

&lt;html&gt;
&lt;body&gt;

...
...
</code></pre>
</blockquote>

<p>Also remember that,</p>

<blockquote>
  <p>It is important to notice that header() must be called before any
  actual output is sent (In PHP 4 and later, you can use output
  buffering to solve this problem)</p>
</blockquote>
","20080402"
"Convert the first element of an array to a string in PHP","155862","","<p>I have a PHP array and want to convert it to a string. </p>

<p>I know I can use <code>join</code> or <code>implode</code>, but in my case array has only one item. Why do I have to use combine values in an array with only one item?</p>

<p>This array is the output of my PHP function which returns an array:</p>

<pre><code>Array(18 =&gt; 'Something');
</code></pre>

<p>How do I convert this to a string?</p>
","<blockquote>
  <p>Is there any other way to convert that array into string ?</p>
</blockquote>

<p>You don't want to convert the array to a string, you want to get the value of the array's sole element, if I read it correctly.</p>

<pre><code>&lt;?php
  $foo = array( 18 =&gt; 'Something' );
  $value = array_shift( $foo );
  echo $value; // 'Something'.

?&gt;
</code></pre>

<p>Using array_shift you don't have to worry about the index.</p>

<p><em>EDIT</em>: Mind you, array_shift is not the only function that will return a single value. array_pop( ), current( ), end( ), reset( ), they will all return that one single element. All of the posted solutions work. Using array shift though, you can be sure that you'll only ever get the <em>first</em> value of the array, even when there are multiple.</p>
","6262225"
"How do you enable mod_rewrite on any OS?","155634","","<p>If I understand correctly, I need to put something in <code>httpd.config</code> to enable mod_rewrite. If this is true, what do I need to put in <code>httpd.conf</code> or <code>apache.conf</code>? Please be OS specific.</p>
","<p>Nope, <code>mod_rewrite</code> is an Apache module and has nothing to do with PHP.</p>

<p>To activate the module, the following line in <code>httpd.conf</code> needs to be active:</p>

<pre><code>LoadModule rewrite_module modules/mod_rewrite.so
</code></pre>

<p>to see whether it is already active, try putting a <code>.htaccess</code> file into a web directory containing the line</p>

<pre><code>RewriteEngine on
</code></pre>

<p>if this works without throwing a 500 internal server error, and the <code>.htaccess</code> file gets parsed, URL rewriting works.</p>
","3131259"
"Convert this string to datetime","155567","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/4843423/php-convert-uncommon-date-format-to-timestamp-in-most-efficient-manner-possible"">PHP: Convert uncommon date format to timestamp in most efficient manner possible?</a>  </p>
</blockquote>



<p>How to convert this string to datetime format?
06/Oct/2011:19:00:02</p>

<p>I tried this but it doesn't work.</p>

<pre><code>$s = '06/Oct/2011:19:00:02';

$date = strtotime($s);
echo date('d/M/Y:H:i:s', $date);
</code></pre>
","<p>Use <a href=""http://de2.php.net/manual/de/datetime.createfromformat.php"" rel=""nofollow noreferrer"">DateTime::createFromFormat</a></p>

<pre><code>$date = date_create_from_format('d/m/Y:H:i:s', $s);
$date-&gt;getTimestamp();
</code></pre>
","8063137"
"How to post JSON to PHP with curl","155419","","<p>I may be way off base, but I've been trying all afternoon to run <a href=""http://www.recessframework.org/page/restful-php-framework"" rel=""noreferrer"">the curl post command</a> in this recess PHP framework tutorial.  What I don't understand is how is PHP supposed to interpret my POST, it always comes up as an empty array. </p>

<pre><code>curl -i -X POST -d '{""screencast"":{""subject"":""tools""}}'  \
      http://localhost:3570/index.php/trainingServer/screencast.json
</code></pre>

<p>(The slash in there is just to make me not look like an idiot, but I executed this from windows using PHP 5.2, also tried on a Linux server, same version with Linux curl) </p>

<p>There must be something I'm missing because it seems pretty straightforward, the post just isn't be interpreted right, if it was, everything would work great. </p>

<p>This is what I get back:</p>

<pre>
HTTP/1.1 409 Conflict
Date: Fri, 01 May 2009 22:03:00 GMT
Server: Apache/2.2.8 (Win32) PHP/5.2.6
X-Powered-By: PHP/5.2.6
Transfer-Encoding: chunked
Content-Type: text/html; charset=iso-8859-1

{""screencast"":{""id"":null,""subject"":null,""body"":null,
         ""dataUrl"":null,""dataMedium"":null,""createdOn"":null,""author"":null}}
</pre>
","<p>Jordans analysis of why the $_POST-array isn't populated is correct. However, you can use</p>

<pre><code>$data = file_get_contents(""php://input"");
</code></pre>

<p>to just retrieve the http body and handle it yourself. See <a href=""http://se2.php.net/wrappers.php"" rel=""noreferrer"">PHP input/output streams</a>.</p>

<p>From a protocol perspective this is actually more correct, since you're not really processing http multipart form data anyway. Also, use application/json as content-type when posting your request.</p>
","813512"
"Twig for loop and array with key","155273","","<p>I use Twig and I have an array with key like this :</p>

<pre><code>array[1] = ""alpha""
array[2] = ""bravo""
array[3] = ""charlie""
array[8] = ""delta""
array[9] = ""echo""
</code></pre>

<p>And I would like to get the key <code>(1,2,3,8,9)</code> and the content <code>(alpha, bravo, charlie, delta, echo)</code> in a loop to get all value of this array.</p>

<p>How I can do this ?</p>

<p>Thank you</p>
","<p>I found the answer : </p>

<pre><code>{% for key,value in array_path %}
    Key : {{ key }}
    Value : {{ value }}
{% endfor %}
</code></pre>
","10299532"
"PHP - warning - Undefined property: stdClass - fix?","155212","","<p>I get this warning in my error logs and wanted to know how to correct this issues in my code.</p>

<p>Warning:
PHP Notice:  Undefined property:  stdClass::$records in script.php on line 440</p>

<p>Some Code:</p>

<pre><code>// Parse object to get account id's
// The response doesn't have the records attribute sometimes.
$role_arr = getRole($response-&gt;records);  // Line 440 
</code></pre>

<p>Response if records exists</p>

<pre><code>stdClass Object
(
    [done] =&gt; 1
    [queryLocator] =&gt;
    [records] =&gt; Array
        (
            [0] =&gt; stdClass Object
                (
                    [type] =&gt; User
                    [Id] =&gt;
                    [any] =&gt; stdClass Object
                        (
                            [type] =&gt; My Role
                            [Id] =&gt;
                            [any] =&gt; &lt;sf:Name&gt;My Name&lt;/sf:Name&gt;
                        )

                )

        )

    [size] =&gt; 1
)
</code></pre>

<p>Response if records does not exist</p>

<pre><code>stdClass Object
(
    [done] =&gt; 1
    [queryLocator] =&gt;
    [size] =&gt; 0
)
</code></pre>

<p>I was thinking something like array_key_exists() functionality but for objects, anything? or am I going about this the wrong way?</p>
","<pre><code>if(isset($response-&gt;records))
    print ""we've got records!"";
</code></pre>
","2471692"
"Sanitizing strings to make them URL and filename safe?","154949","","<p>I am trying to come up with a function that does a good job of sanitizing certain strings so that they are safe to use in the URL (like a post slug) and also safe to use as file names. For example, when someone uploads a file I want to make sure that I remove all dangerous characters from the name.</p>

<p>So far I have come up with the following function which I hope solves this problem and allows foreign UTF-8 data also.</p>

<pre><code>/**
 * Convert a string to the file/URL safe ""slug"" form
 *
 * @param string $string the string to clean
 * @param bool $is_filename TRUE will allow additional filename characters
 * @return string
 */
function sanitize($string = '', $is_filename = FALSE)
{
 // Replace all weird characters with dashes
 $string = preg_replace('/[^\w\-'. ($is_filename ? '~_\.' : ''). ']+/u', '-', $string);

 // Only allow one dash separator at a time (and make string lowercase)
 return mb_strtolower(preg_replace('/--+/u', '-', $string), 'UTF-8');
}
</code></pre>

<p><strong>Does anyone have any tricky sample data I can run against this - or know of a better way to safeguard our apps from bad names?</strong></p>

<p><em>$is-filename allows some additional characters like temp vim files</em></p>

<p><em>update: removed the star character since I could not think of a valid use</em></p>
","<p>Some observations on your solution:</p>

<ol>
<li>'u' at the end of your pattern means that the <strong>pattern</strong>, and not the text it's matching will be interpreted as UTF-8 (I presume you assumed the latter?). </li>
<li>\w matches the underscore character. You specifically include it for files which leads to the assumption that you don't want them in URLs, but in the code you have URLs will be permitted to include an underscore.</li>
<li>The inclusion of ""foreign UTF-8"" seems to be locale-dependent. It's not clear whether this is the locale of the server or client. From the PHP docs:</li>
</ol>

<blockquote>
  <blockquote>
    <p>A ""word"" character is any letter or digit or the underscore character, that is, any character which can be part of a Perl ""word"". The definition of letters and digits is controlled by PCRE's character tables, and may vary if locale-specific matching is taking place. For example, in the ""fr"" (French) locale, some character codes greater than 128 are used for accented letters, and these are matched by \w.</p>
  </blockquote>
</blockquote>

<h3>Creating the slug</h3>

<p>You probably shouldn't include accented etc. characters in your post slug since, technically, they should be percent encoded (per URL encoding rules) so you'll have ugly looking URLs.</p>

<p>So, if I were you, after lowercasing, I'd convert any 'special' characters to their equivalent  (e.g. é -> e) and replace non [a-z] characters with '-', limiting to runs of a single '-' as you've done. There's an implementation of converting special characters here: <a href=""https://web.archive.org/web/20130208144021/http://neo22s.com/slug"" rel=""noreferrer"">https://web.archive.org/web/20130208144021/http://neo22s.com/slug</a></p>

<h3>Sanitization in general</h3>

<p>OWASP have a PHP implementation of their Enterprise Security API which among other things includes methods for safe encoding and decoding input and output in your application. </p>

<p>The Encoder interface provides:</p>

<pre><code>canonicalize (string $input, [bool $strict = true])
decodeFromBase64 (string $input)
decodeFromURL (string $input)
encodeForBase64 (string $input, [bool $wrap = false])
encodeForCSS (string $input)
encodeForHTML (string $input)
encodeForHTMLAttribute (string $input)
encodeForJavaScript (string $input)
encodeForOS (Codec $codec, string $input)
encodeForSQL (Codec $codec, string $input)
encodeForURL (string $input)
encodeForVBScript (string $input)
encodeForXML (string $input)
encodeForXMLAttribute (string $input)
encodeForXPath (string $input)
</code></pre>

<p><a href=""https://github.com/OWASP/PHP-ESAPI"" rel=""noreferrer"">https://github.com/OWASP/PHP-ESAPI</a>
<a href=""https://www.owasp.org/index.php/Category:OWASP_Enterprise_Security_API"" rel=""noreferrer"">https://www.owasp.org/index.php/Category:OWASP_Enterprise_Security_API</a></p>
","2695530"
"Has Facebook sharer.php changed to no longer accept detailed parameters?","154936","","<p>We have been opening a sharing popup (via window.open) with the URL like</p>

<pre><code>https://www.facebook.com/sharer/sharer.php?s=100&amp;p[title]=EXAMPLE&amp;p[summary]=EXAMPLE&amp;p[url]=EXAMPLE&amp;p[images][0]=EXAMPLE 
</code></pre>

<p>and until some unknown point in the last month or so everything was fine.</p>

<p>What is happening now is; the popup dialog appears and correctly includes the Title, Description, Image and URL provided by the query string parameters, but when the post is submitted, the resulting wall post on Facebook is missing the Title, Description and Image, though it still links to the correct URL.</p>

<p>Does anyone know if there have been recent changes which could have suddenly stopped this from working?</p>

<p>Pre-empting some common responses:</p>

<ul>
<li><p>""sharer.php URL was deprecated"" - usage seemed to continue and it
seemed the consensus was that it was largely considered to be
sticking around - I haven't seen any specific indication that it
should have suddenly ceased working - might have missed something</p></li>
<li><p>""Use JavaScript SDK/these OG meta tags"" - not possible in my specific
situation - just trust me ... I can explain if you REALLY want but
it's really not relevant.</p></li>
<li><p>""Use the feed dialog"" - not suitable due to lack of support for
posting with attachments on FB pages</p></li>
</ul>
","<h2>Facebook no longer supports custom parameters in <code>sharer.php</code></h2>

<blockquote>
  <p>The sharer will no longer accept custom parameters and facebook will
  pull the information that is being displayed in the preview the same
  way that it would appear on facebook as a post from the url OG meta
  tags.</p>
</blockquote>

<p><a href=""https://developers.facebook.com/docs/sharing/reference/feed-dialog"">Use dialog/feeds instead of sharer.php</a></p>

<pre><code>https://www.facebook.com/dialog/feed?
  app_id=145634995501895
  &amp;display=popup&amp;caption=An%20example%20caption 
  &amp;link=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2Fdialogs%2F
  &amp;redirect_uri=https://developers.facebook.com/tools/explorer
</code></pre>

<p><a href=""https://developers.facebook.com/x/bugs/357750474364812/"">Official answer from fb team</a></p>
","22969530"
"Easiest way to activate PHP and MySQL on Mac OS 10.6 (Snow Leopard), 10.7 (Lion), 10.8 (Mountain Lion)?","154672","","<p>What is the easiest way to activate PHP and MySQL on Mac OS 10.6 (Snow Leopard), 10.7 (Lion), 10.8 (Mountain Lion)?</p>

<p>I'd prefer to use any bundled versions before resorting to downloading from the PHP or MySQL websites. That also rules out MAMP and similar.</p>

<p>I'm comfortable at the command line in Terminal.</p>
","<p>Open a good text editor (I'd recommend TextMate, but the free TextWrangler or vi or nano will do too), and open:</p>

<pre><code>/etc/apache2/httpd.conf
</code></pre>

<p>Find the line: </p>

<pre><code>""#LoadModule php5_module        libexec/apache2/libphp5.so""
</code></pre>

<p>And uncomment it (remove the #).</p>

<p>Download and install the latest MySQL version from mysql.com. Choose the x86_64 version for Intel (unless your Intel Mac is the original Macbook Pro or Macbook, which are not 64 bit chips. In those cases, use the 32 bit x86 version).</p>

<p>Install all the MySQL components. Using the pref pane, start MySQL.</p>

<p>In the Sharing System Pref, turn on (or if it was already on, turn off/on) Web Sharing.</p>

<p>You should now have Apache/PHP/MySQL running.</p>

<p>In 10.4 and 10.5 it was necessary to modify the php.ini file to point to the correct location of mysql.sock. There are reports that this is fixed in 10.6, but that doesn't appear to be the case for all of us, given some of the comments below.</p>
","1301328"
"Are PDO prepared statements sufficient to prevent SQL injection?","154635","","<p>Let's say I have code like this:</p>

<pre><code>$dbh = new PDO(""blahblah"");

$stmt = $dbh-&gt;prepare('SELECT * FROM users where username = :username');
$stmt-&gt;execute( array(':username' =&gt; $_REQUEST['username']) );
</code></pre>

<p>The PDO documentation says:</p>

<blockquote>
  <p>The parameters to prepared statements don't need to be quoted; the driver handles it for you.</p>
</blockquote>

<p><strong>Is that truly all I need to do to avoid SQL injections?  Is it really that easy?</strong></p>

<p>You can assume MySQL if it makes a difference.  Also, I'm really only curious about the use of prepared statements against SQL injection.  In this context, I don't care about XSS or other possible vulnerabilities.</p>
","<p>Prepared statements / parameterized queries are generally sufficient to prevent <em>1st order</em> injection on that statement<sup>*</sup>.  If you use un-checked dynamic sql anywhere else in your application you are still vulnerable to <em>2nd order</em> injection.</p>

<p>2nd order injection means data has been cycled through the database once before being included in a query, and is much harder to pull off.  AFAIK, you almost never see real engineered 2nd order attacks, as it is usually easier for attackers to social-engineer their way in, but you sometimes have 2nd order bugs crop up because of extra benign <code>'</code> characters or similar.</p>

<p>You can accomplish a 2nd order injection attack when you can cause a value to be stored in a database that is later used as a literal in a query. As an example, let's say you enter the following information as your new username when creating an account on a web site (assuming MySQL DB for this question):</p>

<pre><code>' + (SELECT UserName + '_' + Password FROM Users LIMIT 1) + '
</code></pre>

<p>If there are no other restrictions on the username, a prepared statement would still make sure that the above embedded query doesn't execute at the time of insert, and store the value correctly in the database. However, imagine that later the application retrieves your username from the database, and uses string concatenation to include that value a new query. You might get to see someone else's password. Since the first few names in users table tend to be admins, you may have also just given away the farm. (Also note: this is one more reason not to store passwords in plain text!)</p>

<p>We see, then, that prepared statements are enough for a single query, but by themselves they are <strong>not</strong> sufficient to protect against sql injection attacks throughout an entire application, because they lack a mechanism to enforce that all access to a database within the application uses safe code. However, used as part of good application design &mdash; which may include practices such as code review or static analysis, or use of an ORM, data layer, or service layer that limits dynamic sql &mdash; <em><strong>prepared statements</em> are <em>the primary tool for solving the Sql Injection problem.</strong></em> If you follow good application design principles, such that your data access is separated from the rest of your program, it becomes easy to enforce or audit that every query correctly uses parameterization. In this case, sql injection (both first and second order) is completely prevented. </p>

<hr>

<p><sub><sup>*</sup>It turns out that MySql/PHP are (okay, were) just dumb about handling parameters when wide characters are involved, and there is still a <em>rare</em> case outlined in the <a href=""https://stackoverflow.com/a/12202218/3043"">other highly-voted answer here</a> that can allow injection to slip through a parameterized query.</sub></p>
","134138"
"PHP Fatal error: Call to undefined function mssql_connect()","153860","","<p>I've never used php before and am trying to connect to a SQL Server 2008 instance on a Windows machine running IIS7 and PHP5.3.</p>

<p>I have downloaded and installed <code>SQLSRV30.EXE</code> from <a href=""http://www.microsoft.com/download/en/details.aspx?id=20098"">here</a> in <code>C:\Program Files (x86)\PHP\ext</code> added this to <code>C:\Program Files (x86)\PHP\php.ini</code>:</p>

<pre><code>extension=php_sqlsrv_53_nts.dll
</code></pre>

<p>Then restarted the entire server. I still get fatal errors in my log file saying:</p>

<pre><code>PHP Fatal error:  Call to undefined function mssql_connect()
</code></pre>

<p>What do I need to do to connect to Microsoft SQL Server 2008 from PHP 5.3 running on IIS7/Windows Server 2008? I'm sure it's something really dumb that I'm missing...</p>

<p><strong>FULL PHPINFO --></strong> <a href=""http://demo.mandibleweb.com/zapified/hello.php"">http://demo.mandibleweb.com/zapified/hello.php</a></p>

<p>phpinfo(): </p>

<pre><code>PHP Version 5.3.10





System 

Windows NT MWD001 6.1 build 7601 (Windows Server 2008 R2 Standard Edition Service Pack 1) i586 



Build Date 

Feb 2 2012 20:10:58 



Compiler 

MSVC9 (Visual C++ 2008) 



Architecture 

x86 



Configure Command 

cscript /nologo configure.js ""--enable-snapshot-build"" ""--enable-debug-pack"" ""--disable-zts"" ""--disable-isapi"" ""--disable-nsapi"" ""--without-mssql"" ""--without-pdo-mssql"" ""--without-pi3web"" ""--with-pdo-oci=C:\php-sdk\oracle\instantclient10\sdk,shared"" ""--with-oci8=C:\php-sdk\oracle\instantclient10\sdk,shared"" ""--with-oci8-11g=C:\php-sdk\oracle\instantclient11\sdk,shared"" ""--with-enchant=shared"" ""--enable-object-out-dir=../obj/"" ""--enable-com-dotnet"" ""--with-mcrypt=static"" ""--disable-static-analyze"" 



Server API 

CGI/FastCGI 



Virtual Directory Support 

disabled 



Configuration File (php.ini) Path 

C:\Windows 



Loaded Configuration File 

C:\Program Files (x86)\PHP\php.ini 
</code></pre>
","<p>I have just tried to install that extension on my dev server.</p>

<p>First, make sure that the extension is correctly enabled. Your <code>phpinfo()</code> output doesn't seem complete.</p>

<p>If it is indeed installed properly, your <code>phpinfo()</code> should have a section that looks like this:
<img src=""https://i.stack.imgur.com/l62KZ.png"" alt=""enter image description here""></p>

<p>If you do not get that section in your <code>phpinfo()</code>. Make sure that you are using the right version. There are both non-thread-safe and thread-safe versions of the extension.</p>

<p>Finally, check your <code>extension_dir</code> setting. By default it's this: <code>extension_dir = ""ext""</code>, for most of the time it works fine, but if it doesn't try: <code>extension_dir = ""C:\PHP\ext""</code>.</p>

<p>===========================================================================</p>

<p><strong>EDIT given new info:</strong></p>

<p>You are using the wrong function. <code>mssql_connect()</code> is part of the <a href=""http://www.php.net/manual/en/book.mssql.php"">Mssql</a> extension. You are using microsoft's extension, so use <code>sqlsrv_connect()</code>, for the API for the microsoft driver, look at <code>SQLSRV_Help.chm</code> which should be extracted to your <code>ext</code> directory when you extracted the extension.</p>
","9986908"
"PHP: How to remove all non printable characters in a string?","153621","","<p>I imagine I need to remove chars 0-31 and 127,</p>

<p>Is there a function or piece of code to do this efficiently.</p>
","<h2>7 bit ASCII?</h2>

<p>If your Tardis just landed in 1963, and you just want the 7 bit printable ASCII chars, you can rip out everything from 0-31 and 127-255 with this:</p>

<pre><code>$string = preg_replace('/[\x00-\x1F\x7F-\xFF]/', '', $string);
</code></pre>

<p>It matches anything in range 0-31, 127-255 and removes it. </p>

<h2>8 bit extended ASCII?</h2>

<p>You fell into a Hot Tub Time Machine, and you're back in the eighties. 
If you've got some form of 8 bit ASCII, then you might want to keep the chars in range 128-255. An easy adjustment - just look for 0-31 and 127</p>

<pre><code>$string = preg_replace('/[\x00-\x1F\x7F]/', '', $string);
</code></pre>

<h2>UTF-8?</h2>

<p>Ah, welcome back to the 21st century. If you have a UTF-8 encoded string, then the <code>/u</code> <a href=""http://php.net/manual/en/reference.pcre.pattern.modifiers.php"" rel=""noreferrer"">modifier</a> can be used on the regex</p>

<pre><code>$string = preg_replace('/[\x00-\x1F\x7F]/u', '', $string);
</code></pre>

<p>This just removes 0-31 and 127. This works in ASCII and UTF-8 because both share the <a href=""http://www.fileformat.info/info/charset/UTF-8/list.htm"" rel=""noreferrer"">same control set range</a> (as noted by mgutt below). Strictly speaking, this would work without the <code>/u</code> modifier. But it makes life easier if you want to remove other chars...</p>

<p>If you're dealing with Unicode, there are <a href=""https://stackoverflow.com/questions/3770117/what-is-the-range-of-unicode-printable-characters"">potentially many non-printing elements</a>, but let's consider a simple one: <a href=""https://unicode-table.com/en/00A0/"" rel=""noreferrer"">NO-BREAK SPACE (U+00A0)</a></p>

<p>In a UTF-8 string, this would be encoded as <code>0xC2A0</code>. You could look for and remove that specific sequence, but with the <code>/u</code> modifier in place, you can simply add <code>\xA0</code> to the character class:</p>

<pre><code>$string = preg_replace('/[\x00-\x1F\x7F\xA0]/u', '', $string);
</code></pre>

<h2>Addendum: What about str_replace?</h2>

<p>preg_replace is pretty efficient, but if you're doing this operation a lot, you could build an array of chars you want to remove, and use str_replace as noted by mgutt below, e.g.</p>

<pre><code>//build an array we can re-use across several operations
$badchar=array(
    // control characters
    chr(0), chr(1), chr(2), chr(3), chr(4), chr(5), chr(6), chr(7), chr(8), chr(9), chr(10),
    chr(11), chr(12), chr(13), chr(14), chr(15), chr(16), chr(17), chr(18), chr(19), chr(20),
    chr(21), chr(22), chr(23), chr(24), chr(25), chr(26), chr(27), chr(28), chr(29), chr(30),
    chr(31),
    // non-printing characters
    chr(127)
);

//replace the unwanted chars
$str2 = str_replace($badchar, '', $str);
</code></pre>

<p>Intuitively, this seems like it would be fast, but it's not always the case, you should definitely benchmark to see if it saves you anything. I did some benchmarks across a variety string lengths with random data, and this pattern emerged using php 7.0.12</p>

<pre><code>     2 chars str_replace     5.3439ms preg_replace     2.9919ms preg_replace is 44.01% faster
     4 chars str_replace     6.0701ms preg_replace     1.4119ms preg_replace is 76.74% faster
     8 chars str_replace     5.8119ms preg_replace     2.0721ms preg_replace is 64.35% faster
    16 chars str_replace     6.0401ms preg_replace     2.1980ms preg_replace is 63.61% faster
    32 chars str_replace     6.0320ms preg_replace     2.6770ms preg_replace is 55.62% faster
    64 chars str_replace     7.4198ms preg_replace     4.4160ms preg_replace is 40.48% faster
   128 chars str_replace    12.7239ms preg_replace     7.5412ms preg_replace is 40.73% faster
   256 chars str_replace    19.8820ms preg_replace    17.1330ms preg_replace is 13.83% faster
   512 chars str_replace    34.3399ms preg_replace    34.0221ms preg_replace is  0.93% faster
  1024 chars str_replace    57.1141ms preg_replace    67.0300ms str_replace  is 14.79% faster
  2048 chars str_replace    94.7111ms preg_replace   123.3189ms str_replace  is 23.20% faster
  4096 chars str_replace   227.7029ms preg_replace   258.3771ms str_replace  is 11.87% faster
  8192 chars str_replace   506.3410ms preg_replace   555.6269ms str_replace  is  8.87% faster
 16384 chars str_replace  1116.8811ms preg_replace  1098.0589ms preg_replace is  1.69% faster
 32768 chars str_replace  2299.3128ms preg_replace  2222.8632ms preg_replace is  3.32% faster
</code></pre>

<p>The timings themselves are for 10000 iterations, but what's more interesting is the relative differences. Up to 512 chars, I was seeing preg_replace alway win. In the 1-8kb range, str_replace had a marginal edge. </p>

<p>I thought it was interesting result, so including it here. <em>The important thing is not to take this result and use it to decide which method to use, but to benchmark against your own data and then decide.</em></p>
","1176923"
"Accurate way to measure execution times of php scripts","153090","","<p>I want to know how many milliseconds a PHP for-loop takes to execute. </p>

<p>I know the structure of a generic algorithm, but no idea how to implement it in PHP:</p>

<pre><code>Begin
init1 = timer(); // where timer() is the amount of milliseconds from midnight
the loop begin
some code
the loop end
total = timer() - init1;
End
</code></pre>
","<p>You can use the <a href=""http://php.net/microtime"" rel=""noreferrer""><code>microtime</code></a> function for this. From <a href=""http://php.net/microtime"" rel=""noreferrer"">the documentation</a>:</p>

<blockquote>
  <p><code>microtime</code> — Return current Unix timestamp with microseconds</p>
  
  <hr>
  
  <p>If <code>get_as_float</code> is set to <code>TRUE</code>, then <code>microtime()</code> returns a float, which represents the current time in seconds since the Unix epoch accurate to the nearest microsecond.</p>
</blockquote>

<p>Example usage:</p>

<pre><code>$start = microtime(true);
while (...) {

}
$time_elapsed_secs = microtime(true) - $start;
</code></pre>
","6245978"
"Magento - Retrieve products with a specific attribute value","152943","","<p>In my block code I am trying to programatically retrieve a list of products that have a attribute with a specific value.</p>

<p>Alternately if that is not possible how would one retrieve all products then filter them to just list the products with a specific attribute?</p>

<p>How would I perform a search using standard boolean filters <code>AND</code> or <code>OR</code> to match a subset of my products?</p>
","<p>Almost all Magento Models have a corresponding Collection object that can be used to fetch multiple instances of a Model.</p>

<p>To instantiate a Product collection, do the following</p>

<pre><code>$collection = Mage::getModel('catalog/product')-&gt;getCollection();
</code></pre>

<p>Products are a Magento EAV style Model, so you'll need to add on any additional attributes that you want to return.</p>

<pre><code>$collection = Mage::getModel('catalog/product')-&gt;getCollection();

//fetch name and orig_price into data
$collection-&gt;addAttributeToSelect('name');  
$collection-&gt;addAttributeToSelect('orig_price');    
</code></pre>

<p>There's multiple syntaxes for setting filters on collections.  I always use the verbose one below, but you might want to inspect the Magento source for additional ways the filtering methods can be used.</p>

<p>The following shows how to filter by a range of values (greater than AND less than)</p>

<pre><code>$collection = Mage::getModel('catalog/product')-&gt;getCollection();
$collection-&gt;addAttributeToSelect('name');  
$collection-&gt;addAttributeToSelect('orig_price');    

//filter for products whose orig_price is greater than (gt) 100
$collection-&gt;addFieldToFilter(array(
    array('attribute'=&gt;'orig_price','gt'=&gt;'100'),
)); 

//AND filter for products whose orig_price is less than (lt) 130
$collection-&gt;addFieldToFilter(array(
    array('attribute'=&gt;'orig_price','lt'=&gt;'130'),
));
</code></pre>

<p>While this will filter by a name that equals one thing OR another.  </p>

<pre><code>$collection = Mage::getModel('catalog/product')-&gt;getCollection();
$collection-&gt;addAttributeToSelect('name');  
$collection-&gt;addAttributeToSelect('orig_price');    

//filter for products who name is equal (eq) to Widget A, or equal (eq) to Widget B
$collection-&gt;addFieldToFilter(array(
    array('attribute'=&gt;'name','eq'=&gt;'Widget A'),
    array('attribute'=&gt;'name','eq'=&gt;'Widget B'),        
));
</code></pre>

<p>A full list of the supported short conditionals (eq,lt, etc.) can be found in the <code>_getConditionSql</code> method in <code>lib/Varien/Data/Collection/Db.php</code></p>

<p>Finally, all Magento collections may be iterated over (the base collection class implements on of the the iterator interfaces).  This is how you'll grab your products once filters are set.</p>

<pre><code>$collection = Mage::getModel('catalog/product')-&gt;getCollection();
$collection-&gt;addAttributeToSelect('name');  
$collection-&gt;addAttributeToSelect('orig_price');    

//filter for products who name is equal (eq) to Widget A, or equal (eq) to Widget B
$collection-&gt;addFieldToFilter(array(
    array('name'=&gt;'orig_price','eq'=&gt;'Widget A'),
    array('name'=&gt;'orig_price','eq'=&gt;'Widget B'),       
));

foreach ($collection as $product) {
    //var_dump($product);
    var_dump($product-&gt;getData());
}
</code></pre>
","1338795"
"How can I count the numbers of rows that a mysql query returned?","152504","","<p>How can I count the numbers of rows that a mysql query returned? using PHP..</p>
","<h2>Getting total rows in a query result...</h2>

<p>You could just iterate the result and count them. You don't say what language or client library you are using, but the API does provide a <a href=""http://dev.mysql.com/doc/refman/5.0/en/mysql-num-rows.html"" rel=""noreferrer"">mysql_num_rows</a> function which can tell you the number of rows in a result.</p>

<p>This is exposed in PHP, for example, as the <a href=""http://php.net/manual/en/mysqli-result.num-rows.php"" rel=""noreferrer"">mysqli_num_rows</a> function. As you've edited the question to mention you're using PHP, here's a simple example using mysqli functions:</p>

<pre><code>$link = mysqli_connect(""localhost"", ""user"", ""password"", ""database"");

$result = mysqli_query($link, ""SELECT * FROM table1"");
$num_rows = mysqli_num_rows($result);

echo ""$num_rows Rows\n"";
</code></pre>

<h2>Getting a count of rows matching some criteria...</h2>

<p>Just use COUNT(*) - see <a href=""http://dev.mysql.com/doc/refman/5.0/en/counting-rows.html"" rel=""noreferrer"">Counting Rows</a> in the MySQL manual. For example:</p>

<pre><code>SELECT COUNT(*) FROM foo WHERE bar= 'value';
</code></pre>

<h2>Get total rows when LIMIT is used...</h2>

<p>If you'd used a LIMIT clause but want to know how many rows you'd get without it, use <a href=""http://dev.mysql.com/doc/refman/5.0/en/select.html#id959825"" rel=""noreferrer"">SQL_CALC_FOUND_ROWS</a> in your query, followed by SELECT <a href=""http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows"" rel=""noreferrer"">FOUND_ROWS();</a></p>

<pre><code>SELECT SQL_CALC_FOUND_ROWS * FROM foo
   WHERE bar=""value"" 
   LIMIT 10;

SELECT FOUND_ROWS();
</code></pre>

<p>For very large tables, this isn't going to be particularly efficient, and you're better off running a simpler query to obtain a count and caching it before running your queries to get pages of data.</p>
","607280"
"Generate random 5 characters string","152086","","<p>I want to create exact 5 random characters string with least possibility of getting duplicated. What would be the best way to do it? Thanks.</p>
","<pre><code>$rand = substr(md5(microtime()),rand(0,26),5);
</code></pre>

<p>Would be my best guess--Unless you're looking for special characters, too:</p>

<pre><code>$seed = str_split('abcdefghijklmnopqrstuvwxyz'
                 .'ABCDEFGHIJKLMNOPQRSTUVWXYZ'
                 .'0123456789!@#$%^&amp;*()'); // and any other characters
shuffle($seed); // probably optional since array_is randomized; this may be redundant
$rand = '';
foreach (array_rand($seed, 5) as $k) $rand .= $seed[$k];
</code></pre>

<p><a href=""http://ideone.com/l7HhGW"" rel=""noreferrer"">Example</a></p>

<p>And, for one based on the clock (fewer collisions since it's incremental):</p>

<pre><code>function incrementalHash($len = 5){
  $charset = ""0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"";
  $base = strlen($charset);
  $result = '';

  $now = explode(' ', microtime())[1];
  while ($now &gt;= $base){
    $i = $now % $base;
    $result = $charset[$i] . $result;
    $now /= $base;
  }
  return substr($result, -5);
}
</code></pre>

<p><em>Note: incremental means easier to guess; If you're using this as a salt or a verification token, don't. A salt (now) of ""WCWyb"" means 5 seconds from now it's ""WCWyg"")</em></p>
","5438778"
"Simplest way to profile a PHP script","152066","","<p>What's the easiest way to profile a PHP script?</p>

<p>I'd love tacking something on that shows me a dump of all function calls and how long they took but I'm also OK with putting something around specific functions.</p>

<p>I tried experimenting with the <a href=""http://php.net/microtime"" rel=""noreferrer"">microtime</a> function:</p>

<pre><code>$then = microtime();
myFunc();
$now = microtime();

echo sprintf(""Elapsed:  %f"", $now-$then);
</code></pre>

<p>but that sometimes gives me negative results.  Plus it's a lot of trouble to sprinkle that all over my code.</p>
","<p>The <a href=""http://www.php.net/apd"" rel=""noreferrer"">PECL APD</a> extension is used as follows:</p>

<pre><code>&lt;?php
apd_set_pprof_trace();

//rest of the script
?&gt;
</code></pre>

<p>After, parse the generated file using <code>pprofp</code>.</p>

<p>Example output:</p>

<pre><code>Trace for /home/dan/testapd.php
Total Elapsed Time = 0.00
Total System Time  = 0.00
Total User Time    = 0.00


Real         User        System             secs/    cumm
%Time (excl/cumm)  (excl/cumm)  (excl/cumm) Calls    call    s/call  Memory Usage Name
--------------------------------------------------------------------------------------
100.0 0.00 0.00  0.00 0.00  0.00 0.00     1  0.0000   0.0009            0 main
56.9 0.00 0.00  0.00 0.00  0.00 0.00     1  0.0005   0.0005            0 apd_set_pprof_trace
28.0 0.00 0.00  0.00 0.00  0.00 0.00    10  0.0000   0.0000            0 preg_replace
14.3 0.00 0.00  0.00 0.00  0.00 0.00    10  0.0000   0.0000            0 str_replace
</code></pre>
","21189"
"Saving timestamp in mysql table using php","152017","","<p>I have a field in a MySQL table which has a <code>timestamp</code> data type. I am saving data into that table. But when I pass the timestamp (<code>1299762201428</code>) to the record, it automatically saves the value <code>0000-00-00 00:00:00</code> into that table.</p>

<p>How can I store the timestamp in a MySQL table?</p>

<p>Here is my <code>INSERT</code> statement:</p>

<pre><code>INSERT INTO table_name (id,d_id,l_id,connection,s_time,upload_items_count,download_items_count,t_time,status)
VALUES (1,5,9,'2',1299762201428,5,10,20,'1'),
       (2,5,9,'2',1299762201428,5,10,20,'1')
</code></pre>
","<p>pass like this</p>

<pre><code>date('Y-m-d H:i:s','1299762201428')
</code></pre>
","5632691"
"jQuery AJAX Call to PHP Script with JSON Return","151912","","<p>I've been smashing my head against a brick wall with this one, i've tried loads of the solutions on stackoverflow but can't find one that works! </p>

<p>Basically when I POST my AJAX the PHP returns JSON but the AJAX shows Undefined instead of the value: </p>

<p><strong>JS</strong>:</p>

<pre><code>  /* attach a submit handler to the form */
  $(""#group"").submit(function(event) {

  /* stop form from submitting normally */
  event.preventDefault();

  /*clear result div*/
  $(""#result"").html('');

  /* get some values from elements on the page: */
  var val = $(this).serialize();

  /* Send the data using post and put the results in a div */
  $.ajax({
      url: ""inc/group.ajax.php"",
      type: ""post"",
      data: val,
  datatype: 'json',
      success: function(data){
            $('#result').html(data.status +':' + data.message);   
            $(""#result"").addClass('msg_notice');
            $(""#result"").fadeIn(1500);           
      },
      error:function(){
          $(""#result"").html('There was an error updating the settings');
          $(""#result"").addClass('msg_error');
          $(""#result"").fadeIn(1500);
      }   
    }); 
});
</code></pre>

<p><strong>PHP</strong>:</p>

<pre><code>  $db = new DbConnector();
  $db-&gt;connect();
  $sql='SELECT grp.group_id, group_name, group_enabled, COUNT('.USER_TBL.'.id) AS users, grp.created, grp.updated '
        .'FROM '.GROUP_TBL.' grp '
        .'LEFT JOIN members USING(group_id) '
        .'WHERE grp.group_id ='.$group_id.' GROUP BY grp.group_id';

    $result = $db-&gt;query($sql);     
    $row = mysql_fetch_array($result);
    $users = $row['users'];
    if(!$users == '0'){
        $return[""json""] = json_encode($return);
        echo json_encode(array('status' =&gt; 'error','message'=&gt; 'There are users in this group'));
    }else{

        $sql2= 'DELETE FROM '.GROUP_TBL.' WHERE group_id='.$group_id.'';
        $result = $db-&gt;query($sql2);

        if(!$result){
            echo json_encode(array('status' =&gt; 'error','message'=&gt; 'The group has not been removed'));
        }else{
            echo json_encode(array('status' =&gt; 'success','message'=&gt; 'The group has been removed'));
        }
    }
</code></pre>

<p><strong>JSON Result from firebug</strong>:</p>

<pre><code>{""status"":""success"",""message"":""success message""}
</code></pre>

<p>AJAX Displays the JSON result as Undefined and I dont have a clue why. I have tried displaying adding <code>dataType='json'</code> and <code>datatype='json'</code>. I have also tried changing it to <code>data.status</code> and <code>data['status']</code>: still no joy though. </p>

<p>Any help would be really appreciated.</p>
","<p>Make it <code>dataType</code> instead of <code>datatype</code>. </p>

<p>And add below code in php as your ajax request is expecting json and will not accept anything, but json.</p>

<pre><code>header('Content-Type: application/json');
</code></pre>

<p><a href=""https://stackoverflow.com/questions/477816/what-is-the-correct-json-content-type"">Correct Content type for JSON and JSONP</a></p>

<p>The response visible in firebug is text data. Check <code>Content-Type</code> of the response header to verify, if the response is json. It should be <code>application/json</code> for <code>dataType:'json'</code> and <code>text/html</code> for <code>dataType:'html'</code>.</p>
","19155336"
"How to get current route in Symfony 2?","151886","","<p>How do I get the current route in <a href=""http://en.wikipedia.org/wiki/Symfony"" rel=""noreferrer"">Symfony</a> 2?</p>

<p>For example, <code>routing.yml</code>:</p>

<pre><code>somePage:
   pattern: /page/
   defaults: { _controller: ""AcmeBundle:Test:index"" }
</code></pre>

<p>How can I get this <code>somePage</code> value?</p>
","<p>From something that is ContainerAware (like a controller):</p>

<pre><code>$request = $this-&gt;container-&gt;get('request');
$routeName = $request-&gt;get('_route');
</code></pre>
","7096604"
"php - insert a variable in an echo string","151859","","<pre><code>$i = 1
echo '
&lt;p class=""paragraph$i""&gt;
&lt;/p&gt;
'
++i
</code></pre>

<p>Trying to insert a variable into an echoed string. The above code doesn't work. How do I iterate a php variable into an echo string?</p>
","<p>Single quotes will not parse PHP variables inside of them. Either use double quotes or use a dot to extend the echo.</p>

<pre><code>$variableName = 'Ralph';
echo 'Hello '.$variableName.'!';
</code></pre>

<p>OR</p>

<pre><code>echo ""Hello $variableName!"";
</code></pre>

<p>And in your case:</p>

<pre><code>$i = 1;
echo '&lt;p class=""paragraph'.$i.'""&gt;&lt;/p&gt;';
++i;
</code></pre>

<p>OR</p>

<pre><code>$i = 1;
echo ""&lt;p class='paragraph$i'&gt;&lt;/p&gt;"";
++i;
</code></pre>
","8055009"
"Creating the Singleton design pattern in PHP5","151786","","<p>How would one create a Singleton class using PHP5 classes?</p>
","<pre><code>/**
 * Singleton class
 *
 */
final class UserFactory
{
    /**
     * Call this method to get singleton
     *
     * @return UserFactory
     */
    public static function Instance()
    {
        static $inst = null;
        if ($inst === null) {
            $inst = new UserFactory();
        }
        return $inst;
    }

    /**
     * Private ctor so nobody else can instantiate it
     *
     */
    private function __construct()
    {

    }
}
</code></pre>

<p>To use:</p>

<pre><code>$fact = UserFactory::Instance();
$fact2 = UserFactory::Instance();
</code></pre>

<p><code>$fact == $fact2;</code></p>

<p>But:</p>

<pre><code>$fact = new UserFactory()
</code></pre>

<p>Throws an error.</p>

<p>See <a href=""http://php.net/manual/en/language.variables.scope.php#language.variables.scope.static"" rel=""nofollow noreferrer"" title=""PHP: Variable Scope : Using Static Variables"">http://php.net/manual/en/language.variables.scope.php#language.variables.scope.static</a> to understand static variable scopes and why setting <code>static $inst = null;</code> works.</p>
","203359"
"php create object without class","151648","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/6384431/creating-anonymous-objects-in-php"">Creating anonymous objects in php</a>  </p>
</blockquote>



<p>In JavaScript, you can easiliy create an object without a class by:</p>

<pre><code> myObj = {};
 myObj.abc = ""aaaa"";
</code></pre>

<p>For PHP I've found this one, but it is nearly 4 years old:
<a href=""http://www.subclosure.com/php-creating-anonymous-objects-on-the-fly.html"" rel=""noreferrer"">http://www.subclosure.com/php-creating-anonymous-objects-on-the-fly.html</a></p>

<pre><code>$obj = (object) array('foo' =&gt; 'bar', 'property' =&gt; 'value');
</code></pre>

<p>Now with PHP 5.4 in 2013, is there an alternative to this?</p>
","<p>you can always use <code>new stdClass()</code>. Example code:</p>

<pre><code>   $object = new stdClass();
   $object-&gt;property = 'Here we go';

   var_dump($object);
   /*
   outputs:

   object(stdClass)#2 (1) {
      [""property""]=&gt;
      string(10) ""Here we go""
    }
   */
</code></pre>

<p>Also as of PHP 5.4 you can get same output with:</p>

<pre><code>$object = (object) ['property' =&gt; 'Here we go'];
</code></pre>
","14395679"
"PHP Regex to check date is in YYYY-MM-DD format","151559","","<p>I'm trying to check that dates entered by end users are in the YYYY-MM-DD. Regex has never been my strong point, I keep getting a false return value for the preg_match() I have setup.</p>

<p>So I'm assuming I have made a mess of the regex, detailed below.</p>

<pre><code>$date=""2012-09-12"";

if (preg_match(""^[0-9]{4}-[0-1][0-9]-[0-3][0-9]$"",$date))
    {
        return true;
    }else{
        return false;
    }
</code></pre>

<p>Any thoughts?</p>
","<p>Try this.</p>

<pre><code>$date=""2012-09-12"";

if (preg_match(""/^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/"",$date)) {
    return true;
} else {
    return false;
}
</code></pre>
","13194429"
"PHP-FPM and Nginx: 502 Bad Gateway","151260","","<p><strong>Configuration</strong></p>

<ul>
<li>Ubuntu Server 11.10 64 bit</li>
<li>Amazon AWS, Ec2, hosted on the cloud</li>
<li>t1.micro instance</li>
</ul>

<p>Before I write anything else, I'd like to state that I've checked both <a href=""https://stackoverflow.com/questions/4252368/nginx-502-bad-gateway"">nginx 502 bad gateway</a> and <a href=""https://stackoverflow.com/questions/3616191/nginx-php-fpm-502-bad-gateway"">Nginx + PHP-FPM 502 Bad Gateway</a> threads, which unfortunately haven't helped me in this regard.</p>

<p>The issue appears to be rather common: a misconfiguration of nginx or php-fpm can lead to a <code>502 Bad Gateway</code> error, which is something that I haven't been able to get rid of. Note that this appears <em>even when I go to my domain root</em>, without specifying any particular directory. </p>

<p>I'm running an Amazon EC2 webserver, with port 9000 enabled, port 80 open, etc.</p>

<p>The question in particular is, how can I get rid of this nasty error? Or, better yet, how can I get <code>php5-fpm</code> to <em>actually work</em>.</p>

<p><strong>What I Have Attempted so Far</strong></p>

<p>Mostly consistent editing of configuration files, notably <code>php-fpm.conf</code> and <code>nginx.conf</code>.</p>

<p><strong>i.</strong> <em>php-fpm.conf</em></p>

<p>I've added the following, which hasn't quite helped much:</p>

<pre><code>;;;;;;;;;;;;;
; Fpm Start ;
;;;;;;;;;;;;;

;pm.start_servers = 20
;pm.min_spare_servers = 5
;pm.max_spare_servers = 35
</code></pre>

<p>Now, afterward I tried including my configuration files:</p>

<p><code>include=/etc/php5/fpm/*.conf</code></p>

<p>Which only screwed me even further.</p>

<p><strong><em>Full Configuration</em></strong></p>

<pre><code>;;;;;;;;;;;;;;;;;;;;;
; FPM Configuration ;
;;;;;;;;;;;;;;;;;;;;;

; All relative paths in this configuration file are relative to PHP's install
; prefix (/usr). This prefix can be dynamicaly changed by using the
; '-p' argument from the command line.

; Include one or more files. If glob(3) exists, it is used to include a bunch of
; files from a glob(3) pattern. This directive can be used everywhere in the
; file.
; Relative path can also be used. They will be prefixed by:
;  - the global prefix if it's been set (-p arguement)
;  - /usr otherwise
;include=/etc/php5/fpm/*.conf

;;;;;;;;;;;;;;;;;;
; Global Options ;
;;;;;;;;;;;;;;;;;;

[global]
; Pid file
; Note: the default prefix is /var
; Default Value: none
pid = /var/run/php5-fpm.pid

; Error log file
; Note: the default prefix is /var
; Default Value: log/php-fpm.log
error_log = /var/log/php5-fpm.log

; Log level
; Possible Values: alert, error, warning, notice, debug
; Default Value: notice
log_level = notice

; If this number of child processes exit with SIGSEGV or SIGBUS within the time
; interval set by emergency_restart_interval then FPM will restart. A value
; of '0' means 'Off'.
; Default Value: 0
;emergency_restart_threshold = 0

; Interval of time used by emergency_restart_interval to determine when 
; a graceful restart will be initiated.  This can be useful to work around
; accidental corruptions in an accelerator's shared memory.
; Available Units: s(econds), m(inutes), h(ours), or d(ays)
; Default Unit: seconds
; Default Value: 0
emergency_restart_interval = 0

; Time limit for child processes to wait for a reaction on signals from master.
; Available units: s(econds), m(inutes), h(ours), or d(ays)
; Default Unit: seconds
; Default Value: 0
;process_control_timeout = 0

; Send FPM to background. Set to 'no' to keep FPM in foreground for debugging.
; Default Value: yes
daemonize = no

;;;;;;;;;;;;;
; Fpm Start ;
;;;;;;;;;;;;;

;pm.start_servers = 20
;pm.min_spare_servers = 5
;pm.max_spare_servers = 35

;;;;;;;;;;;;;;;;;;;;
; Pool Definitions ; 
;;;;;;;;;;;;;;;;;;;;

; Multiple pools of child processes may be started with different listening
; ports and different management options.  The name of the pool will be
; used in logs and stats. There is no limitation on the number of pools which
; FPM can handle. Your system will tell you anyway :)

; To configure the pools it is recommended to have one .conf file per
; pool in the following directory:
include=/etc/php5/fpm/pool.d/*.conf
</code></pre>

<p><strong>ii</strong>. <em>nginx.conf</em></p>

<p>In all honesty this configuration is a smattering of a few websites I've visited, but I can tell you that before this 502 Bad Gateway business, the server was running fine (without PHP working. Period.).</p>

<p>The issue primarily lies in the fact that something is terribly, terribly wrong. And now, when I try to do a <code>service php5-fpm restart</code>, it hangs in what I'm guessing is an infinite loop or something, which I can't even <kbd>CTRL</kbd>-<kbd>C</kbd> out of.</p>

<p><strong><em>Full Configuration</em></strong></p>

<pre><code>user www-data;
worker_processes 1;
pid /var/run/nginx.pid;

events {
    worker_connections 64;
    # multi_accept on;
}

http {

    ##
    # Basic Settings
    ##

    sendfile on;
    tcp_nopush off;
    tcp_nodelay on;
    keepalive_timeout 65;
    types_hash_max_size 2048;
    # server_tokens off;

    # server_names_hash_bucket_size 64;
    # server_name_in_redirect off;

    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    ##
    # Logging Settings
    ##

    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;

    ##
    # Gzip Settings
    ##

    gzip on;
    gzip_disable ""msie6"";

    # gzip_vary on;
    # gzip_proxied any;
    # gzip_comp_level 6;
    # gzip_buffers 16 8k;
    # gzip_http_version 1.1;
    # gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;

    ##
    # Virtual Host Configs
    ##

    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;

    server {
        listen 80;
        server_name ec2-xx-xx-xx-xx.compute-x.amazonaws.com;

        location ~ ^(.+\.php)(.*)$ {
            root   /home/wayvac/public;
            fastcgi_pass   unix:/var/run/php5-fpm.pid;  
            #fastcgi_pass   127.0.0.1:9000; #Un-comment this and comment ""fastcgi_pass   unix:/var/run/php-fpm/php-fpm.sock;"" if you are not using php-fpm.
            fastcgi_index  index.php;
            set $document_root2 $document_root;
            if ($document_root2 ~ ""^(.*\\\\).*?[\\\\|\/]\.\.\/(.*)$"") { set $document_root2 $1$2; }
            if ($document_root2 ~ ""^(.*\\\\).*?[\\\\|\/]\.\.\/(.*)$"") { set $document_root2 $1$2; }
            if ($document_root2 ~ ""^(.*\\\\).*?[\\\\|\/]\.\.\/(.*)$"") { set $document_root2 $1$2; }
            if ($document_root2 ~ ""^(.*\\\\).*?[\\\\|\/]\.\.\/(.*)$"") { set $document_root2 $1$2; }
            if ($document_root2 ~ ""^(.*\\\\).*?[\\\\|\/]\.\.\/(.*)$"") { set $document_root2 $1$2; }
            fastcgi_split_path_info ^(.+\.php)(.*)$;
            fastcgi_param   SCRIPT_FILENAME $document_root2$fastcgi_script_name;
            fastcgi_param   PATH_INFO   $fastcgi_path_info;
            fastcgi_param   PATH_TRANSLATED $document_root2$fastcgi_path_info;
            include fastcgi_params;
            fastcgi_param  DOCUMENT_ROOT      $document_root2;
        }       

        access_log /var/log/nginx/access.log;
        error_log /var/log/nginx/error.log;

        location / {
            root /home/wayvac/public;   
            index index.html index.htm index.php;
        }

        location ~* \.(?:ico|css|js|gif|jpe?g|png)$ {
            # Some basic cache-control for static files to be sent to the browser
            expires max;
            add_header Pragma public;
            add_header Cache-Control ""public, must-revalidate, proxy-revalidate"";
        }

        #include drop.conf;
        #include php.conf;
    }
}
</code></pre>
","<p>If anyone finds this page by encountering the same problem I had, I found the answer here: <a href=""http://www.howtoforge.com/installing-nginx-with-php5-and-php-fpm-and-mysql-support-lemp-on-ubuntu-12.04-lts"" rel=""nofollow noreferrer"">http://www.howtoforge.com/installing-nginx-with-php5-and-php-fpm-and-mysql-support-lemp-on-ubuntu-12.04-lts</a></p>

<p>For those of you who can't be bothered to click and work it out for themselves... ;)</p>

<p><strong>The Condition:</strong></p>

<p>Ubuntu or Debian server with NGINX and PHP 5.3 works fine but upgrading PHP to 5.4 gives 502 Bad Gateway errors. Looking for services running on port 9000 (typically running <code>netstat -lp</code> or similar) returns nothing.</p>

<p><strong>The fix:</strong></p>

<p>Open <code>/etc/php5/fpm/pool.d/www.conf</code> and make a note of the 'listen' parameter (in my case <code>/var/run/php5-fpm.sock</code>):</p>

<pre><code>; The address on which to accept FastCGI requests.
; Valid syntaxes are:
;   'ip.add.re.ss:port'    - to listen on a TCP socket to a specific address on
;                            a specific port;
;   'port'                 - to listen on a TCP socket to all addresses on a
;                            specific port;
;   '/path/to/unix/socket' - to listen on a unix socket.
; Note: This value is mandatory.
listen = /var/run/php5-fpm.sock
</code></pre>

<p>and replace the fastcgi_pass variable in your vhost with the location you just noted.</p>

<p>So this sample symfony2 configuration (taken from here: <a href=""http://wiki.nginx.org/Symfony"" rel=""nofollow noreferrer"">http://wiki.nginx.org/Symfony</a>):</p>

<pre><code>  # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
  location ~ ^/(app|app_dev)\.php(/|$) {
    fastcgi_pass   127.0.0.1:9000;
    fastcgi_split_path_info ^(.+\.php)(/.*)$;
    include fastcgi_params;
    fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;
    fastcgi_param  HTTPS              off;
  }
</code></pre>

<p>becomes this:</p>

<pre><code>  # pass the PHP scripts to FastCGI server at /var/run/php5-fpm.sock
  location ~ ^/(app|app_dev)\.php(/|$) {
    fastcgi_pass unix:/var/run/php5-fpm.sock;
    fastcgi_split_path_info ^(.+\.php)(/.*)$;
    include fastcgi_params;
    fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;
    fastcgi_param  HTTPS              off;
  }
</code></pre>

<p>Then restart nginx:</p>

<pre><code>sudo /etc/init.d/nginx restart
</code></pre>

<p><strong>Note:</strong> replace <code>~ ^/(app|app_dev)\.php(/|$) {</code> with <code>~ ^/index\.php(/|$) {</code> if you're not on SF2**</p>

<p>Hope this saves someone a little bit of time :)</p>

<p><strong>Edit</strong></p>

<p>Of course, you could change the <code>listen = /var/run/php5-fpm.sock</code> to <code>listen = 127.0.0.1:9000</code> in <code>/etc/php5/fpm/pool.d/www.conf</code> then restart php5-fpm (which would save you from having to change your vhosts), but you have to assume they changed php5-fpm to run through a socket rather than listening on port 9000 for a reason.</p>

<p><strong>Edit2</strong></p>

<p>If you're still experiencing 502 error see this answer:
<a href=""https://stackoverflow.com/questions/23443398/nginx-error-connect-to-php5-fpm-sock-failed-13-permission-denied/23487409#23487409"">nginx error connect to php5-fpm.sock failed (13: Permission denied)</a></p>
","14560181"
"How to delete an array element based on key?","151250","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/369602/how-to-delete-an-element-from-an-array-in-php"">How to delete an element from an array in php?</a>  </p>
</blockquote>



<p>For instance,</p>

<pre><code>Array(      
    [0] =&gt; Array
        (
            [0] =&gt; hello
            [1] =&gt; open
        )

    [1] =&gt; Array
        (
            [0] =&gt; good
            [1] =&gt; center
        )

    [2] =&gt; Array
        (
            [0] =&gt; hello
            [1] =&gt; close
        )
)
</code></pre>

<p>I want to delete the element which key is <em>1</em>, after the operation:</p>

<pre><code>Array(
    [0] =&gt; Array
        (
            [0] =&gt; hello
            [1] =&gt; open
        )

    [2] =&gt; Array
        (
            [0] =&gt; hello
            [1] =&gt; close
        )
)
</code></pre>
","<p>PHP</p>

<pre><code>unset($array[1]);
</code></pre>
","1672175"
"How to easily consume a web service from PHP","151223","","<p>Is there available any tool for PHP which can be used to generate code for consuming a <a href=""http://en.wikipedia.org/wiki/Web_service"" rel=""noreferrer"">web service</a> based on its <a href=""http://en.wikipedia.org/wiki/Web_Services_Description_Language"" rel=""noreferrer"">WSDL</a>? Something comparable to clicking ""Add Web Reference"" in Visual Studio or the Eclipse plugin which does the same thing for Java.</p>
","<p>I've had great success with <a href=""https://github.com/jbarciauskas/wsdl2php"" rel=""noreferrer"">wsdl2php</a>.  It will automatically create wrapper classes for all objects and methods used in your web service.</p>
","12585"
"Submit form without page reloading","151212","","<p>I have a classifieds website, and on the page where ads are showed, I am creating a ""Send a tip to a friend"" form...</p>

<p>So anybody who wants can send a tip of the ad to some friends email-adress.</p>

<p>I am guessing the form must be submitted to a php page right?</p>

<pre><code>&lt;form name='tip' method='post' action='tip.php'&gt;
Tip somebody: &lt;input name=""tip_email"" type=""text"" size=""30"" onfocus=""tip_div(1);"" onblur=""tip_div(2);""/&gt;
 &lt;input type=""submit"" value=""Skicka Tips""/&gt;
 &lt;input type=""hidden"" name=""ad_id"" /&gt;
 &lt;/form&gt;
</code></pre>

<p>When submitting the form, the page gets reloaded... I don't want that...</p>

<p>Is there any way to make it not reload and still send the mail?
Preferrably without ajax or jquery...</p>

<p>Thanks</p>
","<p>You'll need to submit an ajax request to send the email without reloading the page. Take a look at <a href=""http://api.jquery.com/jQuery.ajax/"" rel=""nofollow noreferrer"">http://api.jquery.com/jQuery.ajax/</a></p>

<p>Your code should be something along the lines of:</p>

<pre><code>$('#submit').click(function() {
    $.ajax({
        url: 'send_email.php',
        type: 'POST',
        data: {
            email: 'email@example.com',
            message: 'hello world!'
        },
        success: function(msg) {
            alert('Email Sent');
        }               
    });
});
</code></pre>

<p>The form will submit in the background to the <code>send_email.php</code> page which will need to handle the request and send the email.</p>
","2866127"
"Convert a string to JSON object php","151095","","<p>I have the following result from an sql query:</p>

<pre><code>{""Coords"":[
    {""Accuracy"":""65"",""Latitude"":""53.277720488429026"",""Longitude"":""-9.012038778269686"",""Timestamp"":""Fri Jul 05 2013 11:59:34 GMT+0100 (IST)""},
    {""Accuracy"":""65"",""Latitude"":""53.277720488429026"",""Longitude"":""-9.012038778269686"",""Timestamp"":""Fri Jul 05 2013 11:59:34 GMT+0100 (IST)""},
    {""Accuracy"":""65"",""Latitude"":""53.27770755361785"",""Longitude"":""-9.011979642121824"",""Timestamp"":""Fri Jul 05 2013 12:02:09 GMT+0100 (IST)""},
    {""Accuracy"":""65"",""Latitude"":""53.27769091555766"",""Longitude"":""-9.012051410095722"",""Timestamp"":""Fri Jul 05 2013 12:02:17 GMT+0100 (IST)""},
    {""Accuracy"":""65"",""Latitude"":""53.27769091555766"",""Longitude"":""-9.012051410095722"",""Timestamp"":""Fri Jul 05 2013 12:02:17 GMT+0100 (IST)""} 
    ]
}
</code></pre>

<p>It is currently a string in php, is there an easy way to convert this to a JSON object (I know it's already in JSON form). </p>

<p>I need it to be an object so I can add an extra item/element/object like what coords already is</p>

<p>EDIT: SORRY GUYS, I PASTED AN OLD/WRONG STRING!</p>
","<p>What @deceze said is correct, it seems that your JSON is malformed, try this:</p>

<pre><code>{
    ""Coords"": [{
        ""Accuracy"": ""30"",
        ""Latitude"": ""53.2778273"",
        ""Longitude"": ""-9.0121648"",
        ""Timestamp"": ""Fri Jun 28 2013 11:43:57 GMT+0100 (IST)""
    }, {
        ""Accuracy"": ""30"",
        ""Latitude"": ""53.2778273"",
        ""Longitude"": ""-9.0121648"",
        ""Timestamp"": ""Fri Jun 28 2013 11:43:57 GMT+0100 (IST)""
    }, {
        ""Accuracy"": ""30"",
        ""Latitude"": ""53.2778273"",
        ""Longitude"": ""-9.0121648"",
        ""Timestamp"": ""Fri Jun 28 2013 11:43:57 GMT+0100 (IST)""
    }, {
        ""Accuracy"": ""30"",
        ""Latitude"": ""53.2778339"",
        ""Longitude"": ""-9.0121466"",
        ""Timestamp"": ""Fri Jun 28 2013 11:45:54 GMT+0100 (IST)""
    }, {
        ""Accuracy"": ""30"",
        ""Latitude"": ""53.2778159"",
        ""Longitude"": ""-9.0121201"",
        ""Timestamp"": ""Fri Jun 28 2013 11:45:58 GMT+0100 (IST)""
    }]
}
</code></pre>

<p>Use <code>json_decode($string)</code> to convert String into Array/Object (stdClass): <a href=""http://php.net/manual/en/function.json-decode.php"">http://php.net/manual/en/function.json-decode.php</a></p>

<p><strong>[edited]</strong></p>

<p>I did not understand What do you mean by <em>""an official JSON object""</em>, but suppose you want to add content to json via PHP and then converts it right back to JSON?</p>

<p>assuming you have the following variable:</p>

<pre><code>$data = '{""Coords"":[{""Accuracy"":""65"",""Latitude"":""53.277720488429026"",""Longitude"":""-9.012038778269686"",""Timestamp"":""Fri Jul 05 2013 11:59:34 GMT+0100 (IST)""},{""Accuracy"":""65"",""Latitude"":""53.277720488429026"",""Longitude"":""-9.012038778269686"",""Timestamp"":""Fri Jul 05 2013 11:59:34 GMT+0100 (IST)""},{""Accuracy"":""65"",""Latitude"":""53.27770755361785"",""Longitude"":""-9.011979642121824"",""Timestamp"":""Fri Jul 05 2013 12:02:09 GMT+0100 (IST)""},{""Accuracy"":""65"",""Latitude"":""53.27769091555766"",""Longitude"":""-9.012051410095722"",""Timestamp"":""Fri Jul 05 2013 12:02:17 GMT+0100 (IST)""},{""Accuracy"":""65"",""Latitude"":""53.27769091555766"",""Longitude"":""-9.012051410095722"",""Timestamp"":""Fri Jul 05 2013 12:02:17 GMT+0100 (IST)""}]}';
</code></pre>

<p>You should convert it to <em>Array/Object</em> (stdClass):</p>

<p><code>$manage = json_decode($data);</code></p>

<p>But working with stdClass is more complicated than PHP-Array, then try this:</p>

<p><code>$manage = (array) json_decode($data);</code></p>

<p>this way you can use array functions: <a href=""http://php.net/manual/en/function.array.php"">http://php.net/manual/en/function.array.php</a></p>

<p><strong>adding an item:</strong></p>

<pre><code>$manage = (array) json_decode($data);

echo 'Before: &lt;br&gt;';
print_r($manage);

$manage['Coords'][] = Array(
    'Accuracy' =&gt; '90'
    'Latitude' =&gt; '53.277720488429026'
    'Longitude' =&gt; '-9.012038778269686'
    'Timestamp' =&gt; 'Fri Jul 05 2013 11:59:34 GMT+0100 (IST)'
);

echo '&lt;br&gt;After: &lt;br&gt;';
print_r($manage);
</code></pre>

<p><strong>remove first item:</strong></p>

<pre><code>$manage = (array) json_decode($data);
echo 'Before: &lt;br&gt;';
print_r($manage);
array_shift($manage['Coords']);
echo '&lt;br&gt;After: &lt;br&gt;';
print_r($manage);
</code></pre>

<p>any chance you want to save to json to a <em>database</em> or a <em>file</em>:</p>

<pre><code>$data = '{""Coords"":[{""Accuracy"":""65"",""Latitude"":""53.277720488429026"",""Longitude"":""-9.012038778269686"",""Timestamp"":""Fri Jul 05 2013 11:59:34 GMT+0100 (IST)""},{""Accuracy"":""65"",""Latitude"":""53.277720488429026"",""Longitude"":""-9.012038778269686"",""Timestamp"":""Fri Jul 05 2013 11:59:34 GMT+0100 (IST)""},{""Accuracy"":""65"",""Latitude"":""53.27770755361785"",""Longitude"":""-9.011979642121824"",""Timestamp"":""Fri Jul 05 2013 12:02:09 GMT+0100 (IST)""},{""Accuracy"":""65"",""Latitude"":""53.27769091555766"",""Longitude"":""-9.012051410095722"",""Timestamp"":""Fri Jul 05 2013 12:02:17 GMT+0100 (IST)""},{""Accuracy"":""65"",""Latitude"":""53.27769091555766"",""Longitude"":""-9.012051410095722"",""Timestamp"":""Fri Jul 05 2013 12:02:17 GMT+0100 (IST)""}]}';

$manage = (array) json_decode($data);

$manage['Coords'][] = Array(
    'Accuracy' =&gt; '90'
    'Latitude' =&gt; '53.277720488429026'
    'Longitude' =&gt; '-9.012038778269686'
    'Timestamp' =&gt; 'Fri Jul 05 2013 11:59:34 GMT+0100 (IST)'
);

if(($id = fopen('datafile.txt','w'))){
    fwrite($id,json_encode($manage));
    fclose($id);
}
</code></pre>

<p>I hope I have understood your question.</p>

<p>Good luck.</p>
","17488877"
".rar, .zip files MIME Type","150960","","<p>I'm developing a simple php upload script, and users can upload only ZIP and RAR files.</p>

<p>What MIME types I should use to check <code>$_FILES[x][type]</code>? (a complete list please)</p>

<p>Thank you..</p>
","<p>The answer from freedompeace:</p>

<pre><code>.rar    application/x-rar-compressed, application/octet-stream
.zip    application/zip, application/octet-stream
</code></pre>

<p>I would do a check on the file name too. Here is how you could check if the file is a RAR or ZIP file. I tested it by creating a quick command line application.</p>

<pre><code>&lt;?php

if (isRarOrZip($argv[1])) {
    echo 'It is probably a RAR or ZIP file.';
} else {
    echo 'It is probably not a RAR or ZIP file.';
}

function isRarOrZip($file) {
    // get the first 7 bytes
    $bytes = file_get_contents($file, FALSE, NULL, 0, 7);
    $ext = strtolower(substr($file, - 4));

    // RAR magic number: Rar!\x1A\x07\x00
    // http://en.wikipedia.org/wiki/RAR
    if ($ext == '.rar' and bin2hex($bytes) == '526172211a0700') {
        return TRUE;
    }

    // ZIP magic number: none, though PK\003\004, PK\005\006 (empty archive), 
    // or PK\007\008 (spanned archive) are common.
    // http://en.wikipedia.org/wiki/ZIP_(file_format)
    if ($ext == '.zip' and substr($bytes, 0, 2) == 'PK') {
        return TRUE;
    }

    return FALSE;
}
</code></pre>

<p>Notice that it still won't be 100% certain, but it is probably good enough.</p>

<pre><code>$ rar.exe l somefile.zip
somefile.zip is not RAR archive
</code></pre>

<p>But even WinRAR detects non RAR files as SFX archives:</p>

<pre><code>$ rar.exe l somefile.srr
SFX Volume somefile.srr
</code></pre>
","7027582"
"Preferred method to store PHP arrays (json_encode vs serialize)","150959","","<p>I need to store a multi-dimensional associative array of data in a flat file for caching purposes. I might occasionally come across the need to convert it to JSON for use in my web app but the vast majority of the time I will be using the array directly in PHP.</p>

<p>Would it be more efficient to store the array as JSON or as a PHP serialized array in this text file? I've looked around and it seems that in the newest versions of PHP (5.3), <code>json_decode</code> is actually faster than <code>unserialize</code>.</p>

<p>I'm currently leaning towards storing the array as JSON as I feel its easier to read by a human if necessary, it can be used in both PHP and JavaScript with very little effort, and from what I've read, it might even be faster to decode (not sure about encoding, though).</p>

<p>Does anyone know of any pitfalls? Anyone have good benchmarks to show the performance benefits of either method?</p>
","<p>Depends on your priorities.</p>

<p>If performance is your absolute driving characteristic, then by all means use the fastest one.  Just make sure you have a full understanding of the differences before you make a choice</p>

<ul>
<li>By default, <code>json_encode()</code> converts UTF-8 characters to Unicode escape sequences while <code>serialize()</code> does not. <strong>Note:</strong> To leave UTF-8 characters untouched, you can use the option <code>JSON_UNESCAPED_UNICODE</code> as of PHP 5.4.</li>
<li>JSON will have no memory of what the object's original class was (they are always restored as instances of stdClass).</li>
<li>You can't leverage <code>__sleep()</code> and <code>__wakeup()</code> with JSON</li>
<li>Only public properties are serialized with JSON. <strong>Note:</strong> As of PHP 5.4, you can implement <a href=""http://php.net/manual/en/class.jsonserializable.php"" rel=""noreferrer"">JsonSerializable</a> to change this behavior.</li>
<li>JSON is more portable</li>
</ul>

<p>And there's probably a few other differences I can't think of at the moment.</p>

<p>A simple speed test to compare the two</p>

<pre><code>&lt;?php

ini_set('display_errors', 1);
error_reporting(E_ALL);

// Make a big, honkin test array
// You may need to adjust this depth to avoid memory limit errors
$testArray = fillArray(0, 5);

// Time json encoding
$start = microtime(true);
json_encode($testArray);
$jsonTime = microtime(true) - $start;
echo ""JSON encoded in $jsonTime seconds\n"";

// Time serialization
$start = microtime(true);
serialize($testArray);
$serializeTime = microtime(true) - $start;
echo ""PHP serialized in $serializeTime seconds\n"";

// Compare them
if ($jsonTime &lt; $serializeTime) {
    printf(""json_encode() was roughly %01.2f%% faster than serialize()\n"", ($serializeTime / $jsonTime - 1) * 100);
}
else if ($serializeTime &lt; $jsonTime ) {
    printf(""serialize() was roughly %01.2f%% faster than json_encode()\n"", ($jsonTime / $serializeTime - 1) * 100);
} else {
    echo ""Impossible!\n"";
}

function fillArray( $depth, $max ) {
    static $seed;
    if (is_null($seed)) {
        $seed = array('a', 2, 'c', 4, 'e', 6, 'g', 8, 'i', 10);
    }
    if ($depth &lt; $max) {
        $node = array();
        foreach ($seed as $key) {
            $node[$key] = fillArray($depth + 1, $max);
        }
        return $node;
    }
    return 'empty';
}
</code></pre>
","804089"
"Two arrays in foreach loop","150786","","<p>I want to generate a <code>selectbox</code> using two arrays, one containing the country codes and another containing the country names.</p>

<p>This is an example:</p>

<pre><code>&lt;?php
    $codes = array('tn','us','fr');
    $names = array('Tunisia','United States','France');

    foreach( $codes as $code and $names as $name ) {
        echo '&lt;option value=""' . $code . '""&gt;' . $name . '&lt;/option&gt;';
    }
?&gt;
</code></pre>

<p>This method didn't work for me. Any suggestions?</p>
","<pre><code>foreach( $codes as $code and $names as $name ) { }
</code></pre>

<p>That is not valid.</p>

<p>You probably want something like this...</p>

<pre><code>foreach( $codes as $index =&gt; $code ) {
   echo '&lt;option value=""' . $code . '""&gt;' . $names[$index] . '&lt;/option&gt;';
}
</code></pre>

<p>Alternatively, it'd be much easier to make the codes the key of your <code>$names</code> array...</p>

<pre><code>$names = array(
   'tn' =&gt; 'Tunisia',
   'us' =&gt; 'United States',
   ...
);
</code></pre>
","4480810"
"How to get name of calling function/method in PHP?","150679","","<p>I am aware of function <code>debug_backtrace</code>, but I am looking for some ready to use implementation of function like <code>GetCallingMethodName()</code>? It would be perfect if it gave method's class too (if it is indeed a method).</p>
","<p>The <code>debug_backtrace()</code> function is the only way to know this, if you're lazy it's one more reason you should code the <code>GetCallingMethodName()</code> yourself. <strong>Fight the laziness! :D</strong></p>
","2110758"
"How to embed php in JavaScript?","150636","","<p>How can we use php in JavaScript ?</p>

<p>Like</p>

<pre><code>function jst()
{
    var i = 0 ;
    i = &lt;?php echo 35; ?&gt;
    alert( i );
}
</code></pre>

<p>Please suggest a better way</p>
","<p>If your whole JS code gets processed by PHP, then you can do it just like that. If you have individual .js files, and you don't want PHP to process them (for example, for caching reasons), then what you can do is just pass variables around in JS. For example in your index.php (or wherever you specify your layout), you'd do something like this:</p>

<pre><code>&lt;script type=""text/javascript""&gt;
var my_var = &lt;?php echo json_encode($my_var); ?&gt;;
&lt;/script&gt;
</code></pre>

<p>You could then use <code>my_var</code> in your JS files. This method also lets you pass other than just simple integer values, as json_encode() also deals with arrays, strings, etc. correctly, serializing them into a format that JS can use.</p>
","3352615"
"PHP: How to use array_filter() to filter array keys?","150177","","<p>The callback function in <a href=""http://php.net/manual/en/function.array-filter.php"" rel=""noreferrer""><code>array_filter()</code></a> only passes in the array's values, not the keys.</p>

<p>If I have:</p>

<pre><code>$my_array = array(""foo"" =&gt; 1, ""hello"" =&gt; ""world"");

$allowed = array(""foo"", ""bar"");
</code></pre>

<p>What's the best way to delete all keys in <code>$my_array</code> that are not in the <code>$allowed</code> array?</p>

<p>Desired output:</p>

<pre><code>$my_array = array(""foo"" =&gt; 1);
</code></pre>
","<p>PHP 5.6 introduced a third parameter to <code>array_filter()</code>, <a href=""http://php.net/manual/en/function.array-filter.php#refsect1-function.array-filter-changelog"" rel=""noreferrer""><code>flag</code></a>, that you can set to <a href=""http://php.net/manual/en/array.constants.php#constant.array-filter-use-key"" rel=""noreferrer""><code>ARRAY_FILTER_USE_KEY</code></a> to filter by key instead of value:</p>

<pre><code>$my_array = ['foo' =&gt; 1, 'hello' =&gt; 'world'];
$allowed  = ['foo', 'bar'];
$filtered = array_filter(
    $my_array,
    function ($key) use ($allowed) {
        return in_array($key, $allowed);
    },
    ARRAY_FILTER_USE_KEY
);
</code></pre>

<p>Clearly this isn't as elegant as <a href=""https://stackoverflow.com/a/4260168/12559""><code>array_intersect_key($my_array, array_flip($allowed))</code></a>, but it does offer the additional flexibility of performing an arbitrary test against the key, e.g. <code>$allowed</code> could contain regex patterns instead of plain strings.</p>

<p>You can also use <a href=""http://php.net/manual/en/array.constants.php#constant.array-filter-use-both"" rel=""noreferrer""><code>ARRAY_FILTER_USE_BOTH</code></a> to have both the value and the key passed to your filter function. Here's a contrived example based upon the first, but note that I'd not recommend encoding filtering rules using <code>$allowed</code> this way:</p>

<pre><code>$my_array = ['foo' =&gt; 1, 'bar' =&gt; 'baz', 'hello' =&gt; 'wld'];
$allowed  = ['foo' =&gt; true, 'bar' =&gt; true, 'hello' =&gt; 'world'];
$filtered = array_filter(
    $my_array,
    function ($val, $key) use ($allowed) { // N.b. $val, $key not $key, $val
        return isset($allowed[$key]) &amp;&amp; (
            $allowed[$key] === true || $allowed[$key] === $val
        );
    },
    ARRAY_FILTER_USE_BOTH
); // ['foo' =&gt; 1, 'bar' =&gt; 'baz']
</code></pre>
","26524231"
"Best way to check if MySQL results returned in PHP?","149925","","<p>I'm looking for the best way to check and see if any results were returned in a query. I feel like I write this part of code a lot and sometimes I get errors, and sometimes I don't.</p>

<p>For example, I run this query to check if a username exists before inserting a new one into the database.</p>

<pre><code>$result = mysql_query(""SELECT * FROM ..."");
</code></pre>

<p>Then I want to check and see if any results were returned. Here is one way I do it:</p>

<pre><code>if (!$result) { PERFORM ACTION }
</code></pre>

<p>If the first way doesn't work, then sometimes this will:</p>

<pre><code>if (mysql_num_rows($result)==0) { PERFORM ACTION }
</code></pre>

<p>Then I even saw that I could do it this way the other day:</p>

<pre><code>list($total) = mysql_fetch_row($result);
if ($total==0) { PERFORM ACTION }
</code></pre>

<p>What is the best way to do this?</p>
","<pre><code>if (mysql_num_rows($result)==0) { PERFORM ACTION }
</code></pre>

<p>This gets my vote.</p>

<p>OP assuming query is not returning any error, so this should be one of the way</p>
","4286606"
"Creating a very simple 1 username/password login in php","149916","","<p>I want to make a single login for just 1 user without storing in a database but I can't seem to get this to work. </p>

<p>My code: login.php</p>

<pre><code>&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Login&lt;/title&gt;
&lt;/head&gt;
&lt;h3&gt;Add entry&lt;/h3&gt;
&lt;p&gt; Add another Article&lt;/p&gt;
&lt;form action=""trylog.php"" method = ""post""&gt;
  &lt;label for=""username""&gt;Username&lt;/label&gt; &lt;input type=""username"" id=""usename"" name=""username""&gt;&lt;br /&gt;&lt;br /&gt;
  &lt;label for=""password""&gt;Password:&lt;/label&gt; &lt;input type=""text"" id=""password"" name=""password""&gt;&lt;br /&gt;&lt;br /&gt;
  &lt;button type = ""submit""&gt;Login&lt;/button&gt;
&lt;/form&gt;
&lt;/html&gt;
</code></pre>

<p>trylog.php</p>

<pre><code>&lt;html&gt;
&lt;title&gt;Login&lt;/title&gt;
&lt;body&gt;
  &lt;?php
  $usr = ""admin"";
  $psw = ""password"";
  $username = '$_POST[username]';
  $password = '$_POST[password]';
  //$usr == $username &amp;&amp; $psw == $password
  session_start();
  if ($_SESSION['login']==true || ($_POST['username']==""admin"" &amp;&amp; $_POST['password']==""password"")) {
    echo ""password accepted"";
    $_SESSION['login']=true;
    else {
      echo ""incorrect login"";
    }
    ?&gt;

  &lt;form name=""input"" action=""adminportal.php"" method=""get""&gt;
    &lt;input type=""submit"" value=""Home""&gt;
  &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
","<p>Your code could look more like:</p>

<pre class=""lang-php prettyprint-override""><code>&lt;?php
session_start();
$errorMsg = """";
$validUser = $_SESSION[""login""] === true;
if(isset($_POST[""sub""])) {
  $validUser = $_POST[""username""] == ""admin"" &amp;&amp; $_POST[""password""] == ""password"";
  if(!$validUser) $errorMsg = ""Invalid username or password."";
  else $_SESSION[""login""] = true;
}
if($validUser) {
   header(""Location: /login-success.php""); die();
}
?&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta http-equiv=""content-type"" content=""text/html;charset=utf-8"" /&gt;
  &lt;title&gt;Login&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;form name=""input"" action="""" method=""post""&gt;
    &lt;label for=""username""&gt;Username:&lt;/label&gt;&lt;input type=""text"" value=""&lt;?= $_POST[""username""] ?&gt;"" id=""username"" name=""username"" /&gt;
    &lt;label for=""password""&gt;Password:&lt;/label&gt;&lt;input type=""password"" value="""" id=""password"" name=""password"" /&gt;
    &lt;div class=""error""&gt;&lt;?= $errorMsg ?&gt;&lt;/div&gt;
    &lt;input type=""submit"" value=""Home"" name=""sub"" /&gt;
  &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Now, when the page is redirected based on the <code>header('LOCATION:wherever.php)</code>, put <code>session_start()</code> at the top of the page and test to make sure <code>$_SESSION['login'] === true</code>. Remember that <code>==</code> would be true if <code>$_SESSION['login'] == 1</code> as well.
Of course, this is a bad idea for security reasons, but my example may teach you a different way of using PHP.</p>
","19531260"
"Why check both isset() and !empty()","149683","","<p>Is there a difference between <code>isset</code> and <code>!empty</code>. If I do this double boolean check, is it correct this way or redundant? and is there a shorter way to do the same thing?</p>

<pre><code>isset($vars[1]) AND !empty($vars[1])
</code></pre>
","<p>This is completely redundant. <code>empty</code> is more or less shorthand for <code>!isset($foo) || !$foo</code>, and <code>!empty</code> is analogous to <code>isset($foo) &amp;&amp; $foo</code>. I.e. <code>empty</code> does the reverse thing of <code>isset</code> plus an additional check for the <em>truthiness</em> of a value.  </p>

<p>Or in other words, <code>empty</code> is the same as <code>!$foo</code>, but doesn't throw warnings if the variable doesn't exist. That's the main point of this function: do a boolean comparison without worrying about the variable being set.</p>

<p><a href=""http://php.net/empty"" rel=""noreferrer"">The manual</a> puts it like this:</p>

<blockquote>
  <p><code>empty()</code> is the opposite of <code>(boolean) var</code>, <strong>except that no warning is generated when the variable is not set.</strong></p>
</blockquote>

<p>You can simply use <code>!empty($vars[1])</code> here.</p>
","4559976"
"How to get body of a POST in php?","149646","","<p>I submit as POST to a php page the following: </p>

<pre><code>{a:1}
</code></pre>

<p>This is the body of the request (a POST request).<br>
In php, what do I have to do to extract that value?  </p>

<pre><code>var_dump($_POST); 
</code></pre>

<p>is not the solution, not working.</p>
","<p>To access the entity body of a POST or PUT request (or any other HTTP method):</p>

<pre><code>$entityBody = file_get_contents('php://input');
</code></pre>

<p>Also, the <code>STDIN</code> constant is an already-open stream to <code>php://input</code>, so you can alternatively do:</p>

<pre><code>$entityBody = stream_get_contents(STDIN);
</code></pre>

<p>From the <a href=""http://php.net/manual/en/wrappers.php.php"" rel=""noreferrer"">PHP manual entry on I/O streams<sup><em>docs</em></sup></a>:</p>

<blockquote>
  <p><em>php://input</em> is a read-only stream that allows you to read raw data
  from the request body. In the case of POST requests, it is preferable
  to use <em>php://input</em> instead of <code>$HTTP_RAW_POST_DATA</code> as it does not
  depend on special php.ini directives. Moreover, for those cases where
  <code>$HTTP_RAW_POST_DATA</code> is not populated by default, it is a potentially
  less memory intensive alternative to activating
  always_populate_raw_post_data. <em>php://input</em> is not available with
  enctype=""multipart/form-data"".</p>
</blockquote>

<p>Specifically you'll want to note that the <code>php://input</code> stream, regardless of how you access it in a web SAPI, <em>is not seekable</em>. This means that it can only be read once. If you're working in an environment where large HTTP entity bodies are routinely uploaded you may wish to maintain the input in its stream form (rather than buffering it like the first example above).</p>

<p>To maintain the stream resource something like this can be helpful:</p>

<pre><code>&lt;?php

function detectRequestBody() {
    $rawInput = fopen('php://input', 'r');
    $tempStream = fopen('php://temp', 'r+');
    stream_copy_to_stream($rawInput, $tempStream);
    rewind($tempStream);

    return $tempStream;
}
</code></pre>

<p><code>php://temp</code> allows you to manage memory consumption because it will transparently switch to filesystem storage after a certain amount of data is stored (2M by default). This size can be manipulated in the php.ini file or by appending <code>/maxmemory:NN</code>, where <code>NN</code> is the maximum amount of data to keep in memory before using a temporary file, in bytes.</p>

<p>Of course, unless you have a really good reason for seeking on the input stream, you shouldn't need this functionality in a web application. Reading the HTTP request entity body once is usually enough -- don't keep clients waiting all day while your app figures out what to do.</p>

<p>Note that php://input is not available for requests specifying a <code>Content-Type: multipart/form-data</code> header (<code>enctype=""multipart/form-data""</code> in HTML forms). This results from PHP already having parsed the form data into the <code>$_POST</code> superglobal.</p>
","8945912"
"Laravel: Auth::user()->id trying to get a property of a non-object","149458","","<p>I'm getting the following error ""trying to get a property of a non-object"" when I submit a form to add a user, the error is apparently on the first line: Auth::user()->id of the following:</p>

<pre><code>$id = Auth::user()-&gt;id;
$currentuser = User::find($id);
$usergroup = $currentuser-&gt;user_group;
$group = Sentry::getGroupProvider()-&gt;findById($usergroup);

$generatedPassword = $this-&gt;_generatePassword(8,8);
$user = Sentry::register(array('email' =&gt; $input['email'], 'password' =&gt; $generatedPassword, 'user_group' =&gt; $usergroup));

$user-&gt;addGroup($group);
</code></pre>

<p>Any ideas? I've searched for a while and everything I see says this should work fine. My user is logged in using the Sentry 2 authentication bundle.</p>
","<p>If you are using <code>Sentry</code> check the logged in user with <code>Sentry::getUser()-&gt;id</code>. The error you get is that the <code>Auth::user()</code> returns NULL and it tries to get id from NULL hence the error <code>trying to get a property from a non-object</code>. </p>
","17836415"
"How do I PHP-unserialize a jQuery-serialized form?","149236","","<p>Using <code>$('#form').serialize()</code>, I was able to send this over to a PHP page. Now how do I unserialize it in PHP? It was serialized in jQuery.</p>
","<p>You shouldn't have to unserialize anything in PHP from the jquery <code>serialize</code> method. If you serialize the data, it should be sent to PHP as query parameters if you are using a GET method ajax request or post vars if you are using a POST ajax request. So in PHP, you would access values like <code>$_POST[""varname""]</code> or <code>$_GET[""varname""]</code> depending on the request type. </p>

<p>The <code>serialize</code> method just takes the form elements and puts them in string form. <code>""varname=val&amp;var2=val2""</code></p>
","1792633"
"How to remove duplicate values from an array in PHP","149226","","<p>How can I remove duplicate values from an array in PHP?</p>
","<p>Use <a href=""http://php.net/array_unique"" rel=""noreferrer"">array_unique()</a>.</p>

<p>Example:</p>

<pre><code>$array = array(1, 2, 2, 3);
$array = array_unique($array); // Array is now (1, 2, 3)
</code></pre>
","307655"
"Ajax Upload image","149205","","<p>Q.1 I would like to convert this form to ajax but it seems like my ajax code lacks something. 
On submit doesn't do anything at all.</p>

<p>Q2. I also want the function to fire on change when the file has been selected not to wait for a submit.</p>

<p>Here is JS.</p>

<pre><code>$('#imageUploadForm').on('submit',(function(e) {
    e.preventDefault()
    $.ajax({
        type:'POST',
        url: $(this).attr('action'),
        data:$(this).serialize(),
        cache:false
    });
}));
</code></pre>

<p>and the HTMl with php.</p>

<pre><code>&lt;form name=""photo"" id=""imageUploadForm"" enctype=""multipart/form-data"" action=""&lt;?php echo $_SERVER[""PHP_SELF""];?&gt;"" method=""post""&gt;
    &lt;input type=""file"" style=""widows:0; height:0"" id=""ImageBrowse"" hidden=""hidden"" name=""image"" size=""30""/&gt;
    &lt;input type=""submit"" name=""upload"" value=""Upload"" /&gt;
    &lt;img width=""100"" style=""border:#000; z-index:1;position: relative; border-width:2px; float:left"" height=""100px"" src=""&lt;?php echo $upload_path.$large_image_name.$_SESSION['user_file_ext'];?&gt;"" id=""thumbnail""/&gt;
&lt;/form&gt;
</code></pre>
","<p>first in your ajax call include success &amp; error function and then check if it gives you error or what?</p>

<p>your code should be like this </p>

<pre><code>$(document).ready(function (e) {
    $('#imageUploadForm').on('submit',(function(e) {
        e.preventDefault();
        var formData = new FormData(this);

        $.ajax({
            type:'POST',
            url: $(this).attr('action'),
            data:formData,
            cache:false,
            contentType: false,
            processData: false,
            success:function(data){
                console.log(""success"");
                console.log(data);
            },
            error: function(data){
                console.log(""error"");
                console.log(data);
            }
        });
    }));

    $(""#ImageBrowse"").on(""change"", function() {
        $(""#imageUploadForm"").submit();
    });
});
</code></pre>
","20462576"
"add allow_url_fopen to my php.ini using .htaccess","149202","","<p>I want to allow <code>allow_url_fopen</code> on my server . I have asked my host and they said it can be done with a <code>.htaccess</code> file. Can anyone tell me how to go about this ?</p>
","<p>Try this, but I don't think it will work because you're not supposed to be able to change this </p>

<p>Put this line in an htaccess file in the directory you want the setting to be enabled:</p>

<pre><code>php_value allow_url_fopen On
</code></pre>

<p>Note that this setting will only apply to PHP file's in the same directory as the htaccess file.</p>

<p>As an alternative to using url_fopen, try using curl.</p>
","3694254"
"Remove non-numeric characters (except periods and commas) from a string","149149","","<p>If I have the following values:</p>

<pre><code> $var1 = AR3,373.31

 $var2 = 12.322,11T
</code></pre>

<p>How can I create a new variable and set it to a copy of the data that has any non-numeric characters removed, with the exception of commas and periods? The values above would return the following results:</p>

<pre><code> $var1_copy = 3,373.31

 $var2_copy = 12.322,11
</code></pre>
","<p>You could use <a href=""http://www.php.net/manual/en/function.preg-replace.php"" rel=""noreferrer"">preg_replace</a> to swap out all non numeric characters and the comma and period/full stop as follows:</p>

<pre><code>&lt;?php
    $testString = ""12.322,11T"";
    echo preg_replace(""/[^0-9,.]/"", """", $testString);
?&gt;
</code></pre>
","4949347"
"What causes an HTTP 405 ""invalid method (HTTP verb)"" error when POSTing a form to PHP on IIS?","149018","","<p>I have one form in a PHP (5.2.9-1) application that causes IIS (Microsoft-IIS/6.0) to throw the following error when POSTed:</p>

<blockquote>
  <p>The page you are looking for cannot be displayed because an invalid method (HTTP verb) was used to attempt access.</p>
</blockquote>

<p>It's an HTTP 405 status code. All other forms in the application work, so I believe that the IIS 'verbs' setting for PHP pages is correct.</p>

<p>This is a customer's server, which I have no access to for verifying settings or testing code. All I can do is send the customer replacement files. Other customers on IIS servers have no such issue.</p>

<p>The form is perfectly straightforward:</p>

<pre><code>&lt;form method=""post"" action=""index.php""&gt;
    ... fields ... 
&lt;/form&gt;
</code></pre>

<p>What can cause IIS to throw that error on one form only, but work fine on others?</p>
","<p>I managed to get FTP access to the customer's server and so was able to track down the problem.</p>

<p>After the form is POSTed, I authenticate the user and then redirect to the main part of the app.</p>

<pre><code>Util::redirect('/apps/content');
</code></pre>

<p>The error was occurring not on the posting of the form, but on the redirect immediately following it. For some reason, IIS was continuing to presume the POST method for the redirect, and then objecting to the POST to <code>/apps/content</code> as it's a directory.</p>

<p>The error message never indicated that it was the following page that was generating the error - thanks Microsoft!</p>

<p>The solution was to add a trailing slash:</p>

<pre><code>Util::redirect('/apps/content/');
</code></pre>

<p>IIS could then resolve the redirect to a default document as is no longer attempting to POST to a directory.</p>
","1404352"
"How to check if mysql returns null/empty","148931","","<p>In by DB I have a table with a field called 'fk_ownerID'. By default, when I add a new table row, the 'fk_ownerID' is empty. In Toad for MySQL, this is shown as {null}. If 'fk_ownerID' is given a value, and I later remove this value, I set fk_ownerID = """".</p>

<p>Now, I have the following code:</p>

<pre><code>$result = $dal-&gt;getRowByValue('tableName','id', $_POST['myID']);

// Check to see if any rows where returned
if (mysql_num_rows($result) &gt; 0)
{
  while ($row = mysql_fetch_array($result))
  {
    $ownerID = $row[""fk_ownerID""];    
  }
}
</code></pre>

<p>Now the variable $ownerID should have a number, or not. But I'm unsure how to check this. Currently I'm doing this:</p>

<pre><code>if ( (strlen($ownerID) == 0) || ($ownerID == '0') || ($ownerID == 'null') )
</code></pre>

<p>But I'm pretty sure only one of these tests should be necessary.</p>

<p>What is the best way to check if a row field is empty or null?</p>
","<p>Use empty() and/or is_null()</p>

<p><a href=""http://www.php.net/empty"" rel=""noreferrer"">http://www.php.net/empty</a> <a href=""http://www.php.net/is_null"" rel=""noreferrer"">http://www.php.net/is_null</a></p>

<p>Empty alone will achieve your current usage, is_null would just make more control possible if you wanted to distinguish between a field that is null and a field that is empty.</p>
","1693437"
"Escaping single quote in PHP when inserting into MySQL","148642","","<p>I have a perplexing issue that I can't seem to comprehend... I'm hoping someone here might be able to point me in the right direction...</p>

<p>I have two SQL statements:
- the first enters information from a form into the database.
- the second takes data from the database entered above, sends an email and then logs the details of the transaction</p>

<p>The problem is that it a appears that a single quote is triggering a MySQL error on the second entry only!!!  The first instance works without issue but the second instance triggers the <code>mysql_error()</code>.</p>

<p>Does the data from a form get handled differently from the data captured in a form?</p>

<p>Query#1 - This works without issue (and without escaping the single quote)</p>

<pre><code>$result = mysql_query(""INSERT INTO job_log 
(order_id, supplier_id, category_id, service_id, qty_ordered, customer_id, user_id, salesperson_ref, booking_ref, booking_name, address, suburb, postcode, state_id, region_id, email, phone, phone2, mobile, delivery_date, stock_taken, special_instructions, cost_price, cost_price_gst, sell_price, sell_price_gst, ext_sell_price, retail_customer, created, modified, log_status_id) 
VALUES 
('$order_id', '$supplier_id', '$category_id', '{$value['id']}', '{$value['qty']}', '$customer_id', '$user_id', '$salesperson_ref', '$booking_ref', '$booking_name', '$address', '$suburb', '$postcode', '$state_id', '$region_id', '$email', '$phone', '$phone2', '$mobile', STR_TO_DATE('$delivery_date', '%d/%m/%Y'), '$stock_taken', '$special_instructions', '$cost_price', '$cost_price_gst', '$sell_price', '$sell_price_gst', '$ext_sell_price', '$retail_customer', '"".date('Y-m-d H:i:s', time()).""', '"".date('Y-m-d H:i:s', time()).""', '1')"");
</code></pre>

<p>Query#2 - This fails when entering a name with a single quote (i.e. O'Brien)</p>

<pre><code>$query = mysql_query(""INSERT INTO message_log 
(order_id, timestamp, message_type, email_from, supplier_id, primary_contact, secondary_contact, subject, message_content, status) 
VALUES 
('$order_id', '"".date('Y-m-d H:i:s', time()).""', '$email', '$from', '$row-&gt;supplier_id', '$row-&gt;primary_email' ,'$row-&gt;secondary_email', '$subject', '$message_content', '1')"");
</code></pre>
","<p>You should be escaping each of these strings (in both snippets) with <code>mysql_real_escape_string()</code>.</p>

<p><a href=""http://us3.php.net/mysql-real-escape-string"" rel=""noreferrer"">http://us3.php.net/mysql-real-escape-string</a></p>

<p>The reason your two queries are behaving differently is likely because you have <code>magic_quotes_gpc</code> turned on (which you should know is a bad idea).  This means that strings gathered from $_GET, $_POST and $_COOKIES are escaped for you (i.e., <code>""O'Brien"" -&gt; ""O\'Brien""</code>).</p>

<p>Once you store the data, and subsequently retrieve it again, the string you get back from the database will <em>not</em> be automatically escaped for you. You'll get back <code>""O'Brien""</code>. So, you will need to pass it through <code>mysql_real_escape_string()</code>.</p>
","2687891"
"How to get response using cURL in PHP","148612","","<p>I want to have a standalone PHP class where I want to have a function which calls an API through cURL and gets the response. Can someone help me in this? </p>

<p>Thanks. </p>
","<p>just use below piece of code to get the response from restful web service url , i use social mention url,</p>

<pre><code>$response = get_web_page(""http://socialmention.com/search?q=iphone+apps&amp;f=json&amp;t=microblogs&amp;lang=fr"");
$resArr = array();
$resArr = json_decode($response);
echo ""&lt;pre&gt;""; print_r($resArr); echo ""&lt;/pre&gt;"";

function get_web_page($url) {
    $options = array(
        CURLOPT_RETURNTRANSFER =&gt; true,   // return web page
        CURLOPT_HEADER         =&gt; false,  // don't return headers
        CURLOPT_FOLLOWLOCATION =&gt; true,   // follow redirects
        CURLOPT_MAXREDIRS      =&gt; 10,     // stop after 10 redirects
        CURLOPT_ENCODING       =&gt; """",     // handle compressed
        CURLOPT_USERAGENT      =&gt; ""test"", // name of client
        CURLOPT_AUTOREFERER    =&gt; true,   // set referrer on redirect
        CURLOPT_CONNECTTIMEOUT =&gt; 120,    // time-out on connect
        CURLOPT_TIMEOUT        =&gt; 120,    // time-out on response
    ); 

    $ch = curl_init($url);
    curl_setopt_array($ch, $options);

    $content  = curl_exec($ch);

    curl_close($ch);

    return $content;
}
</code></pre>
","6518125"
"Laravel checking if record exists","148392","","<p>New to laravel, so excuse the newbie question but how do I find if a record exists?</p>

<pre><code>$user = User::where('email', '=', Input::get('email'));
</code></pre>

<p>What would I do here to see if <code>$user</code> has a record?</p>
","<p>It depends if you want to work with the user afterwards or only check if one exists.</p>

<p>If you want to use the user object if it exists:</p>

<pre><code>$user = User::where('email', '=', Input::get('email'))-&gt;first();
if ($user === null) {
   // user doesn't exist
}
</code></pre>

<p>And if you only want to check</p>

<pre><code>if (User::where('email', '=', Input::get('email'))-&gt;count() &gt; 0) {
   // user found
}
</code></pre>

<p>Or even nicer</p>

<pre><code>if (User::where('email', '=', Input::get('email'))-&gt;exists()) {
   // user found
}
</code></pre>
","27095159"
"How to Truncate a string in PHP to the word closest to a certain number of characters?","148346","","<p>I have a code snippet written in PHP that pulls a block of text from a database and sends it out to a widget on a webpage.  The original block of text can be a lengthy article or a short sentence or two; but for this widget I can't display more than, say, 200 characters.  I could use substr() to chop off the text at 200 chars, but the result would be cutting off in the middle of words-- what I really want is to chop the text at the end of the last <i>word</i> before 200 chars.</p>
","<p>By using the <a href=""http://www.php.net/wordwrap"" rel=""noreferrer"">wordwrap</a> function. It splits the texts in multiple lines such that the maximum width is the one you specified, breaking at word boundaries. After splitting, you simply take the first line:</p>

<pre><code>substr($string, 0, strpos(wordwrap($string, $your_desired_width), ""\n""));
</code></pre>

<p>One thing this oneliner doesn't handle is the case when the text itself is shorter than the desired width. To handle this edge-case, one should do something like:</p>

<pre><code>if (strlen($string) &gt; $your_desired_width) 
{
    $string = wordwrap($string, $your_desired_width);
    $string = substr($string, 0, strpos($string, ""\n""));
}
</code></pre>

<hr>

<p>The above solution has the problem of prematurely cutting the text if it contains a newline before the actual cutpoint. Here a version which solves this problem:</p>

<pre><code>function tokenTruncate($string, $your_desired_width) {
  $parts = preg_split('/([\s\n\r]+)/', $string, null, PREG_SPLIT_DELIM_CAPTURE);
  $parts_count = count($parts);

  $length = 0;
  $last_part = 0;
  for (; $last_part &lt; $parts_count; ++$last_part) {
    $length += strlen($parts[$last_part]);
    if ($length &gt; $your_desired_width) { break; }
  }

  return implode(array_slice($parts, 0, $last_part));
}
</code></pre>

<p>Also, here is the PHPUnit testclass used to test the implementation:</p>

<pre><code>class TokenTruncateTest extends PHPUnit_Framework_TestCase {
  public function testBasic() {
    $this-&gt;assertEquals(""1 3 5 7 9 "",
      tokenTruncate(""1 3 5 7 9 11 14"", 10));
  }

  public function testEmptyString() {
    $this-&gt;assertEquals("""",
      tokenTruncate("""", 10));
  }

  public function testShortString() {
    $this-&gt;assertEquals(""1 3"",
      tokenTruncate(""1 3"", 10));
  }

  public function testStringTooLong() {
    $this-&gt;assertEquals("""",
      tokenTruncate(""toooooooooooolooooong"", 10));
  }

  public function testContainingNewline() {
    $this-&gt;assertEquals(""1 3\n5 7 9 "",
      tokenTruncate(""1 3\n5 7 9 11 14"", 10));
  }
}
</code></pre>

<h1><strong>EDIT :</strong></h1>

<p>Special UTF8 characters like 'à' are not handled. Add 'u' at the end of the REGEX to handle it:</p>

<p><code>$parts = preg_split('/([\s\n\r]+)/u', $string, null, PREG_SPLIT_DELIM_CAPTURE);</code></p>
","79986"
"Getting visitors country from their IP","148010","","<p>I want to get visitors country via their IP... Right now I'm using this (<a href=""http://api.hostip.info/country.php?ip="">http://api.hostip.info/country.php?ip=</a>...... )</p>

<p>Here is my code:</p>

<pre><code>&lt;?php

if (isset($_SERVER['HTTP_CLIENT_IP']))
{
    $real_ip_adress = $_SERVER['HTTP_CLIENT_IP'];
}

if (isset($_SERVER['HTTP_X_FORWARDED_FOR']))
{
    $real_ip_adress = $_SERVER['HTTP_X_FORWARDED_FOR'];
}
else
{
    $real_ip_adress = $_SERVER['REMOTE_ADDR'];
}

$cip = $real_ip_adress;
$iptolocation = 'http://api.hostip.info/country.php?ip=' . $cip;
$creatorlocation = file_get_contents($iptolocation);

?&gt;
</code></pre>

<p>Well, it's working properly, but the thing is, this returns the country code like US or CA., and not the whole country name like United States or Canada.</p>

<p>So, is there any good alternative to hostip.info offers this?</p>

<p>I know that I can just write some code that will eventually turn this two letters to whole country name, but I'm just too lazy to write a code that contains all countries...</p>

<p>P.S: For some reason I don't want to use any ready made CSV file or any code that will grab this information for me, something like ip2country ready made code and CSV.</p>
","<p><strong>Try this simple PHP function.</strong></p>

<pre><code>&lt;?php

function ip_info($ip = NULL, $purpose = ""location"", $deep_detect = TRUE) {
    $output = NULL;
    if (filter_var($ip, FILTER_VALIDATE_IP) === FALSE) {
        $ip = $_SERVER[""REMOTE_ADDR""];
        if ($deep_detect) {
            if (filter_var(@$_SERVER['HTTP_X_FORWARDED_FOR'], FILTER_VALIDATE_IP))
                $ip = $_SERVER['HTTP_X_FORWARDED_FOR'];
            if (filter_var(@$_SERVER['HTTP_CLIENT_IP'], FILTER_VALIDATE_IP))
                $ip = $_SERVER['HTTP_CLIENT_IP'];
        }
    }
    $purpose    = str_replace(array(""name"", ""\n"", ""\t"", "" "", ""-"", ""_""), NULL, strtolower(trim($purpose)));
    $support    = array(""country"", ""countrycode"", ""state"", ""region"", ""city"", ""location"", ""address"");
    $continents = array(
        ""AF"" =&gt; ""Africa"",
        ""AN"" =&gt; ""Antarctica"",
        ""AS"" =&gt; ""Asia"",
        ""EU"" =&gt; ""Europe"",
        ""OC"" =&gt; ""Australia (Oceania)"",
        ""NA"" =&gt; ""North America"",
        ""SA"" =&gt; ""South America""
    );
    if (filter_var($ip, FILTER_VALIDATE_IP) &amp;&amp; in_array($purpose, $support)) {
        $ipdat = @json_decode(file_get_contents(""http://www.geoplugin.net/json.gp?ip="" . $ip));
        if (@strlen(trim($ipdat-&gt;geoplugin_countryCode)) == 2) {
            switch ($purpose) {
                case ""location"":
                    $output = array(
                        ""city""           =&gt; @$ipdat-&gt;geoplugin_city,
                        ""state""          =&gt; @$ipdat-&gt;geoplugin_regionName,
                        ""country""        =&gt; @$ipdat-&gt;geoplugin_countryName,
                        ""country_code""   =&gt; @$ipdat-&gt;geoplugin_countryCode,
                        ""continent""      =&gt; @$continents[strtoupper($ipdat-&gt;geoplugin_continentCode)],
                        ""continent_code"" =&gt; @$ipdat-&gt;geoplugin_continentCode
                    );
                    break;
                case ""address"":
                    $address = array($ipdat-&gt;geoplugin_countryName);
                    if (@strlen($ipdat-&gt;geoplugin_regionName) &gt;= 1)
                        $address[] = $ipdat-&gt;geoplugin_regionName;
                    if (@strlen($ipdat-&gt;geoplugin_city) &gt;= 1)
                        $address[] = $ipdat-&gt;geoplugin_city;
                    $output = implode("", "", array_reverse($address));
                    break;
                case ""city"":
                    $output = @$ipdat-&gt;geoplugin_city;
                    break;
                case ""state"":
                    $output = @$ipdat-&gt;geoplugin_regionName;
                    break;
                case ""region"":
                    $output = @$ipdat-&gt;geoplugin_regionName;
                    break;
                case ""country"":
                    $output = @$ipdat-&gt;geoplugin_countryName;
                    break;
                case ""countrycode"":
                    $output = @$ipdat-&gt;geoplugin_countryCode;
                    break;
            }
        }
    }
    return $output;
}

?&gt;
</code></pre>

<p><strong>How to use:</strong></p>

<p><em>Example1: Get visitor IP address details</em></p>

<pre><code>&lt;?php

echo ip_info(""Visitor"", ""Country""); // India
echo ip_info(""Visitor"", ""Country Code""); // IN
echo ip_info(""Visitor"", ""State""); // Andhra Pradesh
echo ip_info(""Visitor"", ""City""); // Proddatur
echo ip_info(""Visitor"", ""Address""); // Proddatur, Andhra Pradesh, India

print_r(ip_info(""Visitor"", ""Location"")); // Array ( [city] =&gt; Proddatur [state] =&gt; Andhra Pradesh [country] =&gt; India [country_code] =&gt; IN [continent] =&gt; Asia [continent_code] =&gt; AS )

?&gt;
</code></pre>

<p><em>Example 2: Get details of any IP address. [Support IPV4 &amp; IPV6]</em></p>

<pre><code>&lt;?php

echo ip_info(""173.252.110.27"", ""Country""); // United States
echo ip_info(""173.252.110.27"", ""Country Code""); // US
echo ip_info(""173.252.110.27"", ""State""); // California
echo ip_info(""173.252.110.27"", ""City""); // Menlo Park
echo ip_info(""173.252.110.27"", ""Address""); // Menlo Park, California, United States

print_r(ip_info(""173.252.110.27"", ""Location"")); // Array ( [city] =&gt; Menlo Park [state] =&gt; California [country] =&gt; United States [country_code] =&gt; US [continent] =&gt; North America [continent_code] =&gt; NA )

?&gt;
</code></pre>
","13600004"
"php stdClass to array","147881","","<p>I have a problem to convert an object stdClass to array.
I have tried in this way:</p>

<pre><code>return (array) $booking;
</code></pre>

<p>or</p>

<pre><code>return (array) json_decode($booking,true);
</code></pre>

<p>or</p>

<pre><code>return (array) json_decode($booking);
</code></pre>

<p>The array before the cast is full with one record, after my try to cast it is empty.
How to cast / convert it without delete its rows?</p>

<p>array before cast:</p>

<pre><code>array(1) {   [0]=&gt;   object(stdClass)#23 (36) {     [""id""]=&gt;     string(1) ""2""     [""name""]=&gt;     string(0) """"     [""code""]=&gt;     string(5) ""56/13""   } } 
</code></pre>

<p>after cast is empty NULL if I try to make a <code>var_dump($booking);</code></p>

<p>I have also tried this function but always empty:</p>

<pre><code>public function objectToArray($d) {
        if (is_object($d)) {
            // Gets the properties of the given object
            // with get_object_vars function
            $d = get_object_vars($d);
        }

        if (is_array($d)) {
            /*
            * Return array converted to object
            * Using __FUNCTION__ (Magic constant)
            * for recursive call
            */
            return array_map(__FUNCTION__, $d);
        }
        else {
            // Return array
            return $d;
        }
    }
</code></pre>
","<h2>The <em>lazy</em> one-liner method</h2>

<p>You can do this in a one liner using the JSON methods if you're willing to lose a tiny bit of performance (though some have reported it being faster than iterating through the objects recursively - most likely because PHP is <a href=""https://3v4l.org/HmmIB"" rel=""noreferrer"">slow at calling functions</a>). ""<em>But I already did this</em>"" you say. Not exactly - you used <a href=""http://www.php.net/json_decode"" rel=""noreferrer""><code>json_decode</code></a> on the array, but you need to encode it with <a href=""http://www.php.net/json_encode"" rel=""noreferrer""><code>json_encode</code></a> first.</p>

<h3>Requirements</h3>

<p>The <a href=""http://www.php.net/json_encode"" rel=""noreferrer""><code>json_encode</code></a> and <a href=""http://www.php.net/json_decode"" rel=""noreferrer""><code>json_decode</code></a> methods. These are automatically bundled in PHP 5.2.0 and up. If you use any older version there's also a <a href=""http://pecl.php.net/package/json"" rel=""noreferrer"">PECL library</a> (that said, in that case you should <em>really</em> update your PHP installation. Support for 5.1 stopped in 2006.)</p>

<hr>

<h2>Converting an <code>array</code>/<code>stdClass</code> -> <code>stdClass</code></h2>

<pre><code>$stdClass = json_decode(json_encode($booking));
</code></pre>

<hr>

<h2>Converting an <code>array</code>/<code>stdClass</code> -> <code>array</code></h2>

<p>The manual specifies the second argument of <a href=""http://www.php.net/json_decode"" rel=""noreferrer""><code>json_decode</code></a> as:</p>

<blockquote>
  <p><strong>assoc</strong><br>
  <em>When <code>TRUE</code>, returned objects will be converted into associative arrays.</em></p>
</blockquote>

<p>Hence the following line will convert your entire object into an array:</p>

<pre><code>$array = json_decode(json_encode($booking), true);
</code></pre>
","18576902"
"How do I extract data from JSON with PHP?","147818","","<blockquote>
  <p>This is intended to be a general reference question and answer covering many of the never-ending <em>""How do I access data in my JSON?""</em> questions. It is here to handle the broad basics of decoding JSON in PHP and accessing the results.</p>
</blockquote>

<p>I have the JSON:</p>

<pre><code>{
    ""type"": ""donut"",
    ""name"": ""Cake"",
    ""toppings"": [
        { ""id"": ""5002"", ""type"": ""Glazed"" },
        { ""id"": ""5006"", ""type"": ""Chocolate with Sprinkles"" },
        { ""id"": ""5004"", ""type"": ""Maple"" }
    ]
}
</code></pre>

<p>How do I decode this in PHP and access the resulting data?</p>
","<h3><em>Intro</em></h3>

<p>First off you have a string. JSON is not an array, an object, or a data structure. <a href=""http://json.org/"" rel=""noreferrer"">JSON</a> is a text-based serialization format - so a fancy string, but still just a string. Decode it in PHP by using <a href=""http://php.net/json_decode"" rel=""noreferrer""><code>json_decode()</code></a>.</p>

<pre><code> $data = json_decode($json);
</code></pre>

<p>Therein you might find:</p>

<ul>
<li>scalars: <a href=""http://php.net/string"" rel=""noreferrer"">strings</a>, <a href=""http://php.net/int"" rel=""noreferrer"">ints</a>, <a href=""http://php.net/float"" rel=""noreferrer"">floats</a>, and <a href=""http://php.net/bool"" rel=""noreferrer"">bools</a></li>
<li><a href=""http://php.net/null"" rel=""noreferrer"">nulls</a> (a special type of its own)</li>
<li>compound types: <a href=""http://php.net/object"" rel=""noreferrer"">objects</a> and <a href=""http://php.net/array"" rel=""noreferrer"">arrays</a>.</li>
</ul>

<p>These are the things that can be encoded in JSON. Or more accurately, these are PHP's versions of the things that can be encoded in JSON.</p>

<p>There's nothing special about them. They are not ""JSON objects"" or ""JSON arrays."" You've decoded the JSON - you now have <a href=""http://php.net/types"" rel=""noreferrer"">basic everyday PHP types</a>.</p>

<p>Objects will be instances of <a href=""http://php.net/manual/en/reserved.classes.php"" rel=""noreferrer"">stdClass</a>, a built-in class which is just a <a href=""https://stackoverflow.com/questions/931407/what-is-stdclass-in-php"">generic thing</a> that's not important here.</p>

<hr>

<h3><em>Accessing object properties</em></h3>

<p>You access the <a href=""http://php.net/manual/en/language.oop5.properties.php"" rel=""noreferrer"">properties</a> of one of these objects the same way you would for the public non-static properties of any other object, e.g. <code>$object-&gt;property</code>.</p>

<pre><code>$json = '
{
    ""type"": ""donut"",
    ""name"": ""Cake""
}';

$yummy = json_decode($json);

echo $yummy-&gt;type; //donut
</code></pre>

<hr>

<h3><em>Accessing array elements</em></h3>

<p>You access the elements of one of these arrays the same way you would for any other array, e.g. <a href=""http://php.net/manual/en/language.types.array.php#language.types.array.syntax.accessing"" rel=""noreferrer""><code>$array[0]</code></a>.</p>

<pre><code>$json = '
[
    ""Glazed"",
    ""Chocolate with Sprinkles"",
    ""Maple""
]';

$toppings = json_decode($json);

echo $toppings[1]; //Chocolate with Sprinkles
</code></pre>

<p>Iterate over it with <a href=""http://php.net/manual/en/control-structures.foreach.php"" rel=""noreferrer""><code>foreach</code></a>.</p>

<pre><code>foreach ($toppings as $topping) {
    echo $topping, ""\n"";
}
</code></pre>

<blockquote>
  <p>Glazed <br/>
  Chocolate with Sprinkles <br/>
  Maple</p>
</blockquote>

<p>Or mess about with any of the <a href=""http://php.net/manual/en/ref.array.php"" rel=""noreferrer"">bazillion built-in array functions</a>.</p>

<hr>

<h3><em>Accessing nested items</em></h3>

<p>The properties of objects and the elements of arrays might be more objects and/or arrays - you can simply continue to access their properties and members as usual, e.g. <code>$object-&gt;array[0]-&gt;etc</code>.</p>

<pre><code>$json = '
{
    ""type"": ""donut"",
    ""name"": ""Cake"",
    ""toppings"": [
        { ""id"": ""5002"", ""type"": ""Glazed"" },
        { ""id"": ""5006"", ""type"": ""Chocolate with Sprinkles"" },
        { ""id"": ""5004"", ""type"": ""Maple"" }
    ]
}';

$yummy = json_decode($json);

echo $yummy-&gt;toppings[2]-&gt;id; //5004
</code></pre>

<hr>

<h3><em>Passing <code>true</code> as the second argument to <a href=""http://php.net/json_decode"" rel=""noreferrer"">json_decode()</a></em></h3>

<p>When you do this, instead of objects you'll get associative arrays - arrays with strings for keys. Again you access the elements thereof as usual, e.g. <code>$array['key']</code>.</p>

<pre><code>$json = '
{
    ""type"": ""donut"",
    ""name"": ""Cake"",
    ""toppings"": [
        { ""id"": ""5002"", ""type"": ""Glazed"" },
        { ""id"": ""5006"", ""type"": ""Chocolate with Sprinkles"" },
        { ""id"": ""5004"", ""type"": ""Maple"" }
    ]
}';

$yummy = json_decode($json, true);

echo $yummy['toppings'][2]['type']; //Maple
</code></pre>

<hr>

<h3><em>Don't know how the data is structured</em></h3>

<p>Read the documentation for whatever it is you're getting the JSON from.</p>

<p>Look at the JSON - where you see curly brackets <code>{}</code> expect an object, where you see square brackets <code>[]</code> expect an array.</p>

<p>Hit the decoded data with a <a href=""http://php.net/print_r"" rel=""noreferrer""><code>print_r()</code></a>:</p>

<pre><code>$json = '
{
    ""type"": ""donut"",
    ""name"": ""Cake"",
    ""toppings"": [
        { ""id"": ""5002"", ""type"": ""Glazed"" },
        { ""id"": ""5006"", ""type"": ""Chocolate with Sprinkles"" },
        { ""id"": ""5004"", ""type"": ""Maple"" }
    ]
}';

$yummy = json_decode($json);

print_r($yummy);
</code></pre>

<p>and check the output:</p>

<pre><code>stdClass Object
(
    [type] =&gt; donut
    [name] =&gt; Cake
    [toppings] =&gt; Array
        (
            [0] =&gt; stdClass Object
                (
                    [id] =&gt; 5002
                    [type] =&gt; Glazed
                )

            [1] =&gt; stdClass Object
                (
                    [id] =&gt; 5006
                    [type] =&gt; Chocolate with Sprinkles
                )

            [2] =&gt; stdClass Object
                (
                    [id] =&gt; 5004
                    [type] =&gt; Maple
                )

        )

)
</code></pre>

<p>It'll tell you where you have objects, where you have arrays, along with the names and values of their members.</p>

<p>If you can only get so far into it before you get lost - go that far and hit <em>that</em> with <code>print_r()</code>:</p>

<pre><code>print_r($yummy-&gt;toppings[0]);
</code></pre>



<pre><code>stdClass Object
(
    [id] =&gt; 5002
    [type] =&gt; Glazed
)
</code></pre>

<p>Break the problem down into pieces that are easier to wrap your head around.</p>

<hr>

<h3><em><code>json_decode()</code> returns <code>null</code></em></h3>

<p>This happens because either:</p>

<ol>
<li>The JSON consists entirely of just that, <code>null</code>.</li>
<li>The JSON is invalid - check the result of <a href=""http://php.net/manual/en/function.json-last-error-msg.php"" rel=""noreferrer""><code>json_last_error_msg</code></a> or put it through something like <a href=""http://jsonlint.com/"" rel=""noreferrer"">JSONLint</a>.</li>
<li>It contains elements nested more than 512 levels deep. This default max depth can be overridden by passing an integer as the third argument to <a href=""http://php.net/json_decode"" rel=""noreferrer""><code>json_decode()</code></a>.</li>
</ol>

<p>If you need to change the max depth you're probably solving the wrong problem. Find out why you're getting such deeply nested data (e.g. the service you're querying that's generating the JSON has a bug) and get that to not happen.</p>

<hr>

<h3><em>Object property name contains a special character</em></h3>

<p>Sometimes you'll have an object property name that contains something like a hyphen <code>-</code> or at sign <code>@</code> which can't be used in a literal identifier. Instead you can use a string literal within curly braces to address it.</p>

<pre><code>$json = '{""@attributes"":{""answer"":42}}';
$thing = json_decode($json);

echo $thing-&gt;{'@attributes'}-&gt;answer; //42
</code></pre>

<p>If you have an integer as property see: <a href=""https://stackoverflow.com/questions/10333016/how-to-access-object-properties-with-names-like-integers"">How to access object properties with names like integers?</a> as reference.</p>

<hr>

<h3><em>Someone put JSON in your JSON</em></h3>

<p>It's ridiculous but it happens - there's JSON encoded as a string within your JSON. Decode, access the string as usual, decode <em>that</em>, and eventually get to what you need.</p>

<pre><code>$json = '
{
    ""type"": ""donut"",
    ""name"": ""Cake"",
    ""toppings"": ""[{ \""type\"": \""Glazed\"" }, { \""type\"": \""Maple\"" }]""
}';

$yummy = json_decode($json);
$toppings = json_decode($yummy-&gt;toppings);

echo $toppings[0]-&gt;type; //Glazed
</code></pre>

<hr>

<h3><em>Data doesn't fit in memory</em></h3>

<p>If your JSON is too large for <code>json_decode()</code> to handle at once things start to get tricky. See:</p>

<ul>
<li><a href=""https://stackoverflow.com/q/4049428/3942918"">Processing large JSON files in PHP</a></li>
<li><a href=""https://stackoverflow.com/q/26393235/3942918"">How to properly iterate through a big json file</a></li>
</ul>

<hr>

<h3><em>How to sort it</em></h3>

<p>See: <a href=""https://stackoverflow.com/q/17364127/3942918"">Reference: all basic ways to sort arrays and data in PHP</a>.</p>
","29308899"
"Fatal error: Class 'ZipArchive' not found in","147684","","<p>I have a problem that I install 'Archive_Zip 0.1.1' on Linux server, but when I try to run the script to create the zip file it gives the fatal error 
""<strong>Fatal error: Class 'ZipArchive' not found in ---</strong>""
where I put the code </p>

<pre><code>$zip = new ZipArchive;
var_dump($zip);
$res = $zip-&gt;open($filename, ZipArchive::OVERWRITE);
if($res !== TRUE){
    echo 'Error: Unable to create zip file';
    exit;
}
if(is_file($src)){
    $zip-&gt;addFile($src);
}else{
    //echo ""&lt;br&gt;"".dirname(__FILE__).$src;//'/install1';
    if(!is_dir($src)){
         $zip-&gt;close();
         @unlink($filename);
         echo 'Error: File not found';
         exit;
    }
    recurse_zip($src,$zip,$path_length);
}
$zip-&gt;close();
echo ""&lt;br&gt;file name "".$filename;
</code></pre>

<p>but it not found the class file. </p>

<p>Please tell me the solution what should I do to resolve the problem.
I also put php.ini file to the folder where script is, but it does not work.</p>
","<p>For the <a href=""http://www.php.net/manual/en/class.ziparchive.php"" rel=""noreferrer""><code>ZipArchive</code> class</a> to be present, PHP needs to have the <a href=""http://www.php.net/manual/en/book.zip.php"" rel=""noreferrer"">zip extension</a> installed.</p>

<p>See <a href=""http://www.php.net/manual/en/zip.installation.php"" rel=""noreferrer"">this page</a> for installation instructions (both Linux and Windows).</p>
","3872578"
"MySQL - count total number of rows in php","147676","","<p>What is the best MySQL command to count the total number of rows in a table without any conditions applied to it? I'm doing this through php, so maybe there is a php function which does this for me? I don't know. Here is an example of my php:</p>

<pre><code>&lt;?php
$con = mysql_connect(""server.com"",""user"",""pswd"");
if (!$con) {
  die('Could not connect: ' . mysql_error());
}

mysql_select_db(""db"", $con);

$result = mysql_query(""some command"");
$row = mysql_fetch_array($result);

mysql_close($con);
?&gt;
</code></pre>
","<pre><code>&lt;?php
$con = mysql_connect(""server.com"",""user"",""pswd"");
if (!$con) {
  die('Could not connect: ' . mysql_error());
}

mysql_select_db(""db"", $con);

$result = mysql_query(""select count(1) FROM table"");
$row = mysql_fetch_array($result);

$total = $row[0];
echo ""Total rows: "" . $total;

mysql_close($con);
?&gt;
</code></pre>
","6655670"
"How to get current route name in laravel 5?","147654","","<p>I am trying to get current route name using Laravel 5. </p>

<p>In laravel 4 i was able to do it using <strong>Route::currentRouteName()</strong>. </p>

<p>How can i do it in laravel 5?</p>

<p>Thanks</p>
","<p>Try this </p>

<pre><code>Route::getCurrentRoute()-&gt;getPath();
</code></pre>

<p>or</p>

<pre><code>\Request::route()-&gt;getName()
</code></pre>

<p>from v5.+</p>

<pre><code>use Illuminate\Support\Facades\Route;
$currentPath= Route::getFacadeRoot()-&gt;current()-&gt;uri();
</code></pre>

<p><strong>Laravel 5.3</strong></p>

<pre><code>Route::currentRouteName(); //use Illuminate\Support\Facades\Route;
</code></pre>

<p>Or if you need the action name</p>

<pre><code>Route::getCurrentRoute()-&gt;getActionName();
</code></pre>

<p>You can find everything about laravel Routes in the Laravel API:
<a href=""http://laravel.com/api/5.0/Illuminate/Routing/Router.html"" rel=""nofollow noreferrer"">http://laravel.com/api/5.0/Illuminate/Routing/Router.html</a>
<a href=""http://laravel.com/api/5.0/Illuminate/Routing.html"" rel=""nofollow noreferrer"">http://laravel.com/api/5.0/Illuminate/Routing.html</a></p>

<p><strong>Retrieving The Request URI</strong></p>

<p>The path method returns the request's URI. So, if the incoming request is targeted at <code>http://example.com/foo/bar</code>, the path method will return <code>foo/bar</code>:</p>

<pre><code>$uri = $request-&gt;path();
</code></pre>

<p>The <code>is</code> method allows you to verify that the incoming request URI matches a given pattern. You may use the <code>*</code> character as a wildcard when utilizing this method:</p>

<pre><code>if ($request-&gt;is('admin/*')) {
    //
}
</code></pre>

<p>To get the full URL, not just the path info, you may use the url method on the request instance:</p>

<pre><code>$url = $request-&gt;url();
</code></pre>
","30052319"
"How do I remove ï»¿ from the beginning of a file?","147458","","<p>I have a CSS file that looks fine when I open it using <a href=""http://en.wikipedia.org/wiki/Gedit"" rel=""noreferrer"">gedit</a>, but when it's read by PHP (to merge all the CSS files into one), this CSS has the following characters prepended to it: ï»¿</p>

<p>PHP removes all whitespace, so a random ï»¿ in the middle of the code messes up the entire thing. As I mentioned, I can't actually see these characters when I open the file in gedit, so I can't remove them very easily.</p>

<p>I googled the problem, and there is clearly something wrong with the file encoding, which makes sense being as I've been shifting the files around to different Linux/Windows servers via ftp and <a href=""http://en.wikipedia.org/wiki/Rsync"" rel=""noreferrer"">rsync</a>, with a range of text editors. I don't really know much about character encoding though, so help would be appreciated.</p>

<p>If it helps, the file is being saved in UTF-8 format, and gedit won't let me save it in ISO-8859-15 format (the document contains one or more characters that cannot be encoded using the specified character encoding). I tried saving it with Windows and Linux line endings, but neither helped.</p>
","<p>Three words for you:</p>

<p><a href=""http://en.wikipedia.org/wiki/Byte_order_mark"" rel=""noreferrer"">Byte Order Mark (BOM)</a></p>

<p>That's the representation for the UTF-8 BOM in ISO-8859-1. You have to tell your editor to not use BOMs or use a different editor to strip them out.</p>

<p>To automatize the BOM's removal you can use <code>awk</code> as shown in <a href=""https://stackoverflow.com/questions/1068650/using-awk-to-remove-the-byte-order-mark"">this question</a>.</p>

<p>As <a href=""https://stackoverflow.com/questions/3255993/how-do-i-remove-i-from-the-beginning-of-a-file/3256132#3256132"">another answer says</a>, the best would be for PHP to actually interpret the BOM correctly, for that you can use <a href=""http://us.php.net/mb_internal_encoding"" rel=""noreferrer""><code>mb_internal_encoding()</code></a>, like this:</p>

<pre><code> &lt;?php
   //Storing the previous encoding in case you have some other piece 
   //of code sensitive to encoding and counting on the default value.      
   $previous_encoding = mb_internal_encoding();

   //Set the encoding to UTF-8, so when reading files it ignores the BOM       
   mb_internal_encoding('UTF-8');

   //Process the CSS files...

   //Finally, return to the previous encoding
   mb_internal_encoding($previous_encoding);

   //Rest of the code...
  ?&gt;
</code></pre>
","3256014"
"Get file content from URL?","147435","","<p>When I use following URL in browser then it prompt me to download a text file with JSOn content.</p>

<p><a href=""https://chart.googleapis.com/chart?cht=p3&amp;chs=250x100&amp;chd=t:60,40&amp;chl=Hello|World&amp;chof=json"">https://chart.googleapis.com/chart?cht=p3&amp;chs=250x100&amp;chd=t:60,40&amp;chl=Hello|World&amp;chof=json</a></p>

<p><em><strong>(Click above URL see downloaded file content)</em></strong></p>

<p>Now I want to create a php page. I want that when I call this php page, it should call above URL and get content(json format) from file and show it on screen.</p>

<p>How can I do this ??</p>
","<p>Depending on your PHP configuration, this <em>may</em> be a easy as using:</p>

<pre><code>$jsonData = json_decode(file_get_contents('https://chart.googleapis.com/chart?cht=p3&amp;chs=250x100&amp;chd=t:60,40&amp;chl=Hello|World&amp;chof=json'));
</code></pre>

<p>However, if <code>allow_url_fopen</code> isn't enabled on your system, you could read the data via CURL as follows:</p>

<pre><code>&lt;?php
    $curlSession = curl_init();
    curl_setopt($curlSession, CURLOPT_URL, 'https://chart.googleapis.com/chart?cht=p3&amp;chs=250x100&amp;chd=t:60,40&amp;chl=Hello|World&amp;chof=json');
    curl_setopt($curlSession, CURLOPT_BINARYTRANSFER, true);
    curl_setopt($curlSession, CURLOPT_RETURNTRANSFER, true);

    $jsonData = json_decode(curl_exec($curlSession));
    curl_close($curlSession);
?&gt;
</code></pre>

<p>Incidentally, if you just want the raw JSON data, then simply remove the <code>json_decode</code>.</p>
","5522668"
"PHP new line break in emails","147416","","<p>I have the following code:</p>

<pre><code>$message = ""Good news! The item# $item_number on which you placed a bid of \$ $bid_price is now available for purchase at your bid price.\n
The seller, $bid_user is making this offer.\n
\nItem Title : $title\n

\nAll the best,\n
$bid_user\n
$email\n
"";

echo $message;
$htmlContent = $baseClass-&gt;email_friend($item_number, $title, $bid_price, $bid_user, $mcat, $message, $email, $VIEWSTATE, $EVENTVALIDATION, $URL);
</code></pre>

<p>The problem is that the <strong>new line break</strong> <code>(\n)</code> is not working.</p>
","<p>Try <code>\r\n</code> in place of <code>\n</code></p>

<p><a href=""http://www.go4expert.com/forums/showthread.php?t=8021"" rel=""nofollow noreferrer"">The difference between \n and \r\n</a></p>

<p>It should be noted that this is applicable to line returns in emails. For other scenarios, please refer to rokjarc's <a href=""https://stackoverflow.com/a/15685171/368406"">answer</a>.</p>
","3206748"
"How to Flatten a Multidimensional Array?","147302","","<p>Is it possible, in PHP, to flatten a (bi/multi)dimensional array without using recursion or references?</p>

<p>I'm only interested in the values so the keys can be ignored, I'm thinking in the lines of <code>array_map()</code> and <code>array_values()</code>.</p>
","<p>You can use the <a href=""http://uk.php.net/spl"" rel=""noreferrer"">Standard PHP Library (SPL)</a> to ""hide"" the recursion.</p>

<pre><code>$a = array(1,2,array(3,4, array(5,6,7), 8), 9);
$it = new RecursiveIteratorIterator(new RecursiveArrayIterator($a));
foreach($it as $v) {
  echo $v, "" "";
}
</code></pre>

<p>prints</p>

<pre><code>1 2 3 4 5 6 7 8 9 
</code></pre>
","1320259"
"PHP AES encrypt / decrypt","147301","","<p>I found an example for en/decoding strings in PHP. At first it looks very good but it wont work :-(</p>

<p>Does anyone know what the problem is?</p>

<pre><code>$Pass = ""Passwort"";
$Clear = ""Klartext"";

$crypted = fnEncrypt($Clear, $Pass);
echo ""Encrypted: "".$crypted.""&lt;/br&gt;"";

$newClear = fnDecrypt($crypted, $Pass);
echo ""Decrypted: "".$newClear.""&lt;/br&gt;"";

function fnEncrypt($sValue, $sSecretKey) {
    return trim(base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $sSecretKey, $sDecrypted, MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND))));
}

function fnDecrypt($sValue, $sSecretKey) {
    return trim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $sSecretKey, base64_decode($sEncrypted), MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND)));
}
</code></pre>

<p>The result is:</p>

<p>Encrypted: <code>boKRNTYYNp7AiOvY1CidqsAn9wX4ufz/D9XrpjAOPk8=</code></p>

<p>Decrypted: <code>—‚(ÑÁ   ^ yË~F'¸®Ó–í    œð2Á_B‰Â—</code></p>
","<p><code>$sDecrypted</code> and <code>$sEncrypted</code>  were undefined in your code.  See a solution that works (<strong>but is not secure!</strong>):</p>

<hr>

<h2>STOP!</h2>

<blockquote>
  <p>This example is <strong>insecure!</strong> Do not use it!</p>
</blockquote>

<hr>

<pre><code>$Pass = ""Passwort"";
$Clear = ""Klartext"";        

$crypted = fnEncrypt($Clear, $Pass);
echo ""Encrypred: "".$crypted.""&lt;/br&gt;"";

$newClear = fnDecrypt($crypted, $Pass);
echo ""Decrypred: "".$newClear.""&lt;/br&gt;"";        

function fnEncrypt($sValue, $sSecretKey)
{
    return rtrim(
        base64_encode(
            mcrypt_encrypt(
                MCRYPT_RIJNDAEL_256,
                $sSecretKey, $sValue, 
                MCRYPT_MODE_ECB, 
                mcrypt_create_iv(
                    mcrypt_get_iv_size(
                        MCRYPT_RIJNDAEL_256, 
                        MCRYPT_MODE_ECB
                    ), 
                    MCRYPT_RAND)
                )
            ), ""\0""
        );
}

function fnDecrypt($sValue, $sSecretKey)
{
    return rtrim(
        mcrypt_decrypt(
            MCRYPT_RIJNDAEL_256, 
            $sSecretKey, 
            base64_decode($sValue), 
            MCRYPT_MODE_ECB,
            mcrypt_create_iv(
                mcrypt_get_iv_size(
                    MCRYPT_RIJNDAEL_256,
                    MCRYPT_MODE_ECB
                ), 
                MCRYPT_RAND
            )
        ), ""\0""
    );
}
</code></pre>

<p><strong>But there are other problems in this code which make it insecure, in particular the use of ECB (which is not an <em>encryption</em> mode, only a building block on top of which encryption modes can be defined). See <a href=""https://stackoverflow.com/a/12339418"">Fab Sa's answer</a> for a quick fix of the worst problems and <a href=""https://stackoverflow.com/a/30166085"">Scott's answer</a> for how to do this right.</strong></p>
","3422787"
"PHP: Return all dates between two dates in an array","147120","","<p><strong>Expected Input:</strong></p>

<pre><code>getDatesFromRange( '2010-10-01', '2010-10-05' );
</code></pre>

<p><strong>Expected Output:</strong></p>

<pre><code>Array( '2010-10-01', '2010-10-02', '2010-10-03', '2010-10-04', '2010-10-05' )
</code></pre>
","<p>You could also take a look at the <a href=""http://www.php.net/manual/en/class.dateperiod.php"" rel=""noreferrer"">DatePeriod</a> class:</p>

<pre><code>$period = new DatePeriod(
     new DateTime('2010-10-01'),
     new DateInterval('P1D'),
     new DateTime('2010-10-05')
);
</code></pre>

<p>Which should get you an array with DateTime objects.</p>

<p>To iterate</p>

<pre><code>foreach ($period as $key =&gt; $value) {
    //$value-&gt;format('Y-m-d')       
}
</code></pre>
","4312630"
"unserialize() [function.unserialize]: Error at offset","147111","","<p>I am using Hotaru CMS with the Image Upload plugin, I get this error if I try to attach an image to a post, otherwise there is no error.</p>

<p>The offending code (error points to line with **):</p>

<pre><code>/**
     * Retrieve submission step data
     *
     * @param $key - empty when setting
     * @return bool
     */
    public function loadSubmitData($h, $key = '')
    {
        // delete everything in this table older than 30 minutes:
        $this-&gt;deleteTempData($h-&gt;db);

        if (!$key) { return false; }

        $cleanKey = preg_replace('/[^a-z0-9]+/','',$key);
        if (strcmp($key,$cleanKey) != 0) {
            return false;
        } else {
            $sql = ""SELECT tempdata_value FROM "" . TABLE_TEMPDATA . "" WHERE tempdata_key = %s ORDER BY tempdata_updatedts DESC LIMIT 1"";
            $submitted_data = $h-&gt;db-&gt;get_var($h-&gt;db-&gt;prepare($sql, $key));
            **if ($submitted_data) { return unserialize($submitted_data); } else { return false; }** 
        }
    }
</code></pre>

<p>Data from the table, notice the end bit has the image info, I am not an expert in PHP so I was wondering what you guys/gals might think?</p>

<p>tempdata_value:</p>

<pre><code>a:10:{s:16:""submit_editorial"";b:0;s:15:""submit_orig_url"";s:13:""www.bbc.co.uk"";s:12:""submit_title"";s:14:""No title found"";s:14:""submit_content"";s:12:""dnfsdkfjdfdf"";s:15:""submit_category"";i:2;s:11:""submit_tags"";s:3:""bbc"";s:9:""submit_id"";b:0;s:16:""submit_subscribe"";i:0;s:15:""submit_comments"";s:4:""open"";s:5:""image"";s:19:""C:fakepath100.jpg"";}
</code></pre>

<p>Edit: I think I've found the serialize bit...</p>

<pre><code>/**
     * Save submission step data
     *
     * @return bool
     */
    public function saveSubmitData($h)
    {
        // delete everything in this table older than 30 minutes:
        $this-&gt;deleteTempData($h-&gt;db);

        $sid = preg_replace('/[^a-z0-9]+/i', '', session_id());
        $key = md5(microtime() . $sid . rand());
        $sql = ""INSERT INTO "" . TABLE_TEMPDATA . "" (tempdata_key, tempdata_value, tempdata_updateby) VALUES (%s,%s, %d)"";
        $h-&gt;db-&gt;query($h-&gt;db-&gt;prepare($sql, $key, serialize($h-&gt;vars['submitted_data']), $h-&gt;currentUser-&gt;id));
        return $key;
    }
</code></pre>
","<p><code>unserialize() [function.unserialize]: Error at offset</code> was dues to <code>invalid serialization data</code> due to invalid length</p>

<p><strong>Quick Fix</strong> </p>

<p>What you can do is is <code>recalculating the length</code> of the elements in serialized array</p>

<p><strong>You current serialized data</strong> </p>

<pre><code>$data = 'a:10:{s:16:""submit_editorial"";b:0;s:15:""submit_orig_url"";s:13:""www.bbc.co.uk"";s:12:""submit_title"";s:14:""No title found"";s:14:""submit_content"";s:12:""dnfsdkfjdfdf"";s:15:""submit_category"";i:2;s:11:""submit_tags"";s:3:""bbc"";s:9:""submit_id"";b:0;s:16:""submit_subscribe"";i:0;s:15:""submit_comments"";s:4:""open"";s:5:""image"";s:19:""C:fakepath100.jpg"";}';
</code></pre>

<p><strong>Example without recalculation</strong> </p>

<pre><code>var_dump(unserialize($data));
</code></pre>

<p>Output </p>

<pre><code>Notice: unserialize() [function.unserialize]: Error at offset 337 of 338 bytes
</code></pre>

<p><strong>Recalculating</strong> </p>

<pre><code>$data = preg_replace('!s:(\d+):""(.*?)"";!e', ""'s:'.strlen('$2').':\""$2\"";'"", $data);
var_dump(unserialize($data));
</code></pre>

<p>Output</p>

<pre><code>array
  'submit_editorial' =&gt; boolean false
  'submit_orig_url' =&gt; string 'www.bbc.co.uk' (length=13)
  'submit_title' =&gt; string 'No title found' (length=14)
  'submit_content' =&gt; string 'dnfsdkfjdfdf' (length=12)
  'submit_category' =&gt; int 2
  'submit_tags' =&gt; string 'bbc' (length=3)
  'submit_id' =&gt; boolean false
  'submit_subscribe' =&gt; int 0
  'submit_comments' =&gt; string 'open' (length=4)
  'image' =&gt; string 'C:fakepath100.jpg' (length=17)
</code></pre>

<p><strong>Recommendation</strong> .. I</p>

<p>Instead of using this kind of quick fix ... i""ll advice you update the question with </p>

<ul>
<li><p>How you are serializing your data</p></li>
<li><p>How you are Saving it ..</p></li>
</ul>

<p><strong>================================   EDIT 1  ===============================</strong> </p>

<p><strong>The Error</strong> </p>

<p>The Error was generated because of use of double quote <code>""</code> instead single quote <code>'</code> that is why <code>C:\fakepath\100.png</code> was converted to <code>C:fakepath100.jpg</code> </p>

<p><strong>To fix the error</strong> </p>

<p>You need to change <code>$h-&gt;vars['submitted_data']</code> From  (Note the singe quite <code>'</code> )</p>

<p>Replace</p>

<pre><code> $h-&gt;vars['submitted_data']['image'] = ""C:\fakepath\100.png"" ;
</code></pre>

<p>With</p>

<pre><code> $h-&gt;vars['submitted_data']['image'] = 'C:\fakepath\100.png' ;
</code></pre>

<p><strong>Additional Filter</strong>  </p>

<p>You can also add this simple filter before you call serialize </p>

<pre><code>function satitize(&amp;$value, $key)
{
    $value = addslashes($value);
}

array_walk($h-&gt;vars['submitted_data'], ""satitize"");
</code></pre>

<p>If you have UTF Characters you can also run </p>

<pre><code> $h-&gt;vars['submitted_data'] = array_map(""utf8_encode"",$h-&gt;vars['submitted_data']);
</code></pre>

<p><strong>How to detect the problem in future serialized data</strong> </p>

<pre><code>  findSerializeError ( $data1 ) ;
</code></pre>

<p>Output</p>

<pre><code>Diffrence 9 != 7
    -&gt; ORD number 57 != 55
    -&gt; Line Number = 315
    -&gt; Section Data1  = pen"";s:5:""image"";s:19:""C:fakepath100.jpg
    -&gt; Section Data2  = pen"";s:5:""image"";s:17:""C:fakepath100.jpg
                                            ^------- The Error (Element Length)
</code></pre>

<p><code>findSerializeError</code> Function </p>

<pre><code>function findSerializeError($data1) {
    echo ""&lt;pre&gt;"";
    $data2 = preg_replace ( '!s:(\d+):""(.*?)"";!e', ""'s:'.strlen('$2').':\""$2\"";'"",$data1 );
    $max = (strlen ( $data1 ) &gt; strlen ( $data2 )) ? strlen ( $data1 ) : strlen ( $data2 );

    echo $data1 . PHP_EOL;
    echo $data2 . PHP_EOL;

    for($i = 0; $i &lt; $max; $i ++) {

        if (@$data1 {$i} !== @$data2 {$i}) {

            echo ""Diffrence "", @$data1 {$i}, "" != "", @$data2 {$i}, PHP_EOL;
            echo ""\t-&gt; ORD number "", ord ( @$data1 {$i} ), "" != "", ord ( @$data2 {$i} ), PHP_EOL;
            echo ""\t-&gt; Line Number = $i"" . PHP_EOL;

            $start = ($i - 20);
            $start = ($start &lt; 0) ? 0 : $start;
            $length = 40;

            $point = $max - $i;
            if ($point &lt; 20) {
                $rlength = 1;
                $rpoint = - $point;
            } else {
                $rpoint = $length - 20;
                $rlength = 1;
            }

            echo ""\t-&gt; Section Data1  = "", substr_replace ( substr ( $data1, $start, $length ), ""&lt;b style=\""color:green\""&gt;{$data1 {$i}}&lt;/b&gt;"", $rpoint, $rlength ), PHP_EOL;
            echo ""\t-&gt; Section Data2  = "", substr_replace ( substr ( $data2, $start, $length ), ""&lt;b style=\""color:red\""&gt;{$data2 {$i}}&lt;/b&gt;"", $rpoint, $rlength ), PHP_EOL;
        }

    }

}
</code></pre>

<p><strong>A better way to save to Database</strong> </p>

<pre><code>$toDatabse = base64_encode(serialize($data));  // Save to database
$fromDatabase = unserialize(base64_decode($data)); //Getting Save Format 
</code></pre>
","10152996"
"Can I try/catch a warning?","146992","","<p>I need to catch some warnings being thrown from some php native functions and then handle them.</p>

<p>Specifically:</p>

<pre><code>array dns_get_record  ( string $hostname  [, int $type= DNS_ANY  [, array &amp;$authns  [, array &amp;$addtl  ]]] )
</code></pre>

<p>It throws a warning when the DNS query fails.</p>

<p><code>try</code>/<code>catch</code> doesn't work because a warning is not an exception.</p>

<p>I now have 2 options:</p>

<ol>
<li><p><code>set_error_handler</code> seems like overkill because I have to use it to filter every warning in the page (is this true?);</p></li>
<li><p>Adjust error reporting/display so these warnings don't get echoed to screen, then check the return value; if it's <code>false</code>, no records is found for hostname.</p></li>
</ol>

<p>What's the best practice here?</p>
","<p><strong>Set and restore error handler</strong></p>

<p>One possibility is to set your own error handler before the call and restore the previous error handler later with <code>restore_error_handler()</code>.</p>

<pre><code>set_error_handler(function() { /* ignore errors */ });
dns_get_record();
restore_error_handler();
</code></pre>

<p>You could build on this idea and write a re-usable error handler that logs the errors for you.</p>

<pre><code>set_error_handler([$logger, 'onSilencedError']);
dns_get_record();
restore_error_handler();
</code></pre>

<p><strong>Turning errors into exceptions</strong></p>

<p>You can use <code>set_error_handler()</code> and the <code>ErrorException</code> class to turn all php errors into exceptions.</p>

<pre><code>set_error_handler(function($errno, $errstr, $errfile, $errline, array $errcontext) {
    // error was suppressed with the @-operator
    if (0 === error_reporting()) {
        return false;
    }

    throw new ErrorException($errstr, 0, $errno, $errfile, $errline);
});

try {
    dns_get_record();
} catch (ErrorException $e) {
    // ...
}
</code></pre>

<p>The important thing to note when using your own error handler is that it will bypass the <code>error_reporting</code> setting and pass all errors (notices, warnings, etc.) to your error handler. You can set a second argument on <code>set_error_handler()</code> to define which error types you want to receive, or access the current setting using <code>... = error_reporting()</code> inside the error handler.</p>

<p><strong>Suppressing the warning</strong></p>

<p>Another possibility is to suppress the call with the @ operator and check the return value of <code>dns_get_record()</code> afterwards. <strong>But I'd advise against this</strong> as errors/warnings are triggered to be handled, not to be suppressed.</p>
","1241751"
"How to create and download a csv file from php script?","146917","","<p>I am a novice programmer and I searched a lot about my question but couldn't find a helpful solution or tutorial about this.</p>

<p>My goal is I have a PHP array and the array elements are showing in a list on the page.</p>

<p>I want to add an option, so that if a user wants, he/she can create a CSV file with array elements and download it.</p>

<p>I don't know how to do this. I have searched a lot too. But yet to find any helpful resource.</p>

<p>Please provide me some tutorial or solution or advice to implement it by myself. As I'm a novice please provide easy to implement solutions.</p>

<p>My array looks like: </p>

<pre><code>Array
(
    [0] =&gt; Array
        (
            [fs_id] =&gt; 4c524d8abfc6ef3b201f489c
            [name] =&gt; restaurant
            [lat] =&gt; 40.702692
            [lng] =&gt; -74.012869
            [address] =&gt; new york
            [postalCode] =&gt; 
            [city] =&gt; NEW YORK
            [state] =&gt; ny
            [business_type] =&gt; BBQ Joint
            [url] =&gt; 
        )

)
</code></pre>
","<p>You can use the built in <a href=""http://www.php.net/manual/en/function.fputcsv.php"" rel=""noreferrer"">fputcsv()</a> for your arrays to generate correct csv lines from your array, so you will have to loop over and collect the lines. like:</p>

<pre><code>$f = fopen(""tmp.csv"", ""w"");
foreach ($array as $line) {
    fputcsv($f, $line)
}
</code></pre>

<p>To make the browsers offer the ""Save as"" dialog you will have to send HTTP headers like this (see more about this header in the <a href=""http://greenbytes.de/tech/webdav/rfc6266.html#rfc.section.4.2"" rel=""noreferrer"">rfc</a>):</p>

<pre><code>header('Content-Disposition: attachment; filename=""filename.csv"";');
</code></pre>

<p>Putting it all together:</p>

<pre><code>function array_to_csv_download($array, $filename = ""export.csv"", $delimiter="";"") {
    // open raw memory as file so no temp files needed, you might run out of memory though
    $f = fopen('php://memory', 'w'); 
    // loop over the input array
    foreach ($array as $line) { 
        // generate csv lines from the inner arrays
        fputcsv($f, $line, $delimiter); 
    }
    // reset the file pointer to the start of the file
    fseek($f, 0);
    // tell the browser it's going to be a csv file
    header('Content-Type: application/csv');
    // tell the browser we want to save it instead of displaying it
    header('Content-Disposition: attachment; filename=""'.$filename.'"";');
    // make php send the generated csv lines to the browser
    fpassthru($f);
}
</code></pre>

<p>And you can use it like this:</p>

<pre><code>array_to_csv_download(array(
  array(1,2,3,4), // this array is going to be the first row
  array(1,2,3,4)), // this array is going to be the second row
  ""numbers.csv""
);
</code></pre>

<p><strong>Update:</strong><br>
Instead of the <code>php://memory</code> you can also use the <a href=""http://www.php.net/manual/en/wrappers.php.php#refsect2-wrappers.php-unknown-unknown-unknown-descriptioq"" rel=""noreferrer""><code>php://output</code></a> for the file descriptor and do away with the seeking and such:</p>

<pre><code>function array_to_csv_download($array, $filename = ""export.csv"", $delimiter="";"") {
    header('Content-Type: application/csv');
    header('Content-Disposition: attachment; filename=""'.$filename.'"";');

    // open the ""output"" stream
    // see http://www.php.net/manual/en/wrappers.php.php#refsect2-wrappers.php-unknown-unknown-unknown-descriptioq
    $f = fopen('php://output', 'w');

    foreach ($array as $line) {
        fputcsv($f, $line, $delimiter);
    }
}   
</code></pre>
","16251849"
"Insert a new record if not exist and update if exist, laravel eloquent","146910","","<p>Is there any shorthand for us to insert a new record if doesn't exist and update the record if exist? the following is the code i using.</p>

<pre><code>$shopOwner = ShopMeta::where('shopId', '=', $theID)-&gt;where('metadataKey', '=', 2001)-&gt;first();
if ($shopOwner==null){
    insert new record into database
} else {
    update the existing record
}
</code></pre>

<p>Thanks</p>
","<p>Here's a full example of what ""lu cip"" was talking about:</p>

<pre><code>$user = User::firstOrNew(array('name' =&gt; Input::get('name')));
$user-&gt;foo = Input::get('foo');
$user-&gt;save();
</code></pre>

<p>Docs here: <a href=""http://laravel.com/docs/eloquent#insert-update-delete"" rel=""noreferrer"">http://laravel.com/docs/eloquent#insert-update-delete</a></p>
","21009418"
"How to upload & Save Files with Desired name","146856","","<p>i am using this code to upload files(images to a folder)</p>

<pre><code>&lt;form action='' method='POST' enctype='multipart/form-data'&gt;
&lt;input type='file' name='userFile'&gt;&lt;br&gt;
&lt;input type='submit' name='upload_btn' value='upload'&gt;
&lt;/form&gt;

&lt;?php
$target_Path = ""images/"";
$target_Path = $target_Path.basename( $_FILES['userFile']['name'] );
move_uploaded_file( $_FILES['userFile']['tmp_name'], $target_Path );
?&gt;
</code></pre>

<p>when the file(image) is saved at the specified path... WHAT if i want to save the file with some desired name....</p>

<p>i have tried replacing THIS</p>

<pre><code>$target_Path = $target_Path.basename( $_FILES['userFile']['name'] );
</code></pre>

<p>WITH THIS</p>

<pre><code>$target_Path = $target_Path.basename( ""myFile.png"" );
</code></pre>

<p>BUT it's not working</p>
","<p>You can try this,</p>

<pre><code>$info = pathinfo($_FILES['userFile']['name']);
$ext = $info['extension']; // get the extension of the file
$newname = ""newname."".$ext; 

$target = 'images/'.$newname;
move_uploaded_file( $_FILES['userFile']['tmp_name'], $target);
</code></pre>
","3509388"
"$_POST vs. $_SERVER['REQUEST_METHOD'] == 'POST'","146721","","<p>Some guy called one of my Snipplr submissions ""crap"" because I used <code>if ($_SERVER['REQUEST_METHOD'] == 'POST')</code> instead of <code>if ($_POST)</code></p>

<p>Checking the request method seems more correct to me because that's what I really want to do. Is there some operational difference between the two or is this just a code clarity issue?</p>
","<p>Well, they don't do the same thing, really.</p>

<p><code>$_SERVER['REQUEST_METHOD']</code> contains the request method (surprise).</p>

<p><code>$_POST</code> contains any post data.</p>

<p>It's possible for a POST request to contain no POST data.</p>

<p>I check the request method — I actually never thought about testing the <code>$_POST</code> array. I check the required post fields, though. So an empty post request would give the user a lot of error messages - which makes sense to me.</p>
","409417"
"php convert datetime to UTC","146710","","<p>I am in need of an easy way to convert a date time stamp to UTC (from whatever timezone the server is in) HOPEFULLY without using any libraries.</p>
","<p>Try the <a href=""http://www.php.net/manual/en/datetime.gettimezone.php"" rel=""noreferrer"">getTimezone and setTimezone</a>, see the example</p>

<p>(But this does use a Class)</p>

<p>UPDATE:</p>

<p>Without any classes you could try something like this:</p>

<pre><code>$the_date = strtotime(""2010-01-19 00:00:00"");
echo(date_default_timezone_get() . ""&lt;br /&gt;"");
echo(date(""Y-d-mTG:i:sz"",$the_date) . ""&lt;br /&gt;"");
echo(date_default_timezone_set(""UTC"") . ""&lt;br /&gt;"");
echo(date(""Y-d-mTG:i:sz"", $the_date) . ""&lt;br /&gt;"");
</code></pre>

<p>NOTE: You might need to set the timezone back to the original as well</p>
","2095812"
"How to get JavaScript variable value in PHP","146472","","<p>I want the value of JavaScript variable which i could access using PHP. 
I am using the code below but it doesn't return value of that variable in PHP.</p>

<pre><code>// set global variable in javascript
    profile_viewer_uid = 1;
</code></pre>

<hr>

<pre><code>// php code

$profile_viewer_uid=$_POST['profile_viewer_uid']; 
</code></pre>

<p>this gives me the following error :-</p>

<pre><code>A PHP Error was encountered
Severity: Notice
Message: Undefined index: profile_viewer_uid
</code></pre>

<p>Another php code i used which give empty value</p>

<pre><code>$profile_viewer_uid = ""&lt;script language=javascript&gt;document.write(profile_viewer_uid);&lt;/script&gt;
</code></pre>

<p>When I echo it shows nothing.           </p>
","<p>You will need to use JS to send the URL back with a variable in it such as:
<a href=""http://www.site.com/index.php?uid=1"" rel=""noreferrer"">http://www.site.com/index.php?uid=1</a></p>

<p>by using something like this in JS:</p>

<pre><code>window.location.href=”index.php?uid=1"";
</code></pre>

<p>Then in the PHP code use $_GET:</p>

<pre><code>$somevar = $_GET[""uid""]; //puts the uid varialbe into $somevar
</code></pre>
","9789532"
"How should I choose an authentication library for CodeIgniter?","146179","","<p>I see there are <a href=""http://codeigniter.com/wiki/Category:Libraries::Authentication/"" rel=""noreferrer"">a few</a>. Which ones are maintained and easy to use? What are their pros and cons? </p>
","<h2>Update (May 14, 2010):</h2>

<p><strong>It turns out, the russian developer Ilya Konyukhov picked up the gauntlet after reading this and created a new auth library for CI based on DX Auth, following the recommendations and requirements below.</strong></p>

<p><strong>And the resulting <a href=""http://konyukhov.com/soft/tank_auth/"" rel=""noreferrer"">Tank Auth</a> is looking like the answer to the OP's question. I'm going to go out on a limb here and call Tank Auth the best authentication library for CodeIgniter available today. It's a rock-solid library that has all the features you need and none of the bloat you don't:</strong></p>

<h2>Tank Auth</h2>

<blockquote>
  <p>Pros</p>
  
  <ul>
  <li>Full featured</li>
  <li>Lean footprint (20 files) considering the feature set</li>
  <li>Very good documentation</li>
  <li>Simple and elegant database design (just 4 DB tables)</li>
  <li>Most features are optional and easily configured</li>
  <li>Language file support</li>
  <li>reCAPTCHA supported</li>
  <li>Hooks into CI's validation system</li>
  <li>Activation emails</li>
  <li>Login with email, username or both (configurable)</li>
  <li>Unactivated accounts auto-expire</li>
  <li>Simple yet effective error handling</li>
  <li>Uses phpass for hashing (and also hashes autologin codes in the DB)</li>
  <li>Does not use security questions</li>
  <li>Separation of user and profile data is very nice</li>
  <li>Very reasonable security model around failed login attempts (good protection against bots and DoS attacks)</li>
  </ul>
  
  <p>(Minor) Cons</p>
  
  <ul>
  <li>Lost password codes are not hashed in DB</li>
  <li>Includes a native (poor) CAPTCHA, which is nice for those who don't want to depend on the (Google-owned) reCAPTCHA service, but it really isn't secure enough</li>
  <li>Very sparse online documentation (minor issue here, since the code is nicely documented and intuitive)</li>
  </ul>
</blockquote>

<p><a href=""http://konyukhov.com/soft/tank_auth/"" rel=""noreferrer"">Download Tank Auth here</a></p>

<hr>

<p>Original answer:</p>

<p>I've implemented my own as well (currently about 80% done after a few weeks of work). I tried all of the others first; FreakAuth Light, DX Auth, Redux, SimpleLogin, SimpleLoginSecure, pc_user, Fresh Powered, and a few more. None of them were up to par, IMO, either they were lacking basic features, inherently INsecure, or too bloated for my taste.</p>

<p>Actually, I did a detailed roundup of all the authentication libraries for CodeIgniter when I was testing them out (just after New Year's). FWIW, I'll share it with you:</p>

<h2>DX Auth</h2>

<blockquote>
  <p>Pros</p>
  
  <ul>
  <li>Very full featured</li>
  <li>Medium footprint (25+ files), but manages to feel quite slim</li>
  <li>Excellent documentation, although some is in slightly broken English</li>
  <li>Language file support</li>
  <li>reCAPTCHA supported</li>
  <li>Hooks into CI's validation system</li>
  <li>Activation emails</li>
  <li>Unactivated accounts auto-expire</li>
  <li>Suggests grc.com for salts (not bad for a PRNG)</li>
  <li>Banning with stored 'reason' strings</li>
  <li>Simple yet effective error handling</li>
  </ul>
  
  <p>Cons</p>
  
  <ul>
  <li>Only lets users 'reset' a lost password (rather than letting them pick a new one upon reactivation)</li>
  <li>Homebrew pseudo-event model - good intention, but misses the mark</li>
  <li>Two password fields in the user table, bad style</li>
  <li>Uses two separate user tables (one for 'temp' users - ambiguous and redundant)</li>
  <li>Uses potentially unsafe md5 hashing</li>
  <li>Failed login attempts only stored by IP, not by username - unsafe!</li>
  <li>Autologin key not hashed in the database - practically as unsafe as storing passwords in cleartext!</li>
  <li>Role system is a complete mess: is_admin function with hard-coded role names, is_role a complete mess, check_uri_permissions is a mess, the whole permissions table is a bad idea (a URI can change and render pages unprotected; permissions should always be stored exactly where the sensitive logic is). Dealbreaker!</li>
  <li>Includes a native (poor) CAPTCHA</li>
  <li>reCAPTCHA function interface is messy</li>
  </ul>
</blockquote>

<h2>FreakAuth Light</h2>

<blockquote>
  <p>Pros</p>
  
  <ul>
  <li>Very full featured</li>
  <li>Mostly quite well documented code</li>
  <li>Separation of user and profile data is a nice touch</li>
  <li>Hooks into CI's validation system</li>
  <li>Activation emails</li>
  <li>Language file support</li>
  <li>Actively developed</li>
  </ul>
  
  <p>Cons</p>
  
  <ul>
  <li>Feels a bit bloated (50+ files)</li>
  <li>And yet it lacks automatic cookie login (!)</li>
  <li>Doesn't support logins with both username and email</li>
  <li>Seems to have issues with UTF-8 characters</li>
  <li>Requires a lot of autoloading (impeding performance)</li>
  <li>Badly micromanaged config file</li>
  <li>Terrible View-Controller separation, with lots of program logic in views and output hard-coded into controllers. Dealbreaker!</li>
  <li>Poor HTML code in the included views</li>
  <li>Includes substandard CAPTCHA</li>
  <li>Commented debug echoes everywhere</li>
  <li>Forces a specific folder structure</li>
  <li>Forces a specific Ajax library (can be switched, but shouldn't be there in the first place)</li>
  <li>No max limit on login attempts - VERY unsafe! Dealbreaker!</li>
  <li>Hijacks form validation</li>
  <li>Uses potentially unsafe md5 hashing</li>
  </ul>
</blockquote>

<h2>pc_user</h2>

<blockquote>
  <p>Pros</p>
  
  <ul>
  <li>Good feature set for its tiny footprint</li>
  <li>Lightweight, no bloat (3 files)</li>
  <li>Elegant automatic cookie login</li>
  <li>Comes with optional test implementation (nice touch)</li>
  </ul>
  
  <p>Cons</p>
  
  <ul>
  <li>Uses the old CI database syntax (less safe)</li>
  <li>Doesn't hook into CI's validation system</li>
  <li>Kinda unintuitive status (role) system (indexes upside down - impractical)</li>
  <li>Uses potentially unsafe sha1 hashing</li>
  </ul>
</blockquote>

<h2>Fresh Powered</h2>

<blockquote>
  <p>Pros</p>
  
  <ul>
  <li>Small footprint (6 files)</li>
  </ul>
  
  <p>Cons</p>
  
  <ul>
  <li>Lacks a lot of essential features. Dealbreaker!</li>
  <li>Everything is hard-coded. Dealbreaker!</li>
  </ul>
</blockquote>

<h2>Redux / Ion Auth</h2>

<p>According to <a href=""http://codeigniter.com/wiki/Redux_Auth"" rel=""noreferrer"">the CodeIgniter wiki</a>, Redux has been discontinued, but the Ion Auth fork is going strong: <a href=""https://github.com/benedmunds/CodeIgniter-Ion-Auth"" rel=""noreferrer"">https://github.com/benedmunds/CodeIgniter-Ion-Auth</a></p>

<p>Ion Auth is a well featured library without it being overly heavy or under advanced. In most cases its feature set will more than cater for a project's requirements.</p>

<blockquote>
  <p>Pros</p>
  
  <ul>
  <li>Lightweight and simple to integrate with CodeIgniter</li>
  <li>Supports sending emails directly from the library</li>
  <li>Well documented online and good active dev/user community</li>
  <li>Simple to implement into a project</li>
  </ul>
  
  <p>Cons</p>
  
  <ul>
  <li>More complex DB schema than some others</li>
  <li>Documentation lacks detail in some areas</li>
  </ul>
</blockquote>

<h2>SimpleLoginSecure</h2>

<blockquote>
  <p>Pros</p>
  
  <ul>
  <li>Tiny footprint (4 files)</li>
  <li>Minimalistic, absolutely no bloat</li>
  <li>Uses phpass for hashing (excellent)</li>
  </ul>
  
  <p>Cons</p>
  
  <ul>
  <li>Only login, logout, create and delete</li>
  <li>Lacks a lot of essential features. Dealbreaker!</li>
  <li>More of a starting point than a library</li>
  </ul>
</blockquote>

<hr>

<p><strong>Don't get me wrong:</strong> I don't mean to disrespect any of the above libraries; I am very impressed with what their developers have accomplished and how far each of them have come, and I'm not above reusing some of their code to build my own. What I'm saying is, sometimes in these projects, the focus shifts from the essential 'need-to-haves' (such as hard security practices) over to softer 'nice-to-haves', and that's what I hope to remedy.</p>

<p>Therefore: back to basics.</p>

<h2>Authentication for CodeIgniter done <em>right</em></h2>

<p>Here's my MINIMAL required list of features from an authentication library. It also happens to be a subset of my own library's feature list ;)</p>

<blockquote>
  <ol>
  <li>Tiny footprint with optional test implementation</li>
  <li>Full documentation</li>
  <li>No autoloading required. Just-in-time loading of libraries for performance</li>
  <li>Language file support; no hard-coded strings</li>
  <li>reCAPTCHA supported but optional</li>
  <li>Recommended TRUE random salt generation (e.g. using random.org or random.irb.hr)</li>
  <li>Optional add-ons to support 3rd party login (OpenID, Facebook Connect, Google Account, etc.)</li>
  <li>Login using either username or email</li>
  <li>Separation of user and profile data</li>
  <li>Emails for activation and lost passwords</li>
  <li>Automatic cookie login feature</li>
  <li>Configurable phpass for hashing (properly salted of course!)</li>
  <li>Hashing of passwords</li>
  <li>Hashing of autologin codes</li>
  <li>Hashing of lost password codes</li>
  <li>Hooks into CI's validation system</li>
  <li>NO security questions!</li>
  <li>Enforced strong password policy server-side, with optional client-side (Javascript) validator</li>
  <li>Enforced maximum number of failed login attempts with <strong>BEST PRACTICES countermeasures</strong> against both dictionary and DoS attacks!</li>
  <li>All database access done through prepared (bound) statements!</li>
  </ol>
</blockquote>

<p>Note: those last few points are <em>not</em> super-high-security overkill that you don't need for your web application. <strong>If an authentication library doesn't meet these security standards 100%, DO NOT USE IT!</strong></p>

<p>Recent high-profile examples of irresponsible coders who left them out of their software: #17 is how Sarah Palin's AOL email was hacked during the Presidential campaign; a nasty combination of #18 and #19 were the culprit recently when the Twitter accounts of Britney Spears, Barack Obama, Fox News and others were hacked; and #20 alone is how Chinese hackers managed to steal 9 million items of personal information from more than 70.000 Korean web sites in one automated hack in 2008.</p>

<p>These attacks are not brain surgery. If you leave your back doors wide open, you shouldn't delude yourself into a false sense of security by bolting the front. Moreover, if you're serious enough about coding to choose a best-practices framework like CodeIgniter, you owe it to yourself to at least get the most <em>basic</em> security measures done right.</p>

<hr>

<p>&lt;rant&gt;</p>

<p>Basically, here's how it is: <em>I don't care</em> if an auth library offers a bunch of features, advanced role management, PHP4 compatibility, pretty CAPTCHA fonts, country tables, complete admin panels, bells and whistles -- if the library actually makes my site <strong>less secure</strong> by not following best practices. It's an <em>authentication</em> package; it needs to do ONE thing right: Authentication. If it fails to do <em>that</em>, it's actually doing more harm than good.</p>

<p>&lt;/rant&gt;</p>

<p>/Jens Roland</p>
","476902"
"How to use php serialize() and unserialize()","146162","","<p>My problem is very basic.</p>

<p>I did not find any example to meet my needs as to what exactly <code>serialize()</code> and <code>unserialize()</code> mean in php? They just give an example - serialize an array and show an output in an unexplained format. It is really hard to understand the basic concept going through their jargon.</p>

<p><strong>EDIT:</strong></p>

<pre><code>&lt;?php

$a= array( '1' =&gt; 'elem 1', '2'=&gt; 'elem 2', '3'=&gt;' elem 3');
print_r($a);
echo (""&lt;br&gt;&lt;/br&gt;"");
$b=serialize($a);
print_r($b);

?&gt;
</code></pre>

<p>ouput:</p>

<pre><code>Array ( [1] =&gt; elem 1 [2] =&gt; elem 2 [3] =&gt; elem 3 ) 

a:3:{i:1;s:6:""elem 1"";i:2;s:6:""elem 2"";i:3;s:7:"" elem 3"";}
</code></pre>

<p>I cannot understand the second output. Besides that, can anyone give an example of a situation that I need to serialize a php array before using it?</p>
","<p>A PHP array or object or other <strong>complex data structure</strong> cannot be transported or stored or otherwise used outside of a <em>running PHP script</em>. If you want to <em>persist</em> such a complex data structure beyond a single run of a script, you need to <em>serialize</em> it. That just means to put the structure into a ""lower common denominator"" that can be handled by things other than PHP, like databases, text files, sockets. The standard PHP function <code>serialize</code> is just <em>a format</em> to express such a thing, it serializes a data structure into a string representation that's unique to PHP and can be reversed into a PHP object using <code>unserialize</code>. There are many other formats though, like JSON or XML.</p>

<hr>

<p>Take for example this common problem:</p>

<h2>How do I pass a PHP <strong><em>array</em></strong> to Javascript?</h2>

<p>PHP and Javascript can only communicate via strings. You can pass the string <code>""foo""</code> very easily to Javascript. You can pass the number <code>1</code> very easily to Javascript. You can pass the boolean values <code>true</code> and <code>false</code> easily to Javascript. But how do you pass this array to Javascript?</p>

<pre><code>Array ( [1] =&gt; elem 1 [2] =&gt; elem 2 [3] =&gt; elem 3 ) 
</code></pre>

<p>The answer is <em>serialization</em>. In case of PHP/Javascript, JSON is actually the better serialization format:</p>

<pre><code>{ 1 : 'elem 1', 2 : 'elem 2', 3 : 'elem 3' }
</code></pre>

<p>Javascript can easily reverse this into an actual Javascript array.</p>

<p>This is just as valid a representation of the same data structure though:</p>

<pre><code>a:3:{i:1;s:6:""elem 1"";i:2;s:6:""elem 2"";i:3;s:7:"" elem 3"";}
</code></pre>

<p>But pretty much only PHP uses it, there's little support for this format anywhere else.<br>
This is very common and well supported as well though:</p>

<pre><code>&lt;array&gt;
    &lt;element key='1'&gt;elem 1&lt;/element&gt;
    &lt;element key='2'&gt;elem 2&lt;/element&gt;
    &lt;element key='3'&gt;elem 3&lt;/element&gt;
&lt;/array&gt;
</code></pre>

<p>There are many situations where you need to pass <em>complex data structures</em> around as strings. Serialization, representing arbitrary data structures as strings, solves how to do this.</p>
","8641947"
"Sum array values of the same key","146090","","<p>How can I add all the values of the key <em><code>[gozhi]</code></em>? Note that <em><code>[gozhi]</code></em> key is <em>dynamic</em>.  </p>

<p><em>Input array :</em></p>

<pre class=""lang-none prettyprint-override""><code>Array
(
    [0] =&gt; Array
        (
            [gozhi] =&gt; 2
            [uzorong] =&gt; 1
            [ngangla] =&gt; 4
            [langthel] =&gt; 5
        )

    [1] =&gt; Array
        (
            [gozhi] =&gt; 5
            [uzorong] =&gt; 0
            [ngangla] =&gt; 3
            [langthel] =&gt; 2
        )

    [2] =&gt; Array
        (
            [gozhi] =&gt; 3
            [uzorong] =&gt; 0
            [ngangla] =&gt; 1
            [langthel] =&gt; 3
        )
)
</code></pre>

<p><em>Desired result :</em></p>

<pre class=""lang-none prettyprint-override""><code>Array
(
    [gozhi] =&gt; 10
    [uzorong] =&gt; 1
    [ngangla] =&gt; 8
    [langthel] =&gt; 10
)
</code></pre>
","<pre><code>$sumArray = array();

foreach ($myArray as $k=&gt;$subArray) {
  foreach ($subArray as $id=&gt;$value) {
    $sumArray[$id]+=$value;
  }
}

print_r($sumArray);
</code></pre>
","1496704"
"Replacing Spaces with Underscores","146067","","<p>I have a PHP Script that users will enter a name like: <code>Alex_Newton</code>,</p>

<p>However, some users will use a space rather than an underscore, so my question is:</p>

<p>How do I auto-replace spaces with Underscores in PHP?</p>
","<pre><code>$name = str_replace(' ', '_', $name);
</code></pre>
","6431076"
"json_encode sparse PHP array as JSON array, not JSON object","146061","","<p>I have the following array in PHP:</p>

<pre><code>Array
(
    [0] =&gt; Array
        (
            [id] =&gt; 0
            [name] =&gt; name1
            [short_name] =&gt; n1
        )

    [2] =&gt; Array
        (
            [id] =&gt; 2
            [name] =&gt; name2
            [short_name] =&gt; n2
        )
)
</code></pre>

<p>I want to JSON encode it as a JSON array, producing a string like the following:</p>

<pre><code>[  
    {  
        ""id"":0,
        ""name"":""name1"",
        ""short_name"":""n1""
    },
    {  
        ""id"":2,
        ""name"":""name2"",
        ""short_name"":""n2""
    }
]
</code></pre>

<p>But when I call <a href=""http://uk3.php.net/json_encode""><code>json_encode</code></a> on this array, I get the following:</p>

<pre><code>{  
    ""0"":{  
        ""id"":0,
        ""name"":""name1"",
        ""short_name"":""n1""
    },
    ""2"":{  
        ""id"":2,
        ""name"":""name2"",
        ""short_name"":""n2""
    }
}
</code></pre>

<p>which is an object instead of an array.</p>

<p>How can I get <code>json_encode</code> to encode my array as an array, instead?</p>
","<p>You are observing this behaviour because your array is not sequential - it has keys <code>0</code> and <code>2</code>, but doesn't have <code>1</code> as a key.</p>

<p>Just having numeric indexes isn't enough. <code>json_encode</code> will only encode your PHP array as a JSON array if your PHP array is sequential - that is, if its keys are 0, 1, 2, 3, ...</p>

<p>You can reindex your array sequentially using the <a href=""http://uk3.php.net/array_values"" rel=""noreferrer""><code>array_values</code></a> function to get the behaviour you want. For example, the code below works successfully in your use case:</p>

<pre class=""lang-php prettyprint-override""><code>echo json_encode(array_values($input)).
</code></pre>
","18977473"
"Function ereg_replace() is deprecated - How to clear this bug?","146053","","<p>I have written following PHP code:</p>

<pre><code>$input=""menu=1&amp;type=0&amp;"";

print $input.""&lt;hr&gt;"".ereg_replace('/&amp;/', ':::', $input);
</code></pre>

<p>After running above code, it gives following warning,</p>

<blockquote>
  <p>Deprecated: Function ereg_replace() is deprecated</p>
</blockquote>

<p>How can I resolve this warning.</p>
","<p>Switch to <a href=""http://php.net/preg_replace"" rel=""noreferrer""><code>preg_replace</code><sup><em>Docs</em></sup></a> and update the expression to use preg syntax (PCRE) instead of ereg syntax (POSIX) <a href=""http://php.net/reference.pcre.pattern.posix"" rel=""noreferrer"">where there are differences<sup><em>Docs</em></sup></a> (just as it says to do in the manual for <a href=""http://php.net/ereg_replace"" rel=""noreferrer""><code>ereg_replace</code><sup><em>Docs</em></sup></a>).</p>
","3132859"
"file_put_contents permission denied","145828","","<p>I am trying to write a query to a file for debugging. The file is in <code>database/execute.php</code>. The file I want to write to is <code>database/queries.php</code>.</p>

<p>I am trying to use <code>file_put_contents('queries.txt', $query)</code></p>

<p>But I am getting </p>

<blockquote>
  <p>file_put_contents(queries.txt) [function.file-put-contents]:
  failed to open stream: Permission
  denied</p>
</blockquote>

<p>I have the <code>queries.txt</code> file chmod'd to 777, what could the issue be?</p>
","<p>Try adjusting the directory permissions.</p>

<p>from a terminal, run <code>chmod 777 database</code> (from the directory that contains the database folder)</p>

<p>apache and nobody will have access to this directory if it is chmodd'ed correctly.</p>

<p>The other thing to do is echo ""getcwd()"". This will show you the current directory, and if this isn't '/something.../database/' then you'll need to change 'query.txt' to the full path for your server.</p>
","4917999"
"""SMTP Error: Could not authenticate"" in PHPMailer","145456","","<p>I'm using PHPMailer in a Simple Script For Send Email's Through Gmail, and I'm getting an ""Unknown Error"" (At least for me!):</p>

<blockquote>
  <p>SMTP Error: Could not authenticate.
  Error: SMTP Error: Could not
  authenticate.</p>
  
  <p>SMTP server error: 5.7.1 Username and
  Password not accepted. Learn more at
  535 5.7.1
  <a href=""http://mail.google.com/support/bin/answer.py?answer=14257"" rel=""noreferrer"">http://mail.google.com/support/bin/answer.py?answer=14257</a>
  p38sm2467302ybk.16</p>
</blockquote>

<p>I've read about Configure OpenSSL For SSL/TLS Connections, and I did it. Apache And PHP Are properly-Configured (With OpenSSL extension Running in PHP and mod_ssl running in Apache 2.2.16).</p>

<p>This is The PHP Script:</p>

<pre><code> &lt;?php
  require_once (""PHPMailer\class.phpmailer.php"");
  $Correo = new PHPMailer();
  $Correo-&gt;IsSMTP();
  $Correo-&gt;SMTPAuth = true;
  $Correo-&gt;SMTPSecure = ""tls"";
  $Correo-&gt;Host = ""smtp.gmail.com"";
  $Correo-&gt;Port = 587;
  $Correo-&gt;UserName = ""foo@gmail.com"";
  $Correo-&gt;Password = ""gmailpassword"";
  $Correo-&gt;SetFrom('foo@gmail.com','De Yo');
  $Correo-&gt;FromName = ""From"";
  $Correo-&gt;AddAddress(""bar@hotmail.com"");
  $Correo-&gt;Subject = ""Prueba con PHPMailer"";
  $Correo-&gt;Body = ""&lt;H3&gt;Bienvenido! Esto Funciona!&lt;/H3&gt;"";
  $Correo-&gt;IsHTML (true);
  if (!$Correo-&gt;Send())
  {
    echo ""Error: $Correo-&gt;ErrorInfo"";
  }
  else
  {
    echo ""Message Sent!"";
  }
?&gt;
</code></pre>

<p>The Username and Password are OK, And I tried in Thunderbird, without any problem. 
I've also Used SSL Authentication and Port 465, getting the same Error. </p>
","<p>Try this instead :</p>

<p>$Correo-><strong>Username</strong> = ""foo@gmail.com"";</p>

<p>I tested it and its working perfectly without no other change</p>
","3949915"
"facebook Uncaught OAuthException: An active access token must be used to query information about the current user","145288","","<p>I've been struggling to find out what is happening with this.
My scripts were working fine for a bit and suddenly half stopped.</p>

<p>I'm accessing the api and am getting back an access token. With the access token, I can access a users public info just fine. However, when I try to post info to their FB account I get this error.</p>

<pre><code>Fatal error: Uncaught OAuthException: An active access token must be used to query information about the current user. 
</code></pre>

<p>Any idea what is happening here?
I'm also using sessions on my site to keep track of internal user ids. Not sure if my sessions could be causing a problem.</p>

<p>This is my upload script where I'm getting an error.</p>

<pre><code>require 'facebook/src/facebook.php';


// Create our Application instance (replace this with your appId and secret).
$facebook = new Facebook(array(
  'appId'  =&gt; '12345678',
  'secret' =&gt; 'REMOVED',
  'fileUpload' =&gt; true, 
  'cookie' =&gt; true,
));
$facebook-&gt;setFileUploadSupport(true); 

$me = null;
// Session based API call.
if ($session) {
  try {
    $uid = $facebook-&gt;getUser();
    $me = $facebook-&gt;api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
  }
}


// login or logout url will be needed depending on current user state.
if ($me) {
  $logoutUrl = $facebook-&gt;getLogoutUrl();
} else {
  $loginUrl = $facebook-&gt;getLoginUrl();
}


$photo_details = array('message' =&gt; 'my place');
$file='photos/my.jpg'; //Example image file
$photo_details['image'] = '@' . realpath($file);
$upload_photo = $facebook-&gt;api('/me/photos', 'post', $photo_details);
</code></pre>
","<p>Just check for the current Facebook user id <code>$user</code> and if it returned null then you need to reauthorize the user (or use the custom <code>$_SESSION</code> user id value - not recommended)</p>

<pre><code>require 'facebook/src/facebook.php';


// Create our Application instance (replace this with your appId and secret).
$facebook = new Facebook(array(
  'appId'  =&gt; 'APP_ID',
  'secret' =&gt; 'APP_SECRET',
));

$user = $facebook-&gt;getUser();

$photo_details = array('message' =&gt; 'my place');
$file='photos/my.jpg'; //Example image file
$photo_details['image'] = '@' . realpath($file);

if ($user) {
  try {
    // We have a valid FB session, so we can use 'me'
    $upload_photo = $facebook-&gt;api('/me/photos', 'post', $photo_details);
  } catch (FacebookApiException $e) {
    error_log($e);
  }
}


// login or logout url will be needed depending on current user state.
if ($user) {
  $logoutUrl = $facebook-&gt;getLogoutUrl();
} else {
// redirect to Facebook login to get a fresh user access_token
  $loginUrl = $facebook-&gt;getLoginUrl();
  header('Location: ' . $loginUrl);
}
</code></pre>

<p>I've written a <a href=""http://www.masteringapi.com/tutorials/how-to-upload-a-photo-to-a-users-profile-using-facebook-graph-api/66/"" rel=""noreferrer"">tutorial</a> on how to upload a picture to the user's wall.</p>
","6035113"
"Set Memory Limit in htaccess","145251","","<p>I am working on word press. I need to increase the memory so added the following line to my htaccess file</p>

<pre><code># BEGIN WordPress
&lt;IfModule mod_rewrite.c&gt;
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
&lt;/IfModule&gt;

php_value memory_limit 64M
</code></pre>

<p>my sample php page 


<p>but it throws the 500 internal server error. what is the problem here..</p>
","<p>Maybe this helps: <a href=""http://support.tigertech.net/php-value"" rel=""noreferrer"">http://support.tigertech.net/php-value</a></p>

<p>In your .htaccess you can try this code:</p>

<pre><code>&lt;IfModule mod_php5.c&gt;
php_value memory_limit 64M
&lt;/IfModule&gt;
</code></pre>

<p>If page breaks again, then you are using PHP as mod_php in apache, but error is due to something else.</p>

<p>If page does not break, then you are using PHP as CGI module and therefore cannot use php values - in the link I've provided might be solution but I'm not sure you will be able to apply it.</p>
","12172844"
"POST request with JSON body","145005","","<p>I would like to add a <a href=""https://developers.google.com/blogger/docs/3.0/using#AddingAPost"">post to a Blogger blog</a> via PHP.
Google provided the example below. How to use that with PHP?</p>

<blockquote>
  <p>You can add a post for a blog by sending a POST request to the post
  collection URI with a post JSON body:</p>
</blockquote>

<pre><code>POST https://www.googleapis.com/blogger/v3/blogs/8070105920543249955/posts/
Authorization: /* OAuth 2.0 token here */
Content-Type: application/json

{
  ""kind"": ""blogger#post"",
  ""blog"": {
    ""id"": ""8070105920543249955""
  },
  ""title"": ""A new post"",
  ""content"": ""With &lt;b&gt;exciting&lt;/b&gt; content...""
}
</code></pre>
","<p>You need to use the <a href=""http://php.net/curl"" rel=""noreferrer"">cURL library</a> to send this request.</p>

<pre><code>&lt;?php
// Your ID and token
$blogID = '8070105920543249955';
$authToken = 'OAuth 2.0 token here';

// The data to send to the API
$postData = array(
    'kind' =&gt; 'blogger#post',
    'blog' =&gt; array('id' =&gt; $blogID),
    'title' =&gt; 'A new post',
    'content' =&gt; 'With &lt;b&gt;exciting&lt;/b&gt; content...'
);

// Setup cURL
$ch = curl_init('https://www.googleapis.com/blogger/v3/blogs/'.$blogID.'/posts/');
curl_setopt_array($ch, array(
    CURLOPT_POST =&gt; TRUE,
    CURLOPT_RETURNTRANSFER =&gt; TRUE,
    CURLOPT_HTTPHEADER =&gt; array(
        'Authorization: '.$authToken,
        'Content-Type: application/json'
    ),
    CURLOPT_POSTFIELDS =&gt; json_encode($postData)
));

// Send the request
$response = curl_exec($ch);

// Check for errors
if($response === FALSE){
    die(curl_error($ch));
}

// Decode the response
$responseData = json_decode($response, TRUE);

// Print the date from the response
echo $responseData['published'];
</code></pre>

<p>If, for some reason, you can't/don't want to use cURL, you can do this:</p>

<pre><code>&lt;?php
// Your ID and token
$blogID = '8070105920543249955';
$authToken = 'OAuth 2.0 token here';

// The data to send to the API
$postData = array(
    'kind' =&gt; 'blogger#post',
    'blog' =&gt; array('id' =&gt; $blogID),
    'title' =&gt; 'A new post',
    'content' =&gt; 'With &lt;b&gt;exciting&lt;/b&gt; content...'
);

// Create the context for the request
$context = stream_context_create(array(
    'http' =&gt; array(
        // http://www.php.net/manual/en/context.http.php
        'method' =&gt; 'POST',
        'header' =&gt; ""Authorization: {$authToken}\r\n"".
            ""Content-Type: application/json\r\n"",
        'content' =&gt; json_encode($postData)
    )
));

// Send the request
$response = file_get_contents('https://www.googleapis.com/blogger/v3/blogs/'.$blogID.'/posts/', FALSE, $context);

// Check for errors
if($response === FALSE){
    die('Error');
}

// Decode the response
$responseData = json_decode($response, TRUE);

// Print the date from the response
echo $responseData['published'];
</code></pre>
","16920588"
"Difference between array_push() and $array[] =","144916","","<p>In the PHP manual, (<a href=""http://php.net/manual/en/function.array-push.php"" rel=""noreferrer"">array_push</a>) says..</p>

<blockquote>
  <p>If you use <strong>array_push()</strong> to add one element to the array it's better to
  use <strong>$array[] =</strong> because in that way there is no overhead of calling a
  function.</p>
</blockquote>

<p>For example :</p>

<pre><code>$arr = array();
array_push($arr, ""stackoverflow"");
print_r($arr);
</code></pre>

<p>vs</p>

<pre><code>$arr[] = ""stackoverflow"";
print_r($arr);
</code></pre>

<p>I don't understand why there is a big difference.</p>
","<p>When you call a function in PHP (such as <code>array_push()</code>), there are overheads to the call, as PHP has to look up the function reference, find its position in memory and execute whatever code it defines.</p>

<p>Using <code>$arr[] = 'some value';</code> does not require a function call, and implements the addition straight into the data structure. Thus, when adding a lot of data it is a lot quicker and resource-efficient to use <code>$arr[]</code>.</p>
","14232829"
"How do I return a proper success/error message for JQuery .ajax() using PHP?","144708","","<p>I keep getting the error alert. There is nothing wrong with the MYSQL part, the query gets executed and I can see the email addresses in the db.</p>

<p><strong>The client side:</strong></p>

<pre><code>&lt;script type=""text/javascript""&gt;
  $(function() {
    $(""form#subsribe_form"").submit(function() {
      var email = $(""#email"").val();

      $.ajax({
        url: ""subscribe.php"",
        type: ""POST"",
        data: {email: email},
        dataType: ""json"",
        success: function() {
          alert(""Thank you for subscribing!"");
        },
        error: function() {
          alert(""There was an error. Try again please!"");
        }
      });
      return false;
    });
  });
&lt;/script&gt;
</code></pre>

<p><strong>The server side:</strong></p>

<pre><code>&lt;?php 
$user=""username"";
$password=""password"";
$database=""database"";

mysql_connect(localhost,$user,$password);
mysql_select_db($database) or die( ""Unable to select database"");

$senderEmail = isset( $_POST['email'] ) ? preg_replace( ""/[^\.\-\_\@a-zA-Z0-9]/"", """", $_POST['email'] ) : """";

if($senderEmail != """")
    $query = ""INSERT INTO participants VALUES (CURDATE(),'"".$senderEmail.""')"";
mysql_query($query);
mysql_close();

$response_array['status'] = 'success';    

echo json_encode($response_array);
?&gt;
</code></pre>
","<p>You need to provide the right content type if you're using JSON dataType. Before echo-ing the json, put the correct header.</p>

<pre><code>&lt;?php    
    header('Content-type: application/json');
    echo json_encode($response_array);
?&gt;
</code></pre>

<p>Additional fix, you should check whether the query succeed or not.</p>

<pre><code>if(mysql_query($query)){
    $response_array['status'] = 'success';  
}else {
    $response_array['status'] = 'error';  
}
</code></pre>

<p>On the client side:</p>

<pre><code>success: function(data) {
    if(data.status == 'success'){
        alert(""Thank you for subscribing!"");
    }else if(data.status == 'error'){
        alert(""Error on query!"");
    }
},
</code></pre>

<p>Hope it helps.</p>
","9676203"
"PHP date yesterday","144536","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/4780333/get-timestamp-of-today-and-yesterday-in-php"">Get timestamp of today and yesterday in php</a>  </p>
</blockquote>



<p>I was wondering if there was a simple way of getting yesterday's date through this format:</p>

<pre><code>date(""F j, Y"");
</code></pre>
","<p><a href=""http://php.net/date""><code>date()</code></a> itself is only for formatting, but it accepts a second parameter.</p>

<pre><code>date(""F j, Y"", time() - 60 * 60 * 24);
</code></pre>

<p>To keep it simple I just subtract 24 hours from the unix timestamp.</p>

<p>A modern oop-approach is using <a href=""http://php.net/book.datetime""><code>DateTime</code></a></p>

<pre><code>$date = new DateTime();
$date-&gt;sub(new DateInterval('P1D'));
echo $date-&gt;format('F j, Y') . ""\n"";
</code></pre>

<p>Or in your case (more readable/obvious)</p>

<pre><code>$date = new DateTime();
$date-&gt;add(DateInterval::createFromDateString('yesterday'));
echo $date-&gt;format('F j, Y') . ""\n"";
</code></pre>

<p>(Because <code>DateInterval</code> is negative here, we must <a href=""http://php.net/datetime.add""><code>add()</code></a> it here)</p>

<p>See also: <a href=""http://php.net/datetime.sub""><code>DateTime::sub()</code></a> and <a href=""http://php.net/class.dateinterval""><code>DateInterval</code></a></p>
","6796877"
"Why use $_SERVER['PHP_SELF'] instead of """"","144315","","<p>In a form on a PHP page, you can use: </p>

<pre><code>&lt;form action=""&lt;?php echo $_SERVER['PHP_SELF']; ?&gt;"" ...&gt;
</code></pre>

<p>or</p>

<pre><code>&lt;form action=""#"" ...&gt;
</code></pre>

<p>or</p>

<pre><code>&lt;form action="""" ...&gt;
</code></pre>

<p>in the action attribute of the form. Since echo <code>$_SERVER['PHP_SELF']</code> does not pass variables for using <code>GET</code> and you have to use <code>""""</code>, why would you use that or <code>""#""</code>? </p>

<p>I'm asking because it took me some time to figure out that the variables are not passed with <code>$_SERVER['PHP_SELF']</code>. Thanks.</p>
","<p>The <code>action</code> attribute will default to the current URL. It is the most reliable and easiest way to say ""submit the form to the same place it came from"".</p>

<p>There is no reason to use <code>$_SERVER['PHP_SELF']</code>, and <code>#</code> doesn't submit the form at all (unless there is a <code>submit</code> event handler attached that handles the submission).</p>
","14093357"
"Using braces with dynamic variable names in PHP","144171","","<p>I'm trying to use dynamic variable names (I'm not sure what they're actually called) But pretty much like this:</p>

<pre><code>for($i=0; $i&lt;=2; $i++) {
    $(""file"" . $i) = file($filelist[$i]);
}

var_dump($file0);
</code></pre>

<p>The return is <code>null</code> which tells me it's not working. I have no idea what the syntax or the technique I'm looking for is here, which makes it hard to research. <code>$filelist</code> is defined earlier on.</p>
","<p>Wrap them in <code>{}</code>:</p>

<pre><code>${""file"" . $i} = file($filelist[$i]);
</code></pre>

<h3><a href=""http://codepad.org/dYr0IxMI"">Working Example</a></h3>

<hr>

<p>Using <code>${}</code> is a way to create dynamic variables, simple example:</p>

<pre><code>${'a' . 'b'} = 'hello there';
echo $ab; // hello there
</code></pre>
","9257536"
"How to execute PHP code from the command line?","143971","","<p>I would like to execute a single php statement like <code>if(function_exists(""my_func"")) echo 'function exists';</code> directly with the command line without having to use a seperate php file.</p>

<p>How is it possible ?</p>
","<p><strong>If you're going to do PHP in the command line, i recommend you install <a href=""http://www.phpsh.org/"">phpsh, a decent PHP shell</a>.</strong> It's a lot more fun.</p>

<p>Anyway, the php command offers <strong>two switches to execute code from the command line</strong>:</p>

<pre><code>-r &lt;code&gt;        Run PHP &lt;code&gt; without using script tags &lt;?..?&gt;
-R &lt;code&gt;        Run PHP &lt;code&gt; for every input line
</code></pre>

<p>You can use php's <strong>-r switch</strong> as such:</p>

<pre><code>php -r 'echo function_exists(""foo"") ? ""yes"" : ""no"";'
</code></pre>

<p>The above PHP command above should <strong>output</strong> <code>no</code> and <strong>returns</strong> <code>0</code> as you can see:</p>

<pre><code>&gt;&gt;&gt; php -r 'echo function_exists(""foo"") ? ""yes"" : ""no"";'
no
&gt;&gt;&gt; echo $? # print the return value of the previous command
0
</code></pre>

<p>Another funny switch is <strong>php -a</strong>:</p>

<pre><code>-a               Run as interactive shell
</code></pre>

<p>It's <strong>sort of lame compared to <a href=""http://www.phpsh.org/"">phpsh</a></strong>, but if you don't want to install <a href=""http://www.phpsh.org/"">the awesome interactive shell for php made by facebook to get tab completion, history, and so on</a>, then <strong>use -a as such</strong>:</p>

<pre><code>&gt;&gt;&gt; php -a
Interactive shell

php &gt; echo function_exists(""foo"") ? ""yes"" : ""no"";
no
php &gt; 
</code></pre>

<p><strong>If it doesn't work</strong> on your box like on my box*<em>es</em>* (<strong>tested</strong> on Ubuntu and Arch), then <strong>probably your PHP setup is fuzzy or broken</strong>. If you run this command:</p>

<pre><code>php -i | grep 'API'
</code></pre>

<p>You <strong>should</strong> see:</p>

<pre><code>Server API =&gt; Command Line Interface
</code></pre>

<p><strong>If you don't</strong>, this means that <strong>maybe another command will provides the CLI SAPI</strong>. Try php-cli, maybe it's a package or a command available in your OS.</p>

<p><strong>If you do</strong> see that your php command uses the CLI (Command Line Interface) SAPI (Server API), then run <code>php -h | grep code</code> to <strong>find out which crazy switch - as this hasn't changed for year-</strong> allows to run code in your version/setup.</p>

<p>Another couple of examples, just to make sure it works on my boxes:</p>

<pre><code>&gt;&gt;&gt; php -r 'echo function_exists(""sg_load"") ? ""yes"" : ""no"";' 
no
&gt;&gt;&gt; php -r 'echo function_exists(""print_r"") ? ""yes"" : ""no"";' 
yes
</code></pre>

<p>Also, note that it is possible that an extension is loaded in the CLI and not in the CGI or Apache SAPI. <strong>It is likely that several PHP SAPIs use different php.ini files</strong>, e.g. <code>/etc/php/cli/php.ini</code> vs <code>/etc/php/cgi/php.ini</code> vs <code>/etc/php/apache/php.ini</code> on a Gentoo box. Find out which ini file is used with <code>php -i | grep ini</code>.</p>
","9520125"
"PHP If Statement with Multiple Conditions","143963","","<p>I have a variable<code>$var</code>.</p>

<p>I want echo <code>""true""</code> if <code>$var</code> is equal to any of the following values <code>abc</code>, <code>def</code>, <code>hij</code>, <code>klm</code>, or <code>nop</code>. Is there a way to do this with a single statement like <code>&amp;&amp;</code>??</p>
","<pre><code>if($var == ""abc"" || $var == ""def"" || ...)
{
    echo ""true"";
}
</code></pre>

<p>Using ""Or"" instead of ""And"" would help here, i think</p>
","5593568"
"How to identify server IP address in PHP","143897","","<p>How can I identify the server IP address in PHP?</p>
","<p>Like this for the server ip:</p>

<pre><code>$_SERVER['SERVER_ADDR'];
</code></pre>

<p>and this for the port</p>

<pre><code>$_SERVER['SERVER_PORT'];
</code></pre>
","5800960"
"how to include js file in php?","143866","","<p>I have a problem with an js file in php.
if i include it like this:</p>

<pre><code>?&gt; &lt;script type=""text/javascript"" href=""file.js""&gt;&lt;/script&gt; &lt;?php
</code></pre>

<p>the file isn't included and i get an error that the function isn't defined.</p>

<p>When i try it this way:</p>

<pre><code>&lt;script type=""text/javascript""&gt;
document.write('&lt;script type=""text/javascript"" src=""datetimepicker_css.js""&gt;&lt;/script&gt;');
&lt;/script&gt;
</code></pre>

<p>the first  tag in the document.write function closes <code>&lt;script type=""text/javascript""&gt;</code></p>

<p>what is the correct way to do this?</p>

<p>thanks, 
sebastian</p>
","<p>PHP is completely irrelevant for what you are doing. The generated HTML is what counts.</p>

<p>In your case, you are missing the <code>src</code> attribute. Use</p>

<pre><code> &lt;script type=""text/javascript"" src=""file.js""&gt;&lt;/script&gt;
</code></pre>
","4238363"
"Best way to do a PHP switch with multiple values per case?","143834","","<p>How would you do this PHP switch statement?</p>

<p>Also note that these are much smaller versions, the 1 I need to create will have a lot more values added to it.</p>

<p>Version 1:  </p>

<pre><code>switch ($p) { 
    case 'home': 
    case '': 
        $current_home = 'current';
    break; 

    case 'users.online': 
    case 'users.location': 
    case 'users.featured': 
    case 'users.new': 
    case 'users.browse': 
    case 'users.search': 
    case 'users.staff': 
        $current_users = 'current';
    break;

    case 'forum': 
        $current_forum = 'current';
    break; 
} 
</code></pre>

<p>Version 2:  </p>

<pre><code>switch ($p) { 
    case 'home': 
        $current_home = 'current';
    break; 

    case 'users.online' || 'users.location' || 'users.featured' || 'users.browse' || 'users.search' || 'users.staff': 
        $current_users = 'current';
    break;

    case 'forum': 
        $current_forum = 'current';
    break; 
} 
</code></pre>

<p><strong>UPDATE - Test Results</strong>  </p>

<p>I ran some speed test on 10,000 iterations,  </p>

<p>Time1: 0.0199389457703 // If statements<br>
Time2: 0.0389049446106 //switch statements<br>
Time3: 0.106977939606 // Arrays  </p>
","<p>For any situation where you have an unknown string and you need to figure out which of a bunch of <em>other</em> strings it matches up to, the only solution which doesn't get slower as you add more items is to use an array, but have all the possible strings as keys. So your switch can be replaced with the following:</p>

<pre><code>// used for $current_home = 'current';
$group1 = array(
        'home'  =&gt; True,
        );

// used for $current_users = 'current';
$group2 = array(
        'users.online'      =&gt; True,
        'users.location'    =&gt; True,
        'users.featured'    =&gt; True,
        'users.new'         =&gt; True,
        'users.browse'      =&gt; True,
        'users.search'      =&gt; True,
        'users.staff'       =&gt; True,
        );

// used for $current_forum = 'current';
$group3 = array(
        'forum'     =&gt; True,
        );

if(isset($group1[$p]))
    $current_home = 'current';
else if(isset($group2[$p]))
    $current_users = 'current';
else if(isset($group3[$p]))
    $current_forum = 'current';
else
    user_error(""\$p is invalid"", E_USER_ERROR);
</code></pre>

<p>This doesn't look as clean as a <code>switch()</code>, but it is the only <em>fast</em> solution which doesn't include writing a small library of functions and classes to keep it tidy. It is still very easy to add items to the arrays.</p>
","1309872"
"Removing array item by value","143518","","<p>I need to remove array item with given value:</p>

<pre><code>if (in_array($id, $items)) {
    $items = array_flip($items);
    unset($items[ $id ]);
    $items = array_flip($items);
}
</code></pre>

<p>Could it be done in shorter (more efficient) way?</p>
","<p>It can be accomplished with a simple one-liner.</p>

<p>Having this array:</p>

<pre><code>$arr = array('nice_item', 'remove_me', 'another_liked_item', 'remove_me_also');
</code></pre>

<p>You can do:</p>

<pre><code>$arr = array_diff($arr, array('remove_me', 'remove_me_also'));
</code></pre>

<p>And the value of <code>$arr</code> will be:</p>

<pre><code>array('nice_item', 'another_liked_item')
</code></pre>

<p>Hope it helps write beautiful code.</p>
","9268826"
"Disabling Strict Standards in PHP 5.4","143393","","<p>I'm currently running a site on php 5.4, prior to this I was running my site on 5.3.8. Unfortunately, php 5.4 combines <code>E_ALL</code> and <code>E_STRICT</code>, which means that my previous setting for <code>error_reporting</code> does not work now. My previous value was <code>E_ALL &amp; ~E_NOTICE &amp; ~E_STRICT</code> Should I just enable values one at a time?</p>

<p>I have far too many errors and the files contain too much code for me to fix.</p>
","<p>As the commenters have stated the <em>best</em> option is to fix the errors, but with limited time or knowledge, that's not always possible.  In your php.ini change </p>

<pre><code>error_reporting = E_ALL
</code></pre>

<p>to </p>

<pre><code>error_reporting = E_ALL &amp; ~E_NOTICE &amp; ~E_STRICT
</code></pre>

<p>If you don't have access to the php.ini, you can potentially put this in your .htaccess file:</p>

<pre><code>php_value error_reporting 30711
</code></pre>

<p>This is the E_ALL value (32767) and the removing the E_STRICT (2048) and E_NOTICE (8) values.</p>

<p>If you don't have access to the .htaccess file or it's not enabled, you'll probably need to put this at the top of the PHP section of any script that gets loaded from a browser call:</p>

<pre><code>error_reporting(E_ALL &amp; ~E_STRICT &amp; ~E_NOTICE);
</code></pre>

<p>One of those should help you be able to use the software. The notices and strict stuff are indicators of problems or potential problems though and you may find some of the code is not working correctly in PHP 5.4.</p>

<p>Hope this helps.</p>
","9984309"
"How to zip a whole folder using PHP","143243","","<p>I have found here at stackoveflow some codes on how to ZIP a specific file, but how about a specific folder?</p>

<pre><code>Folder/
  index.html
  picture.jpg
  important.txt
</code></pre>

<p>inside in <code>My Folder</code>, there are files. after zipping the <code>My Folder</code>, i also want to delete the whole content of the folder except <code>important.txt</code>.</p>

<p>Found this here at <a href=""https://stackoverflow.com/questions/1760975/download-multiple-files-as-a-zip-folder-using-php"">stack</a></p>

<p>I need your help. 
thanks.</p>
","<p>Code updated 2015/04/22.</p>

<h2>Zip a whole folder:</h2>

<pre><code>// Get real path for our folder
$rootPath = realpath('folder-to-zip');

// Initialize archive object
$zip = new ZipArchive();
$zip-&gt;open('file.zip', ZipArchive::CREATE | ZipArchive::OVERWRITE);

// Create recursive directory iterator
/** @var SplFileInfo[] $files */
$files = new RecursiveIteratorIterator(
    new RecursiveDirectoryIterator($rootPath),
    RecursiveIteratorIterator::LEAVES_ONLY
);

foreach ($files as $name =&gt; $file)
{
    // Skip directories (they would be added automatically)
    if (!$file-&gt;isDir())
    {
        // Get real and relative path for current file
        $filePath = $file-&gt;getRealPath();
        $relativePath = substr($filePath, strlen($rootPath) + 1);

        // Add current file to archive
        $zip-&gt;addFile($filePath, $relativePath);
    }
}

// Zip archive will be created only after closing object
$zip-&gt;close();
</code></pre>

<h2>Zip a whole folder + delete all files except ""important.txt"":</h2>

<pre><code>// Get real path for our folder
$rootPath = realpath('folder-to-zip');

// Initialize archive object
$zip = new ZipArchive();
$zip-&gt;open('file.zip', ZipArchive::CREATE | ZipArchive::OVERWRITE);

// Initialize empty ""delete list""
$filesToDelete = array();

// Create recursive directory iterator
/** @var SplFileInfo[] $files */
$files = new RecursiveIteratorIterator(
    new RecursiveDirectoryIterator($rootPath),
    RecursiveIteratorIterator::LEAVES_ONLY
);

foreach ($files as $name =&gt; $file)
{
    // Skip directories (they would be added automatically)
    if (!$file-&gt;isDir())
    {
        // Get real and relative path for current file
        $filePath = $file-&gt;getRealPath();
        $relativePath = substr($filePath, strlen($rootPath) + 1);

        // Add current file to archive
        $zip-&gt;addFile($filePath, $relativePath);

        // Add current file to ""delete list""
        // delete it later cause ZipArchive create archive only after calling close function and ZipArchive lock files until archive created)
        if ($file-&gt;getFilename() != 'important.txt')
        {
            $filesToDelete[] = $filePath;
        }
    }
}

// Zip archive will be created only after closing object
$zip-&gt;close();

// Delete all files from ""delete list""
foreach ($filesToDelete as $file)
{
    unlink($file);
}
</code></pre>
","4914807"
"How to make a drop down list in yii2?","143172","","<p>How to make a <code>dropdown</code> in <code>yii2</code> using an <code>activeform</code> and a model? Since all the methods has changed in <code>yii2</code>,how it is done in the new one?</p>
","<p>It is like</p>

<pre><code>&lt;?php
use yii\helpers\ArrayHelper;
use backend\models\Standard;
?&gt;

&lt;?= Html::activeDropDownList($model, 's_id',
      ArrayHelper::map(Standard::find()-&gt;all(), 's_id', 'name')) ?&gt;
</code></pre>

<p>ArrayHelper in Yii2 replaces the CHtml list data in Yii 1.1.[Please load array data from your controller]</p>

<p><b> EDIT </b></p>

<p>Load data from your controller.</p>

<p>Controller</p>

<pre><code>$items = ArrayHelper::map(Standard::find()-&gt;all(), 's_id', 'name');
...
return $this-&gt;render('your_view',['model'=&gt;$model, 'items'=&gt;$items]);
</code></pre>

<p>In View</p>

<pre><code>&lt;?= Html::activeDropDownList($model, 's_id',$items) ?&gt;
</code></pre>
","21569713"
"AngularJS POST Fails: Response for preflight has invalid HTTP status code 404","143084","","<p>I know there are a lot of questions like this, but none I've seen have fixed my issue. I've used at least 3 microframeworks already. All of them fail at doing a simple POST, which should return the data back:</p>

<p>The angularJS client:</p>

<pre><code>var app = angular.module('client', []);

app.config(function ($httpProvider) {
  //uncommenting the following line makes GET requests fail as well
  //$httpProvider.defaults.headers.common['Access-Control-Allow-Headers'] = '*';
  delete $httpProvider.defaults.headers.common['X-Requested-With'];
});

app.controller('MainCtrl', function($scope, $http) {
  var baseUrl = 'http://localhost:8080/server.php'

  $scope.response = 'Response goes here';

  $scope.sendRequest = function() {
    $http({
      method: 'GET',
      url: baseUrl + '/get'
    }).then(function successCallback(response) {
      $scope.response = response.data.response;
    }, function errorCallback(response) { });
  };

  $scope.sendPost = function() {
    $http.post(baseUrl + '/post', {post: 'data from client', withCredentials: true })
    .success(function(data, status, headers, config) {
      console.log(status);
    })
    .error(function(data, status, headers, config) {
      console.log('FAILED');
    });
  }
});
</code></pre>

<p>The SlimPHP server:</p>

<pre><code>&lt;?php
    require 'vendor/autoload.php';

    $app = new \Slim\Slim();
    $app-&gt;response()-&gt;headers-&gt;set('Access-Control-Allow-Headers', 'Content-Type');
    $app-&gt;response()-&gt;headers-&gt;set('Content-Type', 'application/json');
    $app-&gt;response()-&gt;headers-&gt;set('Access-Control-Allow-Methods', 'GET, POST, OPTIONS');
    $app-&gt;response()-&gt;headers-&gt;set('Access-Control-Allow-Origin', '*');

    $array = [""response"" =&gt; ""Hello World!""];

    $app-&gt;get('/get', function() use($array) {
        $app = \Slim\Slim::getInstance();

        $app-&gt;response-&gt;setStatus(200);
        echo json_encode($array);
    }); 

    $app-&gt;post('/post', function() {
        $app = \Slim\Slim::getInstance();

        $allPostVars = $app-&gt;request-&gt;post();
        $dataFromClient = $allPostVars['post'];
        $app-&gt;response-&gt;setStatus(200);
        echo json_encode($dataFromClient);
    });

    $app-&gt;run();
</code></pre>

<p>I have enabled CORS, and GET requests work. The html updates with the JSON content sent by the server. However I get a </p>

<p><em>XMLHttpRequest cannot load <a href=""http://localhost:8080/server.php/post"" rel=""noreferrer"">http://localhost:8080/server.php/post</a>. Response for preflight has invalid HTTP status code 404</em></p>

<p>Everytime I try to use POST. Why?</p>

<p>EDIT: The req/res as requested by Pointy
<a href=""https://i.stack.imgur.com/ePSa1.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/ePSa1.png"" alt=""req/res headers""></a></p>
","<p>Ok so here's how I figured this out.
It all has to do with CORS policy. Before the POST request, Chrome was doing a preflight OPTIONS request, which should be handled and acknowledged by the server prior to the actual request. Now this is really not what I wanted for such a simple server. Hence, resetting the headers client side prevents the preflight:</p>

<pre><code>app.config(function ($httpProvider) {
  $httpProvider.defaults.headers.common = {};
  $httpProvider.defaults.headers.post = {};
  $httpProvider.defaults.headers.put = {};
  $httpProvider.defaults.headers.patch = {};
});
</code></pre>

<p>The browser will now send a POST directly. Hope this helps a lot of folks out there... My real problem was not understanding CORS enough. </p>

<p>Link to a great explanation: <a href=""http://www.html5rocks.com/en/tutorials/cors/"" rel=""noreferrer"">http://www.html5rocks.com/en/tutorials/cors/</a></p>

<p>Kudos to <a href=""https://stackoverflow.com/a/20516179/2452352"">this answer</a> for showing me the way.</p>
","33662315"
"Convert a PHP script into a stand-alone windows executable","143035","","<p>I want to automate a fairly simple task. For this I have written a small PHP script which I run from the command line using PHP-CLI. Now I want to hand over this script to someone but I do not want to:</p>

<ul>
<li>give away the source code</li>
<li>ask him to install PHP on the system</li>
</ul>

<p>Is there a way to create a .exe version of the PHP script. I am really not much worried about de-compilation; I am more worried about asking people to install and configure PHP.</p>
","<p><strong>Peachpie</strong></p>

<p><a href=""http://www.peachpie.io"" rel=""noreferrer"">http://www.peachpie.io</a></p>

<p><a href=""https://github.com/iolevel/peachpie"" rel=""noreferrer"">https://github.com/iolevel/peachpie</a></p>

<p>Peachpie is PHP 7 compiler based on Roslyn by Microsoft and drawing from popular Phalanger. It allows PHP to be executed within the .NET/.NETCore by compiling the PHP code to pure MSIL.</p>

<p><strong>Phalanger</strong></p>

<p><a href=""http://v4.php-compiler.net/"" rel=""noreferrer"">http://v4.php-compiler.net/</a></p>

<p><a href=""http://wiki.php-compiler.net/Phalanger_Wiki"" rel=""noreferrer"">http://wiki.php-compiler.net/Phalanger_Wiki</a></p>

<p><a href=""https://github.com/devsense/phalanger"" rel=""noreferrer"">https://github.com/devsense/phalanger</a></p>

<p>Phalanger is a project which was started at Charles University in Prague and was supported by Microsoft. It compiles source code written in the PHP scripting language into CIL (Common Intermediate Language) byte-code. It handles the beginning of a compiling process which is completed by the JIT compiler component of the .NET Framework. It does not address native code generation nor optimization. Its purpose is to compile PHP scripts into .NET assemblies, logical units containing CIL code and meta-data.</p>

<p><strong>Bambalam</strong></p>

<p><a href=""http://www.bambalam.se/bamcompile/"" rel=""noreferrer"">http://www.bambalam.se/bamcompile/</a></p>

<p>Bambalam PHP EXE Compiler/Embedder is a free command line tool to convert PHP applications to standalone Windows .exe applications. The exe files produced are totally standalone, no need for php dlls etc. The php code is encoded using the Turck MMCache Encode library so it's a perfect solution if you want to distribute your application while protecting your source code. The converter is also suitable for producing .exe files for windowed PHP applications (created using for example the WinBinder library). It's also good for making stand-alone PHP Socket servers/clients (using the php_sockets.dll extension). 
It's NOT really a compiler in the sense that it doesn't produce native machine code from PHP sources, but it works! </p>

<p><strong>ZZEE PHPExe</strong></p>

<p><a href=""http://www.zzee.com/phpexe/"" rel=""noreferrer"">http://www.zzee.com/phpexe/</a></p>

<p>ZZEE PHPExe compiles PHP, HTML, Javascript, Flash and other web files into Windows GUI exes. You can rapidly develop Windows GUI applications by employing the familiar PHP web paradigm. You can use the same code for online and Windows applications with little or no modification. It is a Commercial product.</p>

<p><strong>phc-win</strong></p>

<p><a href=""http://wiki.swiftlytilting.com/Phc-win"" rel=""noreferrer"">http://wiki.swiftlytilting.com/Phc-win</a></p>

<p>The PHP extension bcompiler is used to compile PHP script code into PHP bytecode. This bytecode can be included just like any php file as long as the bcompiler extension is loaded. Once all the bytecode files have been created, a modified Embeder is used to pack all of the project files into the program exe. </p>

<p>Requires</p>

<ul>
<li>php5ts.dll </li>
<li>php_win32std.dll </li>
<li>php_bcompiler.dll </li>
<li>php-embed.ini </li>
</ul>

<p><strong>ExeOutput</strong></p>

<p><a href=""http://www.exeoutput.com/"" rel=""noreferrer"">http://www.exeoutput.com/</a></p>

<p>Commercial</p>

<p><strong>WinBinder</strong></p>

<p><a href=""http://winbinder.org/"" rel=""noreferrer"">http://winbinder.org/</a></p>

<p>WinBinder is an open source extension to PHP, the script programming language. It allows PHP programmers to easily build native Windows applications, producing quick and rewarding results with minimum effort. Even short scripts with a few dozen lines can generate a useful program, thanks to the power and flexibility of PHP.</p>

<p><strong>PHPDesktop</strong></p>

<p><a href=""https://github.com/cztomczak/phpdesktop"" rel=""noreferrer"">https://github.com/cztomczak/phpdesktop</a></p>

<p>PHP Desktop is an open source project founded by Czarek Tomczak in 2012 to provide a way for developing native desktop applications using web technologies such as PHP, HTML5, JavaScript &amp; SQLite. This project is more than just a PHP to EXE compiler, it embeds a web-browser (Internet Explorer or Chrome embedded), a Mongoose web-server and a PHP interpreter. The development workflow you are used to remains the same, the step of turning an existing website into a desktop application is basically a matter of copying it to ""www/"" directory. Using SQLite database is optional, you could embed mysql/postgresql database in application's installer.</p>

<p><strong>PHP Nightrain</strong></p>

<p><a href=""http://www.naetech.com/php-nightrain"" rel=""noreferrer"">http://www.naetech.com/php-nightrain</a></p>

<p>Using PHP Nightrain you will be able to deploy and run HTML, CSS, JavaScript and PHP web applications as a native desktop application on Windows, Mac and the Linux operating systems. Popular PHP Frameworks (e.g. CakePHP, Laravel, Drupal, etc…) are well supported!</p>

<p><strong>phc-win ""fork""</strong></p>

<p><a href=""https://github.com/RDashINC/phc-win"" rel=""noreferrer"">https://github.com/RDashINC/phc-win</a></p>

<p>A more-or-less forked version of phc-win, it uses the same techniques as phc-win but supports almost all modern PHP versions. (5.3, 5.4, 5.5, 5.6, etc) It also can use Enigma VB to combine the php5ts.dll with your exe, aswell as UPX compress it. Lastly, it has win32std and winbinder compilied statically into PHP.</p>

<p><strong>EDIT</strong></p>

<p>Another option is to use </p>

<p><a href=""http://www.appcelerator.com/products/titanium-cross-platform-application-development/"" rel=""noreferrer"">http://www.appcelerator.com/products/titanium-cross-platform-application-development/</a></p>

<p>an online compiler that can build executables for a number of different platforms, from a number of different languages including PHP</p>

<p><strong>TideSDK</strong></p>

<p><a href=""http://www.tidesdk.org/"" rel=""noreferrer"">http://www.tidesdk.org/</a></p>

<p>TideSDK is actually the renamed Titanium Desktop project. Titanium remained focused on mobile, and abandoned the desktop version, which was taken over by some people who have open sourced it and dubbed it TideSDK.</p>

<p>Generally, TideSDK uses HTML, CSS and JS to render applications, but it supports scripted languages like PHP, as a plug-in module, as well as other scripting languages like Python and Ruby. </p>
","9046775"
"How can I properly use a PDO object for a parameterized SELECT query","142753","","<p>I've tried following the PHP.net instructions for doing <code>SELECT</code> queries but I am not sure the best way to go about doing this.</p>

<p>I would like to use a parameterized <code>SELECT</code> query, if possible, to return the <code>ID</code> in a table where the <code>name</code> field matches the parameter. This should return one <code>ID</code> because it will be unique.</p>

<p>I would then like to use that <code>ID</code> for an <code>INSERT</code> into another table, so I will need to determine if it was successful or not.</p>

<p>I also read that you can prepare the queries for reuse but I wasn't sure how this helps.</p>
","<p>You select data like this:</p>

<pre><code>$db = new PDO(""..."");
$statement = $db-&gt;prepare(""select id from some_table where name = :name"");
$statement-&gt;execute(array(':name' =&gt; ""Jimbo""));
$row = $statement-&gt;fetch(); // Use fetchAll() if you want all results, or just iterate over the statement, since it implements Iterator
</code></pre>

<p>You insert in the same way:</p>

<pre><code>$statement = $db-&gt;prepare(""insert into some_other_table (some_id) values (:some_id)"");
$statement-&gt;execute(array(':some_id' =&gt; $row['id']));
</code></pre>

<p>I recommend that you configure PDO to throw exceptions upon error. You would then get a <code>PDOException</code> if any of the queries fail - No need to check explicitly. To turn on exceptions, call this just after you've created the <code>$db</code> object:</p>

<pre><code>$db = new PDO(""..."");
$db-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
</code></pre>
","767520"
"Correctly determine if date string is a valid date in that format","142712","","<p>I'm receiving a date string from an API, and it is formatted as <code>yyyy-mm-dd</code>.</p>

<p>I am currently using a regex to validate the string format, which works ok, but I can see some cases where it could be a correct format according to the string but actually an invalid date. i.e. <code>2013-13-01</code>, for example.</p>

<p>Is there a better way in PHP to take a string such as <code>2013-13-01</code> and tell if it is a valid date or not for the format <code>yyyy-mm-dd</code>?</p>
","<p>You can use <a href=""http://php.net/datetime"" rel=""noreferrer""><code>DateTime</code></a> class for this purpose:</p>

<pre class=""lang-php prettyprint-override""><code>function validateDate($date, $format = 'Y-m-d')
{
    $d = DateTime::createFromFormat($format, $date);
    return $d &amp;&amp; $d-&gt;format($format) == $date;
}
</code></pre>

<p><sup>[<em>Function taken from <a href=""https://stackoverflow.com/a/12323025/67332"">this answer</a>. Also on <a href=""http://www.php.net/manual/en/function.checkdate.php#113205"" rel=""noreferrer"">php.net</a>. Originally written by <a href=""https://stackoverflow.com/users/67332"">Glavić</a>.</em>]</sup></p>

<hr>

<p>Test cases:</p>

<pre><code>var_dump(validateDate('2013-13-01'));  // false
var_dump(validateDate('20132-13-01')); // false
var_dump(validateDate('2013-11-32'));  // false
var_dump(validateDate('2012-2-25'));   // false
var_dump(validateDate('2013-12-01'));  // true
var_dump(validateDate('1970-12-01'));  // true
var_dump(validateDate('2012-02-29'));  // true
</code></pre>

<p><a href=""https://eval.in/53309"" rel=""noreferrer""><strong>Demo!</strong></a></p>
","19271434"
"Get all photos from Instagram which have a specific hashtag with PHP","142552","","<p>I need to get some pictures which have a specific hashtag using PHP ?
Any help will be awesome, or hint ?</p>
","<p>There is the instagram public API's tags section that can help you do this.
<a href=""http://instagram.com/developer/endpoints/tags/"" rel=""nofollow noreferrer"">http://instagram.com/developer/endpoints/tags/</a></p>
","11182218"
"PHP remove special character from string","142314","","<p>I have problems with removing special characters. I want to remove all special characters except ""( ) / . % - &amp;"", because I'm setting that string as a title.</p>

<p>I edited code from the original (look below):</p>

<pre><code>preg_replace('/[^a-zA-Z0-9_ -%][().][\/]/s', '', $String);
</code></pre>

<p>But this is not working to remove special characters like: ""â€™s, ""â€œ"", ""â€"", among others.</p>

<p>original code: (this works but it removes these characters: ""( ) / . % - &amp;"")</p>

<pre><code>preg_replace('/[^a-zA-Z0-9_ -]/s', '', $String);
</code></pre>
","<p>Your dot is matching all characters. Escape it (and the other special characters), like this:</p>

<pre><code>preg_replace('/[^a-zA-Z0-9_ %\[\]\.\(\)%&amp;-]/s', '', $String);
</code></pre>
","6073257"
"Access denied for user 'root'@'localhost' with PHPMyAdmin","142311","","<p>When I set the root password in PHPMyAdmin, I get this error:</p>

<pre><code>#1045 - Access denied for user 'root'@'localhost' (using password: NO)
</code></pre>

<p>I can't open the PHPMyAdmin panel.  What am I doing wrong?</p>
","<p>Edit your phpmyadmin config.inc.php file and if you have Password, insert that in front of Password in following code:</p>

<pre><code>$cfg['Servers'][$i]['verbose'] = 'localhost';
$cfg['Servers'][$i]['host'] = 'localhost';
$cfg['Servers'][$i]['port'] = '3306';
$cfg['Servers'][$i]['socket'] = '';
$cfg['Servers'][$i]['connect_type'] = 'tcp';
$cfg['Servers'][$i]['extension'] = 'mysqli';
$cfg['Servers'][$i]['auth_type'] = 'config';
$cfg['Servers'][$i]['user'] = '**your-root-username**';
$cfg['Servers'][$i]['password'] = '**root-password**';
$cfg['Servers'][$i]['AllowNoPassword'] = true;
</code></pre>
","11483057"
"Update query PHP MySQL","142167","","<p>Can anybody help me understand why this update query isn't updating the fields in my database? I have this in my php page to retrieve the current values from the database:</p>

<pre><code>&lt;?php

  $query = mysql_query (""SELECT * FROM blogEntry WHERE username = 'bobjones' ORDER BY id DESC"");

  while ($row = mysql_fetch_array ($query)) 
  {
      $id = $row['id']; 
      $username = $row['username'];
      $title = $row['title'];
      $date = $row['date'];
      $category = $row['category'];
      $content = $row['content'];


    ?&gt;
</code></pre>

<p>Here i my HTML Form:</p>

<pre><code>&lt;form method=""post"" action=""editblogscript.php""&gt;
ID: &lt;input type=""text"" name=""id"" value=""&lt;?php echo $id; ?&gt;"" /&gt;&lt;br /&gt;
Username: &lt;input type=""text"" name=""username"" value=""&lt;?php echo $_SESSION['username']; ?&gt;"" /&gt;&lt;br /&gt;
Title: &lt;input type=""text"" name=""udtitle"" value=""&lt;?php echo $title; ?&gt;""/&gt;&lt;br /&gt;
Date: &lt;input type=""text"" name=""date"" value=""&lt;?php echo $date; ?&gt;""/&gt;&lt;br /&gt;
Message: &lt;textarea name = ""udcontent"" cols=""45"" rows=""5""&gt;&lt;?php echo $content; ?&gt;&lt;/textarea&gt;&lt;br /&gt;
&lt;input type= ""submit"" name = ""edit"" value=""Edit!""&gt;
&lt;/form&gt;
</code></pre>

<p>and here is my 'editblogscript':</p>

<pre><code>&lt;?php

mysql_connect (""localhost"", ""root"", """");
mysql_select_db(""blogass"");

if (isset($_POST['edit'])) {

    $id = $_POST['id'];
    $udtitle = $_POST['udtitle'];
    $udcontent = $_POST['udcontent'];


    mysql_query(""UPDATE blogEntry SET content = $udcontent, title = $udtitle WHERE id = $id"");
}

header( 'Location: index.php' ) ;





?&gt;
</code></pre>

<p>I don't understand why it doesn't work.</p>
","<p>You have to have single quotes around any VARCHAR content in your queries. So your update query should be:</p>

<pre><code>mysql_query(""UPDATE blogEntry SET content = '$udcontent', title = '$udtitle' WHERE id = $id"");
</code></pre>

<p>Also, it is bad form to update your database directly with the content from a POST. You should sanitize your incoming data with the mysql_real_escape_string function.</p>
","8893621"
"What's better at freeing memory with PHP: unset() or $var = null","142004","","<p>I realise the second one avoids the overhead of a function call (<strong>update</strong>, is actually a language construct), but it would be interesting to know if one is better than the other. I have been using <code>unset()</code> for most of my coding, but I've recently looked through a few respectable classes found off the net that use <code>$var = null</code> instead.</p>

<p>Is there a preferred one, and what is the reasoning?</p>
","<p>It was mentioned in the <a href=""http://web.archive.org/web/20090217225355/http://us2.php.net/manual/en/function.unset.php"" rel=""noreferrer"">unset manual's page in 2009</a>:</p>

<blockquote>
  <p><code>unset()</code> does just what its name says - unset a variable. It does not force immediate memory freeing. PHP's garbage collector will do it when it see fits - by intention as soon, as those CPU cycles aren't needed anyway, or as late as before the script would run out of memory, whatever occurs first.</p>
  
  <p>If you are doing <code>$whatever = null;</code> then you are rewriting variable's data. You might get memory freed / shrunk faster, but it may steal CPU cycles from the code that truly needs them sooner, resulting in a longer overall execution time.</p>
</blockquote>

<p>(Since 2013, that <a href=""http://us2.php.net/manual/en/function.unset.php"" rel=""noreferrer""><code>unset</code> man page</a> don't include that section anymore)</p>

<p>Note that until php5.3, if you have <a href=""http://paul-m-jones.com/?p=262"" rel=""noreferrer"">two objects in circular reference</a>, such as in a parent-child relationship, calling unset() on the parent object will not free the memory used for the parent reference in the child object. (Nor will the memory be freed when the parent object is garbage-collected.) (<a href=""http://bugs.php.net/bug.php?id=33595"" rel=""noreferrer"">bug 33595</a>)</p>

<hr>

<p>The question ""<a href=""https://stackoverflow.com/q/13667137/6309"">difference between unset and = null</a>"" details some differences:</p>

<hr>



<p><code>unset($a)</code> also removes <code>$a</code> from the symbol table; for example:</p>

<pre class=""lang-php prettyprint-override""><code>$a = str_repeat('hello world ', 100);
unset($a);
var_dump($a);
</code></pre>

<blockquote>
  <p>Outputs:</p>
</blockquote>

<pre class=""lang-php prettyprint-override""><code>Notice: Undefined variable: a in xxx
NULL
</code></pre>

<blockquote>
  <p>But when <code>$a = null</code> is used:</p>
</blockquote>

<pre class=""lang-php prettyprint-override""><code>$a = str_repeat('hello world ', 100);
$a = null;
var_dump($a);
Outputs:

NULL
</code></pre>

<blockquote>
  <p>It seems that <code>$a = null</code> is a bit faster than its <code>unset()</code> counterpart: updating a symbol table entry appears to be faster than removing it.</p>
</blockquote>

<hr>

<ul>
<li>when you try to use a non-existent (<code>unset</code>) variable, an error will be triggered and the value for the variable expression will be null. (Because, what else should PHP do? Every expression needs to result in some value.) </li>
<li>A variable with null assigned to it is still a perfectly normal variable though.</li>
</ul>
","584982"
"How should a model be structured in MVC?","141992","","<p>I am just getting a grasp on the MVC framework and I often wonder how much code should go in the model. I tend to have a data access class that has methods like this:</p>

<pre><code>public function CheckUsername($connection, $username)
{
    try
    {
        $data = array();
        $data['Username'] = $username;

        //// SQL
        $sql = ""SELECT Username FROM"" . $this-&gt;usersTableName . "" WHERE Username = :Username"";

        //// Execute statement
        return $this-&gt;ExecuteObject($connection, $sql, $data);
    }
    catch(Exception $e)
    {
        throw $e;
    }
}
</code></pre>

<p>My models tend to be an entity class that is mapped to the database table.</p>

<p>Should the model object have all the database mapped properties as well as the code above or is it OK to separate that code out that actually does the database work?</p>

<p>Will I end up having four layers?</p>
","<blockquote>
  <p><sub><strong>Disclaimer:</strong> the following is a description of how I understand MVC-like patterns in the context of PHP-based web applications. All the external links that are used in the content are there to explain terms and concepts, and <strong>not</strong> to imply my own credibility on the subject.</sub></p>
</blockquote>

<p>The first thing that I must clear up is: <strong>the model is a layer</strong>.</p>

<p>Second: there is a difference between <em>classical MVC</em> and what we use in web development. <a href=""https://stackoverflow.com/a/7622038/727208"">Here's</a> a bit of an older answer I wrote, which briefly describes how they are different.</p>

<h3>What a model is NOT:</h3>

<p>The model is not a class or any single object. It is a very common mistake to make <em>(I did too, though the original answer was written when I began to learn otherwise)</em>, because most frameworks perpetuate this misconception.</p>

<p>Neither is it an Object-Relational Mapping technique (ORM) nor an abstraction of database tables. Anyone who tells you otherwise is most likely trying to <em>'sell'</em> another brand-new ORM or a whole framework.</p>

<h3>What a model is:</h3>

<p>In proper MVC adaptation, the M contains all the domain business logic and the <em>Model Layer</em> is <strong>mostly</strong> made from three types of structures:</p>

<ul>
<li><p><a href=""http://c2.com/cgi/wiki?DomainObject"" rel=""noreferrer""><em>Domain Objects</em></a></p>

<blockquote>
  <p>A domain object is a logical container of purely domain information; it usually represents a logical entity in the problem domain space. Commonly referred to as <em>business logic</em>.</p>
</blockquote>

<p>This would be where you define how to validate data before sending an invoice, or to compute the total cost of an order. At the same time, <em>Domain Objects</em> are completely unaware of storage - neither from <em>where</em> (SQL database, REST API, text file, etc.) nor even <em>if</em> they get saved or retrieved.</p></li>
<li><p><a href=""http://martinfowler.com/eaaCatalog/dataMapper.html"" rel=""noreferrer""><em>Data Mappers</em></a></p>

<p>These objects are only responsible for the storage. If you store information in a database, this would be where the SQL lives. Or maybe you use an XML file to store data, and your <em>Data Mappers</em> are parsing from and to XML files.</p></li>
<li><p><a href=""http://martinfowler.com/eaaCatalog/serviceLayer.html"" rel=""noreferrer""><em>Services</em></a></p>

<p>You can think of them as ""higher level Domain Objects"", but instead of business logic, <em>Services</em> are responsible for interaction between <em>Domain Objects</em> and <em>Mappers</em>. These structures end up creating a ""public"" interface for interacting with the domain business logic. You can avoid them, but at the penalty of leaking some domain logic into <em>Controllers</em>.</p>

<p>There is a related answer to this subject in the <a href=""https://stackoverflow.com/a/9685039/727208"">ACL implementation</a> question - it might be useful.</p></li>
</ul>

<p>The communication between the model layer and other parts of the MVC triad should happen only through <em>Services</em>. The clear separation has a few additional benefits:</p>

<ul>
<li>it helps to enforce the <a href=""https://en.wikipedia.org/wiki/Single_responsibility_principle"" rel=""noreferrer"">single responsibility principle</a> (SRP)</li>
<li>provides additional 'wiggle room' in case the logic changes</li>
<li>keeps the controller as simple as possible</li>
<li>gives a clear blueprint, if you ever need an external API</li>
</ul>

<p>&nbsp;</p>

<h1>How to interact with a model?</h1>

<blockquote>
  <p><sub><em><strong>Prerequisites:</strong> watch lectures <a href=""http://www.youtube.com/watch?v=-FRm3VPhseI"" rel=""noreferrer"">""Global State and Singletons""</a> and <a href=""http://www.youtube.com/watch?v=RlfLCWKxHJ0"" rel=""noreferrer"">""Don't Look For Things!""</a> from the Clean Code Talks.</em></sub></p>
</blockquote>

<h3>Gaining access to service instances</h3>

<p>For both the <em>View</em> and <em>Controller</em> instances (what you could call: ""UI layer"") to have access these services,  there are two general approaches: </p>

<ol>
<li>You can inject the required services in the constructors of your views and controllers directly, preferably using a DI container. </li>
<li>Using a factory for services as a mandatory dependency for all of your views and controllers. </li>
</ol>

<p>As you might suspect, the DI container is a lot more elegant solution (while not being the easiest for a beginner). The two libraries, that I recommend considering for this functionality would be Syfmony's standalone <a href=""http://symfony.com/doc/master/components/dependency_injection.html"" rel=""noreferrer"">DependencyInjection component</a> or <a href=""https://github.com/rdlowrey/auryn"" rel=""noreferrer"">Auryn</a>. </p>

<p>Both the solutions using a factory and a DI container would let you also share the instances of various servers to be shared between the selected controller and view for a given request-response cycle.</p>

<h3>Alteration of model's state</h3>

<p>Now that you can access to the model layer in the controllers, you need to start actually using them: </p>

<pre><code>public function postLogin(Request $request)
{
    $email = $request-&gt;get('email');
    $identity = $this-&gt;identification-&gt;findIdentityByEmailAddress($email);
    $this-&gt;identification-&gt;loginWithPassword(
        $identity,
        $request-&gt;get('password')
    );
}
</code></pre>

<p>Your controllers have a very clear task: take the user input and, based on this input, change the current state of business logic. In this example the states that are changed between are ""anonymous user"" and ""logged in user"". </p>

<p>Controller is not responsible for validating user's input, because that is part of business rules and controller is definitely not calling SQL queries, like what you would see <a href=""https://stackoverflow.com/questions/44535565/codeigniniter-insert-data-through-models-and-controller"">here</a> or <a href=""https://stackoverflow.com/questions/27025412/loading-multiple-select-options-into-array"">here</a> (please don't hate on them, they are misguided, not evil).</p>

<h3>Showing user the state-change.</h3>

<p>Ok, user has logged in (or failed). <a href=""http://i0.kym-cdn.com/photos/images/original/001/142/233/897.gif"" rel=""noreferrer"">Now what?</a> Said user is still unaware of it. So you need to actually produce a response and that is the responsibility of a view. </p>

<pre><code>public function postLogin()
{
    $path = '/login';
    if ($this-&gt;identification-&gt;isUserLoggedIn()) {
        $path = '/dashboard';
    }
    return new RedirectResponse($path); 
}
</code></pre>

<p>In this case, the view produced one of two possible responses, based on the current state of model layer. For a different use-case you would have the view picking different templates to render, based on something like ""current selected of article"" .</p>

<p>The presentation layer can actually get quite elaborate, as described here: <a href=""https://stackoverflow.com/a/16596704/727208"">Understanding MVC Views in PHP</a>.</p>

<h3>But I am just making a REST API!</h3>

<p>Of course, there are situations, when this is a overkill.</p>

<p>MVC is just a concrete solution for <a href=""https://en.wikipedia.org/wiki/Separation_of_concerns"" rel=""noreferrer"">Separation of Concerns</a> principle. <em>MVC separates user interface from the business logic, and it in the UI it separated handling of user input and the presentation.</em> This is crucial. While often people describe it as a ""triad"", it's not actually made up from three independent parts. The structure is more like this: </p>

<p><img src=""https://i.stack.imgur.com/iEn76.png"" alt=""MVC separation""></p>

<p>It means, that, when your presentation layer's logic is close to none-existent, the pragmatic approach is to keep them as single layer. It also can substantially simplify some aspects of model layer. </p>

<p>Using this approach the login example (for an API) can be written as:</p>

<pre><code>public function postLogin(Request $request)
{
    $email = $request-&gt;get('email');
    $data = [
        'status' =&gt; 'ok',
    ];
    try {
        $identity = $this-&gt;identification-&gt;findIdentityByEmailAddress($email);
        $token = $this-&gt;identification-&gt;loginWithPassword(
            $identity,
            $request-&gt;get('password')
        );
    } catch (FailedIdentification $exception) {
        $data = [
            'status' =&gt; 'error',
            'message' =&gt; 'Login failed!',
        ]
    }

    return new JsonResponse($data);
}
</code></pre>

<p>While this is not sustainable, when you have complicate logic for rendering a response body, this simplification is very useful for more trivial scenarios. But <strong>be warned</strong>, this approach will become a nightmare, when attempting to use in large codebases with complex presentation logic.</p>

<p>&nbsp;</p>

<h1>How to build the model?</h1>

<p>Since there is not a single ""Model"" class (as explained above), you really do not ""build the model"". Instead you start from making <em>Services</em>, which are able to perform certain methods. And then implement <em>Domain Objects</em> and <em>Mappers</em>.</p>

<h3>An example of a service method:</h3>

<p>In the both approaches above there was this login method for the identification service. What would it actually look like. I am using a slightly modified version of the same functionality from <a href=""https://github.com/teresko/palladium"" rel=""noreferrer"">a library</a>, that I wrote .. because I am lazy:</p>

<pre><code>public function loginWithPassword(Identity $identity, string $password): string
{
    if ($identity-&gt;matchPassword($password) === false) {
        $this-&gt;logWrongPasswordNotice($identity, [
            'email' =&gt; $identity-&gt;getEmailAddress(),
            'key' =&gt; $password, // this is the wrong password
        ]);

        throw new PasswordMismatch;
    }

    $identity-&gt;setPassword($password);
    $this-&gt;updateIdentityOnUse($identity);
    $cookie = $this-&gt;createCookieIdentity($identity);

    $this-&gt;logger-&gt;info('login successful', [
        'input' =&gt; [
            'email' =&gt; $identity-&gt;getEmailAddress(),
        ],
        'user' =&gt; [
            'account' =&gt; $identity-&gt;getAccountId(),
            'identity' =&gt; $identity-&gt;getId(),
        ],
    ]);

    return $cookie-&gt;getToken();
}
</code></pre>

<p>As you can see, at this level of abstraction, there is no indication of where the data was fetched from. It might be a database, but it also might be just a mock object for testing purposes. Even the data mappers, that are actually used for it, are hidden away in the <code>private</code> methods of this service.</p>

<pre><code>private function changeIdentityStatus(Entity\Identity $identity, int $status)
{
    $identity-&gt;setStatus($status);
    $identity-&gt;setLastUsed(time());
    $mapper = $this-&gt;mapperFactory-&gt;create(Mapper\Identity::class);
    $mapper-&gt;store($identity);
}
</code></pre>

<h3>Ways of creating mappers</h3>

<p>To implement an abstraction of persistence, on the most flexible approaches is to create custom <a href=""http://martinfowler.com/eaaCatalog/dataMapper.html"" rel=""noreferrer"">data mappers</a>. </p>

<p><img src=""https://ptgmedia.pearsoncmg.com/images/chap3_0321127420/elementLinks/03fig04.gif"" alt=""Mapper diagram""></p>

<p><sub>From: <a href=""https://martinfowler.com/books/eaa.html"" rel=""noreferrer"">PoEAA</a> book</sub></p>

<p>In practice they are implemented for interaction with specific classes or superclasses. Lets say you have <code>Customer</code> and <code>Admin</code> in your code (both inheriting from a <code>User</code> superclass). Both would probably end up having a separate matching mapper, since they contain different fields. But you will also end up with shared and commonly used operations. For example: updating the <em>""last seen online""</em> time. And instead of making the existing mappers more convoluted, the more pragmatic approach is to have a general ""User Mapper"", which only update that timestamp.</p>

<h2>Some additional comments:</h2>

<ol>
<li><p><strong>Database tables and model</strong></p>

<p>While sometimes there is a direct 1:1:1 relationship between a database table, <em>Domain Object</em>, and <em>Mapper</em>, in larger projects it might be less common than you expect:</p>

<ul>
<li><p>Information used by a single <em>Domain Object</em> might be mapped from different tables, while the object itself has no persistence in the database.</p>

<p><em>Example:</em> if you are generating a monthly report. This would collect information from different of tables, but there is no magical <code>MonthlyReport</code> table in the database.</p></li>
<li><p>A single <em>Mapper</em> can affect multiple tables.</p>

<p><em>Example:</em> when you are storing data from the <code>User</code> object, this <em>Domain Object</em> could contain collection of other domain objects - <code>Group</code> instances. If you alter them and store the <code>User</code>, the <em>Data Mapper</em> will have to update and/or insert entries in multiple tables.</p></li>
<li><p>Data from a single <em>Domain Object</em> is stored in more than one table.</p>

<p><em>Example:</em> in large systems (think: a medium-sized social network), it might be pragmatic to store user authentication data and often-accessed data separately from larger chunks of content, which is rarely required. In that case you might still have a single <code>User</code> class, but the information it contains would depend of whether full details were fetched.</p></li>
<li><p>For every <em>Domain Object</em> there can be more than one mapper</p>

<p><em>Example:</em> you have a news site with a shared codebased for both public-facing and the management software. But, while both interfaces use the same <code>Article</code> class, the management needs a lot more info populated in it. In this case you would have two separate mappers: ""internal"" and ""external"". Each performing different queries, or even use different databases (as in master or slave).</p></li>
</ul></li>
<li><p><strong>A view is not a template</strong></p>

<p><em>View</em> instances in MVC (if you are not using the MVP variation of the pattern) are responsible for the presentational logic. This means that each <em>View</em> will usually juggle at least a few templates. It acquires data from the <em>Model Layer</em> and then, based on the received information, chooses a template and sets values.</p>

<p>One of the benefits you gain from this is re-usability. If you create a <code>ListView</code> class, then, with well-written code, you can have the same class handing the presentation of user-list and comments below an article. Because they both have the same presentation logic. You just switch templates.</p>

<p>You can use either <a href=""http://codeangel.org/articles/simple-php-template-engine.html"" rel=""noreferrer"">native PHP templates</a> or use some third-party templating engine. There also might be some third-party libraries, which are able to fully replace <em>View</em> instances.</p></li>
<li><p><strong>What about the old version of the answer?</strong></p>

<p>The only major change is that, what is called <em>Model</em> in the old version, is actually a <em>Service</em>. The rest of the ""library analogy"" keeps up pretty well.</p>

<p>The only flaw that I see is that this would be a really strange library, because it would return you information from the book, but not let you touch the book itself, because otherwise the abstraction would start to ""leak"". I might have to think of a more fitting analogy.</p></li>
<li><p><strong>What is the relationship between <em>View</em> and <em>Controller</em> instances?</strong></p>

<p>The MVC structure is composed of two layers: ui and model. The main structures in the <em>UI layer</em> are views and controller. </p>

<p>When you are dealing with websites that use MVC design pattern, the best way is to have 1:1 relation between views and controllers. Each view represents a whole page in your website and it has a dedicated controller to handle all the incoming requests for that particular view.</p>

<p>For example, to represent an opened article, you would have <code>\Application\Controller\Document</code> and <code>\Application\View\Document</code>. This would contain all the main functionality for UI layer, when it comes to dealing with articles <em>(of course you might have some <a href=""https://developer.mozilla.org/en/xmlhttprequest"" rel=""noreferrer"">XHR</a> components that are not directly related to articles)</em>.</p></li>
</ol>
","5864000"
"How to render a DateTime object in a Twig template","141746","","<p>One of my fields in one of my entities is a ""datetime"" variable.</p>

<p>How can I convert this field into a string to render in a browser?</p>

<p>Here is a code snippet:</p>

<pre><code>{% for game in games %}
    ...
        &lt;td&gt; {{game.gameTeamIdOne.teamName}} &lt;/td&gt;
        &lt;td&gt; {{game.gameTeamIdTwo.teamName}} &lt;/td&gt;
        &lt;td&gt; {{game.gameDate}}&lt;/td&gt;
    &lt;/tr&gt;
{% endfor %}
</code></pre>

<p>Here is the variable in my entity class:</p>

<pre><code>/**
 * @var date $gameDate
 *
 * @ORM\Column(name=""GAME_DATE"", type=""datetime"", nullable=true)
 */
private $gameDate;
</code></pre>

<p>And here is the error message I am getting:</p>

<blockquote>
  <p>An exception has been thrown during the rendering of a template (""Catchable Fatal Error:      Object of class DateTime could not be converted to string in ...\app\cache\dev\twig\9b\ad\58fd3bb1517632badf1fdc7fa4a8.php line 33"") in ""BeerBundle:Games:gameTable.html.twig"" at line 10.</p>
</blockquote>
","<p>Although you can use the</p>

<pre><code>{{ game.gameDate|date('Y-m-d') }}
</code></pre>

<p>approach, keep in mind that this version does not honor the user locale, which should not be a problem with a site used by only users of one nationality. International users should display the game date totally different, like extending the <code>\DateTime</code> class, and adding a <code>__toString()</code> method to it that checks the locale and acts accordingly.</p>

<p><strong>Edit</strong>:</p>

<p>As pointed out by @Nic in a comment, if you use the <a href=""http://twig-extensions.readthedocs.io/en/latest/intl.html"" rel=""noreferrer"">Intl extension of Twig</a>, you will have a <code>localizeddate</code> filter available, which shows the date in the user’s locale. This way you can drop my previous idea of extending <code>\DateTime</code>.</p>
","10196625"
"New self vs. new static","141689","","<p>I am converting a PHP 5.3 library to work on PHP 5.2. The main thing standing in my way is the use of late static binding like <code>return new static($options);</code> , if I convert this to <code>return new self($options)</code> will I get the same results?</p>

<p>What is the difference between <code>new self</code> and <code>new static</code>?</p>
","<blockquote>
  <p>will I get the same results?</p>
</blockquote>

<p>Not really. I don't know of a workaround for PHP 5.2, though.</p>

<blockquote>
  <p>What is the difference between <code>new self</code> and <code>new static</code>?</p>
</blockquote>

<p><code>self</code> refers to the same class in which the <code>new</code> keyword is actually written.</p>

<p><code>static</code>, in PHP 5.3's late static bindings, refers to whatever class in the hierarchy you called the method on.</p>

<p>In the following example, <code>B</code> inherits both methods from <code>A</code>. The <code>self</code> invocation is bound to <code>A</code> because it's defined in <code>A</code>'s implementation of the first method, whereas <code>static</code> is bound to the called class (also see <a href=""http://php.net/manual/en/function.get-called-class.php"" rel=""noreferrer""><code>get_called_class()</code></a>).</p>

<pre><code>class A {
    public static function get_self() {
        return new self();
    }

    public static function get_static() {
        return new static();
    }
}

class B extends A {}

echo get_class(B::get_self());  // A
echo get_class(B::get_static()); // B
echo get_class(A::get_self()); // A
echo get_class(A::get_static()); // A
</code></pre>
","5197655"
"limit text length in php and provide 'Read more' link","141587","","<p>I have text stored in the php variable $text. This text can be 100 or 1000 or 10000 words. As currently implemented, my page extends based on the text, but if the text is too long the page looks ugly.</p>

<p>I want to get the length of the text and limit the number of characters to maybe 500, and if the text exceeds this limit I want to provide a link saying, ""Read more."" If the ""Read More"" link is clicked, it will show a pop with all the text in $text.</p>
","<p>This is what I use:</p>

<pre><code>// strip tags to avoid breaking any html
$string = strip_tags($string);

if (strlen($string) &gt; 500) {

    // truncate string
    $stringCut = substr($string, 0, 500);

    // make sure it ends in a word so assassinate doesn't become ass...
    $string = substr($stringCut, 0, strrpos($stringCut, ' ')).'... &lt;a href=""/this/story""&gt;Read More&lt;/a&gt;'; 
}
echo $string;
</code></pre>

<p>You can tweak it further but it gets the job done in production.</p>
","4258963"
"Reading JSON POST using PHP","141348","","<p>I looked around a lot before posting this question so my apologies if it is on another post and this is only my second quesiton on here so apologies if I don't format this question correctly.</p>

<p>I have a really simple web service that I have created that needs to take post values and return a JSON encoded array. That all worked fine until I was told I would need to post the form data with a content-type of application/json. Since then I cannot return any values from the web service and it is definitely something to do with how I am filtering their post values.</p>

<p>Basically in my local setup I have created a test page that does the following -</p>

<pre><code>$curl = curl_init();
curl_setopt($curl, CURLOPT_CUSTOMREQUEST, ""POST"");                                                                     
curl_setopt($curl, CURLOPT_POSTFIELDS, $data);                                                                  
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);                                                                      
curl_setopt($curl, CURLOPT_HTTPHEADER, array(                                                                          
    'Content-Type: application/json',                                                                                
    'Content-Length: ' . strlen($data))                                                                       
);
curl_setopt($curl, CURLOPT_URL, 'http://webservice.local/');  // Set the url path we want to call
$result = curl_exec($curl);

//see the results
$json=json_decode($result,true);
curl_close($curl);
print_r($json);
</code></pre>

<p>On the webservice I have this (I have stripped out some of the functions) -</p>

<pre><code>&lt;?php

header('Content-type: application/json');

/* connect to the db */
$link = mysql_connect('localhost','root','root') or die('Cannot connect to the DB');
mysql_select_db('webservice',$link) or die('Cannot select the DB');

if(isset($_POST['action']) &amp;&amp; $_POST['action'] == 'login') {
    $statusCode = array('statusCode'=&gt;1, 'statusDescription'=&gt;'Login Process - Fail');
    $posts[] = array('status'=&gt;$statusCode);
    header('Content-type: application/json');
    echo json_encode($posts);

    /* disconnect from the db */
}
@mysql_close($link);

?&gt;
</code></pre>

<p>Basically I know that it is due to the $_POST values not being set but I can't find what I need to put instead of the $_POST. I tried 
json_decode($_POST), file_get_contents(""php://input"") and a number of other ways but I was shooting in the dark a bit.</p>

<p>Any help would be greatly appreciated.</p>

<p>Thanks, Steve</p>

<p>Thanks Michael for the help, that was a definite step forward I now have at least got a repsonse when I echo the post....even if it is null </p>

<p>updated CURL -</p>

<pre><code>  $curl = curl_init();
  curl_setopt($curl, CURLOPT_HTTPHEADER, array('Content-Type: application/json')); 
  curl_setopt($ch, CURLOPT_CUSTOMREQUEST, ""POST""); 
  curl_setopt($curl, CURLOPT_URL, 'http://webservice.local/');  
  curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
  curl_setopt($curl, CURLOPT_POSTFIELDS, json_encode($data));
</code></pre>

<p>updated php on the page that the data is posted to -</p>

<pre><code>$inputJSON = file_get_contents('php://input');
$input= json_decode( $inputJSON, TRUE ); //convert JSON into array

print_r(json_encode($input));
</code></pre>

<p>As I say at least I see a response now wheras prior it was returning a blank page</p>
","<p>You have empty <code>$_POST</code>. If your web-server wants see data in json-format you need to read the raw input and then parse it with JSON decode.</p>

<p>You need something like that:</p>

<pre><code>$json = file_get_contents('php://input');
$obj = json_decode($json);
</code></pre>

<p>Also you have wrong code for testing JSON-communication...</p>

<p><code>CURLOPT_POSTFIELDS</code> tells <code>curl</code> to encode your parameters as <code>application/x-www-form-urlencoded</code>. You need JSON-string here.</p>

<p><strong>UPDATE</strong></p>

<p>Your php code for test page should be like that:</p>

<pre><code>$data_string = json_encode($data);

$ch = curl_init('http://webservice.local/');
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, ""POST"");
curl_setopt($ch, CURLOPT_POSTFIELDS, $data_string);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
        'Content-Type: application/json',
        'Content-Length: ' . strlen($data_string))
);

$result = curl_exec($ch);
$result = json_decode($result);
var_dump($result);
</code></pre>

<p>Also on your web-service page you should remove one of the lines <code>header('Content-type: application/json');</code>. It must be called only once.</p>
","19007851"
"Get week number (in the year) from a date PHP","140766","","<p>I want to take a date and work out what week number is.</p>

<p>So far I have so far, it is returning 24 when it should be 42.</p>

<pre><code>&lt;?php
$ddate = ""2012-10-18"";
$duedt = explode(""-"",$ddate);
$date = mktime(0, 0, 0, $duedt[2], $duedt[1],$duedt[0]);
$week = (int)date('W', $date);
echo ""Weeknummer: "".$week;
?&gt;
</code></pre>

<p>is it wrong and a coincidence that the numbers are reversed? Or am I nearly there?</p>
","<p><strong>Today, using PHP's <a href=""http://php.net/datetime"" rel=""noreferrer""><code>DateTime</code></a> objects is better:</strong></p>

<pre><code>&lt;?php
$ddate = ""2012-10-18"";
$date = new DateTime($ddate);
$week = $date-&gt;format(""W"");
echo ""Weeknummer: $week"";
</code></pre>

<hr>

<p>It's because in <code>mktime()</code>, it goes like this:</p>

<pre><code>mktime(hour, minute, second, month, day, year);
</code></pre>

<p>Hence, your order is wrong.</p>

<pre><code>&lt;?php
$ddate = ""2012-10-18"";
$duedt = explode(""-"", $ddate);
$date  = mktime(0, 0, 0, $duedt[1], $duedt[2], $duedt[0]);
$week  = (int)date('W', $date);
echo ""Weeknummer: "" . $week;
?&gt;
</code></pre>
","9567769"
"Creating a REST API using PHP","140515","","<p>I’m creating my first API to which if two values are passed, I should get the response in the JSON format. The number  will be passed as parameters by POST. Either using cURL or whatever POST method is available.</p>

<p>Even though this is a very basic one, I would like to know the best practices and the API should be created by model–controller basis. Not just plain PHP.</p>

<p>I have Googled for many REST API tutorials. They were good and I have acquired some knowledge on it.</p>

<p>But I would like to get a sample model of the code so that I can refer to it and build my own, and that sample of course in the standard practice of making a real REST API.</p>

<p>If you ask me what I have tried, it would be really fun, as a beginner, all I could do is this:</p>

<pre><code>$num1 = $_REQUEST['num1'];
$num2 = $_REQUEST['num2'];

$total = $num1 + $num2;
echo json_encode($total);
</code></pre>

<p>Of course this can never be called an API, but still. If I give a POST response to this, I want the response from the REST API as JSON. I should be able to test it by REST console as well so that I get a standard response.</p>

<p>Please do provide me with a very basic but yet a standard RESTful API.</p>
","<p>In your example, it’s fine as it is: it’s simple and works. The only things I’d suggest are: </p>

<ol>
<li>validating the data POSTed</li>
<li><p>make sure your API is sending the <code>Content-Type</code> header to tell the client to expect a JSON response:</p>

<pre><code>header('Content-Type: application/json');
echo json_encode($response);
</code></pre></li>
</ol>

<p>Other than that, an API is something that takes an input and provides an output. It’s possible to “over-engineer” things, in that you make things more complicated that need be.</p>

<p>If you wanted to go down the route of controllers and models, then read up on the <a href=""http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller"" rel=""noreferrer"">MVC pattern</a> and work out how your domain objects fit into it. Looking at the above example, I can see maybe a <code>MathController</code> with an <code>add()</code> action/method.</p>

<p>There are a few starting point projects for RESTful APIs on <a href=""http://www.github.com/"" rel=""noreferrer"">GitHub</a> that are worth a look.</p>
","21959468"
"PHP function to make slug (URL string)","140510","","<pre><code>function gen_slug($str){
    # special accents
    $a = array('À','Á','Â','Ã','Ä','Å','Æ','Ç','È','É','Ê','Ë','Ì','Í','Î','Ï','Ð','Ñ','Ò','Ó','Ô','Õ','Ö','Ø','Ù','Ú','Û','Ü','Ý','ß','à','á','â','ã','ä','å','æ','ç','è','é','ê','ë','ì','í','î','ï','ñ','ò','ó','ô','õ','ö','ø','ù','ú','û','ü','ý','ÿ','A','a','A','a','A','a','C','c','C','c','C','c','C','c','D','d','Ð','d','E','e','E','e','E','e','E','e','E','e','G','g','G','g','G','g','G','g','H','h','H','h','I','i','I','i','I','i','I','i','I','i','?','?','J','j','K','k','L','l','L','l','L','l','?','?','L','l','N','n','N','n','N','n','?','O','o','O','o','O','o','Œ','œ','R','r','R','r','R','r','S','s','S','s','S','s','Š','š','T','t','T','t','T','t','U','u','U','u','U','u','U','u','U','u','U','u','W','w','Y','y','Ÿ','Z','z','Z','z','Ž','ž','?','ƒ','O','o','U','u','A','a','I','i','O','o','U','u','U','u','U','u','U','u','U','u','?','?','?','?','?','?');
    $b = array('A','A','A','A','A','A','AE','C','E','E','E','E','I','I','I','I','D','N','O','O','O','O','O','O','U','U','U','U','Y','s','a','a','a','a','a','a','ae','c','e','e','e','e','i','i','i','i','n','o','o','o','o','o','o','u','u','u','u','y','y','A','a','A','a','A','a','C','c','C','c','C','c','C','c','D','d','D','d','E','e','E','e','E','e','E','e','E','e','G','g','G','g','G','g','G','g','H','h','H','h','I','i','I','i','I','i','I','i','I','i','IJ','ij','J','j','K','k','L','l','L','l','L','l','L','l','l','l','N','n','N','n','N','n','n','O','o','O','o','O','o','OE','oe','R','r','R','r','R','r','S','s','S','s','S','s','S','s','T','t','T','t','T','t','U','u','U','u','U','u','U','u','U','u','U','u','W','w','Y','y','Y','Z','z','Z','z','Z','z','s','f','O','o','U','u','A','a','I','i','O','o','U','u','U','u','U','u','U','u','U','u','A','a','AE','ae','O','o');
    return strtolower(preg_replace(array('/[^a-zA-Z0-9 -]/','/[ -]+/','/^-|-$/'),array('','-',''),str_replace($a,$b,$str)));
}
</code></pre>

<p>Works great, but I've found some cases in which it fails:</p>

<p><code>gen_slug('andrés')</code> returns <code>andras</code> instead of <code>andres</code></p>

<p>Why? Any ideas on the <code>preg_replace</code> parameters?</p>
","<p>Instead of a lengthy replace, try this one:</p>

<pre><code>static public function slugify($text)
{
  // replace non letter or digits by -
  $text = preg_replace('~[^\pL\d]+~u', '-', $text);

  // transliterate
  $text = iconv('utf-8', 'us-ascii//TRANSLIT', $text);

  // remove unwanted characters
  $text = preg_replace('~[^-\w]+~', '', $text);

  // trim
  $text = trim($text, '-');

  // remove duplicate -
  $text = preg_replace('~-+~', '-', $text);

  // lowercase
  $text = strtolower($text);

  if (empty($text)) {
    return 'n-a';
  }

  return $text;
}
</code></pre>

<p>This was based off the one in Symfony's Jobeet tutorial.</p>
","2955878"
"SHA1 vs md5 vs SHA256: which to use for a PHP login?","140216","","<p>I'm making a php login, and I'm trying to decide whether to use SHA1 or Md5, or SHA256 which I read about in another stackoverflow article. Are any of them more secure than others? For SHA1/256, do I still use a salt? </p>

<p>Also, is this a secure way to store the password as a hash in mysql?</p>

<pre><code>function createSalt()
{
    $string = md5(uniqid(rand(), true));
    return substr($string, 0, 3);
}

$salt = createSalt();

$hash = sha1($salt . $hash);
</code></pre>
","<p>Neither. You should use <code>bcrypt</code>. The hashes you mention are all optimized to be quick and easy on hardware, and so cracking them share the same qualities. If you have no other choice, at least be sure to use a long salt and re-hash multiple times.</p>

<h3>Using bcrypt in PHP 5.5+</h3>

<p>PHP 5.5 offers <a href=""https://php.net/manual/en/ref.password.php"" rel=""noreferrer"">new functions for password hashing</a>. This is the recommend approach for password storage in modern web applications.</p>

<pre><code>// Creating a hash
$hash = password_hash($password, PASSWORD_DEFAULT, ['cost' =&gt; 12]);
// If you omit the ['cost' =&gt; 12] part, it will default to 10

// Verifying the password against the stored hash  
if (password_verify($password, $hash)) {
    // Success! Log the user in here.
}
</code></pre>

<p>If you're using an older version of PHP <a href=""https://php.net/eol.php"" rel=""noreferrer"">you really should upgrade</a>, but until you do you can use <a href=""https://github.com/ircmaxell/password_compat"" rel=""noreferrer"">password_compat</a> to expose this API.</p>

<p>Also, please let <code>password_hash()</code> generate the salt for you. It uses a [CSPRNG](http://</p>

<h3>Two caveats of bcrypt</h3>

<ol>
<li>Bcrypt will silently truncate any password longer than 72 characters.</li>
<li>Bcrypt will truncate after any <code>NUL</code> characters.</li>
</ol>

<p>(<a href=""http://3v4l.org/61VZq"" rel=""noreferrer"">Proof of Concept</a> for both caveats here.)</p>

<p>You might be tempted to resolve the first caveat by <a href=""http://blog.ircmaxell.com/2015/03/security-issue-combining-bcrypt-with.html"" rel=""noreferrer"">pre-hashing your passwords before running them through bcrypt</a>, but doing so can cause your application to run headfirst into the second. </p>

<p>Instead of writing your own scheme, use an existing library written and/or evaluated by security experts.</p>

<ul>
<li><a href=""https://github.com/zendframework/zend-crypt"" rel=""noreferrer""><code>Zend\Crypt</code></a> (part of Zend Framework) offers <a href=""https://github.com/zendframework/zend-crypt/blob/master/src/Password/BcryptSha.php"" rel=""noreferrer""><code>BcryptSha</code></a></li>
<li><a href=""https://github.com/paragonie/password_lock"" rel=""noreferrer""><code>PasswordLock</code></a> is similar to <code>BcryptSha</code> but it also encrypts the bcrypt hashes with an <a href=""https://github.com/defuse/php-encryption"" rel=""noreferrer"">authenticated encryption library</a>.</li>
</ul>

<p><strong>TL;DR</strong> - <a href=""http://codahale.com/how-to-safely-store-a-password/"" rel=""noreferrer"">Use bcrypt</a>.</p>
","2235189"
"How to pass extra variables in URL with Wordpress","139993","","<p>I am having trouble trying to pass an extra variable in the url to my wordpress installation. </p>

<p>For example <code>/news?c=123</code></p>

<p>For some reason, it works only on the website root <code>www.example.com?c=123</code> but it does not work if the url contains any more information <code>www.example.com/news?c=123</code>. I have the following code in my functions.php file in the theme directory.</p>

<pre><code>if (isset($_GET['c'])) 
{
  setcookie(""cCookie"", $_GET['c']); 
}

if (isset($_SERVER['HTTP_REFERER']))
{
  setcookie(""rCookie"", $_SERVER['HTTP_REFERER']);
}
</code></pre>

<p>Any Ideas?</p>
","<p>There are quite few solutions to tackle this issue. First you can go for a plugin if you want:</p>

<ul>
<li><a href=""http://paulstamatiou.com/wordpress-quickie-custom-query-string-plugin"">WordPress Quickie: Custom Query String Plugin</a></li>
</ul>

<p>Or code manually, check out this post:</p>

<ul>
<li><a href=""http://www.rlmseo.com/blog/passing-get-query-string-parameters-in-wordpress-url/"">Passing Query String Parameters in WordPress URL</a></li>
</ul>

<p>Also check out:</p>

<ul>
<li><a href=""http://codex.wordpress.org/Function_Reference/add_query_arg""><code>add_query_arg</code></a></li>
</ul>
","4586892"
"How to prevent Browser cache for php site","139907","","<p>I have a php site running in cloud server.When ever i add new files css, js or images the browser is loading the same old js, css and image files stored in cache.</p>

<p>My site has a doctype and meta tag as below</p>

<pre><code>&lt;!DOCTYPE html PUBLIC ""-//W3C//DTD XHTML 1.0 Transitional//EN"" ""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd""&gt;

  &lt;meta http-equiv=""Content-Type"" content=""text/html; charset=iso-8859-1""&gt;
  &lt;meta http-equiv=""Page-Enter"" content=""blendTrans(Duration=1.0)""&gt;
  &lt;meta http-equiv=""Page-Exit"" content=""blendTrans(Duration=1.0)""&gt;
  &lt;meta http-equiv=""Site-Enter"" content=""blendTrans(Duration=1.0)""&gt;
  &lt;meta http-equiv=""Site-Exit"" content=""blendTrans(Duration=1.0)""&gt;
</code></pre>

<p>Because of the above doctype and meta code am i loading the same files cached in browser instead of new one</p>
","<p>try this </p>

<pre><code>&lt;?php

header(""Cache-Control: no-store, no-cache, must-revalidate, max-age=0"");
header(""Cache-Control: post-check=0, pre-check=0"", false);
header(""Pragma: no-cache"");
?&gt;
</code></pre>
","13640164"
"phpexcel to download","139743","","<p>hello i am new to phpexcel, 
and i was wondering if there is some way send the excel i have created to the clients download without saving it on my server or to delete it right after he downloads it</p>

<p>i am trying to create an ""export button"" on a page that will give the user a ""pop-up"" with the excel that he wants that i have just created.</p>

<p>now after i create the table i do :</p>

<pre><code>$objXLS-&gt;getActiveSheet()-&gt;getColumnDimension(""A"")-&gt;setAutoSize(true);
$objXLS-&gt;getActiveSheet()-&gt;getColumnDimension(""B"")-&gt;setAutoSize(true);

$objXLS-&gt;getActiveSheet()-&gt;setTitle('Test Stats');

$objXLS-&gt;setActiveSheetIndex(0);

$objWriter = PHPExcel_IOFactory::createWriter($objXLS, 'Excel5');
$objWriter-&gt;save(__DIR__.""/test1.xls"");
</code></pre>

<p>but that saves it to my server</p>

<p>thank you</p>
","<p>Instead of saving it to a file, save it to <a href=""http://php.net/manual/en/wrappers.php.php"" rel=""noreferrer""><code>php://output</code><sup>&shy;Docs</sup></a>:</p>

<pre><code>$objWriter-&gt;save('php://output');
</code></pre>

<p>This will send it AS-IS to the browser.</p>

<p>You want to add some <a href=""http://php.net/header"" rel=""noreferrer"">headers<sup>&shy;Docs</sup></a> first, like it's common with file downloads, so the browser knows which type that file is and how it should be named (the filename):</p>

<pre><code>// We'll be outputting an excel file
header('Content-type: application/vnd.ms-excel');

// It will be called file.xls
header('Content-Disposition: attachment; filename=""file.xls""');

// Write file to the browser
$objWriter-&gt;save('php://output');
</code></pre>

<p>First do the headers, then the save. For the excel headers see as well the following question: <a href=""https://stackoverflow.com/q/974079/367456"">Setting mime type for excel document</a>.</p>
","8566252"
"How to set default value for form field in Symfony2?","139598","","<p>Is there an easy way to set a default value for text form field?</p>
","<p>Can be use during the creation easily with :</p>

<pre><code>-&gt;add('myfield', 'text', array(
     'label' =&gt; 'Field',
     'data' =&gt; 'Default value'
))
</code></pre>
","7914429"
"What are Long-Polling, Websockets, Server-Sent Events (SSE) and Comet?","139545","","<p>I have tried reading some articles, but I am not very clear on the concepts yet.</p>

<p>Would someone like to take a shot at explaining to me what these technologies are:</p>

<ol>
<li>Long Polling</li>
<li>Server-Sent Events</li>
<li>Websockets</li>
<li>Comet</li>
</ol>

<p>One thing that I came across every time was, the server keeps a connection open and pushes data to the client. How is the connection kept open, and how does the client get the pushed data? (How does the client use the data, maybe some code might help?)</p>

<p>Now, which one of them should I use for a real-time app. I have been hearing a lot about websockets (with socket.io [a node.js library]) but why not PHP?</p>
","<p><em>In the examples below the client is the browser and the server is the webserver hosting the website.</em></p>

<p>Before you can understand these technologies, you have to understand <em>classic</em> HTTP web traffic first.</p>

<h2>Regular HTTP:</h2>

<ol>
<li>A client requests a webpage from a server.</li>
<li>The server calculates the response</li>
<li>The server sends the response to the client. </li>
</ol>

<p><img src=""https://i.stack.imgur.com/TK1ZG.png"" alt=""HTTP""></p>

<h2>Ajax Polling:</h2>

<ol>
<li>A client requests a webpage from a server using regular HTTP (see HTTP above).</li>
<li>The client receives the requested webpage and executes the JavaScript on the page which requests a file from the server at regular intervals (e.g. 0.5 seconds).</li>
<li>The server calculates each response and sends it back, just like normal HTTP traffic.</li>
</ol>

<p><img src=""https://i.stack.imgur.com/qlMEU.png"" alt=""Ajax Polling""></p>

<h2>Ajax Long-Polling:</h2>

<ol>
<li>A client requests a webpage from a server using regular HTTP (see HTTP above).</li>
<li>The client receives the requested webpage and executes the JavaScript on the page which requests a file from the server.</li>
<li>The server does not immediately respond with the requested information but waits until there's <strong>new</strong> information available.</li>
<li>When there's new information available, the server responds with the new information.</li>
<li>The client receives the new information and immediately sends another request to the server, re-starting the process. </li>
</ol>

<p><img src=""https://i.stack.imgur.com/zLnOU.png"" alt=""Ajax Long-Polling""></p>

<h2>HTML5 Server Sent Events (SSE) / EventSource:</h2>

<ol>
<li>A client requests a webpage from a server using regular HTTP (see HTTP above).</li>
<li>The client receives the requested webpage and executes the JavaScript on the page which opens a connection to the server.</li>
<li><p>The server sends an event to the client when there's new information available. </p>

<ul>
<li>Real-time traffic from server to client, mostly that's what you'll need</li>
<li>You'll want to use a server that has an event loop</li>
<li>Not possible to connect with a server from another domain</li>
<li>If you want to read more, I found these very useful: <a href=""https://developer.mozilla.org/en-US/docs/Server-sent_events/Using_server-sent_events"" rel=""noreferrer"">(article)</a>, <a href=""http://html5doctor.com/server-sent-events/#api"" rel=""noreferrer"">(article)</a>, <a href=""http://www.html5rocks.com/en/tutorials/eventsource/basics/"" rel=""noreferrer"">(article)</a>, <a href=""http://jaxenter.com/tutorial-jsf-2-and-html5-server-sent-events-42932.html"" rel=""noreferrer"">(tutorial)</a>.</li>
</ul></li>
</ol>

<p><img src=""https://i.stack.imgur.com/ziR5h.png"" alt=""HTML5 SSE""></p>

<h2>HTML5 Websockets:</h2>

<ol>
<li>A client requests a webpage from a server using regular http (see HTTP above).</li>
<li>The client receives the requested webpage and executes the JavaScript on the page which opens a connection with the server.</li>
<li><p>The server and the client can now send each other messages when new data (on either side) is available.</p>

<ul>
<li>Real-time traffic from the server to the client <strong>and</strong> from the client to the server</li>
<li>You'll want to use a server that has an event loop</li>
<li>With WebSockets it is possible to connect with a server from another domain.</li>
<li>It is also possible to use a third party hosted websocket server, for example <a href=""http://pusher.com/"" rel=""noreferrer"">Pusher</a> or <a href=""http://www.leggetter.co.uk/real-time-web-technologies-guide"" rel=""noreferrer"">others</a>. This way you'll only have to implement the client side, which is very easy!</li>
<li>If you want to read more, I found these very useful: (<a href=""http://www.developerfusion.com/article/143158/an-introduction-to-websockets/"" rel=""noreferrer"">article</a>), <a href=""https://developer.mozilla.org/en-US/docs/WebSockets/Writing_WebSocket_client_applications"" rel=""noreferrer"">(article)</a> (<a href=""http://net.tutsplus.com/tutorials/javascript-ajax/start-using-html5-websockets-today/"" rel=""noreferrer"">tutorial</a>).</li>
</ul></li>
</ol>

<p><img src=""https://i.stack.imgur.com/CgDlc.png"" alt=""HTML5 WebSockets""></p>

<h2>Comet:</h2>

<p>Comet is a collection of techniques prior to HTML5 which use streaming and long-polling to achieve real time applications. Read more on <a href=""http://en.wikipedia.org/wiki/Comet_%28programming%29"" rel=""noreferrer"">wikipedia</a> or <a href=""http://www.ibm.com/developerworks/web/library/wa-reverseajax1/index.html"" rel=""noreferrer"">this</a> article.</p>

<hr>

<blockquote>
  <p>Now, which one of them should I use for a realtime app (that I need to
  code). I have been hearing a lot about websockets (with socket.io [a
  node.js library]) but why not PHP ?</p>
</blockquote>

<p>You can use PHP with WebSockets, check out <a href=""http://socketo.me/"" rel=""noreferrer"">Ratchet</a>. </p>
","12855533"
"ASP.net vs PHP (What to choose)","139383","","<p>I have been assigned a task to develop a new web application. Its a kind of social web applications, for the sake of understanding you can say its similar to facebook. Now before start developing such huge application i have few questions to ask:</p>

<ul>
<li>First, Does the tool and programing language
   affects the performance of web
   application?</li>
</ul>

<p>e.g I made two web pages both have same contents over it, the only difference is that one page is made in ASP.net(with C#) and other is made in PHP, now which page opens more fast at user end?
The only purpose of asking this question is that i want to choose one language which is more faster from end user prospective</p>

<ul>
<li>Same is the case with database do i
need to choose some specific database
or i can use any database of my choice,
currently i am considering:</li>
</ul>

<p>1.MS SQL Server<br>
2.MY SQL and<br>
3.Postgres</p>
","<p>This is impossible to answer and has been brought up <em>many</em> <strong>many</strong> times before. Do a search, read those threads, then pick the framework you and your team have experience with.</p>

<ul>
<li><a href=""https://stackoverflow.com/questions/4232774/how-much-does-it-cost-me-to-choose-asp-net-over-php"">How much does it cost me to choose ASP.NET over PHP?</a></li>
<li><a href=""https://stackoverflow.com/questions/3989352/what-advantages-does-php-have-over-asp-net"">What advantages does PHP have over ASP.NET?</a></li>
<li><a href=""https://stackoverflow.com/questions/4186229/in-web-development-what-asp-net-can-do-that-php-cannot-do"">In Web Development - What ASP.net can do that PHP cannot do?</a></li>
<li><a href=""https://stackoverflow.com/questions/2398926/what-are-the-fundamental-differences-between-asp-net-and-php"">What are the fundamental differences between ASP.net and PHP?</a></li>
<li><a href=""https://stackoverflow.com/questions/543458/the-use-of-php-vs-asp-net"">The use of PHP vs ASP.net</a></li>
</ul>
","5932564"
"How to detect duplicate values in PHP array?","139208","","<p>I am working with a one dimensional array in PHP.  I would like to detect the presence of duplicate values, then count the number of duplicate values and out put the results.  For example, given the following array:</p>

<pre><code>$array = array('apple', 'orange', 'pear', 'banana', 'apple',
   'pear', 'kiwi', 'kiwi', 'kiwi');
</code></pre>

<p>I would like to print:</p>

<pre><code>apple (2)
orange
pear (2)
banana
kiwi (3)
</code></pre>

<p>Any advice on how to approach this problem?</p>

<p>Thanks.</p>

<p>Mike</p>
","<p>You can use <a href=""http://us2.php.net/manual/en/function.array-count-values.php"" rel=""nofollow noreferrer"">array_count_values</a> function</p>

<pre><code>$array = array('apple', 'orange', 'pear', 'banana', 'apple',
'pear', 'kiwi', 'kiwi', 'kiwi');

print_r(array_count_values($array));
</code></pre>

<p>will output</p>

<pre><code>Array
(
   [apple] =&gt; 2
   [orange] =&gt; 1
   [pear] =&gt; 2
   etc...
)
</code></pre>
","1170825"
"PHP validation/regex for URL","138983","","<p>I've been looking for a simple regex for URL's, does anybody have one handy that works well?  I didn't find one with the zend framework validation classes and have seen several implementations.</p>

<p>Thanks  </p>
","<p>I used this on a few projects, I don't believe I've run into issues, but I'm sure it's not exhaustive:</p>

<pre><code>$text = preg_replace(
  '#((https?|ftp)://(\S*?\.\S*?))([\s)\[\]{},;""\':&lt;]|\.\s|$)#i',
  ""'&lt;a href=\""$1\"" target=\""_blank\""&gt;$3&lt;/a&gt;$4'"",
  $text
);
</code></pre>

<p>Most of the random junk at the end is to deal with situations like <code>http://domain.com.</code> in a sentence (to avoid matching the trailing period). I'm sure it could be cleaned up but since it worked. I've more or less just copied it over from project to project.</p>
","206087"
"Using sessions & session variables in a PHP Login Script","138944","","<p>I have just finished creating an entire login and register systsem in PHP, but my problem is I haven't used any sessions yet. I'm kind of a newbie in PHP and I've never used sessions before. What I want to do is, after the user registers and fills out the login form, they will still stay on the same page. So, there will be one part of the which will be if the session is logged_in and the other part will be else (the user is not logged in so display the login form). Can anyone tell me how to get started?</p>
","<p>Hope this helps :)</p>

<p>begins the session, you need to say this at the top of a page or before you call session code</p>

<pre><code> session_start(); 
</code></pre>

<p>put a user id in the session to track who is logged in</p>

<pre><code> $_SESSION['user'] = $user_id;
</code></pre>

<p>Check if someone is logged in</p>

<pre><code> if (isset($_SESSION['user'])) {
   // logged in
 } else {
   // not logged in
 }
</code></pre>

<p>Find the logged in user ID</p>

<pre><code>$_SESSION['user']
</code></pre>

<p>So on your page</p>

<pre><code> &lt;?php
 session_start();


 if (isset($_SESSION['user'])) {
 ?&gt;
   logged in HTML and code here
 &lt;?php

 } else {
   ?&gt;
   Not logged in HTML and code here
   &lt;?php
 }
</code></pre>
","10097986"
"php check file extension in upload form","138625","","<p>I check file extension for upload or not uploaded. my i.e methods worked but now i need to understand, my methods (pathinfo) is true ? another better and faster way  ?! Thanks</p>

<pre><code>$filename = $_FILES['video_file']['name'];
$ext = pathinfo($filename, PATHINFO_EXTENSION);
if( $ext !== 'gif' || $ext !== 'png' || $ext !== 'jpg' ) {echo 'error';}
</code></pre>
","<p>Using <code>if( $ext !== 'gif'</code>) might not be efficient what if you allow like 20 different extensions </p>

<p>Try </p>

<pre><code>$allowed =  array('gif','png' ,'jpg');
$filename = $_FILES['video_file']['name'];
$ext = pathinfo($filename, PATHINFO_EXTENSION);
if(!in_array($ext,$allowed) ) {
    echo 'error';
}
</code></pre>
","10456163"
"How to put php inside JavaScript?","138139","","<p><strong>I've tried (but its not working):</strong></p>

<pre><code>&lt;?php  
  $htmlString= 'testing';
?&gt;
&lt;html&gt;
  &lt;body&gt;
    &lt;script type=""text/javascript""&gt;  
      var htmlString=&lt;?php echo $htmlString; ?&gt;;
      alert(htmlString);
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Here is the <a href=""http://web-design.lovetoknow.com/Define_PHP_Variables_Inside_Javascript"" rel=""nofollow noreferrer"">tutorial</a> that I've used for that purpose:</p>
","<p>Try this:</p>

<pre><code>&lt;?php $htmlString= 'testing'; ?&gt;
&lt;html&gt;
  &lt;body&gt;
    &lt;script type=""text/javascript""&gt;  
      // notice the quotes around the ?php tag         
      var htmlString=""&lt;?php echo $htmlString; ?&gt;"";
      alert(htmlString);
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>When you run into problems like this one, a good idea is to check your browser for JavaScript errors. Different browsers have different ways of showing this, but look for a javascript console or something like that. Also, check the source of your page as viewed by the browser.</p>

<p>Sometimes beginners are confused about the quotes in the string: In the PHP part, you assigned <code>'testing'</code> to <code>$htmlString</code>. This puts a string value inside that variable, but the value does not have the quotes in it: They are just for the interpreter, so he knows: <em>oh, now comes a string literal</em>.</p>
","3345487"
"Send array with Ajax to PHP script","138037","","<p>I have array made by function <strong>.push</strong>. In array is very large data. How is the best way send this to PHP script?</p>

<pre><code>   dataString = ??? ; // array?
   $.ajax({
        type: ""POST"",
        url: ""script.php"",
        data: dataString, 
        cache: false,

        success: function(){
            alert(""OK"");
        }
    });
</code></pre>

<p>script.php:</p>

<pre><code>  $data = $_POST['data'];

  // here i would like use foreach:

  foreach($data as $d){
     echo $d;
  }
</code></pre>

<p>How is the best way for this?</p>
","<p>Encode your data string into JSON.</p>

<pre><code>dataString = ??? ; // array?
var jsonString = JSON.stringify(dataString);
   $.ajax({
        type: ""POST"",
        url: ""script.php"",
        data: {data : jsonString}, 
        cache: false,

        success: function(){
            alert(""OK"");
        }
    });
</code></pre>

<p><strong>In your PHP</strong></p>

<pre><code>$data = json_decode(stripslashes($_POST['data']));

  // here i would like use foreach:

  foreach($data as $d){
     echo $d;
  }
</code></pre>

<p><strong>Note</strong></p>

<p>When you send data via POST, it needs to be as a keyvalue pair. </p>

<p>Thus</p>

<p><code>data: dataString</code></p>

<p>is wrong. Instead do:</p>

<p><code>data: {data:dataString}</code></p>
","9001573"
"How to set selected value of jquery select2?","137976","","<p>This belong to codes prior to select2 version 4</p>

<p>I have a simple code of <code>select2</code> that get data from ajax</p>

<pre class=""lang-js prettyprint-override""><code>$(""#programid"").select2({
  placeholder: ""Select a Program"",
  allowClear: true,
  minimumInputLength: 3,
  ajax: {
    url: ""ajax.php"",
    dataType: 'json',
    quietMillis: 200,
    data: function (term, page) {
      return {
        term: term, //search term
        flag: 'selectprogram',
        page: page // page number
      };
    },
    results: function (data) {
      return {results: data};
    }
  },
  dropdownCssClass: ""bigdrop"",
  escapeMarkup: function (m) { return m; }
});
</code></pre>

<p>This code is working, however, I need to set a value on it as if in edit mode. When user select a value first time, it will be saved and when he needs to edit that value it must appear in the same select menu (<code>select2</code>) to select the value previously selected but I can't find a way. </p>

<p>UPDATE:</p>

<p>The HTML code:</p>

<pre><code>&lt;input type=""hidden"" name=""programid"" id=""programid"" class=""width-500 validate[required]""&gt;
</code></pre>

<p><a href=""http://select2.github.io/select2/#programmatic"" rel=""noreferrer"">Select2 programmatic access</a> does not work with this.</p>
","<p>To dynamically set the ""selected"" value of a Select2 component:</p>

<pre><code>$('#inputID').select2('data', {id: 100, a_key: 'Lorem Ipsum'});
</code></pre>

<p>Whereins the second parameter is an object with expected values.</p>
","25217310"
"Convert stdClass object to array in PHP","137949","","<p>I fetch post_id from postmeta as:</p>

<pre><code>$post_id = $wpdb-&gt;get_results(""SELECT post_id FROM $wpdb-&gt;postmeta WHERE (meta_key = 'mfn-post-link1' AND meta_value = '"". $from .""')"");
</code></pre>

<p>when i try <code>print_r($post_id);</code>
I have array like this:</p>

<pre><code>Array
(
    [0] =&gt; stdClass Object
        (
            [post_id] =&gt; 140
        )

    [1] =&gt; stdClass Object
        (
            [post_id] =&gt; 141
        )

    [2] =&gt; stdClass Object
        (
            [post_id] =&gt; 142
        )

)
</code></pre>

<p>and i dont know how to traverse it, and how could I get array like this</p>

<pre><code>Array
(
    [0]  =&gt; 140


    [1] =&gt; 141


    [2] =&gt; 142

)
</code></pre>

<p>Any idea how can I do this.......Thanks in advance</p>
","<p>The easiest way is to JSON-encode your object and then decode it back to an array:</p>

<pre><code>$array = json_decode(json_encode($object), True);
</code></pre>

<p>Or if you prefer, you can traverse the object manually, too:</p>

<pre><code>foreach ($object as $value) 
    $array[] = $value-&gt;post_id;
</code></pre>

<p><a href=""https://eval.in/56188"" rel=""noreferrer""><strong>Demo!</strong></a></p>
","19495142"
"Submitting a multidimensional array via POST with php","137916","","<p>I have a php form that has a known number of columns (ex. top diameter, bottom diameter, fabric, colour, quantity), but has an unknown number of rows, as users can add rows as they need. </p>

<p>I've discovered how to take each of the fields(columns) and place them into an array of their own.</p>

<pre><code>&lt;input name=""topdiameter['+current+']"" type=""text"" id=""topdiameter'+current+'"" size=""5"" /&gt;
&lt;input name=""bottomdiameter['+current+']"" type=""text"" id=""bottomdiameter'+current+'"" size=""5"" /&gt;
</code></pre>

<p>So what I end up with in the HTML is:    </p>

<pre><code>&lt;tr&gt;
  &lt;td&gt;&lt;input name=""topdiameter[0]"" type=""text"" id=""topdiameter0"" size=""5"" /&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input name=""bottomdiameter[0]"" type=""text"" id=""bottomdiameter0"" size=""5"" /&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;&lt;input name=""topdiameter[1]"" type=""text"" id=""topdiameter1"" size=""5"" /&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input name=""bottomdiameter[1]"" type=""text"" id=""bottomdiameter1"" size=""5"" /&gt;&lt;/td&gt;
&lt;/tr&gt;

...and so on.
</code></pre>

<p>What I would like to do now is take all the rows and columns put them into a multidimensional array and email the contents of that to the client (preferably in a nicely formatted table). I haven't been able to really comprehend how to combine all those inputs and selects into a nice array.</p>

<p>At this point, I'm going to have to try to use several 1D arrays, although I have the idea that using a single 2D array would be a better practice than using several 1D arrays.</p>
","<p>On submitting, you would get an array as if created like this:</p>

<pre><code>$_POST['topdiameter'] = array( 'first value', 'second value' );
$_POST['bottomdiameter'] = array( 'first value', 'second value' );
</code></pre>

<p>However, I would suggest changing your form names to this format instead:</p>

<pre><code>name=""diameters[0][top]""
name=""diameters[0][bottom]""
name=""diameters[1][top]""
name=""diameters[1][bottom]""
...
</code></pre>

<p>Using that format, it's much easier to loop through the values.</p>

<pre><code>if ( isset( $_POST['diameters'] ) )
{
    echo '&lt;table&gt;';
    foreach ( $_POST['diameters'] as $diam )
    {
        // here you have access to $diam['top'] and $diam['bottom']
        echo '&lt;tr&gt;';
        echo '  &lt;td&gt;', $diam['top'], '&lt;/td&gt;';
        echo '  &lt;td&gt;', $diam['bottom'], '&lt;/td&gt;';
        echo '&lt;/tr&gt;';
    }
    echo '&lt;/table&gt;';
}
</code></pre>
","2433843"
"How do I replace part of a string in PHP?","137907","","<p>I am trying to get the first 10 characters of a string and want to replace space with <code>'_'</code>.</p>

<p>I have</p>

<pre><code>  $text = substr($text, 0, 10);
  $text = strtolower($text);
</code></pre>

<p>But I am not sure what to do next.</p>

<p>I want the string</p>

<blockquote>
  <p>this is the test for string.</p>
</blockquote>

<p>become</p>

<blockquote>
  <p>this_is_th</p>
</blockquote>
","<p>Simply use <a href=""http://www.php.net/manual/en/function.str-replace.php"" rel=""noreferrer"">str_replace</a>:</p>

<pre><code>$text = str_replace(' ', '_', $text);
</code></pre>

<p>You would do this after your previous <code>substr</code> and <code>strtolower</code> calls, like so:</p>

<pre><code>$text = substr($text,0,10);
$text = strtolower($text);
$text = str_replace(' ', '_', $text);
</code></pre>

<p>If you want to get fancy, though, you can do it in one line:</p>

<pre><code>$text = strtolower(str_replace(' ', '_', substr($text, 0, 10)));
</code></pre>
","12605093"
"Send value of submit button when form gets posted","137756","","<p>I have a list of names and some buttons with product names. When one of the buttons is clicked the information of the list is sent to a PHP script, but I can't hit the submit button to send its value. How is it done?
I boiled my code down to the following:</p>

<p><strong>The sending page:</strong></p>

<pre><code>&lt;html&gt;
&lt;form action=""buy.php"" method=""post""&gt;
    &lt;select name=""name""&gt;
        &lt;option&gt;John&lt;/option&gt;
        &lt;option&gt;Henry&lt;/option&gt;
    &lt;select&gt;
    &lt;input id='submit' type='submit' name = 'Tea'    value = 'Tea'&gt;
    &lt;input id='submit' type='submit' name = 'Coffee' value = 'Coffee'&gt;
&lt;/form&gt;
&lt;/html&gt;
</code></pre>

<p><strong>The receiving page: buy.php</strong></p>

<pre><code>&lt;?php
    $name = $_POST['name'];
    $purchase = $_POST['submit'];
    //here some database magic happens
?&gt;
</code></pre>

<p>Everything except sending the submit button value works flawlessly.</p>
","<p>The button names are not submit, so the php <code>$_POST['submit']</code> value is not set. As in <code>isset($_POST['submit'])</code> evaluates to false.</p>

<pre><code>&lt;html&gt;
&lt;form action="""" method=""post""&gt;
    &lt;input type=""hidden"" name=""action"" value=""submit"" /&gt;
    &lt;select name=""name""&gt;
        &lt;option&gt;John&lt;/option&gt;
        &lt;option&gt;Henry&lt;/option&gt;
    &lt;select&gt;
&lt;!-- 
make sure all html elements that have an ID are unique and name the buttons submit 
--&gt;
    &lt;input id=""tea-submit"" type=""submit"" name=""submit"" value=""Tea""&gt;
    &lt;input id=""coffee-submit"" type=""submit"" name=""submit"" value=""Coffee""&gt;
&lt;/form&gt;
&lt;/html&gt;

&lt;?php
if (isset($_POST['action'])) {
    echo '&lt;br /&gt;The ' . $_POST['submit'] . ' submit button was pressed&lt;br /&gt;';
}
?&gt;
</code></pre>
","22579724"
"Only variables should be passed by reference","137667","","<pre><code>// Other variables
    $MAX_FILENAME_LENGTH = 260;
    $file_name = $_FILES[$upload_name]['name'];
    //echo ""testing-"".$file_name.""&lt;br&gt;"";
    //$file_name = strtolower($file_name);
    $file_extension = end(explode('.', $file_name)); //ERROR ON THIS LINE
    $uploadErrors = array(
        0=&gt;'There is no error, the file uploaded with success',
        1=&gt;'The uploaded file exceeds the upload max filesize allowed.',
        2=&gt;'The uploaded file exceeds the MAX_FILE_SIZE directive that was specified in the HTML form',
        3=&gt;'The uploaded file was only partially uploaded',
        4=&gt;'No file was uploaded',
        6=&gt;'Missing a temporary folder'
    );
</code></pre>

<p>Any ideas? After 2 days still stuck</p>
","<p>Assign the result of <code>explode</code> to a variable and pass that variable to <code>end</code>:</p>

<pre><code>$tmp = explode('.', $file_name);
$file_extension = end($tmp);
</code></pre>

<p>The problem is, that <code>end</code> requires a reference, because it modifies the internal representation of the array (i.e. it makes the <em>current element pointer</em> point to the last element).</p>

<p>The result of <code>explode('.', $file_name)</code> cannot be turned into a reference. This is a restriction in the PHP language, that probably exists for simplicity reasons.</p>
","4636183"
"jQuery: print_r() display equivalent?","137641","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/130404/javascript-data-formatting-pretty-printer"">JavaScript data formatting/pretty printer</a>  </p>
</blockquote>



<p>I am getting a bit tired of looking at unformatted json blobs in FireBug. </p>

<p>Does anyone know an equivalent to PHP's print_r() for jQuery?</p>

<p>Something that would recursively make a display string from an object or array, that I could display on the page for quick debugging?</p>

<p>Thanks!</p>
","<p><a href=""http://getfirebug.com/wiki/index.php/Console_API#console.log.28object.5B.2C_object.2C_....5D.29"" rel=""noreferrer""><code>console.log</code></a> is what I most often use when debugging.</p>

<p>I was able to find this <a href=""http://plugins.jquery.com/taxonomy/term/471"" rel=""noreferrer""><code>jQuery extension</code></a> though.</p>
","456660"
"PHP using Gettext inside <<<EOF string","137597","","<p>I use PHP's EOF string to format HTML content without the hassle of having to escape quotes etc. How can I use the  function inside this string?</p>

<pre><code>&lt;?php
    $str = &lt;&lt;&lt;EOF
    &lt;p&gt;Hello&lt;/p&gt;
    &lt;p&gt;&lt;?= _(""World""); ?&gt;&lt;/p&gt;
EOF;
    echo $str;
?&gt;
</code></pre>
","<p>As far as I can see in <a href=""http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc"" rel=""noreferrer"">the manual</a>, it is not possible to call functions inside HEREDOC strings. A cumbersome way would be to prepare the words beforehand:</p>

<pre><code>&lt;?php

    $world = _(""World"");

    $str = &lt;&lt;&lt;EOF
    &lt;p&gt;Hello&lt;/p&gt;
    &lt;p&gt;$world&lt;/p&gt;
EOF;
    echo $str;
?&gt;
</code></pre>

<p>a workaround idea that comes to mind is building a class with a <a href=""http://www.php.net/manual/en//language.oop5.overloading.php#language.oop5.overloading.members"" rel=""noreferrer"">magic getter method</a>.</p>

<p>You would declare a class like this:</p>

<pre><code>class Translator
{
 public function __get($name) {
  return _($name); // Does the gettext lookup
  }
 }
</code></pre>

<p>Initialize an object of the class at some point:</p>

<pre><code>  $translate = new Translator();
</code></pre>

<p>You can then use the following syntax to do a gettext lookup inside a HEREDOC block:</p>

<pre><code>    $str = &lt;&lt;&lt;EOF
    &lt;p&gt;Hello&lt;/p&gt;
    &lt;p&gt;{$translate-&gt;World}&lt;/p&gt;
EOF;
    echo $str;
?&gt;
</code></pre>

<p><code>$translate-&gt;World</code> will automatically be translated to the gettext lookup thanks to the magic getter method.</p>

<p>To use this method for words with spaces or special characters (e.g. a gettext entry named <code>Hello World!!!!!!</code>, you will have to use the following notation:</p>

<pre><code> $translate-&gt;{""Hello World!!!!!!""}
</code></pre>

<p>This is all untested but should work.</p>

<blockquote>
  <p><strong>Update</strong>: As @mario found out, it is possible to call functions from HEREDOC strings after all. I think using getters like this is a sleek solution, but using a direct function call may be easier. See the comments on how to do this.</p>
</blockquote>
","3694334"
"What causes: ""Notice: Uninitialized string offset"" to appear?","137286","","<p>I have a form that users fill out, on the form there are multiple identical fields, like ""project name"", ""project date"", ""catagory"", etc. Based on how many forms a user is submitting:</p>

<p>My goal is to:</p>

<ol>
<li>loop over the number of forms</li>
<li>create individual SQL insert statements</li>
</ol>

<p>However, PHP throws me a NOTICE that I don't seem to understand:</p>

<p><strong>Notice:</strong></p>

<blockquote>
  <p>Notice: Uninitialized string offset: 1 ...dataPasser.php on line 90</p>
</blockquote>

<p><strong>PHP</strong></p>

<pre><code>$myQuery = array();

if ($varsCount != 0)
{
  for ($i=0; $i &lt;= $varsCount; $i++)
  {
    $var = ""insert into projectData values ('"" . $catagory[$i] . ""', '"" .  $task[$i] . ""', '"" . $fullText[$i] . ""', '"" . $dueDate[$i] . ""', null, '"" . $empId[$i] .""')"";
    array_push($myQuery, $var);     
  }
}
</code></pre>

<p>There are references to this issue I am having but they are not exact and I am having trouble deducing where the actual problem stems from. I would greatly appreciate any help in understanding what is causing the array to not initialize properly.</p>
","<p>This error would occur if any of the following variables were actually strings or null instead of arrays, in which case accessing them with an array syntax <code>$var[$i]</code> would be like trying to access a specific character in a string:</p>

<pre><code>$catagory
$task
$fullText
$dueDate
$empId
</code></pre>

<p>In short, everything in your insert query.</p>

<p>Perhaps the <code>$catagory</code> variable is misspelled?</p>
","1263654"
"Include PHP inside JavaScript (.js) files","137154","","<p>I have a JavaScript file (extension <code>.js</code>, not <code>.html</code>) containing several JavaScript functions.</p>

<p>I want to call one of the PHP functions in a PHP file containing only several PHP functions from within one of the JavaScript functions.</p>

<ul>
<li>Is that possible?</li>
<li>Would I need to ""include"" the <code>.php</code> file containing the PHP function in the <code>.js</code> file?</li>
<li>How would I do that? <br /> For example, say I had a file called myLib.php containing a function called <code>myFunc</code> that takes two parameters (<code>param1</code> and <code>param2</code>). Then I have a <code>.js</code> file containing a function called <code>myJsFunc</code>.  How would a call the <code>myFunc</code> (PHP) from within the <code>myJsFunc</code> (JavaScript function)?  Wouldn't I need to include the PHP file somehow in the <code>.js</code> file?</li>
</ul>
","<h1>7 years later update: This is terrible advice. Please don't do this.</h1>

<p>If you just need to pass variables from PHP to the javascript, you can have a  tag in the php/html file using the javascript to begin with.</p>

<pre><code>&lt;script type=""text/javascript""&gt;
    phpVars = new Array();
    &lt;?php foreach($vars as $var) {
        echo 'phpVars.push(""' . $var . '"");';
    };
    ?&gt;
&lt;/script&gt;
&lt;script type=""text/javascript"" src=""yourScriptThatUsesPHPVars.js""&gt;&lt;/script&gt;
</code></pre>

<p>If you're trying to call functions, then you can do this like this</p>

<pre><code>&lt;script type=""text/javascript"" src=""YourFunctions.js""&gt;&lt;/script&gt;
&lt;script type=""text/javascript""&gt;
    functionOne(&lt;?php echo implode(', ', $arrayWithVars); ?&gt;);
    functionTwo(&lt;?php echo $moreVars; ?&gt;, &lt;?php echo $evenMoreVars; ?&gt;);
&lt;/script&gt;
</code></pre>
","3241877"
"Getting Current date, time , day in laravel","136865","","<p>I need to get the current date, time, day using laravel</p>

<p>I tried to echo  <code>$ldate = new DateTime('today');</code> and <code>$ldate = new DateTime('now');</code></p>

<p>But it is returning 1 always.</p>

<p>How can i get the current date, time , day in larvel</p>
","<p>Laravel has the <code>Carbon</code> dependency attached to it.</p>

<p><code>Carbon::now()</code>, include the <code>Carbon\Carbon</code> namespace if necessary.</p>

<p>Edit (usage and docs)</p>

<p>Say I want to retrieve the date and time and output it as a string.</p>

<pre><code>$mytime = Carbon\Carbon::now();
echo $mytime-&gt;toDateTimeString();
</code></pre>

<p>This will output in the usual format of <code>Y-m-d H:i:s</code>, there are many pre-created formats and you will unlikely need to mess with PHP date time strings again with Carbon.</p>

<p>Documentation:
<a href=""https://github.com/briannesbitt/Carbon"" rel=""noreferrer"">https://github.com/briannesbitt/Carbon</a></p>

<p>String formats for Carbon:
<a href=""http://carbon.nesbot.com/docs/#api-formatting"" rel=""noreferrer"">http://carbon.nesbot.com/docs/#api-formatting</a></p>
","28109393"
"PHP Echo text Color","136833","","<p>How do I change the color of an echo message and center the message in the PHP I've written. The line I have is:</p>

<p><code>echo 'Request has been sent. Please wait for my reply!';</code></p>
","<p>How about writing out some HTML tags and some CSS if you're outputting this to the browser?</p>

<pre><code>echo '&lt;span style=""color:#AFA;text-align:center;""&gt;Request has been sent. Please wait for my reply!&lt;/span&gt;';
</code></pre>

<p>Won't work from console though, only through browser.</p>
","1691655"
"How to clear browser cache with php?","136687","","<p>How to clear browser cache with php?</p>
","<pre><code>header(""Cache-Control: no-cache, must-revalidate"");
header(""Expires: Mon, 26 Jul 1997 05:00:00 GMT"");
header(""Content-Type: application/xml; charset=utf-8"");
</code></pre>
","1037252"
"Display array values in PHP","136684","","<p>So, I'm working with PHP for the first time and I am trying to retrieve and display the values of an array. After a lot of googling, the only methods I can find for this are <code>print_r</code>, <code>var_dump</code> or <code>var_export</code>. However, all of these methods return something that looks like this:</p>

<pre><code>[a] =&gt; apple
[b] =&gt; banana
[c] =&gt; orange
</code></pre>

<p>I can't figure out how to style this outout. I need to strip away the <code>[a] =&gt;</code> part and add commas. I know this must be a pretty straightforward process but I haven't been able to track down any documentation that demonstrates how to do it. </p>
","<p>There is <a href=""http://php.net/manual/en/control-structures.foreach.php"" rel=""noreferrer"">foreach</a> loop in php. You have to traverse the array.</p>

<pre><code>foreach($array as $key =&gt; $value)
{
  echo $key."" has the value"". $value;
}
</code></pre>

<p>If you simply want to add commas between values, consider using <a href=""http://php.net/manual/en/function.implode.php"" rel=""noreferrer"">implode</a></p>

<pre><code>$string=implode("","",$array);
echo $string;
</code></pre>
","5672803"
"Save PHP array to MySQL?","136527","","<p>What is a good way to save an array of data to a single mysql field?  </p>

<p>Also once I query for that array in the mysql table, what is a good way to get it back into array form?</p>

<p>Is serialize and unserialize the answer?</p>
","<p>There is no <em>good</em> way to store an array into a single field.</p>

<p>You need to examine your relational data and make the appropriate changes to your schema. See example below for a reference to this approach.</p>

<p>If you <em>must</em> save the array into a single field then the <a href=""http://php.net/manual/en/function.serialize.php"" rel=""noreferrer""><code>serialize()</code></a> and <a href=""http://php.net/manual/en/function.unserialize.php"" rel=""noreferrer""><code>unserialize()</code></a> functions will do the trick. But you cannot perform queries on the actual content. </p>

<p>As an alternative to the serialization function there is also  <a href=""http://www.php.net/manual/en/function.json-encode.php"" rel=""noreferrer""><code>json_encode()</code></a> and <a href=""http://www.php.net/manual/en/function.json-decode.php"" rel=""noreferrer""><code>json_decode()</code></a>.</p>

<p>Consider the following array</p>

<pre><code>$a = array(
    1 =&gt; array(
        'a' =&gt; 1,
        'b' =&gt; 2,
        'c' =&gt; 3
    ),
    2 =&gt; array(
        'a' =&gt; 1,
        'b' =&gt; 2,
        'c' =&gt; 3
    ),
);
</code></pre>

<p>To save it in the database you need to create a table like this</p>

<pre><code>$c = mysql_connect($server, $username, $password);
mysql_select_db('test');
$r = mysql_query(
    'DROP TABLE IF EXISTS test');
$r = mysql_query(
    'CREATE TABLE test (
      id INTEGER UNSIGNED NOT NULL,
      a INTEGER UNSIGNED NOT NULL,
      b INTEGER UNSIGNED NOT NULL,
      c INTEGER UNSIGNED NOT NULL,
      PRIMARY KEY (id)
    )');
</code></pre>

<p>To work with the records you can perform queries such as these (and yes this is an example, beware!)</p>

<pre><code>function getTest() {
    $ret = array();
    $c = connect();
    $query = 'SELECT * FROM test';
    $r = mysql_query($query,$c);
    while ($o = mysql_fetch_array($r,MYSQL_ASSOC)) {
        $ret[array_shift($o)] = $o;
    }
    mysql_close($c);
    return $ret;
}
function putTest($t) {
    $c = connect();
    foreach ($t as $k =&gt; $v) {
        $query = ""INSERT INTO test (id,"".
                implode(',',array_keys($v)).
                "") VALUES ($k,"".
                implode(',',$v).
            "")"";
        $r = mysql_query($query,$c);
    }
    mysql_close($c);
}

putTest($a);
$b = getTest();
</code></pre>

<p>The <code>connect()</code> function returns a mysql connection resource</p>

<pre><code>function connect() {
    $c = mysql_connect($server, $username, $password);
    mysql_select_db('test');
    return $c;
}
</code></pre>
","1978976"
"PHPDoc type hinting for array of objects?","136456","","<p>So, in PHPDoc one can specify <code>@var</code> above the member variable declaration to hint at its type. Then an IDE, for ex. PHPEd, will know what type of object it's working with and will be able to provide a code insight for that variable.</p>

<pre><code>&lt;?php
  class Test
  {
    /** @var SomeObj */
    private $someObjInstance;
  }
?&gt;
</code></pre>

<p>This works great until I need to do the same to an array of objects to be able to get a proper hint when I iterate through those objects later on.</p>

<p>So, is there a way to declare a PHPDoc tag to specify that the member variable is an array of <code>SomeObj</code>s? <code>@var</code> array is not enough, and <code>@var array(SomeObj)</code> doesn't seem to be valid, for example.</p>
","<p>The best you can do is say,</p>

<pre><code>foreach ($Objs as $Obj)
{
    /* @var $Obj Test */
    // You should be able to get hinting after the preceding line if you type $Obj-&gt;
}
</code></pre>

<p>I do that a lot in Zend Studio. Don't know about other editors, but it ought to work.</p>
","778787"
"""[notice] child pid XXXX exit signal Segmentation fault (11)"" in apache error.log","136339","","<p>I am using Apache/PHP/MySQL stack.<br>
Using as framework CakePHP. </p>

<p>Every now and then I get a blank white page. I can't debug it through Cake, so I peek in the apache error.log and here's what I get:</p>

<pre><code>[Wed Oct 12 15:27:23 2011] [notice] child pid 3580 exit signal Segmentation fault (11)
[Wed Oct 12 15:27:34 2011] [notice] child pid 3581 exit signal Segmentation fault (11)
[Wed Oct 12 15:30:52 2011] [notice] child pid 3549 exit signal Segmentation fault (11)
[Wed Oct 12 16:04:27 2011] [notice] child pid 3579 exit signal Segmentation fault (11)
zend_mm_heap corrupted
[Wed Oct 12 16:26:24 2011] [notice] child pid 3625 exit signal Segmentation fault (11)
[Wed Oct 12 17:57:24 2011] [notice] child pid 3577 exit signal Segmentation fault (11)
[Wed Oct 12 17:58:54 2011] [notice] child pid 3550 exit signal Segmentation fault (11)
[Wed Oct 12 17:59:52 2011] [notice] child pid 3578 exit signal Segmentation fault (11)
[Wed Oct 12 18:01:38 2011] [notice] child pid 3683 exit signal Segmentation fault (11)
[Wed Oct 12 22:20:53 2011] [notice] child pid 3778 exit signal Segmentation fault (11)
[Wed Oct 12 22:29:51 2011] [notice] child pid 3777 exit signal Segmentation fault (11)
[Wed Oct 12 22:33:42 2011] [notice] child pid 3774 exit signal Segmentation fault (11)
</code></pre>

<p>What is this segmentation fault, how can I fix this, I have no clue and would be greatfully greatful.</p>

<p>UPDATE:</p>

<pre><code>PHP Version 5.3.4, OSX local development
Server version: Apache/2.2.17 (Unix)
CakePhp: 1.3.10
</code></pre>
","<p>Attach gdb to one of the httpd child processes and reload or continue working and wait for a crash and then look at the backtrace. Do something like this:</p>

<pre><code>$ ps -ef|grep httpd
0     681     1   0 10:38pm ??         0:00.45 /Applications/MAMP/Library/bin/httpd -k start
501   690   681   0 10:38pm ??         0:00.02 /Applications/MAMP/Library/bin/httpd -k start
</code></pre>

<p>...</p>

<p>Now attach gdb to one of the child processes, in this case PID 690 (columns are UID, PID, PPID, ...)</p>

<pre><code>$ sudo gdb
(gdb) attach 690
Attaching to process 690.
Reading symbols for shared libraries . done
Reading symbols for shared libraries ....................... done
0x9568ce29 in accept$NOCANCEL$UNIX2003 ()
(gdb) c
Continuing.
</code></pre>

<p>Wait for crash... then:</p>

<pre><code>(gdb) backtrace
</code></pre>

<p>Or</p>

<pre><code>(gdb) backtrace full
</code></pre>

<p>Should give you some clue what's going on. If you file a bug report you should include the backtrace.</p>

<p>If the crash is hard to reproduce it may be a good idea to configure Apache to only use one child processes for handling requests. The config is something like this:</p>

<pre><code>StartServers 1
MinSpareServers 1
MaxSpareServers 1
</code></pre>
","7752606"
"Laravel stylesheets and javascript don't load for non-base routes","136339","","<p>Okay--I know this is a really elementary issue, but I can't figure it out. <em>This is a question regarding Laravel.</em></p>

<p>Basically, I have my stylesheets embedded in my default layout view. I'm currently just using regular css to link them, such as:</p>

<pre><code>&lt;link rel=""stylesheet"" href=""css/app.css"" /&gt;
</code></pre>

<p>It works great when I am at a single level route such as <strong>/about</strong>, but stops working when I go deeper, such as <strong>/about/me</strong>.</p>

<p>If I look at Chrome's developer console I see some of the following errors (only for the deeper routes):</p>

<pre><code>Resource interpreted as Stylesheet but transferred with MIME type text/html: ""http://example.dev/about/css/app.css"".
</code></pre>

<p>So clearly it is now looking for the css inside the ""about"" folder--which of course isn't a folder at all.</p>

<p>I just want it to look in the same place for the assets regardless of the route.</p>
","<p>For Laravel 4 &amp; 5:</p>

<pre><code>&lt;link rel=""stylesheet"" href=""{{ URL::asset('assets/css/bootstrap.min.css') }}""&gt;
</code></pre>

<p><strong>URL::asset</strong> will link to your <strong>project/public/</strong> folder, so chuck your scripts in there.</p>

<p><strong>Note:</strong> You'll need to be using blade templates to use this. All Blade templates should use the .blade.php extension.  </p>
","16565640"
"Why would $_FILES be empty when uploading files to PHP?","136258","","<p>I have WampServer 2 installed on my Windows 7 computer. I'm using Apache 2.2.11 and PHP 5.2.11. When I attempt to upload any file from a form, it seems to upload, but in PHP, the <code>$_FILES</code> array is empty. There is no file in the <code>c:\wamp\tmp</code> folder. I have configured <code>php.ini</code> to allow file uploads and such. The <code>tmp</code> folder has read/write privileges for the current user. I'm stumped.</p>

<p><strong>HTML:</strong></p>

<pre><code>&lt;html&gt;
&lt;head&gt;
    &lt;meta http-equiv=""Content-Type"" content=""text/html; charset=utf-8"" /&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form enctype=""multipart/form-data"" action=""vanilla-upload.php"" method=""POST""&gt;
        Choose a file to upload: &lt;input name=""uploadedfile"" type=""file"" /&gt;&lt;br /&gt;
        &lt;input type=""submit"" value=""Upload File"" /&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p><strong>PHP:</strong></p>

<pre><code>&lt;?php
echo 'file count=', count($_FILES),""\n"";
var_dump($_FILES);
echo ""\n"";
?&gt;
</code></pre>
","<p>Thank you everybody for the vary comprehensive replies. Those are all very helpful. The answer turned out to be something very odd. It turns out that PHP 5.2.11 doesn't like the following:</p>

<pre><code>post_max_size = 2G
</code></pre>

<p>or </p>

<pre><code>post_max_size = 2048M
</code></pre>

<p>If I change it to <code>2047M</code>, the upload works.</p>
","3595227"
"Upload DOC or PDF using PHP","136223","","<p>I'm able to upload images fine, but when when I change the types from image/jpg, image/gif to application/msword and application/pdf, it doesn't work. Here's my code. The exact same code works for images, but for uploading docs and pdf, it outputs ""Invalid File."" What's going on here? My file is only approx 30kb and is well under the file size limit here.</p>

<pre><code>$allowedExts = array(""pdf"", ""doc"", ""docx""); 
$extension = end(explode(""."", $_FILES[""file""][""name""]));

if ( ( ($_FILES[""file""][""type""] == ""application/msword"") || ($_FILES[""file""][""type""] == ""text/pdf"") ) 
&amp;&amp; ($_FILES[""file""][""size""] &lt; 20000) &amp;&amp; in_array($extension, $allowedExts))
{      
 move_uploaded_file($_FILES[""file""][""tmp_name""], ""upload/"" . $_FILES[""file""][""name""]); 
}
else
{
echo ""Invalid file.""
}
</code></pre>
","<p>Don't use the <code>['type']</code> parameter to validate uploads. That field is user-provided, and can be trivially forged, allowing ANY type of file to be uploaded. The same goes for the <code>['name']</code> parameter - that's the name of the file as provided by the user. It is also trivial to forge, so the user's sending <code>nastyvirus.exe</code> and calling it <code>cutekittens.jpg</code>.</p>

<p>The proper method for validating uploads is to use server-side mime-type determination, e.g. via <a href=""http://php.net/fileinfo"">fileinfo</a>, plus having proper upload success checking, which you do not:</p>

<pre><code>if ($_FILES['file']['error'] !== UPLOAD_ERR_OK) {
    die(""Upload failed with error "" . $_FILES['file']['error']);
}
$finfo = finfo_open(FILEINFO_MIME_TYPE);
$mime = finfo_file($finfo, $_FILES['file']['tmp_name']);
$ok = false;
switch ($mime) {
   case 'image/jpeg':
   case 'application/pdf'
   case etc....
        $ok = true;
   default:
       die(""Unknown/not permitted file type"");
}
move_uploaded_file(...);
</code></pre>

<p>You are also using the user-provided filename as part of the final destination of the move_uploaded_files. it is also trivial to embed path data into that filename, which you then blindly use. That means a malicious remote user can scribble on ANY file on your server that they know the path for, plus plant new files.</p>
","11601457"
"PHP - auto refreshing page","135699","","<p>I am using following code for a refreshing page, it is not reloading on completion.  The following code is not working sometime.</p>

<pre><code> $page = $_SERVER['PHP_SELF'];
 $sec = ""10"";
 header(""Refresh: $sec; url=$page"");
 echo ""Watch the page reload itself in 10 second!"";
</code></pre>
","<p>Use a <code>&lt;meta&gt;</code> redirect instead of a header redirect, like so:</p>

<pre><code>&lt;?php
$page = $_SERVER['PHP_SELF'];
$sec = ""10"";
?&gt;
&lt;html&gt;
    &lt;head&gt;
    &lt;meta http-equiv=""refresh"" content=""&lt;?php echo $sec?&gt;;URL='&lt;?php echo $page?&gt;'""&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;?php
        echo ""Watch the page reload itself in 10 second!"";
    ?&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
","11497617"
"Best Practices: working with long, multiline strings in PHP?","135685","","<p>Note: I'm sorry if this is an extremely simple question but I'm somewhat obsessive compulsive over the formatting of my code.</p>

<p>I have a class that has a function that returns a string that will make up the body text of an email. I want this text formatted so it looks right in the email, but also so it doesn't make my code look funky. Here's what I mean:</p>

<pre><code>class Something
{
    public function getEmailText($vars)
    {
        $text = 'Hello ' . $vars-&gt;name . "",

The second line starts two lines below.

I also don't want any spaces before the new line, so it's butted up against the left side of the screen."";
        return $text;
    }
}
</code></pre>

<p>but it could also be written as:</p>

<pre><code>public function getEmailText($vars)
{
    $text = ""Hello {$vars-&gt;name},\n\rThe second line starts two lines below.\n\rI also don't want any spaces before the new line, so it's butted up against the left side of the screen."";
    return $text;
}
</code></pre>

<p>but what's the deal with new lines and carriage returns? What's the difference? Is <code>\n\n</code> the equivalent of <code>\r\r</code> or <code>\n\r</code>? Which should I use when I'm creating a line gap between lines?</p>

<p>Then there's the option of output buffering and heredoc syntax.</p>

<p>How do you deal with using long multiline strings in your objects?</p>
","<p>You should use HEREDOC or NOWDOC.</p>

<pre><code>$var = ""some text"";
$text = &lt;&lt;&lt;EOT
  Place your text between the EOT. It's
  the delimiter that ends the text
  of your multiline string.
  $var
EOT;
</code></pre>

<p>The difference between Heredoc and Nowdoc is that PHP code embedded in a heredoc gets executed, while PHP code in Nowdoc will be printed out as is.</p>

<pre><code>$var = ""foo"";
$text = &lt;&lt;&lt;'EOT'
  My $var
EOT;
</code></pre>

<p>In this case $text will have the value <code>My $var</code>.</p>

<p><strong>Note:</strong> before the closing <code>EOT;</code> there should be no spaces or tabs. otherwise you will get an error</p>
","1848974"
"PHP filesize MB/KB conversion","135493","","<p>How can I convert the output of PHP's filesize() function to a nice format with MegaBytes, KiloBytes etc?</p>

<p>like:</p>

<ul>
<li>if the size is less than 1 MB, show the size in KB</li>
<li>if it's between 1 MB - 1 GB show it in MB</li>
<li>if it's larger - in GB</li>
</ul>
","<p>Here is a sample:</p>

<pre><code>&lt;?php
// Snippet from PHP Share: http://www.phpshare.org

    function formatSizeUnits($bytes)
    {
        if ($bytes &gt;= 1073741824)
        {
            $bytes = number_format($bytes / 1073741824, 2) . ' GB';
        }
        elseif ($bytes &gt;= 1048576)
        {
            $bytes = number_format($bytes / 1048576, 2) . ' MB';
        }
        elseif ($bytes &gt;= 1024)
        {
            $bytes = number_format($bytes / 1024, 2) . ' KB';
        }
        elseif ($bytes &gt; 1)
        {
            $bytes = $bytes . ' bytes';
        }
        elseif ($bytes == 1)
        {
            $bytes = $bytes . ' byte';
        }
        else
        {
            $bytes = '0 bytes';
        }

        return $bytes;
}
?&gt;
</code></pre>
","5501447"
"Force file download with php using header()","135478","","<p>I want the user to be able to download some files I have on my server, but when I try to use any of the many examples of this around the internet nothing seems to work for me. I've tried code like this: </p>

<pre><code>&lt;?php

$size = filesize(""Image.png"");

header('Content-Description: File Transfer');
header('Content-Type: image/png');
header('Content-Disposition: attachment; filename=""Image.png""');
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');
header('Content-Length: ' . $size);
readfile(""Image.png"");
</code></pre>

<p>I've even tried to use the most basic example I could find, like this: </p>

<pre><code>&lt;?php
header('Content-type: image/png');
header('Content-Disposition: attachment; filename=""Image.png""');
readfile('Image.png');
</code></pre>

<p>When I've tested this I have removed all the other code I have and used an empty file with just this code to remove any faults created by external sources.</p>

<p>When I look in the console the file gets sent with the right headers i.e</p>

<pre><code>'Content-Disposition: attachment; filename=""Image.png""'
</code></pre>

<p>But the save dialog isn't displayed.</p>

<p>I've also tried with inline instead of attachment in the content disposition header but that didn't make a difference either, I've tested this in Firefox 8.0.1 Chrome 15.0.874.121 and Safari 5.1.1.</p>
","<p>The problem was that I used ajax to post the message to the server, when I used a direct link to download the file everything worked fine. </p>

<p>I used this other Stackoverflow Q&amp;A material instead, it worked great for me:</p>

<ul>
<li><a href=""https://stackoverflow.com/questions/3599670/ajax-file-download-using-jquery-php"">Ajax File Download using Jquery, PHP</a></li>
</ul>
","8501345"
"How to enable curl in xampp?","135367","","<p>How to enable curl in xampp ?</p>

<p>My PHP twitter application needs curl function. But it is not enabled in XAMPP. how to enable it. I found no options for doing that.</p>
","<p>You have to modify the php.ini files in your xampp folder. Three files in three different places need to be changed.</p>

<p>Follow the following steps to enable curl library with XAMPP in Windows:</p>

<h2>Step 1:</h2>

<p>Browse and open the following 3 files</p>

<pre><code>C:\Program Files\xampp\apache\bin\php.ini
C:\Program Files\xampp\php\php.ini
C:\Program Files\xampp\php\php4\php.ini
</code></pre>

<h2>Step 2:</h2>

<p>Uncomment the following line in your php.ini file by removing the semicolon (;).</p>

<pre><code>;extension=php_curl.dll
</code></pre>

<p>After that it will look something like something below-</p>

<pre><code>extension=php_curl.dll
</code></pre>

<h2>Step 3:</h2>

<p>Restart your Apache server.</p>

<h2>Step 4:</h2>

<p>Check your <code>phpinfo()</code> to see whether curl has properly enabled or not.</p>

<p>Enjoy using curl() library.</p>
","9683555"
"How to print all session variables currently set?","135329","","<p>Without having to call each session variable by name, is there a way to display the content of all the session variables currently set?</p>
","<pre><code>echo '&lt;pre&gt;';
var_dump($_SESSION);
echo '&lt;/pre&gt;';
</code></pre>

<p>Or you can use <code>print_r</code> if you don't care about types. If you use <code>print_r</code>, you can make the second argument <code>TRUE</code> so it will return instead of echo, useful for...</p>

<pre><code>echo '&lt;pre&gt;' . print_r($_SESSION, TRUE) . '&lt;/pre&gt;';
</code></pre>
","3331632"
"How to echo xml file in php","135290","","<p>How to print an xml file to the screen in php?</p>

<p>This is not working:</p>

<pre><code>$curl = curl_init();        
curl_setopt ($curl, CURLOPT_URL, 'http://rss.news.yahoo.com/rss/topstories');   
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);   
$result = curl_exec ($curl);   
curl_close ($curl);    
$xml = simplexml_load_string($result);
echo $xml;
</code></pre>

<p>Is there a simple solution? Maybe without SimpleXML?</p>
","<p>You can use HTTP URLs as if they were local files, thanks to <a href=""http://docs.php.net/manual/en/wrappers.php"" rel=""noreferrer"">PHP's wrappers</a></p>

<p>You can get the contents from an URL via file_get_contents() and then echo it, or even read it directly using readfile()</p>

<pre><code>$file = file_get_contents('http://example.com/rss');
echo $file;
</code></pre>

<p>or</p>

<pre><code>readfile('http://example.com/rss');
</code></pre>

<p>Don't forget to set the correct MIME type before outputing anything, though.</p>

<pre><code>header('Content-type: text/xml');
</code></pre>
","1199643"
"Adding an item to an associative array","135086","","<pre><code>//go through each question
foreach($file_data as $value) {
   //separate the string by pipes and place in variables
   list($category, $question) = explode('|', $value);

   //place in assoc array
   $data = array($category =&gt; $question);
   print_r($data);

}
</code></pre>

<p>This is not working as it replaces the value of data. How can I have it add an associative value each loop though? <code>$file_data</code> is an array of data that has a dynamic size.</p>
","<p>I think you want <code>$data[$category] = $question;</code></p>

<p>Or in case you want an array that maps categories to array of questions:</p>

<pre><code>$data = array();
foreach($file_data as $value) {
    list($category, $question) = explode('|', $value, 2);

    if(!isset($data[$category])) {
        $data[$category] = array();
    }
    $data[$category][] = $question;
}
print_r($data);
</code></pre>
","5384855"
"How to replace \r & \n with <br/>?","135060","","<p>Trying to simply replace some new lines. Have tried 3 different ways and I get no change:</p>

<pre><code>$description = preg_replace('/\r?\n|\r/','&lt;br/&gt;', $description);
$description = str_replace(array(""\r\n"",""\r"",""\n""),""&lt;br/&gt;"", $description);
$description = nl2br($description);
</code></pre>

<p>These should all work but I still get the newlines. They are double: ""\r\r"". That shouldn't make any of these fail right?</p>
","<p>There is already <a href=""http://php.net/nl2br"" rel=""noreferrer""><code>nl2br()</code></a> function that <s>replaces</s> <strong>inserts</strong> <code>&lt;br&gt;</code> tags before new line characters:</p>

<p>Example (<a href=""http://codepad.org/0mRHhdWn"" rel=""noreferrer"">codepad</a>):</p>

<pre><code>&lt;?php
// Won't work
$desc = 'Line one\nline two';
// Should work
$desc2 = ""Line one\nline two"";

echo nl2br($desc);
echo '&lt;br/&gt;';
echo nl2br($desc2);
?&gt;
</code></pre>

<p>But if it is still not working make sure the text <code>$desciption</code> is double-quoted.</p>

<p>That's because single quotes do not 'expand' escape sequences such as <code>\n</code> comparing to double quoted strings. Quote from PHP documentation:</p>

<blockquote>
  <p><strong>Note</strong>: Unlike the double-quoted and heredoc syntaxes, variables and escape sequences for special characters will not be expanded when they occur in single quoted strings.</p>
</blockquote>
","5946121"
"How do you make websites with Java?","135057","","<p>This might be a really trivial question, but I've been writing Java programs at my school and I just found out that I can create websites with Java as well. </p>

<ul>
<li>How can I do that? Any good books/tutorials for that? </li>
<li>Which is better for Web development, Java or PHP? </li>
<li>Also, when using PHP, MySQL comes into picture and while writing Java programs for desktop, we just use File I/O, so what is better for web dev, File I/O or MySQL?</li>
</ul>
","<p>Read the <a href=""http://java.sun.com/j2ee/1.4/docs/tutorial/doc/WebApp.html"" rel=""noreferrer"">tutorial on Java Web applications</a>.</p>

<p>Basically Web applications are a part of the Java EE standard.  A lot of people only use the Web (servlets) part with additional frameworks thrown in, most notably Spring but also Struts, Seam and others.</p>

<p>All you need is an IDE like IntelliJ, Eclipse or Netbeans, the JDK, the Java EE download and a servlet container like Tomcat (or a full-blown application server like Glassfish or JBoss).</p>

<p>Here is a <a href=""http://www.coreservlets.com/Apache-Tomcat-Tutorial/"" rel=""noreferrer"">Tomcat tutorial</a>.</p>
","621230"
"Fastest way to implode an associative array with keys","134968","","<p>I'm looking for a fast way to turn an associative array in to a string. Typical structure would be like a URL query string but with customizable separators so I can use '<code>&amp;amp;</code>' for xhtml links or '<code>&amp;</code>' otherwise.</p>

<p>My first inclination is to use <code>foreach</code> but since my method could be called many times in one request I fear it might be too slow.</p>

<pre><code>&lt;?php
$Amp = $IsXhtml ? '&amp;amp;' : '&amp;';
$Parameters = array('Action' =&gt; 'ShowList', 'Page' =&gt; '2');
$QueryString = '';
foreach ($Parameters as $Key =&gt; $Value)
        $QueryString .= $Amp . $Key . '=' . $Value;
</code></pre>

<p>Is there a faster way?</p>
","<p>You can use <a href=""http://www.php.net/http_build_query"" rel=""noreferrer""><code>http_build_query()</code></a> to do that.</p>

<blockquote>
  <p>Generates a URL-encoded query string from the associative (or indexed) array provided.</p>
</blockquote>
","408040"
"How do I see which checkbox is checked?","134790","","<p>How do I check in PHP whether a <code>checkbox</code> is checked or not?</p>
","<p>If the checkbox is checked, then the checkbox's value will be passed. Otherwise, the field is not passed in the HTTP post.</p>

<pre><code>if (isset($_POST['mycheckbox'])) {
    echo ""checked!"";
}
</code></pre>
","2268896"
"Calling a particular PHP function on form submit","134787","","<p>I was trying to call a particular php function in submit of a form both the form and php scripts are in same page. My code is below.(it is not working and so I need help)</p>

<pre><code>&lt;html&gt;
    &lt;body&gt;
    &lt;form method=""post"" action=""display()""&gt;
        &lt;input type=""text"" name=""studentname""&gt;
        &lt;input type=""submit"" value=""click""&gt;
    &lt;/form&gt;
    &lt;?php
        function display()
        {
            echo ""hello"".$_POST[""studentname""];
        }
    ?&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
","<p>In the following line</p>

<pre><code>&lt;form method=""post"" action=""display()""&gt;
</code></pre>

<p>the action should be the name of your script and you should call the function, Something like this</p>

<pre><code>&lt;form method=""post"" action=""yourFileName.php""&gt;
    &lt;input type=""text"" name=""studentname""&gt;
    &lt;input type=""submit"" value=""click"" name=""submit""&gt; &lt;!-- assign a name for the button --&gt;
&lt;/form&gt;

&lt;?php
function display()
{
    echo ""hello "".$_POST[""studentname""];
}
if(isset($_POST['submit']))
{
   display();
} 
?&gt;
</code></pre>
","12328392"
"How to execute two mysql queries as one in PHP/MYSQL?","134721","","<p>I have two queries, as following:</p>

<pre><code>SELECT SQL_CALC_FOUND_ROWS Id, Name FROM my_table WHERE Name LIKE '%prashant%' LIMIT 0, 10;
SELECT FOUND_ROWS();
</code></pre>

<p>I want to execute both these queries in a single attempt. </p>

<pre><code>$result = mysql_query($query);
</code></pre>

<p>But then tell me how I will handle each tables set separately. Actually in ASP.NET we uses dataset which handles two queries as</p>

<pre><code>ds.Tables[0];
ds.Tables[1]; .. etc
</code></pre>

<p>How can I do the same using PHP/MYSQL?</p>
","<p><strong>Update:</strong> Apparently possible by passing a flag to <code>mysql_connect()</code>. See <a href=""https://stackoverflow.com/questions/13980803/executing-multiple-sql-queries-in-one-statement-with-php/13982705#13982705"">Executing multiple SQL queries in one statement with PHP</a> Nevertheless, any current reader should avoid using the <code>mysql_</code>-class of functions and prefer PDO.</p>

<p>You can't do that using the regular mysql-api in PHP. Just execute two queries. The second one will be so fast that it won't matter. This is a typical example of micro optimization. Don't worry about it.</p>

<p>For the record, it can be done using mysqli and the <a href=""http://se2.php.net/manual/en/mysqli.multi-query.php"" rel=""nofollow noreferrer"">mysqli_multi_query</a>-function.</p>
","802474"
"Send File Attachment from Form Using phpMailer and PHP","134421","","<p>I have a form on <code>example.com/contact-us.php</code> that looks like this (simplified):</p>

<pre><code>&lt;form method=""post"" action=""process.php"" enctype=""multipart/form-data""&gt;
  &lt;input type=""file"" name=""uploaded_file"" id=""uploaded_file"" /&gt;
  &lt;input type=""hidden"" name=""MAX_FILE_SIZE"" value=""10000000"" /&gt;
&lt;/form&gt;
</code></pre>

<p>In my <code>process.php</code> file, I have the following code utilizing <code>PHPMailer()</code> to send an email:</p>

<pre><code>require(""phpmailer.php"");

$mail = new PHPMailer();

$mail-&gt;From     = me@example.com;
$mail-&gt;FromName = My name;
$mail-&gt;AddAddress(me@example.com,""John Doe"");

$mail-&gt;WordWrap = 50;
$mail-&gt;IsHTML(true);

$mail-&gt;Subject  =  ""Contact Form Submitted"";
$mail-&gt;Body     =  ""This is the body of the message."";
</code></pre>

<p>The email sends the body correctly, but without the Attachment of <code>uploaded_file</code>.</p>

<p><strong>MY QUESTION</strong></p>

<p>I need the file <code>uploaded_file</code> from the form to be attached to the email, and sent. I do NOT care about saving the file after the <code>process.php</code> script sends it in an email. </p>

<p>I understand that I need to add <code>AddAttachment();</code> somewhere (I'm assuming under the <code>Body</code> line) for the attachment to be sent. But...</p>

<ol>
<li>What do I put at the top of the <code>process.php</code> file to pull in the file <code>uploaded_file</code>? Like something using <code>$_FILES['uploaded_file']</code> to pull in the file from the contact-us.php page?</li>
<li>What goes inside of <code>AddAttachment();</code> for the file to be attached and sent along with the email and where does this code need to go?</li>
</ol>

<p>Please help and provide code!Thanks!</p>
","<p>Try:</p>

<pre><code>if (isset($_FILES['uploaded_file']) &amp;&amp;
    $_FILES['uploaded_file']['error'] == UPLOAD_ERR_OK) {
    $mail-&gt;AddAttachment($_FILES['uploaded_file']['tmp_name'],
                         $_FILES['uploaded_file']['name']);
}
</code></pre>

<p>Basic example can also be found <a href=""https://code.google.com/a/apache-extras.org/p/phpmailer/wiki/AdvancedMail"">here</a>.</p>

<p>The function definition for <code>AddAttachment</code> is:</p>

<pre><code>public function AddAttachment($path,
                              $name = '',
                              $encoding = 'base64',
                              $type = 'application/octet-stream')
</code></pre>
","11764230"
"Fatal error: Maximum execution time of 300 seconds exceeded","134342","","<p>I keep getting this PHP error:</p>

<blockquote>
  <p>Fatal error: Maximum execution time of 300 seconds exceeded</p>
</blockquote>

<p>I have tried setting my <code>max_execution_time</code> and my <code>max_input_time</code> settings in php.ini (both apache and cli) to <code>0</code>, <code>-1</code> and <code>4000</code> seconds each.</p>

<p>And i still get the error saying:</p>

<blockquote>
  <p>Fatal error: Maximum execution time of 300 seconds exceeded</p>
</blockquote>

<p>As well my script runs over 300 seconds before i get this message</p>

<p>I am running the script through command line.</p>

<p>I also checked my <code>phpinfo()</code> so see which <code>php.ini</code> I am using.</p>

<p>Even more interesting I have tried setting  <code>max_execution_time</code> and <code>max_input_time</code> settings to 5 second and my script will run way beyond 5 seconds before I get the: </p>

<blockquote>
  <p>Fatal error: Maximum execution time of 300 seconds exceeded</p>
</blockquote>
","<p>At the beginning of your script you can add.</p>

<pre><code>ini_set('MAX_EXECUTION_TIME', -1);
</code></pre>
","7680618"
"PHP Call to undefined function","134326","","<p>I am trying to call a function from another function. I get an error:</p>

<pre><code>Fatal error: Call to undefined function getInitialInformation() 
in controller.php on line 24
</code></pre>

<p><strong>controller.php file:</strong></p>

<pre><code>require_once(""model/model.php""); 

function intake() {
    $info = getInitialInformation($id); //line 24
}
</code></pre>

<p><strong>model/model.php</strong></p>

<pre><code>function getInitialInformation($id) {
    return $GLOBALS['em']-&gt;find('InitialInformation', $id);
}
</code></pre>

<p>Things already tried:</p>

<ol>
<li>Verified that the require_once works, and the file exists in the specified location.</li>
<li>Verified that the function exists in the file.</li>
</ol>

<p>I am not able to figure this out. Am I missing something here?</p>
","<p>This was a developer mistake - a misplaced ending brace, which made the above function a <strong>nested function</strong>.</p>

<p>I see a lot of questions related to the undefined function error in SO. Let me note down this as an answer, in case someone else have the same issue with <strong>function scope</strong>. </p>

<p>Things I tried to troubleshoot first:</p>

<ol>
<li>Searched for the php file with the function definition in it. Verified that the file exists.</li>
<li>Verified that the <em>require</em> (or <em>include</em>) statement  for the above file exists in the page. Also, verified the absolute path in the <em>require/include</em> is correct.</li>
<li>Verified that the filename is spelled correctly in the require statement.</li>
<li>Echoed a word in the included file, to see if it has been properly included.</li>
<li>Defined a separate function at the end of file, and called it. It worked too. </li>
</ol>

<p>It was difficult to trace the braces, since the functions were very long - problem with legacy systems. Further steps to troubleshoot were this:</p>

<ol>
<li>I already defined a simple print function at the end of included file. I moved it to just above the ""undefined function"". That made it undefined too. </li>
<li><p>Identified this as some scope issue.</p></li>
<li><p>Used the Netbeans collapse (code fold) feature to check the function just above this one. So, the 1000 lines function above just collapsed along with this one, making this a nested function.</p></li>
<li><p>Once the problem identified, cut-pasted the function to the end of file, which solved the issue.</p></li>
</ol>
","14116125"
"How to check the presence of php and apache on ubuntu server through ssh","134273","","<p>How can I check whether apache is installed with php and mysql on Ubuntu server through ssh? </p>

<p>Also if it is installed, in which directory?</p>

<p>And if in case some other package is installed, like lighttpd, where that is.</p>
","<p>Type <code>aptitude</code> to start the package manager. There you can see which applications are installed.</p>

<p>Use <code>/</code> to search for packages. Try searching for <code>apache2</code> and <code>php5</code> (or whatever versions you want to use). If they are installed, they should be bold and have an <code>i</code> in front of them. If they are not installed (<code>p</code> in front of the line) and you want to install them (and you have root permissions), use <code>+</code> to select them and then <code>g</code> (twice) to install it.</p>

<p>Word of warning: Before doing that, it might be wise to have a quick look at some <em>aptitude</em> tutorial on the web.</p>
","1776317"
"Authenticating in PHP using LDAP through Active Directory","134170","","<p>I'm looking for a way to authenticate users through LDAP with PHP (with Active Directory being the provider). Ideally, it should be able to run on IIS 7 (<a href=""http://adldap.sourceforge.net/"" rel=""noreferrer"">adLDAP</a> does it on Apache). Anyone had done anything similar, with success?</p>

<ul>
<li>Edit: I'd prefer a library/class with code that's ready to go... It'd be silly to invent the wheel when someone has already done so.</li>
</ul>
","<p>Importing a whole library seems inefficient when all you need is essentially two lines of code...</p>

<pre><code>$ldap = ldap_connect(""ldap.example.com"");
if ($bind = ldap_bind($ldap, $_POST['username'], $_POST['password'])) {
  // log them in!
} else {
  // error message
}
</code></pre>
","172042"
"PHP removing a character in a string","134142","","<p>My php is weak and I'm trying to change this string:</p>

<pre><code>http://www.example.com/backend.php?/c=crud&amp;m=index&amp;t=care
                                   ^
</code></pre>

<p>to be:</p>

<pre><code>http://www.example.com/backend.php?c=crud&amp;m=index&amp;t=care
                                  ^
</code></pre>

<p>removing the <code>/</code> after the <code>backend.php?</code>. Any ideas on the best way to do this?</p>

<p>Thanks!</p>
","<p>I think that it's better to use simply <a href=""http://www.php.net/str_replace"" rel=""noreferrer"">str_replace</a>, like the manual says:</p>

<blockquote>
  <p>If you don't need fancy replacing
  rules (like regular expressions), you
  should always use this function
  instead of ereg_replace()  or
  preg_replace().</p>
</blockquote>

<pre><code>&lt;?
$badUrl = ""http://www.site.com/backend.php?/c=crud&amp;m=index&amp;t=care"";
$goodUrl = str_replace('?/', '?', $badUrl);
</code></pre>
","264503"
"Parse query string into an array","133948","","<p>How can I turn a <strong>string</strong> below into an <strong>array</strong>?</p>

<pre><code>pg_id=2&amp;parent_id=2&amp;document&amp;video 
</code></pre>

<p>This is the array I am looking for,</p>

<pre><code>array(
    'pg_id' =&gt; 2,
    'parent_id' =&gt; 2,
    'document' =&gt; ,
    'video' =&gt;
)
</code></pre>
","<p>You want the <a href=""http://www.php.net/manual/en/function.parse-str.php"" rel=""noreferrer""><code>parse_str</code></a> function, and you need to set the second parameter to have the data put in an array instead of into individual variables.</p>

<pre><code>$get_string = ""pg_id=2&amp;parent_id=2&amp;document&amp;video"";

parse_str($get_string, $get_array);

print_r($get_array);
</code></pre>
","5397786"
"PHP: How to get referrer URL?","133885","","<p>I have a page (only index) where customers can send me emails and I want to see from what website that visitor is coming from? </p>

<p>How can I get <code>Referrer URL</code> with PHP? I tried with 
<code>$_SERVER['HTTP_REFERER']</code> but it's empty all the time. How can I do this? Thank you!</p>

<p>Here is what my <code>$_SERVER</code> contains (""---- CENSORED ----"" is censored by me)</p>

<pre><code>array(31) {
  [""DOCUMENT_ROOT""]=&gt;
  string(33) ""/home/anything/public_html/design""
  [""GATEWAY_INTERFACE""]=&gt;
  string(7) ""CGI/1.1""
  [""HTTP_ACCEPT""]=&gt;
  string(129) ""text/html, application/xml;q=0.9, application/xhtml+xml, image/png, image/webp, image/jpeg, image/gif, image/x-xbitmap, */*;q=0.1""
  [""HTTP_ACCEPT_ENCODING""]=&gt;
  string(13) ""gzip, deflate""
  [""HTTP_ACCEPT_LANGUAGE""]=&gt;
  string(14) ""en-US,en;q=0.9""
  [""HTTP_CACHE_CONTROL""]=&gt;
  string(8) ""no-cache""
  [""HTTP_CONNECTION""]=&gt;
  string(10) ""Keep-Alive""
  [""HTTP_COOKIE""]=&gt;
  string(189) ""__utma=76630272.1468291432.1367655794.1367669576.1367674157.3; __utmb=76630272.1.10.1367674157; __utmc=76630272; __utmz=76630272.1367655794.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)""
  [""HTTP_HOST""]=&gt;
  string(25) "" ---- CENSORED ---- ""
  [""HTTP_USER_AGENT""]=&gt;
  string(57) ""Opera/9.80 (Windows NT 6.1) Presto/2.12.388 Version/12.15""
  [""PATH""]=&gt;
  string(13) ""/bin:/usr/bin""
  [""QUERY_STRING""]=&gt;
  string(0) """"
  [""REDIRECT_STATUS""]=&gt;
  string(3) ""200""
  [""REMOTE_ADDR""]=&gt;
  string(10) ""5.15.68.79""
  [""REMOTE_PORT""]=&gt;
  string(5) ""57897""
  [""REQUEST_METHOD""]=&gt;
  string(3) ""GET""
  [""REQUEST_URI""]=&gt;
  string(12) ""/referer.php""
  [""SCRIPT_FILENAME""]=&gt;
  string(45) ""/home/anything/public_html/design/referer.php""
  [""SCRIPT_NAME""]=&gt;
  string(12) ""/referer.php""
  [""SERVER_ADDR""]=&gt;
  string(13) "" ---- CENSORED ---- ""
  [""SERVER_ADMIN""]=&gt;
  string(35) "" ---- CENSORED ---- ""
  [""SERVER_NAME""]=&gt;
  string(25) "" ---- CENSORED ---- ""
  [""SERVER_PORT""]=&gt;
  string(2) ""80""
  [""SERVER_PROTOCOL""]=&gt;
  string(8) ""HTTP/1.1""
  [""SERVER_SIGNATURE""]=&gt;
  string(189) ""
Apache/2.2.19 (Unix) mod_ssl/2.2.19 OpenSSL/0.9.8e-fips-rhel5 mod_auth_passthrough/2.1 mod_bwlimited/1.4 FrontPage/5.0.2.2635 Server at ---- CENSORED ---- Port 80

""
  [""SERVER_SOFTWARE""]=&gt;
  string(125) ""Apache/2.2.19 (Unix) mod_ssl/2.2.19 OpenSSL/0.9.8e-fips-rhel5 mod_auth_passthrough/2.1 mod_bwlimited/1.4 FrontPage/5.0.2.2635""
  [""UNIQUE_ID""]=&gt;
  string(24) ""UYUNcUPeiDsAABkR2eYAAAAj""
  [""PHP_SELF""]=&gt;
  string(12) ""/referer.php""
  [""REQUEST_TIME""]=&gt;
  int(1367674225)
  [""argv""]=&gt;
  array(0) {
  }
  [""argc""]=&gt;
  int(0)
}
</code></pre>
","<p><code>$_SERVER['HTTP_REFERER']</code> will give you the referrer page's URL if there exists any. If users use a bookmark or directly visit your site by manually typing in the URL, http_referer will be empty. Also if the <em>users</em> are posting to your page programatically (CURL) then they're not obliged to set the http_referer as well. You're missing all <code>_</code>, is that a typo?</p>
","16374737"
"How to get the query executed in Laravel 5 ? DB::getQueryLog returning empty array","133850","","<p>DB::getQueryLog returning empty array</p>

<pre><code>$user = User::find(5);
print_r(DB::getQueryLog());
</code></pre>

<p>result is empty array </p>

<pre><code>Array
(
)
</code></pre>
","<p>By default, the query log is disabled in Laravel 5:
<a href=""https://github.com/laravel/framework/commit/e0abfe5c49d225567cb4dfd56df9ef05cc297448"" rel=""noreferrer"">https://github.com/laravel/framework/commit/e0abfe5c49d225567cb4dfd56df9ef05cc297448</a></p>

<p>You will need to enable the query log by calling:</p>

<pre><code>DB::enableQueryLog();
</code></pre>

<p>or register an event listener:</p>

<pre><code>DB::listen(
    function ($sql, $bindings, $time) {
        //  $sql - select * from `ncv_users` where `ncv_users`.`id` = ? limit 1
        //  $bindings - [5]
        //  $time(in milliseconds) - 0.38 
    }
);  
</code></pre>

<h3>Some Tips</h3>

<h3>1. Multiple DB connections</h3> 

<p>If you have more than one DB connection you must specify which connection to log</p>

<p>To enables query log for <code>my_connection</code>:</p>

<pre><code>DB::connection('my_connection')-&gt;enableQueryLog();
</code></pre>

<p>To get query log for <code>my_connection</code>:</p>

<pre><code>print_r(
   DB::connection('my_connection')-&gt;getQueryLog()
);
</code></pre>

<h3>2. Where to enable query log ?</h3> 

<p>For an HTTP request lifecycle, you can enable query log in the <code>handle</code> method of some <code>BeforeAnyDbQueryMiddleware</code> <a href=""https://laravel.com/docs/5.2/middleware"" rel=""noreferrer"">middleware</a> and then retrieve the executed queries in the <a href=""https://laravel.com/docs/5.2/middleware#terminable-middleware"" rel=""noreferrer""><code>terminate</code></a> method of the same middleware.</p>

<pre><code>class BeforeAnyDbQueryMiddleware
{
    public function handle($request, Closure $next)
    {
        DB::enableQueryLog();
        return $next($request);
    }

    public function terminate($request, $response)
    {
        // Store or dump the log data...
        dd(
            DB::getQueryLog()
        );
    }
}
</code></pre>

<p>A middleware's chain will not run for artisan commands, so for CLI execution you can enable query log in the <code>artisan.start</code> event listener.</p>

<p>For example you can put it in the <code>bootstrap/app.php</code> file</p>

<pre><code>$app['events']-&gt;listen('artisan.start', function(){
    \DB::enableQueryLog();
});
</code></pre>

<h3>3. Memory</h3>

<p>Laravel keeps all queries in memory. So in some cases, such as when inserting a large number of rows, or having a long running job with a lot of queries, this can cause the application to use excess memory. </p>

<p>In most cases you will need the query log only for debugging, and if that is the case I would recommend you enable it only for development.</p>

<pre><code>if (App::environment('local')) {
    // The environment is local
    DB::enableQueryLog();
}
</code></pre>

<p><strong>References</strong></p>

<ul>
<li><a href=""https://laravel.com/docs/5.0/database#query-logging"" rel=""noreferrer"">https://laravel.com/docs/5.0/database#query-logging</a></li>
</ul>
","27753889"
"Add data dynamically to an Array","133751","","<p>I want to add data to an array dynamically.</p>
","<p>There are quite a few ways to work with dynamic arrays in PHP. 
Initialise an array:</p>

<pre><code>$array = array();
</code></pre>

<p>Add to an array:</p>

<pre><code>$array[] = ""item"";
$array[$key] = ""item"";
array_push($array, ""item"", ""another item"");
</code></pre>

<p>Remove from an array:</p>

<pre><code>$item = array_pop($array);
$item = array_shift($array);
unset($array[$key]);
</code></pre>

<p>There are plenty more ways, these are just some examples.</p>
","3325071"
"CodeIgniter htaccess and URL rewrite issues","133681","","<p>I have never used CodeIgniter before, let alone ANY php framework and I thought I would give it a try. Everything is going fine except I cannot seem to remove the index.php from the URL and still access my pages. </p>

<p>I have never used the MVC structure so I am learning as I go, so forgive me if I'm doing this wrong.</p>

<p>I am trying to access a view I created called 'about_page.php' by simply typing in <strong>localhost/ci/about</strong> but currently I can only access it by using <strong>localhost/ci/index.php/about</strong></p>

<p>The controller for the page is: <strong>/application/controllers/about.php</strong> <br />
The Model for the page is: <strong>/application/models/about_model.php</strong> <br />
And the View for the page is: <strong>/application/views/about_page.php</strong></p>

<p>I have searched for a solution to this issue, but haven't been able to find one. Here is where I have already searched:</p>

<p><a href=""https://stackoverflow.com/questions/5203581/codeigniter-removing-index-php?rq=1"">CodeIgniter - removing index.php</a><br />
<a href=""https://stackoverflow.com/questions/11947234/codeigniter-how-to-remove-the-index-php-from-url"">Codeigniter - how to remove the index.php from url?</a><br />
<a href=""http://www.farinspace.com/codeigniter-htaccess-file/"" rel=""noreferrer"">http://www.farinspace.com/codeigniter-htaccess-file/</a></p>

<p>CodeIgniter comes with a .htaccess file in the 'application' folder which contains only <code>Allow Deny From All</code>. So I created a new .htaccess file in the root directory, <code>http://localhost/ci/.htaccess</code> and added this code to it:</p>

<pre><code>RewriteEngine On
RewriteBase /ci
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L]
</code></pre>

<p>When the .htaccess file is in the root directory I get a 500 Internal Server Error. When I copy the exact same file into the applications folder the 500 error goes away, but I still cannot access the about page by using <strong>localhost/ci/about</strong></p>

<p>I have already changed <code>$config['index_page'] = 'index.php';</code> to <code>$config['index_page'] = '';</code> AND I tried changing <code>$config['uri_protocol']    = 'AUTO';</code> to <code>$config['uri_protocol']  = 'REQUEST_URI';</code> but I am still getting the Internal Server Error.</p>

<p>I went into the httpd.conf file and uncommented the mod_rewrite.so module so I know mod_rewrite is active.</p>

<p>Does anyone have any ideas why this isn't working or how I can get this work? I know there are alot of questions on StackOverflow on this subject but I couldn't find one that answered my question. </p>

<p>Am I doing this right? Should I even be able to access the about page by visiting <strong>localhost/ci/about</strong> or do I have to create an 'about' directory in the 'application' directory?</p>
","<p>There are 3 steps to remove <code>index.php</code>.</p>

<ol>
<li><p>Make below changes in <code>application/config.php</code> file</p>

<pre><code>$config['base_url'] = 'http://'.$_SERVER['SERVER_NAME'].'/Your Ci folder_name';
$config['index_page'] = '';
$config['uri_protocol'] = 'AUTO';
</code></pre></li>
<li><p>Make <code>.htaccess</code> file in your root directory using below code</p>

<pre><code>RewriteEngine on
RewriteCond $1 !^(index\.php|resources|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA]
</code></pre></li>
<li><p>Enable the rewrite engine (if not already enabled) </p>

<p><strong>i.</strong> First, initiate it with the following command:</p>

<pre><code>a2enmod rewrite
</code></pre>

<p><strong>ii.</strong> Edit the file <code>/etc/apache2/sites-enabled/000-default</code></p>

<p>Change all <code>AllowOverride None</code> to <code>AllowOverride All</code>.</p>

<p>Note: In latest version you need to change in <code>/etc/apache2/apache2.conf</code> file</p>

<p><strong>iii.</strong> Restart your server with the following command:</p>

<pre><code>sudo /etc/init.d/apache2 restart
</code></pre></li>
</ol>
","14807463"
"Best way to test for a variable's existence in PHP; isset() is clearly broken","133647","","<p>From the <a href=""http://php.net/isset"" rel=""noreferrer""><code>isset()</code> docs</a>:</p>

<pre><code>isset() will return FALSE if testing a variable that has been set to NULL.
</code></pre>

<p>Basically, <code>isset()</code> doesn't check for whether the variable is set at all, but whether it's set to anything but <code>NULL</code>.</p>

<p>Given that, what's the best way to actually check for the existence of a variable?  I tried something like:</p>

<pre><code>if(isset($v) || @is_null($v))
</code></pre>

<p>(the <code>@</code> is necessary to avoid the warning when <code>$v</code> is not set) but <code>is_null()</code> has a similar problem to <code>isset()</code>: it returns <code>TRUE</code> on unset variables!  It also appears that:</p>

<pre><code>@($v === NULL)
</code></pre>

<p>works exactly like <code>@is_null($v)</code>, so that's out, too.</p>

<p>How are we supposed to reliably check for the existence of a variable in PHP?</p>

<hr>

<p>Edit: there is clearly a difference in PHP between variables that are not set, and variables that are set to <code>NULL</code>:</p>

<pre><code>&lt;?php
$a = array('b' =&gt; NULL);
var_dump($a);
</code></pre>

<p>PHP shows that <code>$a['b']</code> exists, and has a <code>NULL</code> value.  If you add:</p>

<pre><code>var_dump(isset($a['b']));
var_dump(isset($a['c']));
</code></pre>

<p>you can see the ambiguity I'm talking about with the <code>isset()</code> function.  Here's the output of all three of these <code>var_dump()s</code>:</p>

<pre><code>array(1) {
  [""b""]=&gt;
  NULL
}
bool(false)
bool(false)
</code></pre>

<hr>

<p>Further edit: two things.</p>

<p>One, a use case.  An array being turned into the data of an SQL <code>UPDATE</code> statement, where the array's keys are the table's columns, and the array's values are the values to be applied to each column.  Any of the table's columns can hold a <code>NULL</code> value, signified by passing a <code>NULL</code> value in the array.  You <em>need</em> a way to differentiate between an array key not existing, and an array's value being set to <code>NULL</code>; that's the difference between not updating the column's value and updating the column's value to <code>NULL</code>.</p>

<p>Second, <a href=""https://stackoverflow.com/questions/418066/best-way-to-test-for-a-variables-existence-in-php-isset-is-clearly-broken#418162"">Zoredache's answer</a>, <code>array_key_exists()</code> works correctly, for my above use case and for any global variables:</p>

<pre><code>&lt;?php
$a = NULL;
var_dump(array_key_exists('a', $GLOBALS));
var_dump(array_key_exists('b', $GLOBALS));
</code></pre>

<p>outputs:</p>

<pre><code>bool(true)
bool(false)
</code></pre>

<p>Since that properly handles just about everywhere I can see there being any ambiguity between variables that don't exist and variables that are set to <code>NULL</code>, <strong>I'm calling <code>array_key_exists()</code> the official easiest way in PHP to truly check for the existence of a variable</strong>.</p>

<p>(Only other case I can think of is for class properties, for which there's <code>property_exists()</code>, which, according to <a href=""http://php.net/property_exists"" rel=""noreferrer"">its docs</a>, works similarly to <code>array_key_exists()</code> in that it properly distinguishes between not being set and being set to <code>NULL</code>.)</p>
","<p>If the variable you are checking would be in the global scope you could do:</p>

<pre><code>array_key_exists('v', $GLOBALS) 
</code></pre>
","418162"
"Asynchronous shell exec in PHP","133645","","<p>I've got a PHP script that needs to invoke a shell script but doesn't care at all about the output. The shell script makes a number of SOAP calls and is slow to complete, so I don't want to slow down the PHP request while it waits for a reply. In fact, the PHP request should be able to exit without terminating the shell process.</p>

<p>I've looked into the various <code>exec()</code>, <code>shell_exec()</code>, <code>pcntl_fork()</code>, etc. functions, but none of them seem to offer exactly what I want. (Or, if they do, it's not clear to me how.) Any suggestions?</p>
","<p>If it ""doesn't care about the output"", couldn't the exec to the script be called with the <code>&amp;</code> to background the process?</p>

<p><strong>EDIT</strong> - incorporating what @<a href=""https://stackoverflow.com/users/1103/adamthehutt"">AdamTheHut</a> commented to this post, you can add this to a call to <code>exec</code>:</p>

<pre><code>"" &gt; /dev/null 2&gt;/dev/null &amp;""
</code></pre>

<p>That will redirect both <code>stdio</code> (first <code>&gt;</code>) and <code>stderr</code> (<code>2&gt;</code>) to <code>/dev/null</code> and run in the background.</p>

<p>There are other ways to do the same thing, but this is the simplest to read.</p>

<hr>

<p>An alternative to the above double-redirect:</p>

<pre><code>"" &amp;&gt; /dev/null &amp;""
</code></pre>
","222445"
"How to validate an Email in PHP?","133644","","<p>How can I validate the input value is a valid email address using php5. Now I am using this code </p>

<pre><code>function isValidEmail($email){ 
     $pattern = ""^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$""; 

     if (eregi($pattern, $email)){ 
        return true; 
     } 
     else { 
        return false; 
     }    
} 
</code></pre>

<p>but it shows deprecated error. How can I fix this issue. Please help me.</p>
","<p>You can use the <code>filter_var()</code> function, which gives you a lot of handy validation and sanitization options.</p>

<pre><code>filter_var($email, FILTER_VALIDATE_EMAIL)
</code></pre>

<ul>
<li><p><a href=""http://php.net/manual/en/function.filter-var.php"" rel=""noreferrer"">PHP Manual filter_var()</a></p></li>
<li><p>Available in <strong>PHP >= 5.2.0</strong></p></li>
</ul>

<p>If you don't want to change your code that relied on your function, just do:</p>

<pre><code>function isValidEmail($email){ 
    return filter_var($email, FILTER_VALIDATE_EMAIL) !== false;
}
</code></pre>

<p><strong>Note</strong>: For other uses (where you need Regex), the deprecated <code>ereg</code> function family (POSIX Regex Functions) should be replaced by the <code>preg</code> family (<a href=""http://www.php.net/manual/en/ref.pcre.php"" rel=""noreferrer"">PCRE Regex Functions</a>). There are a small amount of differences, reading the Manual should suffice.</p>

<p><strong>Update 1</strong>: As pointed out by <a href=""https://stackoverflow.com/questions/5855811/how-to-validate-an-email-in-php/5855853#comment6729146_5855853"">@binaryLV</a>: </p>

<blockquote>
  <p>PHP 5.3.3 and 5.2.14 had a <a href=""http://bugs.php.net/52929"" rel=""noreferrer"">bug</a> related to
  FILTER_VALIDATE_EMAIL, which resulted in segfault when validating
  large values. Simple and safe workaround for this is using <code>strlen()</code>
  before <code>filter_var()</code>. I'm not sure about 5.3.4 final, but it is
  written that some 5.3.4-snapshot versions also were affected.</p>
</blockquote>

<p>This bug has already been fixed.</p>

<p><strong>Update 2</strong>: This method will of course validate <code>bazmega@kapa</code> as a valid email address, because in fact it is a valid email address. But most of the time on the Internet, you also want the email address to have a TLD: <code>bazmega@kapa.com</code>. As suggested in this <a href=""http://www.electrictoolbox.com/php-email-validation-filter-var-updated/"" rel=""noreferrer"">blog post</a> (link posted by <a href=""https://stackoverflow.com/questions/5855811/how-to-validate-an-email-in-php/5855853#comment18460128_5855853"">@Istiaque Ahmed</a>), you can augment <code>filter_var()</code> with a regex that will check for the existence of a dot in the domain part (will not check for a <em>valid</em> TLD though):</p>

<pre><code>function isValidEmail($email) {
    return filter_var($email, FILTER_VALIDATE_EMAIL) 
        &amp;&amp; preg_match('/@.+\./', $email);
}
</code></pre>

<p>As <a href=""https://stackoverflow.com/questions/5855811/how-to-validate-an-email-in-php/5855853#comment30608940_5855853"">@Eliseo Ocampos</a> pointed out, this problem only exists before PHP 5.3, <a href=""http://svn.php.net/viewvc/php/php-src/branches/PHP_5_3/ext/filter/logical_filters.c?r1=297250&amp;r2=297350&amp;pathrev=303779"" rel=""noreferrer"">in that version they changed the regex</a> and now it does this check, so you do not have to.</p>
","5855853"
"How can I remove a key and its value from an associative array?","133595","","<p>Given an associative array:</p>

<pre><code>array(""key1"" =&gt; ""value1"", ""key2"" =&gt; ""value2"", ...)
</code></pre>

<p>How would I go about removing a certain key-value pair, given the key?</p>
","<p>You can use <a href=""http://php.net/manual/en/function.unset.php"" rel=""noreferrer""><code>unset</code></a>:</p>

<pre><code>unset($array['key-here']);
</code></pre>

<p><strong>Example:</strong></p>

<pre><code>$array = array(""key1"" =&gt; ""value1"", ""key2"" =&gt; ""value2"");
print_r($array);

unset($array['key1']);
print_r($array);

unset($array['key2']);
print_r($array);
</code></pre>

<p><strong>Output:</strong></p>

<pre><code>Array
(
    [key1] =&gt; value1
    [key2] =&gt; value2
)
Array
(
    [key2] =&gt; value2
)
Array
(
)
</code></pre>
","3053528"
"XAMPP Port 80 in use by ""Unable to open process"" with PID 4","133327","","<p>XAMPP won't work it says </p>

<pre><code>Port 80 in use by ""Unable to open process"" with PID 4!
6:32:24 PM  [Apache]    Apache WILL NOT start without the configured ports free!
6:32:24 PM  [Apache]    You need to uninstall/disable/reconfigure the blocking application
6:32:24 PM  [Apache]    or reconfigure Apache and the Control Panel to listen on a different port
</code></pre>

<p>I have tried everything from deleting the World Wide Web Publishing Service (which did not work because i dont even have it installed.) To using the command prompt which says</p>

<pre><code>Active Connections

  Proto  Local Address          Foreign Address        State           PID
  TCP    0.0.0.0:80             Dave:0                 LISTENING       4
  TCP    0.0.0.0:135            Dave:0                 LISTENING       776
  TCP    0.0.0.0:445            Dave:0                 LISTENING       4
  TCP    0.0.0.0:2382           Dave:0                 LISTENING       2576
  TCP    0.0.0.0:5357           Dave:0                 LISTENING       4
  TCP    0.0.0.0:49152          Dave:0                 LISTENING       548
  TCP    0.0.0.0:49153          Dave:0                 LISTENING       928
  TCP    0.0.0.0:49154          Dave:0                 LISTENING       972
  TCP    0.0.0.0:49155          Dave:0                 LISTENING       1264
  TCP    0.0.0.0:49156          Dave:0                 LISTENING       660
  TCP    0.0.0.0:49157          Dave:0                 LISTENING       1832
  TCP    0.0.0.0:49159          Dave:0                 LISTENING       652
  TCP    0.0.0.0:51782          Dave:0                 LISTENING       1884
  TCP    127.0.0.1:51783        Dave:0                 LISTENING       1884
  TCP    192.168.0.16:139       Dave:0                 LISTENING       4
  TCP    192.168.0.16:50260     stackoverflow:https    ESTABLISHED     5768
  TCP    192.168.0.16:50263     ec2-54-237-50-81:https  ESTABLISHED     5768
  TCP    192.168.0.16:50287     bn1wns1011221:https    ESTABLISHED     1640
  TCP    192.168.0.16:50456     bn1wns2011310:https    ESTABLISHED     1640
  TCP    192.168.0.16:50489     stackoverflow:http     ESTABLISHED     5768
</code></pre>

<p>I dont understand why its not working because it was working fine a couple days ago could someone help please, thanks.When i do netstat -a -b it says this.</p>

<pre><code>Microsoft Windows [Version 6.3.9600]
(c) 2013 Microsoft Corporation. All rights reserved.

C:\WINDOWS\system32&gt;netstat -a -b

Active Connections

  Proto  Local Address          Foreign Address        State
  TCP    0.0.0.0:80             Dave:0                 LISTENING
 Can not obtain ownership information
  TCP    0.0.0.0:82             Dave:0                 LISTENING
 [httpd.exe]
  TCP    0.0.0.0:135            Dave:0                 LISTENING
  RpcSs
 [svchost.exe]
  TCP    0.0.0.0:443            Dave:0                 LISTENING
 [httpd.exe]
  TCP    0.0.0.0:445            Dave:0                 LISTENING
 Can not obtain ownership information
  TCP    0.0.0.0:2382           Dave:0                 LISTENING
 [sqlbrowser.exe]
  TCP    0.0.0.0:3306           Dave:0                 LISTENING
 [mysqld.exe]
  TCP    0.0.0.0:3306           Dave:0                 LISTENING
 [mysqld.exe]
  TCP    0.0.0.0:5357           Dave:0                 LISTENING
 Can not obtain ownership information
  TCP    0.0.0.0:49152          Dave:0                 LISTENING
 [wininit.exe]
  TCP    0.0.0.0:49153          Dave:0                 LISTENING
  EventLog
 [svchost.exe]
  TCP    0.0.0.0:49154          Dave:0                 LISTENING
  Schedule
 [svchost.exe]
  TCP    0.0.0.0:49155          Dave:0                 LISTENING
 [spoolsv.exe]
  TCP    0.0.0.0:49156          Dave:0                 LISTENING
 [lsass.exe]
  TCP    0.0.0.0:49157          Dave:0                 LISTENING
 [msmdsrv.exe]
  TCP    0.0.0.0:49159          Dave:0                 LISTENING
 Can not obtain ownership information
  TCP    0.0.0.0:51782          Dave:0                 LISTENING
 [sqlservr.exe]
  TCP    127.0.0.1:51783        Dave:0                 LISTENING
 [sqlservr.exe]
  TCP    192.168.0.16:139       Dave:0                 LISTENING
 Can not obtain ownership information
  TCP    192.168.0.16:49180     bn1wns2011302:https    ESTABLISHED
 [Explorer.EXE]
  TCP    192.168.0.16:49267     ec2-54-80-62-105:https  ESTABLISHED
 [opera.exe]
  TCP    192.168.0.16:49318     bn1wns2011304:https    ESTABLISHED
 [Explorer.EXE]
  TCP    192.168.0.16:49397     ord08s08-in-f14:http   ESTABLISHED
 [opera.exe]
  TCP    192.168.0.16:49417     ord08s08-in-f14:http   ESTABLISHED
 [opera.exe]
  TCP    192.168.0.16:49418     ord08s09-in-f5:http    ESTABLISHED
 [opera.exe]
  TCP    192.168.0.16:49427     static-acs-24-101-16-41:http  TIME_WAIT
  TCP    192.168.0.16:49428     static-acs-24-101-16-24:http  TIME_WAIT
  TCP    192.168.0.16:49429     static-acs-24-101-16-41:http  TIME_WAIT
  TCP    192.168.0.16:49430     static-acs-24-101-16-41:http  TIME_WAIT
  TCP    192.168.0.16:49431     static-acs-24-101-16-41:http  TIME_WAIT
  TCP    192.168.0.16:49432     ord08s08-in-f2:http    ESTABLISHED
 [opera.exe]
  TCP    192.168.0.16:49434     ord08s08-in-f5:http    ESTABLISHED
 [opera.exe]
  TCP    192.168.0.16:49435     ord08s08-in-f5:http    ESTABLISHED
 [opera.exe]
  TCP    192.168.0.16:49436     ord08s08-in-f5:http    ESTABLISHED
 [opera.exe]
  TCP    192.168.0.16:49437     ord08s08-in-f5:http    ESTABLISHED
 [opera.exe]
  TCP    192.168.0.16:49438     ord08s08-in-f5:http    ESTABLISHED
 [opera.exe]
</code></pre>
","<p>Simply set Apache to listen on a different port. This can be done by clicking on the ""Config"" button on the same line as the ""Apache"" module, select the ""httpd.conf"" file in the dropdown, then change the ""Listen 80"" line to ""Listen 8080"". Save the file and close it.</p>

<p>Now it avoids Port 80 and uses Port 8080 instead without issue. The only additional thing you need to do is make sure to put localhost:8080 in the browser so the browser knows to look on Port 8080. Otherwise it defaults to Port 80 and won't find your local site.</p>
","24423669"
"Apache 2.4.6 on Ubuntu Server: Client denied by server configuration (PHP FPM) [While loading PHP file]","133306","","<p>Today I was updated <a href=""http://en.wikipedia.org/wiki/List_of_Ubuntu_releases#Ubuntu_13.04_.28Raring_Ringtail.29"" rel=""noreferrer"">Ubuntu server 13.04</a> (Raring Ringtail) → <a href=""https://en.wikipedia.org/wiki/List_of_Ubuntu_releases#Ubuntu_13.10_.28Saucy_Salamander.29"" rel=""noreferrer"">13.10</a> (Saucy Salamander).</p>

<p>And my Apache 2 installation is broken.</p>

<p>Here my configuration:</p>

<h3>File <code>error.log</code></h3>

<pre><code>[Fri Oct 18 10:48:07.237170 2013] [:notice] [pid 8292:tid 139804677900160] FastCGI: process manager initialized (pid 8292)
[Fri Oct 18 10:48:07.241185 2013] [mpm_event:notice] [pid 8289:tid 139804677900160] AH00489: Apache/2.4.6 (Ubuntu) mod_fastcgi/mod_fastcgi-SNAP-0910052141 configured -- resuming normal operations
[Fri Oct 18 10:48:07.241652 2013] [core:notice] [pid 8289:tid 139804677900160] AH00094: Command line: '/usr/sbin/apache2'
[Fri Oct 18 10:48:28.313923 2013] [authz_core:error] [pid 8294:tid 139804573181696]   [client 81.219.59.75:3536] AH01630: client denied by server configuration: /usr/lib/cgi-bin/php5-fcgi
</code></pre>

<h3>File <code>default.conf</code></h3>

<pre><code>#EU
&lt;VirtualHost *:80&gt;
    #ServerName
    DocumentRoot /var/www/dev_stable

    DirectoryIndex index.php index.html index.htm

    &lt;Directory /var/www/dev_stable&gt;
          Options Indexes FollowSymLinks MultiViews

          AllowOverride all
          Require all granted
    &lt;/Directory&gt;
&lt;/VirtualHost&gt;
</code></pre>

<h3>File <code>mods-enabled/fastcgi.conf</code></h3>

<pre><code>#&lt;IfModule mod_fastcgi.c&gt;
#  AddHandler fastcgi-script .fcgi
# FastCgiWrapper /usr/lib/apache2/suexec
#  FastCgiIpcDir /var/lib/apache2/fastcgi
#&lt;/IfModule&gt;


&lt;IfModule mod_fastcgi.c&gt;
    AddHandler php5-fcgi .php
    Action php5-fcgi /php5-fcgi
    Alias /php5-fcgi /usr/lib/cgi-bin/php5-fcgi
    FastCgiExternalServer /usr/lib/cgi-bin/php5-fcgi -socket /var/run/php5-fpm.sock -pass-header Authorization
&lt;/Ifmodule&gt;
</code></pre>

<p>When I trying to load the file via the browser I got:</p>

<pre><code>site_name/TEST/

Forbidden

You don't have permission to access /php5-fcgi/TEST/index.php on this server.
</code></pre>

<p>What should I to fix it?</p>
","<p>I have exactly the same issue. I ran a couple of virtual hosts on my local machine for developing.</p>

<p>First, I changed <code>/etc/apache2/conf-available/php5-fpm.conf</code>. I replaced every</p>

<pre><code>Order Deny,Allow
Deny from all
</code></pre>

<p>to</p>

<pre><code>Require all granted
</code></pre>

<p>The configuration has to be enabled by <code>a2enconf php5-fpm</code>. I did the same with my virtual hosts configurations and made the replacements.</p>

<p>I think this is not advised for security reasons, but as long as I use my server for local purposes only I can live with it.</p>
","19451954"
"When should I use Memcache instead of Memcached?","133300","","<p>It seems that PHP has two memcached libraries named <a href=""http://us3.php.net/manual/en/book.memcache.php"" rel=""noreferrer"">memcache</a> and <a href=""http://us3.php.net/manual/en/book.memcached.php"" rel=""noreferrer"">memcached</a>. What is the difference and how do you know which one to use? Is one outdated? It seems that memcached offers more methods so I would assume that means it has had the most development - but it also seems to require <a href=""http://tangent.org/552/libmemcached.html"" rel=""noreferrer"">external C/C++ libraries</a> so I'm not sure if I can install it.</p>

<p>It seems that memcache has been around longer, does not require additional libraries, and has <a href=""http://downloads.php.net/pierre/"" rel=""noreferrer"">pre-compiled binaries</a> for even windows! I would think that it would be the better choice for now. However, being new to memcached (server) I'm not sure if there is some super important features in memcached (php) that make it worth the extra trouble.</p>
","<p><a href=""http://www.php.net/manual/en/book.memcached.php"" rel=""noreferrer"">Memcached client</a> library was just recently released as stable. It is being used by <strong>digg</strong> ( was developed for digg by Andrei Zmievski, now no longer with digg) and implements much more of the <a href=""http://code.sixapart.com/svn/memcached/trunk/server/doc/protocol.txt"" rel=""noreferrer"">memcached protocol</a> than the older memcache client. The most important features that memcached has are:</p>

<ol>
<li><a href=""http://www.php.net/manual/en/memcached.cas.php"" rel=""noreferrer"">Cas tokens</a>. This made my life much easier and is an easy preventive system for stale data. Whenever you pull something from the cache, you can receive with it a cas token (a double number). You can than use that token to save your updated object. If no one else updated the value while your thread was running, the swap will succeed. Otherwise a newer cas token was created and you are forced to reload the data and save it again with the new token.</li>
<li>Read through <a href=""http://www.php.net/manual/en/memcached.callbacks.php"" rel=""noreferrer"">callbacks</a> are the best thing since sliced bread. It has simplified much of my code.</li>
<li><a href=""http://www.php.net/manual/en/memcached.getdelayed.php"" rel=""noreferrer"">getDelayed()</a> is a nice feature that can reduce the time your script has to wait for the results to come back from the server.</li>
<li>While the memcached server is supposed to be very stable, it is not the fastest. You can use binary protocol instead of ASCII with the newer client.</li>
<li>Whenever you save complex data into memcached the client used to always do serialization of the value (which is slow), but now with memcached client you have the option of using <a href=""http://github.com/phadej/igbinary"" rel=""noreferrer"">igbinary</a>. So far I haven't had the chance to test how much of a performance gain this can be.</li>
</ol>

<p>All of this points were enough for me to switch to the newest client, and can tell you that it works like a charm. There is that external dependency on the <a href=""http://tangent.org/552/libmemcached.html"" rel=""noreferrer"">libmemcached</a> library, but have managed to install it nonetheless on Ubuntu and Mac OSX, so no problems there so far.</p>

<p>If you decide to update to the newer library, I suggest you update to the latest server version as well as it has some nice features as well. You will need to install <a href=""http://www.monkey.org/~provos/libevent/"" rel=""noreferrer"">libevent</a> for it to compile, but on Ubuntu it wasn't much trouble.</p>

<p>I haven't seen any frameworks pick up the new memcached client thus far (although I don't keep track of them), but I presume <a href=""http://framework.zend.com/"" rel=""noreferrer"">Zend</a> will get on board shortly.</p>

<h2>UPDATE</h2>

<p>Zend Framework 2 has an adapter for Memcached which can be found <a href=""http://framework.zend.com/manual/current/en/modules/zend.cache.storage.adapter.html#the-memcached-adapter"" rel=""noreferrer"">here</a></p>
","1442747"
"logout and redirecting session in php","133176","","<p>the below one is the link in my php site.. after clicking this button the user's session should be terminated and he should be redirected again to the home page.. i have written the coding for this concept as follows but it shows me only a blank page(it is not redirected to the home page).. 
please correct my codings</p>

<pre><code>&lt;a href=""Logout.php""&gt;
click here to log out&lt;/a&gt;
</code></pre>

<p>codings in the Logout.php a follows</p>

<pre><code>&lt;?
session_start();
session_unset();
session_destroy();
ob_start();
header(""location:home.php"");
ob_end_flush(); 
include 'home.php';
//include 'home.php';
exit();
?&gt;
</code></pre>
","<p>Only this is necessary</p>

<pre><code>session_start();
unset($_SESSION[""nome""]);  // where $_SESSION[""nome""] is your own variable. if you do not have one use only this as follow **session_unset();**
header(""Location: home.php"");
</code></pre>
","4608224"
"php Replacing multiple spaces with a single space","133008","","<p>I'm trying to replace multiple spaces with a single space. When I use <code>ereg_replace</code>, I get an error about it being deprecated.</p>

<pre><code>ereg_replace(""[ \t\n\r]+"", "" "", $string);
</code></pre>

<p>Is there an identical replacement for it. I need to replace multiple <code>"" ""</code> white spaces and multiple <code>nbsp</code> white spaces with a single white space.</p>
","<p>Use <a href=""http://php.net/manual/en/function.preg-replace.php"" rel=""noreferrer""><code>preg_replace()</code></a> and instead of <code>[ \t\n\r]</code> use <code>\s</code>:</p>

<pre><code>$output = preg_replace('!\s+!', ' ', $input);
</code></pre>

<p>From <a href=""http://www.regular-expressions.info/reference.html"" rel=""noreferrer"">Regular Expression Basic Syntax Reference</a>:</p>

<blockquote>
  <p>\d, \w and \s</p>
  
  <p>Shorthand character classes matching
  digits, word characters (letters,
  digits, and underscores), and
  whitespace (spaces, tabs, and line
  breaks). Can be used inside and
  outside character classes.</p>
</blockquote>
","2368546"
"How to get ID of the last updated row in MySQL?","132938","","<p>How do I get the ID of the last updated row in MySQL using PHP?</p>
","<p>I've found an answer to this problem :)</p>

<pre><code>SET @update_id := 0;
UPDATE some_table SET column_name = 'value', id = (SELECT @update_id := id)
WHERE some_other_column = 'blah' LIMIT 1; 
SELECT @update_id;
</code></pre>

<p><strong>EDIT</strong> by aefxx</p>

<p>This technique can be further expanded to retrieve the ID of every row affected by an update statement:</p>

<pre><code>SET @uids := null;
UPDATE footable
   SET foo = 'bar'
 WHERE fooid &gt; 5
   AND ( SELECT @uids := CONCAT_WS(',', fooid, @uids) );
SELECT @uids;
</code></pre>

<p>This will return a string with all the IDs concatenated by a colon.</p>
","1751282"
"PHP - regex to allow letters and numbers only","132918","","<p>I have tried:</p>

<pre><code>preg_match(""/^[a-zA-Z0-9]"", $value)
</code></pre>

<p>but im doing something wrong i guess.</p>
","<h2>1. Use PHP's inbuilt <a href=""http://php.net/manual/en/function.ctype-alnum.php"">ctype_alnum</a></h2>

<p>You dont need to use a regex for this, PHP has an inbuilt function <code>ctype_alnum</code> which will do this for you, and execute faster:</p>

<pre><code>&lt;?php
$strings = array('AbCd1zyZ9', 'foo!#$bar');
foreach ($strings as $testcase) {
    if (ctype_alnum($testcase)) {
        echo ""The string $testcase consists of all letters or digits.\n"";
    } else {
        echo ""The string $testcase does not consist of all letters or digits.\n"";
    }
}
?&gt;
</code></pre>

<h2>2. Alternatively, use a regex</h2>

<p>If you desperately want to use a regex, you have a few options.</p>

<p>Firstly:</p>

<pre><code>preg_match('/^[\w]+$/', $string);
</code></pre>

<p><code>\w</code> includes more than alphanumeric (it includes underscore), but includes all
of <code>\d</code>.</p>

<p>Alternatively:</p>

<pre><code>/^[a-zA-Z\d]+$/
</code></pre>

<p>Or even just:</p>

<pre><code>/^[^\W_]+$/
</code></pre>
","4345650"
"Fatal error: Call to undefined function mcrypt_encrypt()","132846","","<p><strong>NOTE:</strong> The libraries MCrypt support depend on have not been updated in years and MCrypt should no longer be considered a viable or secure method of encrypting data.  What's more, MCrypt has been deprecated in PHP 5, and removed entirely in PHP 7.  If you have any code that runs MCrypt you should refactor it to use a more modern encryption library.  </p>

<hr>

<p>Does anyone know why this error message: <code>(Call to undefined function mcrypt_encrypt() )</code> displays when I run the following code below?</p>

<p>Am I missing some steps perhaps any setting in PHP I have to do before this code can work?</p>

<pre class=""lang-php prettyprint-override""><code>$key = 'password to (en/de)crypt';
$string = 'string to be encrypted';

$test = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, md5($key),
            $string, MCRYPT_MODE_CBC, md5(md5($key)));
</code></pre>
","<p>What had worked for me with PHP version 5.2.8, was to open up <code>php.ini</code> and allow the <code>php_mcrypt.dll</code> extension by removing the <code>;</code>, i.e. changing:</p>

<p><code>;extension=php_mcrypt.dll</code>  to <code>extension=php_mcrypt.dll</code></p>
","2604474"
"'AND' vs '&&' as operator","132822","","<p>I have a codebase where developers decided to use <code>AND</code> and <code>OR</code> instead of <code>&amp;&amp;</code> and <code>||</code>.</p>

<p>I know that there is a difference in operators' precedence (<code>&amp;&amp;</code> goes before <code>and</code>), but with the given framework (<a href=""https://en.wikipedia.org/wiki/PrestaShop"" rel=""noreferrer"">PrestaShop</a> to be precise) it is clearly not a reason.</p>

<p>Which version are you using? Is <code>and</code> more readable than <code>&amp;&amp;</code>? Or is there no difference?</p>
","<p>If you use <code>AND</code> and <code>OR</code>, you'll eventually get tripped up by something like this:</p>

<pre><code>$this = true;
$that = false;

$truthiness = $this and $that;
</code></pre>

<p>Want to guess what <code>$truthiness</code> equals?</p>

<p>If you said <code>false</code>... bzzzt, sorry, wrong!</p>

<p><code>$truthiness</code> above has the value <code>true</code>.  Why?  <code>=</code> has a <a href=""http://www.php.net/manual/en/language.operators.precedence.php"" rel=""noreferrer"">higher precedence</a> than <code>and</code>. The addition of parentheses to show the implicit order makes this clearer:</p>

<pre><code>($truthiness = $this) and $that
</code></pre>

<p>If you used <code>&amp;&amp;</code> instead of <code>and</code> in the first code example, it would work as expected and be <code>false</code>.</p>

<p>As discussed in the comments below, this also works to get the correct value, as parentheses have higher precedence than <code>=</code>:</p>

<pre><code>$truthiness = ($this and $that)
</code></pre>
","2803576"
"Passing a variable from one php include file to another: global vs. not","132685","","<p>I'm trying to pass a variable from one include file to another. This is NOT working unless I declare the variable as global in the second include file. However, I do NOT need to declare it as global in the file that is calling the first include. For example:</p>

<hr>

<p>front.inc:</p>

<pre><code>$name = 'james';
</code></pre>

<hr>

<p>index.php:</p>

<pre><code>include('front.inc');
echo $name;
include('end.inc');
</code></pre>

<p>output: james</p>

<hr>

<p>end.inc:</p>

<pre><code>echo $name;
</code></pre>

<p>output: nothing</p>

<hr>

<p>IF I declare global $name prior to echoing $name in end.inc, then it works properly. The accepted answer to this post explains that this depends on your server configuration: <a href=""https://stackoverflow.com/questions/4572062/passing-variables-in-php-from-one-file-to-another"">Passing variables in PHP from one file to another</a></p>

<p>I'm using an Apache server. How would I configure it so that declaring $name to be global is not necessary? Are there advantages/disadvantages to one vs. the other?</p>
","<p>When including files in PHP, it acts like the code exists within the file they are being included from. Imagine copy and pasting the code from within each of your included files directly into your <code>index.php</code>. That is how PHP works with includes.</p>

<p>So, in your example, since you've set a variable called <code>$name</code> in your <code>front.inc</code> file, and then included both <code>front.inc</code> and <code>end.inc</code> in your <code>index.php</code>, you will be able to <code>echo</code> the variable <code>$name</code> anywhere after the <code>include</code> of <code>front.inc</code> within your <code>index.php</code>. Again, PHP processes your <code>index.php</code> as if the code from the two files you are including are <strong>part</strong> of the file.</p>

<p>When you place an <code>echo</code> within an included file, to a variable that is not defined within itself, you're not going to get a result because it is treated separately then any other included file.</p>

<p>In other words, to do the behavior you're expecting, you will need to define it as a global.</p>
","4676007"
"Login to remote site with PHP cURL","132506","","<p>I'm new to using cURL and its hard to find good resources for it.
What I'm trying to do is login to a remote site, by having curl do the login form and then send back that it was successful.</p>

<p>The code I have doesn't seem to work and only tries to show the main page of the site.</p>

<pre><code>    $username=""mylogin@gmail.com""; 
$password=""mypassword""; 
$url=""http://www.myremotesite.com/index.php?page=login""; 
$cookie=""cookie.txt""; 

$postdata = ""email="".$username.""&amp;password="".$password; 

$ch = curl_init(); 
curl_setopt ($ch, CURLOPT_URL, $url); 
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
curl_setopt ($ch, CURLOPT_USERAGENT, ""Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6""); 
curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 0); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookie); 
curl_setopt ($ch, CURLOPT_REFERER, $url); 

curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata); 
curl_setopt ($ch, CURLOPT_POST, 1); 
$result = curl_exec ($ch); 

echo $result;  
curl_close($ch);
</code></pre>

<p>What am I doing wrong. After this is working I want to redirect to another page and get content from my site.</p>
","<p>I had let this go for a good while but revisited it later. Since this question is viewed regularly. This is eventually what I ended up using that worked for me. </p>

<pre><code>//username and password of account
$username = trim($values[""email""]);
$password = trim($values[""password""]);

//set the directory for the cookie using defined document root var
$dir = DOC_ROOT.""/ctemp"";
//build a unique path with every request to store 
//the info per user with custom func. 
$path = build_unique_path($dir);

//login form action url
$url=""https://www.site.com/login/action""; 
$postinfo = ""email="".$username.""&amp;password="".$password;

$cookie_file_path = $path.""/cookie.txt"";

$ch = curl_init();
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_NOBODY, false);
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);

curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file_path);
//set the cookie the site has for certain features, this is optional
curl_setopt($ch, CURLOPT_COOKIE, ""cookiename=0"");
curl_setopt($ch, CURLOPT_USERAGENT,
    ""Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.7.12) Gecko/20050915 Firefox/1.0.7"");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_REFERER, $_SERVER['REQUEST_URI']);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 0);

curl_setopt($ch, CURLOPT_CUSTOMREQUEST, ""POST"");
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postinfo);
curl_exec($ch);

//page with the content I want to grab
curl_setopt($ch, CURLOPT_URL, ""http://www.site.com/page/"");
//do stuff with the info with DomDocument() etc
$html = curl_exec($ch);
curl_close($ch);
</code></pre>
","21170579"
"How to encrypt/decrypt data in php?","132475","","<p>I'm currently a student and I'm studying PHP, I'm trying to make a simple encrypt/decrypt of data in PHP. I made some online research and some of them were quite confusing(at least for me).</p>

<p>Here's what I'm trying to do:</p>

<p>I have a table consisting of these fields <strong>(UserID,Fname,Lname,Email,Password)</strong></p>

<p>What I want to have is have the all fields encrypted and then be decrypted(Is it possible to use <code>sha256</code> for encryption/decryption, if not any encryption algorithm)</p>

<p>Another thing I want to learn is how to create a one way <code>hash(sha256)</code> combined with a good ""salt"".
(Basically I just want to have a simple implementation of encryption/decryption, <code>hash(sha256)+salt)
</code>
Sir/Ma'am, your answers would be of great help and be very much appreciated. Thank you++</p>
","<h1>Foreword</h1>

<p>Starting with your table definition:</p>

<pre><code>- UserID
- Fname
- Lname
- Email
- Password
- IV
</code></pre>

<p>Here are the changes:</p>

<ol>
<li>The fields <code>Fname</code>, <code>Lname</code> and <code>Email</code> will be encrypted using a symmetric cipher, provided by <a href=""http://php.net/openssl"">OpenSSL</a>,</li>
<li>The <code>IV</code> field will store the <a href=""http://en.wikipedia.org/wiki/Initialization_vector"">initialisation vector</a> used for encryption. The storage requirements depend on the cipher and mode used; more about this later.</li>
<li>The <code>Password</code> field will be hashed using a <em>one-way</em> password hash,</li>
</ol>

<h1>Encryption</h1>

<p><strong>Cipher and mode</strong></p>

<p>Choosing the best encryption cipher and mode is beyond the scope of this answer, but the final choice affects the size of both the encryption key and initialisation vector; for this post we will be using AES-256-CBC which has a fixed block size of 16 bytes and a key size of either 16, 24 or 32 bytes.</p>

<p><strong>Encryption key</strong></p>

<p>A good encryption key is a binary blob that's generated from a reliable random number generator. The following example would be recommended (>= 5.3):</p>

<pre><code>$key_size = 32; // 256 bits
$encryption_key = openssl_random_pseudo_bytes($key_size, $strong);
// $strong will be true if the key is crypto safe
</code></pre>

<p>This can be done once or multiple times (if you wish to create a chain of encryption keys). Keep these as private as possible.</p>

<p><strong>IV</strong></p>

<p>The initialisation vector adds randomness to the encryption and required for CBC mode. These values should be ideally be used only once (technically once per encryption key), so an update to any part of a row should regenerate it.</p>

<p>A function is provided to help you generate the IV:</p>

<pre><code>$iv_size = 16; // 128 bits
$iv = openssl_random_pseudo_bytes($iv_size, $strong);
</code></pre>

<h3>Example</h3>

<p>Let's encrypt the name field, using the earlier <code>$encryption_key</code> and <code>$iv</code>; to do this, we have to pad our data to the block size:</p>

<pre><code>function pkcs7_pad($data, $size)
{
    $length = $size - strlen($data) % $size;
    return $data . str_repeat(chr($length), $length);
}

$name = 'Jack';
$enc_name = openssl_encrypt(
    pkcs7_pad($name, 16), // padded data
    'AES-256-CBC',        // cipher and mode
    $encryption_key,      // secret key
    0,                    // options (not used)
    $iv                   // initialisation vector
);
</code></pre>

<h3>Storage requirements</h3>

<p>The encrypted output, like the IV, is binary; storing these values in a database can be accomplished by using designated column types such as <code>BINARY</code> or <code>VARBINARY</code>.</p>

<p>The output value, like the IV, is binary; to store those values in MySQL, consider using <a href=""http://dev.mysql.com/doc/refman/5.0/en/binary-varbinary.html""><code>BINARY</code> or <code>VARBINARY</code></a> columns. If this is not an option, you can also convert the binary data into a textual representation using <a href=""http://php.net/base64_encode""><code>base64_encode()</code></a> or <a href=""http://php.net/bin2hex""><code>bin2hex()</code></a>, doing so requires between 33% to 100% more storage space.</p>

<h1>Decryption</h1>

<p>Decryption of the stored values is similar:</p>

<pre><code>function pkcs7_unpad($data)
{
    return substr($data, 0, -ord($data[strlen($data) - 1]));
}

$row = $result-&gt;fetch(PDO::FETCH_ASSOC); // read from database result
// $enc_name = base64_decode($row['Name']);
// $enc_name = hex2bin($row['Name']);
$enc_name = $row['Name'];
// $iv = base64_decode($row['IV']);
// $iv = hex2bin($row['IV']);
$iv = $row['IV'];

$name = pkcs7_unpad(openssl_decrypt(
    $enc_name,
    'AES-256-CBC',
    $encryption_key,
    0,
    $iv
));
</code></pre>

<h1>Authenticated encryption</h1>

<p>You can further improve the integrity of the generated cipher text by appending a signature that's generated from a secret key (different from the encryption key) and the cipher text. Before the cipher text is decrypted, the signature is first verified (preferably with a constant-time comparison method).</p>

<h3>Example</h3>

<pre><code>// generate once, keep safe
$auth_key = openssl_random_pseudo_bytes(32, $strong);

// authentication
$auth = hash_hmac('sha256', $enc_name, $auth_key, true);
$auth_enc_name = $auth . $enc_name;

// verification
$auth = substr($auth_enc_name, 0, 32);
$enc_name = substr($auth_enc_name, 32);
$actual_auth = hash_hmac('sha256', $enc_name, $auth_key, true);

if (hash_equals($auth, $actual_auth)) {
    // perform decryption
}
</code></pre>

<p>See also: <a href=""http://php.net/hash_equals""><code>hash_equals()</code></a></p>

<h1>Hashing</h1>

<p>Storing a reversible password in your database must be avoided as much as possible; you only wish to verify the password rather than knowing its contents. If a user loses their password, it's better to allow them to reset it rather than sending them their original one (make sure that password reset can only be done for a limited time).</p>

<p>Applying a hash function is a one-way operation; afterwards it can be safely used for verification without revealing the original data; for passwords, a brute force method is a feasible approach to uncover it due to its relatively short length and poor password choices of many people.</p>

<p>Hashing algorithms such as MD5 or SHA1 were made to verify file contents against a known hash value. They're greatly optimized to make this verification as fast as possible while still being accurate. Given their relatively limited output space it was easy to build a database with known passwords and their respective hash outputs, the rainbow tables.</p>

<p>Adding a salt to the password before hashing it would render a rainbow table useless, but recent hardware advancements made brute force lookups a viable approach. That's why you need a hashing algorithm that's deliberately slow and simply impossible to optimize. It should also be able to increase the load for faster hardware without affecting the ability to verify existing password hashes to make it future proof.</p>

<p>Currently there are two popular choices available:</p>

<ol>
<li>PBKDF2 (Password Based Key Derivation Function v2)</li>
<li>bcrypt (aka Blowfish)</li>
</ol>

<p>This answer will use an example with bcrypt.</p>

<p><strong>Generation</strong></p>

<p>A password hash can be generated like this:</p>

<pre><code>$password = 'my password';
$random = openssl_random_pseudo_bytes(18);
$salt = sprintf('$2y$%02d$%s',
    13, // 2^n cost factor
    substr(strtr(base64_encode($random), '+', '.'), 0, 22)
);

$hash = crypt($password, $salt);
</code></pre>

<p>The salt is generated with <a href=""http://php.net/openssl_random_pseudo_bytes""><code>openssl_random_pseudo_bytes()</code></a> to form a random blob of data which is then run through <code>base64_encode()</code> and <code>strtr()</code> to match the required alphabet of <code>[A-Za-z0-9/.]</code>.</p>

<p>The <a href=""http://php.net/crypt""><code>crypt()</code></a> function performs the hashing based on the algorithm (<code>$2y$</code> for Blowfish), the cost factor (a factor of 13 takes roughly 0.40s on a 3GHz machine) and the salt of 22 characters.</p>

<p><strong>Validation</strong></p>

<p>Once you have fetched the row containing the user information, you validate the password in this manner:</p>

<pre><code>$given_password = $_POST['password']; // the submitted password
$db_hash = $row['Password']; // field with the password hash

$given_hash = crypt($given_password, $db_hash);

if (isEqual($given_hash, $db_hash)) {
    // user password verified
}

// constant time string compare
function isEqual($str1, $str2)
{
    $n1 = strlen($str1);
    if (strlen($str2) != $n1) {
        return false;
    }
    for ($i = 0, $diff = 0; $i != $n1; ++$i) {
        $diff |= ord($str1[$i]) ^ ord($str2[$i]);
    }
    return !$diff;
}
</code></pre>

<p>To verify a password, you call <code>crypt()</code> again but you pass the previously calculated hash as the salt value. The return value yields the same hash if the given password matches the hash. To verify the hash, it's often recommended to use a constant-time comparison function to avoid timing attacks.</p>

<p><strong>Password hashing with PHP 5.5</strong></p>

<p>PHP 5.5 introduced the <a href=""http://www.php.net/manual/en/ref.password.php"">password hashing functions</a> that you can use to simplify the above method of hashing:</p>

<pre><code>$hash = password_hash($password, PASSWORD_BCRYPT, ['cost' =&gt; 13]);
</code></pre>

<p>And verifying:</p>

<pre><code>if (password_verify($given_password, $db_hash)) {
    // password valid
}
</code></pre>

<p>See also: <a href=""http://php.net/password_hash""><code>password_hash()</code></a>, <a href=""http://php.net/password_verify""><code>password_verify()</code></a></p>
","10945097"
"Current user in Magento?","132411","","<p>I'm customizing the product view page and I need to show the user's name.
How do I access the account information of the current user (if he's logged in) to get Name etc. ?</p>
","<p>Found under ""app/code/core/Mage/Page/Block/Html/Header.php"":</p>

<pre><code>public function getWelcome()
{
    if (empty($this-&gt;_data['welcome'])) {
        if (Mage::app()-&gt;isInstalled() &amp;&amp; Mage::getSingleton('customer/session')-&gt;isLoggedIn()) {
            $this-&gt;_data['welcome'] = $this-&gt;__('Welcome, %s!', Mage::getSingleton('customer/session')-&gt;getCustomer()-&gt;getName());
        } else {
            $this-&gt;_data['welcome'] = Mage::getStoreConfig('design/header/welcome');
        }
    }

    return $this-&gt;_data['welcome'];
}
</code></pre>

<p>So it looks like <code>Mage::getSingleton('customer/session')-&gt;getCustomer()</code> will get your current logged in customer ;)</p>

<p>To get the currently logged in admin:</p>

<pre><code>Mage::getSingleton('admin/session')-&gt;getUser();
</code></pre>
","452334"
"Determining Referer in PHP","132311","","<p>What is the most reliable and secure way to determine what page either sent, or called (via AJAX),  the current page.  I don't want to use the <code>$_SERVER['HTTP_REFERER']</code>, because of the (lack of) reliability, and I need the page being called to only come from requests originating on my site.<br /><br />
Edit: I am looking to verify that a script that preforms a series of actions is being called from a page on my website.</p>
","<p>The REFERER is sent by the client's browser as part of the HTTP protocol, and is therefore unreliable indeed. It might not be there, it might be forged, you just can't trust it if it's for security reasons.</p>

<p>If you want to verify if a request is coming from your site, well you can't, but you can verify the user has been to your site and/or is authenticated. Cookies are sent in AJAX requests so you can rely on that.</p>
","166005"
"Best way to parse RSS/Atom feeds with PHP","132282","","<p>I'm currently using <a href=""http://magpierss.sourceforge.net/"" rel=""noreferrer"">Magpie RSS</a> but it sometimes falls over when the RSS or Atom feed isn't well formed. Are there any other options for parsing RSS and Atom feeds with PHP?</p>
","<p>Your other options include:</p>

<ul>
<li><a href=""http://simplepie.org/"" rel=""noreferrer"">SimplePie</a></li>
<li><a href=""http://lastrss.oslab.net/"" rel=""noreferrer"">Last RSS</a></li>
<li><a href=""http://www.phpclasses.org/package/4548-PHP-Parse-RSS-and-ATOM-feeds.html"" rel=""noreferrer"">PHP Universal Feed Parser</a></li>
</ul>
","250714"
"Calling a function from a string in C#","132177","","<p>I know in php you are able to make a call like:</p>

<pre><code>$function_name = 'hello';
$function_name();

function hello() { echo 'hello'; }
</code></pre>

<p>Is this possible in .Net?</p>
","<p>Yes. You can use reflection. Something like this:</p>

<pre><code>Type thisType = this.GetType();
MethodInfo theMethod = thisType.GetMethod(TheCommandString);
theMethod.Invoke(this, userParameters);
</code></pre>
","540075"
"How do I enable --enable-soap in php on linux?","132144","","<p>That's much the question. I have PHP 5.2.9 on Apache and I cannot upgrade PHP. Is there a way for me to enable SOAP in PHP 5.2.9? The PHP manual did not help at all when it said, ""To enable SOAP support, configure PHP with --enable-soap .""  How do I configure? </p>
","<p>Getting SOAP working usually does not require compiling PHP from source. I would recommend trying that only as a last option.</p>

<p>For good measure, check to see what your phpinfo says, if anything, about SOAP extensions:</p>

<pre><code>$ php -i | grep -i soap
</code></pre>

<p>to ensure that it is the PHP extension that is missing.</p>

<p>Assuming you do not see anything about SOAP in the phpinfo, see what PHP SOAP packages might be available to you.</p>

<p>In Ubuntu/Debian you can search with:</p>

<pre><code>$ apt-cache search php | grep -i soap
</code></pre>

<p>or in RHEL/Fedora you can search with:</p>

<pre><code>$ yum search php | grep -i soap
</code></pre>

<p>There are usually two PHP SOAP packages available to you, usually <code>php-soap</code> and <code>php-nusoap</code>. <code>php-soap</code> is typically what you get with configuring PHP with <code>--enable-soap</code>.</p>

<p>In Ubuntu/Debian you can install with:</p>

<pre><code>$ sudo apt-get install php-soap
</code></pre>

<p>Or in RHEL/Fedora you can install with:</p>

<pre><code>$ sudo yum install php-soap
</code></pre>

<p>After the installation, you might need to place an ini file and restart Apache.</p>
","11584962"
"Pull all images from a specified directory and then display them","132094","","<p>How to display the image from a specified directory? like i want to display all the png images from a directory, in my case my directory is media/images/iconized.</p>

<p>I tried to look around but seems none of them fits what i really needed.</p>

<p>But here's my try.</p>

<pre><code>$dirname = ""media/images/iconized/"";
$images = scandir($dirname);
$ignore = Array(""."", "".."");
foreach($images as $curimg){
if(!in_array($curimg, $ignore)) {
echo ""&lt;img src='media/images/iconized/$curimg' /&gt;&lt;br&gt;\n"";
};
}
</code></pre>

<p>hope someone here could help. Im open in any ideas, recommendation and suggestion, thank you.</p>
","<p>You can also use <code>glob</code> for this:</p>

<pre class=""lang-php prettyprint-override""><code>$dirname = ""media/images/iconized/"";
$images = glob($dirname.""*.png"");

foreach($images as $image) {
    echo '&lt;img src=""'.$image.'"" /&gt;&lt;br /&gt;';
}
</code></pre>
","11903460"
"PHP Regex to get youtube video ID?","132087","","<p>Can someone show me how to get the youtube id out of a url regardless of what other GET variables are in the URL.</p>

<p>Use this video for example: <code>http://www.youtube.com/watch?v=C4kxS1ksqtw&amp;feature=related</code>
<br>So between <code>v=</code> and before the next <code>&amp;</code></p>
","<p><a href=""http://php.net/manual/en/function.parse-url.php"" rel=""noreferrer"">Use parse_url()</a> and <a href=""http://www.php.net/manual/en/function.parse-str.php"" rel=""noreferrer"">parse_str()</a>.</p>

<p>(You can use regexes for just about anything, but they are very easy to make an error in, so if there are PHP functions specifically for what you are trying to accomplish, use those.)</p>

<p>parse_url takes a string and cuts it up into an array that has a bunch of info. You can work with this array, or you can specify the one item you want as a second argument. In this case we're interested in the query, which is <code>PHP_URL_QUERY</code>.</p>

<p>Now we have the query, which is <code>v=C4kxS1ksqtw&amp;feature=relate</code>, but we only want the part after <code>v=</code>. For this we turn to <code>parse_str</code> which basically works like <code>GET</code> on a string. It takes a string and creates the variables specified in the string. In this case <code>$v</code> and <code>$feature</code> is created. We're only interested in <code>$v</code>.</p>

<p>To be safe, you don't want to just store all the variables from the <code>parse_url</code> in your namespace (see mellowsoon's comment). Instead store the variables as elements of an array, so that you have control over what variables you are storing, and you cannot accidentally overwrite an existing variable.</p>

<p>Putting everything together, we have:</p>

<pre><code>&lt;?php
$url = ""http://www.youtube.com/watch?v=C4kxS1ksqtw&amp;feature=relate"";
parse_str( parse_url( $url, PHP_URL_QUERY ), $my_array_of_vars );
echo $my_array_of_vars['v'];    
  // Output: C4kxS1ksqtw
?&gt; 
</code></pre>

<p><a href=""http://codepad.viper-7.com/7TmHqr"" rel=""noreferrer""><strong>Working example</strong></a></p>

<hr>

<p>Edit:</p>

<p>hehe - thanks Charles. That made me laugh, I've never seen the Zawinski quote before:</p>

<p><em><code>Some people, when confronted with a problem, think ‘I know, I’ll use regular expressions.’  Now they have two problems.</code></em>
– <em>Jamie Zawinski</em></p>
","3393008"
"file_get_contents(): SSL operation failed with code 1. And more","131999","","<p>I’ve been trying to access this particular REST service from a PHP page I’ve created on our server.  I narrowed the problem down to these two lines.  So my PHP page looks like this:</p>

<pre><code>&lt;?php
$response = file_get_contents(""https://maps.co.weber.ut.us/arcgis/rest/services/SDE_composite_locator/GeocodeServer/findAddressCandidates?Street=&amp;SingleLine=3042+N+1050+W&amp;outFields=*&amp;outSR=102100&amp;searchExtent=&amp;f=json"");

echo $response; ?&gt;
</code></pre>

<p>The page dies on line 2 with the following errors:</p>

<blockquote>
  <ul>
  <li>Warning: file_get_contents(): SSL operation failed with code 1.
  OpenSSL Error messages: error:14090086:SSL
  routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed in
  ...php on line 2
  
  <ul>
  <li>Warning: file_get_contents(): Failed to enable crypto in ...php on
  line 2</li>
  <li>Warning:
  file_get_contents(<code>https://maps.co.weber.ut.us/arcgis/rest/services/SDE_composite_locator/GeocodeServer/findAddressCandidates?Street=&amp;SingleLine=3042+N+1050+W&amp;outFields=*&amp;outSR=102100&amp;searchExtent=&amp;f=json</code>):
  failed to open stream: operation failed in ...php on line 2</li>
  </ul></li>
  </ul>
</blockquote>

<p>We’re using a Gentoo server.  We recently upgraded to PHP version 5.6.  It was after the upgrade when this problem appeared.    </p>

<p>I found when I replace the REST service with an address like <code>https://www.google.com</code>; my page works just fine.  </p>

<p>In an earlier attempt I set <code>“verify_peer”=&gt;false</code>, and passed that in as an argument to file_get_contents, as described here:  <a href=""https://stackoverflow.com/questions/15076819/file-get-contents-ignoring-verify-peer-false"">file_get_contents ignoring verify_peer=&gt;false?</a>  But like the writer noted; it made no difference.  </p>

<p>I’ve asked one of our server administrators if these lines in our php.ini file exist:</p>

<ul>
<li>extension=php_openssl.dll</li>
<li>allow_url_fopen = On</li>
</ul>

<p>He told me that since we’re on Gentoo, openssl is compiled when we build; and it’s not set in the php.ini file.  </p>

<p>I also confirmed that <code>allow_url_fopen</code> is working.  Due to the specialized nature of this problem; I’m not finding a lot of information for help.  Have any of you come across something like this?  Thanks.  </p>
","<p>This was an enormously helpful link to find:</p>

<p><a href=""http://php.net/manual/en/migration56.openssl.php"">http://php.net/manual/en/migration56.openssl.php</a></p>

<p>An official document describing the changes made to open ssl in PHP 5.6
From here I learned of one more parameter I should have set to false:  ""verify_peer_name""=>false</p>

<p>So my working code looks like this:</p>

<pre><code>&lt;?php
$arrContextOptions=array(
    ""ssl""=&gt;array(
        ""verify_peer""=&gt;false,
        ""verify_peer_name""=&gt;false,
    ),
);  

$response = file_get_contents(""https://maps.co.weber.ut.us/arcgis/rest/services/SDE_composite_locator/GeocodeServer/findAddressCandidates?Street=&amp;SingleLine=3042+N+1050+W&amp;outFields=*&amp;outSR=102100&amp;searchExtent=&amp;f=json"", false, stream_context_create($arrContextOptions));

echo $response; ?&gt;
</code></pre>
","26151993"
"Is ini_set('max_execution_time', 0) a bad idea?","131994","","<p>Is there a good reason not to set the PHP configuration variable <a href=""http://www.php.net/manual/en/info.configuration.php#ini.max-execution-time"" rel=""noreferrer""><code>max_execution_time</code></a> to 0?</p>

<p>A coworker recently checked in a change to a file that added:</p>

<pre><code>ini_set('max_execution_time', 0);
</code></pre>

<p>The default value had been too low for a page that did some complex processing before returning the output to the user.</p>

<p>The manual states that the main purpose of the setting is to:</p>

<blockquote>
  <p>prevent poorly written scripts from tying up the server.</p>
</blockquote>

<p>But also goes on to state:</p>

<blockquote>
  <p>Your web server can have other timeout configurations that may also interrupt PHP execution. Apache has a <em>Timeout</em> directive and IIS has a CGI timeout function. Both default to 300 seconds. See your web server documentation for specific details.</p>
</blockquote>

<p>We're running under Apache, so that <em>Timeout</em> setting applies.  Is there any reason not to set <code>max_execution_time</code> to zero globally?  I'm mainly curious as to whether there are benefits I'm overlooking when <strong>not</strong> setting it to zero.</p>
","<p>At the risk of irritating you;</p>

<p>You're asking the wrong question. You don't need a reason NOT to deviate from the defaults, but the other way around. You need a reason to do so. Timeouts are absolutely essential when running a web server and to disable that setting without a reason is inherently contrary to good practice, even if it's running on a web server that happens to have a timeout directive of its own.</p>

<p>Now, as for the real answer; probably it doesn't matter at all in this particular case, but it's bad practice to go by the setting of a separate system. What if the script is later run on a different server with a different timeout? If you can safely say that it will never happen, fine, but good practice is largely about accounting for seemingly unlikely events and not unnecessarily tying together the settings and functionality of completely different systems. The dismissal of such principles is responsible for a lot of pointless incompatibilities in the software world. Almost every time, they are unforeseen.</p>

<p>What if the web server later is set to run some other runtime environment which only inherits the timeout setting from the web server? Let's say for instance that you later need a 15-year-old CGI program written in C++ by someone who moved to a different continent, that has no idea of any timeout except the web server's. That might result in the timeout needing to be changed and because PHP is pointlessly relying on the web server's timeout instead of its own, that may cause problems for the PHP script. Or the other way around, that you need a lesser web server timeout for some reason, but PHP still needs to have it higher.</p>

<p>It's just not a good idea to tie the PHP functionality to the web server because the web server and PHP are responsible for different roles and should be kept as functionally separate as possible. When the PHP side needs more processing time, it should be a setting in PHP simply because it's relevant to PHP, not necessarily everything else on the web server.</p>

<p>In short, it's just unnecessarily conflating the matter when there is no need to.</p>

<p>Last but not least, 'stillstanding' is right; you should at least rather use <code>set_time_limit()</code> than <code>ini_set()</code>.</p>

<p>Hope this wasn't too patronizing and irritating. Like I said, probably it's fine under your specific circumstances, but it's good practice to not assume your circumstances to be the One True Circumstance. That's all. :)</p>
","4307071"
"How to send 100,000 emails weekly?","131831","","<p>How can one send an email to 100,000 users on a weekly basis in PHP? This includes mail to subscribers using the following providers:</p>

<ul>
<li>AOL</li>
<li>G-Mail</li>
<li>Hotmail</li>
<li>Yahoo</li>
</ul>

<p>It is important that all e-mail actually be delivered, to the extent that it is possible. Obviously, just sending the mail conventionally would do nothing but create problems.</p>

<p>Is there a library for PHP that makes this simpler? </p>
","<p><strong>Short answer:</strong> While it's technically possible to send 100k e-mails each week yourself, the simplest, easiest and cheapest solution is to <strong>outsource this</strong> to one of the companies that specialize in it (I <em>did</em> say ""cheapest"": there's no limit to the amount of development time (and therefore money) that you can sink into this when trying to DIY).</p>

<p><strong>Long answer:</strong> If you decide that you <em>absolutely want</em> to do this yourself, prepare for a world of hurt (after all, this is e-mail/e-fail we're talking about). You'll need:</p>

<ul>
<li>e-mail content that <em>is not</em> spam (otherwise you'll run into additional major roadblocks on every step, even legal repercussions)</li>
<li>in addition, your content should be easy to <em>distinguish</em> from spam - that may be a bit hard to do in some cases (I heard that a certain pharmaceutical company had to all but abandon e-mail, as their brand names are quite common in spams)</li>
<li>a configurable SMTP server of your own, one which won't buckle when you dump 100k e-mails onto it (your ISP's upstream server won't be sufficient here and you'll make the ISP violently unhappy; we used two dedicated boxes)</li>
<li>some mail wrapper (e.g. PhpMailer if PHP's your poison of choice; using PHP's <code>mail()</code> is horrible enough by itself)</li>
<li>your own sender function to run in a loop, create the mails and pass them to the wrapper (note that you may run into PHP's memory limits if your app has a memory leak; you may need to recycle the sending process periodically, or even better, decouple the ""creating e-mails"" and ""sending e-mails"" altogether)</li>
</ul>

<p>Surprisingly, that was the easy part. The hard part is actually sending it:</p>

<ul>
<li>some servers will ban you when you send too many mails close together, so you need to shuffle and watch your queue (e.g. send one mail to joe@example.com, then three to other domains, only then another to otheraddress@example.com)</li>
<li>you need to have correct <a href=""http://www.codinghorror.com/blog/2010/04/so-youd-like-to-send-some-email-through-code.html"" rel=""nofollow noreferrer"">PTR, SPF, DKIM records</a></li>
<li>handling remote server timeouts, misconfigured DNS records and other network pleasantries</li>
<li>handling invalid e-mails (and no, <a href=""https://stackoverflow.com/questions/201323/what-is-the-best-regular-expression-for-validating-email-addresses/201378#201378"">regex is the wrong tool for that</a>)</li>
<li>handling unsubscriptions (many legitimate newsletters have been reclassified as spam due to many frustrated users who couldn't unsubscribe in one step and instead chose to ""mark as spam"" - the spam filters do learn, esp. with large e-mail providers)</li>
<li>handling bounces and rejects (""no such mailbox ojhn@example.com"",""mailbox john@example.com full"")</li>
<li>handling blacklisting and removal from blacklists (Sure, you're not sending spam. Some recipients won't be so sure - with such large list, it <em>will</em> happen sometimes, no matter what precautions you take. Some people (e.g. your not-so-scrupulous competitors) might even go as far to falsely report your mailings as spam - it does happen. On <em>average</em>, it takes weeks to get yourself removed from a blacklist.)</li>
</ul>

<p>And to top it off, you'll have to manage the legal part of it (various federal, state, and local laws; and even different tangles of laws once you send outside the U.S. (note: you have no way of finding if joe@hotmail.com lives in Southwest Elbonia, the country with world's most draconian antispam laws)).</p>

<p>I'm pretty sure I missed a few heads of this hydra - are you still sure you want to do this yourself? If so, there'll be another wave, this time merely the annoying problems inherent in sending an e-mail. (You see, SMTP is a store-and-forward protocol, which means that your e-mail will be shuffled across many SMTP servers around the Internet, in the hope that the next one is a bit closer to the final recipient. Basically, the e-mail is sent to an SMTP server, which puts it into its forward queue; when time comes, it will forward it further to a different SMTP server, until it reaches the SMTP server for the given domain. This forward could happen immediately, or in a few minutes, or hours, or days, or never.) Thus, you'll see the following issues - most of which could happen en route as well as at the destination:</p>

<ul>
<li>the remote SMTP servers don't want to talk to your SMTP server</li>
<li>your mails are getting marked as spam (<code>&lt;blink&gt;</code> is not your friend here, nor is <code>&lt;font color=...&gt;</code>)</li>
<li>your mails are delivered days, even weeks late (contrary to popular opinion, SMTP is designed to make a best effort to deliver the message sometime in the future - not to deliver it now)</li>
<li>your mails are not delivered at all (already sent from e-mail server on hop #4, not sent yet from server on hop #5, the server that currently holds the message crashes, data is lost)</li>
<li>your mails are mangled by some braindead server en route (this one is somewhat solvable with base64 encoding, but then the size goes up and the e-mail <em>looks</em> more suspicious)</li>
<li>your mails are delivered and the recipients seem not to want them (""I'm sure I didn't sign up for this, I remember exactly what I did a year ago"" (of course you do, sir))</li>
<li>users with various versions of Microsoft Outlook and its <em>special</em> handling of Internet mail</li>
<li>wizard's apprentice mode (a self-reinforcing positive feedback loop - in other words, automated e-mails as replies to automated e-mails as replies to...; you <strong>really</strong> don't want to be the one to set this off, as you'd anger half the internet at yourself)</li>
</ul>

<p>and it'll be <em>your</em> job to troubleshoot and solve this (hint: you can't, mostly). The people who run a legit mass-mailing businesses know that in the end you can't solve it, and that they can't solve it either - and they have the reasons well researched, documented and outlined (maybe even as a Powerpoint presentation - complete with sounds and cool transitions - that your bosses can understand), as they've had to explain this a million times before. Plus, for the problems that are actually solvable, they know very well how to solve them.</p>

<p>If, after all this, you are not discouraged and still want to do this, go right ahead: it's even possible that you'll find a better way to do this. Just know that the road ahead won't be easy - sending e-mail is trivial, getting it delivered is hard.</p>
","3905805"
"Best way to do multiple constructors in PHP","131760","","<p>You can't put two __construct functions with unique argument signatures in a PHP class. I'd like to do this:</p>

<pre><code>class Student 
{
   protected $id;
   protected $name;
   // etc.

   public function __construct($id){
       $this-&gt;id = $id;
      // other members are still uninitialized
   }

   public function __construct($row_from_database){
       $this-&gt;id = $row_from_database-&gt;id;
       $this-&gt;name = $row_from_database-&gt;name;
       // etc.
   }
}
</code></pre>

<p>What is the best way to do this in PHP?</p>
","<p>I'd probably do something like this:</p>

<pre><code>&lt;?php

class Student
{
    public function __construct() {
        // allocate your stuff
    }

    public static function withID( $id ) {
        $instance = new self();
        $instance-&gt;loadByID( $id );
        return $instance;
    }

    public static function withRow( array $row ) {
        $instance = new self();
        $instance-&gt;fill( $row );
        return $instance;
    }

    protected function loadByID( $id ) {
        // do query
        $row = my_awesome_db_access_stuff( $id );
        $this-&gt;fill( $row );
    }

    protected function fill( array $row ) {
        // fill all properties from array
    }
}

?&gt;
</code></pre>

<p>Then if i want a Student where i know the ID:</p>

<pre><code>$student = Student::withID( $id );
</code></pre>

<p>Or if i have an array of the db row:</p>

<pre><code>$student = Student::withRow( $row );
</code></pre>

<p>Technically you're not building multiple constructors, just static helper methods, but you get to avoid a lot of spaghetti code in the constructor this way.</p>
","1701337"
"PHP Get all subdirectories of a given directory","131751","","<p>How can I get all sub-directories of a given directory without files, <code>.</code>(current directory) or <code>..</code>(parent directory)
and then use each directory in a function?</p>
","<p>you can use <a href=""http://php.net/manual/en/function.glob.php"" rel=""noreferrer"">glob()</a> with <code>GLOB_ONLYDIR</code> option</p>

<p>or </p>

<pre><code>$dirs = array_filter(glob('*'), 'is_dir');
print_r( $dirs);
</code></pre>
","2524173"
"Send email from localhost running XAMMP in PHP using GMAIL mail server","131750","","<p>I try to send an email from localhost to my yahoo email account using php mail() function, the return says I successfully send the email but I did not get any email. I've been reading and trying many so called 'simple way' to send email but the result are disappointing, none of them work for me. Below are the code, the configurations and the error message. Can someone enlighten me with this? Thanks.</p>

<p>php code</p>

<pre><code>&lt;?php
$to      = 'myemail@yahoo.com';
$subject = 'Fake sendmail test';
$message = 'If we can read this, it means that our fake Sendmail setup works!';
$headers = 'From: myemail@egmail.com' . ""\r\n"" .
           'Reply-To: myemail@gmail.com' . ""\r\n"" .
           'X-Mailer: PHP/' . phpversion();

if(mail($to, $subject, $message, $headers)) {
    echo 'Email sent successfully!';
} else {
    die('Failure: Email was not sent!');
}
?&gt;
</code></pre>

<p>Configuration for php.ini (I'm using gmail mail server)</p>

<blockquote>
  <p>SMTP =smtp.gmail.com<br>
  smtp_port =587<br>
  sendmail_from = myemail@gmail.com<br>
  sendmail_path = ""\""C:\xampp\sendmail\sendmail.exe\"" -t""</p>
</blockquote>

<p>Configuration for sendmail.ini</p>

<blockquote>
  <p>smtp_server=smtp.gmail.com<br>
  smtp_port=587<br>
  smtp_ssl=tls<br>
  error_logfile=error.log<br>
  debug_logfile=debug.log<br>
  auth_username=myemail@gmail.com<br>
  auth_password=mypassword<br>
  force_sender=myemail@gmail.com</p>
</blockquote>

<p>error message in sendmail error log with port 587</p>

<blockquote>
  <p>13/10/02 13:36:41 : Must issue a STARTTLS command first. k4sm129639pbd.11 - gsmtp</p>
</blockquote>
","<p><a href=""http://byitcurious.blogspot.com/2009/04/solving-must-issue-starttls-command.html"" rel=""noreferrer"">Here's</a> the link that gives me the answer:</p>

<blockquote>
  <p>[Install] the ""<a href=""http://glob.com.au/sendmail/"" rel=""noreferrer"">fake sendmail for windows</a>"". If you are not using XAMPP you can download it here: <a href=""http://glob.com.au/sendmail/sendmail.zip"" rel=""noreferrer"">http://glob.com.au/sendmail/sendmail.zip</a></p>

<pre><code>[Modify] the php.ini file to use it (commented out the other lines):

[mail function]
; For Win32 only.
; SMTP = smtp.gmail.com
; smtp_port = 25

; For Win32 only.
; sendmail_from = &lt;e-mail username&gt;@gmail.com

; For Unix only. You may supply arguments as well (default: ""sendmail -t -i"").
sendmail_path = ""C:\xampp\sendmail\sendmail.exe -t""
</code></pre>
</blockquote>

<p>(ignore the ""Unix only"" bit, since we actually are using sendmail)</p>

<blockquote>
  <p>You then have to configure the ""sendmail.ini"" file in the directory where sendmail was installed:</p>

<pre><code>[sendmail]

smtp_server=smtp.gmail.com
smtp_port=25
error_logfile=error.log
debug_logfile=debug.log
auth_username=&lt;username&gt;
auth_password=&lt;password&gt;
force_sender=&lt;e-mail username&gt;@gmail.com
</code></pre>
</blockquote>

<p>To access a Gmail account protected by 2-factor verification, you will need to create an <a href=""https://security.google.com/settings/security/apppasswords"" rel=""noreferrer"">application-specific password</a>. (<a href=""https://webapps.stackexchange.com/a/45341/115031"">source</a>)</p>
","19134713"
"Access denied for user 'homestead'@'localhost' (using password: YES)","131625","","<p>I'm on a Mac OS Yosemite using Laravel 5.0.</p>

<p>While in my <strong>local</strong> environment, I run <code>php artisan migrate</code> I keep getting : </p>

<p><img src=""https://i.stack.imgur.com/Yqxns.png"" alt=""enter image description here""></p>

<p><strong>Configuration</strong> </p>

<p>Here is my <strong>.env</strong> </p>

<pre><code>APP_ENV=local
APP_DEBUG=true
APP_KEY=*****

DB_HOST=localhost
DB_DATABASE=homestead
DB_USERNAME=homestead
DB_PASSWORD=secret
</code></pre>

<p><strong>app\config\database.php</strong> </p>

<pre><code>   'mysql'       =&gt; [
    'driver'      =&gt; 'mysql',
    'host'        =&gt; env('DB_HOST', 'localhost'),
    'database'    =&gt; env('DB_DATABASE', 'homestead'),
    'username'    =&gt; env('DB_USERNAME', 'homestead'),
    'password'    =&gt; env('DB_PASSWORD', 'secret'),
    'unix_socket' =&gt; '/tmp/mysql.sock',
    'charset'     =&gt; 'utf8',
    'collation'   =&gt; 'utf8_unicode_ci',
    'prefix'      =&gt; '',
    'strict'      =&gt; false,
    ]
</code></pre>

<p>How do I avoid this kind of error ?</p>

<p><strong>I've tried :</strong> </p>

<hr>

<h1>1</h1>

<p>in <strong>app/database.php</strong></p>

<p>Replace <code>localhost</code> with <code>127.0.0.1</code></p>

<p><code>'host'=&gt; env('DB_HOST', 'localhost')</code> --><code>'host' =&gt; env('DB_HOST', '127.0.0.1')</code></p>

<p>Also, in <strong>.env</strong></p>

<p><code>DB_HOST=localhost</code>  --> <code>DB_HOST=127.0.0.1</code></p>

<hr>

<h1>2</h1>

<p>Try specify environment</p>

<p><code>php artisan migrate --env=local</code></p>

<hr>

<h1>3</h1>

<p>Check to see if the MySQL is running by run </p>

<p><code>mysqladmin -u homestead -p status Enter password: secret</code></p>

<p>I got </p>

<p><code>Uptime: 21281 Threads: 3 Questions: 274 Slow queries: 0 Opens: 327 Flush tables: 1 Open tables: 80 Queries per second avg: 0.012</code></p>

<p>Which mean it's running.</p>

<hr>

<h1>4</h1>

<p>Check MySQL UNIX Socket (<em>This step work for me</em>)</p>
","<h1>Check MySQL UNIX Socket</h1>

<p>Find <strong>unix_socket</strong> location using MySQL</p>

<p><code>mysql -u homestead -p</code></p>

<pre><code>mysql&gt; show variables like '%sock%';
+-----------------------------------------+-----------------------------+
| Variable_name                           | Value                       |
+-----------------------------------------+-----------------------------+
| performance_schema_max_socket_classes   | 10                          |
| performance_schema_max_socket_instances | 322                         |
| socket                                  | /var/run/mysqld/mysqld.sock |
+-----------------------------------------+-----------------------------+
3 rows in set (0.00 sec)
</code></pre>

<p>Then I go to <strong>config/database.php</strong> </p>

<p>I update this line : <code>'unix_socket' =&gt; '/tmp/mysql.sock',</code></p>

<p>to : <code>'unix_socket'   =&gt; '/var/run/mysqld/mysqld.sock',</code></p>

<p>That's it. It works for my as my 4th try.I hope these steps help someone. :D</p>
","29772274"
"PHP display image BLOB from MySQL","131564","","<p>I'm attempting to display an image stored in the BLOB column in the database;</p>

<p>I fetch the data from the database with a SELECT perform no transformations on the data and display it with the following (from a script whose only output is the following):</p>

<pre><code>header(""Content-Type: image/jpeg"");
echo $image;
</code></pre>

<p>Please note chrome is displaying the content size as the correct size for the image as well as the correct mime type (<code>image/jpeg</code>). nothing is echoing out before the header and ive checked the blob in the database is correct. There is also no trailing whitespace before or after the <code>&lt;?php ?&gt;</code> tags.</p>

<p>chrome/IE displays an image icon but not the image itself. any ideas?</p>

<p>EDIT: image is got the from the database as such: </p>

<pre><code>$sql = ""SELECT * FROM products WHERE id = $id"";
$sth = $db-&gt;query($sql);
$row = $sth-&gt;fetch();
$image = $row['image'];
</code></pre>

<p>var_dump($image) gives: </p>

<pre><code>string 'ÿØÿà�JFIF��x�x��ÿá�ZExif��MM�*�����������J��������Q�������Q������tQ������t�����† ��±ÿÛ�C�       

ÿÛ�CÿÀ�_""�ÿÄ����������� 
ÿÄ�µ���}�!1AQa""q2‘¡#B±ÁRÑð$3br‚ 
%&amp;'()*456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyzƒ„…†‡ˆ‰Š’“”•–—˜™š¢£¤¥¦§¨©ª²³    ´µ¶·¸¹ºÂÃÄÅÆÇÈÉÊÒÓÔÕÖ×ØÙÚáâãäåæçèéêñòóôõö÷øùúÿÄ��������'... (length=60766)
</code></pre>
","<p>Try Like this.</p>

<p><strong>For Inserting into DB</strong></p>

<pre><code>$db = mysqli_connect(""localhost"",""root"","""",""DbName""); //keep your db name
$image = addslashes(file_get_contents($_FILES['images']['tmp_name']));
//you keep your column name setting for insertion. I keep image type Blob.
$query = ""INSERT INTO products (id,image) VALUES('','$image')"";  
$qry = mysqli_query($db, $query);
</code></pre>

<p><strong>For Accessing image From Blob</strong></p>

<pre><code>$db = mysqli_connect(""localhost"",""root"","""",""DbName""); //keep your db name
$sql = ""SELECT * FROM products WHERE id = $id"";
$sth = $db-&gt;query($sql);
$result=mysqli_fetch_array($sth);
echo '&lt;img src=""data:image/jpeg;base64,'.base64_encode( $result['image'] ).'""/&gt;';
</code></pre>

<p>Hope It will help you.</p>

<p>Thanks.</p>
","20564797"
"Commands out of sync; you can't run this command now","131476","","<p>I am trying to execute my PHP code, which calls two MySQL queries via mysqli, and get the error ""Commands out of sync; you can't run this command now"".</p>

<p>Here is the code I am using</p>

<pre><code>&lt;?php
$con = mysqli_connect(""localhost"", ""user"", ""password"", ""db"");
if (!$con) {
    echo ""Can't connect to MySQL Server. Errorcode: %s\n"". Mysqli_connect_error();
    exit;
}
$con-&gt;query(""SET NAMES 'utf8'"");
$brand =""o"";
$countQuery = ""SELECT ARTICLE_NO FROM AUCTIONS WHERE upper(ARTICLE_NAME) LIKE % ? %"";
if ($numRecords = $con-&gt;prepare($countQuery)) {
    $numRecords-&gt;bind_param(""s"", $brand);
    $numRecords-&gt;execute();
    $data = $con-&gt;query($countQuery) or die(print_r($con-&gt;error));
    $rowcount = $data-&gt;num_rows;
    $rows = getRowsByArticleSearch(""test"", ""Auctions"", "" "");
    $last = ceil($rowcount/$page_rows);
}  else {

print_r($con-&gt;error);
}
foreach ($rows as $row) {
    $pk = $row['ARTICLE_NO'];
    echo '&lt;tr&gt;' . ""\n"";
    echo '&lt;td&gt;&lt;a href=""#"" onclick=""updateByPk(\'Layer2\', \'' . $pk . '\')""&gt;'.$row['USERNAME'].'&lt;/a&gt;&lt;/td&gt;' . ""\n"";
    echo '&lt;td&gt;&lt;a href=""#"" onclick=""updateByPk(\'Layer2\', \'' . $pk . '\')""&gt;'.$row['shortDate'].'&lt;/a&gt;&lt;/td&gt;' . ""\n"";
    echo '&lt;td&gt;&lt;a href=""#"" onclick=""deleterec(\'Layer2\', \'' . $pk . '\')""&gt;DELETE RECORD&lt;/a&gt;&lt;/td&gt;' . ""\n"";
    echo '&lt;/tr&gt;' . ""\n"";
}
function getRowsByArticleSearch($searchString, $table, $max) {
    $con = mysqli_connect(""localhost"", ""user"", ""password"", ""db"");
    $recordsQuery = ""SELECT ARTICLE_NO, USERNAME, ACCESSSTARTS, ARTICLE_NAME, date_format(str_to_date(ACCESSSTARTS, '%d/%m/%Y %k:%i:%s'), '%d %m %Y' ) AS shortDate FROM AUCTIONS WHERE upper(ARTICLE_NAME) LIKE '%?%' ORDER BY str_to_date(ACCESSSTARTS, '%d/%m/%Y %k:%i:%s')"" . $max;
    if ($getRecords = $con-&gt;prepare($recordsQuery)) {
        $getRecords-&gt;bind_param(""s"", $searchString);
        $getRecords-&gt;execute();
        $getRecords-&gt;bind_result($ARTICLE_NO, $USERNAME, $ACCESSSTARTS, $ARTICLE_NAME, $shortDate);
        while ($getRecords-&gt;fetch()) {
            $result = $con-&gt;query($recordsQuery);
            $rows = array();
            while($row = $result-&gt;fetch_assoc()) {
                $rows[] = $row;
            }
            return $rows;
        }
    }
}
</code></pre>

<p>I have tried reading up on this, but I am unsure of what to do. I have read about store result and free result, however these have made no difference when using them. I am unsure at exactly which point this error is being caused, and would like to know why it is being caused, and how to fix it.</p>

<p>Going by my debug statements, the first if loop for countQuery is not even being entered, because of an error in my sql syntax near near <code>'% ? %'</code>. However if I just select <code>*</code> instead of trying to limit based on a LIKE clause, I still get the command out of sync error.</p>
","<p>You can't have two simultaneous queries because mysqli uses unbuffered queries by default (for prepared statements; it's the opposite for vanilla <code>mysql_query</code>). You can either fetch the first one into an array and loop through that, or tell mysqli to buffer the queries (using <a href=""http://php.net/manual/en/mysqli-stmt.store-result.php"" rel=""noreferrer""><code>$stmt-&gt;store_result()</code></a>).</p>

<p>See <a href=""http://php.net/mysqli_query"" rel=""noreferrer"">here</a> for details.</p>
","614741"
"MySQL Error: ""an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax""","131153","","<p>I am getting this error from MySQL:</p>

<pre><code>You have an error in your SQL syntax; check the manual that corresponds to 
your MySQL server version for the right syntax to use near 'Details 
(title, first, last, NRIC, po' at line 1
</code></pre>

<p>Here is the code:</p>

<pre><code>&lt;?php
  $link = mysql_connect(""localhost"", ""root"", """");
  if (!$link) { die('Could not connect: ' . mysql_error()); }

  $db_selected = mysql_select_db(Membership, $link);
  if (!$db_selected) { die('Can\'t use' . Membership . ':' . mysql_error()); }

  $value1 = $_POST[""title""];
  $value2 = $_POST[""first""];
  $value3 = $_POST[""last""];
  $value4 = $_POST[""NRIC""];
  $value5 = $_POST[""birthdate""];
  $value6 = $_POST[""birthmonth""];
  $value7 = $_POST[""birthyear""];
  $value8 = $_POST[""address""];
  $value9 = $_POST[""postal""];
  $value10 = $_POST[""genderSelect""];
  $value11 = $_POST[""contact""];
  $value12 = $_POST[""email""];
  $value13 = $_POST[""enter""];
  $value14 = $_POST[""password""];
  $value15 = $_POST[""Updates""];
  $value16 = $_POST[""Terms""];
  $value17 = $_POST[""submit_but""];
  $value18 = $_POST[""status""];

  $sql = ""INSERT INTO Member Details (title, first, last, NRIC, birthdate, birthmonth, birthyear, address, postal, genderSelect, contact, email, enter, password, Updates, Terms, submit_but, status) VALUES ('$value', '$value2', '$value3', '$value4', '$value5', '$value6', '$value7', '$value8', '$value9', '$value10', '$value11', '$value12', '$value13', '$value14', '$value15', '$value16', '$value17', '$value18')"";

  if (!mysql_query($sql)){     //The error is thrown here
   die('Error: ' . mysql_error());
  }
  mysql_close();
?&gt;
</code></pre>
","<p>Your problem lies here:</p>

<pre><code>INSERT INTO Member Details ...
</code></pre>

<p>Because you have a space there, it thinks <code>Member</code> is the table name and <code>Details</code> is extraneous, hence the error.</p>

<p>If your table is <code>Member Details</code>, you need to enclose it within back ticks:</p>

<pre><code>INSERT INTO `Member Details` ...
</code></pre>

<hr>

<p>I'm actually not that big a fan of spaces in SQL table names (or filesystem file names for that matter). In this particular case, I believe <code>MemberDetails</code> (or <code>Member_Details</code>, <code>member_details</code> and probably others) is just as readable, <em>without</em> requiring the use of backticks scattered throughout your code.</p>
","7884552"
"How to set proper codeigniter base url?","131026","","<p>when I had my site on development environment - it was url: <strong>testurl.com</strong></p>

<p>Now on production server my codeigniter app's address has to be <strong>someurl.com/mysite/</strong></p>

<p>I moved it there, and everytime I'm trying to run some function, example <strong>/home/test</strong> - it gets me into <strong>someurl.com/home/test</strong> - which is WRONG.</p>

<p>It has to be <strong>someurl.com/mysite/home/test</strong> - How to fix it? I did set </p>

<pre><code>$config['base_url'] = someurl.com/mysite/
</code></pre>
","<p>Base URL should be absolute, including the protocol:</p>

<pre><code>$config['base_url'] = ""http://somesite.com/somedir/"";
</code></pre>

<p>If using the URL helper, then <code>base_url()</code> will output the above string.</p>

<p>Passing arguments to <code>base_url()</code> or <code>site_url()</code> will result in the following (assuming <code>$config['index_page'] = ""index.php"";</code>: </p>

<pre><code>echo base_url('assets/stylesheet.css'); // http://somesite.com/somedir/assets/stylesheet.css
echo site_url('mycontroller/mymethod'); // http://somesite.com/somedir/index.php/mycontroller/mymethod
</code></pre>
","11801195"
"How to get exact browser name and version?","130900","","<p>I have tried some solutions but I am unable to get exact name and version:</p>

<p><strong>I am trying following code:</strong></p>

<pre><code>$browserAgent = $_SERVER['HTTP_USER_AGENT'];
echo $browserAgent;
</code></pre>

<p><strong>Output of above code:</strong></p>

<pre><code>Mozilla/5.0 (X11; Linux i686) AppleWebKit/534.24 (KHTML, like Gecko) Chrome/11.0.696.68 Safari/534.24
</code></pre>

<p><strong>But I am using:</strong></p>

<pre><code>Google Chrome 11.0.696.68
on   
Ubuntu 10.04
</code></pre>

<p>So I can find in <code>Chrome/11.0.696.68</code> in output string but it is also showing some other browsers names that is confusing to extract exact browser <strong>name/version</strong> from string.</p>
","<p>use <a href=""http://php.net/manual/en/function.get-browser.php#101125""><strong><code>get_browser()</code></strong></a> </p>

<p>from manual</p>

<pre><code>echo $_SERVER['HTTP_USER_AGENT'] . ""\n\n"";

$browser = get_browser(null, true);
print_r($browser);
</code></pre>

<p>will returns</p>

<pre><code>Array
(
    [browser_name_regex] =&gt; ^mozilla/5\.0 (windows; .; windows nt 5\.1; .*rv:.*) gecko/.* firefox/0\.9.*$
    [browser_name_pattern] =&gt; Mozilla/5.0 (Windows; ?; Windows NT 5.1; *rv:*) Gecko/* Firefox/0.9*/
    [parent] =&gt; Firefox 0.9
    [platform] =&gt; WinXP
    [browser] =&gt; Firefox
    [version] =&gt; 0.9
    [majorver] =&gt; 0
    [minorver] =&gt; 9
    [cssversion] =&gt; 2
    [frames] =&gt; 1
    [iframes] =&gt; 1
    [tables] =&gt; 1
    [cookies] =&gt; 1
    [backgroundsounds] =&gt;
    [vbscript] =&gt;
    [javascript] =&gt; 1
    [javaapplets] =&gt; 1
    [activexcontrols] =&gt;
    [cdf] =&gt;
    [aol] =&gt;
    [beta] =&gt; 1
    [win16] =&gt;
    [crawler] =&gt;
    [stripper] =&gt;
    [wap] =&gt;
    [netclr] =&gt;
)
</code></pre>
","8754109"
"Getting 404 Not Found error while trying to use ErrorDocument","130849","","<p>I know this thread has been talked a lot on the web and here, and I tried almost all the methods, but still I'm having the same problem.</p>

<p>This is my url on my local server ( MAMP ) </p>

<pre><code>http://localhost:8888/hellothere/index.php
</code></pre>

<p>And I've tried to insert a wrong path to take me to wrong page , like below :</p>

<pre><code>http://localhost:8888/hellothere/eiurgiuerib
</code></pre>

<p>Instead of taking me to Error Page it shows :</p>

<pre><code>Not Found

The requested URL /hellothere/eiurgiuerib was not found on this server.

Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request.
</code></pre>

<p>My 404 page is inside of the Error directory. And inside my .htaccess file I have included this :</p>

<pre><code>ErrorDocument 404 /Error/404.php
</code></pre>
","<p>The <code>ErrorDocument</code> directive, when supplied a local URL path, expects the path to be fully qualified from the <code>DocumentRoot</code>. In your case, this means that the actual path to the <code>ErrorDocument</code> is</p>

<pre><code>ErrorDocument 404 /hellothere/error/404page.html
</code></pre>
","12760811"
"What does ""zend_mm_heap corrupted"" mean","130730","","<p>All of the sudden I've been having problems with my application that I've never had before.  I decided to check the Apache's error log, and I found an error message saying ""zend_mm_heap corrupted"".  What does this mean.</p>

<p>OS: Fedora Core 8
Apache: 2.2.9
PHP: 5.2.6</p>
","<p>After much trial and error, I found that if I increase the <code>output_buffering</code> value in the php.ini file, this error goes away</p>
","4453898"
"Get response from PHP file using AJAX","130642","","<p>So here's my issue, I am using AJAX (jQuery) to post a form to <code>process.php</code> but the page actually needs to echo out a response such as <code>apple</code> or <code>plum</code>. I'm not sure how to take the response from <code>process.php</code> and have it stored as a variable...</p>

<p>Here's the code I have so far:</p>

<pre><code>&lt;script type=""text/javascript""&gt;
        function returnwasset(){
            alert('return sent');
            $.ajax({
                type: ""POST"",
                url: ""process.php"",
                data: somedata;
                success function(){
                    //echo what the server sent back...
                }
            });
        }
    &lt;/script&gt;
</code></pre>

<p>Also will I need to echo the response in <code>process.php</code> in json? or will plain text be fine?</p>

<p>Sorry if this sounds like a stupid question, this is my first time doing something as such in Ajax.</p>

<p>PS: How do I name the POST request in the above code?</p>
","<p><code>&lt;?php echo 'apple'; ?&gt;</code> is pretty much literally all you need on the server. </p>

<p>as for the JS side, the output of the server-side script is passed as a parameter to the success handler function, so you'd have</p>

<pre><code>success: function(data) {
   alert(data); // apple
}
</code></pre>
","14918472"
"PHP is_numeric or preg_match 0-9 validation","130566","","<p>This isn't a big issue for me (as far as I'm aware), it's more of something that's interested me. But what is the main difference, if any, of using <code>is_numeric</code> over <code>preg_match</code> (or vice versa) to validate user input values.</p>

<p>Example One:</p>

<pre><code>&lt;?php
    $id = $_GET['id'];
    if (!preg_match('/^[0-9]*$/', $id)) {
        // Error
    } else {
        // Continue
    }
?&gt;
</code></pre>

<p>Example Two:</p>

<pre><code>&lt;?php
    $id = $_GET['id'];
    if (!is_numeric($id)) {
        // Error
    } else {
        // Continue
    }
?&gt;
</code></pre>

<p>I assume both do exactly the same but is there any specific differences which could cause problems later somehow? Is there a ""best way"" or something I'm not seeing which makes them different.</p>
","<p><code>is_numeric()</code> tests whether a value is a number. It doesn't necessarily have to be an integer though - it could a decimal number or a number in scientific notation.</p>

<p>The <code>preg_match()</code> example you've given only checks that a value contains the digits zero to nine; any number of them, and in any sequence.</p>

<p>Note that the regular expression you've given also isn't a perfect integer checker, the way you've written it. It doesn't allow for negatives; it does allow for a zero-length string (ie with no digits at all, which presumably shouldn't be valid?), and it allows the number to have any number of leading zeros, which again may not be the intended.</p>

<p>[EDIT]</p>

<p>As per your comment, a better regular expression might look like this:</p>

<pre><code>/^[1-9][0-9]*$/
</code></pre>

<p>This forces the first digit to only be between 1 and 9, so you can't have leading zeros. It also forces it to be at least one digit long, so solves the zero-length string issue.</p>

<p>You're not worried about negatives, so that's not an issue.</p>

<p>You might want to restrict the number of digits, because as things stand, it will allow strings that are too big to be stored as integers. To restrict this, you would change the star into a length restriction like so:</p>

<pre><code>/^[1-9][0-9]{0,15}$/
</code></pre>

<p>This would allow the string to be between 1 and 16 digits long (ie the first digit plus 0-15 further digits). Feel free to adjust the numbers in the curly braces to suit your own needs. If you want a fixed length string, then you only need to specify one number in the braces.</p>

<p>Hope that helps.</p>
","7649835"
"Composer Warning: openssl extension is missing. How to enable in WAMP","130547","","<p>Trying to install <a href=""http://getcomposer.org/"" rel=""noreferrer"">Composer</a> dependency management tool on <strong>Win7/64 + WampServer 2.2</strong> via the <a href=""http://getcomposer.org/download/"" rel=""noreferrer"">Setup Installer</a> and I am getting the following message:</p>

<blockquote>
  <p>The openssl extension is missing, which will reduce the security and stability of Composer.
  If possible you should enable it or recompile php with --with-openssl  </p>
</blockquote>

<p>So here is what I did...</p>

<ol>
<li>From my Wamp icon in Tray,  clicked <code>php &gt; php extensions &gt; php_openssl</code></li>
<li>This showed that task was completed by placing a <strong>check mark</strong> beside the extension</li>
<li>I then restarted WampServer</li>
<li>Then from the Wamp icon in tray, I clicked <code>php &gt; php.ini</code> and searched for openssl to verifiy it was NOT commented) out. It was not.</li>
<li>I then went back to Composer-Setup.exe and tried again. <strong>Same Warning Message</strong>: ""openssl extension is missing""</li>
<li>Having <strong>never</strong> worked with OpenSSL, I'm not sure what is supposed to be set, so I tried to browse to one of my local sites using https. It Failed.</li>
</ol>

<p>What am I missing?</p>

<p>Please advise.</p>
","<p>WAMP uses different php.ini files in the CLI and for Apache. when you enable php_openssl through the WAMP UI, you enable it for Apache, not for the CLI.
You need to modify C:\wamp\bin\php\php-5.4.3\php.ini to enable it for the CLI.</p>
","14265815"
"Setting POST variable without using form","130520","","<p>Is there a way to set a <code>$_POST['var']</code> without using form related field (no type='hidden') and using only PHP.
Something like</p>

<pre><code>$_POST['name'] = ""Denniss"";
</code></pre>

<p>Is there a way to do this?</p>

<p>EDIT:
Someone asked me for some elaboration on this. So for example, I have page with a form on it, The form looks something like this</p>

<pre><code>&lt;form method='post' action='next.php'&gt;
&lt;input type='text' name='text' value='' /&gt;
&lt;input type='submit' name='submit' value='Submit'/&gt;
&lt;/form&gt;
</code></pre>

<p>Once the submit button is clicked, I want to get redirected to next.php. Is there a way for me to set the $_POST['text'] variable to another value? How do I make this persistent so that when I click on another submit button (for example) the $_POST['text'] will be what I set on next.php without using a hidden field.</p>

<p>Let me know if this is still not clear and thank you for your help.</p>
","<p>Yes, simply set it to another value:</p>

<pre><code>$_POST['text'] = 'another value';
</code></pre>

<p>This will override the previous value corresponding to <code>text</code> key of the array. The <code>$_POST</code> is superglobal <em>associative array</em> and you can change the values like a <em>normal PHP array</em>.</p>

<p><strong>Caution:</strong> This change is only visible within the same PHP execution scope. Once the execution is complete and the page has loaded, the <code>$_POST</code> array is cleared. A new form submission will generate a new <code>$_POST</code> array.</p>

<p>If you want to persist the value across form submissions, you will need to put it in the form as an <code>input</code> tag's <code>value</code> attribute or retrieve it from a data store.</p>
","3418136"
"codeigniter model error: Undefined property","130463","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/13964398/error-get-property-of-non-object"">Error : get property of non-object</a>  </p>
</blockquote>



<p>I am new to codeigniter model, i try to follow steps in docs to load all user registered in my db.</p>

<p>This is my model: <code>user.php</code></p>

<pre><code>class User extends Model {
     function user() {
         parent::Model();
     }
     function alluser() {
         $query = $this-&gt;db-&gt;query(""select * from user limit 0,5""); //Line 30 error as in my IDE located in this line
         return $query-&gt;result();
     }
}
</code></pre>

<p>This is my controller: <code>home.php</code></p>

<pre><code>class home extends Controller {

function index() {

    parent::Controller();

}
function alluser() {
    $this-&gt;load-&gt;model('User');
    $result = $this-&gt;User-&gt;showusers();
    if ($result-&gt;num_rows()&gt;0) {
        foreach ($result as $row) {
            echo ""ID:"".$row-&gt;userid."" "".$row-&gt;userpenname.""&lt;br /&gt;"";
            echo $row-&gt;userfirstname."" "".$row-&gt;userlastname.""&lt;br /&gt;"";
        }
      }
   }
}
</code></pre>

<p>it showing error:</p>

<pre><code>A PHP Error was encountered

Severity: Notice

Message: Undefined property: User::$db

Filename: models/user.php

Line Number: 30
</code></pre>

<blockquote>
  <p>Fatal error: Call to a member function query() on a non-object in <br>G:\xampp\htdocs\fiksi\system\application\models\user.php on line 30</p>
</blockquote>

<p>Line 30 see comment above...</p>
","<p>You have to load the db library first. In</p>

<p>autoload.php :</p>

<pre><code>$autoload['libraries'] = array('database');
</code></pre>

<p>Also, try renaming User model class for ""User_model"".</p>
","3440922"
"Call a PHP function after onClick HTML event","130422","","<p><strong>Purpose:</strong> 
Call a PHP function to read data from a file and rewrite it. I used PHP only for this purpose - FileIO - and I'm new to PHP.</p>

<p><strong>Solution?</strong>
I tried through many forums and knew that we cannot achieve it normal way: onClick event > call function. How can we do it, are there other ways, particularly in my case?
My HTML code and PHP code is on the same page: Admin.php.
This is HTML part:</p>

<pre><code>&lt;form&gt;
    &lt;fieldset&gt;
        &lt;legend&gt;Add New Contact&lt;/legend&gt;
        &lt;input type=""text"" name=""fullname"" placeholder=""First name and last name"" required /&gt; &lt;br /&gt;
        &lt;input type=""email"" name=""email"" placeholder=""etc@company.com"" required /&gt; &lt;br /&gt;
        &lt;input type=""text"" name=""phone"" placeholder=""Personal phone number: mobile, home phone etc."" required /&gt; &lt;br /&gt;
        &lt;input type=""submit"" name=""submit"" class=""button"" value=""Add Contact"" onClick="""" /&gt;
        &lt;input type=""button"" name=""cancel"" class=""button"" value=""Reset"" /&gt;
    &lt;/fieldset&gt;
&lt;/form&gt;
</code></pre>

<p>This is PHP part:</p>

<pre><code>function saveContact()
{
    $datafile = fopen (""data/data.json"", ""a+"");
    if(!$datafile){
        echo ""&lt;script&gt;alert('Data not existed!')&lt;/script&gt;"";
    } 
    else{
        ...
        $contact_list = $contact_list . addNewContact();
        ...
        file_put_contents(""data/data.json"", $contact_list);
    }

    fclose($datafile);
}

function addNewContact()
{
   $new = '{';
   $new = $new . '""fullname"":""' . $_GET['fullname'] . '"",';
   $new = $new . '""email"":""' . $_GET['email'] . '"",';
   $new = $new . '""phone"":""' . $_GET['phone'] . '"",';
   $new = $new . '}';
   return $new;
}
</code></pre>

<p>Have a look at these code, I want to call saveContact when people click on Add Contact button. We can reload page if need so. FYI, I use JQuery, HTML5 in page as well.
Thanks,</p>
","<p>There are two ways. the first is to completely refresh the page using typical form submission</p>

<pre><code>//your_page.php

&lt;?php 

$saveSuccess = null;
$saveMessage = null;

if($_SERVER['REQUEST_METHOD'] == 'POST') {
  // if form has been posted process data

  // you dont need the addContact function you jsut need to put it in a new array
  // and it doesnt make sense in this context so jsut do it here
  // then used json_decode and json_decode to read/save your json in
  // saveContact()
  $data = array(
    'fullname' = $_POST['fullname'],
    'email' =&gt; $_POST['email'],
    'phone' =&gt; $_POST['phone']
  );

  // always return true if you save the contact data ok or false if it fails
  if(($saveSuccess = saveContact($data)) {
     $saveMessage = 'Your submission has been saved!';     
  } else {
     $saveMessage = 'There was a problem saving your submission.';
  } 
}
?&gt;

&lt;!-- your other html --&gt;

&lt;?php if($saveSuccess !== null): ?&gt;
   &lt;p class=""flash_message""&gt;&lt;?php echo $saveMessage ?&gt;&lt;/p&gt;
&lt;?php endif; ?&gt;

&lt;form action=""your_page.php"" method=""post""&gt;
    &lt;fieldset&gt;
        &lt;legend&gt;Add New Contact&lt;/legend&gt;
        &lt;input type=""text"" name=""fullname"" placeholder=""First name and last name"" required /&gt; &lt;br /&gt;
        &lt;input type=""email"" name=""email"" placeholder=""etc@company.com"" required /&gt; &lt;br /&gt;
        &lt;input type=""text"" name=""phone"" placeholder=""Personal phone number: mobile, home phone etc."" required /&gt; &lt;br /&gt;
        &lt;input type=""submit"" name=""submit"" class=""button"" value=""Add Contact"" onClick="""" /&gt;
        &lt;input type=""button"" name=""cancel"" class=""button"" value=""Reset"" /&gt;
    &lt;/fieldset&gt;
&lt;/form&gt;

&lt;!-- the rest of your HTML --&gt;
</code></pre>

<p>The second way would be to use AJAX. to do that youll want to completely seprate the form processing into a separate file:</p>

<p>// process.php</p>

<pre><code>$response = array();

if($_SERVER['REQUEST_METHOD'] == 'POST') {
  // if form has been posted process data

  // you dont need the addContact function you jsut need to put it in a new array
  // and it doesnt make sense in this context so jsut do it here
  // then used json_decode and json_decode to read/save your json in
  // saveContact()
  $data = array(
    'fullname' =&gt; $_POST['fullname'],
    'email' =&gt; $_POST['email'],
    'phone' =&gt; $_POST['phone']
  );

  // always return true if you save the contact data ok or false if it fails
  $response['status'] = saveContact($data) ? 'success' : 'error';
  $response['message'] = $response['status']
      ? 'Your submission has been saved!'
      : 'There was a problem saving your submission.';

  header('Content-type: application/json');
  echo json_encode($response);
  exit;
}
?&gt;
</code></pre>

<p>And then in your html/js</p>

<pre><code>&lt;form id=""add_contact"" action=""process.php"" method=""post""&gt;
        &lt;fieldset&gt;
            &lt;legend&gt;Add New Contact&lt;/legend&gt;
            &lt;input type=""text"" name=""fullname"" placeholder=""First name and last name"" required /&gt; &lt;br /&gt;
            &lt;input type=""email"" name=""email"" placeholder=""etc@company.com"" required /&gt; &lt;br /&gt;
            &lt;input type=""text"" name=""phone"" placeholder=""Personal phone number: mobile, home phone etc."" required /&gt; &lt;br /&gt;
            &lt;input id=""add_contact_submit"" type=""submit"" name=""submit"" class=""button"" value=""Add Contact"" onClick="""" /&gt;
            &lt;input type=""button"" name=""cancel"" class=""button"" value=""Reset"" /&gt;
        &lt;/fieldset&gt;
    &lt;/form&gt;
    &lt;script type=""text/javascript""&gt;
     $(function(){
         $('#add_contact_submit').click(function(e){
            e.preventDefault();  
            $form = $(this).closest('form');

            // if you need to then wrap this ajax call in conditional logic

            $.ajax({
              url: $form.attr('action'),
              type: $form.attr('method'),
              dataType: 'json',
              success: function(responseJson) {
                 $form.before(""&lt;p&gt;""+responseJson.message+""&lt;/p&gt;"");
              },
              error: function() {
                 $form.before(""&lt;p&gt;There was an error processing your request.&lt;/p&gt;"");
              }
            });
         });         
     });
    &lt;/script&gt;
</code></pre>
","10116792"
"How can I use a JavaScript variable as a PHP variable?","130116","","<p>I'm trying to include JavaScript variables into PHP code as PHP variables, but I'm having problems doing so. When a button is clicked, the following function is called:</p>

<pre><code>&lt;script type=""text/javascript""&gt;
    function addTraining(leve, name, date)
    {
        var level_var = document.getElementById(leve);
        var training_name_var = document.getElementById(name);
        var training_date_var = document.getElementById(date);

        &lt;?php
            $result = ""INSERT INTO training(level, school_name, training_date) VALUES('level_var', 'training_name_var', 'training_date_var')"" or die(""Query not possible."");
        ?&gt;

&lt;/script&gt;
</code></pre>

<p>Is it possible?</p>
","<p>PHP is run server-side. JavaScript is run client-side in the browser of the user requesting the page. By the time the JavaScript is executed, there is no access to PHP on the server whatsoever. Please read this article with details about <a href=""http://www.developer.com/tech/article.php/923111/Client-side-Versus-Server-side-Coding---Part-1.htm"" rel=""noreferrer"">client-side vs server-side coding</a>.</p>

<p>What happens in a nutshell is this:</p>

<ul>
<li>You click a link in your browser on your computer under your desk</li>
<li>The browser creates an HTTP request and sends it to a server on the Internet</li>
<li>The server checks if he can handle the request</li>
<li>If the request is for a PHP page, the PHP interpreter is started</li>
<li>The PHP interpreter will run all PHP code in the page you requested</li>
<li>The PHP interpreter will NOT run any JS code, because it has no clue about it</li>
<li>The server will send the page assembled by the interpreter back to your browser</li>
<li>Your browser will render the page and show it to you</li>
<li>JavaScript is executed on your computer</li>
</ul>

<p>In your case, PHP will write the JS code into the page, so it can be executed when the page is rendered in your browser. By that time, the PHP part in your JS snippet does no longer exist. It was executed on the server already. It created a variable <code>$result</code> that contained a SQL query string. You didn't use it, so when the page is send back to your browser, it's gone. Have a look at the sourcecode when the page is rendered in your browser. You will see that there is nothing at the position you put the PHP code.</p>

<p>The only way to do what you are looking to do is either:</p>

<ul>
<li>do a redirect to a PHP script or</li>
<li>do an AJAX call to a PHP script</li>
</ul>

<p>with the values you want to be insert into the database.</p>
","2379251"
"How to pass variables from one php page to another without form?","130049","","<p>I want to know how to pass a variable from one page to another in PHP without any form.</p>

<p>What I want to achieve is this:</p>

<ol>
<li>The user clicks on a link</li>
<li>A variable is passed which contains a string.</li>
<li>The variable can be accessed on the other page so that I can run mysql queries using that variable.</li>
</ol>
","<p>use the get method in the url. If you want to pass over a variable called 'phone' as 0001112222:</p>

<pre><code>&lt;a href='whatever.php?phone=0001112222'&gt;click&lt;/a&gt;
</code></pre>

<p>then on the next page (whatever.php) you can access this var via:</p>

<pre><code>$_GET['phone']
</code></pre>
","10252457"
"php - add + 7 days to date format mm dd, YYYY","129958","","<p>I have date of this format March 3, 2011 in database and I need to extend it with 7 days. I mean<pre> $date = $date + 7</pre>. Is there any build in function to do that ?</p>
","<pre><code>$date = ""Mar 03, 2011"";
$date = strtotime($date);
$date = strtotime(""+7 day"", $date);
echo date('M d, Y', $date);
</code></pre>
","5174834"
"how to convert array values from string to int?","129934","","<pre><code>$string = ""1,2,3""
$ids = explode(',', $string);
var_dump($ids);
</code></pre>

<p>returns </p>

<pre><code>array(3) {
  [0]=&gt;
  string(1) ""1""
  [1]=&gt;
  string(1) ""2""
  [2]=&gt;
  string(1) ""3""
}
</code></pre>

<p>I need for the values to be of type int instead of type string. Is there a better way of doing this than looping through the array with a foreach and converting each string to int?</p>
","<pre><code>$integerIDs = array_map('intval', explode(',', $string));
</code></pre>
","9593794"
"Redirecting to authentication dialog - ""An error occurred. Please try again later""","129898","","<p>Why does it always happen to me?</p>

<p>This happens after my application verify for user user login and redirect user to the authentication page:  </p>

<p><code>https://www.facebook.com/dialog/oauth?client_id=XXX&amp;redirect_uri=http%3A%2F%2Fexample.com%2Fmyappname%2F&amp;state=YYYYYY&amp;scope=offline_access%2Cpublish_actions</code></p>

<p>But instead of showing the authorization page, Facebook shows an error page with </p>

<blockquote>
  <p>An error occurred. Please try again later.</p>
</blockquote>

<p>Is there any configuration I have to do before try to authenticate my users?</p>

<p>All is done with PHP using the PHP-SDK classes.</p>
","<p>I had the same problem after changing the domain of my site. Altough I properly changed the request_uri parameter and updated my app settings with the new domain, the error kept showing up. 
Then I realized that the ID and the SECRET ID of my Facebook APP had automatically changed with no warning!! The whole thing started working again using the new ID.</p>
","8154638"
"PHP Warning Permission denied (13) on session_start()","129659","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/4585086/how-can-i-fix-the-permission-error-when-i-call-session-start"">How can I fix the Permission error when I call session_start()?</a>  </p>
</blockquote>



<p>I'm getting the following error:</p>

<pre><code>PHP Warning:  session_start() [&lt;a href='function.session-start'&gt;function.session-start&lt;/a&gt;]: open(/tmp/sess_49a20cbe1ef09a2d0262b3f7eb842e7b, O_RDWR) failed: Permission denied (13) in /home/------/public_html/includes/libs/ss.inc.php on line 1
</code></pre>

<p>The problem doesn't happen all the time, but comes and goes.</p>

<p>This the code at line on 1 in ss.inc.php</p>

<pre><code>&lt;?php session_start(); ?&gt;
</code></pre>
","<p>You don't appear to have write permission to the <code>/tmp</code> directory on your server. This is a bit weird, but you can work around it. <em>Before</em> the call to <code>session_start()</code> put in a call to <code>session_save_path()</code> and give it the name of a directory writable by the server. <a href=""http://php.net/manual/en/function.session-save-path.php"" rel=""noreferrer"">Details are here</a>.</p>
","6821576"
"How do I install the ext-curl extension with PHP 7?","129616","","<p>I've installed PHP 7 using <a href=""http://php7.zend.com/repo.php"" rel=""noreferrer"">this repo</a>, but when I try to run <code>composer install</code>, it's giving this error:</p>

<blockquote>
  <ul>
  <li>[package] requires ext-curl * -> the requested PHP extension curl is missing from your system.</li>
  </ul>
</blockquote>

<p>With PHP 5, you can easily install it by running the <code>yum</code> or <code>apt-get install php5-curl</code> command, but I can't find how to install the PHP 7 equivalent.</p>

<p>How do I install ext-curl for PHP 7?</p>
","<p>Well I was able to install it by :</p>

<pre><code>sudo apt-get install php-curl
</code></pre>

<p>on my system. This will install a dependency package, which depends on the default php version.</p>
","35035211"
"PHP json_decode() returns NULL with valid JSON?","129607","","<p>I have this JSON object stored on a plain text file:</p>

<pre><code>{
    ""MySQL"": {
        ""Server"": ""(server)"",
        ""Username"": ""(user)"",
        ""Password"": ""(pwd)"",
        ""DatabaseName"": ""(dbname)""
    },
    ""Ftp"": {
        ""Server"": ""(server)"",
        ""Username"": ""(user)"",
        ""Password"": ""(pwd)"",
        ""RootFolder"": ""(rf)""
    },
    ""BasePath"": ""../../bin/"",
    ""NotesAppPath"": ""notas"",
    ""SearchAppPath"": ""buscar"",
    ""BaseUrl"": ""http:\/\/montemaiztusitio.com.ar"",
    ""InitialExtensions"": [
        ""nem.mysqlhandler"",
        ""nem.string"",
        ""nem.colour"",
        ""nem.filesystem"",
        ""nem.rss"",
        ""nem.date"",
        ""nem.template"",
        ""nem.media"",
        ""nem.measuring"",
        ""nem.weather"",
        ""nem.currency""
    ],
    ""MediaPath"": ""media"",
    ""MediaGalleriesTable"": ""journal_media_galleries"",
    ""MediaTable"": ""journal_media"",
    ""Journal"": {
        ""AllowedAdFileFormats"": [
            ""flv:1"",
            ""jpg:2"",
            ""gif:3"",
            ""png:4"",
            ""swf:5""
        ],
        ""AdColumnId"": ""3"",
        ""RSSLinkFormat"": ""%DOMAIN%\/notas\/%YEAR%-%MONTH%-%DAY%\/%TITLE%/"",
        ""FrontendLayout"": ""Flat"",
        ""AdPath"": ""ad"",
        ""SiteTitle"": ""Monte Maíz: Tu Sitio"",
        ""GlobalSiteDescription"": ""Periódico local de Monte Maíz."",
        ""MoreInfoAt"": ""Más información aquí, en el Periódico local de Monte Maíz."",
        ""TemplatePath"": ""templates"",
        ""WeatherSource"": ""accuweather:SAM|AR|AR005|MONTE MAIZ"",
        ""WeatherMeasureType"": ""1"",
        ""CurrencySource"": ""cotizacion-monedas:Dolar|Euro|Real"",
        ""TimesSingular"": ""vez"",
        ""TimesPlural"": ""veces""
    }
}
</code></pre>

<p>When I try to decode it with <code>json_decode()</code>, it returns NULL. Why?
The file is readable (I tried echoing <code>file_get_contents()</code> and it worked ok).</p>

<p>I've tested JSON against <a href=""http://jsonlint.com/"" rel=""noreferrer"">http://jsonlint.com/</a> and it's perfectly valid.</p>

<p>What's wrong here?</p>

<h1>Solution</h1>

<p>Looking for answers on Google, I got back to SO: <a href=""https://stackoverflow.com/questions/689185/json-decode-returns-null-php"">json_decode returns NULL after webservice call</a>. My JSON file had the UTF BOM sequence (some binary chars that shouldn't be there), thus, breaking the JSON structure. Went to Hex Editor, erased the bytes. Everything's back to normal.
Why has this happened? <em>Because I edited the file using Microsoft Windows' Notepad.</em> Terrible idea!</p>
","<p>It could be the encoding of the special characters. You could ask <a href=""http://de.php.net/json_last_error"" rel=""noreferrer""><strong>json_last_error()</strong></a> to get definite information.</p>

<blockquote>
  <p>Update: The issue is solved, look at the ""Solution"" paragraph in the question.</p>
</blockquote>
","2410358"
"Socket transport ""ssl"" in PHP not enabled","129568","","<p>I'm having trouble enabling the socket transport ""ssl"" in PHP.  When I run my script, I get the error:</p>

<blockquote>
  <p>Warning: fsockopen()
  [function.fsockopen]: unable to
  connect to ssl://www.my.site.com:443
  (Unable to find the socket transport
  ""ssl"" - did you forget to enable it
  when you configured PHP?)</p>
</blockquote>

<p>I'm running IIS6 on Windows and this is what I've done so far to try to get it working:</p>

<ul>
<li>uncommented the php_openssl.dll and php_sockets.dll extensions in php.ini</li>
<li>made sure PHP was loading the ini file I made changes to (it is, and it's definitely loading other extensions, so I'm fairly sure this isn't the problem)</li>
<li>made sure php_openssl.dll and php_sockets.dll were in the correct location</li>
<li>copied ssleay32.dll and libeay32.dll to the main PHP folder, the WINDOWS folder and the WINDOWS/system32 folder</li>
<li>made sure the Windows path variable included the location of PHP</li>
<li>made sure the file permissions were correct on all the relevant files.</li>
</ul>

<p>I've restarted IIS after pretty much every change, but I haven't had any luck.  Is there anything obvious that I'm doing wrong?  Is there anyway to troubleshoot this in smaller parts?  (So I can figure out the problem by the process of elimination...?)</p>

<p>Unfortunately Windows/IIS aren't my area of expertise--I've been put in charge because nobody else seems to know anything.</p>
","<p>Success!</p>

<p>After checking the log files and making sure the permissions on php_openssl.dll were correct, I googled the warning and found more things to try.</p>

<p>So I:</p>

<ul>
<li>added C:\PHP\ext to the Windows path</li>
<li>added libeay32.dll and ssleay32.dll to C:\WINDOWS\system32\inetsrv</li>
<li>rebooted the server</li>
</ul>

<p>I'm not sure which of these fixed my problem, but it's definately fixed now!  :)</p>

<p>I found these things to try on this page:
<a href=""http://php.net/manual/en/install.windows.extensions.php"" rel=""noreferrer"">http://php.net/manual/en/install.windows.extensions.php</a></p>

<p>Thanks for your help!</p>
","1712644"
"How to display images from a folder using php - PHP","129462","","<p>It would be great if someone could help me figure out why the browser cannot load the images (error 404). The code works, and the image source is correct, but I cannot figure out what is wrong. (using localhost) </p>

<pre><code>$dir          = '/home/user/Pictures';
$file_display = array(
    'jpg',
    'jpeg',
    'png',
    'gif'
);

if (file_exists($dir) == false) {
    echo 'Directory \'', $dir, '\' not found!';
} else {
    $dir_contents = scandir($dir);

    foreach ($dir_contents as $file) {
        $file_type = strtolower(end(explode('.', $file)));

        if ($file !== '.' &amp;&amp; $file !== '..' &amp;&amp; in_array($file_type, $file_display) == true) {
            echo '&lt;img src=""', $dir, '/', $file, '"" alt=""', $file, '"" /&gt;';
        }
    }
}
</code></pre>
","<p>You had a mistake on the statement below. Use . not ,</p>

<pre><code>echo '&lt;img src=""', $dir, '/', $file, '"" alt=""', $file, $
</code></pre>

<p>to</p>

<pre><code>echo '&lt;img src=""'. $dir. '/'. $file. '"" alt=""'. $file. $
</code></pre>

<p>and</p>

<pre><code>echo 'Directory \'', $dir, '\' not found!';
</code></pre>

<p>to </p>

<pre><code>echo 'Directory \''. $dir. '\' not found!';
</code></pre>
","19129107"
"How to get xdebug var_dump to show full object/array","129452","","<p>I am using <a href=""http://xdebug.org/"">xdebug</a> (php_xdebug-2.1.2-5.3-vc9.dll) on <a href=""http://www.wampserver.com/en/"">WAMP</a>. When I use <code>var_dump</code> on a large object or variable it does not show the full variable.</p>

<pre><code>array
'node' =&gt; 
  array
    'my_form' =&gt; 
      array
        'form' =&gt; 
          array
            ...
</code></pre>

<p>Without xdebug it shows as should be expected.  I looked at the documentation but did not see a solution. Does anyone know how I can fix this so xdebug <code>var_dump</code> shows the <em>full</em> object?</p>
","<p>These are configurable variables in php.ini:</p>

<pre><code>; with sane limits
xdebug.var_display_max_depth = 5
xdebug.var_display_max_children = 256
xdebug.var_display_max_data = 1024 


; with no limits
; (maximum nesting is 1023)
xdebug.var_display_max_depth = -1 
xdebug.var_display_max_children = -1
xdebug.var_display_max_data = -1 
</code></pre>

<p>Of course, these may also be set at runtime via <code>ini_set()</code>, useful if you don't want to modify  php.ini and restart your web server but need to quickly inspect something more deeply.</p>

<pre><code>ini_set('xdebug.var_display_max_depth', 5);
ini_set('xdebug.var_display_max_children', 256);
ini_set('xdebug.var_display_max_data', 1024);
</code></pre>

<p><a href=""http://xdebug.org/docs/all_settings#var_display_max_children"">Xdebug settings are explained in the official documentation</a>.</p>
","9998628"
"PHP to search within txt file and echo the whole line","129390","","<p>Using php, I'm trying to create a script which will search within a text file and grab that entire line and echo it.</p>

<p>I have a text file (.txt) titled ""numorder.txt"" and within that text file, there are several lines of data, with new lines coming in every 5 minutes (using cron job). The data looks similar to:</p>

<pre><code>2 aullah1
7 name
12 username
</code></pre>

<p>How would I go about creating a php script which will search for the data ""aullah1"" and then grab the entire line and echo it? (Once echoed, it should display ""2 aullah1"" (without quotations).</p>

<p>If I didn't explain anything clearly and/or you'd like me to explain in more detail, please comment.</p>
","<p>And a PHP example, multiple matching lines will be displayed:</p>

<pre><code>&lt;?php
$file = 'somefile.txt';
$searchfor = 'name';

// the following line prevents the browser from parsing this as HTML.
header('Content-Type: text/plain');

// get the file contents, assuming the file to be readable (and exist)
$contents = file_get_contents($file);
// escape special characters in the query
$pattern = preg_quote($searchfor, '/');
// finalise the regular expression, matching the whole line
$pattern = ""/^.*$pattern.*\$/m"";
// search, and store all matching occurences in $matches
if(preg_match_all($pattern, $contents, $matches)){
   echo ""Found matches:\n"";
   echo implode(""\n"", $matches[0]);
}
else{
   echo ""No matches found"";
}
</code></pre>
","3686246"
"How to access the php.ini file in godaddy shared hosting linux","129359","","<p>I have a web, and running well on my localhost. </p>

<p>After I Upload on my godaddy hosting, My web got a bug. the conclusions is, I MUST change the memory_limit on the php.ini file, BUT  cant find php.ini on FTP manager.</p>

<p>I have tried to:</p>

<ul>
<li>Find the way for change to the Classing FTP manager.  </li>
<li>Create /  upload php.ini file from local and not work.</li>
</ul>

<p>My Questions is : How I can Fix this? I Must change php.ini file. 
does anyone have experience like me?</p>
","<p>Create <code>php.ini</code> file with your desired setting and upload it in your root folder of server. It will take effect with this new setting.</p>

<p>You can't edit the <code>php.ini</code> file of <code>godaddy</code> server, but you can upload your own copy of your <code>php.ini</code> with your new setting.</p>

<p>This new setting will be available only to you. Other websites will not be affected with this new setting.</p>

<p>Previously I faced the same issue, but after doing this my problem was resolved.</p>
","16140990"
"How to Remove Array Element and Then Re-Index Array?","129254","","<p>I have some troubles with an array. I have one array that I want to modify like below. I want to remove element (elements) of it by index and then re-index array. Is it possible?</p>

<pre><code>$foo = array(

    'whatever', // [0]
    'foo', // [1]
    'bar' // [2]

);

$foo2 = array(

    'foo', // [0], before [1]
    'bar' // [1], before [2]

);
</code></pre>
","<pre><code>unset($foo[0]); // remove item at index 0
$foo2 = array_values($foo); // 'reindex' array
</code></pre>
","5217738"
"How to fix warning from date() in PHP""","129162","","<p>I am using XAMPP(PHP Version 5.3.1) on winxp. When I try to call time() or date() function on my localhost. It will show warning message as this,</p>

<blockquote>
  <p>Severity: Warning</p>
  
  <p>Message: date() [function.date]: It is
  not safe to rely on the system's
  timezone settings. You are <em>required</em>
  to use the date.timezone setting or
  the date_default_timezone_set()
  function. In case you used any of
  those methods and you are still
  getting this warning, you most likely
  misspelled the timezone identifier. We
  selected 'UTC' for '8.0/no DST'
  instead</p>
  
  <p>Filename: helpers/date_helper.php</p>
</blockquote>

<p>How can I disable the warning? Thanks.</p>
","<p>Try to set <code>date.timezone</code> in <code>php.ini</code> file. Or you can manually set it using <code>ini_set()</code> or <code>date_default_timezone_set()</code>.</p>
","5535527"
"Access a JavaScript variable from PHP","129148","","<p>I need to access a <strong>JavaScript</strong> variable with <strong>PHP</strong>. Here's a stripped-down version of the code I'm currently trying, which isn't working:</p>

<pre><code>&lt;script type=""text/javascript"" charset=""utf-8""&gt;
    var test = ""tester"";
&lt;/script&gt;

&lt;?php
    echo $_GET['test'];
?&gt;
</code></pre>

<p>I'm a completely new to both JavaScript and PHP, so I would really appreciate any advice.</p>

<p><strong>UPDATE</strong>: OK, I guess I simplified that too much. What I'm trying to do is create a form that will update a Twitter status when submitted. I've got the form working OK, but I want to also add geolocation data. Since I'm using Javascript (specifically, the Google Geolocation API) to get the location, how do I access that information with PHP when I'm submitting the form?</p>
","<p>The short answer is <strong>you can't</strong>.</p>

<p>I don't know any PHP syntax, but what I can tell you is that PHP is executed on the server and JavaScript is executed on the client (on the browser).</p>

<p>You're doing a $_GET, which is used to <a href=""http://www.w3schools.com/PHP/php_get.asp"" rel=""noreferrer"">retrieve form values</a>:</p>

<blockquote>
  <p>The built-in $_GET function is used to collect values in a form with method=""get"".</p>
</blockquote>

<p>In other words, if on your page you had:</p>

<pre><code>&lt;form method=""get"" action=""blah.php""&gt;
    &lt;input name=""test""&gt;&lt;/input&gt;
&lt;/form&gt;
</code></pre>

<p>Your $_GET call would retrieve the value in that input field.</p>

<p>So how to retrieve a value from JavaScript?</p>

<p>Well, you could stick the javascript value in a hidden form field...</p>

<pre><code>&lt;script type=""text/javascript"" charset=""utf-8""&gt;
    var test = ""tester"";
    // find the 'test' input element and set its value to the above variable
    document.getElementByID(""test"").value = test;
&lt;/script&gt;

... elsewhere on your page ...

&lt;form method=""get"" action=""blah.php""&gt;
    &lt;input id=""test"" name=""test"" visibility=""hidden""&gt;&lt;/input&gt;
    &lt;input type=""submit"" value=""Click me!""&gt;&lt;/input&gt;
&lt;/form&gt;
</code></pre>

<p>Then, when the user clicks your submit button, he/she will be issuing a ""GET"" request to blah.php, sending along the value in 'test'.</p>
","2338960"
"Running AMP (apache mysql php) on Android","129142","","<p>I currently work on an open source e-commerce platform (www.oscmax.com) and I am trying to work out if I can deploy an offline version that can run on an tablet.  I was hoping to use an iPad but this has proved very difficult (impossible?)</p>

<p>a) Does anyone know of an AMP (apache mysql php) version that will run on a tablet - eg. Android?</p>

<p>The idea is to have a local version of the online store that sales reps can use when selling to wholesale customers that will store the orders locally until they find a WiFi or 3G signal at which point it will merge the new records into the webserver.</p>

<p>If I could get Apache, MySQL and PHP to run locally (like it does using WAMP, MAMP, LAMP, etc.) it would be great as the app would be usable without an internet connection.</p>

<p>Regards,</p>
","<p>Finally - someone has released the full package!</p>

<p><a href=""https://play.google.com/store/apps/details?id=com.andi.serverweb"">Bit Web Server</a> (AMP; also see <a href=""http://webserver.bitnet.web.id/view/"">their homepage</a>) stack running on Android.  No hacking required.  $2 to pay though!</p>

<p>If you are looking for a stack for iOS then the <a href=""http://code.google.com/p/cydia-ios-lighttpd-php-mysql-web-stack/"">cydia-ios-lighttpd-php-mysql-web-stack</a> does the trick: Should run lighttpd + php 5.4 + mysql - unfortunately only on jailbroken devices.</p>

<p><strong>Edit:</strong> In case anyone is interested I have switched to Windows 8 tablet which happily runs all of the opensource AMP stacks.  Runs very nicely and with a bit of Bootstrap styling I have a full feature sales order ""app"" for nothing.  Little bit of code to sync back to the online version - no need to spend $50 per month per user on HandShake or similar.</p>
","14220610"
"How to remove extension from string (only real extension!)","128904","","<p>I'm looking for a small function that allows me to remove the extension from a filename.</p>

<p>I've found many examples by googling, but they are bad, because they just remove part of the string with ""."" . They use dot for limiter and just cut string.</p>

<p>Look at these scripts,</p>

<pre><code>$from = preg_replace('/\.[^.]+$/','',$from);
</code></pre>

<p>or</p>

<pre><code> $from=substr($from, 0, (strlen ($from)) - (strlen (strrchr($filename,'.'))));
</code></pre>

<p>When we add the string like this:</p>

<blockquote>
  <p>This.is example of somestring</p>
</blockquote>

<p>It will return only ""This""...</p>

<p>The extension can have 3 or 4 characters, so we have to check if dot is on 4 or 5 position, and then remove it.</p>

<p>How can it be done?</p>
","<p>Try this one:</p>

<pre><code>$withoutExt = preg_replace('/\\.[^.\\s]{3,4}$/', '', $filename);
</code></pre>

<p>So, this matches a dot followed by three or four characters which are not a dot or a space. The ""3 or 4"" rule should probably be relaxed, since there are plenty of file extensions which are shorter or longer.</p>
","2395905"
"PHP Warning: mysql_num_rows() expects parameter 1 to be resource, boolean given","128898","","<p>First of all I'm attempting to use a tutorial for this code, so its not mine. I get the error below when I try to log in on my website with the script below also. Any help would be greatly appreciated. Also any link directing me to where I can fix this issue would also be wonderful.</p>

<blockquote>
  <p>Warning: mysql_num_rows() expects parameter 1 to be resource, boolean given in /home/u378761662/public_html/login/checklogin.php on line 27</p>
</blockquote>

<p>PHP:</p>

<pre><code>&lt;?php

ob_start();
$host=""""; // Host name 
$username=""""; // Mysql username 
$password=""""; // Mysql password 
$db_name=""""; // Database name 
$tbl_name=""""; // Table name 

// Connect to server and select databse.
mysql_connect(""$host"", ""$username"", ""$password"")or die(""cannot connect""); 
mysql_select_db(""$db_name"")or die(""cannot select DB"");

// Define $myusername and $mypassword 
$myusername=$_POST['myusername']; 
$mypassword=$_POST['mypassword']; 

// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);
$sql=""SELECT * FROM $user WHERE username='$myusername' and password='$mypassword'"";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){

// Register $myusername, $mypassword and redirect to file ""login_success.php""
session_register(""myusername"");
session_register(""mypassword""); 
header(""location:login_success.php"");
}
else {
echo ""Wrong Username or Password"";
}
ob_end_flush();
?&gt;
</code></pre>
","<p>I suspect you mean <code>SELECT * FROM user ...</code>, not <code>SELECT * FROM $user ...</code> (remove the <code>$</code>), which is causing your error. <code>mysql_query()</code> returns <code>false</code> if the query failed, which is what you would expect if <code>$user</code> doesn't contain the name of your table. That's why <code>mysql_num_rows()</code> complains about receiving a boolean value.</p>

<p>Also, <a href=""https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php?rq=1"">don't use mysql_*; it's deprecated</a>.</p>

<p>And as others are pointing out, you should not store your passwords in plaintext. You should hash and salt them.</p>

<hr>

<p><strong>Edited</strong> to explain how salting and hashing work:</p>

<ul>
<li><p>Save a salt for each user. A salt is a random string of characters, preferably a long one, at least a dozen or so characters. It <em>must</em> be different for every user.</p></li>
<li><p>When you create the user's account or update the password, generate a hash of the salted password. For example, <code>$hashed = hash('sha256', $raw_password.$salt);</code> Even better, do lots of hashes, like this:</p></li>
</ul>

<p></p>

<pre><code>$hashed = hash('sha256', $raw_password.$salt);
for($i=0; $i&lt;1000; $i++) {
    $hashed = hash('sha256', $hashed);
}
</code></pre>

<p>This makes it slow and harder to extract the passwords. Really, you should consider using <code>bcrypt</code> rather than <code>hash()</code>, but that is way beyond what belongs in a single answer on here.</p>

<ul>
<li>Save <code>$hashed</code>, not the raw password, in the database, and save the salt value as well -- you'll need it.</li>
<li>Authenticate users with something like <code>SELECT * FROM users WHERE username = ?</code> (using MySQLi or PDO to do prepared statements). <strong><em>Do not</em></strong> simply put the username into the query directly, and do not use <code>mysql_*</code>.</li>
<li>Once you have done this SELECT, there are two possibilities: no results, or a match for the username. If you get no results, the username is bogus. If you get a result, you have to try to match the passwords, with something like this:</li>
</ul>

<p></p>

<pre><code>$hashed_from_input = hash('sha256', $raw_password_from_input.$salt_from_the_database);
for($i=0; $i&lt;1000; $i++) {
    $hashed_from_input = hash('sha256', $hashed_from_input );
}
if($hashed_from_input === $hashed_from_database) {
    // login succeeded
}
else {
    // login failed
}
</code></pre>

<p><strong><em>This is very hard to get right.</em></strong> You are best off using an existing user authentication library until you are very comfortable with all of the concepts around authentication and authorization, as well as all of the potential pitfalls.</p>
","20711245"
"Laravel 5 - Clear cache in shared hosting server","128796","","<p>The question is pretty clear.</p>

<pre><code>php artisan cache:clear
</code></pre>

<p>Is there any work around to clear the cache like above we using in CLI. I am using a famous shared hosting service but as per my plan I don't have control panel access.</p>

<p><strong>Basically I want to clear the views cache.</strong></p>

<p>I saw a <a href=""https://stackoverflow.com/questions/29152102/laravel-5-clear-views-cache"">question</a> almost same like this, but it doesn't helps me.</p>

<p>Thanks in advance.</p>
","<p>You can call an Artisan command outside the CLI.</p>

<pre><code>Route::get('/clear-cache', function() {
    $exitCode = Artisan::call('cache:clear');
    // return what you want
});
</code></pre>

<p>You can check the official doc here
<a href=""http://laravel.com/docs/5.0/artisan#calling-commands-outside-of-cli"" rel=""noreferrer"">http://laravel.com/docs/5.0/artisan#calling-commands-outside-of-cli</a></p>

<hr>

<p><strong>Update</strong></p>

<p>There is no way to delete the view cache. Neither <code>php artisan cache:clear</code>does that.</p>

<p>If you really want to clear the view cache, I think you have to write your own <code>artisan</code> command and call it as I said before, or entirely skip the <code>artisan</code> path and clear the view cache in some class that you call from a controller or a route.</p>

<p>But, my real question is <strong>do you really need to clear the view cache</strong>? In a project I'm working on now, I have almost 100 cached views and they weight less then 1 Mb, while my <code>vendor</code> directory is > 40 Mb. I don't think view cache is a real bottleneck in disk usage and never had a real need to clear it.</p>

<p>As for the <em>application cache</em>, it is stored in the <code>storage/framework/cache</code> directory, but only if you configured the <code>file</code> driver in <code>config/cache.php</code>. You can choose many different drivers, such as <em>Redis</em> or <em>Memcached</em>, to improve performances over a file-based cache.</p>
","31455977"
"get the selected index value of <select> tag in php","128724","","<p>I was trying  to get the selected value from the <code>&lt;select&gt;</code> tag in PHP, but I get errors. </p>

<p>These is what I have done,</p>

<p>HTML</p>

<pre><code>&lt;select name=""gender""&gt;
&lt;option value=""select""&gt;  Select &lt;/option&gt;
&lt;option value=""male""&gt;    Male   &lt;/option&gt;
&lt;option value=""female""&gt;  Female &lt;/option&gt;
&lt;/select&gt;
</code></pre>

<p>PHP script</p>

<pre><code>$Gender  = $_POST[""gender""];
</code></pre>

<p>but i get these error</p>

<pre><code>Notice: Undefined index: gender in C:\xampp\htdocs\omnama\signup.php on line 7
</code></pre>

<p>php script</p>

<pre><code>$Gender  = isset($_POST[""gender""]); ' it returns a empty string ? why ?
</code></pre>

<p>HTML </p>

<pre><code>&lt;form name=""signup_form""  action=""./signup.php"" onsubmit=""return validateForm()""   method=""post""&gt;
&lt;table&gt; 
  &lt;tr&gt; &lt;td&gt; First Name    &lt;/td&gt;&lt;td&gt; &lt;input type=""text"" name=""fname"" size=10/&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt; &lt;td&gt; Last Name     &lt;/td&gt;&lt;td&gt; &lt;input type=""text"" name=""lname"" size=10/&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt; &lt;td&gt; Your Email    &lt;/td&gt;&lt;td&gt; &lt;input type=""text"" name=""email"" size=10/&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt; &lt;td&gt; Re-type Email &lt;/td&gt;&lt;td&gt; &lt;input type=""text"" name=""remail""size=10/&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt; &lt;td&gt; Password      &lt;/td&gt;&lt;td&gt; &lt;input type=""password"" name=""paswod"" size=10/&gt; &lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt; &lt;td&gt; Gender        &lt;/td&gt;&lt;td&gt; &lt;select name=""gender""&gt;
  &lt;option&gt;                Select &lt;/option&gt;    
  &lt;option value=""male""&gt;   Male   &lt;/option&gt;
  &lt;option value=""female""&gt; Female &lt;/option&gt;&lt;/select&gt;&lt;/td&gt;&lt;/tr&gt; 
  &lt;tr&gt; &lt;td&gt; &lt;input type=""submit"" value=""Sign up"" id=""signup""/&gt; &lt;/td&gt; &lt;/tr&gt;
 &lt;/table&gt;
 &lt;/form&gt;
</code></pre>

<p>This is my php script</p>

<pre><code>  &lt;?php
  $con     = mysql_connect(""localhost"",""root"","""");
  $fname   = $_POST[""fname""];
  $lname   = $_POST[""lname""];
  $email   =  $_POST[""email""];
  $paswod  = $_POST[""paswod""];
  $Gender  = $_POST[""gender""];
  mysql_select_db(""homepage"");

  if(mysql_num_rows(mysql_query(""SELECT Email FROM users WHERE Email = '$email'"",$con)))
  {
  echo ""userid is already there"";
  }
  else
  { 
  $sql= ""INSERT INTO users (FirstName, LastName,Email,Password,Gender)
  VALUES
  ('$fname','$lname','$email','$paswod','$Gender')"";

  if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
  echo ""created"";
  }
 ?&gt; 
</code></pre>

<p>Please help me with these. I have to get the selected index value in the PHP. </p>

<p>I have read this <a href=""http://www.dreamincode.net/forums/topic/48477-how-to-get-the-select-value-from-the-drop-down-list/"" rel=""nofollow noreferrer"">link</a> to use <code>&lt;select&gt;</code> tag in PHP. </p>
","<p>Your form is valid. Only thing that comes to my mind is, after seeing your full html, is that you're passing your ""default"" value (which is not set!) instead of selecting something.
Try as suggested by @Vina in the comment, i.e. giving it a selected option, or writing a default value</p>

<pre><code>&lt;select name=""gender""&gt;
&lt;option value=""default""&gt;Select &lt;/option&gt;    
&lt;option value=""male""&gt;   Male   &lt;/option&gt;
&lt;option value=""female""&gt; Female &lt;/option&gt;
&lt;/select&gt;
</code></pre>

<p>OR</p>

<pre><code>&lt;select name=""gender""&gt;
&lt;option value=""male"" selected=""selected""&gt;   Male   &lt;/option&gt;
&lt;option value=""female""&gt; Female &lt;/option&gt;
&lt;/select&gt;
</code></pre>

<p>When you get your $_POST vars, check for them being set; you can assign a default value, or just an empty string in case they're not there.</p>

<p><strong>Most important thing, AVOID SQL INJECTIONS:</strong></p>

<pre><code>//....
$fname   = isset($_POST[""fname""]) ? mysql_real_escape_string($_POST['fname']) : '';
$lname   = isset($_POST['lname']) ? mysql_real_escape_string($_POST['lname']) : '';
$email   = isset($_POST['email']) ? mysql_real_escape_string($_POST['email']) : '';
you might also want to validate e-mail:
if($mail = filter_var($_POST['email'], FILTER_VALIDATE_EMAIL))
{
  $email = mysql_real_escape_string($_POST['email']);
}
else
{
  //die ('invalid email address');
  // or whatever, a default value? $email = '';
}
$paswod  = isset($_POST[""paswod""]) ? mysql_real_escape_string($_POST['paswod']) : '';
$gender  = isset($_POST['gender']) ? mysql_real_escape_string($_POST['gender']) : '';

$query = mysql_query(""SELECT Email FROM users WHERE Email = '"".$email.""')"";
if(mysql_num_rows($query)&gt; 0)
{
  echo 'userid is already there';
}
else
{
 $sql = ""INSERT INTO users (FirstName, LastName, Email, Password, Gender)
         VALUES ('"".$fname.""','"".$lname.""','"".$email.""','"".paswod.""','"".$gender.""')"";
$res = mysql_query($sql) or die('Error:'.mysql_error());
echo 'created';
</code></pre>
","7695824"
"Fetching data from MySQL database to html dropdown list","128653","","<p>I have a web site that contains a html form, in this form i have a dropdownlist with list of agents that works in the company, i want to fetch data from MySQL database to this dropdownlist so when you add a new agent his name will appear as a option in the drop down list .</p>

<p>Can you help me coding this php code please, thank you </p>

<pre><code>&lt;select name=""agent"" id=""agent""&gt;
&lt;/select&gt;  
</code></pre>
","<p>To do this you want to loop through each row of your query results and use this info for each of your drop down's options. You should be able to adjust the code below fairly easily to meet your needs.   </p>

<pre><code>// Assume $db is a PDO object
$query = $db-&gt;query(""YOUR QUERY HERE""); // Run your query

echo '&lt;select name=""DROP DOWN NAME""&gt;'; // Open your drop down box

// Loop through the query results, outputing the options one by one
while ($row = $query-&gt;fetch(PDO::FETCH_ASSOC)) {
   echo '&lt;option value=""'.$row['something'].'""&gt;'.$row['something'].'&lt;/option&gt;';
}

echo '&lt;/select&gt;';// Close your drop down box
</code></pre>
","10009791"
"How do you reindex an array in PHP?","128501","","<p>I have the following array, which I would like to reindex so the keys are reversed (ideally starting at 1):</p>

<p>Current array (<strong>edit:</strong> the array actually looks like this):</p>

<pre><code>Array (

[2] =&gt; Object
    (
        [title] =&gt; Section
        [linked] =&gt; 1
    )

[1] =&gt; Object
    (
        [title] =&gt; Sub-Section
        [linked] =&gt; 1
    )

[0] =&gt; Object
    (
        [title] =&gt; Sub-Sub-Section
        [linked] =&gt; 
    )

)
</code></pre>

<p>How it should be:</p>

<pre><code>Array (

[1] =&gt; Object
    (
        [title] =&gt; Section
        [linked] =&gt; 1
    )

[2] =&gt; Object
    (
        [title] =&gt; Sub-Section
        [linked] =&gt; 1
    )

[3] =&gt; Object
    (
        [title] =&gt; Sub-Sub-Section
        [linked] =&gt; 
    )

)
</code></pre>
","<p>If you want to re-index starting to zero, simply do the following:</p>

<pre><code>$iZero = array_values($arr);
</code></pre>

<p>If you need it to start at one, then use the following:</p>

<pre><code>$iOne = array_combine(range(1, count($arr)), array_values($arr));
</code></pre>

<p>Here are the manual pages for the functions used:</p>

<ul>
<li><a href=""http://ca3.php.net/manual/en/function.array-values.php"" rel=""noreferrer""><code>array_values()</code></a></li>
<li><a href=""http://ca3.php.net/manual/en/function.array-combine.php"" rel=""noreferrer""><code>array_combine()</code></a></li>
<li><a href=""http://ca3.php.net/manual/en/function.range.php"" rel=""noreferrer""><code>range()</code></a></li>
</ul>
","591224"
"How to Convert Boolean to String","128440","","<p>I have a boolean variable which I want to convert to a string</p>

<pre><code>$res = true;
</code></pre>

<p>I need it the converted value to also be in the format <code>""true"" ""false""</code> not <code>""0"" ""1""</code></p>

<pre><code>$converted_res = ""true"";
$converted_res = ""false"";
</code></pre>

<p>I've tried:</p>

<pre><code>$converted_res = string($res);
$converted_res = String($res);
</code></pre>

<p>but it tells me <code>string</code> and <code>String</code> are not recognized functions. How do I convert this boolean to a string in the format ""true"" or ""false"" in php?</p>
","<pre><code>$converted_res = ($res) ? 'true' : 'false';
</code></pre>
","2795180"
"Create or write/append in text file","128285","","<p>I have a website that every time a user login or logout I will save it to a text file.</p>

<p>my code doesn't work in appending the data or creates a text file if does not exist.. here is the sample code</p>

<pre><code>$myfile = fopen(""logs.txt"", ""wr"") or die(""Unable to open file!"");
$txt = ""user id date"";
fwrite($myfile, $txt);
fclose($myfile);
</code></pre>

<p>but it seems it does not append to next line after i open it again.</p>

<p>also. I think it would also have an error in a situation like what if 2 users login on the same time would it affect opening the text file and saving it after? </p>
","<p>Try something like this: </p>

<pre><code> $txt = ""user id date"";
 $myfile = file_put_contents('logs.txt', $txt.PHP_EOL , FILE_APPEND | LOCK_EX);
</code></pre>
","24972441"
"Laravel: Error [PDOException]: Could not Find Driver in PostgreSQL","128196","","<p>I'm trying to connect with PostgreSQL database through Laravel in order to do a php artisan migrate but doesn't seem to be directed since it's reading the database name of MySQL. </p>

<p>Here are the commands from database.php:</p>

<pre><code>'connections' =&gt; array(

    'sqlite' =&gt; array(
        'driver'   =&gt; 'sqlite',
        'database' =&gt; __DIR__.'/../database/production.sqlite',
        'prefix'   =&gt; '',
    ),

    'mysql' =&gt; array(
        'driver'    =&gt; 'mysql',
        'host'      =&gt; 'localhost',
        'database'  =&gt; 'database',
        'username'  =&gt; 'root',
        'password'  =&gt; '',
        'charset'   =&gt; 'utf8',
        'collation' =&gt; 'utf8_unicode_ci',
        'prefix'    =&gt; '',
    ),

    'pgsql' =&gt; array(
        'driver'   =&gt; 'pgsql',
        'host'     =&gt; 'localhost',
        'database' =&gt; 'postgres',
        'username' =&gt; 'postgres',
        'password' =&gt; 'root',
        'charset'  =&gt; 'utf8',
        'prefix'   =&gt; '',
        'schema'   =&gt; 'public',
    ),

    'sqlsrv' =&gt; array(
        'driver'   =&gt; 'sqlsrv',
        'host'     =&gt; 'localhost',
        'database' =&gt; 'database',
        'username' =&gt; 'root',
        'password' =&gt; '',
        'prefix'   =&gt; '',
    ),

),
</code></pre>

<p>If I remove the MySQL paths I'll get:</p>

<pre><code>[InvalidArgumentException]
Database [mysql] not configured.
</code></pre>

<p><hr>
<strong>EDIT:</strong>
When trying to do php artisan migrate I get a 'PDOException: could not find driver'. I'm using WAMP and I'm in Win8.1. Using PostgreSQL as database.</p>

<p><hr>
<strong>EDIT:</strong>
Have experimented a series of alternative solutions but I'm still ought to get this solved.
The <code>php.ini</code> file was checked in Apache, WAMP (from php folder) and PostgreSQL. The <code>extension_dir</code> is correct as it being -> <code>extension_dir = ""c:/wamp/bin/php/php5.5.12/ext/""</code></p>

<p>The <code>extension=pdo_pgsql.dll</code> and <code>extension=pgsql.dll</code> are uncommented.</p>

<p>Done the <code>PATH</code> trick in the 'System Variables' and rebooted. No chance. </p>

<p>Thanks for the help so far.</p>

<p>These are my drivers <code>php_pdo_driver.h</code> &amp; <code>php_pdo.h</code> from <code>C:\Program Files (x86)\PostgreSQL\EnterpriseDB-ApachePHP\php\SDK\include\ext\pdo</code></p>

<p>Information from phpinfo:</p>

<blockquote>
  <p>PHP Version 5.5.12</p>
  
  <p>Compiler  MSVC11 (Visual C++ 2012) Configure Command  cscript /nologo
  configure.js ""--enable-snapshot-build"" ""--disable-isapi""
  ""--enable-debug-pack"" ""--without-mssql"" ""--without-pdo-mssql""
  ""--without-pi3web""
  ""--with-pdo-oci=C:\php-sdk\oracle\x64\instantclient10\sdk,shared""
  ""--with-oci8=C:\php-sdk\oracle\x64\instantclient10\sdk,shared""
  ""--with-oci8-11g=C:\php-sdk\oracle\x64\instantclient11\sdk,shared""
  ""--enable-object-out-dir=../obj/"" ""--enable-com-dotnet=shared""
  ""--with-mcrypt=static"" ""--disable-static-analyze"" ""--with-pgo""</p>
</blockquote>
","<p>Be sure to configure the <code>'default'</code> key in <code>app/config/database.php</code></p>

<p>For postgres, this would be <code>'default' =&gt; 'postgres',</code></p>

<p>If you are receiving a <code>[PDOException] could not find driver</code> error, check to see if you have the correct PHP extensions installed.  You need <code>pdo_pgsql.so</code> and <code>pgsql.so</code> installed and enabled.  Instructions on how to do this vary between operating systems.  </p>

<p>For Windows, the <code>pgsql</code> extensions should come pre-downloaded with the official PHP distribution.  Just edit your <code>php.ini</code> and uncomment the lines <code>extension=pdo_pgsql.so</code> and <code>extension=pgsql.so</code></p>

<p>Also, in <code>php.ini</code>, make sure <code>extension_dir</code> is set to the proper directory.  It should be a folder called <code>extensions</code> or <code>ext</code> or similar inside your PHP install directory.</p>

<p>Finally, copy <code>libpq.dll</code> from <code>C:\wamp\bin\php\php5.*\</code> into <code>C:\wamp\bin\apache*\bin</code> and restart all services through the WampServer interface.</p>

<p>If you still get the exception, you may need to add the postgres <code>\bin</code> directory to your <code>PATH</code>:</p>

<ol>
<li>System Properties -> Advanced tab -> Environment Variables</li>
<li>In 'System variables' group on lower half of window, scroll through and find the <code>PATH</code> entry.</li>
<li>Select it and click Edit</li>
<li>At the end of the existing entry, put the full path to your postgres bin directory.  The bin folder should be located in the root of your postgres installation directory.</li>
<li>Restart any open command prompts, or to be certain, restart your computer.</li>
</ol>

<p>This should hopefully resolve any problems.  For more information see:</p>

<ul>
<li><a href=""http://php.net/manual/en/install.pecl.windows.php"" rel=""noreferrer"">http://php.net/manual/en/install.pecl.windows.php</a></li>
<li><a href=""http://webcheatsheet.com/php/install_and_configure.php#extsetup"" rel=""noreferrer"">http://webcheatsheet.com/php/install_and_configure.php#extsetup</a></li>
</ul>
","25336292"
"CURL ERROR: Recv failure: Connection reset by peer - PHP Curl","128142","","<p>I'm having this strange error, <strong>CURL ERROR: Recv failure: Connection reset by peer</strong></p>

<p>This is how it happens, if I did not connect to the server and all of a sudden trying to connect to the server via CURL in PHP I get the error. When I run the CURL script again the error disappears and then works well the whole time, if I leave the remote server idle for about 30mins or reboot the remote server and try to connect again, I get the error again. So it seems like the connection is idle and then all of sudden the server wakes up and then works and then sleeps again.</p>

<p>This is how my CURL script looks.</p>

<pre><code>$url = Yii::app()-&gt;params['pdfUrl'];
            $body = 'title='.urlencode($title).'&amp;client_url='.Yii::app()-&gt;params['pdfClientURL'].'&amp;client_id='.Yii::app()-&gt;params['pdfClientID'].'&amp;content='.urlencode(htmlentities($content));

            $c = curl_init ($url);
            $body = array(
                ""client_url""=&gt;Yii::app()-&gt;params['pdfClientURL'],
                ""client_id""=&gt;Yii::app()-&gt;params['pdfClientID'],
                ""title""=&gt;urlencode($title),
                ""content""=&gt;urlencode($content)

            );
            foreach($body as $key=&gt;$value) { $body_str .= $key.'='.$value.'&amp;'; }
                rtrim($body_str,'&amp;');

            curl_setopt ($c, CURLOPT_POST, true);
            curl_setopt ($c, CURLOPT_POSTFIELDS, $body_str);
            curl_setopt ($c, CURLOPT_RETURNTRANSFER, true);
            curl_setopt ($c, CURLOPT_CONNECTTIMEOUT , 0);
            curl_setopt ($c, CURLOPT_TIMEOUT  , 20);

            $pdf = curl_exec ($c);
            $errorCode = curl_getinfo($c, CURLINFO_HTTP_CODE);
            $curlInfo = curl_getinfo($c);
            $curlError = curl_error($c);

            curl_close ($c);
</code></pre>

<p>I'm totally out of ideas and solutions, please help, I'll appreciate it!!!</p>

<p>If I verbose the output to see what happens using </p>

<pre><code>curl_setopt ($c, CURLOPT_VERBOSE, TRUE);
curl_setopt($c, CURLOPT_STDERR, $fp); 
</code></pre>

<p>I get the following</p>

<pre><code>* About to connect() to 196.41.139.168 port 80 (#0)
*   Trying 196.x.x.x... * connected
* Connected to 196.x.x.x (196.x.x.x) port 80 (#0)
&gt; POST /serve/?r=pdf/generatePdf HTTP/1.1
Host: 196.x.x.x
Accept: */*
Content-Length: 7115
Content-Type: application/x-www-form-urlencoded
Expect: 100-continue

* Recv failure: Connection reset by peer
* Closing connection #0
012 20:23:49 GMT
&lt; Server: Apache/2.2.15 (CentOS)
&lt; X-Powered-By: PHP/5.3.3
&lt; Connection: close
&lt; Transfer-Encoding: chunked
&lt; Content-Type: text/html; charset=UTF-8
&lt; 
* Closing connection #0
</code></pre>

<p>I've added in the following toe remove the default header and still no luck: </p>

<pre><code>curl_setopt ($c, CURLOPT_HTTPHEADER, array( 'Expect:' ) );

&gt; Accept: */* Content-Length: 8414 Content-Type:
&gt; application/x-www-form-urlencoded
&gt; 
&gt; * Recv failure: Connection reset by peer
&gt; * Closing connection #0 r: Apache/2.2.15 (CentOS) &lt; X-Powered-By: PHP/5.3.3 &lt; Connection: close &lt; Transfer-Encoding: chunked &lt;
&gt; Content-Type: text/html; charset=UTF-8 &lt; 
&gt; * Closing connection #0
</code></pre>
","<h2>  Introduction </h2>

<p>The remote server has sent you a RST packet, which indicates an immediate dropping of the connection, rather than the usual handshake.</p>

<h2>  Possible Causes </h2>

<p>A. <strong>TCP/IP</strong> </p>

<p>It might be TCP/IP issue you need to resolve with your host or upgrade your OS most times connection is close before remote server before it finished downloading the content resulting to <code>Connection reset by peer</code>..... </p>

<p>B. <strong>Kannel Bug</strong></p>

<p>Note that there are some issues with TCP window scaling on some Linux kernels after v2.6.17. See the following bug reports for more information:</p>

<p><a href=""https://bugs.launchpad.net/ubuntu/+source/linux-source-2.6.17/+bug/59331"">https://bugs.launchpad.net/ubuntu/+source/linux-source-2.6.17/+bug/59331</a></p>

<p><a href=""https://bugs.launchpad.net/ubuntu/+source/linux-source-2.6.20/+bug/89160"">https://bugs.launchpad.net/ubuntu/+source/linux-source-2.6.20/+bug/89160</a></p>

<p>C. <strong>PHP &amp; CURL Bug</strong> </p>

<p>You are using <code>PHP/5.3.3</code> which has some serious bugs too ... i would advice you work with a more recent version of <code>PHP</code> and <code>CURL</code> </p>

<p><a href=""https://bugs.php.net/bug.php?id=52828"">https://bugs.php.net/bug.php?id=52828</a></p>

<p><a href=""https://bugs.php.net/bug.php?id=52827"">https://bugs.php.net/bug.php?id=52827</a></p>

<p><a href=""https://bugs.php.net/bug.php?id=52202"">https://bugs.php.net/bug.php?id=52202</a></p>

<p><a href=""https://bugs.php.net/bug.php?id=50410"">https://bugs.php.net/bug.php?id=50410</a></p>

<p>D. <strong>Maximum Transmission Unit</strong> </p>

<p>One common cause of this error is that the MTU (Maximum Transmission Unit) size of packets travelling over your network connection have been changed from the default of 1500 bytes. 
If you have configured <code>VPN</code> this most likely must changed during configuration </p>

<p>D. <strong>Firewall : iptables</strong> </p>

<p>If you don't know your way around this guys they would cause some serious issues .. try and access the server you are connecting to check the following</p>

<ul>
<li>You have access to port 80 on that server </li>
</ul>

<p>Example</p>

<pre><code> -A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT`
</code></pre>

<ul>
<li>The Following  is at the last line not before any other ACCEPT </li>
</ul>

<p>Example</p>

<pre><code>  -A RH-Firewall-1-INPUT -j REJECT --reject-with icmp-host-prohibited 
</code></pre>

<ul>
<li><p>Check for ALL DROP , REJECT and make sure they are not blocking your connection</p></li>
<li><p>Temporary allow all connection as see if it foes through </p></li>
</ul>

<h2> Experiment </h2> 

<p>Try a different server or remote server ( So many fee cloud  hosting online)  and test the same script .. if it works then i guesses are as good as true ... <code>You need to update your system</code> </p>

<h2> Others Code Related </h2> 

<p>A. <strong>SSL</strong> </p>

<p>If <code>Yii::app()-&gt;params['pdfUrl']</code> is a url with <code>https</code> not including proper SSL setting can also cause this error in old version of curl </p>

<p>Resolution : Make sure OpenSSL is installed and enabled then add this to your code </p>

<pre><code>curl_setopt($c, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($c, CURLOPT_SSL_VERIFYHOST, false);
</code></pre>

<p>I hope it helps </p>
","10349895"
"Forcing to download a file using PHP","128087","","<p>I have a <code>CSV</code> file on my server, if a user clicks on a link it should download, but instead it opens up in my browser window.</p>

<p>My code looks as follows</p>

<pre><code>&lt;a href=""files/csv/example/example.csv""&gt;
    Click here to download an example of the ""CSV"" file
&lt;/a&gt;
</code></pre>

<p>It's a web server normal webserver where I have all of my dev work on.</p>

<p>I tried someting like</p>

<pre><code>&lt;a href=""files/csv/example/csv.php""&gt;
    Click here to download an example of the ""CSV"" file
&lt;/a&gt;
</code></pre>

<p>Now the contents of my <code>csv.php</code> file:</p>

<pre><code>header('Content-Type: application/csv');
header('Content-Disposition: attachment; filename=example.csv');
header('Pragma: no-cache');
</code></pre>

<p>Now my issue is it's downloading but not my <code>CSV</code> file it's creating a new file.</p>
","<h2>.htaccess Solution</h2>

<p>To brute force all csv's on your server to download, add in your .htaccess file:</p>

<pre><code>AddType application/octet-stream csv
</code></pre>

<h2>PHP Solution</h2>

<pre><code>header('Content-Type: application/csv');
header('Content-Disposition: attachment; filename=example.csv');
header('Pragma: no-cache');
readfile(""/path/to/yourfile.csv"");
</code></pre>
","1465591"
"twig: IF with multiple conditions","128013","","<p>It seem I have problem with a twig if statement.</p>

<pre><code>{%if fields | length &gt; 0 || trans_fields | length &gt; 0 -%}
</code></pre>

<p>The error is:</p>

<pre><code>Unexpected token ""punctuation"" of value ""|"" (""name"" expected) in 
</code></pre>

<p>I can't understand why this doesn't work, it's like if twig was lost with all the pipes.</p>

<p>I've tried this :</p>

<pre><code>{% set count1 = fields | length %}
{% set count2 = trans_fields | length %}
{%if count1 &gt; 0 || count2 &gt; 0 -%}
</code></pre>

<p>but the if also fail.</p>

<p>Then tried this:</p>

<pre><code>{% set count1 = fields | length &gt; 0 %}
{% set count2 = trans_fields | length &gt; 0 %}
{%if count1 || count2 -%}
</code></pre>

<p>And it still doesn't work, same error every time ...</p>

<p>So... that lead me to a really simple question: does Twig support multiple conditions IF ?</p>
","<p>If I recall correctly Twig doesn't support <code>||</code> and <code>&amp;&amp;</code> operators, but requires <code>or</code> and <code>and</code> to be used respectively. I'd also use parentheses to denote the two statements more clearly although this isn't technically a requirement.</p>

<pre><code>{%if ( fields | length &gt; 0 ) or ( trans_fields | length &gt; 0 ) %}
</code></pre>

<p>Expressions</p>

<pre><code>Expressions can be used in {% blocks %} and ${ expressions }.

Operator    Description
==          Does the left expression equal the right expression?
+           Convert both arguments into a number and add them.
-           Convert both arguments into a number and substract them.
*           Convert both arguments into a number and multiply them.
/           Convert both arguments into a number and divide them.
%           Convert both arguments into a number and calculate the rest of the integer division.
~           Convert both arguments into a string and concatenate them.
or          True if the left or the right expression is true.
and         True if the left and the right expression is true.
not         Negate the expression.
</code></pre>

<p>For more complex operations, it may be best to wrap individual expressions in parentheses to avoid confusion:</p>

<pre><code>{% if (foo and bar) or (fizz and (foo + bar == 3)) %}
</code></pre>
","8388696"
"Calling Python in PHP","127848","","<p>I have a Python script I recently wrote that I call using the command line with some options. I now want a very thin web interface to call this script locally on my Mac.</p>

<p>I don't want to go through the minor trouble of installing mod_python or mod_wsgi on my Mac, so I was just going to do a system() or popen() from PHP to call the Python script.</p>

<p>Any better ideas? Thanks in advance!</p>
","<p>Depending on what you are doing, <a href=""http://php.net/manual/en/function.system.php"" rel=""noreferrer"">system()</a> or <a href=""http://php.net/manual/en/function.popen.php"" rel=""noreferrer"">popen()</a> may be perfect.  Use system() if the Python script has no output, or if you want the Python script's output to go directly to the browser.  Use popen() if you want to write data to the Python script's standard input, or read data from the Python script's standard output in php.  popen() will only let you read or write, but not both.  If you want both, check out <a href=""http://us.php.net/manual/en/function.proc-open.php"" rel=""noreferrer"">proc_open()</a>, but with two way communication between programs you need to be careful to avoid deadlocks, where each program is waiting for the other to do something.</p>

<p>If you want to pass user supplied data to the Python script, then the big thing to be careful about is command injection.  If you aren't careful, your user could send you data like ""; evilcommand ;"" and make your program execute arbitrary commands against your will.</p>

<p><a href=""http://www.php.net/manual/en/function.escapeshellarg.php"" rel=""noreferrer"">escapeshellarg()</a> and <a href=""http://www.php.net/manual/en/function.escapeshellcmd.php"" rel=""noreferrer"">escapeshellcmd()</a> can help with this, but personally I like to remove everything that isn't a known good character, using something like</p>

<pre><code>preg_replace('/[^a-zA-Z0-9]/', '', $str)
</code></pre>
","167200"
"PHPExcel auto size column width","127758","","<p>I'm trying to auto size the columns of my sheet. 
I'm writing the file and in the end I try to resize all of my columns.</p>

<pre><code>// Add some data
$objPHPExcel-&gt;setActiveSheetIndex(0)
            -&gt;setCellValue('B1', 'test1111111111111111111111')
            -&gt;setCellValue('C1', 'test1111111111111')
            -&gt;setCellValue('D1', 'test1111111')
            -&gt;setCellValue('E1', 'test11111')
            -&gt;setCellValue('F1', 'test1')
            -&gt;setCellValue('G1', 'test1');

foreach($objPHPExcel-&gt;getActiveSheet()-&gt;getColumnDimension() as $col) {
    $col-&gt;setAutoSize(true);
}
$objPHPExcel-&gt;getActiveSheet()-&gt;calculateColumnWidths();
</code></pre>

<p>The above code doesn't work. Doesn't change the column size to fit the text</p>

<p><strong>UPDATE</strong>
The writer I'm using <code>$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5');</code></p>
","<p>If a column is set to AutoSize, PHPExcel attempts to calculate the column width based on the calculated value of the column (so on the result of any formulae), and any additional characters added by format masks such as thousand separators. </p>

<p>By default, this is an <code>estimated</code> width: a more accurate calculation method is available, based on using GD, which can also handle font style features such as bold and italic; but this is a much bigger overhead, so it is turned off by default. You can enable the more accurate calculation using</p>

<pre><code>PHPExcel_Shared_Font::setAutoSizeMethod(PHPExcel_Shared_Font::AUTOSIZE_METHOD_EXACT);
</code></pre>

<p>However, autosize doesn't apply to all Writer formats... for example CSV. You don't mention what writer you're using.</p>

<p>But you also need to identify the columns to set dimensions:</p>

<pre><code>foreach(range('B','G') as $columnID) {
    $objPHPExcel-&gt;getActiveSheet()-&gt;getColumnDimension($columnID)
        -&gt;setAutoSize(true);
}
</code></pre>

<p><code>$objPHPExcel-&gt;getActiveSheet()-&gt;getColumnDimension()</code> expects a column ID.</p>

<p><code>$objPHPExcel-&gt;getActiveSheet()-&gt;getColumnDimensions()</code> will return an array of all the defined column dimension records; but unless a column dimension record has been explicitly created (perhaps by loading a template, or by manually calling <code>getColumnDimension()</code>) then it won't exist (memory saving).</p>
","16762003"
"How to get a variable name as a string in PHP?","127582","","<p>Say i have this PHP code:</p>

<pre><code>$FooBar = ""a string"";
</code></pre>

<p>i then need a function like this:</p>

<pre><code>print_var_name($FooBar);
</code></pre>

<p>which prints:</p>

<pre><code>FooBar
</code></pre>

<p>Any Ideas how to achieve this? Is this even possible in PHP?</p>
","<p>You could use <a href=""http://php.net/get_defined_vars"" rel=""noreferrer"">get_defined_vars()</a> to find the name of a variable that has the same value as the one you're trying to find the name of. Obviously this will not always work, since different variables often have the same values, but it's the only way I can think of to do this.</p>

<p>Edit: get_defined_vars() doesn't seem to be working correctly, it returns 'var' because $var is used in the function itself. $GLOBALS seems to work so I've changed it to that.</p>

<pre><code>function print_var_name($var) {
    foreach($GLOBALS as $var_name =&gt; $value) {
        if ($value === $var) {
            return $var_name;
        }
    }

    return false;
}
</code></pre>

<p>Edit: to be clear, there is no good way to do this in PHP, which is probably because you shouldn't have to do it. There are probably better ways of doing what you're trying to do.</p>
","255335"
"Fatal error: Call to undefined function mb_detect_encoding()","127520","","<p>I receive this error after trying to set up LAMP by following <a href=""http://www.youtube.com/watch?v=FJC2iGt_2bc"" rel=""nofollow noreferrer"">this tutorial</a>, and I find myself receiving the above error after trying to set up phpmyadmin.</p>

<blockquote>
  <p>Fatal error: Call to undefined function mb_detect_encoding() in
  C:\WebServer\Apache\htdocs\phpmyadmin\libraries\php-gettext\gettext.inc
  on line 177</p>
</blockquote>

<p>I followed the advice over here: <a href=""https://stackoverflow.com/questions/13351635/php-fatal-error-when-trying-to-access-phpmyadmin-mb-detect-encoding"">PHP Fatal error when trying to access phpmyadmin mb_detect_encoding</a>, and made those changes. </p>

<p>When I run <code>phpinfo()</code>, I see that support for MySQL and <code>mb_string</code> are enabled as shown below: </p>

<p><img src=""https://i.stack.imgur.com/EXZ5b.png"" alt=""mb_string""></p>

<p><img src=""https://i.stack.imgur.com/0ReUg.png"" alt=""MySQL""></p>

<p><img src=""https://i.stack.imgur.com/t7Xep.png"" alt=""mysqli""></p>
","<p>Install the gd library also.</p>

<p>check this link
<a href=""http://www.php.net/manual/en/mbstring.installation.php"">http://www.php.net/manual/en/mbstring.installation.php</a></p>
","17205297"
"Select from where field not equal to Mysql Php","127473","","<p>I'm just wondering what kind of mysql command i could execute in php that would select all items from a certain table where columna is not equal to x and columnb is not equal to x</p>

<p>Something like: <code>select something from table where columna does not equal x and columnb does not equal x</code></p>

<p>Any ideas?</p>
","<p>The key is the sql query, which you will set up as a string:</p>

<pre><code>$sqlquery = ""SELECT field1, field2 FROM table WHERE NOT columnA = 'x' AND NOT columbB = 'y'"";
</code></pre>

<p>Note that there are a lot of ways to specify NOT. Another one that works just as well is:</p>

<pre><code>$sqlquery = ""SELECT field1, field2 FROM table WHERE columnA != 'x' AND columbB != 'y'"";
</code></pre>

<p>Here is a full example of how to use it:</p>

<pre><code>$link = mysql_connect($dbHost,$dbUser,$dbPass) or die(""Unable to connect to database"");
mysql_select_db(""$dbName"") or die(""Unable to select database $dbName"");
$sqlquery = ""SELECT field1, field2 FROM table WHERE NOT columnA = 'x' AND NOT columbB = 'y'"";
$result=mysql_query($sqlquery);

while ($row = mysql_fetch_assoc($result) {
//do stuff
}
</code></pre>

<p>You can do whatever you would like within the above while loop. Access each field of the table as an element of the <code>$row array</code> which means that <code>$row['field1']</code> will give you the value for <code>field1</code> on the current row, and <code>$row['field2']</code> will give you the value for <code>field2</code>.</p>

<p>Note that if the column(s) could have <code>NULL</code> values, those will not be found using either of the above syntaxes. You will need to add clauses to include <code>NULL</code> values:</p>

<pre><code>$sqlquery = ""SELECT field1, field2 FROM table WHERE (NOT columnA = 'x' OR columnA IS NULL) AND (NOT columbB = 'y' OR columnB IS NULL)"";
</code></pre>
","3286678"
"WampServer orange icon","127201","","<p>I am having problems with Wamp Server, the icon will never turn green. It is constantly stuck at orange.</p>

<p>I have tried many ways, editing HOSTS file, .config files, disabling IIS, changing SKYPE's port, quitting SKYPE, disabling World Wide Web publishing services etc... And under wamp server icon > Apache > Test port 80, it states that Apache is using that port.</p>

<p>I am running Windows 8 64 bit and Wamp Server 2.4. Any help would be appreciated.</p>
","<p>Before you can fix anything you need to know which service has not started, Apache or MySQL. </p>

<p>As the TEST PORT 80 utility is saying Apache is running its probably the MySQL service that has not started. Unless you have another Apache running!</p>

<p>So which service has not started???</p>

<p>If the wampmanager icon is not GREEN then one of the services ( Apache/MySQL ) has not started properly.</p>

<p><strong>How to tell which service is not running if the wampmanager icon is orange.</strong></p>

<p>Left click the wampmanager icon to reveal the menu-> Apache -> Service
If the <strong>Start/Resume service</strong> menu is Green then Apache <strong><em>IS NOT</em></strong> running.</p>

<p>Left click the wampmanager icon to reveal the menu-> MySQL -> Service
If the <strong>Start/Resume service</strong> menu is Green then MySQL <strong><em>IS NOT</em></strong> running.</p>

<p>If Apache is the service that is not running it is normally, but not always, because something else has captured port 80.</p>

<p>Now do,
Left click the wampmanager icon to reveal the menu-> Apache -> Service -> Test port 80
This will launch a command window and display some information about what, if anything is using port 80.</p>

<p>Whatever it is should be re-configured to not use port 80 or uninstalled if you are not using it.</p>

<p>If port 80 is not the problem look for errors in the appropriate error log ( use the wamp manager menus to view the error logs )</p>

<p>If these do not exists or show no errors then also check the Windows Event Viewer
Start -> Administrative Tools -> Event Viewer
And look in the 'Windows Logs' -> Application' section accessed from the menu on the left of the dialog for error messages from Apache and or MySQL.</p>

<h3>If its MYSQL that has not started.</h3>

<p>Check the mysql error log by using the menus</p>

<pre><code>wampmanager-&gt;MySQL-&gt;error log
</code></pre>

<p>Check the Windows Event log for messages from MYSQL</p>

<p>Check you dont have another MYSQL Server instance running.</p>

<p><strong>How to Configure SKYPE so it does not require port 80 or 443</strong></p>

<p>Run SKYPE
then using the menus do this:
Tools -> Options -> Advanced -> Connection
Un-Check the checkbox next to 'Use port 80 and 443 as alternatives for incomming connections'
Now restart SKYPE for these changes to take effect.</p>

<p>If you are running Windows 8 SKYPE comes as an app and this cannot ( as yet ) be configured in this way.
However if you uninstall the SKYPE app and install SKYPE in the old way, you can reconfigure it, and it works just as well.</p>
","21678795"
"How to use WHERE IN with Doctrine 2","126971","","<p>I have the following code which gives me the error:</p>

<pre><code>Message: Invalid parameter number: number of bound variables does not match number of tokens 
</code></pre>

<p>Code:</p>

<pre><code>public function getCount($ids, $outcome)
{
    if (!is_array($ids)) {
        $ids = array($ids);
    }
    $qb = $this-&gt;getEntityManager()-&gt;createQueryBuilder();
    $qb-&gt;add('select', $qb-&gt;expr()-&gt;count('r.id'))
       -&gt;add('from', '\My\Entity\Rating r');
    if ($outcome === 'wins') { 
        $qb-&gt;add('where', $qb-&gt;expr()-&gt;in('r.winner', array('?1')));
    }
    if ($outcome === 'fails') {
        $qb-&gt;add('where', $qb-&gt;expr()-&gt;in('r.loser', array('?1')));
    }
    $qb-&gt;setParameter(1, $ids);
    $query = $qb-&gt;getQuery();
    //die('q = ' . $qb);
    return $query-&gt;getSingleScalarResult();
}
</code></pre>

<p>Data (or $ids):</p>

<pre><code>Array
(
    [0] =&gt; 566
    [1] =&gt; 569
    [2] =&gt; 571
)
</code></pre>

<p>DQL result:</p>

<pre><code>q = SELECT COUNT(r.id) FROM \My\Entity\Rating r WHERE r.winner IN('?1')
</code></pre>
","<p>In researching this issue, I found something that will be important to anyone running into this same issue and looking for a solution.</p>

<p>From the original post, the following line of code:</p>

<pre><code>$qb-&gt;add('where', $qb-&gt;expr()-&gt;in('r.winner', array('?1')));
</code></pre>

<p>Wrapping the named parameter as an array causes the bound parameter number issue. By removing it from its array wrapping:</p>

<pre><code>$qb-&gt;add('where', $qb-&gt;expr()-&gt;in('r.winner', '?1'));
</code></pre>

<p>This issue should be fixed. This might have been a problem in previous versions of Doctrine, but it is fixed in the most recent versions of 2.0.</p>
","6319643"
"How to get everything after a certain character?","126924","","<p>I've got a string and I'd like to get everything after a certain value. The string always starts off with a set of numbers and then an underscore. I'd like to get the rest of the string after the underscore. So for example if I have the following strings and what I'd like returned:</p>

<pre><code>123_String -&gt; String
233718_This_is_a_string -&gt; This_is_a_string
83_Another Example -&gt; Another Example
</code></pre>

<p>How can I go about doing something like this?</p>
","<p>The <a href=""http://php.net/strpos"" rel=""noreferrer""><code>strpos()</code></a> finds the offset of the underscore, then substr grabs everything from that index plus 1, onwards.</p>

<pre><code>$data = ""123_String"";    
$whatIWant = substr($data, strpos($data, ""_"") + 1);    
echo $whatIWant;
</code></pre>

<hr>

<p>If you also want to check if the underscore character (<code>_</code>) exists in your string before trying to get it, you can use the following:</p>

<pre><code>if (($pos = strpos($data, ""_"")) !== FALSE) { 
    $whatIWant = substr($data, $pos+1); 
}
</code></pre>
","11405509"
"mysqli_select_db() expects parameter 1 to be mysqli, string given","126915","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select"">mysql_fetch_array() expects parameter 1 to be resource, boolean given in select</a>  </p>
</blockquote>



<p>I am new to Mysqli_* and i am getting these errors:</p>

<blockquote>
  <p>Warning: mysqli_select_db() expects parameter 1 to be mysqli, string
  given in D:\Hosting\9864230\html\includes\connection.php on line 11</p>
  
  <p>Warning: mysqli_error() expects exactly 1 parameter, 0 given in
  D:\Hosting\9864230\html\includes\connection.php on line 13</p>
</blockquote>

<p>Database selection failed:</p>

<pre><code>&lt;?php
require(""constants.php"");

// 1. Create a database connection
$connection = mysqli_connect(DB_SERVER,DB_USER,DB_PASS);
if (!$connection) {
    die(""Database connection failed: "" . mysqli_error());
}

// 2. Select a database to use 
$db_select = mysqli_select_db(DB_NAME,$connection);
if (!$db_select) {
    die(""Database selection failed: "" . mysqli_error());
}
?&gt;
</code></pre>
","<p>Your arguments are in the wrong order. The connection comes first according to the <a href=""http://php.net/manual/en/mysqli.select-db.php"" rel=""noreferrer"">docs</a></p>

<pre><code>&lt;?php
require(""constants.php"");

// 1. Create a database connection
$connection = mysqli_connect(DB_SERVER,DB_USER,DB_PASS);
if (!$connection) {
    die(""Database connection failed: "" . mysqli_error());
}

// 2. Select a database to use 
$db_select = mysqli_select_db($connection, DB_NAME);
if (!$db_select) {
    die(""Database selection failed: "" . mysqli_error());
}
?&gt;
</code></pre>
","13979238"
"Error: ""Input is not proper UTF-8, indicate encoding !"" using PHP's simplexml_load_string","126609","","<p>I'm getting the error:</p>

<p><code>parser error : Input is not proper UTF-8, indicate encoding ! Bytes: 0xED 0x6E 0x2C 0x20</code></p>

<p>When trying to process an XML response using <code>simplexml_load_string</code> from a 3rd party source. The raw XML response does declare the content type:</p>

<p><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;</code></p>

<p>Yet it seems that the XML is not really UTF-8. The langauge of the XML content is Spanish and contain words like <code>Dublín</code> in the XML.</p>

<p>I'm unable to get the 3rd party to sort out their XML.</p>

<p>How can I pre-process the XML and fix the encoding incompatibilities?</p>

<p>Is there a way to detect the correct encoding for a XML file?</p>
","<p>Your 0xED 0x6E 0x2C 0x20 bytes correspond to ""ín, "" in ISO-8859-1, so it looks like your content is in ISO-8859-1, not UTF-8. Tell your data provider about it and ask them to fix it, because if it doesn't work for you it probably doesn't work for other people either.</p>

<p>Now there are a few ways to work it around, which you should only use <strong><em>if you cannot load the XML normally</em></strong>. One of them would be to use <code>utf8_encode()</code>. The downside is that if that XML contains both valid UTF-8 and some ISO-8859-1 then the result will contain <a href=""http://en.wikipedia.org/wiki/Mojibake"" rel=""noreferrer"">mojibake</a>. Or you can try to convert the string from UTF-8 to UTF-8 using <code>iconv()</code> or mbstring, and hope they'll fix it for you. (they won't, but you can at least ignore the invalid characters so you can load your XML)</p>

<p>Or you can take the long, long road and validate/fix the sequences by yourself. That will take you a while depending on how familiar you are with UTF-8. Perhaps there are libraries out there that would do that, although I don't know any.</p>

<p>Either way, notify your data provider that they're sending invalid data so that they can fix it.</p>

<hr>

<p>Here's a partial fix. It will definitely not fix everything, but will fix some of it. Hopefully enough for you to get by until your provider fix their stuff.</p>

<pre><code>function fix_latin1_mangled_with_utf8_maybe_hopefully_most_of_the_time($str)
{
    return preg_replace_callback('#[\\xA1-\\xFF](?![\\x80-\\xBF]{2,})#', 'utf8_encode_callback', $str);
}

function utf8_encode_callback($m)
{
    return utf8_encode($m[0]);
}
</code></pre>
","2510231"
"nginx: connect() failed (111: Connection refused) while connecting to upstream","126370","","<p>Trying to deploy my first portal .</p>

<p>I am getting 502 gateway timeout error in browser when i was sending the request through browser  </p>

<p>when i checked the logs , i got this error</p>

<pre><code> 2014/02/03 09:00:32 [error] 16607#0: *1 connect() failed (111: Connection refused) while connecting to upstream, client: 14.159.131.19, server: foo.com, request: ""GET HTTP/1.1"", upstream: ""fastcgi://127.0.0.1:9000"", host: ""22.11.180.154""
</code></pre>

<p>is there any problem related to permissions</p>
","<p>I don't think that solution would work anyways because you will see some error message in your error log file.</p>

<p>The solution was a lot easier than what I thought.</p>

<p>simply, open the following path to your php5-fpm </p>

<pre><code>sudo nano /etc/php5/fpm/pool.d/www.conf
</code></pre>

<p>or if you're the admin 'root'</p>

<pre><code>nano /etc/php5/fpm/pool.d/www.conf
</code></pre>

<p>Then find this line and uncomment it:</p>

<pre><code>listen.allowed_clients = 127.0.0.1
</code></pre>

<p>This solution will make you be able to use <strong>listen = 127.0.0.1:9000</strong> in your vhost blocks</p>

<p>like this: <strong>fastcgi_pass 127.0.0.1:9000;</strong></p>

<p>after you make the modifications, all you need is to restart or reload both Nginx and Php5-fpm</p>

<p><strong>Php5-fpm</strong></p>

<pre><code>sudo service php5-fpm restart
</code></pre>

<p>or</p>

<pre><code>sudo service php5-fpm reload
</code></pre>

<p><strong>Nginx</strong></p>

<pre><code>sudo service nginx restart
</code></pre>

<p>or</p>

<pre><code>sudo service nginx reload
</code></pre>

<p>From the comments:</p>

<p>Also comment </p>

<pre><code>;listen = /var/run/php5-fpm.sock 
</code></pre>

<p>and add </p>

<pre><code>listen = 9000
</code></pre>
","24198313"
"Setting PHP default encoding to utf-8?","126304","","<p>All,</p>

<p>In the ""PHP Cookbook"", they say (p.589) that to properly set the char encoding of outgoing data to utf-8 it is necessary to edit the <code>default_encoding</code> configuration to utf-8.</p>

<p>However, I cannot find this configuration in <code>php.ini</code>.  Should I simply add a line that would say <code>default_encoding = ""utf-8""</code> ?</p>

<p>I do have a <code>;default_charset = ""iso-8859-1""</code> .  As you can see (<code>;</code>), right now it is not activated.  Should I remove the semi-colon and set it to <code>""utf-8""</code>?  Does that take care of the default encoding?</p>

<p>I also found other encoding directives that I don't know what to do about:</p>

<pre><code>[iconv]
;iconv.input_encoding = ISO-8859-1
;iconv.internal_encoding = ISO-8859-1
;iconv.output_encoding = ISO-8859-1
...
; http://php.net/exif.encode-unicode
;exif.encode_unicode = ISO-8859-15
...
;mssql.charset = ""ISO-8859-1""
...
;exif.encode_unicode = ISO-8859-15
</code></pre>

<p>Is there any reason why I shouldn't simply replace them all with <code>utf-8</code>?</p>
","<p>You should set your <code>default_charset</code> to UTF-8:</p>

<pre><code>default_charset = ""utf-8""
</code></pre>

<p>(PHP Cookbook may have a typo in it if they ask you to change the <code>default_encoding</code> — I've never heard of it.)</p>

<p>You'll also want to make sure that your webserver is set to output UTF-8 if you're going to outputting UTF-8 encoded characters. In Apache this can be set by in the httpd.conf file:</p>

<pre><code>AddDefaultCharset UTF-8
</code></pre>

<p>As for modifying the  <code>iconv</code>, <code>exif</code>, and  <code>mssql</code> encoding settings, you probably don't need to set these (your settings have these commented out anyhow) but it's a good idea to change them all to UTF-8 anyhow.</p>
","9351983"
"Dynamically generating a QR code with PHP","126282","","<p>I'm trying to generate QR codes on my website. All they have to do is have a URL in them, which a variable on my site will provide. What would be the easiest way to do this?</p>
","<p>It's worth adding that, in addition to the QR codes library posted by <a href=""https://stackoverflow.com/questions/5943368/dynamically-generating-a-qr-code-with-php/5943375#5943375"">@abaumg</a>, Google provides a <del><a href=""http://code.google.com/apis/chart/image/docs/gallery/qr_codes.html"" rel=""noreferrer"">QR Codes API</a></del> <a href=""http://code.google.com/apis/chart/infographics/docs/qr_codes.html"" rel=""noreferrer"">QR Codes API</a><sup>many thanks to <a href=""https://stackoverflow.com/users/336783/toukakoukan"">@Toukakoukan</a> for the <a href=""https://stackoverflow.com/questions/5943368/dynamically-generating-a-qr-code-with-php/5943398#comment-8803253"">link update</a></sup>.</p>

<p>To use this , basically:</p>

<pre><code>https://chart.googleapis.com/chart?chs=300x300&amp;cht=qr&amp;chl=http%3A%2F%2Fwww.google.com%2F&amp;choe=UTF-8
</code></pre>

<ul>
<li><code>300x300</code> is the size of the QR image you want to generate,</li>
<li>the <code>chl</code> is the url-encoded string you want to change into a QR code, and</li>
<li>the <code>choe</code> is the (optional) encoding.</li>
</ul>

<p>The link, above, gives more detail, but to use it just have the <code>src</code> of an image point to the manipulated value, like so:</p>

<pre><code>&lt;img src=""https://chart.googleapis.com/chart?chs=300x300&amp;cht=qr&amp;chl=http%3A%2F%2Fwww.google.com%2F&amp;choe=UTF-8"" title=""Link to Google.com"" /&gt;
</code></pre>

<p>Demo:</p>

<p><img src=""https://chart.googleapis.com/chart?chs=300x300&amp;cht=qr&amp;chl=http%3A%2F%2Fwww.google.com%2F&amp;choe=UTF-8"" title=""Link to Google.com"" /></p>
","5943398"
"getting date format m-d-Y H:i:s.u from milliseconds","126264","","<p>I am trying to get a formatted date, including the microseconds from milliseconds.</p>

<p>The only problem is I keep getting 000000</p>

<pre><code>date(""m-d-Y H:i:s.u"", $milliseconds/1000);
</code></pre>

<p>ex. 07-28-2013 11:26:14.000000</p>
","<p><a href=""http://php.net/manual/en/function.date.php"" rel=""noreferrer"">PHP.NET says</a>:</p>

<blockquote>
  <p>Microseconds (added in PHP 5.2.2). Note that date() will always generate 000000 since it takes an integer parameter, whereas DateTime::format() does support microseconds if DateTime was created with microseconds.</p>
</blockquote>

<p>So use as simple:</p>

<pre><code>$micro_date = microtime();
$date_array = explode("" "",$micro_date);
$date = date(""Y-m-d H:i:s"",$date_array[1]);
echo ""Date: $date:"" . $date_array[0].""&lt;br&gt;"";
</code></pre>

<p>Recommended and use <code>dateTime()</code> class from referenced: </p>

<pre><code>$t = microtime(true);
$micro = sprintf(""%06d"",($t - floor($t)) * 1000000);
$d = new DateTime( date('Y-m-d H:i:s.'.$micro, $t) );

print $d-&gt;format(""Y-m-d H:i:s.u""); // note at point on ""u""
</code></pre>

<p>Note <code>u</code> is microseconds (1 seconds = 1000000 µs).</p>

<p>More sample: </p>

<blockquote>
  <p><a href=""http://php.net/manual/en/class.datetime.php#108970"" rel=""noreferrer"">$d2=new
  DateTime(""2012-07-08 11:14:15.889342"");</a></p>
</blockquote>

<p>Reference of <code>dateTime()</code> on php.net: <a href=""http://php.net/manual/en/datetime.construct.php"" rel=""noreferrer"">http://php.net/manual/en/datetime.construct.php</a></p>

<p><em>I've answered on question as short and simplify to author. Please see for more information to author: <a href=""https://stackoverflow.com/questions/17909871/getting-date-format-m-d-y-his-u-from-milliseconds/17909891#29598719"">getting date format m-d-Y H:i:s.u from milliseconds</a></em></p>
","17909891"
"How to get the first word of a sentence in PHP?","126129","","<p>I want to extract the first word of a variable from a string. For example, take this input:</p>

<pre><code>&lt;?php $myvalue = 'Test me more'; ?&gt;
</code></pre>

<p>The resultant output should be <code>Test</code>, which is the first word of the input.
How can I do this?</p>
","<p>You can use the <a href=""http://php.net/manual/en/function.explode.php"" rel=""noreferrer"">explode</a> function as follows:</p>

<pre><code>$myvalue = 'Test me more';
$arr = explode(' ',trim($myvalue));
echo $arr[0]; // will print Test
</code></pre>
","2476811"
"How can I ping a server port with PHP?","125970","","<p>I want a PHP script which allows you to ping an IP address and a port number (<code>ip:port</code>). I found a similar script but it works only for websites, not <code>ip:port</code>.</p>

<pre><code>&lt;?php

function ping($host, $port, $timeout) 
{ 
  $tB = microtime(true); 
  $fP = fSockOpen($host, $port, $errno, $errstr, $timeout); 
  if (!$fP) { return ""down""; } 
  $tA = microtime(true); 
  return round((($tA - $tB) * 1000), 0)."" ms""; 
}

//Echoing it will display the ping if the host is up, if not it'll say ""down"".
echo ping(""www.google.com"", 80, 10);

?&gt;
</code></pre>

<p>I want this for a game server.</p>

<p>The idea is that I can type in the IP address and port number, and I get the ping response.</p>
","<p>I think the answer to <a href=""https://stackoverflow.com/questions/7800680/pinging-ip-with-a-port-returns-nothing-php-apache"">this question</a> pretty much sums up the problem with your question.</p>

<blockquote>
  <p>If what you want to do is find out whether a given host will accept
  TCP connections on port 80, you can do this:</p>

<pre><code>$host = '193.33.186.70'; 
$port = 80; 
$waitTimeoutInSeconds = 1; 
if($fp = fsockopen($host,$port,$errCode,$errStr,$waitTimeoutInSeconds)){   
   // It worked 
} else {
   // It didn't work 
} 
fclose($fp);
</code></pre>
  
  <p>For anything other than TCP it will be more difficult (although since
  you specify 80, I guess you are looking for an active HTTP server, so
  TCP is what you want). TCP is sequenced and acknowledged, so you will
  implicitly receive a returned packet when a connection is successfully
  made. Most other transport protocols (commonly UDP, but others as
  well) do not behave in this manner, and datagrams will not be
  acknowledged unless the overlayed Application Layer protocol
  implements it.</p>
  
  <p>The fact that you are asking this question in this manner tells me you
  have a fundamental gap in your knowledge on <a href=""http://en.wikipedia.org/wiki/Transport_Layer"" rel=""nofollow noreferrer"">Transport Layer</a> protocols.
  You should read up on <a href=""http://en.wikipedia.org/wiki/Internet_Control_Message_Protocol"" rel=""nofollow noreferrer"">ICMP</a> and <a href=""http://en.wikipedia.org/wiki/Transmission_Control_Protocol"" rel=""nofollow noreferrer"">TCP</a>, as well as the <a href=""http://en.wikipedia.org/wiki/Osi_model"" rel=""nofollow noreferrer"">OSI Model</a>.</p>
</blockquote>

<p>Also, here's a <a href=""http://tournasdimitrios1.wordpress.com/2010/10/15/check-your-server-status-a-basic-ping-with-php/"" rel=""nofollow noreferrer"">slightly cleaner</a> version to ping to hosts.</p>

<pre><code>// Function to check response time
function pingDomain($domain){
    $starttime = microtime(true);
    $file      = fsockopen ($domain, 80, $errno, $errstr, 10);
    $stoptime  = microtime(true);
    $status    = 0;

    if (!$file) $status = -1;  // Site is down
    else {
        fclose($file);
        $status = ($stoptime - $starttime) * 1000;
        $status = floor($status);
    }
    return $status;
}
</code></pre>
","9843251"
"php form action php self","125941","","<p>I have a php form like this.</p>

<pre><code>&lt;form name=""form1"" id=""mainForm"" method=""post""enctype=""multipart/form-data"" action=""&lt;?php echo $_SERVER['PHP_SELF'];?&gt;""&gt;

&lt;/form
</code></pre>

<p>In form action I want to use page name with parameters. like <code>house.php?p_id=10111</code> . But $_SERVER['PHP_SELF'] gives only the <code>house.php</code> (My page full url is <code>house.php?p_id=10111</code> like this) Please help me to solve this problem. thanks.</p>
","<p>How about leaving it empty, what is wrong with that?</p>

<pre><code>&lt;form name=""form1"" id=""mainForm"" method=""post"" enctype=""multipart/form-data"" action=""""&gt;

&lt;/form&gt;
</code></pre>

<p>Also, you can omit the action attribute and it will work as expected.</p>
","6862765"
"Does PHP have threading?","125728","","<p>I found this <a href=""http://pecl.php.net/package/threads"" rel=""noreferrer"">PECL package called threads</a>, but there is not a release yet. And nothing is coming up on the PHP website.</p>
","<p>There is nothing available that I'm aware of. The next best thing would be to simply have one script execute another via CLI, but that's a bit rudimentary. Depending on what you are trying to do and how complex it is, this may or may not be an option.</p>
","209799"
"Error handling with PHPMailer","125499","","<p>I'm trying to use PHPMailer for a small project, but I'm a bit confused about error handling with this software. Hoping someone has experience with it. When I've set up an email and I use:</p>

<pre><code>$result = $mail-&gt;Send();

if(!$result) {
    // There was an error
    // Do some error handling things here
} else {
    echo ""Email successful"";
}
</code></pre>

<p>Which works fine, more or less. The problem is when there's an error, PHPMailer also seems to echo the error out, so if there's a problem, it just sends that info directly to the browser, essentially breaking any error handling I""m trying to do.</p>

<p>Is there a way to silence these messages? Its not throwing an exception, its just printing out the error, which in my test case is:</p>

<pre><code>invalid address: @invalid@email You must provide at least one recipient email address.
</code></pre>

<p>Its meant to be an error, but it should be residing in $mail->ErrorInfo; not being echo'd out by the software.</p>
","<p>PHPMAiler uses Exceptions. Try to adopt the following <a href=""http://phpmailer.worxware.com/index.php?pg=exampleamail"" rel=""noreferrer"">code</a>:</p>

<pre><code>require_once '../class.phpmailer.php';

$mail = new PHPMailer(true); //defaults to using php ""mail()""; the true param means it will throw exceptions on errors, which we need to catch

try {
  $mail-&gt;AddReplyTo('name@yourdomain.com', 'First Last');
  $mail-&gt;AddAddress('whoto@otherdomain.com', 'John Doe');
  $mail-&gt;SetFrom('name@yourdomain.com', 'First Last');
  $mail-&gt;AddReplyTo('name@yourdomain.com', 'First Last');
  $mail-&gt;Subject = 'PHPMailer Test Subject via mail(), advanced';
  $mail-&gt;AltBody = 'To view the message, please use an HTML compatible email viewer!'; // optional - MsgHTML will create an alternate automatically
  $mail-&gt;MsgHTML(file_get_contents('contents.html'));
  $mail-&gt;AddAttachment('images/phpmailer.gif');      // attachment
  $mail-&gt;AddAttachment('images/phpmailer_mini.gif'); // attachment
  $mail-&gt;Send();
  echo ""Message Sent OK\n"";
} catch (phpmailerException $e) {
  echo $e-&gt;errorMessage(); //Pretty error messages from PHPMailer
} catch (Exception $e) {
  echo $e-&gt;getMessage(); //Boring error messages from anything else!
}
</code></pre>
","2386576"
"How to enable MySQLi extension in php 7?","125456","","<p>I have installed PHP 7, MySQL 5.5.47 on Ubuntu 14.04.
I have checked installed extension using :</p>

<pre><code>sudo apt-cache search php7-*
</code></pre>

<p>Its output me:</p>

<pre><code>php7.0-common - Common files for packages built from the PHP source
libapache2-mod-php7.0 - server-side, HTML-embedded scripting language (Apache 2 module)
php7.0-cgi - server-side, HTML-embedded scripting language (CGI binary)
php7.0-cli - command-line interpreter for the PHP scripting language
php7.0-phpdbg - server-side, HTML-embedded scripting language (PHPDBG binary)
php7.0-fpm - server-side, HTML-embedded scripting language (FPM-CGI binary)
libphp7.0-embed - HTML-embedded scripting language (Embedded SAPI library)
php7.0-dev - Files for PHP7.0 module development
php7.0-dbg - Debug symbols for PHP7.0
php7.0-curl - CURL module for PHP
php7.0-enchant - Enchant module for PHP
php7.0-gd - GD module for PHP
php7.0-gmp - GMP module for PHP
php7.0-imap - IMAP module for PHP
php7.0-interbase - Interbase module for PHP
php7.0-intl - Internationalisation module for PHP
php7.0-ldap - LDAP module for PHP
php7.0-mcrypt - libmcrypt module for PHP
php7.0-readline - readline module for PHP
php7.0-odbc - ODBC module for PHP
php7.0-pgsql - PostgreSQL module for PHP
php7.0-pspell - pspell module for PHP
php7.0-recode - recode module for PHP
php7.0-snmp - SNMP module for PHP
php7.0-tidy - tidy module for PHP
php7.0-xmlrpc - XMLRPC-EPI module for PHP
php7.0-xsl - XSL module for PHP
php7.0 - server-side, HTML-embedded scripting language (metapackage)
php7.0-json - JSON module for PHP
php-all-dev - package depending on all supported PHP development packages
php7.0-sybase - Sybase module for PHP
php7.0-sqlite3 - SQLite3 module for PHP
php7.0-mysql - MySQL module for PHP
php7.0-opcache - Zend OpCache module for PHP
php7.0-bz2 - bzip2 module for PHP
</code></pre>

<p>I am not able to see MySQLi extension using phpinfo() as well,please let me know,how can I enable/install MySQLi extension in PHP 7.
That's why I cannot use phpmyadmin, its says ""The mysqli extension is missing.""</p>

<p><em>Note: I am new in php7.</em></p>
","<p>I got the solution,I am able to enable MySQLi extension in php.ini, just uncommented this line in php.ini </p>

<pre><code>extension=php_mysqli.dll
</code></pre>

<p>Now MySQLi working well.Here is php.ini file path in apache2,PHP 7, Ubuntu 14.04 environment:</p>

<pre><code>/etc/php/7.0/apache2/php.ini
</code></pre>

<p>By Default MySQLi extension is disable in PHP 7. </p>
","35425511"
"PHP how to get the base domain/url?","125441","","<pre><code>function url(){
    if(isset($_SERVER['HTTPS'])){
        $protocol = ($_SERVER['HTTPS'] &amp;&amp; $_SERVER['HTTPS'] != ""off"") ? ""https"" : ""http"";
    }
    else{
        $protocol = 'http';
    }
    return $protocol . ""://"" . $_SERVER['HTTP_HOST'];
}
</code></pre>

<p>For example with the function above, it works fine if I work with the same directory, but if I make a sub directory, and work in it, it will give me the location of the sub directory also for example. I just want <code>example.com</code> but it gives me <code>example.com/sub</code> if I'm working in the folder <code>sub</code>. If I'm using the main directory,the function works fine. Is there an alternative to <code>$_SERVER['HTTP_HOST']</code>?</p>

<p>Or how could I fix my function/code to get the main url only? Thanks.</p>
","<p>Use <code>SERVER_NAME</code>.</p>

<pre><code>echo $_SERVER['SERVER_NAME']; //Outputs www.example.com
</code></pre>
","17201254"
"How to populate HTML dropdown list with values from database","125413","","<p>as part of a HTML form I am creating I would like to have a dropdown list which will list all the usernames in my database.</p>

<p>I thought the following code would do the trick but the dropdown list is empty - could someone assist me in what i'm doing wrong? Thanks.</p>

<pre><code>&lt;tr&gt;
&lt;td&gt;Owner&lt;/td&gt;
&lt;td&gt;
&lt;select name=""owner""&gt;
&lt;?php 

$sql = mysqli_query($connection, ""SELECT username FROM users"");

while ($row = $sql-&gt;fetch_assoc()){

?&gt;
&lt;option value=""owner1""&gt;&lt;?php echo $row['username']; ?&gt;&lt;/option&gt;

&lt;?php
// close while loop 
}
?&gt;
&lt;/td&gt;
&lt;/tr&gt;
</code></pre>
","<p>My guess is that you have a problem since you don't close your select-tag after the loop. Could that do the trick?</p>

<pre><code>&lt;select name=""owner""&gt;
&lt;?php 
$sql = mysqli_query($connection, ""SELECT username FROM users"");
while ($row = $sql-&gt;fetch_assoc()){
echo ""&lt;option value=\""owner1\""&gt;"" . $row['username'] . ""&lt;/option&gt;"";
}
?&gt;
&lt;/select&gt;
</code></pre>
","8022373"
"how to create virtual host on XAMPP","125405","","<p>I am sure this question is being asked many times but I am not encounter with a problem. I am using XAMPP where i configure Zend framework.</p>

<p>XAMPP is running on <strong>PORT 8081</strong> as <strong>80</strong> is being occupied by some windows process I need to use Virtual host for that I configure with following code in <strong>httpd-vhosts.config</strong> present in <strong>C:/xampp/apache/config/extra/</strong></p>

<pre><code>&lt;VirtualHost *:80&gt;
ServerName comm-app.local
DocumentRoot ""C:/xampp/htdocs/CommunicationApp/public""
SetEnv APPLICATION_ENV ""development""
    &lt;Directory ""C:/xampp/htdocs/CommunicationApp/public""
        DirectoryIndex index.php
        AllowOverride All
        Order allow,deny
        Allow from all
    &lt;/Directory&gt;
&lt;/VirtualHost&gt;    
</code></pre>

<p>and also update the hosts file with <strong>127.0.0.1 comm-app.local</strong> and try to re-start apache but it is showing error.</p>

<pre><code>15:03:01  [Apache]  Error: Apache shutdown unexpectedly.
15:03:01  [Apache]  This may be due to a blocked port, missing dependencies, 
15:03:01  [Apache]  improper privileges, a crash, or a shutdown by another method.
15:03:01  [Apache]  Press the Logs button to view error logs and check
15:03:01  [Apache]  the Windows Event Viewer for more clues
15:03:01  [Apache]  If you need more help, copy and post this
15:03:01  [Apache]  entire log window on the forums
</code></pre>
","<p>I see two errors:</p>

<pre><code>&lt;VirtualHost *:80&gt; -&gt; Fix to :8081, your POrt the server runs on
    ServerName comm-app.local
    DocumentRoot ""C:/xampp/htdocs/CommunicationApp/public""
    SetEnv APPLICATION_ENV ""development""
    &lt;Directory ""C:/xampp/htdocs/CommunicationApp/public"" -&gt; This is probably why it crashes, missing &gt;
        DirectoryIndex index.php
        AllowOverride All
        Order allow,deny
        Allow from all
    &lt;/Directory&gt;
 -&gt; MIssing close container: &lt;/VirtualHost&gt; 
</code></pre>

<p>Fixed version:</p>

<pre><code>&lt;VirtualHost *:8081&gt;
    ServerName comm-app.local
    DocumentRoot ""C:/xampp/htdocs/CommunicationApp/public""
    SetEnv APPLICATION_ENV ""development""
    &lt;Directory ""C:/xampp/htdocs/CommunicationApp/public""&gt;
        DirectoryIndex index.php
        AllowOverride All
        Order allow,deny
        Allow from all
    &lt;/Directory&gt;
&lt;/VirtualHost&gt;
</code></pre>

<p>One thing to mention:</p>

<p>You can always try and run command:</p>

<pre><code>service apache2 configtest
</code></pre>

<p>This will tell you when you got a malformed configuration and maybe even can tell you where the problem is.</p>

<p>Furthermore it helps avoid unavailability in a LIVE system:</p>

<pre><code>service apache2 restart
</code></pre>

<p>will shutdown and then fail to start, this configtest you know beforehand ""oops I did something wrong, I should fix this first"" but the apache itself is still running with old configuration. :)</p>
","27268267"
"PHP how to get value from array if key is in a variable","125237","","<p>I have a key stored in a variable like so:</p>

<pre><code>$key = 4;
</code></pre>

<p>I tried to get the relevant value like so:</p>

<pre><code>$value = $array[$key];
</code></pre>

<p>but it failed. Help.</p>
","<p>Your code seems to be fine, make sure that key you specify <em>really exists in the array or such key has a value in your array</em> eg:</p>

<pre><code>$array = array(4 =&gt; 'Hello There');
print_r(array_keys($array));
// or better
print_r($array);
</code></pre>

<p><strong>Output:</strong></p>

<pre><code>Array
(
    [0] =&gt; 4
)
</code></pre>

<p><strong>Now:</strong></p>

<pre><code>$key = 4;
$value = $array[$key];
print $value;
</code></pre>

<p><strong>Output:</strong></p>

<pre><code>Hello There
</code></pre>
","2281547"
"Get current URL path in PHP","125171","","<p>I need to get the path from the URL of the current request. For example, if the current URL is:</p>

<pre><code>""http://www.example.com/example/test/hi.php?randomvariable=1""
</code></pre>

<p>I would want this:</p>

<pre><code>""/example/test/hi.php?randomvariable=1""
</code></pre>
","<p>You want <a href=""http://php.net/manual/en/reserved.variables.server.php"" rel=""noreferrer""><code>$_SERVER['REQUEST_URI']</code></a>. From the docs:</p>

<blockquote>
  <h3><code>'REQUEST_URI'</code></h3>
  
  <p>The URI which was given in order to access this page; for instance, <code>'/index.html'</code>.</p>
</blockquote>
","16198831"
"Format bytes to kilobytes, megabytes, gigabytes","125167","","<p>Scenario: the size of various files are stored in a database as bytes. What's the best way to format this size info to kilobytes, megabytes and gigabytes? For instance I have an MP3 that Ubuntu displays as ""5.2 MB (5445632 bytes)"". How would I display this on a web page as ""5.2 MB"" AND have files less than one megabyte display as KB and files one gigabyte and above display as GB?</p>
","<pre><code>function formatBytes($bytes, $precision = 2) { 
    $units = array('B', 'KB', 'MB', 'GB', 'TB'); 

    $bytes = max($bytes, 0); 
    $pow = floor(($bytes ? log($bytes) : 0) / log(1024)); 
    $pow = min($pow, count($units) - 1); 

    // Uncomment one of the following alternatives
    // $bytes /= pow(1024, $pow);
    // $bytes /= (1 &lt;&lt; (10 * $pow)); 

    return round($bytes, $precision) . ' ' . $units[$pow]; 
} 
</code></pre>

<p>(Taken from <a href=""http://php.net/manual/de/function.filesize.php"" rel=""noreferrer"">php.net</a>, there are many other examples there, but I like this one best :-)</p>
","2510459"
"Remove non-utf8 characters from string","125005","","<p>Im having a problem with removing non-utf8 characters from string, which are not displaying properly. Characters are like this 0x97 0x61 0x6C 0x6F (hex representation)</p>

<p>What is the best way to remove them? Regular expression or something else ?</p>
","<p>Using a regex approach:</p>

<pre><code>$regex = &lt;&lt;&lt;'END'
/
  (
    (?: [\x00-\x7F]                 # single-byte sequences   0xxxxxxx
    |   [\xC0-\xDF][\x80-\xBF]      # double-byte sequences   110xxxxx 10xxxxxx
    |   [\xE0-\xEF][\x80-\xBF]{2}   # triple-byte sequences   1110xxxx 10xxxxxx * 2
    |   [\xF0-\xF7][\x80-\xBF]{3}   # quadruple-byte sequence 11110xxx 10xxxxxx * 3 
    ){1,100}                        # ...one or more times
  )
| .                                 # anything else
/x
END;
preg_replace($regex, '$1', $text);
</code></pre>

<p>It searches for UTF-8 sequences, and captures those into group 1. It also matches single bytes that could not be identified as part of a UTF-8 sequence, but does not capture those. Replacement is whatever was captured into group 1. This effectively removes all invalid bytes.</p>

<p>It is possible to repair the string, by encoding the invalid bytes as UTF-8 characters. But if the errors are random, this could leave some strange symbols.</p>

<pre><code>$regex = &lt;&lt;&lt;'END'
/
  (
    (?: [\x00-\x7F]               # single-byte sequences   0xxxxxxx
    |   [\xC0-\xDF][\x80-\xBF]    # double-byte sequences   110xxxxx 10xxxxxx
    |   [\xE0-\xEF][\x80-\xBF]{2} # triple-byte sequences   1110xxxx 10xxxxxx * 2
    |   [\xF0-\xF7][\x80-\xBF]{3} # quadruple-byte sequence 11110xxx 10xxxxxx * 3 
    ){1,100}                      # ...one or more times
  )
| ( [\x80-\xBF] )                 # invalid byte in range 10000000 - 10111111
| ( [\xC0-\xFF] )                 # invalid byte in range 11000000 - 11111111
/x
END;
function utf8replacer($captures) {
  if ($captures[1] != """") {
    // Valid byte sequence. Return unmodified.
    return $captures[1];
  }
  elseif ($captures[2] != """") {
    // Invalid byte of the form 10xxxxxx.
    // Encode as 11000010 10xxxxxx.
    return ""\xC2"".$captures[2];
  }
  else {
    // Invalid byte of the form 11xxxxxx.
    // Encode as 11000011 10xxxxxx.
    return ""\xC3"".chr(ord($captures[3])-64);
  }
}
preg_replace_callback($regex, ""utf8replacer"", $text);
</code></pre>

<p><strong>EDIT:</strong></p>

<ul>
<li><code>!empty(x)</code> will match non-empty values (<code>""0""</code> is considered empty).</li>
<li><code>x != """"</code> will match non-empty values, including <code>""0""</code>.</li>
<li><code>x !== """"</code> will match anything except <code>""""</code>.</li>
</ul>

<p><code>x != """"</code> seem the best one to use in this case.</p>

<p>I have also sped up the match a little. Instead of matching each character separately, it matches sequences of valid UTF-8 characters.</p>
","1401716"
"PHP and MySQL Select a Single Value","124958","","<p>Sorry for such a basic question, but I haven't found a simple answer anywhere. I'd like to know how to select a single value from my mysql table. The table includes columns 'username' and 'id' amongst others ('id' is auto-increment and 'username' is unique). Given the username, I want to set a session variable <code>$_SESSION['myid']</code> equal to the value in the 'id' column that corresponds to the given username. Here's the code that I've already tried: </p>

<pre><code>session_start();
$name = $_GET[""username""];
$sql = ""SELECT 'id' FROM Users WHERE username='$name'"";
$result = mysql_query($sql);
$value = mysql_fetch_object($result);
$_SESSION['myid'] = $value;
</code></pre>

<p>So far I'm getting ""Catchable fatal error: Object of class stdClass could not be converted to string."" Casting <code>$value</code> to type string does not fix the problem.</p>
","<p>1) Don't use quotation in a field name or table name inside query.</p>

<p>2) After fetching object you need to access object attributes/properties (in your case  id ) by attributes/properties name. </p>

<p><strong>It should work</strong><br>
<em>Bonus tips: Use limit 1 for this type of question will save execution time :)</em></p>

<pre><code>session_start();
$name = $_GET[""username""];
$sql = ""SELECT id FROM Users WHERE username='$name' limit 1"";
$result = mysql_query($sql);
$value = mysql_fetch_object($result);
$_SESSION['myid'] = $value-&gt;id;
</code></pre>

<p>One note: <strong>please use mysqli_* or PDO since mysql_* deprecated.</strong></p>
","20878134"
"PHP absolute path to root","124754","","<p>I can't believe PHP doesn't have an easy solution of this simple matter. ASP.NET has a ~ sign that cares of this issue and starts everything from root level. Here's my problem:</p>

<pre><code>localhost/MySite
   --&gt;Admin
      -- Edit.php
   --&gt;Class
      -- class.EditInfo.php
   --&gt;Texts
      -- MyInfo.txt
   --ShowInfo.php
</code></pre>

<p>Inside class.EditInfo.php I am accessing MyInfo.txt so I defined a relative path ""../Texts/MyInfo.txt"". Then I created an object of EditInfo in Admin/Edit.php and accessed Texts/MyInfo.txt it worked fine.</p>

<p>But now I have to create an object of EditInfo in ShowInfo.php and access Texts/MyInfo.txt and here's the problem occurs. As I am using a relative path in my class whenever I am creating an objEditInfo and trying to access MyInfo.txt I am getting ""File doesn't exist"" error. </p>

<p>Now I am looking for something that's equivalent to ""~/Texts/MyInfo.txt"" of ASP.NET. Is there anything similar to that out there??? Or do I have to set the path with some if/else condition?</p>

<hr>

<p><strong>UPDATE:</strong></p>

<p>I used $_SERVER['DOCUMENT_ROOT']. I was using a subfolder where my actual website was. So I had to use $_SERVER['DOCUMENT_ROOT'].""/mySite"" &amp; then adding rest of the address (""/Texts/MyInfo.php"") to it.</p>
","<p>Create a constant with absolute path to the root by using define in <code>ShowInfo.php</code>:</p>

<pre><code>define('ROOTPATH', __DIR__);
</code></pre>

<p>OR (PHP &lt;= 5.3)</p>

<pre><code>define('ROOTPATH', dirname(__FILE__));
</code></pre>

<p>Now use it:</p>

<pre><code>if (file_exists(ROOTPATH.'/Texts/MyInfo.txt') {
  // ...
}
</code></pre>

<p>Or use the <code>DOCUMENT_ROOT</code> defined in <code>$_SERVER</code>:</p>

<pre><code>if (file_exists($_SERVER['DOCUMENT_ROOT'].'/Texts/MyInfo.txt') {
  // ...
}
</code></pre>

<p>`</p>
","11604489"
"Subtract 1 day with PHP","124583","","<p>I'm trying to take a date object that's coming out of my Drupal CMS, subtract one day and print out both dates.  Here's what I have</p>

<pre><code>$date_raw = $messagenode-&gt;field_message_date[0]['value'];

print($date_raw);

//this gives me the following string: 2011-04-24T00:00:00

$date_object = date_create($date_raw);

$next_date_object = date_modify($date_object,'-1 day');

print('First Date ' . date_format($date_object,'Y-m-d'));

//this gives me the correctly formatted string '2011-04-24'

print('Next Date ' . date_format($next_date_object,'Y-m-d'));

//this gives me nothing. The output here is always blank
</code></pre>

<p>So I'm not understanding why the original date object is coming out fine, but then I'm trying to create an additional date object and modify it by subtracting one day and it seems like I can't do that.  The output always comes out blank.</p>
","<p>You can try:</p>

<pre><code>print('Next Date ' . date('Y-m-d', strtotime('-1 day', strtotime($date_raw))));
</code></pre>
","7651339"
"Remove all html tags from php string","124372","","<p>I want to display the first 110 characters of a database entry. Pretty easy so far:</p>

<pre><code>&lt;?php echo substr($row_get_Business['business_description'],0,110) . ""...""; ?&gt;
</code></pre>

<p>But the above entry has html code in it that's been entered by the client. So it displays:</p>

<pre><code>&lt;p class=""Body1""&gt;&lt;strong&gt;&lt;span style=""text-decoration: underline;""&gt;Ref no:&lt;/span&gt;&lt;/strong&gt; 30001&lt;strong&gt;&lt;/stro...
</code></pre>

<p>Obviously no good. </p>

<p>I just want to strip out all html code, so I need to remove everything between &lt; and > from the db entry THEN display the first 100 chars.</p>

<p>Any ideas anyone?</p>
","<p>use <code>strip_tags</code></p>

<pre><code>$text = '&lt;p&gt;Test paragraph.&lt;/p&gt;&lt;!-- Comment --&gt; &lt;a href=""#fragment""&gt;Other text&lt;/a&gt;';
echo strip_tags($text);   //output Test paragraph. Other text

&lt;?php echo substr(strip_tags($row_get_Business['business_description']),0,110) . ""...""; ?&gt;
</code></pre>
","14684106"
"PHP namespaces and ""use""","124307","","<p>I am having a little trouble with namespaces and the <code>use</code> statements.</p>

<p>I have three files: <code>ShapeInterface.php</code>, <code>Shape.php</code> and <code>Circle.php</code>.</p>

<p>I am trying to do this using relative paths so I have put this in all of the classes:</p>

<pre><code>namespace Shape; 
</code></pre>

<p>In my circle class I have the following:</p>

<pre><code>namespace Shape;
//use Shape;
//use ShapeInterface;

include 'Shape.php';
include 'ShapeInterface.php';    

class Circle extends Shape implements ShapeInterface{ ....
</code></pre>

<p>If I use the <code>include</code> statements I get no errors. If I try the <code>use</code> statements I get:</p>

<blockquote>
  <p>Fatal error: Class 'Shape\Shape' not found in
  /Users/shawn/Documents/work/sites/workspace/shape/Circle.php on line 8</p>
</blockquote>

<p>Could someone please give me a little guidance on the issue?</p>
","<p>The <a href=""http://uk3.php.net/manual/en/language.namespaces.importing.php"" rel=""noreferrer""><code>use</code> operator</a> is for giving aliases to names of classes, interfaces or other namespaces. Most <code>use</code> statements refer to a namespace or class that you'd like to shorten:</p>

<pre><code>use My\Full\Namespace;
</code></pre>

<p>is equivalent to:</p>

<pre><code>use My\Full\Namespace as Namespace;
// Namespace\Foo is now shorthand for My\Full\Namespace\Foo
</code></pre>

<p>If the <code>use</code> operator is used with a class or interface name, it has the following uses:</p>

<pre><code>// after this, ""new DifferentName();"" would instantiate a My\Full\Classname
use My\Full\Classname as DifferentName;

// global class - making ""new ArrayObject()"" and ""new \ArrayObject()"" equivalent
use ArrayObject;
</code></pre>

<p>The <code>use</code> operator is not to be confused with <a href=""http://uk3.php.net/autoload"" rel=""noreferrer"">autoloading</a>. A class is autoloaded (negating the need for <code>include</code>) by registering an autoloader (e.g. with <code>spl_autoload_register</code>). You might want to read <a href=""http://www.php-fig.org/psr/psr-4/"" rel=""noreferrer"">PSR-4</a> to see a suitable autoloader implementation.</p>
","10542287"
"PHP Function with Optional Parameters","124246","","<p>I've written a PHP function that can accepts 10 parameters, but only 2 are required. Sometimes, I want to define the eighth parameter, but I don't want to type in empty strings for each of the parameters until I reach the eighth.</p>

<p>One idea I had was to pass an abstracted function with an array of parameters which passes it along to the real function.</p>

<p>Is there a better way to set up the function so I can pass in only the parameters I want?</p>
","<p>Make the function take one parameter: an array. Pass in the actual parameters as values in the array.</p>

<hr>

<p><em>Edit:</em> <a href=""https://stackoverflow.com/questions/2112913"">the link in Pekka's comment</a> just about sums it up.</p>
","3978965"
"Location for session files in Apache/PHP","124241","","<p>What is the default location of session files on an installation of Apache/PHP on Ubuntu 10.10?</p>
","<p>The <strong>default</strong> <a href=""http://de.php.net/manual/en/session.configuration.php"" rel=""nofollow noreferrer""><code>session.save_path</code></a> is set to <code>""""</code> which will evaluate to your system's temp directory. See this comment at <a href=""https://bugs.php.net/bug.php?id=26757"" rel=""nofollow noreferrer"">https://bugs.php.net/bug.php?id=26757</a> stating:</p>

<blockquote>
  <p>The new default for save_path in upcoming releaess (sic) will be the empty string, which causes the temporary directory to be probed.</p>
</blockquote>

<p>You can use <a href=""http://php.net/sys_get_temp_dir"" rel=""nofollow noreferrer""><code>sys_get_temp_dir</code> to return the directory path used for temporary files</a></p>

<p>To find the <strong>current</strong> session save path, you can use </p>

<ul>
<li><a href=""http://de.php.net/manual/en/function.session-save-path.php"" rel=""nofollow noreferrer""><code>session_save_path()</code> — Get and/or set the current session save path</a></li>
</ul>

<p>Refer to <a href=""https://stackoverflow.com/a/16913818/208809"">this answer</a> to find out what the temp path is when this function returns an empty string.</p>
","4927969"
"how to get the cookies from a php curl into a variable","124191","","<p>So some guy at some other company thought it would be awesome if instead of using soap or xml-rpc or rest or any other reasonable communication protocol he just embedded all of his response as cookies in the header.</p>

<p>I need to pull these cookies out as hopefully an array from this curl response.  If I have to waste a bunch of my life writing a parser for this I will be very unhappy.</p>

<p>Does anyone know how this can simply be done, preferably without writing anything to a file?</p>

<p>I will be very grateful if anyone can help me out with this.</p>
","<pre><code>$ch = curl_init('http://www.google.com/');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
// get headers too with this line
curl_setopt($ch, CURLOPT_HEADER, 1);
$result = curl_exec($ch);
// get cookie
// multi-cookie variant contributed by @Combuster in comments
preg_match_all('/^Set-Cookie:\s*([^;]*)/mi', $result, $matches);
$cookies = array();
foreach($matches[1] as $item) {
    parse_str($item, $cookie);
    $cookies = array_merge($cookies, $cookie);
}
var_dump($cookies);
</code></pre>
","895858"
"Multiple inputs with same name through POST in php","124162","","<p>Is it possible to get multiple inputs of the same name to post and then access them from PHP?  The idea is this: I have a form that allows the entry of an indefinite number of physical addresses along with other information.  If I simply gave each of those fields the same name across several entries and submitted that data through post, would PHP be able to access it?</p>

<p>Say, for example, I have five input on one page named ""xyz"" and I want to access them using PHP.  Could I do something like:</p>

<pre><code>    $_POST['xyz'][0]
</code></pre>

<p>If so, that would make my life ten times easier, as I could send an indefinite amount of information through a form and get it processed by the server simply by looping through the array of items with the name ""xyz"".</p>
","<p>Change the names of your inputs:</p>

<pre><code>&lt;input name=""xyz[]"" value=""Lorem"" /&gt;
&lt;input name=""xyz[]"" value=""ipsum""  /&gt;
&lt;input name=""xyz[]"" value=""dolor"" /&gt;
&lt;input name=""xyz[]"" value=""sit"" /&gt;
&lt;input name=""xyz[]"" value=""amet"" /&gt;
</code></pre>

<p>Then:</p>

<pre><code>$_POST['xyz'][0] == 'Lorem'
$_POST['xyz'][4] == 'amet'
</code></pre>

<hr>

<blockquote>
  <p>If so, that would make my life ten times easier, as I could send an
  indefinite amount of information through a form and get it processed
  by the server simply by looping through the array of items with the
  name ""xyz"".</p>
</blockquote>

<p>Note that this is probably the wrong solution. Obviously, it depends on the data you are sending.</p>
","7880656"
"How to save and extract session data in codeigniter","123980","","<p>I save some data in session on my verify controller then I extract this session data into user_activity model and insert session data into activity table. My problem is only username data saved in session and I can get and insert only username data after extracting session on model. I am new in Codeigniter. For this reason It’s very difficult to find out the problem. I am trying several days finding the problem. But unfortunately I can’t. So please, anyone help me. Thanks</p>

<p>VerifyLogin controller:</p>

<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
session_start();
class VerifyLogin extends CI_Controller {

 function __construct()
 {
   parent::__construct();
   $this-&gt;load-&gt;model('user','',TRUE);
   $this-&gt;load-&gt;model('user_activity','',TRUE);
  }

 function index()
 {
   //This method will have the credentials validation
   $this-&gt;load-&gt;library('form_validation');

   $this-&gt;form_validation-&gt;set_rules('username', 'Username', 'trim|required|xss_clean');
   $this-&gt;form_validation-&gt;set_rules('password', 'Password', 'trim|required|xss_clean|callback_check_database');

   if($this-&gt;form_validation-&gt;run() == FALSE)
   {
     //Field validation failed.  User redirected to login page
     $this-&gt;load-&gt;view('login_view');
   }
   else
   {
     //Go to private area
     redirect('home', 'refresh');
   }
 }

 function check_database($password)
 {
   //Field validation succeeded.  Validate against database
   $username = $this-&gt;input-&gt;post('username');
   $vercode = $this-&gt;input-&gt;post('vercode');

   //query the database
   $result = $this-&gt;user-&gt;login($username, $password);

   // ip address
   $ip_address= $this-&gt;user_activity-&gt;get_client_ip();

   //Retrieving session data and other data
   $captcha_code=$_SESSION['captcha'];
   $user_agent=$_SERVER['HTTP_USER_AGENT'];

   if($result &amp;&amp; $captcha_code == $vercode)
   {
     $sess_array = array();
     foreach($result as $row)
     {
       $sess_array = array(
         'username' =&gt; $row-&gt;username,
           'user_agent' =&gt; $row-&gt;user_agent,
           'ip_address' =&gt; $row-&gt;ip_address,
       );
       $this-&gt;session-&gt;set_userdata('logged_in', $sess_array);

        //insert user activity
       $this-&gt;user_activity-&gt;activity();
     }
     return TRUE;
   }
   else
   {
     $this-&gt;form_validation-&gt;set_message('check_database', 'Invalid username or password');
     return false;
   }
 }
}
?&gt;
</code></pre>

<p>user_activity model:</p>

<pre><code>    &lt;?php
    Class User_activity extends CI_Model
    {
     function activity()
     {
        if($this-&gt;session-&gt;userdata('logged_in'))
       {
         $session_data = $this-&gt;session-&gt;userdata('logged_in');
       //  $data['username'] = $session_data['username'];

           $data = array(
                  'session_id'=&gt;"""",
                  'ip_address'=&gt;$session_data['ip_address'],
                  'user_agent'=&gt;$session_data['user_agent'],
                  'username'=&gt;$session_data['username'],
                  'time_stmp'=&gt;Now(),
                  'user_data'=&gt;$session_data['username'].""Logged in Account""
                );
        $this-&gt;db-&gt;insert('user_activity',$data);        
       }
       else
       {
          return  false;
       }

       // Function to get the client ip address
    function get_client_ip() {
        $ipaddress = '';
        if ($_SERVER['HTTP_CLIENT_IP'])
            $ipaddress = $_SERVER['HTTP_CLIENT_IP'];
        else if($_SERVER['HTTP_X_FORWARDED_FOR'])
            $ipaddress = $_SERVER['HTTP_X_FORWARDED_FOR'];
        else if($_SERVER['HTTP_X_FORWARDED'])
            $ipaddress = $_SERVER['HTTP_X_FORWARDED'];
        else if($_SERVER['HTTP_FORWARDED_FOR'])
            $ipaddress = $_SERVER['HTTP_FORWARDED_FOR'];
        else if($_SERVER['HTTP_FORWARDED'])
            $ipaddress = $_SERVER['HTTP_FORWARDED'];
        else if($_SERVER['REMOTE_ADDR'])
            $ipaddress = $_SERVER['REMOTE_ADDR'];
        else
            $ipaddress = 'UNKNOWN';

        return $ipaddress;
       }
      }
    }
    ?&gt;
</code></pre>
","<p>You can set data to session simply like this in Codeigniter:</p>

<pre><code>$this-&gt;load-&gt;library('session');
$this-&gt;session-&gt;set_userdata(array(
    'user_id'  =&gt; $user-&gt;uid,
    'username' =&gt; $user-&gt;username,
    'groupid'  =&gt; $user-&gt;groupid,
    'date'     =&gt; $user-&gt;date_cr,
    'serial'   =&gt; $user-&gt;serial,
    'rec_id'   =&gt; $user-&gt;rec_id,
    'status'   =&gt; TRUE
));
</code></pre>

<p>and you can get it like this:</p>

<pre><code>$u_rec_id = $this-&gt;session-&gt;userdata('rec_id');
$serial = $this-&gt;session-&gt;userdata('serial');
</code></pre>
","17548021"
"How to turn off magic quotes on shared hosting?","123941","","<p>I want to turn off PHP's magic quotes.  I don't have access to php.ini.</p>

<p>When I tried to add <code>php_flag magic_quotes_gpc off</code> to my .htaccess file, I get a 500 internal server error. This is what my .htaccess file looks like:</p>

<pre><code>AddType x-mapp-php5 .php
php_flag magic_quotes_gpc off
</code></pre>

<p>Then I tried to use <code>ini_set('magic_quotes_gpc', 'O')</code>, but that had no effect.</p>

<p>How do I turn magic quotes off?</p>
","<p>As per <a href=""http://php.net/manual/security.magicquotes.disabling.php#82777"" rel=""noreferrer"">the manual</a> you can often install a custom php.ini on shared hosting, where mod_php isn't used and the <code>php_value</code> directive thus leads to an error. For suexec/FastCGI setups it is quite common to have a per-webspace <code>php.ini</code> in any case.</p>

<p>--</p>

<p>I don't think O (uppercase letter o) is a valid value to set an ini flag.  You need to use a true/false, 1/0, or ""on""/""off"" value.</p>

<pre><code>ini_set( 'magic_quotes_gpc', 0 );   // doesn't work
</code></pre>

<p><strong>EDIT</strong></p>

<p>After checking the <a href=""http://php.net/manual/ini.list.php"" rel=""noreferrer"">list of ini settings</a>, I see that magic_quotes_gpc is a <code>PHP_INI_PERDIR</code> setting (after 4.2.3), which means you can't change it with <code>ini_set()</code> (only <code>PHP_INI_ALL</code> settings can be changed with <code>ini_set()</code>)</p>

<p>What this means is you have to use an .htaccess file to do this - OR - implement a script to reverse the effects of magic quotes.  Something like this</p>

<pre><code>if ( in_array( strtolower( ini_get( 'magic_quotes_gpc' ) ), array( '1', 'on' ) ) )
{
    $_POST = array_map( 'stripslashes', $_POST );
    $_GET = array_map( 'stripslashes', $_GET );
    $_COOKIE = array_map( 'stripslashes', $_COOKIE );
}
</code></pre>
","517027"
"Simplest way to display current month and year like ""Aug 2016"" in PHP?","123910","","<p>What is the shortest, simplest code to generate the curent month in Full English like <code>September</code> or in abbreviated three letter version like <code>Feb</code> and then add the current Year <code>2011</code>?</p>

<p>So the code will, depending on the month and year, echo things like:</p>

<p><code>August 2016</code> or  <code>Aug 2016</code> etcettera. Thanks!</p>
","<p>Full version: </p>

<pre><code>&lt;? echo date('F Y'); ?&gt;
</code></pre>

<p>Short version:</p>

<pre><code>&lt;? echo date('M Y'); ?&gt;
</code></pre>

<p>Here is a <a href=""http://ca.php.net/manual/en/function.date.php"">good reference for the different date options</a>.</p>

<p><strong>update</strong></p>

<p>To show the previous month we would have to introduce the <a href=""http://ca.php.net/manual/en/function.mktime.php"">mktime()</a> function and make us of the optional <code>timestamp</code> parameter for the date() function.  Like this:</p>

<pre><code>echo date('F Y', mktime(0, 0, 0, date('m')-1, 1, date('Y')));
</code></pre>

<p>This will also work (it's typically used to get the last day of the previous month):</p>

<pre><code>echo date('F Y', mktime(0, 0, 0, date('m'), 0, date('Y')));
</code></pre>

<p>Hope that helps.</p>
","5347225"
"Set Font Color, Font Face and Font Size in PHPExcel","123834","","<p>I'm working in PHPExcel. I'm beginner.When I'm using following code and its working fine.</p>

<pre><code>$phpExcel = new PHPExcel();

$phpExcel-&gt;getActiveSheet()-&gt;getStyle(""A1"")-&gt;getFont()-&gt;setBold(true)
                                -&gt;setName('Verdana')
                                -&gt;setSize(10)
                                -&gt;getColor()-&gt;setRGB('6F6F6F');
</code></pre>

<p>But when I'm using following code and not getting expected result as above.</p>

<pre><code>$phpFont = new PHPExcel_Style_Font();
$phpFont-&gt;setBold(true);
$phpFont-&gt;setName('Verdana');
$phpFont-&gt;setSize(15);

$phpColor = new PHPExcel_Style_Color();
$phpColor-&gt;setRGB('FF0000');  

$phpExcel-&gt;getActiveSheet()-&gt;getStyle('A1')-&gt;setFont( $phpFont );
$phpExcel-&gt;getActiveSheet()-&gt;getStyle('A1')-&gt;getFont()-&gt;setColor( $phpColor );
</code></pre>

<p>Please help me what am I doing wrong in above code.</p>

<p>Thank you in advance!</p>
","<p>I recommend you start reading <a href=""http://phpexcel.codeplex.com/documentation"" rel=""noreferrer"">the documentation</a> (4.6.18. Formatting cells). When applying a lot of formatting it's better to use <code>applyFromArray()</code> According to the documentation this method is also suppose to be faster when you're setting many style properties. There's an annex where you can find all the possible keys for this function.</p>

<p>This will work for you:</p>

<pre><code>$phpExcel = new PHPExcel();

$styleArray = array(
    'font'  =&gt; array(
        'bold'  =&gt; true,
        'color' =&gt; array('rgb' =&gt; 'FF0000'),
        'size'  =&gt; 15,
        'name'  =&gt; 'Verdana'
    ));

$phpExcel-&gt;getActiveSheet()-&gt;getCell('A1')-&gt;setValue('Some text');
$phpExcel-&gt;getActiveSheet()-&gt;getStyle('A1')-&gt;applyFromArray($styleArray);
</code></pre>
","17619725"
"Get fragment (value after hash '#') from a URL in php","123741","","<p>How can I get the fragment (value after hash '#') from a URL in php?</p>

<p>Say from <code>http://domain.com/site/gallery/1#photo45</code> I want <code>photo45</code></p>
","<p>If you want to get the value after the hash mark or anchor as shown in a user's browser: This isn't possible with ""standard"" HTTP as this value is never sent to the server (hence it won't be available in <code>$_SERVER[""REQUEST_URI""]</code> or similar predefined variables). You would need some sort of JavaScript magic on the client side, e.g. to include this value as a POST parameter.</p>

<p>If it's only about parsing a known URL from whatever source, the <a href=""https://stackoverflow.com/questions/2317508/php-get-value-from-url-after-sign/2317518#2317518"">answer by mck89</a> is perfectly fine though.</p>
","2317523"
"Fatal error: Call to a member function fetch_assoc() on a non-object","123731","","<p>I'm trying to execute a few queries to get a page of information about some images. I've written a function</p>

<pre><code>function get_recent_highs($view_deleted_images=false)
{
    $lower = $this-&gt;database-&gt;conn-&gt;real_escape_string($this-&gt;page_size * ($this-&gt;page_number - 1));
    $query = ""SELECT image_id, date_uploaded FROM `images` ORDER BY ((SELECT SUM( image_id=`images`.image_id ) FROM `image_votes` AS score) / (SELECT DATEDIFF( NOW( ) , date_uploaded ) AS diff)) DESC LIMIT "" . $this-&gt;page_size . "" OFFSET $lower""; //move to database class
    $result = $this-&gt;database-&gt;query($query);
    $page = array();
    while($row = $result-&gt;fetch_assoc())
    {
        try
        {
            array_push($page, new Image($row['image_id'], $view_deleted_images));
        }
        catch(ImageNotFoundException $e)
        {
            throw $e;
        }
    }
    return $page;
}
</code></pre>

<p>that selects a page of these images based on their popularity. I've written a <code>Database</code> class that handles interactions with the database and an <code>Image</code> class that holds information about an image. When I attempt to run this I get an error.</p>

<pre><code>Fatal error: Call to a member function fetch_assoc() on a non-object
</code></pre>

<p><code>$result</code> is a mysqli resultset, so I'm baffled as to why this isn't working.</p>
","<p>That's because there was an error in your query.  <a href=""http://us3.php.net/manual/en/mysqli.query.php"" rel=""noreferrer""><code>MySQli-&gt;query()</code></a> will return false on error.  Change it to something like::</p>

<pre><code>$result = $this-&gt;database-&gt;query($query);
if (!$result) {
    throw new Exception(""Database Error [{$this-&gt;database-&gt;errno}] {$this-&gt;database-&gt;error}"");
}
</code></pre>

<p>That should throw an exception if there's an error...</p>
","5121044"
"Cannot connect to MySQL 4.1+ using old authentication","123692","","<p>I'm trying to connect to a mySQL database at <a href=""http://bluesql.net"" rel=""noreferrer"">http://bluesql.net</a>, but when I try to connect, it gives this error:</p>

<pre><code>Connect Error (2000) mysqlnd cannot connect to MySQL 4.1+ using old authentication
</code></pre>

<p>I've looked into this, and it has to do with some old password scheme used before MySQL 4.1. Newer versions have the option to use old passwords, which I've read may cause this problem. </p>

<p>I'm running php 5.3, and connecting with mySQLi (new mysqli(...)). I'm hoping I can do something in the code to connect to the DB at bluesql.net - clearly I don't control how their database is set up. Downgrading php versions isn't an option.</p>

<p>Anyone have any ideas?</p>
","<p>edit: This only applies if you are in control of the MySQL server... if you're not take a look at <a href=""https://stackoverflow.com/q/1892607/1341006"">Mysql password hashing method old vs new</a></p>

<p>First check with the SQL query</p>

<pre><code>SHOW VARIABLES LIKE 'old_passwords'
</code></pre>

<p>(in the MySQL command line client, <a href=""http://www.heidisql.com/"" rel=""nofollow noreferrer"">HeidiSQL</a> or whatever front end you like) whether the server is set to use the old password schema by default. If this returns <code>old_passwords,Off</code> you just happen to have old password entries in the <code>user</code> table. The MySQL server will use the old authentication routine for these accounts. You can simply set a new password for the account and the new routine will be used.  </p>

<p>You can check which routine will be used by taking a look at the <code>mysql.user</code> table (with an account that has access to that table)</p>

<pre><code>SELECT `User`, `Host`, Length(`Password`) FROM mysql.user
</code></pre>

<p>This will return <em>16</em> for accounts with old passwords and <em>41</em> for accounts with new passwords (and 0 for accounts with no password at all, you might want to take care of those as well).<br>
Either use the user management tools of the MySQL front end (if there are any) or</p>

<pre><code>SET PASSWORD FOR 'User'@'Host'=PASSWORD('yourpassword');
FLUSH Privileges;
</code></pre>

<p>(replace <code>User</code> and <code>Host</code> with the values you got from the previous query.) Then check the length of the password again. It should be <em>41</em> now and your client (e.g. mysqlnd) should be able to connect to the server.</p>

<p>see also the MySQL documentation: 
* <a href=""http://dev.mysql.com/doc/refman/5.0/en/old-client.html"" rel=""nofollow noreferrer"">http://dev.mysql.com/doc/refman/5.0/en/old-client.html</a><br>
* <a href=""http://dev.mysql.com/doc/refman/5.0/en/password-hashing.html"" rel=""nofollow noreferrer"">http://dev.mysql.com/doc/refman/5.0/en/password-hashing.html</a><br>
* <a href=""http://dev.mysql.com/doc/refman/5.0/en/set-password.html"" rel=""nofollow noreferrer"">http://dev.mysql.com/doc/refman/5.0/en/set-password.html</a></p>
","1576473"
"How to get AM/PM from a datetime in PHP","123583","","<p>I have a date time in a variable. My format is <code>08/04/2010 22:15:00</code>. I want to display this like <code>10.15 PM</code>. How to do this in PHP?</p>

<p>Thanks in advance</p>
","<p>You need to convert it to a UNIX timestamp (using <a href=""http://www.php.net/strtotime"" rel=""noreferrer"">strtotime</a>) and then back into the format you require using the <a href=""http://www.php.net/manual/en/function.date.php"" rel=""noreferrer"">date</a> function.</p>

<p>For example: </p>

<pre><code>$currentDateTime = '08/04/2010 22:15:00';
$newDateTime = date('h:i A', strtotime($currentDateTime));
</code></pre>
","3404720"
"PHP & MYSQL: How to resolve ambiguous column names in JOIN operation?","123363","","<p>I have two tables in my database:</p>

<p>NEWS ('id' - the news id, 'user' - the user id of the author)</p>

<p>USERS ('id' - the user id)</p>

<p>I want to make a <code>SELECT * FROM news JOIN users ON news.user = user.id</code>, now when I get the results in PHP it's something like:</p>

<p><code>$row = mysql_fetch_array($result)</code>, and get column names by <code>$row['column-name']</code>... how do I get the news ID and the user ID, having the same column name?</p>

<p>UPDATE: Thanks everybody for the quick answers. Aliases seem the best solution.</p>
","<p>You can set aliases for the columns that you are selecting:</p>

<pre><code>$query = 'SELECT news.id AS newsId, user.id AS userId, [OTHER FIELDS HERE] FROM news JOIN users ON news.user = user.id'
</code></pre>
","431397"
"How to set UTF-8 encoding for a PHP file","123333","","<p>I have a PHP script called :</p>

<blockquote>
  <p><a href=""http://cyber-flick.com/apiMorpho.php?method=getMorphoData&amp;word=kot"">http://cyber-flick.com/apiMorpho.php?method=getMorphoData&amp;word=kot</a></p>
</blockquote>

<p>That displays some data in plain text:</p>

<pre><code>CzÄ�Ĺ�Ä� mowy: rzeczownik
Przypadek: dopeĹ�niacz
Rodzaj: ĹźeĹ�ski
Liczba: mnoga
</code></pre>

<p>As you can see in place of proper chars there are so ""bushes"". What i would like to do is display this in a way so that people see in browser proper UTF-8 characters.</p>

<p>You can encapsulate it in HMTL tags and set in meta UTF-8 encoding, but because the data received from this script will be processed further I don't want to use any HTML tags, it should be only plain text result set.</p>

<p>So is there a way to inform browser that this file is UTF-8 without using meta tags?</p>

<p>PS. File is encoded in UTF-8 and if I manually change charset encoding in my browser to UTF-8 it displays ok, but what I want to acomplish is people to not be required to do so.</p>
","<pre><code>header('Content-type: text/plain; charset=utf-8');
</code></pre>
","5056667"
"PHP - Redirect and send data via POST","123295","","<p>I have an online gateway which requires an HTML form to be submitted with hidden fields. I need to do this via a PHP script without any HTML forms (I have the data for the hidden fields in a DB)</p>

<p>To do this sending data via GET:</p>

<pre><code>header('Location: http://www.provider.com/process.jsp?id=12345&amp;name=John');
</code></pre>

<p>And to do this sending data via POST?</p>
","<p>You can't do this using PHP.</p>

<p>As others have said, you could use cURL - but then the PHP code becomes the client rather than the browser.</p>

<p>If you must use POST, then the only way to do it would be to generate the populated form using PHP and use the window.onload hook to call javascript to submit the form.</p>

<p>C.</p>
","3045155"
"How do I enable php to work with postgresql?","123273","","<pre><code>&lt;?php

try {
   $dbh = new PDO('pgsql:host=localhost;port=5432;dbname=###;user=###;password=##');
   echo ""PDO connection object created"";
}
catch(PDOException $e)
{
      echo $e-&gt;getMessage();
}

?&gt;
</code></pre>

<p>I get the error message ""Could Not Load Driver""</p>
","<p>Try this:</p>

<p>Uncomment the following in php.ini by removing the "";""</p>

<pre><code>;extension=php_pgsql.dll
</code></pre>

<p>Use the following code to connect to a postgresql database server:</p>

<pre><code>pg_connect(""host=localhost dbname=dbname user=username password=password"")
    or die(""Can't connect to database"".pg_last_error());
</code></pre>
","10641024"
"How do I make a simple crawler in PHP?","123265","","<p>I have a web page with a bunch of links. I want to write a script which would dump all the data contained in those links in a local file.</p>

<p>Has anybody done that with PHP? General guidelines and gotchas would suffice as an answer.</p>
","<p>Meh. Don't <a href=""https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags"">parse HTML with regexes</a>.</p>

<p>Here's a DOM version inspired by Tatu's:</p>

<pre><code>&lt;?php
function crawl_page($url, $depth = 5)
{
    static $seen = array();
    if (isset($seen[$url]) || $depth === 0) {
        return;
    }

    $seen[$url] = true;

    $dom = new DOMDocument('1.0');
    @$dom-&gt;loadHTMLFile($url);

    $anchors = $dom-&gt;getElementsByTagName('a');
    foreach ($anchors as $element) {
        $href = $element-&gt;getAttribute('href');
        if (0 !== strpos($href, 'http')) {
            $path = '/' . ltrim($href, '/');
            if (extension_loaded('http')) {
                $href = http_build_url($url, array('path' =&gt; $path));
            } else {
                $parts = parse_url($url);
                $href = $parts['scheme'] . '://';
                if (isset($parts['user']) &amp;&amp; isset($parts['pass'])) {
                    $href .= $parts['user'] . ':' . $parts['pass'] . '@';
                }
                $href .= $parts['host'];
                if (isset($parts['port'])) {
                    $href .= ':' . $parts['port'];
                }
                $href .= dirname($parts['path'], 1).$path;
            }
        }
        crawl_page($href, $depth - 1);
    }
    echo ""URL:"",$url,PHP_EOL,""CONTENT:"",PHP_EOL,$dom-&gt;saveHTML(),PHP_EOL,PHP_EOL;
}
crawl_page(""http://hobodave.com"", 2);
</code></pre>

<p><strong>Edit:</strong> I fixed some bugs from Tatu's version (works with relative URLs now).</p>

<p><strong>Edit:</strong> I added a new bit of functionality that prevents it from following the same URL twice.</p>

<p><strong>Edit:</strong> echoing output to STDOUT now so you can redirect it to whatever file you want</p>

<p><strong>Edit:</strong> Fixed a bug pointed out by George in his answer. Relative urls will no longer append to the end of the url path, but overwrite it. Thanks to George for this. Note that George's answer doesn't account for any of: https, user, pass, or port. If you have the <a href=""http://us3.php.net/manual/en/book.http.php"" rel=""nofollow noreferrer"">http</a> PECL extension loaded this is quite simply done using <a href=""http://us3.php.net/manual/en/function.http-build-url.php"" rel=""nofollow noreferrer"">http_build_url</a>. Otherwise, I have to manually glue together using parse_url. Thanks again George.</p>
","2313270"
"How to disable XDebug","123211","","<p>I think that my server became slow since I installed XDebug.
So, in order to test my hypothesis I want to disable XDebug completely.
I've been searching for tutorials on how to do this but I can't find such information.</p>
","<p>Find your <code>php.ini</code> and look for XDebug.</p>

<p>Set xdebug autostart to false</p>

<pre><code>xdebug.remote_autostart=0  
xdebug.remote_enable=0
</code></pre>

<p>Disable your profiler</p>

<pre><code>xdebug.profiler_enable=0
</code></pre>

<p>Note that there can be a <a href=""http://www.frankmayer.me/blog/item/12-xdebug-disabling-vs-not-loading-it-at-all"" rel=""noreferrer"">performance loss even with xdebug disabled but loaded</a>. To disable loading of the extension itself, you need to comment it in your php.ini. Find an entry looking like this:</p>

<pre><code>zend_extension = ""/path/to/php_xdebug.dll""
</code></pre>

<p>and put a <code>;</code> to comment it, e.g. <code>;zend_extension = …</code>.</p>

<p>Check out this post <a href=""https://stackoverflow.com/questions/2570680/xdebug-how-to-disable-remote-debugging-for-single-php-file"">XDebug, how to disable remote debugging for single .php file?</a></p>
","8754934"
"Java: function for arrays like PHP's join()?","123096","","<p>I want to join a <code>String[]</code> with a glue string. Is there a function for this?</p>
","<p>Starting from <strong>Java8</strong> it is possible to use <code>String.join()</code>.</p>

<pre><code>String.join("", "", new String[]{""Hello"", ""World"", ""!""})
</code></pre>

<p>Generates:</p>

<pre><code>Hello, World, !
</code></pre>

<p>Otherwise, <a href=""http://commons.apache.org/lang/"" rel=""noreferrer"">Apache Commons Lang</a> has a <a href=""http://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/StringUtils.html"" rel=""noreferrer""><code>StringUtils</code></a> class which has a <a href=""http://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/StringUtils.html#join(java.lang.Object[],%20java.lang.String)"" rel=""noreferrer""><code>join</code></a> function which will join arrays together to make a <code>String</code>.</p>

<p>For example:</p>

<pre><code>StringUtils.join(new String[] {""Hello"", ""World"", ""!""}, "", "")
</code></pre>

<p>Generates the following <code>String</code>:</p>

<pre><code>Hello, World, !
</code></pre>
","1515450"
"Jquery/Ajax Form Submission (enctype=""multipart/form-data"" ). Why does 'contentType:False' cause undefined index in PHP?","123054","","<p>I have been trying to submit a form with enctype=""multipart/form-data"". I have this setting because the form will involve jpeg/png uploads once I have figured out the ajax submission for text inputs.</p>

<ol>
<li><p>the php works fine when referencing the script using action within the form html.</p></li>
<li><p>the form data seems to be retrieved correctly by the below jquery because the alert line shows: productName=Test+Name&amp;productDescription=Test+Description&amp;OtherProductDetails=</p></li>
<li><p>the returned data printed to my HTML by the jquery success function is a php error saying:Undefined index: productName</p></li>
<li><p>removing contentType:false fixes the problem.</p></li>
</ol>

<p>When i google jquery/ajax multipart/form-data submission, the top hits at least mainly include 'contentType:false'. Please could someone explain the reason to me? </p>

<p><a href=""http://digipiph.com/blog/submitting-multipartform-data-using-jquery-and-ajax"" rel=""nofollow noreferrer"">http://digipiph.com/blog/submitting-multipartform-data-using-jquery-and-ajax</a>
<a href=""http://hayageek.com/jquery-ajax-form-submit/"" rel=""nofollow noreferrer"">http://hayageek.com/jquery-ajax-form-submit/</a>
<a href=""https://stackoverflow.com/questions/5392344/sending-multipart-formdata-with-jquery-ajax"">Sending multipart/formdata with jQuery.ajax</a></p>

<p>The jquery API documentation says:
contentType (default: 'application/x-www-form-urlencoded; charset=UTF-8')
Type: String
When sending data to the server, use this content type.</p>

<p>Why would we need to set it to false for a multipart/form-data submission?
When would the false setting be needed at all?</p>

<p>Jquery:</p>

<pre><code>  $(""#addProductForm"").submit(function (event) {
      event.preventDefault();
      //grab all form data  
      var formData = $(this).serialize();

      $.ajax({
          url: 'addProduct.php',
          type: 'POST',
          data: formData,
          async: false,
          cache: false,
          contentType: false,
          processData: false,
          success: function (returndata) {
              $(""#productFormOutput"").html(returndata);
              alert(formData);
          },
          error: function () {
              alert(""error in ajax form submission"");
          }
      });

      return false;
  });
</code></pre>
","<p>contentType option to false is used for multipart/form-data forms that pass files. </p>

<p>When one sets the contentType option to false, it forces jQuery not to add a Content-Type header, otherwise, the boundary string will be missing from it. Also, when submitting files via multi-part/form one must leave the processData flag set to false, otherwise, jQuery will try to convert your FormData into a string, which will fail.</p>

<p>To try and fix your issue:</p>

<p>You are using jQuery's .serialize() method which creates a text string in standard URL-encoded notation.</p>

<p>You need to pass un-encoded data when using ""contentType: false"".</p>

<p>Try using ""new FormData"" instead of .serialize():</p>

<pre><code>  var formData = new FormData($(this)[0]);
</code></pre>

<p>See for yourself the difference of how your formData is passed to your php page by using console.log().</p>

<pre><code>  var formData = new FormData($(this)[0]);
  console.log(formData);

  var formDataSerialized = $(this).serialize();
  console.log(formDataSerialized);
</code></pre>
","20863123"
"Copy Image from Remote Server Over HTTP","122933","","<p>I am looking for a simple way to import/copy images from remote server to a local folder using PHP.  I have no FTP access to the server, but all remote images can be accessed via HTTP (i.e. <a href=""http://www.mydomain.com/myimage.jpg"" rel=""noreferrer"">http://www.mydomain.com/myimage.jpg</a>).</p>

<p>Example use: A user wishes to add an image to his profile.  The image already exists on the web and the user provides with a direct URL.  I do not wish to hotlink the image but to import and serve from my domain.</p>
","<p>If you have PHP5 and the HTTP stream wrapper enabled on your server, it's incredibly simple to copy it to a local file:</p>

<pre><code>copy('http://somedomain.com/file.jpeg', '/tmp/file.jpeg');
</code></pre>

<p>This will take care of any pipelining etc. that's needed.  If you need to provide some HTTP parameters there is a third 'stream context' parameter you can provide.</p>
","909686"
"PHP cURL not working - WAMP on Windows 7 64 bit","122888","","<p>I got my <a href=""http://en.wikipedia.org/wiki/WAMP"">WAMP</a> installed on my windows 7 64bit. cURL is not working, but still I got it enabled from the WAMP tray.</p>

<p>I have also uncommented <code>extension=php_curl.dll</code> in <code>php.ini</code> for both the PHP and Apache folder.</p>

<p>Windows give me an error message,</p>

<blockquote>
  <p>PHP Startup: unable to load dynamic library 'c:/wamp/bin/php/php5.4.3/ext/php_curl.dll' - the application has failed to start because its side-by-side configuration is incorrect. Please see the application event log or use the command-lin sxstrace.exe tool for more detail.""</p>
</blockquote>

<p>How can I fix this problem?</p>
","<p>Go to <a href=""http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/"">http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/</a> and download the cURL version that corresponds to your <a href=""http://en.wikipedia.org/wiki/PHP"">PHP</a> version <strong>under ""Fixed curl extensions:""</strong>.</p>

<p>So if you have PHP 5.3.13, download ""php_curl-5.3.13-VC9-x64.zip"". Try the ""VC"" version first. Then replace the php_curl.dll in ext folder. This worked for me.</p>
","10977022"
"Concatenate string with field value in MySQL","122734","","<p>I have the need to concatenate a string with a field value in a MySQL query in order to LEFT JOIN two tables.</p>

<p>Table one has a column called ""category_id"" with numeric values, such as 61, 78, 94 and such.</p>

<p>Table two has a column called ""query"" which refers to a request route mechanism, and it has values such as ""product_id=68"", ""category_id=74"", ""manufacturer_id=99"" and so on.</p>

<p>So in my query I require to join the tables when ever a concatenated string derived from a set string and the value of the ""category_id"" column matches the query field.</p>

<p>My SQL statement is currently:</p>

<pre><code>SELECT * FROM tableOne 
LEFT JOIN tableTwo
ON tableTwo.query = 'category_id=' + tableOne.category_id
</code></pre>

<p>I have tried using the || operator instead of the + operator, but still no luck. Is it possible to do this in MySQL, or have I jumped the gun here?</p>
","<p>Have you tried using the <a href=""http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_concat"" rel=""noreferrer"">concat()</a> function?</p>

<pre><code>ON tableTwo.query = concat('category_id=',tableOne.category_id)
</code></pre>
","19261781"
"Remove portion of a string after a certain character","122660","","<p>I'm just wondering how I could remove everything after a certain substring in PHP</p>

<p>ex:</p>

<pre><code>Posted On April 6th By Some Dude
</code></pre>

<p>I'd like to have it so that it removes all the text including, and after, the sub string ""By""</p>

<p>Thanks</p>
","<pre><code>$variable = substr($variable, 0, strpos($variable, ""By""));
</code></pre>

<p>In plain english:  Give me the part of the string starting at the beginning and ending at the position where you first encounter the deliminator.</p>
","2588683"
"Convert to date format dd/mm/yyyy","122610","","<p>I have the following date: <strong>2010-04-19 18:31:27</strong>. I would like to convert this date to the <strong>dd/mm/yyyy</strong> format.</p>
","<p>You can use a regular expression or some manual string fiddling, but I think I prefer:</p>

<pre><code>date(""d/m/Y"", strtotime($str));
</code></pre>
","2671158"
"Change DIV content using ajax, php and jQuery","122543","","<p>I have a div which contains some text for the database:</p>

<pre><code>&lt;div id=""summary""&gt;Here is summary of movie&lt;/div&gt;
</code></pre>

<p>And list of links:</p>

<pre><code>&lt;a href=""?id=1"" class=""movie""&gt;Name of movie&lt;/a&gt;
&lt;a href=""?id=2"" class=""movie""&gt;Name of movie&lt;/a&gt;
..
</code></pre>

<p>The process should be something like this:</p>

<ol>
<li>Click on the link</li>
<li>Ajax using the url of the link to pass data via GET to php file / same page</li>
<li>PHP returns string</li>
<li>The div is changed to this string</li>
</ol>
","<pre><code>&lt;script&gt;

function getSummary(id)
{
   $.ajax({

     type: ""GET"",
     url: 'Your URL',
     data: ""id="" + id, // appears as $_GET['id'] @ your backend side
     success: function(data) {
           // data is ur summary
          $('#summary').html(data);
     }

   });

}
&lt;/script&gt;
</code></pre>

<p>And add <code>onclick</code> event in your lists </p>

<pre><code>&lt;a onclick=""getSummary('1')""&gt;View Text&lt;/a&gt;
&lt;div id=""#summary""&gt;This text will be replaced when the onclick event (link is clicked) is triggered.&lt;/div&gt;
</code></pre>
","6570220"
"Asynchronous PHP calls?","122504","","<p>Is there a way in PHP to make asynchronous http calls? I don't care about the response, I just want to do something like <code>file_get_contents()</code>, but not wait for the request to finish before executing the rest of my code. This would be super useful for setting off ""events"" of a sort in my application, or triggering long processes.</p>

<p>Any ideas?</p>
","<p>The answer I'd previously accepted didn't work. It still waited for responses. This does work though, taken from <a href=""https://stackoverflow.com/questions/962915/how-do-i-make-an-asynchronous-get-request-in-php"">How do I make an asynchronous GET request in PHP?</a></p>

<pre><code>function post_without_wait($url, $params)
{
    foreach ($params as $key =&gt; &amp;$val) {
      if (is_array($val)) $val = implode(',', $val);
        $post_params[] = $key.'='.urlencode($val);
    }
    $post_string = implode('&amp;', $post_params);

    $parts=parse_url($url);

    $fp = fsockopen($parts['host'],
        isset($parts['port'])?$parts['port']:80,
        $errno, $errstr, 30);

    $out = ""POST "".$parts['path']."" HTTP/1.1\r\n"";
    $out.= ""Host: "".$parts['host'].""\r\n"";
    $out.= ""Content-Type: application/x-www-form-urlencoded\r\n"";
    $out.= ""Content-Length: "".strlen($post_string).""\r\n"";
    $out.= ""Connection: Close\r\n\r\n"";
    if (isset($post_string)) $out.= $post_string;

    fwrite($fp, $out);
    fclose($fp);
}
</code></pre>
","2924987"
"PHP ""pretty print"" json_encode","122460","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/6054033/pretty-printing-json-with-php"">Pretty-Printing JSON with PHP</a>  </p>
</blockquote>



<p>I'm working on a script that creates a JSON file. Right now I'm just using <code>json_encode</code> (PHP 5.2.x) to encode an array into JSON output. Then I print the returned value to a file and save it. Problem is that the client wants to be able to open these JSON files for readability, so I'd like to add line breaks in and ""pretty print"" the JSON output. Any ideas on how to do this? My only other alternative that I can see is to not use <code>json_encode</code> at all and just write the file contents manually and add in my own line breaks for each line.</p>

<p>Here's what I get:</p>

<pre><code>{""product_name"":""prod1"",""val1"":1,""val2"":8}
</code></pre>

<p>Here's what I want:</p>

<pre><code>{
  ""product_name"":""prod1"",
  ""val1"":1,
  ""val2"":8
}
</code></pre>

<p>I suppose I could also just replace every comma with a command followed by a \n, and same for the brackets... Thoughts?</p>
","<p>PHP has JSON_PRETTY_PRINT option since 5.4.0 (release date 01-Mar-2012).</p>

<p>This should do the job:</p>

<pre><code>$json = json_decode($string);
echo json_encode($json, JSON_PRETTY_PRINT);
</code></pre>

<p>See <a href=""http://www.php.net/manual/en/function.json-encode.php"">http://www.php.net/manual/en/function.json-encode.php</a></p>

<p>Note: Don't forget to echo ""&lt;pre>"" before and &lt;/pre> after, if you're printing it in HTML ;)</p>
","13638998"
"onClick function of an input type=""button"" not working","122453","","<p>I have this code which on clicking the button ""Get more fields"" will create a copy of the entire div and create fields. But on clicking the button nothing is happening. All the other buttons are working fine. Don't know what I'm doing wrong.
Thanks for your help in advance.</p>

<pre><code>&lt;html&gt;
&lt;head&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;div id=""readroot"" style=""display: none""&gt;

    &lt;input type=""button"" value=""Remove review""
        onclick=""this.parentNode.parentNode.removeChild(this.parentNode);"" /&gt;&lt;br /&gt;&lt;br /&gt;

    &lt;input name=""cd"" value=""title"" /&gt;

    &lt;select name=""rankingsel""&gt;
        &lt;option&gt;Rating&lt;/option&gt;
        &lt;option value=""excellent""&gt;Excellent&lt;/option&gt;
        &lt;option value=""good""&gt;Good&lt;/option&gt;
        &lt;option value=""ok""&gt;OK&lt;/option&gt;
        &lt;option value=""poor""&gt;Poor&lt;/option&gt;
        &lt;option value=""bad""&gt;Bad&lt;/option&gt;
    &lt;/select&gt;&lt;br /&gt;&lt;br /&gt;

    &lt;textarea rows=""5"" cols=""20"" name=""review""&gt;Short review&lt;/textarea&gt;
    &lt;br /&gt;Radio buttons included to test them in Explorer:&lt;br /&gt;
    &lt;input type=""radio"" name=""something"" value=""test1"" /&gt;Test 1&lt;br /&gt;
    &lt;input type=""radio"" name=""something"" value=""test2"" /&gt;Test 2

&lt;/div&gt;

&lt;form method=""post"" action=""index1.php""&gt;

    &lt;span id=""writeroot""&gt;&lt;/span&gt;

    &lt;input type=""button"" id=""moreFields"" value=""Give me more fields!""  /&gt;
    &lt;input type=""submit"" value=""Send form"" /&gt;

&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;

&lt;script&gt;

var counter = 0;


function moreFields() {
    counter++;
    var newFields = document.getElementById('readroot').cloneNode(true);
    newFields.id = '';
    newFields.style.display = 'block';
    var newField = newFields.childNodes;
    for (var i=0;i&lt;newField.length;i++) {
        var theName = newField[i].name
        if (theName)
            newField[i].name = theName + counter;
    }
    var insertHere = document.getElementById('writeroot');
    insertHere.parentNode.insertBefore(newFields,insertHere);
}

window.onload = moreFields;
&lt;/script&gt;
</code></pre>
","<p>You have to change the ID of the button to be different from the function name
<a href=""http://jsfiddle.net/zFwK3/"">JSFiddle</a></p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>var counter = 0;


function moreFields() {
  counter++;
  var newFields = document.getElementById('readroot').cloneNode(true);
  newFields.id = '';
  newFields.style.display = 'block';
  var newField = newFields.childNodes;
  for (var i = 0; i &lt; newField.length; i++) {
    var theName = newField[i].name
    if (theName) newField[i].name = theName + counter;
  }
  var insertHere = document.getElementById('writeroot');
  insertHere.parentNode.insertBefore(newFields, insertHere);
}

window.onload = moreFields();</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;div id=""readroot"" style=""display: none""&gt;
  &lt;input type=""button"" value=""Remove review"" onclick=""this.parentNode.parentNode.removeChild(this.parentNode);"" /&gt;
  &lt;br /&gt;
  &lt;br /&gt;
  &lt;input name=""cd"" value=""title"" /&gt;
  &lt;select name=""rankingsel""&gt;
    &lt;option&gt;Rating&lt;/option&gt;
    &lt;option value=""excellent""&gt;Excellent&lt;/option&gt;
    &lt;option value=""good""&gt;Good&lt;/option&gt;
    &lt;option value=""ok""&gt;OK&lt;/option&gt;
    &lt;option value=""poor""&gt;Poor&lt;/option&gt;
    &lt;option value=""bad""&gt;Bad&lt;/option&gt;
  &lt;/select&gt;
  &lt;br /&gt;
  &lt;br /&gt;
  &lt;textarea rows=""5"" cols=""20"" name=""review""&gt;Short review&lt;/textarea&gt;
  &lt;br /&gt;Radio buttons included to test them in Explorer:
  &lt;br /&gt;
  &lt;input type=""radio"" name=""something"" value=""test1"" /&gt;Test 1
  &lt;br /&gt;
  &lt;input type=""radio"" name=""something"" value=""test2"" /&gt;Test 2&lt;/div&gt;
&lt;form method=""post"" action=""index1.php""&gt; &lt;span id=""writeroot""&gt;&lt;/span&gt;

  &lt;input type=""button"" onclick=""moreFields();"" id=""moreFieldsButton"" value=""Give me more fields!"" /&gt;
  &lt;input type=""submit"" value=""Send form"" /&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
</p>
","22038893"
"mysql query result into php array","122311","","<p>Some code here, I want store mysql query result into an array with php, but my code return result: <code>2h</code>, not what I wish.(the correct result should be 36,35,34,33,32) </p>

<pre><code>&lt;?php
set_time_limit(59);
mysql_select_db(""mycoon"",$db);
mysql_query(""SET NAMES utf8""); 
$result = mysql_query(""SELECT id,link FROM mytable Order By id DESC LIMIT 0,5"");
$new_array[] = $row;
while ($row = mysql_fetch_array($result)) {
    $new_array[$row['id']] = $row;
    $new_array[$row['link']] = $row;
}
mysql_close($db);// close mysql then do other job with set_time_limit(59)
foreach($new_array as $array){
    echo $array['id'].'&lt;br /&gt;';
    echo $array['link'].'&lt;br /&gt;';
}
?&gt;
</code></pre>

<p>Result:</p>

<pre><code>36
http://localhost/img/img36.jpg
36
http://localhost/img/img36.jpg
35
http://localhost/img/img35.jpg
35
http://localhost/img/img35.jpg
34
http://localhost/img/img34.jpg
34
http://localhost/img/img34.jpg
33
http://localhost/img/img33.jpg
33
http://localhost/img/img33.jpg
32
http://localhost/img/img32.jpg
32
http://localhost/img/img32.jpg
</code></pre>
","<p>I think you wanted to do this:</p>

<pre class=""lang-php prettyprint-override""><code>while( $row = mysql_fetch_assoc( $result)){
    $new_array[] = $row; // Inside while loop
}
</code></pre>

<p>Or maybe store id as key too</p>

<pre class=""lang-php prettyprint-override""><code> $new_array[ $row['id']] = $row;
</code></pre>

<p>Using the second ways you would be able to address rows directly by their id, such as: <code>$new_array[ 5]</code>.</p>
","8970148"
"CORS with php headers","122271","","<p>I have a simple PHP script that I am attempting a cross-domain CORS request:</p>

<pre><code>&lt;?php
header(""Access-Control-Allow-Origin: *"");
header(""Access-Control-Allow-Headers: *"");
...
</code></pre>

<p>Yet I still get the error:</p>

<blockquote>
  <p>Request header field <code>X-Requested-With</code> is not allowed by <code>Access-Control-Allow-Headers</code></p>
</blockquote>

<p>Anything I'm missing?</p>
","<p><code>Access-Control-Allow-Headers</code> does not allow <code>*</code> as accepted value, see the Mozilla Documentation <a href=""https://developer.mozilla.org/En/HTTP_access_control#Access-Control-Allow-Headers"" rel=""noreferrer"">here</a>.</p>

<p>Instead of the asterisk, you should send the accepted headers (first <code>X-Requested-With</code> as the error says).</p>
","8719346"
"PHP - SSL certificate error: unable to get local issuer certificate","122234","","<p>I'm running PHP Version 5.6.3 as part of XAMPP on Windows 7.</p>

<p>When I try to use the Mandrill API, I'm getting the following error:</p>

<blockquote>
  <p>Uncaught exception 'Mandrill_HttpError' with message 'API call to messages/send-template failed: SSL certificate problem: unable to get local issuer certificate'</p>
</blockquote>

<p>I already tried everything I read on StackOverflow, including adding the following to the php.ini file:</p>

<pre><code>curl.cainfo = ""C:\xampp\php\cacert.pem""
</code></pre>

<p>And ofcourse downloaded to that location the cacert.pem file from <a href=""http://curl.haxx.se/docs/caextract.html"">http://curl.haxx.se/docs/caextract.html</a></p>

<p>but after all that, restarted XAMPP and Apache server but still getting the same error.</p>

<p>I really don't know what else to try.</p>

<p>Can anyone advise on what else can I try?</p>
","<p>Finally got this to work!</p>

<ol>
<li><p>Download the <a href=""https://curl.haxx.se/docs/caextract.html"" rel=""noreferrer"">certificate bundle</a>.</p></li>
<li><p>Put it somewhere. In my case, that was <code>c:\wamp\</code> directory (if you are using Wamp 64 bit then it's <code>c:\wamp64\</code>).</p></li>
<li><p>Enable <code>mod_ssl</code> in Apache and <code>php_openssl.dll</code> in <code>php.ini</code>. But be careful, my problem was that I had two <code>php.ini</code> files and I need to do this in both of them. One is the one you get from your WAMP taskbar icon, and another one is, in my case, in <code>C:\wamp\bin\php\php5.5.12\</code></p></li>
<li><p>Add these lines to your cert in both <code>php.ini</code> files:</p>

<pre><code>curl.cainfo=""C:/wamp/cacert.pem""
openssl.cafile=""C:/wamp/cacert.pem""
</code></pre></li>
<li><p>Restart Wamp services.</p></li>
</ol>
","32095378"
"Get Image Height and Width as integer values?","122196","","<p>I've tried to use the PHP function <a href=""http://php.net/manual/en/function.getimagesize.php"" rel=""noreferrer"">getimagesize</a>, but I was unable to extract the image width and height as an integer value.</p>

<p>How can I achieve this?</p>
","<p>Try like this:</p>

<pre><code>list($width, $height) = getimagesize('path_to_image');
</code></pre>

<p>Make sure that:</p>

<ol>
<li>You specify the correct image path there  </li>
<li>The image has read access  </li>
<li>Chmod image dir to 755</li>
</ol>

<p>Also try to prefix path with <code>$_SERVER[DOCUMENT_ROOT]</code>, this helps sometimes when you are not able to read the files</p>
","2179126"
"Converting HTML to plain text in PHP for e-mail","122177","","<p>I use <a href=""http://tinymce.moxiecode.com/"" rel=""noreferrer"">TinyMCE</a> to allow minimal formatting of text within my site. From the HTML that's produced, I'd like to convert it to plain text for e-mail. I've been using a class called <a href=""http://www.chuggnutt.com/html2text.php"" rel=""noreferrer"">html2text</a>, but it's really lacking in UTF-8 support, among other things. I do, however, like that it maps certain HTML tags to plain text formatting — like putting underscores around text that previously had &lt;i&gt; tags in the HTML.</p>

<p>Does anyone use a similar approach to converting HTML to plain text in PHP? And if so: Do you recommend any third-party classes that I can use? Or how do you best tackle this issue?</p>
","<p>Use <a href=""https://github.com/soundasleep/html2text"" rel=""nofollow noreferrer"">html2text</a> (example <a href=""https://github.com/soundasleep/html2text/blob/master/tests/basic.html"" rel=""nofollow noreferrer"">HTML</a> to <a href=""https://github.com/soundasleep/html2text/blob/master/tests/basic.txt"" rel=""nofollow noreferrer"">text</a>), licensed under the <a href=""http://www.eclipse.org/legal/epl-v10.html"" rel=""nofollow noreferrer"">Eclipse Public License</a>. It uses PHP's DOM methods to load from HTML, and then iterates over the resulting DOM to extract plain text. Usage:</p>

<pre><code>$text = convert_html_to_text($html);
</code></pre>

<p>Although incomplete, it is open source and contributions are welcome.</p>

<p>Issues with other conversion scripts:</p>

<ul>
<li>Since <a href=""http://www.chuggnutt.com/html2text.php"" rel=""nofollow noreferrer"">html2text</a> (GPL) is not EPL-compatible.</li>
<li><a href=""http://www.howtocreate.co.uk/php/html2texthowto.html"" rel=""nofollow noreferrer"">lkessler's link</a> (attribution) is incompatible with most open source licenses.</li>
</ul>
","2564472"
"In PHP 5.3.0, what is the function ""use"" identifier?","122176","","<p>I'm checking out some <code>PHP 5.3.0</code> features and ran across some code on the site that looks quite funny:</p>

<pre><code>public function getTotal($tax)
{
    $total = 0.00;

    $callback =
        /* This line here: */
        function ($quantity, $product) use ($tax, &amp;$total)
        {
            $pricePerItem = constant(__CLASS__ . ""::PRICE_"" .
                strtoupper($product));
            $total += ($pricePerItem * $quantity) * ($tax + 1.0);
        };

    array_walk($this-&gt;products, $callback);
    return round($total, 2);
}
</code></pre>

<p>as one of the examples on <a href=""http://www.php.net/manual/en/functions.anonymous.php"" rel=""noreferrer"">anonymous functions</a>.</p>

<p>Does anybody know about this? Any documentation? And it looks evil, should it ever be used?</p>
","<p>This is how PHP expresses a <a href=""http://en.wikipedia.org/wiki/Closure_(computer_science)"" rel=""noreferrer"">closure</a>.  This is not evil at all and in fact it is quite powerful and useful.  </p>

<p>Basically what this means is that you are allowing the anonymous function to ""capture"" local variables (in this case, <code>$tax</code> and a reference to <code>$total</code>) outside of it scope and preserve their values (or in the case of <code>$total</code> the reference to <code>$total</code> itself) as state within the anonymous function itself.</p>
","1065197"
"How to upload a file using Java HttpClient library working with PHP","122164","","<p>I want to write Java application that will upload a file to the Apache server with PHP. The Java code uses Jakarta HttpClient library version 4.0 beta2:</p>

<pre><code>import java.io.File;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.HttpVersion;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.FileEntity;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.CoreProtocolPNames;
import org.apache.http.util.EntityUtils;


public class PostFile {
  public static void main(String[] args) throws Exception {
    HttpClient httpclient = new DefaultHttpClient();
    httpclient.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);

    HttpPost httppost = new HttpPost(""http://localhost:9002/upload.php"");
    File file = new File(""c:/TRASH/zaba_1.jpg"");

    FileEntity reqEntity = new FileEntity(file, ""binary/octet-stream"");

    httppost.setEntity(reqEntity);
    reqEntity.setContentType(""binary/octet-stream"");
    System.out.println(""executing request "" + httppost.getRequestLine());
    HttpResponse response = httpclient.execute(httppost);
    HttpEntity resEntity = response.getEntity();

    System.out.println(response.getStatusLine());
    if (resEntity != null) {
      System.out.println(EntityUtils.toString(resEntity));
    }
    if (resEntity != null) {
      resEntity.consumeContent();
    }

    httpclient.getConnectionManager().shutdown();
  }
}
</code></pre>

<p>The PHP file <code>upload.php</code> is very simple:</p>

<pre><code>&lt;?php
if (is_uploaded_file($_FILES['userfile']['tmp_name'])) {
  echo ""File "". $_FILES['userfile']['name'] ."" uploaded successfully.\n"";
  move_uploaded_file ($_FILES['userfile'] ['tmp_name'], $_FILES['userfile'] ['name']);
} else {
  echo ""Possible file upload attack: "";
  echo ""filename '"". $_FILES['userfile']['tmp_name'] . ""'."";
  print_r($_FILES);
}
?&gt;
</code></pre>

<p>Reading the response I get the following result:</p>

<pre><code>executing request POST http://localhost:9002/upload.php HTTP/1.1
</code></pre>

<pre>
HTTP/1.1 200 OK
Possible file upload attack: filename ''.
Array
(
)
</pre>

<p>So the request was successful, I was able to communicate with server, however PHP didn't notice the file - the method <code>is_uploaded_file</code> returned <code>false</code> and <code>$_FILES</code> variable is empty. I have no idea why this might happend. I have tracked HTTP response and request and they look ok:<br>
request is:</p>

<pre>
POST /upload.php HTTP/1.1
Content-Length: 13091
Content-Type: binary/octet-stream
Host: localhost:9002
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.0-beta2 (java 1.5)
Expect: 100-Continue

˙Ř˙ŕ..... the rest of the binary file...
</pre>

<p>and response:</p>

<pre>
HTTP/1.1 100 Continue

HTTP/1.1 200 OK
Date: Wed, 01 Jul 2009 06:51:57 GMT
Server: Apache/2.2.8 (Win32) DAV/2 mod_ssl/2.2.8 OpenSSL/0.9.8g mod_autoindex_color PHP/5.2.5 mod_jk/1.2.26
X-Powered-By: PHP/5.2.5
Content-Length: 51
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Content-Type: text/html

Possible file upload attack: filename ''.Array
(
)
</pre>

<p>I was testing this both on the local windows xp with xampp and remote Linux server. I have also tried to use previous version of HttpClient - version 3.1 - and the result was even more unclear, <code>is_uploaded_file</code> returned <code>false</code>, however <code>$_FILES</code> array was filled with proper data.</p>
","<p>Ok, the Java code I used was wrong, here comes the right Java class:</p>

<pre><code>import java.io.File;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.HttpVersion;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.mime.MultipartEntity;
import org.apache.http.entity.mime.content.ContentBody;
import org.apache.http.entity.mime.content.FileBody;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.CoreProtocolPNames;
import org.apache.http.util.EntityUtils;


public class PostFile {
  public static void main(String[] args) throws Exception {
    HttpClient httpclient = new DefaultHttpClient();
    httpclient.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);

    HttpPost httppost = new HttpPost(""http://localhost:9001/upload.php"");
    File file = new File(""c:/TRASH/zaba_1.jpg"");

    MultipartEntity mpEntity = new MultipartEntity();
    ContentBody cbFile = new FileBody(file, ""image/jpeg"");
    mpEntity.addPart(""userfile"", cbFile);


    httppost.setEntity(mpEntity);
    System.out.println(""executing request "" + httppost.getRequestLine());
    HttpResponse response = httpclient.execute(httppost);
    HttpEntity resEntity = response.getEntity();

    System.out.println(response.getStatusLine());
    if (resEntity != null) {
      System.out.println(EntityUtils.toString(resEntity));
    }
    if (resEntity != null) {
      resEntity.consumeContent();
    }

    httpclient.getConnectionManager().shutdown();
  }
}
</code></pre>

<p>note using MultipartEntity.</p>
","1068132"
"Using if(isset($_POST['submit'])) to not display echo when script is open is not working","121910","","<p>I have a little problem with my <code>if(isset($_POST['submit']))</code> code. What I want is some echos and a table to not appear when the script is open but I do want it to show when the submit button for the form has been clicked. The problem is though that when I include the <code>if(isset($_POST['submit']))</code> function, when I click on the submit button it does not display the echos and the table at all. Why is this and can you help me out with this issue please.</p>

<p>Below is the code:</p>

<pre><code>    &lt;!DOCTYPE html PUBLIC ""-//W3C//DTD XHTML 1.0 Transitional//EN"" ""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd""&gt;
&lt;html xmlns=""http://www.w3.org/1999/xhtml""&gt;
&lt;head&gt;

&lt;title&gt;Exam Interface&lt;/title&gt;
&lt;meta http-equiv=""Content-Type"" content=""text/html; charset=utf-8"" /&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;p&gt;&lt;strong&gt;NOTE: &lt;/strong&gt;If a search box is left blank, then the form will search for all data under that specific field&lt;/p&gt;

&lt;form action=""exam_interface.php"" method=""post"" name=""sessionform""&gt;        &lt;!-- This will post the form to its own page""--&gt;
&lt;p&gt;Session ID: &lt;input type=""text"" name=""sessionid"" /&gt;&lt;/p&gt;      &lt;!-- Enter Session Id here--&gt;
&lt;p&gt;Module Number: &lt;input type=""text"" name=""moduleid"" /&gt;&lt;/p&gt;      &lt;!-- Enter Module Id here--&gt;
&lt;p&gt;Teacher Username: &lt;input type=""text"" name=""teacherid"" /&gt;&lt;/p&gt;      &lt;!-- Enter Teacher here--&gt;
&lt;p&gt;Student Username: &lt;input type=""text"" name=""studentid"" /&gt;&lt;/p&gt;      &lt;!-- Enter User Id here--&gt;
&lt;p&gt;Grade: &lt;input type=""text"" name=""grade"" /&gt;&lt;/p&gt;      &lt;!-- Enter Grade here--&gt;
&lt;p&gt;Order Results By: &lt;select name=""order""&gt;
&lt;option value=""ordersessionid""&gt;Session ID&lt;/option&gt;
&lt;option value=""ordermoduleid""&gt;Module Number&lt;/option&gt;
&lt;option value=""orderteacherid""&gt;Teacher Username&lt;/option&gt;
&lt;option value=""orderstudentid""&gt;Student Username&lt;/option&gt;
&lt;option value=""ordergrade""&gt;Grade&lt;/option&gt;
&lt;/select&gt;
&lt;p&gt;&lt;input type=""submit"" value=""Submit"" /&gt;&lt;/p&gt;
&lt;/form&gt;

&lt;?php

$username=""xxx"";
$password=""xxx"";
$database=""mobile_app"";

mysql_connect('localhost',$username,$password);

@mysql_select_db($database) or die(""Unable to select database"");

$sessionid = isset ($_POST['sessionid']) ? $_POST['sessionid'] : """";
$moduleid = isset ($_POST['moduleid']) ? $_POST['moduleid'] : """";
$teacherid = isset ($_POST['teacherid']) ? $_POST['teacherid'] : """";
$studentid = isset ($_POST['studentid']) ? $_POST['studentid'] : """";
$grade = isset ($_POST['grade']) ? $_POST['grade'] : """";
$orderfield = isset ($_POST['order']) ? $_POST['order'] : """";

$sessionid = mysql_real_escape_string($sessionid);
$moduleid = mysql_real_escape_string($moduleid);
$teacherid = mysql_real_escape_string($teacherid);
$studentid = mysql_real_escape_string($studentid);
$grade = mysql_real_escape_string($grade);

switch ($orderfield) {
    case 'ordersessionid': $orderfield = 'gr.SessionId';
    break;
    case 'ordermoduleid': $orderfield = 'm.ModuleId'; 
    break;
    case 'orderteacherid': $orderfield = 's.TeacherId';
    break;
    case 'orderstudentid': $orderfield = 'gr.StudentId'; 
    break;
    case 'ordergrade': $orderfield = 'gr.Grade';
    break;
}

$ordertable = $orderfield;

$result = mysql_query(""SELECT * FROM Module m INNER JOIN Session s ON m.ModuleId = s.ModuleId JOIN Grade_Report gr ON s.SessionId = gr.SessionId JOIN Student st ON gr.StudentId = st.StudentId WHERE ('$sessionid' = '' OR gr.SessionId = '$sessionid') AND ('$moduleid' = '' OR m.ModuleId = '$moduleid') AND ('$teacherid' = '' OR s.TeacherId = '$teacherid') AND ('$studentid' = '' OR gr.StudentId = '$studentid') AND ('$grade' = '' OR gr.Grade = '$grade') ORDER BY $ordertable ASC"");

$num=mysql_numrows($result);

if(isset($_POST['submit'])){

echo ""&lt;p&gt;Your Search: &lt;strong&gt;Session ID:&lt;/strong&gt; ""; if (empty($sessionid))echo ""'All Sessions'""; else echo ""'$sessionid'"";echo "", &lt;strong&gt;Module ID:&lt;/strong&gt; ""; if (empty($moduleid))echo ""'All Modules'""; else echo ""'$moduleid'"";echo "", &lt;strong&gt;Teacher Username:&lt;/strong&gt; ""; if (empty($teacherid))echo ""'All Teachers'""; else echo ""'$teacherid'"";echo "", &lt;strong&gt;Student Username:&lt;/strong&gt; ""; if (empty($studentid))echo ""'All Students'""; else echo ""'$studentid'"";echo "", &lt;strong&gt;Grade:&lt;/strong&gt; ""; if (empty($grade))echo ""'All Grades'""; else echo ""'$grade'""; ""&lt;/p&gt;"";

echo ""&lt;p&gt;Number of Records Shown in Result of the Search: &lt;strong&gt;$num&lt;/strong&gt;&lt;/p&gt;"";

echo ""&lt;table border='1'&gt;
&lt;tr&gt;
&lt;th&gt;Student Id&lt;/th&gt;
&lt;th&gt;Forename&lt;/th&gt;
&lt;th&gt;Session Id&lt;/th&gt;
&lt;th&gt;Grade&lt;/th&gt;
&lt;th&gt;Mark&lt;/th&gt;
&lt;th&gt;Module&lt;/th&gt;
&lt;th&gt;Teacher&lt;/th&gt;
&lt;/tr&gt;"";

while ($row = mysql_fetch_array($result)){

 echo ""&lt;tr&gt;"";
  echo ""&lt;td&gt;"" . $row['StudentId'] . ""&lt;/td&gt;"";
  echo ""&lt;td&gt;"" . $row['Forename'] . ""&lt;/td&gt;"";
  echo ""&lt;td&gt;"" . $row['SessionId'] . ""&lt;/td&gt;"";
  echo ""&lt;td&gt;"" . $row['Grade'] . ""&lt;/td&gt;"";
  echo ""&lt;td&gt;"" . $row['Mark'] . ""&lt;/td&gt;"";
  echo ""&lt;td&gt;"" . $row['ModuleName'] . ""&lt;/td&gt;"";
  echo ""&lt;td&gt;"" . $row['TeacherId'] . ""&lt;/td&gt;"";
  echo ""&lt;/tr&gt;"";
}

echo ""&lt;/table&gt;"";

}

mysql_close();


 ?&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Any help will be much appreciated, Thank You.</p>
","<p>You need to give your submit <code>&lt;input&gt;</code> a name or it won't be available using <code>$_POST['submit']</code>:</p>

<pre><code>&lt;p&gt;&lt;input type=""submit"" value=""Submit"" name=""submit"" /&gt;&lt;/p&gt;
</code></pre>
","7775525"
"Getting DOM elements by classname","121864","","<p>I'm using <a href=""http://www.php.net/manual/en/book.dom.php"" rel=""noreferrer"">PHP DOM</a> and I'm trying to get an element within a DOM node that have a given class name.  What's the best way to get that sub-element?</p>

<p><strong>Update:</strong> I ended up using <code>Mechanize</code> for PHP which was much easier to work with.</p>
","<p><strong>Update: Xpath version of <code>*[@class~='my-class']</code> css selector</strong></p>

<p>So after my comment below in response to hakre's comment i got curious and looked into the code behind <code>Zend_Dom_Query</code>. It looks like the above selector is compiled to the following xpath (untested):</p>

<p><code>[contains(concat(' ', normalize-space(@class), ' '), ' my-class ')]</code></p>

<p>so the php would be:</p>

<pre><code>$dom = new DomDocument();
$dom-&gt;load($filePath);
$finder = new DomXPath($dom);
$classname=""my-class"";
$nodes = $finder-&gt;query(""//*[contains(concat(' ', normalize-space(@class), ' '), ' $classname ')]"");
</code></pre>

<p>Basically all we do here is normalize the <code>class</code> attribute so that even a single class is bounded by spaces, and the complete class list is bounded in spaces. Then append class we are searching for with a space. This way we are effectively looking for and find only instances of <code>my-class</code>.</p>

<hr>

<p>Use an xpath selector?</p>

<pre><code>$dom = new DomDocument();
$dom-&gt;load($filePath);
$finder = new DomXPath($dom);
$classname=""my-class"";
$nodes = $finder-&gt;query(""//*[contains(@class, '$classname')]"");
</code></pre>

<p>If it is only ever one type of element you can replace the <code>*</code> with the particular tagname.</p>

<p>If you need to do alot of this with very complex selector i would recommend <a href=""http://framework.zend.com/manual/en/zend.dom.query.html"" rel=""noreferrer""><code>Zend_Dom_Query</code></a> which supports CSS selector syntax (a la jQuery):</p>

<pre><code>$finder = new Zend_Dom_Query($html);
$classname = 'my-class';
$nodes = $finder-&gt;query(""*[class~=\""$classname\""]"");
</code></pre>
","6366390"
"passing php variable using url","121717","","<p>I want to pass some php variable using url...I tried the following code.</p>

<p>link.php </p>

<p><pre><code><code>&lt;html&gt;
&lt;body&gt;
&lt;?php
$a='Link1';
$b='Link2';
echo '&lt;a href=""pass.php?link=$a""&gt;Link 1&lt;/a&gt;';
echo '&lt;br/&gt;';
echo '&lt;a href=""pass.php?link=$b""&gt;Link 2&lt;/a&gt;';
?&gt;&lt;/body&gt;&lt;/html&gt;</code></pre></code></p>

<p>pass.php
<pre><code><code>&lt;html&gt;
&lt;body&gt;
&lt;?php
if ($_GET['link']==$a)
{
echo ""Link 1 Clicked"";
} else {
echo ""Link 2 Clicked"";
}
?&gt;&lt;/body&gt;&lt;/html&gt;</code></pre></code></p>

<p>on clicking the links(i.e. both Link1 and Link2) I get Link 2 clicked....Can you figure out the problem?</p>
","<p>In your link.php your echo statement must be like this.</p>

<pre><code>echo '&lt;a href=""pass.php?link=' . $a . '&gt;Link 1&lt;/a&gt;';
echo '&lt;a href=""pass.php?link=' . $b . '""&gt;Link 2&lt;/a&gt;';
</code></pre>

<p>Then in your pass.php you cannot use $a because it was not initialized with you intended string value.</p>

<p>Although you can directly compare it to a string like this.</p>

<pre><code>if($_GET['link'] == 'Link1')
</code></pre>

<p>Another way is initialized first the variable the same thing you did with link.php. And much better way is you include the $a and $b variable in a single php file. Then included that in all pages where you are going to use that variable as Tim Cooper mention on his post. You can also include this in a session.</p>
","5440243"
"PHP get dropdown value and text","121682","","<pre><code>&lt;select id=""animal"" name=""animal""&gt;                      
&lt;option value=""0""&gt;--Select Animal--&lt;/option&gt;
&lt;option value=""1""&gt;Cat&lt;/option&gt;
&lt;option value=""2""&gt;Dog&lt;/option&gt;
&lt;option value=""3""&gt;Cow&lt;/option&gt;
&lt;/select&gt;

if($_POST['submit'])
{
$animal=$_POST['animal'];
}
</code></pre>

<p>I have a dropdown like this. What I want, I want to get selected value and text in button submit using <strong>PHP</strong>. I mean if it's selected 1st one. I want to get both <strong>1</strong> and <strong>Cat</strong></p>

<p>Please help. thank you.</p>
","<pre><code>$animals = array('--Select Animal--', 'Cat', 'Dog', 'Cow');
$selected_key = $_POST['animal'];
$selected_val = $animals[$_POST['animal']];
</code></pre>

<p>Use your $animals list to generate your dropdown list; you now can get the key &amp; the value of that key.</p>
","6670067"
"How to post pictures to instagram using API","121485","","<p>I am building a php application which needs to post the user uploaded picture directly to Instagram, but after a quick search i found that there is no such function in the API :( and it feels weird... because they should provide one. I am not sure if there is any other way (except the apps for android and iOS) to upload picture using php. Kindly give me any sort of idea if there is any possibility.</p>

<p>I also read this ,</p>

<p><a href=""https://stackoverflow.com/questions/15969330/how-do-i-share-a-link-and-photo-with-instagram-using-php"">How do I share a link and photo with Instagram using PHP</a></p>

<p>Thank you</p>
","<p>If you read the link you shared, the accepted answer is:</p>

<blockquote>
  <p>You cannot post pictures to Instagram via the API.</p>
</blockquote>

<p>It seems you can emulate instagram on PC though.</p>

<p><a href=""http://www.bluestacks.com/"" rel=""noreferrer"">Bluestacks</a> is an emulator which lets you run android apps on your PC/Mac etc.</p>

<p>I'm not sure how well it works though.</p>

<p>A second alternative is to use <a href=""https://github.com/mislav/instagram/"" rel=""noreferrer"">this</a>. It's the Instagram API, however it's been reversed engineered and explains how to use it (including uploading media).</p>

<p>Again, not sure how well this works.</p>
","18844791"
"How do I calculate the percentage of a number?","121452","","<p>I would like to calculate, in PHP, the percentage of a number. For example:</p>

<pre><code>$percentage = 50;
$totalWidth = 350;
</code></pre>

<p>For this example, 50% of 350 = 175</p>

<p>How can I do that?</p>
","<pre><code>$percentage = 50;
$totalWidth = 350;

$new_width = ($percentage / 100) * $totalWidth;
</code></pre>
","10201086"
"increment date by one month","121424","","<p>Let's say I have a date in the following format: 2010-12-11 (year-mon-day)</p>

<p>With PHP, I want to increment the date by one month, and I want the year to be automatically incremented, if necessary (i.e. incrementing from December 2012 to January 2013).</p>

<p>Regards.</p>
","<pre><code>$time = strtotime(""2010.12.11"");
$final = date(""Y-m-d"", strtotime(""+1 month"", $time));

// Finally you will have the date you're looking for.
</code></pre>
","2870374"
"PHP - find entry by object property from a array of objects","121423","","<p>The array looks like:</p>

<pre><code>[0] =&gt; stdClass Object
        (
            [ID] =&gt; 420
            [name] =&gt; Mary
         )

[1] =&gt; stdClass Object
        (
            [ID] =&gt; 10957
            [name] =&gt; Blah
         )
...
</code></pre>

<p>And I have a integer variable called <code>$v</code>.</p>

<p>How could I select a array entry that has a object where the 'ID' property has the <code>$v</code> value ?</p>
","<p>You either iterate the array, searching for the particular record (ok in a one time only search) or build a hashmap using another associative array.</p>

<p>For the former, something like this</p>

<pre><code>$item = null;
foreach($array as $struct) {
    if ($v == $struct-&gt;ID) {
        $item = $struct;
        break;
    }
}
</code></pre>

<p>See this question and subsequent answers for more information on the latter - <a href=""https://stackoverflow.com/questions/4405281/reference-php-array-by-multiple-indexes"">Reference PHP array by multiple indexes</a></p>
","4742925"
"How to call a MySQL stored procedure from within PHP code?","121213","","<p>I have stored procedure that I created in MySQL and want PHP to call that stored procedure.  What is the best way to do this?</p>

<p>-MySQL client version: 4.1.11<br>
-MySQL Server version: 5.0.45  </p>

<p>Here is my stored procedure:</p>

<pre><code>DELIMITER $$

DROP FUNCTION IF EXISTS `getNodeName` $$
CREATE FUNCTION `getTreeNodeName`(`nid` int) RETURNS varchar(25) CHARSET utf8
BEGIN
 DECLARE nodeName varchar(25);
 SELECT name into nodeName FROM tree
 WHERE id = nid;
 RETURN nodeName;
END $$

DELIMITER ;
</code></pre>

<p>What is the PHP code to invoke the procedure getTreeNodeName?</p>
","<p>I now found solution by using <code>mysqli</code> instead of <code>mysql</code>.</p>

<pre><code>&lt;?php 

  //connect to database
  $connection = mysqli_connect(""hostname"", ""user"", ""password"", ""db"", ""port"");

  //run the store proc
  $result = mysqli_query($connection, 
     ""CALL StoreProcName"") or die(""Query fail: "" . mysqli_error());

  //loop the result set
  while ($row = mysqli_fetch_array($result)){   
      echo $row[0] . "" - "" . + $row[1]; 
  }

?&gt;
</code></pre>

<p>I found that many people seem to have a problem with using <code>mysql_connect, mysql_query and mysql_fetch_array</code>.</p>
","4161913"
"How to upload and parse a CSV file in php","121008","","<p>I want to upload a csv file with php.  After the file is uploaded, I want to display the data of the CSV file.  I would like an example how to accomplish this task.</p>
","<p>Although you could easily find a tutorial how to handle file uploads with php, and there are functions (manual) to handle CSVs, I will post some code because just a few days ago I worked on a project, including a bit of code you could use...</p>

<p>HTML:</p>

<pre><code>&lt;table width=""600""&gt;
&lt;form action=""&lt;?php echo $_SERVER[""PHP_SELF""]; ?&gt;"" method=""post"" enctype=""multipart/form-data""&gt;

&lt;tr&gt;
&lt;td width=""20%""&gt;Select file&lt;/td&gt;
&lt;td width=""80%""&gt;&lt;input type=""file"" name=""file"" id=""file"" /&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Submit&lt;/td&gt;
&lt;td&gt;&lt;input type=""submit"" name=""submit"" /&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;/form&gt;
&lt;/table&gt;
</code></pre>

<p>PHP:</p>

<pre><code>if ( isset($_POST[""submit""]) ) {

   if ( isset($_FILES[""file""])) {

            //if there was an error uploading the file
        if ($_FILES[""file""][""error""] &gt; 0) {
            echo ""Return Code: "" . $_FILES[""file""][""error""] . ""&lt;br /&gt;"";

        }
        else {
                 //Print file details
             echo ""Upload: "" . $_FILES[""file""][""name""] . ""&lt;br /&gt;"";
             echo ""Type: "" . $_FILES[""file""][""type""] . ""&lt;br /&gt;"";
             echo ""Size: "" . ($_FILES[""file""][""size""] / 1024) . "" Kb&lt;br /&gt;"";
             echo ""Temp file: "" . $_FILES[""file""][""tmp_name""] . ""&lt;br /&gt;"";

                 //if file already exists
             if (file_exists(""upload/"" . $_FILES[""file""][""name""])) {
            echo $_FILES[""file""][""name""] . "" already exists. "";
             }
             else {
                    //Store file in directory ""upload"" with the name of ""uploaded_file.txt""
            $storagename = ""uploaded_file.txt"";
            move_uploaded_file($_FILES[""file""][""tmp_name""], ""upload/"" . $storagename);
            echo ""Stored in: "" . ""upload/"" . $_FILES[""file""][""name""] . ""&lt;br /&gt;"";
            }
        }
     } else {
             echo ""No file selected &lt;br /&gt;"";
     }
}
</code></pre>

<p>I know there must be an easier way to do this, but I read the CSV file and store the single cells of every record in an two dimensional array.</p>

<pre><code>if ( $file = fopen( ""upload/"" . $storagename , r ) ) {

    echo ""File opened.&lt;br /&gt;"";

    $firstline = fgets ($file, 4096 );
        //Gets the number of fields, in CSV-files the names of the fields are mostly given in the first line
    $num = strlen($firstline) - strlen(str_replace("";"", """", $firstline));

        //save the different fields of the firstline in an array called fields
    $fields = array();
    $fields = explode( "";"", $firstline, ($num+1) );

    $line = array();
    $i = 0;

        //CSV: one line is one record and the cells/fields are seperated by "";""
        //so $dsatz is an two dimensional array saving the records like this: $dsatz[number of record][number of cell]
    while ( $line[$i] = fgets ($file, 4096) ) {

        $dsatz[$i] = array();
        $dsatz[$i] = explode( "";"", $line[$i], ($num+1) );

        $i++;
    }

        echo ""&lt;table&gt;"";
        echo ""&lt;tr&gt;"";
    for ( $k = 0; $k != ($num+1); $k++ ) {
        echo ""&lt;td&gt;"" . fields[$k] . ""&lt;/td&gt;"";
    }
        echo ""&lt;/tr&gt;"";

    foreach ($dsatz as $key =&gt; $number) {
                //new table row for every record
        echo ""&lt;tr&gt;"";
        foreach ($number as $k =&gt; $content) {
                        //new table cell for every field of the record
            echo ""&lt;td&gt;"" . $content . ""&lt;/td&gt;"";
        }
    }

    echo ""&lt;/table&gt;"";
}
</code></pre>

<p>So I hope this will help, it is just a small snippet of code and I have not tested it, because I used it slightly different. The comments should explain everything.</p>
","5593870"
"PHP's array_map including keys","121007","","<p>Is there a way of doing something like this:</p>

<pre><code>$test_array = array(""first_key"" =&gt; ""first_value"", 
                    ""second_key"" =&gt; ""second_value"");

var_dump(array_map(function($a, $b) { return ""$a loves $b""; }, 
         array_keys($test_array), 
         array_values($test_array)));
</code></pre>

<p>But instead of calling <code>array_keys</code> and <code>array_values</code>, directly passing the <code>$test_array</code> variable?</p>

<p>The desired output is:</p>

<pre><code>array(2) {
  [0]=&gt;
  string(27) ""first_key loves first_value""
  [1]=&gt;
  string(29) ""second_key loves second_value""
}
</code></pre>
","<p>Not with array_map, as it doesn't handle keys.</p>

<p><a href=""http://www.php.net/manual/en/function.array-walk.php"">array_walk</a> does:</p>

<pre><code>$test_array = array(""first_key"" =&gt; ""first_value"",
                    ""second_key"" =&gt; ""second_value"");
array_walk($test_array, function(&amp;$a, $b) { $a = ""$b loves $a""; });
var_dump($test_array);
</code></pre>

<p>It does change the array given as parameter however, so it's not exactly functional programming (as you have the question tagged like that).</p>

<p>You could write a function like that yourself if you wanted to.</p>
","13036310"
"HTTP Headers for File Downloads","120978","","<p>I've written a PHP script that handles file downloads, determining which file is being requested and setting the proper HTTP headers to trigger the browser to actually download the file (rather than displaying it in the browser).</p>

<p>I now have a problem where some users have reported certain files being identified incorrectly (so regardless of extension, the browser will consider it a GIF image). I'm guessing this is because I haven't set the ""Content-type"" in the response header. Is this most likely the case? If so, is there a fairly generic type that could be used for all files, rather than trying to account for every possible file type?</p>

<p>Currently I'm only setting the value ""Content-disposition: attachment; filename=arandomf.ile""</p>

<p><strong>Update:</strong> I followed this guide here to build a more robust process for file downloads (<a href=""http://w-shadow.com/blog/2007/08/12/how-to-force-file-download-with-php/"" rel=""noreferrer"">http://w-shadow.com/blog/2007/08/12/how-to-force-file-download-with-php/</a>), but there is a significant delay between when the script is executed and when the browser's download dialog appears. Can anyone identify the bottleneck that is causing this?</p>

<p>Here's my implementation:</p>

<pre><code>/**
 * Outputs the specified file to the browser.
 *
 * @param string $filePath the path to the file to output
 * @param string $fileName the name of the file
 * @param string $mimeType the type of file
 */
function outputFile($filePath, $fileName, $mimeType = '') {
    // Setup
    $mimeTypes = array(
        'pdf' =&gt; 'application/pdf',
        'txt' =&gt; 'text/plain',
        'html' =&gt; 'text/html',
        'exe' =&gt; 'application/octet-stream',
        'zip' =&gt; 'application/zip',
        'doc' =&gt; 'application/msword',
        'xls' =&gt; 'application/vnd.ms-excel',
        'ppt' =&gt; 'application/vnd.ms-powerpoint',
        'gif' =&gt; 'image/gif',
        'png' =&gt; 'image/png',
        'jpeg' =&gt; 'image/jpg',
        'jpg' =&gt; 'image/jpg',
        'php' =&gt; 'text/plain'
    );

    $fileSize = filesize($filePath);
    $fileName = rawurldecode($fileName);
    $fileExt = '';

    // Determine MIME Type
    if($mimeType == '') {
        $fileExt = strtolower(substr(strrchr($filePath, '.'), 1));

        if(array_key_exists($fileExt, $mimeTypes)) {
            $mimeType = $mimeTypes[$fileExt];
        }
        else {
            $mimeType = 'application/force-download';
        }
    }

    // Disable Output Buffering
    @ob_end_clean();

    // IE Required
    if(ini_get('zlib.output_compression')) {
        ini_set('zlib.output_compression', 'Off');
    }

    // Send Headers
    header('Content-Type: ' . $mimeType);
    header('Content-Disposition: attachment; filename=""' . $fileName . '""');
    header('Content-Transfer-Encoding: binary');
    header('Accept-Ranges: bytes');

    // Send Headers: Prevent Caching of File
    header('Cache-Control: private');
    header('Pragma: private');
    header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');

    // Multipart-Download and Download Resuming Support
    if(isset($_SERVER['HTTP_RANGE'])) {
        list($a, $range) = explode('=', $_SERVER['HTTP_RANGE'], 2);
        list($range) = explode(',', $range, 2);
        list($range, $rangeEnd) = explode('-', $range);

        $range = intval($range);

        if(!$rangeEnd) {
            $rangeEnd = $fileSize - 1;
        }
        else {
            $rangeEnd = intval($rangeEnd);
        }

        $newLength = $rangeEnd - $range + 1;

        // Send Headers
        header('HTTP/1.1 206 Partial Content');
        header('Content-Length: ' . $newLength);
        header('Content-Range: bytes ' . $range - $rangeEnd / $size);
    }
    else {
        $newLength = $size;
        header('Content-Length: ' . $size);
    }

    // Output File
    $chunkSize = 1 * (1024*1024);
    $bytesSend = 0;

    if($file = fopen($filePath, 'r')) {
        if(isset($_SERVER['HTTP_RANGE'])) {
            fseek($file, $range);

            while(!feof($file) &amp;&amp; !connection_aborted() &amp;&amp; $bytesSend &lt; $newLength) {
                $buffer = fread($file, $chunkSize);
                echo $buffer;
                flush();
                $bytesSend += strlen($buffer);
            }

            fclose($file);
        }
    }
}
</code></pre>
","<p>Acoording to <a href=""http://www.rfc-editor.org/rfc/rfc2046.txt"" rel=""noreferrer"">RFC 2046 (Multipurpose Internet Mail Extensions)</a>:</p>

<blockquote>
  <p>The recommended action for an
  implementation that receives an<br>
  ""application/octet-stream"" entity is
  to simply offer to put the data    in
  a file</p>
</blockquote>

<p>So I'd go for that one.</p>
","386863"
"How to minify php page html output?","120884","","<p>I am looking for a php script or class that can minify my php page html output like google page speed does.</p>

<p>How can I do this?</p>
","<h3>CSS and Javascript</h3>

<p>Consider the following link to minify Javascript/CSS files: <a href=""https://github.com/mrclay/minify"" rel=""noreferrer"">https://github.com/mrclay/minify</a></p>

<h3>HTML</h3>

<p>Tell Apache to deliver HTML with GZip - this generally reduces the response size by about 70%. (If you use Apache, the module configuring gzip depends on your version: Apache 1.3 uses mod_gzip while Apache 2.x uses mod_deflate.)</p>

<blockquote>
  <p>Accept-Encoding: gzip, deflate</p>
  
  <p>Content-Encoding: gzip</p>
</blockquote>

<p>Use the <a href=""http://php.net/manual/en/function.ob-start.php#71953"" rel=""noreferrer"">following snippet</a> to remove white-spaces from the HTML with the help ob_start's buffer:</p>

<pre><code>&lt;?php

function sanitize_output($buffer) {

    $search = array(
        '/\&gt;[^\S ]+/s',     // strip whitespaces after tags, except space
        '/[^\S ]+\&lt;/s',     // strip whitespaces before tags, except space
        '/(\s)+/s',         // shorten multiple whitespace sequences
        '/&lt;!--(.|\s)*?--&gt;/' // Remove HTML comments
    );

    $replace = array(
        '&gt;',
        '&lt;',
        '\\1',
        ''
    );

    $buffer = preg_replace($search, $replace, $buffer);

    return $buffer;
}

ob_start(""sanitize_output"");

?&gt;
</code></pre>
","6225706"
"how to do file upload using jquery serialization","120876","","<p>So I have a form and I'm submitting the form through ajax using jquery serialization function </p>

<pre><code>        serialized = $(Forms).serialize();

        $.ajax({

        type        : ""POST"",
        cache   : false,
        url     : ""blah"",
        data        : serialized,
        success: function(data) {

        }
</code></pre>

<p>but then what if the form has an <code>&lt;input type=""file""&gt;</code> field....how do I pass the file into the form using this ajax serialization method...printing $_FILES doesn't output anything</p>
","<p>A file cannot be uploaded using AJAX because you cannot access the contents of a file stored on the client computer and send it in the request using javascript. One of the techniques to achieve this is to use hidden iframes. There's a nice <a href=""http://jquery.malsup.com/form/"" rel=""noreferrer"">jquery form plugin</a> which allows you to AJAXify your forms and it <a href=""http://jquery.malsup.com/form/#file-upload"" rel=""noreferrer"">supports file uploads</a> as well. So using this plugin your code will simply look like this:</p>

<pre><code>$(function() {
    $('#ifoftheform').ajaxForm(function(result) {
        alert('the form was successfully processed');
    });
});
</code></pre>

<p>The plugin automatically takes care of subscribing to the <code>submit</code> event of the form, canceling the default submission, serializing the values, using the proper method and handle file upload fields, ...</p>
","4545089"
"$date + 1 year?","120809","","<p>I'm trying to get a date that is one year from the date I specify.</p>

<p>My code looks like this:</p>

<pre><code>$futureDate=date('Y-m-d', strtotime('+one year', $startDate));
</code></pre>

<p>It's returning the wrong date. Any ideas why?</p>
","<p>To add one year to todays date use the following:</p>

<pre><code>$oneYearOn = date('Y-m-d',strtotime(date(""Y-m-d"", mktime()) . "" + 365 day""));
</code></pre>

<p>For the other examples you must initialize $StartingDate with a timestamp value
for example:</p>

<pre><code>$StartingDate = mktime();  // todays date as a timestamp
</code></pre>

<p>Try this</p>

<pre><code>$newEndingDate = date(""Y-m-d"", strtotime(date(""Y-m-d"", strtotime($StaringDate)) . "" + 365 day""));
</code></pre>

<p>or </p>

<pre><code>$newEndingDate = date(""Y-m-d"", strtotime(date(""Y-m-d"", strtotime($StaringDate)) . "" + 1 year""));
</code></pre>
","1906150"
"PHP Error: Cannot use object of type stdClass as array (array and object issues)","120807","","<p>I was trying to copy this code:</p>

<pre><code>&lt;?php
foreach ($products as $product) {
    $id          = $product['id'];
    $name        = $product['name'];
    $description = $product['description'];
    $price       = $product['price'];
?&gt;
    &lt;tr&gt;
    &lt;td&gt;&lt;img src=""&lt;?php echo $product['picture']; ?&gt;"" /&gt;&lt;/td&gt;
        &lt;td&gt;&lt;b&gt;&lt;?php echo $name; ?&gt;&lt;/b&gt;&lt;br /&gt;
        &lt;?php echo $description; ?&gt;&lt;br /&gt;
          Price:&lt;big style=""color:green""&gt;
          $&lt;?php echo $price; ?&gt;&lt;/big&gt;&lt;br /&gt;&lt;br /&gt;
&lt;?php
    echo form_open('cart/add');
    echo form_hidden('id', $id);
    echo form_hidden('name', $name);
    echo form_hidden('price', $price);
    echo form_submit('action', 'Add to Cart');
    echo form_close();
?&gt;
    &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;&lt;td colspan=""2""&gt;&lt;hr size=""1"" /&gt;&lt;/td&gt;
&lt;?php
}
?&gt;
</code></pre>

<p>and here is my code:</p>

<pre><code>&lt;?php
   foreach ($blogs as $blog) {
      $id      = $blog['id'];
      $title   = $blog['title'];
      $content = $blog['content'];
?&gt;
      &lt;h1&gt;&lt;?php echo $title; ?&gt;&lt;/h1&gt;
      &lt;h1&gt; &lt;?php echo $content; ?&gt; &lt;/h1&gt;

&lt;?php
}
?&gt;
</code></pre>

<p>I get this error every time I run my code: ""Cannot use object of type stdClass as array""</p>
","<p>The example you copied from is using data in the form of an array holding arrays, you are using data in the form of an array holding objects. Objects and arrays are not the same, and because of this they use different syntaxes for accessing data.</p>

<p>If you don't know the variable names, just do a <code>var_dump($blog);</code> within the loop to see them.</p>

<p><strong>The simplest method - access $blog as an object directly:</strong></p>

<p>Try (assuming those variables are correct):</p>

<pre><code>&lt;?php 
    foreach ($blogs as $blog) {
        $id         = $blog-&gt;id;
        $title      = $blog-&gt;title;
        $content    = $blog-&gt;content;
?&gt;

&lt;h1&gt; &lt;?php echo $title; ?&gt;&lt;/h1&gt;
&lt;h1&gt; &lt;?php echo $content; ?&gt; &lt;/h1&gt;

&lt;?php } ?&gt;
</code></pre>

<p><strong>The alternative method - access $blog as an array:</strong></p>

<p>Alternatively, you may be able to turn <code>$blog</code> into an array with <code>get_object_vars</code> (<a href=""http://uk3.php.net/manual/en/function.get-object-vars.php"">documentation</a>):</p>

<pre><code>&lt;?php
    foreach($blogs as &amp;$blog) {
        $blog     = get_object_vars($blog);
        $id       = $blog['id'];
        $title    = $blog['title'];
        $content  = $blog['content'];
?&gt;

&lt;h1&gt; &lt;?php echo $title; ?&gt;&lt;/h1&gt;
&lt;h1&gt; &lt;?php echo $content; ?&gt; &lt;/h1&gt;

&lt;?php } ?&gt; 
</code></pre>

<p>It's worth mentioning that this isn't necessarily going to work with nested objects so its viability entirely depends on the structure of your <code>$blog</code> object.</p>

<p><strong>Better than either of the above - Inline PHP Syntax</strong></p>

<p>Having said all that, if you want to use PHP in the most readable way, neither of the above are right. When using PHP intermixed with HTML, it's considered best practice by many to use PHP's <a href=""http://php.net/manual/en/control-structures.alternative-syntax.php"">alternative syntax</a>, this would reduce your whole code from nine to four lines:</p>

<pre><code>&lt;?php foreach($blogs as $blog): ?&gt;
    &lt;h1&gt;&lt;?php echo $blog-&gt;title; ?&gt;&lt;/h1&gt;
    &lt;p&gt;&lt;?php echo $blog-&gt;content; ?&gt;&lt;/p&gt;
&lt;?php endforeach; ?&gt;
</code></pre>

<p>Hope this helped.</p>
","16589380"
"How to remove a variable from a PHP session array","120710","","<p>I have PHP code that is used to add variables to a session:</p>

<pre><code>&lt;?php
    session_start();
    if(isset($_GET['name']))
    {
        $name = isset($_SESSION['name']) ? $_SESSION['name'] : array();
        $name[] = $_GET['name'];
        $_SESSION['name'] = $name;
    }
    if (isset($_POST['remove']))
    {
        unset($_SESSION['name']);
    }
?&gt;
&lt;pre&gt;  &lt;?php print_r($_SESSION); ?&gt;  &lt;/pre&gt;

&lt;form name=""input"" action=""index.php?name=&lt;?php echo $list ?&gt;"" method=""post""&gt;
  &lt;input type=""submit"" name =""add""value=""Add"" /&gt;
&lt;/form&gt;

&lt;form name=""input"" action=""index.php?name=&lt;?php echo $list2 ?&gt;"" method=""post""&gt;
  &lt;input type=""submit"" name=""remove"" value=""Remove"" /&gt;
&lt;/form&gt;
</code></pre>

<p>I want to remove the variable that is shown in <code>$list2</code> from the session array when the user chooses 'Remove'. </p>

<p>But when I unset, ALL the variables in the array are deleted.</p>

<p>How I can delete just one variable?</p>
","<pre><code>if (isset($_POST['remove'])) {
    $key=array_search($_GET['name'],$_SESSION['name']);
    if($key!==false)
    unset($_SESSION['name'][$key]);
    $_SESSION[""name""] = array_values($_SESSION[""name""]);
} 
</code></pre>

<p>Since <code>$_SESSION['name']</code> is an array, you need to find the array key that points at the name value you're interested in. The last line rearranges the index of the array for the next use.</p>
","2231680"
"Difference between array_map, array_walk and array_filter","120638","","<p>What exactly is the the difference between <code>array_map</code>, <code>array_walk</code> and <code>array_filter</code>. What I could see from documentation is that you could pass a callback function to perform an action on the supplied array. But I don't seem to find any particular difference between them.</p>

<p>Do they perform the same thing?<br>
Can they be used interchangeably?</p>

<p>I would appreciate your help with illustrative example if they are different at all.</p>
","<ul>
<li><a href=""http://php.net/array_map"" rel=""noreferrer""><code>array_map</code></a> has no collateral effects while <a href=""http://php.net/array_walk"" rel=""noreferrer""><code>array_walk</code></a> can; in particular, <a href=""http://php.net/array_map"" rel=""noreferrer""><code>array_map</code></a> never changes its arguments.</li>
<li><a href=""http://php.net/array_map"" rel=""noreferrer""><code>array_map</code></a> cannot operate with the array keys, <a href=""http://php.net/array_walk"" rel=""noreferrer""><code>array_walk</code></a> can.</li>
<li><a href=""http://php.net/array_map"" rel=""noreferrer""><code>array_map</code></a> returns an array, <a href=""http://php.net/array_walk"" rel=""noreferrer""><code>array_walk</code></a> only returns <code>true</code>/<code>false</code>. Hence, if you don't want to create an array as a result of traversing one array, you should use <a href=""http://php.net/array_walk"" rel=""noreferrer""><code>array_walk</code></a>.</li>
<li><a href=""http://php.net/array_map"" rel=""noreferrer""><code>array_map</code></a> also can receive an arbitrary number of arrays, while <a href=""http://php.net/array_walk"" rel=""noreferrer""><code>array_walk</code></a> operates only on one.</li>
<li><a href=""http://php.net/array_walk"" rel=""noreferrer""><code>array_walk</code></a> can receive an extra arbitrary parameter to pass to the callback. This mostly irrelevant since PHP 5.3 (when <a href=""http://nl3.php.net/manual/en/functions.anonymous.php"" rel=""noreferrer"">anonymous functions</a> were introduced).</li>
<li>The resulting array of <code>array_map</code>/<code>array_walk</code> has the same number of elements as the argument(s); <a href=""http://php.net/array_filter"" rel=""noreferrer""><code>array_filter</code></a> picks only a subset of the elements of the array according to a filtering function. It does preserve the keys.</li>
</ul>

<p>Example:</p>

<pre><code>&lt;pre&gt;
&lt;?php

$origarray1 = array(2.4, 2.6, 3.5);
$origarray2 = array(2.4, 2.6, 3.5);

print_r(array_map('floor', $origarray1)); // $origarray1 stays the same

// changes $origarray2
array_walk($origarray2, function (&amp;$v, $k) { $v = floor($v); }); 
print_r($origarray2);

// this is a more proper use of array_walk
array_walk($origarray1, function ($v, $k) { echo ""$k =&gt; $v"", ""\n""; });

// array_map accepts several arrays
print_r(
    array_map(function ($a, $b) { return $a * $b; }, $origarray1, $origarray2)
);

// select only elements that are &gt; 2.5
print_r(
    array_filter($origarray1, function ($a) { return $a &gt; 2.5; })
);

?&gt;
&lt;/pre&gt;
</code></pre>

<p>Result:</p>

<pre><code>Array
(
    [0] =&gt; 2
    [1] =&gt; 2
    [2] =&gt; 3
)
Array
(
    [0] =&gt; 2
    [1] =&gt; 2
    [2] =&gt; 3
)
0 =&gt; 2.4
1 =&gt; 2.6
2 =&gt; 3.5
Array
(
    [0] =&gt; 4.8
    [1] =&gt; 5.2
    [2] =&gt; 10.5
)
Array
(
    [1] =&gt; 2.6
    [2] =&gt; 3.5
)
</code></pre>
","3432266"
"What is the best method to merge two PHP objects?","120524","","<p>We have two PHP5 objects and would like to merge the content of one into the second. There are no notion of subclasses between them so the solutions described in the following topic cannot apply.</p>

<p><a href=""https://stackoverflow.com/questions/119281/how-do-you-copy-a-php-object-into-a-different-object-type"">How do you copy a PHP object into a different object type</a></p>

<pre><code>//We have this:
$objectA-&gt;a;
$objectA-&gt;b;
$objectB-&gt;c;
$objectB-&gt;d;

//We want the easiest way to get:
$objectC-&gt;a;
$objectC-&gt;b;
$objectC-&gt;c;
$objectC-&gt;d;
</code></pre>

<p><strong>Remarks:</strong></p>

<ul>
<li>These are objects, not classes.</li>
<li>The objects contain quite a lot of fields so a <strong>foreach</strong> would be quite slow.</li>
<li>So far we consider transforming objects A and B into arrays then merging them using <strong>array_merge()</strong> before re-transforming into an object but we can't say we are proud if this.</li>
</ul>
","<blockquote>
  <p>If your objects only contain fields (no methods), this works:</p>
</blockquote>

<pre><code>$obj_merged = (object) array_merge((array) $obj1, (array) $obj2);
</code></pre>

<p>This actually also works when objects have methods. (tested with PHP 5.3 and 5.6)</p>
","1953077"
"php string to int","120507","","<pre><code>$a = '88';
$b = '88 8888';

echo (int)$a;
echo (int)$b;
</code></pre>

<p>as expected, both produce 88. Anyone know if there's a string to int function that will work for $b's value and produce 888888? I've googled around a bit with no luck.</p>

<p>Thanks</p>
","<p>You can remove the spaces before casting to <code>int</code>:</p>

<pre><code>(int)str_replace(' ', '', $b);
</code></pre>

<p>Also, if you want to strip other commonly used digit delimiters (such as <code>,</code>), you can give the function an array (beware though -- in some countries, like mine for example, the comma is used for fraction notation):</p>

<pre><code>(int)str_replace(array(' ', ','), '', $b);
</code></pre>
","7008242"
"Passing JavaScript array to PHP through jQuery $.ajax","120288","","<p>I want to manipulate a JavaScript array in PHP. Is it possible to do something like this?</p>

<pre><code>$.ajax({
       type: ""POST"",
       url: ""tourFinderFunctions.php"",
       data: ""activitiesArray=""+activities,
       success: function() {
            $(""#lengthQuestion"").fadeOut('slow');
       }
    });
</code></pre>

<p>Activities is a single dimensional array like:</p>

<pre><code>var activities = ['Location Zero', 'Location One', 'Location Two'];
</code></pre>

<p>The script does not complete when I try this... How can I fix it?</p>
","<pre><code>data: { activitiesArray: activities },
</code></pre>

<p>That's it! Now you can access it in PHP:</p>

<pre><code>&lt;?php $myArray = $_REQUEST['activitiesArray']; ?&gt;
</code></pre>
","2013784"
"Fatal error: Call to undefined function curl_init() in ... on line 9","120204","","<pre><code>&lt;?php
$filename = ""xx.gif"";
$handle = fopen($filename, ""r"");
$data = fread($handle, filesize($filename));

// $data is file data
$pvars   = array('image' =&gt; base64_encode($data), 'key' =&gt; IMGUR_API_KEY);
$timeout = 30;
$curl    = curl_init();

curl_setopt($curl, CURLOPT_URL, 'http://api.imgur.com/2/upload.xml');
curl_setopt($curl, CURLOPT_TIMEOUT, $timeout);
curl_setopt($curl, CURLOPT_POST, 1);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_POSTFIELDS, $pvars);

$xml = curl_exec($curl);

curl_close ($curl);

var_dump($xml);
?&gt;
</code></pre>

<p>I'm playing with the Imgur API, but it doesn't seems to work. PHP.net says that <code>curl_init()</code> is in PHP5, but my host says it isn't. How can I make this work?</p>
","<p>curl is an extension that needs to be installed, it's got nothing to do with the PHP version.</p>

<p><a href=""http://www.php.net/manual/en/curl.setup.php"" rel=""noreferrer"">http://www.php.net/manual/en/curl.setup.php</a></p>
","4396797"
"Unicode character in PHP string","120199","","<p>This question looks embarrassingly simple, but I haven't been able to find an answer.</p>

<p>What is the PHP equivalent to the following C# line of code?</p>

<pre><code>string str = ""\u1000"";
</code></pre>

<p>This sample creates a string with a single Unicode character whose ""Unicode numeric value"" is 1000 in hexadecimal (4096 in decimal).</p>

<p>That is, in PHP, how can I create a string with a single Unicode character whose ""Unicode numeric value"" is known?</p>
","<p>Because JSON directly supports the <code>\uxxxx</code> syntax the first thing that comes into my mind is:</p>

<pre><code>$unicodeChar = '\u1000';
echo json_decode('""'.$unicodeChar.'""');
</code></pre>

<p>Another option would be to use <code>mb_convert_encoding()</code></p>

<pre><code>echo mb_convert_encoding('&amp;#x1000;', 'UTF-8', 'HTML-ENTITIES');
</code></pre>

<p>or make use of the direct mapping between UTF-16BE (big endian) and the Unicode codepoint:</p>

<pre><code>echo mb_convert_encoding(""\x10\x00"", 'UTF-8', 'UTF-16BE');
</code></pre>
","6058533"
"running php script (php function) in linux bash","120130","","<p>How we run php script using linux bash ? </p>

<p>php file test.php</p>

<p>test.php contain.</p>

<pre><code>&lt;?php echo ""hello\n"" ?&gt;
</code></pre>
","<p>From the command line enter this:
<code>php -f filename.php</code></p>

<p>Make sure that filename.php both includes and executes the function you want to test. Anything you echo out will appear in the console including errors.</p>

<p>Be wary that often the php.ini for Apache PHP is different from CLI PHP (command line interface).</p>
","5549588"
"PHP file_get_contents() and setting request headers","120126","","<p>With PHP, is it possible to send HTTP headers with <code>file_get_contents()</code> ?</p>

<p>I know you can send the user agent from your <code>php.ini</code> file. However, can you also send other information such as <code>HTTP_ACCEPT</code>, <code>HTTP_ACCEPT_LANGUAGE</code>, and <code>HTTP_CONNECTION</code> with <code>file_get_contents()</code> ?</p>

<p>Or is there another function that will accomplish this?</p>
","<p>Actually, upon further reading on the <code>file_get_contents()</code> function:</p>

<pre><code>// Create a stream
$opts = [
    ""http"" =&gt; [
        ""method"" =&gt; ""GET"",
        ""header"" =&gt; ""Accept-language: en\r\n"" .
            ""Cookie: foo=bar\r\n""
    ]
];

$context = stream_context_create($opts);

// Open the file using the HTTP headers set above
$file = file_get_contents('http://www.example.com/', false, $context);
</code></pre>

<p>You may be able to follow this pattern to achieve what you are seeking to, I haven't personally tested this though. (and if it doesn't work, feel free to check out my other answer)</p>
","2107792"
"Select records from today, this week, this month php mysql","120001","","<p>I imagine this is pretty simple, but can't figure it out. I'm trying to make a few pages - one which will contain results selected from my mysql db's table for today, this week, and this month. The dates are entered when the record is created with <code>date('Y-m-d H:i:s');</code>. Here's what I have so far:</p>

<p>day  where date>(date-(60*60*24))</p>

<pre><code> ""SELECT * FROM jokes WHERE date&gt;(date-(60*60*24)) ORDER BY score DESC""
</code></pre>

<p>week  where date>(date-(60*60*24*7))</p>

<pre><code> ""SELECT * FROM jokes WHERE date&gt;(date-(60*60*24*7)) ORDER BY score DESC""
</code></pre>

<p>month (30 days)   where date>(date-(60*60*24*30))</p>

<pre><code> ""SELECT * FROM jokes WHERE date&gt;(date-(60*60*24*30)) ORDER BY score DESC""
</code></pre>

<p>Any ideas would be much appreciated. Thanks!</p>
","<p>Assuming your date column is an actual MySQL date column:</p>

<pre><code>SELECT * FROM jokes WHERE date &gt; DATE_SUB(NOW(), INTERVAL 1 DAY) ORDER BY score DESC;        
SELECT * FROM jokes WHERE date &gt; DATE_SUB(NOW(), INTERVAL 1 WEEK) ORDER BY score DESC;
SELECT * FROM jokes WHERE date &gt; DATE_SUB(NOW(), INTERVAL 1 MONTH) ORDER BY score DESC;
</code></pre>
","5293226"
"PHP: trying to create a new line with ""\n""","119981","","<p>i'm writing this:</p>

<pre><code>echo ""foo"";
echo ""\n"";
echo ""bar"";
</code></pre>

<p>and ""bar"" is not written in the line below.</p>

<p>What am i doing wrong?</p>

<p>Javi</p>
","<p>Newlines in HTML are expressed through <code>&lt;br&gt;</code>, not through <code>\n</code>.</p>

<p>Using <code>\n</code> in PHP creates a newline in the source code, and HTML source code layout is unconnected to HTML screen layout.</p>
","2674718"
"php, mysql - Too many connections to database error","119966","","<p>Good day to all. I have an odd error. I have created a chat that works like this: </p>

<ul>
<li>questions/answers are inserted into a db</li>
<li>every 2 seconds an ajax request is sent to a php script that fetch the new questions/answers</li>
</ul>

<p>It worked fine until today when I got this error:</p>

<pre><code>Uncaught exception 'PDOException' with message 'SQLSTATE[HY000] [1040] Too many connections' in /var/www/html/dbdev/include/Zend/Db/Adapter/Pdo/Abstract.php:129 
Stack trace: #0 /var/www/html/dbdev/include/Zend/Db/Adapter/Pdo/Abstract.php(129): PDO-&gt;__construct('mysql:host=loca...', '', '', Array) 
s#1 /var/www/html/dbdev/include/Zend/Db/Adapter/Pdo/Mysql.php(96): Zend_Db_Adapter_Pdo_Abstract-&gt;_connect() 
s#2 /var/www/html/dbdev/include/Zend/Db/Adapter/Abstract.php(448): Zend_Db_Adapter_Pdo_Mysql-&gt;_connect() 
s#3 /var/www/html/dbdev/include/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract-&gt;query('select profile_...', Array) 
s#4 /var/www/html/dbdev/include/Zend/Db/Adapter/Abstract.php(782): Zend_Db_Adapter_Pdo_Abstract-&gt;query('select profile_...', Array) 
s#5 /var/www/html/dbdev/include/Profile.php(43): Zend_Db_Adapter_Abstract-&gt;fetchPairs('select profile_...') 
s#6 /var/www/html/dbdev/public_html/index.php(29): Profile-&gt;load() 
s#7 {main} Next exception 'Zend_Db_Adapter_Exception' with in /var/www/html/dbdev/include/Zend/Db/Adapter/Pdo/Abstract.php on line 144
</code></pre>

<p>The problem is that we were not that many... (8) and I don't think the db could not support more than 8 to 16 connections simultaneously (on specifications is written that the chat must support 50-100 users so 8 is... small). </p>

<p>So... can any1 tell me why did this happen (yesterday we were 15 and worked fine) and how to solve it? Thank you for your help. If you need any code samples just ask. </p>
","<p>There are a bunch of different reasons for the ""Too Many Connections"" error.</p>

<p>Check out this FAQ page on MySQL.com:  <a href=""http://dev.mysql.com/doc/refman/5.5/en/too-many-connections.html"">http://dev.mysql.com/doc/refman/5.5/en/too-many-connections.html</a></p>

<p>Check your my.cnf file for ""max_connections"".  If none exist try:</p>

<pre><code>[mysqld]
set-variable=max_connections=250
</code></pre>

<p>However the default is 151, so you should be okay.</p>

<p>If you are on a shared host, it might be that other users are taking up too many connections.</p>

<p>Other problems to look out for is the use of persistent connections and running out of diskspace.</p>
","5040139"
"CodeIgniter: Create new helper?","119909","","<p>I need to loop lot of arrays in different ways and display it in a page. The arrays are generated by a module class. I know that its better not to include functions on 'views' and I want to know where to insert the functions file.</p>

<p>I know I can 'extend' the helpers, but I don't want to extend a helper. I want to kind of create a helper with my loop functions.. Lets call it loops_helper.php</p>
","<p>A CodeIgniter helper is a PHP file with multiple functions. <em>It is not a class</em></p>

<p>Create a file and put the following code into it. </p>

<pre><code>&lt;?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

if ( ! function_exists('test_method'))
{
    function test_method($var = '')
    {
        return $var;
    }   
}
</code></pre>

<p>Save this to <strong>application/helpers/</strong> . We shall call it ""new_helper.php""</p>

<p>The first line exists to make sure the file cannot be included and ran from outside the CodeIgniter scope. Everything after this is self explanatory.</p>

<h1>Using the Helper</h1>

<hr>

<p>This can be in your <strong>controller</strong>, <strong>model</strong> or <strong>view</strong> (not preferable)</p>

<pre><code>$this-&gt;load-&gt;helper('new_helper');

echo test_method('Hello World');
</code></pre>

<p>If you use this helper in a lot of locations you can have it load automatically by adding it to the autoload configuration file i.e. <code>&lt;your-web-app&gt;\application\config\autoload.php</code>.</p>

<pre><code>$autoload['helper'] = array('new_helper');
</code></pre>

<p>-Mathew</p>
","804520"
"How can i send json response in symfony2 controller","119846","","<p>I am using jQuery to edit my form which is built in Symfony.</p>

<p>I am showing the form in jQuery dialog and then submitting it.</p>

<p>Data is entering correctly in database.</p>

<p>But I don't know whether I need to send some JSON  back to jQuery. Actually I am bit confused with JSON thing.</p>

<p>Suppose I have added a row in my table with jQuery and when I submit the form then after data is submitted I want to send back those row data so that I can dynamically add the table row to show the data added.</p>

<p>I am confused how can get that data back</p>

<p>This is my current code</p>

<pre><code>$editForm = $this-&gt;createForm(new StepsType(), $entity);

$request = $this-&gt;getRequest();

$editForm-&gt;bindRequest($request);

if ($editForm-&gt;isValid()) {
    $em-&gt;persist($entity);
    $em-&gt;flush();

    return $this-&gt;render('::success.html.twig');               
}
</code></pre>

<p>This is just the template with success message</p>
","<p><strong>Symfony 2.1</strong></p>

<pre><code>$response = new Response(json_encode(array('name' =&gt; $name)));
$response-&gt;headers-&gt;set('Content-Type', 'application/json');

return $response;
</code></pre>

<hr>

<p><strong>Symfony 2.2</strong> and higher</p>

<p>You have special <a href=""https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/JsonResponse.php"" rel=""noreferrer"">JsonResponse</a> class, which serialises array to JSON:</p>

<pre><code>return new JsonResponse(array('name' =&gt; $name));
</code></pre>

<hr>

<p>But if your problem is <strong>How to serialize entity</strong> then you should have a look at <a href=""https://github.com/schmittjoh/JMSSerializerBundle/blob/master/Resources/doc/index.rst"" rel=""noreferrer"">JMSSerializerBundle</a></p>

<p>Assuming that you have it installed, you'll have simply to do</p>

<pre><code>$serializedEntity = $this-&gt;container-&gt;get('serializer')-&gt;serialize($entity, 'json');

return new Response($serializedEntity);
</code></pre>

<p>You should also check for similar problems on StackOverflow:  </p>

<ul>
<li><a href=""https://stackoverflow.com/questions/6706485/how-to-encode-doctrine-entities-to-json-in-symfony-2-0-ajax-application"">How to encode Doctrine entities to JSON in Symfony 2.0 AJAX application?</a>  </li>
<li><a href=""https://stackoverflow.com/questions/7013257/symfony-2-doctrine-export-to-json"">Symfony 2 Doctrine export to JSON</a></li>
</ul>
","11715894"
"How do I create a register/login.php file for my website?","119749","","<p>I am trying to make a website that allows for a register form as well as a login form. I have all the HTML and CSS setup but I need php to handle the form. I need it to be validated too.</p>

<p>Below is the form code for the Login form:</p>

<pre><code>&lt;form  action=""login.php"" autocomplete=""on""&gt; 
     &lt;h1&gt;Log in&lt;/h1&gt; 
     &lt;p&gt; 
          &lt;label for=""username"" class=""uname"" data-icon=""u"" &gt;Username:&lt;/label&gt;
          &lt;input id=""username"" name=""username"" required=""required"" type=""text"" placeholder=""Username""/&gt;
     &lt;/p&gt;
     &lt;p&gt; 
          &lt;label for=""password"" class=""youpasswd"" data-icon=""p""&gt;Password:&lt;/label&gt;
          &lt;input id=""password"" name=""password"" required=""required"" type=""password"" placeholder=""Password"" /&gt; 
     &lt;/p&gt;
     &lt;p class=""keeplogin""&gt; 
          &lt;input type=""checkbox"" name=""loginkeeping"" id=""loginkeeping"" value=""loginkeeping"" /&gt; 
          &lt;label for=""loginkeeping""&gt;Keep me logged in&lt;/label&gt;
     &lt;/p&gt;
     &lt;p class=""login button""&gt; 
          &lt;input type=""submit"" value=""Login"" /&gt; 
     &lt;/p&gt;
&lt;/form&gt;
</code></pre>

<p>And the regsister form:</p>

<pre><code>&lt;form  action=""register.php"" autocomplete=""on""&gt; 
    &lt;h1&gt; Sign up &lt;/h1&gt; 
    &lt;p&gt; 
         &lt;label for=""firstnamesignup"" class=""fname"" data-icon=""u""&gt;First Name:&lt;/label&gt;
         &lt;input id=""firstnamesignup"" name=""firstnamesignup"" required=""required"" type=""text"" placeholder=""First"" /&gt;
    &lt;/p&gt;
    &lt;p&gt; 
         &lt;label for=""lastnamesignup"" class=""lname"" data-icon=""u""&gt;Last Name:&lt;/label&gt;
         &lt;input id=""lastnamesignup"" name=""lastnamesignup"" required=""required"" type=""text"" placeholder=""Last"" /&gt;
    &lt;/p&gt;
    &lt;p&gt; 
         &lt;label for=""usernamesignup"" class=""uname"" data-icon=""u""&gt;Username:&lt;/label&gt;
         &lt;input id=""usernamesignup"" name=""usernamesignup"" required=""required"" type=""text"" placeholder=""Username"" /&gt;
    &lt;/p&gt;
    &lt;p&gt; 
         &lt;label for=""passwordsignup"" class=""youpasswd"" data-icon=""p""&gt;Password:&lt;/label&gt;
         &lt;input id=""passwordsignup"" name=""passwordsignup"" required=""required"" type=""password"" placeholder=""Password""/&gt;
    &lt;/p&gt;
    &lt;p&gt; 
         &lt;label for=""passwordsignup_confirm"" class=""password"" data-icon=""p""&gt;Confirm Password:&lt;/label&gt;
         &lt;input id=""passwordsignup_confirm"" name=""passwordsignup_confirm"" required=""required"" type=""password"" placeholder=""Password""/&gt;
    &lt;/p&gt;
    &lt;p&gt; 
         &lt;label for=""emailsignup"" class=""youmail"" data-icon=""e"" &gt;Email:&lt;/label&gt;
         &lt;input id=""emailsignup"" name=""emailsignup"" required=""required"" type=""email"" placeholder=""example@domain.com""/&gt; 
    &lt;/p&gt;
    &lt;p&gt; 
         &lt;label&gt;Date of Birth:&lt;/label&gt;
         &lt;select name=""month"" onChange=""changeDate(this.options[selectedIndex].value);""&gt;
         &lt;option value=""na""&gt;Month&lt;/option&gt;
         &lt;option value=""1""&gt;January&lt;/option&gt;
         &lt;option value=""2""&gt;February&lt;/option&gt;
         &lt;option value=""3""&gt;March&lt;/option&gt;
         &lt;option value=""4""&gt;April&lt;/option&gt;
         &lt;option value=""5""&gt;May&lt;/option&gt;
         &lt;option value=""6""&gt;June&lt;/option&gt;
         &lt;option value=""7""&gt;July&lt;/option&gt;
         &lt;option value=""8""&gt;August&lt;/option&gt;
         &lt;option value=""9""&gt;September&lt;/option&gt; 
         &lt;option value=""10""&gt;October&lt;/option&gt;
         &lt;option value=""11""&gt;November&lt;/option&gt;
         &lt;option value=""12""&gt;December&lt;/option&gt;
         &lt;/select&gt;
         &lt;select name=""day"" id=""day""&gt;
         &lt;option value=""na""&gt;Day&lt;/option&gt;
         &lt;/select&gt;
         &lt;select name=""year"" id=""year""&gt;
         &lt;option value=""na""&gt;Year&lt;/option&gt;
         &lt;/select&gt;
         &lt;script language=""JavaScript"" type=""text/javascript""&gt;
         function changeDate(i){
         var e = document.getElementById('day');
         while(e.length&gt;0)
         e.remove(e.length-1);
         var j=-1;
         if(i==""na"")
         k=0;
         else if(i==2)
         k=28;
         else if(i==4||i==6||i==9||i==11)
         k=30;
         else
         k=31;
         while(j++&lt;k){
         var s=document.createElement('option');
         var e=document.getElementById('day');
         if(j==0){
         s.text=""Day"";
         s.value=""na"";
         try{
         e.add(s,null);}
         catch(ex){
         e.add(s);}}
         else{
         s.text=j;
         s.value=j;
         try{
         e.add(s,null);}
         catch(ex){
         e.add(s);}}}}
         y = 1998;
         while (y--&gt;1908){
         var s = document.createElement('option');
         var e = document.getElementById('year');
         s.text=y;
         s.value=y;
         try{
         e.add(s,null);}
         catch(ex){
         e.add(s);}}
         &lt;/script&gt; 
    &lt;/p&gt;
    &lt;p&gt; 
         &lt;label&gt;Gender:&lt;/label&gt;
         &lt;select name=""Gender""&gt;
         &lt;option value=""male""&gt;Male&lt;/option&gt;
         &lt;option value=""female""&gt;Female&lt;/option&gt;
         &lt;/select&gt;
    &lt;/p&gt;
    &lt;p class=""signin button""&gt; 
    &lt;input type=""submit"" value=""Register""/&gt; 
    &lt;/p&gt;
&lt;/form&gt;
</code></pre>

<p>The only thing I need help with is creating/editing the login.php and register.php files. Thanks for any help!
<br></p>
","<p>What you have is basically the 'front end' (client side) which is the HTML,CSS and JS.
Now you need the 'back end' (server side) which is your Database, SQL and PHP.</p>

<p>Why do you need a Database?</p>

<p>You need a database to store your user credentials when they register. Also you need the DB to compare the entered credentials with the ones you have in your DB every time someone tries to login. </p>

<p>What is PHP?</p>

<p>PHP is an open source general-purpose scripting language. Think of it like your server-side code. Your users don't have access to your PHP code (unlike your HTML,CSS and JS which is accessible/available to everyone to view).</p>

<p>I am not going to provide you with sample code as there are infinite tutorials for that.Have a look on some below. A lot of the below have detailed instructions on how to create/setup your Database, tables etc so it is up to you to follow step by step and complete your project.  </p>

<ol>
<li><a href=""http://www.phpeasystep.com/phptu/6.html"">http://www.phpeasystep.com/phptu/6.html</a></li>
<li><a href=""http://php.about.com/od/finishedphp1/ss/php_login_code.htm"">http://php.about.com/od/finishedphp1/ss/php_login_code.htm</a></li>
<li><a href=""http://www.wikihow.com/Create-a-Basic-Login-Script-in-PHP"">http://www.wikihow.com/Create-a-Basic-Login-Script-in-PHP</a>   </li>
<li><a href=""http://www.homeandlearn.co.uk/php/php14p2.html"">http://www.homeandlearn.co.uk/php/php14p2.html</a> </li>
<li><a href=""http://phpsnips.com/4/Simple-User-Login#.Uk41QYZmi-0"">http://phpsnips.com/4/Simple-User-Login#.Uk41QYZmi-0</a> </li>
<li><a href=""http://www.html-form-guide.com/php-form/php-login-form.html"">http://www.html-form-guide.com/php-form/php-login-form.html</a></li>
</ol>

<p>Hope this helps you. Good luck with your project :)</p>
","19172706"
"HTML - Change\Update page contents without refreshing\reloading the page","119612","","<p>I get the data from DB and display it in a div... what I want to do is when I click a link it should change the content of the div</p>

<p>one option is to pass parameter through URL to itself and reload the page...</p>

<p>I need to do it <strong>without reloading\refreshing</strong>...</p>

<pre><code>&lt;?php   
    $id   = '1';

    function recp( $rId ) {
        $id   = $rId;
    }
?&gt;

&lt;a href=""#"" onClick=""&lt;?php recp('1') ?&gt;"" &gt; One   &lt;/a&gt;
&lt;a href=""#"" onClick=""&lt;?php recp('2') ?&gt;"" &gt; Two   &lt;/a&gt;
&lt;a href=""#"" onClick=""&lt;?php recp('3') ?&gt;"" &gt; Three &lt;/a&gt;

&lt;div id='myStyle'&gt;
&lt;?php
    require ('myConnect.php');     
    $results = mysql_query(""SELECT para FROM content WHERE  para_ID='$id'"");

    if( mysql_num_rows($results) &gt; 0 ) {
        $row = mysql_fetch_array( $results );
        echo $row['para'];
    }
?&gt;
&lt;/div&gt;
</code></pre>

<p>The goal is when I click any of the links the contents of the div and php variable\s gets updated without refreshing.... so that <strong>user could see new data</strong> and after that if some query is performed it is on new variable\s</p>

<p>p.s I know it is gonna require some AJAX but I don't know AJAX.. so please reply with something by which I can learn... my knowledge is limited to HTML, PHP, some JavaScript &amp; some jQuery</p>
","<p>You've got the right idea, so here's how to go ahead: the <code>onclick</code> handlers run on the client side, in the browser, so you cannot call a PHP function directly. Instead, you need to add a JavaScript function that (as you mentioned) uses AJAX to call a PHP script and retrieve the data. Using jQuery, you can do something like this:</p>

<pre><code>&lt;script type=""text/javascript""&gt;
function recp(id) {
  $('#myStyle').load('data.php?id=' + id);
}
&lt;/script&gt;

&lt;a href=""#"" onClick=""recp('1')"" &gt; One   &lt;/a&gt;
&lt;a href=""#"" onClick=""recp('2')"" &gt; Two   &lt;/a&gt;
&lt;a href=""#"" onClick=""recp('3')"" &gt; Three &lt;/a&gt;

&lt;div id='myStyle'&gt;
&lt;/div&gt;
</code></pre>

<p>Then you put your PHP code into a separate file: (I've called it <code>data.php</code> in the above example)</p>

<pre><code>&lt;?php
  require ('myConnect.php');     
  $id = $_GET['id'];
  $results = mysql_query(""SELECT para FROM content WHERE  para_ID='$id'"");   
  if( mysql_num_rows($results) &gt; 0 )
  {
   $row = mysql_fetch_array( $results );
   echo $row['para'];
  }
?&gt;
</code></pre>
","3644604"
"How to order results with findBy() in Doctrine","119554","","<p>I am using the <code>findBy()</code> method on a Doctrine repository:</p>

<pre><code>$entities = $repository-&gt;findBy(array('type'=&gt; 'C12'));
</code></pre>

<p>How can I order the results?</p>
","<p>The second parameter of <code>findBy</code> is for ORDER.</p>

<pre><code>$ens = $em-&gt;getRepository('AcmeBinBundle:Marks')
          -&gt;findBy(
             array('type'=&gt; 'C12'), 
             array('id' =&gt; 'ASC')
           );
</code></pre>
","12048567"
"Configure WAMP server to send email","119495","","<p>Is there a way  that I can configure the <a href=""http://www.wampserver.com/en/"" rel=""nofollow noreferrer"">WAMP server</a> for PHP to enable the <code>mail()</code> function?</p>
","<p>Configuring a working email client from localhost is quite a chore, I have spent hours of frustration attempting it. I'm sure someone more experienced may be able to help, or they may perhaps agree with me.</p>

<p>If you just want to test, here is a great tool for testing mail locally, that requires almost no configuration:</p>

<p><a href=""http://www.toolheap.com/test-mail-server-tool/"">http://www.toolheap.com/test-mail-server-tool/</a></p>

<p>It worked right off the bat for me, hope this helps you.</p>
","5773346"
"Serializing PHP object to JSON","119431","","<p>So I was wandering around <a href=""http://php.net"">php.net</a> for information about serializing PHP objects to JSON, when I stumbled across the new <a href=""http://www.php.net/manual/en/class.jsonserializable.php"">JsonSerializable Interface</a>. It's only <strong>PHP >= 5.4</strong> though, and I'm running in a 5.3.x environment.</p>

<p>How is this sort of functionality achieved <strong>PHP &lt; 5.4</strong>?</p>

<p>I've not worked much with JSON yet, but I'm trying to support an API layer in an application, and dumping the data object (<em>that would otherwise be sent to the view</em>) into JSON would be perfect.</p>

<p>If I attempt to serialize the object directly, it returns an empty JSON string; which is because I assume <code>json_encode()</code> doesn't know what the heck to do with the object. Should I recursively reduce the object into an array, and then encode <em>that</em>?</p>

<hr>

<h1>Example</h1>

<pre><code>$data = new Mf_Data();
$data-&gt;foo-&gt;bar['hello'] = 'world';
</code></pre>

<p><strong><code>echo json_encode($data)</code></strong> produces an empty object:</p>

<pre><code>{}
</code></pre>

<p><strong><code>var_dump($data)</code></strong> however, works as expected:</p>

<pre><code>object(Mf_Data)#1 (5) {
  [""_values"":""Mf_Data"":private]=&gt;
  array(0) {
  }
  [""_children"":""Mf_Data"":private]=&gt;
  array(1) {
    [0]=&gt;
    array(1) {
      [""foo""]=&gt;
      object(Mf_Data)#2 (5) {
        [""_values"":""Mf_Data"":private]=&gt;
        array(0) {
        }
        [""_children"":""Mf_Data"":private]=&gt;
        array(1) {
          [0]=&gt;
          array(1) {
            [""bar""]=&gt;
            object(Mf_Data)#3 (5) {
              [""_values"":""Mf_Data"":private]=&gt;
              array(1) {
                [0]=&gt;
                array(1) {
                  [""hello""]=&gt;
                  string(5) ""world""
                }
              }
              [""_children"":""Mf_Data"":private]=&gt;
              array(0) {
              }
              [""_parent"":""Mf_Data"":private]=&gt;
              *RECURSION*
              [""_key"":""Mf_Data"":private]=&gt;
              string(3) ""bar""
              [""_index"":""Mf_Data"":private]=&gt;
              int(0)
            }
          }
        }
        [""_parent"":""Mf_Data"":private]=&gt;
        *RECURSION*
        [""_key"":""Mf_Data"":private]=&gt;
        string(3) ""foo""
        [""_index"":""Mf_Data"":private]=&gt;
        int(0)
      }
    }
  }
  [""_parent"":""Mf_Data"":private]=&gt;
  NULL
  [""_key"":""Mf_Data"":private]=&gt;
  NULL
  [""_index"":""Mf_Data"":private]=&gt;
  int(0)
}
</code></pre>

<hr>

<h1>Addendum</h1>

<h2>1)</h2>

<p>So this is the <code>toArray()</code> function I've devised for the <code>Mf_Data</code> class:</p>

<pre><code>public function toArray()
{
    $array = (array) $this;
    array_walk_recursive($array, function (&amp;$property) {
        if ($property instanceof Mf_Data) {
            $property = $property-&gt;toArray();
        }
    });
    return $array;
}
</code></pre>

<p>However since the <code>Mf_Data</code> objects also have a reference to their parent (<em>containing</em>) object, this fails with recursion. Works like a charm though when I remove the <code>_parent</code> reference.</p>

<h2>2)</h2>

<p>Just to follow up, the final function to transform a complex tree-node object I went with was:</p>

<pre><code>// class name - Mf_Data
// exlcuded properties - $_parent, $_index
public function toArray()
{
    $array = get_object_vars($this);
    unset($array['_parent'], $array['_index']);
    array_walk_recursive($array, function (&amp;$property) {
        if (is_object($property) &amp;&amp; method_exists($property, 'toArray')) {
            $property = $property-&gt;toArray();
        }
    });
    return $array;
}
</code></pre>

<h2>3)</h2>

<p>I'm following up again, with a bit cleaner of an implementation. Using interfaces for an <code>instanceof</code> check seems much cleaner than <code>method_exists()</code> (<em>however <code>method_exists()</code> does cross-cut inheritance/implementation</em>).</p>

<p>Using <code>unset()</code> seemed a bit messy too, and it seems that logic should be refactored into another method. However, this implementation <em>does</em> copy the property array (<em>due to <code>array_diff_key</code></em>), so something to consider.</p>

<pre><code>interface ToMapInterface
{

    function toMap();

    function getToMapProperties();

}

class Node implements ToMapInterface
{

    private $index;
    private $parent;
    private $values = array();

    public function toMap()
    {
        $array = $this-&gt;getToMapProperties();
        array_walk_recursive($array, function (&amp;$value) {
            if ($value instanceof ToMapInterface) {
                $value = $value-&gt;toMap();
            }
        });
        return $array;
    }

    public function getToMapProperties()
    {
        return array_diff_key(get_object_vars($this), array_flip(array(
            'index', 'parent'
        )));
    }

}
</code></pre>
","<hr>

<p><strong>edit</strong>: it's currently 2016-09-24, and PHP 5.4 has been released 2012-03-01, and support has <em>ended</em> 2015-09-01. Still, this answer seems to gain upvotes. If you're still using PHP &lt; 5.4, <em>your are creating a security risk and endagering your project</em>. If you have no compelling reasons to stay at &lt;5.4, or even already use version >= 5.4, <strong>do not use this answer</strong>, and just use PHP>= 5.4 (or, you know, a recent one) and implement <a href=""http://nl3.php.net/manual/en/class.jsonserializable.php#class.jsonserializable"" rel=""noreferrer"">the JsonSerializable interface</a></p>

<hr>

<p>You would define a function, for instance named <code>getJsonData();</code>, which would return either an array, <code>stdClass</code> object, or some other object with visible parameters rather then private/protected ones, and do a <code>json_encode($data-&gt;getJsonData());</code>. In essence, implement the function from 5.4, but call it by hand.</p>

<p>Something like this would work, as <code>get_object_vars()</code> is called from inside the class, having access to private/protected variables:</p>

<pre><code>function getJsonData(){
    $var = get_object_vars($this);
    foreach ($var as &amp;$value) {
        if (is_object($value) &amp;&amp; method_exists($value,'getJsonData')) {
            $value = $value-&gt;getJsonData();
        }
    }
    return $var;
}
</code></pre>
","6836658"
"MySQL PHP - SELECT WHERE id = array()?","119393","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/1101662/mysql-query-using-an-array"">MySQL query using an array</a><br>
  <a href=""https://stackoverflow.com/questions/1356008/passing-an-array-to-mysql"">Passing an array to mysql</a>  </p>
</blockquote>



<p>I have an array in PHP:</p>

<pre><code>$array = array(1, 4, 5, 7);
</code></pre>

<p>As you can see, I have an array of different values, but I want to write a MYSQL statement that will check if the <code>id</code> is <strong>equal</strong> to any of the values in the array. For example, if a row has an <code>id</code> of 1, it will return that row, the same for 4, 5, and 7. The length of the array can vary due to the nature of the program, so that's where the problem is. Could I just do:</p>

<pre><code>SELECT ...
  FROM ...
 WHERE id = '$array'
</code></pre>

<p>Or is there a better way?<br>
If I was unclear, please ask me for more info.</p>
","<p>Use <code>IN</code>.</p>

<pre><code>$sql = 'SELECT * 
          FROM `table` 
         WHERE `id` IN (' . implode(',', array_map('intval', $array)) . ')';
</code></pre>
","9476164"
"how to get store information in Magento?","119229","","<p>In Magento, how can I get active store information, like store name, line number, etc?</p>
","<p>To get information about the current store from anywhere in Magento, use:</p>

<pre><code>&lt;?php
$store = Mage::app()-&gt;getStore();
</code></pre>

<p>This will give you a Mage_Core_Model_Store object, which has some of the information you need:</p>

<pre><code>&lt;?php
$name = $store-&gt;getName();
</code></pre>

<hr>

<p>As for your other question about line number, I'm not sure what you mean. If you mean that you want to know what line number in the code you are on (for error handling, for instance), try:</p>

<pre><code>&lt;?php
$line      = __LINE__;
$file      = __FILE__;
$class     = __CLASS__;
$method    = __METHOD__;
$namespace = __NAMESPACE__;
</code></pre>
","2713881"
"Access PHP variable in JavaScript","119121","","<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/1808108/how-to-access-php-variables-in-javascript-or-jquery-rather-than-php-echo-vari"">How to access PHP variables in JavaScript or jQuery rather than &lt;?php echo $variable ?&gt;</a>  </p>
</blockquote>



<p>Is there any way to get access to a PHP variable in JavaScript?</p>

<p>I have a variable, <code>$a</code>, in PHP and want to get its value in a JavaScript variable.</p>
","<p>You can't, you'll have to do something like</p>

<pre><code>&lt;script type=""text/javascript""&gt;
   var php_var = ""&lt;?php echo $php_var; ?&gt;"";
&lt;/script&gt;
</code></pre>

<p>You can also load it with AJAX</p>

<p>rhino is right, the snippet lacks of a type for the sake of brevity.</p>

<p>Also, note that if <code>$php_var</code> has quotes, it will break your script. You shall use addslashes, htmlentities or a custom function.</p>
","4287379"
"SOAP-ERROR: Parsing WSDL: Couldn't load from - but works on WAMP","119016","","<p>This works fine on my WAMP server, but doesn't work on the linux master server!?</p>

<pre><code>try{
    $client = new SoapClient('http://ec.europa.eu/taxation_customs/vies/checkVatService.wsdl', ['trace' =&gt; true]);
    $result = $client-&gt;checkVat([
        'countryCode' =&gt; 'DK',
        'vatNumber' =&gt; '47458714'
    ]);
    print_r($result);
}
catch(Exception $e){
    echo $e-&gt;getMessage();
}
</code></pre>

<p>What am I missing here?! :(</p>

<p>SOAP is enabled</p>

<h1>Error</h1>

<pre><code>SOAP-ERROR: Parsing WSDL: Couldn't load from 'http://ec.europa.eu/taxation_customs/vies/checkVatService.wsdl' : failed to load external entity ""http://ec.europa.eu/taxation_customs/vies/checkVatService.wsdl""/taxation_customs/vies/checkVatService.wsdl""
</code></pre>

<h1>Call the URL from PHP</h1>

<p>Calling the URL from PHP returns error</p>

<pre><code>$wsdl = file_get_contents('http://ec.europa.eu/taxation_customs/vies/checkVatService.wsdl');
echo $wsdl;
</code></pre>

<h1>Error</h1>

<pre><code>Warning:  file_get_contents(http://ec.europa.eu/taxation_customs/vies/checkVatService.wsdl): failed to open stream: HTTP request failed! HTTP/1.0 503 Service Unavailable
</code></pre>

<h1>Call the URL from command line</h1>

<p>Calling the URL from the linux command line <code>HTTP 200</code> is returned with a XML response</p>

<pre><code>curl http://ec.europa.eu/taxation_customs/vies/checkVatService.wsdl
</code></pre>
","<p>For some versions of php, the SoapClient does not send http user agent information. What php versions do you have on the server vs your local WAMP?</p>

<p>Try to set the user agent explicitly, using a context stream as follows:</p>

<pre><code>try {
    $opts = array(
        'http' =&gt; array(
            'user_agent' =&gt; 'PHPSoapClient'
        )
    );
    $context = stream_context_create($opts);

    $wsdlUrl = 'http://ec.europa.eu/taxation_customs/vies/checkVatService.wsdl';
    $soapClientOptions = array(
        'stream_context' =&gt; $context,
        'cache_wsdl' =&gt; WSDL_CACHE_NONE
    );

    $client = new SoapClient($wsdlUrl, $soapClientOptions);

    $checkVatParameters = array(
        'countryCode' =&gt; 'DK',
        'vatNumber' =&gt; '47458714'
    );

    $result = $client-&gt;checkVat($checkVatParameters);
    print_r($result);
}
catch(Exception $e) {
    echo $e-&gt;getMessage();
}
</code></pre>

<h1>Edit</h1>

<p>It actually seems to be some issues with the web service you are using. The combination of HTTP over IPv6, and missing HTTP User Agent string, seems to give the web service problems.</p>

<p>To verify this, try the following on your linux host:</p>

<pre><code>curl  -A ''  -6 http://ec.europa.eu/taxation_customs/vies/checkVatService.wsdl
</code></pre>

<p>this IPv6 request fails.</p>

<pre><code>curl  -A 'cURL User Agent'  -6 http://ec.europa.eu/taxation_customs/vies/checkVatService.wsdl
</code></pre>

<p>this IPv6 request succeeds.</p>

<pre><code>curl  -A ''  -4 http://ec.europa.eu/taxation_customs/vies/checkVatService.wsdl
curl  -A 'cURL User Agent'  -4 http://ec.europa.eu/taxation_customs/vies/checkVatService.wsdl
</code></pre>

<p>both these IPv4 request succeeds.</p>

<p>Interesting case :) I guess your linux host resolves ec.europa.eu to its IPv6 address, and that your version of SoapClient did not add a user agent string by default.</p>
","21973010"
"Show Hide div if, if statement is true","119009","","<p>My code works to a point. What I want is that when this if statement is false, the <code>&lt;div&gt;</code> doesn't show</p>

<pre><code>&lt;?php
    $query3 = mysql_query($query3);
    $numrows = mysql_num_rows($query3);
    if ($numrows &gt; 0) {
        $fvisit = mysql_fetch_array($result3);
    }
    else {
    }
?&gt;
</code></pre>
","<p>You can use css or js for hiding a div. In else statement you can write it as:</p>

<pre><code>else{
?&gt;
&lt;style type=""text/css""&gt;#divId{
display:none;
}&lt;/style&gt;
&lt;?php
}
</code></pre>

<p>Or in jQuery</p>

<pre><code>else{
?&gt;
&lt;script type=""text/javascript""&gt;$('#divId').hide()&lt;/script&gt;
&lt;?php
}
</code></pre>

<p>Or in javascript</p>

<pre><code>else{
?&gt;
&lt;script type=""text/javascript""&gt;document.getElementById('divId').style.display = 'none';&lt;/script&gt;
&lt;?php
}
</code></pre>
","7020935"
"How do you pull first 100 characters of a string in PHP","118970","","<p>I am looking for a way to pull the first 100 characters from a string variable to put in another variable for printing.  </p>

<p>Is there a function that can do this easily?</p>

<p>For example:</p>

<pre><code>$string1 = ""I am looking for a way to pull the first 100 characters from a string variable to put in another variable for printing."";
$string2 = 100charfunction($string1);
print $string2
</code></pre>

<p>To get:</p>

<pre><code>I am looking for a way to pull the first 100 characters from a string vari
</code></pre>
","<pre><code>$small = substr($big, 0, 100);
</code></pre>

<p>For <a href=""http://ca3.php.net/manual/en/ref.strings.php"" rel=""noreferrer"">String Manipulation</a> here is a page with a lot of function that might help you in your future work.</p>
","317350"
"How to parse a CSV file using PHP","118938","","<p>Suppose I have a <code>.csv</code> file with the following content:</p>

<pre><code> ""text, with commas"",""another text"",123,""text"",5; 
 ""some    without commas"",""another text"",123,""text"";
 ""some text with  commas or no"",,123,""text""; 
</code></pre>

<p>How can I parse the content through PHP?</p>
","<p>Just use the function for parsing a CSV file</p>

<p><a href=""http://php.net/manual/en/function.fgetcsv.php"" rel=""noreferrer"">http://php.net/manual/en/function.fgetcsv.php</a></p>

<pre><code>$row = 1;
if (($handle = fopen(""test.csv"", ""r"")) !== FALSE) {
  while (($data = fgetcsv($handle, 1000, "","")) !== FALSE) {
    $num = count($data);
    echo ""&lt;p&gt; $num fields in line $row: &lt;br /&gt;&lt;/p&gt;\n"";
    $row++;
    for ($c=0; $c &lt; $num; $c++) {
        echo $data[$c] . ""&lt;br /&gt;\n"";
    }
  }
  fclose($handle);
}
</code></pre>
","9139210"
"PHP check if date between two dates","118891","","<p>I got this code from Stackoverflow and changed it slightly to work with today's date.</p>

<p>I want to check if today fits between two dates. But this is not working.
What am I missing?</p>

<pre><code>$paymentDate = date('d/m/Y');
echo $paymentDate; // echos today! 
$contractDateBegin = date('d/m/Y', '01/01/2001');
$contractDateEnd = date('d/m/Y', '01/01/2015');

if ($paymentDate &gt; $contractDateBegin &amp;&amp; $paymentDate &lt; $contractDateEnd)
{
  echo ""is between"";
}
else
{
echo ""NO GO!"";  
}
</code></pre>
","<p>This is the right answer for your code.. Just use <a href=""http://php.net/manual/en/function.strtotime.php"" rel=""noreferrer"">strtotime()</a> php function</p>

<pre><code>    $paymentDate = date('Y-m-d');
    $paymentDate=date('Y-m-d', strtotime($paymentDate));;
    //echo $paymentDate; // echos today! 
    $contractDateBegin = date('Y-m-d', strtotime(""01/01/2001""));
    $contractDateEnd = date('Y-m-d', strtotime(""01/01/2012""));

    if (($paymentDate &gt; $contractDateBegin) &amp;&amp; ($paymentDate &lt; $contractDateEnd))
    {
      echo ""is between"";
    }
    else
    {
      echo ""NO GO!"";  
    }
</code></pre>
","19070307"
"PHP session lost after redirect","118791","","<p>How do I resolve the problem of losing a session after a redirect in PHP?</p>

<p>Recently, I encountered a very common problem of losing session after redirect. And after searching through this website I can still find no solution (although <a href=""https://stackoverflow.com/questions/2037316/php-session-destroyed-lost-after-header"">this</a> came the closest). </p>

<p><strong>Update</strong></p>

<p>I have found the answer and I thought I'd post it here to help anyone experiencing the same problem.</p>
","<p>First, carry out these usual checks:</p>

<ol>
<li>Make sure <code>session_start();</code> is called before any sessions are being called. So a safe bet would be to put it at the beginning of your page, immediately after the opening <code>&lt;?php</code> declaration before anything else. Also ensure there are no whitespaces/tabs before the opening <code>&lt;?php</code> declaration.</li>
<li>After the <code>header</code> redirect, end the current script using <code>exit();</code> (Others have also suggested <code>session_write_close();</code> and <code>session_regenerate_id(true)</code>, you can try those as well, but I'd use <code>exit();</code>)</li>
<li>Make sure cookies are enabled in the browser you are using to test it on.</li>
<li>Ensure <code>register_globals</code> is off, you can check this on the <code>php.ini</code> file and also using <code>phpinfo()</code>. Refer to <a href=""http://www.php.net/manual/en/faq.misc.php#faq.misc.registerglobals"" rel=""nofollow noreferrer"">this</a> as to how to turn it off.</li>
<li>Make sure you didn't delete or empty the session</li>
<li>Make sure the key in your <code>$_SESSION</code> superglobal array is not overwritten anywhere</li>
<li>Make sure you redirect to the same domain. So redirecting from a <code>www.yourdomain.com</code> to <code>yourdomain.com</code> doesn't carry the session forward.</li>
<li>Make sure your file extension is <code>.php</code> (it happens!)</li>
</ol>

<p>Now, these are the most common mistakes, but if they didn't do the trick, the problem is most likely to do with your hosting company. If everything works on <code>localhost</code> but not on your remote/testing server, then this is most likely the culprit. So check the knowledge base of your hosting provider (also try their forums etc). For companies like FatCow and iPage, they require you to specify <code>session_save_path</code>. So like this:</p>

<pre><code>session_save_path('""your home directory path""/cgi-bin/tmp');
session_start();
</code></pre>

<p>(replace ""your home directory path"" with your actual home directory path. This is usually within your control panel (or equivalent), but you can also create a <code>test.php</code> file on your root directory and type:</p>

<pre><code>&lt;?php echo $_SERVER['SCRIPT_FILENAME']; ?&gt;
</code></pre>

<p>The bit before 'test.php' is your home directory path. And of course, make sure that the folder actually exists within your root directory. (Some programs do not upload empty folders when synchronizing)</p>
","17242347"
"How to get date and time from server","118454","","<p>I want to retrieve date and time from server and according to it do some thing. For this I used following code:</p>

<pre><code>$info = getdate();
$date = $info['mday'];
$month = $info['mon'];
$year = $info['year'];
$hour = $info['hours'];
$min = $info['minutes'];
$sec = $info['seconds'];

$current_date = ""$date/$month/$year == $hour:$min:$sec"";
</code></pre>

<p>This code returns proper date but problem is that what I see in my cpanel(server time) is diff. than what I get from code. In cpanel time is CDT while from code it is showing UTC which I reconfirm using following code </p>

<pre><code>&lt;?php echo date(""r == e""); ?&gt;
</code></pre>

<p>Why this is happening and what changes I have to do in my code so that I can get proper server time.</p>
","<p>You should <a href=""http://php.net/manual/en/function.date-default-timezone-set.php"" rel=""noreferrer"">set the timezone</a> to the one of the <a href=""http://www.php.net/manual/en/timezones.php"" rel=""noreferrer"">timezones</a> you want.</p>

<pre><code>// set default timezone
date_default_timezone_set('America/Chicago'); // CDT

$info = getdate();
$date = $info['mday'];
$month = $info['mon'];
$year = $info['year'];
$hour = $info['hours'];
$min = $info['minutes'];
$sec = $info['seconds'];

$current_date = ""$date/$month/$year == $hour:$min:$sec"";
</code></pre>

<p>Or a much shorter version:</p>

<pre><code>// set default timezone
date_default_timezone_set('America/Chicago'); // CDT

$current_date = date('d/m/Y == H:i:s');
</code></pre>
","6621656"
"how to get date of yesterday using php?","118258","","<p>I want to get the yesterday date using specific date format in php this is the format:</p>

<pre><code>$today = date(""d.m.Y""); //15.04.2013
</code></pre>

<p>Is it possible?
P.S: taking in considration if yesterday will return me to last month the month (m) should be changed</p>
","<p>there you go</p>

<pre><code>date('d.m.Y',strtotime(""-1 days""));
</code></pre>

<p>this will work also if month change</p>
","16009169"
"How to load a controller from another controller in codeigniter?","118218","","<p>I want to load a controller from a function in another controller because the library I integrated to my project I don't want to load it to the controller because I want to keep it clean and related.</p>

<p>I tried using modules but I still had to put controller in the url like </p>

<p><a href=""http://example.com/maincontroller/function"" rel=""noreferrer"">http://example.com/maincontroller/function</a><br />
<a href=""http://example.com/othercontroller/function"" rel=""noreferrer"">http://example.com/othercontroller/function</a></p>

<p>I have default controller so I can load <a href=""http://example.com/function"" rel=""noreferrer"">http://example.com/function</a> so how could I access the controller from a function from main so I don't have to put the controller in the url.</p>

<p>I'm still willing to use HMVC if I can load the controller function from the main controller function. </p>
","<p>You can't load a controller from a controller in CI - unless you use HMVC or something. </p>

<p>You should think about your architecture a bit. If you need to call a controller method from another controller, then you should probably abstract that code out to a helper or library and call it from both controllers.</p>

<p><strong>UPDATE</strong></p>

<p>After reading your question again, I realize that your end goal is not necessarily HMVC, but URI manipulation. Correct me if I'm wrong, but it seems like you're trying to accomplish URLs with the first section being the method name and leave out the controller name altogether.</p>

<p>If this is the case, you'd get a cleaner solution by getting <a href=""http://ellislab.com/codeigniter/user-guide/general/routing.html"" rel=""noreferrer"">creative with your routes</a>. </p>

<p>For a really basic example, say you have two controllers, <code>controller1</code> and <code>controller2</code>.  <code>Controller1</code> has a method <code>method_1</code> - and <code>controller2</code> has a method <code>method_2</code>.</p>

<p>You can set up routes like this:</p>

<pre><code>$route['method_1'] = ""controller1/method_1"";
$route['method_2'] = ""controller2/method_2"";
</code></pre>

<p>Then, you can call method 1 with a URL like <code>http://site.com/method_1</code> and method 2 with <code>http://site.com/method_2</code>.</p>

<p>Albeit, this is a hard-coded, very basic, example - but it could get you to where you need to be if all you need to do is remove the controller from the URL.</p>

<hr>

<p>You could also go with <a href=""http://ellislab.com/codeigniter/user-guide/general/controllers.html#remapping"" rel=""noreferrer"">remapping your controllers</a>.</p>

<p>From the docs: ""If your controller contains a function named _remap(), it will always get called regardless of what your URI contains."":</p>

<pre><code>public function _remap($method)
{
    if ($method == 'some_method')
    {
        $this-&gt;$method();
    }
    else
    {
        $this-&gt;default_method();
    }
}
</code></pre>
","14166077"
"How to use store and use session variables across pages?","118214","","<p>When one page is accessed, I would like to start a session and store a session variable:</p>

<pre><code>&lt;?php
  session_start(); 
  $_SESSION['myvar']='myvalue';
?&gt;
</code></pre>

<p>Then from another page, I would like to check if that session variable has been stored:</p>

<pre><code>&lt;?php
    session_start();
    echo(""1"");
    if(isset($_SESSION['myvar']))
    {
        echo(""2"");
       if($_SESSION['myvar'] == 'myvalue')
       {
           echo(""3"");
           exit;
       }
    }
    ?&gt;
</code></pre>

<p>This code does not work for me.</p>
","<p>Reasoning from the comments to this question, it appears a lack of an adjusted <a href=""http://php.net/manual/en/session.configuration.php#ini.session.save-path"" rel=""noreferrer""><em>session.save_path</em></a> causes this misbehavior of PHP’s session handler. Just specify a directory (outside your document root directory) that exists and is both readable and writeable by PHP to fix this.</p>
","5489870"