title,viewcount,title,body,body,acceptedanswerid
"How do you calculate the prefix, network, subnet, and host numbers?","383465","","<p>Example:</p>

<p>IP: 128.42.5.4</p>

<p>In binary: 10000000 00101010 00000101 00000100</p>

<p>Subnet: 255.255.248.0</p>

<p>How could you determine the prefix, network, subnet, and host numbers?</p>
","<h2>Calculating the Netmask Length (also called a prefix):</h2>

<p>Convert the dotted-decimal representation of the netmask to binary.  Then,  count the number of contiguous 1 bits, starting at the most significant bit in the first octet (i.e. the left-hand-side of the binary number).</p>

<pre><code>255.255.248.0   in binary: 11111111 11111111 11111000 00000000
                           -----------------------------------
                           I counted twenty-one 1s             -------&gt; /21
</code></pre>

<p>The prefix of 128.42.5.4 with a 255.255.248.0 netmask is /21.</p>

<h2>Calculating the Network Address:</h2>

<p>The network address is the logical AND of the respective bits in the binary representation of the IP address and network mask.  Align the bits in both addresses, and perform a logical AND on each pair of the respective bits.  Then convert the individual octets of the result back to decimal.</p>

<p>Logical AND truth table:</p>

<p><img src=""https://i.stack.imgur.com/e5tIQ.png"" alt=""Logical AND""></p>

<pre><code>128.42.5.4      in binary: 10000000 00101010 00000101 00000100
255.255.248.0   in binary: 11111111 11111111 11111000 00000000
                           ----------------------------------- [Logical AND]
                           10000000 00101010 00000000 00000000 ------&gt; 128.42.0.0
</code></pre>

<p>As you can see, the network address of 128.42.5.4/21 is 128.42.0.0</p>

<h2>Calculating the Broadcast Address:</h2>

<p>The broadcast address converts all host bits to 1s...</p>

<p>Remember that our IP address in decimal is:</p>

<pre><code>128.42.5.4      in binary: 10000000 00101010 00000101 00000100
</code></pre>

<p>The network mask is:</p>

<pre><code>255.255.248.0   in binary: 11111111 11111111 11111000 00000000
</code></pre>

<p>This means our host bits are the last 11 bits of the IP address, because we find the host mask by inverting the network mask:</p>

<pre><code>Host bit mask            : 00000000 00000000 00000hhh hhhhhhhh
</code></pre>

<p>To calculate the broadcast address, we force all host bits to be 1s:</p>

<pre><code>128.42.5.4      in binary: 10000000 00101010 00000101 00000100
Host bit mask            : 00000000 00000000 00000hhh hhhhhhhh
                           ----------------------------------- [Force host bits]
                           10000000 00101010 00000111 11111111 ----&gt; 128.42.7.255
</code></pre>

<h2>Calculating subnets:</h2>

<p>You haven't given enough information to calculate subnets for this network; as a general rule you build subnets by reallocating some of the host bits as network bits for each subnet.  Many times there isn't one right way to subnet a block... depending on your constraints, there could be several valid ways to subnet a block of addresses.</p>

<p>Let's assume we will break 128.42.0.0/21 into 4 subnets that must hold at least 100 hosts each...</p>

<p><img src=""https://i.stack.imgur.com/wHlF8.png"" alt=""subnetting""></p>

<p>In this example, we know that you need at least a /25 prefix to contain 100 hosts; I chose a /24 because it falls on an octet boundary.  Notice that the network address for each subnet borrows host bits from the parent network block.</p>

<h3>Finding the required subnet masklength or netmask:</h3>

<p>How did I know that I need at least a /25 masklength for 100 hosts?  Calculate the prefix by backing into the number of host bits required to contain 100 hosts.  One needs 7 host bits to contain 100 hosts.  Officially this is calculated with:</p>

<p><em>Host bits</em> = Log<sub>2</sub>(Number-of-hosts) = Log<sub>2</sub>(100) = 6.643</p>

<p>Since IPv4 addresses are 32 bits wide, and we are using the host bits (i.e. least significant bits), simply subtract 7 from 32 to calculate the minimum subnet prefix for each subnet... 32 - 7 = 25.</p>

<h3>The lazy way to break 128.42.0.0/21 into four equal subnets:</h3>

<p>Since we only want four subnets from the whole 128.42.0.0/21 block, we could use /23 subnets.  I chose /23 because we need 4 subnets... i.e. an extra two bits added to the netmask.</p>

<p>This is an equally-valid answer to the constraint, using /23 subnets of 128.42.0.0/21...</p>

<p><img src=""https://i.stack.imgur.com/nKRVg.png"" alt=""subnetting, 2nd option""></p>

<h2>Calculating the host number:</h2>

<p>This is what we've already done above... just reuse the host mask from the work we did when we calculated the broadcast address of 128.42.5.4/21...  This time I'll use 1s instead of <code>h</code>, because we need to perform a logical AND on the network address again.</p>

<pre><code>128.42.5.4      in binary: 10000000 00101010 00000101 00000100
Host bit mask            : 00000000 00000000 00000111 11111111
                           ----------------------------------- [Logical AND]
                           00000000 00000000 00000101 00000100 -----&gt; 0.0.5.4
</code></pre>

<h2>Calculating the maximum possible number of hosts in a subnet:</h2>

<p>To find the maximum number of hosts, look at the number of binary bits in the host number above.  The easiest way to do this is to subtract the netmask length from 32 (number of bits in an IPv4 address).  This gives you the number of host bits in the address.  At that point...</p>

<p><em>Maximum Number of hosts</em> = 2**(32 - netmask_length) - 2</p>

<p>The reason we subtract 2 above is because the all-ones and all-zeros host numbers are reserved.  The all-zeros host number is the network number; the all-ones host number is the broadcast address.</p>

<p>Using the example subnet of 128.42.0.0/21 above, the number of hosts is...</p>

<p><em>Maximum Number of hosts</em> = 2**(32 - 21) - 2 = 2048 - 2 = 2046</p>

<h2>Finding the minimum netmask which contains two IP addresses:</h2>

<p>Suppose someone gives us two IP addresses and expects us to find the longest netmask which contains both of them; for example, what if we had:</p>

<ul>
<li>128.42.5.17</li>
<li>128.42.5.67</li>
</ul>

<p>The easiest thing to do is to convert both to binary and look for the longest string of network-bits from the left-hand side of the address.</p>

<pre><code>128.42.5.17     in binary: 10000000 00101010 00000101 00010001
128.42.5.67     in binary: 10000000 00101010 00000101 01000011
                           ^                           ^     ^
                           |                           |     |
                           +--------- Network ---------+Host-+
                             (All bits are the same)    Bits
</code></pre>

<p>In this case the minimum netmask would be /25</p>

<p>NOTE: If you try starting from the right-hand side, don't get tricked just because you find one matching column of bits; there could be unmatched bits beyond those matching bits.  Honestly, the safest thing to do is to start from the left-hand side.</p>
","7117"
"Why and how are Ethernet Vlans tagged?","263548","","<p>I hear about VLAN tagging, but I don’t quite understand the concept.   I know a trunk cannot accept untagged packets without configuring a native VLAN, and that access ports only accept untagged packets.  But I don’t understand why packets need to be tagged or untagged.  What purpose does it serve?</p>
","<p>If you have more than one VLAN on a port (a ""trunk port""), you need some way to tell which packet belongs to which VLAN on the other end. To do this you are ""tagging"" a packet with a VLAN tag (or VLAN header if you like). In reality a VLAN tag is inserted in the Ethernet frame like this:</p>

<p><img src=""https://i.stack.imgur.com/kXT9j.png"" alt=""VLAN Header""></p>

<p>The 802.1Q (dot1q, VLAN) tag contains a VLAN-ID and other things explained in the <a href=""http://standards.ieee.org/getieee802/download/802.1Q-2011.pdf"">802.1Q Standard</a>. The first 16 bits contain the ""Tag Protocol Identifier"" (TPID) which is 8100. This also doubles as the EtherType 0x8100 for devices that don't understand VLANs.</p>

<p>So a ""tagged"" packet contains the VLAN information in the Ethernet frame while an ""untagged"" packet doesn't. A typical use case would be if you have one port from a router to a switch which multiple customers are attached to:</p>

<p><img src=""https://i.stack.imgur.com/O9OF2.png"" alt=""VLAN Trunking""></p>

<p>In this example customer ""Green"" has VLAN 10 and Customer ""Blue"" has VLAN 20. The ports between switch and customers are ""untagged"" meaning for the customer the arriving packet is just a normal Ethernet packet.</p>

<p>The port between router and switch is configured as a trunk port so that both router and switch know which packet belongs to which customer VLAN. On that port the Ethernet frames are tagged with the 802.1Q tag.</p>
","6485"
"The slash after an IP Address - CIDR Notation","229521","","<p>What does the <code>""/16""</code> means in here : <code>""192.168.0.0/16""</code>, for example.</p>
","<p>A simple explanation:</p>

<p>The <code>/&lt;number&gt;</code> is how a computer can quickly calculate what is part of its network and what is not.  It represents the bit length of the subnet mask, as indicated above.  The subnet mask is like masking when painting.  You place a mask over what you DO NOT want to paint on.  The subnet mask is a way to calculate the network portion of the address space and the host address space.  The network address space is assigned to you, the host address space you define which device receives what address in the host space.</p>

<p>A computer performs binary math of ANDing the IP address and the network mask.</p>

<p>IP Address 10.10.15.10/16</p>

<p>Step 1)
Translate the IP address 4 octets into binary: 00001010.00001010.00001111.00001010<br><br>
Step 2)
Translate the Subnet mask 4 octets into binary, which is easy using <a href=""http://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing"">CIDR</a>: 11111111.11111111.00000000.00000000<br><br>
Step 3) 
Perform the ANDing operation on the two addresses.  This will give you the Network Address for the subnet.</p>

<p>ANDing rules are as follows:</p>

<ul>
<li>1 AND 1 = 1</li>
<li>0 AND 1 = 0</li>
<li>0 AND 0 = 0</li>
<li>1 AND 0 = 0</li>
</ul>

<pre>
         00001010.00001010.00001111.00001010
     AND 11111111.11111111.00000000.00000000
         ———————————————————————————————————
         00001010.00001010.00000000.00000000
</pre>

<p>Step 4)
Convert it back to decimal: 10.10.0.0</p>

<p>So now  a computer knows that any address from 10.10.0.0 to 10.10.255.255 is part of its network and any other address is not.</p>

<p>It's like a binary network gang thing, you are in or you are not.</p>
","3873"
"Multi-Mode and Single-Mode Fiber Differences","183364","","<p>When cabling a network using fibre, what is the difference between single-mode and multi-mode fibre? When should I be using one or the other? Are there compatibility and/or speed concerns with either?</p>
","<p>Main difference:
Singlemode fiber has a lower power loss characteristic than multimode fiber, which means light can travel longer distances through it than it can through multimode fiber. Not surprising, the optics required to drive singlemode fiber are way more expensive, especially considering any varying circumstances. </p>

<p>When to use each:
Both singlemode and modern multimode fiber can handle 10G speeds.  The most important thing to consider is the distance requirement.  Within a data center, it's typical to use multimode which can get you 300-400 meters.  If you have very long runs or are connecting over longer distance, single mode can get you 10km, 40km, 80km, and even farther - you just need to use the appropriate optic for the distance required, and again, the prices go up accordingly.</p>

<p>Compatibility issues:
They are not compatible.  You cannot mix multimode and singlemode fiber between two endpoints.  The optics are not compatible either.</p>

<p>There's a lot more to say about fiber, in general, but I hope this answers your immediate question.</p>
","497"
"How to find the port a device is connected to, based on IP, on a Cisco Catalyst switch","169536","","<p>On a Cisco Catalyst switch, I need to find what port an end device is connected to.</p>

<p>I have the IP address/host name.</p>

<p>How do I quickly find the port?</p>
","<p>The answer depends on whether the switch is a <a href=""http://www.cisco.com/web/about/ac123/ac147/archived_issues/ipj_1-2/switch_evolution.html"">Layer 2 or a Layer 3</a> switch.  That is to say, is the switch only switching and relaying traffic on to a different device for routing, or, is it doing the routing decisions itself via SVIs (switched virtual interfaces).</p>

<p>On a layer 3 switch, the port can be found by using a few simple commands on the device.  However on a layer 2 switch, you have to log into both the switch and whatever device is doing the routing to locate the port.</p>

<p>In either case, the commands are the same, just run on two different boxes for the layer 2 switch.  </p>

<hr>

<h2>On a Layer 3 switch:</h2>

<ul>
<li><p>Log into the switch and issue the following command (where <em>ipaddress</em> is the ip address of the host you are trying to locate:</p>

<pre><code>show ip arp *ipaddress*
</code></pre></li>
<li><p>The output should look similar to below, and give you the mac-address of the device (I've highlighted the mac-address below in bold).</p>

<pre><code>LYKINS-1861#show ip arp 172.20.1.100
Protocol  Address          Age (min)  Hardware Addr   Type   Interface
Internet  172.20.1.100            0   **28cf.da1d.1b05**  ARPA   Vlan10
</code></pre></li>
<li><p>Now issue one of the following commands (where <em>mac-address</em> is the hardware address from previous step).  Depending on the Cisco platform, sometimes the command is listed in either form.</p>

<pre><code>show mac address-table address *mac-address*
show mac-address-table address *mac-address*
</code></pre></li>
<li><p>The output should look similar to  below, the port you are looking for should be listed as the Destination Port:</p>

<pre><code>LYKINS-1861#show mac-address-table address 28cf.da1d.1b05
Destination Address  Address Type  VLAN  Destination Port
-------------------  ------------  ----  --------------------
28cf.da1d.1b05          Dynamic      10     **FastEthernet0/1/1**
</code></pre></li>
</ul>

<hr>

<h2>On a Layer 2 switch:</h2>

<ul>
<li><p>Find out what device is doing the routing for this switch (you may have to look at the network documentation). Sometimes it is a ""<a href=""http://www.cisco.com/en/US/tech/tk389/tk815/technologies_configuration_example09186a00800949fd.shtml"">Router on a Stick</a>"", where the Layer 2 VLANs are being trunked up to the router for the Layer 3 decisions.</li></p></li>
<li><p>Log into the routing device, and issue the following command (where <em>ipaddress</em> is the ip address of the host you are trying to locate:</p>

<pre><code>show ip arp *ipaddress*
</code></pre></li>
<li><p>The output should look similar to below, and give you the mac-address of the device (listed below in bold).</p>

<pre><code>LYKINS-1861#show ip arp 172.20.1.100
Protocol  Address          Age (min)  Hardware Addr   Type   Interface
Internet  172.20.1.100            0   **28cf.da1d.1b05**  ARPA   Vlan10
</code></pre></li>
<li><p>Now log into the Layer 2 switch</p></li>
<li><p>On that device issue one of the following commands (where <em>mac-address</em> is the hardware address from previous step).  Depending on the Cisco platform, sometimes the command is listed in either form.</p>

<pre><code>show mac address-table address *mac-address*
show mac-address-table address *mac-address*
</code></pre></li>
<li><p>The output should look similar to  below, the port you are looking for should be listed as the Destination Port:</p>

<pre><code>LYKINS-1861#show mac-address-table address 28cf.da1d.1b05
Destination Address  Address Type  VLAN  Destination Port
-------------------  ------------  ----  --------------------
28cf.da1d.1b05          Dynamic      10     **FastEthernet0/1/1**
</code></pre></li>
</ul>
","597"
"How can I reset a VPN tunnel on a Cisco ASA?","120639","","<p>On a site-to-site VPN using a ASA 5520 and 5540, respectively, I noticed that from time to time traffic doesn't pass any more, sometimes just there's even missing traffic just for one specific traffic selection / ACL while other traffic over the same VPN is running. It happens even though there's a constant ping running. The reason might be that it runs over a satellite link which isn't perfectly stable.</p>

<p>How can I reset the VPN to the working state, instead of reloading one of the ASAs?</p>
","<p>The VPN can be reset by entering</p>

<pre><code>clear ipsec sa peer &lt;remote-peer-IP&gt;
</code></pre>

<p>on one side. The following traffic will cause the IPSEC tunnel to be reestablished.</p>

<p>You can do it on your side, entering the remote IP. Or login to the remote site, but possibly you have to do it outside the VPN, so using a different interface, for example using the public IP instead of the IP to which you connect through the tunnel.</p>

<p>There will be a short VPN outage while reestablishing the tunnel. After entering that command, ensure that the tunnel is up again, such as doing a ping through it.</p>
","645"
"Why only port 80 for web services?","77210","","<p>Why isn't it sensible to dedicate more than one TCP/IP port to http? Although admittedly naive, isn't it somehow intuitive to think that server performance could somehow be increased?</p>
","<p>Port 80 is a <em>well-known</em> port, which means it is well-known as the location you'll normally find HTTP servers. You can find it documented in the <a href=""http://www.rfc-editor.org/rfc/rfc2616.txt"">HTTP/1.1 RFC</a>.</p>

<p>Having a default is useful precisely because you don't have to type it into your web browser with the URI.
If you run an HTTP server (or in fact any service) on a non-standard port, you force the client to remember which arbitrary 16-bit number you chose and type it in.</p>

<p>In addition to this unfriendliness, there is no performance benefit: a port is just one part of the <code>(dst ip:port, src ip:port)</code> 4-tuple which uniquely identifies a TCP connection. If two connections share a <code>dst ip:port</code>, that doesn't mean they share some system resource - they can reside in different threads, or different processes.</p>

<p>Now, if you have logically different services which both <em>happen</em> to use HTTP, there is no <em>problem</em> with running them on different ports. It just makes the URI a little uglier.</p>
","1986"
"How does gratuitous ARP work?","73299","","<p>Does gratuitous ARP work like a normal ARP request?</p>

<p>Why is gratuitous ARP used for HSRP?</p>
","<p>Gratuitous ARP is a sort of ""advance notification"", it updates the ARP cache of other systems before they ask for it (no ARP request) or to update outdated information.</p>

<p>When talking about gratuitous ARP, the packets are actually special ARP request packets, not ARP reply packets as one would perhaps expect. Some reasons for this are explained in <a href=""http://tools.ietf.org/html/rfc5227#section-3"">RFC 5227</a>.</p>

<p>The gratuitous ARP packet has the following characteristics:</p>

<ul>
<li>Both source and destination IP in the packet are the IP of the host issuing the gratuitous ARP</li>
<li>The destination MAC address is the broadcast MAC address (<code>ff:ff:ff:ff:ff:ff</code>)
<ul>
<li>This means the packet will be flooded to all ports on a switch</li>
</ul></li>
<li>No reply is expected</li>
</ul>

<p>Gratuitous ARP is used for some reasons:</p>

<ul>
<li>Update ARP tables after a MAC address for an IP changes (failover, new NIC, etc.)</li>
<li>Update MAC address tables on L2 devices (switches) that a MAC address is now on a different port</li>
<li>Send gratuitous ARP when interface goes up to notify other hosts about new MAC/IP bindings in advance so that they don't have to use ARP requests to find out</li>
<li>When a reply to a gratuitous ARP request is received you know that you have an IP address conflict in your network</li>
</ul>

<p>As for the second part of your question, <strong>HSRP</strong>, <strong>VRRP</strong> etc. use gratuitous ARP to update the MAC address tables on L2 devices (switches). Also there is the option to use the burned-in MAC address for HSRP instead of the ""virtual""one. In that case the gratuitous ARP would also update the ARP tables on L3 devices/hosts.</p>
","7716"
"Is it safe to use any wifi channel in the 2.4GHz band?","67624","","<p>It seems that everything I read about wifi says there are only three usable channels in the 2.4 GHz band; however, there are eleven 2.4Ghz wifi channels allowed in the US.</p>

<p>If everyone is using 1, 6 or 11, wouldn’t it make sense to use an unused channel, say, channel 3 for my wifi infrastructure?  Or to put the question differently, why can’t I use channels other than 1, 6 and 11?</p>
","<p>The 2.4GHz band is one of many portions of radio spectrum, called the Industrial, Scientific and Medical (ISM) bands that are allocated for unlicensed use.  As long as you operate within the power and antenna limits, you can pretty much do what you want.  So the short answer is, you can.  But there are very good reasons why you shouldn’t.</p>

<p>Part of the confusion regarding wifi channels comes from the allocation of the frequency spectrum.  The ISM band was first allocated in 1958, before most of us were born and well before anyone even imagined wireless networking.  The channel definitions were made before wifi was invented, and they assumed 5 MHz spacing.</p>

<p>802.11b and g transmissions require 22MHz bandwidth. Because they’re 22MHz wide, the signal covers two channels above and below the center frequency. So if you use channel 6, your signal spreads across channels 4-8. There is only room in the entire band for three 22MHz wide signals (in the US) without overlapping if they center on channels 1, 6 and 11. </p>

<p>If you transmit your wifi signal between two of these channels, say centered on channel 3, two things happen: your signal interferes with other wifi users on 1 and 6, and their signals interfere with you.  This will greatly increase the number of data errors, which in turn will cause retransmissions and significantly reduce your throughput. </p>

<p>It’s as if there are a number of parallel bicycle lanes, and you try to drive a bus down one of them.  Although you drive down one lane, your bus will occupy several of the adjacent lanes. If someone happens to be driving their bus in one of those adjacent lanes when your bus goes by, well…it won’t be pretty. </p>

<p>If you only want to use one access point in a remote area with no other wifi signals, then you can probably get a away with using a different channel.   But in most urban commercial environments, the 2.4GHz band is pretty crowded. If you use an overlapping channel, you are likely to experience (and cause) interference. If your wireless system is large with many access points, then you will need all three non-overlapping channels to get good coverage.   Using something other than 1, 6 or 11 will limit the density of your access points, further reducing throughput.</p>

<p>In summary, it’s good practice to use 1, 6 and 11 to get the maximum use of the radio spectrum with a minimum of interference.</p>
","6939"
"TCPDump - Filter by MAC Address","67307","","<p>I would like to display all traffic for or from a specific MAC address.
For that I tried </p>

<pre><code>sudo tcpdump host aa:bb:cc:11:22:33
</code></pre>

<p>It does not work and returns me an error</p>

<pre><code>tcpdump: pktap_filter_packet: pcap_add_if_info(en0, 1) failed: pcap_add_if_info: pcap_compile_nopcap() failed
</code></pre>

<p>I don't know how to interpret this error message and I don't know how to solve the problem.</p>

<p>Any help ?</p>
","<p>You have used the following as your packet filter: <code>host aa:bb:cc:11:22:33</code></p>

<p>As it stands, this is looking for an IP or hostname but you are giving it a MAC address.</p>

<p>To use a MAC address, you need to include the <code>ether</code> packet filter primitive.</p>

<p>In your case, the following should work:</p>

<pre><code>sudo tcpdump ether host aa:bb:cc:11:22:33
</code></pre>

<p>Or, if it needs you to specify the interface, then it would be something like: </p>

<pre><code>sudo tcpdump -i eth0 ether host aa:bb:cc:11:22:33
</code></pre>
","19741"
"What are the differences between VRRP and HSRP?","61589","","<p>Are there any significant differences between VRRP and HSRP? </p>
","<p>Besides VRRP not being proprietary, there are a few minor differences between the protocols as well:</p>

<ul>
<li>With HSRP, each interface must have an IP address that is separate from the HSRP group address. VRRP lets you share the Master's interface IP address.</li>
<li>On Cisco devices, VRRP is configured to preempt by default, whereas HSRP is not configured to preempt by default.</li>
<li>On Cisco devices, HSRP sends hellos every 3 seconds and has a dead timer of 10 seconds. VRRP sends advertisements every 1 second and has a dead timer of roughly three times the advertisement interval.</li>
<li>VRRP can be configured to learn the timer configuration from the Master.</li>
</ul>
","795"
"When to choose fiber instead of twisted pair (copper)","60883","","<p>These days both fibre and twisted pair are supporting 1000BASE-T and 10GBASE-T, but when do you choose one over the other? The obvious one is maximum cable length, but what are other factors which might come to mind when making this choice. </p>
","<p>There are a fairly large number of factors to consider and it is also important to accept that not all fiber is the same just like not all twisted pair is the same.  Here are a few things that occur to me.  Of course these may vary depending on environment.</p>

<p><strong>Fiber:</strong>  Much longer max distances, depending on specification and throughput.  No electromagnetic interference. Note however that fiber comes in a large number of grades and planning for the future may be somewhat more complex.</p>

<p><strong>Copper:</strong> Shorter max distances per link.  Susceptible to electromagnetic interference.  Fewer number of grades/variations (but still mind these!) meaning fewer accidents when the rollout team grabs the wrong spool (see below for a funny story).  Supports power over ethernet.</p>

<p>Funny story:  A particular county in a Western state runs a fiber network that began as a control system for their hydroelectric dams.  As time went on they found they didn't need nearly as much fiber as was laid for this and so they separated out many of the strands and used it to build a county-wide network linking homes and businesses to ISP's and telco's.  Of course single mode fiber was used for longer transmissions and multi-mode for short runs.</p>

<p>So when they were running the longer runs to connect towns and cities with this new network, the team that ran the fiber grabbed the wrong spool, and ran multi-mode fiber on all these long distance links.  The team was quite unhappy when they found out they would have to re-run all the fiber again!  Moral of the story:  be very careful about ensuring that everyone knows which grades of fiber go where....</p>
","101"
"Port mirroring on an HP Switch (HP 2915-8G)","60194","","<p>for sniffing purposes I need to mirror traffic on an HP 2915. How would I go about doing so?</p>
","<p>You can certainly use Port Mirroring with the HP 2915.  You can find the information for port mirroring on page B-23 in the <a href=""http://bizsupport1.austin.hp.com/bc/docs/support/SupportManual/c02564193/c02564193.pdf"">documentation for the 2915</a>.</p>

<p>You will be able to designate monitoring of inbound and outbound traffic on either individual ports, groups of ports, static port trunks, and one static VLAN.</p>

<p>An example to assign a port as the monitoring port: </p>

<blockquote>
  <p>ProCurve(config)# mirror-port 8</p>
</blockquote>

<p>Removing port 8 as the monitoring port:</p>

<blockquote>
  <p>ProCurve(config)# no mirror-port </p>
</blockquote>

<p>Once you assign the monitor port you can then select the source interfaces:</p>

<blockquote>
  <p>ProCurve(config)# int 1-4, monitor</p>
</blockquote>

<p>To show the current monitor (this will display what port is the monitor port, called the mirror port, and what the sources being monitored are)</p>

<blockquote>
  <p>ProCurve(config)# show monitor</p>
</blockquote>
","2461"
"What is the meaning of RSSI?","57321","","<p>When using mobile 3G routers, you see in the output of the ""show cellullar 0 all"" command.  What is the significance of this value? Is this interpretation the same when talking about 2G or 3G? </p>

<p>Ex: </p>

<ul>
<li>2G connection, RSSI -75</li>
<li>3G connection, RSSI -75</li>
<li>2G connection, RSSI -100</li>
<li>3G connection, RSSI -100</li>
</ul>
","<p>RSSI is a Radio-Frequency (RF) term and stands for <em>Received Signal Strength Indicator</em>. It is a measure of the power level that a RF device, such as WiFi or 3G client, is  receiving from the radio infrastructure at a given location and time. For instance, the power level a laptop is detecting from a nearby AP. </p>

<p>Usually, the higher the RSSI the better the quality and speed of the communication through the radio segment. </p>
","1675"
"What is the difference between MSS and MTU?","57311","","<p>I'm confused as to the difference between maximum segment size and a maximum transmission unit.</p>

<p>Can someone please explain in relation to layers 2 and 3?</p>

<p>If I had a packet of 800 bytes in the payload. Would it be correct to say that the MSS would be 800 bytes (If I set it to be that) and the MTU would be 840? TCP 20 and IP 20 bytes. Would it be any different if I was doing PPPoE?</p>
","<p>In addition. <strong>MSS</strong> value derives from the value <strong>MTU</strong>, if you have a 800-byte packet, it can also say that such a packet was originally 2260 bytes long, and he broke into 2 packet 1460 + 800 bytes, if we use MTU = 1500.<br>
You say is true, if you MSS = 800, the MTU should be at least 840. As PPPoE overhead is 8 bytes, and therefore MTU = 1492 bytes, and MSS = 1492-40 = 1452 bytes.</p>
","8292"
"What causes total output drops on a cisco switch interface?","57207","","<p>I have an HP c7000 blade chassis which contains Cisco 3120X and Cisco 3120G switches running ios 12.2(58)SE1.  The blades themselves are very lightly loaded yet many interfaces on different blade switches in the chassis show a fairly high number of output drops.  If I check the number of output drops repeatedly I not only see the counter increasing but sometimes it decreases.  The numbers don't correlate with the packets/s recorded on the interface.  QoS settings are default for the platform.</p>

<p>The following samples were all taken within a 30 second period:</p>

<pre>
bc1019-3120-stack>sh int gi2/0/7 | i output drops
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 2255550
bc1019-3120-stack>sh int gi2/0/7 | i output drops
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 2255550
bc1019-3120-stack>sh int gi2/0/7 | i output drops
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 2255550
bc1019-3120-stack>sh int gi2/0/7 | i output drops
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 2255550
bc1019-3120-stack>sh int gi2/0/7 | i output drops
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 2255550
bc1019-3120-stack>sh int gi2/0/7 | i output drops
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 2255550
bc1019-3120-stack>sh int gi2/0/7 | i output drops
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 451110
bc1019-3120-stack>sh int gi2/0/7 | i output drops
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 451110
bc1019-3120-stack>sh int gi2/0/7 | i output drops
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 902220
bc1019-3120-stack>sh int gi2/0/7 | i output drops
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 1353330
bc1019-3120-stack>sh int gi2/0/7 | i output drops
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 1804440
bc1019-3120-stack>sh int gi2/0/7 | i output drops
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 1804440
bc1019-3120-stack>sh int gi2/0/7 | i output drops
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 1804440
bc1019-3120-stack>sh int gi2/0/7 | i output drops
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 451490

bc1019-3120-stack>sh int gi2/0/7 | i output rate
  5 minute output rate 301000 bits/sec, 119 packets/sec
</pre>

<p><p>
1) Is there anything else that can cause output drops besides the server nic not receiving the frames quickly enough?</p>

<p>2) What is the maximum number of output drops the interface counter can record?  Does it rollover when it reaches the max?</p>

<p>3) What would be considered a healthy rate of output drops?</p>
","<p>Unless someone is clearing counters you should never see any odometer-type counters (those that increment based on a packet action) decrease, they should always increase.  That part sounds like a bug.</p>

<p>As far as what causes output drops in particular, there are so many different causes that it's very difficult to pinpoint it exactly.  Sometimes there is congestion inside the switch's backplane and those might show up as output drops on the outgoing interface.  In rare circumstances you can also get microbursts that don't show up when polled at 1 minute intervals that quickly overload the interface, but then drop back down very quickly.  I would suggest grabbing the SNMP OID for output drops and then graphing that and see how it corresponds to the CLI counter.</p>

<p>Generally speaking, you don't want any output drops as they indicate a packet that did not make it to its destination.  But, if you're running your links hot (which you say you're not) they're unavoidable to an extent, mostly due to interior switch buffering, etc.</p>
","217"
"About the switchport mode","54954","","<p>I am new to network Engineering. I find it is hard to distinguish and understand different switchport settings. </p>

<p>Why can I have a switchport set to access, auto, or dynamic?  What are they used for? Are those functions only used for a host to switch connection?</p>

<p>What is ""switchport nonnegotiate"" used for?</p>
","<p>Welcome to the field of network engineering!</p>

<p>DTP stands for <a href=""https://en.wikipedia.org/wiki/Dynamic_Trunking_Protocol"">Dynamic Trunking Protocol</a> and is crucial to the commands below. It is also Cisco proprietary.</p>

<p><strong>switchport mode access</strong> - Always forces that port to be an access port with no VLAN tagging allowed EXCEPT for the voice vlan. DTP is not used and a trunk will never be formed.</p>

<p><strong>switchport nonegotiate</strong> - turns off DTP and forces the interface into a trunk.</p>

<p><strong>switchport mode dynamic desirable</strong> - pro-active DTP negotiation will begin and if the other-side is set to <strong><em>trunk</em></strong>, <strong><em>desirable</em></strong>, or <strong><em>auto</em></strong>. The interface will become a trunk. Otherwise the port will become an access port.</p>

<p><strong>switchport mode dynamic auto</strong> - allows the port to negotiate DTP if the other side is set to <strong><em>trunk</em></strong> or <strong><em>desirable</em></strong>. Otherwise it will become an access port.</p>

<p><strong>switchport mode trunk</strong> - This interface will always be a trunk no matter what happens on the other side. It will also use DTP to negotiate a neighbouring interface that is set to <strong><em>dynamic desirable</em></strong> or <strong><em>dynamic auto</em></strong> into a trunk.</p>

<p>In the real world - I have never seen <strong>*dynamic auto</strong>*or <strong><em>dynamic desirable</em></strong> as generally network engineers try and make layer 2 related items (such as switchport settings) stable and static. There are also security risks associated with this.</p>

<p>An access role port is usually used for an single host or device.
You must also specify which VLAN you would like it to be associated with, otherwise it will default to VLAN 1 in the Cisco world.
eg)</p>

<blockquote>
  <p>interface gig0/1<br>
   switchport mode access<br>
   switchport access vlan 10</p>
</blockquote>

<p>Also, if you have a VLAN for voip traffic. You can also set the voice vlan as required by adding</p>

<p><code>switchport voice vlan 20</code></p>

<p>A trunk port is generally only used when you want to interconnect two switches together in order to pass multiple VLANs between the two switches.
In this example, the switches will use Dot1Q tagging and allow vlans 10, 20 &amp; 30 to be passed between the two switches. Vlan 10 however, will be passed without tagging since it is set as the native vlan.
eg) </p>

<blockquote>
  <p>Switch1# interface gig0/1<br>
     switchport encapsulation dot1q<br>
     switchport mode trunk<br>
     switchport trunk native vlan 10<br>
     switchport trunk allowed vlan 10,20,30  </p>
  
  <p>Switch2# interface gig0/1<br>
     switchport encapsulation dot1q<br>
     switchport mode trunk<br>
     switchport trunk native vlan 10<br>
     switchport trunk allowed vlan 10,20,30  </p>
</blockquote>

<p>Take a look at <a href=""http://ericleahy.com/index.php/implement-trunk-and-trunk-protocols/"">Implement trunk and trunk protocols</a> for more examples and to learn more about ISL or dot1q tagging along with some more command and debug information.</p>
","2026"
"PING port number?","54817","","<p>Yesterday interviewer ask me what is port number for ping and which protocol ping use TCP/UDP.</p>

<p>After interview I search on internet and found different different results someone says ICMP uses Port 7, someone says it does not use port number, on one site I found it usese IP protocol 1, etc.</p>

<p>Can anyone help me with the correct explanation?</p>

<p>Regards,
Nishad  </p>
","<p>The standard ping command does not use TCP or UDP. It uses ICMP. To be more precise ICMP type 8 (echo message) and type 0 (echo reply message) are used.
ICMP has no ports!</p>

<p>See <a href=""https://tools.ietf.org/html/rfc792"" rel=""noreferrer"">RFC792</a> for further details.</p>
","37897"
"GNS3: Configuring/Emulating a Juniper Router on GNS3","52085","","<p>I need to be able to emulate a Juniper Router (JunOS) on GNS3.</p>

<p>I have seen that this is available as on option in the 'Node Types' list on GNS3.</p>

<p><img src=""https://i.stack.imgur.com/Bvi0a.png"" alt=""Juniper Router Node in GNS3""></p>

<p>When I try to use this to add a Juniper Router to the simulation using the above Node Type, I get an error message:</p>

<p><img src=""https://i.stack.imgur.com/94v08.png"" alt=""enter image description here""></p>

<p>Please let me know how I could configure this. Detailed steps to configure this would be really helpful.</p>
","<p>This can be configured using <code>VirtualBox</code> or using <code>Qemu</code>. These are the steps required to setup JunOS on GNS3 using <strong>Qemu</strong>:</p>

<ol>
<li><p>Acquire an image of JUNOS. The image file should be with the extension <code>.img</code></p></li>
<li><p>Open GNS3 and go to <code>Edit</code> -> <code>Preferences</code> -> <code>Qemu</code></p></li>
<li><p>Make sure the settings in the <code>General Settings</code> section are correct. Below is a screenshot of what the Qemu settings should look like:</p>

<p><img src=""https://i.stack.imgur.com/eiCHP.png"" alt=""QMenu Settings""></p></li>
<li><p>Click on <code>Test Settings</code> to check if your settings are correct</p></li>
<li><p>Click on the <code>JunOS</code> tab on the same <code>Preferences</code> window</p>

<ul>
<li>Enter any name for the identifier name</li>
<li>For the binary image, select the image you acquired in step 1</li>
<li>Select a value for the RAM. The minimum I have seen for this is 256MB. You may also leave this blank and GNS3 will assign this for you.</li>
<li>Enter the number of NICs that you want on the Juniper Router (default is 6)</li>
<li>Select the model of the NICs you want on the Juniper Router (default is e1000)</li>
</ul>

<p>Sample Settings for <code>JunOS</code> settings section:</p>

<p><img src=""https://i.stack.imgur.com/klIM6.png"" alt=""JunOS Settings""></p></li>
<li><p>Click <code>Save</code> to save the JunOS image. Close the Preferences window by clicking <code>Apply</code>. </p></li>
<li><p>Now you are able drag the Juniper Router from the left panel and drop them to the topology.</p></li>
</ol>

<p><strong>Note:</strong> If you want ta add multiple Juniper routers to your topology, you have to make multiple copies of the image acquired in step 1. Then from the GNS3 program right click on every Juniper router -> <code>Configure</code> -> In the <code>JunOS Image:</code> setting, specify the path of a different image file for each instance. </p>

<hr>

<h2>Helpful Links:</h2>

<ol>
<li><p><a href=""http://nil.uniza.sk/network-simulation-and-modelling/gns3/how-run-junos-inside-gns3-step-step"" rel=""nofollow noreferrer"">NiL - How to run JunOS inside of GNS3</a></p></li>
<li><p><a href=""http://thewaleedkhan.wordpress.com/2013/11/26/junos-on-gns3-through-qemu/"" rel=""nofollow noreferrer"">Waleed Khan - JUNOS on GNS3 through Qemu</a></p></li>
</ol>
","7769"
"How does a WiFi range extender work?","51857","","<p>I have a WiFi base station, and a WiFi range extender. Both of them have the same SSID.</p>

<p>When a device connects to that SSID, what exactly happens? How does the device know that base station and range extender are part of the same network and no third party can impersonate another range extender on the same network? </p>

<p>Then, what happens if the device moves around and signal strengths change? Is there some kind of renegotiation going on?</p>

<p>What does the range extender actually do? Simply rebroadcast whatever it gets from device and base station, or is it more intelligent than that?</p>

<p>This sounds like several questions, but if somebody had a concise explanation handy, it would probably answer all of those at the same time.</p>
","<p>There are two types of wireless extenders.  First would be an extender that uses some sort of mesh technology.  This type of extender is typically only found within an enterprise deployment and will establish a connection to the network in addition to also acting as an AP.  Often a mesh device will use two radios, one providing the ""back haul"" and one to provide client access.</p>

<p>However most devices referred to as wireless extenders fall into the second group and are actually just repeaters. When a wireless repeater receives (or ""hears"") a frame, it will then transmit a copy of that frame into the air.  Naturally it will only hear frames on the channel to which it is configured, and typically will also be configured to only re-transmit frames for a particular SSID or BSSID.</p>

<p>Since RF is a shared resource, this repetition of data can result in a significant loss of performance.  To reduce this impact, some repeaters are smart enough to not repeat frames where it hears both the frame and the acknowledgement between the AP and client device, but others are not and will re-transmit all frames.  Even if you are using a ""smarter"" repeater, if the client is too far from the repeater to be heard, all AP traffic will get repeated leading to the same loss of performance.</p>

<blockquote>
  <p>When a device connects to that SSID, what exactly happens?</p>
</blockquote>

<p>When a client device connects, it goes through an association process with the access point.  If the client is out of range of the AP, but within range of the repeater, the repeater will re-transmit the client frames as well as the return frames from the AP.</p>

<blockquote>
  <p>How does the device know that base station and range extender are part of the same network and no third party can impersonate another range extender on the same network?</p>
</blockquote>

<p>The device doesn't.  When function as a repeater, the repeater itself doesn't really have any ""identity"" on the network (any management interface on the repeater is a separate matter).  It is merely repeating the frames that it hears unchanged.</p>

<p>Even  if a third party does place a repeater on in the area, this is not really a problem as the client device is associating (and establishing encryption) with the access point itself and not the repeater.</p>

<blockquote>
  <p>Then, what happens if the device moves around and signal strengths change? Is there some kind of renegotiation going on?</p>
</blockquote>

<p>With most repeaters, there is no roaming or renegotiation.  The client device will either see the frame from the original AP, the repeated frame from the repeater, or possibly both.</p>

<blockquote>
  <p>What does the range extender actually do? Simply rebroadcast whatever it gets from device and base station, or is it more intelligent than that?</p>
</blockquote>

<p>See above.</p>
","13228"
"Cisco default username","49984","","<p>In setting up a new network switch (Catalyst 2960-S), I did the initial configuration dialog (via the console port), in which it asks for host-name, secret, password, virtual terminal password, and other things.</p>

<p>I set the enable secret, the enable password, and the virtual terminal password. At no point does it ask for a username. If I exit or let it time out, then I need to get back in, at which point it asks for a username/password. What is this username/password?</p>

<p>Is the password one of the three mentioned above that it asks me to create during setup? Is it some default value? Is the username something like ""cisco"" or ""admin""?</p>

<p>The ""getting started guide"" suggests that the initial web-interface default password is cisco and that it ignores the username field. I tried that.</p>
","<p>On the Cisco 2960-S, the default credentials are cisco/cisco.  These get deleted after the first time you login to the switch. There shouldn't be any access control on the console, unless the express setup puts it in there.</p>

<p>Now, if you set the virtual terminal password, then it probably just set a password on the <em>line vty</em> block, this should let you in with Telnet without needing a username.  Once you get in to the switch with telnet you can run <em>sh run | inc username</em>.  This will tell you what the username is set as, and probably the password if you don't have the password-encryption service on.</p>

<p>If this fails to work, then you will have to do a <a href=""http://www.cisco.com/en/US/products/hw/switches/ps628/products_password_recovery09186a0080094184.shtml"" rel=""nofollow"">password recovery</a> on the switch.</p>
","14622"
"Using SNMP to retrieve the ARP and mac-address tables from a switch","48824","","<p>I would like to get ARP tables from a switch to a syslog-ng server that has been set up on Ubuntu Server 12.04 LTS. I have read about SNMP and I know the server will act as a manager and the switch as an agent. I have details as to where the MIB is contained, and I must use the command</p>

<pre><code>snmpwalk -v2c -c &lt;community&gt; &lt;SwitchIP&gt; .1.3.6.1.2.1.17.4.3.1.2
</code></pre>

<p>I want the resulting arp tables to be directed to a  my server.</p>

<p>My problem is that I don't know where exactly to run the command, or save the output to a file.</p>
","<p>There seems to be a little confusion... you are asking about ARP tables, and you're using OID <code>.1.3.6.1.2.1.17.4.3.1.2</code>; however, that OID actually is for the mac-address table in the switch.</p>

<p>I am assuming you know how to login to your Ubuntu server, and that <code>NET-SNMP</code> is installed... please let me know if you need pointers for doing this (see <a href=""https://networkengineering.stackexchange.com/questions/2990/translating-snmpwalk-output-into-human-readable-format/775/"">this question for hints about loading MIBs in linux</a>).  Some of my examples assume you have the MIBs loaded on your server... you just need to remove the <code>-m &lt;mib-name&gt;</code> option in the commands if you don't have the MIBs loaded locally.</p>

<p>I apologize in advance for the length of this answer... I wish polling with SNMP wasn't as complicated...</p>

<h3>Polling the mac-address table:</h3>

<p>If you really want the mac-address table from the switch, then remember you have to change the community string you poll with... it should be in the form of <code>&lt;commity@vlan&gt;</code>... each vlan you poll needs a different community.</p>

<p>In my example below, the switch at 172.16.1.210 is configured with <code>snmp-server community public ro</code>, and I'm polling the mac-address table in vlan-10 with <a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?local=en&amp;translate=true&amp;objectInput=dot1dTpFdbPort"" rel=""noreferrer"">dot1dTpFdbPort</a> from <a href=""http://tools.cisco.com/Support/SNMP/do/BrowseMIB.do?local=en&amp;step=2&amp;mibName=BRIDGE-MIB"" rel=""noreferrer"">BRIDGE-MIB</a>.</p>

<pre><code>[mpenning@tsunami ~]$ snmpbulkwalk -v 2c -c public@10 -OXsq 172.16.1.210 \
  .1.3.6.1.2.1.17.4.3.1.2
dot1dTpFdbPort[0:6:53:fe:39:e0] 52
dot1dTpFdbPort[0:1d:a1:cd:53:46] 52
dot1dTpFdbPort[0:30:1b:bc:a7:d7] 52
dot1dTpFdbPort[0:80:c8:0:0:0] 52
dot1dTpFdbPort[38:ea:a7:6d:2e:8e] 52
dot1dTpFdbPort[80:ee:73:2f:b:40] 52
[mpenning@tsunami ~]$
</code></pre>

<p>In the output above, 52 is the value of <code>dot1dBasePort</code>, which is a number the MIB uses to index the dot1dTp table.  To translate that into a normal interface name, you have to map that to an ifName... <a href=""http://tools.cisco.com/Support/SNMP/do/BrowseMIB.do?local=en&amp;step=2&amp;mibName=BRIDGE-MIB"" rel=""noreferrer"">BRIDGE-MIB</a> does that with <a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?local=en&amp;translate=true&amp;objectInput=dot1dBasePortIfIndex"" rel=""noreferrer"">dot1dBasePortIfIndex</a>...</p>

<pre><code>[mpenning@tsunami ~]$ snmpbulkwalk -v 2c -c public@10 -m BRIDGE-MIB 172.16.1.210 \
  .1.3.6.1.2.1.17.1.4.1.2
BRIDGE-MIB::dot1dBasePortIfIndex.52 = INTEGER: 10048
[mpenning@tsunami ~]$
[mpenning@tsunami ~]$ snmpget -v 2c -c public 172.16.1.210 ifName.10048
IF-MIB::ifName.10048 = STRING: Fa0/48
[mpenning@tsunami ~]$
</code></pre>

<p>Thus we know that all the mac-addresses on this switch were learned through FastEthernet 0/48 in vlan-10.</p>

<h3>Polling the active Vlans:</h3>

<p>If you're not sure which vlans to poll on a switch, you can get that information from <code>.1.3.6.1.4.1.9.9.46.1.3.1.1.2</code>, which is <a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?local=en&amp;translate=true&amp;objectInput=vtpVlanState"" rel=""noreferrer"">vtpVlanState</a> in the <a href=""http://tools.cisco.com/Support/SNMP/do/BrowseMIB.do?local=en&amp;step=2&amp;mibName=CISCO-VTP-MIB"" rel=""noreferrer"">CISCO-VTP-MIB</a>...</p>

<pre><code>[mpenning@tsunami ~]$ snmpbulkwalk -v 2c -c public -OXsq -m CISCO-VTP-MIB 172.16.1.210 \
   .1.3.6.1.4.1.9.9.46.1.3.1.1.2
vtpVlanState[1][1] operational
vtpVlanState[1][10] operational
vtpVlanState[1][1002] operational
vtpVlanState[1][1003] operational
vtpVlanState[1][1004] operational
vtpVlanState[1][1005] operational
[mpenning@tsunami ~]$
</code></pre>

<p>Keep in mind that Vlans 1002-1005 are <a href=""https://supportforums.cisco.com/thread/30589"" rel=""noreferrer"">internal Cisco Vlans</a> that you should not poll.</p>

<h3>Polling the ARP table</h3>

<p>If you really want the ARP table from the switch, then you need to poll <a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?objectInput=atphysaddress&amp;translate=Translate&amp;submitValue=SUBMIT&amp;submitClicked=true"" rel=""noreferrer"">atPhysAddress</a>...</p>

<pre><code>[mpenning@tsunami ~]$ snmpbulkwalk -v 2c -c public -OXsq  172.16.1.210 \
  .1.3.6.1.2.1.3.1.1.2
atPhysAddress[10][1.172.16.1.5] ""80 EE 73 2F 0B 40 ""
atPhysAddress[10][1.172.16.1.25] ""38 EA A7 6D 2E 8E ""
atPhysAddress[10][1.172.16.1.32] ""BC 51 FE 50 16 F8 ""
atPhysAddress[10][1.172.16.1.200] ""00 06 53 FE 39 E0 ""
atPhysAddress[10][1.172.16.1.210] ""00 18 BA 51 5B 41 ""
[mpenning@tsunami ~]$
</code></pre>

<h3>Saving command output to a file</h3>

<p>We're delving into areas that go outside the normal scope of this site, but to save the ARP table above to a file in <code>/tmp/S01_ARP.txt</code>, the you'd add <code>&gt; /tmp/S01_ARP.txt</code> to the end of the <code>snmpbulkwalk</code> above...</p>

<pre><code>[mpenning@tsunami ~]$ snmpbulkwalk -v 2c -c public -OXsq  172.16.1.210 \
      .1.3.6.1.2.1.3.1.1.2 &gt; /tmp/S01_ARP.txt
[mpenning@tsunami ~]$ cat /tmp/S01_ARP.txt
atPhysAddress[10][1.172.16.1.5] ""80 EE 73 2F 0B 40 ""
atPhysAddress[10][1.172.16.1.25] ""38 EA A7 6D 2E 8E ""
atPhysAddress[10][1.172.16.1.32] ""BC 51 FE 50 16 F8 ""
atPhysAddress[10][1.172.16.1.200] ""00 06 53 FE 39 E0 ""
atPhysAddress[10][1.172.16.1.210] ""00 18 BA 51 5B 41 ""
[mpenning@tsunami ~]$
</code></pre>

<p>As you see above, you can use <code>cat</code> in linux to get all output from a text file.  NOTE: Some linux distributions (ahem... CentOS) clean out the <code>/tmp</code> directory on a monthly basis.  You should use your <code>HOME</code> directory in linux to store the file.  I don't remember Ubuntu cleaning out <code>/tmp</code>, but to be safe I'd avoid storing things there.</p>

<h3>Miscellaneous notes about SNMP...</h3>

<p>If you haven't loaded all Cisco's MIBs on your Ubuntu machine, then you should avoid using the <code>-m &lt;mib-name&gt;</code> flags in the <code>snmpbulkwalk</code> commands.  Loading MIBs allows you to poll with an OID name, instead of the long dotted number...</p>

<hr>

<h3>Reference information:</h3>

<p>I am including some show commands from the switch, in case you have questions about the CLI for the SNMP commands above...</p>

<pre><code>S01#sh ver | i IOS
Cisco IOS Software, C3560 Software (C3560-IPBASEK9-M), Version 12.2(37)SE, RELEASE SOFTWARE (fc2)
S01#
S01#sh mac address-table dynamic
          Mac Address Table
-------------------------------------------

Vlan    Mac Address       Type        Ports
----    -----------       --------    -----
  10    0006.53fe.39e0    DYNAMIC     Fa0/48
  10    001d.a1cd.5346    DYNAMIC     Fa0/48
  10    0030.1bbc.a7d7    DYNAMIC     Fa0/48
  10    0080.c800.0000    DYNAMIC     Fa0/48
  10    38ea.a76d.2e8e    DYNAMIC     Fa0/48
  10    80ee.732f.0b40    DYNAMIC     Fa0/48
Total Mac Addresses for this criterion: 6
S01#
S01#sh arp
Protocol  Address          Age (min)  Hardware Addr   Type   Interface
Internet  172.16.1.210            -   0018.ba51.5b41  ARPA   Vlan10
Internet  172.16.1.200            0   0006.53fe.39e0  ARPA   Vlan10
Internet  172.16.1.32             0   bc51.fe50.16f8  ARPA   Vlan10
Internet  172.16.1.25             0   38ea.a76d.2e8e  ARPA   Vlan10
Internet  172.16.1.5              1   80ee.732f.0b40  ARPA   Vlan10
S01#
</code></pre>
","2904"
"Reason for both a MAC and an IP address","47042","","<p>If my computer has an IP address,why does it need a MAC address?</p>
","<p>without going into OSI model, TCP layer, etc.:</p>

<p>Back in time, networks were created: some computers would communicate with each other to share something. TO do that, they need to know <em>who</em> was talking and <em>who</em> was being talked to. So, instead of giving each computer a name, we gave them an ID. This ID is called MAC address, is should uniquely identity each computer.</p>

<p>(ok, identify each network card, but back that time, you could think one MAC address for each computer).</p>

<p>There wasn't a unique specification on how computers would talk to each other: many protocols appeared: TCP/IP, IPX/SPX, and so on. Each protocol would specify things as they thought was ok. For example, IPX/SPX would address each computer using the MAC address and some more information.</p>

<p>But the TCP/IP protocol was designed a little bit different: they decided that having an virtual address, made of 4 bytes (0.0.0.0 to 255.255.255.255) was enough, and was even easier to manage: it doesn't matter if your network cards all have a similar MAC address or not, we'll group our computer so that all TCP/IP address that began with 10.0.x.x. are part of the engineering group, and those of 10.1.x.x. are the printers, and...</p>

<p>So, if a TCP/IP address needs to comunicate with another, is just uses the TCP/IP address. But the network devices need to know to which network card that message is going, so they, somehow, translate the TCP/IP address with to the MAC address.</p>

<p><strong>Why simply don't eliminate the MAC and use just TCP/IP ?</strong> </p>

<p>some reasons:</p>

<ul>
<li>easy to group TCP/IP addresses,</li>
<li>all devices are built to take care of the MAC address, in that low-level requirement, and would need to be changed</li>
<li>despite being the vast majority (I think :-P ), some other protocols are still in use and they rely on the MAC address</li>
</ul>
","3342"
"How is the root bridge elected in STP?","46961","","<p>How does STP/RSTP determine which bridge is the root bridge, and how are paths to the root bridge selected?</p>
","<p>Not sure how much you know about switching and spanning tree but basically when starting out all switches claim that they are the root. All switches send BPDUs (Bridge Protocol Data Unit) which contain a priority and the BID (Bridge ID). </p>

<p>The BID is 8 bytes long. 6 bytes is used for the MAC address of the bridge. 12 bits is used to indicate the VLAN, this is called extended system ID. 4 bits are used to set the priority. Lower priority means it is preferred compared to a higher. The priority is set in multiples of 4096.</p>

<p>If there is a tie in priority then the lowest MAC address will determine which bridge becomes the root.</p>

<p>To select the path to the root the cost to the root is calculated. As the BPDU travels from the root downstream the cost is increased INBOUND. 802.1D-1998 (legacy STP) had a cost of 19 for a FastEthernet interface. The newer standard 802.1D-2004 defines a cost of 200000 for FastEthernet.</p>

<p>If there is a tie in cost then choose the BPDU that came from the switch with lowest BID. If that is a tie as well (multiple links to same switch) port ID comes into play. The port ID is from the upstream switch as well and consists of a port priority and port ID which identifies the interface. The default port priority is 128.</p>

<p>There is a lot to spanning tree but these are the basic steps.</p>
","116"
"What is the difference between netFlow and sFlow?","46670","","<p>How is sFlow different from netFlow, and how is each supported by different vendors ?</p>
","<p><strong>NetFlow</strong> is a protocol for exporting aggregated IP flow totals. As such it is well suited to IP traffic accounting on Internet routers. With Netflow V9 (AKA IPFIX it can look into Layer 2 traffic as well)</p>

<p><strong>sFlow</strong> is a general purpose network traffic measurement system technology. sFlow is designed to be embedded in any network device and to provide continuous statistics on any  protocol (L2, L3, L4, and up to L7), so that all traffic throughout a network can be accurately characterized and monitored. These statistics are essential for congestion control, troubleshooting, security surveillance, network planning etc. They can also be used for IP accounting purposes.</p>

<p><strong>Netflow</strong> mirrors all traffic, and places a load on the CPU when utilised.</p>

<p><strong>SFlow</strong> is a packet sampling technology where the switch captures every 100th packet (configurable) per interface and sends it off to the collector. sFlow is built into the ASIC, and places minimal load on the CPU. </p>

<p><strong>Netflow</strong> supported by Cisco, Juniper, Alcatel Lucent, Huawei, Enterasys, Nortel, VMWare</p>

<p><strong>sFlow</strong> supported by Alaxala, Alcatel Lucent, Allied Telesis, Arista Networks, Brocade, Cisco, Dell, D-Link, Enterasys, Extreme, Fortinet, Hewlett-Packard, Hitachi, Huawei, IBM, Juniper, LG-Ericsson, Mellanox, MRV, NEC, Netgear, Proxim Wireless, Quanta Computer, Vyatta, ZTE and ZyXEL (<a href=""http://www.sflow.org/products/network.php"">see sFlow link</a>)</p>
","1335"
"What, exactly, is required to make Airplay work across VLANs?","46477","","<p>It seems like AirPlay works out-of-the-box, vaguely speaking, only within a LAN.  It's not clear to me exactly why, but it looks like at least discovery relies on broadcasts.  Wikipedia states that <a href=""https://en.wikipedia.org/wiki/AirPlay"">Airplay is a proprietary protocol</a> which probably explains why the only documentation I've found is unofficial like <a href=""http://nto.github.io/AirPlay.html"">this spec at github</a>.</p>

<p>So, my questions are:</p>

<ol>
<li>Can a network be configured such that Airplay works across VLANs?</li>
<li>If so, what, exactly, must be allowed to pass between the VLANs to make this work?</li>
<li>Is this a bad idea in a production environment given the unavailability of official protocol documentation?</li>
</ol>
","<p>There is two different things in term ""Airplay"".</p>

<p>The first one is about service discovery and it's the way how devices capable of receiving Airplay streams announce to the network ""Hey! I can receive Airplay!"". It's done normally via service called Bonjour (at least Apple calls it so) or <a href=""https://en.wikipedia.org/wiki/Zero-configuration_networking#DNS-based_service_discovery"" rel=""nofollow"">DNS-SD</a>. It's using multicast and that's the point if someone is telling to you that ""Airplay is for local LAN only"" or something. The streaming itself is ""normal"" UDP unicast.</p>

<p>Now the main problem is how you get the info about Airplay receiver to the potential senders in another network. There is two theoretical options:</p>

<ol>
<li><p>You can forward multicast. It might be tricky though, but there are routers/firewalls capable of this. RTFM how exactly, but the idea is that you have to forward multicast traffic with destination address <a href=""https://en.wikipedia.org/wiki/Multicast_address#IPv4"" rel=""nofollow"">224.0.0.251</a> to another network and you have to do it without decrementing TTL.</p></li>
<li><p>Another option is to use unicast DNS-SD. You can use normal DNS to announce the very same info normally distributed automatically via multicast DNS-SD and you can use a little help from dns-sd(1) utility on your MacOSX to get an info what exactly to write into your DNS zone file. Execute this command in the LAN with Airplay receiver and this should give to you all the info you need:</p>

<pre><code>$ dns-sd -Z _airplay._tcp
Browsing for _airplay._tcp
...
</code></pre></li>
<li><p>There is also DNS-SD proxies (for example avahi can be used as such).</p></li>
</ol>

<p>Now, I said ""theoretically"", because I haven't tested it and whatever you do with protocols, forwarding and so on, there MIGHT be some roadblocks beyond your control - it's the Apple after all. You could get all info correctly to the potential sender, but iOS/MacOSX might still reject it because it just doesn't like it for some reason and so on.</p>

<p>There is one more (again theoretical though ;) brute force option - create a DNS-SD entry for your router address as an Airplay receiver for the network with Airplay senders and forward (NAT) the UDP stream to the real Airplay receiver. But even with this there are some possibilities (for Apple engineers) to break it.</p>

<p>Go on, test it and let us know about your results.</p>
","5959"
"What is the actual size of an Ethernet MTU","45592","","<p>I think I might be getting confused with terminology surrounding MTU.</p>

<p>This definition from Wendell Odom's CCNA book on MTU:</p>

<blockquote>
  <p>The IEEE 802.3 specification limits the data portion of the 802.3 frame to a minimum of 46 and a maximum of 1500 bytes. The term maximum
  transmission unit (MTU) defines the maximum layer 3 packet that can be
  sent over a medium. Because the layer 3 packet rests inside the data
  portion of an Ethernet frame, 1500 bytes is the largest IP MTU allowed
  over an Ethernet.</p>
</blockquote>

<p>My understanding, is that an Ethernet frame is the last phase of encapsulation before it gets transmitted to the wire. When I look at a diagram of an Ethernet frame, its total size can equal a maximum of 1526 bytes.</p>

<p>Am I right in saying that an Ethernet frame MTU is 1526 while the MTU at the IP layer is 1500? Does the MTU change at each phase of encapsulation, or is the term ""MTU"" only meant to define the maximum size of a packet at layer 3?</p>

<p>Thanks for any help!</p>
","<blockquote>
  <p>Am I right in saying that an Ethernet frame MTU is 1526 while the MTU
  at the IP layer is 1500? </p>
</blockquote>

<p>The Ethernet MTU is 1500 bytes, meaning the largest IP packet (or some other payload) an Ethernet frame can contain is 1500 bytes. Adding 26 bytes for the Ethernet header results in a <strong>maximum frame</strong> (not the same as MTU) of 1526 bytes.</p>

<blockquote>
  <p>Does the MTU change at each phase of encapsulation, or is the term 
  ""MTU"" only meant to define the maximum size of a packet at layer 3?</p>
</blockquote>

<p>The MTU is often considered a property of a network link, and will generally refer to the layer 2 MTU. The limits at layer 3 are far higher (see below) and cause no issues.</p>

<p>The length of an IP packet (layer 3) is limited by the maximum value of the 16 bit Total Length field in the IP header. For IPv4, this results in a maximum payload size of 65515 (= 2^16 - 1 - 20 bytes header). Because IPv6 has a 40 byte header, it allows for payloads up to 65495. And IIRC using the Jumbo Payload header extension, IPv6 could allow packets up to 4 GB...</p>

<p>When setting up a TCP connection, a Maximum Segment Size (MSS) is agreed upon. This could be considered an MTU at layer 4, but it is not fixed. It is often set to the largest payload that can be sent in a TCP segment without causing fragmentation, thus reflecting the lowest layer 2 MTU on the path. With an ethernet MTU of 1500, this MSS would be 1460 after subtracting 20 bytes for the IPv4 and TCP header.</p>
","5059"
"Why must all areas connect to an Area 0 backbone in OSPF?","45042","","<p><em>This question is a literal repost of the same <a href=""https://supportforums.cisco.com/discussion/11246526/why-area-0-backbone-area-ospfneed-complete-answer"">question</a> asked on <a href=""https://supportforums.cisco.com/discussion/11246526/why-area-0-backbone-area-ospfneed-complete-answer"">The Cisco Support Community</a>.  Answers are unique to Stack Exchange.</em></p>

<p><hr>
Why is area 0 the backbone area in OSPF? Why must all other areas connect to it?  </p>

<p>I have been searching for the right reason why all the areas must be connected to area 0 in OSPF. I have a small idea, but I am not clear with the whole concept.  </p>

<p>If 2 areas aren't connected through area 0 (discontiguous), how does OSPF behaving as a link state protocol increase the possibility of routing loops?</p>
","<h2>OSPF Backbone</h2>

<blockquote>
  <p>Why is area 0 the backbone area in OSPF? Why must all other areas connect to it?</p>
</blockquote>

<p>This is explained very well in <a href=""http://tools.ietf.org/search/rfc3509#section-1.2"" rel=""noreferrer"">RFC 3509, Section 1.2</a><sup>1</sup>:</p>

<blockquote>
  <p><strong>1.2 Motivation</strong></p>
  
  <p>In OSPF domains the area topology is restricted so that there must be
  a backbone area (area 0) and all other areas must have either physical
  or virtual connections to the backbone. The reason for this star-like
  topology is that OSPF inter-area routing uses the distance-vector
  approach and a strict area hierarchy permits avoidance of the
  ""counting to infinity"" problem. OSPF prevents inter-area routing loops
  by implementing a split-horizon mechanism, allowing ABRs to inject
  into the backbone only Summary-LSAs derived from the intra-area
  routes, and limiting ABRs' SPF calculation to consider only
  Summary-LSAs in the backbone area's link-state database.</p>
</blockquote>

<p>OSPF is usually considered a <a href=""http://en.wikipedia.org/wiki/Link-state_routing_protocol"" rel=""noreferrer"">link-state protocol</a>.  What some people miss is that OSPF uses <em>both</em> <a href=""http://en.wikipedia.org/wiki/Link-state_routing_protocol"" rel=""noreferrer"">link-state protocol</a> and <a href=""http://en.wikipedia.org/wiki/Distance-vector_routing_protocol"" rel=""noreferrer"">distance-vector protocol</a> algorithms.</p>

<ul>
<li>Routes within the backbone, or a non-backbone area are computed as a <a href=""http://en.wikipedia.org/wiki/Link-state_routing_protocol"" rel=""noreferrer"">link-state protocol</a> does (ref <a href=""http://en.wikipedia.org/wiki/Dijkstra&#39;s_algorithm"" rel=""noreferrer"">Dijkstra's algorithm</a>).</li>
<li>When OSPF must carry non-backbone routes through the backbone, it uses some distance-vector behavior (i.e. parts of the <a href=""http://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm"" rel=""noreferrer"">Bellman Ford algorithm</a>) to propagate Type3 LSA metrics into non-backbone areas.</li>
</ul>

<p>Simple example of OSPF's <a href=""http://en.wikipedia.org/wiki/Distance-vector_routing_protocol"" rel=""noreferrer"">distance-vector</a> behavior:</p>

<pre><code>&lt;-- Area 5 --&gt;&lt;-- Area 0 --&gt;&lt;--           Area 4           --&gt;

R5-----------R1-----------R2------------R3---------------------R4
     Cost 3      Cost 5        Cost 7            Cost 12

               LSA--&gt;          LSA--&gt;
               Type3 LSA       Type3 LSA
               {From R1}       {From R2}
               R5 cost is 3    R5 cost is 8
</code></pre>

<p>Consider what happens to a /32 Loopback route for R5.</p>

<ol>
<li>R5 sends a Type1 LSA containing the /32 Loopback</li>
<li>R1 (Area 5 ABR), is connected to Area 0; it translates the Type1 LSA into a Type3 LSA with a cost of 3.</li>
<li>R2 (Area 4 ABR) receives R1's Type3 LSA (metric 3) and <em>changes the metric to R5's Loopback, based on R2's cost to R1</em>.  Now R2's Type3 LSA for R5 has a cost of 8.  This is the <a href=""http://en.wikipedia.org/wiki/Distance-vector_routing_protocol"" rel=""noreferrer"">distance-vector</a> behavior I mentioned above.</li>
</ol>

<p>Requiring all non-backbone routes to go through the backbone is a loop-prevention mechanism.</p>

<h2>Connecting non-backbone OSPF areas at an ABR</h2>

<blockquote>
  <p>If 2 areas aren't connected through area 0 (discontiguous), how does OSPF behaving as a link state protocol increase the possibility of routing loops?</p>
</blockquote>

<p>As we saw above, OSPF uses <a href=""http://en.wikipedia.org/wiki/Distance-vector_routing_protocol"" rel=""noreferrer"">distance-vector</a> behavior to send routes through the Area 0 backbone.  Distance-vector protocols have well-known limits, such as the <a href=""http://en.wikipedia.org/wiki/Distance-vector_routing_protocol#Count-to-infinity_problem"" rel=""noreferrer"">count-to-infinity problem</a>.  OSPF would be vulnerable to the same issues, if we didn't have boundaries on its behavior.</p>

<hr>

<p><sup>1</sup><sub>RFC 3509 describes Cisco IOS's ABR behavior</sub></p>
","6333"
"Switchport mode access VLAN & switchport mode trunk on one interface","41584","","<p>Googling around to see if this setup on one port is correct (it doesn't look right to me), I'm not really seeing a straightforward answer. </p>

<p>There is an interface with the following configuration:</p>

<pre><code>!
interface GigabitEthernet1/0/3
 description Uplink to Server Room
 switchport access vlan 100
 switchport mode trunk
!
</code></pre>

<p>That's been like that for some time, and no issues that I know of. The question is, if the port is in trunk mode as opposed to access mode, then does the <code>switchport access vlan</code> do anything at all?? Can it be safely removed without screwing up something else? What possible reason could those two commands be there in the first place for??</p>
","<p>No this isn't doing anything.  When the port is in trunk mode, then any ""switchport access"" statements are not used.  The same is true with a port in access mode with any ""switchport trunk"" statements.</p>

<p>In this case, you should be able to safely remove it.</p>

<p>The purpose for this is usually in the use of DTP (dynamic trunking protocol).  So you <em>could</em> configure a port as both a trunk (with ""switchport trunk"" statements) and an access port (with ""switchport access"" statements).  When the link negotiates as a trunk, it will have the correct trunk configuration and if it doesn't negotiate as a trunk, it will have the correct access configuration.</p>

<p>When DTP is not used, there is little point to it.  I personally have this configured on some of my lab ports, so I can just switch the switchport mode depending on what I am conneting on the ports.</p>

<p>Often in the wild, I have found this type of configuration where devices are staged using access ports and then never cleaned up when it is configured to use a trunk port when deployed.</p>
","7952"
"Cisco command to show which interfaces an ACL is applied to","41207","","<p>For Cisco routers and switches, is there a show command, or something similar, that will display what physical and logical interfaces an ACL is implemented on and what direction it is applied in?</p>

<p>I am looking for something simpler than a <code>show run | &lt;some regex&gt;</code>.</p>
","<p>I don't believe that there is anything simpler than <code>show interfaces | &lt;some regex&gt;</code> unfortunately.</p>

<p><strong>Edit:</strong></p>

<p>From the comments below, @<a href=""https://networkengineering.stackexchange.com/users/460/santino"">Santino</a> pointed out a more concise RegEx:</p>

<pre><code>show ip interface | include line protocol|access list
</code></pre>

<p>My testing so far indicates that this gives the same results as my longer RegEx below.</p>

<hr>

<p>I usually use the following to find where ACLs are applied:</p>

<pre><code>show ip interface | include is up|is administratively|is down|Outgoing|Inbound
</code></pre>

<p>This gives you every interface, no matter the state, then what the Outbound and Inbound ACL's are.  For example:</p>

<pre><code>LAB-4510-A#show ip interface | include is up|is administratively|is down|Outgoing|Inbound 
Vlan1 is administratively down, line protocol is down
Vlan110 is up, line protocol is up
  Outgoing access list is not set
  Inbound  access list is VENDOR-&gt;INTERNET
Vlan140 is administratively down, line protocol is down
  Outgoing access list is not set
  Inbound  access list is not set
Vlan150 is down, line protocol is down
  Outgoing access list is not set
  Inbound  access list is VENDOR-&gt;INTERNET
Vlan210 is up, line protocol is up
  Outgoing access list is not set
  Inbound  access list is not set
FastEthernet1 is administratively down, line protocol is down
  Outgoing access list is not set
  Inbound  access list is not set
GigabitEthernet1/1 is up, line protocol is up
  Outgoing access list is not set
  Inbound  access list is not set
GigabitEthernet1/2 is down, line protocol is down
  Inbound  access list is not set
  Outgoing access list is not set
</code></pre>

<p>And so on for every interface.</p>

<hr>

<p>This command works on both Cisco switches and routers.  See sample output from a 7200 Router below:</p>

<pre><code>LAB-7204-A#show ip interface | include is up|is administratively|is down|Outgoing|Inbound
GigabitEthernet0/1 is up, line protocol is up
  Outgoing access list is not set
  Inbound  access list is not set
FastEthernet0/2 is administratively down, line protocol is down
GigabitEthernet0/2 is up, line protocol is up
  Outgoing access list is not set
  Inbound  access list is not set
GigabitEthernet0/3 is administratively down, line protocol is down
SSLVPN-VIF0 is up, line protocol is up
  Outgoing access list is not set
  Inbound  access list is not set
Loopback0 is up, line protocol is up
  Outgoing access list is not set
  Inbound  access list is not set
Loopback1 is up, line protocol is up
  Outgoing access list is not set
  Inbound  access list is not set
</code></pre>
","2536"
"Confusing A, B, C network classes","40067","","<p>I'm studying IPv4 addresses and came across this whole thing about classful addressing. I get the idea behind it, bit there is something I find confusing:</p>

<p><em><strong>There are two ""ABC"" ranges:</em></strong></p>

<h3>First one:</h3>

<p>A: 1.0.0.0 to 126.0.0.0       with /8 <br>
B: 128.0.0.0 to 191.255.0.0   with /16 <br>
C: 192.0.0.0 to 223.255.255.0 with /24<br></p>

<h3>Second one:</h3>

<p>A: 10.0.0.0 to 10.255.255.255     with /8 <br>
B: 172.16.0.0 to 172.31.255.255   with /12 <br>
C: 192.168.0.0 to 192.168.255.255 with /16</p>

<p>Why are both of these using the names A, B and C? They are not even using the same sets of subnet-masks! Is the first one only for public addresses? Because the second one is only private addresses.</p>

<p>Help appreciated!</p>
","<p>It's likely that the subnet masks are throwing you off. As long as you keep in mind that the below rules no longer apply, you should be fine.</p>

<p>Ultimately classful addressing came down to the most significant (or ""leading"") bits in the address. Nothing more, nothing less.</p>

<ul>
<li>Class A: Most significant bits starts with <code>0</code></li>
<li>Class B: Most significant bits start with <code>10</code></li>
<li>Class C: Most significant bits start with <code>110</code></li>
</ul>

<p>The ""classes"" came from the way they split up the address space for use between ""host"" and ""network"". Keep in mind that back then (way way back, from the days of ARPANET), <strong><em>subnet masks did not exist</em></strong>, and the network was intended to be inferred from the address itself. So, with the above in mind, this is what they came up with (this is intended to be binary representation - each <code>N</code> or <code>H</code> represents a single bit in the 32-bit address):</p>

<ul>
<li>Class A: <code>NNNNNNNN.HHHHHHHH.HHHHHHHH.HHHHHHHH</code> (less networks, more hosts)</li>
<li>Class B: <code>NNNNNNNN.NNNNNNNN.HHHHHHHH.HHHHHHHH</code> (more networks, less hosts)</li>
<li>Class C: <code>NNNNNNNN.NNNNNNNN.NNNNNNNN.HHHHHHHH</code> (even more networks, even less hosts)</li>
</ul>

<p>Here the <code>N</code> is representative of the network portion of the address, and the <code>H</code> is representative of the host portion of the address, or as they called it back in the day, the ""rest field.""</p>

<p>Combining that with what was said earlier about the most-significant bits, we have the following:</p>

<ul>
<li>Class A: 0.0.0.0 - 127.255.255.255</li>
<li>Class B: 128.0.0.0 - 191.255.255.255</li>
<li>Class C: 192.0.0.0 - 223.255.255.255</li>
</ul>

<p>Converting those ranges to binary may make this more clear:</p>

<h2>Class A</h2>

<pre><code>0.0.0.0
-----------
[0]0000000.00000000.00000000.00000000

127.255.255.255
-----------
[0]1111111.11111111.11111111.11111111
 ^
 most significant bit = 0
</code></pre>

<h2>Class B</h2>

<pre><code>128.0.0.0
-----------
[10]000000.00000000.00000000.00000000

191.255.255.255
-----------
[10]111111.11111111.11111111.11111111
 ^
 most significant bits = 10
</code></pre>

<h2>Class C</h2>

<pre><code>192.0.0.0
-----------
[110]00000.00000000.00000000.00000000

223.255.255.255
-----------
[110]11111.11111111.11111111.11111111
 ^
 most significant bits = 110
</code></pre>

<p>Every single address within those ranges will share a common leading bit(s). The moral of the story is, if you can remember what the leading bits are supposed to be (0 for class A, 10 for class B, 110 for class C) it's extremely simple to determine what ""class"" an address would have otherwise belonged in. Or, if decimal is easier:</p>

<ul>
<li>Class A: First octet in address is between 0 and 127, inclusive</li>
<li>Class B: First octet in address is between 128 and 191, inclusive</li>
<li>Class C: First octet in address is between 192 and 223, inclusive</li>
</ul>

<p>The easiest way to mess someone up on ""classful addressing"" either on a test, or exam, or whatever, is to use misdirection by way of a subnet mask. Again, remember that the subnet mask does not apply for determining the class of an address. This is easy to forget because as others have said, classless addressing and routing have been around for over two decades now, and the subnet mask and CIDR notation have become ubiquitous in the industry.</p>
","6502"
"Does having a longer Ethernet cable slow your connection?","38171","","<p>As the title suggests, Does a longer Ethernet cable slow your connection down?</p>
","<p>The electric signal will be slowed down by a minimal amount (afterall it travels almost at light speed, exactly at 0,951c), how much time does light take to travel for 100 meters?</p>

<pre><code>timeTaken  = 100/(299792458*0,951) = 0,00000035 seconds
</code></pre>

<p>So it just takes an extra 0,00035 milliseconds which is just 350 CPU cycles (on a 1 Ghz CPU).
However the longer the cable the weaker the signal becomes, once the signal is weak enough it will starts to lose bits of information because of interferences, each time a bit is loss, something in the network layer sees that a checksum/parity check fails, and ask for that packet again.</p>

<p>Asking for a new packet will take a very long time.</p>

<p>So as long as signal is strong in the cable, <strong>the slowdown would be minimal</strong> (it is greater than I expected anyway).</p>

<p>Once you start losing information because cable too long, <strong>the slowdown would greatly increase</strong>.</p>

<p>Also note that certain communications protocols are timed, so if the cable is too long it may not even be usable because it would go out of sync (that's a by-design issue)</p>
","34125"
"Using Sonicwall to route between subnets","37623","","<p>I am trying to create a separate subnet, which is isolated from my LAN subnet. I want some controlled traffic flow between these subnets. I hope to control it using the Sonicwall firewall rules. But here is the thing, I want the machines to see each other directly, if allowed through the rules. What I mean is I want no NAT translation.</p>

<p>LAN_1: 172.16.1.0
LAN_2: 192.168.1.0</p>

<p>LAN_1 is the default LAN, the SonicWall LAN IP is 172.16.1.1</p>

<p>The SonicWall has 5 interfaces. X0 is LAN interface (LAN_1) and X1 is WAN.</p>

<p>I am wondering about how to setup LAN_2. Do I buy separate router, or can SonicWall give me this routing ability, if I define one of the available interfaces (X2,X3,X4) for connecting LAN_2? </p>

<p>Keep in mind I am no network engineer, but I am often forced to play that role.</p>
","<blockquote>
  <p>What I mean is I want no NAT translation.</p>
</blockquote>

<p>That is the default behaviour.  Adding NAT translation between neighboring subnets would not be an <em>'enabled by default'</em> feature.  Simply adding those subnets into your SonicWall would allow them to communicate as long as your hosts are pointing to it as a default gateway.</p>

<blockquote>
  <p>I am wondering about how to setup LAN_2. Do I buy separate router, or
  can SonicWall give me this routing ability, if I define one of the
  available interfaces (X2,X3,X4) for connecting LAN_2?</p>
</blockquote>

<p>SonicWall will give you that capability without the need for any additional routers.  You may need more switches to deal with the additional hosts on your second subnet (LAN_2).</p>

<p>You're on the right track with the interfaces.  Use any of the additional interfaces you have.  Logically, your setup should look like this in the end.</p>

<pre><code>               +-----------+ X0 ---- 172.16.1.1/24
WAN_IP ---- X1 | SonicWall | 
               +-----------+ X2 ---- 192.168.1.1/24
</code></pre>

<p>In this instance, <code>X0</code> and <code>X2</code> will be able to communicate.</p>
","14675"
"How can I force VTP clients to update their VLAN database from the VTP server, on Cisco devices?","37423","","<p>I was doing some cisco exercises on configuring a vtp server and client, something I can't figure out is :</p>

<ul>
<li><p>I setup a vtp server, added my VLAN's</p></li>
<li><p>I then took another switch that was attached to this vtp server and<br>
set it to client</p></li>
<li>Now my VTP client didn't get the vlans configured on the vtp server,
however when I added another vlan on my server, suddenly they were
all there</li>
</ul>

<p>Is there a way to push the configs, like a force update command ?</p>
","<p>You can't manually force updates because VTP configs are pushed based on the highest current VLAN database revision number. Normally, after every change to your VTP config the configuration revision number should be incremented. The only way to force update this is by actually doing a VTP database change.</p>
","17"
"Why use iBGP inside an Autonomous System, if IGP protocols fulfill the need for internal communication","37122","","<p>Can anyone explain why we need iBGP for the routes, when we have the IGP protocols (OSPF, RIP) for internal communication?</p>

<p>I have read a lot of articles and books, but I could not find the answer.</p>
","<blockquote>
  <p>Can anyone explain me what is the need of IBGP communication for the routes, when we have the IGP protocols (OSPF, RIP) for internal communication?</p>
</blockquote>

<ul>
<li>Scalability<sup>1</sup>: Imagine that you're receiving 500,000 EBGP routes in more than one location<sup>2</sup>, and you need to influence the per route exit point in your AS.  BGP can handle many more routes than IGP protocols. Thus, iBGP is required unless you're willing to redistribute all the routes you've learned via eBGP</li>
<li><p>Enforce boundaries of trust / control: BGP has many more knobs than IGPs for controlling what you advertise and receive.</p></li>
<li><p>Flexible tools: <a href=""http://www.cisco.com/en/US/tech/tk365/technologies_configuration_example09186a00801475b2.shtml"">BGP communities</a>, <a href=""http://tools.ietf.org/html/rfc4360"">BGP Extended communities</a>, <a href=""http://bgpconcepts.blogspot.com/2008/11/bgp-local-preference-attribute.html"">local-pref</a>, etc... these make BGP an attractive way to implement custom routing policies within your own autonomous system (by using iBGP).</p></li>
</ul>

<p>As with everything... the scalability, control, and flexibility you get from iBGP means that it's a slower converging protocol than IGPs (in general). </p>

<hr>

<h3>End Notes:</h3>

<p><sup>1</sup> <em>Scalability</em>:</p>

<ul>
<li>You use BGP because you don't want to carry your entire internet routing table in your IGP (i.e. in my case, OSPF)...</li>
<li>OSPF was not designed to handle many thousands of routes in internet BGP tables... if you try to use OSPF for this purpose, it will break your network.  Using the example of OSPF, the LSA processing / flooding requirements from 500,000 routes uses too many resources in your routers.  Name any other IGP (EIGRP, RIPv1/2, IS-IS, IGRP) and the same story is true.</li>
<li>There have been some notorious instances where a Tier-1 ISP accidentally redistributed their BGP table into their IGP (even when the internet table was a small fraction of its current size) and it caused major outages.  Countermeasures have now been implemented in IGP protocols (<a href=""http://www.cisco.com/en/US/docs/ios/12_0s/feature/guide/fsoredis.html"">like this one for OSPF in IOS</a>) to prevent redistribution from BGP into OSPF from causing a major outage.</li>
</ul>

<p><sup>2</sup> <em>iBGP routing example</em>:</p>

<p>To understand why you might want iBGP, consider this routing entry to 4.2.2.2...</p>

<pre><code>R2&gt;sh ip bgp 4.2.2.2
BGP routing table entry for 4.0.0.0/9, version 3146
Paths: (32 available, best #7, table Default-IP-Routing-Table)
... &lt;!-- extra BGP RIB entries deleted --&gt;
  7660 2516 3356, (aggregated by 3356 4.69.130.4)
    203.181.248.168 from 203.181.248.168 (203.181.248.168)
      Origin IGP, localpref 100, valid, internal, atomic-aggregate
      Community: 2516:1030
  3356, (aggregated by 3356 4.69.130.6)
    4.69.184.193 from 4.69.184.193 (4.69.184.193)
      Origin IGP, metric 0, localpref 100, valid, internal, atomic-aggregate, best
      Community: 3356:0 3356:3 3356:100 3356:123 3356:575 3356:2012
... &lt;!-- extra BGP RIB entries deleted --&gt;
</code></pre>

<p>There are 32 paths to consider... In this case, BGP chose to go to 4.0.0.0/9 via 4.69.184.193 (notice the <code>best</code> under the RIB entry).  In this case, BGP chose this because this route has the shortest AS Path list.  However, not all routes will be preferred via AS3356 (attached to R1).  Some may be preferred out R3 (via AS7660).  iBGP gives you the ability to know (at R2) which way to go to take the shortest BGP path.</p>

<pre><code>BGP route to 4.0.0.0/9 via                                              
NH: 4.69.184.193 [Path: 3356]                                  
  --------&gt;                                                     

 eBGP w/ AS3356 }{              iBGP inside AS64000          }{   eBGP w/ AS7660

                 S1/0       S1/2   S2/1     S2/3   S3/2    S3/0
Peered w/ AS3356    +------+         +------+        +------+       Peered w/ AS7660
4.69.184.193 &lt;------|  R1  |---------|  R2  |--------|  R3  |-----&gt; 203.181.248.168
                    +------+         +------+        +------+
                                         | S2/0
                                         |

                                         ^
                                         ^
                                         | Ingress packet to 4.2.2.2
                                         |
</code></pre>

<p>R1, R2 and R3 are fully-iBGP meshed.  When iBGP advertises a route, the next-hop remains <em>unchanged</em>.  This means I need to carry the subnet for 4.69.184.193 in OSPF...</p>

<pre><code>R2&gt;sh ip route 4.69.184.193
Routing entry for 4.69.184.192/30
  Known via ""ospf 100"", distance 110, metric 65536, type intra area
  Last update from 192.0.2.109 on GigabitEthernet3/1, 1w0d ago
  Routing Descriptor Blocks:
  * 192.0.2.109, from 192.0.2.3, 1w0d ago, via Serial2/1
      Route metric is 65536, traffic share count is 1

R2&gt;
</code></pre>

<p>Thus when a packet for 4.2.2.2 arrives at R2, R2 sends it out Serial2/1 because that's where iBGP tells us the next-hop is.</p>
","4910"
"Intervlan routing using two Layer 3 Switches in Packet Tracer","36199","","<p>I am having trouble when I am using two Layer 3 switches and two PCs to create a simple network for Inter Vlan routing,</p>

<p>First of all have a look at this network,</p>

<p>The configuration for PC1 is,</p>

<pre><code>IP: 192.168.10.1
Default Gateway: 192.168.10.254
Subnet: 255.255.255.0
</code></pre>

<p>Similarly for PC2,</p>

<pre><code>IP: 192.168.20.1
Default Gateway: 192.168.20.254
Subnet: 255.255.255.0
</code></pre>

<p><img src=""https://i.stack.imgur.com/1UDRk.png"" alt=""enter image description here""></p>

<p>Now for the left Switch, I set the <code>Fa0/1</code> to <code>trunk</code> mode, and enabled created a <code>Vlan 10</code> and moved the Pc1 to that Vlan,</p>

<pre><code>Switch(config)#vlan 10
Switch(config-vlan)#name forPC1
Switch(config-vlan)#exit

Switch(config)#interface vlan 10


Switch(config-if)#ip address 192.168.10.254 255.255.255.0
Switch(config-if)#exit

Switch(config)#ip routing

Switch(config)#interface fastEthernet 0/24

Switch(config-if)#switchport mode access 

Switch(config-if)#switchport access vlan 10


Switch(config)#interface fastEthernet 0/1
Switch(config-if)#switchport trunk encapsulation dot1q 

Switch(config-if)#switchport mode trunk 
</code></pre>

<p>and Similarly, I have done the following configuration for the right switch,</p>

<pre><code>Switch(config)#vlan 20
Switch(config-vlan)#name PC2
Switch(config-vlan)#exit

Switch(config)#interface vlan 20

Switch(config-if)#ip address 192.168.20.254 255.255.255.0
Switch(config-if)#exit

Switch(config)#ip routing 
Switch(config)#interface fastEthernet 0/1
Switch(config-if)#switchport trunk encapsulation dot1q 
Switch(config-if)#switchport mode trunk 
Switch(config-if)#exit


Switch(config)#interface fastEthernet 0/24

Switch(config-if)#switchport mode access 
Switch(config-if)#switchport access vlan 20
Switch(config-if)#exit
</code></pre>

<p>I have tried so many things. before i was not enable <code>ip routing</code> but even after using <code>ip routing</code> command i couldn't be able to ping <code>PC1</code> from <code>PC2</code></p>

<p>I have correctly set the trunk port also, then what is the issue ?</p>
","<p>To allow VLAN routing four things are neccessary:</p>

<ul>
<li>The VLANs you want to route must exist on all switches.</li>
<li>The VLANs must be allowed on the trunk between the switches.</li>
<li>Interface IPs for each VLAN must be assigned.</li>
<li>IP routing enabled.</li>
</ul>

<p>In your case you need to add the following lines to your config:</p>

<p>Switch7:</p>

<pre><code>Switch(config)#vlan 20
Switch(config-vlan)#name PC2
Switch(config-vlan)#exit
</code></pre>

<p>Switch8:</p>

<pre><code>Switch(config)#vlan 10
Switch(config-vlan)#name forPC1
Switch(config-vlan)#exit
</code></pre>

<p>It is not neccessary to have the same names of the VLANs on both switches but it's a good practice to keep in consistent.</p>

<p>To verify that the VLANs are created on both switches you can issue the following command from Privileged EXEC:</p>

<pre><code>Switch#show vlan brief
</code></pre>

<p>and it should list both VLAN 10 and VLAN 20.</p>

<p>Regarding the other condition it should be said that the default is to allow all vlans on the trunk, but to verify that it is indeed allowed you can issue the command:</p>

<pre><code>Switch#show interfaces fastEthernet 0/1 trunk
</code></pre>

<p>and you should see vlan 10 and 20 listed under ""Vlans allowed and active in management domain"" aswell as ""Vlans in spanning tree forwarding state and not pruned"". 
If it is not listed under the latter one you need to check your spanning-tree configuration but that should not be a problem in this case.</p>
","17972"
"What's the difference between IKE and ISAKMP?","36172","","<p>I've been building IPsec VPNs for years but to be honest I've never fully grasped the technical difference between IKE and ISAKMP. I often see the two terms used interchangeably (probably incorrectly).</p>

<p>I understand the two basic phases of IPsec and that ISAKMP seems to deal primarily with phase one. For instance, the IOS command ""show crypto isakmp sa"" displays IPsec phase one information. But there's no equivalent command for IKE.</p>
","<p>ISAKMP is part of IKE. (IKE has ISAKMP, SKEME and OAKLEY). IKE establishs the shared security policy and authenticated keys. ISAKMP is the protocol that specifies the mechanics of the key exchange.</p>

<p>The confusion, (for me,) is that in the Cisco IOS ISAKMP/IKE are used to refer to the same thing. By which I mean, my understanding is that Cisco's IKE only implements/uses ISAKMP. So one configures IKE, and then conceptually inside that, one configures ISAKMP.</p>
","2"
"Difference between CRC and input errors - show interface","36171","","<p>The command ""show interface fa0/1"" prints the following output:
<br><br></p>

<p><img src=""https://i.stack.imgur.com/ANMwL.gif"" alt=""enter image description here"">
<br><br>What is the difference between ""CRC"" and ""input errors""? CRC errors confirms that a frame error has occured, but what about ""input errors""?</p>
","<p>The ""input errors"" counter will increment whenever the interface receives a frame with any sort of input error, which includes CRC among other types of errors.  Each frame is only counted once, no matter how many types of specific errors it contains.</p>

<p>You can see an example of this if you check <a href=""https://networkengineering.stackexchange.com/q/14688/33"">this recent question</a> which also has input errors.</p>
","14728"
"4 Wire (as compared to 8 wire) LAN connections and Bandwidth Loss when Splitting Ethernet?","36015","","<p>This is my first time here, and if this isn't the right place for this question, my apologies. Please direct me to the right place.</p>

<p>In order to get a wired LAN connection to a desktop computer and a printer using the one Ethernet jack available in that room (due to home wiring), I am interested in ""splitting"" the RJ45's cable into two different ""lines"" using <a href=""http://rads.stackoverflow.com/amzn/click/B000Q5UMEI"" rel=""nofollow"">this splitter on Amazon</a>. Many people (and apparently the maker of this adapter) seem to believe you can functionally use only 4 wires inside a RJ45 cable to sustain a reliable LAN connection, which would allow you to use one RJ45 cable to be used as ""two"" cables using this adapter. My understanding is you use two Ethernet patch cables to go from two ports on a router into this adapter which uses 4 wires of the 8 wire total RJ45 cable for each connection, and then put the same adapter on the other end of the line and ""split"" the signals back out into two RJ45 jacks on the adapter so two Ethernet devices can plug in.</p>

<p>Or at least that's what I <em>think</em>.</p>

<p>First off, is my idealism <em>valid</em>, or is this actually nothing but a signal combiner? Can you indeed establish an Ethernet LAN connection using 4 wires of a RJ45 cable instead of 8?</p>

<p>Secondly, if this is possible, how much network performance would the devices lose due to less copper as compared to a dedicated Ethernet cable? In my case, I am running a 50' run, which (I think) is a decent amount of cable, but isn't a <em>stretch</em> to the 100 meter standard.</p>
","<p>10 and 100 need only 2 pairs (pins 1-2-3-6) Gig needs all 4.</p>

<p>This adapter brings 4-5-7-8 to the second port's 1-2-3-6.  This is, technically, a spec violation, but over short distances, it does work.</p>

<p>(it's just like a line-1, line-2 phone splitter.)</p>
","5336"
"Does a traceroute/tracert show every hop, or does it skip/hide some details of the path?","35128","","<p>I am currently in college for a bachelor's degree in Network Engineering, and one of my Professors explained in class that a traceroute that shows, for example, 15 hops is actually abstracting the path, and in reality many more nodes are involved. Is this true?</p>

<p>This contradicts everything I can find on traceroute. To my knowledge, traceroute works by sending ICMP (or UDP) packets to a specific destination with a TTL from 0 --> n until the destination is reached. The probe packets that are sent out time out at each location along the way in succession, producing an ICMP ""time exceeded"" reply, and finally a ""port unreachable"" message when reaching the destination.</p>

<p>I understand the imperfections of traceroute - for example, traceroute traffic may be blocked by certain gateways, or the TTL of the reply packet may be set to the probe's remaining TTL, causing it to never return to the sender.</p>

<p>However, after a lot of researching, I can't find anything referencing traceroute being inaccurate in the case of a traceroute that always returns the same path. Likewise, nothing referencing there being any ""extra"" hops not reported by traceroute (other than * * * hops that timed out with no reply).</p>

<p>I'm open to discussion, and I'm genuinely interested to know the answer to this.</p>
","<p>A traceroute will show you how many layer3 hops you are getting to from A to B.</p>

<p>However you could be going through hundreds of switches inbetween. You could also be going through 10 ISP routers running a layer 2 vpn which appears as a single hop. An MPLS network could hide its internals, or show its internals to you. You could have transparent firewalls in the path as well.</p>

<p>Either way your Professor is correct in saying that your cannot guarantee that every single device in the path will count as a hop to you. Because of the above points I mentioned, you could be going through 50 devices but it could look like three to you. </p>

<p>It doesn't happen all the time though. If you see 15 hops it very well could be 15 hops. </p>

<p>This is a basic example of an MPLS set up in regards to TTL: <a href=""http://www.juniper.net/techpubs/en_US/junos13.2/topics/reference/configuration-statement/no-propagate-ttl-edit-protocols-mpls.html"">http://www.juniper.net/techpubs/en_US/junos13.2/topics/reference/configuration-statement/no-propagate-ttl-edit-protocols-mpls.html</a></p>
","5008"
"Why is 4096 the max value for VLANs","34685","","<p>The Tag Protocol Identifier is set to 16 bits.
In the CCNA certification it is said that it's not possible to have more than 4096 VLANs.
4096 in binary is 1000000000000000.
Since 16 bits are allocated anyway, the limit could be 65535(1111111111111111)...</p>

<p>Why is that limit set to 4096?</p>
","<p>Only 12 bits are used for VLANs in 802.1q, so you can only use VLANs from 0-4095 (=4096* different VLANs).</p>

<p>*actually 2 less, 0 and 4095 are reserved</p>

<p><a href=""http://en.wikipedia.org/wiki/IEEE_802.1Q#Frame_format"">http://en.wikipedia.org/wiki/IEEE_802.1Q#Frame_format</a></p>

<p>PS:</p>

<pre><code>4096(DEC) is 1000000000000(BIN)
4095(DEC) is  111111111111(BIN)
</code></pre>
","3483"
"What is the meaning of the CRC counter on a cisco device?","34650","","<p>If the CRC counter of an interface is high, normally it's a bad sign, but why?</p>

<ul>
<li>If the count is high, what does this mean technically? </li>
<li>What can cause this counter to go up? </li>
<li>On which layer in the OSI model will this counter react?</li>
</ul>
","<p>The counter is increasing because your frames are being corrupted.</p>

<p><a href=""https://en.wikipedia.org/wiki/Cyclic_redundancy_check"">CRC</a> is a polynomial function on the frame which returns a 4B number in Ethernet. It will catch <em>all</em> single bit errors and a good percentage of double bit errors. It is thus meant to ensure that the frame was not corrupted in transit. If your CRC error counter is increasing it means that when your hardware ran the polynomial function on the frame, the result was a 4B number which differed from the 4B number found on the frame itself.</p>

<p>Ethernet frame CRC (FCS) is usually understood to be on OSI layer 2, many people claim it is layer 1 on Ethernet, but that is incorrect (only preamble, SFD and IFG are layer 1 on Ethernet).</p>

<p>I recommend a book called <a href=""http://rads.stackoverflow.com/amzn/click/B004VF6216"">Computer Networks - A systems approach</a> on this and many other subjects. It discusses CRC in-depth around page 92 through 102.</p>

<p>As Daniel pointed out, frames can get corrupted due to several reasons such as: duplex mismatch, faulty cabling and broken hardware. However, some level of CRC errors should be expected and the standard allows up-to 10<sup>-12</sup> bit-error-rate on Ethernet (1 bit out of 10<sup>12</sup> can flip) and it's acceptable according to the standard. </p>

<p>In copper the signal travels by transferring state between electrons (electrons themselves are not traveling very much) and in fiber the signal travels by the photons reflecting off the walls of the fiber. There is a non-zero chance that the photon will simply change due to heat on the walls or the state of the electrons will flip itself.  So even in perfect situations some errors will always happen.  It should be known that a bit is not a single photon or single state change of an electron; today you need many photons or electron state changes to express a single bit, so a single incorrect 'state' will not yield an error as a bit is the average state of many of these.</p>
","1469"
"SFP+ complains threshold violation and went down","34516","","<p>All,</p>

<p>Recently bought 3 Cisco switches: 3560x and two 2960Xs. 3560 acting as the core switch and other 2 switches are connected using SFP+ (One SFP-H10GB-CU1M and other SFP-10G-SR)</p>

<p>I have issue with the SFP-10G-SR. </p>

<p>I connected the SFP-10G-SRs with an 50m OM3 cable. It worked initially, however the log always have:</p>

<pre><code>026123: Jun 12 20:42:02.573: %SFF8472-5-THRESHOLD_VIOLATION: Te1/2: Rx power high warning; Operating value:  -0.9 dBm, Threshold value:  -1.0 dBm.
026124: Jun 12 20:48:35.730: %SFF8472-5-THRESHOLD_VIOLATION: Te1/2: Rx power high warning; Operating value:  -0.9 dBm, Threshold value:  -1.0 dBm.
</code></pre>

<p>In one incident, I noticed the SFP port SFP-10G-SR went down. I was playing on that so I didn't care and I simply rebooted the switches and it all came back.</p>

<p>Today, the SFP ports will not come up anymore. I'm in production, so I tried to change the Fibre and I tried to change SFP+ modules. No luck</p>

<p>show inventory</p>

<pre><code>NAME: ""TenGigabitEthernet1/2"", DESCR: ""SFP-10GBase-SR""
PID: SFP-10G-SR          , VID: V03  , SN: FNS16481363
</code></pre>

<p>show int te1/2</p>

<pre><code>    TenGigabitEthernet1/2 is down, line protocol is down (notconnect) 
  Hardware is Ten Gigabit Ethernet, address is 24e9.b3e3.a29e (bia 24e9.b3e3.a29e)
  Description: NGPSW03 Trunk
  MTU 1500 bytes, BW 10000000 Kbit/sec, DLY 10 usec, 
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation ARPA, loopback not set
  Keepalive not set
  Full-duplex, 10Gb/s, link type is auto, media type is SFP-10GBase-SR
  input flow-control is off, output flow-control is unsupported 
  ARP type: ARPA, ARP Timeout 04:00:00
  Last input 6d09h, output 6d09h, output hang never
  Last clearing of ""show interface"" counters never
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 0
  Queueing strategy: fifo
  Output queue: 0/40 (size/max)
  5 minute input rate 0 bits/sec, 0 packets/sec
  5 minute output rate 0 bits/sec, 0 packets/sec
     1119868 packets input, 124583435 bytes, 0 no buffer
     Received 302202 broadcasts (301488 multicasts)
     0 runts, 0 giants, 0 throttles
     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored
     0 watchdog, 301488 multicast, 0 pause input
     0 input packets with dribble condition detected
     48617012 packets output, 4642677414 bytes, 0 underruns
     0 output errors, 0 collisions, 3 interface resets
     1 unknown protocol drops
     0 babbles, 0 late collision, 0 deferred
     0 lost carrier, 0 no carrier, 0 pause output
     0 output buffer failures, 0 output buffers swapped out
</code></pre>

<p>Model/Version:</p>

<pre><code>Switch Ports Model              SW Version            SW Image                 
------ ----- -----              ----------            ----------               
*    1 30    WS-C3560X-24       15.0(2)SE6            C3560E-IPBASEK9-M
</code></pre>

<p>Any help appreciated.</p>

<p><strong>Update</strong><br>
I tried relocating the Cable+SFP from Te1/2 to Te1/1, now the Warning is reverse.</p>

<pre><code>SFF8472-5-THRESHOLD_VIOLATION: Te1/1: Rx power low warning; Operating value: -13.8 dBm, Threshold value: -13.0 dBm.
</code></pre>
","<p>You may have two problems.</p>

<p>First, the SFP is transmitting out of spec.  At most, it should put out -1.2dBm per the link supplied by lacasitos above.  You may be able to RMA it if a Cisco SFP is complaining that another Cisco SFP is sending too hot of a signal.</p>

<p>Second, because you're now getting a Rx threshold error (it should not put out less than -7.3dBm and -13.8 is quite a loss on a short link), the fiber may not be fully inserted at either the tx or rx end, or the fiber is dirty or the transmitter or receiver is dirty.  (It's usually the fiber getting scratched on insertion unless you're in a dirty environment.)</p>

<p>If RMAing is out of the question, you could always introduce some loss to bring it under spec by using an attenuator or introducing extra patches.</p>
","10824"
"Why do we need a 3-way handshake? Why not just 2-way?","34456","","<p>The TCP 3-way handshake works like this:</p>

<pre><code>Client ------SYN-----&gt; Server
Client &lt;---ACK/SYN---- Server
Client ------ACK-----&gt; Server
</code></pre>

<p>Why not just this?</p>

<pre><code>Client ------SYN-----&gt; Server
Client &lt;-----ACK------ Server
</code></pre>
","<p>Break down the handshake into what it is really doing.</p>

<p>In TCP, the two parties keep track of what they have sent by using a Sequence number. Effectively it ends up being a running byte count of everything that was sent. The receiving party can use the opposite speaker's sequence number to acknowledge what it has received.</p>

<p>But the sequence number doesn't start at 0. It starts at the ISN (Initial Sequence Number), which is a randomly chosen value. And since TCP is a bi-directional communication, both parties can ""speak"", and therefore both must randomly generate an ISN as their starting Sequence Number. Which in turn means, both parties need to notify the other party of their starting ISN.</p>

<p>So you end up with this sequence of events for a start of a TCP conversation between Alice and Bob:</p>

<pre><code>Alice ---&gt; Bob    SYNchronize with my Initial Sequence Number of X
Alice &lt;--- Bob    I received your syn, I ACKnowledge that I am ready for [X+1]
Alice &lt;--- Bob    SYNchronize with my Initial Sequence Number of Y
Alice ---&gt; Bob    I received your syn, I ACKnowledge that I am ready for [Y+1]
</code></pre>

<p>Notice, four events are occurring:  </p>

<ol>
<li>Alice picks an ISN and <strong>SYNchronizes</strong> it with Bob. </li>
<li>Bob <strong>ACKnowledges</strong> the ISN. </li>
<li>Bob picks an ISN and <strong>SYNchronizes</strong> it with Alice. </li>
<li>Alice <strong>ACKnowledges</strong> the ISN.</li>
</ol>

<p>In actuality though, the middle two events (#2 and #3) happen in the same packet. What makes a packet a <code>SYN</code> or <code>ACK</code> is simply a binary flag turned on or off inside each <a href=""http://www.freesoft.org/CIE/Course/Section4/8.htm"">TCP header</a>, so there is nothing preventing both of these flags from being enabled on the same packet. So the three-way handshake ends up being:</p>

<pre><code>Bob &lt;--- Alice         SYN
Bob ---&gt; Alice     SYN ACK 
Bob &lt;--- Alice     ACK     
</code></pre>

<p>Notice the two instances of ""SYN"" and ""ACK"", one of each, in both directions.</p>

<hr>

<p>So to come back to your question, why not just use a two-way handshake? The short answer is because a two way handshake would only allow one party to establish an ISN, and the other party to acknowledge it. Which means only one party can send data. </p>

<p>But TCP is a bi-directional communication protocol, which means either end ought to be able to send data reliably. Both parties need to establish an ISN, and both parties need to acknowledge the other's ISN.</p>

<p>So in effect, what you have is exactly your description of the two-way handshake, but <em>in each direction</em>. Hence, four events occurring. And again, the middle two flags happen in the same packet.  As such three packets are involved in a full TCP connection initiation process.</p>
","24072"
"Minimum Ethernet Cable Length?","33340","","<p>I have heard from a few people that cables less than 1 meter are prone to transmission problems. Is there any minimum copper cabling length? </p>

<p>Please explain if this is true or not and share any available RFCs or standard documents. Thanks.</p>
","<p>I once made a crossover adaptor using a coupler and 2 tips butted almost against one another with probably less than an inch of cable between each connector point. Worked great!</p>

<p>Point is, you won't find any standard spec on a short cable length. All you have to go off of here is user experience. There are tons of threads where people say their 6"" patches are fine. Some report dropped packets. Some people like me have used 4"" ones for trunks between switches without issues. Others have replaced short cables with long ones and resolved network issues.</p>

<p>Do what works for you in this regard. If you implement short cable lengths, you would be wise to watch the port for errors to ensure the operation, but after it's fine for a while, I would figure it would be fine in general.</p>

<p>Here's another thread with a link that was considered uncreditable here. <a href=""https://serverfault.com/questions/108480/what-is-the-minimum-ethernet-cable-length-for-a-cat6-gigabit-connection"">https://serverfault.com/questions/108480/what-is-the-minimum-ethernet-cable-length-for-a-cat6-gigabit-connection</a></p>
","7508"
"Getting Cisco ISAKMP and IPSec SA lifetime confused","33052","","<p>I always get confused about security association lifetime configuration on Cisco IOS. </p>

<p>On most web-managed hardware it is clear which SA lifetime is for Phase I and which is for Phase II. </p>

<p>On Cisco however you got this <code>crypto isakmp policy &lt;NUM&gt;</code> section where you specify SA lifetime as <code>lifetime &lt;NUM&gt;</code>. </p>

<p>You also have to set SA lifetime in <code>crypto map &lt;NAME&gt; &lt;NUM&gt; IPsec-isakmp</code> section like <code>set security-association lifetime seconds &lt;NUM&gt;</code>.</p>

<p>Could you, guys, enlighten me please and end my confusion at last, please? Which one is Phase I and which one is Phase II?</p>
","<p>I have been confused by this in the past, so I've tried to break it out for you below.</p>

<h2>Phase I Lifetime:</h2>

<p>Phase I lifetime on Cisco IOS routers is managed by the global ISAKMP Policy.  However this is not a mandatory field, if you do not enter a value, the router will default to 86400 seconds.</p>

<pre><code>crypto isakmp policy 1
  lifetime &lt;value&gt;
</code></pre>

<p>To verify the lifetime of a specific policy, you can issue the command <code>show crypto isakmp policy</code>:</p>

<pre><code>TEST-1861#show crypto isakmp policy

Global IKE policy
Protection suite of priority 1
        encryption algorithm:   AES - Advanced Encryption Standard (256 bit keys).
        hash algorithm:         Secure Hash Standard
        authentication method:  Pre-Shared Key
        Diffie-Hellman group:   #5 (1536 bit)
        lifetime:               86400 seconds, no volume limit
</code></pre>

<p><em>Per Cisco in regards to that show command, (this is only for the isakmp lifetime): ""Note that although the output shows ""no volume limit"" for the lifetimes, you can configure only a time lifetime (such as 86,400 seconds); volume-limit lifetimes are not configurable"".</em></p>

<hr>

<h2>Phase II Lifetime:</h2>

<p>Phase II Lifetime can be managed on a Cisco IOS router in two ways: globally <strong>or</strong> locally on the crypto map itself.  As with the ISAKMP lifetime, neither of these are mandatory fields.  If you do not configure them, the router defaults the IPSec lifetime to 4608000 kilobytes/3600 seconds.</p>

<p><strong>Global configuration:</strong></p>

<pre><code>crypto ipsec security-association lifetime [seconds|kilobytes] &lt;value&gt;
</code></pre>

<p>This changes the setting for all IPSec SAs on that router.</p>

<p>To verify the global IPSec lifetime, issue the <code>show crypto ipsec security-association lifetime</code> command:</p>

<pre><code>TEST-1861#show crypto ipsec security-association lifetime
Security association lifetime: 4608000 kilobytes/3600 seconds
</code></pre>

<p><strong>Crypto Map configuration:</strong></p>

<p>If you need to change the IPSec lifetime for one connection, but not for all others on the router, you can configure the lifetime on the Crypto Map entry:</p>

<pre><code>crypto map &lt;map-name&gt; &lt;sequence-number&gt; ipsec-isakmp
  set security-association lifetime [seconds|kilobytes] &lt;value&gt;
</code></pre>

<p>To verify this individual Crypto Map lifetime value, use the <code>show cyrpto map</code> command (output sniped for clarity):</p>

<pre><code>TEST-1861#show crypto map 
Crypto Map ""test-map"" 1 ipsec-isakmp
        Peer = 67.221.X.X
        Extended IP access list Crypto-list
            access-list Crypto-list permit ip 172.20.0.0 0.0.0.255 10.0.0.0 0.255.255.255
            access-list Crypto-list permit ip 172.20.0.0 0.0.0.255 192.168.0.0 0.0.255.255
        Current peer: 67.221.X.X
        Security association lifetime: 4608000 kilobytes/3600 seconds
</code></pre>

<hr>

<p>(If you want more info, the <a href=""http://www.cisco.com/c/en/us/td/docs/ios/12_2/security/configuration/guide/fsecur_c/scfipsec.html"">Cisco IOS Security Configuration Guide</a>, specifically the sections on <a href=""http://www.cisco.com/c/en/us/td/docs/ios/12_2/security/configuration/guide/fsecur_c/scfipsec.html"">Configuring IPSec Network Security</a> and <a href=""http://www.cisco.com/c/en/us/td/docs/ios/12_2/security/configuration/guide/fsecur_c/scfike.html"">Configuring Internet Key Exchange Security Protocol</a>, go into more detail on the relevant commands.)</p>
","6628"
"NMap: Failed to open device eth1","32477","","<p><strong>EDIT</strong>:
I Have found that Nmap can work in unprivileged mode. A question related to that 
can be found <a href=""https://networkengineering.stackexchange.com/questions/20272/nmap-only-works-in-unprivilged-mode"">here</a>. </p>

<p>I recently installed NMap 6.49BETA4, and the ZenMap GUI, on my Windows 7 Home Premium x64. I'm not familiar with NMap at all, so I expect this to be a very simple solution. When I ran the default scanme.nmap.org, scan, I received this error:</p>

<pre><code>Starting Nmap 6.49BETA4 ( https://nmap.org ) at 2015-07-28 13:26 Eastern Daylight Time
NSE: Loaded 122 scripts for scanning.
NSE: Script Pre-scanning.
Initiating NSE at 13:27
Completed NSE at 13:27, 0.00s elapsed
Initiating NSE at 13:27
Completed NSE at 13:27, 0.00s elapsed
Initiating Ping Scan at 13:27
dnet: Failed to open device eth1
QUITTING!
</code></pre>

<p>When I run --<code>iflist</code>, I get this return:</p>

<pre><code>***********************INTERFACES************************
DEV  (SHORT) IP/MASK                      TYPE        UP   MTU  MAC
eth0 (eth0)  fe80::a167:b6ca:c16f:282b/64 ethernet    down 1500 66:6D:57:28:DB:41
eth0 (eth0)  169.254.40.43/4              ethernet    down 1500 66:6D:57:28:DB:41
eth1 (eth1)  fe80::f4e6:8b28:e268:72f0/64 ethernet    up   1500 44:6D:57:28:DB:41
eth1 (eth1)  192.168.1.6/24               ethernet    up   1500 44:6D:57:28:DB:41
eth2 (eth2)  fe80::581e:d69e:7f23:7640/64 ethernet    down 1500 24:00:04:18:00:22
eth2 (eth2)  169.254.118.64/4             ethernet    down 1500 24:00:04:18:00:22
lo0  (lo0)   ::1/128                      loopback    up   -1
lo0  (lo0)   127.0.0.1/8                  loopback    up   -1
tun0 (tun0)  (none)/0                     point2point down 1280
tun1 (tun1)  fe80::5efe:c0a8:106/128      point2point down 1280
tun2 (tun2)  (none)/0                     point2point down 1280
tun3 (tun3)  fe80::e0:0:0:0/64            point2point down 1280
tun4 (tun4)  (none)/0                     point2point down 1280
tun5 (tun5)  (none)/0                     point2point down 1280
DEV  WINDEVICE
eth0 none
eth0 none
eth1 none
eth1 none
eth2 none
eth2 none
lo0  none
lo0  none
tun0 none
tun1 none
tun2 none
tun3 none
tun4 none
tun5 none
</code></pre>

<p>I'm almost positive that the lack of a WINDEVICE linked with eth1 is the problem, but I'm blank on how to fix it</p>

<p>Addition Information:
Wireless Adapter: Atheros AR5B125 Wireless Network Adapter</p>

<p>Beginning of <code>ipconfig /all</code>:</p>

<pre><code>Windows IP Configuration

  Host Name . . . . . . . . . . . . : MyName-PC
  Primary Dns Suffix  . . . . . . . :
  Node Type . . . . . . . . . . . . : Broadcast
  IP Routing Enabled. . . . . . . . : Yes
  WINS Proxy Enabled. . . . . . . . : No
  DNS Suffix Search List. . . . . . : home

Wireless LAN adapter Wireless Network Connection:

  Connection-specific DNS Suffix  . : home
   Description . . . . . . . . . . . : Atheros AR5B125 Wireless Network Adapter
   Physical Address. . . . . . . . . : 44-6D-57-28-DB-41
   DHCP Enabled. . . . . . . . . . . : Yes
   Autoconfiguration Enabled . . . . : Yes
   Link-local IPv6 Address . . . . . : fe80::f4e6:8b28:e268:72f0%25(Preferred)
   IPv4 Address. . . . . . . . . . . : 192.168.1.6(Preferred)
   Subnet Mask . . . . . . . . . . . : 255.255.255.0
   Lease Obtained. . . . . . . . . . : Tuesday, July 28, 2015 11:53:44 AM
   Lease Expires . . . . . . . . . . : Tuesday, July 28, 2015 2:28:11 PM
   Default Gateway . . . . . . . . . : 192.168.1.1
   DHCP Server . . . . . . . . . . . : 192.168.1.1
   DHCPv6 IAID . . . . . . . . . . . : 457469271
   DHCPv6 Client DUID. . . . . . . . : 00-01-00-01-17-28-44-78-E8-40-F2-BE-96-&gt;45
   DNS Servers . . . . . . . . . . . : 192.168.1.1
   NetBIOS over Tcpip. . . . . . . . : Enabled
</code></pre>

<p>Sorry for the long question. </p>
","<p>It turns out this ended up as a top result on Google for the stated error message. I uninstalled WinPCap (may not be necessary) and then installed Nmap version 7.01, which solved the issue for me without using the cygwin solution mentioned in the comments of the original question.</p>

<p>Update: I believe (for me) this may actually be a conflict with the winpcap version that Nessus uses. Both boxes that I've had this issue with have had both installed. So in addition to the above fix, make sure that the nessus service is shut down (if installed). I would also recommend (as others have stated) to grab the legit version of winpcap and NOT install it during the nmap install (just uncheck it in the installer). </p>

<p>tl;dr</p>

<p>Ensure the Nessus service isn't running (if installed)</p>

<p>Uninstall WinPCap</p>

<p>Install WinPCap from winpcap.org</p>

<p>Install Nmap 7.01 (uncheck winpcap in the installer)</p>
","25873"
"Finding IP Addresses for Social Network Sites","32462","","<p>How do I find out a company like facebook's IP addresses. I am trying to block facebook at work and having some difficulties with HTTPs and URL blocking. Everytime I block a facebook IP more seem to pop up. </p>

<p>Is there any easy way to find out all the IPs that Facebook, Myspace, Snapchat etc uses? </p>
","<blockquote>
  <p>Is there any easy way to find out all the IPs that Facebook, Myspace, Snapchat etc uses? </p>
</blockquote>

<p>Using Facebook as an example... We police their bandwidth to a small fraction of our total directly on our ASA (because another group in the company owns the web-proxy).</p>

<p>I normally lookup the ASN of the company (Facebook is 32934), then I go to <a href=""http://as.robtex.com/as32934.html#bgp""><code>http://as.robtex.com/as32934.html#bgp</code></a> and find their prefixes.</p>

<p>From that list, I build a Cisco ASA object group, which I can use to classify traffic...  This is what I'm using now... Facebook gets throttled to a small amount of bandwidth... It works very well.</p>

<p>Every so often, you'll have to go back and check robtex AS-info to see whether they have added or removed prefixes.  I usually try to take the largest aggregate block they have, even if they are only announcing smaller blocks from that larger aggregate.</p>

<pre><code>object-group AS32934_Facebook
 network-object 31.13.24.0 255.255.248.0
 network-object 31.13.64.0 255.255.192.0
 network-object 66.220.144.0 255.255.240.0
 network-object 69.63.176.0 255.255.240.0
 network-object 69.171.224.0 255.255.224.0
 network-object 74.119.76.0 255.255.252.0
 network-object 103.4.96.0 255.255.252.0
 network-object 173.252.64.0 255.255.192.0
 network-object 204.15.20.0 255.255.252.0
</code></pre>

<p>The python code I use to generate the list is trivial... </p>

<pre><code>from ipaddr import IPv4Network, CollapseAddrList

fb_nets = list()
with open('facebook_nets.txt') as fh:
    for line in fh:
        net = IPv4Network(line.strip())
        fb_nets.append(net)

print ""object-group AS32934_Facebook""
for net in sorted(CollapseAddrList(fb_nets)):
    print "" network-object %s %s"" % (net.network, net.netmask)
</code></pre>

<p>The code assumes you put all their prefixes in a text file called ""facebook_nets.txt"", with one prefix per line...</p>

<pre><code>(py26_dfl)[mpenning@Bucksnort ~]$ head facebook_nets.txt
31.13.24.0/21
31.13.64.0/18
31.13.64.0/19
31.13.64.0/24
31.13.65.0/24
31.13.66.0/24
31.13.67.0/24
31.13.68.0/24
31.13.69.0/24
31.13.70.0/24
(py26_dfl)[mpenning@Bucksnort ~]$
</code></pre>

<p>Actually my script automatically web-scrapes the info every week, but this is a simplified version.</p>
","3083"
"How to Monitor Vlan Traffic?","32337","","<p>We have migrated to a new ISP who provide us several services (Internet+VoIP+VoD) and have divided each service in one vlan 100,101,102 respectively. 
Now I'm looking for a solution to monitor each service and measure the bandwidth on each vlan. I know we don't have counters on L3 SVI interface.
I though the port-channel sub-interface have counters operational but don't. </p>

<p>We receive on 4500-X the 3 vlans/services and trunk them to vlan 604 to CMTS. The vlan 260 is for IPTV Multicast. </p>

<p>In summary, I use cacti to monitor bandwidth on interface and I need a similar way to do it on vlans. </p>

<p>Maybe Netflow can solve the problem but before invest on it I would like yours considerations to found a simpler solution as Cacti. </p>

<p>Here the <a href=""https://www.dropbox.com/s/v79dyqrmkmk909d/network_pictures.jpg"" rel=""nofollow noreferrer"">topology</a></p>

<pre><code>============4500-X==================
!----------ingress - From ISP-----------------
sw-4500-X#sh run int te1/1/15 
Building configuration...

Current configuration : 171 bytes
!
interface TenGigabitEthernet1/1/15
 description Po from ISP 
 switchport trunk allowed vlan 100-102
 switchport mode trunk
 channel-group 5 mode active
end

sw-4500-X#sh run int te2/1/15
Building configuration...

Current configuration : 171 bytes
!
interface TenGigabitEthernet2/1/15
 description Po from ISP 
 switchport trunk allowed vlan 100-102
 switchport mode trunk
 channel-group 5 mode active
end

!----------egress port to CMTS------------------
sw-4500-X#sh run int te1/1/1
Building configuration...

Current configuration : 192 bytes
!
interface TenGigabitEthernet1/1/1
 description link Po1 -&gt; CMTS (te2/0/0)
 switchport trunk allowed vlan 260,706
 switchport mode trunk
 load-interval 30
 channel-group 1 mode on
end

sw-4500-X#sh run int te2/1/1
Building configuration...

Current configuration : 192 bytes
!
interface TenGigabitEthernet2/1/1
 description link Po1 -&gt; CMTS (te1/0/0)
 switchport trunk allowed vlan 260,706
 switchport mode trunk
 load-interval 30
 channel-group 1 mode on
end
</code></pre>

<p>EDIT : </p>

<p>Here the output of snmpwalk   </p>

<pre><code>[root@unix ~]# snmpwalk -v 2c -c rw_community &lt;IP-4500-x&gt; IF-MIB::ifName
....
IF-MIB::ifName.168 = STRING: VLAN-100  
IF-MIB::ifName.169 = STRING: VLAN-101   
IF-MIB::ifName.170 = STRING: Vl100  
IF-MIB::ifName.171 = STRING: VLAN-102  
IF-MIB::ifName.172 = STRING: Vl101  
IF-MIB::ifName.173 = STRING: Vl102  
...

[root@unix ~]# snmpwalk -v 2c -c rw_community &lt;IP-4500-x&gt; IF-MIB::ifName.168
IF-MIB::    IFName.168 = STRING: VLAN-100
[root@unix ~]# snmpwalk -v 2c -c rw_community &lt;IP-4500-x&gt;     IF-MIB::    IFHCInUcastPkts.168
IF-MIB::    IFHCInUcastPkts.168 = No Such Instance currently exists at this OID
[root@unix ~]# snmpwalk -v 2c -c rw_community &lt;IP-4500-x&gt;     IF-MIB::    IFHCOutUcastPkts.168
IF-MIB::    IFHCOutUcastPkts.168 = No Such Instance currently exists at this OID
[root@unix ~]# snmpwalk -v 2c -c rw_community &lt;IP-4500-x&gt;     IF-MIB::    IFHCInOctets.168
IF-MIB::    IFHCInOctets.168 = No Such Instance currently exists at this OID
[root@unix ~]# snmpwalk -v 2c -c rw_community &lt;IP-4500-x&gt;     IF-MIB::    IFHCOutOctets.168
IF-MIB::    IFHCOutOctets.168 = No Such Instance currently exists at this OID
</code></pre>

<p>But if I try with .170 I get </p>

<pre><code>[root@unix ~]# snmpwalk -v 2c -c rw_community &lt;IP-4500-x&gt; IF-MIB:ifHCInUcastPkts.170
IF-MIB::ifHCInUcastPkts.170 = Counter64: 0
[root@unix ~]# snmpwalk -v 2c -c rw_community &lt;IP-4500-x&gt; IF-MIB:ifHCOutOctets.170
IF-MIB::ifHCOutOctets.170 = Counter64: 325414481
</code></pre>

<p>This get me another question : 
Why this difference in the same interface (VLAN-100 and Vl100) ??</p>

<p>My main question is still unanswered because the OID I get are for the packets and bytes counters on interface. </p>

<p>What I want to get is the Bandwidth measurement on some vlan. So far I only see Netflow as a probable solution. </p>

<p>EDIT2: </p>

<p>I'm trying to add on Cacti and I'm having some issue. </p>

<p>Graph showed when I add interface vlan100: </p>

<p><img src=""https://i.stack.imgur.com/hHXIj.png"" alt=""cacti""></p>

<p>How to add such interface and made calculation to show right traffic graph ?? as suggested by Mike Pennington   </p>
","<p>Try adding the <em>counter</em> command under the SVI (see <a href=""http://www.cisco.com/en/US/docs/switches/lan/catalyst4500/12.2/54sg/configuration/guide/l3_int.pdf"">here</a> for more information, specifically the ""Understanding L3 interface counters"" section).</p>

<p>For instance:</p>

<pre><code> Cisco#config t
 Cisco(config)#interface vlan 100
 Cisco(config-if)#counter ?
   ipv4  Enable IPv4 statistic counters
   ipv6  Enable IPv6 statistic counters
   &lt;cr&gt;
 Cisco(config-if)#counter
 Cisco(config-if)#end
</code></pre>

<p>Combined with Mike's excellent answers this will probably be what you want.</p>
","3205"
"Why is fe80::/10 reserved for link local addresses when fe80::/64 is actually used?","32105","","<p>I understand that IPv6 reserves the fe80::/10 prefix for link local addresses, and that hosts select an address with a /64 prefix.</p>

<p>Why is the reserved space so much larger than what is actually used for link local?</p>
","<p>I think the link-local scope was set to /10 simply to ""fit in"" better with the other scopes, e.g. site-local (before it was replaced with unique local).</p>

<p>Initially I had thought maybe it was to allow the use of many link-local networks on the same link, but <a href=""http://tools.ietf.org/html/rfc4291#section-2.5.6"">RFC 4291 explicitly states</a> that only fe80::/64 may be used.</p>
","134"
"Reset admin password on Fortinet FortiWiFi 60D","32032","","<p>I've tried to log in to this device by doing the following.</p>

<ol>
<li><p>Default credentials</p>

<pre><code>username: admin
password: &lt;none&gt;
</code></pre></li>
<li><p>Maintainer credentials in the FortiExplorer console interface.</p>

<pre><code>username: maintainer
password: bcpb + serial number
</code></pre></li>
<li><p>Holding the reset button for varying lengths of time, and during boot.</p></li>
<li><p>Installing a newer firmware from <a href=""ftp://pftpintl:F0rt1intl@support.fortinet.com"" rel=""nofollow"">ftp://pftpintl:F0rt1intl@support.fortinet.com</a></p></li>
</ol>

<p>I've gleaned this information from random blogs. I can't find an actual manual, just spec sheets and sales pamphlets.</p>
","<blockquote>
  <p>Reset Button: When enabled (default state), resets the unit to its factory default settings <strong>if pressed during the first 30 seconds after a reboot</strong> -- <a href=""http://kb.fortinet.com/kb/microsites/search.do?cmd=displayKC&amp;docType=kc&amp;externalId=FD33883&amp;sliceId=1&amp;docTypeID=DT_KCARTICLE_1_1&amp;dialogID=56637278&amp;stateId=0%200%2056639128"" rel=""nofollow"">Fortinet KB</a></p>
</blockquote>

<p><a href=""http://docs-legacy.fortinet.com/fgt/sysadmin/Resetting_a_lost_admin_password.pdf"" rel=""nofollow"">Resetting a lost admin password - PDF</a></p>
","5835"
"What is the advantage of an ""area"" in OSPF configuration?","31202","","<p>As we know, during OSPF configuration we use the area.  Each area has its different number, while there is only one area (area 0) which creates communications between all other attached areas. </p>

<p>I am confused that as we are using the same configuration techniques over all of the areas, but I don't know why we use areas if we can direct connect all of the PCs.</p>
","<p>If you're asking specifically what Areas do in OSPF, there are many resources out there which have a wealth of information.  These are just a few selections:</p>

<ul>
<li>The <a href=""https://www.cisco.com/en/US/tech/tk365/technologies_white_paper09186a0080094e9e.shtml"">Cisco OSPF Design Guide</a></li>
<li>A Cisco Design Technote <a href=""https://www.cisco.com/en/US/tech/tk365/technologies_tech_note09186a0080094aaa.shtml"">What Are OSPF Areas and Virtual Links?</a></li>
<li>PacketLife.net blog entry on <a href=""http://packetlife.net/blog/2008/jun/24/ospf-area-types/"">OSPF Area Types</a></li>
</ul>

<p>However, a good answer to ""What is the advantage of OSPF Areas?"", is this quote from the Cisco Design Technote, What are OSPF Areas:</p>

<blockquote>
  <p>An OSPF network can be divided into sub-domains called areas. An area is a logical collection of OSPF networks, routers, and links that have the same area identification.  A router within an area must maintain a topological database for the area to which it belongs. The router doesn't have detailed information about network topology outside of its area, thereby reducing the size of its database.</p>
</blockquote>

<p>In short OSPF Areas allow you to segment your network topology to enable greater scalability and maintain a greater level of control.</p>

<hr>

<p><strong>Edit:</strong>  In response to your comment ""How can OSPF Areas increase the speed of communication?"":</p>

<p>By itself, using OSPF Areas doesn't increase the speed of communication.  It removes roadblocks to communication/scalability.  </p>

<p>Think of it like this (this isn't a perfect analogy, and over-simplifies the issue, but it should help give the general idea): </p>

<p>If a company takes hundreds of telephone calls each day, and has to send all of it's telephone calls to a single secretary, calls into the company will be slow.  However if there is a central secretary who knows about many secretaries who all take calls for a different portion of the company, calls can more quickly be processed.</p>

<p>A similar issue arises when routing tables for any one device get too large/unmanageable.  Splitting them into more manageable areas can help speed traffic along to it's destination.</p>
","4998"
"Bits per second vs. Packets per second","29625","","<p>Lately I have been checking datasheets of several switch models from diferent vendors. For a given switch, vendors publish a couple of figures that I think are a measure of the capacity/performance of the switch: </p>

<ul>
<li>One value is always measured in packets per second </li>
<li>The other one is always measured in bits per second </li>
</ul>

<p>Despite different vendors use different names for the figures, seems the meaning is always the same. </p>

<p>I would like to understand three things:</p>

<ol>
<li>What is the exact meaning of each figure?</li>
<li>What is the difference between them? </li>
<li>When should I focus on each value for switch assessment?</li>
</ol>
","<p>I just want to briefly mention the reality of marketing math when you're considering vendor data sheets.  It is very common for vendors to double-count bps or pps capacity when you have full-duplex links.  For instance, Cisco's Catalyst 6500 has a Supervisor 720.  720 is used because it is marketed as having 720Gbps of fabric capacity.</p>

<p>But... if you ask how Cisco calculates 720Gbps, the answer is:</p>

<ul>
<li>80Gbps of fabric per slot times 9 slots in a chassis</li>
</ul>

<p>The issue here is their fabric is only a 40Gbps full-duplex fabric... However, Cisco counts both ingress and egress in the 720G number, even though it doesn't really make sense to count like that.  The take-away is you sometimes need to be careful and inspect how you can apply the numbers in vendor literature to reality.</p>

<p>Almost every vendor twists marketing numbers like this, and I only pick the Cat6500 because I'm very familiar with the platform.  This is not a condemnation of Cisco or the Cat6500 (which I actually have quite a passion for).</p>

<blockquote>
  <p>What is the exact meaning of each figure?  What is the difference between them?</p>
</blockquote>

<ul>
<li>bps
<ul>
<li>Number of bits of data per second that can be processed without dropping data.  bps is almost always measured using 1500 byte (or potentially larger) ethernet payloads.</li>
<li>bps is frequently used when measuring the capacity of components which interconnect multiple linecards or ports within a chassis (like a switch fabric).  Occasionally, a central processing engine might have a bps limitation...</li>
</ul></li>
<li>pps
<ul>
<li>Number of packets of data per second that can be processed before dropping data; pps is always measured using the smallest packet sizes possible.</li>
<li>pps is frequently used when measuring components that look inside a packet header (for an IP address, mac-address, DSCP value, etc...).   For example, the capacity of route and switch processors are measured in pps.</li>
</ul></li>
</ul>

<blockquote>
  <p>When should I focus on each value for switch assessment?</p>
</blockquote>

<p>There is a time and place for this kind of analysis, but most people only use a tiny fraction of their switch pps / bps capacity, unless it's a top of rack switch in a busy data center, or a core switch for a mid to large service provider POP.</p>

<p>Even so, vendor sales staff might not be interested in highlighting the product limitations, or may not understand the limits well themselves.  Also, the packet-per-second numbers often change depending on the features, or combination of features that you turn on... there really is no substitute for coming up with a few good test cases, and testing the performance of the box with the combination of features you think you realistically need.</p>

<p>Due to variances and the games people can play with numbers on data sheets, the most important thing you can ask the vendor is ""<em>show me how you calculated the bps and pps numbers for this component</em>"".</p>

<p>That said, hardware and software features are as important, or more important to consider than drag-race bps / pps numbers... I'm including a small sample of items you might want to look at... this is very subjective...</p>

<ul>
<li><p>On forwarding engines (normally measured in pps)</p>

<ul>
<li>Add up the bandwidth of an average chassis port count, and find the average packet size (at the advertised non-drop rate) with features on and then with off (compare how these numbers may change)</li>
<li>Aggregate IPv4 / IPv6 / MPLS pps performance (these numbers may change, depending on the platform, or combinations of features that you use)</li>
<li>ACL rule limitations (on number of ACEs, header fields you can filter on, counters, etc...)</li>
<li>Total number of prefixes / mac addresses supported in HW and in DRAM</li>
<li>SNMP MIBs supported</li>
<li>QoS modes and features supported, as well as how easily you can integrate these QoS features into the rest of your network.</li>
<li>Route processor failover times</li>
<li>Availability and reliability of In service software upgrades</li>
<li>Does the OS have modular software components</li>
<li>Are Vlans locally significant to an interface, or does the box have global vlan utilization</li>
</ul></li>
<li><p>fabric / linecard fabric connections / linecard ASICs (normally measured in bps)</p>

<ul>
<li>Average cost per 1GE or 10GE port</li>
<li>Port count and linecard oversubscription ratios</li>
<li>Linecard and port buffer sizes</li>
<li>Whether the switch supports backpressure to ingress linecards, if the egress fabric port is congested</li>
<li>Ingress vs Egress multicast replication</li>
</ul></li>
</ul>
","3131"
"Can I see the pending (commit at) changes on a JunOS box?","29215","","<p>If an engineer configures some changes in a JunOS box and then set them to go live later, that effectively locks the config database with a configure exclusive.  How can I see the changes that he or she has committed?</p>
","<p>I think, you can use <code>show | compare</code> from configuration mode.</p>
","84"
"How are two ""ip helper-address"" statements handled?","29181","","<p>I've discovered a subnet with two ""ip helper-address"" statements.  This is <em>not</em> our normal configuration.</p>

<pre><code>interface Vlan300
 ip address 10.1.3.2 255.255.255.0
 ip helper-address 10.2.1.10
 ip helper-address 10.3.1.10
</code></pre>

<p>Looking at our DHCP servers, it seems that there are leases coming from both of them.</p>

<p>I realize this is not recommended, and the two DHCP servers might not be aware of each other's lease assignments (I'm pretty sure they don't). </p>

<p>The question is, how is this handled by the Cisco switch (4510 Sup7 12.2)?</p>

<ul>
<li>Is it the first DHCP server to respond?  </li>
<li>Is it the first one, then the second one if the first one times out?  </li>
<li>Is it round robin?</li>
</ul>
","<p>The <code>ip helper-address</code> command designates an address which broadcasts are forwarded to; it will send the original packet to each of those listed addresses.</p>

<p>If both reply, both replies are forwarded back to LAN.</p>
","915"
"Injecting routes in to BGP for advertisement: BGP network command","29157","","<p>I am a complete newbie at BGP configurations.Need some clarification on understanding BGP network command.</p>

<p>One of our MPLS site routers have the following config : (Pasting only config snippets )
""</p>

<pre><code>R1#
interface Loopback0
 ip address 10.129.110.157 255.255.255.252

interface GigabitEthernet0/0
 ip address 10.129.110.154 255.255.255.252

interface GigabitEthernet0/1.10
 encapsulation dot1Q 10 native
 ip address 10.129.135.129 255.255.255.192

!         
interface GigabitEthernet0/1.20
 encapsulation dot1Q 20
 ip address 10.129.135.193 255.255.255.192



router bgp XXXXX
 bgp log-neighbor-changes
 neighbor 10.129.110.153 remote-as 7795
 neighbor 10.129.110.153
 neighbor 10.129.110.153 ebgp-multihop 10
 !
 address-family ipv4
  neighbor 10.129.110.153 activate
  neighbor 10.129.110.153 send-community
  neighbor 10.129.110.153 soft-reconfiguration inbound
  no auto-summary
  no synchronization
  **network 10.129.110.152 mask 255.255.255.248**
  network 10.129.135.128 mask 255.255.255.128
 exit-address-family
""
</code></pre>

<p>When the BGP network command   <code>""network 10.129.110.152 mask 255.255.255.248""</code>  was put in , we cud not get connectivity to the loop back address ""10.129.110.157""and the router  from any where else from our network.</p>

<p>but when we split the network command individually</p>

<pre><code> ""network 10.129.110.152 mask 255.255.255.252""
 "" network 10.129.110.156 mask 255.255.255.252""
</code></pre>

<p>every thing worked fine.</p>

<p>Can some body explain me the correct uasge of network command in BGP.
Also, When and in what cases do we use the aggregate-address in BGP.</p>

<p>Thanks in advance.</p>
","<p>From an old archive config...</p>

<pre><code>router bgp 7866
...
 network 66.152.0.0 mask 255.255.224.0
...
ip route 66.152.0.0 255.255.224.0 Null0 200
</code></pre>

<p>We controlled exactly what was broadcast using <code>network</code>. Null routes a) prevent flapping (when there's an actual interface for that network -- eg. customer provided block), and b) put networks in the route table that wouldn't be there otherwise.</p>
","3251"
"How do you prevent rogue wireless access points on a network?","29139","","<p>Depending on what type of traffic is going over the network, it's often not feasible that an employee brings a wireless router and sets it up into your network. This is because often, they are not or poorly secured and present a backdoor into the network. What can you do to prevent rogue wireless access points being introduced into your network? </p>
","<p>Lucas's answer above is a bit of a starting point.    There are however two or three other things that must be considered.  These end up being somewhat outside the scope of <em>network</em> engineering, but certainly have impacts for network engineering and security so here they go.</p>

<ol>
<li><p>You probably want some way of preventing wireless cards in company laptops from being switched into ad hoc mode.  Assuming the laptops are running Windows, you probably want to use a GPO to set to infrastructure mode only.  For Linux, it is harder to fully restrict, but there are ways to do this too.</p></li>
<li><p>Enforcing IPSec is also a good idea, particularly with good key management and trusted enforcement.  For example if you can go to X509 certs for key management this can keep unauthorized devices from communicating with the rest of your network directly.  Consider key management as a core part of the infrastructure here.  If you use a proxy server you may even be able to block unauthorized devices from accessing the internet.</p></li>
<li><p>Note the limitations of your efforts.  None of these prevents a person from setting up an unsecured wireless access point connected to a USB NIC, for sole purposes of communicating with their computer, especially if the SSID is hidden (i.e. not broadcast).</p></li>
</ol>

<p>Not sure how to further contain problems or if further paranoia is well past the point of insufficient returns.....</p>
","126"
"Difference between Subnet and VLAN?","28876","","<p>You often hear the terms <strong>Subnet</strong> and <strong>VLAN</strong> used interchangeably.  With the ubiquitous nature of IP these days, <strong>when are the two not considered roughly the same from a high-level, understanding that VLANs are L2 and Subnets are L3.</strong>   In other words, are there any cases for having a VLAN without a Subnet, and still have IP (L3) communication?  [Also ignoring that all networks are not subnets when considering classful networks which all are really just CIDR prefixes these days.]</p>
","<p>If they are used interchangeably then they are used incorrectly.</p>

<p>Subnet refers to particular IP network, such as 192.0.2.0/28  </p>

<p>VLAN refers to 802.1Q standard, in which you can essentially give each port unique MAC address table, effectively separating them from each other.</p>

<p>VLAN may transport one or more subnet (but does not have to, it may be transporting something else than IP entirely). 
Subnet may be configured for VLAN, but does not have to be, it could be without 802.1Q or over some completely different L2 technology than ethernet.</p>
","1030"
"Cisco Router Telnet Connection Refused","28835","","<p>I have a cisco 1941 router just configured but no matter how I go about configuring the telnet, it seems not to work. </p>

<p>It has interfaces already set up and systems can browse through it in the office. It has two interfaces WAN and LAN configured with Ip Addresses and the LAN interface with other sub interfaces with IP address configured on them. </p>

<p>I have tried setting up the terminal with the command as stated below but it is not working.</p>

<pre><code>Router(config)#line vty 0 ?
&lt;1-1370&gt; Last Line Number
Router(config-line)#line vty 0 1370
Router(config-line)# password P@$$W)RD
Router(config-line)# login
</code></pre>

<p>I even tried using the following configuration but yet not working</p>

<pre><code>Router(config)#line vty 0 4
Router(config-line)# password P@$$W)RD
Router(config-line)# login
</code></pre>

<p>Everytime I try to connect to the any of the subinterfaces through telnet or the WAN address through telnet, I get the error message</p>

<pre><code>MacBook-Pro:~ User$ telnet x.x.x.x
Trying x.x.x.x...
telnet: connect to address x.x.x.1x Connection refused
telnet: Unable to connect to remote host
</code></pre>

<p>Please what am I getting wrong here?</p>
","<p>The issue has been resolved. When I checked the running configuration on the router, I noticed I have the line below under the line vty 0 4</p>

<pre><code>access-list class 23 in
</code></pre>

<p>All I had to do was to negate the command and everything went back to normal.</p>

<p>Thanks all for your support.</p>
","7177"
"What are the downsides of OpenVPN?","28662","","<p>I have been seeing so many people always wrestling with IPSec, and many other secure VPN technologies.
I, for one, have always simply used OpenVPN, with beautiful and simple and versatile results. I've used it on DD-WRT routers, big servers and android phones, to name a few.</p>

<p>Could someone please explain to me what I am missing out on? Are there any downsides to OpenVPN that I am not aware of? Does IPSec and friends offer some awesome feature that I didn't know about? Why isn't everyone using OpenVPN?</p>
","<p>IMHO, the biggest disadvantage to OpenVPN is that it's not interoperable with the vast majority of products from ""big name"" network vendors out there.  Cisco &amp; Juniper's security and router products don't support it - they only support IPsec and proprietary SSL VPNs.  Palo Alto, Fortinet, Check Point, etc. don't support it, either.  So, if your organization / enterprise wants to setup a site-to-site extranet VPN to another company and you've only got an OpenVPN appliance, you're probably going to be out of luck.</p>

<p>That being said, some network hardware &amp; software companies are starting to embrace OpenVPN.  MikroTik is one of them.  It's been supported since RouterOS 3.x:</p>

<p><a href=""http://wiki.mikrotik.com/wiki/OpenVPN"">http://wiki.mikrotik.com/wiki/OpenVPN</a></p>

<p>Also, for the longest time the only way to run an OpenVPN client on Apple's iOS required jailbreaking.  This is not so, anymore:</p>

<p><a href=""https://itunes.apple.com/us/app/openvpn-connect/id590379981?mt=8"">https://itunes.apple.com/us/app/openvpn-connect/id590379981?mt=8</a></p>

<p>Overall, the situation is improving.  However, without vendors like Cisco &amp; Juniper implementing it in their products, I can't see large enterprises adopting it without facing interoperability problems.</p>
","1080"
"Bridging VLAN trunks on RouterOS","28421","","<blockquote>
  <p>Edit:
  While Mikrotik is well known for their consumer-grade wireless
  routers, this question is about their rack mounted,
  carrier-grade, aggregation service routers.</p>
</blockquote>

<p>I need to send a VLAN trunk over an EoIP tunnel through two RouterOS/Mikrotik routers. I have thus bridged an ethernet interface on each side of the link with the respective EoIP interfaces.</p>

<p>Seeing how different VLANs and trunks are handled on RouterOS makes me wonder how I should go about this.</p>

<p>The frames will be tagged on egress from Catalyst switches on either side of the routers. Can one simply skip any VLAN configuration on RouterOS in this case? Will it bridge the frames with 802.1q tags intact?</p>

<p>I assume that such configuration will cause the IP addresses of the routers to be accessible from any VLAN on the trunk, if any addresses are configured on the bridged ethernet interfaces. </p>

<p>Any other downside to this configuration? Is there a better way?</p>
","<p>To be sure, create VLAN sub-interfaces on the physical interfaces and bridge the sub-interfaces. Any IP addresses are then configured on the respective bridges. VLANs are isolated from each other on layer 2 like on any switch.</p>

<p>Treat the EoIP tunnel interface like a physical interface for this exercise.</p>

<p>Oddly enough, the procedure is very similar to how VLAN trunks are configured on Juniper MX series routers :)</p>

<p><a href=""http://wiki.mikrotik.com/wiki/Manual:Interface/VLAN"" rel=""nofollow"">http://wiki.mikrotik.com/wiki/Manual:Interface/VLAN</a> has the details.</p>
","2588"
"How can I reasonably verify my QoS configuration is working?","28341","","<h1>Context</h1>

<p>I've deployed a standard QoS config to a customer site running a Cisco 891 router with IOS 15.1(4)M4. The WAN link is a single ADSL2+ link (24/1Mbps) connected to FE8.</p>

<p>I've previously tested this configuration at another site by using iperf from the LAN to generate 1+ Mbps of upstream traffic and confirmed a noticeable change in call quality when enabling QoS on the WAN interface. This is how I initially confirmed my configuration worked.</p>

<p>I've recently deployed this same configuration to another site, but they are still having issues with upstream VOIP bandwidth. I would like to reasonably confirm that QoS is working without going to the effort of actually saturating the link (particularly because they are out of state, and there's no tech onsite). And then try and isolate what I might be able to teak to get better voice quality.</p>

<h1>Questions</h1>

<p>Given the policy-map output below, focusing specifically on the VOICE class-map as an example, what do the following statistics mean?:</p>

<ul>
<li><p><em>3860628 packets, 1070196895 bytes:</em> Can I assume that this is the total number of packets/bytes matched in the class-map?</p></li>
<li><p><em>5 minute offered rate 0 bps, drop rate 0 bps:</em> Is the ""offered rate"" the rate in bps of traffic that has been prioritised, if not then what? And similarly, is the drop rate the excess rate of traffic that could not be prioritised due to lack of bandwidth? Would that then indicate that we need X bps more bandwidth for VOICE to accommodate such traffic peaks?</p></li>
<li><p><em>Priority: 40% (340 kbps), burst bytes 8500, b/w exceed drops: 5:</em> In this line, I'm unsure what b/w exceed drops means?</p></li>
</ul>

<h2>Logging</h2>

<p>Given that these statistics are likely to change (I imagine) during peak times (which is when you'd most want to see them). Is there some way that I can log these numbers, or perhaps query them via SNMP so they can be graphed programmatically?</p>

<h2>Learning</h2>

<p>I understand that QoS is a fairly wide-ranging topic. When trying to learn about this, I am often being overwhelmed by different information either because I'm reading about different types of QoS implementations, or because of differing IOS verions (eg. Older docs using commands where the syntax or output has changed). </p>

<p>To this end, can anyone recommend some Cisco training docs or video courses that might help me focus in on getting a better grip on working with QoS?</p>

<h1>Some additional Info</h1>

<p>Here's a sample QoS config:</p>

<pre><code>class-map match-any SSH
 match protocol ssh
class-map match-any LogMeIn
 match access-group name LogMeIn
class-map match-any VOICE
 match protocol sip
 match protocol rtp

policy-map ADSLPrioritisationOutbound
 class VOICE
  priority percent 40
 class SSH
  bandwidth 80
 class LogMeIn
  priority percent 20
 class class-default
  fair-queue
policy-map ADSLPrioritisationOutboundParent
 class class-default
  shape average 850000
  service-policy ADSLPrioritisationOutbound

interface FastEthernet8
 no ip address
 ip virtual-reassembly in
 duplex auto
 speed auto
 pppoe-client dial-pool-number 1
 service-policy output ADSLPrioritisationOutboundParent
</code></pre>

<p>And policy-map interface output:</p>

<pre><code>FastEthernet8

Service-policy output: ADSLPrioritisationOutboundParent

Class-map: class-default (match-any)
  18968101 packets, 6998385051 bytes
  5 minute offered rate 3000 bps, drop rate 0 bps
  Match: any
  Queueing
  queue limit 64 packets
  (queue depth/total drops/no-buffer drops) 0/93737/0
  (pkts output/bytes output) 18874363/6936577128
  shape (average) cir 850000, bc 3400, be 3400
  target shape rate 850000

  Service-policy : ADSLPrioritisationOutbound

    queue stats for all priority classes:

      queue limit 64 packets
      (queue depth/total drops/no-buffer drops) 0/0/0
      (pkts output/bytes output) 3860623/1070194985

    Class-map: VOICE (match-any)
      3860628 packets, 1070196895 bytes
      5 minute offered rate 0 bps, drop rate 0 bps
      Match: protocol sip
        97348 packets, 49867304 bytes
        5 minute rate 0 bps
      Match: protocol rtp
        3763280 packets, 1020329591 bytes
        5 minute rate 0 bps
      Match: access-group name NEC-PBX
        0 packets, 0 bytes
        5 minute rate 0 bps
      Priority: 40% (340 kbps), burst bytes 8500, b/w exceed drops: 5


    Class-map: SSH (match-any)
      89497 packets, 19838544 bytes
      5 minute offered rate 2000 bps, drop rate 0 bps
      Match: protocol ssh
        89497 packets, 19838544 bytes
        5 minute rate 2000 bps
      Queueing
      queue limit 64 packets
      (queue depth/total drops/no-buffer drops) 0/0/0
      (pkts output/bytes output) 89497/19838544
      bandwidth 80 kbps

    Class-map: LogMeIn (match-any)
      0 packets, 0 bytes
      5 minute offered rate 0 bps, drop rate 0 bps
      Match: access-group name LogMeIn
        0 packets, 0 bytes
        5 minute rate 0 bps
      Priority: 20% (170 kbps), burst bytes 4250, b/w exceed drops: 0


    Class-map: class-default (match-any)
      15017976 packets, 5908349612 bytes
      5 minute offered rate 0 bps, drop rate 0 bps
      Match: any
      Queueing
      queue limit 64 packets
      (queue depth/total drops/no-buffer drops/flowdrops) 0/93732/0/93732
      (pkts output/bytes output) 14924243/5846543599
      Fair-queue: per-flow queue limit 16
</code></pre>
","<p>Your question's pretty broad.  There's a lot of different commands you can use to troubleshoot and monitor QoS, so I'll focus on the primary question you have, which is how to reasonably verify your QoS configuration is working and how to read the policy-map interface output.</p>

<p>The only <em>true</em> way to verify that QoS is working is to hook up a traffic generator and monitor your drop rate in various queues.  Since that isn't typically feasible, particularly in a production environment, all you can really do is verify that the traffic is being marked and classified properly.</p>

<p>What you're really looking for, when it comes to verifying if your QoS configuration is working, is for the counters in the policy-map interface command to increment.  </p>

<p>So, for example, in the output your provided:</p>

<pre><code>Class-map: VOICE (match-any)
  3860628 packets, 1070196895 bytes
  5 minute offered rate 0 bps, drop rate 0 bps
  Match: protocol sip
    97348 packets, 49867304 bytes
    5 minute rate 0 bps
  Match: protocol rtp
    3763280 packets, 1020329591 bytes
    5 minute rate 0 bps
  Match: access-group name NEC-PBX
    0 packets, 0 bytes
    5 minute rate 0 bps
  Priority: 40% (340 kbps), burst bytes 8500, b/w exceed drops: 5
</code></pre>

<p>You can see that you're seeing packets under SIP and RTP, but not NEC-PBX.  If you know you're getting SIP and RTP traffic across a link, you should see the packet counts increment and that's a reasonable way to know that your configuration is basically working.</p>
","2543"
"Understanding ARP and Routers","27487","","<p>Let's say there are two PCs, PC A and PC B.
PC A wants to communicate with PC B, such as sending a message.
I need to describe the arp packets for this task.</p>

<p>Known details:</p>

<p>PC A -> SW 1 -> Router -> SW 2 -> PC B</p>

<p>Host A and host B are in a different network</p>

<p>PC A : MAC Address a.a.a.a 
       IP Address  1.1.1.1
       Default gateway 4.4.4.4</p>

<p>PC B : MAC Address b.b.b.b
       IP Address  2.2.2.2
       Default gateway 5.5.5.5</p>

<p>So, I wonder how the router would react to the arp packet.
If PC A wants to send a message to PC B, it will first send an arp packet with its own MAC and IP addresses as source and PC B's IP address and zero value for the MAC address as destination.The ethernet packet would contain PC A's MAC and IP as source but then I don't know wheter the destination ip would be A's default gateway or it will be a broadcast like the MAC address?
I believe that default configuration routers has the proxy arp disable.
What would actually happen?</p>
","<p>Your reasoning is the wrong way. TCP/IP handles the layers top down, not bottom up.</p>

<p>PC A will first do a lookup in the routing table and decide that the only way to reach PC B is via the router specified in that routing table.</p>

<p>If the MAC address of the router is unknown it will send an ARP request to figure out which MAC address corresponds to the gateway IP. </p>

<p>Then the frame (containing the IP packet) will be sent to the MAC address of the router which will do a lookup in its routing table to see on which interface PC B is connected or via which next hop it should be routed. Assuming PC B is connected to another interface of the router the router will do a lookup (and if needed an ARP request) to figure out the MAC address of PC B and then forward the frame.</p>
","5419"
"Two-factor authentication for SSLVPN (cisco)?","26989","","<p>Just got asked today about implementing two factor authentication for users of SSLVPN within our company (connecting via Cisco AnyConnect we don't support/use WebVPN).  Currently we use LDAP for authentication.</p>

<p>I've identified a company that integrates directly with anyConnect and the mobility client to afford token based two factor authentication, but was wondering what are more common ways of implementing two-factor in this sort of setting?  First thing that came to my mind was Google Authenticator or RSA, but finding information on these types of setups in conjunction with AnyConnect was surprisingly hard to find (I found nothing .. in fact)</p>
","<p>The two paths I can think of are as follows:</p>

<ol>
<li><p>You want to use the built-in Cisco ASA secondary authentication</p></li>
<li><p>You are open to using a radius server.</p></li>
</ol>

<p>The Concept for #2:</p>

<ol>
<li><p>Pick an authenticator. For example, Google, LDAP, AD, etc...</p></li>
<li><p>Setup a Radius Server (FreeRADIUS, Windows NPM, Cisco ACS, etc...) that supports the authenticator.</p></li>
<li><p>Configure the authentication on your Cisco ASA to use that Radius server (IP Address, ports, secret key, etc...) and then you are done. Adjust timeouts as needed.</p></li>
</ol>

<p><em>About Google Authenticator</em>:<br>
You can setup <a href=""http://www.supertechguy.com/help/security/freeradius-google-auth"" rel=""nofollow"">FreeRadius to use Google Authenticator</a> and then setup the Cisco ASA aaa-server to use the FreeRadius server. Done :)</p>

<p><em>About Duo Security</em>:<br>
I have used Duo Security and it works great. This <a href=""https://www.duosecurity.com/docs/cisco#add_the_duo_ldap_server"" rel=""nofollow"">configuration link</a> shows how to set up 2-Factor Authentication without installing the Duo Security application. However, if you install the application (acts as a RADIUS server) then the setup becomes even easier. Below is a sample config that should help.</p>

<p>The CAVEATS to this setup:<br>
Increase your timeouts! I've had issues with this.
Do not install the Duo application on an existing RADIUS server (listening port conflict).</p>

<ul>
<li><p>After installing the application on a server you need to modify the <code>authproxy.cfg</code> file to use Active Directory as your primary authenticator, at the top of your <code>authproxy.cfg</code></p></li>
<li><p>Set client to <code>ad_client</code> and server to <code>radius_server_auto</code>  </p>

<pre><code>[main]  
client=ad_client  
server=radius_server_auto  
</code></pre></li>
<li><p>Create a section called <code>ad_client</code>.</p>

<pre><code>[ad_client]
host=10.x.x.11
host_2=10.x.x.12
service_account_username=ldap.duo
service_account_password=superSecretPassword
search_dn=DC=corp,DC=businessName,DC=com
</code></pre></li>
<li><p>security group is optional. this group allows users to authenticate.</p>

<pre><code>security_group_dn=CN=Administrators,CN=Builtin,DC=example,DC=com
</code></pre></li>
<li><p>Specific DUO security config info</p>

<pre><code>[radius_server_auto]
ikey=xxxxxxxxxxxxx
skey=xxxxxxxxxxxxx
api_host=api-xxxxx.duosecurity.com
</code></pre></li>
<li><p>Safe or secure are the options here.</p></li>
<li><code>Safe=allow auth</code> if Duo is unreachable.</li>
<li><p><code>Secure=do not allow auth</code> if Duo is unreachable
failmode=safe</p></li>
<li><p>IP address of Cisco ASA that you want to hit and the key</p>

<pre><code>radius_ip_1=10.x.x.1
radius_secret_1=superSecretPassword
</code></pre></li>
<li><p>Windows Server that has the DuoSecurity App installed</p>

<pre><code>net stop DuoAuthProxy
net start DuoAuthProxy
</code></pre></li>
<li><p>Cisco ASA 8.4 Configuration</p></li>
<li><p>Add new aaa-server to corresponding VPN policy</p>

<pre><code>aaa-server DUO protocol radius
!
aaa-server DUO (inside) host 10.x.x.101
 accounting-port 1813
 authentication-port 1812
 key superSecretPassword
 retry-interval 10
 timeout 300
!
</code></pre></li>
</ul>
","3202"
"Bad Mask for IP Address Error","26793","","<p>I'm not too clear on subnetting rules and experienced an error when I tried to assign 148.26.1.176/28 to an interface on my Cisco router. Can someone please explain why it was not allowing me to assign this address to the interface? I receive an error saying:</p>

<pre><code>Bad mask /28 for address 148.26.1.176
</code></pre>

<p>Is it outside the permissible range?</p>
","<p>If you are using /28 network mask then 148.26.1.176 is the network address and therefore is not an assignable IP address for this subnet. </p>

<p>For subnet 148.26.1.176/28 the range of assignable IP address is 148.26.1.177 to 148.26.1.190, as 148.26.1.176 is the network address and 148.26.1.191 is the broadcast address</p>
","1994"
"Is ""IPv10"" a joke or a serious RFC draft?","26704","","<p><a href=""https://datatracker.ietf.org/doc/draft-omar-ipv10/?include_text=1"" rel=""noreferrer""><em>Internet Protocol version 10 (IPv10) Specification</em></a></p>

<p>The name is funny (IPv4 + IPv6 == IPv10), but the actual proposal looks strange (one more packet format to battle incompatibility between packet formats).</p>

<p>Is it a normal proposal that have balanced pros and cons or just a minimally viable document to make fun of ""IPv10"" with a serious face?</p>

<p>If serious, please describle it in a ""tl;dr"" fashion. Why this and not another   transition technology like nat64/teredo?</p>
","<p>As Ron said, anyone can write a proposal. I have a hard time taking proposals seriously from someone who suggests <a href=""https://tools.ietf.org/html/draft-omar-si-00"" rel=""noreferrer"">interconnecting satellites with optical fiber</a>, though.</p>

<p>Also, I can't imagine this actual proposal gaining any momentum, especially due to this note:</p>

<blockquote>
  <p>All Internet connected hosts must be IPv10 hosts to be able to
  communicate regardless the used IP version, and the IPv10 deployment
  process can be accomplished by ALL technology companies developing OSs
  for hosts networking and security devices.</p>
</blockquote>

<p>So, to solve the problem of IPv4-only hosts not being able to talk to IPv6-only hosts (and vice versa) you need to implement <em>another</em> protocol: IPv10. Then, why bother with that and not just implement IPv6 on that IPv4-only host and be done with it.</p>

<p>In addition, as can be read in <a href=""https://tools.ietf.org/html/rfc7059"" rel=""noreferrer"">RFC7059</a>, there are already more than enough tunnel mechanisms available which can be used to solve parts of this problem.</p>

<p>To be honest, I think the author is hoping on some commercial success by claiming copyright, as can be read in <a href=""https://twitter.com/The_Road_Series/status/868140346177355777"" rel=""noreferrer"">these tweets</a>:</p>

<blockquote>
  <p>ANNOUNCEMENT: Protecting the Copyright, The #IPv10 and KHALED Routing Protocol (#KRP or #RRP) are developed by @The_Road_Series CEO.</p>
  
  <p>They MUST NOT be represented or published by any organization without approval from their developer @Eng_Khaled_Omar</p>
  
  <p>Today 26th of May, 2017, a 2nd request was sent to the ietf for removing #IPv10 #KRP (#RRP) drafts from their repository.</p>
</blockquote>
","44012"
"NACK vs. ACK? When to use one over the other one?","26318","","<p>Personally I don't even feel that there is a need for ACK. It's faster if we just send NACK(n) for the lost packets instead of sending an ACK for each received packet. So when/which situations would one use ACK over NACK and viceversa?</p>
","<p>The reason for the ACK is that a NACK is simply not sufficient.  Let's say I send you a data stream of X segments (let's say 10 for simplicity).</p>

<p>You are on a bad connection, and only receive segments 1, 2, 4, and 5.  Your computer sends the NACK for segment 3, but doesn't realize there should be segments 6-10 and does not NACK those.</p>

<p>So, I resend segment 3, but then my computer falsely believes the data is successfully sent.</p>

<p>ACKs provide some assurance that the segment has arrived at the destination.</p>

<p>If you want the application to deal with order of data and retransmissions, you can simply choose to utilize a protocol like UDP (for instance, like TFTP does).</p>
","6916"
"Difference between unresponsive (*) and unreachable (!H) hosts in traceroute output","26154","","<p>When running traceroutes some hops return * which as far as I know means that the host is not responding to ICMP echo request, and some other hops (mainly the last) return <strong>!H</strong> which according to the man pages it means that the host is <em>unreachable</em>. What does <em>unreachable</em> means? That there's no known route to that address? </p>
","<p>The simple difference is that for an unreachable host, the last hop router is returning an <a href=""http://en.m.wikipedia.org/wiki/Internet_Control_Message_Protocol#Destination_unreachable"" rel=""nofollow"">ICMP destination unreachable</a> response.</p>

<p>Most routers will hardware process ACLs or rate limits, but generation of ICMP responses require CPU resources so it is common practice to not generate them.</p>
","16458"
"Is the ""default VLAN"" simply the default native (untagged) VLAN on all interfaces that have no configuration?","25864","","<p>... or does the ""default VLAN"" have some wider meaning?</p>

<p>Also, can it / should it be changed?  For instance, if a switch is going into part of a network that is only one VLAN and it's not VLAN 1, is it possible to make the ""default"" / native VLAN on all ports a particular VLAN using one global command, or is the preferred method to make all ports access ports and set the access VLAN to 10 on each of them?</p>
","<p>This is an often confused point for people new to the Networking, in particular to people coming up the Cisco track, due to Cisco's over emphasis on this point.  It is more or less just a terminology thing.  Let me explain.</p>

<p>The 802.1q standard defines a method of <a href=""http://www.practicalnetworking.net/stand-alone/vlans/#tagged-untagged"" rel=""nofollow noreferrer"">tagging</a> traffic between two switches to distinguish which traffic belongs to which VLANs.  In Cisco terms, this is what happens on a ""<a href=""http://www.practicalnetworking.net/stand-alone/vlans/#trunk_port"" rel=""nofollow noreferrer"">trunk</a>"" port.  I've seen other vendors refer to this as a ""tagged"" port.  In this context, it means the same:  <a href=""http://www.practicalnetworking.net/stand-alone/vlans/#dot1q-tag"" rel=""nofollow noreferrer"">adding an identifier to frames</a> to indicate what VLAN the frame belongs to.  Terminology aside, the main think to keep in mind is a VLAN tag is necessary, because often the traffic traversing two switches belongs to multiple VLANs, and there must be a way to determine which 1's and 0's belong to which VLAN.</p>

<p>But what happens if a trunk port, who is expecting to receive traffic that includes the VLAN tag, receives traffic with no tag?  In the predecessor to 802.1q, known as ISL (cisco proprietary, but archaic, no one supports it anymore, not even Cisco), untagged traffic on a trunk would simply be dropped.</p>

<p>802.1q however, provided for a way to not only receive this traffic, but also associate it to a VLAN of your choosing.  This method is known as setting a <strong><a href=""http://www.practicalnetworking.net/stand-alone/vlans/#native-vlan"" rel=""nofollow noreferrer"">Native VLAN</a></strong>.  Effectively, you configure your trunk port with a Native VLAN, and whatever traffic arrives on that port without an existing VLAN tag, gets associated to your Native VLAN.  </p>

<p>As with all configuration items, if you do not explicitly configure something, usually some sort of default behavior exists.  In the case of Cisco (and most vendors), the <strong>Default <em>Native</em> VLAN</strong> is VLAN 1.  Which is to say, if you do not set a Native VLAN explicitly, any <em>untagged</em> traffic received on a trunk port is automatically placed in VLAN 1.</p>

<p>The trunk port is the ""opposite"" (sort of) from what is known as an <strong><a href=""http://www.practicalnetworking.net/stand-alone/vlans/#access_port"" rel=""nofollow noreferrer"">Access Port</a></strong>.  An access port sends and expects to receive traffic with no VLAN tag.  The way this can work, is that an access port also only ever sends and expects to receive traffic <em>belonging to one VLAN</em>.  The access port is statically configured for a particular VLAN, and any traffic received on that port is internally associated on the Switch itself as belonging to a particular VLAN (despite not tagging traffic for that VLAN when it leaves the switch port). </p>

<p>Now, to add to the confusing mix.  Cisco books will often refer to the ""default VLAN"".  The <strong>Default VLAN</strong> is simply the VLAN which all Access Ports are assigned to until they are explicitly placed in another VLAN.  In the case of Cisco switches (and most other Vendors), the Default VLAN is usually VLAN 1.  Typically, this VLAN is only relevant on an Access port, which is a port that sends and expects to receive traffic without a VLAN tag (also referred to an 'untagged port' by other vendors).</p>

<p>So, to summarize:</p>

<ul>
<li><a href=""http://www.practicalnetworking.net/stand-alone/configuring-vlans/#trunk_native"" rel=""nofollow noreferrer"">The <strong>Native VLAN</strong> can change</a>.  You can set it to anything you like.</li>
<li><a href=""http://www.practicalnetworking.net/stand-alone/configuring-vlans/#access_vlan"" rel=""nofollow noreferrer"">The <strong>Access Port VLAN</strong> can change</a>.  You can set it to anything you like. </li>
<li>The <strong>Default Native VLAN</strong> is always 1, this can not be change, because its set that way by Cisco</li>
<li>The <strong>Default VLAN</strong> is always 1, this can not be changed, because it is set that way by Cisco</li>
</ul>

<hr>

<p>edit:  forgot your other questions:</p>

<blockquote>
  <p>Also, can it / should it be changed?</p>
</blockquote>

<p>This is largely an opinion question.  I tend to agree with this school of thought:</p>

<p>All unused ports should be in a specific VLAN.  All active ports should be explicitly set on to a particular VLAN.  Your switch should then prevent traffic from traversing the uplink into the rest of your network if the traffic belongs on VLAN1, or the VLAN you are using for unused ports.  Everything else should be allowed up the uplink.</p>

<p>But there are many different theories behind this.  As well as differing requirements which would prevent having such a restricted switch policy (scale, resources, etc).</p>

<blockquote>
  <p>For instance, if a switch is going into part of a network that is only
  one VLAN and it's not VLAN 1, is it possible to make the ""default"" /
  native VLAN on all ports a particular VLAN using one global command,
  or is the preferred method to make all ports access ports and set the
  access VLAN to 10 on each of them?</p>
</blockquote>

<p>You can not change the default Cisco configurations.  You can use the ""interface range"" to put all ports in a different VLAN in one go.  You don't really need to change the Native VLAN on the uplink trunk, so long as the other switch is using the same Native VLAN.  If you really want to spare the switch from adding the VLAN Tag, you could get creative and do the following (although, its probably not recommended).</p>

<p>Leave all access ports in the VLAN1.  Leave the Native VLAN at its default (VLAN1).  On the uplink switch, set the port as a trunk port.  And set its Native VLAN to the VLAN you want the lower switch to be a part of.  Since the lower switch will send traffic to the upper switch untagged, the upper switch will receive it and associate it with what <em>it considers</em> the Native VLAN.</p>
","19379"
"Protocols: EIGRP vs OSPF","25605","","<p>EIGRP and OSPF are both IGP protocols, the former is a mostly Cisco protocol and the latter is a well established open standard. What are the benefits of one over the other?</p>

<p>Put another way, when deploying a network, why choose one over the other? If you have mixed devices the choice would obviously be OSPF, but what if you are running a Cisco only shop? Are there any features where EIGRP excels compared to OSPF that would make it feasible to only deploy EIGRP?</p>
","<p>EIGRP is now an IETF draft so it's no longer proprietary. See <a href=""http://tools.ietf.org/html/draft-savage-eigrp-01"" rel=""nofollow"">http://tools.ietf.org/html/draft-savage-eigrp-01</a></p>

<p>If we look at EIGRP with default settings and OSPF with default settings and there are multiple loop free paths to a destination then EIGRP will converge much faster because it keeps what are called feasible successors in it's topology database. These are basically loop free alternatives to the best path. EIGRP also has summarization at any point in the network. It also has stub feature which is useful when you don't want to use a router for transit. Commonly deployed in DMVPNS. EIGRP is also less confusing than OSPF because it does not have different network types and EIGRP is easier to deploy in hub and spoke scenarios.</p>

<p>EIGRP uses a flat network without areas, this can both be an advantage and disadvantage.</p>

<p>OSPF is obviously an open standard so it's the logical choice if you have multiple vendors. It can perform well but it requires that you tweak SPF timers because by default in IOS there is a 5 second wait before running the SPF algorithm. OSPF uses areas which means you can segment the network more logically. OSPF can only summarize between areas. OSPF is link state so it has a better view of the entire network than EIGRP before it runs the SPF algorithm. Network administrators will usually be more comfortable with OSPF because it's more commonly deployed.</p>

<p>Both protocols have advantages and disadvantages. But the common answer that EIGRP should be discarded because being proprietary is not entirely true any longer.</p>
","148"
"Cisco ASA site-to-site VPN failover","24479","","<p>We recently replaced international MPLS with new ASA 5510s and site-to-site VPNs.  However, when we deployed this we ran into a problem where each remote location has 2 ISPs for redundancy, but when enabling the VPN on both interfaces it flaps between the two and the tunnel is up and down as the tunnel gets torn down and moved between ISPs.  Cisco has been working on this for 8 months now and we still don't have stable tunnels with multiple ISPs.</p>

<p>Remote Office:  </p>

<pre><code>access-list RWS_TUNNEL remark Interesting traffic for IND-RWS tunnel
access-list RWS_TUNNEL extended permit ip object-group BNG_tunnel_NETS object-group CORP_tunnel_NETS
crypto map RWS_TUNNEL 1 match address RWS_TUNNEL
crypto map RWS_TUNNEL 1 set peer 216.xxx.102.2 
crypto map RWS_TUNNEL 1 set transform-set IND-RWS
tunnel-group 216.xxx.102.2 type ipsec-l2l
tunnel-group 216.xxx.102.2 ipsec-attributes
 pre-shared-key *****


route outside 0.0.0.0 0.0.0.0 216.xxx.206.1 1 track 2
route outside2 0.0.0.0 0.0.0.0 182.xxx.26.229 100
sla monitor 55
 type echo protocol ipIcmpEcho 63.251.61.142 interface outside
 num-packets 5
 timeout 1000
 frequency 10
sla monitor schedule 55 life forever start-time now
track 2 rtr 55 reachability
</code></pre>

<p>Central office:  </p>

<pre><code>access-list BNG_TUNNEL remark Interesting traffic for IND-RWS tunnel
access-list BNG_TUNNEL extended permit ip object-group CORP_tunnel_NETS object-group BNG_tunnel_NETS 

route outside2 0.0.0.0 0.0.0.0 216.xxx.102.1
crypto map BNG_TUNNEL 1 match address BNG_TUNNEL
crypto map BNG_TUNNEL 1 set peer 182.xxx.26.230 216.xxx.206.4
crypto map BNG_TUNNEL 1 set transform-set L2L

tunnel-group 182.xxx.26.230 type ipsec-l2l
tunnel-group 182.xxx.26.230 ipsec-attributes
 pre-shared-key *****
tunnel-group 216.xxx.206.4 type ipsec-l2l
tunnel-group 216.xxx.206.4 ipsec-attributes
 pre-shared-key *****
</code></pre>

<p>So what I've found is that when ISAKMP is enabled on both outside interfaces (remote office) and both IPs are configured as peers (central office) the VPN comes up successfully on both interfaces, but at some point will begin flapping between IPs.  This is true with or without the SLA Monitoring, so even if the routes are all static, behaviour still occurs.</p>

<p>Any insight is appreciated.</p>
","<p>I have been migrating sites away from policy-based VPNs for just this reason. Policy-based VPNs are too unpredictable when it comes to failover behavior. I much prefer route-based IPsec tunnels, either point-to-point or DMVPN. Unfortunately, to my knowledge the ASA platform still doesn't support route-based tunnels.</p>
","66"
"Finding the network and host address, and maximum number of host addresses","24418","","<p>A subnet of an IP network has a range of IP host address from
 <strong>172.19.40.1</strong> to <strong>172.19.47.254</strong>. </p>

<ul>
<li>What is the <strong>maximum number of host addresses</strong> that can exist on this subnetwork?
I'm googling but not found a clear answer. how should we <strong>compute</strong> maximum number of host addresses?</li>
</ul>
","<blockquote>
  <p>A subnet of an IP network has a range of IP host address from 172.19.40.1 to 172.19.47.254.</p>
  
  <p>What is the maximum number of host addresses that can exist on this subnetwork? I'm 
   googling but not found a clear answer. how should we compute maximum number of host addresses?</p>
</blockquote>

<h3>Method 1</h3>

<p>Let's use a simple method to find this...</p>

<p>IP addresses contain four 8-bit integers; 8-bit integers have a maximum value of 255.  Think of it like this... if we merely build a sequence of third-octets from 40 to 47 and account for the hosts, we'll find the answer with minimal math...</p>

<ul>
<li>172.19.40.1 through 172.19.40.255 = 255 hosts</li>
<li>172.19.41.0 through 172.19.41.255 = 256 hosts</li>
<li>172.19.42.0 through 172.19.42.255 = 256 hosts</li>
<li>172.19.43.0 through 172.19.43.255 = 256 hosts</li>
<li>172.19.44.0 through 172.19.44.255 = 256 hosts</li>
<li>172.19.45.0 through 172.19.45.255 = 256 hosts</li>
<li>172.19.46.0 through 172.19.46.255 = 256 hosts</li>
<li>172.19.47.0 through 172.19.47.254 = 255 hosts</li>
</ul>

<p>Number of hosts = 2*255 + 6*256 = 2046 hosts</p>

<h3>Method 2</h3>

<p>Use this method to find the number of hosts between two arbitrary IP addresses... convert the two 32-bit IP addresses to integers and subtract...</p>

<ul>
<li>172.19.40.1 => 2886936577</li>
<li>172.19.47.254 => 2886938622</li>
</ul>

<p>2886938622 - 2886936577 + 1 = 2046 hosts</p>

<p>Note that I added an extra host in the subtraction, since you're including the first host in the list of available hosts.</p>

<p>As someone mentioned below you can also use the host bits of the netmask, if you're merely calculating the number of hosts in an IP CIDR block.</p>

<p><em>How to convert an IPv4 addess to decimal</em>:</p>

<p>172*256**3 + 19*256**2 + 40*256**1 + 1*256**0 = 2886936577</p>
","7428"
"What layer of the OSI model deals with ports?","24316","","<p>I've read that the session layer is also called the ports layer, and a CBT nugget video implied ports were a layer 5 thing. </p>

<p>I always thought they were layer 4, just because I guess. (well and tcp and udp have the ports)</p>

<p>Strangely I don't get much for results on this, maybe it doesn't matter.</p>
","<p>TCP or UDP ports are defined in either layer 4 of the OSI model or layer 3 of the TCP/IP model, both are defined as the 'transport' layer.</p>

<p>OSI layer 5 'session layer' uses the ports defined in layer 4 to create sockets and sessions between communicating devices/programs/etc.</p>

<p>The result I got from Google that actually mentioned 'Ports Layer' is a completely incorrect page on a known link-farming site, so take it with a grain of salt. I don't know why CBT would refer to layer 5 with that name, but I don't have the video to watch.</p>
","16999"
"Communication between different subnet MASKS with IP address that works for either","24196","","<p>This may be a dumb question.  Actually I'm sure of it, but i'd like a thorough explanation for it so i can wrap my head around it</p>

<p>consider a switch with two (or more) connected devices, with similar IP addresses but different subnet MASKS.  No gateways/routers/vlans.  Pure layer 2.  </p>

<p>A: 1.1.1.1/24 (255.255.255.0)</p>

<p>B: 1.1.1.2/22 (255.255.252.0)</p>

<p>C: 1.1.1.3/21 (255.255.248.0)</p>

<p>(assume only the digits in the last octet of the IP address change.  all IP addresses are ""/24"" ip addresses (10.3.2.x) </p>

<p>How can A and B (and/or C) communicate?  notice the subnet masks are /24, /22, /21, but the IP addresses themselves could be said to follow the /24 paradigm (only the last octet is different per IP address)</p>

<p>is the subnet mask irrelevant in this case?</p>

<p>what effect is had on the broadcast domains?</p>

<p>any other effects?  UDP vs TCP?</p>
","<p>Edit: Re-do the answer as the IP's in the question changed.</p>

<p>Note1: It is <strong>WRONG</strong> to route different subnet masks in the same network/vlan this is just a explanations as to why it work's in <strong>certain cases</strong> for certain specific IP's.</p>

<p>Note2: Even if the subnets provided were in different vlans, it would be a <strong>Broken</strong> configuration as the subnet's overlap</p>

<p>IP routing on a host is configured with three pieces of information.</p>

<ol>
<li>IP Address</li>
<li>Mask</li>
<li>Gateway.</li>
</ol>

<p>The Mask splits the IP into a upper and lower half (In binary format).  The first half (where the mask is all ones) is the network and the second half is the host.</p>

<p>All IP's in the same network  IP/mask  can talk to each other directly, if the network portion does not match the Gateway is used to router the packets.</p>

<p>A: 1.1.1.1/24 (255.255.255.0)
Network 1.1.1.0    Host 0.0.0.1 (HostRange 0.0.0.1-0.0.0.254)
IpRange 1.1.1.1 - 1.1.1.254 (Excluding network and broadcast)</p>

<p>B: 1.1.1.2/22 (255.255.252.0)
Network 1.1.0.0    Host 0.0.1.2   (HostRange 0.0.0.1-0.0.3.254)
IpRange 1.1.0.1 - 1.1.3.254 (Excluding network and broadcast)</p>

<p>C: 1.1.1.3/21 (255.255.248.0)
Network 1.1.0.0    Host 0.0.1.3   (HostRange 0.0.0.1-0.0.7.254)
IpRange 1.1.0.1 - 1.1.7.254 (Excluding network and broadcast)</p>

<p>The mask is a binary mask, all ones and then all zeros, total length for IPv4 is 8x4=32 bit.</p>

<p>Answer: If you have a host1 talking to a Host2 and according to host 1, host 2 is in the same Network(IP/mask) it will send packets directly.</p>

<p>In the provided example, although misconfiguration the Network portion of ip A, B and C matches.</p>

<p>This would break down if i chose in the same subnets different IP's, they would not be able to ping each other with out the assistance of a L3/Router to route between the subnets.</p>

<p>AA. 1.1.1.1/24</p>

<p>BB. 1.1.2.2/22</p>

<p>CC. 1.1.7.1/21</p>
","19832"
"Why 192.168.*.* for local addresses?","24085","","<p>The standard I've seen so far is to use 192.168.*.* IP addresses for devices on the local network.</p>

<p>Why this combination? If it were me, I would have chosen something simpler, like 1.0.*.*. What's the historical reason?</p>
","<p><strong>Note: Unless we can get one of the original authors of <a href=""http://tools.ietf.org/html/rfc1918"">RFC 1918</a>/<a href=""http://tools.ietf.org/html/rfc1597"">RFC 1597</a> or someone from InterNIC/RIPE NCC at that time (1994-1996) to comment*, we may be left at taking guesses, and the answers to this question being mostly opinion based.</strong></p>

<hr>

<p>Per <a href=""http://tools.ietf.org/html/rfc1918"">RFC 1918</a>, the following three ranges are reserved for use on private networks:</p>

<pre><code>10.0.0.0        -   10.255.255.255  (10/8 prefix)
172.16.0.0      -   172.31.255.255  (172.16/12 prefix)
192.168.0.0     -   192.168.255.255 (192.168/16 prefix)
</code></pre>

<p>This is why you would see them utilized for devices on the local network.</p>

<p>The reasoning behind at least parts of each of these three ""private"" address ranges is fairly straightforward, but again outside of logic, these are guesses based upon my readings over the years.</p>

<p>First consider that the classful networks are as follows (source <a href=""http://en.wikipedia.org/wiki/Classful_network"">Wikipedia article on Classful Network</a>):</p>

<pre><code>Class A
  0.  0.  0.  0 = 00000000.00000000.00000000.00000000
127.255.255.255 = 01111111.11111111.11111111.11111111
                  0nnnnnnn.HHHHHHHH.HHHHHHHH.HHHHHHHH

Class B
128.  0.  0.  0 = 10000000.00000000.00000000.00000000
191.255.255.255 = 10111111.11111111.11111111.11111111
                  10nnnnnn.nnnnnnnn.HHHHHHHH.HHHHHHHH

Class C
192.  0.  0.  0 = 11000000.00000000.00000000.00000000
223.255.255.255 = 11011111.11111111.11111111.11111111
                  110nnnnn.nnnnnnnn.nnnnnnnn.HHHHHHHH

Class D
224.  0.  0.  0 = 11100000.00000000.00000000.00000000
239.255.255.255 = 11101111.11111111.11111111.11111111
                  1110XXXX.XXXXXXXX.XXXXXXXX.XXXXXXXX

Class E
240.  0.  0.  0 = 11110000.00000000.00000000.00000000
255.255.255.255 = 11111111.11111111.11111111.11111111
                  1111XXXX.XXXXXXXX.XXXXXXXX.XXXXXXXX
</code></pre>

<p>As you can see, each one of the three RFC1918 ranges cuts out a private block from one of the old ""classful"" network ranges. (Class A, Class B, and Class C in this case.)</p>

<p>To quote <a href=""http://www.mugglenet.com/books/quotes/dumbledore.shtml"">Dumbledore,</a> ""From this point forth, we shall be leaving the firm foundation of fact and journeying together through the murky marshes of memory into thickets of wildest guesswork.""</p>

<p>The <a href=""http://www.iana.org/"">IANA</a> had been assigning addresses for many years before the inception of <s>RFC 1918 (February 1996)</s>. (Actually the private ranges were first put forth in <a href=""http://tools.ietf.org/html/rfc1597"">RFC 1597</a> in March 1994.)  For example, if you conduct a <code>whois 8.0.0.0</code> lookup, you can see that Level 3 had this block assigned on 1992-12-01.</p>

<p>Therefore it can be assumed that the authors of RFC1918 had to work with the IANA/<a href=""http://en.wikipedia.org/wiki/Jon_Postel"">Jon Postel</a> to find available ranges, giving us the private ranges listed above.</p>

<p>But again, unless someone directly involved with the process* speaks up, this may remain guesswork.</p>

<p>*<sub>Or just someone with better Google-foo than myself.  I was unable to find a good primary source for this information.</sub></p>
","5830"
"What OSI layer do Access Points operate on?","24077","","<p>I am studying for CCNA. In my book I read that wireless access points belong to OSI layer 2. I did some research and I found that is correct. This raised lots of questions in my head so I hope I don't get on your nerves :P</p>

<p>I know that these devices are connected to switches or routers, I also know that AP's use CSMA-CA (at layer 2).</p>

<ol>
<li><p>Is this the only reason why they are Layer 2?</p></li>
<li><p>Is there some kind of switching table inside the AP where it associates MAC's with output interfaces? What logical stuff does an AP have inside it? I ask this because if it has to forward packets it has to choose whether to send to the air or to the switch or router direclty connected to it.</p></li>
</ol>
","<p>Strictly speaking, access points are a L2 device.  Their primary function is to bridge 802.11 WLAN traffic to 802.3 Ethernet traffic.</p>

<p>However, in the real world, enterprise wireless vendors often push more functionality to either the AP itself and/or tie them into a controller, with the end result that they often incorporate functionality from higher layers as well.</p>

<p>I don't entirely follow #1, but neither the connection to a switch or router nor the use of CSMA-CA has anything to do with their function as a L2 device.  It is a L2 device because that is the layer of the network where it is designed to function.  It doesn't care nor need L3 or above to operate and allow devices to communicate (again strictly speaking).</p>

<p>As for #2, yes, an AP (or any bridge) needs to keep track of which interface any individual device is connected.  In general (and simply), they work on the principle of frames destined to an associated station gets forwarded out the wireless interface and any other frames get forwarded out the wired interface (or sent to the controller).</p>
","2674"
"Inter-VLAN Routing on a ProCurve 2920","23571","","<p>I've been bashing my head against this for far to long. I'm hoping someone can help me out.</p>

<p>I'm rebuilding a clients network and this is my first kick at routing. I decided to keep things simple. We are using 3x HP ProCurve 2920's. Two of them service user connections and the third one will act as our router and be where our server and other network uplink to.</p>

<p>Here is my VLAN layout:</p>

<pre><code>VLAN1 - Legacy / 192.168.11.0/24
VLAN10 - General Students / 10.0.0.0/23
VLAN11 - General Staff / 10.0.20.0/23
VLAN20 - Staff Wireless / 10.0.100.0/23
VLAN21 - Student Wireless / 10.0.120.0/23
VLAN22 - Public Wireless / 10.0.140.0/23
VLAN30 - Servers / 10.0.200.0/23
VLAN40 - Management / 10.0.220.0/23
</code></pre>

<p>VLAN1 is the existing flat network. I am trying not to disrupt network outages while I get things working so I've left it in place on the new ProCurves. VLAN1 is currently working just fine but I suspect that is because DHCP is still handing out the firewalls IP as the default gateway and not the new .254 address I've created.</p>

<p>Our firewall is a Cisco RV016 and is currently in gateway mode with RIP disabled. Once I get inter-VLAN routing working I suspect I either need to create a static route that points to the Cisco for 0.0.0.0/0.0.0.0 or enable RIP routing on the firewall. For now I want to get inter-VLAN routing work and I'll tackle the firewall after.</p>

<p>I've done the following on all three switches:</p>

<ul>
<li>Enabled Routing</li>
<li>Defined VLANs</li>
<li>Configured tagging for the VLANs on the uplink ports</li>
</ul>

<p>I've done the following on our routing switch:</p>

<ul>
<li>Given each VLAN an IP address to act as the VLANs gateway (all end in .254)</li>
<li>Enabled RIPv2 on all VLANs (including VLAN1)</li>
</ul>

<p>Here is the switch config of our routing switch:</p>

<pre><code>; J9729A Configuration Editor; Created on release #WB.15.16.0008
; Ver #06:0c.fc.f3.ff.37.2d:e0

hostname ""LKS-S-04""
module 1 type j9729a
trunk 45-46 trk1 lacp
trunk 47-48 trk2 lacp
sntp 300
sntp server priority 1 192.168.11.10
no telnet-server
time timezone -480
no web-management
ip routing
interface 45
   flow-control
   name ""LKS-S-02:45""
   exit
interface 46
   flow-control
   name ""LKS-S-02:46""
   exit
interface 47
   flow-control
   name ""LKS-S-03:47""
   exit
interface 48
   flow-control
   name ""LKS-S-03:48""
   exit
no snmp-server enable
oobm
   ip address 192.168.11.251 255.255.255.0
   ip default-gateway 192.168.11.1
   exit
router rip
   redistribute connected
   enable
   exit
vlan 1
   name ""VLAN1 - School Scope (LEGACY)""
   untagged 1-44,A1-A2,B1-B2,Trk1-Trk2
   ip address 192.168.11.254 255.255.255.0
   ip rip 192.168.11.254
   exit
vlan 10
   name ""VLAN10 - General Students""
   tagged Trk1-Trk2
   ip address 10.0.1.254 255.255.254.0
   ip helper-address 192.168.11.10
   ip rip 10.0.1.254
   exit
vlan 11
   name ""VLAN11 - General Staff""
   tagged Trk1-Trk2
   ip address 10.0.21.254 255.255.254.0
   ip helper-address 192.168.11.10
   ip rip 10.0.21.254
   exit
vlan 20
   name ""VLAN20 - Staff Wireless""
   tagged Trk1-Trk2
   ip address 10.0.101.254 255.255.254.0
   ip helper-address 192.168.11.10
   ip rip 10.0.101.254
   exit
vlan 21
   name ""VLAN21 - Student Wireless""
   tagged Trk1-Trk2
   ip address 10.0.121.254 255.255.254.0
   ip helper-address 192.168.11.10
   ip rip 10.0.121.254
   exit
vlan 22
   name ""VLAN22 - Public Wireless""
   tagged Trk1-Trk2
   ip address 10.0.141.254 255.255.254.0
   ip helper-address 192.168.11.10
   ip rip 10.0.141.254
   exit
vlan 30
   name ""VLAN30 - Servers""
   tagged Trk1-Trk2
   ip address 10.0.201.254 255.255.254.0
   ip helper-address 192.168.11.10
   ip rip 10.0.201.254
   exit
vlan 40
   name ""VLAN40 - Management""
   tagged Trk1-Trk2
   ip address 10.0.221.254 255.255.254.0
   ip helper-address 192.168.11.10
   ip rip 10.0.221.254
   exit
spanning-tree Trk1 priority 4
spanning-tree Trk2 priority 4
no tftp server
no autorun
no dhcp config-file-update
no dhcp image-file-update
password manager
password operator
</code></pre>

<p>and here is one of my client access switches</p>

<pre><code>; J9729A Configuration Editor; Created on release #WB.15.16.0008
; Ver #06:0c.fc.f3.ff.37.2d:e0

hostname ""LKS-S-02""
module 1 type j9729a
trunk 45-46 trk1 lacp
sntp 300
sntp server priority 1 192.168.11.10
no telnet-server
time timezone -480
no web-management
ip routing
interface 45
   flow-control
   name ""LKS-S-04:45""
   exit
interface 46
   flow-control
   name ""LKS-S-04:46""
   exit
no snmp-server enable
oobm
   ip address 192.168.11.253 255.255.255.0
   ip default-gateway 192.168.11.1
   exit
router rip
   no redistribute connected
   enable
   exit
vlan 1
   name ""DEFAULT_VLAN""
   untagged 1-44,47-48,A1-A2,B1-B2,Trk1
   no ip address
   exit
vlan 10
   name ""VLAN10 - General Students""
   tagged Trk1
   no ip address
   exit
vlan 11
   name ""VLAN11 - General Staff""
   tagged Trk1
   no ip address
   exit
vlan 20
   name ""VLAN20 - Staff Wireless""
   tagged Trk1
   no ip address
   exit
vlan 21
   name ""VLAN21 - Student Wireless""
   tagged Trk1
   no ip address
   exit
vlan 22
   name ""VLAN22 - Public Wireless""
   tagged Trk1
   no ip address
   exit
vlan 30
   name ""VLAN30 - Servers""
   tagged Trk1
   no ip address
   exit
vlan 40
   name ""VLAN40 - Management""
   tagged Trk1
   ip address 10.0.220.2 255.255.254.0
   exit
spanning-tree Trk1 priority 4
no tftp server
no autorun
no dhcp config-file-update
no dhcp image-file-update
password manager
password operator
</code></pre>

<p>If I give a client a static IP on any of the new VLANs it can ping it's default gateway regardless of which switch it's physically plugged into. It can't go any further than that.</p>

<p>Here is a 'show ip route' from the routing switch:</p>

<pre><code>LKS-S-04(config)# show ip route

                                                                     IP Route Entries

  Destination        Gateway         VLAN Type      Sub-Type   Metric     Dist.
  ------------------ --------------- ---- --------- ---------- ---------- -----
  10.0.0.0/23        VLAN10 - Gen... 10   connected            1          0
  10.0.20.0/23       VLAN11 - Gen... 11   connected            1          0
  10.0.100.0/23      VLAN20 - Sta... 20   connected            1          0
  10.0.120.0/23      VLAN21 - Stu... 21   connected            1          0
  10.0.140.0/23      VLAN22 - Pub... 22   connected            1          0
  10.0.200.0/23      VLAN30 - Ser... 30   connected            1          0
  10.0.220.0/23      VLAN40 - Man... 40   connected            1          0
  127.0.0.0/8        reject               static               0          0
  127.0.0.1/32       lo0                  connected            1          0
  192.168.11.0/24    VLAN1 - Scho... 1    connected            1          0
</code></pre>

<p>and from a client access switch:</p>

<pre><code>LKS-S-02(config)# show ip route

                                                                     IP Route Entries

  Destination        Gateway         VLAN Type      Sub-Type   Metric     Dist.
  ------------------ --------------- ---- --------- ---------- ---------- -----
  10.0.220.0/23      VLAN40 - Man... 40   connected            1          0
  127.0.0.0/8        reject               static               0          0
  127.0.0.1/32       lo0                  connected            1          0
</code></pre>

<p>The routes aren't being picked up by the client access switches is my guess but I thought the whole point of RIP was that it took care of that for me.</p>

<p>Any assistance would be greatly appreciated.</p>

<p><strong>Update 1 - 2015-06-18 @ 15:24</strong></p>

<p>I've disabled routing on the two user access switches and disabled RIP on my RS.</p>

<p>It looks like I can put myself on any of those VLANs and ping any of the other new VLANs gateways but not other hosts that are currently on the new VLANs.</p>

<p>I still cannot get out to the internet (even with a default route on the RS to my firewall) AND I cannot access my 192.168.11.0 legacy network with or with out a static route to it assigned to my RS.</p>

<p>Here is the new config for the RS:</p>

<pre><code>; J9729A Configuration Editor; Created on release #WB.15.16.0008
; Ver #06:0c.fc.f3.ff.37.2d:e0

hostname ""LKS-S-04""
module 1 type j9729a
trunk 45-46 trk1 lacp
trunk 47-48 trk2 lacp
sntp 300
sntp server priority 1 192.168.11.10
no telnet-server
time timezone -480
no web-management
ip route 0.0.0.0 0.0.0.0 192.168.11.1
ip route 192.168.11.0 255.255.255.0 192.168.11.1
ip routing
interface 45
   flow-control
   name ""LKS-S-02:45""
   exit
interface 46
   flow-control
   name ""LKS-S-02:46""
   exit
interface 47
   flow-control
   name ""LKS-S-03:47""
   exit
interface 48
   flow-control
   name ""LKS-S-03:48""
   exit
no snmp-server enable
oobm
   ip address 192.168.11.251 255.255.255.0
   ip default-gateway 192.168.11.1
   exit
vlan 1
   name ""VLAN1 - School Scope (LEGACY)""
   no untagged 8-9
   untagged 1-7,10-44,A1-A2,B1-B2,Trk1-Trk2
   ip address 192.168.11.254 255.255.255.0
   exit
vlan 10
   name ""VLAN10 - General Students""
   tagged Trk1-Trk2
   ip address 10.0.1.254 255.255.254.0
   ip helper-address 192.168.11.10
   exit
vlan 11
   name ""VLAN11 - General Staff""
   tagged Trk1-Trk2
   ip address 10.0.21.254 255.255.254.0
   ip helper-address 192.168.11.10
   exit
vlan 20
   name ""VLAN20 - Staff Wireless""
   tagged Trk1-Trk2
   ip address 10.0.101.254 255.255.254.0
   ip helper-address 192.168.11.10
   exit
vlan 21
   name ""VLAN21 - Student Wireless""
   tagged Trk1-Trk2
   ip address 10.0.121.254 255.255.254.0
   ip helper-address 192.168.11.10
   exit
vlan 22
   name ""VLAN22 - Public Wireless""
   tagged Trk1-Trk2
   ip address 10.0.141.254 255.255.254.0
   ip helper-address 192.168.11.10
   exit
vlan 30
   name ""VLAN30 - Servers""
   tagged Trk1-Trk2
   ip address 10.0.201.254 255.255.254.0
   ip helper-address 192.168.11.10
   exit
vlan 40
   name ""VLAN40 - Management""
   untagged 8-9
   tagged Trk1-Trk2
   ip address 10.0.221.254 255.255.254.0
   ip helper-address 192.168.11.10
   exit
vlan 99
   name ""ROUTING""
   tagged Trk1-Trk2
   ip address 10.0.250.4 255.255.255.0
   exit
spanning-tree Trk1 priority 4
spanning-tree Trk2 priority 4
no tftp server
no autorun
no dhcp config-file-update
no dhcp image-file-update
password manager
password operator
</code></pre>

<p>and here is one of the client switches:</p>

<pre><code>; J9729A Configuration Editor; Created on release #WB.15.16.0008
; Ver #06:0c.fc.f3.ff.37.2d:e0

hostname ""LKS-S-02""
module 1 type j9729a
trunk 45-46 trk1 lacp
sntp 300
sntp server priority 1 192.168.11.10
no telnet-server
time timezone -480
no web-management
interface 45
   flow-control
   name ""LKS-S-04:45""
   exit
interface 46
   flow-control
   name ""LKS-S-04:46""
   exit
no snmp-server enable
oobm
   ip address 192.168.11.253 255.255.255.0
   ip default-gateway 192.168.11.1
   exit
vlan 1
   name ""DEFAULT_VLAN""
   no untagged 47
   untagged 1-44,48,A1-A2,B1-B2,Trk1
   no ip address
   exit
vlan 10
   name ""VLAN10 - General Students""
   tagged Trk1
   no ip address
   exit
vlan 11
   name ""VLAN11 - General Staff""
   tagged Trk1
   no ip address
   exit
vlan 20
   name ""VLAN20 - Staff Wireless""
   tagged Trk1
   no ip address
   exit
vlan 21
   name ""VLAN21 - Student Wireless""
   tagged Trk1
   no ip address
   exit
vlan 22
   name ""VLAN22 - Public Wireless""
   tagged Trk1
   no ip address
   exit
vlan 30
   name ""VLAN30 - Servers""
   tagged Trk1
   no ip address
   exit
vlan 40
   name ""VLAN40 - Management""
   untagged 47
   tagged Trk1
   ip address 10.0.220.2 255.255.254.0
   exit
vlan 99
   name ""ROUTING""
   tagged Trk1
   ip address 10.0.250.2 255.255.255.0
   exit
spanning-tree Trk1 priority 4
no tftp server
no autorun
no dhcp config-file-update
no dhcp image-file-update
password manager
password operator
</code></pre>

<p>and routes on the RS:</p>

<pre><code>  Destination        Gateway         VLAN Type      Sub-Type   Metric     Dist.
  ------------------ --------------- ---- --------- ---------- ---------- -----
  0.0.0.0/0          192.168.11.1    1    static               1          1
  10.0.0.0/23        VLAN10 - Gen... 10   connected            1          0
  10.0.20.0/23       VLAN11 - Gen... 11   connected            1          0
  10.0.100.0/23      VLAN20 - Sta... 20   connected            1          0
  10.0.120.0/23      VLAN21 - Stu... 21   connected            1          0
  10.0.140.0/23      VLAN22 - Pub... 22   connected            1          0
  10.0.200.0/23      VLAN30 - Ser... 30   connected            1          0
  10.0.220.0/23      VLAN40 - Man... 40   connected            1          0
  10.0.250.0/24      ROUTING         99   connected            1          0
  127.0.0.0/8        reject               static               0          0
  127.0.0.1/32       lo0                  connected            1          0
  192.168.11.0/24    VLAN1 - Scho... 1    connected            1          0
</code></pre>

<p>and from the firewall: <a href=""https://img.fizi.ca/di/DMIC/firewallRoutes.png"" rel=""nofollow"">https://img.fizi.ca/di/DMIC/firewallRoutes.png</a></p>

<p>and a sample static routes I've configured on the firewall to access the new VLANs: <a href=""https://img.fizi.ca/di/24OO/staticRoutes.png"" rel=""nofollow"">https://img.fizi.ca/di/24OO/staticRoutes.png</a></p>

<p>So close!</p>

<p><strong>Update - 2015-06-18 @ 16:49</strong></p>

<p>Progress. I found the error I made configuring the routes on the RV016. I should have set the gateway to 192.168.11.254 (the IP for VLAN 1 that resides on my RS). That looks like it fixed everything.</p>
","<p>Your access switches operate at layer-2 -- they're ""just switches"". At layer-2, everything funnels back to the routing-switch. The routing switch then moves (""routes"") traffic between vlans. All of this looks fine, so far.</p>

<p>The issue is, you cannot ping anything in 192.168.11.0/24 from any of the other VLANs? (i.e. the firewall and thus the path to the internet) That's because nothing else in the network knows about the other networks. Traffic is getting <em>to</em> 192.168.11.0/24, but the reply will follow the default route to the firewall, or if you ping the firewall, it's default towards the internet.</p>

<p>You should be able to talk to things in the other vlans from any of the new vlans, because they're default gateway is the routing-switch.</p>

<p>(also, I cannot recommend the use of RIP. EVER. Your network is tiny and (mostly) static, so it's unnecessary. The firewall is the only thing that needs to know about the other networks.)</p>
","19330"
"Is it possible to access more than one VLAN?","23467","","<p>If I have a layer 2 switch, is it possible to access two VLANs from one computer?</p>

<ul>
<li>VLAN1: 192.168.1.x with netmask 255.255.255.0</li>
<li>VLAN2: 192.168.2.x with netmask 255.255.255.0</li>
</ul>

<p>If my computer has only one NIC, can it be connected to both VLANs? IF I had two NICs, I know I could do it using two cables, but how to do it with a Layer 2 switch - Cisco 2950?</p>

<p><em>Edit:</em></p>

<p>The OS: Windows 7 Professional</p>

<p>The goal: make a computer access the engineering and the production VLANs to use some NAS and to print in a specific printer </p>
","<p>You could access the two VLANs via a 802.1q trunk on the switchport connected to the computer. The NIC would have to be able to tag packets and recognize tagged packets.</p>

<p>The L2 switch by itself will not allow you to communicate between the two VLANs. You would need a router.</p>
","2564"
"IPv6 address space layout best practices","23353","","<p>I'm comfortable with IPv4 address space allocations. By which I mean: Given services to plan for, or an organization to network, I have a good grasp of how to plan IP address space usage. (or at least, I <em>think</em> I do. :)</p>

<p>Are there any best practices guidance, or case studies, for IPv6 address space layout?</p>
","<p>The layout that we are using for our rollout is:</p>

<ul>
<li>/48 per customer</li>
<li>/56 per customer site (as a subnet of the other /48)</li>
<li>/126 for all point-to-point links in the core, these are all subnets of a /48 used for all core links</li>
</ul>

<p>These sizes are mostly taken from the RIPE advisory <a href=""http://www.ripe.net/internet-coordination/press-centre/understanding-ip-addressing"">here</a>.</p>
","121"
"What does the notation F0/0 and F0/1 mean in this diagram?","23131","","<p>I've recently been taking over an OpenStack environment that makes use of neutron networking with the use of GRE tunneling. We had a problem with network performance and I determined it to be an issue with the MTU setting in certain VM instances being set to the default 1500, whereas they really needed to be set lower, to say 1456 to allow for the encapsulation of the packets within packets over GRE.</p>

<p>While researching this I came upon these 2 sites:</p>

<ul>
<li><a href=""http://techbackground.blogspot.co.uk/2013/06/path-mtu-discovery-and-gre.html"" rel=""nofollow noreferrer"">Path MTU discovery and GRE</a></li>
<li><a href=""http://packetlife.net/blog/2008/aug/18/path-mtu-discovery/"" rel=""nofollow noreferrer"">Path MTU Discovery</a></li>
</ul>

<p>On the second URL there was this diagram:</p>

<p>&nbsp;&nbsp;&nbsp;<img src=""https://i.stack.imgur.com/cALxm.png"" alt=""img1""></p>

<p>What does the F0/0 and F0/1 notation around the router in that diagram mean?</p>
","<p>@3iron's answer gave me the hint that I needed. The notation is denoting that there are multiple NIC interfaces on the router in the diagram and it's making reference to this.</p>

<ul>
<li>F0/0 - interface #1</li>
<li>F0/1 - interface #2</li>
</ul>

<p><strong>NOTE:</strong> The F indicates that the NIC/port is most likely a Fast Ethernet type of connection.</p>

<p><a href=""http://www.cisco.com/c/en/us/support/docs/routers/3725-multiservice-access-router/62611-c2800-62611.html"" rel=""noreferrer"">This diagram from the Cisco website</a> shows them as well. Here's the referenced as Fa 0/1, which I believe is the more typical notation.</p>

<p>&nbsp;&nbsp;<img src=""https://i.stack.imgur.com/jA2yh.png"" alt=""ss#1""></p>

<p>The other interesting take away is that the notation may sometimes include a 3rd digit to denote that the interface being referenced is not built into the Motherboard of the networking gear. The above diagram shows some examples of this, ie. T1 1/0/1. <strong>NOTE:</strong> The 3rd digit prefixes, and indicates which ""slot"" on the Motherboard a port is coming from.</p>

<p>Again the Cisco reference describes these slots like so:</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;<img src=""https://i.stack.imgur.com/VWfe6.png"" alt=""ss#2""></p>

<p>I was also able to dig up this reference: <a href=""http://computernetworkingnotes.com/cisco-devices-administration-and-configuration/router-switch-nomenclature.html"" rel=""noreferrer"">Interface Nomenclature Guide of Router and Switch</a> which describes the reference of F0/0 like so. Take note that there are 2 types of situations:</p>

<ul>
<li>Fixed interface series router</li>
<li>Modular interface series router</li>
</ul>

<p>This notation was originally used for fixed types of routers:</p>

<blockquote>
  <p>In fixed interface series router, the interface nomenclature is type slot_#/ port_#.</p>
</blockquote>

<p>But with the advent of modular routers, that did not denote which addon card (WIC) was being referenced. So the notation was expanded:</p>

<blockquote>
  <ul>
  <li>New naming convention only for WIC slots (WAN Interface Card) is type slot_#/subslot_#/ port_#.</li>
  <li>Ports installed directly on chassis still use classic convention that is type slot_#/ port_#.</li>
  </ul>
</blockquote>

<p>Incidentally that same site had this table which describes the F0/0 notation like this:</p>

<p>&nbsp;&nbsp;&nbsp;<img src=""https://i.stack.imgur.com/Yup0Q.png"" alt=""ss#3""></p>

<p>Additional searches did turn up this URL: <a href=""http://www.dummies.com/how-to/content/standard-router-ports.html"" rel=""noreferrer"">Standard Router Ports</a> which had these types of ports listed:</p>

<blockquote>
  <ul>
  <li><strong>Aux port:</strong> This auxiliary port is used to connect a modem to the router, which can then be used to remotely modify the configuration on the router.</li>
  <li><strong>Attachment Unit Interface (AUI) port:</strong> Before the WIC became a standard for providing expansion through an add-on port, the AUI allowed transceivers to be used, providing you with the ability to add various types of network connections, such as fiber or copper Ethernet connections.</li>
  <li><strong>Serial:</strong> Connects a modem or other serial device to allow a WAN network interface to be used on the router.</li>
  <li><strong>Ethernet/Fast Ethernet/Gigabit Ethernet:</strong> Standard network interfaces used to connect different network segments.</li>
  <li><strong>Console:</strong> Serial configuration port for command-line access to router management and configuration. Refer to Figure 3-1 to see the console port.</li>
  <li><strong>WAN Interface Card (WIC) port:</strong> Because a wide variety of WAN connectivity options are available (for example, T1, ISDN, ADSL), you can use this port to add different interfaces to a standard router.</li>
  <li><strong>Hardware WAN Interface Card (HWIC) port:</strong> With the integration of services into routers, the WIC interface became too limiting. The HWIC interface was created to support a wider variety of hardware expansion options, such as switches and service cards. This port is backward compatible with most older WIC hardware.</li>
  </ul>
</blockquote>

<p>As well as this URL: <a href=""http://www.omnisecu.com/cisco-certified-network-associate-ccna/different-types-of-interfaces-in-a-cisco-router.php"" rel=""noreferrer"">Different types of interfaces in a Cisco Router</a>:</p>

<blockquote>
  <ul>
  <li><strong>Ethernet</strong> - Ethernet is typically Ethernet IEEE 802.3 standard based physical interface, which operates at 10 Mbps speed. The media standard used is 10BaseT.</li>
  <li><strong>Fast Ethernet</strong> - Fast Ethernet is typically Ethernet IEEE 802.3u standard based physical interface which operates at 100 Mbps speed. The media standard used is 100BaseT.</li>
  <li><strong>Gigabit Ethernet</strong> - Gigabit Ethernet is typically Ethernet IEEE 802.3ab standard based physical interface which operates at 1000 Mbps speed. The media standard used is 1000BASE-T</li>
  <li><strong>Serial</strong> - Serial interfaces are typically used for WAN connections from ISP (Internet Service Providers) for connectivity types like Frame Relay, T1, T3, etc.</li>
  <li><strong>FDDI Fiber Distributed Data Interface</strong> - FDDI networks operates at 100 Mbps speed and uses a token-passing mechanism to prevent collisions.</li>
  <li><strong>Token Ring</strong> - Token Ring interfaces can operate at either 4 Mbps or 16 Mbps. In Token Ring networks a token is passed around the network (configured in ring topology), allowing the owner of the token to transmit a frame, to avoid collision.Token Ring networks vanished from networking industry long way back. New Cisco routers do not have a Token Ring interface.</li>
  </ul>
  
  <p><strong>Note:</strong> Only 10Mbps Ethernet interface has a name ""Ethernet"" in a Cisco Router. A 100Mbps Ethernet interface is called a ""FastEthernet"" interface and a 1000Mbps Ethernet interface is called a ""GigabitEthernet"" interface.</p>
</blockquote>

<p>That last bit is a bit more telling. Since Ethernet would historically been used for 10MBps interfaces, the ""F"" in my ""F0/0"" &amp; ""F0/1"" diagram would seem to imply that the interface is a FastEthernet capable connection (10/100MBps). </p>

<p>However, more recently, Ethernet can also be used interchangeably on Gigabit Ethernet as well as 10G Ethernet ports, so you need to pay special attention to the actual equipment that's been referenced by a diagram.</p>

<h3>References</h3>

<ul>
<li><a href=""http://www.cisco.com/c/en/us/support/docs/routers/3725-multiservice-access-router/62611-c2800-62611.html"" rel=""noreferrer"">Interface and Line Numbers in Cisco 1800, 2800 and 3800 Series Routers</a></li>
<li><a href=""http://www.dummies.com/how-to/content/standard-router-ports.html"" rel=""noreferrer"">Standard Router Ports</a></li>
<li><a href=""http://www.omnisecu.com/cisco-certified-network-associate-ccna/different-types-of-interfaces-in-a-cisco-router.php"" rel=""noreferrer"">Different types of interfaces in a Cisco Router</a></li>
</ul>
","18987"
"Introductory level explanation of VLANs","22917","","<p>What's the basic use case(s) for VLANs?</p>

<p>What are the basic design principles?</p>

<p>I'm looking for something like a two paragraph executive summary style answer so I can determine if I need to learn about VLANs to implement them.</p>
","<p>A VLAN (Virtual LAN) is a way of creating multiple virtual switches inside one physical switch. So for instance ports configured to use VLAN 10 act as if they're connected to the exact same switch. Ports in VLAN 20 can not directly talk to ports in VLAN 10. They must be routed between the two (or have a link that bridges the two VLANs).</p>

<p>There are a lot of reasons to implement VLANs. Typically the least of these reasons is the size of the network. I'll bullet list a few reasons and then break each one open.</p>

<ul>
<li>Security</li>
<li>Link Utilization</li>
<li>Service Separation</li>
<li>Service Isolation</li>
<li>Subnet Size</li>
</ul>

<p><strong>Security:</strong>
Security isn't itself achieved by creating a VLAN; however, how you connect that VLAN to other subnets could allow you to filter/block access to that subnet. For instance if you have an office building that has 50 computers and 5 servers you could create a VLAN for the server and a VLAN for the computers. For computers to communicate with the servers you could use a firewall to route and filter that traffic. This would then allow you to apply IPS/IDS,ACLs,Etc. to the connection between the servers and computers.</p>

<p><strong>Link Utilization:</strong>
(Edit)I can't believe I left this out the first time. Brain fart I guess. Link utilization is another big reason to use VLANs. Spanning tree by function builds a single path through your layer 2 network to prevent loops (Oh, my!). If you have multiple redundant links to your aggregating devices then some of these links will go unused. To get around this you can build multiple STP topology with different VLANs. This is accomplished with Cisco Proprietary PVST, RPVST, or standards based MST. This allows you to have multiple STP typologies you can play with to utilize your previously unused links. In example if I had 50 desktops I could place 25 of them in VLAN 10, and 25 of them in VLAN 20. I could then have VLAN 10 take the ""left"" side of the network and the remaining 25 in VLAN 20 would take the ""right"" side of the network.</p>

<p><strong>Service Separation:</strong>
This one is pretty straight forward. If you have IP security cameras, IP Phones, and Desktops all connecting into the same switch it might be easier to separate these services out into their own subnet. This would also allow you to apply QOS markings to these services based on VLAN instead of some higher layer service (Ex: NBAR). You can also apply ACLs on the device performing L3 routing to prevent communication between VLANs that might not be desired. For instance I can prevent the desktops from accessing the phones/security cameras directly.</p>

<p><strong>Service Isolation:</strong>
If you have a pair of TOR switches in a single rack that has a few VMWare hosts and a SAN you could create a iSCSI VLAN that remains unrouted. This would allow you to have an entirely isolated iSCSI network so that no other device could attempt to access the SAN or disrupt communication between the hosts and the SAN. This is simply one example of service isolation.</p>

<p><strong>Subnet Size:</strong>
As stated before if a single site becomes too large you can break that site down into different VLANs which will reduce the number of hosts that see need to process each broadcast.</p>

<p>There are certainly more ways VLANs are useful (I can think of several that I use specifically as an Internet Service Provider), but I feel these are the most common and should give you a good idea on how/why we use them. There are also Private VLANs that have specific use cases and are worth mentioning here.</p>
","758"
"What are the different modes in Cisco routers, and why these modes?","22669","","<p>I want to know on what basis Cisco designed the different modes in their routers.</p>

<p>For example: </p>

<p><code>config</code> mode</p>

<p><code>execution</code> mode</p>

<p>Can any one give the perfect reasons behind the different modes?</p>

<p>What are the configurations that come under <code>execution</code> and <code>config</code> modes?</p>
","<p>Cisco's IOS uses the <a href=""http://www.cisco.com/E-Learning/bulk/public/tac/cim/cib/using_cisco_ios_software/02_cisco_ios_hierarchy.htm"">different <code>EXEC</code> modes</a> as a basic way to control user privileges. These user privilege controls can be delegated through an enable password, the local user database or AAA (RADIUS, TACACS+).</p>

<p>The two <code>EXEC</code> modes are <strong>user mode</strong> and <strong>privileged mode</strong>.</p>

<p><code>user EXEC mode&gt;</code> is limited to an array of show commands, basic reachability tests, such as ping and traceroute, as well as other ways of viewing configurations and status info of a Cisco device without the ability to make changes.</p>

<p><code>privileged EXEC mode#</code> is for users that have been delegated admin privileges and need to make changes, view more show commands and debugs as well as using the ability to move further down the configuration hierarchy (such as global configuration mode, interface configuration mode, <a href=""http://www.cisco.com/en/US/docs/ios-xml/ios/isg/configuration/xe-3s/isg-mqc-ip-sess.html"">MQC</a>, etc).</p>

<p>Additionally, both the user EXEC and privileged EXEC modes are subject to further controls known as <a href=""http://www.cisco.com/en/US/docs/ios/sec_user_services/configuration/guide/sec_cfg_sec_4cli.html#wp1054522"">privilege levels</a>. By default the user EXEC mode has a privilege level of 1(includes all user-level commands) and the privileged EXEC mode has a privilege of 15(full privileges). </p>

<p><a href=""http://www.cisco.com/E-Learning/bulk/public/tac/cim/cib/using_cisco_ios_software/02_cisco_ios_hierarchy.htm"">Here is a nice visual</a> along with more information.</p>
","3346"
"Configuring a Cisco ASA 5505 for routing","22608","","<p>I'll start by pointig out that networking issues have always left me scratching my head. There is something about routing especially that I just haven't had that ""Oh I get it"" moment yet, so it's likely this is a very basic misconfiguration.</p>

<p>I am trying to set up a Cisco ASA 5505 to be connected with a public IP address on one interface, and to have the second interface connect to our internal network. Right now our internal network is on 192.168.1.0/24, and the public IP we have from the ISP is in the 125.x.x.x range. </p>

<p>I have set up 3 interfaces on the ASA,</p>

<ul>
<li><p>Inside </p>

<pre><code>IP: 192.168.1.3
Mask: 255.255.255.0
Ports 1-6
Sec Level 100
</code></pre></li>
<li><p>Outside</p>

<pre><code>IP: 125.x.x.x
Mask: 255.0.0.0
Port 0
Sec Level 0
</code></pre></li>
<li><p>Management</p>

<pre><code>IP: 10.0.0.1
Mask: 255.255.255.0
Port 7
Restricted to management
Restrict flow to Outside (had to do this for licensing reasons)
</code></pre></li>
</ul>

<p>I have an access rule on the firewall that allows IP traffic from any source on the inside network to any less secure network (there is one for both IPv4 and 6).</p>

<p>With the internet-facing router connected to port 0, I connect a computer to port 1 with IP <code>192.168.1.20</code>, Mask <code>255.255.255.0</code> and gateway <code>192.168.1.3</code>. Using this PC I can ping <code>192.168.1.3</code> but no further - I cannot ping the public IP address or <code>8.8.8.8</code>.</p>

<p>If I connect the same PC directly to the router and assign it the public IP address directly I can access the internet no problem. I believe that the issue here is that I need to add some static routes to show the path from inside&lt;->outside, but I just do not grok them well enough to know how to structure them. Any help or suggestions would be very much appreciated.</p>

<p>Edit: See below the running config, with some redactions.</p>

<pre><code>: Saved
:
ASA Version 8.2(1) 
!
hostname AUS-FW-01
domain-name =============.com.au
enable password ============= encrypted
passwd ============= encrypted
names
name 10.61.76.0 CNC-network
name 10.61.73.0 LAN-network
name 192.168.1.0 LEGACY-network
name 10.61.75.0 RANDD-network
name 10.61.74.0 WIRELESS-network
name 10.61.73.5 InternalGateway
name 192.168.1.200 DCServer
name 192.168.1.214 MUVS-TP description Trueform Print Server
!
interface Vlan1
 nameif inside
 security-level 100
 ip address 192.168.1.3 255.255.255.0 
!
interface Vlan2
 nameif outside
 security-level 0
 ip address 125.x.x.10 255.255.255.252 
!
interface Vlan12
 no forward interface Vlan2
 nameif Management
 security-level 0
 ip address 10.0.0.1 255.255.255.0 
 management-only
!
interface Ethernet0/0
 switchport access vlan 2
!
interface Ethernet0/1
!
interface Ethernet0/2
!
interface Ethernet0/3
!
interface Ethernet0/4
!
interface Ethernet0/5
!
interface Ethernet0/6
!
interface Ethernet0/7
 switchport access vlan 12
!
ftp mode passive
clock timezone EST 10
dns domain-lookup outside
dns server-group DefaultDNS
 name-server =============
 name-server =============
 domain-name =============.com.au
same-security-traffic permit intra-interface
access-list outside_access_in remark Email access
access-list outside_access_in extended permit tcp any LEGACY-network 255.255.255.0 eq smtp 
access-list outside_access_in remark ActiveSync Email Access
access-list outside_access_in extended permit tcp any LEGACY-network 255.255.255.0 eq https 
access-list outside_access_in remark Pronto Trueform Printing
access-list outside_access_in extended permit tcp any LEGACY-network 255.255.255.0 eq lpd 
pager lines 24
logging asdm informational
mtu inside 1500
mtu outside 1500
mtu Management 1500
icmp unreachable rate-limit 1 burst-size 1
no asdm history enable
arp timeout 14400
global (outside) 1 interface
nat (inside) 1 0.0.0.0 0.0.0.0
static (inside,outside) tcp interface smtp DCServer smtp netmask 255.255.255.255 
static (inside,outside) tcp interface https DCServer https netmask 255.255.255.255 
static (inside,outside) tcp interface lpd MUVS-TP lpd netmask 255.255.255.255 
access-group outside_access_in in interface outside
route inside LAN-network 255.255.255.0 10.61.79.2 1
route inside LEGACY-network 255.255.255.0 InternalGateway 1
timeout xlate 3:00:00
timeout conn 1:00:00 half-closed 0:10:00 udp 0:02:00 icmp 0:00:02
timeout sunrpc 0:10:00 h323 0:05:00 h225 1:00:00 mgcp 0:05:00 mgcp-pat 0:05:00
timeout sip 0:30:00 sip_media 0:02:00 sip-invite 0:03:00 sip-disconnect 0:02:00
timeout sip-provisional-media 0:02:00 uauth 0:05:00 absolute
timeout tcp-proxy-reassembly 0:01:00
dynamic-access-policy-record DfltAccessPolicy
http server enable
http 10.61.79.0 255.255.255.0 inside
http LAN-network 255.255.255.0 inside
http 10.0.0.0 255.255.255.0 Management
no snmp-server location
no snmp-server contact
snmp-server enable traps snmp authentication linkup linkdown coldstart
crypto ipsec security-association lifetime seconds 28800
crypto ipsec security-association lifetime kilobytes 4608000
telnet timeout 5
ssh timeout 5
console timeout 0
vpdn username ============= password ============= store-local
dhcpd auto_config outside
!

threat-detection basic-threat
threat-detection statistics port
threat-detection statistics protocol
threat-detection statistics access-list
no threat-detection statistics tcp-intercept
webvpn
!
class-map inspection_default
 match default-inspection-traffic
!
!
policy-map type inspect dns preset_dns_map
 parameters
  message-length maximum 512
policy-map global_policy
 class inspection_default
  inspect dns preset_dns_map 
  inspect ftp 
  inspect h323 h225 
  inspect h323 ras 
  inspect rsh 
  inspect rtsp 
  inspect esmtp 
  inspect sqlnet 
  inspect skinny  
  inspect sunrpc 
  inspect xdmcp 
  inspect sip  
  inspect netbios 
  inspect tftp 
!
service-policy global_policy global
prompt hostname context 
Cryptochecksum:=============
: end
asdm location LAN-network 255.255.255.0 inside
asdm location WIRELESS-network 255.255.255.0 inside
asdm location RANDD-network 255.255.255.0 inside
asdm location CNC-network 255.255.255.0 inside
asdm location LEGACY-network 255.255.255.0 inside
asdm location InternalGateway 255.255.255.255 inside
asdm location DCServer 255.255.255.255 inside
asdm location MUVS-TP 255.255.255.255 inside
no asdm history enable
</code></pre>

<p>PS: I wasn't sure if this was a better fit here or on SF. I have no problem with it being moved.</p>
","<p>OK, after looking at your configuration, you are missing one statement:</p>

<pre><code>route outside 0.0.0.0 0.0.0.0 125.x.x.9
</code></pre>

<p>This tells the firewall to forward all Internet traffic to the ISP's router at 125.x.x.9</p>
","6692"
"How would a router with /32 WAN subnet mask communicate with the rest of the Internet?","22337","","<p>I'm studying networking and one of the most basic things I've been told countless times is that computers can't communicate outside of their own subnet.</p>

<p>On the other hand, by looking at some ADSL setups, I've seen that in case where a fixed IP address is assigned to the user's WAN interface, a /32 subnet mask is used for the WAN interface and the default gateway is of course outside of the subnet. </p>

<p>So how would the host with /32 subnet communicate with outside network?</p>

<p>Here's a sort of a diagram of what I have: </p>

<p><img src=""https://i.stack.imgur.com/hO9fd.png"" alt=""Network Diagram""></p>

<p>The DSL modem is set up to act as a bridge so Router0 does authentication and sets up connection via PPPoE to the ISP. The Router0 gets  an IP address on its WAN interface  (Fa0/0 on the diagram) which is from a /32 subnet using IPCP. It only receives a single IP address on the WAN interface and IP aliasing isn't being used here.</p>

<p>I understand what goes on from the Router0 to the LAN. What I don't understand is how does the Router0 communicate with ISP.</p>
","<p>DSL tends to use PPPoE, which means the link is point-to-point.  A /32 is perfectly valid here. In fact, no address at all is still valid -- one would need routable addresses beyond the PPP link, 'tho.  In this case, it works because there's only one possible destination on the link.  Every packet put on that link will be processed by the other end, and v.v.</p>

<pre><code>blue-gw#show int di1
 Dialer1 is up, line protocol is up (spoofing)
 Description: Bellsouth.net DSL
 Internet address is 74.167.x.x/32

Routing:
 Gateway of last resort is 72.157.24.5 to network 0.0.0.0
 ...
      72.0.0.0/32 is subnetted, 1 subnets
 C       72.157.24.5 is directly connected, Dialer1
      74.0.0.0/32 is subnetted, 1 subnets
 C       74.167.x.x is directly connected, Dialer1
</code></pre>
","610"
"Interpreting TTL in ping results","22219","","<p>I work for a VoIP service provider and I am working an issue with a customer who has a cable internet connection that's throwing me for a loop.</p>

<p>He has a single block, which we'll pretend is 70.141.15.0/29, with the gateway at .1 and routers at .2 and .3. Both routers are connected to his cable modem which is, to the best of our knowledge, set to whatever cable providers imagine ""bridge mode"" is.</p>

<p>I am pinging both these routers simultaneously from the same box, which is a linux system connected to fiber from (probably) Level(3). So needless to say, nobody on the planet knows how many nodes there are between here and there. But check out the ping results.</p>

<p>To the first router:</p>

<pre><code>64 bytes from 70.141.15.2: icmp_seq=2637 ttl=47 time=45.0 ms
64 bytes from 70.141.15.2: icmp_seq=2638 ttl=47 time=39.2 ms
64 bytes from 70.141.15.2: icmp_seq=2639 ttl=47 time=37.3 ms
64 bytes from 70.141.15.2: icmp_seq=2640 ttl=47 time=46.1 ms
64 bytes from 70.141.15.2: icmp_seq=2641 ttl=47 time=45.8 ms
64 bytes from 70.141.15.2: icmp_seq=2642 ttl=47 time=46.5 ms
64 bytes from 70.141.15.2: icmp_seq=2643 ttl=47 time=40.9 ms
</code></pre>

<p>From the second:</p>

<pre><code>64 bytes from 70.141.15.3: icmp_seq=631 ttl=239 time=54.7 ms
64 bytes from 70.141.15.3: icmp_seq=637 ttl=239 time=40.5 ms
64 bytes from 70.141.15.3: icmp_seq=638 ttl=239 time=40.3 ms
64 bytes from 70.141.15.3: icmp_seq=639 ttl=239 time=38.4 ms
64 bytes from 70.141.15.3: icmp_seq=640 ttl=239 time=44.9 ms
64 bytes from 70.141.15.3: icmp_seq=641 ttl=239 time=38.4 ms
64 bytes from 70.141.15.3: icmp_seq=642 ttl=239 time=38.8 ms
</code></pre>

<p>Check out the TTL values. Does this make sense? These devices are directly adjacent to each other, plugged into that modem via separate switch ports. How can one appear to have nearly 200 more hops? From pinging other sites I'm getting the impression that TTL is just not implemented the way I think it is. I doubt there are 200 hops between me and 4.2.2.2, or woot.com, yet I get under 50 TTL results from both of those.</p>

<p>One of these routers (the one with the higher TTL) is from Fortinet, while the other one is a custom Linux-based device. I'm pretty sure the Forti has a home-rolled network stack, while the Linux box uses whatever came with the source tarball the hardware devs downloaded. Is it likely that ICMP echo is implemented in a bizarre form on one of these and deliberately sends all replies with a TTL of 50? </p>

<p>I also notice that one of the only sites I can find that replies with sane-looking TTL is slashdot, and I can imagine that their servers and routers might be a little less ""whatever we found in the garage"" than the average website, which sort of makes me feel like I might be on the right track with that last supposition.</p>

<p>To sum up: does TTL on ping mean anything reliable whatsoever?</p>
","<blockquote>
  <p>So needless to say, nobody on the planet knows how many nodes there
  are between here and there.</p>
</blockquote>

<p>I know how many nodes.  There are exactly 16.  The reason you get different responses is because different operating systems use different starting values for TTL.  Some devices use 255, while others use 63. So, one of the devices you are pinging sends the reply with the TTL set to 255.  By the time it gets back to you, it has decremented to 239.  That's 16 hops.  </p>

<p>The other device you ping sets the TTL to 63.  So when it gets to you, the value is 47.</p>

<p>255-239=63-47=16.</p>

<p>If you want to be sure about the number of hops between you and the target, use traceroute.</p>
","12860"
"converting AP from CAPWAP to autonomous - BVI1 interface gets reverted back to DHCP","21684","","<p>Has anyone ever gotten this message in the middle of converting a <a href=""/tags/capwap"" title=""Control And Provisioning of Wireless Access Points"">CAPWAP</a> access point from CAPWAP to autonomous?</p>

<pre><code>*Mar  1 00:47:59.399: %CAPWAP-3-STATIC_TO_DHCP_IP: Could not discover WLC using static IP. Forcing AP to use DHCP.
</code></pre>

<p>This has popped up on both 3600s and 1142s in the middle of the TFTP transfer of the new AP-IOS image halting the conversion process.</p>

<p>I followed <a href=""https://supportforums.cisco.com/docs/DOC-18268"">these instructions</a> from Cisco (minus the DHCP section because I had POE injectors plugging directly into a computer for TFTP)</p>

<p>Is there a workaround to get the AP converted without a DHCP server?</p>
","<p>By putting the AP into manual boot mode. You can upload a new image to the AP similar a regular router.</p>

<pre><code>debug capwap con cli  
conf t  
boot manual  
reload
</code></pre>

<p>You should see the <code>ap:</code> prompt.</p>

<p>If you issue a <code>set</code> command you'll see a few variables that you can change.</p>

<pre><code>set IP_ADDR 192.168.0.2  
set NETMASK 255.255.255.0  
set DEFAULT_ROUTER 192.168.0.1  
tftp_init  
ether_init  
flash_init  
tar -xtract tftp://&lt;TFTP_svr&gt;/&lt;Path_to_tar&gt; flash:  
set BOOT flash:/&lt;image_directory&gt;/&lt;image_name&gt;  
set MANUAL_BOOT no  
set  
boot
</code></pre>
","1551"
"Difference between access list and prefix list?","21674","","<p>Can someone explain with an example whats the difference between an access list and prefix list.  </p>
","<p>Here's the history of how they came into being (and why they are the way they are):</p>

<ul>
<li>In the very early days of the Internet, people started asking for packet filters (aka access lists). </li>
<li>Cisco implemented simple access lists first (filtering on destination host addresses, augmented by wildcard masks), but of course they weren't good enough to block (for example) SMTP, so they created extended access lists, which can match on source and destination IP addresses (with wildcards bits on both - these bits allow you to match whole prefixes), protocols, port numbers ...</li>
</ul>

<p>So: access list = packet filter.</p>

<p>Later (but still decades ago) people started running multiple routing protocols on the same box and wanted to redistribute information between them. Not a problem, but you wouldn't want ALL the information you have propagated into the other routing protocol - you need ROUTE FILTERS. As is usually the case, everything looks like a nail if you happen to have a hammer, and thus Cisco's engineers implemented route filters with the object they already had - access lists.</p>

<p>At this point: access list = packet filter (and sometimes route filter)</p>

<p>With the advent of classless routing (yeah, it's that long ago - does anyone still remember the days of Class A, Class B and Class C addresses), people wanted to redistribute prefixes of certain size between routing protocols. For example: advertise all /24s from OSPF into BGP, but not the /32s. Impossible to do with access lists. Time for a new kludge: let's use extended access list and let's pretend the source IP address in the packet filter represents network address (actually prefix address) and the destination IP address in the same line of the packet filter represents subnet mask.</p>

<p>This far: access lists = packet filters. Simple access lists also serve as route filters (matching only on network addresses) and extended access lists serve as route filters matching addresses and subnet masks.</p>

<p>Fortunately someone retained a shred of reason at that time and started wondering what exactly the brilliant minds that decided reusing extended ACLs for route filters makes sense were smoking when they got that brilliant idea. </p>

<p>End result: Cisco IOS got prefix lists, which are (almost) identical in functionality to extended access lists acting as route filters, but displayed in a format that a regular human being has a chance of understanding.</p>

<p>Today: use access lists for packet filters and prefix lists for route filters. You can still use access lists as route filters but <em>don't do it</em>.</p>

<p>Makes sense?</p>
","831"
"Where to cross RX/TX line in fibre optical cabling","21564","","<p>I'm in the process of connecting together some sites via optical fibre. The trans-site multimode fibres are terminated with SC jacks on patch panels from where they are patched to the corresponding switch ports.</p>

<p>In order to receive a working connection, the cables need to be crossed at one point to let RX point to TX and vice versa.</p>

<p>Should this cross-connection be made in the transit cable (i.e. between the patch panels) or one of the patch cables between the panel and the switch? Is there a common practice?</p>
","<p>Cross on one of your patch cables.  You want your installed fiber plant to be labeled correctly at both ends (Strand 1 at Site A = Strand 1 at Site B).</p>
","2801"
"Debugging too many tcp sockets with SYN_RECV status","21557","","<p>We run a messaging server (Ubuntu 11.04) at work with default kernel configurations. Recently we have started having port, websocket errors, and zmq errors during peak load. When trying to debug, we noticed that, trying netstat -atn, prints a whole lot of data > 1G, before we had to kill it. We did notice than in the output it did print it had a lot of tcp sockets in SYN_RECV state. Now reading up more it seems that it can be related to tcpkeepalive settings. 
A blog about windows networking stack <a href=""http://www.codeproject.com/Articles/37490/Detection-of-Half-Open-Dropped-TCP-IP-Socket-Conne"" rel=""nofollow"">here</a>, suggests one should tweak tcpkeepalive settings to avoid these (as they put it) half-open ports. </p>

<p>I am trying to understand how and why this can happen, before going ahead and messing around with kernel level configurations. Am reading through the original tcp <a href=""https://www.ietf.org/rfc/rfc793.txt"" rel=""nofollow"">rfc</a>, but that's a heavy, slow read. Any other links/investigative commands i should be trying? </p>

<p>Any known bugs that cause this type of problems? </p>

<p>Update: Based on comment, i checked syn cookie setting, but it is enabled.(the /proc/). But netstat -s seems to print out the same number of syncookies everytime. So that's another clue. This is a Ubuntu 11.04 server. </p>

<hr>
","<p>SYN_RECV has nothing to do with keep-alive. It just means, that the server received the first part of the 3-way TCP handshake, e.g. the clients send a SYN packet, the server replies with SYN+ACK and then the client must reply with ACK. The last part is missing, e.g. the client started the connection but did not complete the handshake. This might be caused by a SYN-Food attack, a special kind of Denial Of Service Attack.</p>
","6031"
"Policy routing configuration in Fortigate","21336","","<p>I have an scenario where a Fortigate firewall is used to separate internal networks from the Internet (FortiOS Version 4.0 MR3 patch 11). Right now there is a single Internet connection attached to the firewall and a default static route is used to get all Internet traffic through it. I would like to attach a second Internet connection to the firewall and then route only certain traffic through it, for example web browsing traffic. </p>

<p>For this setup, I keep the current static default route through the first link and then configure policy routing options in order to route traffic with destination port TCP/80 and TCP/443 through the second Internet link. As expected, policy routing is evaluated before routing table and all traffic destined to TCP/80 and TCP/443 is sent through to second link, including traffic between subnets directly connected to the Fortigate, what breaks communication between them. </p>

<p>In a Cisco environment I would adjust the ACL used to match traffic for policy routing, denying traffic between internal networks at the beginning of the ACL and adding a ""permit any"" statement at the end. However, I can not find the way to instruct the Fortigate to work in a similar manner. </p>

<p>Do you know how to make this scenario working with Fortigate? </p>
","<p>Since policy routes are evaluated top-down, you can work around this limit by placing a more specific entry matching traffic from internal subnet A to internal subnet B.</p>

<p>However, this should be less than comfortable if you have many different networks attached to your internal interface.</p>

<p>In this case, I would recommend you a trick I once used: 
since Fortigate devices ignore QoS marks, you should sign your ""internet"" packets on the firewall-facing port of your Cisco switch with a specific TOS and then use that mark in your policy-route.</p>
","516"
"AAA/TACACS+ password on Cisco switch always fails at second password prompt","21322","","<p>Whenever logging into a network device using AAA/TACACS+, if I fat-finger the password prompt after the username prompt, the second password prompt <em>always</em> fails even when the password is correct.  I have to wait for the username prompt again, and must get the password correct on the first password prompt immediately following that.  In other words, any time I see the second password prompt, it will not work.</p>

<p>See the sanitized interaction and config below.</p>

<pre>
User Access Verification
Username: user-name
Password:

Password:    (always fails here)
% Access denied

User Access Verification
Username: user-name
Password:

Connected to s-site-rack-agg2.example.net on line 1 (site-name).
s-site-rack-agg2#
</pre>

<p><strong>What could be different with that second password prompt to account for this behavior?</strong></p>

<p>The typical AAA and related config I have is:</p>

<pre>
aaa new-model
aaa authentication login default group tacacs+ local line
aaa authentication login CONSOLE none
aaa authentication enable default group tacacs+ enable
aaa authorization exec default group tacacs+ local if-authenticated
aaa authorization commands 1 default group tacacs+ local if-authenticated
aaa authorization commands 7 default group tacacs+ local if-authenticated
aaa authorization commands 15 default group tacacs+ local if-authenticated
aaa accounting exec default start-stop group tacacs+
aaa accounting commands 0 default start-stop group tacacs+
aaa accounting commands 1 default start-stop group tacacs+
aaa accounting commands 7 default start-stop group tacacs+
aaa accounting commands 15 default start-stop group tacacs+
aaa accounting system default start-stop group tacacs+
!
ip tacacs source-interface Loopback0
tacacs-server host -prmiaryipremoved- single-connection
tacacs-server host -secondaryipremoved- single-connection
tacacs-server timeout 10
tacacs-server directed-request
tacacs-server key 7 -removed-
!
line con 0
 login authentication CONSOLE
line vty 0 4
 location -removed-
 exec-timeout 60 0
 password 7 -removed-
 transport input telnet ssh
</pre>
","<p>I would do a debug on your TACACS+ server while you are trying this.</p>

<p>I'll assume that you only want to use TACACS authentication and only fall-back to local logins if it can't access the server?</p>

<p>Try using this:<br>
<code>aaa authentication login default group tacacs+ line<br>
 aaa authentication enable default group tacacs+ enable</code></p>

<p>Also see this site: It has some good examples and explanations</p>

<p><a href=""http://my.safaribooksonline.com/book/networking/cisco-ios/0596527225/tacacsplus/i13896__heada__4_2#X2ludGVybmFsX0h0bWxWaWV3P3htbGlkPTA1OTY1MjcyMjUlMkZpNDk5MzNfX2hlYWRhX180XzMmcXVlcnk9"" rel=""nofollow"">http://my.safaribooksonline.com/book/networking/cisco-ios/0596527225/tacacsplus/i13896_<em>heada</em>_4_2#X2ludGVybmFsX0h0bWxWaWV3P3htbGlkPTA1OTY1MjcyMjUlMkZpNTAzNjNfX2hlYWRhX180XzEmcXVlcnk9</a></p>

<p>My guess is that since you have the ""local"" keyword in:<br>
<code>aaa authentication login default group tacacs+ local line</code></p>

<p>The TACACS+ authentication returns a fail, so the router tries doing local authentication. I guess you should provide us with the <code>line vty</code> sanitized configuration.
If you have<br>
<code>line vty 0 15<br>
  login local</code></p>

<p>Then it would do a username/password authentication otherwise its doing password</p>
","1546"
"LAP ignores DHCP Option 43 and uses CAPWAP UDP broadcasts","21257","","<p>I am trying to redeploy Cisco 1242 LAPs on new Cat4507R+E switches, which means the IP address of the WLC is changing for that LAP.  For some reason, I have to configure <code>ip helper-addresses</code> on my LWAP vlan to jumpstart communication between my Cisco AP1242 LAPs and the WLC; I have DHCP (with Option 43) on the LAP Vlan, but I don't know why the LAP is ignoring the DHCP Option.</p>

<p>DHCP runs on Cisco 4507R+E switches...  The switches are configured with DHCP Option 43 (Single WLC address: 10.19.3.209 / hex: 0a13.03d1) and Option 60...</p>

<pre><code>ip dhcp pool lwap_v99
 network 10.1.1.0 255.255.255.0
 default-router 10.1.1.254
 dns-server 10.19.26.225
 option 43 hex f104.0a13.03d1
 option 60 ascii ""Cisco AP c1240""
!
</code></pre>

<p>The LWAP is getting a DHCP address...</p>

<pre><code>WL-DST2#sh ip dhcp bind
Bindings from all pools not associated with VRF:
IP address          Client-ID/              Lease expiration        Type
                    Hardware address/
                    User name
10.1.1.17           0158.8d09.03ec.de       Jun 28 2013 03:07 AM    Automatic
WL-DST2#
</code></pre>

<p><a href=""https://supportforums.cisco.com/docs/DOC-26920"">Using the new wireshark feature on Supervisor 7</a>, I can see that the LAPs are ignoring Option 43; instead, the LAPs (for example, 10.1.1.17) are broadcasting CAPWAP packets and never send a unicast request...</p>

<pre><code>WL-DST2#sh monitor capture file bootflash:mycap.pcap | i CAPWAP
681 597.979997    10.1.1.17 -&gt; 10.19.26.225 DNS Standard query A CISCO-CAPWAP-CONTROLLER
684 600.977998    10.1.1.17 -&gt; 10.19.26.225 DNS Standard query A CISCO-CAPWAP-CONTROLLER
689 603.977998    10.1.1.17 -&gt; 10.19.26.225 DNS Standard query A CISCO-CAPWAP-CONTROLLER
705 615.975999    10.1.1.17 -&gt; 255.255.255.255 CAPWAP CAPWAP-Control - Discovery Request
715 625.974001    10.1.1.17 -&gt; 255.255.255.255 CAPWAP CAPWAP-Control - Discovery Request
728 635.970995    10.1.1.17 -&gt; 255.255.255.255 CAPWAP CAPWAP-Control - Discovery Request
</code></pre>

<p>I validated that DHCP is offering Option 43 in the DHCP Offer message...</p>

<pre><code>Option: (t=43,l=13) Vendor-Specific Information
    Option: (43) Vendor-Specific Information
    Length: 13
</code></pre>

<p>I tried setting both <code>option 43 ascii ""10.19.3.209""</code> and <code>option 43 hex f104.0a13.03d1</code>... both of these are ignored by the LWAP.  I also tried <a href=""https://supportforums.cisco.com/thread/327332"">hard-resetting the LAP with the mode button</a>. At this point, the only thing that makes the AP talk to the WLC is a helper-address on the Vlan...</p>

<pre><code>!
interface Vlan99
 ip address 10.1.1.252 255.255.255.0
 ip helper-address 10.19.3.209      &lt;------
 no ip redirects
 no ip unreachables
 no ip proxy-arp
 standby 99 ip 10.1.1.254
!
ip forward-protocol udp 5246
</code></pre>

<p><strong>Question</strong></p>

<p>How do I use DHCP to make these LAPs use unicast packets to initiate CAPWAP with the WLC?</p>

<p>Version information for the LAP / WLC system...</p>

<pre><code>(Cisco Controller) &gt;show ap config general AP588d.0903.ecde
...
S/W  Version .................................... 7.3.101.0
Boot  Version ................................... 12.4.13.0
</code></pre>

<p>The 4507R+E switches are running IOS-XE 3.4.0SG</p>
","<p>Cisco LWAPs will do this process in order to try and find a controller:</p>

<ol>
<li>CAPWAP broadcast on the local subnet</li>
<li>Check NVRAM for previous controllers/mobility groups and try those.</li>
<li>OTAP (remove now though)</li>
<li>DHCP Option 43/60</li>
<li>DNS Lookup for ""CISCO-CAPWAP-CONTROLLER.localdomain""</li>
</ol>

<p>If the controllers are on the local subnet, then it will find those via broadcast, if you have an IP helper pointing to the controller as well as ip forward-protocol on 5246/12223 it will find it that way too.</p>

<p>The APs also keep previously joined controllers in NVRAM, and will connect to those before option 43.</p>

<p>Note that these will happen in this order! I had an issue installing a new WLAN whilst a legacy WLAN was in use, and the IT guy had plugged in some of the APs, so they were going to the WLCs in their NVRAM instead of using option 43 like I had wanted. I factory reset on the APs solved this however.</p>

<p>Reference is here (quite old):
<a href=""http://www.cisco.com/en/US/tech/tk722/tk809/technologies_tech_note09186a00806c9e51.shtml"">http://www.cisco.com/en/US/tech/tk722/tk809/technologies_tech_note09186a00806c9e51.shtml</a></p>
","2140"
"Cisco - display ALL routes using a single command","21178","","<p>In Junos  when you use a <code>show route</code> it displays the routing tables , starting with inet.0 ( global routing table) and then listing each VRF in alphabetic order.</p>

<p>I am after a similar command , for the following reason , new WAN deployment: remote engineer to verify VRF connectivity without plugging in the LAN, therefore I want to list the mandatory routes that are mandatory in each VRF ( e.g. 0/0 ).</p>

<p>I know I can achieve this with <code>show ip bgp vpnv4 all</code> but this does not display the global routing table , and that is currently used for management.</p>

<p>in Junos I would run <code>show route 0/0</code> which would display all occurrences of the specified route in every VRF across the device including inet.0</p>

<pre><code>iank@r1&gt; show route 0/0 exact terse 

vrf1.inet.0: 99 destinations, 105 routes (99 active, 0 holddown, 0 hidden)
+ = Active Route, - = Last Active, * = Both

A Destination        P Prf   Metric 1   Metric 2  Next hop        AS path
* 0.0.0.0/0          B 170        100          0 &gt;172.31.30.2     64512 I

vrf2.inet.0: 362 destinations, 408 routes (362 active, 0 holddown, 0 hidden)
+ = Active Route, - = Last Active, * = Both

A Destination        P Prf   Metric 1   Metric 2  Next hop        AS path
* 0.0.0.0/0          B 170        100            &gt;172.31.7.2      64999 I

vrf3.inet.0: 658 destinations, 711 routes (658 active, 0 holddown, 0 hidden)
+ = Active Route, - = Last Active, * = Both

A Destination        P Prf   Metric 1   Metric 2  Next hop        AS path
* 0.0.0.0/0          B 170        100            &gt;172.31.12.2     64999 I

vrf4.inet.0: 377 destinations, 423 routes (377 active, 0 holddown, 0 hidden)
+ = Active Route, - = Last Active, * = Both

A Destination        P Prf   Metric 1   Metric 2  Next hop        AS path
* 0.0.0.0/0          B 170        100            &gt;172.31.3.2      64999 I
</code></pre>

<p>am I missing a really obvious way of achieving this ? </p>
","<p><strong><code>show ip route vrf *</code></strong> displays the global routing table plus all the VRF instances.</p>

<p><strong><code>sh ip route vrf * 0.0.0.0</code></strong> displays the default route for each VRF.</p>

<p>This shows the default route for each VRF, including the default VRF.  As this IOS 12.4 doesn't show the VRF name when displaying a matching route, a route tag was added on the static routes to help identify their VRF.</p>

<pre>
r1#show ip route vrf * 0.0.0.0

Routing entry for 0.0.0.0/0, supernet
  Known via ""static"", distance 1, metric 0, candidate default path
  Tag 100
  Routing Descriptor Blocks:
  * 192.0.2.2
      Route metric is 0, traffic share count is 1
      Route tag 100

Routing entry for 0.0.0.0/0, supernet
  Known via ""static"", distance 1, metric 0, candidate default path
  Tag 200
  Routing Descriptor Blocks:
  * 192.0.2.2
      Route metric is 0, traffic share count is 1
      Route tag 200
</pre>

<p>Showing longer-prefixes on your matching route will show the VRF names.
<strong>`sh ip route vrf * 192.0.2.0 longer-prefixes'.</strong></p>
","2214"
"Ethernet autonegotiation differences between (10M | 100M | 1G) Ethernet","20892","","<p>I am studying for CCNA and on Wendell Odom's book is said that(regarding autonegotiation):</p>

<p>When autonegotiation fails on one node, to choose (half/full-duplex) we must use the rule:</p>

<ul>
<li>If you have a 10/100 Mb/s interface -> use half-duplex</li>
<li>If you have a 1000 Mb/s interface-> use full-duplex</li>
</ul>

<p>Why is that?</p>
","<blockquote>
  <p>When autonegotiation fails on one node, to choose (half/full-duplex) we must use the rule:</p>
  
  <ul>
  <li>If you have a 10/100 Mb/s interface -> use half-duplex</li>
  <li>If you have a 1000 Mb/s interface-> use full-duplex</li>
  </ul>
  
  <p>Why is that?</p>
</blockquote>

<h2>Summary</h2>

<p>In brief, <a href=""http://en.wikipedia.org/wiki/IEEE_802.3#Communication_Standards"" rel=""nofollow noreferrer"">ethernet has been around since the 1980s</a>... as a result</p>

<ul>
<li>Old ethernet NICs only supported half duplex operation with no auto-negotiation.  If you have auto-negotiation enabled in this situation, you must support all old NICs (which means falling back to half-duplex operation).  Another answer mentions hubs, which also fall into this category.</li>
<li>Auto-negotiation is required by the 1GE spec; therefore, there is no point in forcing failure to half-duplex at 1GE speeds.  1GE auto-negotiation announces whether it is half / full-duplex capable.</li>
</ul>

<p>These days, you should always try to use auto-negotiation unless you know the other port doesn't support it.</p>

<p>The table below may help explain the twisted history around auto-negotiation.</p>

<pre><code>+------------+------+---------------+--------------+-----------------------+
| Standard   | Year | Speeds        | Media        | Auto-neg Status       |
+------------+------+---------------+--------------+-----------------------+
| 802.3i     | 1990 | 10M           | Twisted Pair | No auto-negotiation   |
+------------+------+---------------+--------------+-----------------------+
| 802.3u     | 1995 | 10/100M       | Twisted Pair | Optional, not trusted |
+------------+------+---------------+--------------+-----------------------+
| 802.3-1998 | 1998 | 100/100M      | Twisted Pair | Optional              |
+------------+------+---------------+--------------+-----------------------+
| 802.3ab    | 1999 | 10/100/1000M  | Twisted Pair | Optional @ 10/100M    |
|            |      |               |              | Required @ 1Gbps      |
+------------+------+---------------+--------------+-----------------------+
</code></pre>

<h3><em>Impact of Duplex Mismatches:</em></h3>

<p>Regarding Cisco's practice of falling back to half-duplex when auto-negotiation fails... One could rightfully object that falling back to half-duplex if auto-negotiation fails introduces a misconfiguration; however, the misconfiguration is tolerable.  The worst that can happen in this situation is you get manually hard coded full-duplex on one side of a FastEthernet link, and auto-negotiation failing to half duplex on the other side of the link... the mismatched duplex  causes link-level errors (collisions and runts), but you still can communicate pretty well, as long as you arent trying to exceed about one third of the link speed (i.e about 35Mbps on FastEthernet).</p>

<h2>Potentially interesting details:</h2>

<h3><em>Original FastEthernet Auto-negotiation == bad juju</em></h3>

<p>People had such bad experiences with early auto-negotiation in IEEE 802.3u (FastEthernet) that conventional wisdom was to disable auto-negotiation, and lock speed / duplex manually on all ethernet copper ports.</p>

<p>This practice of disabling auto-negotiation on all copper ports became so entrenched in old-timer's minds that it's still not unusual to find locked speed / duplex on Cat5e / Cat6 today, even though industry auto-negotiation implementations have reliable for over a decade.  FYI, some ISPs still force 100M / full on their customer circuits under the misguided assumption that manual speed / duplex is more reliable.</p>

<h3><em>Vendor support for advertising specific 1GE duplex modes</em></h3>

<p>Auto-negotiation is required as part of IEEE 802.3ab (Gigabit Ethernet over copper); however, you still find some vendor implementations that permit you to hard-code GigE speed / duplex... I have seen some JunOS switches that permit full-duplex configuration on 1GE switch ports.  Does this mean that the JunOS switch disables auto-negotiation on that 1GE port?  No, this effectively means JunOS only advertises the configured speed / duplex during auto-negotiation.</p>

<h3><em>Update for @ytti's question: Ethernet line conditioning</em></h3>

<p>1GE auto-negotiation includes (quoting 802.3-2012, Clause 40.5.1):</p>

<ul>
<li>Negotiation for 1000Base-T half / full duplex, or <a href=""https://stackoverflow.com/a/7843785/667301"">falling back to lower speeds, as required</a></li>
<li>Determining MASTER-SLAVE relationship between the PHYs</li>
<li>Negotiating EEE capabilities</li>
</ul>

<p>Auto-negotiation is required by 802.3ab at 1GE, because GigabitEthernet auto-negotiation includes special line conditioning; this conditioning happens during the TRAINING mode of the MASTER/SLAVE PHY startup; the TRAINING mode ensures the line is stable enough to push 1000Mbps over Cat5e runs up to 100m long.</p>
","2873"
"Command to power off (not reset) module in Cisco 4500?","20814","","<p>Came across a situation where powering off a module in a Cisco 4500 (Sup7-E) would have been nice, but couldn't seem to find the command.  Ended up having to unseat the module until we had the fix in place and then someone had to go insert it again</p>

<p>Unfortunately, it was off site, so it required someone to go to the location to do this and it would have been nice to be able to do remotely.</p>

<p>I know with a 6500 you can do a <code>no power enable module &lt;#&gt;</code> (IOS) or <code>set module power down &lt;#&gt;</code> (CatOS) to power off the module, but just couldn't find it on the 4500.</p>

<p>Anyone have any suggestions or ideas?  Hidden command maybe?</p>

<p>Or can anyone confirm the platform doesn't have the capability (and why)?</p>

<p>It seems somewhat odd to me that the capability to do a reset (<code>hw-module [slot|module] &lt;#&gt; reset</code>) of a module exists, but no capability to power it off entirely.</p>
","<p>To power off a particular module, use <code>Switch(config)# no hw-module module _num_ power</code>; you can find that command on Page 20 of <a href=""http://www.cisco.com/c/en/us/td/docs/switches/lan/catalyst4500/15-1/XE_330SG/configuration/guide/config/pwr_envr.pdf"" rel=""nofollow"">this Cisco doc</a></p>

<p>FYI, there <a href=""https://supportforums.cisco.com/discussion/11515966/power-cisco-core-switch"" rel=""nofollow"">isn't a graceful shutdown command for the whole switch</a>.
You should backup your config (just in case), issue a reboot, wait till you can audibly hear a change in fan speed, and then remove power before system starts booting.</p>
","13423"
"Stateful vs Stateless IPv6?","20811","","<p>What's the difference here? </p>

<p>Are stateful IPv6 entries retained in the DHCPv6 server?</p>
","<p>Stateful autoconfiguration of IPv6 is the equivalent to the use of DHCP in IPv4. It requires a DHCPv6 service to provide the IPv6 address to the client device and that both client device and server maintain the ""state"" of that address (i.e. lease time, etc).</p>

<p>Stateless autoconfiguration of IPv6 allows the client device to self configure it's IPv6 addreess and routing based on the router advertisements.</p>

<p>A network can use both stateful and stateless autoconfiguration at the same time, they are not mutually exclusive.</p>

<p>If you are interested, for more detailed information I would highly recommend you read <a href=""https://tools.ietf.org/html/rfc4862"" rel=""nofollow"">RFC4862</a>.</p>
","22164"
"Difference between sniffer tools","20632","","<p>I am unsure what the following networking tools do. They all seem to do a similar thing.</p>

<p>First some background. I am familiar with cisco IOS. I am doing some linux networking experimentation with virtual machines so I am trying to create a small virtual network. I started playing with virtual interfaces (tun/tap, loop br etc) and I'd like to be able to examine the traffic going through them for debug purposes.</p>

<p>I'm a bit unsure of what tool to use. I know of the following:</p>

<ol>
<li>tshark (wireshark)</li>
<li>dumpcap</li>
<li>tcpdump</li>
<li>ettercap</li>
</ol>

<p>I think tshark/wireshark uses dumpcap underneath. ettercap seems to be a man-in-the-middle attack tool. Which tool (others not listed included) would you use to debug an interface?</p>
","<ul>
<li><p>wireshark - powerfull sniffer which can decode lots of protocols, lots of filters.</p></li>
<li><p>tshark - command line version of wireshark </p></li>
<li><p>dumpcap (part of wireshark) - can only capture traffic and can be used by wireshark / tshark</p></li>
<li><p>tcpdump - limited protocol decoding but available on most *NIX platforms</p></li>
<li><p>ettercap - used for injecting traffic not sniffing</p></li>
</ul>

<p>All tools use libpcap (on windows winpcap) for sniffing. Wireshark/tshark /dumpcap can use tcpdump filter syntax as capture filter.</p>

<p>As tcpdump is available on most *NIX system I usually use tcpdump. Depending on the problem I sometimes use tcpdump to capture traffic and write it to a file, and then later use wireshark to analyze it. If available, I use tshark but if the problem gets more complicated I still like to write the data to a file and then use Wireshark for analysis.</p>
","10075"
"Can 802.11b/g/n WiFi adapter connect to an 802.11ac network?","20562","","<p>I am setting up a WiFi network and would like to take advantage of AC range, but I can't find any information on the compatibility between wifi standards.</p>

<p>Do you need new WiFi adapters that are designed for 802.11ac or can an older 802.11b/g/n benefit from the range?</p>
","<p>The answer to the question as it is formulated is strictly no. These aren't ranges and it's not a question of bitrates.</p>

<p>These are standards. The wireless standards are 802.11a, 802.11b, 802.11c, 802.11n and 802.11ac. The standard defines transmission rates, available radio spectrums (ranges), message protocols etc. There are two available ranges, 2.4GHz and 5GHz. B and g use 2.4GHz range, a and ac uses 5GHz range and n uses both. </p>

<p>One radio can work only on one range, it's either 2.4GHz or 5GHz. To allow simultaneously support for b/g and n/ac devices you need dual-radio AP(s). One radio has to work on 5GHz offering a/n/ac support, other on 2.4GHz offering b/g/n support. </p>
","14777"
"Accidentally Removed Allowed VLANs from Cisco Switch Dot1Q Trunk","20312","","<p>I am adding a new VLAN to an existing trunk port between two Cisco Catalyst switches (3750's).  In the process of adding the new VLAN, it appears that I've removed the existing allowed VLANs on the trunk...  How is this possible?</p>

<p>Existing trunk port configuration:</p>

<pre><code>SW-LAB-1#show run int g1/0/49
Building configuration...

Current configuration : 255 bytes
!
interface GigabitEthernet1/0/49
 description SW-LAB-2 G1/0/48
 switchport trunk encapsulation dot1q
 switchport trunk native vlan 10
 switchport trunk allowed vlan 10,20
 switchport mode trunk
 switchport nonegotiate
 ip dhcp snooping trust
end
</code></pre>

<p>I used the following syntax to also allow VLAN 30:</p>

<pre><code>SW-LAB-1#conf t
Enter configuration commands, one per line.  End with CNTL/Z.
SW-LAB-1(config)#interface g1/0/49
SW-LAB-1(config-if)#switchport trunk allow vlan 30
</code></pre>

<p>However now, my running config on g1/0/49 is missing VLANs 10 and 20!</p>

<pre><code>&lt;SNIP&gt;
switchport trunk allowed vlan 30
&lt;/SNIP&gt;
</code></pre>

<p>What am I missing?</p>
","<p>You need to use the following command to add your VLAN 30 to an existing Dot1Q trunk on a Cisco Catalyst switch:</p>

<pre><code>switchport trunk allowed vlan add 30
</code></pre>

<p>Otherwise IOS just thinks you're trying to overwrite the existing configuration and you are left with an accidentally deleted set of allowed VLANs.</p>

<p>You could similarly use ""remove"" in place of ""add"" to remove only one VLAN.  See the entire syntax below.  (It is actually the same syntax in Cisco Nexus OS or IOS, FYI.)</p>

<pre><code>SW-FOO(config-if)#switchport trunk allowed vlan ?
  WORD    VLAN IDs of the allowed VLANs when this port is in trunking mode
  add     add VLANs to the current list
  all     all VLANs
  except  all VLANs except the following
  none    no VLANs
  remove  remove VLANs from the current list
</code></pre>

<hr>

<p>Another option is to put all of your allowed VLANs into the command, like so:</p>

<pre><code>switchport trunk allowed vlan 10,20,30
</code></pre>

<p>This option is more time consuming but also works.</p>
","1191"
"dont fragment bit PING TOOL","20202","","<p>Actually my machine <strong>wwan0</strong> MTU is 1500</p>

<pre><code>ashokkrishna@ashokkrishna-Lenovo-B560:~$ ping -s 1490 example.com
PING example.com (93.184.216.119) 1490(1518) bytes of data.
1498 bytes from 93.184.216.119: icmp_seq=1 ttl=51 time=1119 ms
1498 bytes from 93.184.216.119: icmp_seq=2 ttl=51 time=1130 ms
1498 bytes from 93.184.216.119: icmp_seq=3 ttl=51 time=1260 ms
^C
--- example.com ping statistics ---
4 packets transmitted, 3 received, 25% packet loss, time 3178ms
rtt min/avg/max/mdev = 1119.258/1170.102/1260.574/64.137 ms, pipe 2
</code></pre>

<p>but when i ping like</p>

<pre><code>ashokkrishna@ashokkrishna-Lenovo-B560:~$ ping -M do -s 1490 example.com
PING example.com (93.184.216.119) 1490(1518) bytes of data.
ping: local error: Message too long, mtu=1500
ping: local error: Message too long, mtu=1500
ping: local error: Message too long, mtu=1500
^C
--- example.com ping statistics ---
3 packets transmitted, 0 received, +3 errors, 100% packet loss, time 1999ms
</code></pre>

<p>what is this difference? <br>My intention is to know the example.com server's MTU size? how can I find that?</p>
","<p>Running ""ping -M do -s 1490 example.com"" says that the ICMP data size is 1490 bytes and fragmentation is not allowed. For this size of ICMP data, ICMP size (i.e., header + data) is 1498 bytes. Adding IP header, frame size becomes 1518 bytes. Frame size can't exceed MTU size of the interface. As from the error message, MTU for the interface is 1500 bytes. So, there are extra 18 bytes in the frame. Without fragmentation, this message can't be sent. Since fragmentation is not allowed, ping fails saying message is too long.</p>

<p>You don't need remote server's MTU size. In networking, MTU sizes are needed only for the next hop (unless the destination is the next hop). Reading <a href=""https://en.wikipedia.org/wiki/IP_fragmentation"" rel=""nofollow"">https://en.wikipedia.org/wiki/IP_fragmentation</a> helps.</p>
","19696"
"Show connected (up) interfaces on cisco devices","20167","","<p>Is there any way to show a total count of interfaces that are in status ""up"" on a cisco router?</p>

<p>The purpose is to let a script go through all routers and show a summarization count of ""up"" interfaces.</p>
","<p>You can show all interfaces that are up by:</p>

<pre><code>show interfaces status | include connected
</code></pre>

<p>Then your script can count them.</p>

<p>The <code>show interfaces status</code> cli command shows you all interfaces. The interfaces that are ""up"" are in the <code>connected</code> state. The <code>| include connected</code> shows only the lines of the output that contain the word ""connected"".</p>

<p><a href=""http://www.cisco.com/c/en/us/td/docs/ios/fundamentals/configuration/guide/15_1s/cf_15_1s_book/feat_show_cmd_redrct.html"" rel=""nofollow"">Newer Cisco IOS contain a <code>count</code> parameter</a> that can count lines which match a regex. This is not available on all IOS versions.</p>
","6318"
"What is real difference between host and node in network","19997","","<p>According to wikipedia host is</p>

<blockquote>
  <p>A network host is a <strong><em>computer or other device</em></strong> connected to a computer network. A network host <strong><em>may offer information resources, services</em></strong>, and applications to users or other nodes on the network. A network host is a network node that is assigned a <strong><em>network layer host address</em></strong>.</p>
</blockquote>

<p>Computer is a host.
Printers also provide services and have ip address.</p>

<p>So in these which are really host?</p>

<ul>
<li>router,</li>
<li>printer,</li>
<li>""Camera in network"",</li>
<li>switch</li>
</ul>

<p>I'm totally confused with these things.
Thanks in advance</p>
","<p>I actually like the way the <a href=""https://tools.ietf.org/html/rfc2460#section-2"">IPv6 RFC</a> defines it:</p>

<pre><code>2.  Terminology

   node        - a device that implements IPv6.

   router      - a node that forwards IPv6 packets not explicitly
                 addressed to itself.

   host        - any node that is not a router.
</code></pre>

<p>So in your list:<br>
router,
printer,
""Camera in network"",
switch</p>

<ul>
<li>A router is a node, a router, and a host</li>
<li>A printer is a node, and a host*</li>
<li>A Camera is a node, and a host*</li>
</ul>

<p>*(<em>Provided that it as an IP address configured)</em></p>

<p>A switch is tricky, because it comes down to how it is configured:</p>

<ul>
<li>A switch <em>without</em> an IP address configured, is neither a host, nor a router, nor a node</li>
<li>A switch <em>with</em> an IP address configured is a node and a host <em>for the interface/vlan with the configured IP</em>.  For all the other ports, it can be considered a switch without an IP address.</li>
</ul>

<p><sup><em>(Both bullet points above consider a switch that is not participating in IP routing.  If it is, then you could consider it a Router, and the bullet points above these two can be applied)</em></sup></p>
","19450"
"LACP Suspended Trunk Link","19971","","<p>I have a LACP bonded trunk link between 2 switches, the bond contains 4 interfaces; all interfaces work fine except one. Cisco says you have to have matching configurations on all interfaces.  </p>

<p>The speed on the suspended interface was operating to auto-100, however, the bonded interfaces are operating at auto-1000. If I override this value with <code>speed 1000</code>, the link goes <code>not connected</code></p>

<h1>Switch 1</h1>

<pre><code>NON WORKING INTERFACE:
GigabitEthernet0/1 is up, line protocol is down (SUSPENDED)
  Hardware is Gigabit Ethernet, address is XXXX.XXXX.XXXX (bia XXX.XXXX.XXXX)
  MTU 9000 bytes, BW 100000 Kbit, DLY 100 usec,
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation ARPA, loopback not set
  Keepalive set (10 sec)
  Full-duplex, 100Mb/s, media type is 10/100/1000BaseTX
  input flow-control is off, output flow-control is unsupported
  ARP type: ARPA, ARP Timeout 04:00:00
  Last input 1d03h, output 1d04h, output hang never

WORKING INTERFACE ON SWITCH 1:
GigabitEthernet0/2 is up, line protocol is up (connected)
  Hardware is Gigabit Ethernet, address is XXXX.XXXX.XXXX (bia XXXX.XXXX.XXXX)
  MTU 9000 bytes, BW 1000000 Kbit, DLY 10 usec,
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation ARPA, loopback not set
  Keepalive set (10 sec)
  Full-duplex, 1000Mb/s, media type is 10/100/1000BaseTX
  input flow-control is off, output flow-control is unsupported
  ARP type: ARPA, ARP Timeout 04:00:00
  Last input 00:00:11, output 00:00:08, output hang never
</code></pre>
","<p>Assuming the other side of Gi 0/1 is also a GigabitEthernet, the most likely cause is a bad cable.  You need a cable with all four pairs connected.  100M will work with only two pairs.   That is probably why you negotiate to 100M. </p>

<p>For more info on how GE uses all four pairs, see: <a href=""http://goo.gl/DMYkSM"" rel=""nofollow"">http://goo.gl/DMYkSM</a> </p>
","6443"
"Reconfiguring Layer3 Switch to enable IP routing and become the default gateway","19910","","<p>Current configuration with HP Procurve 2848 switch at a colocation facility consists of using the ISP switchport as the default gateway. The current configuration is very basic with only 1 vlan assign to all switch ports. Routing is not currently enabled and the switch only functions at layer2 at the moment. There are 2 HP procurve switches connected together.</p>

<p>However I now need to configure HP switch to do the routing instead of using the ISP switchport as the default gateway. </p>

<p>The commands are similar to cisco commands but I can find the HP commands which relate. However, I just want to confirm I am thinking of this the best way. </p>

<p>I was going to configure a new vlan on an unsued access port and assign that Vlan with the IP of the /30 that is being configured to connect to the ISP switchport. </p>

<p>Then I was going to enable IP routing on the HP switch and assign our current IP subnet as well as new subnets to the current vlan, and statically route it to the new vlan that was configured with the /30 to connect to the ISP. </p>

<p>Which HP or Cisco commands might help achieve the above? </p>

<p>Also just to note, we statically assign private 192.168.1.0/24 IP addresses to some devices connected to the HP switches. There is no actual gateway or route configured for this /24. </p>

<p><strong>Summary:</strong></p>

<ol>
<li>Servers are located in a colocation facility. </li>
<li><p>Right now HP switch functions only as a switch and utilizes the uplink port from the ISP(colocation facility) as the default gateway. So the ISP does the routing to my network. </p></li>
<li><p>In order to obtain new IP's, we need to configure our switch to begin routing. The ISP will assign us public IPs and put it to our HP switch via the /30 IP. </p></li>
<li>I need to be able to move a cable from any switch port to another switchport and still allow it to communicate on the network. (Meaning the default way a switch works where any network can communicate from any port)</li>
</ol>

<p>The end result should resemble something similar to this image:</p>

<p><img src=""https://i.stack.imgur.com/1HyPD.png"" alt=""enter image description here""></p>

<p><strong>UPDATE: Working Example Below</strong>
- Note: Due to time constraints I performed the IP configurations on Vlan 1 since that is the default vlan that exists in both switches. The ISP went into Port 2 of the switch. HP Switch B connected to Port 1 of Switch A. </p>

<h3>HP Switch A</h3>

<pre><code>config
ip routing
ip route 0.0.0.0 0.0.0.0 192.224.10.9

vlan 1
ip address 192.127.16.193 255.255.255.224
ip address 192.224.16.193 255.255.255.224
ip address 192.168.1.1 255.255.255.0
exit

vlan 30 name ISP
vlan 30
ip address 192.224.10.10 255.255.255.252
untagged 2
exit
</code></pre>

<h3>HP Switch B</h3>

<pre><code>config
ip default-gateway 192.127.16.193
vlan 1
ip address 192.127.16.194 255.255.255.224
exit
</code></pre>
","<p>I tried to upload a visio picture that shows what I think you are trying to accomplish, but I guess I need more reputation!  You basically need to enable IP routing on the HP switch that will be the gateway, and add a default route. I definitely recommend using separate VLANs for your different networks.  You will also need to make sure that your ISP router has a route back to your HP switch for your 192.168.1.0/24 network:</p>

<p>ISP Router    </p>

<pre><code>Int fa0/0    
Ip address X.X.X.1 255.255.255.252    
Ip route 192.168.1.0 255.255.255.0 X.X.X.2  
</code></pre>

<p>HP Switch 1  </p>

<pre><code>Ip routing  
Vlan 10 name ISP  
Ip address X.X.X.2 255.255.255.252  
Untagged 1  
Vlan 20 name LAN  
Ip address 192.168.1.1 255.255.255.0  
Untagged 2-48  
Ip route 0.0.0.0 0.0.0.0 X.X.X.1  
</code></pre>

<p>HP Switch 2   </p>

<pre><code>Ip default-gateway 192.168.1.1  
Vlan 20 name LAN  
Ip address 192.168.1.2 255.255.255.0  
Untagged 1-48  
</code></pre>
","2863"
"How broadcasting works on different networks?","19903","","<p>I was reading DHCP ( RFC 2131 ), I have basic knowledge about Relay Agent and Broadcasting. But for Understanding DHCP in depth, I felt like I have to know Broadcasting and Relay Agent ( RFC 1542 ) in details. But could not find any RFC (RFC919,922 not much helpful) for broadcasting in details.</p>

<ol>
<li><p>How broadcast packet routes ? Because if the packet is intended for a different network than source, obviously the router will drop the packet. Is there any protocols for this ? Does router prevents all broadcasting or only the Limited/Local broadcast ?</p></li>
<li><p>Can we send a packet with destination as a direct/limited broadcast IP without a broadcast MAC address ? If Yes, I think because of a perticular MAC address the packet will forward to a single Host, So the question, in which case this would be helpful.</p></li>
<li><p>Consider a router is enabled by relay agent. When a DHCPDiscover ( which is a broadcast packet ) comes to that router, How does it proceed ? Because first thing its a broad cast IP also the network ""0"" is there, Does always relay-agent first checks the packet if the Packet is of DHCP ? </p></li>
</ol>

<p>My questions are not from a perticular subject (DHCP ond Broadcasting ), so you might be angry, But Please do help me. Thank You</p>
","<p><strong>How Routers Handle Limited and Directed Broadcasts</strong></p>

<p>The first thing to understand to answer your questions is that limited broadcast frames are not routed. By default when a router receives a frame with a destination address that is broadcast at either layer 2 or layer 3, the router simply drops the frame. That's why routers are said to be the boundary of broadcast domains.</p>

<p>Some examples of these would be:</p>

<ul>
<li><code>ff-ff-ff-ff-ff-ff</code> (layer 2 broadcast)</li>
<li><code>255.255.255.255</code> (layer 3 limited broadcast)</li>
</ul>

<p>Thinking about it, this makes sense. If routers forwarded broadcasts a single arp request would reach every single reachable host on the internet which would be terribly inefficient and rather silly.</p>

<p>Directed broadcasts on the other hand are sometimes routed. (I.E. <code>192.168.1.255/24</code>) Normally by default this functionality is disabled but can be enabled by issuing the <code>ip directed-broadcast</code> command on the router. This will allow it to forward directed broadcasts according to its routing table as if they were normal packets. This does <em>not</em> however allow the router to forward limited broadcasts, those are still blocked by default. This is also slightly off topic as to your original question, see <a href=""https://supportforums.cisco.com/discussion/10283586/command-no-ip-directed-broadcast"">this cisco forms page</a> for more on this.</p>

<hr>

<p><strong>Layer 3 Broadcast But not Layer 2?</strong></p>

<p>To answer your second question, it would make no sense to have a frame with a layer 3 broadcast address without a layer 2 broadcast address. This would defeat the entire purpose of it being a broadcast frame and just not work outright. Having a unicast layer 2 destination address would not change the router's behavior at all since the router makes its decisions at layer 3. All the router cares about is that <code>255.255.255.255</code> destination address and drops the packet. </p>

<p>Where this would matter is with switches which don't care about the layer 3 address at all. The switches would only see the unicast layer 2 address. Instead of sending the packet out all interfaces on the same vlan it would use the source address table (SAT) like it would with any other unicast destination address. In effect, by assigning a unicast layer 2 address the frame is no longer a broadcast frame at all even though it has the <code>255.255.255.255</code> address at layer 3.</p>

<hr>

<p><strong>How DHCP Relay Works in Practice</strong> </p>

<p>As for your last question, DHCP relay is a router's way of ""cheating"" around the rule about not forwarding broadcast packets. Let's look at a DHCP Discover packet:</p>

<ul>
<li>Source MAC: [unicast mac of the source]</li>
<li>Dest MAC: <code>ff-ff-ff-ff-ff-ff</code></li>
<li>Source IP: <code>0.0.0.0</code></li>
<li>Destination IP: <code>255.255.255.255</code></li>
<li>Source Port: UDP 68</li>
<li>Destination Port: UDP 67</li>
</ul>

<p>When the router sees a packet arrive on an interface with the <code>ip helper-address</code> command configured it checks to see is it matches any of the protocols that are ""helped"" by default or configured with the global <code>ip forward-protocol</code> command. In this case because it's DHCP the router sees that the destination port matches UDP 67 and allows the packet to be ""helped"". The router then changes the destination IP address from <code>255.255.255.255</code> to the IP address configured by the <code>ip helper-address</code> command as well as changing the source address to the address of the router interface on which the packet arrived and passes the packet along to the rest of the routing logic.</p>

<p>Now that the packet has a unicast destination address the router treats it like any other packet. It arps for the destination IP address (which is now that helper address) and then replaces the layer 2 addresses before sending the packet out the appropriate interface.</p>

<p><strong>Getting Back Again</strong></p>

<p>The router uses essentially the same process in reverse for the DHCP offer that is sent back to the client. The DHCP servers sends the offer to the IP address that was specified as the source address on the DHCP Discover packet. So the packet leaving the DHCP server looks like:</p>

<ul>
<li>Source MAC: unicast mac of the DHCP server</li>
<li>Dest MAC: mac address of the router <strong>or</strong> the DHCP server's default gateway</li>
<li>Source IP: unicast IP address of the DHCP server</li>
<li>Destination IP: ip address of the first router interface that the DHCP Discover packet reached</li>
<li>Source Port: UDP 67</li>
<li>Destination Port: UDP 68</li>
</ul>

<p>Since this packet has a unicast layer 3 destination address routers will forward the packet normally until it reaches the router with an interface that has an IP address matching the destination IP of the packet. Remember from earlier that this router has the <code>ip helper-address</code> configuration on that interface still. The router checks if the packet is a DHCP Offer then rewrites the packet to become a broadcast packet and sends it back out that interface knowing that the DHCP client is somewhere on that network segment. The packet leaving the router now looks like this.</p>

<ul>
<li>Source MAC: unicast mac of the router interface</li>
<li>Dest MAC: <code>ff-ff-ff-ff-ff-ff</code></li>
<li>Source IP: unicast IP address of the DHCP server</li>
<li>Destination IP: <code>255.255.255.255</code></li>
<li>Source Port: UDP 67</li>
<li>Destination Port: UDP 68</li>
</ul>

<hr>

<p><strong>TL:DR;</strong> DHCP relay using the <code>ip helper-address</code> interface subcommand ""cheats"" around the rule that routers cannot forward limited broadcasts by changing the packet's destination IP address to the unicast IP address of the DHCP server before routing it. This allows all routers down the line to route the packet appropriately to the DHCP server. When replying the DHCP server sends the packet back to the unicast IP address of the router interface that first received the DHCP Discover packet (the one with the <code>ip helper-interface</code> command). When the router receives the offer back it converts it back to a broadcast packet and sends it out the interface with the client in its broadcast domain.</p>
","10067"
"Cause of high CPU load on Juniper peering router's routing engine","19754","","<p>Recently the routing engine CPU utilization on two of our Juniper peering routers increased from ~10-20% average load to 80+%. I'm trying to figure out what's causing this (and how to get this high load back down).</p>

<p>Some info on the routers: both run the same JunOS version, both are connected to the same two peering IXP LANs and have a large number (several hundreds) of (almost identical) IPv4 and IPv6 sessions. Both routers have a connection to a different IP transit provider and are connected in the same way to the rest of our network. The routing engines' CPU load isn't flatline on 80+%, there are drops back to normal levels for minutes to hours, but these drops are not that often.</p>

<p>Things I've checked:</p>

<ul>
<li>no configuration changes have been made at the moment the increase started</li>
<li>there's no increase in non-unicast traffic directed at the control plane</li>
<li>there's no (substantial) change in the amount of traffic being forwarded (though even a increase shouldn't matter)</li>
<li><code>show system processes summary</code> indicates the <code>rpd</code> process is causing the high CPU load</li>
<li>there are no rapidly flapping BGP peers causing a large amount of BGP changes</li>
</ul>

<p>One possible explanation I can come up with is a peer (or more than one) on one of the IXP's both routers are connected to sending a large number of BGP updates. Currently I only have statistics on the number of BGP messages for my transit sessions (showing no abnormal activity) and with several hundreds of BGP sessions on the peering LANs it's not that easy to spot the problematic session(s) if I should create graphs for all sessions. </p>

<p>My questions are:</p>

<ul>
<li>are there any other things I should check to find the cause of this
increase in CPU load on the routing engines?</li>
<li>how can I easily find out which sessions are causing these problems
(if my assumption is right)? Enabling BGP traceoptions generates huge
amounts of data, but I'm not sure if it gives me any real insights.</li>
</ul>
","<p>There might be some helpful information for you at the <a href=""http://kb.juniper.net/InfoCenter/index?page=content&amp;id=KB26261#rpd"">Juniper Knowledge Center</a>.</p>

<p>If RPD is consuming high CPU, then perform the following checks and verify the following parameters:</p>

<ul>
<li><p>Check the interfaces: Check if any interfaces are flapping on the router. This can be verified by looking at the output of the show log messages and show interfaces ge-x/y/z extensive commands. Troubleshoot why they are flapping; if possible you can consider enabling the hold-time for link up and link down.</p></li>
<li><p>Check if there are syslog error messages related to interfaces or any FPC/PIC, by looking at the output of show log messages.</p></li>
<li><p>Check the routes:  Verify the total number of routes that are learned by the router by looking at the output of show route summary. Check if it has reached the maximum limit.</p></li>
<li><p>Check the RPD tasks: Identify what is keeping the process busy. This can be checked by first enabling set task accounting on.  Important:  This itself might increase the load on CPU and its utilization; so do not forget to turn it off when you are done with the required output collection.  Then run show task accounting and look for the thread with the high CPU time:</p>

<pre><code>user@router&gt; show task accounting
Task                       Started    User Time  System Time  Longest Run
Scheduler                   146051        1.085        0.090        0.000
Memory                           1        0.000            0        0.000  &lt;omit&gt;
BGP.128.0.0.4+179              268       13.975        0.087        0.328
BGP.0.0.0.0+179      18375163 1w5d 23:16:57.823    48:52.877        0.142
BGP RT Background              134        8.826        0.023        0.099
</code></pre></li>
</ul>

<p>Find out why a thread, which is related to a particular prefix or a protocol, is taking high CPU.</p>

<ul>
<li><p>You can also verify if routes are oscillating (or route churns) by looking at the output of the shell command: <code>%rtsockmon –t</code></p></li>
<li><p>Check RPD Memory. Some times High memory utilization might indirectly lead to high CPU.</p></li>
</ul>
","2135"
"Non-Cisco SFP's defaulting to an err-disable state in 2960s and 2960 PoE Switch","19567","","<p>I recently came across an issue while setting up a stack to replace an older M switch setup. I stacked 3 switches - 2 Cisco 2960's and 1 C2960 PoE using SFP cables to their backplane.</p>

<p>My plan was to use the SFP modules on the front end of the switches to uplink straight to the core rather than to a bottom M and a Top M that were uplinked to Core1 and Core2. </p>

<p>We purchased non-cisco SFP's (Cisco's are much more expensive) and installed them. What I noticed via Termmon, was that each SFP was going down as soon as it was plugged in.</p>

<pre><code>000016: *Feb 28 22:35:32.507 EST: %PHY-4-SFP_NOT_SUPPORTED: The SFP in Gi2/0/50 
 is not supported (B2-FL1-Stack-2)
000017: *Feb 28 22:35:32.507 EST: %PM-4-ERR_DISABLE: gbic-invalid error detected
 on Gi2/0/50, putting Gi2/0/50 in err-disable state (B2-FL1-Stack-2)
</code></pre>

<p>It's outputting that they are not compatible which is confusing considering the SFP is an international standard.</p>
","<p>After some research I determined that Cisco automatically disables non cisco branded SFPs. In order to prevent them from defaulting to <code>err-disable</code> I had to enter the following commands in config mode.</p>

<pre><code>Router(config)#service internal
Router(config)#no errdisable detect cause gbic-invalid
Router(config)#service unsupported-transceiver
</code></pre>

<p>I then configured the SFP interface to a management vlan, connected a laptop to it by changing the laptop's IP address and confirmed that the SFP does indeed take traffic. Hope this helps!</p>
","6949"
"Why do we use OSPF Point-to-Point Networks for Loopbacks?","19464","","<p>Why do we use the <code>ip ospf network point-to-point</code> command on loopback interfaces?</p>

<pre><code>interface Loopback0
 ip address 2.2.2.2 255.255.255.0
 ip ospf network point-to-point
</code></pre>

<p>kindly explain that..</p>
","<p>If we create a loopback and give classful or classless addresses, then by default the route to that loop back is advertised as the most specific route: /32 prefix and it will ignore any configured prefix.</p>

<p>Eg:</p>

<pre><code>interface Loopback0
 ip address 2.2.2.2 255.255.255.0
</code></pre>

<p>Here, the loopback network address is 2.2.2.0/24. By default OSPF will advertise this route to loopback0 as 2.2.2.2/32 (most specific route to that loopback).</p>

<p>To override this we have to change the network type to point-to-point. After this OSPF will advertise the address to loopback as 2.2.2.0/24.</p>

<pre><code>interface Loopback0
 ip address 2.2.2.2 255.255.255.0
 ip ospf network point-to-point
</code></pre>
","13104"
"I'm setting up a Cisco CCNA lab, what equipment would you recommend?","19289","","<p>Is it okay to use a Cisco 2948 for CCNA students, after all it's cheaper to get these switches and they have more features? Wouldn't this be better than a 2950 switch?</p>
","<p>CCNA requires the student to be familiar with the IOS operating system, this makes the Cisco 2948 unusable for a CCNA lab as it runs Catalyst OS (CatOS) and there is <strong>no way</strong> to upgrade the operating system from CatOS to IOS.  So while it may have  more features, for a pure CCNA lab it's not really usable.</p>

<p>Personally I would also recommend the following equipment (if you are not opting for GNS3):</p>

<ul>
<li><p>2 x Cisco 2610XM Advanced  Fast Ethernet 128Mb Dram / 32mb flash IOS 12.4
Adv Security</p></li>
<li><p>Cisco 1760 Fast Ethernet 64Mb Dram / 32mb flash IOS 12.4 Adv Security</p></li>
<li><p>3 x WIC-1T for the two 2600 routers</p></li>
<li><p>2 x Cisco ws2950</p></li>
</ul>
","299"
"Single Access Point vs. Multiple Access Points","18937","","<p>Vague Question:
If one access point can do the job adequately is there still an advantage to using more than one?</p>

<p>Scenario:
1 access point at the center of your network required coverage area should adequately cover the area. There will always be less than 50 wireless clients and 0 wired clients. Most of the clients will move throughout the required coverage area while in use and some would like to go just beyond the perimeter; but don't have to. A gigabit backbone is available for access points to be placed anywhere. There are neighboring wifi networks, but only horizontally.</p>

<p>Specific Question:
In this scenario is there an advantage to using multiple (say 2 ~ 4) access points and placing them near the perimeter of your required coverage area?</p>

<p>My 2 Hypotheses:</p>

<p>Hypothesis 1: With 1 access point at the center of the required coverage area broadcasting on dual bands with 1 channel each it will be easier to find clear channels. Clients will not have to migrate from access point to access point as they move throughout the covered area; possibly dropping the connection momentarily, or just failing to migrate at all. By maintaing a smaller perimeter there is less chance of interference from other neighboring wifi networks and equipment operating in the same band.</p>

<p>Hypothesis 2: With multiple access points near the perimeter of the coverage area more channels should be used; 1 channel for each access point (or should 1 be used for all since it is the same network?) possibly limiting it to 3 non-overlapping channels and 3 access points. Clients may migrate well from access point to access point while moving. They can leave the required perimeter somewhat. Everyone has a stronger signal, a lower chance of dropped packets, etc. Interference may be a bigger problem, especially with neighboring wifi networks.</p>

<p>NOTES: They will all have the same SSID and WPA2 Passphrase, SSID will be hidden and MAC filtering will be used, 802.11n or 802.11ac will be used. I have a clear understanding of networking and I'm not asking how to do this. I'm asking which is better based on scientific evidence. I don't have the budget to a-b test this.</p>

<p>Maybe this is really a question of how well will the clients migrate on their own, or maybe it it's more than that.</p>
","<p>In the scenario you describe, you should definitely be looking at multiple access points, preferrably dual band APs.</p>

<p>While coverage may be sufficient, coverage alone is no longer the primary consideration when deploying a wirelss network.  Client capacity, channel utilization, signal quality, and reliability are much more important and multiple access points will help with all of these.</p>

<p>By using 3 (or more) APs on multiple channels (1, 6, and 11), you will in effect triple the amount of airtime (bandwidth) available on your wireless network.</p>

<p>Additionally, proper placement of the APs will provide clients a closer AP with stronger signal, which will be more resistant to noise in the RF environment.  This will allow better signal-to-noise (SNR) ratios which will translate to the use of higher data rates and this results in more data transmitted per ""timeslot"".</p>

<p>I would recommend placing them 2/3 to 3/4 of the way from the center to the perimeter, spaced roughly evenly.  Try to get them in or as close to the highest user denisity locations as possible (i.e. conference rooms, etc).</p>

<p>Finally, the additional access points will provide increased reliability.  With a single access point, if it were to fail or reboot for any reason, this would create a disruption in service.  Having multiple access points should allow for coverage to overlap, allowing service to remain (if degraded) when you have an access point down.</p>
","7111"
"cisco 2960G won't boot and no console output","18860","","<p>I have three Cisco 2960G switches that I pulled from a working environment. All three of them are experiencing the same problem, so I have a hard time believing they have all simply failed.</p>

<p>Here's the problem:</p>

<p>When I plug in the power, all the ports lights flash once and the SYST, RPS, STAT, DUPLX and SPEED lights come on for a second. Then all the lights turn off, except for the SYST light which stays green. Nothing ever appears on the serial console. Holding the Mode button while applying power does nothing.</p>

<p>Do I really have 3 switches that all died at the same time?</p>
","<p>Open a TAC case as these may be affected by this <a href=""http://www.cisco.com/c/en/us/support/docs/field-notices/637/fn63744.html"">Field Notice</a>.</p>

<p>This revolves around a known memory issue by parts from a particular supplier that have a high failure rate.  These parts have been included in many different platforms including many models of the 2960 line.  You can find the main page discussing this issue and providing a number of field notices <a href=""http://www.cisco.com/web/about/doing_business/memory.html"">here</a>.</p>

<p>In particular, the failure can occur during normal operation, but won't interrupt service.  It is only after the devices have been power cycled that they fail to boot.</p>

<p>Specifically to your issue, would be this excerpt:</p>

<blockquote>
  <p>The failure symptom is observed when the switch fails to boot up with
  no console response (no characters are written to the console).</p>
</blockquote>
","9541"
"Spanning tree Default Priority Values","18622","","<p>This question is a repost of the <a href=""https://learningnetwork.cisco.com/thread/7265"" rel=""nofollow"">same question</a> in <a href=""https://learningnetwork.cisco.com/"" rel=""nofollow"">The Cisco Learning Network</a>; however, the answers are unique to Stack Exchange.</p>

<hr>

<p>I have always accepted that the defualt priority value of STP (802.1d) is 32768 (32768 + sys-id-ext x) as show in ""show spanning-tree"" below -</p>

<pre><code>SW3#show spanning-tree 
VLAN0001
  Spanning tree enabled protocol ieee
  Root ID    Priority    24577
             Address     00D0.D3E6.9838
             Cost        19
             Port        1(FastEthernet0/1)
             Hello Time  2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32769  (priority 32768 sys-id-ext 1)
             Address     00D0.BCB5.B556
             Hello Time  2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time  20

Interface        Role Sts Cost      Prio.Nbr Type
---------------- ---- --- --------- -------- --------------------------------
Fa0/8            Desg FWD 19        128.8    P2p
Fa0/1            Root FWD 19        128.1    P2p
Fa0/24           Altn BLK 19        128.24   P2p
</code></pre>

<p>SW3#</p>

<p>Now, when I want to configure priority I don't undertand WHY the priority must be in increments of 4096 ?
Is there a specific reason for the default value of both of these numbers?</p>

<pre><code>SW3(config)#spanning-tree vlan 1 priority ?
  &lt;0-61440&gt;  bridge priority in increments of 4096
SW3(config)#spanning-tree vlan 1 priority
</code></pre>

<p>Thanks in advance.</p>
","<p>In the spanning tree algorithm the process of determining the root bridge is based on the bridge priority (BID). </p>

<p>When there were no VLANs (meaning that switches had to deal with only one broadcast domain) the BID was equal to:</p>

<pre><code>Bridge priority - MAC Address
   &lt;2 bytes&gt;       &lt;6 bytes&gt;
</code></pre>

<p>As Network administrators we can modify the <strong>bridge priority</strong> value.</p>

<p>When VLANs were introduced the needing of differentiating the STP protocol raised (Per VLAN Spanning Tree - PVST). </p>

<p>To accomplish this the bridge priority value was modified as follows:</p>

<pre><code>Bridge priority - Exstended system ID (VLAN ID)
     4 bit      -           12 bit
</code></pre>

<p>We are still able to modify the bridge priority but this means to operate to the 4th most significative bit over 16 bits. </p>

<p>To put it simple:  </p>

<blockquote>
  <p>Legend : C= changeable ; U= unchangeable</p>
  
  <p>CCCCUUUUUUUUUUUU 16 bits</p>
  
  <p>0001UUUUUUUUUUUU 1*2^12 = 4096</p>
  
  <p>0111UUUUUUUUUUUU Default: 32768 </p>
  
  <p>0111000000000001 Default for VLAN 1: 32769       </p>
</blockquote>
","7183"
"Cisco IOS privilege level explained","18306","","<p>I have access with level 1 privilege on a Cisco switch.  But, I want to see all configurations and interfaces, while being able to modify nothing. I searched the internet for the proper level of privilege but found nothing. Can someone explain each level and say which level is appropriate for seeing everything but modify nothing?</p>
","<p>There are 16 privilege levels. Usermode is level one. The highest is 15, sometimes referred to as privileged mode. There's also a level 0, which has even fewer options that usermode. </p>

<p>To get into level 15, where you can view configurations and modify them, type <code>enable</code> in usermode. Provided that you have the password, your prompt will change from <code>&gt;</code> to <code>#</code>. You can then enter commands such as <code>show running-config</code>, <code>show startup-config</code>, <code>debug</code>, and <code>configure terminal</code>.</p>

<p>The other levels (2-14) are used for custom access. For instance, if I have a junior admin that I want to be able to have access to the command <code>show run</code>, but not <code>config t</code>, I can configure these specific rules to be associated with a particular level. Whatever level you are, you get access to everything in your level, plus all of the commands found with the lower levels.</p>

<p>For example:</p>

<pre><code>username junioradmin privilege 2 password bingo
</code></pre>

<p>[This creates a login that when used will be placed in level 2 instead of the default level 1]</p>

<pre><code>privilege exec level 2 show running-config
</code></pre>

<p>[This says to allow any level 2 user to have the ability to enter <code>show run</code>. But remember, they can also enter any command from a lower level, so all usermode commands are also included.]</p>

<pre><code>line con 0
login local
</code></pre>

<p>[This will prompt for the username. It says to the device, ""Use the local database for logging in.""]</p>

<p>If you do this configuration, login, and then enter the <code>show run</code> command, it will work. Then enter <code>show start</code>; this will not work because <code>show start</code> is a level 15 command.</p>
","6184"
"Cisco config example for Policy Based Routing","18234","","<p><em>I find my self in a situation I was in not too long ago, but I can't
remember how I resolved it :)</em></p>

<p><strong>The Scenario</strong></p>

<p>I have a Cisco IOS router with a LAN interface (fa0/0) and a WAN
interface (fa0/1), and 2nd WAN interface (fa0/2).</p>

<ul>
<li>There are two LAN sub-interfaces fa0/0.10 and fa0/0.20 lets say.</li>
<li>There is a default route via fa0/1. However, there is a static route
to a specific subnet, lets say 1.2.3.4/24 via fa0/2 (fa0/2 is closer
to this subnet, but a more expensive $$$ WAN link)</li>
</ul>

<p>All my fa0/0.10 users are accessing 1.2.3.4/24 and so the static route
sends them out of fa0/2 (WAN2). For all other destinations fa0/0.10 users go
via the DHCP default route I receive on the WAN1 interface fa0/1.</p>

<p><strong>The problem definition;</strong></p>

<p>Users in the fa0/0.20 subnet just access the Internet. No user in my fa0/0.20 subnet every really has the need to access the remote 1.2.3.4/24 subnet. Rarely they do though, in which case the static route sends them via fa0/2. I don't want this though, I want them to access 1.2.3.4/24 via fa0/1, the default WAN interface. I believe I can achieve this via PBR, but I can't seem to get it to work?</p>

<p>This is the config I am trying at present;</p>

<pre><code>interface FastEthernet0/0.10
 description LAN1
 encapsulation dot1Q 10
 ip address 192.168.10.1 255.255.255.0
 ip nat inside
 ip virtual-reassembly

interface FastEthernet0/0.20
 description LAN2
 encapsulation dot1Q 20
 ip address 192.168.20.1 255.255.255.0
 ip nat inside
 ip virtual-reassembly
 ip policy route-map FORCE-LAN2-VIA-WAN1

interface FastEthernet0/1
 description WAN1
 ip address dhcp
 ip nat outside
 ip virtual-reassembly

interface FastEthernet0/2
 description WAN2 - Used for 1.2.3.4/24
 ip address 5.5.5.5 255.255.255.0

! Static route to route to a remote subnet via 2nd WAN link
ip route 1.2.3.4 0.0.0.255 5.5.5.6
! A default route is received on fa0/1 (WAN1) via DHCP from ISP
! for all other traffic
!
! NAT fa0/0.10 users when accessing the Internet via WAN1
ip nat inside source route-map ROUTE-WAN1 interface FastEthernet0/1 overload
!
! NAT fa0/0.20 users out via WAN1
ip nat inside source route-map FORCE-LAN2-VIA-WAN1 interface FastEthernet0/1 overload

route-map ROUTE-WAN1 permit 10
 match interface FastEthernet0/1

route-map FORCE-LAN2-VIA-WAN1 permit 10
 match interface FastEthernet0/0.20
 set default interface FastEthernet0/1
</code></pre>

<p>I am trying to apply policy based routing directly to the fa0/0.20 sub interface to force all traffic via WAN1, fa0/1. My understanding is, that because there is a more specific route than the default route received by DHCP on fa0/1 in the FIB, it overrides the PBR and traffic from fa0/0.20 to 1.2.3.4/24 is still using WAN2, fa0/2. Or at least, I believe this to be the case when using ""set default interface..."". If I were to use ""set ip next-hop"" for example, this would force the PBR to take precedence, but WAN1, fa0/1, receives an IP by DHCP and is thusly changing :)</p>

<p>As a side note; There are actually many static routes via WAN2, so I don't want to reverse the situation and policy route fa0/0.10 via WAN2 for specific subnets. The config there is more complex than I have let on, long and short of it is though, it is not viable to change that. Additionally, if there is a better way to tackle this problem other than PBR, I'm all ears. I am fighting with this method because it is the best solution I am aware of.</p>

<p><strong>Update</strong> Added a spectacularly drawn topology diagram</p>

<p><img src=""https://i.stack.imgur.com/MNB5e.png"" alt=""Topology""></p>
","<p>I would recommend using a route-map for only one purpose (one for nat, another to pbr); mixed use can make for a mess.  For NAT, the <code>match interface</code> will apply post-routing -- handy to make conditional nat entries.</p>

<p>The route-map for PBR should use an ACL to match the traffic coming from LAN2 and then set the next-hop to the desired interface with <code>set interface</code> not <code>set default</code> -- or <code>set ip next-hop dynamic dhcp</code> as you won't know the actual gw address.  This bypasses / overrides any routing logic that would otherwise send then traffic to your expensive WAN.</p>
","933"
"Why do switches need ARP tables when the translation are done on the machines side?","18216","","<p>As it is clear from the title, why do switches need ARP tables when the translation are done on the machines side?</p>

<p>Roughly saying, why there are two ARP tables on machines and on switches? Is not the one on the switch sufficient?</p>
","<p>This is a pretty common misconception or more specifically, a terminology problem.  In a layer two switch, there is not an ARP table, only a forwarding table.  The switch records each src MAC address it sees inbound in the forwarding table, and attributes it to the port so frames with a dst MAC will only get sent to the port known for that MAC.  Many people call this an ""arp table"" or ""arp cache"" even though it is neither.</p>

<p>In a managed layer two switch, there is a forwarding table plus an ARP table but the latter is only used for the management interface to talk to interested hosts (i.e. the PC you are using to configure the switch.)  In a managed layer 3 switch there will be a forwarding table plus an ARP table, since it needs it for the management interface plus router functionality exists to perform forwarding between subnets.</p>
","18283"
"Sonicwall: Allow WAN access to device on separate interface","18069","","<p>I've inherited a Sonicwall TZ-210 (SonicOS Enhanced 5.5.20-3o) firewall running a multiple interface config:</p>

<p>1st Interface: Running LAN (data network)
2nd Interface: Running PBX network (voice network)</p>

<p>I've disabled some NAT settings for the PBX server, and now the server (on X5) cannot communicate with the internet, nor is it reachable from X1. I've tried re-enabling the NAT policies and restarting the server, however there is still no luck.</p>

<p>Additionally, there is no status for the voice network (X5) as indicated in the screenshot below.</p>

<p><img src=""https://i.stack.imgur.com/W1pyU.png"" alt=""Sonicwall Interface setup, why is there no status for X5?""></p>

<p>Question: How can I allow internet and access from X1 (WAN) to all of X5 interface or just the PBX server running on X5?</p>

<p>Here are the NAT policies:
<img src=""https://i.stack.imgur.com/6JKK7.png"" alt=""enter image description here""></p>

<p>..and here are the Routing policies:
<img src=""https://i.stack.imgur.com/CaZ98.png"" alt=""enter image description here""></p>

<p>Thanks!</p>
","<p>With the Sonicwall Enhanced OS you can define Address Objects and Service objects to make management much simpler.  First, make sure your host or server is listed as an Address Object under Network -> Address Objects.  Then move on to Network -> Services to add your services you wish to route.  Note that you can add individual services and put them into groups.  This makes it simpler to route items based on individual ports or port groups.  </p>

<p>Once your Address Object and Services are ready, go to the Firewall->Access Rules and make sure you Allow the service(s) you wish to route from the WAN to LAN zones.  Now that you've allowed the traffic you can go to Network -> NAT policies and click Add at the top.  Here you will use the Address Object and Service/Service group that you created.</p>

<p><img src=""https://i.stack.imgur.com/GnCNi.png"" alt=""Sample NAT Policy""></p>

<p>Above you see that the source is ANY allowing all external IPs, the Translated Source keeps the original information, the Original destination is your WAN IP of your WAN interface, the Translated Destination is your target host, and the Original Service is the ports you wish to map to that target server.  You can translate the services if you like, for instance routing port 3390 to 3389 for RDP on a machine to avoid registry hacks but ensure you have a reverse rule enabled for the outbound path.  You can also define which interfaces this policy is bound to if you like, so for your example the Inbound would be x1 and Outbound x5.</p>

<p>This should allow you to point to your external IP for these services via x.x.x.x:port and route to the target server.</p>

<p>EDIT:</p>

<p>For the internal routing under Network-->Zones choose LAN and check the box for Allow Interface Trust. This should allow traffic to flow between interfaces. Keep in mind this does open all LAN interfaces to share traffic so any segmentation that is currently configured may be broken. If you do not wish for all traffic to be trusted between interfaces then do not use this option.</p>

<p>For specific LAN routing you can manually add a route from x5 subnet to x0 subnet over any service with the local gateway (0.0.0.0) and use the x0 interface.  If you wish to route directly to an individual host then select it as your Destination instead of the x5 Subnet.  Make sure that there is a converse rule to allow traffic from that host to the x0 subnet as well.</p>
","6233"
"MikroTik - problem with port bridge over LAN using 2 switches","17814","","<p>I have <strong>RB2011UiAS-2HnD-IN</strong> router in my network. It has two switches - ""<strong>switch1</strong>"" with 5 x 1Gb ports and ""<strong>switch2</strong>"" with 5 x 100Mb ports. There is only one LAN addressing pool - 192.168.1.0. </p>

<p><img src=""https://i.stack.imgur.com/xISay.jpg"" alt=""MikroTik - problem with port bridge over LAN using 2 switches""></p>

<p>All 5 ports at ""<strong>switch1</strong>"" is used. I needed to attache one more device so I connected it to 1st port at ""<strong>switch2</strong>"". There is no connection to this device. All 5 ports from ""switch1"" are in one <strong>bridge-local</strong> and first port from ""<strong>switch2</strong>"" is also attached to this <strong>bridge-local</strong>. It is also <strong>master-port</strong> and to him are slaved 4 more ports from ""<strong>switch2</strong>"" - so I can only add master to the whole <strong>bridge-local</strong> ports pool. </p>

<p>I have no cennectivity to my new device. I changed ports for one from ""<strong>switch1</strong>"" and everything is working properly. There is problem when I try to use ports from ""<strong>switch2</strong>"".</p>
","<p>I'd suggest to remove ports from bridge if it is possible to add them to switch group. When your ports are bridged - all packets going through these interface are processed using CPU while, if they would have been in the same switch group, special switch chip would process those packets, decreasing load on CPU.</p>

<p>So, in your case, you can make <strong>ether1</strong> to be a master port for <strong>ether2-5</strong>. Don't forget that before assigning master port you have to remove them from bridge (<strong>bridge-local</strong>). Then, do the same for the second switch group (ports 6-10), so <strong>ether6</strong> will be a master port for <strong>ether7-10</strong>.</p>

<pre><code>/interface ethernet
  set ether1 master-port=none
  set ether2 master-port=ether1
  set ether3 master-port=ether1
  set ether4 master-port=ether1
  set ether5 master-port=ether1
  set ether6 master-port=none
  set ether7 master-port=ether6
  set ether8 master-port=ether6
  set ether9 master-port=ether6
  set ether10 master-port=ether6
</code></pre>

<p>After doing that you'll get two separate and independent switch groups, however, as you mentioned it in your post, you want them to be connected. In such case, there are two options:</p>

<ul>
<li>to use software bridge;</li>
<li>connect them using cable.</li>
</ul>

<h3>Software (CPU) bridging</h3>

<p>In this case, switch groups 1 and 2 will be switched using CPU, so any packet going from any interface in group 1 to group 2, or vice versa, will be processed using CPU.</p>

<pre><code>/interface bridge
  add name=bridge-local
  port add interface=eth1 bridge=bridge-local
  port add interface=eth6 bridge=bridge-local
</code></pre>

<p><strong><em>NOTE:</em></strong> don't forget to assign an IP address to the bridge and, if you're using DHCP server on Mikrotik, change its interface to <strong>bridge-local</strong> as well.</p>

<pre><code>/ip address add interface=bridge-local address=192.168.1.1/24
/ip dhcp-server add interface=bridge-local address-poll=[name of your address pool]
</code></pre>

<h3>Patch cord</h3>

<p>Just connect any port from group 1 (<strong>ether1-5</strong>) to any port in group 2 (<strong>ether6-10</strong>). Yes, it takes 2 port and only applicable if you have ones. If all ports in one of the switch groups are already in use, I'd suggest using first option (bridging).</p>
","13393"
"vlan 0, 1, and 4095 are reserved: what are they reserved for?","17679","","<p><a href=""https://networkengineering.stackexchange.com/a/3483/16906"">This answer</a> says vlans 0 and 4095 are reserved. <a href=""https://en.wikipedia.org/wiki/IEEE_802.1Q#Frame_format"" rel=""nofollow noreferrer"">Wikipedia agrees that vlans 0 and 4095</a> are reserved. <a href=""http://www.microhowto.info/howto/configure_an_ethernet_interface_as_a_vlan_trunk_on_redhat.html"" rel=""nofollow noreferrer"">This article</a> says that Cisco reserves vlan 1 (in addition to vlans 0 and 4095).</p>

<p><strong>But I am having trouble finding good information on what are these vlans reserved for? and/or why they are reserved?</strong></p>

<p>Please include good authoritative sources please or references to the spec.</p>

<p><strong>If I want to transmit/receive, is it a good rule of thumb to just not use vlans 0,1,4095?</strong></p>
","<p>The <a href=""https://en.wikipedia.org/wiki/IEEE_802.1Q#Frame_format"">Wikipedia article you mention</a> gives a succinct explanation:</p>

<blockquote>
  <p>VLAN identifier (VID): a 12-bit field specifying the VLAN to which the
  frame belongs. The hexadecimal values of 0x000 and 0xFFF are reserved.
  All other values may be used as VLAN identifiers, allowing up to 4,094
  VLANs. The reserved value 0x000 indicates that the frame does not
  carry a VLAN ID; in this case, the 802.1Q tag specifies only a
  priority and is referred to as a priority tag. On bridges, VID 0x001
  (the default VLAN ID) is often reserved for a management VLAN; this is
  vendor-specific. The VID value 0xFFF is reserved for implementation
  use; it must not be configured or transmitted. 0xFFF can be used to
  indicate a wildcard match in management operations or filtering
  database entries.</p>
</blockquote>

<p>As you can see, there isn't really a usable VLAN 0 or 4095.  Cisco uses VLAN 1 as a default VLAN, and management protocols (STP, CDP, DTP, etc) are sent on VLAN 1.</p>

<p>You can use VLAN 1 for simple installations where there is no VLAN trunking, but good practice is to not put user data on VLAN 1 in a multi-VLAN environment.</p>
","24406"
"At wich layer ""routers"" work in architecture TCP-IP","17661","","<p>Well, i'm studying to a test, based on the following layers: link, internet, transport and application (Architecture TCP-IP) i would like to know which layer or layers ""routers"" work and why it can't work in another layers.</p>
","<p>Generally speaking, routers utilize the IP protocol (i.e. IP addresses) to make decisions while directing traffic and do not care about the transport protocol.  The IP protocol would map to the internet layer.</p>

<p>The TCP or UDP protocols would operate at the transport layer.  Typically a device that would direct traffic based on transport layer protocols (or application layer) would include proxies, load balancers, or shaping devices depending on its exact function.</p>

<p>Devices that operate at the link layer (most often Ethernet today) would include switches or bridges.</p>
","8151"
"Troubleshooting ""Down BGP"" connections","17614","","<p>Our network experienced a short outage when one of our BGP routes went down for a short time yesterday. Thankfully our connections failed over to our secondary BGP route after a few minutes, and the primary route became operational after a shut/no shut on the ISP side.</p>

<p>We're running 2 stacked (backplane) Cisco 3750e switches running iOS 12.2 58.</p>

<p>In my conversation with our ISP, they couldn't give any definitive answers to the cause. <strong>Is there anything that we can do to pinpoint the cause on our end to avoid this issue in the future?</strong></p>

<p><em>Log at the time of error</em></p>

<pre><code>172258: May  6 14:43:06: %BGP-5-ADJCHANGE: neighbor xxx.xxx.12.34 Down BGP Notification sent
172259: May  6 14:43:06: %BGP-3-NOTIFICATION: sent to neighbor xxx.xxx.12.34 4/0 (hold time expired) 0 bytes
172260: May  6 14:43:06: %BGP_SESSION-5-ADJCHANGE: neighbor xxx.xxx.12.34 IPv4 Multicast topology base removed from session  BGP Notification sent
172261: May  6 14:43:06: %BGP_SESSION-5-ADJCHANGE: neighbor xxx.xxx.12.34 IPv4 Unicast topology base removed from session  BGP Notification sent
</code></pre>

<p><em>Log when ISP did a shut/no shut to reset BGP on their side</em></p>

<pre><code>172542: May  6 15:04:15: %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet2/0/49, changed state to down
172543: May  6 15:04:16: %LINK-3-UPDOWN: Interface GigabitEthernet2/0/49, changed state to down
172544: May  6 15:04:16: %PIM-5-NBRCHG: neighbor xxx.xxx.12.34 DOWN on interface GigabitEthernet2/0/49 non DR
172545: May  6 15:04:16: %PIM-5-NBRCHG: neighbor xxx.xxx.12.34 UP on interface GigabitEthernet2/0/49 
172546: May  6 15:04:16: %PIM-5-DRCHG: DR change from neighbor 0.0.0.0 to xxx.xxx.12.35 on interface GigabitEthernet2/0/49
172547: May  6 15:04:18: %LINK-3-UPDOWN: Interface GigabitEthernet2/0/49, changed state to up
172548: May  6 15:04:19: %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet2/0/49, changed state to up
</code></pre>

<p><em>Log when the BGP connection finally went from idle to Up</em></p>

<pre><code>172828: May  6 15:27:33: %BGP-5-ADJCHANGE: neighbor xxx.xxx.12.34 Up
</code></pre>

<p><em>BGP interface on our end (note: no CRC, drops, collisions reported...)</em></p>

<pre><code>GigabitEthernet2/0/49 is up, line protocol is up (connected)
Hardware is Gigabit Ethernet, address is xxxx.xxxx
Internet address is xxx.xxx.12.35/31
MTU 1500 bytes, BW 1000000 Kbit/sec, DLY 10 usec,
reliability 255/255, txload 1/255, rxload 3/255
Encapsulation ARPA, loopback not set
Keepalive not set
Full-duplex, 1000Mb/s, link type is auto, media type is 1000BaseLX SFP
input flow-control is off, output flow-control is unsupported
ARP type: ARPA, ARP Timeout 04:00:00
Last input 00:00:09, output 00:00:12, output hang never
Last clearing of ""show interface"" counters never
Input queue: 0/75/52/0 (size/max/drops/flushes); Total output drops: 0
Queueing strategy: fifo
Output queue: 0/40 (size/max)
5 minute input rate 14536000 bits/sec, 1655 packets/sec
5 minute output rate 1010000 bits/sec, 640 packets/sec
413176726 packets input, 428902543141 bytes, 0 no buffer
Received 143495 broadcasts (0 IP multicasts)
0 runts, 0 giants, 0 throttles
0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored
0 watchdog, 139275 multicast, 0 pause input
0 input packets with dribble condition detected
125748632 packets output, 42915625632 bytes, 0 underruns
0 output errors, 0 collisions, 0 interface resets
0 unknown protocol drops
0 babbles, 0 late collision, 0 deferred
0 lost carrier, 0 no carrier, 0 pause output
0 output buffer failures, 0 output buffers swapped out
</code></pre>
","<p>172259: May  6 14:43:06: %BGP-3-NOTIFICATION: sent to neighbor xxx.xxx.12.34 4/0 (hold time expired) 0 bytes</p>

<p>That generally means the other side of the connection did not respond to any keepalives within the hold timer (default 180 seconds). There are a variety of issues that could have caused this. Usually its a layer3 reachability issue. If it happens again, you should rule out layer3 issue by testing to the peer via ping and telnet (telnet to port 179, see if it responds).</p>

<p>If its not a layer3 reachability issue, then there was a problem with one end of the neighborship (more likely the far side in this case).</p>
","23"
"POE, POE+, UPOE","17516","","<p>I see that Cisco now has a 60 watt POE option. What was the limitation that caused POE to have to be developed in stages of 15, 30, and then 60 watts? Why could they not just do 60 watts from the inception of POE?</p>
","<p>Like many standards, the initial standard is never sufficient to the developing technology.  Once people have the ""ability"" to do something, they will often find new (and previously unexpected) ways of using that ability.  802.11 wireless is a prime example as no one originally expected it to develop into a ""wired replacement"" that we are heading towards today in many cases.</p>

<p>802.3af was largely implemented to power VoIP phones and early access points.  The list of devices that started using it grew quickly, and as it grew and the technology changed,  it was found that 802.3af didn't deliver enough power for everything people wanted.  For instance, it could power a video camera, but maybe not a PTZ video camera.  Or it could power that single radio access point, but not a 802.11n (more complex and power hungry) dual radio access point.  Basic VoIP phones were fine, but high definition screen with video capability VoIP phones didn't have the power needed.</p>

<p>It was also found to be somewhat inefficient in it's power delivery.  Short of vendor proprietary extensions, a PoE port always delivered 15.4W of power to the device, even if the device didn't need that much.</p>

<p>So, another standard was developed to meet these needs, 802.3at.  This provides up to 30W of power and allows devices to negotiate their power needs.  If you only need 3W of power, it can do so and doesn't need to deliver 30W.  Interoperation with 802.3af devices is accomplished by delivering 15.4W to any device that doesn't negotiate for more or less.</p>

<p>Cisco came up with the 60W for exactly the reason I gave to start out (they were also one of the first to deliver inline power, and higher than 15.4W of power through proprietary protocols).  If the ""ability"" is there,  then people will come up with ways to use it.  Their thought process is ""why limit what we can do within the power budget?  Let's just provide more power.""</p>

<p>This is both good and bad.  Good because we will see new abilities by PoE devices or entirely new PoE devices that were not previously realized.  Bad because there are other concerns to keep in mind.</p>

<p>For instance, most people don't consider heat in their cable plant when thinking about PoE (for instance look <a href=""http://www.siemon.com/us/white_papers/08-06-09-poe-and-operating-efficiency.asp"">here</a> or <a href=""http://ict.root-technologies.net/up/root_147582941_2009-3-16.pdf"">here</a> for examples).  The more power you run through a cable, the more heat that it generates and needs to be dissipated.  This may reduce how far you can run cables depending on the category of your cables.  Others have raised concerns because data cabling is often ""bundled"" with up to hundreds of data cables being tightly bound together and this can result in higher temperatures in the center of the bundles.</p>

<p>Cisco claims that UPoE is better than 802.3at at heat dissipation, but I have yet to find a non-Cisco document (or non-Cisco sponsored) that bears this out.</p>

<p>Another concern is that the more power you need to deliver to end devices through PoE, the more power the switch needs to draw.  How big would the power supplies on a Cisco 4500 have to be to provide up to 60W on its potential 384 UPoE ports (in addition to the power needs of the switch itself)?  UPSes to provide reliable power to these pieces of network equipment would then have to be upsized as well.</p>

<p>If it shapes up that the industry find use for 60W, then the IEEE will draft another ammendment/standard.  </p>
","1485"
"How to check for a valid public IP address?","17356","","<p>Consider a list of IP addresses as provided by <a href=""http://en.wikipedia.org/wiki/X-Forwarded-For"">the X-Forwarded-For HTTP header</a>:</p>

<blockquote>
  <p>10.0.0.142 , 192.168.0.10 , 212.43.234.12 , 54.23.66.43</p>
</blockquote>

<p>I would like to know which is the first publicly-accessible address in that list. I can look over them easily enough, but how can I tell which are publicly-accessible? It seems to me (my untrained eye) that <code>10.0.0.142</code> is a workstation, <code>192.168.0.10</code> is an internal proxy, and <code>212.43.234.12</code> is a publicly-accessible address being forwarded through the proxy at <code>54.23.66.43</code>. Is there any way to calculate this in code?</p>

<p>My first intuition is that addresses that start with <code>10.</code> or <code>192.</code> are not publicly accessible, but <a href=""http://simplesniff.com"">http://simplesniff.com</a> reveals my home IP address to be <code>192.117.111.61</code>. Is there a formula for determining which addresses are public and which are reserved private? Note that even trying to ping the server in question might not help as some servers won't respond to ping, and also there might be an address on my local network which also matched the internal address.</p>
","<p>RFC 1918 defines private IP address ranges. Have a look <a href=""http://tools.ietf.org/html/rfc1918"">here.</a></p>

<p>From that document:</p>

<ol>
<li><p>Private Address Space</p>

<p>The Internet Assigned Numbers Authority (IANA) has reserved the
following three blocks of the IP address space for private internets:</p>

<p>10.0.0.0        -   10.255.255.255  (10/8 prefix)</p>

<p>172.16.0.0      -   172.31.255.255  (172.16/12 prefix)</p>

<p>192.168.0.0     -   192.168.255.255 (192.168/16 prefix)</p></li>
</ol>
","2284"
"What is the difference between smart vs managed switch?","17312","","<p>I want to buy a new switch to replace an old one which is unmanaged and I see that there are smart and managed switches.. what it the difference? </p>
","<p><strong>What are the differences in features and application scenarios among various serial switches?</strong></p>

<p>There is L2/L3 managed Switch, Smart Switch, Easy Smart Switch and Unmanaged Switch in TP-LINK official website, this article will give a brief account about the features and application scenarios of the respective switch.</p>

<p><strong>Unmanaged Switch</strong><br/>
You are not able to configure the unmanaged switch because it doesn’t support any configuration interface or options. It is plug-and-play, so you only need to connect your computer or other network devices to the unmanaged switch directly. Therefore, if you do not need any L2 features, but only need to extend the number of Ethernet ports, unmanaged switch is the right switch for you.</p>

<p><strong>Easy Smart Switch</strong><br/>
You can use Utility or Web interface (Web only for TL-SG1016DE and TL-SG1024DE) to manage easy smart switch and configure basic settings, such as VLAN, QoS and a few L2 features like LAG, IGMP Snooping and Port Mirroring. If there are no advanced applications needed, easy smart switch should be the best choice for you. Normally, easy smart switch will be found in the home, SOHO or small business.</p>

<p><strong>Smart Switch</strong><br/>
Smart switch can be managed by Web interface, Telnet, SSH and SNMP. It supports far more L2 features and better QoS than easy smart switch, additionally, smart switch supports more advanced functions like ACL and Spanning Tree protocol, if you want to support a solution for one small company or colleague with a lower price, the Smart switch is the indispensable device.</p>

<p><strong>L2 Managed Switch</strong><br/>
L2 managed switch has a console port for CLI (Command Line Interface), it has all the managing ways and advanced features that smart switch has, besides, L2 managed switch has abundant VLAN and Multicast features as well as cluster for logical stacking and Network Security features including 802.1X and IP-MAC binding. So you can use L2 managed switch to build a resiliency and availability network or even build up a small ISP Access Network.</p>

<p><strong>L3 Managed Switch</strong><br/>
L2 switch could only work in Layer 2--Data Link Layer of OSI model. But Layer 3 switch has some L3 functions just like a traditional router--static routing, routing protocol like OSPF and ECMP, multicast routing protocol and DHCP relay.
Compared with a traditional router, L3 switch has lower cost but better performance in packet routing speed because the layer 3 switch routes packets by its hardware--ASIC instead of CPU, once it learned the IP address, it will forward packets by switching performance. It is mainly used in the core layer of a middle sized business network, providing better hardware switching performance in routing. </p>

<p>source: <a href=""http://www.tp-link.com/en/faq-839.html"" rel=""nofollow"">TP-LINK</a></p>
","33720"
"Copy running config in one line","17269","","<p>I want to make a script to copy the running config of a switch 4506 in one line. 
So far, I see two option :  </p>

<p><strong>copy run tftp:</strong>  </p>

<pre><code>sw#copy run tftp://10.0.0.1/cfg.cfg
Address or name of remote host [10.0.0.1]? 
Destination filename [cfg.cfg]? 
</code></pre>

<p>Cons: need confirmation, press enter. </p>

<p>Info : I have define the <code>ip tftp source-interface Vlan10</code> with management vlan to have connectivity.</p>

<p>or </p>

<p><strong>show running-config | redirect tftp://10.0.0.1/run-R1.cfg</strong>  </p>

<pre><code>sw#show running-config | redirect tftp://10.0.0.1/run-R1.cfg
.....
%Error opening tftp://10.0.0.1/run-R1.cfg (Timed out)
sw#sh ip route 10.0.0.1 
% Subnet not in table
</code></pre>

<p>Cons: the ip source of the redirect is an private IP 172.16.0.2 due this is a transit subnet. So no connectivity with the outgoing interface IP but connectivity with the managment subnet. as you can see below. </p>

<pre><code>sw#ping 10.0.0.1 source vlan 10    
Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 10.0.0.1, timeout is 2 seconds:
Packet sent with a source address of 172.16.0.2 
.....
Success rate is 0 percent (0/5)
sw#ping 10.0.0.1 source vlan 11
Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 10.0.0.1, timeout is 2 seconds:
Packet sent with a source address of &lt;Public_IP&gt; 
!!!!!
Success rate is 100 percent (5/5), round-trip min/avg/max = 4/6/8 ms
sw#
</code></pre>

<p><code>ip tftp source-interface Vlan10</code> does not help with <code>redirect</code></p>

<p>Questions :<br>
- Is there the possibility of no confirmation copy with 'copy run tftp:' ?<br>
- How can I define for all packet sourced on switch should be sourced with a defined IP ?  </p>
","<p>Try turning file prompt behavior to quiet.</p>

<pre><code>6506(config)#file prompt quiet
6506(config)#end
6506#copy run tftp://192.168.1.1/file.txt
.....
</code></pre>
","3358"
"How to generate traffic for lab scenarios","17208","","<p>I'd like to start exploring QoS, and lower level optimizations for things like broadcasts/multicasts within my home lab.  I've looked around for ways to generate traffic to and from a box, but haven't found anything to really max out what a given port can handle to really see the effects of QoS etc.</p>

<p>I'd love to be able to watch in real time via PRTG or some other monitoring tool - a maxed out line or a busy line(s) before implementing QoS and then be able to see the change in real time.</p>

<p>What tools are availableto assist with these tasks?</p>
","<p>You can use <a href=""http://sourceforge.net/projects/iperf/"">iperf2</a> or <a href=""http://code.google.com/p/iperf/"">iperf3</a> to help generate some traffic. There are quite a few options included that will allow you to accomplish some nice traffic classification.</p>

<p>You might also check out <a href=""http://www.secdev.org/projects/scapy/"">scapy</a> - specifically a packet former utility. Allows you to define values on each field to get really granular with how traffic is being formed and sent.</p>

<p>In my lab, I have two virtual machines at opposite ends of a physical network. I use both tools I mentioned to send traffic between the virtual machines, but that traffic goes through my lab topology of Cisco routers/switches/firewalls. This way I can have a reliable flow of traffic that I define ahead of time per the lab scenario.</p>
","1218"
"Using IP addresses from IP pool given by ISP","16994","","<p>My ISP says that it can provide an optic fiber connection with a pool of 4 static IP addresses (subnet <code>255.255.255.248</code> i think).<br/>
My question is that if I get that connection,<br/>
1 ip will be used for network<br/>
1 for default gateway<br/>
1 for broadcast.<br/>
So I will get only 1 usable ip address, while other internet plan have only 1 static ip address and cost less. So what is the benefit of pool of 4 ip?<br/>
<br/>
<strong>EDIT</strong></p>

<p>netmask would be <code>255.255.255.252</code></p>
","<p>This depends on exactly how the ISP provides them to you.  You may have ""4 DHCP addresses"", a  ""routed"" /30, or a ""connected"" /29.</p>

<p>For example, Time Warner Cable (business class) allows 4 devices to use DHCP to get an address. (similar to residential service that's limited to one)</p>

<p>""routed"" is what you'd see where you have a WAN side and LAN side. This is the traditional ""lease line"" model where the T1/DS3/etc. ISP side has an independent address to which the static address block is routed; from there they can be assigned as a LAN or NAT'd individually (the firewall situation Bulki mentions.)</p>

<p>""connected"" would be where the ISP provides your LAN (i.e. a data center, or the ""routed"" example where you don't control the router)</p>
","2384"
"Wifi TCP iperf throughput: 1 stream vs multiple streams?","16959","","<p>In a WLAN iperf TCP throughput test, multiple parallel streams will give me higher throughput than 1 stream. I tried increasing the TCP window size, but I still cannot achieve the max throughput with just 1 stream. Is there something else in the TCP layer that is preventing the full link capacity from being used?</p>
","<blockquote>
  <p>In a WLAN iperf TCP throughput test, multiple parallel streams will give me higher throughput than 1 stream. I tried increasing the TCP window size, but I still cannot achieve the max throughput with just 1 stream. Is there something else in the TCP layer that is preventing the full link capacity from being used?</p>
</blockquote>

<p>In my experience, if you see significantly different results between 1 TCP stream and multiple TCP streams the issue is normally packet loss; so the ""something else"" in the TCP layer is retransmission (due to lower-layer packet loss).</p>

<p>An example I cooked up to illustrate how packet loss affects single-stream throughput...</p>

<pre><code>                   [Wifi||LAN-0.0%-Loss||LAN-2.0%-Loss]
+--------------+                                        +--------------+
|              |                                        |              |
| Thinkpad-T61 |----------------------------------------| Linux Server |
|              |                                        | Tsunami      |
+--------------+                                        +--------------+
iperf client             ------------------&gt;            iperf server
                             Pushes data
</code></pre>

<p>This is a table that summarizes the test results of a 60 second <code>iperf</code> test between a client and server... you might see a little variation in iperf results from RTT jitter (i.e higher RTT standard deviation); however, the most significant difference came when I simulated 2% loss leaving the client wired NIC.  172.16.1.56 and 172.16.1.80 are the same laptop (running Ubuntu).  The server is 172.16.1.5, running Debian.  I used <a href=""http://www.linuxfoundation.org/collaborate/workgroups/networking/netem"" rel=""nofollow noreferrer"">netem</a> on the client wired NIC to simulate packet loss...</p>

<pre><code>Client IP       Transport    Loss     avg RTT    RTT StdDev    TCP Streams   Tput
-----------     ----------   ----     -------    ----------    -----------   ----------
172.16.1.56     802.11g      0.0%      0.016s          42.0              1     19.5Mbps
172.16.1.56     802.11g      0.0%      0.016s          42.0              5     20.5Mbps
172.16.1.80     1000BaseT    0.0%     0.0002s           0.0              1    937  Mbps
172.16.1.80     1000BaseT    0.0%     0.0002s           0.0              5    937  Mbps
172.16.1.80     1000BaseT    2.0%     0.0002s           0.0              1    730  Mbps &lt;---
172.16.1.80     1000BaseT    2.0%     0.0002s           0.0              5    937  Mbps
</code></pre>

<p><strong>EDIT for comment responses</strong>:</p>

<blockquote>
  <p>Can you explain what is happening in the last scenario (1000BaseT, 5 streams, 2.0% loss)? Even though there is packet loss, the total throughput is still saturated at 937 Mbits/sec.</p>
</blockquote>

<p>Most TCP implementations decrease their <a href=""http://en.wikipedia.org/wiki/Congestion_window"" rel=""nofollow noreferrer"">congestion window</a> when packet loss is detected.  Since we're using <a href=""http://www.linuxfoundation.org/collaborate/workgroups/networking/netem"" rel=""nofollow noreferrer"">netem</a> to force 2% packet loss from the client to the server, some of the client's data gets dropped.  The net effect of <a href=""http://www.linuxfoundation.org/collaborate/workgroups/networking/netem"" rel=""nofollow noreferrer"">netem</a> in this example is a single-stream average transmit rate of 730Mbps.  Adding multiple streams means that the individual TCP streams can work together to saturate the link.</p>

<blockquote>
  <p>My goal is to achieve the highest TCP throughput possible over WiFi. As I understand it, I should increase the number of streams in order to counter the decrease in throughput caused by packet loss. Is this correct? </p>
</blockquote>

<p>Yes</p>

<blockquote>
  <p>In addition, at what point will too many streams start to negatively impact throughput? Would this be caused by limited memory and/or processing power?</p>
</blockquote>

<p>I can't really answer that without more experiments, but for 1GE links, I have never had a problem saturating a link with 5 parallel streams.  To give you an idea of how scalable TCP is, linux servers can handle over <a href=""https://security.appspot.com/vsftpd.html#performance"" rel=""nofollow noreferrer"">1500 concurrent TCP sockets</a> under the right circumstances.  This is <a href=""https://stackoverflow.com/a/3923785/667301"">another SO discussion</a> that is relevant to scaling concurrent TCP sockets, but in my opinion anything above 20 parallel sockets would be overkill if you're merely trying to saturate a link.</p>

<blockquote>
  <p>I must have a misunderstanding that iperf uses the -w window size as a maximum as it sounds like you're saying it grew beyond that 21K initial value</p>
</blockquote>

<p>I didn't use <code>iperf -w</code>, so I think there is a misunderstanding.  Since you have so many questions about the wifi case, I'm including a wireshark graph of TCP throughput for the wifi single TCP stream case.</p>

<p><img src=""https://i.stack.imgur.com/rO1gU.png"" alt=""Wifi TCP single-stream throughput""></p>

<hr>

<h2>Test Data</h2>

<p>I am also including raw test data in case you'd like to see how I measured these things...</p>

<h3>802.11g, 1 TCP Stream</h3>

<pre><code>mpenning@mpenning-ThinkPad-T61:~$ mtr --no-dns --report \
  --report-cycles 60 172.16.1.5
HOST: mpenning-ThinkPad-T61       Loss%   Snt   Last   Avg  Best  Wrst StDev
  1.|-- 172.16.1.5                 0.0%    60    0.8  16.0   0.7 189.4  42.0
mpenning@mpenning-ThinkPad-T61:~$

[mpenning@tsunami]$ iperf -s -p 9000 -B 172.16.1.5

mpenning@mpenning-ThinkPad-T61:~$ iperf -c 172.16.1.5 -p 9000 -t 60 -P 1
------------------------------------------------------------
Client connecting to 172.16.1.5, TCP port 9000
TCP window size: 21.0 KByte (default)
------------------------------------------------------------
[  3] local 172.16.1.56 port 40376 connected with 172.16.1.5 port 9000
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0-60.1 sec   139 MBytes  19.5 Mbits/sec
mpenning@mpenning-ThinkPad-T61:~$
</code></pre>

<h3>802.11g, 5 TCP Streams</h3>

<pre><code>[mpenning@tsunami]$ iperf -s -p 9001 -B 172.16.1.5

mpenning@mpenning-ThinkPad-T61:~$ iperf -c 172.16.1.5 -p 9001 -t 60 -P 5
------------------------------------------------------------
Client connecting to 172.16.1.5, TCP port 9001
TCP window size: 21.0 KByte (default)
------------------------------------------------------------
[  3] local 172.16.1.56 port 37162 connected with 172.16.1.5 port 9001
[  5] local 172.16.1.56 port 37165 connected with 172.16.1.5 port 9001
[  7] local 172.16.1.56 port 37167 connected with 172.16.1.5 port 9001
[  4] local 172.16.1.56 port 37163 connected with 172.16.1.5 port 9001
[  6] local 172.16.1.56 port 37166 connected with 172.16.1.5 port 9001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0-60.0 sec  28.0 MBytes  3.91 Mbits/sec
[  5]  0.0-60.1 sec  28.8 MBytes  4.01 Mbits/sec
[  4]  0.0-60.3 sec  28.1 MBytes  3.91 Mbits/sec
[  6]  0.0-60.4 sec  34.0 MBytes  4.72 Mbits/sec
[  7]  0.0-61.0 sec  30.5 MBytes  4.20 Mbits/sec
[SUM]  0.0-61.0 sec   149 MBytes  20.5 Mbits/sec
mpenning@mpenning-ThinkPad-T61:~$
</code></pre>

<h3>1000BaseT, 1 Stream, 0.0% loss</h3>

<pre><code>mpenning@mpenning-ThinkPad-T61:~$ mtr --no-dns --report \
&gt;   --report-cycles 60 172.16.1.5
HOST: mpenning-ThinkPad-T61       Loss%   Snt   Last   Avg  Best  Wrst StDev
  1.|-- 172.16.1.5                 0.0%    60    0.2   0.2   0.2   0.2   0.0
mpenning@mpenning-ThinkPad-T61:~$

[mpenning@tsunami]$ iperf -s -p 9002 -B 172.16.1.5

mpenning@mpenning-ThinkPad-T61:~$ iperf -c 172.16.1.5 -p 9002 -t 60 -P 1
------------------------------------------------------------
Client connecting to 172.16.1.5, TCP port 9002
TCP window size: 21.0 KByte (default)
------------------------------------------------------------
[  3] local 172.16.1.80 port 49878 connected with 172.16.1.5 port 9002
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0-60.0 sec  6.54 GBytes   937 Mbits/sec
mpenning@mpenning-ThinkPad-T61:~$
</code></pre>

<h3>1000BaseT, 5 Streams, 0.0% loss</h3>

<pre><code>[mpenning@tsunami]$ iperf -s -p 9003 -B 172.16.1.5

mpenning@mpenning-ThinkPad-T61:~$ iperf -c 172.16.1.5 -p 9003 -t 60 -P 5
------------------------------------------------------------
Client connecting to 172.16.1.5, TCP port 9003
TCP window size: 21.0 KByte (default)
------------------------------------------------------------
[  7] local 172.16.1.80 port 47047 connected with 172.16.1.5 port 9003
[  3] local 172.16.1.80 port 47043 connected with 172.16.1.5 port 9003
[  4] local 172.16.1.80 port 47044 connected with 172.16.1.5 port 9003
[  5] local 172.16.1.80 port 47045 connected with 172.16.1.5 port 9003
[  6] local 172.16.1.80 port 47046 connected with 172.16.1.5 port 9003
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-60.0 sec  1.28 GBytes   184 Mbits/sec
[  5]  0.0-60.0 sec  1.28 GBytes   184 Mbits/sec
[  3]  0.0-60.0 sec  1.28 GBytes   183 Mbits/sec
[  6]  0.0-60.0 sec  1.35 GBytes   193 Mbits/sec
[  7]  0.0-60.0 sec  1.35 GBytes   193 Mbits/sec
[SUM]  0.0-60.0 sec  6.55 GBytes   937 Mbits/sec
mpenning@mpenning-ThinkPad-T61:~$
</code></pre>

<h3>1000BaseT, 1 Streams, 2.0% loss</h3>

<pre><code>mpenning@mpenning-ThinkPad-T61:~$ sudo tc qdisc add dev eth0 root netem corrupt 2.0%

mpenning@mpenning-ThinkPad-T61:~$ mtr --no-dns --report   --report-cycles 60 172.16.1.5
HOST: mpenning-ThinkPad-T61       Loss%   Snt   Last   Avg  Best  Wrst StDev
  1.|-- 172.16.1.5                 1.7%    60    0.2   0.2   0.2   0.2   0.0
mpenning@mpenning-ThinkPad-T61:~$

[mpenning@tsunami]$ iperf -s -p 9004 -B 172.16.1.5

mpenning@mpenning-ThinkPad-T61:~$ iperf -c 172.16.1.5 -p 9004 -t 60 -P 1
------------------------------------------------------------
Client connecting to 172.16.1.5, TCP port 9004
TCP window size: 42.0 KByte (default)
------------------------------------------------------------
[  3] local 172.16.1.80 port 48910 connected with 172.16.1.5 port 9004
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0-64.1 sec  5.45 GBytes   730 Mbits/sec
mpenning@mpenning-ThinkPad-T61:~$
</code></pre>

<h3>1000BaseT, 5 Streams, 2.0% loss</h3>

<pre><code>[mpenning@tsunami]$ iperf -s -p 9005 -B 172.16.1.5

mpenning@mpenning-ThinkPad-T61:~$ iperf -c 172.16.1.5 -p 9005 -t 60 -P 5
------------------------------------------------------------
Client connecting to 172.16.1.5, TCP port 9005
TCP window size: 21.0 KByte (default)
------------------------------------------------------------
[  7] local 172.16.1.80 port 50616 connected with 172.16.1.5 port 9005
[  3] local 172.16.1.80 port 50613 connected with 172.16.1.5 port 9005
[  5] local 172.16.1.80 port 50614 connected with 172.16.1.5 port 9005
[  4] local 172.16.1.80 port 50612 connected with 172.16.1.5 port 9005
[  6] local 172.16.1.80 port 50615 connected with 172.16.1.5 port 9005
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0-60.0 sec  1.74 GBytes   250 Mbits/sec
[  7]  0.0-60.0 sec   711 MBytes  99.3 Mbits/sec
[  4]  0.0-60.0 sec  1.28 GBytes   183 Mbits/sec
[  6]  0.0-60.0 sec  1.59 GBytes   228 Mbits/sec
[  5]  0.0-60.0 sec  1.24 GBytes   177 Mbits/sec
[SUM]  0.0-60.0 sec  6.55 GBytes   937 Mbits/sec
mpenning@mpenning-ThinkPad-T61:~$
</code></pre>

<h3>Remove packet loss simulation</h3>

<pre><code>mpenning@mpenning-ThinkPad-T61:~$ sudo tc qdisc del dev eth0 root
</code></pre>
","3260"
"Automate configuration backup (every minute) in Cisco IOS","16676","","<p>I'd like to make my Cisco router automatically do a copy run TFTP (and populate the fields automatically) every 1 minute. I'd also like it to be run in the background. Anyone know if this is possible/how to do it? I'd like to do this for the sake of viewing the running config of my routers in notepad++ (which updates realtime) instead of having to do a show run and hit spacebar 4 or 5 times before I get to what I need to see. I think this would be extraordinarily useful for complex labs. Also, macros don't work because of the TFTP server commands requiring input.</p>
","<p>You have several options to get this type of functionality on a Cisco device.  (Which one you use depends on your needs and sometimes on the device and IOS load.  Some older devices/IOS loads will have different capabilities.)</p>

<p><strong>EDIT:</strong> <em>You are asking about doing this every one minute, which as you found out in our chat about this question, will bog down your router. (Especially in GNS3.)  The below options are available to you for automating confirguation backup, however I would not recommend doing so every 1 minute.</em></p>

<p>You could either:</p>

<ol>
<li><p>Use Cisco's <a href=""http://www.cisco.com/en/US/docs/ios-xml/ios/cns/configuration/15-mt/cns-cmd-sched.html"" rel=""nofollow noreferrer"">Kron functionality</a> for command scheduling.    This will allow you to execute predefined commands on a scheduled basis.  As you pointed out, <code>copy run tftp</code> requires file prompt confirmation. (Unless you've <a href=""https://networkengineering.stackexchange.com/questions/3315/copy-running-config-in-one-line?rq=1"">turned off file prompt confirmation</a>, however I don't recommend it as a normal setting.)    Redirecting does not require confirmation.  So the command used in the scheduler is <code>show run | redirect tftp://$SERVERIP/$PATH/$FILE</code></p></li>
<li><p>Use Cisco's <a href=""http://www.cisco.com/en/US/docs/ios/fundamentals/configuration/guide/cf_config-rollback.html"" rel=""nofollow noreferrer"">Archive functionality</a> for configuration management.  Archive is a way to store multiple copies of the config in a sequential fashion and roll back configs if needed to a previous version.  Copying out with Kron overwrites the previous config, while Archive allows you to keep up to 14 different config versions in the specified location.  See <a href=""https://learningnetwork.cisco.com/blogs/vip-perspectives/2013/10/30/understanding-cisco-auto-archive-feature-to-backup-configuration-file"" rel=""nofollow noreferrer"">this link on the Cisco Learning network</a> for more useful info on Archive.  Specifically how to dynamically set the filename with the $h and $t tags.</p></li>
</ol>

<p>In either of the below samples, you can adjust the times to your needs, these are just what I quickly pulled out of some production gear.</p>

<hr>

<p>Sample config to have Kron write config and back it up to a tftp server once a week:</p>

<pre><code>kron occurrence SaveConfig at 23:50 Mon recurring
policy-list SaveConfig
!
kron occurrence BackupRunningConfig at 23:55 Mon recurring
policy-list BackupRunningConfig
!
kron policy-list SaveConfig
cli write
!
kron policy-list BackupRunningConfig
cli show running-config | redirect tftp://10.10.10.10/configs/testswitch.txt
</code></pre>

<p>Sample config to have Archive back up your config to a tftp server daily:</p>

<pre><code>archive
 path tftp://10.10.10.10/configs/$h-$t
 time-period 1440
 maximum 14
</code></pre>
","5458"
"linux ping mtu and fragmentation","16435","","<p>I've been experimenting with the ping utility on Linux. I set a mtu of 500 bytes on my router. Now, when I ping to an external host, I get the following output:</p>

<pre><code>ping -c 3 -s 1300 10.0.2.1        
PING 10.0.2.1 (10.0.2.1) 1300(1328) bytes of data. 
From 10.0.1.254 icmp_seq=1 Frag needed and DF set (mtu = 500)
1308 bytes from 10.0.2.1: icmp_seq=2 ttl=62 time=1.12 ms 
1308 bytes from 10.0.2.1: icmp_seq=3 ttl=62 time=1.14 ms

--- 10.0.2.1 ping statistics --- 3 packets transmitted, 2 received, +1 errors, 33% packet loss, time 2000ms rtt min/avg/max/mdev = 1.123/1.134/1.146/0.035 ms
</code></pre>

<p>So, the first message is discarded by the router, because the mtu of the interface was exceeded. That was expected, because the DF flag is set by default. Therefore, he can't fragment and the error occurs, so far so good. But what happened to the other two packets? Why did they get through? I can imagine that the ping tool, after getting the ICMP error, doesn't set the DF flag in further packets, so that they can be fragmented. Is that right? Where can I find the ""official"" explanation of this?</p>

<p>Thank you very much! </p>

<p>SOLUTION: It is part of the PMTUD protocol.
<a href=""http://www.cisco.com/c/en/us/support/docs/ip/generic-routing-encapsulation-gre/25885-pmtud-ipfrag.html#t4"" rel=""nofollow"">http://www.cisco.com/c/en/us/support/docs/ip/generic-routing-encapsulation-gre/25885-pmtud-ipfrag.html#t4</a></p>
","<p>When a router should fragment but it receives the IP datagram with DF flag set, it sends ICMP (type should fragment but DF is set) to the source. Then the source adjust the MTU and it send again the datagram. This is how PMTUD works.</p>

<p>What happens here is that after you receives the ICMP from the router adjust the MTU to 500 for the path so the following Ping Requests you are sending have the DF flag set, but they are fragmented at source (meaning that your machine is sending the Ping Request fragmented in several datagrams). </p>
","7858"
"Cannot use 5GHz band Wi-Fi from channels 100-140","16419","","<p>My AP operates in the 5Ghz band. There are no problems using Channel 36 to 64; however, clients can't even detect the SSID if I use Channel 100 to 140.</p>

<p>Below is a screenshot of Netspot showing all the signals in my area. It seems like its not my router issue, and that my clients can't detect anything else in the 100-140 channel range. Why is that? Is it a regional issue? I would like to have my router run on an orthogonal channel without any network interfering with it, hence I would like it to run on channel 100+.</p>

<p><a href=""https://i.stack.imgur.com/yBeHd.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/yBeHd.png"" alt=""netspot showing signals in my area""></a></p>
","<p><img src=""https://i.stack.imgur.com/bLNIS.jpg"" alt=""802.11a Frequency Channel Map""></p>

<p>Perhaps this will help.  Also, consult <a href=""http://en.wikipedia.org/wiki/List_of_WLAN_channels"" rel=""nofollow noreferrer"">Wikipedia</a> for futher reference. In short, in the US, the H band is restricted due to interference issues with Terminal Doppler Weather Radar (TDWR). (at least for <em>outdoor use</em>.)</p>
","12721"
"Wifi dropping randomly on Cisco AP-1602","16351","","<p>I have a single Cisco AP-1602 broadcasting 3 SSIDs in a small office.  Some of my team are complaining about random drops in network connectivity. (Over 3 days, I've had 3 different users complain about drops every 10 minutes or so.)</p>

<p>What could be causing this?  Are 3 SSIDs on the same channel at the same strength (because they are all from the same AP) causing interference? Are these APs built to broadcast multiple networks or was I sold a bill of goods by a reseller?</p>
","<p>The problem seemed to be solved by two things that neither one should have changed anything:</p>

<ol>
<li>switched from WPA2 to WPA. (Yes, I know that any post 2007 device should be fine with WPA2.)</li>
<li>reduced the number of ssid's being broadcast from 3 to 1. (Yes, as @YLearn responded, the AP should be fine with multiple SSIDs.)</li>
</ol>

<p>So the problem is gone but the best explanation I have is, sadly, magic.</p>
","3062"
"Cisco ASA 8.4(3); NAT multiple ports on public IP to private IP","15966","","<p>I have the following configuration on an ASA running 8.4 already;</p>

<pre><code>object network SERVER-01
 host 192.168.0.1
!
object network SERVER-01
 nat (Inside,Outside) static interface service tcp 3389 5001
</code></pre>

<p>I have this config repeated several times to allow RDP to multiple machines behind the ASA, on different ports; 5001 forwards to one server, 5002 to another, and so on.</p>

<p>For this one server in the above config though, I want to forward port 5555 publicly to port 5555 at the same private IP, 192.168.0.1.</p>

<p>If I try to enter the above config but with different port numbers, it is overwritten, <strong>I can't seem to <em>add</em> an additional NAT entry, only replace that one</strong>. This indicates I can only have one port forwarded to each internal IP at a time. Is that correct, or can I forward various public ports to an internal host, but using some other method? If so, how?</p>
","<p>Unfortunately from the <a href=""http://www.cisco.com/en/US/docs/security/asa/asa84/configuration/guide/nat_objects.html#wp1103116"">Configuring Network Object NAT</a> documentation for 8.4 it states</p>

<blockquote>
  <p>You can only define a single NAT rule for a given object; if you want to configure multiple NAT rules for an object, you need to create multiple objects with different names that specify the same IP address, for example, object network obj-10.10.10.1-01, object network obj-10.10.10.1-02, and so on.</p>
</blockquote>

<p>So you will have to create multiple objects with the same host just different names.</p>
","2550"
"Mikrotik RouterOS routing between subnets on local ports","15913","","<p>Site 1: Locally connected to port 1 with interface IP 192.168.1.1/24</p>

<p>Site 2: Locally connected to port 2 with interface IP 192.168.2.1/24</p>

<p>Port 3 is the internet.</p>

<p>Master Ports none on all interfaces.</p>

<p>No firewall is configured.</p>

<p>Dynamic routes are listed for both subnets and the router can ping IPs on the inside of both LANs.</p>

<p>NAT is configured srcnat, Out-interface Port 3, masquerade, Dst. Address NOT 192.168.0.0/16</p>

<p>These subnets need to see each other, but cannot.</p>

<p>What am I missing?</p>
","<p>The fault was with the DHCP server setup on the Mikrotik, see before print:</p>

<p>[xxxx@MikroTik] /ip dhcp-server> network print </p>

<p># ADDRESS            GATEWAY         DNS-SERVER      WINS-SERVER     DOMAIN<br>
 0 192.168.100.0/<strong>32</strong>   192.168.100.1   8.8.8.8<br>
 1 192.168.102.0/32   192.168.102.1   8.8.8.8<br>
 2 192.168.105.0/32   192.168.105.1   8.8.8.8<br>
 3 192.168.200.0/32   192.168.200.1   8.8.8.8   </p>

<p>..and after print:</p>

<p>[xxxx@MikroTik] /ip dhcp-server> network print</p>

<p># ADDRESS            GATEWAY         DNS-SERVER      WINS-SERVER     DOMAIN<br>
 0 192.168.100.0/<strong>24</strong>   192.168.100.1   8.8.8.8<br>
 1 192.168.102.0/24   192.168.102.1   8.8.8.8<br>
 2 192.168.105.0/24   192.168.105.1   8.8.8.8<br>
 3 192.168.200.0/24   192.168.200.1   8.8.8.8</p>

<p>Even though the Mikrotik has an option to add the Netmask as 24 on the DHCP Network screen in Winbox, it does not automatically pull that mask value through to the address value and thus needs to be explicitly added to the address value as well.</p>

<p>(I know this export example is not exactly like my question, but I did not want to over-complicate the question)</p>
","11151"
"How Can I Easily Tell If My Network Has Power Over Ethernet?","15750","","<p>How could I easily identify whether my network at my office is capable or is utilizing PoE? I have Cisco IP phones but I know some phones can operate entirely over ultra-low voltage. <strong>How could I look at my network set up and be able to identify if my network has PoE?</strong></p>

<p>If it doesn't have/utilize PoE would it be easy to implement it?</p>
","<p>Adding to what YLearn already said, <a href=""http://www.cisco.com/c/en/us/td/docs/switches/lan/catalyst3750/software/troubleshooting/g_power_over_ethernet.html#wp1002308"" rel=""nofollow""><code>show power inline</code></a> is how you can quickly retrieve that information from the cli to see if your hardware supports it.</p>

<p>A <strong>non</strong>-PoE supported device would display the output below if it were available.</p>

<pre><code>MHN00642AN01#show power inline

Module   Available     Used     Remaining
          (Watts)     (Watts)    (Watts)
------   ---------   --------   ---------
1             n/a        n/a         n/a
Interface Admin  Oper       Power   Device              Class Max
                            (Watts)
--------- ------ ---------- ------- ------------------- ----- ----
MHN00642AN01#
</code></pre>

<p>Versus a fully PoE capable system:</p>

<pre><code>MHN00421AN01#show power inline
Available:124.0(w)  Used:0.0(w)  Remaining:124.0(w)

Interface Admin  Oper       Power   Device              Class Max
                            (Watts)
--------- ------ ---------- ------- ------------------- ----- ----
Fa0/1     auto   off        0.0     n/a                 n/a   15.4
Fa0/2     auto   off        0.0     n/a                 n/a   15.4
Fa0/3     auto   off        0.0     n/a                 n/a   15.4
Fa0/4     auto   off        0.0     n/a                 n/a   15.4
Fa0/5     auto   off        0.0     n/a                 n/a   15.4
Fa0/6     auto   off        0.0     n/a                 n/a   15.4
Fa0/7     auto   off        0.0     n/a                 n/a   15.4
Fa0/8     auto   off        0.0     n/a                 n/a   15.4
MHN00421AN01#
</code></pre>

<p>On a chassis style switch, it's even simpler.  Just issuing the <code>show power</code> command gives detailed output of what your system can offer.</p>

<pre><code>MHN00526CAN01#show power
Power                                             Fan      Inline
Supply  Model No          Type       Status       Sensor   Status
------  ----------------  ---------  -----------  -------  -------
PS1     PWR-C45-2800AC    AC 2800W   good         good     good
PS2     PWR-C45-2800AC    AC 2800W   good         good     good

Power supplies needed by system    : 1
Power supplies currently available : 2

Power Summary                      Maximum
 (in Watts)              Used     Available
----------------------   ----     ---------
System Power (12V)        856        1360
Inline Power (-50V)       182        1400
Backplane Power (3.3V)     40          40
----------------------   ----     ---------
Total                    1078        2800

MHN00526CAN01#
</code></pre>
","14707"
"Differences between MPLS and VPLS","15717","","<p>Can someone explain to me what differences there are between MPLS and VPLS?
Which one is the most efficient? Why?</p>

<p>I’ve read that the only difference is layer of technology: 2 (VPLS) vs 3 (MPLS). Does that mean that the routing table is managed on the local network?</p>

<p>Thanks in advance,</p>
","<p>MPLS is a virtual ""layer 3"" network. The customer addresses packets by IP. The PE equipment have customer IPs and serve as customer routers. The MPLS admin needs to manage at least a little of the routing (unless there have been improvements since I last administered an MPLS network, I'd be interested to know if that is the case).</p>

<p>VPLS is a virtual ""layer 2"" network. The customer addresses packets by MAC. From the customer's point of view, the PE equipment behaves like a switch.</p>

<p>As for efficiency, both have their pros and cons.</p>

<p>EDIT: this was going to be a comment on @peter-green's answer but it got too long:</p>

<p>To elaborate on the router that needs to know both the customer's and the provider's networking: there are usually many of them, one at each point of entry from the customer network into the provider network. They are called PE routers (Provider Edge). Of course, one PE router can handle many entry points, for many clients. You could have one PE in, say, every US State capital, and each customer could have several offices in each city, all connected to that city's PE.</p>

<p>The MPLS PE will need to be configured with the IP addresses of the customers connected to it, at least the IPs connected directly. For the adresses on each customer site, it can either take a static route (which needs the provider to act for each site modification) or it can talk some routing protocol with the CPE (Customer Premise Equipment), which is a lot more complicated but which can let the client play with his on-site IPs without bothering the provider. The PE will learn the customer IPs connected to the other PE routers by talking MP-BGP with them.</p>

<p>The VPLS PE will need to know the customer's MAC addresses, but it will auto-detect them. If there are many MACs this could be a problem. As @peter-green notes, this also has a downside with Ethernet broadcasts in addition to the encapsulation overhead, but it has the upside of the provider not having to configure the customer IP addresses.</p>

<p>If this hasn't answered your questions, you'll have to specify more :)</p>
","30579"
"Should portfast be used on a port potentially connecting to an unmanaged switch?","15697","","<p>I understand the basics of how spanning tree works and why you would want to use portfast on user access ports. </p>

<p>When dealing with a topology with a large number of dumb switches under desks and other undocumented locations do you really want to enable this on all ""supposedly"" access switches? </p>

<p>Apart from trying to track down these unmanaged switches what is best practice? Why? </p>
","<p>You should run 'port-fast' (in standard terms edge port) in every port not part of your switch core. Even if it is switch.</p>

<p>You should NOT have L2 loop through customer switches.</p>

<p>You should run BPDUGuard and BUM policers all interfaces, customer facing interfaces should be 1/5th or less of core facing limits. Unfortunately limiting unknown unicast often is not supported.</p>

<p>Why running 'port-fast' or edge is crucial is performance of RSTP (and by extension MST) rely on it. How RSTP works is it asks downstream if it can go to forwarding mode, and downstream asks its downstreams until there are no more ports to ask frmo, then the permission propagates back up.
Port-fast or edge port is implicit permission from RSTP point-of-view, if you remove this implicit permission, explicit permission must be gotten otherwise it'll fall back to classic STP timers. Which means even one non-portfast port will kill your subsecond RSTP converge.</p>
","973"
"Risks of using non-private IP addresses internally?","15464","","<p>My company has received a large industrial machine with many networked devices on it. Unfortunately the engineer in charge has used a public IP address range on the machine. I'm in Europe. The chosen address range belongs to a USA company. Let's say it's 143.166.0.0 (which actually belongs to Dell).</p>

<p>Let's assume I don't connect the machine to our company LAN (for now) but I do connect my laptop to it to program a device - say 143.166.0.1. Let's also say that my laptop wireless network adaptor is connected to the company LAN and hence to the Internet. Now I have two possible routes to two devices that share an address. The local one I want and the Dell address.</p>

<p>My question is, ""How worried should I be?"" <strong>What should and would happen in this case?</strong> My guess is that the local machine would respond first and that I might get away with it but that eventually I will get bitten. Incidentally, I've seen public ip addresses on other machines too. It seems the engineers either don't understand private addressing or don't expect their machine to be connected to the wider world.</p>

<p>Any ideas / comments? (that don't involve violence to the machine engineer)?</p>

<p><strong>Epilogue</strong></p>

<p>We found an interesting problem that has forced us to change the IP addresses to private.</p>

<ul>
<li>One of the devices on the machine is programmed via Internet Explorer using an ActiveX component. This device will try to push data to the ActiveX 'listener' (rather than the usual browser mode of requesting data from a remote server).</li>
<li>Our Active Directory configuration downloads security policies to our computers at login. Included in the policy is the list of trusted sites. These include:
<ul>
<li>Approved company addresses.</li>
<li>Various external addresses such as our bank.</li>
<li>Private addresses 192.168.0.0/16, 172.16.0.0/20 and 10.0.0.0/24.</li>
<li>Everything else is blocked.</li>
</ul></li>
<li>Due to the security policy, the ActiveX component never received any data as the incoming traffic is blocked by the security policy!</li>
</ul>

<p>This has forced me to have the vendor change the addresses to 172.16.0.0. I'll sleep easier.</p>

<p>Thanks for all the interest.</p>
","<p>Short answer: Duplicating allocated public addresses is a bad idea.</p>

<p>Slightly longer answer: Leaving aside the routing issues for the moment, it's not safe to assume that you will never need to reach this machine from some place other than a directly attached cable, or that public or private address allocations are static and will never change. </p>

<p>The remote-access issues are obvious: The global Internet thinks 143.166/16 is in one place, and you want it to be in another. Routers won't go to your machine.</p>

<p>And ownership could change. Even if this address weren't assigned to Dell, it could be allocated to them in the future. Dell does have this address today, but someone else might tomorrow, with a different route. Who knows? Your organization might even buy that address block, with even more routing adventures. </p>

<p>Bottom line: Don't assume duplicate IPs can safely be walled off forever.</p>

<p>As for the routing, your wired interface would prefer the local address over Dell's. Your wired interface would send an ARP request for that address and get it directly from the industrial machine, no gateway required. Thereafter, packets destined to that address would use the destination MAC address of the industrial machine. </p>

<p>That will work fine as you only use a cable for access, and as long as you never need to reach this machine from someplace else, and as long as the global routing table remains static. </p>

<p>That's a lot of ifs. You're better off avoiding the issue by using either a unique public address or something out of the private address pool.</p>
","3380"
"Does authoritative DHCP server mean no static IP setting?","15296","","<p>I've recently switched my Mikrotik Router's DHCP server to authoritative mode. It fixed several problems with some clients remembering bad IP addresses. But what would happen if I connected a device with static IP to the network? Will the DHCP server protest, or is it ok?</p>
","<p>This only deals with how the DHCP server responds to a client DHCP REQUEST for a certain IP address that is not provided by the DHCP server configuration.</p>

<p>If it isn't part of the DHCP scope on the Mikrotik and the setting is yes, then it responds with a DHCP NACK message, which should prompt the client to do a DHCP DISCOVER.</p>

<p>If set to no, then it will just ignore those packets (assuming that there may be another DHCP server to handle the request).</p>

<p>This should have no effect on a statically assigned IP address since they do not make a DHCP REQUEST.  However, I always prefer to still do my static IP addresses through static reservations on the DHCP server when possible.</p>
","1357"
"What is the relationship between the bandwith on a wire and the frequency?","15278","","<p>I am trying to learn networking (currently Link - Physical Layer); this is self-study. </p>

<p>I am very confused about one particular thing:</p>

<p>Suppose I want to send a data on the wire something like this:</p>

<p>01010101, where it will look some thing like this as a Signal:</p>

<pre><code>__|‾‾|__|‾‾|__|‾‾|__|‾‾
</code></pre>

<p>Well the data to be sent must be represented by a signal, and the signal in this situation is the ""change in the voltage"" on the link / wire (assume we are using cables, not wireless link).</p>

<p>So Fourier proved that with enough frequencies a signal can be represented pretty well. </p>

<p>Like: <img src=""https://i.stack.imgur.com/6xNwZ.png"" alt=""enter image description here""></p>

<p>I still don't understanding the relationship between a signal on the wire, and the Frequencies. </p>

<p>The definition of frequency is: <strong>the number of occurrences of a repeating event per unit time.</strong> So what is repeating in the wire per unit time? </p>

<p>Also for example on a DSL line, for Frequency Division Multiplexing, because multiple users will be allocated less frequency, there will be less bandwidth per user on a given link / wire. What does it mean to allocate less frequency on a wire? Less repeating of what?</p>

<p>Are there many frequencies available on the wire? If there are ( lets say from 0 to 1 Mega Hertz ) can I represent the above using the range between 0 to 100 OR 100 to 200 OR 500 to 1000 ? Why do I have more bandwidth if I use more frequencies?   </p>
","<h3><a href=""http://en.wikipedia.org/wiki/Modulation"" rel=""noreferrer"" title=""Decoding voltage patterns into data bits"">Modulation</a> and <a href=""http://en.wikipedia.org/wiki/Symbol_rate#Symbols"" rel=""noreferrer"">symbol</a>s</h3>

<blockquote>
  <p>the number of occurrences of a repeating event per unit time. So what is repeating in the wire per unit time?</p>
</blockquote>

<p>The voltage patterns on the wire repeat.</p>

<p>In extremely simple communication systems, you might cycle the line's DC voltage above or below a threshold, as shown in your ASCII-art... <code>__|‾‾|__|‾‾|__|‾‾|__|‾‾</code>.  Suppose your thresholds are +5v and -5vdc; <a href=""http://en.wikipedia.org/wiki/Modulation"" rel=""noreferrer"" title=""Decoding voltage patterns into data bits"">modulating</a> binary data through two DC voltages would only yield one bit per voltage level (each voltage transition is called a <a href=""http://en.wikipedia.org/wiki/Symbol_rate#Symbols"" rel=""noreferrer"">symbol</a> in the industry).</p>

<p>DC voltage transitions are not the only way to represent data on the wire, as you mentioned, you can modulate the voltage of a signal on a given frequency, or shift between two frequencies to modulate data.  This picture illustrates how the same <code>__|‾‾|__|‾‾|__|‾‾|__|‾‾</code> transitions are represented via Amplitude Modulation (AM) and Frequency Modulation (FM).</p>

<p><img src=""https://i.stack.imgur.com/RGT12.gif"" alt=""FM vs AM modulation""></p>

<p>More complex systems that are transmitted over longer distances use more complex <a href=""http://en.wikipedia.org/wiki/Modulation"" rel=""noreferrer"" title=""Decoding voltage patterns into data bits"">modulation</a> schemes, such as <a href=""http://en.wikipedia.org/wiki/Frequency-division_multiplexing"" rel=""noreferrer"" title=""Frequency Division Multiplexing"">FDM</a> or <a href=""http://en.wikipedia.org/wiki/Phase-shift_keying#Quadrature_phase-shift_keying_.28QPSK.29"" rel=""noreferrer"" title=""Quadrature Phase-Shift Keying"">QPSK</a>, to pack more data into a given bandwidth on the wire.</p>

<p>Generally speaking, you can modulate using combinations of:</p>

<ul>
<li><a href=""http://en.wikipedia.org/wiki/Amplitude"" rel=""noreferrer"">Amplitude</a></li>
<li><a href=""http://en.wikipedia.org/wiki/Frequency"" rel=""noreferrer"">Frequency</a></li>
<li><a href=""http://en.wikipedia.org/wiki/Phase_%28waves%29"" rel=""noreferrer"">Phase offset</a> (with respect to a reference carrier, or clock).</li>
</ul>

<h3><a href=""http://en.wikipedia.org/wiki/Bit_rate"" rel=""noreferrer"" title=""this is the data bandwidth"">Bit rate</a> and <a href=""http://en.wikipedia.org/wiki/Spectral_efficiency"" rel=""noreferrer"">spectral efficiency</a></h3>

<blockquote>
  <p>Are there many frequencies available on the wire? If there are (lets say from 0 to 1 Mega Hertz ) can I represent the above using the range between 0 to 100 OR 100 to 200 OR 500 to 1000 ? Why do I have more bandwidth if I use more frequencies? </p>
</blockquote>

<p>Let's just consider an Frequency Modulation system, which has two states on the wire...</p>

<ul>
<li>The 0 <a href=""http://en.wikipedia.org/wiki/Symbol_rate#Symbols"" rel=""noreferrer"">symbol</a> is represented by 1KHz</li>
<li>The 1 <a href=""http://en.wikipedia.org/wiki/Symbol_rate#Symbols"" rel=""noreferrer"">symbol</a> is represented by 2.5KHz</li>
</ul>

<p>This <em><a href=""http://en.wikipedia.org/wiki/Modulation"" rel=""noreferrer"" title=""Decoding voltage patterns into data bits"">modulation</a> scheme requires 1.5KHz of bandwidth</em> on the wire.  However, that tells you nothing about the <a href=""http://en.wikipedia.org/wiki/Bit_rate"" rel=""noreferrer"">bit rate</a> transmitted (which confusingly, is also known as 'bandwidth', but let's not use an overloaded term).</p>

<p>One reason that an FM system might space 0 and 1 <a href=""http://en.wikipedia.org/wiki/Symbol_rate#Symbols"" rel=""noreferrer"">symbol</a>s 1.5KHz apart is because there are limits to how well, how quickly, and how economically the <a href=""http://en.wikipedia.org/wiki/Modem"" rel=""noreferrer"">modem</a> can measure the frequency changes on the wire.</p>

<ul>
<li>How well the <a href=""http://en.wikipedia.org/wiki/Modem"" rel=""noreferrer"">modem</a> can measure frequency changes is one factor that drives how much bandwidth is required on the wire</li>
<li>How quickly the <a href=""http://en.wikipedia.org/wiki/Modem"" rel=""noreferrer"">modem</a> can measure frequency (or other <a href=""http://en.wikipedia.org/wiki/Symbol_rate#Symbols"" rel=""noreferrer"">symbol</a>) changes drives how high the <a href=""http://en.wikipedia.org/wiki/Modem"" rel=""noreferrer"">modem</a>'s <a href=""http://en.wikipedia.org/wiki/Bit_rate"" rel=""noreferrer"" title=""this is the data bandwidth"">bit rate</a> will be</li>
<li>Economics play a big role, because you might be able to build a system that has extremely high <a href=""http://en.wikipedia.org/wiki/Spectral_efficiency"" rel=""noreferrer"">spectral efficiency</a>, but if nobody can afford it then it's not really a feasible solution.</li>
</ul>

<p>As a general rule, you can build faster and cheaper <a href=""http://en.wikipedia.org/wiki/Modem"" rel=""noreferrer"">modem</a>s if you have more bandwidth available to you.</p>

<h3>Edit: comment response</h3>

<blockquote>
  <p>I have studied your response, but I am still confused about some things. I can only send 1 and 0s over a wire as far as I understand. So if 1.5 KHz is enough for this, why would I use more bandwidth?</p>
</blockquote>

<p>I addressed the question in the last section, but let's continue with the FM modulation example.  Real systems have to account for receiver sensitivity, and factors such as how well a <a href=""http://en.wikipedia.org/wiki/Band-pass_filter"" rel=""noreferrer"">band-pass filter</a> can be implemented.</p>

<p>Suppose the 1.5KHz bandwidth available to the modem only yields 9600 baud, and that's not fast enough; however, you might build a 20KHz modem that is fast enough (maybe you need 56K baud).</p>

<p>Why is 20KHz better?  Due to the realities and imperfect slopes on <a href=""http://en.wikipedia.org/wiki/Band-pass_filter"" rel=""noreferrer"">band-pass filter</a>s and other components, you may need that much bandwidth to implement the correct <a href=""http://en.wikipedia.org/wiki/Modulation"" rel=""noreferrer"" title=""Decoding voltage patterns into data bits"">modulation</a> and <a href=""http://en.wikipedia.org/wiki/Line_code"" rel=""noreferrer"" title=""Line encoding helps receiver synchronization and clock recovery"">line code</a>.  Maybe with 20Khz, you could implement <a href=""http://en.wikipedia.org/wiki/Quadrature_amplitude_modulation"" rel=""noreferrer"">QAM</a> scheme, which gave you 3 bits per <a href=""http://en.wikipedia.org/wiki/Symbol_rate#Symbols"" rel=""noreferrer"">symbol</a>, resulting in a maximum <a href=""http://en.wikipedia.org/wiki/Bit_rate"" rel=""noreferrer"" title=""this is the data bandwidth"">bit rate</a> of ""9600*8"", or 76.8 Kbaud (note: 2**3 = 8)</p>

<p>You're asking good questions, but it's very hard to explain this without getting into the guts of a real design.  If you read some electronics books about receiver design, or take some electrical engineering courses this material is covered.</p>
","6015"
"mikrotik joining two subnets","15271","","<p>I have two subnets which are geographically separated, connected by a wireless point to point link (5Mbps). Both networks are connected to internet through their own separate ILL WAN links which are configured on MikroTik routers. I want to connect the subnets through the routers. 
The scenario is :</p>

<p><strong>Site 1:</strong></p>

<p>192.168.10.0/24</p>

<p>Ether1 xxx.xxx.xxx.xxx/xx ---- connected to Internet</p>

<p>Ether2 192.168.10.1/24    ---- connected to local LAN </p>

<p><strong>Site 2</strong></p>

<p>10.10.10.0/24</p>

<p>Ether1 xxx.xxx.xxx.xxx/xx ---- connected to Internet</p>

<p>Ether2 10.10.10.1/24      ---- connected to local LAN</p>

<p>I want to connect the two LANs together so that there is a seamless traffic between the two.</p>

<p>NO FIREWALL rules on either routers.
Only source NAT masquerade on WAN links on both routers.
NO destination NAT</p>

<p>I have tried the below, which, obviously does not work.</p>

<p><strong>Site 1:</strong></p>

<p>192.168.10.0/24 </p>

<p>Ether1 xxx.xxx.xxx.xxx/xx ---- connected to Internet</p>

<p>Ether2 192.168.10.1/24    ---- connected to local LAN</p>

<p>Ether3 10.10.10.10/24     ---- P2P between Site 1 and 2</p>

<p><strong>Site 2</strong></p>

<p>10.10.10.0/24</p>

<p>Ether1 xxx.xxx.xxx.xxx/xx ---- connected to Internet</p>

<p>Ether2 10.10.10.1/24      ---- connected to local LAN</p>

<p>Ether3 192.168.10.10/24  ---- P2P between Site 1 and 2</p>

<p>What am I missing? (Beside, looks like everything?)</p>

<p>Thanks!</p>
","<p>You should make the wireless link its own layer 3 subnet.  That will also help your link latency and saturation problems.   </p>

<pre><code>Site 1 ETH3 192.168.11.1/24 and 

Site 2, ETH3: 192.168.11.2/24.
</code></pre>

<p>Then add static routes between them:</p>

<p>Site 1</p>

<pre><code>/ip route 
add dst-address=10.10.10.0/24 gateway=192.168.11.2
</code></pre>

<p>and Site 2:</p>

<pre><code>/ip route 
add dst-address=192.168.10.0/24 gateway=192.168.11.1
</code></pre>
","10364"
"SNMP: Configuring/Enabling SNMPv3 on Cisco IOS and SNMP Agent","15213","","<p>I have been configuring and using SNMP v2c on Cisco routers.</p>

<p>Due to the obvious advantages in SNMP v3, I am planning on enabling SNMP v3 on SNMP v3 supported devices.</p>

<p>Could someone let me know:</p>

<ol>
<li>The commands used to configure SNMP v3 on an Cisco IOS?</li>
<li>The configuration required on the SNMP v3 agent?</li>
</ol>
","<p>They have a pretty simple writeup over at <a href=""http://networklessons.com/network-management/how-to-configure-snmpv3-on-cisco-ios-router/"" rel=""nofollow"">Networklessons</a>, but in-depth information on how it works are on <a href=""http://www.cisco.com/c/en/us/td/docs/ios-xml/ios/snmp/configuration/xe-3se/3850/snmp-xe-3se-3850-book/nm-snmp-snmpv3.html"" rel=""nofollow"">Cisco's site</a>. It can be as complicated and secure as you want it. Your 2 questions are one and the same.  </p>

<p>A barebones config would be like this:</p>

<p><strong>Create a group</strong></p>

<pre><code>R1(config)#snmp-server group MYGROUP v3 priv
</code></pre>

<p><strong>Attach a user to a group</strong></p>

<pre><code>R1(config)#snmp-server user MYUSER MYGROUP v3 auth md5 MYPASS123 priv aes128 MYKEY123
</code></pre>

<p>If you aren't looking to restrict access to specific MIBs, then this is all you really need.</p>
","6846"
"Juniper EX-series: How can I transfer a config from one switch to another?","15186","","<p>I have a lab EX-2200 that has a config on it that I now want to replicate onto four more EX-2200's... I'm sure there's probably an easy way to do this, but couldn't find it on the Juniper KB or by (a minimum amount of) Googling. Anyone here know?</p>
","<p>I followed the directions in this Juniper document:
<a href=""http://kb.juniper.net/InfoCenter/index?page=content&amp;id=KB12022"" rel=""nofollow"">http://kb.juniper.net/InfoCenter/index?page=content&amp;id=KB12022</a></p>

<p>Briefly, I backed up the configured switch's config file to a USB key, and then mounted the USB key on the new switch, and did a <code>load override /mnt/juniper.conf.gz</code> as per the document's ""restore"" section. Worked like a champ!</p>
","5422"
"How can there be more than one MAC address on single switch port?","15096","","<p>I am learning for the ICND1 exam through CBTNuggets video courses.
In one of their videos they used a command,</p>

<pre><code>switchport port-security maximum
</code></pre>

<p>This is what the cisco help says about it,</p>

<pre><code>To set the maximum number of secure MAC addresses on a port
</code></pre>

<p>I have tested this command myself on Cisco Packet Tracer, and this command allows to set this value to up to 132.</p>

<p>Under what circumstances would I connect 132 hosts to a single Switch port ?
Doesn't one port only support one MAC address at a time ?</p>
","<p>You can have more than one MAC address on a switch port if:<br>
1.) You have a switch connected to it.  Could be another managed switch (like a Cisco) or an unmanaged switch (like a consumer Netgear or Linksys switch).<br>
2.) You have a virtual server host attached to it with multiple virtual machines sharing the NIC.<br>
3.) You're using a VoIP phone to carry data for a computer.  In this case, you'll have a trunk  running to the phone from the switch and a second ethernet cable running from the phone to a computer.</p>
","9681"
"When *not* to create a SVI for a L2 VLAN?","15047","","<p>When creating VLANs for just L2 on a switch -- routing will be handled by a device within that VLAN such as a load-balancer -- <strong>it isn't necessary to create the vlan interface</strong>.  As a matter of habit, I always create the interface anyway-- no IP address - so I get all the interface bits and packet stats in ""sh interface"".  </p>

<p><strong>Are there any negatives to what I think is a best practice to just create the L2 interface?</strong> </p>

<p><strong>When do you create or <em>not</em> create the interface for a L2 VLAN?</strong></p>

<p><em>I am looking for answers that discuss only L2 VLANs, not the merits and use cases for L3 VLAN SVIs.</em></p>

<p>Cisco reports a L2 interface as EtherSVI on my 6500 -- no IP address.  Is it correct or incorrect to still think of a L2 interface as an SVI though the we all know the usual use-case is to have an IP address for routing?  The question is only about whether or not I should have this L2 interface in the first place.  You can see only the L2 counters are incremented, but still giving <em>some</em> value.</p>

<pre><code>s-oc4-n2-agg1#sh int vl281
Vlan281 is up, line protocol is up
  Hardware is EtherSVI, address is 0019.a925.2000 (bia 0019.a925.2000)
  Description: svi.SLB-FE-Web-Servers
  MTU 1500 bytes, BW 1000000 Kbit, DLY 10 usec,
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation ARPA, loopback not set
  Keepalive not supported
  ARP type: ARPA, ARP Timeout 04:00:00
  Last input 00:00:02, output 00:00:10, output hang never
  Last clearing of ""show interface"" counters 1d12h
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 0
  Queueing strategy: fifo
  Output queue: 0/40 (size/max)
  5 minute input rate 0 bits/sec, 0 packets/sec
  5 minute output rate 0 bits/sec, 0 packets/sec
  L2 Switched: ucast: 1138722618 pkt, 1070173012274 bytes - mcast: 76471 pkt, 8482399 bytes
  L3 in Switched: ucast: 0 pkt, 0 bytes - mcast: 0 pkt, 0 bytes mcast
  L3 out Switched: ucast: 0 pkt, 0 bytes mcast: 0 pkt, 0 bytes
     74604 packets input, 8350307 bytes, 0 no buffer
     Received 74604 broadcasts (0 IP multicasts)
     0 runts, 0 giants, 0 throttles
     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored
     218 packets output, 17658 bytes, 0 underruns
     0 output errors, 0 interface resets
     0 output buffer failures, 0 output buffers swapped out
</code></pre>
","<p>You might not want to make a L2 SVI if you use VTP pruning. If pruning is on, an unused VLAN will be pruned from the trunk, resulting in less unnecessary broadcast/flooding traffic. However, creating an SVI, creates an ""active"" interface on your switch. A quick check in GNS3 gives the following:</p>

<pre><code>R1#show vlan-switch

VLAN Name                             Status    Ports
---- -------------------------------- --------- -------------------------------
1    default                          active    Fa1/1, Fa1/2, Fa1/3, Fa1/4
                                                Fa1/5, Fa1/6, Fa1/7, Fa1/8
                                                Fa1/9, Fa1/10, Fa1/11, Fa1/12
                                                Fa1/13, Fa1/14, Fa1/15
3    VLAN0003                         active
4    VLAN0004                         active
[output omitted]

R1#show interfaces trunk

Port      Mode         Encapsulation  Status        Native vlan
Fa1/0     on           802.1q         trunking      1

Port      Vlans allowed on trunk
Fa1/0     1-4094

Port      Vlans allowed and active in management domain
Fa1/0     1,3-4

Port      Vlans in spanning tree forwarding state and not pruned
Fa1/0     1
</code></pre>

<p>Now, if I go to R2, connected to Fa1/0 and type <code>R2(config)#int vlan 3</code>, we will see the following:</p>

<pre><code>R2#show run interface vlan 3
Building configuration...

Current configuration : 38 bytes
!
interface Vlan3
 no ip address
end
R2#show run | include vlan 3
R2#
</code></pre>

<p>As you can see, no interfaces in VLAN 3, except the SVI. And back on R1:</p>

<pre><code>R1#show interfaces trunk

Port      Mode         Encapsulation  Status        Native vlan
Fa1/0     on           802.1q         trunking      1

Port      Vlans allowed on trunk
Fa1/0     1-4094

Port      Vlans allowed and active in management domain
Fa1/0     1,3-4

Port      Vlans in spanning tree forwarding state and not pruned
Fa1/0     1,3
</code></pre>

<p>As you can see, <strong>VLAN 3 just came up on the trunk</strong>, adding to the traffic levels on your trunks. </p>
","833"
"Do I need to set the enable secret on Cisco device?","14956","","<p>I'm setting up a Cisco 2901 router. I have a login password on the console line, and the vty lines are configured to only accept ssh connections with public key authentication. The auxiliary line is shut down. There are only two admins who will be accessing the router and we are both authorized to perform any configuration on the router.</p>

<p>I'm not an expert on Cisco gear, but I consider this adequate to secure access to the router configuration. However, every single guide I've read states I should set an enable secret, regardless of any other user or line passwords.</p>

<p>Is there something more to the enable password that I'm not aware off? Is there any other way to access the router than then console, auxiliary, or vty lines?</p>

<p><b>EDIT:</b>
I've added the actual configuration below to be more clear about my situation. The following works, with requiring an enable password, or a <code>username</code> config aside from the one within <code>ip ssh pubkey-chain</code>.</p>

<pre><code>aaa new-model

ip ssh time-out 60
ip ssh authentication-retries 2
ip ssh version 2
ip ssh pubkey-chain
 username tech
  key-hash ssh-rsa [HASH]
ip scp server enable

line vty 0 4
 transport input ssh
</code></pre>
","<p>No, you don't -- technically.  But whether you can enter enable mode without one depends on how you log in.</p>

<p><strong>Here's the instant gratification version:</strong></p>

<p>You can enter via the console without an enable password, but you will be stuck in user mode if you use a simple vty login password without an enable password set.</p>

<p><strong>Here's the long-winded StackExchange answerer version:</strong></p>

<p>Cisco authentication is kind of a mess for a beginner.  There's a lot of legacy baggage there.  Let me try to break this down in a real-world sense.</p>

<p>Everyone that has any business logging into a router or switch pretty much goes directly to privileged (enable) mode.  The user mode is basically a front lobby, and serves little more purpose than to keep the draft out.  In large organizations where you have vast networks and equally vast pools of labor, it may be justifiable to have someone who can knock on the front door and make sure someone is still there.  (That is, to log in and run the most trivial commands just to see that the device is, in fact, responding and not on fire.)  But in every environment I've ever worked in, tier 1 had at least <em>some</em> ability to break things.</p>

<p>As such, and particularly in a scenario like yours, knowing the enable password is obligatory to get anything done.  You could say this is a second level of security -- one password to enter the device, another to escalate to administrative privilege -- but that seems a little bit silly to me.</p>

<p>As already noted, you can (and many people do) use the same password, which doesn't help much if someone has gained unauthorized access via telnet/ssh.  Having static, global passwords shared by everyone is arguably more of an issue than having just one token required to enter.  Finally, most other systems (services, appliances, etc.) don't require a second layer of authentication, and are not generally considered insecure because of this.</p>

<p>OK, that's my opinion on the topic.  You'll have to decide for yourself whether it makes sense in light of your own security stance.  Let's get down to business.</p>

<p>Cisco (wisely) requires you to set a remote access password by default.  When you get into line configuration mode...</p>

<pre><code>router&gt; enable
router# configure terminal
router(config)# line vty 0 15
router(config-line)#
</code></pre>

<p>...you can tell the router to skip authentication:</p>

<pre><code>router(config-line)# no login
</code></pre>

<p>...and promptly get hacked, but your attacker will end up in user mode.  So if you have an enable password set, at least you have <em>somewhat</em> limited the damage that can be done.  (Technically, you can't go any further <em>without</em> an enable password either.  More on that in a moment...)</p>

<p>Naturally, no one would do this in real life.  Your minimum requirement, by default and by common sense, is to set a simple password:</p>

<pre><code>router(config-line)# login
router(config-line)# password cisco
</code></pre>

<p>Now, you will be asked for a password, and you will again end up in user mode.  If you're coming in via the console, you can just type <code>enable</code> to get access without having to enter another password.  But things are different via telnet, where you will probably get this instead:</p>

<pre><code>$ telnet 10.1.1.1
Trying 10.1.1.1...
Connected to 10.1.1.1.
Escape character is '^]'.


User Access Verification

Password: *****
router&gt; enable
% No password set
router&gt; 
</code></pre>

<p>Moving on... You probably already know that, by default, all your configured passwords show up as plain text:</p>

<pre><code>router# show run | inc password
no service password-encryption
 password cisco
</code></pre>

<p>This is one of those things that tightens the sphincter of the security-conscious.  Whether it's justified anxiety is again something you have to decide for yourself.  On one hand, if you have sufficient access to <em>see</em> the configuration, you probably have sufficient access to <em>change</em> the configuration.  On the other hand, if you happen to have carelessly revealed your configuration to someone who doesn't have the means themselves, then ... well, now they <em>do</em> have the means.</p>

<p>Luckily, that first line in the snippet above, <code>no service password-encryption</code>, is the key to changing that:</p>

<pre><code>router(config)# service password-encryption
router(config)# line vty 0 15
router(config-line)# password cisco
</code></pre>

<p>Now, when you look at the configuration, you see this:</p>

<pre><code>router(config-line)# do show run | begin line vty
line vty 0 4
 password 7 01100F175804
 login
line vty 5 15
 password 7 01100F175804
 login
!
!
end
</code></pre>

<p>This is marginally better than plain-text passwords, because the displayed string isn't memorable enough to shoulder-surf.  However, it's trivial to decrypt -- and I use that term loosely here.  You can literally paste that string above into one of a dozen JavaScript password crackers on the first Google results page, and get the original text back immediately.</p>

<p>These so-called ""7"" passwords are commonly considered ""obfuscated"" rather than ""encrypted"" to highlight the fact that it is just barely better than nothing.</p>

<p>As it turns out, however, all those <code>password</code> commands are deprecated.  (Or if they're not, they should be.)  That's why you have the following two options:</p>

<pre><code>router(config)# enable password PlainText
router(config)# enable secret Encrypted
router(config)# do show run | inc enable
enable secret 5 $1$sIwN$Vl980eEefD4mCyH7NLAHcl
enable password PlainText
</code></pre>

<p>The secret version is hashed with a one-way algorithm, meaning the only way to get the original text back is by brute-force -- that is, trying every possible input string until you happen to generate the known hash.</p>

<p>When you enter the password at the prompt, it goes through the same hashing algorithm, and should therefore end up generating the same hash, which is then compared to the one in the configuration file.  If they match, your password is accepted.  That way, the plain text isn't known to the router except during the brief moment when you are creating or entering the password.  Note: There's always the chance some other input can generate the same hash, but statistically it's a very low (read: negligible) probability.</p>

<p>If you were to use the above configuration yourself, the router will allow both the <code>enable password</code> and <code>enable secret</code> lines to exist, but the secret wins from the password prompt.  This is one of those Cisco-isms that doesn't make much sense, but it's the way it is.  Furthermore, there's no <code>secret</code> equivalent command from line configuration mode, so you're stuck with obfuscated passwords there.</p>

<p>Alright, so we now have a password that can't be recovered (easily) from the config file -- but there's still one problem.  It's being transmitted in plain text when you log in via telnet.  No good.  We want SSH.</p>

<p>SSH, being designed with more robust security in mind, requires a little extra work -- and an IOS image with a certain feature set.  One big difference is that a simple password is no longer good enough.  You need to graduate to user-based authentication.  And while you're at it, set up an encryption key pair:</p>

<pre><code>router(config)# username admin privilege 15 secret EncryptedPassword
router(config)# line vty 0 15
router(config-line)# transport input ssh
router(config-line)# no password
router(config-line)# login local
router(config-line)# exit
router(config)# ip ssh version 2
router(config)# crypto key generate rsa modulus 1024
</code></pre>

<p>Now you're cooking with gas!  Notice this command uses <code>secret</code> passwords.  (Yes, you can, but shouldn't, use <code>password</code>).  The <code>privilege 15</code> part allows you to bypass user mode entirely.  When you log in, you go straight to privileged mode:</p>

<pre><code>$ ssh admin@10.1.1.1
Password: *****

router#
</code></pre>

<p>In this scenario, there's no need to use an enable password (or secret.)</p>

<p>If you're not yet thinking, ""wow... what a clusterfudge <em>that</em> was"", bear in mind there's a whole other long-winded post still lurking behind the command <code>aaa new-model</code>, where you get to dive into things like external authentication servers (RADIUS, TACACS+, LDAP, etc.), authentication lists (which define the sources to use, and in which order), authorization levels, and user activity accounting.</p>

<p>Save all that for a time when you feel like getting locked out of your router for a while.</p>

<p>Hope that helps!</p>
","16011"
"Which VLANs are allowed on this trunk?","14927","","<p>I'm getting some mixed signals when configuring a trunk on a Cisco switch and I'd like to know which VLANs are actually being allowed on it. The way I want it to be is that only VLANs 1,10,20,30,99 should be allowed. Have a look at the output:</p>

<pre><code>S1(config-if)#do show int tru
Port        Mode         Encapsulation  Status        Native vlan
Gig1/1      on           802.1q         trunking      99
Gig1/2      on           802.1q         trunking      99

Port        Vlans allowed on trunk //What is this?
Gig1/1      1-1005
Gig1/2      1-1005

Port        Vlans allowed and active in management domain //What is this?
Gig1/1      1,10,20,30,99
Gig1/2      1,10,20,30,99

Port        Vlans in spanning tree forwarding state and not pruned //What is this?
Gig1/1      none
Gig1/2      1,10,20,30,99
</code></pre>

<p>What confuses me is that first it states that all VLANs in range 1-1005 are allowed and then it says 1,10,20,30,99 are ""allowed and active in management domain"" - what is that supposed to mean? What do the different headings mean?</p>
","<p>When you configure a trunk link with the command:</p>

<pre><code>(config-if)#switchport mode trunk
</code></pre>

<p><strong>all</strong> the vlans will be allowed in the trunk link.</p>

<p>If you want to control which VLANs are allowed in a trunk link use the following commands:</p>

<pre><code>(config-if)#switchport trunk allowed vlan
  WORD    VLAN IDs of the allowed VLANs when this port is in trunking mode
  add     add VLANs to the current list
  all     all VLANs
  except  all VLANs except the following
  none    no VLANs
  remove  remove VLANs from the current list
</code></pre>

<p>For example if you want to allow VLANs 1,10,20,30,99 in a trunk link you have to type:</p>

<pre><code>(config-if)#switchport trunk allowed vlan 1,10,20,30,99
</code></pre>

<p>Pay attention that if you want to add a vlan on a trunk link (for example VLAN 100) you have to use the <strong>add</strong> statement (this is really a commond mistake), for example:</p>

<pre><code>(config-if)#switchport trunk allowed vlan add 100
</code></pre>

<p>When you read ""Vlans allowed and active"" it simply means that just the active VLANs (the ones you have defined) are allowed in that trunk link.</p>

<p>Reference here: <a href=""https://supportforums.cisco.com/document/11836/how-define-vlans-allowed-trunk-link"">How to define the VLANs allowed on a trunk link</a></p>

<p><strong>EDIT</strong>: Analyzing the output of the <code>show interface trunk</code> command it's easy to see that it is organized in 4 sections; </p>

<ul>
<li><p>The first one is a list of all the trunk interfaces togheter with the encapsulation and the native VLAN.</p></li>
<li><p>For what concern the second and the third lines the important point to clarify is the difference between <strong>allowed</strong> and <strong>active</strong>. Allowed simply stays for ""It is allowed to pass"" meanwhile active means ""this VLAN is up and running in the swtich"". Note that active does not simply mean ""it is present in the database"" since you can shutdown a vlan with <code>(config-vlan)#shutdown</code>.</p></li>
<li><p>The last one deserves a little note; when dealing with PVST (Per-VLAN Spanning Tree) the switch creates a loop-free topology for each L2 broadcast domain (VLAN). Since it is not said that each VLAN share the same phisical topology there could be the case in which, even if a vlan is active and allowed, that vlan will not be forwarded across the trunk interface. This is because that interface it is not in the Forwarding state for that particular PVST process. Is it also possible that a VLAN is not forwarded across a trunk if it has been pruned by the <a href=""http://www.cisco.com/c/en/us/support/docs/lan-switching/vtp/10558-21.html#vtp_pruning"">VTP pruning</a> process.</p></li>
</ul>
","7396"
"How to give a user access only three sites and other all sites is blocked by mikrotik router?","14921","","<p><strong>Mikrotik router Model :450g</strong></p>

<p>like as,Access lists :</p>

<p>1.www.google.com</p>

<p>2.www.yahoo.com</p>

<p>3.www.banglalinkgsm.com</p>

<p>Denny list :
All sites without access listed sites .</p>
","<p><strong>You can follow this procedure:</strong> </p>

<p>Use Firewall > Filter Rules.</p>

<p><strong><em>For www.google.com access :</em></strong></p>

<p>1.add a new rule</p>

<p>2.chain: forward</p>

<p>3.Src.Address : LAN Network IP</p>

<p>4.Dst.Address: www.google.com</p>

<p>5.in.Interface : LAN Port Name</p>

<p>6.action: accept</p>

<p>7.apply >OK </p>

<p><strong><em>For www.yahoo.com access :</em></strong></p>

<p>1.add a new rule</p>

<p>2.chain: forward</p>

<p>3.Src.Address : LAN Network IP</p>

<p>4.Dst.Address: www.yahoo.com</p>

<p>5.in.Interface : LAN Port Name</p>

<p>6.action: accept</p>

<p>7.apply >OK </p>

<p><strong><em>For www.banglalinkgsm.com access :</em></strong></p>

<p>1.add a new rule</p>

<p>2.chain:forward</p>

<p>3.Src.Address : LAN Network IP</p>

<p>4.Dst.Address: www.banglalinkgsm.com</p>

<p>5.in.Interface : LAN Port Name</p>

<p>6.action: accept</p>

<p>7.apply >OK </p>

<p><strong><em>For Other sites access :</em></strong></p>

<p>1.add a new rule</p>

<p>2.chain: forward</p>

<p>3.in.Interface : LAN Port Name</p>

<p>4.action: drop</p>

<p>5.apply >OK </p>
","11314"
"What layer of the OSI model does NAT work?","14802","","<p>Simple question and the answer is layer 3 of course, but can we say that PAT is working on layer 4 also because it deals with port numbers which is a layer 4 function?</p>

<p>Or is it only a layer 3 protocol?</p>
","<p>NAT works at layer 3 because it is modifying the IP header. If you use PAT you could argue that it is working at layer 4 as well because it MIGHT change the source port of the packet in case it is not unique.</p>

<blockquote>
  <p>Several internal addresses can be NATed to only one or a few external
  addresses by using a feature called Port Address Translation (PAT)
  which is also referred to as ""overload"", a subset of NAT
  functionality. </p>
  
  <p>PAT uses unique source port numbers on the Inside
  Global IP address to distinguish between translations. Because the
  port number is encoded in 16 bits, the total number could
  theoretically be as high as 65,536 per IP address. </p>
  
  <p>PAT will attempt to
  preserve the original source port, if this source port is already
  allocated PAT will attempt to find the first available port number
  starting from the beginning of the appropriate port group 0-5111,
  512-1023 or 1024-65535. </p>
  
  <p>If there is still no port available from the
  appropriate group and more than one IP address is configured, PAT will
  move to the next IP address and try to allocate the original source
  port again. This continues until it runs out of available ports and IP
  addresses.</p>
</blockquote>

<p>So the port will only be modified in case it is not unique.</p>

<p>This <a href=""http://www.cisco.com/en/US/technologies/tk648/tk361/tk438/technologies_white_paper09186a0080091cb9.html"">link</a> to Cisco is a pretty good overview of NAT.</p>
","3146"
"How can routers forward broadcast traffic?","14763","","<p>I was asked by an interviewer about the following question:</p>

<blockquote>
  <p>Is there any way to make routers to forward Broadcast traffic?</p>
</blockquote>

<p>I said no for the above question as routers break the broadcast domain.</p>

<p>He said ""it is possible?"" I have gone through lot of books, but it was no use.</p>
","<p>Depends on the system. Cisco's will forward certain broadcast traffic (hint: google ""ip helper-address"")  Other protocols have specific mechanisms to forward (""relay"") their broadcast traffic -- for example DHCP, normally it would cease being broadcast when relayed, but many system can be configured to broadcast the relayed request. (I personally do that so the pxe server can see the requests as well, and answer boot requests.)</p>
","5522"
"How to disable unused LAN ports on Fortigate","14739","","<p>I know I can set the administrative status of WAN/DMZ ports to down to disable them, but I can only see how to set the entire internal interface up/down. Is there a way to set individual LAN ports down so someone cannot plug into them and access the network?</p>
","<p>It's look like that the<code>internal-switch-mode</code> is set as <em>switch¹</em> (by default). That means that all port on the <strong>internal</strong> interface are configured as they are only one:</p>

<blockquote>
  <p>Switch mode combines FortiGate unit interfaces into one switch with
  one address. Interface mode gives each internal interface its own
  address.²</p>
</blockquote>

<p>so, as I understand, if in system global configuration you set: <code>internal-switch-mode interface</code>, you shall configure each port independently, so you will able to reconfigure port 1 and 2 then disable the other as @David say.</p>

<p>NB <strong><em>Before</strong> switching modes, all configuration settings for the interfaces affected by the switch <strong>must</strong> be set to defaults.</em>²</p>

<p>Ref:</p>

<ol>
<li><a href=""http://docs-legacy.fortinet.com/fgt/handbook/cli_html/index.html#page/FortiOS%25205.0%2520CLI/config_system.24.034.html"" rel=""nofollow"">Fotigate ""Interface"" command CLI document</a></li>
<li><a href=""http://docs-legacy.fortinet.com/fgt/handbook/cli_html/index.html#page/FortiOS%25205.0%2520CLI/config_system.24.031.html"" rel=""nofollow"">Fotigate ""Global config"" command CLI document</a></li>
</ol>
","12705"
"MPLS vs Encrypted VPNs - traffic security?","14661","","<p>Why do people say a lot of times that they have two connections between two offices - the main one being over MPLS and the backup one over VPN. Why not run a VPN over MPLS too? Is MPLS secure? Can no one evesdrop on the traffic?</p>
","<p>Both Daniel and John gave very good answers to your question; I'll just add some practical things that come to mind when I read the question.</p>

<p>Keep in mind that much discussion about the security of <a href=""http://en.wikipedia.org/wiki/MPLS_VPN"">MPLS VPN</a>s comes by way of the trust normally afforded to <a href=""http://en.wikipedia.org/wiki/Frame_relay"">Frame Relay</a> and <a href=""http://en.wikipedia.org/wiki/Asynchronous_Transfer_Mode"">ATM</a> VPNs.</p>

<blockquote>
  <p>Is MPLS secure?</p>
</blockquote>

<p>Ultimately the question of security comes down to one unasked question, which is <em>""Who do you trust with your business-critical data?""</em></p>

<ul>
<li>If the answer is ""nobody"", then you must overlay your data through an encrypted VPN</li>
<li>If you trust your <a href=""http://en.wikipedia.org/wiki/MPLS_VPN"">MPLS VPN</a> provider, then there is no need to encrypt your data</li>
</ul>

<blockquote>
  <p>Why not run a VPN over MPLS too?</p>
</blockquote>

<p>By most common usage, MPLS <em>is</em> a VPN, but it's an unencrypted VPN. I assume you mean an encrypted VPN, such as <a href=""http://en.wikipedia.org/wiki/Point-to-Point_Tunneling_Protocol"">PPTP</a>, <a href=""http://en.wikipedia.org/wiki/IPsec"">IPSec</a>, or <a href=""http://openvpn.net/index.php/open-source/339-why-ssl-vpn.html"">SSL VPN</a> when you mention ""VPN"". However, if you need strong <a href=""http://en.wikipedia.org/wiki/Encryption"">encryption</a>, <a href=""http://en.wikipedia.org/wiki/Data_integrity#Physical_vs._Logical_Integrity"">data integrity</a>, or <a href=""http://en.wikipedia.org/wiki/Authentication"">Authentication</a> inside the VPN, <a href=""http://tools.ietf.org/html/rfc4381#section-5.2"">rfc4381 MPLS VPN Security, Section 5.2</a> recommends encrypting inside <a href=""http://en.wikipedia.org/wiki/MPLS_VPN"">MPLS VPN</a>.</p>

<p>However, encrypted VPNs are not without problems themselves; they generally suffer from:</p>

<ul>
<li>Additional expenses for the infrastructure</li>
<li>Throughput / scalability limitations (due to complexities in HW encryption)</li>
<li>Additional expenses for personnel / training</li>
<li>Increased <a href=""http://en.wikipedia.org/wiki/Mean_time_to_repair"">Mean Time to Repair</a> when debugging problems through the encrypted VPN</li>
<li>Increased management overhead (i.e. <a href=""http://www.cisco.com/en/US/docs/solutions/Enterprise/Security/DCertPKI.html"">maintaining PKI</a>)</li>
<li>Technical difficulties, such as lower <a href=""http://en.wikipedia.org/wiki/Maximum_segment_size"">TCP MSS</a>, and often <a href=""http://www.cisco.com/en/US/tech/tk827/tk369/technologies_white_paper09186a00800d6979.shtml"">problems with PMTUD</a></li>
<li>Less efficient links, because you have the encapsulation overhead of the encrypted VPN (which is already inside the overhead from the <a href=""http://en.wikipedia.org/wiki/MPLS_VPN"">MPLS VPN</a>)</li>
</ul>

<blockquote>
  <p>Can no one evesdrop on the traffic?</p>
</blockquote>

<p>Yes, evesdropping is quite possible, regardless of whether you think you can trust your provider.  I will quote from <a href=""http://tools.ietf.org/html/rfc4381#section-7"">rfc4381 MPLS VPN Security, Section 7</a>:</p>

<p><em>As far as attacks from within the MPLS core are concerned, all [unencrypted] VPN
   classes (BGP/MPLS, FR, ATM) have the same problem: If an attacker can
   install a sniffer, he can read information in all VPNs, and if the
   attacker has access to the core devices, he can execute a large
   number of attacks, from packet spoofing to introducing new peer
   routers.  There are a number of precautionary measures outlined above
   that a service provider can use to tighten security of the core, but
   the security of the BGP/MPLS IP VPN architecture depends on the
   security of the service provider.  If the service provider is not
   trusted, the only way to fully secure a VPN against attacks from the
   ""inside"" of the VPN service is to run IPsec on top, from the CE
   devices or beyond.</em></p>

<hr>

<p>I'll mention a final point, which is just a practical question.  One might argue that there is no point in using an <a href=""http://en.wikipedia.org/wiki/MPLS_VPN"">MPLS VPN</a>, if you're going to use an encrypted VPN over basic internet service; I would disagree with that notion.  The advantages of an encrypted VPN through MPLS VPN are working with one provider:</p>

<ul>
<li>While you troubleshoot issues (end to end)</li>
<li>To guarantee quality of service</li>
<li>To provision services</li>
</ul>
","3771"
"Are CoS and QoS ever interchangeable?","14652","","<p>The terms CoS &amp; QoS are often used interchangably, particularly in the SP space when providing ""Class of Service profiles"" etc as part of Product sets.  I'm looking to re-affirm my understanding that CoS is just one way in which traffic can be marked at layer 2, whilst QoS determines what you actually do to that traffic at layer 3?</p>

<p>Can anyone provide more real world implementation examples of distinguishing between the two terms or alternatively advise me of any overlap?</p>
","<p>QoS is an umbrella term which covers the use of features such as policing, shaping, traffic classification, and advanced queuing mechanisms.</p>

<p>CoS is a form of QoS limited to layer-2 Ethernet and it uses 3-bits (8 values) of the 802.1Q tag to differentiate your traffic. Therefore no trunking, no CoS.</p>

<p>DSCP is the most commonly acted upon value at layer-3 and it is found in 6-bits (64 values) of the IP header.  Typically only 14 of the values are used and are referred to using the notations of best effort, expedited forwarding (EF), and assured forwarding (AF).  AF values are in the form AFxy, where x is 1-4 and refers to the precedence and y is 1-3 and refers to the drop probability.</p>

<p>Telco vendors (such as AT&amp;T specifically) use the term CoS to define the bandwidth allocation classes that they support in their MPLS offerings.  Basically they turned CoS into a marketing term.  Typically a Telco uses DSCP to know which of their CoS classes your traffic is supposed to be a part of.</p>

<p>Another important point for configuring these features is that in a Cisco switch or router you 
need to use a command such as 'mls qos trust dscp' or 'mls qos trust cos' or else the device will reset the QoS marking to zero.  There are some exceptions based on model, configuration, and IOS version but this has been true for everything within the last few years in my experience.  This configuration is required because the device needs to know which marking you want it to act upon since it cannot use both.  I like using DSCP. I haven't found a solid reason to use CoS over it but I'm sure someone has one.</p>
","71"
"DHCP-offer fails on dhcpserver - router-on-a-stick","14610","","<p>I am using packettracer to configure a network. The problem is that the router (that is acting as a router-on-a-stick) is not offering ip-addresses from its pool. The pc that act as the client belongs to vlan 30 and the interface fa0/1 on the switch is in acess-mode state. So no problem. And - the G0/1-interface to the router is configured as a trunk link. OK! AND - And the PC can communicate with ICMP-messages to the router if its configured static. So I do not understand why the router doesnt offer any address to the client?</p>

<p>When I click the DHCP-radiobutton on the pc-GUI I get the following error information:</p>

<p><strong>DHCP failed. APIPA is being used</strong></p>

<p>Router config for dhcp</p>

<pre><code>HQ(config)#ip dhcp excluded-address 10.10.10.193 255.255.255.192
HQ(config)#ip dhcp pool LAN
HQ(dhcp-config)#network 10.10.10.192 255.255.255.192
HQ(dhcp-config)#default-router 10.10.10.193
HQ(dhcp-config)#end
</code></pre>

<p>And the addressing info looks like this for vlan-30 on the router:</p>

<pre><code>G0/0.30   10.10.10.193   255.255.255.192
</code></pre>

<p>And my config on the router for this subinterface</p>

<pre><code>HQ(config-subif)#encapsulation dot1q 30
HQ(config-subif)#ip address 10.10.10.193 255.255.255.192
</code></pre>

<p>I add a screenshot here so you easily can see the topology of the network.</p>

<p>Would be  greatful if someone could see why the router wont offer the ip-addresses? May it have something to do with the native vlan that is VLAN 45?</p>

<p>cincerely</p>

<p><img src=""https://i.stack.imgur.com/9S7gE.jpg"" alt=""enter image description here""></p>
","<p>You've excluded all IP's available in the pool except for the network address:</p>

<pre><code>HQ(dhcp-config)#network 10.10.10.192 255.255.255.192
</code></pre>

<p>indicates available IP addresses are 10.10.10.192 upto and including 10.10.10.255, and </p>

<pre><code>HQ(config)#ip dhcp excluded-address 10.10.10.193 255.255.255.192
</code></pre>

<p>Indicates that except for 10.10.10.192 these addresses cannot be used. So fix that last statement so the DHCP server actually has some addresses it can assign.</p>
","13483"
"Site-to-site VPN between Cisco ASA and Juniper SRX","14584","","<p>I'm trying to create route-based VPN connection between Cisco ASA and Juniper SRX, but I have a problem with ACL and Proxy IDs. Cisco ASA log states that</p>

<pre><code>[IKEv1]Group = A.A.A.A, IP = A.A.A.A, Rejecting IPSec tunnel: no matching crypto map entry for remote proxy B.B.B.B/255.255.255.0/6/0 local proxy Z.Z.Z.Z/255.255.255.255/6/22 on interface comcastpublic
</code></pre>

<p>I don't know how to make B.B.B.B/255.255.255.0/6/22 and where the problem is. The aim is to pass <strong>only SSH traffic</strong> through this VPN.</p>

<p>Notation:</p>

<p>A.A.A.A - Juniper public IP</p>

<p>B.B.B.B - Juniper private IP</p>

<p>Y.Y.Y.Y - Cisco public IP</p>

<p>Z.Z.Z.Z - Cisco private IP</p>

<p>Juniper SRX config:</p>

<pre><code>interfaces {
    fe-0/0/0 {
        unit 0 {
            family inet {
                address A.A.A.A/26;
            }
        }
    }
    fe-0/0/7 {
        unit 0 {
            family inet {
                address B.B.B.1/24;
            }
        }
    }
    st0 {
        unit 0 {
            multipoint;
            family inet {
                next-hop-tunnel 10.10.10.1 ipsec-vpn ipsec-vpn-1-cfgr;
                next-hop-tunnel 10.10.10.3 ipsec-vpn ipsec-vpn-2-cfgr;
                address 10.10.10.2/24;
            }
        }
        unit 1 {
            point-to-point;
            family inet {
                next-hop-tunnel 10.10.10.4 ipsec-vpn ipsec-vpn-remote-cfgr;
            }
        }
    }
}
routing-options {
    static {
        route 0.0.0.0/0 next-hop A.A.A.1;
        route B.B.1.0/24 next-hop 10.10.10.1;
        route B.B.3.0/24 next-hop 10.10.10.3;
        route Z.Z.Z.Z/32 next-hop st0.1;
    }
}
security {
    ike {
        traceoptions {
            file size 1m;
            flag ike;
            flag next-hop-tunnels;
            flag all;
        }
        proposal ike-proposal-cfgr {
            authentication-method pre-shared-keys;
            dh-group group2;
            authentication-algorithm sha1;
            encryption-algorithm 3des-cbc;
            lifetime-seconds 3600;
        }
        policy ike-policy-remote-cfgr {
            mode main;
            proposals ike-proposal-cfgr;
            pre-shared-key ascii-text ""********"";
        }
        gateway ike-gate-remote-cfgr {
            ike-policy ike-policy-remote-cfgr;
            address Y.Y.Y.Y;
            external-interface fe-0/0/0.0;
        }
    }
    ipsec {
        traceoptions {
            flag all;
        }
        proposal ipsec-proposal-remote-cfgr {
            protocol esp;
            authentication-algorithm hmac-sha1-96;
            encryption-algorithm 3des-cbc;
            lifetime-seconds 86400;
            lifetime-kilobytes 28800;
        }
        policy ipsec-policy-remote-cfgr {
            proposals ipsec-proposal-remote-cfgr;
        }
        vpn ipsec-vpn-remote-cfgr {
            bind-interface st0.1;
            vpn-monitor {
                optimized;
            }
            ike {
                gateway ike-gate-remote-cfgr;
                proxy-identity {
                    local B.B.B.B/24;
                    remote Z.Z.Z.Z/32;
                    service junos-ssh;
                }
                ipsec-policy ipsec-policy-remote-cfgr;
            }
            establish-tunnels immediately;
        }
    }
    alg {
        traceoptions {
            file alg.log size 100000 files 2;
        }
        dns disable;
        msrpc disable;
        rsh disable;
        sql disable;
    }
    flow {
        tcp-mss {
            all-tcp {
                mss 1400;
            }
            ipsec-vpn {
                mss 1350;
            }
        }
        tcp-session {
            no-syn-check;
            no-syn-check-in-tunnel;
            no-sequence-check;
        }
    }   
    policies {
        from-zone guest to-zone remote {
            policy local-to-spokes {
                match {
                    source-address net-cfgr_B-B-B-B--24;
                    destination-address net-cfgr_Z-Z-Z-Z--32;
                    application junos-ssh;
                }
                then {
                    permit;
                }
            }
        }
        from-zone remote to-zone guest {
            policy spokes-to-local {
                match {
                    source-address net-cfgr_Z-Z-Z-Z--32;
                    destination-address net-cfgr_B-B-B-B--24;
                    application junos-ssh;
                }
                then {
                    permit;
                }
            }
        }
    }
    zones {
        security-zone remote {
            address-book {
                address net-cfgr_Z-Z-Z-Z--32 Z.Z.Z.Z/32;
            }
            interfaces {
                st0.1;
            }
        }
        security-zone guest {
            address-book {
                address net-cfgr_B-B-B-B--24 B.B.B.B/24;
            }
            host-inbound-traffic {
                system-services {
                    all;
                }
                protocols {
                    all;
                }
            }
            interfaces {
                fe-0/0/7.0;
            }
        }
    }
}
</code></pre>

<p>Cisco ASA config:</p>

<pre><code>ASA Version 9.0(2) 
!
interface GigabitEthernet0/0
 nameif comcastpublic
  ip address Y.Y.Y.Y 
!
object network VPNPC
 host Z.Z.Z.Z
 description VPN PC S2S
object network REMOTE
 subnet B.B.B.B 255.255.255.0

access-list comcastpublic_access_in extended permit object SSH object VPNPC object REMOTE 

access-list comcastpublic_cryptomap_3 extended permit tcp object VPNPC object REMOTE eq ssh 

nat (private,comcastpublic) source static VPNPC VPNPC destination static REMOTE REMOTE no-proxy-arp route-lookup
nat (comcastpublic,private) source static any any destination static 
!
nat (private,comcastpublic) after-auto source dynamic any interface dns
access-group comcastpublic_access_in in interface comcastpublic

crypto ipsec ikev1 transform-set ESP-3DES-SHA esp-3des esp-sha-hmac 
crypto ipsec ikev1 transform-set ESP-3DES-SHA-TRANS esp-3des esp-sha-hmac 

crypto ipsec ikev2 ipsec-proposal 3DES
 protocol esp encryption 3des
 protocol esp integrity sha-1 md5

crypto ipsec security-association pmtu-aging infinite

crypto map comcastpublic_map 4 match address comcastpublic_cryptomap_3
crypto map comcastpublic_map 4 set peer A.A.A.A 
crypto map comcastpublic_map 4 set ikev1 transform-set ESP-3DES-SHA
crypto map comcastpublic_map 4 set ikev2 ipsec-proposal 3DES
crypto map comcastpublic_map 4 set security-association lifetime seconds 86400
crypto map comcastpublic_map 4 set security-association lifetime kilobytes 28800
crypto map comcastpublic_map 65535 ipsec-isakmp dynamic SYSTEM_DEFAULT_CRYPTO_MAP
crypto map comcastpublic_map interface comcastpublic

crypto ikev2 policy 2
 encryption 3des
 integrity sha
 group 2
 prf sha
 lifetime seconds 28800
crypto ikev2 policy 30
 encryption 3des
 integrity sha
 group 5 2
 prf sha
 lifetime seconds 86400

crypto ikev2 enable comcastpublic
crypto ikev1 enable comcastpublic

crypto ikev1 policy 1
 authentication pre-share
 encryption 3des
 hash sha
 group 2
 lifetime 28800
crypto ikev1 policy 8
 authentication pre-share
 encryption 3des
 hash sha
 group 2
 lifetime 3600
crypto ikev1 policy 100
 authentication crack
 encryption 3des
 hash sha
 group 2
 lifetime 86400
crypto ikev1 policy 110
 authentication rsa-sig
 encryption 3des
 hash sha
 group 2
 lifetime 86400
crypto ikev1 policy 120
 authentication pre-share
 encryption 3des
 hash sha
 group 2
 lifetime 86400

!
group-policy GroupPolicy_A.A.A.A internal
group-policy GroupPolicy_A.A.A.A attributes
 vpn-tunnel-protocol ikev1 ikev2 


tunnel-group A.A.A.A type ipsec-l2l
tunnel-group A.A.A.A general-attributes
 default-group-policy GroupPolicy_A.A.A.A
tunnel-group A.A.A.A ipsec-attributes
 ikev1 pre-shared-key *****
 ikev2 remote-authentication pre-shared-key *****
 ikev2 local-authentication pre-shared-key *****
</code></pre>

<p>Cisco log:</p>

<pre><code>Aug 05 05:19:23 [IKEv1]Group = A.A.A.A, IP = A.A.A.A, Received local Proxy Host data in ID Payload:  Address Z.Z.Z.Z, Protocol 6, Port 22
Aug 05 05:19:23 [IKEv1]Group = A.A.A.A, IP = A.A.A.A, QM IsRekeyed old sa not found by addr
Aug 05 05:19:23 [IKEv1]Group = A.A.A.A, IP = A.A.A.A, Static Crypto Map check, checking map = comcastpublic_map, seq = 1...
Aug 05 05:19:23 [IKEv1]Group = A.A.A.A, IP = A.A.A.A, Static Crypto Map check, map = comcastpublic_map, seq = 1, ACL does not match proxy IDs src:B.B.B.B dst:Z.Z.Z.Z
Aug 05 05:19:23 [IKEv1]Group = A.A.A.A, IP = A.A.A.A, Static Crypto Map check, checking map = comcastpublic_map, seq = 2...
Aug 05 05:19:23 [IKEv1]Group = A.A.A.A, IP = A.A.A.A, Static Crypto Map check, map = comcastpublic_map, seq = 2, ACL does not match proxy IDs src:B.B.B.B dst:Z.Z.Z.Z
Aug 05 05:19:23 [IKEv1]Group = A.A.A.A, IP = A.A.A.A, Static Crypto Map check, checking map = comcastpublic_map, seq = 3...
Aug 05 05:19:23 [IKEv1]Group = A.A.A.A, IP = A.A.A.A, Static Crypto Map check, map = comcastpublic_map, seq = 3, ACL does not match proxy IDs src:B.B.B.B dst:Z.Z.Z.Z
Aug 05 05:19:23 [IKEv1]Group = A.A.A.A, IP = A.A.A.A, Static Crypto Map check, checking map = comcastpublic_map, seq = 4...
Aug 05 05:19:23 [IKEv1]Group = A.A.A.A, IP = A.A.A.A, Static Crypto Map check, map = comcastpublic_map, seq = 4, ACL does not match proxy IDs src:B.B.B.B dst:Z.Z.Z.Z
Aug 05 05:19:23 [IKEv1]Group = A.A.A.A, IP = A.A.A.A, Static Crypto Map check, checking map = comcastpublic_map, seq = 5...
Aug 05 05:19:23 [IKEv1]Group = A.A.A.A, IP = A.A.A.A, Static Crypto Map check, map = comcastpublic_map, seq = 5, ACL does not match proxy IDs src:B.B.B.B dst:Z.Z.Z.Z
Aug 05 05:19:23 [IKEv1]Group = A.A.A.A, IP = A.A.A.A, Skipping dynamic map SYSTEM_DEFAULT_CRYPTO_MAP sequence 65535: cannot match peerless map when peer found in previous map entry.
Aug 05 05:19:23 [IKEv1]Group = A.A.A.A, IP = A.A.A.A, Rejecting IPSec tunnel: no matching crypto map entry for remote proxy B.B.B.B/255.255.255.0/6/0 local proxy Z.Z.Z.Z/255.255.255.255/6/22 on interface comcastpublic
Aug 05 05:19:23 [IKEv1 DEBUG]Group = A.A.A.A, IP = A.A.A.A, sending notify message
Aug 05 05:19:23 [IKEv1 DEBUG]Group = A.A.A.A, IP = A.A.A.A, constructing blank hash payload
Aug 05 05:19:23 [IKEv1 DEBUG]Group = A.A.A.A, IP = A.A.A.A, constructing qm hash payload
Aug 05 05:19:23 [IKEv1]IP = A.A.A.A, IKE_DECODE SENDING Message (msgid=d07c313e) with payloads : HDR + HASH (8) + NOTIFY (11) + NONE (0) total length : 216
Aug 05 05:19:23 [IKEv1]Group = A.A.A.A, IP = A.A.A.A, QM FSM error (P2 struct &amp;0x00007fffa28c2920, mess id 0x5ef38480)!
Aug 05 05:19:23 [IKEv1 DEBUG]Group = A.A.A.A, IP = A.A.A.A, IKE QM Responder FSM error history (struct &amp;0x00007fffa28c2920)  &lt;state&gt;, &lt;event&gt;:  QM_DONE, EV_ERROR--&gt;QM_BLD_MSG2, EV_NEGO_SA--&gt;QM_BLD_MSG2, EV_IS_REKEY--&gt;QM_BLD_MSG2, EV_CONFIRM_SA--&gt;QM_BLD_MSG2, EV_PROC_MSG--&gt;QM_BLD_MSG2, EV_HASH_OK--&gt;QM_BLD_MSG2, NullEvent--&gt;QM_BLD_MSG2, EV_COMP_HASH
Aug 05 05:19:23 [IKEv1 DEBUG]Group = A.A.A.A, IP = A.A.A.A, sending delete/delete with reason message
Aug 05 05:19:23 [IKEv1]Group = A.A.A.A, IP = A.A.A.A, Removing peer from correlator table failed, no match!
Aug 05 05:19:23 [IKEv1 DEBUG]Group = A.A.A.A, IP = A.A.A.A, IKE SA MM:f4ec0f2f rcv'd Terminate: state MM_ACTIVE  flags 0x00010042, refcnt 1, tuncnt 0
Aug 05 05:19:23 [IKEv1 DEBUG]Group = A.A.A.A, IP = A.A.A.A, IKE SA MM:f4ec0f2f terminating:  flags 0x01010002, refcnt 0, tuncnt 0
Aug 05 05:19:23 [IKEv1 DEBUG]Group = A.A.A.A, IP = A.A.A.A, sending delete/delete with reason message
</code></pre>

<p>Could anybody help with this problem?</p>
","<p>ASA crypto map ACLs do not support protocol traffic matching (yeah, I know). The crypto map ACL should match on network, and then either use the global <code>no sysopt connection permit-vpn</code> to apply the interface ACL to tunneled traffic (not recommended) or use a vpn-filter in your tunnel group policy to restrict traffic by protocol.</p>

<p>Even if the ASA did allow the protocol-based crypto ACL, your ACL as written does not match the packets being received. Your ACL matches the remote proxy on port 22, and the logs indicate the local proxy is port 22.</p>
","2751"
"What does TCP DUP ACK mean?","14583","","<p>In Wireshark, I see <code>TCP duplicate ACK</code> packets sent from the receiver to the sender. What does it mean? Does it imply packet loss?</p>

<p>Thank you</p>
","<p>There can be several things going on - the most common would be the use of <a href=""https://en.wikipedia.org/wiki/TCP_congestion_control#Fast_retransmit"" rel=""nofollow noreferrer"">TCP Fast Retransmission</a> which is a mechanism by which a receiver can indicate that it has seen a gap in the received sequence numbers that implies the loss of one or more packets in transit.  The repeated acknowledgements at the last known value before the gap signal which packets the sender should retransmit.  This can occur without waiting for the acknowledgement timeout for the lost packet to hit on the transmitter - which, as the name implies, means recovering a lot faster.</p>

<p>It's also possible that the same symptom of gaps in sequence numbers might be seen in a situation where packets are being delivered out of order.  As above, if the receiver sees (for example) a segment with sequence #5 followed by another with #7 before seeing sequence #6 then it might try to begin to trigger a fast retransmit.  Upon seeing #6 arrive, though, it would stop sending the duplicate acknowledgements.</p>

<p>A less common cause would be certain media problems where certain packets might end  up being seen more than once.  If this is the case, however, you're likely to see other problems on the link (...including other packets showing as dupes in Wireshark).  </p>

<p>So - if you're seeing a few random duplicate ACK's but no (or few) actual retransmissions then it's likely packets arriving out of order.  If you're seeing a lot more duplicate ACK's followed by actual retransmission then some amount of packet loss is taking place.  Both situations are, unfortunately, entirely possible on the global Internet.  If you're seeing other kinds of duplicate packets as CRC issues and generally slow performance then it might make sense to look at link issues on your own network.</p>
","38474"
"How are multiple SSID's handled on same access point?","14531","","<p>In case of multiple SSID's on some AP, how is the information forwarded?</p>

<p>I mean, the simplest AP's have just one wireless interface so its basically receiving trough one antenna and send it trough the same antenna which does not make much sense to me since in this case they end up beeing in the same collision domain.</p>
","<p>The SSID is only part of the information used between an AP and a station, and many software clients will aggregate or simplify the networks they find into one entry in the wireless networks.  However with most enterprise wireless solutions, each AP will have a separate BSSID (looks like a MAC address) that is associated with a logical interface on the physical interface.</p>

<p>With some software clients (Intel used to do this, but I haven't used it in a while so not sure if they still do), you will see each unique AP/BSSID listed in the wireless network list, so you end up with multiple entries with the same SSID.  You can also use a software tool like <a href=""http://www.metageek.net/products/inssider/"">InSSIDer</a> to view the individual devices broadcasting the same SSID.</p>

<p>You are correct in that they share the same ""collision domain"" and resources, however there are many reasons to do so.  For instance, you may want to provide different security mechanisms such as WPA2-Enterprise for your employees and an ""Open"" network with a captive portal for guests.</p>

<p>You could do this with two different sets of APs, each doing one or the other.  However in the 2.4GHz space, you really only have three channels to work with in your channel plan, so unless you only need one AP for each, you are going to have channel overlap and still be sharing the ""collision domain"" (and this also complicates the channel planning significantly, but that's another discussion).  Better to do so with multiple logical interfaces on one device as this means less devices, a lower cost (both capital and operational), and a simpler network to manage.</p>

<p>Now there is a caveat, and that is with each additional BSSID/SSID on a physical device, the more you do lower the efficiency of the RF use, mainly because you are creating additional management traffic in the air.  While dated, you can find a good explanation on this effect in <a href=""http://www.arubanetworks.com/pdf/technology/whitepapers/wp_Virtual-Access-Points.pdf"">this document</a>, if you are interested.</p>
","2675"
"MTU and Fragmentation","14525","","<p>Consider the following: NAS with 10G interface connected to 10G interface on switch. Client computers connected to switch via gigabit Ethernet. </p>

<ul>
<li><p>Will there be any gain in performance if MTU size is increased on NAS and switch port to which NAS is connected if the MTU size is not increased from the standard 1500 bytes on the client NICs?</p></li>
<li><p>Will this cause fragmentation problems?</p></li>
<li><p>How do devices ""handle"" mismatches in MTU for interfaces across a switched network?</p></li>
</ul>
","<p>No performance gain will exist without everyone using larger packets. The point of jumbo frames is to pack more payload with the same overhead.  The NAS's ability to send larger packets is meaningless if the clients don't as well.</p>

<p>There will be no ""fragmentation"" at all. Layer-2 (ethernet) has no means if indicating ""fragmentation needed"".  This is figured out at Layer-3 (IP) by routers sending an ICMP message when it has to drop the packet because it won't fit on the next-hop interface.  This cannot happen where there's no router -- on a flat, switched LAN.  The jumbo packets sent from the NAS will be dropped by the client as an oversized frame -- or dropped by the switch for the same reason. [A 9k packet cannot be sent on a 1500B interface.]</p>
","3525"
"What is the meaning / origin of the terms north-south and east-west traffic?","14516","","<p>In context of networking I keep running into statements such as ""east-west traffic is larger than north-south traffic"". I have tried a bit of googling but have not been able to locate an authoritative answer to understand the origin of these terms.</p>

<ul>
<li>What is the definition of north-south traffic?</li>
<li>What is the definition of east-west traffic? </li>
<li>What is the origin of these terms? </li>
</ul>
","<p>The terms are usually used in the context of data centers.</p>

<p>Generally speaking, ""east-west"" traffic refers to traffic within a data center -- i.e. server to server traffic.  ""North-south"" traffic is client to server traffic, between the data center and the rest of the network (anything outside the data center).</p>

<p>I believe the terms have come into use from the way network diagrams are typically drawn, with servers or access switches spread out horizontally, and external connections at the top or bottom.</p>
","18877"
"Cisco IPSEC VPN fail Stage 2","14416","","<p>The HUB is managed at a data center with external IP 200.200.200.200.
There are 10 remote offices.</p>

<pre><code>Office 9                                    HUB
10.1.9.0 - 100.100.100.100 -&gt;&gt;  VPN   &lt;&lt;- 200.200.200.200 - 10.1.1.0
</code></pre>

<p>In office 9 only,
after upgrading from ADSL to EFM and replaced Cisco 887 with Cisco 1812 (both running IOS 12.4).
Copied the config, replaced internet connection details.</p>

<p>Not sure if relevant, but there is also a router in bridge mode the EFM provider installed the 1812 connects through.</p>

<p>Now the ISAKMP is connected</p>

<pre><code>MYCISCO#show crypto isakmp sa
IPv4 Crypto ISAKMP SA
dst              src              state          conn-id slot status
100.100.100.100  200.200.200.200  MM_NO_STATE       2262    0 ACTIVE (deleted)
</code></pre>

<p>But Phase 2 IPSEC SA will not come up. the logs produce errors:</p>

<ul>
<li>transform proposal not supported for identity</li>
<li>IPSec policy invalidated proposal with error 256</li>
<li>phase 2 SA policy not acceptable!</li>
</ul>

<p>From show log:</p>

<pre><code>*Apr  2 21:44:09.198: ISAKMP:(2125):Old State = IKE_QM_READY  New State = IKE_QM_READY
*Apr  2 21:44:12.246: ISAKMP (0:2125): received packet from 200.200.200.200 dport 500 sport 500 Global (I) QM_IDLE
*Apr  2 21:44:12.246: ISAKMP: set new node -505694825 to QM_IDLE
*Apr  2 21:44:12.246: crypto_engine: Decrypt IKE packet
*Apr  2 21:44:12.246: crypto_engine: Generate IKE hash
*Apr  2 21:44:12.246: ISAKMP:(2125): processing HASH payload. message ID = -505694825
*Apr  2 21:44:12.246: ISAKMP:(2125): processing SA payload. message ID = -505694825
*Apr  2 21:44:12.246: ISAKMP:(2125):Checking IPSec proposal 0
*Apr  2 21:44:12.246: ISAKMP: transform 0, ESP_AES
*Apr  2 21:44:12.246: ISAKMP:   attributes in transform:
*Apr  2 21:44:12.246: ISAKMP:      group is 5
*Apr  2 21:44:12.246: ISAKMP:      encaps is 1 (Tunnel)
*Apr  2 21:44:12.246: ISAKMP:      SA life type in seconds
*Apr  2 21:44:12.246: ISAKMP:      SA life duration (basic) of 28800
*Apr  2 21:44:12.246: ISAKMP:      authenticator is HMAC-SHA
*Apr  2 21:44:12.246: ISAKMP:      key length is 128
*Apr  2 21:44:12.246: CryptoEngine0: validate proposal
*Apr  2 21:44:12.246: ISAKMP:(2125):atts are acceptable.
*Apr  2 21:44:12.246: IPSEC(validate_proposal_request): proposal part #1
*Apr  2 21:44:12.246: IPSEC(validate_proposal_request): proposal part #1,
  (key eng. msg.) INBOUND local= 100.100.100.100, remote= 200.200.200.200,
    local_proxy= 10.1.9.0/255.255.255.0/0/0 (type=4),
    remote_proxy= 10.1.1.0/255.255.255.0/0/0 (type=4),
    protocol= ESP, transform= esp-aes esp-sha-hmac  (Tunnel),
    lifedur= 0s and 0kb,
    spi= 0x0(0), conn_id= 0, keysize= 128, flags= 0x0
*Apr  2 21:44:12.246: Crypto mapdb : proxy_match
        src addr     : 10.1.9.0
        dst addr     : 10.1.1.0
        protocol     : 0
        src port     : 0
        dst port     : 0
*Apr  2 21:44:12.246: IPSEC(crypto_ipsec_process_proposal): transform proposal not supported for identity:
    {esp-aes esp-sha-hmac }
*Apr  2 21:44:12.246: ISAKMP:(2125): IPSec policy invalidated proposal with error 256
*Apr  2 21:44:12.246: ISAKMP:(2125): phase 2 SA policy not acceptable! (local 100.100.100.100 remote 200.200.200.200)
</code></pre>

<p>My Configuration:</p>

<pre><code>!
version 12.4
no service pad
service timestamps debug datetime msec
service timestamps log datetime msec
no service password-encryption
!
hostname MYCISCO
!
boot-start-marker
boot-end-marker
!
logging buffered 4096 debugging
no logging console
enable secret 5 XXXXXXXXXXXXXXXXXXXXXXXXXX
!
aaa new-model
!
!
aaa authentication login userauthen local
aaa authorization network groupauthor local
!
aaa session-id common
!
resource policy
!
clock timezone AEST 10
clock summer-time BST recurring last Sun Mar 2:00 last Sun Oct 3:00
no ip source-route
no ip gratuitous-arps
!
!
ip cef
no ip dhcp use vrf connected
ip dhcp excluded-address 10.1.9.1 10.1.9.99
!
ip dhcp pool VLAN1
   import all
   network 10.1.9.0 255.255.255.0
   default-router 10.1.9.254
   domain-name MYDOMAIN.COM
   dns-server 8.8.8.8
!
!
ip tcp path-mtu-discovery
no ip bootp server
no ip domain lookup
ip domain name MYDOMAIN.COM
ip name-server 8.8.8.8
!
password encryption aes
crypto pki token default removal timeout 0
!
!
!
no spanning-tree vlan 1
no spanning-tree vlan 2
username ADMINUSERNAME password 0 ADMINPASSWORD
archive
 log config
  hidekeys
!
!
!
crypto isakmp policy 3
 encr aes
 authentication pre-share
 group 5
 lifetime 3600
crypto isakmp key PRESHAREDKEY address 200.200.200.200 no-xauth
!
!
crypto ipsec transform-set myset esp-des esp-md5-hmac
crypto ipsec transform-set myset1 esp-des esp-md5-hmac
crypto ipsec transform-set myset2 esp-3des esp-md5-hmac
crypto ipsec transform-set myset3 esp-aes 256
crypto ipsec transform-set myset4 esp-aes 256 esp-md5-hmac
crypto ipsec transform-set myset5 esp-3des esp-sha-hmac
mode transport
!
crypto dynamic-map dynmap 10
 set transform-set myset
 reverse-route
!
!
crypto map clientmap client authentication list userauthen
crypto map clientmap isakmp authorization list groupauthor
crypto map clientmap client configuration address respond
crypto map clientmap 1 ipsec-isakmp
 set peer 200.200.200.200
 set security-association lifetime seconds 28800
 set transform-set myset myset1 myset2 myset3 myset4 myset5
 match address 110
crypto map clientmap 10 ipsec-isakmp dynamic dynmap
!
bridge irb
!
!
!
interface FastEthernet0
 no ip address
 duplex auto
 speed auto
 pppoe enable group global
 pppoe-client dial-pool-number 1
 no shutdown
!
interface FastEthernet1
 no ip address
 shutdown
 duplex auto
 speed auto
!
interface BRI0
 no ip address
 encapsulation hdlc
 shutdown
!
interface FastEthernet2
!
interface FastEthernet3
!
interface FastEthernet4
!
interface FastEthernet5
!
interface FastEthernet6
!
interface FastEthernet7
!
interface FastEthernet8
!
interface FastEthernet9
!
interface Vlan1
 description Internal Network
 ip address 10.1.9.254 255.255.255.0
 ip verify unicast reverse-path
 no ip redirects
 no ip proxy-arp
 ip nat inside
 ip virtual-reassembly
 load-interval 30
!

 no ip redirects
 no ip unreachables
 no ip proxy-arp
 ip mtu 1492
 ip flow ingress
 ip nat outside
 ip virtual-reassembly in

interface Dialer0
no ip redirects
no ip unreachables
no ip proxy-arp

 ip address negotiated
 ip mtu 1492
 ip nat outside
 ip virtual-reassembly
 encapsulation ppp
 ip tcp adjust-mss 1452
 dialer pool 1
 ppp chap hostname CHAP@HOST.COM
 ppp chap password 0 CHAPPASSWORD
 ppp pap sent-username PAP@HOST.COM password 0 PAPPASSWORD
 ppp ipcp dns request accept
 crypto map clientmap
!

!
!
no ip http server
no ip http secure-server
ip nat inside source list 102 interface Dialer0 overload
ip route 0.0.0.0 0.0.0.0 Dialer0
!
access-list 1 remark IP Addresses Permitted to login via ssh and telnet
access-list 1 permit 200.200.200.200
access-list 1 permit 10.1.9.0 0.0.0.255
access-list 1 permit 10.1.1.0 0.0.0.255
access-list 1 deny   any
access-list 3 remark NTP Server addresses
access-list 3 permit X.X.X.X
access-list 4 remark Deny All
access-list 4 deny   any
access-list 102 remark NAT
access-list 102 deny   ip 10.1.9.0 0.0.0.255 10.1.1.0 0.0.0.255
access-list 102 permit ip 10.1.9.0 0.0.0.255 any

access-list 110 remark VPN 
access-list 110 permit ip 10.1.9.0 0.0.0.255 10.1.1.0 0.0.0.255
dialer-list 1 protocol ip permit
no cdp run
!
!
!
control-plane
!
!
line con 0
 password CONPASSWORD
line aux 0
 access-class 4 in
line vty 0 4
 access-class 1 in
 exec-timeout 500 0
 privilege level 3
 password VTYPASSWORD
 transport input telnet ssh
!
scheduler max-task-time 5000
scheduler interval 500
ntp access-group peer 3
ntp access-group serve 4
ntp master
ntp server X.X.X.X
!
webvpn context Default_context
 ssl authenticate verify all
 !
 no inservice
!
end
</code></pre>

<p>I'm suspecting the Access List settings, but again this is identical to 9 other offices, and  the network support team who are providing the HUB end have taken a look and the settings are all correct.</p>

<p>Thanks for your comments!</p>
","<p>Access lists aren't a problem here.</p>

<p>The output from show cypro isakmp sa tells you that the key negotiation is failing (MM_NO_STATE).  </p>

<p>The log entry says that the hub wants to use a transform set (esp-aes, esp-sha-hmac) that you don't support.  None of the transform sets on your router include esp-aes, esp-sha-hmac.</p>

<p>I suggest you add that to your list of transforms.  While you're at it, unless you really need the others (myset1-5), you might as well take them out.</p>

<p>Your new set will be:</p>

<pre><code>crypto ipsec transform-set mynewset esp-aes esp-sha-hmac
</code></pre>
","7179"
"Why does WLAN use Collision Avoidance and not Collison detection?","14403","","<p>I am searching for this answer for quite some time now. Why there is CSMA/CD in LAN but CSMA/CA in WLAN?</p>

<p>The best explanation I could find is ""due to extreme ratio in transmitting and receiving power, it is very impractical to transmit data on the same channel. Hence collision avoidance is used"". Couldn't get the meaning. Even if you're using two separate channels for transmit and receive, CSMA is used to decide which node will use channel, so no point in dropping CD in place of CA. So this explanation somehow doesn't seem fit.</p>

<p>The only reason I could think of is that if number of nodes are low, hence chances of collision is low, we should use CD, if chances of collision are high, we should use CA. But there isn't a difference of number of users between LAN and WLAN.<br>
If someone could please explain.</p>
","<p>In a wired CSMA/CD Ethernet environment, it is possible to detect a collision because there are separate TX and RX pairs (using the example of 10BaseT).  If a half-duplex 10BaseT NIC sends a frame on the TX pair, but sees that frame is corrupted on the RX pair, the NIC detected a collision.</p>

<p>However, with an 802.11 wireless device, there are no ""conductors,"" just antennas which do not simultaneously transmit and receive.  When an 802.11 device is transmitting it cannot in practical terms listen for another signal transmitting at the same time on the same frequency. The reason for this is that RF signal strength drops off very quickly when transmitting.</p>

<p>Even if we built an imaginary WiFi device that could simultaneously receive and transmit, it will only be able to hear a downstream collision if the other device is using a much higher output power (either raw power or through passive/active gain of some sort).  Normally its own TX signal will be too strong and ""drown"" out any other received signal.</p>

<p>So another process was required, resulting in the need for CSMA/CA.</p>
","10727"
"Site-to-Site VPN Tunnel Up Not Passing Traffic","14309","","<p>I have a site-to-site VPN that seems to be dropping traffic from a particular subnet when a lot of data is being pushed through the tunnel. I have to run <code>clear ipsec sa</code> to get it going again.</p>

<p>I notice the following when running <code>show crypto ipsec sa</code>. The SA timing remaining key lifetime reaches 0 for kB. When this happens the tunnel doesn't pass traffic. I don't understand why it doesn't rekey.</p>

<pre><code>inbound esp sas:
      spi: 0x51BB8CAE (1371245742)
         transform: esp-3des esp-sha-hmac no compression
         in use settings ={L2L, Tunnel, }
         slot: 0, conn_id: 65753088, crypto-map: OutsideCrypto_map
         sa timing: remaining key lifetime (kB/sec): (3796789/14690)
         IV size: 8 bytes
         replay detection support: Y
         Anti replay bitmap:
          0xFFFFFFFF 0xFFFFFFFF
    outbound esp sas:
      spi: 0x91CA1D71 (2445942129)
         transform: esp-3des esp-sha-hmac no compression
         in use settings ={L2L, Tunnel, }
         slot: 0, conn_id: 65753088, crypto-map: OutsideCrypto_map
         **sa timing: remaining key lifetime (kB/sec): (0/14678)**
         IV size: 8 bytes
         replay detection support: Y
         Anti replay bitmap:
          0x00000000 0x00000001
</code></pre>

<h2>UPDATE 7/1/2013</h2>

<p>I am running ASA 8.6.1. Researching Cisco's site I was able to find <a href=""http://tools.cisco.com/Support/BugToolKit/search/getBugDetails.do?method=fetchBugDetails&amp;bugId=CSCtq57752&amp;Submit=Search"">Bug CSCtq57752</a>. The details are</p>

<blockquote>
  <p>ASA: IPSec outbound SA data lifetime rekey fails Symptom:</p>
  
  <p>IPSec outbound SA fails to rekey when data lifetime reaches zero kB.</p>
  
  <p>Conditions:</p>
  
  <p>ASA has an IPSec tunnel with a remote peer. The data lifetime on the
  ASA reaches 0 kB, the lifetime in seconds has not yet expired. </p>
  
  <p>Workaround:</p>
  
  <p>Increase the data lifetime to a very high value (or even the maximum
  value), or decrease the lifetime in seconds. The lifetime in seconds
  should ideally expire before the data limit in kB reaches zero. In
  this manner the rekey will be triggered based on seconds, and the data
  lifetime issue can be bypassed.</p>
</blockquote>

<p>The solution is to update to version 8.6.1(5). I'm going to try and schedule a maintenance window tonight and see if the problem is resolved.</p>
","<p>The resolution to my problem is to upgrade my ASA image to 8.6.1(5).</p>

<p>This resolves bug <a href=""http://tools.cisco.com/Support/BugToolKit/search/getBugDetails.do?method=fetchBugDetails&amp;bugId=CSCtq57752&amp;Submit=Search"">CSCtq57752</a></p>

<p>The workaround to the bug is to lower the crypto map's timed lifetime and increase the crypto map's traffic volume threshold:</p>

<pre><code>crypto map *YOUR-CRYPTO-MAP ID* set security-association lifetime seconds 3600
crypto map *YOUR-CRYPTO-MAP ID* set security-association lifetime kilobytes 2147483647
</code></pre>

<p>The above crypto map lowers the lifetime to 3600 seconds and increases the kilobytes threshold to the highest value. In my case, I just have to ensure the seconds lifetime is depleted before the kilobytes threshold.</p>
","2287"
"Initial estimated round trip time in the RTT formula","14301","","<p>I was reading about Round Trip Time (RTT) and then I came across this formula</p>

<blockquote>
  <p>EstimatedRTT = 0.9 * PreviousEstimatedRTT + 0.1 * Sample RTT</p>
</blockquote>

<p>What is the value of <code>PreviousEstimatedRTT</code> when it is calculated for the very first time??Is it assumed to be 0 or any other value??</p>
","<p>According to <a href=""http://tools.ietf.org/html/rfc6298"" rel=""nofollow"">RFC 6928</a>, the SRTT is only calculated with the formula</p>

<blockquote>
  <p><code>SRTT &lt;- (1 - alpha) * SRTT + alpha * R'</code></p>
</blockquote>

<p>after two RTT measurements have been made. After the first measurement, SRTT is initilized to the value of this first measurement, ie. <code>SRTT &lt;- R'</code>.</p>

<p>You were close, according to the RFC alpha <code>SHOULD</code> be 1/8 (= 0.125).</p>

<p>Note, in RFC's, <code>SHOULD</code> means <em>""there may exist valid reasons in particular circumstances to ignore a particular item, but the full implications must be understood and carefully weighed before choosing a different course.""</em> (<a href=""http://tools.ietf.org/html/rfc2119"" rel=""nofollow"">RFC 2119</a>)</p>
","10590"
"What is the main purposes of ARP CACHE in the Switch?","14289","","<p>I know that when a PC send a packets to any remoter router then first of all it checks out the  Router MAC address which is connected with it, but it gets this MAC Address of Router from ARP Cache, but i don't know is ther the same process of the ARP Cache in the Switch?
please elaborate me</p>
","<p>Answering the original router question: Arp caches are there to map an IP addess to a mac address.  There's nothing unique about a router. .. it needs an ARP cache just like any other IP device.</p>

<p>Managed switches likewise need an Arp cache so they can communicate with the stations managing them.</p>

<p>As we discussed in <a href=""http://chat.stackexchange.com/rooms/11568/discussion-between-fahim-shah-and-mike-pennington"">chat</a>, you need to add an IP address to your switch so you can communicate via ARP.</p>

<pre><code>vlan 2
 name management_vlan
!
interface Vlan2
 ip address 192.0.2.20 255.255.255.0
 no shutdown
 no ip route-cache
!
ip default-gateway 192.0.2.254
</code></pre>

<hr>

<p>This isn't what you asked about, but if you need to see what mac addresses have been learned on a Cisco switch, use <code>show mac address-table</code>.</p>

<p>Keep in mind that mac learning and ARP are completely different processes on a layer 2 switch.  Mac learning is used for communication through the switch.  ARP is required for communication to the switch itself.</p>
","5024"
"How can I find what optic is in an interface for a Juniper MX-series router?","14123","","<p>As the title states, how can I see what optic I have installed in an interface for an MX router?</p>
","<p>You need to be looking under the <a href=""http://www.juniper.net/techpubs/en_US/junos12.1/topics/reference/command-summary/show-chassis-hardware.html"" rel=""nofollow""><code>show chassis hardware</code></a> stanza.  That gives you all the inner-workings of the devices plugged into the chassis, including VC members.</p>

<p>On an MX platform, this is along the lines of what you'd expect:</p>

<pre><code>user@host&gt; show chassis hardware
Hardware inventory:
Item             Version  Part number  Serial number     Description
Chassis                                E1372             MX10-T
Midplane         REV 01   711-038211   YF5285            MX10-T
PEM 0            Rev 04   740-028288   VB01678           AC Power Entry Module
Routing Engine            BUILTIN      BUILTIN           Routing Engine
TFEB 0                    BUILTIN      BUILTIN           Forwarding Engine Processor
  QXM 0          REV 05   711-028408   ZA9053            MPC QXM
FPC 0                     BUILTIN      BUILTIN           MPC BUILTIN
  MIC 0                   BUILTIN      BUILTIN           4x 10GE XFP
    PIC 0                 BUILTIN      BUILTIN           4x 10GE XFP
FPC 1                     BUILTIN      BUILTIN           MPC BUILTIN
  MIC 0          REV 24   750-028392   YX9436            3D 20x 1GE(LAN) SFP
    PIC 0                 BUILTIN      BUILTIN           10x 1GE(LAN) SFP
      Xcvr 0     REV 01   740-031851   AM1107SUFQW       SFP-SX
    PIC 1                 BUILTIN      BUILTIN           10x 1GE(LAN) SFP
Fan Tray                                                 Fan Tray
</code></pre>

<p><em><sup>Sample information derived from <a href=""http://www.juniper.net/techpubs/en_US/junos12.1/topics/reference/command-summary/show-chassis-hardware.html#jd0e1039"" rel=""nofollow"">Juniper TechLibrary</a></sup></em></p>

<p>Or perhaps you don't buy <em>everything</em> from Juniper and/or you live in a multi vendor environment (like me).  Your system will look eerily similar to this:</p>

<pre><code>FPC 0            REV 20   750-045402   LX0XXXXXXXXX      EX4550-32F
  CPU                     BUILTIN      BUILTIN           FPC CPU
  PIC 0                   BUILTIN      BUILTIN           32x 1G/10G SFP/SFP+
    Xcvr 0       REV 01   740-021309   ARS0HB7           SFP+-10G-LR
    Xcvr 1       REV 01   740-021309   ARS0HB2           SFP+-10G-LR
    Xcvr 12      c        NON-JNPR     FNS0838H4CB       SFP-LX10
    Xcvr 13               NON-JNPR     FNS0838H4AJ       SFP-LX10
    Xcvr 14      M        NON-JNPR     FNS0835T08U       SFP-LX10
    Xcvr 15               NON-JNPR     FNS0838H4B0       SFP-LX10
    Xcvr 16      U        NON-JNPR     FNS0835T0C2       SFP-LX10
</code></pre>

<p>Although this is on an EX4550, the transceivers marked <code>NON-JNPR</code> would show up the same on an MX platform.  It's not a malfunction, the system just doesn't recognize the device signatures.  If you want additional information on them, such as the vendor, fiber wavelength, or fiber type, use the <a href=""http://www.juniper.net/documentation/en_US/junos13.3/topics/reference/command-summary/show-chassis-pic.html"" rel=""nofollow""><code>show chassis pic fpc-slot &lt;FPC&gt; pic-slot &lt;PIC&gt;</code></a>.</p>

<pre><code>rj@MHN00525CN01&gt; show chassis pic fpc-slot 0 pic-slot 0
FPC slot 0, PIC slot 0 information:
  Type                             32x 1G/10G SFP/SFP+ Builtin
  State                            Online
  Uptime                         56 days, 6 hours, 5 minutes, 6 seconds

PIC port information:
                         Fiber                    Xcvr vendor       Wave-    Xcvr
  Port Cable type        type  Xcvr vendor        part number       length   Firmware
  0    10GBASE LR        SM    FINISAR CORP.      FTLX1471D3BCL-J1  1310 nm  0.0
  1    10GBASE LR        SM    FINISAR CORP.      FTLX1471D3BCL-J1  1310 nm  0.0
  12   GIGE 1000LX10     SM    CISCO-FINISAR      FTRJ-1319-7D-CSC  1310 nm  0.0
  13   GIGE 1000LX10     SM    CISCO-FINISAR      FTRJ-1319-7D-CSC  1310 nm  0.0
  14   GIGE 1000LX10     SM    CISCO-FINISAR      FTRJ-1319-7D-CSC  1310 nm  0.0
  15   GIGE 1000LX10     SM    CISCO-FINISAR      FTRJ-1319-7D-CSC  1310 nm  0.0
  16   GIGE 1000LX10     SM    CISCO-FINISAR      FTRJ-1319-7D-CSC  1310 nm  0.0
</code></pre>

<p>Most of the time, though, <code>show chassis hardware</code> will be more than sufficient. </p>
","14692"
"difference between latency and delay measurments","13996","","<p>In terms of links between two nodes on a network, what is the difference between latency and delay? They both seem to measure the amount of time from when a source transmits until the receiver receives. </p>
","<blockquote>
  <p>In terms of links between two nodes on a network, what is the difference between latency and delay?</p>
</blockquote>

<p><a href=""http://en.wikipedia.org/wiki/Latency_%28engineering%29#Packet-switched_networks"" rel=""nofollow"">Latency</a> could mean either:</p>

<ul>
<li>Round-trip time (RTT) between source and destination nodes.</li>
<li>Unidirectional delay from one node to another</li>
</ul>

<p>We <em>need more context</em> to know which meaning to use (either RTT, or unidirectional measurement).</p>

<p>Delay is often used interchangeably with latency; again we need more context.</p>

<p>When performing a ping, you are measuring Round Trip Time (RTT) which is roughly 2 x Delay, depending on paths taken. See <em><a href=""http://en.wikipedia.org/wiki/Network_delay"" rel=""nofollow"">Network Delay</a></em>.</p>

<p>When calculated the Bandwidth Delay Product (BPD) of a Long, Fat Network (LFN), the Delay here is defined as the <a href=""http://en.wikipedia.org/wiki/Round-trip_delay_time"" rel=""nofollow"">round-trip delay time</a>.</p>
","13355"
"Traceroute - every packet has TTL == 1","13967","","<p>I'm working on Wireshark lab-IP in <em>Computer networking - A top down approach</em> and I don't understand why every packet that normally expired has a TTL of 1. </p>

<p>Here is my Wireshark capture file.
<a href=""https://www.dropbox.com/s/rr5wgze9j20gzvu/traceroute-56.pcapng?dl=0"">https://www.dropbox.com/s/rr5wgze9j20gzvu/traceroute-56.pcapng?dl=0</a></p>

<p>I captured the execution of the <code>traceroute</code> program in Linux (with the option of 56 bytes), as executed with the following command:</p>

<pre><code>traceroute http://gaia.cs.umass.edu 56
</code></pre>

<p>You can see that most of the packet's TTL == 1 and I don't know why, since I learned that every subsequent hop has a TTL of +1 (or more).</p>

<p>P.S.:</p>

<ul>
<li>I'm using Lubuntu on VMware with bridged network to the host.</li>
<li>I captured it with wireshark on host machine (Windows)</li>
<li>I'm connected to a wireless AP using it's own DHCP server on top of NAT protocol</li>
</ul>
","<p>Let me <em>try</em> to answer this, because it's a little more complicated that it may look initially.</p>

<p>It seems that you already know the basic operation of <code>traceroute</code> but before anything else here is a very small recap: </p>

<p><code>traceroute</code> tries to determine all the in-between steps from your host to a destination host, or just the distance, i.e. number of hops, from your host to a destination host. To do that it starts sending packets to the destination host with a ""random"" destination port number and a TTL that starts from 1 and keeps increasing.<br> 
The idea is that each router in between decreases the TTL by 1. Thus, if TTL reaches 0 (in reality it never does since the router that is about to decrease it to 0 produces an error before that), the router will return an ICMP ""<strong>Time-to-live exceeded</strong>"" error message, e.g. <em>packet number 24</em> in your capture file. What you get from that is that your destination is further away and this is why you keep increasing the TTL. <br>
When your packet has a TTL that is big enough to reach the destination, you will get a different ICMP error message: ""<strong>Destination Unreachable (Port Unreachable)</strong>"", e.g. <em>packet number 208</em> in your capture file. What you get from that is that the last used TTL is indeed the number of hops between you and the destination node. The reason that you get an error is simply because you are sending a message to a ""random"" port that the destination node (hopefully) is not listening to.</p>

<p><strong>Now going into specifics for your capture file:<br></strong>
From the manual page of <code>traceroute</code> we can see that <strong>each TTL is used 3 times</strong> (option '-q') and the default protocol used is <strong>UDP</strong> (option '-P'). By examining the first 3 UDP packets, i.e. <em>packets 8-9-10</em>, we can see indeed that the <strong>TTL is 1</strong>. The next 3, i.e. <em>11-12-13</em>, have a <strong>TTL 2</strong> and so on. So from the source perspective everything seems to go fine.</p>

<p>Then, after some time dependent on the delay of the network, we start getting the anticipated error messages. Thus we can see that <em>packets 24-25-26</em> are ""<strong>Time to live exceeded</strong>"" error packets and thus meaning that the destination is further away. </p>

<p>This back-and-forth of attempts and errors continues, until, finally, <em>packet 208</em> and on you can see ""<strong>Port Unreachable</strong>"" error messages, meaning that your destination has been reached. </p>

<p>By counting the packets you send and the responses you can actually find out even from the trace which TTL actually worked but its a tedious task :)</p>

<p>Hope that helped</p>
","12507"
"What purpose is the Uplink port in layman's terms and do I need it?","13768","","<p>I have an old Linksys switch (EZXS55W) and it has worked fine for many years now, but I tried to hook something up today to the last open port and noticed the device didn't work when I did this. When I looked about my switch, it says that it disables that port when using the Uplink port.</p>

<p>I'm still a bit fuzzy on what the Uplink port does for me, I had always assumed that this Uplink port was for me to plug into from my router which is elsewhere in the house and hooked up to the modem so it could allow the switch to work for my other devices. I guess I need more than 5 ports now, but I see newer switches do not have this Uplink port generally anymore. Can I safely buy a new 8 port switch that does not have an Uplink port and maintain the exact same functionality? </p>

<p>If I understand what I'm reading correctly, newer switches did away with the need for a dedicated Uplink port so now the switches intelligently do whatever the Uplink did? I don't want to get further off from the accurate answer to this, so I just want to understand the technicality behind this so I'm not uninformed.</p>

<p>The one thing I guess I'm seeing from this though, if a switch is say an 8 port switch that means 1 port will be used to feed from the actual internet connection (whichever cable is providing it to the switch) and then the other 7 can be devices that need access to that shared network connection and by that virtue, the internet. It does not however, work like 5 port means it has 6 physical ports with one being the ""internet"" connection, and the other 5 being devices that need to be hooked up, correct? The latter is how I always thought it worked, but thinking this is incorrect now.</p>
","<p>An uplink port is a port on which Transmit and Receive are reversed.</p>

<p>They are used to connect together 2 switches with a standard straight-trough cable.
(otherwise it would require a cross cable where the transmit and receive are crossed in the cable rather than on the switch port)</p>

<p>Some switches came with 2 physical ports that were actually the same logical port , the first one being wired normally and the second wired ""crossed"". So you were able to use only one of the physical port a a time, depending if you connect a PC (or a router) or a switch.</p>

<p>Nowadays this generally doesn't matter anymore since most interfaces are ""auto-mdix"", meaning that the interface detect the type of device connected and cross transmit and receive internally if needed.</p>

<p>(and if the switch itself is not auto-mdix but the device you connect on it is , it also works).</p>
","22999"
"tcp.length and tcp.data wireshark filters","13704","","<p>I was playing with Wireshark and noticed two filters: <code>tcp.len</code> and <code>tcp.data</code>. What is the difference between the two? As far as I know, the <code>tcp.len</code> (length) field tells how many bytes of data travel within a segment, correct?</p>

<p>thanks in advance :)</p>
","<p>Simply put, <code>tcp.len</code> filters the length of TCP segment data in bytes, while <code>tcp.data</code> (or <code>tcp.segment_data</code> in newer versions of Wireshark) filters for the actual data (sequence of bytes) within the TCP segment data.</p>

<p><strong>Example:</strong></p>

<ul>
<li><code>tcp.len == 1</code>
<ul>
<li>Filters for TCP segment data that is exactly 1 byte in length 
<br>
<br></li>
</ul></li>
<li><code>tcp.segment_data contains 49:27:6d:20:64:61:74:61</code>
<ul>
<li>Filters for TCP segment data that contains the hexadecimal sequence of 49:27:6d:20:64:61:74:61</li>
</ul></li>
</ul>

<p><a href=""http://www.wireshark.org/docs/dfref/t/tcp.html"">Quick reference for TCP filters</a></p>
","7481"
"Preventing STP loops in etherchannels configurations","13600","","<p>What is the best practice when configuring etherchannel on Cisco switches to prevent a STP loop/broadcast storm when etherchannel is mis-configured?</p>

<p>I had an instance where 2 ports on a switch were configured with via trunk ports properly however the opposing switch was only had one port switch as a trunk, the 2nd as a regular access port. Upon a power-cycle, a broadcast storm took down the network and originated from these two switches.
<code>channel-group 1 mode on</code> was configured on all ports.</p>

<p>From my research
L2 etherchannel links should be configured with only</p>

<p><code>channel-group 1 mode desirable</code></p>

<p>L3 links can be configured w/ channel-group 1 mode on as STP isn't running over them.</p>

<p>Unfortunately in this scenario PVST+ was configured and bdpuguard was missing on all edge ports :(
Lastly, all switches here are Cisco - not a multi-vendor environment</p>
","<p>You should not be using ""on"" for link aggregation as it can lead to problems.  On the side with aggregation statically on, it will use the interfaces in the etherchannel, no matter what the configuration is on the other side.</p>

<p>While storm control (from comments) can be very helpful with some of the problems that result, it does not resolve all of them.  For instance if one of the remote side links is an access port on a different VLAN, all traffic that goes down that port will likely never reach its destination.  Depending on how constant the traffic and the load balancing across the etherchannel, this may result in a complete ""outage"" for some hosts.</p>

<p>I always recommend the use of LACP over PAgP, so instead of desirable/auto or on, use either active on both sides or active on one and passive on the other.  The reason for this is that LACP is standards based while PAgP is Cisco proprietary.</p>

<p>Of course this is in part dependent on the hardware platform, so check the appropriate documentation for your platform.</p>
","1391"
"How are IP addresses mapped to MAC addresses?","13563","","<p>I've been reading about the differences between MAC and IP addresses, and why we need both of them.</p>

<p>To summarize, MAC addresses are physical unchangeable unique IDs for every single device while IP addresses are assigned, changeable and virtual. To analogize, MAC addresses are like people who have permanent names, and IP addresses are where they currently live. </p>

<p>In the real world, we link addresses and names with the help of a phonebook. What mechanism links IP addresses to MAC addresses and where is this mechanism located in the network?</p>
","<p>The mechanism is called <a href=""http://en.wikipedia.org/wiki/Address_Resolution_Protocol"">Address Resolution Protocol (ARP)</a>.  Every ethernet IPv4 device ARPs to resolve ethernet mac addresses for target IPs.  IP to mac mappings are stored in each device's ARP table (the phone book in your analogy).</p>

<p>To simplify: In most cases, to resolve the MAC address associated with an IP address, you send a broadcast ARP packet (to all devices in the network), asking who has that IP address.   The device with that IP address replies to the ARP (with its MAC address).</p>
","9613"
"Directed and Limited Broadcast confusion","13421","","<p>Let's say I am on a network 192.168.1.X and I use the below ping commands.</p>

<ol>
<li>ping 255.255.255.255</li>
<li>ping 192.168.1.255</li>
</ol>

<p>Why we are calling 1st one as limited and 2nd one as directed ?</p>

<p>In what category does the below will come ?
ping 10.X.X.X </p>

<p>X is denoting the feasible value in an IP.</p>
","<p>The first one reaches the NICs in the network segment, routers don't forward it, so it's limited. The second will reach all the hosts in the network if it's allowed by a router, so it's directed.</p>

<p>If you're talking about pinging 10.255.255.255, it's directed.</p>
","2877"
"How should I diagnose why my Cisco ASA denies traffic?","13348","","<p>I have a Cisco ASA, which is denying traffic from 172.16.1.5 to 4.2.2.2 on tcp/9000</p>

<p>How can I diagnose why this is happening from the Cisco ASA CLI?</p>
","<p>The easiest way to figure out why your ASA drops traffic:</p>

<ul>
<li>If it's a routed ASA firewall, use <a href=""https://supportforums.cisco.com/document/29601/troubleshooting-access-problems-using-packet-tracer"" rel=""nofollow""><code>packet-tracer</code></a></li>
<li>Both routed and transparent ASA firewalls can use <a href=""http://www.cisco.com/c/en/us/support/docs/security/asa-5500-x-series-next-generation-firewalls/118097-configure-asa-00.html#anc13"" rel=""nofollow""><code>capture [NAME] asp-drop</code></a></li>
</ul>

<p><br></p>

<h2>Using <code>packet-tracer</code> (only on routed ASA firewalls):</h2>

<p>Routed firewalls give us the most information when we need to figure out why something was dropped; it's best to use <code>packet-tracer</code> to figure out why the routed firewall dropped something (although it won't catch every possible case).</p>

<p>I'm assuming 172.16.1.5's source port is 1024 for the purposes of getting a diagnosis...  The syntax is <code>packet-tracer input INSIDE tcp [SRC_HOST] [SRC_PORT] [DST_HOST] [DST_PORT]</code></p>

<pre><code>asa-fw# packet-tracer input INSIDE tcp 172.16.1.5 1024 4.2.2.2 9000

!!! output truncated

Phase: 4
Type: ACCESS-LIST
Subtype: log
Result: DROP                                            &lt;---- ASA Dropped the traffic
Config:
access-group INSIDE_in in interface INSIDE
access-list INSIDE_in extended deny ip any4 any4 log    &lt;---- This rule denied the traffic
Additional Information:

Result:
input-interface: INSIDE
input-status: up
input-line-status: up
output-interface: OUTSIDE
output-status: up
output-line-status: up
Action: drop
Drop-reason: (acl-drop) Flow is denied by configured rule   &lt;----

asa-fw#
</code></pre>

<hr>

<h2>Using <code>capture [NAME] asp-drop</code> (routed or transparent ASA firewalls):</h2>

<p>Transparent firewalls are trickier to diagnose, but you can still get some useful information with the <code>capture ... asp-drop</code> command.  The ASP is the ASA's ""Accelerated Security Path""; this is where many drops happen.  I have seen some dropped traffic that doesn't show in <code>asp-drop</code>, but usually that's because of an overwhelmed backplane in the ASA.</p>

<p>There are four steps...</p>

<ol>
<li>Configure a packet capture buffer on the ASA.  For tcp traffic, the syntax is <code>capture [CAPTURE_NAME] type asp-drop all buffer [BUFFER_SIZE] match tcp host [SRC_HOST] host [DST_HOST] eq [DST_PORT]</code></li>
<li>Wait for the denied traffic</li>
<li><code>show capture [NAME] trace</code> to understand why the traffic was denied.</li>
<li>Remove the capture with <code>no capture [CAPTURE_NAME]</code></li>
</ol>

<p>This is an example which shows traffic to 4.2.2.2 on tcp/9000 is denied by a configured firewall rule.</p>

<pre><code>asa-fw# capture DENY type asp-drop all buffer 500000 match tcp host 172.16.1.5 host 4.2.2.2 eq 9000


asa-fw# sh capture DENY trace

1 packet captured

   1: 06:13:43.434761       802.1Q vlan#200 P0 172.16.1.5.33489 &gt; 4.2.2.2.9000: S 
   884023774:884023774(0) win 14600 &lt;mss 1460,sackOK,timestamp 67442169 0,nop,wscale 7&gt; 
   Drop-reason: (acl-drop) Flow is denied by configured rule
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

1 packet shown
asa-fw# no capture DENY
</code></pre>

<p>When you finish, be sure to unconfigure the capture with <code>no capture DENY</code></p>
","17151"
"Window Size and ACK Number","13245","","<p>Copy-pasting from my lecturer's slides:</p>

<pre><code>• Receiver indicates the window size is 3000 
• Transfer goes ahead 
• Acknowledge every 3000 bytes 
• Receiver increases window size to 4000 
• 4000 bytes will be transferred before the next acknowledgement 
</code></pre>

<p>So from this I gather that the Window Size represent how many bytes the receiver will gather before sending an ACK.</p>

<p>But this isn't what I see in this Wireshark capture:</p>

<p><img src=""https://i.stack.imgur.com/SOdjD.png"" alt=""enter image description here""></p>

<p>As you can see in the screenshot (from a TCP file transfer), the server is ACKing every ~1400 bytes or so (looking at the ACK number), but at the same time is indicating a window size of 100'000+ bytes?</p>

<p>From what I understand from my lecturer's slides, the server should be ACKing every 100'000+ bytes? Why is he ACKing much more often than that?</p>
","<p>I teach TCP, and I often run into people who were mis-taught that the ACK is only sent when the Window Size is reached.  This is not true.  (To be really transparent, I too taught this incorrectly before I knew better as well, so I completely understand the mistake).</p>

<p>NOTE, I'll be using Receiver/Sender to describe it, but keep in mind TCP is bidirectional, and both parties maintain a Window Size.</p>

<p>The Window Size (that the Receiver sets) is a hard limit on how many bytes the Sender can send without being forced to stop to wait for an acknowledgement.</p>

<p>The Window Size <em>does not</em> determine how often the Receiver should be sending ACKnowledgements.  Originally, the <a href=""http://www.faqs.org/rfcs/rfc793.html"" rel=""noreferrer"">TCP protocol</a> called for an acknowledgement to be sent after each segment was received.  Later, <a href=""https://tools.ietf.org/html/rfc1122#section-4.2.3.2"" rel=""noreferrer"">TCP was optimized</a> to allow the Receiver to skip ACKs and send an ACKnowledgment every other packet (or more).</p>

<p>The goal of TCP then, is for the Sender to continually be sending packets, without delay or interruption, because it continually receives ACKnowledgements, such that the count of ""bytes in transit"" is always less than the Window Size.  If at any time, the Sender has sent a count of bytes equal to the window size without receiving an ACK, it is forced to pause sending and wait.</p>

<p>The important thing to consider in all this is the Round Trip Time.  Often, when you are studying TCP in a wireshark, you are only seeing the perspective of one party in the TCP conversation, which makes it hard to infer, or truly ""see"", the effect of the RTT. To illustrate the effect of RTT, take a look at these <em>two</em> captures.  They are both capturing the same conversation, a 2MB file download over HTTP, but one is from the <a href=""http://oca.racku.org/pcap/tcp-client.pcap"" rel=""noreferrer"">perspective of the Client</a>, and the other is from the <a href=""http://oca.racku.org/pcap/tcp-server.pcap"" rel=""noreferrer"">perspective of the Server</a>.</p>

<p><em>Note: its easier to analyse TCP if you turn <strong>off</strong> the Wireshark feature ""<a href=""http://oca.racku.org/pcap/tcp-subdissector.png"" rel=""noreferrer"">Allow subdissector to reassemble TCP streams</a>""</em></p>

<p>Notice from the Server side capture (who is the sender of the file), the Server sends 8 full sized packets in a row (packet#'s 6-13) before receiving the first ACK in packet# 14.  If you drill down in that ACK, notice the Client's acknowledgement is for the segment sent in Packet#7.  And the ACK the Client sent in packet 20 is from the segment sent in Packet#9.  </p>

<p>See how the Client is indeed acknowledging every other packet.  But it almost seems like it is acknowledging them ""late"".  But in fact, this is just the effect of Round Trip Time.  The Sender is able to send 7~ segments in the time it takes for the first segment to reach client and for the client's ACK to reach the server.  If you take a look at the capture from the Client's perspective, it looks very 'clean', which is to say that every second packet it receives, it sends out an ACK.</p>

<p>Notice also what happens at Packet# 23.  The Server has sent all it can, because the ""bytes in transit"" reaches the Window Size, so it is forced to stop sending.  Until the next ACK arrives.  Since the ACK's are coming in every other segment received.  Each ACK allows the sender to again send two new segments, before the Window is full again, and the Server is again forced to pause.  This happens up until Packet# 51, when the Client (Recever) increases the Window Size significantly, allowing the Server (sender) to start transmitting data uninhibited again... at least until Packet #175, when the new Window fills up.</p>
","12530"
"Filter the default route, but accept all other routes","13138","","<p>I have a BGP session where the other participant is advertising the default route in addition to a number of small prefixes.</p>

<p>I want to filter out the default, but accept those other prefixes.</p>

<p>I've tried to use:</p>

<p><code>ip prefix-list no-default-route  seq 5 deny 0.0.0.0/0</code></p>

<p>In combination with:</p>

<p><code>neighbor 10.4.1.1 prefix-list no-default-route in</code></p>

<p>But that ends up filtering all of the smaller prefix routes as well.</p>

<p>Is there a way I can filter out the default, but accept all other prefixes?</p>
","<p>You need to add a statement to explicitly allow those prefixes after denying the default-route, so the final prefix-list becomes:</p>

<pre><code>ip prefix-list no-default-route seq 5 deny 0.0.0.0/0
ip prefix-list no-default-route seq 10 permit 0.0.0.0/0 le 32
</code></pre>
","10887"
"Multiple sub-nets behind a router","13063","","<p>I have 3 simple questions:-</p>

<ol>
<li><p>Is is possible to have multiple subnets behind a router? I believe it is, e.g. router LAN interface would have subnet mask 255.255.0.0 and machines connecting to the router would have subnet mask 255.255.255.0.</p></li>
<li><p>Is there a usecase to have multiple subnets behind a router? I don't see any, unless anybody else can point out otherwise.</p></li>
<li><p>Is there a performance benefit of having multiple subnets behind a router? Again, i don't see any. One of the uses of a subnet is to separate traffic between different set of users. However, in this case all the traffic meant for multiple subnets is ending up on the same router.</p></li>
</ol>

<p>[ADDED]
I think there some confusion due to the wording i used. Thanks for all the answers but let me rephrase the questions.</p>

<ol>
<li><p>Is is possible to have computers belonging to multiple subnet's connected to one router?</p></li>
<li><p>Is there a usecase to have computers belonging to multiple subnet's connected to one router?</p></li>
<li><p>Is there a performance benefit to have computers belonging to multiple subnet's connected to one router?</p></li>
</ol>
","<p>1)  It is possible to have multiple subnets ""behind"" one router; the Internet would be a very broken place with millions more routers needed if it were not.</p>

<p>However, your example of using a /16 subnet mask on the LAN interface, with many /24's connecting to it, is not exactly how it would actually function.  (More on that in a moment.)</p>

<p>2)  There are many use cases.  This aggregation and routing of traffic for many networks/ subnets is the purpose of a router.</p>

<p>Take for a simple example, a branch office location with VoIP telephones.  At this site, there is a router connected via Dot1q trunking to a layer 2 access switch.</p>

<p>There is, of course, a need for separation of the Voice and Data traffic, which can be achieved by using separate VLANS on the access switches.  Each VLAN will have a separate subnet back on our router.  Each subnet would terminate on its own ""sub interface"", a logical partitioning of the physical connection to the access switches.</p>

<p>In this example, there are two subnets (one for data, and one for voice) living ""behind"" the router.</p>

<p>3)  The performance benefit is that you don't need a different physical device to handle the routing for every single subnet in your network. You talk about the traffic ending up on the same router, and it does, but the traffic is still separated unless you specifically allow it to move between the subnets.</p>
","3322"
"Can't ping other vlan on same stack switch","12945","","<p>I have to setup a stack of 3 Cisco 3850 switchs.  They are licences to IP Base feature. </p>

<p>I inspirated my setup from an another configuration we got here but those switches have the IP Services IOS. As my topic said, I'm unable to ping other vlan in the switch. </p>

<p>There's the scenario :</p>

<p>My stack will connect to a Cisco Switch that we don't manage. This switch provide us (via VPN MPLS) network we can use.</p>

<p>This switch (from ISP) have two ports (network) enable :</p>

<pre><code>Port 1 L3 : 10.140.68.1/22
Port 2 L3 : 192.168.69.33/27
</code></pre>

<p>My switch stack (LAN) configuration looks like this :</p>

<pre><code>ip routing

interface Vlan1
 no ip address
 shutdown

interface Vlan68
 ip address 10.140.68.2 255.255.255.0
 ip helper-address 10.140.68.4

interface Vlan69
 ip address 10.140.69.1 255.255.255.0
 ip helper-address 10.140.68.4

interface Vlan70
 ip address 10.140.70.1 255.255.255.0
 ip helper-address 10.140.68.4
 shutdown

interface Vlan71
 ip address 10.140.71.1 255.255.255.0
 ip helper-address 10.140.68.4
 shutdown

interface Vlan192
 ip address 192.168.69.33 255.255.255.224

router eigrp 100
 network 10.140.68.0 0.0.3.255
 network 192.168.69.32 0.0.0.31
 redistribute static
 passive-interface default
 eigrp stub connected summary

ip route 0.0.0.0 0.0.0.0 10.140.68.1

interface GigabitEthernet1/0/1
 description To MPLS SWITCH PORT 1
 switchport access vlan 68
interface GigabitEthernet1/0/2
 description To MPLS SWITCH PORT 2
 switchport access vlan 192
</code></pre>

<p>Someone can help me to configure the InterVlan routing and the I'm not sure if the 2 ports who'll be connected to the uplink switch is correct too.</p>

<p>I made ping test having a two laptops connected to the switch, 1 in vlan 68 and 1 in vlan 69.</p>

<p><strong>EDIT:</strong> (for a comment below that I can't format)</p>

<pre><code>Interface   IP-Address    OK?   Method  Status                  Protocol
Vlan1       172.16.100.1  YES   manual  administratively down   down
Vlan68      10.140.68.3   YES   manual  up                      up
Vlan69      10.140.69.1   YES   manual  up                      up
Vlan70      10.140.70.1   YES   NVRAM   administratively down   down
Vlan71      10.140.71.1   YES   NVRAM   administratively down   down
Vlan192     192.168.69.34 YES   manual  up                      up
</code></pre>

<p><strong>EDIT2:</strong><br>
Now I can ping all vlan from the switch (via the console connection). I can put a laptop in a port in the <code>Vlan68</code> and ping the switch (by all vlan ip address) same thing from a laptop in the <code>Vlan192</code>. BUT, if I put a laptop in a port of Vlan69 I can't ping the switch from any vlan IP even the <code>Vlan69</code> (69.1). When I do a <code>show arp</code> the laptop's mac and IP address don't show. I try with many laptop and samething everytime. </p>

<p><strong>Resolution</strong>
The problem came of the fact that some interface configuration about dhcp snooping and arp inspection prevents statics address ip. Adding a DHCP solve the problem. </p>
","<p>The problem came of the fact that some interface configuration about dhcp snooping and arp inspection prevents static address ip. Adding a DHCP solve the problem.</p>
","13292"
"Learned eBGP routes not distributed to iBGP neighbors","12818","","<p>I have (in GNS3) three Cisco 3640s running 12.4(23) connected in series (R1 -> R2 -> R3).
R1 and R2 are eBGP peers, R2 and R3 are iBGP peers.
R1 advertises network 192.168.1.0/24. R2 receives this route, but does not advertise it to R3.</p>

<p>Shouldn't routes learned from eBGP be advertised to iBGP? </p>

<p>Here's the full configuration as entered:</p>

<pre><code>loop0(R1)s0/0 &lt;--&gt; s0/0(R2)s0/1 &lt;--&gt; s0/1(R3)

R1:
configure terminal
interface s0/0
ip address 172.16.1.1 255.255.255.252
no shutdown
interface loopback0
ip address  192.168.1.1 255.255.255.0
router bgp 1
neighbor 172.16.1.2 remote-as 2
network 192.168.1.0 mask 255.255.255.0

R2:
configure terminal
interface s0/0
ip address 172.16.1.2 255.255.255.252
no shutdown
interface s0/1
ip address 172.16.1.5 255.255.255.252
no shutdown
router bgp 2
neighbor 172.16.1.1 remote-as 1
neighbor 172.16.1.6 remote-as 2

R3:
configure terminal
interface s0/1
ip address 172.16.1.6  255.255.255.252
no shutdown
router bgp 2
neighbor 172.16.1.5 remote-as 2
</code></pre>
","<p>Assuming you have no IGP configured (such as EIGRP / OSPF / ISIS / RIP), then the simplest explanation is that R3 hasn't got a route to 192.168.1.0/24's next-hop when the iBGP update arrives at R3.</p>

<pre><code>loop0(R1)s0/0 &lt;-----------&gt; s0/0(R2)s0/1 &lt;-------------&gt; s0/1(R3)
    AS 1                       AS 2                        AS 2

              ---------&gt;                  -----------&gt;
              Prefix: 192.168.1.0/24      Prefix: 192.168.1.0/24
              AS-path: 1                  AS-path: 1
              Next-hop: 172.16.1.1        Next-hop: 172.16.1.1
              *via eBGP*                  *via iBGP*
</code></pre>

<p>Since iBGP doesn't reset the next-hop when it receives the update from R1, 192.168.1.0/24's next-hop (172.16.1.1) has to be reachable (see <a href=""http://www.cisco.com/en/US/tech/tk365/technologies_tech_note09186a0080094431.shtml#background"">Why routers ignore BGP paths</a> for more details).</p>

<p>The most basic way to test this is to configure a static on R3:</p>

<pre><code>ip route 172.16.1.0 0.0.0.3 172.16.1.5 name BAD_HACK_FOR_IBGP
</code></pre>

<p>That's obviously the wrong solution, but it's a dead-simple test to illustrate why things are broken (keep in mind that you may need to wait a bit for the BGP next-hop scanner to run before 192.168.1.0/24's route is installed).</p>

<p>There are two possible solutions that come to mind, but only one really makes sense in most networks...</p>

<ul>
<li><strong>Best solution</strong>: Configure an IGP... pick any IGP you like, and advertise 172.16.1.0/30 throughout AS 2 in that IGP</li>
<li><em>Optional solution</em>: Configure the peering session between R2 and R3 to set <a href=""http://www.cisco.com/en/US/docs/ios/iproute_bgp/command/reference/irg_bgp3.html#wp1108213""><code>next-hop-self</code></a></li>
</ul>

<p>Next-hop reachability is one of the most basic issues when understanding BGP; almost everyone runs into this issue when they're experimenting with the protocol.</p>
","5750"
"Cisco: prevent vlan's of communicating with eachother on cisco router (ACL alternative)","12670","","<p>Setup: Cisco router with multiple VLAN's configured on it.</p>

<p>How can you prevent 2 VLAN's communicating with eachother? Normally I would do this with ACL's like this:</p>

<pre><code>access-list 102 deny ip 1.1.1.0 0.0.0.255 2.2.2.0 0.0.0.255
access-list 102 deny ip 2.2.2.0 0.0.0.255 1.1.1.0 0.0.0.255

int vlan 1
ip address 1.1.1.1 255.255.255.0
access-group 102 in

int vlan 2
ip address 2.2.2.2 255.255.255.0
access-group 102 in
</code></pre>

<p>This however is not handy when dealing with lot's of VLAN's configured on a router. Any suggestions of tweaking this or using an alternative to improve scalability?</p>
","<p>Fully agreed with Stefan. VRF is the way to go here. Quick example how to incorporate it to suggested config:</p>

<pre><code>ip vrf VLAN1
  rd 42:1
ip vrf VLAN2
  rd 42:2
!
int vlan1
  ip vrf forwarding VLAN1
  ip address 1.1.1.1 255.255.255.0
int vlan2
  ip vrf forwading VLAN2
  ip address 2.2.2.2 255.255.255.0
!
</code></pre>

<p>Now vlan1 and vlan2 routing is separated.</p>

<p>To inspect routing tables, ping, traceroute you need to specify the vrf. e.g.:</p>

<ul>
<li>ip route vrf VLAN1</li>
<li>traceroute vrf VLAN2 192.0.2.1</li>
<li>ping vrf VLAN2 192.0.2.1</li>
</ul>

<p>Or same in new AFI aware, IPv6 supporting config:</p>

<pre><code>vrf definition VLAN1
  rd 42:1
  address-family ipv4
vrf definition VLAN2
  rd 42:2
  address-family ipv4
!
int vlan1
  vrf definition VLAN1
  ip address 1.1.1.1 255.255.255.0
int vlan2
  vrf definition VLAN2
  ip address 2.2.2.2 255.255.255.0
!
</code></pre>
","895"
"Traffic Between INSIDE and DMZ Cisco ASA","12647","","<p>I need to be able to ping a DMZ host from an INSIDE host and visa versa. I have tried configuring a static nat as follows</p>

<pre><code>static (INSIDE,DMZ) 192.168.10.0 192.168.10.0 netmask 255.255.255.0
</code></pre>

<p>I created an access-list called EXEMPT which permits any any. I know this is not the most secure option but at this point I just need it to work.</p>

<p>Any help and insight into this would be amazing.</p>

<p>Here is the config of my device.</p>

<pre><code>!
interface Vlan1
 no nameif
 no security-level
 no ip address
!
interface Vlan3002
 nameif OUTSIDE
 security-level 0
 ip address 157.201.226.6 255.255.255.252 
!
interface Vlan3022
 nameif INSIDE
 security-level 50
 ip address 192.168.10.1 255.255.255.0 
!
interface Vlan3052
 nameif DMZ   
 security-level 50
 ip address 192.168.50.1 255.255.255.0 
!
interface Ethernet0/0
 shutdown
!
interface Ethernet0/1
 switchport access vlan 3022
!
interface Ethernet0/2
 shutdown
!
interface Ethernet0/3
 shutdown
!
interface Ethernet0/4
 shutdown
!
interface Ethernet0/5
 shutdown
!
interface Ethernet0/6
 shutdown
!             
interface Ethernet0/7
 switchport trunk allowed vlan 3002,3022,3052
 switchport mode trunk
!
ftp mode passive
dns domain-lookup OUTSIDE
dns domain-lookup INSIDE
dns domain-lookup DMZ
same-security-traffic permit intra-interface
access-list OUTSIDE_access_in extended permit ip any any 
access-list INSIDE extended permit ip any any 
access-list OUTSIDE extended permit tcp any any eq 3389 
access-list OUTSIDE extended permit udp any any eq 3389 
access-list OUTSIDE extended permit tcp any any eq www 
access-list OUTSIDE extended permit udp any any eq www 
access-list OUTSIDE extended permit tcp any any eq https 
access-list OUTSIDE extended permit udp any any eq 443 
access-list OUTSIDE extended permit tcp any any eq ssh 
access-list OUTSIDE extended permit udp any any eq 22 
access-list OUTSIDE extended permit tcp any any eq 1 
access-list OUTSIDE extended permit udp any any eq 1 
access-list OUTSIDE extended permit icmp any any 
access-list OUTSIDE extended permit tcp any any eq 50 
access-list OUTSIDE extended permit tcp any any eq 51 
access-list OUTSIDE extended permit udp any any eq isakmp 
access-list OUTSIDE extended permit tcp any any eq ftp 
access-list DMZ extended permit ip any any 
access-list INSIDE_access_in extended permit ip any any 
access-list from-dmz extended permit ip any any 
access-list DMZ_access_in extended permit ip any any 
access-list dmz-acl extended permit ip any any 
access-list EXEMPT extended permit ip any any 
access-list DMZ_nat0_outbound_1 extended permit ip any any 
pager lines 24
logging enable
logging asdm informational
mtu OUTSIDE 1500
mtu INSIDE 1500
mtu DMZ 1500
no failover
icmp unreachable rate-limit 1 burst-size 1
asdm image disk0:/asdm-647.bin
no asdm history enable
arp timeout 14400
global (OUTSIDE) 1 interface
nat (INSIDE) 1 0.0.0.0 0.0.0.0
static (DMZ,OUTSIDE) 157.201.226.72 192.168.50.2 netmask 255.255.255.255 
static (DMZ,OUTSIDE) 157.201.226.73 192.168.50.3 netmask 255.255.255.255 
static (DMZ,OUTSIDE) 157.201.226.75 192.168.50.5 netmask 255.255.255.255 
static (INSIDE,OUTSIDE) 157.201.226.74 192.168.10.74 netmask 255.255.255.255 
static (INSIDE,DMZ) 192.168.10.0 192.168.10.0 netmask 255.255.255.0 dns 
access-group OUTSIDE in interface OUTSIDE
access-group EXEMPT in interface INSIDE
access-group EXEMPT in interface DMZ
access-group EXEMPT out interface DMZ
route OUTSIDE 0.0.0.0 0.0.0.0 157.201.226.5 1
timeout xlate 3:00:00
timeout conn 1:00:00 half-closed 0:10:00 udp 0:02:00 icmp 0:00:02
timeout sunrpc 0:10:00 h323 0:05:00 h225 1:00:00 mgcp 0:05:00 mgcp-pat 0:05:00
timeout sip 0:30:00 sip_media 0:02:00 sip-invite 0:03:00 sip-disconnect 0:02:00
timeout sip-provisional-media 0:02:00 uauth 0:05:00 absolute
timeout tcp-proxy-reassembly 0:01:00
dynamic-access-policy-record DfltAccessPolicy
aaa-server Duo-Radius protocol radius
aaa-server Duo-Radius (DMZ) host 192.168.50.4
 timeout 20
 key cuddlypuppies
 authentication-port 1812
 accounting-port 1813
 no mschapv2-capable
aaa authentication ssh console LOCAL 
http server enable
http 0.0.0.0 0.0.0.0 OUTSIDE
snmp-server host DMZ 192.168.50.5 community public
no snmp-server location
no snmp-server contact
snmp-server community *****
snmp-server enable traps snmp authentication linkup linkdown coldstart
no sysopt connection permit-vpn
crypto ipsec transform-set ESP-3DES-MD5 esp-3des esp-md5-hmac 
crypto ipsec transform-set ESP-DES-MD5 esp-des esp-md5-hmac 
crypto ipsec transform-set ESP-3DES-SHA esp-3des esp-sha-hmac 
crypto ipsec transform-set ESP-AES-128-SHA esp-aes esp-sha-hmac 
crypto ipsec transform-set ESP-AES-192-SHA esp-aes-192 esp-sha-hmac 
crypto ipsec transform-set ESP-AES-128-MD5 esp-aes esp-md5-hmac 
crypto ipsec transform-set ESP-AES-192-MD5 esp-aes-192 esp-md5-hmac 
crypto ipsec transform-set ESP-AES-256-SHA esp-aes-256 esp-sha-hmac 
crypto ipsec transform-set ESP-AES-256-MD5 esp-aes-256 esp-md5-hmac 
crypto ipsec transform-set ESP-DES-SHA esp-des esp-sha-hmac 
crypto ipsec security-association lifetime seconds 28800
crypto ipsec security-association lifetime kilobytes 4608000
crypto dynamic-map SYSTEM_DEFAULT_CRYPTO_MAP 65535 set pfs group1
crypto dynamic-map SYSTEM_DEFAULT_CRYPTO_MAP 65535 set transform-set ESP-AES-128-SHA ESP-AES-128-MD5 ESP-AES-192-SHA ESP-AES-192-MD5 ESP-AES-256-SHA ESP-AES-256-MD5 ESP-3DES-SHA ESP-3DES-MD5 ESP-DES-SHA ESP-DES-MD5
crypto map OUTSIDE_map 65535 ipsec-isakmp dynamic SYSTEM_DEFAULT_CRYPTO_MAP
crypto map OUTSIDE_map interface OUTSIDE
crypto map INSIDE_map 65535 ipsec-isakmp dynamic SYSTEM_DEFAULT_CRYPTO_MAP
crypto map INSIDE_map interface INSIDE
crypto map DMZ_map 65535 ipsec-isakmp dynamic SYSTEM_DEFAULT_CRYPTO_MAP
crypto map DMZ_map interface DMZ
crypto isakmp enable OUTSIDE
crypto isakmp enable INSIDE
crypto isakmp enable DMZ
crypto isakmp policy 10
 authentication crack
 encryption aes-256
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 20
 authentication rsa-sig
 encryption aes-256
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 30
 authentication pre-share
 encryption aes-256
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 40
 authentication crack
 encryption aes-192
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 50
 authentication rsa-sig
 encryption aes-192
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 60
 authentication pre-share
 encryption aes-192
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 70
 authentication crack
 encryption aes
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 80
 authentication rsa-sig
 encryption aes
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 90
 authentication pre-share
 encryption aes
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 100
 authentication crack
 encryption 3des
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 110
 authentication rsa-sig
 encryption 3des
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 120
 authentication pre-share
 encryption 3des
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 130
 authentication crack
 encryption des
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 140
 authentication rsa-sig
 encryption des
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 150
 authentication pre-share
 encryption des
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 65535
 authentication pre-share
 encryption 3des
 hash sha
 group 2
 lifetime 86400
telnet timeout 5
ssh 0.0.0.0 0.255.255.255 OUTSIDE
ssh 10.0.0.0 255.0.0.0 OUTSIDE
ssh 0.0.0.0 0.0.0.0 OUTSIDE
ssh timeout 30
console timeout 0
threat-detection basic-threat
threat-detection statistics port
threat-detection statistics protocol
threat-detection statistics access-list
no threat-detection statistics tcp-intercept
tftp-server INSIDE 192.168.10.2 asdm-647.bin
webvpn
 anyconnect-essentials
group-policy DfltGrpPolicy attributes
 dns-server value 8.8.8.8
 vpn-tunnel-protocol IPSec l2tp-ipsec 
username team1 password 6cSlCtoGgNx3QZLp encrypted
tunnel-group DefaultRAGroup general-attributes
 authentication-server-group Duo-Radius
tunnel-group DefaultRAGroup ipsec-attributes
 pre-shared-key *
tunnel-group DefaultWEBVPNGroup general-attributes
 authentication-server-group Duo-Radius
 authentication-server-group (DMZ) Duo-Radius
 secondary-authentication-server-group Duo-Radius use-primary-username
 authorization-server-group Duo-Radius
 accounting-server-group Duo-Radius
tunnel-group DefaultWEBVPNGroup ipsec-attributes
 pre-shared-key *
!
!
prompt hostname context 
Cryptochecksum:15266ece8259e82ee10eca7f9e72a029
: end
</code></pre>
","<p>Try this </p>

<pre><code>access-list DMZ_nat0_outbound extended permit ip any 192.168.10.0 255.255.255.0 

nat (DMZ) 0 access-list DMZ_nat0_outbound
</code></pre>
","22427"
"STP Termination and grounding","12636","","<p>I have knowledge terminating CAT5 UTP but for an installation in a remote office the cable will be routed near a power source which we already know causes a substantial amount of 'noise' on standard telecoms cables.</p>

<p>We have purchased some CAT5e STP cable (screened) for this particular run, it will be running from the patch cabinet, past the power source (industrial equipment) and out of the building (a run of a few feet) to a 'porta cabin' (where the power feed also goes to).</p>

<p>As the same power source will be powering both ends of the installation I understand we won't have problems with earth differential.</p>

<p>As our 'porta cabin' only has 2 PC's we are not planning to put a patch cabinet in there, so my question is - if I terminate the STP cable to a socket and run a standard patch cable that side to a small switch (and then cables to the PC's) would I need some way to earth it?</p>

<p>The patch cabinet side would also be terminated to a socket (with patch cable going to main switch (with fibre link to our main office)). I have no STP RJ45 terminations (only standard UTP). </p>

<p>If I was to run an earth wire from the STP shield/screen to the patch cabinet would that be enough (cabinet grounded through equipment connected to a UPS)? I would also look to use ferrite chokes on the cable (to negate any outside RF interference it would pick up) if we found problems.</p>
","<h3>Reasons to use shielded cabling</h3>

<p>You asked about using <a href=""http://en.wikipedia.org/wiki/Shielded_cable#Signal_cables"" rel=""nofollow noreferrer"">shielded cabling</a> to protect ethernet from interference from heavy power currents.   We mentioned above that <a href=""http://en.wikipedia.org/wiki/Shielded_cable#Signal_cables"" rel=""nofollow noreferrer"">shielded cabling</a> isn't required in this case, but there are a few valid use cases for it:</p>

<ul>
<li>If you run cabling where there truly is a high potential for interference, such as ethernet cabling that runs near aircraft radar transmitters.</li>
<li>If you find that you're at the 100m distance limit for standard ethernet runs, it's not unheard of to squeeze a few more feet beyond the 100m limit of a Cat5e run by using shielded cabling.  That said, the 100m distance limit is there for more than just cross-talk and noise limits, but some people still get away with doing this.  It helps if you're in bind, but it's much better to lay out your IDFs correctly; you shouldn't do this intentionally.</li>
</ul>

<p>It obviously won't hurt to use <a href=""http://en.wikipedia.org/wiki/Shielded_cable#Signal_cables"" rel=""nofollow noreferrer"">shielded cabling</a> in your case, but it doesn't sound like you really need it.</p>

<h3>Grounding Shielded Cabling - one side, or both sides?</h3>

<blockquote>
  <p>As our 'porta cabin' only has 2 PC's we are not planning to put a patch cabinet in there, so my question is - if I terminate the STP cable to a socket and run a standard patch cable that side to a small switch (and then cables to the PC's) would I need some way to earth it?</p>
</blockquote>

<p>Terminating one side of <a href=""http://en.wikipedia.org/wiki/Shielded_cable#Signal_cables"" rel=""nofollow noreferrer"">shielded cabling</a> is sufficient and industry practice; I am assuming the <a href=""http://en.wikipedia.org/wiki/Shielded_cable#Signal_cables"" rel=""nofollow noreferrer"">shielded cabling</a> is terminated correctly.   Grounding shielded cabling is also discussed in <a href=""http://www.pennington.net/archives/cabling/BICSI_Mythbusting_Shielded_Cabling.pdf"" rel=""nofollow noreferrer"" title=""BICSI Mythbusting takes on Shielded cable, Herb Congdon and Brian Davis"">BICSI Mythbusting: Shielded cabling</a>, which I thought was a great presentation.  If you only ground one side, you're eliminating the possibility of <a href=""https://electronics.stackexchange.com/questions/26597/shielding-and-ground-loops"">ground loops</a> on the cabling itself.  Ground loops tend to form at power-cycle frequencies, <a href=""https://networkengineering.stackexchange.com/questions/6773/stp-termination-and-grounding#comment11030_6773"">which don't interfere with ethernet</a>; however, it's best to avoid <a href=""https://electronics.stackexchange.com/questions/26597/shielding-and-ground-loops"">ground loops</a> altogether.</p>

<h3>Terminating shielded cabling to a patch panel</h3>

<blockquote>
  <p>The patch cabinet side would also be terminated to a socket (with patch cable going to main switch (with fibre link to our main office)). I have no STP RJ45 terminations (only standard UTP).</p>
  
  <p>If I was to run an earth wire from the STP shield/screen to the patch cabinet would that be enough (cabinet grounded through equipment connected to a UPS)? I would also look to use ferrite chokes on the cable (to negate any outside RF interference it would pick up) if we found problems.</p>
</blockquote>

<p>This is a little unclear without a diagram, but let's cut to the essentials:</p>

<ul>
<li>Ground one side of your shielded cabling</li>
<li>If you terminate into a patch panel, use patch panels / modular inserts designed for shielded cabling because the mod plug (shown below) terminates to the shield inside the cable, and that all should be grounded.</li>
</ul>

<p><em>Shielded mod plug</em>:</p>

<p><img src=""https://i.stack.imgur.com/FCtVM.jpg"" alt=""Shielded mod plug""></p>

<h3>Avoiding <a href=""https://electronics.stackexchange.com/questions/26597/shielding-and-ground-loops"">ground loops</a></h3>

<blockquote>
  <p>As the same power source will be powering both ends of the installation I understand we won't have problems with earth differential.</p>
</blockquote>

<p>This isn't in the critical path of your main questions, but it's worthy of discussion.  Everything depends on whether the buildings are grounded individually, or whether the power cabling to your 'porta cabin' carries the ground conductor with the hot and neutral.  If the buildings indeed have different ground rods, you <em>could</em> see a difference in ground potential between the buildings.  Please see <a href=""http://www.pennington.net/archives/cabling/BICSI_Mythbusting_Shielded_Cabling.pdf"" rel=""nofollow noreferrer"" title=""BICSI Mythbusting takes on Shielded cable, Herb Congdon and Brian Davis"">BICSI Mythbusting: Shielded cabling</a>, which discusses why this shouldn't be a problem for your shielded twisted pair termination, but it's a point worth mentioning in case you run into other equipment grounding concerns; you should not intentionally form <a href=""https://electronics.stackexchange.com/questions/26597/shielding-and-ground-loops"">ground loops</a>, if possible.</p>
","6815"
"What is the NO PAYLOAD ENCRYPTION version of the IOS software?","12611","","<p>When looking at the downloads available on the Cisco site, they have a regular version of the file and a NO PAYLOAD ENCRYPTION version. What is the difference? And why would one choose one over the other?</p>
","<p>From the <a href=""http://www.cisco.com/en/US/prod/collateral/iosswrel/ps8802/ps5460/product_bulletin_c25-566278_ps10537_Products_Bulletin.html"" rel=""noreferrer"">Cisco website</a>:</p>

<blockquote>
  <p>Universal images with the universalk9_npe"" designation in the image name: The strong enforcement of encryption capabilities provided by Cisco Software Activation satisfies requirements for the export of encryption capabilities. However, some countries have import requirements that require that the platform does not support any strong crypto functionality such as payload cryptography. To satisfy the import requirements of those countries, the `npe' universal image does not support any strong payload encryption. This image supports security features like Zone-Based Firewall, Intrusion Prevention through SECNPE-K9 license.</p>
</blockquote>

<p>So you would use this image if you were in a country that has import restrictions on strong crypto.</p>
","947"
"Assign an IP address based on switch port","12485","","<p>Short:<br>
I want DHCP server to assign a preconfigured IP address based on a port (on a switch, ideally) a device is connected to.</p>

<p>Long:  </p>

<p>My situation:<br>
I am building an automated indoor farm (for growing tomatoes). The farm is composed of many (12 for now, but will grow to hundreds) identical 7""x7"" rooms. Each room will have an Ethernet port, and into this port an environment control system will be plugged in. Note that each room needs to be controlled individually.</p>

<p>Rooms are arranged in rows of 12, so I was thinking I will have a switch per row, and connect these switches to a router.</p>

<p>I could program each environmental controller with a static IP, so that I can associate a controller to a particular room on the server, but I think it would be easier if I could assign an IP address to each room, which would also make controllers interchangeable and hot swap-able with no need for manual configuration.</p>

<p>InB4: I am also considering using ZigBee network for this application, but I may need to transmit diagnostic images, and with hundreds of units ZigBee may be inadequate.</p>

<p><strong>Question:</strong> is it possible to assign a preconfigured IP address based on a port a device is connected to? What devices do I need for this?</p>
","<blockquote>
  <p>is it possible to assign a preconfigured IP address based on a port a device is connected to? What devices do I need for this?</p>
</blockquote>

<p>You can use a Cisco switch and an IOS that supports <a href=""http://www.cisco.com/en/US/docs/switches/lan/catalyst2960/software/release/12.2_55_se/configuration/guide/swdhcp82.html#wp1320905"">DHCP Server Port-Based Address Allocation</a> on your switch; you also must issue DHCP from your switch.  Assume that you have got <code>Fa0/1</code> and <code>Fa0/2</code> in Vlan120.</p>

<pre><code>ip dhcp use subscriber-id client-id
ip dhcp subscriber-id interface-name
ip dhcp excluded-address 192.0.2.1 192.0.2.10
!
ip dhcp pool VLAN120
   network 192.0.2.0 255.255.255.0
   default-router 192.0.2.1
   dns-server 192.0.2.5
   reserved-only
   address 192.0.2.101 client-id ""Fa0/1"" ascii
   address 192.0.2.102 client-id ""Fa0/2"" ascii
</code></pre>

<p>This configuration reserves addresses for fa0/1 and fa0/2.  The same address will always be assigned to those ports.</p>
","16063"
"Cannot get Cisco-ASA 5505 properly configured","12416","","<p>I have been at this for 2 days, been through countless forums and tutorials as far as configuring my ASA-5505.  I can't get out to the internet (even using ping from the ASA), I can't ""see"" the ASA on the network .. Basically it's a dead piece of hardware other than the Console.  My modem has been set to bridged mode as well.  This is the tutorial I followed: <a href=""http://www.firewall.cx/forum/10-firewall-filtering-idsips-a-security/32041-howto-basic-asa-5505-configuration.html"" rel=""nofollow"">HERE</a>..  Not sure where to go next ..  The ""outside"" vlan seems to be misconfigured, and I've tried so many permeations, that I am sure I am overlooking something major, and obvious.   When I am able to ping 8.8.8.8, from the ASA, I'll be happy! </p>

<p>Here are my Comcast settings:</p>

<pre><code>Gateway MAC Address           78:CD:8E:D9:FB:34
WAN MAC Address               78:CD:8E:D9:FB:37
WAN DHCP IP Address           50.135.170.116
WAN DHCP IPv6 Address         ::/64
WAN DHCP IPv6 DNS (primary)   ::
WAN DHCP IPv6 DNS (secondary) ::
WAN DHCP Subnet Mask          255.255.254.0
WAN DHCP Default Gateway      50.xx.xx.1
WAN Internet IP Address       74.xx.xx.230
DNS (primary)                 75.75.75.75
DNS (secondary)               75.75.76.76
DHCP Time Remaining           92h:42m:22s
Internal Gateway IP Address   10.1.10.1
Internal Subnet Mask          255.255.255.0
INTERNAL DHCP                 DISABLED
</code></pre>

<p>Here is my ASA configuration:</p>

<pre><code>ASA Version 8.2(5)
!
hostname DTS-ASA
enable password xxxxxxxxxxxxxx encrypted
passwd xxxxxxxxxxx encrypted
names
!
interface Ethernet0/0
 switchport access vlan 2
!
interface Ethernet0/1
!
interface Ethernet0/2
 shutdown
!
interface Ethernet0/3
 shutdown
!
interface Ethernet0/4
 shutdown
!
interface Ethernet0/5
 shutdown
!
interface Ethernet0/6
 shutdown
!
interface Ethernet0/7
 shutdown
!
interface Vlan1
 nameif inside
 security-level 100
 ip address 10.1.10.100 255.255.255.0
!
interface Vlan2
 nameif outside
 security-level 0
 ip address 74.xx.xx.230 255.255.255.248
!
ftp mode passive
pager lines 24
mtu inside 1500
mtu outside 1500
icmp unreachable rate-limit 1 burst-size 1
no asdm history enable
arp timeout 14400
global (outside) 10 interface
nat (inside) 10 10.1.10.0 255.255.255.0
route outside 0.0.0.0 0.0.0.0 74.xx.xx.230 1
timeout xlate 3:00:00
timeout conn 1:00:00 half-closed 0:10:00 udp 0:02:00 icmp 0:00:02
timeout sunrpc 0:10:00 h323 0:05:00 h225 1:00:00 mgcp 0:05:00 mgcp-pat 0:05:00
timeout sip 0:30:00 sip_media 0:02:00 sip-invite 0:03:00 sip-disconnect 0:02:00
timeout sip-provisional-media 0:02:00 uauth 0:05:00 absolute
timeout tcp-proxy-reassembly 0:01:00
timeout floating-conn 0:00:00
dynamic-access-policy-record DfltAccessPolicy
no snmp-server location
no snmp-server contact
snmp-server enable traps snmp authentication linkup linkdown coldstart
crypto ipsec security-association lifetime seconds 28800
crypto ipsec security-association lifetime kilobytes 4608000
telnet timeout 5
ssh timeout 5
console timeout 0

threat-detection basic-threat
threat-detection statistics access-list
no threat-detection statistics tcp-intercept
username cisco password ZBZ8GNEdrJsjFvsR encrypted privilege 15
!
class-map inspection_default
 match default-inspection-traffic
!
!
policy-map type inspect dns preset_dns_map
 parameters
  message-length maximum client auto
  message-length maximum 512
policy-map global_policy
 class inspection_default
  inspect dns preset_dns_map
  inspect ftp
  inspect h323 h225
  inspect h323 ras
  inspect ip-options
  inspect netbios
  inspect rsh
  inspect rtsp
  inspect skinny
  inspect esmtp
  inspect sqlnet
  inspect sunrpc
  inspect tftp
  inspect sip
  inspect xdmcp
!
 service-policy global_policy global
prompt hostname context
no call-home reporting anonymous
call-home
 profile CiscoTAC-1
  no active
  destination address http https://tools.cisco.com/its/service/oddce/services/DDCEService
  destination address email callhome@cisco.com
  destination transport-method http
  subscribe-to-alert-group diagnostic
  subscribe-to-alert-group environment
  subscribe-to-alert-group inventory periodic monthly
  subscribe-to-alert-group configuration periodic monthly
  subscribe-to-alert-group telemetry periodic daily
Cryptochecksum:86f051cb52af3d343c52cf1a222c6901
: end
</code></pre>

<p>Link I said, I am probably missing something critical and obvious, however having a development background networking is a somewhat foreign concept.</p>
","<blockquote>
  <p>The ""outside"" vlan seems to be misconfigured, and I've tried so many permeations, that I am sure I am overlooking something major, and obvious. When I am able to ping 8.8.8.8, from the ASA, I'll be happy! </p>
</blockquote>

<h2>Basic Config</h2>

<p>As others have mentioned, your configuration is ""suboptimal""... <strike>the biggest problem you have is that you're not using DHCP on the outside Vlan interface</strike> the biggest problem is that your default gw address is assigned to Vlan2... to recover, login to the console and...</p>

<ul>
<li><code>copy runn flash:foobar.cfg</code></li>
<li><code>config t</code></li>
<li><code>configure factory-default 10.1.10.100 255.255.255.0</code></li>
</ul>

<p>While you're in config mode, use this configuration...</p>

<pre><code>hostname DTS-ASA
password ChangeMeNow
enable password ChangeMeNow
!
interface Ethernet0/0
 switchport access vlan 2
!
interface Vlan2
 ! I don't think you need this, since it's an SMC MAC addr
 ! However, this illustrates how you can manually change the mac
 ! on your outside Vlan, if Comcast is restricting you
 ! to one mac (and now refuses to change it)
 ! mac-address 78cd.8ed9.fb37
 nameif outside
 security-level 0
 ip address 74.xx.xx.225 255.255.255.248
!
route outside 0.0.0.0 0.0.0.0 74.xx.xx.230
global (outside) 1 interface
nat (inside) 1 0.0.0.0 0.0.0.0
end
wr mem
</code></pre>

<p>Please change the password :-)... now you need fw rules, but that's a different issue</p>

<h2>WAN Validation</h2>

<p>Make sure you really do have the Comcast modem attached to Eth0/0...  After you're up and running, you should be able to check the address you got from Comcast like this...</p>

<pre><code>DTS-ASA# sh int vlan2
Interface Vlan2 ""outside"", is up, line protocol is up
  Hardware is EtherSVI, BW 100 Mbps, DLY 100 usec
        MAC address 0030.dead.beef, MTU 1500
        IP address 74.xx.xx.225, subnet mask 255.255.255.248     &lt;------------
  Traffic Statistics for ""outside"":
        108703406 packets input, 119199091796 bytes
        69134254 packets output, 8083775282 bytes
        1654709 packets dropped
      1 minute input rate 2 pkts/sec,  280 bytes/sec
      1 minute output rate 3 pkts/sec,  414 bytes/sec
      1 minute drop rate, 0 pkts/sec
      5 minute input rate 3 pkts/sec,  716 bytes/sec
      5 minute output rate 4 pkts/sec,  520 bytes/sec
      5 minute drop rate, 0 pkts/sec
DTS-ASA#
</code></pre>

<p>Then check your ping to google's DNS...</p>

<pre><code>DTS-ASA# ping 8.8.8.8
Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 8.8.8.8, timeout is 2 seconds:
!!!!!
Success rate is 100 percent (5/5), round-trip min/avg/max = 10/18/20 ms
DTS-ASA#
</code></pre>

<p>If not, be sure you can ping your default-gw...</p>

<pre><code>DTS-ASA# sh route

Codes: C - connected, S - static, I - IGRP, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
       E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP
       i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area
       * - candidate default, U - per-user static route, o - ODR
       P - periodic downloaded static route

Gateway of last resort is 74.xx.xx.230 to network 0.0.0.0

C    74.xx.xx.230 255.255.255.248 is directly connected, outside
C    10.1.10.0 255.255.255.0 is directly connected, inside
d*   0.0.0.0 0.0.0.0 [1/0] via 74.xx.xx.230, outside          &lt;------
DTS-ASA#
DTS-ASA# ping 74.xx.xx.230
</code></pre>
","3369"
"What's the difference between TPID of 0x88a8 or 0x8100","12392","","<p>I was reading over some JNCIS-SP documentation on provider bridging and it had this to say regarding the TPID field for QinQ: </p>

<blockquote>
  <p>IEEE 802.1ad has reserved a TPID of 0x88a8 for the S-TAG however
  the JUNOS operating system default behavior is to set the TPID equal
  to 0x8100.</p>
</blockquote>

<p>Wikipedia has the following listed for the notable protocols for these TPID values:</p>

<pre><code>0x8100  VLAN-tagged frame (IEEE 802.1Q) &amp; Shortest Path Bridging IEEE 802.1aq
0x88A8  Provider Bridging (IEEE 802.1ad) &amp; Shortest Path Bridging IEEE 802.1aq
</code></pre>

<p>What is the functional difference between these two TPID values? 
Why would Juniper use a different default TPID than the IEEE reserved TPID for the S-TAG?</p>
","<blockquote>
  <p>What is the functional difference between these two TPID values?</p>
</blockquote>

<p><strong>0x8100</strong></p>

<p>This TPID is used in <a href=""https://en.wikipedia.org/wiki/IEEE_802.1Q"" rel=""noreferrer"">802.1Q</a> - its your average, everyday VLAN tagging.  A common use for VLANs is for enterprises to organize their network into functional groups (like research, finance, or management).</p>

<p><strong>0x88a8</strong></p>

<p>This TPID is used in <a href=""https://en.wikipedia.org/wiki/IEEE_802.1ad"" rel=""noreferrer"">802.11ad</a> - its used for provider bridging (also known as QinQ, stacked VLANs, or double tagging).  </p>

<p>QinQ is used when a customer has to transport VLAN tagged traffic across a service provider network.  The service provider will have its own set of VLAN tags, perhaps a tag per customer.  So we have customer VLAN tags, and service provider VLAN tags, appropriately called C-TAGs and S-TAGs.</p>

<p>S-TAGs are correlated with the <em>0x88a8</em> TPID to signify the existence of the inner C-TAG which uses TPID <em>0x8100</em> (S-TAGs are inserted before C-TAGs).</p>

<blockquote>
  <p>Why would Juniper use a different default TPID than the IEEE reserved TPID for the S-TAG?</p>
</blockquote>

<p>They're not, here is a list of the common <a href=""https://en.wikipedia.org/wiki/EtherType#Examples"" rel=""noreferrer"">IEEE TPIDs</a>.</p>

<p>To be more specific, the default is 0x8100 because 802.1Q is used <strong>WAY</strong> more commonly than 802.1ad/Provider Bridging.  </p>

<p>To be even more specific to what I assume is a quote from the JNCIS documentation, is just really poor wording.  I believe it's saying that the default TPID is 0x8100 (to imply that 802.1q is default).</p>
","19289"
"Sonicwall NSA 2600 routing issues with multiple LAN interfaces configured","12388","","<p>We have a Sonicwall NSA 2400 that has been in service for some years now.  We've never had an issue with any routing until we ""upgraded"" to a new NSA 2600 device.  Below is a rough idea of the configuration:</p>

<p>NSA 2600 interfaces:<br>
x0 - LAN IP x.x.10.223  x1 - WAN ISP #1   x2 - WAN ISP #2    x3 - WAN ISP #3 and x4 - LAN IP y.y.16.10</p>

<p>x0 and x4 are plugged into an HP Procurve 2920-48G-PoE+ switch and the server is on another HP Procurve 2920-24G switch plugged directly into the other.</p>

<p>The main server we are seeing routing issues with is an IBM AS400 with multiple IPs configured through virtual interfaces on its NIC.  The IP addresses are on the LAN segments and are as follows:
x.x.10.4   x.x.10.6   y.y.16.22</p>

<p>This configuration was setup by a vendor for the AS400 and the y.y.16.0 subnet is for replication to be routed out of the x2 ISP #2 interface</p>

<p>The behavior we are seeing has stumped Dell/Sonicwall engineers and so I will describe it as best as I can here.</p>

<p>Upon plugging in all the interfaces, the ARP table starts filling up with the devices on the LAN segments.  y.y.16.22, x.x.10.4 and x.x.10.6 do not show up.  We have tried adding static ARP entries for them and the pings perform abnormally in that they will respond for a period of time then start dropping off one IP at a time.</p>

<p>Now if we leave the x4 (second LAN interface) unplugged then the x.x.10.4 and x.x.10.6 will appear in the ARP entries initially.  We have run packet captures and find that ping requests from the Sonicwall NSA 2600 are 'generated' then 'consumed' but sometimes not forwarded. </p>

<p>We have cleared the ARP cache on the AS400, this is the second NSA 2600 device as the first was RMA'ed after being factory reset 3 times and even testing the settings imported from the 2400.  We also tried setting the interface MAC addresses on the NSA 2600 to the same as the 2400.  Oh, and we started this ordeal with Dell Powerconnect switches and were told they were an issue (by Sonicwall) so we bought HPs :-)</p>

<p>Any thoughts, advice or even a direction to look into would be appreciated as we have beat our heads on keyboards for a while, and spent hours on the phone with Dell/Sonicwall ""support"".</p>

<p>Thanks.</p>

<p>EDIT for RON:</p>

<p>1) correct.  with static ARP entries it may ping for a few minutes then drop completely from the firewall but from other PCs on the network it still responds.  </p>

<p>2) on packet captures for the NSA 2400 (old device) the ping trace from the firewall to AS400 goes 1-packet Generated by source 2-packet Consumed (by firewall) 3-packet Forwarded to AS400  so in the packet capture on the 2600 it is not forwarding the packets on the NSA 2600.  </p>

<p>3) The AS400 has a single NIC with virtual interfaces configured so it is technically a single interface.  Other machines on the network can ping the AS400 directly on the x.x.10.0 network and I've added the y.y.16.0 network to a machine and the pings never drop to any of those addresses.  This issue seems to only be with the NSA 2600 device, which we've replaced...  </p>

<p>Thanks Ron.</p>

<p>EDIT # 2:
Packet captures show that ARP packets are going out but responses are not received when the x4 interface is plugged in.  If the x4 interface is unplugged, the ARP responses are received.  Same goes for unplugging the x0 interface for the x4 subnet. </p>

<p>EDIT # 3:
Found out the AS400 is using what is called a Proxy ARP configuration.  The physical NIC is used as a console for the system and also acts as a proxy for the virtual interfaces configured inside the AS400.  The proxy responds to all ARP requests with the physical MAC address and then handles routing internally to the virtual interfaces.  I've attached a drawing to clarify the setup <a href=""https://imgur.com/Hrr4b6c"" rel=""nofollow noreferrer"">HERE</a>  </p>

<p>Still no headway on what is causing this behavior.</p>
","<p>fter a long series of testing and support calls, Sonicwall produced a 'hotfixed' firmware that seems to fix this issue by adding a check box in the interface configuration to allow duplicate MAC addresses for devices that have multiple IP addresses on a single interface. So far this has proved to resolve the issue.</p>

<p>Hotfix # 142099</p>

<p>No word yet on if this will be released into the next production firmware but the tracking ID for this is the same as the hotfix # and should be referenced in release notes.</p>

<p>I had previously answered this but the answer was deleted...</p>
","6908"
"Access-Lists and VLAN and understanding traffic flow","12345","","<p>I have a question that I am having a very hard time wrapping my mind around, and I think you might be able to square me away.</p>

<p>When applying an access list to a VLAN interface (VLAN 32) in a L3 switch, for clients that are in VLAN 32 subnet, are they seen as coming into VLAN 32 on the way to being routed, or is the traffic coming out (exiting) the VLAN 32 interface?  What about traffic coming from another VLAN? </p>

<p>I am trying to sort this out for the purpose of deciding on applying an access list to ""in"" or ""out"" traffic against the VLAN 32 interface.</p>
","<p>This is often a confusing topic for users new to SVIs as it does seem to work a bit counter intuitively. Most people have a tendency to look at the SVI as some sort of ""gateway"" and that traffic leaving the VLAN should be outbound and vice versa.</p>

<p>However, it actually works in the opposite way because the SVI is a virtual router interface. It can help to think of the SVI as a physical interface on a physical router connected to the VLAN. From the perspective of this router, traffic arriving on the interface (the SVI) from the VLAN is inbound.  Traffic from the rest of the network to the VLAN would be going out (or outbound) from the perspective of this interface.</p>

<p>As an example, take for instance the following SVI:</p>

<pre><code>interface Vlan10
 ip address 10.1.1.1 255.255.255.0
 ip access-group VLAN10_IN in
 ip access-group VLAN10_OUT out
</code></pre>

<p>Now, let's say I want to prevent any traffic with spoofed IP addresses from leaving this VLAN. My access list may look like the below. Notice that while this traffic is outbound from the VLAN, it is inbound to the interface and as such is an inbound ACL.</p>

<pre><code>Sw6500#sh ip access-lists VLAN10_IN
Extended IP access list VLAN10_IN
    10 permit ip 10.1.1.0 0.0.0.255 any
    20 deny ip any any
</code></pre>

<p>If I want to limit access to this VLAN so that devices with 192.168.1.0/24 addresses are blocked but all other 192.168.0.0/16 addresses are allowed, the ACL would look something like this:</p>

<pre><code>Sw6500#sh ip access-lists VLAN10_OUT
Extended IP access list VLAN10_OUT
    10 deny ip 192.168.1.0 0.0.0.255 any
    20 permit ip 192.168.0.0 0.0.255.255 any
    30 deny ip any any
</code></pre>

<p><strong>Please Note</strong>: These are not a complete working access lists; they are meant only as examples. While they may work in certain environments, it may create problems if you try to use it.  For instance, it will not allow traffic such as DHCP if the DHCP server is on a different VLAN.</p>

<hr>

<p>One parting note, that may seem obvious but I have seen trip people up before. If the SVI has multiple subnets associated with it, you need to make sure your ACLs take this into account as traffic that passes between these subnets will be processed by the ACL even though it stays within the VLAN.</p>

<p>As long as you keep the concept that the SVI is an interface, this should be easy to accomplish.</p>
","19965"
"Timeouts for ASA VPN peers","12274","","<p>I have configured a remote site with two IP addresses for data centre VPN peers - one primary (1.1.1.1), one backup (2.2.2.2).  When the primary peer fails, the remote site detects the failure using DPD (after about 15 seconds).  It tears down the SAs, then proceeds to try to connect again to the primary peer! After about 30 seconds  of no response, it finally tries the backup peer and connects immediately.  Has anyone else seen this, and is there any way to avoid this needless 30 second wait?!</p>

<p>(Code version is 8.2(5), configs below)</p>

<p>REMOTE SITE FIREWALL:</p>

<pre><code>crypto ipsec transform-set L2L-VPN-TRANSFORM esp-3des esp-sha-hmac 
crypto ipsec security-association lifetime seconds 28800
crypto ipsec security-association lifetime kilobytes 4608000
!
tunnel-group 1.1.1.1 type ipsec-l2l
tunnel-group 1.1.1.1 general-attributes
 default-group-policy L2L-VPN-POLICY
tunnel-group 1.1.1.1 ipsec-attributes
 pre-shared-key *****
tunnel-group 2.2.2.2 type ipsec-l2l
tunnel-group 2.2.2.2 general-attributes
 default-group-policy L2L-VPN-POLICY
tunnel-group 2.2.2.2 ipsec-attributes
 pre-shared-key *****
!
crypto map OUTSIDE-MAP 1 match address ATOS-DC-ENCRYPTION-DOMAIN
crypto map OUTSIDE-MAP 1 set pfs 
crypto map OUTSIDE-MAP 1 set peer 1.1.1.1 2.2.2.2 
crypto map OUTSIDE-MAP 1 set transform-set L2L-VPN-TRANSFORM
crypto map OUTSIDE-MAP 1 set security-association lifetime seconds 3600
crypto map OUTSIDE-MAP 1 set security-association lifetime kilobytes 4608000
crypto map OUTSIDE-MAP interface OUTSIDE
crypto isakmp enable OUTSIDE
crypto isakmp policy 1
 authentication pre-share
 encryption 3des
 hash sha
 group 2
 lifetime 86400
</code></pre>

<hr>

<p>DC FIREWALLS (BOTH THE SAME):</p>

<pre><code>crypto ipsec transform-set L2L-VPN-TRANSFORM esp-3des esp-sha-hmac 
crypto ipsec security-association lifetime seconds 28800
crypto ipsec security-association lifetime kilobytes 4608000
!
tunnel-group DefaultL2LGroup general-attributes
 default-group-policy L2L-VPN-POLICY
tunnel-group DefaultL2LGroup ipsec-attributes
 pre-shared-key *****
!
crypto dynamic-map REMOTE-DYNMAP 1 set pfs 
crypto dynamic-map REMOTE-DYNMAP 1 set transform-set L2L-VPN-TRANSFORM
crypto dynamic-map REMOTE-DYNMAP 1 set security-association lifetime seconds 3600
crypto dynamic-map REMOTE-DYNMAP 1 set security-association lifetime kilobytes 4608000
crypto dynamic-map REMOTE-DYNMAP 1 set reverse-route
crypto map OUTSIDE-MAP 1 ipsec-isakmp dynamic REMOTE-DYNMAP
crypto map OUTSIDE-MAP interface OUTSIDE
crypto isakmp enable OUTSIDE
crypto isakmp policy 1
 authentication pre-share
 encryption 3des
 hash sha
 group 2
 lifetime 86400
</code></pre>

<hr>

<p>Logs showing the failure and the delay:</p>

<pre><code>Jun 18 2013 00:52:46: %ASA-5-111008: User 'enable_15' executed the 'clear logging buffer' command.
Jun 18 2013 00:54:37: %ASA-3-713123: Group = 1.1.1.1, IP = 1.1.1.1, IKE lost contact with remote peer, deleting connection (keepalive type: DPD)
Jun 18 2013 00:54:37: %ASA-5-713259: Group = 1.1.1.1, IP = 1.1.1.1, Session is being torn down. Reason: Lost Service
Jun 18 2013 00:54:37: %ASA-4-113019: Group = 1.1.1.1, Username = 1.1.1.1, IP = 1.1.1.1, Session disconnected. Session Type: IPsec, Duration: 0h:03m:00s, Bytes xmt: 480192, Bytes rcv: 478992, Reason: Lost Service
Jun 18 2013 00:54:37: %ASA-5-713041: IP = 1.1.1.1, IKE Initiator: New Phase 1, Intf OUTSIDE, IKE Peer 1.1.1.1  local Proxy Address 10.233.224.4, remote Proxy Address 1.1.1.1,  Crypto map (OUTSIDE-MAP)
Jun 18 2013 00:54:39: %ASA-3-713042: IKE Initiator unable to find policy: Intf INSIDE-TRANSIT, Src: 10.60.1.1, Dst: 10.250.1.1
Jun 18 2013 00:54:41: %ASA-3-713042: IKE Initiator unable to find policy: Intf INSIDE-TRANSIT, Src: 10.60.1.1, Dst: 10.250.1.1
Jun 18 2013 00:54:43: %ASA-3-713042: IKE Initiator unable to find policy: Intf INSIDE-TRANSIT, Src: 10.60.1.1, Dst: 10.250.1.1
Jun 18 2013 00:54:45: %ASA-3-713042: IKE Initiator unable to find policy: Intf INSIDE-TRANSIT, Src: 10.60.1.1, Dst: 10.250.1.1
Jun 18 2013 00:54:47: %ASA-3-713042: IKE Initiator unable to find policy: Intf INSIDE-TRANSIT, Src: 10.60.1.1, Dst: 10.250.1.1
Jun 18 2013 00:54:48: %ASA-3-713042: IKE Initiator unable to find policy: Intf INSIDE-TRANSIT, Src: 10.60.1.1, Dst: 10.250.1.1
Jun 18 2013 00:54:49: %ASA-3-713042: IKE Initiator unable to find policy: Intf INSIDE-TRANSIT, Src: 10.60.1.1, Dst: 10.250.1.1
Jun 18 2013 00:54:51: %ASA-3-713042: IKE Initiator unable to find policy: Intf INSIDE-TRANSIT, Src: 10.60.1.1, Dst: 10.250.1.1
Jun 18 2013 00:54:53: %ASA-3-713042: IKE Initiator unable to find policy: Intf INSIDE-TRANSIT, Src: 10.60.1.1, Dst: 10.250.1.1
Jun 18 2013 00:54:55: %ASA-3-713042: IKE Initiator unable to find policy: Intf INSIDE-TRANSIT, Src: 10.60.1.1, Dst: 10.250.1.1
Jun 18 2013 00:54:57: %ASA-3-713042: IKE Initiator unable to find policy: Intf INSIDE-TRANSIT, Src: 10.60.1.1, Dst: 10.250.1.1
Jun 18 2013 00:54:59: %ASA-3-713042: IKE Initiator unable to find policy: Intf INSIDE-TRANSIT, Src: 10.60.1.1, Dst: 10.250.1.1
Jun 18 2013 00:55:01: %ASA-3-713042: IKE Initiator unable to find policy: Intf INSIDE-TRANSIT, Src: 10.60.1.1, Dst: 10.250.1.1
Jun 18 2013 00:55:03: %ASA-3-713042: IKE Initiator unable to find policy: Intf INSIDE-TRANSIT, Src: 10.60.1.1, Dst: 10.250.1.1
Jun 18 2013 00:55:05: %ASA-3-713042: IKE Initiator unable to find policy: Intf INSIDE-TRANSIT, Src: 10.60.1.1, Dst: 10.250.1.1
Jun 18 2013 00:55:07: %ASA-3-713042: IKE Initiator unable to find policy: Intf INSIDE-TRANSIT, Src: 10.60.1.1, Dst: 10.250.1.1
Jun 18 2013 00:55:09: %ASA-5-713041: IP = 2.2.2.2, IKE Initiator: New Phase 1, Intf OUTSIDE, IKE Peer 2.2.2.2  local Proxy Address 10.233.224.4, remote Proxy Address 2.2.2.2,  Crypto map (OUTSIDE-MAP)
Jun 18 2013 00:55:09: %ASA-5-713119: Group = 2.2.2.2, IP = 2.2.2.2, PHASE 1 COMPLETED
Jun 18 2013 00:55:09: %ASA-5-713049: Group = 2.2.2.2, IP = 2.2.2.2, Security negotiation complete for LAN-to-LAN Group (2.2.2.2)  Initiator, Inbound SPI = 0xd21ad657, Outbound SPI = 0xd7d9c25a
Jun 18 2013 00:55:09: %ASA-5-713120: Group = 2.2.2.2, IP = 2.2.2.2, PHASE 2 COMPLETED (msgid=1949f878)
Jun 18 2013 00:55:09: %ASA-5-713041: Group = 2.2.2.2, IP = 2.2.2.2, IKE Initiator: New Phase 2, Intf INSIDE-TRANSIT, IKE Peer 2.2.2.2  local Proxy Address 10.60.0.0, remote Proxy Address 10.0.0.0,  Crypto map (OUTSIDE-MAP)
Jun 18 2013 00:55:09: %ASA-5-713049: Group = 2.2.2.2, IP = 2.2.2.2, Security negotiation complete for LAN-to-LAN Group (2.2.2.2)  Initiator, Inbound SPI = 0xd4218cd3, Outbound SPI = 0xf9a8108b
Jun 18 2013 00:55:09: %ASA-5-713120: Group = 2.2.2.2, IP = 2.2.2.2, PHASE 2 COMPLETED (msgid=c0a82858)
</code></pre>
","<p>The ASA does not have a mechanism to mark peers as up or down. When DPD detects a peer is no longer available, any SA with that peer is torn down. When ""interesting traffic"" requires a new SA, the ASA goes through its normal phase 1 process, which means starting with the first peer in your crypto map and if a connection cannot be established, trying the second.</p>

<p>The 30 seconds of delay is a timing issue while the ASA ""sorts things out"" so to speak. You have traffic triggering a new SA, while DPD is tearing down the existing SA to the same peer, which creates a bit of a race condition that eventually sorts out.</p>

<p>If faster failover is desired, it usually entails maintaining both tunnels simultaneously and using GRE and dynamic routing to move traffic when a tunnel fails. However, that would require using routers instead of ASAs, since ASAs do not support GRE, and have some shortcomings with dynamic routing. </p>
","1984"
"Juniper SRX: Where do I look to see IKE debug messages?","12183","","<p>Going through a JSEC book I noticed the following slide explains that there are 6 ike phase 1 messages that take place for a tunnel to establish.</p>

<p><img src=""https://i.stack.imgur.com/RZeKQ.jpg"" alt=""ike messages""></p>

<p>I am looking in the <code>kmd</code> log and <code>traceoptions</code> data but I do not see any information relating to the IKE messages pictured in those logs. Perhaps I am looking at it wrong? If my SRX is hanging up on one of those messages where would I look to determine that?</p>
","<p>Juniper KB explaining how to locate / interpret information in the  Kmd log : <a href=""http://kb.juniper.net/InfoCenter/index?page=content&amp;id=KB10097&amp;smlogin=true"">How do I Find the VPN Entry in the Kmd Log on a J-Series or SRX-Series device?</a></p>

<p>although for releases prior to 12 the following kmd log issues below are also relevant for the higher end firewalls.
<a href=""http://kb.juniper.net/InfoCenter/index?page=content&amp;id=KB25297"">[SRX High End] request security ike debug-enable does not print any useful kmd debug output</a></p>

<p><strong>its quite key which SRX and what software version you're using really.</strong></p>

<p>for reference only really , I use this method to troubleshoot a singe vpn tunnel without having to actually make any changes / commits </p>

<blockquote>
  <p>user@srx>request security ike debug-enable local  remote  level </p>
  
  <p>user@srx>show log /var/log/kmd</p>
  
  <p>user@srx>request security ike debug-disable</p>
</blockquote>

<p>Explained in detail here:
KB <a href=""http://kb.juniper.net/InfoCenter/index?page=content&amp;id=KB19943"">[SRX] How can I enable IKE traceoptions for only specific security associations</a></p>
","2204"
"Cisco 2960-X Discover SFP Modules Without Rebooting","12158","","<p>I have a pair of Cisco 2960-X's in a stack configuration using stack modules. This gives me a total of 4, 10 gbps SFP+ slots. I am using interfaces <code>Te1/0/1</code> and <code>Te2/0/1</code> as 10 gbps uplinks to the core and previously had <code>Te1/0/2</code> and <code>Te2/0/2</code> open.</p>

<p>Now I need to add a 1 gbps link coming off of one of these switches out to another device which only supports 1 gbps fiber SFP modules. I hooked up a 1 gbps SFP module to the <code>Te2/0/2</code> interface, however it continued to show the type as ""Not Present"". </p>

<p>After working at it for a bit I reloaded the switch to find that the list of interfaces had changed to now show a <code>Gi2/0/49</code> and <code>Gi2/0/50</code> while now missing <code>Te2/0/2</code>. (As a side note the <code>Gi2/0/49</code> interface shows ""Not Present"" while the <code>Te2/0/1</code> interface shows the 10 gbps SFP+ module). <code>Gi2/0/50</code> now shows the 1 gbps SFP and works correctly. </p>

<p>Is there any way for the switch to perform this detection process without having to reboot it? I may have to swap these around again in the near future and I would rather not cause downtime for the other systems that are plugged into that switch if it can be avoided.</p>
","<p>Maybe these bugs are affecting you:</p>

<ul>
<li>CSCuj74167 (Gigabyte link from WS-C2960X-48FPD-L not coming up when using GLC-SX-MM) applies to you. Fixed in software release 15.0(2)EX4.</li>
<li>CSCul88801 (1G or 10G in uplink ports of a Catalyst 2960x stack may not come up after a reload or OIR of SFP/SFP+. 1G or 10G SFP appear as “unknown” in the output of the show int status command.). Fixed in software release 15.0(2)EX5.</li>
</ul>

<p>So before looking any further, I'd upgrade to at least 15.0(2)EX5. (Which is the latest stable available for 2960X as of this writing).</p>
","10367"
"Cisco ISR G2 encrypted bandwidth restriction?","12117","","<p>I have been having complaints of a ""slow connection"" from several new remote sites.  </p>

<p>The sites are connected via an MPLS L3VPN service into Cisco 2921's, and we are using Cisco GET-VPN to encrypt the traffic between our locations.  All locations have either 100Mbps or 1Gbps circuits, so speed should not be an issue.</p>

<p>However, upon conducting iperf tests from one location to a known working location, I found that my bandwidth tops out around 85Mbps.</p>

<p>Further investigation on the 2921's gives many occurrences of the following error message in the logs:</p>

<pre><code>006555: Jan  3 08:19:09.573 EST: %CERM-4-TX_BW_LIMIT: Maximum Tx Bandwidth limit of 85000 Kbps reached for Crypto functionality with securityk9 technology package license.
006556: Jan  3 11:21:37.069 EST: %CERM-4-RX_BW_LIMIT: Maximum Rx Bandwidth limit of 85000 Kbps reached for Crypto functionality with securityk9 technology package license.
</code></pre>

<p>I have verified that our older locations using 2821's do not have this issue... is this something to do with IOS 15, the ISR Gen2's or both?</p>
","<p>You are running into one of the fun, new, restrictions of the ISR Generation 2.</p>

<p>I assume you have the basic ""security"" licensing package installed as noted by this part of the message:</p>

<pre><code>securityk9 technology package license
</code></pre>

<p>However the securityk9 package is Cisco's ""unrestricted export"" version of that license, and will artificially limit you.  You need the hseck9 package.  See <a href=""http://www.cisco.com/en/US/prod/collateral/routers/ps10616/white_paper_c11_556985.html#wp9001377"">this</a> white paper for more information.  It says in part:</p>

<blockquote>
  <p>The HSEC-K9 license removes the curtailment enforced by the U.S. government export restrictions on the encrypted tunnel count and encrypted throughput. HSEC-K9 is available only on the Cisco 2921, Cisco 2951, Cisco 3925, Cisco 3945, Cisco 3925E, and Cisco 3945E. </p>
  
  <p>With the HSEC-K9 license, the ISR G2 router can go over the curtailment limit of 225 tunnels maximum for IP Security (IPsec) and encrypted throughput of 85-Mbps unidirectional traffic in or out of the ISR G2 router, with a bidirectional total of 170 Mbps.</p>
  
  <p>The Cisco 1941, 2901, and 2911 already have maximum encryption capacities within export limits. The HSEC license requires the universalk9 image and the SEC license pre-installed.</p>
</blockquote>

<hr>

<p>A quick way to check which license you have, is to issue the following command on your router:</p>

<pre><code>show license feature
</code></pre>

<p>This will show you which licenses you have purchased from Cisco and installed on this router.  You need to make sure that the <strong>hseck9</strong> license is enabled.  Otherwise you will be limited to that 85Mbps limit for encrypted traffic.  Which on circuits below 100Mbps, might not be an issue, and you could safely ignore this problem.  Either way, see <a href=""http://www.cisco.com/en/US/docs/routers/access/sw_activation/SA_on_ISR.html#wp1145483"">this</a> page for more information on installing the new license once you purchase it.</p>

<hr>

<p>Another handy command for troubleshooting this is:</p>

<pre><code>show platform cerm-information
</code></pre>

<p>This will either spit out a list of information about the limits in place, including the failed encrypt/decrypt packet counts, or it will give you the following:</p>

<pre><code>router-1#show platform cerm-information 
Crypto Export Restrictions Manager(CERM) Information:
 CERM functionality: DISABLED
</code></pre>

<p>More information on this command <a href=""http://www.cisco.com/en/US/docs/routers/access/sw_activation/SA_on_ISR.html#wp1139605"">here</a>.</p>
","627"
"Cisco ISR 4431 Router GigabitEthernet Flow-control Disable","12038","","<p>I've got a new Cisco ISR 4431 Router running IOS XE 03.13.02.S and IOS 15.4(3)S2.
WAN connection is a Metro Ethernet circuit delivered over copper and <strong>ISP has requested that we force the port to 1Gbps Full-Duplex</strong>. Our internal network is all using default auto-negotiate gig port settings.</p>

<p>WAN Port config snippet:</p>

<pre><code>interface GigabitEthernet0/0/0
 description WAN Metro Ethernet Circuit
 ! ...
 speed 1000
 duplex full
 no negotiation auto
</code></pre>

<p>INSIDE Port config snippet:</p>

<pre><code>interface GigabitEthernet0/0/1
 description INSIDE Router Port
 ! ...
 negotiation auto
</code></pre>

<p>Strange thing is that with the force 1G Full <strong>WAN port, the interface appears to have flow-control (802.3x pause frames) enabled and I can't figure out a command to disable flow-control on the port</strong>. On my INSIDE (negotiation auto) port, flow-control is disabled which is what I've seen as the default ethernet port setting in other Cisco routers. See the following port status samples for details:</p>

<p>WAN Port status:</p>

<pre>
RTR# show int gig0/0/0
GigabitEthernet0/0/0 is up, line protocol is up
  Hardware is ISR4431-X-4x1GE, address is [...]
  [...]
  MTU 1500 bytes, BW 1000000 Kbit/sec, DLY 10 usec,
     reliability 255/255, txload 1/255, rxload 3/255
  Encapsulation ARPA, loopback not set
  Keepalive not supported
  <b>Full Duplex, 1000Mbps, link type is force-up, media type is RJ45</b>
  <b>output flow-control is on, input flow-control is on</b>
  ARP type: ARPA, ARP Timeout 00:05:00
  [...]
</pre>

<p>LAN Port status:</p>

<pre>
RTR#show int gig0/0/1
GigabitEthernet0/0/1 is up, line protocol is up
  Hardware is ISR4431-X-4x1GE, address is [...]
  [...]
  MTU 1500 bytes, BW 1000000 Kbit/sec, DLY 10 usec,
     reliability 255/255, txload 2/255, rxload 1/255
  Encapsulation ARPA, loopback not set
  Keepalive not supported
  <b>Full Duplex, 1000Mbps, link type is auto, media type is RJ45</b>
  <b>output flow-control is off, input flow-control is off</b>
  ARP type: ARPA, ARP Timeout 00:05:00
</pre>

<p>Note that ""flow-control is off"" for the auto-negotiate LAN port, but ""flow-control is on"" for the force-gig-full WAN port. Neither port has a command applied directly related to 802.3x ethernet flow control. In my attempts to google for a solution, I saw suggestions for a ""flowcontrol"" and ""negotiation forced"" IOS interface commands. Neither of these commands was available on the CLI of my 4431 router. Maybe they were for different Cisco hardware, interface type, or software release?</p>

<p>If you have any suggestions for how to disable this please share here. I can always leave it on, but if the ISP has it disabled on their end then I should match by disabling 802.3x pause frames on mine.</p>
","<p>I will start by saying that you should not be disabling auto-negotiation with Gigabit connections. This is what the standard has to say (from 802.3-2012 Section Three, which you can reference <a href=""https://standards.ieee.org/about/get/802/802.3.html"" rel=""nofollow"">here</a>):</p>

<blockquote>
  <p>37.1.4.4 User Configuration with Auto-Negotiation</p>
  
  <p>Rather than disabling Auto-Negotiation, the following behavior is suggested in
  order to improve interoperability with other Auto-Negotiation devices.
  When a device is configured for one specific mode of operation (e.g.
  1000BASE-X Full Duplex), it is recommended to continue using
  Auto-Negotiation but only advertise the specifically selected ability
  or abilities. This can be done by the Management agent only setting
  the bits in the advertisement registers that correspond to the
  selected abilities.</p>
</blockquote>

<p>This means you should never use <code>speed 1000</code> on Gigabit links. You could instead <code>speed auto 1000</code>, but your expressed need has a better solution.</p>

<p>The real problem is the following command on interface Gigabit0/0/0:</p>

<pre><code>  no negotiation auto
</code></pre>

<p>Remove the <code>speed 1000</code>, the <code>duplex full</code>, and the <code>no negotiation auto</code> commands from the interface and instead use <code>negotiation forced</code> so your interface looks like so:</p>

<pre><code> interface GigabitEthernet0/0/0
  description WAN Metro Ethernet Circuit
  ! ...
  negotiation forced
</code></pre>

<p>From Cisco documentation, the <code>forced</code> keyword has the following effect (and I believe also adheres to the standard's recommendation):</p>

<blockquote>
  <p>Disables flow control and configures the Gigabit Ethernet interface in 1000/full-duplex mode.</p>
</blockquote>

<p>This should meet your requirement of 1000/full with no flow control.</p>

<hr>

<p>In re-reading your question, I realized you noted you did not seem to have the force command available.</p>

<p>In your case, I will still recommend removing the <code>no negotiation auto</code> command and have your interface look like so:</p>

<pre><code> interface GigabitEthernet0/0/0
  description WAN Metro Ethernet Circuit
  ! ...
  speed auto 1000
  duplex full
</code></pre>
","20789"
"Why does OSPF need Type2 LSAs?","11993","","<p>Learning more about OSPF for CCNP studies.  I'm looking at how OSPF builds its links, and have just covered Type1 LSAs.  Looking at Type1 LSAs, I'm wondering why these are even necessary?  </p>

<p>The book I'm reading implies that Type2 LSAs are used to help the router build the 'puzzle' of the topology, as if just using Type1 LSAs it couldn't figure out all of the links in the topology.  It appears as if the Type1 LSA gives enough information for the router to be able to derive how two or even more routers are linked.  Maybe the book I'm reading has poor examples, but I can't see what OSPF gains from the Type2 LSAs and it's hard to understand how they work.</p>
","<p>It's important to note that type 2 LSA's are only generated on segments where a DR/BDR has been elected - this includes BMA (Broadcast Multi-Access) and NBMA (Non-Broadcast Multi-Access) networks. The DR is what generates the type 2 LSA. This behavior can be bypassed by configuring your Ethernet interfaces that you're choosing to run OSPF on as <code>point-to-point</code> (this will also prevent the DR election process).</p>

<p>Type 2 LSA's are beneficial when running OSPF over a Broadcast (Ethernet) or Non-Broadcast Multi-Access (Frame Relay) medium. Put simply, yes, the routers could use type 1 LSA's and detail every router's links to all other routers, but this is inefficient and will introduce unnecessary bloat into the OSPF LSDB. To mitigate this, the Type 2 (network) LSA is used to represent the broadcast subnet. Each router LSA then has a link to the broadcast subnet’s network LSA, and the network LSA has links to each of the router LSAs. It's a math problem - with every router using type 1 LSA's, you have <code>n * (n - 1)</code> links in the link state database. With type 2 LSA's, this number is reduced to <code>n * 2</code>.</p>

<p>I highly recommend reading <a href=""http://rads.stackoverflow.com/amzn/click/0201634724"" rel=""nofollow noreferrer"">John Moy's book on OSPF</a>. He also wrote the initial RFC's for the protocol.</p>

<p>Very well explained!</p>

<p>Maybe this graphic help visualize that.</p>

<p><a href=""https://i.stack.imgur.com/zesbp.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/zesbp.jpg"" alt=""LSA Flow according area tructure""></a>  </p>
","3783"
"What are FPC and Linecards?","11892","","<p>I am new to networking terms like this. Can somebody explain the difference between Linecards and FPCs? Are they the same or different? </p>

<p>I have been hearing these in multiple contexts and sometimes interchangeably. </p>
","<p>FPC's are similar to Linecards. When dealing with Juniper you will hear FPC more often. FPC's (Flexible PIC Concentrator) houses multiple PICs (Physical Interface Cards) which connect to the physical medium. Linecards are similar in that both FPCs and Linecards are inserted into a chassis device.</p>

<p>In Cisco, Linecards are just that. It's a card that's slotted into a chassis and provides a set of services to the chassis. For more info on FPCs, PICs, and Linecards see below:</p>

<p><a href=""http://www.juniper.net/techpubs/hardware/m40/m40-hwguide/html/overview-hardware6.html"" rel=""noreferrer"">FPC</a>, <a href=""http://www.juniper.net/techpubs/hardware/m40/m40-hwguide/html/overview-hardware5.html#1035509"" rel=""noreferrer"">PIC</a>, <a href=""http://cisconokia.com/c/en/us/products/interfaces-modules/line-cards/index.html"" rel=""noreferrer"">Cisco Line Cards</a></p>
","8129"
"Will duplicated MAC address give problems, if in different VLANs?","11863","","<p>A small company has 2 Cisco Catalyst 3550, with 24 ports each, connecting their equipaments.</p>

<p>After some trouble, we found that two NICs had the same MAC address. After the initial reaction of blaming who bought such NICs, etc., I began to wonder: if the NICs belong to separate VLANs, would it still cause problems?</p>

<p>Could I connect each NIC to a different VLAN and work ok (except in the future, if someone forget that and connect them to the same VLAN again) ?</p>
","<p>As long as the NICs are in completely different layer-2 broadcast domains, it shouldn't be a problem, but it is a headache waiting to happen when one of them is moved. If there are just two offending NICs, it's probably better to replace one.</p>
","2997"
"FortiGate HA (A/A) Cluster: How can I manage the slave unit from the web GUI?","11825","","<p>I am confused to what happened to the slave's IP address. Before I set both my units to Active/Active cluster, I could reach each of them with their own IP. Now, I can still reach the master unit with the same IP. However: I can no longer reach my slave unit on the IP I used to reach it on prior to setting up the Cluster. What happened to it?</p>

<p>Do they share the same IP now that they are in a cluster? If so: How can I manage each of them from the web interface?</p>

<p>If not: Is there any way I can find the other unit without scanning my entire network manually?</p>

<p>The specific units I'm operating are <code>FortiGate 60D</code></p>

<p><strong>EDIT:</strong>
From what I can tell: They do share the same IP. A lot of my results on Google comes up with the CLI command: <code>exec ha manage 1</code>. I appear to be in the slave unit when I run that command. So now when I try to retrieve the IP address using this command: <code>get system interface</code>: It gives me the same IP address as my master unit have on the internal interface. </p>

<p>Is there any way I can manage the slave interface from the HTML GUI?</p>

<p><em>I've been ""Googling"" around for the last 5 hours with no progress.</em></p>
","<p>Clustered Fortigate units become ONE unit in terms of L3 IP addresses, L2 MAC addresses, policies, objects etc. Only a few HA parameters along with the hostname are not mirrored from master to slave(s). The primary's IP addresses are used for the cluster; all slave addresses are overwritten. The real MAC addresses are hidden as well.</p>

<p>Active management of a slave unit is so uncommon that it's restricted to the CLI. Rebooting, shutting down, separating from the cluster come to my mind. To monitor CPU, memory and throughput you have GUI controls in System > Config > HA > HA statistics.  </p>

<p>There's an exception to every rule. On Fortigate models starting in midrange (100D and up) you often find 'management ports'. These are physical ports which you can dedicate to management only - they will not route. They are the only ports that can be in the same subnet as other ports on the Fortigate. You can connect to each cluster unit then via GUI.<br>
The Fortigate 60D does not have these special kind of ports.</p>
","28122"
"What is the difference between ""permit tcp any any eq telnet"" and ""permit tcp any eq telnet any""?","11754","","<p>I'm a CCNA student and during a LAB I found that for some rules on an incoming extended ACL using a rule like <code>permit tcp any any eq (protocol)</code> would work fine while on other rules I needed to use the format <code>permit tcp any eq (protocol) any</code>.</p>

<p>Just wondering what the difference is?</p>
","<pre><code>permit tcp any any eq &lt;protocol-port&gt;
</code></pre>

<p>Allows any traffic with a <em>destination</em> TCP port == protocol-port</p>

<pre><code>permit tcp any eq &lt;protocol-port&gt; any
</code></pre>

<p>Allows any traffic with a <em>source</em> TCP port == protocol-port</p>

<h2>Example</h2>

<p>ACLs tend to use fixed ports for the server-side of a client-server connection.  Typically, the client connects to a well-known port on a server; when you posted to Stack Exchange, your web-browser (client) connected to the Stack Exchange server on TCP port 80.</p>

<pre><code>            POS1/0        Gi0/0
              +-----------+
Internet -----|   Router  |----- Webserver (listening on TCP/80)
              +-----------+
</code></pre>

<p>So pretend Stack Exchange was applying these ACLs to the router above, they could use this inbound on their POS1/0 interface; because traffic <em>to</em> the Stack Exhange webserver would be going to TCP/80</p>

<pre><code>ip access-list extended WEB_in
 permit tcp any any eq 80
 deny ip any any log
</code></pre>

<p>They could apply this outbound on POS1/0, because traffic <em>leaving</em> the Stack Exhange webserver would be sourced from TCP/80</p>

<pre><code>ip access-list extended WEB_out
 permit tcp any eq 80 any
 deny ip any any log
</code></pre>

<p>In this example, keep in mind that applying an ACL to ""any eq 80"" isn't terribly useful; normally you would limit it to specific IP addresses that you want to expose TCP 80 to the internet.</p>
","2232"
"Can I run multiple networks on this MikroTik L3 switch?","11705","","<p>Just purchased the MikroTik ""Cloud Router Switch"" (CRS125-24G-15-2HnD-IN) with the possible misunderstanding that I could define multiple networks within the router and assign various switch ports to the various networks.  </p>

<p>The goal is to support a small multi-node OpenStack lab and I wanted to divide the 24 ports into 3 different networks.  I've never used RouterOS before and can't figure out how to do this in ""WebFig"".</p>

<p>Is this possible?  If so, how?</p>

<p>Thanks!</p>
","<p>Assuming you don't specifically need VLANs you'd pick one port to be the master port for each group and set it to be the master port for every other port in the group. Ports with the same master port are isolated from ports with a different master port. Then you set a IP address on the master port for routing (if necessary).</p>

<p>For example, if you assume three groups of three ports (2-4, 5-7, 8-10) you'd do the following (note that I'm using CLI terminology so if I write /interface ethernet set master-port=ether2 where name=ether3 and you are using webfig or winbox you'd click on interface, go to the ethernet tab, click on ether3, and change the master-port option):</p>

<pre><code>/interface ethernet set ether3 master-port=ether2
/interface ethernet set ether4 master-port=ether2
/interface ethernet set ether6 master-port=ether5 
/interface ethernet set ether7 master-port=ether5
/interface ethernet set ether8 master-port=ether8
/interface ethernet set ether9 master-port=ether8

/ip address add address=192.168.1.1/24 interface=ether2
/ip address add address=192.168.2.1/24 interface=ether5
/ip address add address=192.168.3.1/24 interface=ether8
</code></pre>

<p>Mikrotik's <a href=""http://wiki.mikrotik.com/wiki/Manual%3aCRS_examples"">CRS example page</a> has more examples along with a example if you need VLAN support.
If you need routing between switch groups or VLANs be aware that <a href=""http://i.mt.lv/routerboard/files/CRS125-131112144114.pdf"">per the block diagram</a> there is only a single 1G connection between the routing engine and the switch chip.</p>
","5807"
"Technical difference between a Collision and Broadcast Domain","11686","","<p>Many people new to networking wonder what the technical differences between a broadcast domain and a collision domain are.  Specifically:</p>

<ul>
<li>What criteria is used to know the boundaries of a collision domain?</li>
<li>Why does an ethernet switch break up a collision domain? </li>
<li>Are broadcast domains and collision domains mutually exclusive?</li>
</ul>
","<h3>Theory</h3>

<p>By convention, a <a href=""http://en.wikipedia.org/wiki/Collision_domain"" rel=""noreferrer"" title=""Collision Domain: a half-duplex network entity, which commonly uses CSMA/CD for access"">collision domain</a> is a contiguous wired and / or wireless <a href=""http://en.wikipedia.org/wiki/Duplex_%28telecommunications%29#Half-duplex"" rel=""noreferrer"">half-duplex</a> segment (typically using <a href=""http://en.wikipedia.org/wiki/Carrier_sense_multiple_access_with_collision_detection"" rel=""noreferrer"">CSMA/CD</a>), which is a subset of the <a href=""http://en.wikipedia.org/wiki/Subnetwork"" rel=""noreferrer"">subnet</a> or <a href=""http://en.wikipedia.org/wiki/Virtual_LAN"" rel=""noreferrer"">vlan</a>'s <a href=""http://en.wikipedia.org/wiki/Broadcast_domain"" rel=""noreferrer"" title=""Broadcast Domain"">broadcast domain</a>.</p>

<ul>
<li><a href=""http://en.wikipedia.org/wiki/Collision_domain"" rel=""noreferrer"" title=""Collision Domain: a half-duplex network entity, which commonly uses CSMA/CD for access"">Collision domain</a>s are invariably a <a href=""http://en.wikipedia.org/wiki/Duplex_%28telecommunications%29#Half-duplex"" rel=""noreferrer"">half-duplex</a> segment, or a series of connected <a href=""http://en.wikipedia.org/wiki/Duplex_%28telecommunications%29#Half-duplex"" rel=""noreferrer"">half-duplex</a> segments.

<ul>
<li><a href=""http://en.wikipedia.org/wiki/Ethernet_hub"" rel=""noreferrer"">Ethernet hub</a>s / <a href=""http://en.wikipedia.org/wiki/Wireless_access_point"" rel=""noreferrer"">Wifi Access Points</a> (within the same RF-channel width) start or continue a <a href=""http://en.wikipedia.org/wiki/Collision_domain"" rel=""noreferrer"" title=""Collision Domain: a half-duplex network entity, which commonly uses CSMA/CD for access"">collision domain</a></li>
<li><a href=""http://en.wikipedia.org/wiki/Network_switch"" rel=""noreferrer"">Ethernet switch</a>es, <a href=""http://en.wikipedia.org/wiki/Router_%28computing%29"" rel=""noreferrer"">router</a>s, <a href=""http://en.wikipedia.org/wiki/Firewall_%28computing%29"" rel=""noreferrer"">firewall</a>s all form a boundary on a <a href=""http://en.wikipedia.org/wiki/Collision_domain"" rel=""noreferrer"" title=""Collision Domain: a half-duplex network entity, which commonly uses CSMA/CD for access"">collision domain</a>.</li>
</ul></li>
<li><a href=""http://en.wikipedia.org/wiki/Broadcast_domain"" rel=""noreferrer"" title=""Broadcast Domain"">Broadcast domain</a>s could have multiple <a href=""http://en.wikipedia.org/wiki/Duplex_%28telecommunications%29#Half-duplex"" rel=""noreferrer"">half-duplex</a> segments inside them.</li>
</ul>

<h3>How Ethernet switches control Collision Domains</h3>

<p><a href=""http://en.wikipedia.org/wiki/Network_switch"" rel=""noreferrer"">Ethernet switch</a>es control <a href=""http://en.wikipedia.org/wiki/Collision_domain"" rel=""noreferrer"" title=""Collision Domain: a half-duplex network entity, which commonly uses CSMA/CD for access"">collision domain</a>s because they can join <a href=""http://en.wikipedia.org/wiki/Duplex_%28telecommunications%29#Half-duplex"" rel=""noreferrer"">half-duplex</a> and <a href=""http://en.wikipedia.org/wiki/Duplex_%28telecommunications%29#Full-duplex"" rel=""noreferrer"">full-duplex</a> links within the same <a href=""http://en.wikipedia.org/wiki/Broadcast_domain"" rel=""noreferrer"" title=""Broadcast Domain"">broadcast domain</a>; <a href=""http://en.wikipedia.org/wiki/Network_switch"" rel=""noreferrer"">Ethernet switch</a>es <a href=""http://en.wikipedia.org/wiki/Data_buffer#Telecommunication_buffer"" rel=""noreferrer"">buffer</a> frames to assist the transition between <a href=""http://en.wikipedia.org/wiki/Duplex_%28telecommunications%29#Half-duplex"" rel=""noreferrer"">half-duplex</a> and <a href=""http://en.wikipedia.org/wiki/Duplex_%28telecommunications%29#Full-duplex"" rel=""noreferrer"">full-duplex</a> links.</p>

<h3>Example:</h3>

<p>This shows a strange network which illustrates how <a href=""http://en.wikipedia.org/wiki/Collision_domain"" rel=""noreferrer"" title=""Collision Domain: a half-duplex network entity, which commonly uses CSMA/CD for access"">collision domain</a>s are a contained within a <a href=""http://en.wikipedia.org/wiki/Broadcast_domain"" rel=""noreferrer"" title=""Broadcast Domain"">broadcast domain</a>, and how devices form boundaries for each one.</p>

<ul>
<li>Yellow areas are the span of the <a href=""http://en.wikipedia.org/wiki/Broadcast_domain"" rel=""noreferrer"" title=""Broadcast Domain"">broadcast domain</a></li>
<li>Grey area are the span of the <a href=""http://en.wikipedia.org/wiki/Collision_domain"" rel=""noreferrer"" title=""Collision Domain: a half-duplex network entity, which commonly uses CSMA/CD for access"">collision domain</a>s</li>
<li>Firewalls and routers are assumed in routed mode (i.e. not bridged mode)</li>
</ul>

<p><img src=""https://i.stack.imgur.com/n9xZr.png"" alt=""Illustration""></p>

<p><img src=""https://i.stack.imgur.com/VdXG9.png"" alt=""CollisionDomain vs BroadcastDomain""></p>
","7158"
"Routing traffic between two subnets","11546","","<p>I currently admin a small network, it has two separate sites (site1 site2). Each site has independent internet, and a Sonic NSA 220 Firewall. There is currently VPN connecting the two Sonic firewalls, so the sites can communicate without any issues.</p>

<p>Our ISP has just installed a 'router' at each site (ISP Router 1 &amp; 2), so it now presents two ports...Internet Port (ISP-WAN) and a inter-site port (ISP-LAN). This is so we can eliminate the VPN, and route traffic direct through the ISP cloud (ISP-LAN)</p>

<p>I am wanting to know how to set up the ports routing, so I can tell the firewall to route internal traffic through this new ISP-LAN port.</p>

<p>Each site has a DC (same domain) and a separate DHCP (sites have different IP ranges).</p>

<p>I was thinking I could connect port X6 on each firewall to the ISP-LAN port, this would connect the two sites (Blue Line), but not sure how to configure the routing/rules.
Everything has the Sonic WAN port as its default gateway. I don't want the DHCP traffic etc broadcasting between sites.
<img src=""https://i.stack.imgur.com/eU7dm.jpg"" alt=""enter image description here""></p>

<p>Look forward to any help on this one.</p>

<p>Thanks</p>
","<p>You are correct, if you have a free interface (eg. X6) on each router connect ISP-LAN at each site to that interface. I don't know if the SonicWALLs support VRRP but it is not needed. DHCP will not cross subnets unless you enable an IP Helper.</p>

<p>The ISP-LAN connection replaces your VPN but you will need to add some routes (which would have been implied or created previously due to the VPN). I'm guessing your ISP will refer to this has a managed VPN, an MPLS or a VLAN network.</p>

<p>However you will need to know what IPs/network your ISP has assigned to each ISP-LAN (where you have ""???"" in your picture).</p>

<p><strong>First Case:</strong>
IF your ISP has given you IPs on your subnets at each site (eg. 10.10.1.254 at Site 1 and 192.168.1.254 at Site 2) then you can route via these IPs. Assign (or leave) X6 on the LAN (same as X2/X3/etc). Then go to Network | Routing. You will need to create a route on each site (or you could use RIP, but not needed for 2 sites). </p>

<p>At Site 1 your route will be something like:</p>

<pre><code>Source: Any
Destination: Site2 Subnet (192.168.1.0 / 255.255.255.0)
Service: Any
Gateway: ISP-LAN IP (10.10.1.254)
Interface: LAN/X0  (since it's on the LAN)
Metric: 20 (should be fine)
</code></pre>

<p>Create a similar route at Site 2 (but Destination of Site 1's Network using the Gateway of ISP-LAN at Site 2 [192.168.1.254]). I've done this for clients when this is how the ISP has configured things (used IPs on the local LAN to provide access via ""the cloud"").</p>

<p><strong>Second Case:</strong>
HOWEVER, if the ISP has used a <em>DIFFERENT</em> subnet for the ISP-LAN connection (such as 172.16.1.x or something) then you will need to configure X6 to be on that subnet, you won't need NAT. I've also done this for clients (where the ISP provides a 3rd subnet to join to 2 sites) -- in this case X6 will be on that 3rd subnet and the routes will be created automatically [just allow access with firewall rules].</p>

<p>So a <strong>QUESTION</strong> for you: What is the IP/subnet of the ISP-LAN at each site? Is it as you have in your picture (the X6 / ??? IPs) or is it something else?</p>

<p><strong>EDIT:</strong>  <em>(since I can't add a comment)</em></p>

<p>I'm glad that helped. You would have DHCP traversing if the ISP configured the link as a Layer 2 link (essentially a VLAN) between the 2 ISP routers -- DHCP wouldn't cross Layer 3 without assistance but will Layer 2 (like on a switch). Now that you have added a different subnet to the link (your 10.0.0.1/30 subnet) you should be fine (the routers won't pass DHCP broadcast traffic beyond the subnet).</p>

<p>You can configure the routes with Probes so that they will deactivate if something fails, if you convert your VPN from an IPsec Policy VPN to a Tunnel Based VPN (which uses routes for the VPN) you can have it fail-over if you wanted. <em>BUT</em> since the ISP's VLAN and the Internet based VPN are running through the same ISP router the chance of only ONE failing is slim. (if you had a different back-up ISP then having a backup VPN would be a good idea)</p>

<p>As for the speed issue, I would check if you have BWM enabled on either router, other than that contact your ISP.</p>
","17187"
"Enabling flow control on my ethernet NIC","11538","","<p>When running ""ethtool eth0"",</p>

<ul>
<li><p>I get a line in the output that states -> <em>Supported pause frame use: No</em></p>

<ol>
<li>Does this mean my Ethernet card does not support flow control at all?</li>
</ol></li>
</ul>

<p>I try to enable the flow control with ""ethtool -A eth0 rx on tx on"",</p>

<ul>
<li><p>Nothing happens, the command executes but then ""ethtool -a eth0"" still reports that it is off</p>

<ol start=""2"">
<li><p>Auto negotiation appears on, but I am unsure if this effects flow control. From what I see, it can determine link flow control?</p></li>
<li><p>I question ethtool because when looking online at the specs of my Ethernet card, it looks like it fully supports flow control?</p></li>
<li><p>Lastly, I am hooked to a layer 2 switch. Does auto-negotiate have to be on for both endpoints to determine flow control?</p></li>
</ol></li>
</ul>

<p><strong>All in all, I just want to enable flow control on a host and a switch</strong></p>

<p><strong>EDIT</strong></p>

<p>Intel® Ethernet Controller X540-AT2 </p>
","<p>Most of this doesn't matter, ethernet flow control has never been widely supported and most switch devices will respect <code>PAUSE</code> frames, but not send them.  That being said, your questions can be addressed fairly easily:</p>

<ol>
<li><p>Not exactly.  You can still send pause frames, but your card won't respect ones sent by the switch (which you will likely never get anyhow).  The driver probably doesn't send pause frames though, so any you send would have to be generated manually.</p></li>
<li><p>Autonegotiation has no effect on flow control on full-duplex gigabit links</p></li>
<li><p>Ethtool is responding with information from the NIC driver.  It doesn't matter what the hardware supports if the driver doesn't support it, so what ethtool is telling you is important.</p></li>
<li><p>No.  Unless you're working at 100Mbit, autonegotiation in general isn't going to help you (unless you're working with repeaters or other rare half-duplex gear at gigabit).</p></li>
</ol>
","25943"
"What are the differences between network, host, loopback and broadcast address?","11377","","<p>I have one question about IP addresses. If I have address <code>172.18.230.127./29</code> how should I know what type of address is this one. It could be: </p>

<ul>
<li>Network address, </li>
<li>Host address,</li>
<li>Loopback address</li>
<li>Broadcast address</li>
</ul>

<p>What are differences between these addresses above?</p>

<p>Thank you!</p>
","<p>An IP address can be broken down into two parts, namely the Network Address and Host Address. </p>

<p>In your example, /29 refers to the Subnet Mask which means the 29 bits of the total 32 bits from MSB to LSB are all 1's, i.e., 255.255.255.248 . This will allow for 8 addresses per subnet. </p>

<p>The first address in the subnet, 178.18.230.120 is the Network Address in this case and - the last address, which is all 1's - i.e., 172.18.230.127 is the Broadcast Address. The host address can range anywhere between the Network and Broadcast Address, i.e., 172.18.230.121 to 172.18.230.126 .</p>

<p>You can arrive at these addresses by performing an logical AND on the IP address and the Subnet Mask. The first IP address is usually reserved for the Network address and the last one in that block is for the Broadcast address, while the remaining ones can be used as Host addresses.</p>

<p>Loopback address is a special reserved IP address, usually referred to as the localhost - 127.0.0.1 and is used to communicate with the localhost.</p>

<p><strong><em>Edited:</em></strong> </p>

<p>You can convert IP addresses into the binary form and perform logical AND. But, it's much easier and less time consuming to have them in Decimal representation. </p>

<pre><code>                       178.18.230.127

              (AND)    255.255.255.248 
                     --------------------
                       **178.18.230.120**  -----&gt; **Network Address**
                     --------------------

                       178.18.230.127

              (AND)    255.255.255.255 
                     --------------------
                       **178.18.230.127**  -----&gt; **Broadcast Address**
                     --------------------
</code></pre>

<p>Keep in mind that the first and last one in a block are always Network and Broadcast Addresses(reserved).</p>

<p><strong>Host Addresses:</strong>
Any other address lying between the Network and Broadcast Addresses are Host Addressable, which means they can be assigned to a Host and are NOT reserved for any specific purpose, unlike the Network and Broadcast Addresses.</p>
","19417"
"How can I capture traffic on a Brocade XMR, MLX, CER or CES?","11323","","<p>How can I perform a packet analysis on traffic flowing through a Brocade XMR, MLX, CER or CES without having to install a specific software on any of the remote endpoints ?</p>
","<p>The best solution is to plug a computer running a packet analysis software like <a href=""http://www.wireshark.org"">Wireshark</a> to an unused port and duplicate the traffic to this port. This is called <strong>mirroring</strong> and <strong>monitoring</strong>. Here is how to do this on a Brocade <a href=""http://www.brocade.com/products/all/routers/product-details/netiron-mlx-series/index.page"">MLX</a>, <a href=""http://www.brocade.com/products/all/routers/product-details/netiron-xmr-series/index.page"">XMR</a>, <a href=""http://www.brocade.com/products/all/routers/product-details/netiron-cer-2000-series/index.page"">CER</a> or <a href=""http://www.brocade.com/products/all/switches/product-details/netiron-ces-2000-series/index.page"">CES</a> :</p>

<p>First configure the <em>mirroring</em> port. This is the port you will plug you packet analyzer, <code>ethe 3/1</code> here.</p>

<pre><code>Brocade(config)# mirror-port ethernet 3/1
</code></pre>

<p>Next, go to a port where the traffic you want to see is flowing (here, <code>ethe 4/1</code>), and specify this is a monitored port, and where you want the traffic to be sent :</p>

<pre><code>Brocade(config)# interface ethernet 4/1
Brocade(config-if-4/1)# monitor ethernet 3/1 both
</code></pre>

<p>Note : <code>both</code> can be replaced by either <code>input</code> or <code>output</code> if you only want to analyze input or output traffic.</p>

<p>For more information, see the <a href=""http://www.brocade.com/downloads/documents/html_product_manuals/NI_05400a_CFG/wwhelp/wwhimpl/js/html/wwhelp.htm#href=Port_Params.06.15.html#1086983"">documentation</a>.</p>

<p>If you are looking for the documentation for VDX products, see <a href=""http://www.brocade.com/downloads/documents/html_product_manuals/NOS_AG_301/wwhelp/wwhimpl/js/html/wwhelp.htm#href=CH_Configuring_SPAN.35.1.html#1103819"">here</a>. For ICX devices, see <a href=""http://www.brocade.com/downloads/documents/html_product_manuals/FI_07400a_CFG/wwhelp/wwhimpl/js/html/wwhelp.htm#href=FI_Mirroring.27.1.html#1081553"">here</a>.</p>
","673"
"Mixing Cisco STP Features: BPDU Guard, BPDU Filter, PortFast and PortFast Trunk","11305","","<p>I have two switches (Cisco 2960's) with a trunk between them (two ports in an ether-channel) and each has a trunk up to a separate router, all other switch ports are access ports to end devices;</p>

<pre><code>R1       R2
|        |
|        |
|        |
SW1 === SW2
</code></pre>

<p>I want to implement various STP options, port fast on all ports, BPDU filter and BPDU guard. I have read various Cisco documents and other reputable web site feeds, just a few are;</p>

<ul>
<li><a href=""http://blog.ipexpert.com/2010/12/06/bpdu-filter-and-bpdu-guard/"" rel=""nofollow"">BPDU Filter &amp; BPDU Guard (IP Expert)</a></li>
<li><a href=""http://www.cisco.com/en/US/docs/switches/lan/catalyst3560/software/release/12.2_55_se/configuration/guide/swstpopt.html#wp1095752"" rel=""nofollow"">Cisco's BPDU Guard Docs</a></li>
<li><a href=""http://www.cisco.com/en/US/docs/switches/lan/catalyst4000/8.2glx/configuration/guide/stp_enha.html"" rel=""nofollow"">More Cisco BPDU Guard Docs</a></li>
</ul>

<p>I wish to configured all access ports as follows, I already know and use these features and so there is no problems here:</p>

<pre><code>int gi0/10
 description End Device Port
 switchport mode access
 switchport access vlan 10
 spanning-tree portfast
 spanning-tree bpdufilter enable
 spanning-tree bpduguard enable
</code></pre>

<p>I wish to configured trunk ports between switches and up to routers as follows, again I already use this configuration and see no issues here;</p>

<pre><code>int gi0/1
 description Trunk to R1
 switchport mode trunk
 spanning-tree portfast trunk
</code></pre>

<p>What I can't find any good documentation on is mixing BPDU filter and BPDU guard as global defaults with ports configured for <code>portfast trunk</code>. To save my self configuring port-fast on every access port with BPDU guard and BPDU filter, I can simply enter these three global configuration commands;</p>

<pre><code>spanning-tree portfast default
spanning-tree portfast bpdufilter default
spanning-tree portfast bpduguard default
</code></pre>

<p>BPDU filter and BPDU guard will now become active on all portfast ports, but what about portfast ports that are configured as <code>portfast trunk</code> such as between the switches, I want BPDU's being sent between switches. I can't find any documentation that says if or if not enabling BPDU guard/filter globally will also configure this on <code>portfast trunk</code> ports, which could stop STP running between switches and potentially cause those trunk ports to <code>errdisable</code>.</p>

<p>What happens when this situation is configured and are there any official online Cisco doc's to clarify?</p>
","<p>First, like the others have mentioned you have no bridging loop here due to running a Portchannel. That said, running STP is still fine. Let me clear some confusions on how these commands work on Cisco switches.</p>

<pre><code>spanning-tree portfast trunk
</code></pre>

<p>This command is supposed to be run on trunk ports towards non bridging devices, such as a server with multiple VLANs or a router. This command should not be run on trunks towards switches because the port will bypass the listening and learning phase which could potentially create a bridging loop.</p>

<p>If you have an interface configured like this:</p>

<pre><code>interface x/x
spanning-tree portfast
spanning-tree bpdufilter enable
spanning-tree bpduguard enable
</code></pre>

<p>BPDU guard will never kick in because BPDU filter is filtering both the outgoing and incoming BPDUs. This also means that the port can never lose its Portfast status which it would normally do if BPDUs were received inbound. If you remove the filter then BPDU guard will kick in and shutdown the port if a BPDU is received. This is done before the port can lose its Portfast operatational state so basically the port will always operate in Porfast operational mode.</p>

<p>If you apply the commands globally instead:</p>

<pre><code>spanning-tree portfast default
spanning-tree portfast bpdufilter default
spanning-tree portfast bpduguard default
</code></pre>

<p>The first command enables Portfast on all access ports. </p>

<p>When BPDU filter is applied globally, the difference is that it sends out 11 BPDUs before going silent. Because normally one BPDU is sent out every 2 seconds and the default MaxAge is 20 seconds that means that if there is a device at the other end that can process BPDUs, at least one BPDU would be received when the old BPDU (if there was one) has expired.</p>

<p>If a BPDU is received inbound when BPDU filter is applied globally then the port stops filtering and it will lose its Portfast status.</p>

<p>The BPDU guard default command will only apply to ports that are in a Portfast operational state.</p>

<p>If you combine these three commands together then what will happen is that when a BPDU is received the port loses its BPDU filter, BPDU guard can then kick in. The port will never lose its Portfast operational state because the port is shutdown before.</p>

<p>So you see when applied to the interface BPDU guard can never kick in but if you apply it globally it can.</p>

<p>If you run just Portfast globally and BPDU filter globally then if a BPDU comes in, the port loses the filter and loses the Portfast operational state and will operate as a normal port.</p>
","5141"
"Cisco ASA 5506-X - Site-to-Site VPN Tunnel - Return traffic dropped","11283","","<p>I've configured a Cisco ASA 5506-X for a customer of mine and I'm having trouble successfully passing traffic round-trip to the remote network.  The VPN tunnel connects successfully according to 'show crypto ipsec sa'.  Below is a copy of the scrubbed configuration I'm using currently:</p>

<pre><code>: 
: Serial Number: XXXXXXXXXXX
: Hardware:   ASA5506, 4096 MB RAM, CPU Atom C2000 series 1250 MHz, 1 CPU (4 cores)
:
ASA Version 9.4(1) 
!
hostname ciscoasa01
enable password XXXXXXXXXXXXXXX encrypted
names
!
interface GigabitEthernet1/1
 nameif outside
 security-level 0
 ip address 172.16.10.163 255.255.255.248 
!
interface GigabitEthernet1/2
 nameif inside
 security-level 100
 ip address 192.168.2.1 255.255.255.0 
!
interface GigabitEthernet1/3
 shutdown
 no nameif
 no security-level
 no ip address
!
interface GigabitEthernet1/4
 shutdown
 no nameif
 no security-level
 no ip address
!
interface GigabitEthernet1/5
 shutdown
 no nameif
 no security-level
 no ip address
!
interface GigabitEthernet1/6
 shutdown
 no nameif
 no security-level
 no ip address
!
interface GigabitEthernet1/7
 shutdown
 no nameif
 no security-level
 no ip address
!
interface GigabitEthernet1/8
 shutdown
 no nameif
 no security-level
 no ip address
!
interface Management1/1
 management-only
 nameif management
 security-level 100
 no ip address
!
ftp mode passive
clock timezone CST -6
clock summer-time CDT recurring
dns domain-lookup outside
dns domain-lookup inside
dns server-group DefaultDNS
 name-server 8.8.8.8
 name-server 4.2.2.2
same-security-traffic permit inter-interface
object network obj_any
 subnet 0.0.0.0 0.0.0.0
object network Datacenter
 subnet 10.10.185.0 255.255.255.0
object network Internal
 subnet 192.168.2.0 255.255.255.0
access-list outside_cryptomap extended permit ip object Internal object Datacenter 
access-list outside_cryptomap extended permit icmp object Internal object Datacenter
access-list internet_access extended permit ip object Internal any 
access-list outside_access_in extended permit ip any any
pager lines 24
logging enable
logging asdm informational
mtu outside 1500
mtu inside 1500
mtu management 1500
no failover
no monitor-interface service-module 
icmp unreachable rate-limit 1 burst-size 1
icmp permit any outside
icmp permit any inside
no asdm history enable
arp timeout 14400
no arp permit-nonconnected
nat (inside,outside) source static Internal Internal destination static Datacenter Datacenter no-proxy-arp route-lookup
nat (outside,outside) source static Internal Internal destination static Datacenter Datacenter no-proxy-arp route-lookup
!
object network obj_any
 nat (any,outside) dynamic interface
!
nat (inside,outside) after-auto source dynamic any interface
access-group outside_access_in in interface outside
route outside 0.0.0.0 0.0.0.0 172.16.10.161 1
timeout xlate 3:00:00
timeout pat-xlate 0:00:30
timeout conn 1:00:00 half-closed 0:10:00 udp 0:02:00 icmp 0:00:02
timeout sunrpc 0:10:00 h323 0:05:00 h225 1:00:00 mgcp 0:05:00 mgcp-pat 0:05:00
timeout sip 0:30:00 sip_media 0:02:00 sip-invite 0:03:00 sip-disconnect 0:02:00
timeout sip-provisional-media 0:02:00 uauth 0:05:00 absolute
timeout tcp-proxy-reassembly 0:01:00
timeout floating-conn 0:00:00
user-identity default-domain LOCAL
aaa authentication ssh console LOCAL 
http server enable
http 192.168.2.0 255.255.255.0 inside
no snmp-server location
no snmp-server contact
service sw-reset-button
crypto ipsec ikev1 transform-set ESP-3DES-SHA esp-3des esp-sha-hmac 
crypto ipsec ikev1 transform-set ESP-3DES-SHA-TRANS esp-3des esp-sha-hmac 
crypto ipsec ikev1 transform-set ESP-3DES-SHA-TRANS mode transport
crypto ipsec ikev1 transform-set ESP-AES-256-SHA esp-aes-256 esp-sha-hmac 
crypto ipsec ikev1 transform-set ESP-AES-256-SHA-TRANS esp-aes-256 esp-sha-hmac 
crypto ipsec ikev1 transform-set ESP-AES-256-SHA-TRANS mode transport
crypto ipsec ikev2 ipsec-proposal 3DES
 protocol esp encryption 3des
 protocol esp integrity sha-1 md5
crypto ipsec ikev2 ipsec-proposal AES256
 protocol esp encryption aes-256
 protocol esp integrity sha-1
crypto ipsec security-association pmtu-aging infinite
crypto map outside_map 1 match address outside_cryptomap
crypto map outside_map 1 set peer 20.30.40.185 
crypto map outside_map 1 set ikev1 transform-set ESP-3DES-SHA ESP-3DES-SHA-TRANS ESP-AES-256-SHA ESP-AES-256-SHA-TRANS
crypto map outside_map 1 set security-association lifetime seconds 3600
crypto map outside_map interface outside
crypto ca trustpool policy
crypto ikev2 policy 1
 encryption aes-256
 integrity sha
 group 2
 prf sha
 lifetime seconds 3600
crypto ikev1 enable outside
crypto ikev1 policy 120
 authentication pre-share
 encryption aes-256
 hash sha
 group 2
 lifetime 3600
telnet timeout 5
no ssh stricthostkeycheck
ssh 192.168.2.0 255.255.255.0 inside
ssh timeout 5
ssh key-exchange group dh-group1-sha1
console timeout 0
management-access management
!
threat-detection basic-threat
threat-detection statistics access-list
no threat-detection statistics tcp-intercept
ntp server 24.56.178.140 source outside prefer
group-policy DfltGrpPolicy attributes
 vpn-tunnel-protocol ikev2 l2tp-ipsec 
group-policy GroupPolicy_20.30.40.185 internal
group-policy GroupPolicy_20.30.40.185 attributes
 vpn-tunnel-protocol ikev1 
dynamic-access-policy-record DfltAccessPolicy
username admin password XXXXXXXXXXXXXX encrypted privilege 15
tunnel-group 20.30.40.185 type ipsec-l2l
tunnel-group 20.30.40.185 general-attributes
 default-group-policy GroupPolicy_20.30.40.185
tunnel-group 20.30.40.185 ipsec-attributes
 ikev1 pre-shared-key *****
 peer-id-validate nocheck
 ikev2 remote-authentication pre-shared-key *****
 ikev2 local-authentication pre-shared-key *****
!
class-map filtered-class
 match any
class-map global-class
 match default-inspection-traffic
class-map inspection_default
 match default-inspection-traffic
!
!
policy-map type inspect dns preset_dns_map
 parameters
  message-length maximum client auto
  message-length maximum 512
policy-map global_policy
 description Filtered Traffic
 class inspection_default
  inspect dns preset_dns_map 
  inspect ftp 
  inspect h323 h225 
  inspect h323 ras 
  inspect rsh 
  inspect rtsp 
  inspect esmtp 
  inspect sqlnet 
  inspect skinny  
  inspect sunrpc 
  inspect xdmcp 
  inspect sip  
  inspect netbios 
  inspect tftp 
  inspect ip-options 
 class filtered-class
  sfr fail-open
policy-map global-policy
 class global-class
  inspect icmp 
!
service-policy global_policy global
prompt hostname context 
no call-home reporting anonymous
Cryptochecksum:3ed383cb9ad07574a579a99ea71c2946
: end
</code></pre>

<p>When I perform a packet trace from this Cisco ASA to the remote network, it works just fine however when I perform a packet trace from the remote network back to the LAN behind this ASA I get the following:</p>

<pre><code># packet-tracer input outside tcp 10.10.185.2 3389 192.168.2.5 3389 detailed

Phase: 1
Type: ROUTE-LOOKUP
Subtype: Resolve Egress Interface
Result: ALLOW
Config:
Additional Information:
found next-hop 192.168.2.5 using egress ifc  inside

Phase: 2
Type: ACCESS-LIST
Subtype: log
Result: ALLOW
Config:
access-group outside_access_in in interface outside
access-list outside_access_in extended permit ip any any 
Additional Information:
 Forward Flow based lookup yields rule:
 in  id=0x7fffde35d0a0, priority=13, domain=permit, deny=false
    hits=24, user_data=0x7fffcfffed00, cs_id=0x0, use_real_addr, flags=0x0, protocol=0
    src ip/id=0.0.0.0, mask=0.0.0.0, port=0, tag=any
    dst ip/id=0.0.0.0, mask=0.0.0.0, port=0, tag=any, dscp=0x0
    input_ifc=outside, output_ifc=any

Phase: 3
Type: NAT     
Subtype: per-session
Result: ALLOW
Config:
Additional Information:
 Forward Flow based lookup yields rule:
 in  id=0x7fffdd3fd8a0, priority=0, domain=nat-per-session, deny=false
    hits=470, user_data=0x0, cs_id=0x0, reverse, use_real_addr, flags=0x0, protocol=6
    src ip/id=0.0.0.0, mask=0.0.0.0, port=0, tag=any
    dst ip/id=0.0.0.0, mask=0.0.0.0, port=0, tag=any, dscp=0x0
    input_ifc=any, output_ifc=any

Phase: 4
Type: IP-OPTIONS
Subtype: 
Result: ALLOW
Config:
Additional Information:
 Forward Flow based lookup yields rule:
 in  id=0x7fffddb1e950, priority=0, domain=inspect-ip-options, deny=true
    hits=2051, user_data=0x0, cs_id=0x0, reverse, flags=0x0, protocol=0
    src ip/id=0.0.0.0, mask=0.0.0.0, port=0, tag=any
    dst ip/id=0.0.0.0, mask=0.0.0.0, port=0, tag=any, dscp=0x0
    input_ifc=outside, output_ifc=any

Phase: 5
Type: SFR
Subtype: 
Result: ALLOW
Config:
class-map filtered-class
 match any
policy-map global_policy
 description Filtered Traffic
 class filtered-class
  sfr fail-open
service-policy global_policy global
Additional Information:
 Forward Flow based lookup yields rule:
 in  id=0x7fffde1e96f0, priority=71, domain=sfr, deny=false
    hits=25, user_data=0x7fffde1e90a0, cs_id=0x0, use_real_addr, flags=0x0, protocol=0
    src ip/id=0.0.0.0, mask=0.0.0.0, port=0, tag=any
    dst ip/id=0.0.0.0, mask=0.0.0.0, port=0, tag=any, dscp=0x0
    input_ifc=outside, output_ifc=any

Phase: 6
Type: VPN
Subtype: ipsec-tunnel-flow
Result: DROP  
Config:
Additional Information:
 Forward Flow based lookup yields rule:
 in  id=0x7fffde312c90, priority=70, domain=ipsec-tunnel-flow, deny=false
    hits=1, user_data=0x197c4, cs_id=0x7fffddbdbc70, reverse, flags=0x0, protocol=0
    src ip/id=10.10.185.0, mask=255.255.255.0, port=0, tag=any
    dst ip/id=192.168.2.0, mask=255.255.255.0, port=0, tag=any, dscp=0x0
    input_ifc=outside, output_ifc=any

Result:
input-interface: outside
input-status: up
input-line-status: up
output-interface: inside
output-status: up
output-line-status: up
Action: drop
Drop-reason: (acl-drop) Flow is denied by configured rule
</code></pre>

<p>I can't seem to locate what's holding up traffic from returning properly.  I also cannot seem to get traffic sourced from the LAN behind the Cisco ASA to the Internet and back even though I have NAT rules that should take care of that but I'll look to resolve one thing at a time starting with the VPN tunnel traffic.</p>

<p>Any ideas?</p>

<p><em>EDIT</em></p>

<p>Adding some info per dareuja's request.</p>

<p>show run nat output:</p>

<pre><code># sho run nat
nat (outside,any) source static any any destination static interface Win_Svr service RDP RDP no-proxy-arp
nat (inside,outside) source dynamic obj_any interface
nat (inside,outside) source static Internal Internal destination static Datacenter Datacenter no-proxy-arp route-lookup
!
object network obj_any
 nat (any,outside) dynamic interface
</code></pre>

<p>Packet tracer output sourcing from inside IP of 192.168.2.5 to outside at 8.8.8.8</p>

<pre><code># packet-tracer input inside tcp 192.168.2.5 53 8.8.8.8 53

Phase: 1
Type: ROUTE-LOOKUP
Subtype: Resolve Egress Interface
Result: ALLOW
Config:
Additional Information:
found next-hop 172.16.10.161 using egress ifc  outside

Phase: 2
Type: NAT
Subtype: 
Result: ALLOW
Config:
nat (inside,outside) source dynamic obj_any interface
Additional Information:
Dynamic translate 192.168.2.5/53 to 172.16.10.163/53

Phase: 3
Type: NAT
Subtype: per-session
Result: ALLOW
Config:
Additional Information:

Phase: 4      
Type: IP-OPTIONS
Subtype: 
Result: ALLOW
Config:
Additional Information:

Phase: 5
Type: SFR
Subtype: 
Result: ALLOW
Config:
class-map filtered-class
 match any
policy-map global_policy
 description Filtered Traffic
 class filtered-class
  sfr fail-open
service-policy global_policy global
Additional Information:

Phase: 6
Type: NAT
Subtype: rpf-check
Result: ALLOW 
Config:
nat (inside,outside) source dynamic obj_any interface
Additional Information:

Phase: 7
Type: NAT
Subtype: per-session
Result: ALLOW
Config:
Additional Information:

Phase: 8
Type: IP-OPTIONS
Subtype: 
Result: ALLOW
Config:
Additional Information:

Phase: 9
Type: FLOW-CREATION
Subtype: 
Result: ALLOW
Config:
Additional Information:
New flow created with id 13956, packet dispatched to next module

Result:
input-interface: inside
input-status: up
input-line-status: up
output-interface: outside
output-status: up
output-line-status: up
Action: allow
</code></pre>

<p>Output of 'show crypto ipsec sa peer 20.30.40.185'</p>

<pre><code># sh crypto ipsec sa peer 20.30.40.185 detail   
peer address: 20.30.40.185
    Crypto map tag: outside_map, seq num: 1, local addr: 172.16.10.163

      access-list outside_cryptomap extended permit ip 192.168.2.0 255.255.255.0 10.10.185.0 255.255.255.0 
      local ident (addr/mask/prot/port): (192.168.2.0/255.255.255.0/0/0)
      remote ident (addr/mask/prot/port): (10.10.185.0/255.255.255.0/0/0)
      current_peer: 20.30.40.185


      #pkts encaps: 0, #pkts encrypt: 0, #pkts digest: 0
      #pkts decaps: 11043, #pkts decrypt: 11043, #pkts verify: 11043
      #pkts compressed: 0, #pkts decompressed: 0
      #pkts not compressed: 0, #pkts comp failed: 0, #pkts decomp failed: 0
      #pre-frag successes: 0, #pre-frag failures: 0, #fragments created: 0
      #PMTUs sent: 0, #PMTUs rcvd: 0, #decapsulated frgs needing reassembly: 0
      #TFC rcvd: 0, #TFC sent: 0
      #Valid ICMP Errors rcvd: 0, #Invalid ICMP Errors rcvd: 0
      #pkts no sa (send): 0, #pkts invalid sa (rcv): 0
      #pkts encaps failed (send): 0, #pkts decaps failed (rcv): 0
      #pkts invalid prot (rcv): 0, #pkts verify failed: 0
      #pkts invalid identity (rcv): 0, #pkts invalid len (rcv): 0
      #pkts invalid pad (rcv): 0,
      #pkts invalid ip version (rcv): 0,
      #pkts replay rollover (send): 0, #pkts replay rollover (rcv): 0
      #pkts replay failed (rcv): 0
      #pkts min mtu frag failed (send): 0, #pkts bad frag offset (rcv): 0
      #pkts internal err (send): 0, #pkts internal err (rcv): 0

      local crypto endpt.: 172.16.10.163/4500, remote crypto endpt.: 20.30.40.185/4500
      path mtu 1500, ipsec overhead 82(52), media mtu 1500
      PMTU time remaining (sec): 0, DF policy: copy-df
      ICMP error validation: disabled, TFC packets: disabled
      current outbound spi: CDCAAA61
      current inbound spi : 337E6914

    inbound esp sas:
      spi: 0x337E6914 (863922452)
         transform: esp-aes-256 esp-sha-hmac no compression 
         in use settings ={L2L, Tunnel,  NAT-T-Encaps, IKEv1, }
         slot: 0, conn_id: 12288, crypto-map: outside_map
         sa timing: remaining key lifetime (kB/sec): (4373985/2388)
         IV size: 16 bytes
         replay detection support: Y
         Anti replay bitmap: 
          0xFFFFFFFF 0xFFFFFFFF
    outbound esp sas:
      spi: 0xCDCAAA61 (3452611169)
         transform: esp-aes-256 esp-sha-hmac no compression 
         in use settings ={L2L, Tunnel,  NAT-T-Encaps, IKEv1, }
         slot: 0, conn_id: 12288, crypto-map: outside_map
         sa timing: remaining key lifetime (kB/sec): (4374000/2386)
         IV size: 16 bytes
         replay detection support: Y
         Anti replay bitmap: 
          0x00000000 0x00000001
</code></pre>
","<p>You won't be able to test a VPN using packet-tracer from remote to local, a drop is expected if you do so.  I believe it's due to the expectation that the traffic would be encrypted, receiving an unencrypted packet (even through simulation) is dropped per security. (if I can get it set up on my lab, I'll test this out as well.) <em>EDIT</em> tested in lab as well, sourcing from remote will drop when testing VPN.  If anyone else has had a different experience, please let me know.</p>
","23585"
"What is the 5 level QoS model (through config example)?","11279","","<p>I have heard people stating that their network </p>

<blockquote>
  <p>""operates a 5 level (or layer) QoS model""</p>
</blockquote>

<p>Sometimes they also mention a 7 level QoS model. Can anyone provide me with a Cisco IOS config example of what is meant here. So by this I mean a config example showing how to implement this (assuming there is such a thing!). I am more familiar with IOS 12.whatever rather than 15.whatever but either would be great.</p>

<p>I assume that these people are referencing a 5 class set up matching traffic that is one of the 5 standard classes below and processing the traffic appropriately;</p>

<ul>
<li>DF Default</li>
<li>EF Expedited Forwarding</li>
<li>VA Voice Admit</li>
<li>AF Assured Forwarding</li>
<li>CS Class Selector (for backward compatibility)</li>
</ul>

<p>I'm looking for an IOS config example that matches 5 (or 7!) classes of traffic, and then applies an appropriate policy (<em>I understand this is a big vague, different network operators may want the traffic handled differently, but this is purely educational. I want to see 5 different class of traffic being matches and treated differently</em>).</p>

<p><strong>Side note</strong></p>

<p>I'd be really interested to see for example how one would configure such a policy for say a 100Mbps link so that using simple arithmetic I could scale it up to 1Gbps or down to 10Mbps. I'm guessing that for this to be effective, this whole QoS schema would need to reserve buffer space or allocate bucket space, rather than using policing to limit bandwidth for example? I assume this is because you don't know how much bandwidth at any one time will be voice, or video, data, or P2P/Torrents etc</p>
","<p>Cisco has something they call Cisco Validated Designs (CVD). These are network designs from different perspectives like QoS, high availability, WAN etc that Cisco recommends and have tested.</p>

<p>For QoS they have 3 different designs with 4, 8 or 12 classes which can be seen in the picture below.</p>

<p><img src=""https://i.stack.imgur.com/wlET3.jpg"" alt=""Cisco QoS classes""></p>

<p>Starting with the 4 class model:</p>

<pre><code>! This section defines the 4-Class class-maps 
! (three are explicitly defined and one is default)
Router(config)# class-map match-any REALTIME
Router(config-cmap)# match dscp ef
 ! Matches VoIP
Router(config-cmap)# match dscp cs5
 ! Matches Broadcast Video
Router(config-cmap)# match dscp cs4
 ! Matches Realtime-Interactive

Router(config)# class-map match-any CONTROL
Router(config-cmap)# match dscp cs6
 ! Matches Network-Control
Router(config-cmap)# match dscp cs3
 ! Matches Signaling (control-plane traffic for voice/video infrastructure)
Router(config-cmap)# match dscp cs2
 ! Matches Network Management

Router(config)# class-map match-any CRITICAL-DATA
Router(config-cmap)# match dscp af41 af42 af43
 ! Matches Multimedia Conferencing on AF4 
Router(config-cmap)# match dscp af31 af32 af33
 ! Matches Multimedia Streaming on AF3
Router(config-cmap)# match dscp af21 af22 af23
 ! Matches Transactional Data on AF2
Router(config-cmap)# match dscp af11 af12 af13
 ! Matches Bulk Data on AF1


! This section defines the 4-Class Policy-Map
Router(config)# policy-map WAN-EDGE-4-CLASS
Router(config-pmap)# class REALTIME
Router(config-pmap-c)# priority percent 33
 ! Provisions 33% LLQ for REALTIME class
Router(config-pmap-c)# class CONTROL
Router(config-pmap-c)#  bandwidth percent 7
 ! Provisions 7% CBWFQ for CONTROL class
Router(config-pmap-c)# class CRITICAL-DATA
Router(config-pmap-c)#  bandwidth percent 35
 ! Provisions 35% CBWFQ for CRITICAL-DATA class
Router(config-pmap-c)#  fair-queue
 ! Enables fair-queuing pre-sorter on CRITICAL-DATA class
Router(config-pmap-c)#   random-detect dscp-based
 ! Enables DSCP-based WRED on CRITICAL-DATA class
Router(config-pmap-c)#   random-detect dscp af11 50 64
 ! Tunes WRED min and max drop-thresholds for AF11/10 to 50 and 64 packets
Router(config-pmap-c)#   random-detect dscp af12 45 64
 ! Tunes WRED min and max drop-thresholds for AF12/12 to 45 and 64 packets
Router(config-pmap-c)#   random-detect dscp af13 40 64
 ! Tunes WRED min and max drop-thresholds for AF13/14 to 40 and 64 packets
Router(config-pmap-c)#   random-detect dscp af21 50 64
 ! Tunes WRED min and max drop-thresholds for AF21/18 to 50 and 64 packets
Router(config-pmap-c)#   random-detect dscp af22 45 64
 ! Tunes WRED min and max drop-thresholds for AF22/20 to 45 and 64 packets
Router(config-pmap-c)#   random-detect dscp af23 40 64
 ! Tunes WRED min and max drop-thresholds for AF23/22 to 40 and 64 packets
Router(config-pmap-c)#   random-detect dscp af31 50 64
 ! Tunes WRED min and max drop-thresholds for AF31/26 to 50 and 64 packets
Router(config-pmap-c)#   random-detect dscp af32 45 64
 ! Tunes WRED min and max drop-thresholds for AF32/28 to 45 and 64 packets
Router(config-pmap-c)#   random-detect dscp af33 40 64
 ! Tunes WRED min and max drop-thresholds for AF33/30 to 40 and 64 packets
Router(config-pmap-c)#   random-detect dscp af41 50 64
 ! Tunes WRED min and max drop-thresholds for AF41/34 to 50 and 64 packets
Router(config-pmap-c)#   random-detect dscp af42 45 64
 ! Tunes WRED min and max drop-thresholds for AF42/36 to 45 and 64 packets
Router(config-pmap-c)#   random-detect dscp af43 40 64
 ! Tunes WRED min and max drop-thresholds for AF43/38 to 40 and 64 packets
Router(config-pmap-c)# class class-default
Router(config-pmap-c)#  bandwidth percent 25
 ! Provisions 25% CBWFQ for default (Best-Effort) class
Router(config-pmap-c)#  fair-queue
 ! Enables fair-queuing pre-sorter on default (Best-Effort) class
Router(config-pmap-c)#  queue-limit 128 packets
 ! Expands queue-limit to 128 packets
Router(config-pmap-c)#   random-detect dscp-based
 ! Enables DSCP-based WRED on default (Best-Effort) class
Router(config-pmap-c)#   random-detect dscp default 100 128
 ! Tunes WRED min and max drop-thresholds for DF/0 to 100 and 128 packets
Router(config-pmap-c)#   random-detect dscp cs1 60 100
 ! Tunes WRED min and max drop-thresholds for CS1/8 to 60 and 100 packets
</code></pre>

<p>As you can see it matches on different DSCP values. DSCP EF is generally used for VoIP. This means that your packets should already have been marked as early as possible in your network. The bandwidth values are entered in percent which means that the policy can applied on different speed interfaces and still provide good values compared to entering them in kbit/s. On very high speed interfaces like 10 Gbit it could be a lot to use 7% for control traffic though since that would be 700 Mbit/s.</p>

<p>Both the data and the class-default uses fair-queue which is a way of queueing packets based on DSCP and packet size to provide fair queueing even for small packet flows. To be able to use this you need an image supporting Hierarchical Queing Framework (HQF) which is <a href=""http://www.cisco.com/en/US/prod/collateral/iosswrel/ps6537/ps6558/white_paper_c11-481499.html"" rel=""noreferrer"">12.4(20)T</a> or newer.</p>

<p>Weighted Random Early Detection (WRED) is also applied to take care of issues like TCP synchronization where TCP flows will speed up and back off at the same time.</p>

<p>Then you have the 8 class model.</p>

<pre><code>! This section defines the 8-Class class-maps 
! (seven are explicitly defined and one is default)
Router(config)# class-map match-all VOICE
Router(config-cmap)# match dscp ef
 ! Matches VoIP

Router(config)# class-map match-any INTERACTIVE-VIDEO
Router(config-cmap)# match dscp cs5
 ! Matches Broadcast Video
Router(config-cmap)# match dscp cs4
 ! Matches Realtime-Interactive
Router(config)# class-map match-any NETWORK-CONTROL
Router(config-cmap)# match dscp cs6
 ! Matches Network Control
Router(config-cmap)# match dscp cs2
 ! Matches Network Management

Router(config)# class-map match-all SIGNALING
Router(config-cmap)# match dscp cs3
 ! Matches Signaling

Router(config)# class-map match-all MULTIMEDIA-STREAMING
Router(config-cmap)# match dscp af31 af32 af33
 ! Matches Multimedia-Streaming on AF3

Router(config)# class-map match-any CRITICAL-DATA
Router(config-cmap)# match dscp af41 af42 af43
 ! Matches Multimedia-Conferencing on AF4
Router(config-cmap)# match dscp af21 af22 af23
 ! Matches Transactional-Data on AF2
Router(config-cmap)# match dscp af11 af12 af13
 ! Matches Bulk-Data on AF1

Router(config)# class-map match-all SCAVENGER
Router(config-cmap)# match dscp cs1
 ! Matches Scavenger


! This section configures the 8-class policy-map
Router(config)# policy-map WAN-EDGE-8-CLASS
Router(config-pmap)# class VOICE
Router(config-pmap-c)#  priority percent 10
 ! Provisions 10% LLQ for VOICE class (dual LLQ-policy)
Router(config-pmap-c)# class INTERACTIVE-VIDEO
Router(config-pmap-c)#  priority percent 23
 ! Provisions 23% LLQ for INTERACTIVE-VIDEO class (dual-LLQ policy)
Router(config-pmap-c)# class NETWORK-CONTROL
Router(config-pmap-c)#  bandwidth percent 5
 ! Provisions 5% CBWFQ for NETWORK-CONTROL class
Router(config-pmap-c)# class SIGNALING
Router(config-pmap-c)#  bandwidth percent 2
 ! Provisions 2% CBWFQ for SIGNALING class
Router(config-pmap-c)# class MULTIMEDIA-STREAMING
Router(config-pmap-c)#  bandwidth percent 10
 ! Provisions 10% CBWFQ for MULTIMEDIA-STREAMING class
Router(config-pmap-c)#  fair-queue
 ! Enables fair-queuing pre-sorter on MULTIMEDIA-STREAMING class
Router(config-pmap-c)#   random-detect dscp-based
 ! Enables DSCP-based WRED on MULTIMEDIA-STREAMING class
Router(config-pmap-c)#   random-detect dscp af31 50 64
 ! Tunes WRED min and max drop-thresholds for AF31/26 to 50 and 64 packets
Router(config-pmap-c)#   random-detect dscp af32 45 64
 ! Tunes WRED min and max drop-thresholds for AF32/28 to 45 and 64 packets
Router(config-pmap-c)#   random-detect dscp af33 40 64
 ! Tunes WRED min and max drop-thresholds for AF33/30 to 40 and 64 packets
Router(config-pmap-c)# class CRITICAL-DATA
Router(config-pmap-c)#  bandwidth percent 24
 ! Provisions 24% CBWFQ for CRITICAL-DATA class
Router(config-pmap-c)#  fair-queue
 ! Enables fair-queuing pre-sorter on CRITICAL-DATA class
Router(config-pmap-c)#   random-detect dscp-based
 ! Enables DSCP-based WRED on CRITICAL-DATA class


Router(config-pmap-c)#   random-detect dscp af11 50 64
 ! Tunes WRED min and max drop-thresholds for AF11/10 to 50 and 64 packets
Router(config-pmap-c)#   random-detect dscp af12 45 64
 ! Tunes WRED min and max drop-thresholds for AF12/12 to 45 and 64 packets
Router(config-pmap-c)#   random-detect dscp af13 40 64
 ! Tunes WRED min and max drop-thresholds for AF13/14 to 40 and 64 packets
Router(config-pmap-c)#   random-detect dscp af21 50 64
 ! Tunes WRED min and max drop-thresholds for AF21/18 to 50 and 64 packets
Router(config-pmap-c)#   random-detect dscp af22 45 64
 ! Tunes WRED min and max drop-thresholds for AF22/20 to 45 and 64 packets
Router(config-pmap-c)#   random-detect dscp af23 40 64
 ! Tunes WRED min and max drop-thresholds for AF23/22 to 40 and 64 packets
Router(config-pmap-c)#   random-detect dscp af41 50 64
 ! Tunes WRED min and max drop-thresholds for AF41/34 to 50 and 64 packets
Router(config-pmap-c)#   random-detect dscp af42 45 64
 ! Tunes WRED min and max drop-thresholds for AF42/36 to 45 and 64 packets
Router(config-pmap-c)#   random-detect dscp af43 40 64
 ! Tunes WRED min and max drop-thresholds for AF43/38 to 40 and 64 packets
Router(config-pmap-c)# class SCAVENGER
Router(config-pmap-c)#  bandwidth percent 1
 ! Constrains Scavenger class to 1% CBWFQ
Router(config-pmap-c)# class class-default
Router(config-pmap-c)#  bandwidth percent 25
 ! Provisions 25% CBWFQ for default (Best-Effort) class
Router(config-pmap-c)#  fair-queue
 ! Enables fair-queuing pre-sorter on default (Best-Effort) class
Router(config-pmap-c)#  queue-limit 128 packets
 ! Expands queue-limit to 128 packets
Router(config-pmap-c)#   random-detect dscp-based
 ! Enables DSCP-based WRED on default (Best-Effort) class
Router(config-pmap-c)#   random-detect dscp default 100 128
 ! Tunes WRED min and max drop-thresholds for DF/0 to 100 and 128 packets
</code></pre>

<p>This policy is more granular for the realtime applications like video, streaming and signaling for these protocols.</p>

<p>Finally this is the 12 class model.</p>

<pre><code>! This section configures the class-maps
! (eleven class maps are explicitly defined and one is default)
Router(config)# class-map match-all VOICE
Router(config-cmap)# match dscp ef
 ! Matches VoIP

Router(config)# class-map match-all BROADCAST-VIDEO
Router(config-cmap)# match dscp cs5
 ! Matches Broadcast Video

Router(config)# class-map match-all REALTIME-INTERACTIVE
Router(config-cmap)#  match dscp cs4
 ! Matches Realtime-Interactive

Router(config)# class-map match-all NETWORK-CONTROL
Router(config-cmap)# match dscp cs6
 ! Matches Network Control

Router(config)# class-map match-all SIGNALING
Router(config-cmap)# match dscp cs3
 ! Matches Signaling

Router(config)# class-map match-all NETWORK-MANAGEMENT
Router(config-cmap)# match dscp cs2
 ! Matches Network Management

Router(config)# class-map match-any MULTIMEDIA-CONFERENCING
Router(config-cmap)# match dscp af41
Router(config-cmap)# match dscp af42
Router(config-cmap)# match dscp af43
 ! Matches Multimedia-Conferencing
 ! One match statement per Drop Precedence increases visibility

Router(config)# class-map match-any MULTIMEDIA-STREAMING
Router(config-cmap)# match dscp af31
Router(config-cmap)# match dscp af32
Router(config-cmap)# match dscp af33
 ! Matches Multimedia-Streaming
 ! One match statement per Drop Precedence increases visibility

Router(config)# class-map match-any TRANSACTIONAL-DATA
Router(config-cmap)# match dscp af21
Router(config-cmap)# match dscp af22
Router(config-cmap)# match dscp af23
 ! Matches Transactional-Data
 ! One match statement per Drop Precedence increases visibility

Router(config)# class-map match-any BULK-DATA
Router(config-cmap)# match dscp af11
Router(config-cmap)# match dscp af12
Router(config-cmap)# match dscp af13
 ! Matches Bulk-Data
 ! One match statement per Drop Precedence increases visibility

Router(config)# class-map match-all SCAVENGER
Router(config-cmap)# match dscp cs1
 ! Matches Scavenger


! This section configures the 12-Class policy-map
Router(config)# policy-map WAN-EDGE-12-CLASS
Router(config-pmap)# class VOICE
Router(config-pmap-c)#  priority percent 10
 ! Provisions 10% LLQ to VOICE class (multi-LLQ policy)
Router(config-pmap-c)# class BROADCAST-VIDEO
Router(config-pmap-c)#  priority percent 10
 ! Provisions 10% LLQ to BROADCAST-VIDEO class (multi-LLQ policy)
Router(config-pmap-c)# class REALTIME-INTERACTIVE
Router(config-pmap-c)#  priority percent 13
! Provisions 13% LLQ to REALTIME-INTERACTIVE class (multi-LLQ policy)
Router(config-pmap-c)# class NETWORK-CONTROL
Router(config-pmap-c)#  bandwidth percent 2
 ! Provisions 2% CBWFQ to NETWORK-CONTROL class
Router(config-pmap-c)# class SIGNALING
Router(config-pmap-c)#  bandwidth percent 2
 ! Provisions 2% CBWFQ to SIGNALING class
Router(config-pmap-c)# class NETWORK-MANAGEMENT
Router(config-pmap-c)#  bandwidth percent 3
 ! Provisions 3% CBWFQ to NETWORK-MANAGEMENT class
Router(config-pmap-c)# class MULTIMEDIA-CONFERENCING
Router(config-pmap-c)#  bandwidth percent 10
 ! Provisions 10% CBWFQ to MULTIMEDIA-CONFERENCING class
Router(config-pmap-c)#  fair-queue
 ! Enables fair-queuing pre-sorter on MULTIMEDIA-CONFERENCING class
Router(config-pmap-c)#   random-detect dscp-based
 ! Enables DSCP-based WRED on MULTIMEDIA-CONFERENCING class
Router(config-pmap-c)#   random-detect dscp af41 50 64
 ! Tunes WRED min and max drop-thresholds for AF41/34 to 50 and 64 packets
Router(config-pmap-c)#   random-detect dscp af42 45 64
 ! Tunes WRED min and max drop-thresholds for AF42/36 to 45 and 64 packets
Router(config-pmap-c)#   random-detect dscp af43 40 64
 ! Tunes WRED min and max drop-thresholds for AF43/38 to 40 and 64 packets
Router(config-pmap-c)# class MULTIMEDIA-STREAMING
Router(config-pmap-c)#  bandwidth percent 10
 ! Provisions 10% CBWFQ to MULTIMEDIA-STREAMING class
Router(config-pmap-c)#  fair-queue
 ! Enables fair-queuing pre-sorter on MULTIMEDIA-STREAMING class
Router(config-pmap-c)#   random-detect dscp-based
 ! Enables DSCP-based WRED on MULTIMEDIA-STREAMING class
Router(config-pmap-c)#   random-detect dscp af31 50 64
 ! Tunes WRED min and max drop-thresholds for AF31/26 to 50 and 64 packets
Router(config-pmap-c)#   random-detect dscp af32 45 64
 ! Tunes WRED min and max drop-thresholds for AF32/28 to 45 and 64 packets
Router(config-pmap-c)#   random-detect dscp af33 40 64
 ! Tunes WRED min and max drop-thresholds for AF33/30 to 40 and 64 packets
Router(config-pmap-c)# class TRANSACTIONAL-DATA
Router(config-pmap-c)#  bandwidth percent 10
 ! Provisions 10% CBWFQ to TRANSACTIONAL-DATA class
Router(config-pmap-c)#  fair-queue
 ! Enables fair-queuing pre-sorter on TRANSACTIONAL-DATA class
Router(config-pmap-c)#   random-detect dscp-based
 ! Enables DSCP-based WRED on TRANSACTIONAL-DATA class
Router(config-pmap-c)#   random-detect dscp af21 50 64
 ! Tunes WRED min and max drop-thresholds for AF21/18 to 50 and 64 packets
Router(config-pmap-c)#   random-detect dscp af22 45 64
 ! Tunes WRED min and max drop-thresholds for AF22/20 to 45 and 64 packets
Router(config-pmap-c)#   random-detect dscp af23 40 64
 ! Tunes WRED min and max drop-thresholds for AF23/22 to 40 and 64 packets
Router(config-pmap-c)# class BULK-DATA
Router(config-pmap-c)#  bandwidth percent 4
 ! Provisions 4% CBWFQ to BULK-DATA class
Router(config-pmap-c)#  fair-queue
 ! Enables fair-queuing pre-sorter on BULK-DATA class
Router(config-pmap-c)#   random-detect dscp-based
! Enables DSCP-based WRED on BULK-DATA class
Router(config-pmap-c)#   random-detect dscp af11 50 64
 ! Tunes WRED min and max drop-thresholds for AF11/10 to 50 and 64 packets
Router(config-pmap-c)#   random-detect dscp af12 45 64
 ! Tunes WRED min and max drop-thresholds for AF12/12 to 45 and 64 packets
Router(config-pmap-c)#   random-detect dscp af13 40 64
 ! Tunes WRED min and max drop-thresholds for AF13/14 to 40 and 64 packets
Router(config-pmap-c)# class SCAVENGER
Router(config-pmap-c)#  bandwidth percent 1
 ! Constrains Scavenger to 1% CBWFQ
Router(config-pmap-c)# class class-default
Router(config-pmap-c)#  bandwidth percent 25
 ! Provisions 25% CBWFQ for default (Best-Effort) class
Router(config-pmap-c)#  fair-queue
 ! Enables fair-queuing pre-sorter on default (Best-Effort) class
Router(config-pmap-c)#  queue-limit 128 packets
 ! Expands queue-limit to 128 packets
Router(config-pmap-c)#   random-detect dscp-based
 ! Enables DSCP-based WRED on default (Best-Effort) class
Router(config-pmap-c)#   random-detect dscp default 100 128
 ! Tunes WRED min and max drop-thresholds for DF/0 to 100 and 128 packets
</code></pre>

<p>This policy has even more classes for interactive traffic and also more classes for different types of data and a management class.</p>

<p>Finally you have to apply the policy to an interface like this.</p>

<p>int gix/x
service-policy output WAN-EDGE-12-CLASS</p>

<p>Here is a link to <a href=""http://www.cisco.com/en/US/docs/solutions/Enterprise/WAN_and_MAN/QoS_SRND_40/QoSWAN_40.html"" rel=""noreferrer"">WAN QoS CVD.</a></p>
","639"
"Initial setup of hp ProCurve v1910 switch for Small Office?","11063","","<p><strong>Resolution:</strong></p>

<p>Running the <kbd>initialize</kbd> command from the initial menu on the serial port was required to get this switch to work. </p>

<p>I had upgraded the software &amp; tried various settings on the switch but something was set in a non-standard way as delivered. Also from my notes, I copied output from the serial port and noticed the prompt was initially <code>&lt;HP V1910 Switch&gt;</code> and after the reset is <code>&lt;HP&gt;</code>. </p>

<p>The <code>Device -&gt; Basic -&gt; System Name</code> value is what is in the serial prompt's brackets, as it now says <em>HP</em>. I know I never would have set the system name as <em>HP V1910 Switch</em> And I noticed in the Web UI on the initial page on the right info column under ""Product Information"" is <em>HP V1910 Switch</em>.</p>

<p>Now I'll never assume to get a piece of equipment that has been either factory reset or otherwise unaltered. </p>

<hr>

<p><strong>Original Question:</strong><br>
<sub>was <em>""Does hp ProCurve switch work without being configured?""</em></sub></p>

<p>My office is replacing a 5+ year old Dell 2716 switch with a new hp ProCurve V1910-24G but when I hook it up the same as how the Dell was, there is no routing.</p>

<p><strong>Does the ProCurve not work ""unmanaged""?</strong></p>

<p>The network I'm improving upon has a <a href=""https://serverfault.com/questions/564410/improvements-for-small-business-network"">drawing in this SF question</a>. As I transitioned to the new hp V1910-24G switch from my previous Dell 2716, it appears to not allow any connections between ports. I set the V1910's ip address and networked computers can see the V1910's webserver. I have set up the serial port on my server (via USB adapter) and <a href=""http://glazenbakje.wordpress.com/2012/08/21/hp-v1910-secret-commando-list-how-to-enable-it/"" rel=""nofollow noreferrer"">found the advanced commands</a>. The wireless router is running Tomato and I have a spreadsheet of MAC addresses and hosts as reported by its DHCP server, so I'm very much on top of what IPs are on which devices.</p>

<p>I've been digging through tutorials for the ProCurve and I figured eventually, I would set up a VLAN for the 2 VoIP boxes and then try to learn if or how its features could improve the windows computers talking to the raid server.</p>

<p>Does this switch act as a router by default?<br>
Will it play nicely with Debian server running IP tables?<br></p>

<p><strong>Is this switch overkill and I should go get a 24 port unmanaged switch?</strong><br>
I've spent so much time on the firewall server and network recabling that it's affecting the business's productivity. If I need to spend a day or two sorting out the hp, I'm inclined to not mess with it any more.</p>
","<p>When you say ""unmanaged,"" I think you mean ""default configuration.""  Yes, it works, but almost certainly not the way you would like it to.  By default, all the ports are up and in a single VLAN (vlan 1). There is no routing enabled. You can type ""show interfaces brief"" to see the status of all the ports.</p>

<p>You obviously have something more complex on your Dell switch.  If you can let us know how the Dell switch is configured, we can come up with an equivalent for the HP.</p>
","5872"
"How do you block bit torrent traffic with a Cisco ASA?","11013","","<p>I have referenced an old external Cisco article on how to block Bit torrent traffic referenced on-line <a href=""http://www.dslreports.com/forum/r21007872-How-to-lim"">Here</a></p>

<p>This procedure I have found only works 50% of the time. </p>

<p>I find blocking bit torrent specific ports, and doing the regex do work, it just does not catch all the traffic. </p>

<pre><code>object-group service bit-torrent-services tcp-udp
port-object eq 6969
port-object range 6881 6999
</code></pre>

<p>and </p>

<pre><code>regex bit-torrent-tracker "".*[Ii][Nn][Ff][Oo]_[Hh][Aa][Ss][Hh]=.*""
</code></pre>

<p>Does anyone have more up to date regex for finding bit torrent traffic?
Or does is this the limits of the ASA at this time?</p>
","<p>&lt;joke>Unplug it&lt;/joke></p>

<p>Bittorrent clients can (and do) use random ports.  Blocking the common ports will only encourage users to move to different ports.  Also, the inter-client traffic has supported encryption for some years now -- originally as a means to limit ISP interference -- making the actual p-t-p traffic unrecognizable.</p>

<p>Looking for ""info_hash"" in the client-tracker communication, while somewhat effective, is also easily defeated. (tor, ssl, vpn, etc.) It also does nothing to stop tracker-less swarms (DHT), peer-exchange (PEX), UDP tracker protocol...</p>

<p>If you've managed to kill 50%, count yourself lucky.  This is a game of whack-a-mole you cannot win.</p>
","2110"
"How does a switch learn a MAC address not in its lookup table?","10996","","<p>I have a relatively dumb question. Suppose the Switch just started, and it received a frame that contains a destination MAC address for a network device not in its MAC addresses table. </p>

<p>What happens then? Does it broadcast (MAC address <code>ff:ff:ff:ff:ff:ff</code>) and receive answers from connected devices, or is there a protocol dedicated for that which is used? I don't think the switch uses the ARP (Address Resolution Protocol)? </p>
","<p>Good question. I'll answer it with an animation:</p>

<p><a href=""https://i.stack.imgur.com/h5yvl.gif"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/h5yvl.gif"" alt=""enter image description here""></a></p>

<p>When Host A sends the frame, the switch does not have <em>anything</em> in its MAC address table. Upon receiving the frame, it records Host A's <em>MAC Address to Switch Port</em> mapping. Since it doesn't know where the destination MAC address is, it <strong>floods</strong> the frame out all ports. </p>

<p>This assures that <em>if</em> host B exists (which at this point, the switch does not know yet), that it will receive it. Hopefully, upon receiving the frame, Host B will generate a response frame, which will allow the Switch to learn the MAC address mapping from the return frame.</p>

<p>You can read more about how a Switch works <a href=""http://www.practicalnetworking.net/series/packet-traveling/host-to-host-through-a-switch/"" rel=""noreferrer"">here</a> (where I took the animation from). I would also suggest reading the entire article series for a closer look at <a href=""http://www.practicalnetworking.net/series/packet-traveling/packet-traveling/"" rel=""noreferrer"">how a packet moves through a network</a>.</p>

<p>One last note regarding the terms <em>Flooding</em> vs <em>Broadcast</em>. A switch never <em>broadcasts</em> frames, a <em>broadcast</em> is not an action a switch can take. A switch can only <em>flood</em> a frame. A <em>broadcast</em> is simply a frame with a destination MAC address of <code>ffff.ffff.ffff</code>.  This is often confused because the end effect is the same, but <a href=""http://www.practicalnetworking.net/series/packet-traveling/host-to-host-through-a-switch/#broadcasts"" rel=""noreferrer"">they are actually different</a>.</p>
","29325"
"Why we need IP address on LAN if switches can't read IP addresses","10989","","<p>A beginner question: Why we need to assign IP addresses on LAN if switches are not able to read them? Because of ARP (Address Resolution Protocol)? But Switches can't send ARP requests (switches can't read ipv ), right? Who sends the ARP request then? </p>
","<p>An IP address on a true layer 2 only switch is used for management (accessing the CLI remotely, sending SNMP traps, logging, TACACS/RADIUS, etc.).  The IP address on the switch is in no way required for the switch to actually do its job, which is to switch frames.</p>
","8005"
"How can hosts on two different VLANs communicate?","10940","","<p>It is clear that hosts on two different VLANs can't directly communicate on a single switch, but how do they communicate to each other at all? Do they use a router? How does it work?</p>
","<p>Two separate VLANs must communicate through a layer-3 device, like a router.</p>

<p>Devices on a VLAN communicate with each other using layer-2. Layer-3 must be used to communicate between separate layer-2 domains.</p>

<p>Assuming the most common communications (layer-2 is ethernet and layer-3 is IP), when a host on a VLAN wants to communicate with another host on the same VLAN, it discovers the other hosts layer-2 (e.g. MAC) address with something like ARP, and it sends the frame to the MAC address.</p>

<p>When a host on one VLAN wants to send something to a host on another VLAN, it must use a layer-3 (e.g. IP) address. The host will use layer-2 to send the frames to its defined gateway (router). The router will strip off the layer-2 frame and inspect the layer-3 packet for the destination layer-3 address. The router will then look up the next hop for the layer-3 address. It will then create a new layer-2 frame for the layer-3 packet based on the layer-2 LAN on the interface where it needs to send the packet for the next hop. Other routers which may be in the path to the end LAN will repeat this process until the frame is placed on the final VLAN, where the receiving host gets the frame.</p>

<p>You should search for the OSI model and learn how it works. Just remember that it is a model, and some things in the real world don't necessarily work exactly like the model would predict, but it will give you a gross understanding of how data travel from an application on one host to an application on another host.</p>
","28447"
"How to factory reset IOS-XR?","10936","","<p>I want to factory reset IOS-XR. The router used is ASR9000</p>

<p>I'm used to do that easily in IOS doing <code>config-register 0x2102</code>, <code>write erase</code> followed by a reload.  </p>

<p>I search on <a href=""http://www.cisco.com/en/US/docs/ios_xr_sw/iosxr_r3.4/system_management/command/reference/yr34book.pdf"" rel=""nofollow"">documentation</a>, but found no explicit information. What is the correct method for doing a factory reset on the ASR9k running IOS-XR?</p>
","<p>To factory reset the ASR, I found the way <a href=""https://supportforums.cisco.com/thread/2074051"" rel=""nofollow"">here</a><br>
We only need to apply this command </p>

<blockquote>
  <p>commit replace best-effort</p>
</blockquote>

<p>As we don't have any configuration file target, actual configuration will be substitute with an empty file</p>

<p><a href=""http://www.cisco.com/en/US/docs/ios_xr_sw/iosxr_r3.5/system_management/command/reference/yr35conf.html#wp1463440"" rel=""nofollow"">Documentation</a></p>
","1463"
"Stuck at GRE troubleshooting with recursive route","10882","","<p>As with my last question, I am learning for my CCNA exam and currently I am bashing my head against the wall, while trying to solve ""7.2.2.4 Troubleshooting GRE""</p>

<p>I'll explain the topology in a second. First let me document, which steps I have taken so far:</p>

<ol>
<li>RA's Ip addresses on t0 and G0/0 were switched. I corrected them</li>
<li>RA's tunnel 0 interface had the wrong source and destination addresses. I set them to s:172.31.0.1 d: 192.168.1.1</li>
</ol>

<p>Now, on RB theres this message: </p>

<pre><code> %LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel0, changed state to up
 %ADJ-5-PARENT: Midchain parent maintenance for IP midchain out of 0 65E900C0 - looped chain attempting to stack
 %TUN-5-RECURDOWN: 0 temporarily disabled due to recursive routing
</code></pre>

<p>Topology:</p>

<p><img src=""https://i.stack.imgur.com/Jclpz.jpg"" alt=""GRE topology""></p>

<p>Every IP address/network address as shown on the image is correct.</p>

<p>This is <code>show interface tunnel 0</code> on RA:</p>

<pre><code>Tunnel0 is up, line protocol is up (connected)
  Hardware is Tunnel
  Internet address is 192.168.1.1/30
  MTU 17916 bytes, BW 100 Kbit/sec, DLY 50000 usec,
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation TUNNEL, loopback not set
  Keepalive not set
  Tunnel source 172.31.0.1 (GigabitEthernet0/0), destination 192.168.1.2
  Tunnel protocol/transport GRE/IP
</code></pre>

<p><code>Show interface tunnel 0</code> on RB:</p>

<pre><code>Tunnel0 is up, line protocol is up (connected)
  Hardware is Tunnel
  Internet address is 192.168.1.1/30
  MTU 17916 bytes, BW 100 Kbit/sec, DLY 50000 usec,
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation TUNNEL, loopback not set
  Keepalive not set
  Tunnel source 172.31.0.1 (GigabitEthernet0/0), destination 192.168.1.2
  Tunnel protocol/transport GRE/IP
    Key disabled, sequencing disabled
    Checksumming of packets disabled
</code></pre>

<p><code>Show ip route</code> on RA:</p>

<pre><code>Gateway of last resort is 0.0.0.0 to network 0.0.0.0

     172.31.0.0/16 is variably subnetted, 2 subnets, 2 masks
C       172.31.0.0/24 is directly connected, GigabitEthernet0/0
L       172.31.0.1/32 is directly connected, GigabitEthernet0/0
     192.168.1.0/24 is variably subnetted, 2 subnets, 2 masks
C       192.168.1.0/30 is directly connected, Tunnel0
L       192.168.1.1/32 is directly connected, Tunnel0
     209.165.122.0/24 is variably subnetted, 2 subnets, 2 masks
C       209.165.122.0/30 is directly connected, Serial0/0/0
L       209.165.122.2/32 is directly connected, Serial0/0/0
S*   0.0.0.0/0 is directly connected, Serial0/0/0
</code></pre>

<p><code>Show ip route</code> on RB:</p>

<pre><code>Gateway of last resort is 0.0.0.0 to network 0.0.0.0

     64.0.0.0/8 is variably subnetted, 2 subnets, 2 masks
C       64.103.211.0/30 is directly connected, Serial0/0/0
L       64.103.211.2/32 is directly connected, Serial0/0/0
     172.31.0.0/16 is variably subnetted, 2 subnets, 2 masks
C       172.31.1.0/24 is directly connected, GigabitEthernet0/0
L       172.31.1.1/32 is directly connected, GigabitEthernet0/0
     192.168.1.0/32 is subnetted, 1 subnets
L       192.168.1.2/32 is directly connected, Tunnel0
S*   0.0.0.0/0 is directly connected, Serial0/0/0
</code></pre>

<p>Please help me understand this error by explaining what I am missing here and how to resolve this.</p>

<p>Kind regards.</p>

<p>**//EDIT: ** The task which needs to be fullfilled is that traffic from the 172.31.x.x networks on both sides needs to be tunneled.</p>

<p>//EDIT2: As it turns out Iw as talking Bullsh**. Here are the steps taken so far:</p>

<ol>
<li>RA's Ip addresses on t0 and G0/0 were switched. I corrected them</li>
<li><p>RA's tunnel 0 interface had the wrong source and destination addresses. I set them to s:172.31.0.1 d: 192.168.1.1</p></li>
<li><p>Changed Source address of tunnel 0 on RA to <code>172.31.0.1</code></p></li>
<li>Changed Destination address of tunnel 0 on RB to <code>209.165.122.2</code></li>
<li><code>copy run start</code> on RB and then <code>reload</code></li>
<li>Tunnel 0 on RB is now  up and connected.</li>
</ol>

<p>//EDIT3:</p>

<p>I finally worked it out. I went back in my curriculum to an earlier task, which did guide me through the whole configuration task.</p>

<p>The source on both routers for the tunnel is the <code>S0/0/0</code> interface and the destination is the other routers <code>S0/0/0</code> interface IP address.
This is highly counter intuitive, since in my head I was under the impression, the source is the traffic form the local LANs (the 172 interfaces), since the traffic from there needs to be tunneled.</p>

<p>Just for good measure I added 2 static routes for both routers, to make sure the packets get routed this way in case OSPF / EIGRP or RIP think otherwise.</p>

<p>I have upvoted both answers, but accepted Ron's, since he answered first with a correct set up.</p>
","<p>Serv,</p>

<p>Your tunnel source and destination addresses are wrong.  They should be 209.165.122.2 and 64.103.211.2 on RA and the opposite on RB. </p>

<p>There are many different ways to explain this, but essentially, the route to the tunnel endpoint cannot be through the tunnel.  In your case, in order to send a packet (from RA) to 192.168.1.2, RA has to encapsulate it in a GRE packet and then send it to the tunnel destination.  But the route to the tunnel destination is through the tunnel itself.  that is not allowed because you would be infinitely encapsulating the packet.</p>

<p>Another explanation (metaphor):</p>

<p>Think of a bridge being built across a river. the bridge engineers need to know where on each side of the river to put the bridge. Once they have built the bridge, you can route people to use the bridge to get to the other side. But that is separate from where the bridge has to be built.</p>

<p>The bridge (tunnel) is built from RA's s0/0/0 interface to RB s0/0/0. Once the tunnel is up, you can then route traffic from 172.31.x.x through the tunnel.
In other words, building the tunnel is separate from routing traffic through the tunnel.</p>
","5991"
"how to block ssh tunneling traffic?","10864","","<p>if someone were to set up an ssh tunnel to/from work or home, is there a way to prevent future SSH tunneling traffic?</p>

<p>I understand that websense can block traffic, but users who use ssh tunneling can bypass websense or other similar products because it can't decrypt or look further in the packet to tell the difference between legitimate or illegitimate traffic.</p>

<p>from some reading and research, I found that some things you can do are the following:
- turn off SSH altogether; not allowed at all
- restrict ssh access to only users who need them for access and deny everyone else ssh access
- create a custom protocol to blacklist or whitelist ssh traffic by destination (assuming the lists are mangeable)
- review logs for ssh traffic, review the destination IPs and check if they resolve to legitimate or allowable devices or not, or check whether there's more regular internet traffic than tunneling traffic and you can deny/blacklist that IP</p>

<p>But I was wondering, besides these options, would it be possible to circumvent the above options through a man-in-the-middle attack?</p>

<p>Or is there another option to block ssh tunneling traffic or even some network device that can filter/block this traffic?</p>

<p>thanks for the help.</p>
","<p>Preventing outbound ssh connections, and thus any tunnels, would require a <em>complete</em> blockade of outbound connections via deep packet inspection.  Looking at ports will be 100% useless.  You have to look at the actual packet payload to know it's SSH. (this is what websense is doing.)</p>

<p>The only other option is setting up a ""proxy"" host.  Lock down the configuration so the ssh client <em>and</em> server will not allow tunneling, then allow only that machine to make outbound ssh connections -- of course, this includes securing the system as well, otherwise people can run whatever ssh software they want.</p>
","1774"
"Cisco IP Phone 7900 Series - Auth Fail on boot","10831","","<p>I have several hundred Cisco 7900 series IP phones, (7911, 7942, and 7962 models) that have been sitting on the shelf as replacement stock for several years.</p>

<p>Now as we deploy them, we are experiencing some odd firmware issues.   When they are booting up, the phones attempt to upgrade via TFTP to the current firmware specified in <a href=""/tags/cucm"" title=""Cisco Unified Communications Manager"">CUCM</a>, but they fail and display ""Auth Fail"" on their screen.  Then the phones reboot and come up on the previous factory firmware load on the device.</p>

<p>Am I running into a firmware bug of some kind?</p>

<ul>
<li>CUCM 7.1.3</li>
<li>SCCP Firmware on phones 8.3(2)</li>
</ul>
","<p>Most likely this is caused by a phone running on a firmware older than 8.5(2) being upgraded to something newer.  This is a known issue, documented in the release notes for SCCP firmware release <a href=""http://www.cisco.com/en/US/customer/docs/voice_ip_comm/cuipph/firmware/8_5_2/english/release/notes/7900_852SR1.html#wp57602"" rel=""nofollow"">8.5.(2)SR1</a>:</p>

<blockquote>
  <p>For all SCCP firmware upgrades from firmware release versions earlier
  than 8.3(3) to version 8.5(2)SR1 or greater, you must first upgrade
  your firmware to version 8.5(2). Once you have upgraded to version
  8.5(2), you can upgrade your IP Phone to version 8.5(2)SR1 or later.</p>
</blockquote>

<p>So, assuming you're using CUCM, you can approach this several ways.</p>

<p>I recommend uploading the 8.5(2) firmware files to your TFTP server.  Once you have the 8.5(2) firmware on your TFTP server, you can do the following (Cisco has a more in depth ""How-To"" located on their <a href=""https://supportforums.cisco.com/docs/DOC-11587"" rel=""nofollow"">Support Forums</a>):</p>

<ol>
<li>Open device in CUCM, find the field ""Phone Load Name"" under Device Information.</li>
<li>Manually assign the phone to use 8.5(2) firmware by entering ""SCCPXX.8-5-2S"" where XX is the model of the phone. (11 for 7911, 42 for 7942, etc. but note that 7962 and 7965 models still use the ""42"" or ""45"" firmware respectively.)</li>
<li>Apply configuration and allow phone to upgrade to 8.5(2).</li>
<li>Remove manual Phone Load entry, apply configuration again and phone will upgrade to current release specified globally in CUCM.</li>
</ol>

<p>This will allow you to resolve the issue on a phone-by-phone basis.</p>
","1849"
"How to ""size"" a Router for a Given Uplink","10792","","<p>I'm the tech guy for a small business. (15 office computers, ~15 staff BOYD's, ~30 guest devices.) I'm looking to replace our Asus RT-N53 with a business class router and two access points each servicing a private and a guess SSID on separate VLANs. We currently have 35 Mbps down, 7 Mbps up, internet service with intentions to upgrade to a faster package or provider in the near future.</p>

<p>I've been looking at Cisco's router offerings, and their <a href=""https://supportforums.cisco.com/sites/default/files/legacy/7/2/6/134627-white_paper_c11_595485.pdf"" rel=""nofollow"">""ISR G2 Performance Overview"" whitepaper</a></p>

<p>At the end of the whitepaper, (Table 8 and Figure 1) it summarizes multi-service tests and overall ""performance positioning"" in terms of max WAN-throughput. The multi-services listed are approximate to the services we'd be running on the router.</p>

<p>[Edit:] Questions: </p>

<p>1) Table 8's numbers are Cisco's attempt to simulate real-world performance, Figure 1's numbers are an RFC-2544 NDR measure of CPU performance, correct?</p>

<p>2) Given the above is correct, should I take one of these numbers literally, in that if I wanted to fully utilize a 100 Mbps connection I'd need to chose a router with a listed value of at least 100 Mbps in Table 8?</p>

<p>3) Or will real-world performance issues (such as if most of the bandwidth was from a single computer running a backup) not stress the router in the same way as Cisco's tests do?</p>
","<p>Apologies for the delay in my response, I just got back from vacation...</p>

<blockquote>
  <p>I'm looking to replace our Asus RT-N53 with a business class router and two access points each servicing a private and a guess SSID on separate VLANs. We currently have 35 Mbps down, 7 Mbps up, internet service with intentions to upgrade to a faster package or provider in the near future.<br>
  ...<br>
  1) Table 8's numbers are Cisco's attempt to simulate real-world performance, correct?</p>
</blockquote>

<p>On this point, you are correct.  Table 8 illustrates how the router would perform using a realistic combination of ""enterprise"" features.</p>

<p><img src=""https://i.stack.imgur.com/l19nr.png"" alt=""Table8 - Unidirectional Feature Traffic test""></p>

<p>Specifically, Table 8 (shown above) uses a custom <a href=""http://en.wikipedia.org/wiki/Internet_Mix"" rel=""nofollow noreferrer"" title=""Internet Mix packet distribution"">IMIX</a> (average packet size: 409 bytes) traffic stream as defined in this paper:</p>

<ul>
<li>61 packets at 64 bytes (ethernet frame size), 3904 bytes total [10.13% by bytes]</li>
<li>24 packets at 594 bytes (ethernet frame size), 11856 bytes total [30.77% by bytes]</li>
<li>15 packets at 1518 bytes (ethernet frame size), 22770 bytes total [59.09% by bytes]</li>
</ul>

<p>Given that <a href=""http://en.wikipedia.org/wiki/Internet_Mix"" rel=""nofollow noreferrer"" title=""Internet Mix packet distribution"">IMIX</a> distribution, they send <em>unidirectional</em> traffic using pre-defined NAT + HQoS + ACL configurations on the router, until the CPU reaches 75% load.</p>

<p>Take special note of the unidirectional nature of the test traffic, this unidirectional traffic is relevant to the next answer.</p>

<hr>

<blockquote>
  <p>Figure 1's numbers are an RFC-2544 NDR measure of CPU performance, correct?</p>
</blockquote>

<p>This is not correct; <em>Figure 1</em> recommends an <a href=""http://www.cisco.com/c/en/us/products/routers/2900-series-integrated-services-routers-isr/series-comparison.html"" rel=""nofollow noreferrer"" title=""Cisco ISR G2 Router"">ISR G2</a> model based on Table 8, which is not a 2544 NDR test.  RFC 2544 NDR tests typically run at about 90% CPU or higher.  Table 8 gives you a performance sample at 75% CPU.</p>

<p>By way of comparison, let's look at the RFC 2544 NDR test results shown in <em>Table 1</em>:</p>

<p><img src=""https://i.stack.imgur.com/baE64.png"" alt=""Table1 - RFC2544 NDR""></p>

<p><em>Table 1</em> shows the Cisco 3945E can handle up to 8.675 Gbps of RFC 2544 NDR traffic; however, <em>Figure 1</em> merely recommends it for a 350Mbps circuit.</p>

<p><img src=""https://i.stack.imgur.com/9Ym6M.png"" alt=""Figure1 - ISR G2 recommendation""></p>

<p>There are a few of implied realities in Figure 1:</p>

<ul>
<li>The <a href=""http://www.cisco.com/c/en/us/products/routers/2900-series-integrated-services-routers-isr/series-comparison.html"" rel=""nofollow noreferrer"" title=""Cisco ISR G2 Router"">ISR G2</a> switches packets in software, instead of ASIC-based packet forwarding.  Because the <a href=""http://www.cisco.com/c/en/us/products/routers/2900-series-integrated-services-routers-isr/series-comparison.html"" rel=""nofollow noreferrer"" title=""Cisco ISR G2 Router"">ISR G2</a> packet-per-second performance degrades as you turn on features, you should take this into consideration.</li>
<li>Enterprise networks need more features than you would enable in the typical RFC 2544 NDR test</li>
<li>Enterprise networks usually send a mix packet sizes, as represented by <a href=""http://en.wikipedia.org/wiki/Internet_Mix"" rel=""nofollow noreferrer"" title=""Internet Mix packet distribution"">IMIX</a> packet distributions</li>
<li>Enterprise traffic is bi-directional, but they often upgrade the router before hitting 100% circuit utilization.</li>
<li>Enterprise networks don't want their <a href=""http://www.cisco.com/c/en/us/products/routers/2900-series-integrated-services-routers-isr/series-comparison.html"" rel=""nofollow noreferrer"" title=""Cisco ISR G2 Router"">ISR G2</a> router running at more than 80% CPU for sustained periods of time.</li>
</ul>

<p>To be explicit, real networks have to use <a href=""http://en.wikipedia.org/wiki/Network_address_translation#One-to-many_NAT"" rel=""nofollow noreferrer"">NAT</a> (to conserve IPv4 address space), <a href=""http://www.cisco.com/go/qos"" rel=""nofollow noreferrer"">QoS</a> to prioritize VoIP traffic, and <a href=""http://www.cisco.com/c/en/us/support/docs/security/ios-firewall/23602-confaccesslists.html"" rel=""nofollow noreferrer"">ACL</a>s for basic security.   Every time you enable a feature like this, you're sucking packet processing power from the router; that's why there is such a big difference between the Cisco 3945E numbers shown in Table 1 (8675 Mbps) vs Table 8 (668 Mbps).</p>

<p>Depending on your perspective:</p>

<ul>
<li>Cisco is doing you a favor by giving you a recommendation in Figure 1, based on bi-directional traffic using typical enterprise features.</li>
<li>Cisco is doing themselves a favor by basing recommendations on such a rich combination of features.  Not all customers will need <a href=""http://en.wikipedia.org/wiki/Network_address_translation#One-to-many_NAT"" rel=""nofollow noreferrer"">NAT</a>, <a href=""http://www.cisco.com/go/qos"" rel=""nofollow noreferrer"">QoS</a> or <a href=""http://www.cisco.com/c/en/us/support/docs/security/ios-firewall/23602-confaccesslists.html"" rel=""nofollow noreferrer"">ACL</a>s on a WAN circuit; furthermore, the assumptions in the <a href=""http://en.wikipedia.org/wiki/Internet_Mix"" rel=""nofollow noreferrer"" title=""Internet Mix packet distribution"">IMIX</a> traffic they used may not be valid in your case.  If they upsell you on a more powerful router than you need, that is obviously profit for them.</li>
</ul>

<hr>

<blockquote>
  <p>2) Given the above is correct, should I take one of these numbers literally, in that if I wanted to fully utilize a 100 Mbps connection I'd need to chose a router with a listed value of at least 100 Mbps in Table 8?</p>
</blockquote>

<p>No based on <em>Figure 1</em>, you should select the <a href=""http://www.cisco.com/c/en/us/products/collateral/routers/2900-series-integrated-services-routers-isr/data_sheet_c78_553896.html"" rel=""nofollow noreferrer"" title=""Cisco 2951 ISR G2 Router"">Cisco 2951</a> or <a href=""http://www.cisco.com/c/en/us/products/routers/3925-integrated-services-router-isr/index.html"" rel=""nofollow noreferrer"" title=""Cisco 3925 ISR G2 Router"">Cisco 3925</a>; this assumes that you really will need <a href=""http://en.wikipedia.org/wiki/Network_address_translation#One-to-many_NAT"" rel=""nofollow noreferrer"">NAT</a>, <a href=""http://www.cisco.com/go/qos"" rel=""nofollow noreferrer"">QoS</a>, and <a href=""http://www.cisco.com/c/en/us/support/docs/security/ios-firewall/23602-confaccesslists.html"" rel=""nofollow noreferrer"">ACL</a>s on that 100Mbps circuit.</p>

<p>The <a href=""http://www.cisco.com/c/en/us/products/collateral/routers/2900-series-integrated-services-routers-isr/data_sheet_c78_553896.html"" rel=""nofollow noreferrer"" title=""Cisco 2951 ISR G2 Router"">Cisco 2951</a> is a little light for this application at an average <a href=""http://en.wikipedia.org/wiki/Internet_Mix"" rel=""nofollow noreferrer"" title=""Internet Mix packet distribution"">IMIX</a> packet size of 409 bytes + features.  If you aren't going to turn on a lot of features, or your average packet size will be much higher (as I'd expect for backup traffic), then you can get by with the <a href=""http://www.cisco.com/c/en/us/products/collateral/routers/2900-series-integrated-services-routers-isr/data_sheet_c78_553896.html"" rel=""nofollow noreferrer"" title=""Cisco 2951 ISR G2 Router"">Cisco 2951</a> (or even smaller - see my next answer).</p>

<hr>

<blockquote>
  <p>3) Or will real-world performance issues (such as if most of the bandwidth was from a single computer running a backup) not stress the router in the same way as Cisco's tests do?</p>
</blockquote>

<p>This is a judgement call, and I don't have enough information to say.  If you'd like to join me in <a href=""http://chat.stackexchange.com/rooms/11177/general-network-engineering-recommendations"">NE chat</a>, I could walk you through some questions to isolate this further.</p>

<p>The biggest question I have is whether you would need 100Mbps any time other than your PC backup case.  Leveraging the reality that your average packet size is high for backup traffic, one could potentially buy an even smaller router than the <a href=""http://www.cisco.com/c/en/us/products/collateral/routers/2900-series-integrated-services-routers-isr/data_sheet_c78_553896.html"" rel=""nofollow noreferrer"" title=""Cisco 2951 ISR G2 Router"">Cisco 2951</a> if you police the traffic to the systems other than the one that needs 100Mbps for backup traffic.  That said, now we are talking about a more complicated configuration; perhaps you have the money to burn on a <a href=""http://www.cisco.com/c/en/us/products/routers/3925-integrated-services-router-isr/index.html"" rel=""nofollow noreferrer"" title=""Cisco 3925 ISR G2 Router"">Cisco 3925</a> and don't want to deal with configuration complexities.</p>

<p>Finally think about site growth... if this site grows rapidly, or people are prone to changing their minds about requirements on a whim, just buy the <a href=""http://www.cisco.com/c/en/us/products/routers/3925-integrated-services-router-isr/index.html"" rel=""nofollow noreferrer"" title=""Cisco 3925 ISR G2 Router"">Cisco 3925</a> and be done with it :-).</p>
","9813"
"How to test layer 2 connectivity on Cisco Switch?","10767","","<p>I'm testing a new FTTH CPE in our lab. A Cisco ME3400 switch. So far I'm having issues in provisioning them. I have activated DHCP debugging to see the DHCP packets.</p>

<p>I wonder how can I test to know if there is layer 2 connectivity between the CPE and ME3400?</p>

<p>Some output : </p>

<blockquote>
  <p>ME3400#sh int fa0/1
  FastEthernet0/1 is up, line protocol is up (connected) 
   Hardware is Fast Ethernet, address is 0023.05ab.c883 (bia 0023.05ab.c883)</p>
  
  <p>ME3400#sh mac address-table </p>
  
  <p>Vlan    Mac Address       Type        Ports<br>
  ----    -----------       --------    -----<br>
  All    0100.0ccc.cccc    STATIC      CPU<br>
  ...<br>
    1    XXXX.XX29.c942    DYNAMIC     Gi0/1<br>
    1    XXXX.XXe4.0bdd    DYNAMIC     Gi0/1<br>
    1    XXXX.XX70.113e    DYNAMIC     Gi0/1<br>
   10    XXXX.XXa1.4ca0    DYNAMIC     Fa0/1  </p>
</blockquote>
","<p>If you see MAC address is 'mac address-table' you have L2 connectivity. So nothing wrong in your test methodology.</p>
","1197"
"How do I configure a port as STP ""non-edge"" on Juniper EX switches?","10725","","<p>Juniper EX switches automatically categorize a port as an spanning-tree ""<a href=""https://www.juniper.net/techpubs/en_US/junos11.4/topics/concept/layer-2-services-stp-guidelines-statement-interface-edge-port.html"">edge</a>"" (there should only be one device behind the port) or ""non-edge"" (another switch) port. You can force this mode for a port by configuring</p>

<pre><code>set protocols &lt;stp-protocol&gt; interface &lt;interface&gt; edge
</code></pre>

<p>Normally an edge port transitions to a non-edge port when it receives a BPDU. As a security feature we also have <code>bpdu-block-on-edge</code> enabled, which will shut down an edge port that receives BPDUs.</p>

<p>This is fine unless you want another switch to take over as root bridge. In that case you have port(s) that suddenly start receiving BPDUs (when the new root bridge is activated) and consequently these ports are shut down.</p>

<p>My question is: Is there a way to configure a port explicitly as a ""non-edge"" port?</p>

<p>The workaround right now is to disable the <code>bpdu-block-on-edge</code> feature while the STP converges around the new root bridge.</p>
","<p>The solution is somewhere else in the configuration tree and quite hard to find in my opinion. You can disable bpdu-block on a specific port even while <code>bpdu-block-on-edge</code> is enabled:</p>

<pre><code>set ethernet-switching-options bpdu-block interface &lt;interface&gt; disable
</code></pre>
","34355"
"Packet sniffing promiscuously on MacBook Air","10649","","<p>I'm on a MacBook air, and I got a book form the library about wireless network security. I've been following pretty diligently, but it seems like no matter what I do I <strong>cannot capture packets of other devices on my network</strong>. </p>

<p>I've tried using WireShark, with the ""promiscuous"" box checked, on my en0 interface. (en0 is the only internet interface on a macbook air, the other options being loopback, and peer to peer).</p>

<p>I've added the wireless SSID and password to wireshark, and applied that change, I also tried disconnecting and reconnecting my iPhone to the network several times, hoping to pick up the traffic from there.</p>

<p>The last try: I used the raw tcpdump command as root, with and without the <code>-p</code> flag (without <code>-p</code> means run in promiscuous mode), and then analyzed the packets from the pcap file, which there were plenty of, just not any from any other machines. </p>

<p>Clearly there is something I am missing, maybe some kind of internal configuration deal. I would really appreciate help on this, it would make a great demo for job interviews, and would be an awesome skill to have. </p>
","<blockquote>
  <p>I've tried using WireShark, with the ""promiscuous"" box checked, on my en0 interface.</p>
</blockquote>

<p>You say ""en0"", so you're running OS X (rather than, for example, Linux), so the ""monitor mode"" checkbox should work, and you're on a MacBook Air, so that's your AirPort interface, i.e. it's an 802.11 interface.  ""Promiscuous"" mode doesn't necessarily work the way you'd want on 802.11 interfaces, so you need ""monitor"" mode.</p>

<p>Try checking the monitor mode checkbox, <em>but</em> note that, in monitor mode, traffic won't be decrypted if you're on a ""protected"" (WEP or WPA/WPA2) network; see <a href=""http://wiki.wireshark.org/HowToDecrypt802.11"">the Wireshark Wiki ""How to decrypt 802.11"" page</a> for details on how to decrypt the traffic.</p>

<p>If you want to use a command-line tool such as tcpdump or TShark, use the <code>-I</code> command-line flag to turn monitor mode on.</p>
","2856"
"10GBase-T vs. SFP+ Direct Attach","10567","","<p>What are the advantages and disadvantages of using 10GBase-T vs. SFP+ Direct Attach to interconnect devices where distance is not a determining factor?</p>
","<p>You'll find discussion of this elsewhere - see <a href=""https://serverfault.com/questions/195111/why-would-i-choose-copper-over-sfp-for-10gbe"">'Why would I choose Copper over SFP+ for 10GbE?'</a> - but broadly speaking SFP+ DA is, ignoring distance:</p>

<ul>
<li>Cheaper at the adapter side.</li>
<li>Lower power and latency.</li>
<li>Gives added flexibility if you need to move to fibre later.</li>
</ul>

<p>10GBase-T on the other hand is:</p>

<ul>
<li>Cheaper at the connector side - patch leads being cheaper than SFP+ DA cables</li>
<li>Somewhat easier to work with physically - SFP+ DA cables tend to be a bit thick, bulky and can be a pain to route through cable management in my experience, though to an extent this depends on type (passive vs. active) and manufacturer.</li>
<li>More flexible in that the same cable plant can be used for 10/100/1000.</li>
</ul>

<p>I've been watching the field for a while, and it doesn't seem like there's consensus on the ""best"" option yet - networking, server and adapter vendors seem to be hedging their bets.</p>

<p>For what it's worth, we went with SFP+ DA in a top-of-rack configuration, largely due to the ability to mix copper/fibre on the same device. Whether this is applicable for your environment will depend on the number of ports and nature of the network you're building.</p>

<p>One final point: if you do some reading on this, finding objective, unbiased opinion is hard - a lot of the commentary and claims are by people with vested financial interest in encouraging one or other option. As an example, compare and contrast:</p>

<hr>

<p>Further Reading:<br>
<a href=""http://www.eetimes.com/document.asp?doc_id=1278743"" rel=""nofollow noreferrer"">Face off: 10GBase-T and SFP+ Direct Attach</a><br>
<a href=""http://www.datacenterknowledge.com/archives/2012/11/27/data-center-infrastructure-benefits-of-deploying-sfp-fiber-vs-10gbase-t/"" rel=""nofollow noreferrer"">Benefits of Deploying SFP+ Fiber vs. 10GBase-T</a></p>
","6121"
"How to use tcp-udp objects in a single ACL?","10502","","<p>I have a service object group of type 'tcp-udp'.  When creating an ACL based around this, I don't have the option of type 'tcp-udp'.  I'm trying to figure out what the point of tcp-udp groups are, if at the end of the day you still have to make two ACL's one for tcp and one for udp.  Is there a way to make one ACL for groups of this nature.. for instance:</p>

<pre><code>access-list crypto_1 extended permit ip any any object-group APP_tcp_udp_group
</code></pre>
","<p>If you are using a Cisco PIX 6.2(2) and later or ASA 7.0 and later as your firewall you can do the following:</p>

<p>Create an object-group service, but don't specify tcp-udp after you name it.  </p>

<p>Once you hit enter you will be able to use the service-object command to define what udp, tcp, or tcp-udp ports you want, as well as if it is a source or destination port.</p>

<p>Then you can use that object-group after your permit/deny command when you create your ACL.</p>

<p>Here is what I setup in my lab:</p>

<pre><code>object-group service LabTest
     service-object udp destination eq domain
     service-object tcp-udp destination eq www

access-list TestACL extended permit object-group LabTest any any
</code></pre>

<p>When you do a ""show access-list TestACL"" the following will show:</p>

<pre><code>access-list TestACL line 1 extended permit object-group LabTest any any (hitcnt=0) 
access-list TestACL line 1 extended permit udp any any eq domain (hitcnt=0) 
access-list TestACL line 1 extended permit tcp any any eq www (hitcnt=0) 
access-list TestACL line 1 extended permit udp any any eq www (hitcnt=0) 
</code></pre>

<p>since my service-object for destination www was tcp-udp it created 2 lines in my ACL.</p>

<p>I used the following link to help create my lab:
<a href=""http://www.cisco.com/en/US/products/hw/vpndevc/ps2030/products_tech_note09186a00800d641d.shtml"">Using and Configuring PIX/ASA/FWSM Object Groups</a></p>
","5199"
"Is a DHCP offer packet a broadcast or unicast?","10500","","<p>DHCP OFFER is a layer3 broadcast because the server don't know client Ip, but server knows the client mac address. So how it would be the broadcast?</p>

<p>If anyone ask me about this? how should I answer?  can i say its layer3 broadcast and layer2 unicast</p>
","<p>Be aware of the broadcast flag, see <a href=""https://www.ietf.org/rfc/rfc2131.txt"" rel=""nofollow"">RFC2131</a> (page 24):</p>

<blockquote>
  <p>A client that cannot receive unicast IP datagrams until its
  protocol
      software has been configured with an IP address SHOULD set the
      BROADCAST bit in the 'flags' field to 1 in any DHCPDISCOVER or
      DHCPREQUEST messages that client sends.  The BROADCAST bit will
      provide a hint to the DHCP server and BOOTP relay agent to broadcast
      any messages to the client on the client's subnet.</p>
</blockquote>
","16952"
"HP 2920 - Can stack without stacking module?","10441","","<p>Is it possible to stack HP 2920 switches via ethernet connections (without add-in stacking modules)? I've consulted several of the docs on HPs site but can't find a definitive answer. I have older switches that are stacked this way.</p>
","<p>I attempted to stack the switches referencing the guides provided, but the commands were invalid, seemingly not applying to this device. I upgraded to the latest firmware to be sure it wasn't from having an old version. No luck.</p>

<p>I contacted HP support which told me this:</p>

<blockquote>
  <p>The stacking on this switch is different than the other procurve switches. There needs to be a stacking module attached to the switch to enable stacking. </p>
</blockquote>

<p>So it appears that <strong>a stacking module is required to stack the 2920</strong>. Thanks for all the help. I'm going to buy stack modules now. I'm not sure how this will interact with other procurve switches in a stack. I wish the guides were more clear about all this up-front but maybe this posting will help others.</p>
","7005"
"How do you throttle Dropbox Traffic?","10420","","<p>It appears that Dropbox uses Amazon AWS for it's storage, so I am not able to just block or trottle traffic to dropbox.com </p>

<p>Since there are a lot of web services that rely on AmazonAWS, I cannot just block that domain. </p>

<p>Do you have any suggestions on how to handle dropbox traffic? </p>

<p>I am working from a cisco ASA, but I suspect this applies to all firewall managers</p>
","<p>Update your firewall to one that knows applications (commonly called ""Next Generation Firewalls"" these days). Palo Alto Networks is a good example. Instead of opening your firewall to IP-based destinations, you allow the application ""Dropbox"" and don't care about the destination. You are also able to put some QoS on top of Dropbox. For example, you could create a QoS policy that gives Dropbox a maximum of 5 mbps bandwidth. </p>

<p>A lot of other Firewall vendors have come up with similar solutions to the one of Palo Alto Networks. I know that Juniper SRX and Checkpoint do it now, not sure about Cisco though. The important thing is that your firewall understands applications (on layer 7) versus just layer3/4.</p>
","2146"
"Which Python modules are you using for network management and automation?","10405","","<p>I was wondering if anyone has some favorite modules for doing things like SNMP, CLI screen scraping, netconf, etc...</p>
","<p>I just started playing with <a href=""https://readthedocs.org/projects/trigger/"">Trigger</a> and I have to say I've really enjoyed it.  It's quite a powerful network engineer toolkit and their documentation is awesome.  While we primarily have Cisco it does support other vendors such as Juniper and Brocade, they have a list of vendors in their <a href=""https://trigger.readthedocs.org/en/latest/"">docs</a></p>
","491"
"Why does the host in VLAN X flap between ports if LACP is configured?","10323","","<p><strong>Aim</strong></p>

<p>The aim is to setup LACP.</p>

<p><strong>/etc/modprobe.d/bonding.conf</strong></p>

<pre><code>alias bond0 bonding
options bond0 miimon=100 mode=4 lacp_rate=1
</code></pre>

<p><strong>/etc/sysconfig/network-scripts/ifcfg-bond0</strong></p>

<pre><code>ONBOOT=yes
BOOTPROTO=static
USERCTL=no
DEVICE=bond0
IPADDR=X
GATEWAY=Y
PREFIX=24
</code></pre>

<p><strong>/etc/sysconfig/network-scripts/ifcfg-eth0</strong></p>

<pre><code>ONBOOT=yes
BOOTPROTO=static
USERCTL=no
DEVICE=eth0
MASTER=bond0
SLAVE=yes
</code></pre>

<p><strong>Etherchannel</strong></p>

<pre><code>switch#show etherchannel X summary
Flags:  D - down        P - bundled in port-channel
        I - stand-alone s - suspended
        H - Hot-standby (LACP only)
        R - Layer3      S - Layer2
        U - in use      f - failed to allocate aggregator

        M - not in use, minimum links not met
        u - unsuitable for bundling
        w - waiting to be aggregated
        d - default port


Number of channel-groups in use: 3
Number of aggregators:           3

Group  Port-channel  Protocol    Ports
------+-------------+-----------+-----------------------------------------------
X     PoX(SD)        LACP        Gi0/A(I)   Gi0/B(I)   Gi0/C(I)
                                 Gi0/D(I)

interface Port-channelX
 switchport mode access
!
</code></pre>

<p><strong>Ports</strong></p>

<pre><code>interface GigabitEthernet0/A
 switchport access vlan X
 switchport mode access
 channel-protocol lacp
 channel-group X mode active
!
</code></pre>

<p><strong>Log</strong></p>

<pre><code>Mar  2 11:17:50.529: %SW_MATM-4-MACFLAP_NOTIF: Host &lt;MAC_ADDRESS&gt; in vlan X is flapping
between port Gi0/Y and port Gi0/Z
</code></pre>

<p><strong>Questions</strong></p>

<p>Once the network service has been restarted on the Linux server the slave ethernet adapters are up and the system is still accessible:</p>

<ol>
<li>Why does the Cisco log indicate that the host is flapping between the ports?</li>
<li>Why could the system be accessed while the portchannel is down?</li>
</ol>
","<p>If the port channel is DOWN, then the Cisco device doesn't see it bundled together. As your display shows, each port are Stand-Alone (as indicated by the ""I"" status), meaning they're seen as separate entities to the switch with regards to MAC table, etc.</p>

<p>This point to something wrong in your channel config and/or capabilities (mismatch between the linux box and the switch)</p>

<p>I've often seen this with vMware servers that has some problems with their network config, the VMs are often balanced between their link using the DST IP, the switch seeing the VM's MAC on one interface, then another, and another, etc.</p>

<p>On the Cisco side, you can try to look-up some debug to help you (""<strong>debug etherchannel ?</strong>"")</p>
","17013"
"Full-duplex with two antennas","10201","","<p>It is said that wireless is a half-duplex medium. ""Dual-band"" stations are now common, with one antenna in the 2.4 GHz band, and the other in the 5GHz band. Suppose now we have stations with both antennas in, say, the 5GHz band, but on different channels, would full-duplex communication be possible?</p>
","<p>A while back I read several articles about researchers using signal inversion cancellation to achieve full-duplex wireless. With a quick google search I found the below links to similar articles to the ones I read back when.</p>

<p>TLDR;
It's for sure possible...though I think they're using signal inversion cancellation instead of two channels (I.E. two different frequencies). People are working on it. Only a matter of time.</p>

<p><a href=""http://sing.stanford.edu/fullduplex/"">http://sing.stanford.edu/fullduplex/</a>
<a href=""http://www.computerworld.com/s/article/9219752/Rice_demonstrates_full_duplex_wireless_technology"">http://www.computerworld.com/s/article/9219752/Rice_demonstrates_full_duplex_wireless_technology</a></p>

<p>I'd love to get a true RF engineers thoughts on this though. I'm by no means an RF guy.</p>
","329"
"Poison reverse example","10185","","<p>Can you give me an example when poison reverse is actually necessary?</p>

<p>Distance vector routing protocols employ split horizon with poison reverse to minimize the convergence time when a route is no longer available. The thing is that I can't think of an example when poison reverse is actually useful.</p>
","<p>Consider the following topology:</p>

<pre><code>               A
             / |
Internet -- S  |
             \ |
               B
</code></pre>

<p>Using RIP, S announces (0.0.0.0/0, 0), and both A and B announce (0.0.0.0/0, 1).</p>

<p>Suppose now that router S fails.  Suppose further that you're unlucky, and that A and B both switch their next hops to each other -- they create a routing loop.</p>

<ul>
<li>with plain Bellman-Ford, A and B have no way to get rid of the loop in a timely manner — they need to count to infinity;</li>
<li>with split horizon, A and B immediately stop announcing the default route to each other — they get rid of the loop as soon as the route times out;</li>
<li>with poison reverse, A and B announce an infinite metric default route to each other, which gets rid of the routing loop as soon as an update is successfully transmitted.</li>
</ul>

<p>Note that poison reverse has a drawback ­— it increases the size of updates, sometimes dramatically so (especially from stub routers).  Note further that poison reverse only gets rid of loops of size two — in order to get rid of larger loops in a timely manner, you need a feasibility condition, as in EIGRP or Babel.</p>
","14864"
"Cisco 6509 Supervisor Card Slot Boot Failure","10183","","<p>We recently had a sporadic reboot of a distribution switch for an unknown reason. No recent hardware/software changes have been made. Our log files don't indicate anything leading up to the incident.</p>

<p>The system is a 6509-E running software version 15.1(1)SY on both active and backup supervisor modules.</p>

<p>The system had a primary and backup supervisor card (SUP720) running in SSO. The system was actively functioning in Standby Hot, but the Backup RP never took over as the Active RP, which caused a complete system reboot.</p>

<p>The backup RP eventually booted back up and came back online with the most recent configuration, but the primary supervisor card <strong>slot</strong> won't boot any cards. We replaced the card with the same card model with no luck. The cards were all tested on a backup 6509 chassis, all of them booted without any issues; which eliminates the possibility of a faulty card.</p>

<p>When trying to boot the cards on this chassis, this is as far as we get:</p>

<pre><code>System Bootstrap, Version 8.4(2) Release
Copyright (c) 1994-2005 by cisco Systems, Inc.
Cat6k-Sup720/SP processor with 524288 Kbytes of main memory

Autoboot executing command: ""boot disk0:s72033-adventerprisek9-mz.151-1.SY.bin""
Loading image, please wait ...


Initializing ATA monitor library...

Self extracting the image... [OK]
Self decompressing the image : ########################################################################################]

Cisco IOS Software, s72033_sp Software (s72033_sp-ADVENTERPRISEK9-M), Version 15.1(1)SY, RELEASE SOFTWARE (fc2)
Technical Support: http://www.cisco.com/techsupport
Copyright (c) 1986-2012 by Cisco Systems, Inc.
Compiled Tue 09-Oct-12 15:21 by prod_rel_team
Image text-base: 0x40101778, data-base: 0x427F0760


*Nov 19 17:31:23.407: %SYS-3-LOGGER_FLUSHING: System pausing to ensure console debugging output.

*Nov 19 17:31:23.407: %PFREDUN-6-STANDBY: Initializing as STANDBY processor for this switch
*Nov 19 17:31:30.179: %SYS-SPSTBY-3-LOGGER_FLUSHING: System pausing to ensure console debugging output.

*Nov 19 17:31:23.607: %SYS-3-LOGGER_FLUSHED: System was paused for 00:00:00 to ensure console debugging output.


Firmware compiled 11-Sep-12 12:45 by integ Build [26624]


*Nov 19 17:31:30.179: %OIR-SPSTBY-6-CONSOLE: Changing console ownership to route processor



System Bootstrap, Version 12.2(17r)S4, RELEASE SOFTWARE (fc1)
Technical Support: http://www.cisco.com/techsupport
Copyright (c) 2005 by cisco Systems, Inc.
Cat6k-Sup720/RP platform with 524288 Kbytes of main memory

Download Start
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
Download Completed! Booting the image.
Self decompressing the image : ########################################################################################]

&lt;...Output Truncated...&gt;   

Cisco IOS Software, s72033_rp Software (s72033_rp-ADVENTERPRISEK9-M), Version 15.1(1)SY, RELEASE SOFTWARE (fc2)
Technical Support: http://www.cisco.com/techsupport
Copyright (c) 1986-2012 by Cisco Systems, Inc.
Compiled Tue 09-Oct-12 15:13 by prod_rel_team
Image text-base: 0x4010F6D8, data-base: 0x44F3E6C0
</code></pre>

<p>It doesn't get any further. When we check the active RP, it shows the card is attempting to come online but never fully boots.</p>

<pre><code>router#show redundancy states
       my state = 13 -ACTIVE
     peer state = in progress to standby cold
           Mode = Duplex
           Unit = Secondary
        Unit ID = 6

Redundancy Mode (Operational) = sso
Redundancy Mode (Configured)  = sso
Redundancy State              = sso
     Maintenance Mode = Disabled
 Communications = Up

   client count = 145
 client_notification_TMR = 30000 milliseconds
          keep_alive TMR = 9000 milliseconds
        keep_alive count = 1
    keep_alive threshold = 19
           RF debug mask = 0x0
</code></pre>

<p>Any suggestions on how to fix this? Or is the chassis defective? </p>

<hr>

<p><code>show module</code> reaffirms that the card isn't recognized by the system.</p>

<pre><code>router#show module
Mod Ports Card Type                              Model              Serial No.
--- ----- -------------------------------------- ------------------ -----------
  1    4  CEF720 4 port 10-Gigabit Ethernet      WS-X6704-10GE      SAD10XXXXXX
  2    4  CEF720 4 port 10-Gigabit Ethernet      WS-X6704-10GE      SAD10XXXXXX
  3   48  CEF720 48 port 1000mb SFP              WS-X6748-SFP       SAL10XXXXXX
  4   48  CEF720 48 port 1000mb SFP              WS-X6748-SFP       SAL10XXXXXX
  5    0  Supervisor-Other                       Unknown            Unknown
  6    2  Supervisor Engine 720 (Active)         WS-SUP720-3B       SAL12XXXXXX
  7   48  CEF720 48 port 10/100/1000mb Ethernet  WS-X6748-GE-TX     SAD11XXXXXX
  8   48  CEF720 48 port 10/100/1000mb Ethernet  WS-X6748-GE-TX     SAL10XXXXXX
  9   48  CEF720 48 port 10/100/1000mb Ethernet  WS-X6748-GE-TX     SAL10XXXXXX

Mod MAC addresses                       Hw    Fw           Sw           Status
--- ---------------------------------- ------ ------------ ------------ -------
  1  000a.b866.74da to 000a.b866.74dd   2.4   12.2(14r)S5  15.1(1)SY    Ok
  2  0018.b9a6.a888 to 0018.b9a6.a88b   2.4   12.2(14r)S5  15.1(1)SY    Ok
  3  000a.b8cf.01e8 to 000a.b8cf.0217   1.7   12.2(14r)S5  15.1(1)SY    Ok
  4  000a.b80f.8da0 to 000a.b80f.8dcf   1.7   12.2(14r)S5  15.1(1)SY    Ok
  5  0000.0000.0000 to 0000.0000.0000   0.0   Unknown      Unknown      Unknown
  6  000a.b86d.8df4 to 000a.b86d.8df7   5.7   8.5(2)       15.1(1)SY    Ok
  7  0007.0e0f.98ca to 0007.0e0f.98f9   2.6   12.2(14r)S5  15.1(1)SY    Ok
  8  0019.06a0.bb30 to 0019.06a0.bb5f   2.4   12.2(14r)S5  15.1(1)SY    Ok
  9  0019.2f2f.e280 to 0019.2f2f.e2af   2.4   12.2(14r)S5  15.1(1)SY    Ok

Mod  Sub-Module                  Model              Serial       Hw     Status
---- --------------------------- ------------------ ----------- ------- -------
  1  Centralized Forwarding Card WS-F6700-CFC       SAD10XXXXXX  3.0    Ok
  2  Centralized Forwarding Card WS-F6700-CFC       SAD10XXXXXX  3.0    Ok
  3  Distributed Forwarding Card WS-F6700-DFC3A     SAL10XXXXXX  2.5    Ok
  4  Distributed Forwarding Card WS-F6700-DFC3A     SAL10XXXXXX  2.5    Ok
  5  Policy Feature Card 3       WS-F6K-PFC3B       SAD09XXXXXX  2.3    Other
  6  Policy Feature Card 3       WS-F6K-PFC3B       SAL12XXXXXX  2.4    Ok
  6  MSFC3 Daughterboard         WS-SUP720          SAL12XXXXXX  3.2    Ok
  7  Centralized Forwarding Card WS-F6700-CFC       SAD11XXXXXX  3.1    Ok
  8  Centralized Forwarding Card WS-F6700-CFC       SAL10XXXXXX  2.0    Ok
  9  Centralized Forwarding Card WS-F6700-CFC       SAL10XXXXXX  2.0    Ok

Mod  Online Diag Status
---- -------------------
  1  Pass
  2  Pass
  3  Pass
  4  Pass
  5  Unknown
  6  Pass
  7  Pass
  8  Pass
  9  Pass
</code></pre>

<p>Running <code>show redundancy</code> gives a more detailed output of <code>show redundancy states</code>. Note that both active and backup are running the same software versions, 15.1(1)SY.</p>

<pre><code>router#show redundancy
Redundant System Information :
------------------------------
       Available system uptime = 2 weeks, 4 days, 4 hours, 5 minutes
Switchovers system experienced = 0
              Standby failures = 508
        Last switchover reason = none

                 Hardware Mode = Duplex
    Configured Redundancy Mode = sso
     Operating Redundancy Mode = sso
              Maintenance Mode = Disabled
                Communications = Up

Current Processor Information :
-------------------------------
               Active Location = slot 6
        Current Software state = ACTIVE
       Uptime in current state = 2 weeks, 4 days, 4 hours, 3 minutes
                 Image Version = Cisco IOS Software, s72033_rp Software (s72033_rp-ADVENTERPRISEK9-M), Version 15.1(1)SY, RELEASE SOFTWARE (fc2)
Technical Support: http://www.cisco.com/techsupport
Copyright (c) 1986-2012 by Cisco Systems, Inc.
Compiled Tue 09-Oct-12 15:13 by prod_rel_team
                          BOOT = disk0:s72033-adventerprisek9-mz.151-1.SY.bin,1;
                   CONFIG_FILE =
                       BOOTLDR =
        Configuration register = 0x2102

Peer Processor Information :
----------------------------
              Standby Location = slot 5
        Current Software state = in progress to standby cold
       Uptime in current state = 3 minutes
                 Image Version = Cisco IOS Software, s72033_rp Software (s72033_rp-ADVENTERPRISEK9-M), Version 15.1(1)SY, RELEASE SOFTWARE (fc2)
Technical Support: http://www.cisco.com/techsupport
Copyright (c) 1986-2012 by Cisco Systems, Inc.
Compiled Tue 09-Oct-12 15:13 by prod_rel_team
                          BOOT = disk0:s72033-adventerprisek9-mz.151-1.SY.bin,1;
                   CONFIG_FILE =
                       BOOTLDR =
        Configuration register = 0x2102
</code></pre>
","<p>Based on what you describe and tested I'd expect the slot on the chassis to be broken. </p>
","5216"
"% Authorization failed. message appear when I try to connect to the switch using local DB user name","10155","","<p>I configured aaa using Tacacs+ on a switch and a router but when I try to connect to the switch through SSH it just accept Tacacs+ users when I try to use local DB user I got ""% Authorization failed.""</p>

<p>following are the aaa configuration:</p>

<blockquote>
  <p>aaa new-model</p>
  
  <p>aaa authentication login default local</p>
  
  <p>aaa authorization exec default group tacacs+ local</p>
  
  <p>aaa authorization commands 15 default group tacacs+</p>
  
  <p>aaa accounting exec default start-stop group tacacs+</p>
  
  <p>aaa accounting commands 15 default start-stop group tacacs+</p>
</blockquote>
","<p>You are authenticating correctly, but the command </p>

<pre><code>aaa authorization exec default group tacacs+ local
</code></pre>

<p>means that in order to start an exec sesion (i.e. a command line shell), the switch will check the Tacacs server for your credentials. Since presumably they're not there, the authorization is failing. It will only use the local database when the Tacacs server is unavailable. </p>

<p>A helpful tip:  If you have (read) access to the Tacacs server, check the ""failed attempts"" log or the Tacacs Events log (depending on the ACS version).  It will tell you why the event failed, so you can go fix it.</p>
","17373"
"HP V1910, VLAN routing - what did I miss?","10154","","<p>First time posting in this part of stack exchange and I'm a novice regarding advanced network configuration - plug &amp; play switch installation I can handle ;o)</p>

<p>I got myself a HP V1910-48G (former 3com 2900 series) switch and I want to make some VLANs on my network to insure scalability for the future. The choice is based on price and from what I read in the specs HP sells this model as a light layer 3 capable switch.</p>

<p>My network diagram:
<a href=""https://i.stack.imgur.com/azFBe.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/azFBe.png"" alt=""Network diagram of a firewall connected to a HP V1910-48G switch - VLANs""></a></p>

<p>I'm trying to achieve the following:</p>

<ol>
<li>Small boardcast domains. </li>
<li>Separation of concern regarding ip addresses.</li>
<li>Scalability.</li>
</ol>

<p>I've started with the basics to insure that I could make it work but with no succes:</p>

<ul>
<li>VLAN_1 is configured on the switch on all ports - except for port 11
&amp; 12. </li>
<li>The Cisco ASA is connected to port 2 using a manual configured
IP address - 10.203.5.1/24. </li>
<li>The VLAN_1 interface is assigned the IP address 10.203.5.2/24.</li>
<li>VLAN_10 is configured on the switch on ports
11 &amp; 12. </li>
<li>A VLAN interface is created on the switch and assigned the IP address 10.203.10.1/24 handling the VLAN_10.</li>
<li>The server (serverA) is connected to port 11 and configured
with a manual IP address 10.203.10.11/24 and running a DHCP scope for
the 10.203.10.0/24 network. Scope options is pointing Default Gateway to 10.203.10.1.</li>
<li>A test client (clientA) is connected to
port 3 configured manually with the IP address 10.203.5.20/24.  </li>
<li>A test client (clientB) is connected to port 12 and is receiving a IP
address (10.203.10.100) from the DHCP service running on the serverA.</li>
</ul>

<p><strong>Test scenarios and results.</strong>
<br/><em>Positive:</em></p>

<ul>
<li>clientA can ping VLAN_1 interface &amp; Cisco ASA and also connect to the
internet. </li>
<li>clientB can ping serverA, VLAN_10 interface &amp; VLAN_1 interface. </li>
<li>serverA can ping VLAN_10 interface &amp; VLAN_1 interface.</li>
<li>switch can ping 8.8.8.8 from the web management interface. <strong>(added)</strong></li>
</ul>

<p><em>Negative:</em></p>

<ul>
<li>clientA can't ping clientB. </li>
<li>clientA can't ping serverA. </li>
<li>clientB can't ping clientA. </li>
<li>clientB can't ping Cisco ASA. </li>
<li>clientB can't connect to the internet.</li>
</ul>

<p>I've been searching all day for clues on the internet and I can see I'm not the only one have issues with this model and the VLAN routing. I have managed to open telnet and SSH so I'm able to use the CLI. I know about the <a href=""http://glazenbakje.wordpress.com/2012/08/21/hp-v1910-secret-commando-list-how-to-enable-it/"" rel=""nofollow noreferrer"">secret command list</a> , the code: 512900 and system-view command. From my knowledge the OS/CLI inside is based on Comware 5 or a subset derived from that.</p>

<p>I did find a few post out there saying something about that the switch isn't shipped with routing enabled and lots of commands trying to enable ip routing. I've have tried them all but most of the wasn't able to run at all. I know the switch i a 3com 2900 and some of the post I'm finding might confuse the search engines.</p>

<p>I have read all relevant posts on <a href=""http://vmfocus.com/?s=v1910&amp;submit=Search"" rel=""nofollow noreferrer"">www.vmfocus.com</a> where he post a great deal of blog entries target toward the HP V1910. But I can't get my head around the ACL or the need of that, to handle ip routing from VLAN_10 to VLAN_1. Maybe my problems start here?</p>

<p>I'm no expert and I'm trying to make a decent solution, but my skills (or the product) couldn't bring me any further than this. I hope some of you can guide me in the correct direction so I can use the full potential of my HP V1910. If my network design is flawed with obvious mistakes please bare with me.</p>

<p>I just need to make VLAN_10 work in the first place after that works I think I will be able to configure the remaining VLANs by myself.</p>
","<p>Your problem is, indeed, with routing. Things in VLAN 1 are using 5.1 as the gateway, right? 5.1 doesn't know about any other internal networks. (i.e. VLAN 10) Likewise, the hosts in VLAN 1 don't know about VLAN 10.</p>

<p>When clientA tries to ping serverA, the packets go to the ASA and die as it doesn't know where to send them. (it's default route would send them to the internet!) When serverA tries to ping clientA, the packets go to the switch and then to clientA, but then the replies, as before, go away.</p>

<p>For this reason, it's common to keep the ""routing hardware"" and ""hosts"" in different networks. VLAN 1 being just the ASA and Switch. And then VLANs 10 and 11 for the two internal networks. The switch would then be the gateway for VLAN 10&amp;11, with it's default being the ASA.  The ASA would have to have static routes added telling it about the internal networks -- routed to the switch.  <strong>Without</strong> this, either the ASA has to ""hairpin"" traffic back to the switch to reach VLAN 10, or every host in VLAN 1 needs its own route to VLAN 10 (via the switch.)</p>
","8154"
"How to - use regex in Nexus to search for this | or that?","10124","","<p>So aggravating - i can't find good documentation on how to use the Nexus regex command.</p>

<p>So, if my interfaces look like this:</p>

<pre><code>interface Vlan224
  description MANAGEMENT
  no shutdown
  ip flow monitor netflow-monitor input  
  no ip redirects
  ip address 10.214.224.2/24
  ip ospf passive-interface
  ip router ospf 1 area 0.0.0.3
  ip pim sparse-mode
  hsrp version 2
  hsrp 224 
  preempt 
  priority 120
  ip 10.214.224.1 
</code></pre>

<p>I want to run something similar to:</p>

<pre><code>show run | inc (interface Vlan)|(ip address)
</code></pre>

<p>And the output to look similar to (if this were on IOS):</p>

<pre><code>interface Vlan10
ip address 10.1.10.1 255.255.255.0
interface Vlan 11
ip address 10.1.11.1 255.255.255.0
etc.
</code></pre>
","<p>You can do a <code>show run | egrep interface.Vlan|ip.address</code>. It does grab a bit more info, but should provide similar output to what you see in IOS. I think grep might work as well, but I used egrep and got the correct output. </p>
","1423"
"How can 2 computers in different network communicate?","10103","","<p>Suppose my friend and I are connected to the Internet via some local ISP (not necessarily same), which means we are on different networks, hence our computers have different private IP addresses. Is there any way I can send a message to him if I know his private, as well as public, IP address (which is the IP address of his gateway router)? If so, then how will the packets will reach him?</p>
","<p>First, just because your two computers are connected via the Internet at two separate locations doesn't necessarily mean that you are using private addresses.  That is certainly the most likely scenarios with IPv4, given the IPv4 address shortage, but it is still not necessarily true.  If you are running IPv6, you are probably using public IPv6 addresses.</p>

<p>Let's assume you are using private IPv4 addressing behind a router using NAT. </p>

<p>Knowing the other private address does nothing for you at all, so just take that out of the equation.</p>

<p>Under normal, non-hacker circumstances, the NAT routers at each end would need to have port forwarding enabled for each PC's private address, or the routers would need to be using one-to-one NAT, to enable the two PCs to communicate via the public addresses. You could also use a VPN between the two PCs to get around the NAT problem.  This all assumes that there are no firewalls in place to block traffic from the Internet into the private networks.</p>

<p>In one-to-one NAT, each network would have multiple public addresses which uniquely translate to a single private address, so using a public address will get you to the corresponding private address. This is also an unlikely scenario given the shortage of IPv4 addresses, but it is done in some places.</p>

<p>Port forwarding configures NAT to forward incoming traffic sent to a router's public address on a given port number to be sent to a particular inside private address at a given port number.</p>

<p>A VPN is a tunnel. Usually, traffic from one inside network is encapsulated within packets addressed to the public address of the other network and sent to the other network where it is de-encapsulated to the other inside network. This can be configured in such a way as to make the foreign network appear local to the tunnel interface of the local network.</p>

<p>A firewall on either end, or anywhere along the path, may be configured to block any or all of these methods.</p>
","23459"
"Unblocking of skype in Fortigate","10091","","<p><a href=""https://i.stack.imgur.com/Yy0pJ.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/Yy0pJ.png"" alt=""enter image description here""></a>I have fortinet fortigate 40c. It is not a bundle product. We use it to unblock 300 of our websites and rest are all blocked by default. Now, we want to unblock skype. The problem is just specifying skype.com to unblok doesn't help it opening the application. So what options do i have. 
I have  specified skype to open in application server as well  but yet it doesn't work.<a href=""https://i.stack.imgur.com/Eag2x.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/Eag2x.png"" alt=""enter image description here""></a></p>

<p><a href=""https://i.stack.imgur.com/48lKk.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/48lKk.png"" alt=""enter image description here""></a></p>

<p><a href=""https://i.stack.imgur.com/8vXaE.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/8vXaE.png"" alt=""enter image description here""></a></p>
","<p>I changed the Inspection method to proxy based in web filtering profiles and the skype started working. I hope this one helps for all. </p>
","37236"
"Transparent bridging using Mikrotik RouterBoard","10084","","<p>I have a router and a MikroTik connected by a (long) ethernet cable that I'm trying to setup with switch-like functionality.</p>

<p>My understanding is that the correct way to do this is to create a bridge on the MikroTik that incorporates the port that it's plugged into (a normal LAN port) and the WLAN.</p>

<p>When I attempt this however, there are couple of problems I seem to face:</p>

<ul>
<li>WLAN devices cannot communicate with devices which are connected to the router (or in fact, the router itself). I assume this is some kind of routing issue in that it doesn't know where to try and send the requests, but my understanding of bridging would imply that would be a non-issue. Attempting to ping the router sends back the following response:</li>
</ul>

<p><code>92 bytes from router (192.168.88.1): Redirect Host(New addr: 192.168.0.1)
Vr HL TOS  Len   ID Flg  off TTL Pro  cks      Src      Dst
 4  5  00 0054 db8d   0 0000  3f  01 c5cb 192.168.88.254  192.168.0.1</code></p>

<ul>
<li>the MikroTik itself acts as a DHCP server rather than the main router. This is still the case after setting the DHCP client to attach to the bridge-local interface. Do I want to setup a DHCP relay? Setup a separate DHCP server? </li>
</ul>

<p>If I connect the ethernet to the ether1-gateway port, I can successfully route through it (access the router etc) but then I'm not actually connecting the network together (which kind of defeats the point).</p>

<p>Any pointers as to where I'm going wrong would be gratefully received, this isn't something I normally do so stupid errors are not unlikely.</p>
","<p>I'll assume you are using a RB951 series router, which has ether1-5 and wlan1.
If that's not the case just edit the script to fit the specifications of your router.</p>

<p>First of all, do a System > Reset configuration (check No default configuration).</p>

<p>Then, apply the following config:</p>

<pre><code>/interface bridge
add name=lan auto-mac=no admin-mac=[/interface get [find where name=ether1] mac-address]
/interface bridge port
add bridge=lan interface=ether1
add bridge=lan interface=ether2
add bridge=lan interface=ether3
add bridge=lan interface=ether4
add bridge=lan interface=ether5
add bridge=lan interface=wlan1
/interface wireless
set wlan1 mode=ap-bridge wireless-protocol=802.11 band=2ghz-b/g/n frequency=auto ssid=""**Your WiFi SSID**"" enabled=yes
/interface wireless security-profiles
set [find default=yes] authentication-types=wpa-psk,wpa2-psk group-ciphers=tkip,aes-ccm unicast-ciphers=tkip,aes-ccm mode=dynamic-keys wpa-pre-shared-key=""**Your WiFi password**"" wpa2-pre-shared-key=""**Your WiFi password**""
</code></pre>

<p>To do it, upload it to the router and type ""import filename"" in a Terminal.</p>

<p>This will make a bridge between the wireless interface and all the MikroTik ethernet ports, carrying all traffic transparently. Your main router will still act as the gateway and will take care of NAT, firewall and routing.</p>
","24425"
"ProCurve CPU at 100% for several minutes after reboot","10044","","<p>I have been doing firmware upgrades in HP switches. Two different models have been upgraded: </p>

<ul>
<li>ProCurve Switch 5406zl Intelligent Edge (J8697A): upgraded from K.15.06.0008 to K.15.12.0012</li>
<li>HP 2520-24G-PoE Switch (J9299A): upgraded from J.14.54 to J.15.09.0021</li>
</ul>

<p>Checking each switch right after booting the new image,  I have observed something:</p>

<ol>
<li>Switches loaded the new firmware image without errors and connectivity was recovered as soon as the switch booted up. At this point CPU usage was low (under 10%)</li>
<li>Few seconds later CPU usage raised up to 100% and stood there for several minutes. I could not detect any  issue at this point apart from CLI through SSH being a little bit sluggish: normal connectivity, no log messages...</li>
<li>After five to ten minutes at 100%, CPU came back to normal without any change from my side. </li>
</ol>

<p>Both models were having this behaviour. I rolled back one unit of each model to the previous firmware image and they did behave the same way. </p>

<p>Despite this CPU spike right after boot caused no issue, I wonder if normal network behaviour could be the cause for this spike, but I do not think so. I have considered the following aspects:</p>

<ol>
<li><p>Right after boot STP starts running, generating BPDUs and cycling all ports in the switch through the Bloking, Listening, Learning and Forwarding states. However, even with 802.1D this process takes no longer than 1 minute with default timers. Furthermore, I was checking the switches through SSH, so all STP computations were already done by the time I could connect to the switch. </p></li>
<li><p>Right after boot the MAC address table is empty and broadcast is needed for the first frames to be forwarded. But I doubt this broadcasting would take 100% CPU, much less for 5 minutes, in a 24 port switch. </p></li>
<li><p>All switches acting as L2 devices, no L3 functionality enable, so I discard routing and other L3 processes. </p></li>
</ol>

<p>Am I missing something ""normal"" in network operations that may explain this CPU usage for 5 minutes after reboot while keeping connectivity?  Maybe it is some kind of background process the  switch runs right after reboot? </p>
","<p>This took less than 2 seconds on Google:
<a href=""http://h20565.www2.hp.com/portal/site/hpsc/template.PAGE/public/kb/docDisplay?javax.portlet.begCacheTok=com.vignette.cachetoken&amp;javax.portlet.endCacheTok=com.vignette.cachetoken&amp;javax.portlet.prp_ba847bafb2a2d782fcbb0710b053ce01=wsrp-navigationalState=docId%253Demr_na-c01979056-1%257CdocLocale%253D%257CcalledBy%253D&amp;javax.portlet.tpst=ba847bafb2a2d782fcbb0710b053ce01&amp;sp4ts.oid=1827663&amp;ac.admitted=1389220450064.876444892.492883150"">HP networking portal</a></p>

<blockquote>
  <p>HP ProCurve 5400zl Switch Series - High CPU Utilization (99-100%) after Startup
  Issue</p>
  
  <p>Right after the switch is started, high (99-100%) CPU utilization is
  observed. Solution</p>
  
  <p>When the switch boots, one of the initialization tasks is creation of
  encryption keys. Having the keys created in advance means that later,
  when a feature such as SSL or SSH that uses the keys is configured or
  used, there is minimal delay in the availability. This task takes a
  few seconds before it ramps up, depending on the switch model, the
  configuration being loaded, and the software revision. Even though the
  task consumes up to 100% of the CPU, it runs at a very low priority.
  Therefore, if another task requiring CPU cycles is started, this low
  priority task will back off. If this initialization/key generation
  task runs uninterrupted by higher priority tasks, it takes about 10
  minutes to complete. If the CPU is busy with other tasks, the
  completion time will be extended.</p>
  
  <p>To verify that the elevated CPU being seen is in fact what has been
  described here and not something else that requires troubleshooting,
  please use the commands documented below.</p>

<pre><code>task-monitor cpu (this command was introduced in K.13.04)

show uptime

show cpu
</code></pre>
  
  <p>The output will look like the following.</p>
  
  <p>Switch# task-monitor cpu Switch# show uptime 0000:00:01:42.36 Switch#
  show cpu</p>

<pre><code>99 percent busy, from 27 sec ago
1 sec ave: 100 percent busy
5 sec ave: 100 percent busy
1 min ave: 66 percent busy

Task usage for last 5 sec
 % CPU | Description
-------+--------------------------
   0.3 | Sessions &amp; I/O
  99.7 | System Services
</code></pre>
</blockquote>
","5767"
"What is the minimum MTU size?","10023","","<p>The <a href=""http://www.linfo.org/mtu.html"">maximum size is 1500 Bytes</a>.  Is there a lower limit? 1? 64?  Must it be a multiple of two?  Is there somewhere I can look to learn more?</p>
","<p>Yes, <strong>IPv4 implementations</strong> require a minimum MTU of 68 bytes per <a href=""https://tools.ietf.org/html/rfc791"" rel=""nofollow"">RFC 791</a>.</p>

<p>See Peter's answer for more detail.</p>
","18999"
"How to know whether a protocol uses TCP or UDP","9910","","<p>Well I know that might sound a stupid question and I believe that the most proper answer will be like I will be able to tell as my experience builds up and I learn more and more about the protocols. </p>

<p>However I am a student and I am not having much hands on experience in the field. Though I can google for any given protocol, I want to know if there is any rule of thumb. I still feel asking for ""rule of thumb"" is stupid, but still I am looking for one. </p>

<p>I encountered <a href=""https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers"" rel=""nofollow"">this list on wikipedia</a> which lists the protocols and whether they use TCP or UDP in the tabular format. However I am not able to understand that what it means when the row for a particular protocol contains both TCP and UDP with single port number. For example, in Telnet row, it has <code>23-TCP-UDP</code>. What does this mean? Telnet can operate on both TCP port 23 and UDP port 23?</p>

<p>Also I found that in my textbook, it says TFTP uses UDP, but if we look in the above table, TFTP line is <code>69-TCP-UDP</code>. So just guessing whats going on in the above table.</p>
","<p>You asked a good question. Don't let anyone tell you otherwise.</p>

<p>Regrettably, there is no rule of thumb for the types of protocols that use TCP verses the types of protocols that use UDP.</p>

<p>The decision whether a protocol uses one or the other come down to whomever wrote/created the protocol to begin with.</p>

<p>If they didn't want to bother with writing their own ""reliable delivery"" system, then they can simply use TCP which provides all the reliability innately.</p>

<p>If they thought (knowing their own protocol innately) that they could write a better or more appropriate ""reliable delivery"" system, then they can build that into the protocol itself and simply use UDP as their transport. </p>

<p>As an example, take a look at a UDP <a href=""https://wiki.wireshark.org/TFTP"" rel=""noreferrer"">TFTP sample capture</a>, you'll notice there are built in acknowledgement systems within TFTP itself -- having both those and the additional acknowledgement systems within TCP would simply be redundant.</p>

<p>Whereas FTP, which runs over TCP, does not have a built-in acknowlegdment system. A user simply request a file, and the sender sends it. There is a ""file transfer complete"" notification, but nothing that guarantees having received each bit of the file.  FTP is relying on TCP's reliability to ensure the file gets all the way across.</p>

<p>That said, I looked through the list of ports on the wiki page you linked, and saw a surprising amount of protocols that supposedly use TCP <em>and</em> UDP. This was foreign to me, and I only know of very few that use both (namely, DNS). But it may be that there is a TFTP implementation that uses TCP, and if so, I'm afraid I have no exposure to it.</p>

<p>Domain Name System (DNS) is traditionally the protocol referred to when discussing protocols that use both TCP and UDP. It doesn't use these at the same time, mind you. But different functions within DNS might call for TCP vs UDP.</p>

<p>For example, when making a simple A-record resolution request, the ""request"" and ""response"" are very lightweight, both requiring a single packet.  As such, this is typically done over UDP.</p>

<p>But if a request or response requires a larger transfer (above a certain amount of bytes), then DNS chooses to use TCP to ensure ""all the bits"" get there. This is common with full Zone Transfer requests.</p>
","24313"
"Connecting two routers in different networks via Static Routing","9902","","<p>I am very new to networking in general. For one of my assignments, I need to be able to ping two routers ( R5 must be able to ping R4 ) in different networks.
<a href=""https://i.stack.imgur.com/3CBP7.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/3CBP7.jpg"" alt=""SimpleTopology""></a></p>

<p>For this, I set up routing in both R1 and R2. Here is the configuration for R1:</p>

<p><code>R1(config)#ip route 21.0.0.0 255.255.255.0 10.0.0.2</code>.</p>

<p>and here is the route configuration for R2:</p>

<pre><code>R2(config)#ip route 11.0.0.0 255.255.255.0 10.0.0.1
</code></pre>

<p>I might be missing an obvious thing here. R1 and R2 can ping each other. However, R2/R4 cannot ping to R5 and R1/R5 cannot ping to R4.
Lets ignore the cloud and the VPC interface shown.
Could anyone please tell me what is happening and what i am missing? I am a newbie and I have limited knowledge as I am just starting. I am using GNS3. </p>

<p>EDIT 1:
Here are the routing tables so far.
<a href=""https://i.stack.imgur.com/22Wjv.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/22Wjv.jpg"" alt=""enter image description here""></a></p>
","<p>Sorry for answering rather old question. </p>

<p>Speaking about GNS-3: you can change the label of R1 or some other router if you stop the device (right-click the router, select stop), then right-click it and select configure.</p>

<p>Glad to hear you managed to add routes:</p>

<p>R4(config)#ip route 11.0.0.0 255.255.255.0 21.0.0.1</p>

<p>R5(config)# ip route 21.0.0.0 255.255.255.0 11.0.0.1</p>

<p>I think your problem is not solved in its entirety though - as long as R5 does not know how to reach network 10.0.0.0/24 (as a result R5 cannot ping 10.0.0.2 and vice-versa). The same goes for R4 and the network 10.0.0.0/24.</p>

<p>So, you should add a pair of routes:</p>

<p>R4(config)#ip route 10.0.0.0 255.255.255.0 21.0.0.1</p>

<p>R5(config)# ip route 10.0.0.0 255.255.255.0 11.0.0.1</p>

<p>After that all the IPs of your lab are pingable.</p>

<p>BTW, you could replace a pair of routes with one default route, the result would be the same. For R5 it would be:</p>

<p>R5#(config)ip route 0.0.0.0 0.0.0.0 11.0.0.1</p>
","26025"
"How to decipher dropped packet from packet-tracer output?","9785","","<p>I have a massive ACL that i'm dealing with and I can't seem to find what line is blocking me. Is there a way for packet-tracer to help me figure out more specifically where i'm getting blocked at?</p>

<pre><code>packet-tracer input AAAA tcp 10.A.B.1 5555 10.C.D.80 PORT# d

Phase: 3
Type: ROUTE-LOOKUP
Subtype: input
Result: ALLOW
Config:
Additional Information:
in   0.0.0.0         0.0.0.0         AAAA

Phase: 4
Type: ACCESS-LIST
Subtype: 
Result: DROP
Config:
Implicit Rule
Additional Information:
 Forward Flow based lookup yields rule:
 in  id=0x7ffd9a7f9e40, priority=111, domain=permit, deny=true
        hits=28704780, user_data=0x0, cs_id=0x0, flags=0x4000, protocol=0
        src ip/id=0.0.0.0, mask=0.0.0.0, port=0, tag=0
        dst ip/id=0.0.0.0, mask=0.0.0.0, port=0, tag=0 dscp=0x0
        input_ifc=AAAA, output_ifc=AAAA

Result:
input-interface: AAAA
input-status: up
input-line-status: up
output-interface: AAAA
output-status: up
output-line-status: up
Action: drop
Drop-reason: (acl-drop) Flow is denied by configured rule
</code></pre>

<p>Some clues that I have gathered (not sure if they are correct though)</p>

<ul>
<li>The drop reason indicates that a configured line is dropping the packet and not the default deny at the end</li>
<li>The packet is getting denied at the output ACL on interface AAAA</li>
<li>There is a id string and a hit counter but I don't know how to match that up with anything</li>
</ul>
","<p><code>Implicit Rule</code> and <code>AAAA</code> being the in and out interface... That's called <em>hair-pinning</em>, and it's generally not allowed.  It works on my asa, but I have the following enabled:</p>

<pre><code>same-security-traffic permit inter-interface
same-security-traffic permit intra-interface
</code></pre>
","5912"
"Find idle connections in Check Point firewall","9745","","<p>I have a firewall, where I have to lower the TCP session timeout from 24h to 1h.<br>
Before I do that, I'm trying to determine if this will break any applications, i.e applications that have sessions that can be idle for a long time, but are not able to re-establish the connection if the firewall drops it.<br>
So I want to filter out connections from my connection table, that have been idle for more than 60 minutes. </p>

<p>Firewall is CheckPoint R75.40, and I'm looking at the connection table with the ""fw tab -t connections -u"" command. 
I suppose the information I want is in the output, but what am I looking for?</p>
","<p>The command for doing this would be:  </p>

<pre><code>fw tab -t connections -u -f | grep 86400 \
 |awk '{ split($41,a,""/""); if( a[1] &lt; 82800) print $2,$9,$13,$15,$41; }' 
</code></pre>

<p>86400 is the current TCP session timeout in seconds.<br>
Thanks to toottoot for the <code>-f</code> flag.</p>
","2973"
"Cisco PBR verify-availability with interface instead of next-hop","9732","","<p>We have a number of Cisco 891 routers configured with dual WAN links. All of these routers are running Cisco IOS 15.x In some cases, we use policy based routing to force particular traffic down one link. </p>

<p>I use PBR a lot with Dual WAN setups, as the customer generally wants certain traffic to go over a particular link. For example, I will often need to have real-time traffic such as VOIP go over one link, then general internet to go over another, and typically will use PBR to route the traffic according to source/destination IP, VLAN, or whatever fits.</p>

<p>Obviously, it is best to still offer a degraded service if the dedicated voice link should go offline. I tend to use <code>set next-hop verify-availability</code> with an IP SLA tracking object in order to allow the traffic to still fail-over to the other WAN, should it need to. </p>

<p><strong>My question is:</strong> Is it at all possible to do the same config (wth a tracking object to verify availability) when using PBR to set an interface, instead of a next-hop?</p>

<p>There's a couple of reasons for this:</p>

<ul>
<li><p>We auto-negotiate IP and routing settings in all our PPPoE Dialer interface. One of our third-party ISPs went ahead and changed the default-route for all their DSL connections. This meant that, since I had hard-coded the next-hop into the PBR config, it stopped working. Luckily, the PBR failed over to the other WAN, but in any case, I've been looking to avoid dependency on hard-coding the IP wherever I can, similar to how I do the default routes: <code>ip route 0.0.0.0 0.0.0.0 Dialer0 10 track 1</code></p></li>
<li><p>Today I've been asked to configure dual WANs on some new CPE, and was going to use PBR to force our VOIP traffic down a dedicated line, failing back to the internet link if needed. The catch is that this customer is using two DSL lines from the same ISP, and so the next-hop would be the same in both cases. So obviously what I'll next do is set the interface instead, but this then means I lose my verify-avilability.</p></li>
</ul>

<p>Hoping some one knows what PBR config I can use to achieve this when setting interfaces.</p>

<p>For reference, here's how I currently do it, with <code>next-hop</code>:</p>

<p><strong>EDIT:</strong> Included more detailed example.</p>

<pre><code>track 1 ip sla 1
 delay down 20 up 10
!
track 2 ip sla 2
 delay down 20 up 10
!

interface FastEthernet8
 description PPPoE ADSL2+ VOIP
 no ip address
 ip nat outside
 ip virtual-reassembly in
 duplex auto
 speed auto
 pppoe enable group global
 pppoe-client dial-pool-number 1

interface GigabitEthernet0
 description PPPoE ADSL2+ All Internet Traffic
 no ip address
 ip nat outside
 ip virtual-reassembly in
 duplex auto
 speed auto
 pppoe enable group global
 pppoe-client dial-pool-number 2

interface Vlan1
 description $ETH_LAN$
 ip address 192.168.1.254 255.255.255.0
 ip nat inside
 ip virtual-reassembly in
 ip tcp adjust-mss 1452
 ip policy route-map PBR-LAN

interface Dialer0
 description VOIP ADSL2+ Dialer Interface
 bandwidth 1024
 bandwidth receive 20480
 ip address negotiated
 no ip redirects
 no ip proxy-arp
 ip mtu 1492
 ip nat outside
 ip virtual-reassembly in
 encapsulation ppp
 ip tcp adjust-mss 1452
 dialer pool 1
 dialer-group 1
 ppp authentication chap pap callin
 ppp chap hostname xxxx@cust.example.com
 ppp chap password 0 yyyy
 ppp pap sent-username xxxx@cust.example.com password 0 yyyy
 no cdp enable

interface Dialer1
 description Internet ADSL2+ Dialer Interface
 bandwidth 1024
 bandwidth receive 20480
 ip address negotiated
 no ip redirects
 no ip proxy-arp
 ip mtu 1492
 ip nat outside
 ip virtual-reassembly in
 encapsulation ppp
 ip tcp adjust-mss 1452
 dialer pool 2
 dialer-group 2
 ppp authentication chap pap callin
 ppp chap hostname zzz@cust2.example.com
 ppp chap password 0 aaa
 ppp pap sent-username zzz@cust2.example.com password 0 aaa
 no cdp enable

ip local policy route-map PBR-LOCAL
ip nat inside source route-map DSL2-DATA-NAT interface Dialer1 overload
ip nat inside source route-map DSL2-VOIP-NAT interface Dialer0 overload
ip route 0.0.0.0 0.0.0.0 Dialer0 10 track 1
ip route 0.0.0.0 0.0.0.0 Dialer1 track 2


ip access-list extended NAT-POOL
 remark Be sure to exclude remote LANs in this ACL
 deny   ip 192.168.1.0 0.0.0.255 192.168.7.0 0.0.0.255
 permit ip 192.168.1.0 0.0.0.255 any
ip access-list extended PBR-DSL-DATA
 remark Match local traffic with DSL DATA src IP
 permit ip host 89.123.45.67 any
ip access-list extended PBR-DSL-VOIP
 remark Match local traffic with DSL VOIP src IP
 permit ip host 89.123.45.70 any
ip access-list extended VOIP-PBX
 remark Match traffic to/from our VOIP PBX so it can use dedicated link.
 permit ip host 89.123.45.10 any
 permit ip any host 89.123.45.10

! For the IP SLAs I simply ping the gateway of the circuit
! In this case, we have two DSL links from the same ISP
! So I simply ping the same gateway for both, with different source interfaces.
ip sla 1
 icmp-echo 89.123.45.1 source-interface Dialer0
 threshold 4000
 frequency 5
ip sla schedule 1 life forever start-time now
ip sla 2
 icmp-echo 89.123.45.1 source-interface Dialer1
 threshold 4000
 frequency 5
ip sla schedule 2 life forever start-time now

! These PBR-LOCAL route-maps are used for traffic coming from
! The router itself. (eg. ICMP, IPSec) Allows it to correctly
! Respond on both links, no matter which is the primary/active link.
route-map PBR-LOCAL permit 10
 description Route traffic with src IP VOIP DSL
 match ip address PBR-DSL-VOIP
 set interface Dialer0
!
route-map PBR-LOCAL permit 20
 description Route traffic with src IP DATA DSL
 match ip address PBR-DSL-DATA
 set interface Dialer1
!

route-map PBR-LAN permit 1
 description This route map is to match all VOIP traffic and force it over the correct ADSL line
 match ip address VOIP-PBX
 ! Using next-hop is how I would typically do this sort of thing.
 ! However - in this case since both links are from the same ISP, the next-hop is the same in both cases.
 ! So, although I haven't tried it, I am sure the router would have no way to know exactly which link I mean.
 !
 ! In this example, I've used 89.123.45.1 as the gateway IP for both DSL links.
 !
 !
 ! Try using VOIP Link
 ! set ip next-hop verify-availability 89.123.45.1 1 track 1
 ! If that fails, try the DATA link
 ! set ip next-hop verify-availability 89.123.45.1 2 track 2
 !
 !
 ! Because of this, my work-around has been to simply specify the Dialer interface
 ! of the link I want to use. But this also means no failover to the data link.
 ! Hope this makes sense.
 !
 !
 set interface Dialer0


route-map DSL2-VOIP-NAT permit 10
 description This route match is to match NAT traffic for the VOIP ADSL2+ Connection
 match ip address NAT-POOL
 match interface Dialer0
!
route-map DSL2-DATA-NAT permit 10
 description This route match is to match NAT traffic for the DATA ADSL2+ Connection
 match ip address NAT-POOL
 match interface Dialer1
!
</code></pre>
","<p>As discussed in chat, PBX / SIP traffic is unique to an IP host route in your case.  Therefore, you can remove PBR and use tracking objects on overlapping static routes, which go out different <code>dialer</code> interfaces to solve the problem.</p>

<pre><code>ip route 89.123.45.10 255.255.255.255 Dial0 track 1 1 name PBX_Pri
ip route 89.123.45.10 255.255.255.255 Dial1 track 2 10 name PBX_Bak
ip route 0.0.0.0 0.0.0.0 Dial 1 track 2 1 name Data_Pri
ip route 0.0.0.0 0.0.0.0 Dial 0 track 1 10 name Data_Bak
</code></pre>
","3592"
"Dell N2000 - Inter-VLAN routing problem","9698","","<p>I've been brought in to troubleshoot an issue on an install performed by a different engineer.</p>

<p>The basic topology is: </p>

<p>1x Dell N2000 as Core Switch
1x Dell N2000 as Access Switch 01
1x Dell N2000 as Access Switch 02</p>

<p>Access switches trunk with a single 1gb interface to the core (Gi1/0/24 on both access switches) so there are no switching loops or anything like that so far as I can tell. </p>

<p>Essentially, the topology looks like this: </p>

<p>(ACSW01)Gi1/0/24 &lt;-> Gi1/0/22 (CORE) Gi1/0/21 &lt;-> Gi1/0/24(ACSW02)</p>

<p>Nothing fancy - The VLANs are: </p>

<p>VLAN 47 - 192.168.47.0/24
VLAN 48 - 192.168.48.0/24
VLAN 49 - 192.168.49.0/24
VLAN 50 - 192.168.50.0/24 </p>

<p>At this point, clients on any VLAN get internet connectivity, but clients on VLAN 49 or VLAN 50 cannot ping a printer on VLAN48 located on Edge Switch 01 (ESW01) - but if the printer's connection is physically moved to the core switch, they can. The problem follows the VLANs on edge switches, not the devices; any device connected to an edge switch that is NOT on VLAN 48 will not be able to communicate with any other VLAN - unless the device is on the core switch. Additionally, those clients experience no issues with internet connectivity (and that works fine across all VLANs too). </p>

<p>Below are my troubleshooting steps taken thusfar: </p>

<pre><code>1: Verify configuration integrity
    Notice that ""ip routing"" is on both edge switches - issue ""no ip routing"" command
    Ensure that ""ip default gateway 192.168.48.254"" is set - OK
        When setting IP default gateway, automatically switch creates an entry with ""ip route 0.0.0.0 0.0.0.0 192.168.48.254"" 
    Verify trunk tagging for Edge - Core - Edge:
        Appears OK - 48 native, 47,49,50 tagged
    Verify Aerohive trunk encapsulation
        Untagged 47, Tagged 48, 49, 50

2: Verify Layer 2 connectivity path
    Examine Spanning-Tree
        CSW01 reports it is NOT the root bridge
            Root bridge is ESW01 
        Changing CSW01 bridge priority to 8192 - ""spanning-tree priority 8192""
            Root bridge is now CSW01 
    Checking MAC address table
        Printer on VLAN 48 on ESW01 has MAC w/last 4 D53C 
            CSW01: D53C appears on Gi1/0/22 (correct trunk link to ESW01) on VLAN 48
        My laptop on VLAN 49 on Aerohive (connected to CSW01) w/last 4 MAC A560
            ESW01: ""show mac address-table | inc A560"" - shows on Gi1/0/24 leading to Core on VLAN 49 - correct trunk link

3: Verify Layer 3 connectivity path
    Ping 192.168.48.225 (Printer, D53C) 
        FAILS from laptop on wireless VLAN 49 connected to CSW01
        FAILS from Aerohive on VLAN 47 connected to ESW01 
        WORKS from CSW01 command line
        WORKS from ESW01 command line
        WORKS from ESW02 command line 
        FAILS from laptop on wired VLAN 49 connected to CSW01 
        FAILS from laptop on wired VLAN 49 connected to ESW01

    Ping 192.168.48.1 (Sonicwall)
        WORKS from Aerohive connected to ESW01
        WORKS from Core Switch
        WORKS from Laptop on VLAN 49 connected to Core Switch
        WORKS from ESW01 command line
</code></pre>

<p>Below are the configs (some output suppressed for redundancy / brevity) with relevant portins: </p>

<p>CORE SWITCH: </p>

<pre><code>    AS-CSW01#show run

!Current Configuration:
!System Description ""Dell Networking N2024P, 6.0.1.3, Linux 3.6.5-320b2282""
!System Software Version 6.0.1.3
!
configure
vlan 47
name ""Aerohive Management""
vlan association subnet 192.168.47.0 255.255.255.0
exit
vlan 48
name ""Client Company Wired Production""
vlan association subnet 192.168.48.0 255.255.255.0
exit
vlan 49
name ""Client Company Wireless Production""
vlan association subnet 192.168.49.0 255.255.255.0
exit
vlan 50
name ""Client Company Wireless Guest""
vlan association subnet 192.168.50.0 255.255.255.0
exit
vlan 47-50
exit              
hostname ""AS-CSW01""
slot 1/0 8    ! Dell Networking N2024P
slot 2/0 5    ! Dell Networking N2048
stack
member 1 7    ! N2024P
member 2 8    ! N2048
exit
ip routing
ip route 0.0.0.0 0.0.0.0 192.168.48.1
interface vlan 1
exit
interface vlan 47
ip address 192.168.47.254 255.255.255.0
ip helper-address 192.168.48.31
exit
interface vlan 48
ip address 192.168.48.254 255.255.255.0
exit
interface vlan 49
ip address 192.168.49.254 255.255.255.0
ip helper-address 192.168.48.31
exit
interface vlan 50 
ip address 192.168.50.254 255.255.255.0
ip helper-address 192.168.48.31
exit
username ´(output omitted)
ip ssh server
!
interface Gi1/0/1
description ""AS-APFL1-01"" (Aerohive AP trunk port)
switchport mode general
switchport general pvid 47
switchport general allowed vlan add 47
switchport general allowed vlan add 48-50 tagged
switchport general allowed vlan remove 1
exit
!
(Output omitted for brevity)
!
interface Gi1/0/18 (A regular access port)
switchport mode general
switchport general pvid 48
switchport general allowed vlan add 48
switchport general allowed vlan remove 1
exit
!
!
interface Gi1/0/21
description ""AS-ESW02""
switchport mode general
switchport general pvid 48
switchport general allowed vlan add 48
switchport general allowed vlan add 47,49-50 tagged
switchport general allowed vlan remove 1
switchport trunk native vlan 48
exit
!
interface Gi1/0/22
description ""AS-ESW01""
switchport mode general
switchport general pvid 48
switchport general allowed vlan add 48
switchport general allowed vlan add 47,49-50 tagged
switchport general allowed vlan remove 1
switchport trunk native vlan 48
exit
!
interface Gi1/0/23
description ""SonicWall X0""
switchport mode general
switchport general pvid 48
switchport general allowed vlan add 48
switchport general allowed vlan add 47,49-50 tagged
switchport general allowed vlan remove 1
exit
!
interface Gi1/0/24
description ""Uplink to NetGear""
switchport mode general
switchport general pvid 48
switchport general allowed vlan add 48
switchport general allowed vlan add 47,49-50 tagged
switchport general allowed vlan remove 1
exit
!
exit
snmp-server engineid local 800002a203f8b1564d9fb4
snmp-server community ""public"" ro
exit
</code></pre>

<p>Access Switch 01:</p>

<pre><code>AS-ESW01#show run

!Current Configuration:
!System Description ""Dell Networking N2024P, 6.0.1.3, Linux 3.6.5-320b2282""
!System Software Version 6.0.1.3
!
configure
vlan 47
name ""Aerohive Management""
vlan association subnet 192.168.47.0 255.255.255.0
exit
vlan 48
name ""Client Company Wired Production""
vlan association subnet 192.168.48.0 255.255.255.0
exit
vlan 49
name ""Client Company Wireless Production""
vlan association subnet 192.168.49.0 255.255.255.0
exit
vlan 50
name ""Client Company Wireless Guest""
vlan association subnet 192.168.50.0 255.255.255.0
exit
vlan 47-50
exit              
hostname ""AS-ESW01""
slot 1/0 8    ! Dell Networking N2024P
slot 2/0 5    ! Dell Networking N2048
stack
member 1 7    ! N2024P
member 2 8    ! N2048
exit
ip default-gateway 192.168.48.254
ip route 0.0.0.0 0.0.0.0 192.168.48.254 253
interface vlan 1
exit
interface vlan 47
ip address 192.168.47.253 255.255.255.0
exit
interface vlan 48
ip address 192.168.48.253 255.255.255.0
exit
interface vlan 49
ip address 192.168.49.253 255.255.255.0
exit
interface vlan 50
ip address 192.168.50.253 255.255.255.0
exit
username (output omitted)
ip ssh server
!
interface Gi1/0/1
description ""AS-APFL3-01""
switchport mode general
switchport general pvid 47
switchport general allowed vlan add 47
switchport general allowed vlan add 48-50 tagged
switchport general allowed vlan remove 1
exit
!
(Output omitted for brevity)
!
interface Gi1/0/24
description ""Trunk to Suite 128 (AS-CSW01)""
switchport mode general
switchport general pvid 48
switchport general allowed vlan add 48
switchport general allowed vlan add 47,49-50 tagged
switchport general allowed vlan remove 1
switchport trunk native vlan 48
exit              
!
exit
snmp-server engineid local 800002a203f8b1564da008
snmp-server community ""public"" ro
exit
</code></pre>

<p>I attempted to replicate this problem in my home lab (albeit on Cisco equipment) and was unable to: inter-VLAN routing worked fine on that setup. At this point, I'm kinda stumped. Dell tech support wanted us to create a separate VLAN for each switch, and static-route between them. No thanks.</p>

<p>All thoughts / input appreciated!</p>
","<p><strong>Solution:</strong> </p>

<p>The commands on VLANs on the access switches for VLAN association with subnet are the root cause of the issue. </p>

<pre><code>vlan associate subnet 192.168.48.0 255.255.255.0
</code></pre>

<p>This command tells the switch to associate traffic with the appropriate VLAN by source-IP address in packet headers. </p>

<p>What was happening is that the return traffic from a client would be dumped into the wrong VLAN on the access switch - the VLAN associated with its source IP, different than that of the client.</p>

<p>Removal of these commands on the access switches resulted in immediate desired connectivity across all VLANs.</p>

<p>EDITED to add: Credit for this fix goes to a fellow networking professional who pointed out their function and voiced his concern.</p>
","11386"
"Role of SSAP and DSAP in Ethernet frame format","9697","","<p>I am well aware of Ethernet DIX format.  But, the role of SSAP (Source Service Access Point) and DSAP (Destination Service Access Point) in IEEE802.3 Ethernet frame  is confusing and always expressed in high profile.  </p>

<p>What do these actually help?</p>
","<p>Identifying the Data Inside an Ethernet Frame<br>
Each data-link header has a field in its header with a code that defines the type of protocol header that follows.
For example, the Destination Service Access Point (DSAP) field has a value of E0, which means that the next header is a Novell IPX header. Why is that? Well, when the IEEE created 802.2, it saw the need for a protocol type field that identified what was inside the field called ""data"" in an IEEE Ethernet frame.<br>
The IEEE called its Type field the destination service access point (DSAP). When the IEEE first created the 802.2 standard, anyone with a little cash could register favorite protocols with the IEEE and receive a reserved value with which to identify those favorite protocols in the DSAP field. For instance, Novell registered IPX and was assigned hex E0 by the IEEE.<br>
<img src=""https://i.stack.imgur.com/u7vjq.jpg"" alt=""Ethernet Frame Format""><br>
However, the IEEE did not plan for a large number of protocols - and it was wrong. As it turns out, the 1-byte-long DSAP field is not big enough to number all the protocols.<br>
To accommodate more protocols, the IEEE allowed the use of an extra header, called a SubNetwork Access Protocol (SNAP) header. The DSAP field of 0xAA, which implies that a SNAP header follows the 802.2 header, and the SNAP header includes a 2-byte protocol type field. The SNAP protocol type field is used for the same purpose as the DSAP field, but because it is 2 bytes long, all the possible protocols can be identified. For instance, the SNAP type field has a value of 0800, signifying that the next header is an IP header. RFC 1700, ""Assigned Numbers"" (<a href=""http://www.isi.edu/in-notes/rfc1700.txt"" rel=""noreferrer"">RFC 1700</a>), lists the SAP and SNAP Type field values and the protocol types that they imply.<br></p>

<p>See more: <a href=""http://www.wildpackets.com/resources/compendium/reference/sap_numbers"" rel=""noreferrer"">SAP Numbers</a></p>
","6792"
"OSPF Stuck in Exstart Adjacency State","9651","","<p>According to <a href=""http://www.cisco.com/en/US/tech/tk365/technologies_tech_note09186a0080093f0d.shtml"">this</a> article two routers will get stuck in the exstart adjacency state when their configured MTU sizes do not match. Does a VLAN tag affect this as well even if the routers involved are unconcerned with which VLAN the packet is coming from or heading to?</p>

<p>I'll try to clarify the question if it is unclear at all.</p>
","<blockquote>
  <p>According to this article two routers will get stuck in the exstart adjacency state when their configured MTU sizes do not match. Does a VLAN tag affect this as well even if the routers involved are unconcerned with which VLAN the packet is coming from or heading to?</p>
</blockquote>

<p>Most Cisco routers and switches allow 1500 byte IP payloads by default, even when tagged with dot1q.  You can verify this with <code>show ip interface SomeIntfName</code>...</p>

<pre><code>Router1#sh ip int vlan105
Vlan105 is up, line protocol is up
  Internet address is 10.15.2.19/30
  Broadcast address is 255.255.255.255
  Address determined by setup command
  MTU is 1500 bytes  &lt;-------------
</code></pre>

<p>The reason dot1q on a Cisco interface works without bumping the physical interface MTU is because most Cisco routers support what Cisco calls ""baby giants""... a baby giant has an Ethernet MTU above 1518 (which includes the eth header size), but not very much over 1518... usually the default values is 1522 bytes... see this <a href=""http://www.cisco.com/en/US/products/hw/switches/ps700/products_configuration_example09186a008010edab.shtml"" rel=""nofollow"">MTU configuration doc</a> for more information.  Many Cisco platforms support configurable ethernet baby giant MTUs to 1532 bytes (or even higher), which is also why MPLS tag stacks (2 or 3 tags deep) can work through legacy ethernet links.</p>

<p>Even though Cisco ethernet interfaces support baby giants, they leave the default IP MTU at 1500 bytes.  As long as the default IP MTU of 1500 is maintained, you'll have no problems with the default settings of any other router with a 1500-byte IP MTU... quoting <a href=""http://tools.ietf.org/html/rfc2328#page-103"" rel=""nofollow"">RFC 2328 Section 10.8</a>:</p>

<pre><code>10.8.  Sending Database Description Packets

    This section describes how Database Description Packets are sent
    to a neighbor. The Database Description packet's Interface MTU
    field is set to the size of the largest IP datagram that can be
    sent out the sending interface, without fragmentation.
</code></pre>
","2599"
"Regarding Dot1X dynamic VLAN assignment","9634","","<p><strong>Situation:</strong></p>

<p>I am trying to get 802.1X working for me. I want RADIUS server to dynamically assign VLANs to ports based on RADIUS reply attribute for particular user. I have an HP E2620 switch and a FreeRADIUS server. The supplicant is a Windows 8.1 machine</p>

<p>I referred to <a href=""http://wiki.freeradius.org/vendor/HP"" rel=""nofollow"">this document</a> on freeradius website.</p>

<hr>

<p><strong>What I've done so far:</strong></p>

<p>On FreeRADIUS I created a user with such parameters:</p>

<pre><code>dot1xtest    User-Password := ""secret""
             Tunnel-Type = ""VLAN"",
             Tunnel-Medium-Type = ""IEEE-802"",
             Tunnel-Private-Group-ID = ""100""
</code></pre>

<p>I also tried <code>Tunnel-Pvt-Group-ID</code> instead, but it doesn't work on FreeRADIUS, just barks at me (I saw this on resources for configuring on Microsoft NPS, <a href=""http://technet.microsoft.com/en-us/library/cc754422%28v=ws.10%29.aspx"" rel=""nofollow"">one of these</a>)
. Also I tried values ""802"", 802, 6 for tunnel medium type.</p>

<p>Also I tried to use actual VLAN name instead of VLAN-ID as Group ID value. Anyway its datatype is string.</p>

<p>I configured the HP switch to use this RADIUS server for AAA and set this up for port 10:</p>

<pre><code>aaa port-access gvrp-vlans
aaa authentication port-access eap-radius
aaa port-access authenticator 10
aaa port-access authenticator 10 auth-vid 150
aaa port-access authenticator 10 unauth-vid 200
aaa port-access authenticator active
</code></pre>

<hr>

<p><strong>VLANs:</strong></p>

<pre><code>VLAN 100 - VLAN which I want to get after authentication.
VLAN 150 - VLAN which I get now, because my config is not working
VLAN 200 - Unauthorized VLAN which is used on auth. failure
</code></pre>

<hr>

<p><strong>Notes:</strong></p>

<ul>
<li><p>Port 10 also has untagged VLAN 150 assigned to it: <code>vlan 150 untagged 10</code>. And I can't get rid of the static assignment</p></li>
<li><p>All VLANs listed above are present in switch's VLAN database. </p></li>
<li><p>Whenever I plug into this port it asks me for credentials; after I succeed with authentication it just sends me to VLAN150 and if I try to fail I get to VLAN200. </p></li>
<li><p>I enabled 802.1X authentication on Windows connection just like described <a href=""http://windows.microsoft.com/en-us/windows/enable-802-1x-authentication#1TC=windows-7"" rel=""nofollow"">here</a>.</p></li>
<li><p>I tried enabling GVRP - it doesn't change anything</p></li>
</ul>

<hr>

<p><strong>Diagnostic/show command output:</strong></p>

<p><em>Static VLAN assignment for Port 10. VLAN 150 untagged</em></p>

<pre><code> SW # show vlans ports 10 detail

 Status and Counters - VLAN Information - for ports 10

  VLAN ID Name                             | Status     Voice Jumbo Mode
  ------- -------------------------------- + ---------- ----- ----- --------
  150     VLAN150                          | Port-based No    No    Untagged
</code></pre>

<p><em>In</em> <code>show logging</code> <em>I see this:</em></p>

<pre><code>I 08/28/14 08:29:24 00077 ports: port 10 is now off-line
I 08/28/14 08:29:29 00435 ports: port 10 is Blocked by AAA
I 08/28/14 08:29:29 00435 ports: port 10 is Blocked by STP
I 08/28/14 08:29:29 00076 ports: port 10 is now on-line
I 08/28/14 08:29:29 00001 vlan: VLAN200 virtual LAN enabled
I 08/28/14 08:29:29 00435 ports: port 10 is Blocked by AAA
I 08/28/14 08:29:29 00002 vlan: UNUSED virtual LAN disabled
I 08/28/14 08:29:29 00435 ports: port 10 is Blocked by STP
I 08/28/14 08:29:29 00076 ports: port 10 is now on-line
I 08/28/14 08:29:29 00001 vlan: UNUSED virtual LAN enabled
I 08/28/14 08:29:47 00002 vlan: UNUSED virtual LAN disabled
</code></pre>

<p><code>show port-access authenticator</code> <em>output:</em></p>

<pre><code>SW # show port-access authenticator

 Port Access Authenticator Status

  Port-access authenticator activated [No] : Yes
  Allow RADIUS-assigned dynamic (GVRP) VLANs [No] : Yes

       Auths/  Unauth  Untagged Tagged           % In  RADIUS Cntrl
  Port Guests  Clients VLAN     VLANs  Port COS  Limit ACL    Dir
  ---- ------- ------- -------- ------ --------- ----- ------ -----
  10   1/0     0       150      No     No        No    No     both
</code></pre>

<p><em>RADIUS user test:</em></p>

<pre><code>Linux-server # radtest dot1xtest secret localhost 0 secretkey
Sending Access-Request of id 158 to 127.0.0.1 port 1812
        User-Name = ""dot1xtest""
        User-Password = ""secret""
        NAS-IP-Address = 127.0.0.1
        NAS-Port = 0
        Message-Authenticator = 0x00000000000000000000000000000000
rad_recv: Access-Accept packet from host 127.0.0.1 port 1812, id=158, length=37
        Tunnel-Type:0 = VLAN
        Tunnel-Medium-Type:0 = 802
        Tunnel-Private-Group-Id:0 = ""100""
</code></pre>

<p><em>This is what I saw in TCPdump on the RADIUS server. I was capturing outgoing UDP traffic with source port 1812.</em> It's what my switch gets (if it does actually, not sure how to check that...)</p>

<pre><code>      Tunnel Type Attribute (64), length: 6, Value: Tag[Unused]#13
        0x0000:  0000 000d
      Tunnel Medium Attribute (65), length: 6, Value: Tag[Unused]802
        0x0000:  0000 0006
      Tunnel Private Group Attribute (81), length: 5, Value: 100
        0x0000:  3130 30
</code></pre>

<p><em>Debug:</em></p>

<pre><code>debug security radius-server
debug security port-access authenticator
debug destination buffer
</code></pre>

<p>After that I unplugged and plugged in the cable and did <code>show debug buffer</code> and <a href=""http://www.pastebucket.com/54046"" rel=""nofollow"">here is the copy-paste of it</a>. It's weird, nothing is said about any attributed related to VLAN.</p>

<hr>

<p><strong>Questions:</strong></p>

<p>What am I doing wrong? </p>

<p>I've read in a bunch of resources that if the RADIUS assigns a VLAN ID switch uses that in the first place. Then it falls back to Authorized VLAN configured for Port-Access Authenticator if authentication succeeds. If that is not present it assigns Untagged VLAN configured on the port. Why don't I get that behavior? </p>

<p>I kind of start to think the attribute <code>Tunnel-Private-Group-Id</code> is not supported on these switches. It seems every resource refers to <code>Tunnel-Pvt-Group-Id</code> instead (configuring on Microsoft). Too bad I don't have Windows Server to check.</p>

<p>Maybe it's firmware related? Didn't try to upgrade yet, I use RA_15_06_0009.swi and there's RA_15_14_0007.swi out there already</p>

<hr>

<p><strong>Update</strong></p>

<p>Just tried on a <code>3500yl-24G-PWR</code> model and still doesn't work. So.. I'd guess, switches just don't get the config from the RADIUS server (or did I use incorrect attributes or operators?). How can I troubleshoot that?</p>
","<p>Wow, I would have never though of this one. It was just a random solution.</p>

<p>So, the problem was with <code>authorize</code> section in my <code>default</code> site configuration at <code>/etc/raddb/sites-enabled/default</code>, it was kind of default. I don't really know what's up with that (if you, guys, know, comment on that, please), gonna do some research on that; here it is:</p>

<pre><code>eap {
    ok = return
}
</code></pre>

<p>I commented this out and replaced with just:</p>

<pre><code>eap
</code></pre>

<p>I was not hoping any more to ever get it working and then I reconnected and... it happened, just randomly and I'm so excited now! I got assigned a VLAN dynamically:</p>

<p><em>Debug:</em></p>

<pre><code>0001:03:15:51.07 RAD  mRadiusCtr:ACCESS REQUEST id: 194 to 192.168.1.27,
   session: 56, access method: PORT-ACCESS, User-Name: dot1x,
   Calling-Station-Id: dead00-00beef, NAS-Port-Id: 10, NAS-IP-Address:
   192.168.100.17.
0001:03:15:51.10 RAD  tRadiusR:ACCESS ACCEPT id: 194 from 192.168.1.27 received.
0001:03:15:51.10 1X   m8021xCtrl:Port 10: received Success for client
   dead00-00beef, finished authentication session.
0001:03:15:51.10 1X   m8021xCtrl:Port: 10 MAC: dead00-00beef RADIUS Attributes,
   vid: 100.
0001:03:15:51.10 1X   m8021xCtrl:Port 10: starting session for client
   dead00-00beef.
</code></pre>

<p><code>SW # show port-access authenticator 10 vlan</code> - still shows Unauthorized VLAN 200 and Authorized VLAN 150</p>

<pre><code>Port Access Authenticator VLAN Configuration

  Port-access authenticator activated [No] : Yes
  Allow RADIUS-assigned dynamic (GVRP) VLANs [No] : No

       Access  Unauth  Auth
  Port Control VLAN ID VLAN ID
  ---- ------- ------- -------
  10   Auto    200     150
</code></pre>

<p><code>SW # show vlans ports 10 detail</code> - And the untagged VLAN on port 10 got set to <code>VLAN 100</code></p>

<pre><code> Status and Counters - VLAN Information - for ports 10

  VLAN ID Name                 | Status     Voice Jumbo Mode
  ------- -------------------- + ---------- ----- ----- --------
  100     VLAN100              | Port-based No    No    Untagged
</code></pre>

<p><code>SW # show port-access authenticator</code></p>

<pre><code>  Port Access Authenticator Status

  Port-access authenticator activated [No] : Yes
  Allow RADIUS-assigned dynamic (GVRP) VLANs [No] : No

       Auths/  Unauth  Untagged Tagged           % In  RADIUS Cntrl
  Port Guests  Clients VLAN     VLANs  Port COS  Limit ACL    Dir
  ---- ------- ------- -------- ------ --------- ----- ------ -----
  10   1/0     0       100      No     No        No    No     both
</code></pre>

<p>Also, if you want it to work, you have to create all required VLANs on the switch, otherwise you'll get this kind of stuff:</p>

<pre><code>W 09/12/14 12:47:57 02400 dca: 8021X client, RADIUS-assigned VID validation
            error. MAC DEAD0000BEEF port 10 VLAN-Id 0 or unknown.
</code></pre>

<p>and the Windows will just say: <code>Authentication failed</code> which is kind of confusing too. </p>

<p>Didn't quite get it to work with unknown VLANs in spite of the fact GVRP was enabled, <code>aaa port-access gvrp-vlans</code> was set and I also explicitly set <code>unknown-vlans learn</code> on interface 10, but oh well...nvm. </p>
","10963"
"Two hosts of different subnets connected to switch","9602","","<p>Two host of different subnets, let it be A - 10.1.2.1/24 and B - 10.1.3.1/24 be connect to the same switch S. 
Can they communicate?</p>

<p>So as far I understand:</p>

<ul>
<li>A sends a packets with IP of B</li>
<li>S receives it and compare it with    values in Stored Address Table
else broadcasts it.</li>
<li>B receives the    packets, check the IP and accepts it.</li>
</ul>

<p>Am I right?</p>
","<p>Unfortunately, no, you are incorrect.</p>

<p>Ron makes a good point, you didn't provide a subnet mask, so if we were to assume the classful mask, the 10.x.x.x address would have a 255.0.0.0 mask, which would actually put the two hosts on the same network.  If that is the case, they would have no problem communicating.</p>

<p>However, given the nature of your question, I imagine you intended for each of these hosts to use a smaller mask -- we'll go ahead and use 255.255.255.0, which puts both hosts in two different subnets.</p>

<p>That being said, the heart of what you are missing lies in forgetting about <strong>ARP</strong> (Address Resolution Protocol).  Specifically, in whom HostA decides to ARP for.  Let me explain...</p>

<p><BR>
Before any host puts any packet on the wire, the first thing it does is determine whether the destination IP is on its own network, or on a foreign network.  Let's run through it from the perspective of Host A.</p>

<p>Host A know its IP (10.1.2.1), and its Subnet Mask (/24, or 255.255.255.0).  With a little subneting, HostA determines that its network spans all the IP addresses in the range of 10.1.2.0 through 10.1.2.255.  <em>(We'll leave out details of the NetID and BroadcastIP, since for the moment they aren't relevant)</em></p>

<p>Host A also knows its destination IP is 10.1.3.1, which falls <em>outside</em> of the range of IP addresses within Host A's own network.  As such, Host A would would come to the conclusion that the destination IP 10.1.3.1 is on a foreign network, and Host A could only reach a foreign network by speaking through a Router.  Or more specifically, through HostA's <em>default gateway</em>.</p>

<p>If HostA isn't configured with a Default Gateway at this point, then the process ends here with a general failure.  HostA can not speak to HostB.</p>

<p>If HostA <em>is</em> configured with a Default Gateway, it would send out an ARP Request (which is itself a Broadcast frame), asking for the MAC address of its default gateway --  <strong>NOT</strong> the MAC address of the final destination IP.</p>

<p>The switch, having received the broadcast frame would flood the packet out all interfaces, to include the one HostB is connected to.  HostB would indeed receive the packet, <em>but</em> since the ARP is looking for the Default Gateway's MAC address <em>(and not the MAC address of HostB)</em>, HostB would simply drop and ignore the ARP Request, without ever sending any sort of response.</p>

<p>HostA, then, would never receive a MAC address for its default gateway, and would therefore be unable to encapsulate the Layer 3 Packet with a Layer 2 header.  The packet would fail there.</p>

<p><HR></p>

<p>That said, although somewhat unrelated to your question, I did want to speak to something you said.  This may be terminology nuance, but I just want to make sure it is communicated.  A switch only does two things:  <strong>forwards</strong> frame for which it know the destination MAC address, or <strong>flood</strong> frames for which it doesn't know the destination MAC address.  <em>A switch never broadcasts</em>.  </p>

<p>A <strong>broadcast</strong> is a frame who's destination MAC address is <code>ffff.ffff.ffff</code>.  This is a specially reserved MAC address, specifically designed for broadcast frames.  When a switch encounters a frame destined to <strong>ffff.ffff.ffff</strong>, its behavior is to always <strong>flood</strong> that frame.</p>

<p>You could look at it like this, since <strong>ffff.ffff.ffff</strong> is a reserved MAC address, it is un-learn-able by the switch.  Therefore, whenever a switch receives something destined to ffff.ffff.ffff, it is forced to flood it out all ports in the VLAN that the frame was originally received in.</p>
","12823"
"How to prevent possible loop?","9531","","<p><img src=""https://i.stack.imgur.com/Em2Fm.png"" alt=""switch loop""></p>

<p>I have enabled spanning-tree bpduguard on the Cisco 2960 but it seems like the unmanaged switch does not have spanning tree protocol. Any other configuration to prevent loop?</p>
","<p>Spanning-tree is the protocol designed to detect and prevent loops. bpduguard is intended for <em>access ports</em> -- ports connected to end users/machines (a single node.) A port configured for bpduguard gets disabled upon receiving a bpdu -- any bpdu.<sup>[1][2]</sup> As such, enabling this feature on a port headed to a simple switch (aka ""hub"") is asking for trouble, the instant anyone connected to that ""hub"" sends a bpdu, the 2960 will disable the port leading to it -- cutting off the ""hub"" and everything connected to it.</p>

<p>The best option is to simply let spanning-tree on the 2960 work like normal. If you want the port to pass traffic immediately on link -- thus bypassing the normal stp discovery phase -- enable <em>portfast</em>. But otherwise, leave bpduguard off.</p>

<p>[1] <a href=""https://supportforums.cisco.com/document/45136/importance-bpdu-guard-and-bpdu-filter"">https://supportforums.cisco.com/document/45136/importance-bpdu-guard-and-bpdu-filter</a><br/>
[2] <a href=""http://www.cisco.com/c/en/us/support/docs/lan-switching/spanning-tree-protocol/10586-65.html"">http://www.cisco.com/c/en/us/support/docs/lan-switching/spanning-tree-protocol/10586-65.html</a></p>
","16280"
"Difference between ping timed out and destination host unreachable","9465","","<p>I'm pinging from a Windows Box to a device that I rebooted.</p>

<pre><code>PS C:\Users\administrador&gt; ping 192.168.2.10

Pinging 192.168.2.10 with 32 bytes of data:
Control-C
PS C:\Users\administrador&gt; ping -t 192.168.2.10

Pinging 192.168.2.10 with 32 bytes of data:
Request timed out.
Request timed out.
Request timed out.
Request timed out.
Request timed out.
Request timed out.
Request timed out.
Reply from 192.168.2.120: Destination host unreachable.
Reply from 192.168.2.120: Destination host unreachable.
Reply from 192.168.2.120: Destination host unreachable.
Reply from 192.168.2.120: Destination host unreachable.
Reply from 192.168.2.120: Destination host unreachable.
Reply from 192.168.2.120: Destination host unreachable.
Reply from 192.168.2.120: Destination host unreachable.
Reply from 192.168.2.120: Destination host unreachable.
Reply from 192.168.2.120: Destination host unreachable.
Reply from 192.168.2.120: Destination host unreachable.

Ping statistics for 192.168.2.10:
    Packets: Sent = 17, Received = 10, Lost = 7 (41% loss),
Control-C
</code></pre>

<p>After this, the host started to answer the ping probes.</p>

<p>So, my questions are:</p>

<ol>
<li>What's the difference between those answers?</li>
<li>Why the ping result is showing only 41% loss instead of 100%?</li>
<li>Is there any relation between the ""Destination host unreachable""
answer and the fact that the machine is starting?</li>
</ol>
","<p>First we need to understand how packets are sent.</p>

<p>When a host or router tries to send an IPv4 packet* it first looks up the destination in it's routing table. Based on the routing table it determines the ""next hop IP address"" and interface. For a machine on a local subnet the ""next hop IP address"" will be the IP address of the destination, otherwise it will be the IP of a gateway.</p>

<p>What happens next depends on the interface type. Assuming it's an Ethernet or similar interface the network stack needs to determine what MAC address to send the packet to. To do that it looks in it's ARP table. If it finds a valid entry then it fills in the MAC addres and sends the packet out over the Ethernet interface. </p>

<p>If it doesn't find a valid ARP table entry then it will begin the ARP process to try and create one. In the meantime packets destined for that next-hop IP address will be queued up until the system knows what MAC address to send them too.</p>

<p>If the ARP process times out then any queued up packets will be rejected with a ""destination host unreachable"" ICMP message.</p>

<p>Eventually entries in the ARP table time out and need to be refreshed.</p>

<p>On hosts/routers without a default gateway you can also get a ""destination host unreachable"" reply generated if there is no routing table entry, so the system doesn't even know what interface to ARP on.</p>

<hr>

<p>So what happens when you power cycle a machine and ping it?</p>

<p>At first you likely already have a valid ARP table entry. Your machine puts the packets on the wire but they never get delivered because the network stack on the destination is down. You get ""Request timed out"" (with microsoft ping, linux ping doesn't display the lack of response at all).</p>

<p>Later the ARP cache entry times out. The hop before the box you power cycled (may be your client box or a router) tries to do a new ARP lookup but fails, so it bounces the packets with ICMP errors. Often you see multiple packets get queued up and bounced at the same time.</p>

<p>Finally the network stack on the target box comes back up. ARP succeeds and the packets are sent to the target which replies to them.</p>

<p>* With IPv6 the principles are similar but the details are different.</p>
","30949"
"IPv6 link-local vs unique local","9454","","<p><strong>When do you use link-local or unique local in IPv6 networks?</strong> (Cisco doesn't manage to explain it properly in their online material.)</p>
","<p>Link local addresses are used in one single network segment, they can't be routed. Unique local addresses can be routed, but only within one routing domain. So an ISP can choose to use ULA for services which can't be publicly accessible. </p>
","6506"
"What are the benefits and cons of IGMP snooping?","9423","","<p>Our new router is asking if we want IGMP snooping enabled. Not being familiar with this, I looked to the internet and got the following <a href=""https://en.wikipedia.org/wiki/IGMP_snooping"" rel=""noreferrer"">wiki description</a>:</p>

<blockquote>
  <p>IGMP snooping is the process of listening to Internet Group Management Protocol (IGMP) network traffic. The feature allows a network switch to listen in on the IGMP conversation between hosts and routers. By listening to these conversations the switch maintains a map of which links need which IP multicast streams. Multicasts may be filtered from the links which do not need them and thus controls which ports receive specific multicast traffic.</p>
</blockquote>

<p>But what are the benefits? And what considerations (security, performance, etc) need to be taken into account before enabling it? My view is - if it's safe, then why isn't just on by default?</p>
","<p>IGMP Snooping is a feature for <em>switches</em> to learn what multicast groups are needed on which ports. <em>Routers</em> not handling <em>multicast routing</em> don't care.</p>

<p>That said, without an <em>mrouter</em> in the network, you need to configure one (or more) <em>igmp querier</em>s. This ensures group membership reports are flood through the network periodically to keep the forwarding information up-to-date; otherwise it expires and traffic is either dropped, or floods everywhere.</p>

<p>The benefit is that multicast traffic goes only where it belongs. If nothing on that port has joined that group, the switch will prune it. In a cascaded environment, that can significantly reduce inter-switch traffic. And likewise keep access links clear of traffic hosts don't want.</p>

<p>If you don't know it's enabled, situations may arise wherein traffic may appear to be ""missing"" on the wire, because it's being pruned. (<em>fast-leave</em>, no querier, no joins, etc.)</p>

<p>Thus, it's rarely enabled by default.</p>
","19558"
"How to put special characters on ssid","9381","","<p><a href=""https://i.stack.imgur.com/JQtS2.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/JQtS2.jpg"" alt=""enter image description here""></a></p>

<p>Refer to the picture above. I would like to add the word ""FREE"" for my SSID. How do I do that? I've seen this ssid around my area but I don't know how to implement it on my router.</p>
","<p>Looks like an Emoji, hex code 1F193:</p>

<p>🆓</p>

<p>If the interface of your router allows it, you can simply copy and paste the above character on the SSID text field. </p>

<p>Note: the style of the character will appear different depending on the client device displaying the list of Wi-Fi networks. See <a href=""http://apps.timwhitlock.info/emoji/tables/unicode"" rel=""nofollow"">this complete Emoji list</a>.</p>
","32826"
"Cisco ASA - Delete or rename ""names""","9371","","<p>I had a bad experience with Cisco ASA when changing/renaming ""nameif"" interface attributes.</p>

<p>I would like to know if renaming or simply deleting existing names used in ASA config will do any damage to the configuration.</p>
","<blockquote>
  <p>I would like to know if renaming or simply deleting existing names used in ASA config will do any damage to the configuration.</p>
</blockquote>

<p>You can safely delete and add <code>name</code> aliases because the ASA reverts to the IP address when the name disappears...</p>

<p>The original alias is <code>Xbox</code>...</p>

<pre><code>asa5505(config)# sh runn | i Xbox
name 172.16.1.20 Xbox description Xbox
access-list INSIDE_in extended permit udp host Xbox any eq domain
access-list INSIDE_in extended permit tcp host Xbox any eq domain
access-list INSIDE_in extended permit udp host Xbox any eq 3074
access-list INSIDE_in extended permit tcp host Xbox any eq 3074
access-list INSIDE_in extended permit udp host Xbox any eq 88
</code></pre>

<p>Now deleting <code>Xbox</code></p>

<pre><code>asa5505(config)# no name 172.16.1.20 Xbox
asa5505(config)# sh runn | i 172.16.1.20
access-list INSIDE_in extended permit udp host 172.16.1.20 any eq domain
access-list INSIDE_in extended permit tcp host 172.16.1.20 any eq domain
access-list INSIDE_in extended permit udp host 172.16.1.20 any eq 3074
access-list INSIDE_in extended permit tcp host 172.16.1.20 any eq 3074
access-list INSIDE_in extended permit udp host 172.16.1.20 any eq 88
asa5505(config)#
</code></pre>

<p>And adding <code>Xbox-new</code> on the same address...</p>

<pre><code>asa5505(config)# name 172.16.1.20 XBox-new descr temporary example
asa5505(config)# sh runn | i 172.16.1.20
name 172.16.1.20 XBox-new description temporary example
asa5505(config)# sh runn | i XBox
name 172.16.1.20 XBox-new description temporary example
access-list INSIDE_in extended permit udp host XBox-new any eq domain
access-list INSIDE_in extended permit tcp host XBox-new any eq domain
access-list INSIDE_in extended permit udp host XBox-new any eq 3074
access-list INSIDE_in extended permit tcp host XBox-new any eq 3074
access-list INSIDE_in extended permit udp host XBox-new any eq 88
asa5505(config)#
</code></pre>

<p><br>
<br></p>

<p><strong>Bonus material: renaming a <code>nameif</code></strong></p>

<blockquote>
  <p>I had a bad experience with Cisco ASA when changing/renaming ""nameif"" interface attributes.</p>
</blockquote>

<p>Renaming <code>nameif</code> on an interface works just fine in ASA 8.2(5)... This is an example of changing <code>nameif OUTSIDE</code> to <code>nameif newOUTSIDE</code></p>

<pre><code>asa5505# sh nameif
Interface                Name                     Security
Vlan100                  OUTSIDE                    0
Vlan200                  INSIDE                   100
asa5505# sh runn | i access-group
access-group OUTSIDE_in in interface OUTSIDE
access-group INSIDE_in in interface INSIDE
asa5505# conf t
asa5505(config)# int vlan100
asa5505(config-if)# nameif newOUTSIDE
asa5505(config-if)# show nameif
Interface                Name                     Security
Vlan100                  newOUTSIDE                 0
Vlan200                  INSIDE                   100
asa5505(config-if)# sh runn | i newOUTSIDE
 nameif newOUTSIDE
mtu newOUTSIDE 1500
global (newOUTSIDE) 1 interface
access-group OUTSIDE_in in interface newOUTSIDE
ssl trust-point LOCAL_CERT_gw_200904 newOUTSIDE
asa5505(config-if)#
</code></pre>

<p>The ASA even renamed the interface references from <code>OUTSIDE</code> to <code>newOUTSIDE</code> automatically... TCP sessions through the FW did not drop when I did it.</p>

<p><em>WARNING</em></p>

<p>Whatever you do, do <em>not</em> try <code>no nameif &lt;something here&gt;</code>... it will hose your config...</p>

<pre><code>asa5505(config)# int vlan100
asa5505(config-if)# no nameif OUTSIDE
asa5505(config-if)# nameif newBrokenOUTSIDE
</code></pre>
","2498"
"IPv6: Why not use /126 on P2P links for IPv6?","9303","","<p>In IPv4 we use /30 to conserve addresses. So why do some people recommend using /64 on P2P links instead of /126? I get using a /64 on regular subnets but isn't using a /64 when there will only ever be two addresses in use on P2P links tremendous waste of addresses?</p>
","<p>Because IPv6 always recommends using /64 for all links.</p>

<p>For the second part of the question, is it a waste?</p>

<p>A /64 has <strong>18,446,744,073,709,551,615</strong>, or 18 quintillion addresses.</p>

<p>Most IPv4 subnets are less than 255 hosts. Assume that you have a network with 255 hosts on it and they're given a /64 prefix. That means that 255 hosts are assigned a v6 address, leaving 18,446,744,073,709,551,360 addresses unused. That's over 99.99%. To be more accurate, that's sixteen 9's, or effectively 100% ""waste"".</p>

<p>Even if you had a subnet with 1,000,000 hosts on it, that's 18,446,744,073,708,551,616 wasted addresses, or still over 99.99%. Only thirteen 9's this time, but still effectively 100% ""waste"".</p>

<p>So the percentage difference between using one million addresses or two addresses on a single link is negligible.</p>

<p>And just so you can see what these numbers look like.</p>

<pre><code>* Two hosts is 99.9999999999999999891579782751449556599254719913005828857422% unused.
* 255 hosts is 99.9999999999999986176422300809818466404976788908243179321289% unused.
* 1M  hosts is 99.99999999999457898913757247782996273599565029144287109375% unused.
* 4B  hosts is 99.999999976716935634613037109375% unused.
</code></pre>

<p>Even the entire IPv4 Internet placed on a single /64 link would leave effectively 100% of the addresses unused. When you look at the numbers like this, using anything other than a /64 on a link is just silly.</p>
","6370"
"LACP rate slow vs fast... impact on bandwidth?","9277","","<p>Is there any impact on bandwidth when choosing fast (1s) LACPDU timing rather than slow (30s)?<br>
Anyone ever bothered to measure?</p>

<p>I've always assumed it's negligable, with the simple act of bonding probably adding more overhead than any LACPDUs</p>
","<p>An LACP PDU is around 110 <strong><em>bytes</em></strong>, so running them every second isn't likely to even register on an Ethernet link of any speed.</p>

<p>I would recommend running in ""fast"" mode at all times for rapid detection of faults.</p>
","18331"
"How many TCP/IP layers are involved when I am pinging my router and my PC?","9239","","<p>How many TCP/IP layers are involved when I am pinging my router and my PC?</p>

<p>My router : <code>ping 192.168.1.1</code></p>

<p>My PC : <code>ping 127.0.0.1</code></p>

<p>My PC : <code>Ping 192.168.1.10</code></p>

<p>I need to know how the data is transferred in all the three cases through the layers.</p>
","<p>First of all, remember that TCP/IP has only 4 layers:</p>

<ul>
<li>Application</li>
<li>Transport ( TCP/UDP )</li>
<li>Internet ( IP )</li>
<li>Link (Frame)</li>
</ul>

<p>When you ping your PC from itself, doesn't matter if it is the ""canonical"" localhost or a user defined address, only the second of the four layers is involved since the network stack does not need to access any network to reach itself.</p>

<p>Contrary, when you send a echo request to another box ,the running OS first resolve the L2 mappings ( even dynamically or by configuration ) and then uses those information to build the packet and to send it to the destination box.</p>
","2843"
"DHCP relay problem on interfaces secondary network","9236","","<p>A secondary network was configured on an interface of a Cisco 2621 router and the <code>ip helper-address</code> commands put in place but no clients of that secondary network could pull DHCP addresses. We swapped the primary network and the secondary network and everything started working just fine. Swapped it back and same problem as before.</p>

<p>Can anyone explain why this is so? Is there a way to make the forwarding of DHCP requests work for a interfaces secondary network or can it only work on the primary network?</p>
","<p>Cisco routers will use the primary subnet configured on the interface for identifying forwarded DHCP requests. </p>

<p>The only other option is the <a href=""http://www.cisco.com/en/US/docs/ios/12_2/ip/configuration/guide/1cfdhcp.html#wp1010291"">DHCP smart relay</a> feature, which allows a router to use the secondary subnet, but only after multiple DHCP offers for the primary subnet are not seen.</p>
","1254"
"Is there an automatable way to backup the configuration from a WLC 2504 controller?","9225","","<p>I am looking for a way to backup the controller configuration file via an automatic process.  I've seen links to the web interface which appears to do a one-time tftp copy of the config to a remote host, however I'm looking for a way to schedule the copy.</p>

<p>Does anyone know of a way to automate configuration backups for Cisco WLCs?</p>
","<p>Use a script to login to the WLC and run the transfer command:
<a href=""http://www.cisco.com/en/US/docs/wireless/controller/6.0/command/reference/cli60.html#wp1327209"">http://www.cisco.com/en/US/docs/wireless/controller/6.0/command/reference/cli60.html#wp1327209</a></p>

<p>You can use this to upload the config from the WLC to another server via TFTP/SFTP/FTP.</p>

<pre><code>(Cisco Controller) &gt;transfer upload mode sftp 

(Cisco Controller) &gt;transfer upload username my-osx-user

(Cisco Controller) &gt;transfer upload password my-os-password

(Cisco Controller) &gt;transfer upload serverip 192.168.1.10

(Cisco Controller) &gt;transfer upload path /Users/my-osx-user/

(Cisco Controller) &gt;transfer upload filename wlc.config

(Cisco Controller) &gt;transfer upload datatype config

(Cisco Controller) &gt;transfer upload start

Mode............................................. SFTP
SFTP Server IP................................... 192.168.1.10
SFTP Server Port................................. 22
SFTP Path........................................ /Users/my-osx-user/
SFTP Filename.................................... wlc.config
SFTP Username.................................... my-osx-user
SFTP Password.................................... *********
Data Type........................................ Config File 
Encryption....................................... Disabled

                                                          **************************************************
                            ***  WARNING: Config File Encryption Disabled  ***
                                                                              **************************************************


Are you sure you want to start? (y/N) y

SFTP Config transfer starting.

File transfer operation completed successfully.

(Cisco Controller) &gt;
</code></pre>

<p>While the link points to WLC 6.0, the example was run on 7.4.</p>
","3250"
"Monitor specific traffic type on a Cisco router","9170","","<p>Is it possible to monitor a specific traffic type going through a cisco router? (like monitoring via wireshark) </p>

<p>Ex: I want to monitor http traffic specifically that is passing through a router. (or DNS, FTP, ...)</p>
","<p>You could monitor the traffic</p>

<ul>
<li><p>on the router, Cisco IOS 12.4(20)T and later, there is a <a href=""https://supportforums.cisco.com/docs/DOC-5799"" rel=""nofollow noreferrer"">packet capture feature</a>, with filtering on interface name and direction and ACL.</p>

<ul>
<li>set up an access list for matching the traffic</li>
<li>create a capture buffer <code>monitor capture buffer holdpackets filter access-list &lt;number&gt;</code></li>
<li>define a capture point <code>monitor capture point ...</code> possibly with interface name, direction, and more - use the inline help to see possibilities</li>
<li>let the traffic pass</li>
<li>look at the capture buffer: <code>show monitor capture buffer holdpackets dump</code>, use <code>export</code> instead of <code>dump</code> to get a PCAP file for Wireshark analysis</li>
<li>don't forget to stop capturing, remove the capture point and delete the capture buffer afterwards</li>
</ul>

<p>For details and examples, follow the link or look at a <a href=""http://www.cisco.com/en/US/docs/ios/netmgmt/configuration/guide/nm_troubleshooting.html#wp1055858"" rel=""nofollow noreferrer"">Cisco troubleshooting manual</a>.</p></li>
<li><p>on the switchport, where the router is connected to, for this you could <a href=""https://networkengineering.stackexchange.com/q/640/231"">set up a mirror port on the switch</a> and monitor this via Wireshark</p></li>
<li><p>on the firewall, where the traffic passes</p>

<p>Cisco ASAs are capable of remotely doing packet capturing and giving you the output as a PCAP file which you can open locally with Wireshark. The ASDM provides an assistant for this. Step by step, you can specify source and destionation interface, ACLs or src/dest networks/host, and the protocol you like to watch. That's why I like having ASAs in place everywhere - with a router CLI may seem a bit complicated.</p></li>
</ul>

<p><img src=""https://i.stack.imgur.com/3hT0q.png"" alt=""Screenshot of the packet capture wizard""></p>
","888"
"OSPF Election with a /30 link?","9132","","<p>I have a few /30 subnets connecting OSPF routers over a broadcast capable link.. Should I also configure the interfaces involved in the link to <strong>ip ospf network point-to-point</strong>? Or does it matter? The only thing I can think of is to prevent the election which from my understanding shouldn't matter since it's only 2 hosts (the routers) in the subnet?</p>
","<blockquote>
  <p>I have a few /30 subnets connecting OSPF routers over a broadcast capable link.. Should I also configure the interfaces involved in the link to ip ospf network point-to-point? Or does it matter?</p>
</blockquote>

<p>The network type definitely matters, but you need to be sharp about handling this situation... there are some corner cases to consider.  Let's compare the consequences of configuring a /30 as ""Broadcast"" or ""Point-to-Point"" OSPF networks...</p>

<pre><code>----------+-------+--------------+--------------------+--------------+
Network   | Hello | DeadInterval | Adjacency Time     | LSAs per /30 | 
----------+-------+--------------+--------------------+--------------|
Broadcast |   10s |          40s |  &gt; 40s (very slow) |            3 |
Pt-to-Pt  |   30s |         120s |       &lt;  2s (fast) |            2 |
----------+-------+--------------+--------------------+--------------+
</code></pre>

<h2>Summary</h2>

<ul>
<li>OSPF <em>Broadcast</em> Network types establish an adjacency slowly (because they must wait for the DR election), and generate 50% more LSAs for every /30 you designate as an OSPF Broadcast network.  Those LSAs must be flooded and processed, which slows down convergence.  In short, designs which use many /30 OSPF Broadcast networks will converge somewhat more slowly than if you substituted /30 Point-to-Point networks...</li>
<li>OSPF <em>Point-to-Point</em> network types bring up an adjacency very quickly; however, as Ron mentioned, the <code>RouterDeadInterval</code> is 120 seconds so you might want to set <code>HelloInterval</code> lower.  However, a correctly-designed network doesn't need to worry about lowering <code>HelloInterval</code> for a /30 Point-to-Point OSPF network.</li>
</ul>

<hr>

<h2>Details: /30 on an OSPF Broadcast Network</h2>

<p><strong>OSPF Broadcast Network Defaults</strong>:</p>

<ul>
<li><code>HelloInterval</code>: 10 Seconds</li>
<li><code>RouterDeadInterval</code>: 40 Seconds</li>
</ul>

<p><strong>Time to detect OSPF Process failure</strong>: &lt;= 40 Seconds</p>

<p><strong>Adjacency time</strong>: more-than 40 seconds</p>

<ol>
<li><code>[Time T =  0]</code> Both routers send OSPF Hellos as the link comes up.  (<em>OSPF STATE: INIT</em>)</li>
<li><code>[Time T =  0]</code> Both routers see the opposite hello; however, unless configured with DR Priority 0, both routers <em>must</em> wait <code>RouterDeadInterval</code> seconds to ensure that there are no other candidate DRs are on the link. (<em>OSPF STATE: 2-WAY</em>)</li>
<li><code>[Time T = 40]</code>  DR / BDR are elected, and DBD exchange starts (<em>OSPF STATE: EXSTART</em>)</li>
<li><code>[Time T = 40 + 'DBD exchange time']</code> DBD is parsed, and SPF runs (<em>OSPF STATE: FULL</em>)</li>
</ol>

<p><strong>LSAs</strong>:</p>

<ul>
<li>Each router sends Router LSA(s): OSPF LSA Type 1</li>
<li>The DR sends a Type 2 <a href=""https://networkengineering.stackexchange.com/a/3783/775"">Network LSA</a> for the broadcast link itself</li>
</ul>

<hr>

<h2>Details: /30 on an OSPF Point-to-Point Network</h2>

<p><strong>OSPF Point-to-Point Network Defaults</strong>:</p>

<ul>
<li><code>HelloInterval</code>: 30 Seconds</li>
<li><code>RouterDeadInterval</code>: 120 Seconds</li>
</ul>

<p><strong>Time to detect OSPF Process failure</strong>: &lt;= 120 Seconds</p>

<p><strong>Adjacency time</strong>: Fast (normally less-than 2 Seconds)</p>

<ol>
<li><code>[Time T =  0]</code> Both routers send OSPF Hellos as the link comes up.  (<em>OSPF STATE: INIT</em>)</li>
<li><code>[Time T = 0]</code> Both routers see the opposite hello. (<em>OSPF STATE: 2-WAY</em>)</li>
<li><code>[Time T = 0]</code>  DBD exchange starts (<em>OSPF STATE: EXSTART</em>)</li>
<li><code>[Time T = 'DBD exchange time']</code> DBD is parsed, and SPF runs (<em>OSPF STATE: FULL</em>)</li>
</ol>

<hr>

<h2>When to lower <code>HelloInterval</code> for an OSPF Point-to-Point Network</h2>

<p>Consider these cases...</p>

<p><strong>Case A: Direct fiber link between routers</strong></p>

<pre><code>Router1-------------------------------Router2
</code></pre>

<p>The link between the routers is configured as OSPF Network Point-to-Point.  If the link between Router1 and Router2 dies, both routers immediately see their link go down, and run SPF to find an alternative path.  OSPF Process failures tend to be very rare, so there usually isn't a good argument to lower <code>HelloInterval</code> for CaseA.</p>

<p><strong>Case B: One Switch between two routers</strong></p>

<pre><code>Router1-------------Switch------------Router2
</code></pre>

<p>The link between the routers is configured as OSPF Network Point-to-Point.  If the link between Router1 and the switch dies, there is a problem... Router1 immediately knows to run SPF (after waiting <code>SPFDelay</code>); however, Router2's link is still up.  Consequently Router2 must wait to converge until either <code>RouterDeadInterval</code> expires, or until Router2 sees Router1's new LSA (flooded after Router1 finishes SPF).  In most cases, Router2 will see Router1's new LSA and then run SPF himself... however, Router2's reconvergence in that case is <em>at least</em> two times the <code>SPFInterval</code> (<code>SPFInterval</code> default: 5 seconds in IOS).</p>

<p>It's worth lowering hello timers (or BFD timers) for CaseB when your routers are configured as OSPF Network Point-to-Point.</p>

<p><strong>Case C: Two routers adjacent through multiple switches</strong></p>

<pre><code>Router1-----Switch1-----Switch2--------Router2
</code></pre>

<p>This is the worst case for OSPF Point-to-Point convergence time; the link between the routers is configured as OSPF Network Point-to-Point.  If the link between Switch1 and Switch2 dies, both routers see their links up; this means the default <code>HelloInterval</code> timers should be changed to prevent a two-minute delay between the link going down, and the SPF run.  In this case, it's definitely worth lowering hello timers (or BFD timers) for CaseC when your routers are configured as OSPF Network Point-to-Point.</p>
","10233"
"Ipsec vpn, phase 2 unable to come up","9100","","<p>I'm pretty sure I know the answer to this but I don't  know how to implement it. </p>

<p>Trying to setup an ipsec vpn from a Cisco 2811 to a linux box running openswan.  So far I can get phase 1 up but phase 2 is having an issue.  Its 100% a configuration issue.    </p>

<p>What I'm trying to do is push web and some other traffic out the vpn using the internet connection on the other end of that as its gateway to the net.  I'm getting cryptomap errors.  Here's the setup.  1.1.1.1 being the Cisco. The 2.2.2.2 address is the linux server which only has a single nic. </p>

<p>192.168.x.x/24 ----- 1.1.1.1 --  INTERNET 2.2.2.2 ---->>> Internet</p>

<p>I understand why it can't form the phase 2 tunnel, it can't agree on the map.   But I have no idea what the map should be in this case. </p>

<p>I've been testing it with just ICMP for now.  </p>

<p>I excluded ICMP from NAT :</p>

<pre><code>ip access-list extended NAT
deny   icmp 192.168.30.0 0.0.0.255 any
</code></pre>

<p>Then the ""interesting traffic"" for the vpn is:</p>

<pre><code>access-list 153 permit icmp 192.168.30.0 0.0.0.255 any
</code></pre>

<p>On the openswan side I'm using:</p>

<pre><code>left=2.2.2.2
right=1.1.1.1
rightsubnet=192.168.30.3/24
</code></pre>

<p>Well the cisco immediately starts throwing out:</p>

<pre><code>2d11h: map_db_find_best did not find matching map
2d11h: IPSEC(validate_transform_proposal): no IPSEC cryptomap exists for local address 1.1.1.1
2d11h: ISAKMP:(0:26:SW:1): IPSec policy invalidated proposal
2d11h: ISAKMP:(0:26:SW:1): phase 2 SA policy not acceptable! (local 1.1.1.1 remote 2.2.2.2)
</code></pre>

<p>I know what I want it to do but I don't know how to set it up. If this were just a simple internal subnet to internal subnet vpn no problem. </p>

<p>Any direction here would be really helpful. </p>

<p>Router config:</p>

<pre><code>version 12.4
service timestamps debug uptime
service timestamps log datetime
service password-encryption
!
hostname Hex-2811
!
boot-start-marker
boot system flash c2800nm-advsecurityk9-mz.124-24.T5.bin
boot-end-marker
!
no logging buffered
aaa new-model
!
!
!
aaa session-id common
clock timezone EST -5
clock summer-time EDT recurring
no ip source-route
!
!
ip cef
!
!
no ip bootp server
ip domain name hexhome.int
ip name-server 192.168.30.8
ip auth-proxy max-nodata-conns 3
ip admission max-nodata-conns 3
!
ipv6 unicast-routing
crypto isakmp policy 1
encr aes 192
authentication pre-share
group 5
lifetime 43200
crypto isakmp key ********** address 2.2.2.2
!
!
crypto ipsec transform-set IOFSET2 esp-aes 192 esp-sha-hmac 
!
!
crypto map IOFVPN 1 ipsec-isakmp 
description Isle Of Man
set peer 2.2.2.2
set transform-set IOFSET2 
match address 153
!
! 
!
!
interface FastEthernet0/0
description Internal 192 Network
ip address 192.168.30.1 255.255.255.0
no ip proxy-arp
ip nat inside
ip virtual-reassembly
ip route-cache flow
duplex full
speed 100
!
interface FastEthernet0/1
ip address dhcp
ip access-group 112 in
no ip redirects
no ip unreachables
ip accounting access-violations
ip nbar protocol-discovery
ip nat outside
ip virtual-reassembly
no ip route-cache cef
no ip mroute-cache
duplex auto
speed auto
no cdp enable
no mop enabled

crypto map IOFVPN
!

ip forward-protocol nd
ip route 0.0.0.0 0.0.0.0 174.59.28.1
!
ip flow-export source FastEthernet0/0
ip flow-export version 5
ip flow-export destination 192.168.30.45 3001
no ip http server
ip http access-class 23
ip http authentication local
no ip http secure-server
ip http timeout-policy idle 60 life 86400 requests 10000

ip nat inside source route-map POLICY-NAT interface FastEthernet0/1 overload

ip access-list extended NAT
deny   icmp 192.168.30.0 0.0.0.255 any
permit ip any any

access-list 153 permit icmp 192.168.30.0 0.0.0.255 any

route-map POLICY-NAT permit 10
match ip address NAT
!
</code></pre>

<p>UPDATE:  Fixed the ACL: access-list 153 permit ip 192.168.30.0 0.0.0.255 host 2.2.2.2 and the tunnel comes right up and I can ping through as expected. </p>

<p>Trying to get web traffic through now.. Policy routing not working.  I added </p>

<pre><code>route-map VPN_WEB permit 1
match ip address 155
set ip next-hop 2.2.2.2

access-list 155 permit tcp any any eq www

interface FastEthernet0/1
ip address dhcp
ip access-group 112 in
no ip redirects
no ip unreachables
ip accounting access-violations
ip nbar protocol-discovery
ip nat outside
ip virtual-reassembly
no ip route-cache cef
ip policy route-map VPN_WEB
no ip mroute-cache
duplex auto
speed auto
no cdp enable
no mop enabled
crypto map IOFVPN
</code></pre>

<p>I can see the route-map match on www traffic but it's not being passed through the tunnel. </p>
","<p>I changed the original acl of:</p>

<pre><code>access-list 153 permit icmp 192.168.30.0 0.0.0.255 any
</code></pre>

<p>To:</p>

<pre><code>access-list 153 permit icmp 192.168.30.0 0.0.0.255 2.2.2.2 0.0.0.0
</code></pre>

<p>As soon as that was changed the maps matched on both ends and the tunnels came up.  I've since added an eth0:0 on the openswan side with an address in the 192.168.10.0 range changing the acl to </p>

<pre><code>access-list 153 permit 192.168.30.0 0.0.0.255 192.168.10.0 0.0.0.255
</code></pre>

<p>Tunnel came right up, this just made some things a little easier, now if follows the standard ""lan-to-lan"" model. </p>
","6120"
"Traceroute Over TCP vs UDP","8971","","<p>For what purpose would one wish to send traceroute over TCP rather than UDP? What advantages/disadvantages are there in doing so? I know that traceroute normally uses UDP ICMP ""echo"" packets while traceroute with TCP uses ""SYN"" packets from its 3-way handshake, but I'm curious as to why one might be better than the other. If it depends on the situation, then what are those situations?</p>
","<p>There's no such thing as ""<em>UDP ICMP ""echo""</em>"".  traceroute sends a UDP <em>probe</em> with an increasing TTL. That probe is a single datagram destined for a high port which is unlikely to be a listening service. As the datagram flows out across the network, the TTL decrements until it hits zero at which point an ICMP ERROR (""time exceeded"") is generated.  That ICMP message identifies a ""hop"". When the TTL is enough to reach the target, as there's no listener on that port, an ICMP ""port unreachable"" error is generated, thus ending the trace.</p>

<p>The purpose of <code>tcptraceroute</code> is to do the same sort of path check with a TCP connection.  It is most useful in diagnosing connection issues to a specific service. (eg. a web server) As the probes look like a normal TCP connection attempt, they'll go through NAT, firewalls, ACLs, rate-limits, etc. exactly as a connection from the intended application.</p>
","5703"
"TCP Retransmission and duplicate ACKs","8910","","<p>I am having a problem with my core network.</p>

<p>Currently I have a DELL PowerConnect 5524 which has a SFP+ (10Gbe) Module connected to another 5524 (Same transceiver on both) which is also stacked with a Powerconnect 5548 (via HDMI)</p>

<p>Like this:
<img src=""https://i.stack.imgur.com/xr6zu.png"" alt=""Network Layout"">
However, I was recently doing some investigation into why our transatlantic IPSEC VPN so performing so badly and started doing some Wireshark packet captures and tcpdumps from the Watchguard.</p>

<p>I noticed huge amounts of TCP Re-transmissions and Duplicate ACKs (which after the 4th ACK triggers a re-transmit (SACKs).</p>

<p>However, I connected my laptop directly to the 5524 on the left and SSH'd into the device, whilst running a packet capture. Still getting lots of the above errors. </p>

<p>Can anyone help me? or tell me why the think that even after connecting directly to the switch and talking to the switch itself would give me these results?</p>

<p>I've turned off practically all Layer 3 features on the port my laptop is using and still the errors remain.</p>

<p><em>UPDATE</em> Example PacketCap Uploaded Here: <a href=""https://www.cloudshark.org/captures/882b8189541d"" rel=""nofollow noreferrer"">https://www.cloudshark.org/captures/882b8189541d</a></p>
","<p>You're (192.168.0.164 ) directly connected to the switch (10.168.0.106) you're SSH'in into and you get dup ACK and retransmit... There is something not right , seems that the Network Gremlins are hungry.</p>

<p>What does the switches error counters say?</p>

<p>Also note that some devices puts traffic to/from the control plane at a lower priority than the data plane.  SSH directly to the switch might not reveal the problem you think it's revealing.  What about connecting to something else on the switch, do you see the same symptoms?</p>
","8274"
"Why does ""show interface"" show ""Last input never"" when packets input is incrementing?","8855","","<p>Why is it that when I perform a <code>show interface</code> command I see that <code>Last input</code> always shows <code>never</code>?</p>

<pre><code>FastEthernet1/31 is up, line protocol is up (connected)
  Hardware is C6k 100Mb 802.3, address is 000d.bd5a.e94e (bia 000d.bd5a.e94e)
  Description: Server
  MTU 1500 bytes, BW 100000 Kbit, DLY 100 usec,
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation ARPA, loopback not set
  Full-duplex, 100Mb/s
  input flow-control is off, output flow-control is unsupported
  ARP type: ARPA, ARP Timeout 04:00:00
  **Last input never**, output 00:03:19, output hang never
  Last clearing of ""show interface"" counters 1y3w
  Input queue: 0/2000/0/0 (size/max/drops/flushes); Total output drops: 0
  Queueing strategy: fifo
  Output queue: 0/40 (size/max)
  5 minute input rate 2000 bits/sec, 4 packets/sec
  5 minute output rate 13000 bits/sec, 20 packets/sec
     148174387 packets input, 16331478383 bytes, 0 no buffer
     Received 465 broadcasts (0 multicast)
     0 runts, 0 giants, 0 throttles
     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored
     0 watchdog, 0 multicast, 0 pause input
     0 input packets with dribble condition detected
     798328682 packets output, 102549789248 bytes, 0 underruns
     0 output errors, 0 collisions, 0 interface resets
     0 babbles, 0 late collision, 0 deferred
     0 lost carrier, 0 no carrier, 0 PAUSE output
     0 output buffer failures, 0 output buffers swapped out
</code></pre>

<p>As you can see, when I run the command a couple minutes later the other counters have incremented.</p>

<pre><code>FastEthernet1/31 is up, line protocol is up (connected)
  Last input never, output 00:01:39, output hang never
  5 minute input rate 2000 bits/sec, 4 packets/sec
  5 minute output rate 14000 bits/sec, 20 packets/sec
     148176042 packets input, 16331609502 bytes, 0 no buffer
     798337129 packets output, 102550523914 bytes, 0 underruns
</code></pre>
","<p>There are several interface counters that don't work as well as they used to.  Sometimes this is because the chassis/router has a 'fast' switching mode (CEF, or something else), and that particular 'bucket' never gets hit.  Another reason might be that that particular counter only works in L3 mode instead of L2 mode.  This kind of stuff is quite common, unfortunately on cisco products, particularly on the 6500 which has an enormous amount of legacy code/architecture weighing it down.</p>
","666"
"Cisco ASA AnyConnect - Authenticate using RSA token, Assign policy based on AD Group","8848","","<p>I've successfully created a AnyConnect VPN configuration on my Cisco ASA and it authenticates to RSA secureID to use the token code. However what I'd like to do now is an AD lookup on the username and based on what group they are in, assign them the correct group-policy. I know this isn't possible using ACS. I'm not sure if RSA has this capabilities. Perhaps the ASA can do this using identity firewall?</p>
","<p>I was able to figure this out within ACS. The missing piece was that I needed to create an identity store sequence. This allows me to authenticate to one place (RSA) and do an additional attribute lookup in another place (AD).</p>

<p>Thanks for the help though. You guys made me think of it differently which ultimately solved it!</p>

<p>More information on this topic can be found at Cisco's website, <a href=""http://www.cisco.com/en/US/docs/net_mgmt/cisco_secure_access_control_system/5.2/user/guide/users_id_stores.html"" rel=""nofollow"">Managing Users and Identity Stores</a>.</p>
","5811"
"Can Cisco Catalyst switch get IP from DHCP server?","8837","","<p>This may be stupid question as I don't have much knowledge in networking.</p>

<p>Anyways, I have Cisco Catalyst 2960 switch and I'm curios if I can configure it to get IP configuration from DHCP server, like all other devices on network.</p>

<p>Now, I have to write it's IP configuration manually, but it would be nice if that can be handled by DHCP server.</p>
","<p>You can specify an interface to receive an address from DHCP like this.</p>

<pre><code>configure terminal
interface (int-name-num)
ip address dhcp
</code></pre>

<p>This guide gives way more detail into DHCP features - <a href=""http://www.cisco.com/c/en/us/td/docs/ios-xml/ios/ipaddr_dhcp/configuration/12-4t/dhcp-12-4t-book/config-dhcp-client.html#GUID-8BC4B08B-0436-42B6-8E3A-021DE842A893"">Cisco DHCP Client Configuration</a></p>

<p>You should note that there are additional commands to the ones I listed, but they are optional.</p>
","16614"
"multi-mode transceivers on single-mode fiber","8836","","<p>The topic says it all; is there any hope for using multi-mode transceivers on a single-mode fiber cable?</p>

<p>I work exclusively with mobile setups, where I use pretty expensive fiber cables. The equipment I use is a mix of multi and single-mode, and I was hoping that I could settle on one common standard cable.</p>
","<p>Absolutely: <strong>NO</strong></p>

<p>Think about it for a second... you're firing a 62.5um (or 50um) laser into a 9um fiber. That means ~85% of the signal is gone from the very start.</p>

<p>(The opposite will work: SM launched into a MM fiber, but it takes good fiber, a <a href=""http://www.lanshack.com/ModeConditioning.aspx"">Mode Conditioning Cable</a>, and your distance will be compromised. But it can work.)</p>
","5001"
"802.1x on Access VLAN only, not on Voice VLAN","8762","","<p>I've successfully configured a Cisco 3750G to perform the authenticator function of the 802.1x process. I have a test Win7 machine as a supplicant and a Windows 2008 server running NPS as the Authentication Server. The Win7 machine is able to successfully authenticate. </p>

<p>I've now hooked up a Cisco 7941 IP Phone in front of the Win7 machine, configured the switch with the <strong>swtichport voice vlan</strong> command, I plug it in and it is granted power, but the port quickly moves to a down state. After looking through the debug logs I believe the issue to be something with 802.1x trying to authentication on both the Access VLAN and the Voice VLAN. Is there a way to only perform 802.1x on the Access VLAN? and not the Voice?</p>

<p><strong>Scenario:</strong></p>

<pre><code>{RADIUS}  &lt;----&gt;   {3750G} &lt;-----&gt; {Cisco 7941 Phone} &lt;-----&gt;  {Win7 802.1x client}
</code></pre>

<p>I am currently testing on interface gi1/0/3, here is the interface config line:</p>

<pre><code>interface GigabitEthernet1/0/3
  description TestPort
  switchport access vlan 100
  switchport voice vlan 110
  switchport mode access
  authentication port-control auto
  authentication periodic
  authentication timer reauthenticate server
  dot1x pae authenticator
  spanning-tree portfast
  auto qos voip cisco-phone
</code></pre>

<p>Some of the debugs from the 3750G</p>

<pre><code>*Apr 21 13:44:04.045: %ILPOWER-7-DETECT: Interface Gi1/0/3: Power Device detected: IEEE PD
*Apr 21 13:44:04.322: %ILPOWER-5-POWER_GRANTED: Interface Gi1/0/3: Power granted
*Apr 21 13:44:07.811: dot1x-ev(Gi1/0/3): Interface state changed to UP
*Apr 21 13:44:07.811:     dot1x_auth Gi1/0/3: initial state auth_initialize has enter
*Apr 21 13:44:07.811: dot1x-sm(Gi1/0/3): 0x0000003B:auth_initialize_enter called
*Apr 21 13:44:07.811:     dot1x_auth Gi1/0/3: during state auth_initialize, got event 0(cfg_auto)
*Apr 21 13:44:07.811: @@@ dot1x_auth Gi1/0/3: auth_initialize -&gt; auth_disconnected
*Apr 21 13:44:07.811: dot1x-sm(Gi1/0/3): 0x0000003B:auth_disconnected_enter called
*Apr 21 13:44:07.811:     dot1x_auth Gi1/0/3: idle during state auth_disconnected
*Apr 21 13:44:07.811: @@@ dot1x_auth Gi1/0/3: auth_disconnected -&gt; auth_restart
*Apr 21 13:44:07.811: dot1x-sm(Gi1/0/3): 0x0000003B:auth_restart_enter called
*Apr 21 13:44:07.820: dot1x-ev(Gi1/0/3): Sending create new context event to EAP for 0x0000003B (0000.0000.0000)
*Apr 21 13:44:07.820:     dot1x_auth_bend Gi1/0/3: initial state auth_bend_initialize has enter
*Apr 21 13:44:07.820: dot1x-sm(Gi1/0/3): 0x0000003B:auth_bend_initialize_enter called
*Apr 21 13:44:07.820:     dot1x_auth_bend Gi1/0/3: initial state auth_bend_initialize has idle
*Apr 21 13:44:07.820:     dot1x_auth_bend Gi1/0/3: during state auth_bend_initialize, got event 16383(idle)
*Apr 21 13:44:07.820: @@@ dot1x_auth_bend Gi1/0/3: auth_bend_initialize -&gt; auth_bend_idle
*Apr 21 13:44:07.820: dot1x-sm(Gi1/0/3): 0x0000003B:auth_bend_idle_enter called
*Apr 21 13:44:07.820: dot1x-ev(Gi1/0/3): Created a client entry (0x0000003B)
*Apr 21 13:44:07.820: dot1x-ev(Gi1/0/3): Dot1x authentication started for 0x0000003B (0000.0000.0000)
*Apr 21 13:44:07.820: dot1x-ev:DOT1X Supplicant not enabled on GigabitEthernet1/0/3
*Apr 21 13:44:07.820: dot1x-sm(Gi1/0/3): Posting !EAP_RESTART on Client 0x0000003B
*Apr 21 13:44:07.820:     dot1x_auth Gi1/0/3: during state auth_restart, got event 6(no_eapRestart)
*Apr 21 13:44:07.820: @@@ dot1x_auth Gi1/0/3: auth_restart -&gt; auth_connecting
*Apr 21 13:44:07.820: dot1x-sm(Gi1/0/3): 0x0000003B:auth_connecting_enter called
*Apr 21 13:44:07.820: dot1x-sm(Gi1/0/3): 0x0000003B:auth_restart_connecting_action called
*Apr 21 13:44:07.820: dot1x-sm(Gi1/0/3): Posting RX_REQ on Client 0x0000003B
*Apr 21 13:44:07.820:     dot1x_auth Gi1/0/3: during state auth_connecting, got event 10(eapReq_no_reAuthMax)
*Apr 21 13:44:07.820: @@@ dot1x_auth Gi1/0/3: auth_connecting -&gt; auth_authenticating
*Apr 21 13:44:07.820: dot1x-sm(Gi1/0/3): 0x0000003B:auth_authenticating_enter called
*Apr 21 13:44:07.820: dot1x-sm(Gi1/0/3): 0x0000003B:auth_connecting_authenticating_action called
*Apr 21 13:44:07.820: dot1x-sm(Gi1/0/3): Posting AUTH_START for 0x0000003B
*Apr 21 13:44:07.820:     dot1x_auth_bend Gi1/0/3: during state auth_bend_idle, got event 4(eapReq_authStart)
*Apr 21 13:44:07.820: @@@ dot1x_auth_bend Gi1/0/3: auth_bend_idle -&gt; auth_bend_request
*Apr 21 13:44:07.820: dot1x-sm(Gi1/0/3): 0x0000003B:auth_bend_request_enter called
*Apr 21 13:44:07.820: dot1x-ev(Gi1/0/3): Sending EAPOL packet to group PAE address
*Apr 21 13:44:07.820: dot1x-ev(Gi1/0/3): Role determination not required
*Apr 21 13:44:07.820: dot1x-registry:registry:dot1x_ether_macaddr called
*Apr 21 13:44:07.820: dot1x-ev(Gi1/0/3): Sending out EAPOL packet
*Apr 21 13:44:07.820: EAPOL pak dump Tx
*Apr 21 13:44:07.820: EAPOL Version: 0x3  type: 0x0  length: 0x0005
*Apr 21 13:44:07.820: EAP code: 0x1  id: 0x1  length: 0x0005 type: 0x1
*Apr 21 13:44:07.820: dot1x-packet(Gi1/0/3): EAPOL packet sent to client 0x0000003B (0000.0000.0000)
*Apr 21 13:44:07.820: dot1x-sm(Gi1/0/3): 0x0000003B:auth_bend_idle_request_action called
*Apr 21 13:44:09.791: %LINK-3-UPDOWN: Interface GigabitEthernet1/0/3, changed state to up
*Apr 21 13:44:10.798: %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet1/0/3, changed state to up
*Apr 21 13:44:36.844: dot1x-ev(Gi1/0/3): Interface state changed to DOWN
*Apr 21 13:44:36.844: dot1x-ev(Gi1/0/3): Deleting client 0x0000003B (0000.0000.0000)
*Apr 21 13:44:36.844: dot1x-ev:dot1x_supp_port_down: No DOT1X subblock found on GigabitEthernet1/0/3
*Apr 21 13:44:36.844: dot1x-ev:Delete auth client (0x0000003B) message
*Apr 21 13:44:36.844: dot1x-ev:Auth client ctx destroyed
*Apr 21 13:44:37.842: %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet1/0/3, changed state to down
*Apr 21 13:44:38.841: %LINK-3-UPDOWN: Interface GigabitEthernet1/0/3, changed state to down
</code></pre>

<hr>

<p><strong>Latest Interface Config:</strong>
interface GigabitEthernet1/0/3
 switchport access vlan 105
 switchport mode access
 switchport voice vlan 110
 srr-queue bandwidth share 1 30 35 5
 priority-queue out
 authentication control-direction in
 authentication event fail action next-method
 authentication host-mode multi-auth
 authentication open
 authentication order dot1x mab
 authentication priority mab dot1x
 mab
 mls qos trust device cisco-phone
 mls qos trust cos
 auto qos voip cisco-phone
 dot1x pae authenticator
 spanning-tree portfast
 service-policy input AUTOQOS-SRND4-CISCOPHONE-POLICY</p>

<p><strong>Global configs</strong>
dad</p>

<p><strong>Debugs:</strong></p>

<pre><code>show version
Switch Ports Model              SW Version            SW Image
------ ----- -----              ----------            ----------
*    1 28    WS-C3750G-24PS     15.0(2)SE6            C3750-IPSERVICESK9-M

#show authentication sessions interface gi1/0/3
            Interface:  GigabitEthernet1/0/3
          MAC Address:  Unknown
           IP Address:  Unknown
               Status:  Authz Success
               Domain:  DATA
      Security Policy:  Should Secure
      Security Status:  Unsecure
       Oper host mode:  multi-auth
     Oper control dir:  in
        Authorized By:  Authentication Server
          Vlan Policy:  N/A
      Session timeout:  N/A
         Idle timeout:  N/A
    Common Session ID:  0A6363FE0000001900347F3C
      Acct Session ID:  0x00000020
               Handle:  0x7A00001A

Runnable methods list:
       Method   State
       dot1x    Authc Success
       mab      Not run

#show dot1x all details
Sysauthcontrol              Enabled
Dot1x Protocol Version            3

Dot1x Info for GigabitEthernet1/0/3
-----------------------------------
PAE                       = AUTHENTICATOR
QuietPeriod               = 60
ServerTimeout             = 0
SuppTimeout               = 30
ReAuthMax                 = 2
MaxReq                    = 2
TxPeriod                  = 30

Dot1x Authenticator Client List Empty

show run | in dot1x
aaa authentication dot1x default group RADIUS
dot1x system-auth-control
</code></pre>

<p><strong>Console</strong></p>

<pre><code>Oct 15 20:16:41.392: dot1x-ev(Gi1/0/3): Interface state changed to DOWN
Oct 15 20:16:41.400: dot1x-ev(Gi1/0/3): Deleting client 0x74000003 (0000.0000.0000)
Oct 15 20:16:41.400: dot1x-ev:dot1x_supp_port_down: No DOT1X subblock found on GigabitEthernet1/0/3
Oct 15 20:16:41.400: dot1x-ev:Delete auth client (0x74000003) message
Oct 15 20:16:41.400: dot1x-ev:Auth client ctx destroyedshut
Oct 15 20:16:42.180: %SWITCH_QOS_TB-5-TRUST_DEVICE_LOST: cisco-phone no longer detected on port Gi1/0/3, operational port trust state is now untrusted
Oct 15 20:16:43.363: %LINK-5-CHANGED: Interface GigabitEthernet1/0/3, changed state to administratively down
Oct 15 20:16:44.370: %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet1/0/3, changed state tno shut
SW1(config-if)#
Oct 15 20:16:47.801: %ILPOWER-7-DETECT: Interface Gi1/0/3: Power Device detected: IEEE PD
Oct 15 20:16:48.807: %ILPOWER-5-POWER_GRANTED: Interface Gi1/0/3: Power granted
Oct 15 20:16:48.916: %LINK-3-UPDOWN: Interface GigabitEthernet1/0/3, changed state to down
Oct 15 20:16:50.124: dot1x-ev(Gi1/0/3): Interface state changed to UP
Oct 15 20:16:50.133:     dot1x_auth Gi1/0/3: initial state auth_initialize has enter
Oct 15 20:16:50.133: dot1x-sm(Gi1/0/3): 0xD8000004:auth_initialize_enter called
Oct 15 20:16:50.133:     dot1x_auth Gi1/0/3: during state auth_initialize, got event 1(cfg_force_auth)
Oct 15 20:16:50.133: @@@ dot1x_auth Gi1/0/3: auth_initialize -&gt; auth_force_auth
Oct 15 20:16:50.133: dot1x-sm(Gi1/0/3): 0xD8000004:auth_force_auth_enter called
Oct 15 20:16:50.133: dot1x-ev(Gi1/0/3): Sending EAPOL packet to group PAE address
Oct 15 20:16:50.133: dot1x-ev(Gi1/0/3): Role determination not required
Oct 15 20:16:50.133: dot1x-registry:registry:dot1x_ether_macaddr called
Oct 15 20:16:50.133: dot1x-ev(Gi1/0/3): Sending out EAPOL packet
Oct 15 20:16:50.133: EAPOL pak dump Tx
Oct 15 20:16:50.133: EAPOL Version: 0x3  type: 0x0  length: 0x0004
Oct 15 20:16:50.133: EAP code: 0x3  id: 0x1  length: 0x0004
Oct 15 20:16:50.133: dot1x-packet(Gi1/0/3): dot1x_auth_txCannedStatus: EAPOL packet sent to client 0xD8000004 (0000.0000.0000)
Oct 15 20:16:50.133:     dot1x_auth_bend Gi1/0/3: initial state auth_bend_initialize has enter
Oct 15 20:16:50.133: dot1x-sm(Gi1/0/3): 0xD8000004:auth_bend_initialize_enter called
Oct 15 20:16:50.133:     dot1x_auth_bend Gi1/0/3: initial state auth_bend_initialize has idle
Oct 15 20:16:50.133:     dot1x_auth_bend Gi1/0/3: during state auth_bend_initialize, got event 16383(idle)
Oct 15 20:16:50.133: @@@ dot1x_auth_bend Gi1/0/3: auth_bend_initialize -&gt; auth_bend_idle
Oct 15 20:16:50.133: dot1x-sm(Gi1/0/3): 0xD8000004:auth_bend_idle_enter called
Oct 15 20:16:50.133: dot1x-ev(Gi1/0/3): Created a client entry (0xD8000004)
Oct 15 20:16:50.133: dot1x-ev(Gi1/0/3): Dot1x authentication started for 0xD8000004 (0000.0000.0000)
Oct 15 20:16:50.133: dot1x-ev:DOT1X Supplicant not enabled on GigabitEthernet1/0/3
Oct 15 20:16:50.141: dot1x-ev(Gi1/0/3): Sending event (2) to Auth Mgr for 0000.0000.0000
Oct 15 20:16:50.141: dot1x-redundancy: State for client  0000.0000.0000 successfully retrieved
Oct 15 20:16:52.113: %LINK-3-UPDOWN: Interface GigabitEthernet1/0/3, changed state to up
Oct 15 20:16:53.119: %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet1/0/3, changed state to up
Oct 15 20:17:34.542: %SWITCH_QOS_TB-5-TRUST_DEVICE_DETECTED: cisco-phone detected on port Gi1/0/3, port's configured trust state is now operational.
</code></pre>

<p>Port still ends up in a shutdown state, but supplies power to Phone...</p>
","<p>You would need to configure MAB (Mac Auth Bypass) authentication for the ip phone in the multi-vlan interface. You also need multi-auth so the switch knows to look for more than one MAC address. </p>

<p>-authentication host-mode multi-auth </p>

<p>-authentication order mab dot1x</p>
","12466"
"How To Limit a VLAN to a Specific Bandwidth Quota","8701","","<p>I have a Cisco Router 1900 series and I would like to limit the bandwidth used by a subnet/subinterface. This subnet/subinterface (192.168.10.*) uses most of the bandwidth making it useless for other subnets/subinterfaces and would like to limit their total bandwidth consumption to like 2MB out of whatever total bandwidth we might be assigned.</p>

<p>I have read some resources on Class Based Shaping but not getting the idea.</p>

<p>I dont have any certification on Cisco but I learn as I proceed with their range of products.</p>

<p>Awaiting responses.</p>
","<blockquote>
  <p>I have a Cisco Router 1900 series and I would like to limit the bandwidth used by a subnet/subinterface. This subnet/subinterface (192.168.10.*) uses most of the bandwidth making it useless for other subnets/subinterfaces and would like to limit their total bandwidth consumption to like 2MB out of whatever total bandwidth we might be assigned.</p>
</blockquote>

<p>I will give you a policy that I run myself...  I took the liberty of prioritizing traffic within that 2MB class, since it's a common need once you start limiting the bandwidth of certain people</p>

<p>First I define a couple of ACL objects:</p>

<ul>
<li><code>Q_CBWFQ_net</code> is used to define what traffic will be shaped; traffic will match this object if the IP matches either the source or destination address.</li>
<li><code>Q_LLQ_net</code> is used to define what traffic will be prioritized into a low latency (i.e. high priority) queue.  Up to 200Kbps of traffic (10% of 2Mbps) will be prioritized like this.  Traffic will match this object if the IP matches either the source or destination address.  <code>Q_LLQ_net</code> traffic can go above 10% of the circuit with this configuration (subject to not competing with other non-LLQ traffic).</li>
</ul>



<pre><code>object-group network Q_CBWFQ_net
 192.168.10.0 /24
!
object-group network Q_LLQ_net
 host 198.137.202.19
!
!
ip access-list extended CBWFQ
 permit ip any object-group Q_CBWFQ_net
 permit ip object-group Q_CBWFQ_net any
ip access-list extended LLQ
 permit ip object-group Q_LLQ_net any
 permit ip any object-group Q_LLQ_net
</code></pre>

<p>Now I define classes to match against those ACLs...</p>

<pre><code>class-map match-all C_LLQ
 match access-group name LLQ
class-map match-all C_CBWFQ
 match access-group name CBWFQ
!
</code></pre>



<p>This is where the guts of the policy are implemented...  I use <a href=""https://networkengineering.stackexchange.com/questions/5316/how-are-weighted-fair-queuing-and-weighted-random-early-detection-related/5318#5318"">WRED</a> to manage the non-LLQ traffic.  WRED helps ensure that your shaped traffic behaves well (assuming it is mostly TCP traffic).</p>



<pre><code>!
policy-map Q_CBWFQ_to_inet
 class C_LLQ
  priority percent 10
 class C_CBWFQ
  bandwidth remaining percent 90
  random-detect
!
policy-map Q_CBWFQ_from_inet
 class C_LLQ
  priority percent 10
 class C_CBWFQ
  bandwidth remaining percent 90
  random-detect
!
policy-map Q_shape_from_inet
 class class-default
  shape average 2000000
  service-policy Q_CBWFQ_from_inet
!
policy-map Q_shape_to_inet
 class class-default
  shape average 2000000
  service-policy Q_CBWFQ_to_inet
!
</code></pre>

<p>Now apply the policies to your ingress and egress interfaces / subinterfaces...</p>



<pre><code>interface FastEthernet0/0
 description [Interface to LAN, via sw1]
 bandwidth qos-reference 100000
 ip address 10.1.5.5 255.255.255.252
 no ip redirects
 no ip unreachables
 no ip proxy-arp
 arp timeout 240
 service-policy output Q_shape_from_inet
!
!
interface FastEthernet0/1
 description [Uplink to internet, via fw]
 bandwidth qos-reference 100000
 ip address 10.1.2.2 255.255.255.252
 no ip redirects
 no ip unreachables
 no ip proxy-arp
 arp timeout 240
 service-policy output Q_shape_to_inet
</code></pre>

<p>Please keep in mind that traffic shaping is not exact... you'll get up to 2Mbps for a single TCP flow, but the actual transfer rate could be anywhere between 1.5Mbps and 1.9Mbps at any given point in time.</p>
","19216"
"Aggregate bandwidth of a gigabit switch","8686","","<p>This one might be the dumber question ever asked in this place, but here it is:</p>

<p>If I have 20 machines, all equipped with gigabit ethernet NICs, all connected to a gigabit switch, is the maximum volume of data going through the switch per second equal to 1Gbps, or is it more like 1Gbps * 20?</p>
","<blockquote>
  <p>If I have 20 machines, all equipped with gigabit ethernet NICs, all connected to a gigabit switch, is the maximum volume of data going through the switch per second equal to 1Gbps, or is it more like 1Gbps * 20?</p>
</blockquote>

<p>It is closer to 1Gbps * 20.</p>

<p>Throughput is usually written in the documentation and is expressed in packets per second, which can be translated to mega/gigabits per second depending on packet sizes. </p>

<p>It really depends on the switch, its intended use, price, etc. </p>

<p>For example, cheap SOHO 8 port L2 gigabit switches usually get throughputs from 1–5Gbps (on all ports together&nbsp;— out of 16Gbit full-duplex theoretical max). Enterprise/datacenter/ISP switches can do a lot more. </p>
","3604"
"Correct Cisco ASA CLI Command To Delete Network Objects (force)","8674","","<p>I am a newbie at managing my firewall so this is a really basic question.  My firewall is a Cisco 5505.</p>

<p>What is the appropriate command (or commands) to run on the command line interface to delete an object and remove it from all groups and rules it is part of?
This is what I have found but it doesn't let you run it until you have removed the object from all groups and rules:</p>

<pre><code>no object network MyComputer
</code></pre>

<p>Is there a command that will remove an object from all groups and all rules it is a part of (or a different object delete command that will do this in one step)?</p>
","<p>Unfortunately, Cisco has not given us a precise, one-line way to remove a single object or object-group.  This is something that may come in time as the ASA code continues to mature and the ASA's themselves get more CPU resources.  The original ASA line was pathetically underpowered in the CPU department.  Your 5505, for example, was first released in 2006 and has a <code>Pentium 4 Celeron 2000 MHz</code>!</p>

<p>An intelligent, recursive search through the configuration to remove an object or object-group would require CPU resources that just weren't there when the software was being written.  Especially not if they had to come at the cost of processing traffic.  I work daily on ASAs with thousands of objects and and tens of thousands of ACL lines, and I wish for this feature every day.</p>

<p>For now we're left with a manual search process, similar to what I demonstrate below.  This process can certainly be automated in Python, for example, however I give the manual process to illustrate the logic involved.</p>

<hr>

<p>For this example, I have the following object, object-group, and ACL:</p>

<pre><code>object network TEST-OBJECT
 host 10.10.10.10

object-group network TESTING-OBJECT-GROUP
 network-object object TEST-OBJECT
 network-object host 10.10.10.20

access-list TEST-ACL extended permit ip any object-group TESTING-OBJECT-GROUP 
access-list TEST-ACL extended permit ip any object TEST-OBJECT  
</code></pre>

<p>If I want to remove <code>TEST-OBJECT</code> and any references to it, as you found out, I can't simply do the following:</p>

<pre><code>asa2-local(config)# no object network TEST-OBJECT
ERROR: unable to delete object (TEST-OBJECT). object is being used.
</code></pre>

<p>I now have to search for all instances of the object and remove those lines.</p>

<hr>

<p>First, I look at the running-configuration for the object name and for the string <code>p n</code>, which matches <code>object-group network</code>.  This gives us the names of all network object-groups, and we now have to simply look for instances of <code>TEST-OBJECT</code>, then go up to find what object-group it is a member of:</p>

<pre><code>asa2-local# show run | inc TEST-OBJECT|p n
object network TEST-OBJECT
object-group network TESTING-OBJECT-GROUP
 network-object object TEST-OBJECT
access-list TEST-ACL extended permit ip any object TEST-OBJECT  
</code></pre>

<p>So we know we need to remove <code>TEST-OBJECT</code> from the <code>TESTING-OBJECT-GROUP</code> object group, and remove a single ACL line:</p>

<pre><code>asa2-local(config)# object-group network TESTING-OBJECT-GROUP
asa2-local(config-network-object-group)# no network-object object TEST-OBJECT
asa2-local(config-network-object-group)# exit
asa2-local(config)# no access-list TEST-ACL extended permit ip any object TEST-OBJECT
</code></pre>

<p>Finally we can successfully remove the object itself and validate that it is gone:</p>

<pre><code>asa2-local(config)# no object network TEST-OBJECT
asa2-local(config)# show run object
asa2-local(config)# 
</code></pre>
","20491"
"What is an ""Internet breakout""","8668","","<p>I was asked this by a friend. His company is trying to set up some sort of a network where all their branches around the world can connect. They want to know if there are any laws in my country associated with ""Internet Breakout""</p>

<p>He is a lawyer at the said place and since he has no idea about technology, he asked me. I have no idea what on god's name he's talking about since I am not a networking guy. </p>

<p>I did try searching around google for what ""Internet Breakout"" is, but I have no idea how to explain this to my friend. </p>

<p>If anyone could give me a quick summary of what an internet breakout is in a company network, or point me to a resource that would explain it. I would be really appreciate it.  </p>
","<p>In many large networks that span nationally or globally, all traffic including Internet traffic, flows from remote sites to a central hub, such as a data center, where Internet traffic then leaves the organization via an ISP.  The advantage of this is the organization can apply security policies, filter for malware, <em>etc.</em>, from a single, central location.</p>

<p>In contrast, some organizations allow Internet traffic to leave the corporate network at the remote site, via a locally connected ISP. This is known as an ""Internet breakout.""  The advantage of this is all the Internet traffic does not need to be carried to the central site, saving on bandwidth, and the local ISP may offer cheaper pricing than the central site.   The downside is that Internet filtering and malware protection must be placed at the remote site's ISP connection as well.</p>

<p>I'll let someone else speak to the legal issues involving transnational Internet traffic.</p>
","26270"
"Using multiple WAN IP addresses with a Dell SonicWALL TZ 600","8661","","<p>We have a BT 21CN fibre connection into our firewall - it's just one patch cable into the X1 WAN port.</p>

<p>The connection has 5 public IP addresses.</p>

<p>For testing purposes, I need my machine, which is behind the firewall, to use one of those public IP addresses, which is not assigned to X1, as a gateway to the Internet. This is because we've set up special access rules for our default Internet IP address to one of our web servers somewhere else. There are also a few other times where this might be useful.</p>

<p>As it is, our firewall only knows that the X1 has one public WAN IP address. How do I go about telling it there are several WAN IP addresses, and how on earth can I then configure a new gateway on it which I can specify manually on my workstation?</p>

<p>I do, of course, want to leave the 'default' WAN gateway well alone as we have a network full of users using it.</p>
","<p>As others have stated there is not a need to configure any sub-interfaces on the SonicWALL. I am assuming your modem is already in bridge mode since you have a public IP address configured on the SonicWALL Internet facing interface, if this is not so this needs to be done.</p>

<p>There is nothing you need to do to announce those IPs from the SonicWALL because in bridge mode the SonicWALL is acting as an authoritative device of sort for them with your modem acting as the gateway.</p>

<p>The only thing that needs configured is a NAT policy mapping the desired public IP address to desired private IP address. The easiest way to do this is via the public server wizard which can be located on the top right corner of the web interface.</p>

<pre><code>Step 1: Launch Wizards
Step 2: Select ""Public Server Wizard""
Step 3: Specify Server Type and what ports you would like forwarded.
Step 4: Specify the private IP address of the server, and a friendly name to help you identify it in the ruleset.
Step 5: Specify the Public IP address you would like to use.
Step 6: Review the summary to ensure everything is correct, and apply your changes!
</code></pre>

<p>If you need to make changes down the line, you can see your NAT policy under Network > NAT Policies</p>

<p>This should have no operational impact, however with any change you should exercise discretion and play it safe by making the change within a downtime window to minimize any potential user impact.</p>

<p><a href=""http://documents.software.dell.com/sonicos/5.9/administration-guide/wizards/providing-public-access-to-an-internal-server/wizards-public-server-wizard?ParentProduct=850"" rel=""nofollow"">http://documents.software.dell.com/sonicos/5.9/administration-guide/wizards/providing-public-access-to-an-internal-server/wizards-public-server-wizard?ParentProduct=850</a></p>
","33844"
"STP blocking port selection","8627","","<p>I want to make sure I'm understanding how this works. Specifically the term ""Sending Port ID"" has me very confused.</p>

<p>Consider this diagram, I want to make sure I have root port selection figured out:</p>

<p><a href=""https://i.stack.imgur.com/lIZZI.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/lIZZI.jpg"" alt=""enter image description here""></a></p>

<p>The switch on top is the root and all settings are at the defaults.</p>

<p>Both of SW2's ports connected to SW3 are designed because it has the lowest path cost to the root (its the only path to the root).</p>

<p>Here is what I'm unsure of: SW3's 0/4 is the Root Port because the Sending Port ID of 0/1 wins over 0/2</p>

<p>Is this correct? The Port IDs of SW3 have no bearing in the selection it is only the Sending Port ID's of SW2 that matter right?</p>
","<p>you need to understand the next </p>

<p>Spanning-Tree Port Roles<br>
 - Root Port (RP) - It is a port on a non-root switch, which is the shortest (the best) path towards the root bridge. (i.e. port 0/4 0/3 in SW3)<br>
 - Designated Port (DP) - It is a port that is in the forwarding state. (i.e. port 0/1 0/2 SW2)<br>
 - Non-Designated Port (NDP) - It is a port that is in a blocking state in the STP topology.</p>

<p>so your question is about which port in SW3 will be selected as <strong><em>Root Port</em></strong></p>

<p>As soon as the root has been elected, all non-root switches begin to calculate which port is the best <strong><em>(the least cost)</em></strong> towards the root bridge. This port will be called the root port. </p>

<p><strong><em>What if the Root Cost Path is identical?</em></strong></p>

<ol>
<li>Prefer the lowest Root Path Cost.</li>
<li>In case of the same Root Path Cost, prefer the lowest Bridge ID of the designated switch (the neighbor that sends BPDUs).</li>
<li>In case of receiving BPDUs on multiple ports from the same designated switch (BPDU sender), <strong><em>prefer the lowest Port ID (known also as port priority) of the sender</em></strong>. That parameter has a default value 128 and is configurable.</li>
<li>In case of all above are did not resolve the problem, prefer the lowest Port ID of the BPDU sender.</li>
</ol>

<p>so answer of your question (SW3's 0/4 is the Root Port because the Sending Port ID of 0/1 wins over 0/2)is <strong><em>YES</em></strong></p>

<p>please make use of this very usful linke <a href=""http://ciscoiseasy.blogspot.com.eg/2010/10/lesson-20-spanning-tree-protocol.html"">STP</a></p>
","22523"
"Dynamic Routing Protocol (IGP) over IPSec VPN tunnels to branch offices?","8614","","<p><strong>What are the best practices for running an <a href=""/tags/igp"" title=""Interior Gateway Protocol"">IGP</a> to learn networks at HQ from branch offices when those offices connect via IPSec LAN-to-LAN VPN tunnels over the Internet?</strong>  The branch offices terminate on Cisco VPN Concentrators that are being replaced with Cisco ASA-X's.</p>

<p>Is it better to let a dynamic routing protocol (IGP) -- in this case <a href=""/tags/ospf"" title=""Open Shortest Path First"">OSPF</a> -- run directly through or to the firewalls (and across the tunnels) or is OSPF over <a href=""/tags/gre"" title=""Generic Routing Encapsulation"">GRE</a> (through the firewalls, but not to the firewalls) the way to go or some other option?  We have too many static routes in place that need to be eliminated.  The IPSec VPN branch offices are small and don't currently run an IGP other than statics, so consider it a clean slate on what to do with branch office routing.  Routers exist beyond the firewalls and can be used for tunneling if needed.</p>

<p>*Answers should focus on Cisco ASA-X's in the mix with L3 switches behind them to run any GRE tunnels if necessary.  </p>
","<p>Since you are using all ASA-X firewalls, I suggest you go with EIGRP and drop the GRE part - configure IPSEC VPN on ASA.</p>

<p>I had about 80+ branch offices connecting to main site with IPSEC VPN (Although tunnels were on routers not on firewalls) EIGRP played really well. EIGRP is much lighter with computations and has better performance than OSPF. Plus EIGRP is lot easier to troubleshoot and configure.</p>

<p>As for GRE you don't have that option (because you have ASA firewalls not routers) and if you ask me GRE is not the way to go with IPSEC VPN anyway.</p>
","1312"
"time based interface shutdown on cisco router","8584","","<p>Is there a way to shutdown an interface on a Cisco router based on time periods? 
I would like to shut the cellular interface when it is not necessary.</p>

<p>Can this be done with the event manager and action in combination of time-based access-list or track?</p>
","<p>You can do this with time-based ACL's when talking about ports, or with EEM when talking about interfaces:</p>

<pre><code>interface wlan0
ip address 10.1.1.1 255.255.255.0 
ip access-group 101 in      

access-list 101 permit tcp 10.1.1.0 0.0.0.255 172.16.1.0 0.0.0.255        
eq telnet time-range EVERYOTHERDAY  

time-range EVERYOTHERDAY 
periodic Monday Wednesday Friday 8:00 to 17:00
</code></pre>

<p>Source: <a href=""http://www.cisco.com/en/US/products/sw/secursw/ps1018/products_tech_note09186a00800a5b9a.shtml#timebasedtimerange"" rel=""nofollow"">http://www.cisco.com/en/US/products/sw/secursw/ps1018/products_tech_note09186a00800a5b9a.shtml#timebasedtimerange</a></p>

<p>When you want to shut down an <strong>interface</strong>, take a look at the next article:</p>

<p><a href=""https://supportforums.cisco.com/thread/202630"" rel=""nofollow"">https://supportforums.cisco.com/thread/202630</a> (answer Joseph Clarke)</p>

<pre><code>event manager applet shutdown_port
event timer cron cron-entry ""0 0 * * *""
action 010 cli command ""enable""
action 020 cli command ""config t""
action 030 cli command ""interface FastEthernet1/0/1""
action 040 cli command ""shut""
action 050 cli command ""end""
action 060 syslog msg ""Interface FastEthernet1/0/1 has been shutdown""

event manager applet noshut_port
event timer cron cron-entry ""0 8 * * *""
action 010 cli command ""enable""
action 020 cli command ""config t""
action 030 cli command ""interface FastEthernet1/0/1""
action 040 cli command ""no shut""
action 050 cli command ""end""
action 060 syslog msg ""Interface FastEthernet1/0/1 has been restored""
</code></pre>

<p>in the example above:
The port will be shutdown every day at midnight, and brought back up every day at 8 am.</p>

<p>You should look into the cron-entry option (like crontabs in linux/unix)
reference: <a href=""http://www.rogerperkin.co.uk/ccie/index.php/eem-2/understanding-cisco-eem-event-timer-cron/"" rel=""nofollow"">http://www.rogerperkin.co.uk/ccie/index.php/eem-2/understanding-cisco-eem-event-timer-cron/</a></p>

<p>There are 5 values you can specify for the cron timer</p>

<ul>
<li>minute – this controls what minute of the hour the command will fire    values between 0 and 59 </li>
<li>hour – this controls what hour the command    will run – specified in the 24 hour clock format 0-23 0=midnight </li>
<li>dom – day of month that you want the command to run e.g 20th = 20 </li>
<li>dow – day of week it can be numeric 0-7 or name of day e.g sat</li>
</ul>

<p>Examples:</p>

<pre><code>01 * * * * This command is run at one min past every hour
17 8 * * * This command is run daily at 8:17 am
*/1 **** this command runs every minute
</code></pre>
","3474"
"ASA use of proxy ARP for NAT","8575","","<p>I will be performing NAT on the outside interface of an ASA to a web server within a DMZ. I would like to disable proxy-arp on all the interfaces that I can. I know that outside interface will need to have proxy-arp enabled because of the NAT statement. Do I need to have proxy-arp enabled on the DMZ interface as well?  </p>
","<p>The web server will only need to ARP the ASA to get the MAC address for its (default) gateway.
So, the ASA won't need to reply an ARP for any other IP addresses then its own. You can safely turn off proxy-arp on the DMZ interface. You are correct in your assumption that you need it for the outside interface.</p>
","440"
"What to use as ARP request Target Hardware Address?","8565","","<p>When sending ARP request, what must be filled in the target hardware address (THA)? <a href=""http://blogs.technet.com/b/networking/archive/2009/03/30/tcp-ip-networking-from-the-wire-up.aspx"" rel=""nofollow"">This technet blog post</a> says it is to be filled with zeros (0.0.0.0) -although doesn't look like a MAC address!, and <a href=""http://en.wikipedia.org/wiki/Address_Resolution_Protocol"" rel=""nofollow"">the Wikipedia article</a> suggests FF:FF:FF:FF:FF:FF would be acceptable to <strong>all computers</strong>, and also stating that <strong><em>This field is ignored in requests</em></strong>.</p>

<p>From the above two articles, I'm given the understanding that there is several implementation for ARP regarding this field. What are the widely used implementation and is there any further standardization for this? And is there any problems so there would be mis-understanding between these implementations? And is there any applications that require specific implementation to that field?</p>
","<p>You are mixing up two different pieces of information.  The Wikipedia article you link mentions FF:FF:FF:FF:FF:FF as the destination address, not as the target address.</p>

<p>The destination address is part of the L2 Ethernet header, whereas the THA is part of the ARP packet.</p>

<p>To illustrate, I pulled a random ARP packet out of a random capture I had stored on my computer in Wireshark.  Note in this image that the destination is ff:ff:ff:ff:ff:ff (L2 broadcast) in the Ethernet header section but below in the ARP request section the ""Target MAC Address"" is all zeroes as it should be.</p>

<p><img src=""https://i.stack.imgur.com/YSuzO.png"" alt=""enter image description here""></p>

<p><em>EDIT</em>:</p>

<p>It's also worth mentioning that the <a href=""http://blogs.technet.com/blogfiles/networking/WindowsLiveWriter/TCPIPNetworkingfromtheWireUp_9956/ARP1%20(2)_1366a185-a308-4344-aedd-52cf74ada3be.jpg"" rel=""nofollow noreferrer"">Technet Author's diagram</a> confirms that using 0.0.0.0 for the THA was a typo in his blog.</p>
","3601"
"Best practice for the combination of HSRP and ECMP","8495","","<p>The combination of <a href=""http://en.wikipedia.org/wiki/Equal-cost_multi-path_routing"" rel=""noreferrer"">ECMP</a> (or other causes of asymmetric paths) and <a href=""http://en.wikipedia.org/wiki/Hot_Standby_Router_Protocol"" rel=""noreferrer"">HSRP</a> is broken by default in Cisco IOS; the default behaviour with this design floods unicast traffic excessively.</p>

<p>What is the best-practice for using HSRP with ECMP to prevent unknown unicast flooding?</p>

<h2>Details / Background</h2>

<p>We have a HSRP topology similar to the first diagram below for many of our facilities.  Our Cisco WAN routers have equal-cost routes to all other sites; thus we can see asymmetric routing effects all the time.  Normally we assign R1 to be the HSRP primary, but ECMP allow return traffic through either R1 or R2.</p>

<p>The issue is that when PC1 mounts a remote iSCSI drive across the WAN, the traffic leaves the site via R1, but could return via R2.  As long as the iSCSI traffic returns via R1, there are no issues.</p>

<p><img src=""https://i.stack.imgur.com/atYXl.png"" alt=""HSRP_Broken_00""></p>

<p>The problem occurs when PC1's traffic returns via R2.  Assume the iSCSI session starts at 8:00:00, and both routers and both switches learn PC1's mac simultaneously.  Between 8:00:00 and 8:00:05, there are no flooding problems because both switches still have PC1's mac-address in their CAM table.</p>

<p><img src=""https://i.stack.imgur.com/3aN0Z.png"" alt=""HSRP_Broken_01""></p>

<p>Five minutes after the iSCSI session starts, S2's CAM entry for PC1's mac expires out of the CAM table and S2 floods PC1's traffic out all ports (in this case to Po1, Gi0/3 and Gi0/4).  If PC1's iSCSI session consumes a lot of bandwidth, this unknown unicast flooding can suck non-trivial capacity from the links to PC3 and PC4.</p>

<p>Cisco IOS switches have a default CAM timer of 300 seconds...</p>

<pre><code>S2# show mac address-table aging-time
Vlan Aging Time
---- ----------
1    300
17   300
</code></pre>

<p>However, Cisco IOS' default interface ARP timer is 4 hours...</p>

<pre><code>R2# show interface gi0/0
GigabitEthernet0/0 is up, line protocol is up 
  Hardware is AmdP2, address is 000a.dead.beef (bia 000a.dead.beef)
  Internet address is 172.17.1.252/24
  MTU 1500 bytes, BW 10000 Kbit, DLY 1000 usec, 
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation ARPA, loopback not set
  Keepalive set (10 sec)
  ARP type: ARPA, ARP Timeout 04:00:00       &lt;--------------
</code></pre>

<p>Therefore, S2 starts flooding PC1's iSCSI traffic after five minutes.</p>

<p><img src=""https://i.stack.imgur.com/wtOO3.png"" alt=""HSRP_Broken_02""></p>
","<p>The simple answer is to make the CAM timer <em>equal or slightly longer than the corresponding interface ARP timer</em>, but there are at least three different options to select from...</p>

<p><strong>Option 1: Lower all interface ARP Timers</strong></p>

<p>This option works best if you have a decent-sized layer2 switched network, a reasonable number of ARP entries and few routed interfaces.  This method also is preferable if you like to see PC mac entries age out of the topology quickly.</p>

<ul>
<li>On all IOS ethernet interfaces facing an ethernet switch: <code>arp timeout 240</code></li>
<li>On all IOS ethernet interfaces facing an ethernet switch: <code>hold-queue 200 in</code> and <code>hold-queue 200 out</code> to avoid dropping ARP packets during periodic ARP-refreshes (these limits could be higher, or lower depending on how many ARP refreshes you think that you'll need to handle at once).  If you are adjusting <a href=""http://www.cisco.com/web/about/security/intelligence/spd.html"">Selective Packet Discard</a> values, then you should follow the guidelines in the paper I linked.</li>
</ul>

<p>This forces Cisco IOS to refresh the ARP table within four minutes, if it hasn't happened otherwise for a given ARP entry.  The obvious disadvantage is that this doesn't scale well if you have lots of ARP entries... the limits vary by platform.  I have used this with a few hundred ARPs per router on Catalyst 4500 / 6500 (the Layer3 SVIs) without any issues.</p>

<p><strong>Option 2: Increase the switch CAM Timers</strong></p>

<p>This option works best if you have a large number of ARP entries (i.e. thousands, such as an intense VMWare environment could see).</p>

<ul>
<li>On all IOS switches: <code>mac address-table aging-time 14400</code>, or <code>mac address-table aging-time 14400 vlan &lt;vlan-id&gt;</code> for any Vlan that is of concern.</li>
</ul>

<p>This change adjusts timers that most people assume are fixed at 300 seconds (on Cisco IOS), so be sure to include this in continuity docs.  The side-effect of this is that CAM table entries linger for 4 hours after the PC is removed (which can be either good or bad, depending on your PoV).  If 4 hours is too long, see the next option...</p>

<p><strong>Option 3: Change both the interface ARP timers, and the switch CAM Timers</strong></p>

<p>This option avoids hideously-long CAM timers in Option 2 at the expense of more configuration.  You can choose whether you need 900 seconds, 1800 seconds, or whatever...  just make sure your CAM and ARP timers match; thus, you will need to configure both Option 1 and Option 2 in your topologies.</p>
","2193"
"Is a 192.169.0.0/16 a private address range?","8495","","<p>I know that 192.168.0.0/16 are adresses reserved for private networks. What about 192.169.0.0/16 addresses and other.. in 192.0.0.0/8. Are they routable in the ""Internet"" or are they also private?</p>
","<p>These reserved IP-ranges for private networks are defined in <a href=""https://tools.ietf.org/html/rfc1918"">RFC1918</a>. 192.169.0.0/16 is not in them. You can verify using a WHOIS service that this /16 is divided into a number of smaller assignments to various networks.</p>
","17506"
"F5 Routing - Default Route or IP Forwarding Virtual Server?","8464","","<p>In the 21st video of the F5 video series in CBT Nuggets, Keith Barker explains that the way to make the F5 ""route"" is by creating an IP Forwarding Virtual Server. This server would have the following settings:</p>

<pre><code>Dst IP: 0.0.0.0/0
Service port: * (all)
Type: Forwarding (IP)
Protocol Profile: fastL4
</code></pre>

<p>My question is: Why does Keith Barker recommend doing this instead of simply creating a static default route on the F5 appliance pointing to the next hop?
I have attempted to google this as well as look in devcentral and I can't seem to find the answer.</p>
","<p>You're not alone, there is often confusion about the Forwarding Virtual Server, and what role it serves in an F5 LTM.  Not having watched the video in question, I can only speculate on exactly what Keith Barker said/why he said it.  However, knowing the high quality of his other training videos, I can assume that the following is what he was driving at.</p>

<p>Essentially, think of it this way:</p>

<ul>
<li>All forwarding and policy decisions are made by the LTM services (Virtual Servers, SNAT, and NAT).  These configurations act on the traffic at <strong>ingress</strong>.</li>
<li>Final routing decisions are made by the routing table of the device, once the LTM services are done with a particular piece of traffic.  The routing table acts on the traffic at <strong>egress</strong>.</li>
</ul>

<p>See this very <a href=""https://devcentral.f5.com/questions/tcp-traffic-path-diagram"" rel=""nofollow"">helpful diagram of the traffic flow through an F5 LTM</a>.  You will notice that new traffic is matched against Virtual Servers, SNAT, and NAT for all actions.</p>

<hr>

<p>Remember what the F5 LTM is for, <strong>it is a Load Balancer</strong> and is designed to explicitly proxy connections through it's Virtual Server constructs.</p>

<p>In order to have it simply pass traffic, you can configure a ""Default"" Forwarding Virtual Server that listens on all addresses and on all ports.  This allows you to somewhat cheat the system, and have it transfer traffic through the device, but not to a pool of servers.</p>

<p>This is commonly used to allow traffic to flow from the servers behind the LTM, outbound to the world for patching, etc.  In addition, if you wanted to do more than simply route that traffic (for example to apply any of the dozens of wonderful ""knobs"" that the LTM provides such as TCP fixup or an iRule), you could do that on a Forwarding Virtual Server.</p>

<hr>

<p>You can certainly configure a standard static IP route with the following command in TMSH:</p>

<p><code>create net route &lt;route destination/mask&gt; gw &lt;IP addres&gt;</code></p>

<p>However, without LTM configuration of some sort (Virtual Server, Forwarding Virtual Server, SNAT, or NAT), the traffic would simply be dropped and never even reach the point of doing a route-lookup against the routing table.  <strong>The F5 LTM is a Default Deny device</strong>, it will not forward traffic that you have not explicitly permitted/configured.</p>

<p>Finally, for more information on Forwarding Virtual Servers, read <a href=""https://support.f5.com/kb/en-us/solutions/public/7000/500/sol7595.html"" rel=""nofollow"">SOL7595</a> and for more information on Static Routing on the LTM, read <a href=""https://support.f5.com/kb/en-us/solutions/public/13000/800/sol13833.html"" rel=""nofollow"">SOL13833</a>.</p>
","20424"
"Distributing static routes across an OSPF area","8438","","<p>If you have a router which does not support OSPF, but your routing topology makes use of OSPF as all other devices do support it, what is the best way to get this routers networks in to the OSPF area?</p>

<p>My initial thought was to put a static route on every other router, but if there are multiple networks behind this router this could become very cumbersome very quickly.</p>

<p>This problem arises from the answer on another question:
<a href=""https://networkengineering.stackexchange.com/questions/37/how-do-you-get-an-asa-to-announce-natd-outside-addresses-in-to-an-ospf-zone"">How do you get an ASA to announce NAT&#39;d &#39;outside&#39; addresses in to an OSPF zone?</a></p>
","<p>What does the topology look like? How are you doing routing today towards these networks? Or is the router being deployed now? Do you have an OSPF capable router connected to this router that is not running OSPF?</p>

<p>If you do then I suggest you redistribute static on this router. Something like:</p>

<pre><code>ip prefix-list static-routes permit 10.0.0.0/24
ip prefix-list static-routes permit 10.0.10.0/24
ip prefix-list static-routes permit 10.0.20.0/24
route-map static-allowed permit 10
match ip address prefix-list static-routes
route-map static-allowed deny 20
</code></pre>

<p>The explicit deny at the end is not really needed as there is an implicit deny but it makes the logic a bit more clear.</p>

<p>Then under the OSPF process:</p>

<pre><code>router ospf x
redistribute static subnets route-map static-allowed
</code></pre>
","357"
"JunOS: Can I have a live console log?","8437","","<p>On a Cisco IOS device the command <code>logging buffered 51200 notifications</code> logs most information to the routers memory (obviously you can change that to <code>informational</code> or <code>debugging</code> as required).</p>

<p>When connected to the router via telnet or SSH I can execute the command <code>terminal monitor</code> (<code>term mon</code>) to have these events displayed in my session live as they are happening. When connected via the console this happens automatically.</p>

<p>How can I achieve the same effect on JunOS; When I am adding IGP/EGB neighbors for example, I'd like to see the new adjacencies coming up rather than constantly looking through the logs.</p>
","<p>'monitor start messages' is roughly equivalent to 'term mon. 'messages' is the name of the log file you want to monitor.</p>

<p>If you don't see the output you expect, you need to change what is logged to given file from 'set configuration system syslog file X ...'.</p>
","3530"
"Connect a POE VoIP phone to a non-POE Switch","8413","","<p>I'm working on a project where I need to make a network for all PCs in the site.
I need about 8 Ethernet sockets in each office of the site.
I found that there's already two Ethernet sockets in each office but they are connected to VoIP phones (Siemens openstage 15) .</p>

<p>So, I bought d-link switches (des 1008a) for each office and decided to expand the network inside each office by connecting one of the already existing sockets to the dlink switch and then connect the PCs and phones to the new switch.</p>

<p>The problem arose when I connected the VoIP phone to the dlink switch, it didn't boot up.
I discovered that the phone is powered through Power Over Ethernet and when connected to the normal non-PoE dlink switch it doesn't work even though the main cable entering to the DLink switch is coming from a POE switch. The phone works only when connected to the cable coming from the POE switch.
<img src=""https://i.stack.imgur.com/tKQxk.jpg"" alt=""enter image description here""></p>

<p>When I searched for the power specs of this specific phone model (Siemens Openstage 15) I found these specs ..</p>

<p><img src=""https://i.stack.imgur.com/vqYNS.png"" alt=""enter image description here""></p>

<p>How can I solve this situation without expanding new cables from the main POE switch?</p>
","<p>A little late to the party on this one, but just came across this myself today.</p>

<p>Plug the VoIP phone into the PoE switch like normal. Then have the port from your VoIP phone that is labeled ""PC"" connect to your non-PoE switch and distribute to the rest of your PCs with the rest of the open ports from your non-PoE switch.</p>

<p>This may be what PsychoData is saying, but it wasn't clear to me. So kudos to you if it was :)</p>
","18361"
"Deleting VLAN on Cisco 887","8407","","<p>How can I delete a VLAN config from a Cisco 887VA with IOS 15.3?</p>

<p>For some testing I have created VLAN2 and no longer need it but now I can't get rid of it from <code>show running-config</code>.</p>

<p>From config mode I tried:</p>

<ul>
<li><code>interface vlan 2</code> → <code>shutdown</code></li>
<li><code>no vlan 2</code></li>
<li><code>write mem</code></li>
</ul>

<p>But even after reload the VLAN is still showing up <code>running-config</code>.</p>

<p>Not that it's a big issue but it's polluting the config...</p>
","<p><code>no vlan 2</code> deletes VLAN 2 from the VLAN database. If you want to delete the VLAN2 SVI, you need to type <code>no interface vlan2</code>.</p>
","27820"
"What is the difference between VPLS vs Layer 2 VPN?","8356","","<p>Apologies about the very open ended question, but I am struggling to differentiate between VPLS &amp; L2 VPN's. I'm aware they both run over MPLS, but I can't find any documentation or sites that clearly explain what either are etc.</p>

<p>We've recently implemented a VPLS in the business to interconnect some of our sites. But I overheard one of the other engineers saying that we also have another a L2 VPN running over our MPLS links. And I am unsure, how the 2 interlink thats all as I was under the impression they were the same thing.</p>

<p>I am sorry if it isn't too clear, but I generally don't know the difference, and I just needed a bit of help either with clarifying the two terminologies.</p>

<p>I am moving into my first networking role, and these terms have been mentioned a few times.</p>
","<p>L2VPN is generic term for group of technologies out of which one is VPLS, but could be number of other technologies such as emerging EVPN.</p>

<p>For more information read <a href=""http://datatracker.ietf.org/wg/l2vpn/charter/"">WG charter</a>/mailing lists as L2VPN has lot of active work going on. Also read <a href=""http://tools.ietf.org/html/rfc6624"">RFC6624</a> and <a href=""http://tools.ietf.org/html/rfc4761"">RFC4761</a></p>
","3209"
"Route servers and looking glasses - what are they?","8324","","<p>I've heard the term ""route server"" and ""looking glass"" thrown around here. What are they, and why should I care?</p>
","<p>(Note that these two terms are often used interchangeably, which can lead to some confusion.)</p>

<h1>Looking Glasses</h1>

<p>A looking glass is usually a website (most often CGI) that interfaces with routers that are owned and operated by a single ISP or other network operator. Most of the time these are publicly accessible, but there may be instances where they're not. The looking glass provides a view (in website form) into a BGP table of a particular router in an operator's network. Often, looking glass implementations will also include other utilities, such as the ability to run a traceroute to a destination as if it were run from the network operator's router itself. Looking glasses are useful because they provide a perspective into an upstream's BGP table. <a href=""http://lookingglass.level3.net/"">Level3, a well-known tier one carrier in the U.S. has a looking glass available here.</a> These are widely used troubleshooting tools. </p>

<h1>Route Servers</h1>

<p>The term ""route server"" has evolved to mean two different things, both of which will be explained. I'm defining two route server ""subtypes"" here that should make the distinction more clear. These definitions are my own and are only used to try to dispel any possible confusion. In reality, the <strong>public route server</strong> is also commonly referred to as a ""route collector"" or a ""route-views server"" (the latter originating from the <a href=""http://www.routeviews.org/"">University of Oregon Route Views Project</a>).</p>

<h2>Public Route Server</h2>

<p>These are systems (usually routers, but some exist that run open source routing daemons) that are publicly accessible, often via Telnet, and one is able to also run pings, traceroutes, and ""show ip bgp"" (there are also a couple Juniper route servers out there, don't worry!) commands. The difference between a public route server and a looking glass (aside from an LG having a nifty CGI) is that a wide variety of networks (including some tier one carriers) peer with a route server, so there's an ""overall"" bigger picture of which prefixes are coming from which ASN's. Command authorization policy will vary from route server to route server. <a href=""http://www.bgp4.net/wiki/doku.php?id=tools%3aipv4_route_servers"">Here's a list of IPv4 route servers</a>. They have a separate page with IPv6 route servers as well. When it comes to differentiating <strong>looking glass</strong> from <strong>route server</strong>, one can think of the looking glass as a frontend to a route server, whether the route server itself be publicly or privately accessible.</p>

<p><em><strong>Can't you run a looking glass on a public route server?</em></strong></p>

<p>You can, but typically the people that run looking glasses are the ones that can afford to operate and maintain the servers that the looking glasses run on. With a public route server, all you need is a router (or a server running an open source routing daemon), a good AAA policy, and some folks that are willing to give you BGP feeds. It's also relevant to note that some network operators also host publicly accessible route servers, and you might even come across some operators that run a route server in addition to a looking glass.</p>

<h2>IXP Route Server</h2>

<p>This version of the route server is a little bit different. On shared peering fabrics at IXP's, the barrier of entry for an organization to begin peering is lower. You have a single port (that the IXP sells to you) connected to the IXP peering LAN, and you're given an IP address by the IXP. Now you can peer with anyone else on the fabric; contrast this with a PNI, which involves a separate dedicated physical connection between you and another entity. With a connection to an IXP's peering LAN, aside from your single port being the bottleneck, you have to manually configure eBGP sessions with whomever you wish to peer with. This is called <strong>bilateral interconnection</strong> - there is one session between you and the peer, and only you and the peer exchange announcements. If the IXP has many members, this can become cumbersome. In this case, a route server is typically deployed at the IXP in order to be the ""one stop shop"" for an organization to set up an eBGP session with in order to receive prefixes from whomever else is peered with the route server. This is called <strong>multilateral interconnection</strong>. One BGP session between you and the route server, and you get everyone else's announcements that also peers with the route server.</p>

<p>Some organizations will rely on the route server eBGP session(s), while others will use it as a backup to their existing eBGP peerings on the IXP fabric. Most IXP's will have redundant route servers and suggest that organizations peer with both if they peer with the route servers at all.</p>

<h3>What about BGP?</h3>

<p>Multilateral peering using route servers brings interesting challenges in regards to BGP. A route server itself is an eBGP speaker, however there have to be specific considerations for a route server and multilateral BGP peering. Some of these rules will be reminisce of iBGP route reflection, and there are indeed many similarities. There has been <a href=""http://tools.ietf.org/html/draft-ietf-idr-ix-bgp-route-server-02"">recent work</a> to standardize behaviors of a route server when it comes to these specific features. The following caveats are worth noting here:</p>

<ul>
<li><strong>NEXT_HOP Attribute</strong> - This attribute <strong>must be passed on unmodified</strong> between the route server and its clients. While the route server implementation itself will not modify this attribute, it's still best practice to set ""next-hop-self"" on eBGP sessions from your router to a route server.</li>
<li><strong>AS_PATH Attribute</strong> - Again, because the route server is intended to be transparent and not participate in any routing decisions, and modification of this attribute may affect the route server clients' best path decision making process, the route server implementation must not modify this attribute. In addition, the route server will not send their own ASN in BGP updates to its clients, therefore it's required to set ""no bgp enforce-first-as"" (Cisco-specific) on the client router in order to allow the eBGP session to form between the client and the route server.</li>
<li><strong>MULTI_EXIT_DISC Attribute</strong> - MED is another attribute that should be propagated to route server clients without modification by the route server, since it can also used to influence the best path selection process.</li>
<li><strong>Communities Attributes</strong> - These should not be modified by the route server, unless the community (or communities) is intended for processing by the route server itself. Typically communities are used by IXP route server implementations to allow the peers of the route server to manipulate routing updates to other route server peers.</li>
</ul>

<p>It is important to remember two distinctions in regards to IXP route server implementation:</p>

<ul>
<li>The route server <strong>does not</strong> participate in any routing or forwarding. It is supposed to be as transparent as possible.</li>
<li>Route server clients depend on the route server to perform their outbound filtering for them.</li>
</ul>

<h3>IXP Route Server Implementation Options</h3>

<p>Typically IXP operators will deploy open source routing daemons as route servers. There are three popular options:</p>

<ol>
<li><p><a href=""http://www.nongnu.org/quagga/"">Quagga, specifically bgpd</a>. Runs on Linux and BSD. It's been around the longest and probably has the most information available. There have been multiple forks of Quagga over the years, <a href=""https://github.com/GMCH/quagga.euro-ix"">including a train with sponsored development by EuroIX</a>, a train developed by the <a href=""http://opensourcerouting.org/"">Open Source Routing group</a> (which more aims to improve IGP functionality with OSPF and ISIS), and the Quagga-RE (Release Engineering) train which has experimental features. <a href=""https://code.google.com/p/google-quagga/"">Google</a> has also created their own fork of Quagga. Quagga bgpd supports both IPv6 and IPv4, however most IXP operators (and even some Quagga maintainers) will advise against using the ""mainline"" Quagga train for operating a route server at an IXP.</p></li>
<li><p><a href=""http://bird.network.cz/"">BIRD</a>. Runs on Linux and BSD. BIRD has gained quite a bit of popularity due to its stability and powerful filtering language and capabilities, in addition to its very good scheduling system. There have been a couple of published comparisons and scale tests between Quagga and BIRD. Overall, BIRD tends to be more stable and isn't as susceptible to CPU and memory churn as Quagga is. Both BIRD and Quagga are single-threaded however, but this is intentional. In addition, although BIRD supports both IPv4 and IPv6, it requires two different processes (compiled binaries) for IPv4 and IPv6.</p></li>
<li><p><a href=""http://www.openbgpd.org/"">OpenBGPD</a>. <strong>BSD Only</strong>. OpenBGPD is the only multi-threaded open source BGP daemon available. It's known to be fairly stable under load however TCP MD5 support is somewhat poor.</p></li>
</ol>

<p>In addition to open source daemons, <a href=""http://www.cisco.com/en/US/docs/ios/ios_xe/iproute_bgp/configuration/guide/irg_route_server_xe.html"">Cisco also offers a route server implementation for IOS-XE</a>, which runs on the ASR platform. At the time of this writing, Juniper doesn't offer a route server implementation on their hardware or operating system, but this may change in the future.</p>

<p>In terms of evaluating an open source routing daemon, in regards to memory handling and architecture, one can safely assume that BIRD > OpenBGPD > Quagga, however the ASR platform and IOS-XE is also reportedly much more capable at scale when compared to the open source daemon options available.</p>

<p>I hope this sheds some light on route servers/looking glasses in general.</p>
","1057"
"What does logging synchronous command do?","8292","","<p>Can somebody describe me what does </p>

<blockquote>
  <p>logging synchronous</p>
</blockquote>

<p>command do ?</p>
","<p>""logging synchronous"" prevents every logging output from immediately interrupting your console session.</p>

<p>See command documentation:</p>

<p>""This keeps unsolicited messages and debug output from being interspersed with solicited software output and prompts.""</p>

<p><a href=""http://www.cisco.com/c/en/us/td/docs/ios/fundamentals/command/reference/cf_book/cf_l1.html#wp1020534"">http://www.cisco.com/c/en/us/td/docs/ios/fundamentals/command/reference/cf_book/cf_l1.html#wp1020534</a></p>
","25614"
"Bandwidth vs Throughput vs Data(bit) rate","8248","","<p>I totally understand the difference between bandwidth and throughput. While bandwidth shows the maximum amount of data can be transmitted from a sender to a receiver, throughput is the actual amount of data that has been transmitted as they could be different factors such as latency affecting throughput. </p>

<p>Bit rate is the amount of data(number of bits) can be transmitted per second which sounds the same as throughput to me. So what is the key difference? </p>
","<p>Some of these terms are used differently by different people, but below is what is generally accepted.</p>

<p>Bandwidth is the number of bits per second that a link can send or receive, including all flows. For example, the bandwidth of a 100 Mbps connections is 100 Mbps, but that doesn't mean it is always sending or receiving 100 Mbps, but that is the maximum possible on that link. Unlike what many people mean by bandwidth, it does <strong>not</strong> mean data usage. I see people say that they have a bandwidth limitation (every link does), and they have used all their bandwidth for the month. This is an incorrect use of the term. What they mean to say is that they have a data usage limitation, and they have used it up for the month.</p>

<p>Throughput is the amount of data during a time period that a flow (process to process) can send or receive. This includes all the host overhead, and contention on the link (multiple flows on a link will each use some percentage of the bandwidth, reducing the throughput of each).</p>

<p>Bit rate is closer to bandwidth, but it is often per host, or source to destination devices. You may have a bit rate of 100 Mbps from a host to a switch, but the bit rate from a host to a host is less. This usually includes multiple flows.</p>
","39236"
"Do I need a 10GbE router to provide 10Gbps LAN speed?","8229","","<p>We're planning on creating a 10GbE network for our office. I've got a list of hardware that all support 10GbE, only the router isn't 10GbE:</p>

<ul>
<li>Synology DS3612+ - 12 Drive NAS</li>
<li>Intel X540-T1 - 10GbE Network adaptor for NAS</li>
<li>Netgear XS708E - 10GbE Switch</li>
<li>SANLink2 - Thunderbolt - 10GbE adapter</li>
<li>Cat7 Cables</li>
</ul>

<p>Setup is as folows:</p>

<ul>
<li>Our gigabit-router (<strong>NOT</strong> 10GbE) will be connected to the Switch</li>
<li>Computers will be connected to the Switch via SANLink2</li>
<li>The NAS will be connected to the Switch via 10GbE adaptor</li>
</ul>

<p>What I'd like to know:</p>

<ul>
<li>Will the computers be able to connect to the NAS at 10GbE?</li>
<li>Will the router slow things (other than internet) down?</li>
<li>Any other drawbacks?</li>
</ul>

<p><strong>EDIT:</strong></p>

<p>The needs for this network are the following:</p>

<ul>
<li>We want to do 4K video-editing directly from the NAS.</li>
<li>We want to transfer 2TB of data to the NAS in less than an hour.</li>
</ul>
","<p><strong><em>Will the computers be able to connect to the NAS at 10GbE?</em></strong></p>

<p>Yes, if both the computers and the NAS are connected to the switch at 10GbE and do not require routing (ie. both are in the same subnet and VLAN).</p>

<p><strong><em>Will the router slow things (other than internet) down?</em></strong></p>

<p>It will slow anything which passes through it down to gigabit, but only if is faster to begin with. </p>

<p><strong><em>Any other drawbacks?</em></strong></p>

<p>This could be the perfect setup for you, but it could also fail to deliver under certain conditions. Since we don't know what it has to deliver, it's hard to tell.  It all depends on how you will use it and what you expect from it...</p>
","10151"
"Multiple POE over a single cable","8167","","<p>I try to solve a problem using Power Over Ethernet technology to Power supply differents devices. I would like to avoid to buy new router and try to make it work without any expensive costs (if possible). Let me explain you the situation :</p>

<p>I have a POE compatible router which is in a room, let's call it room A and 2 IP cameras which are in another room, let's call it room B. Cameras are POE compatible.</p>

<p>I have a single cat 5 ethernet cable which link both rooms together. A single router port provide 15W and a single camera need 15W.</p>

<p>I would like to power supply my cameras from my router over a single cable. Is there any possibility to use 2 ports (30W) on my router from room A over this single cable and split this power (2x15W) from room B for both cameras.</p>

<p>Is it possible and is there eventually ethernet split connectors which exist to do that ?</p>

<p>Thank you for the help.</p>
","<p>I know this is an older question, hopefully you've solved it by now, but I wanted to toss in my two cents, for the benefit of future generations if nothing else.</p>

<p>First of all, yes, ethernet and PoE specs mean you can do exactly what you're trying to do, and run two PoE cameras over a single Cat5e. </p>

<p>First up, there are very, very, VERY few IP surveillance cameras that use gigabit ethernet; 99.99% of them are 10/100 Fast Ethernet only. The ones that do use GbE will be super high-end, super high-res, and super expensive. </p>

<p>Second, very very few cameras use more than about 5-6 watts. Most IR cameras won't pull more than about 4W with the IR on; non-IR cameras will typically use 2W or less. To use a full 15W you'd be looking at something with massive IR range, heater, fan, and probably PTZ as well. The Axis outdoor cameras I use, with internal heater and fan to dissipate moisture, spec a maximum 12.1W draw.</p>

<p>With all that in mind: 10/100 ethernet uses only two of the four pairs, and PoE ""mode A"", aka ""endspan"" runs power over that same pair. This means that <strong>if your switch and cameras both support Mode A or endspan power</strong> (which will include most except the very cheapest), you can run a camera over only two pairs. </p>

<p>That leaves the other two pairs free for a second device - I've run a second camera that way, a IP video decoder, a wireless access point, a room temperature monitor... </p>

<p>On the switch end, I'll often just strip the jacket back 2-3"", terminate the orange and green pairs normally in one RJ45 plug (n that case, for T-568B, the plug would look like white/orange, orange, white/green, blank, blank, green, blank, blank), and then put the brown and blue pairs where the orange and green pairs would go in a second plug (I use brown for orange and blue for green, just to keep it simple to keep track of). The two can then plug into adjacent ports in the switch. If you prefer to split the two out into adjacent keystone jacks and use standard patch cords, you can do that too.</p>

<p>On the other end, you can split the pairs out in a box and terminate into keystones, then run patch cords to the cameras... or bring it in behind one camera, put plugs on the ends and plug one into that camera, then run an extension to the other camera and put a keystone on it to connect to your home run.</p>

<p>Of course, you can adjust the termination types to suit your purposes. In a pinch I've just used ""beanie"" connectors to splice the wires - at the end of the day, they're still just moving electricity.</p>

<p>Now some PoE switches will do up to a full 15W per port, but for only half the ports, and more typically provide 7.5W per port... but again, with most cameras, that will be more than enough, and again, that's per port - you're plugging each camera into its own port here, so that's not a problem.</p>

<p>Yes, this is all very ""non-standard""... but it is certainly possible, easy to do, and so far it's worked very reliably for me when there have been no other options.</p>
","39844"
"Can I use a Catalyst 2960-S for iSCSI?","8155","","<p>I need to set up a modest iSCSI SAN with a few ESX hosts and one storage array. Can I get by using a Catalyst 2960-S or do I need to upgrade? Are there any special tweaks I need to make to the switch in order to handle iSCSI? The switch will be dedicated to the SAN; no other traffic except management will be present.</p>
","<p>Given that the Cat2960-S is a desktop/access switch, with very, very small buffers, you would likely experience a lot of output drops.  A datacenter switch, such as a 4948E, would be a better choice for an iSCSI application.  </p>

<p>To understand the reasoning behind this, you have to remember that an ethernet switch is either transmitting, or not transmitting on a specific port.  If traffic arrives on port 1 for port 2, and port 3 is already sending traffic to port 2, the traffic from port 1 has to be buffered until there's a gap in the traffic from 3 to 2.  If the buffer fills, additional traffic will be dropped.  The term ""microburst"" is used to reference traffic that, over time, is well below the limit for the interface, but occasionally bursts to cause output drops.</p>

<p>I am not as familiar with the 2960-S platform, but enabling QoS (without extensive tuning, see comments below) on it would probably be a bad idea; that would actually increase the number of output drops.  Enabling QoS splits your very small buffers into 4 even smaller buffers, and most traffic will hit only one of them.</p>
","136"
"Two SSID's for same VLAN - problems?","8033","","<p>I want to test 802.1x on a test SSID.  Wasn't sure if making a test SSID associated to a VLAN that already has another SSID associated with it would cause a problem with the customer facing SSID.</p>

<p>Ex.
SSID 1 = VLAN 1
SSID 2 = VLAN 1 - has 802.1x specific configurations</p>
","<p>Cisco won't allow more than one SSID per VLAN per Interface using Autonomous APs. Can't answer for WLCs, but I would assume the same thing.</p>

<p>If you have a single radio AP, I recommend having a test VLAN to go with the test SSID and then have your router route between the VLANs.</p>

<p>AP Message When Attempting:</p>

<pre><code>#conf t
Enter configuration commands, one per line.  End with CNTL/Z.
(config)#dot11 ssid Example
(config-ssid)#vlan 21
Warning: Vlan 21 already mapped to SSID Guest. SSIDs with same vlan association cannot be attached to the same interface.

(config-ssid)#
</code></pre>

<p>Originally I took this as one to one but when I tried it on a dual radio AP I was able to replace the Guest SSID on the 5Ghz radio:</p>

<pre><code>(config-ssid)#int D1
(config-if)#no ssid Guest
(config-if)#ssid Example
(config-if)#exit
(config)#exit

#sh dot11 bssid
Interface      BSSID         Guest  SSID
Dot11Radio0   0026.0bXX.XXXX  Yes  Guest
Dot11Radio1   0007.7dXX.XXXX  No   Example

#
</code></pre>

<p>EDIT: Corrected myself, it does work on a dual radio AP, but not single radio</p>
","2069"
"RIP V2 multicasting looks as broadcasting at IP add 224.0.0.9","8025","","<p>In RIPv1 the packets are broadcasted out all ports with dest. IP 255.255.255.255.  In v2 they are multicasted with dest. IP 224.0.0.9. In Packet Tracer, this v2 packet is transmitted over all interfaces at the same time which looks like broadcasting with an IP of multicasting. </p>

<p>When EIGRP uses multicasting it transmits packets to  only one dest. at a time. It also tries to send EIGRP packets to an undesired host (PC, server, etc.) which drops it.</p>

<p>I have tried this only on Cisco Packet Tracer. So can someone please explain me why RIPv2 packet transmission looks like broadcasting with destination IP address as 224.0.0.9?</p>

<p>Thank you.</p>
","<p>224.0.0.9 is a protocol standard multicast address, meaning that it is reserved for all RIPv2 speaking routers.  This reduces unnecessary overhead, and only speaks to RIPv2 routers, instead of a full broadcast.  Here is a portion from the RIPv2 RFC.</p>

<p><a href=""http://tools.ietf.org/html/rfc2453"" rel=""nofollow"">http://tools.ietf.org/html/rfc2453</a></p>

<blockquote>
  <p>4.5 Multicasting</p>
  
  <p>In order to reduce unnecessary load on those hosts which are not<br>
  listening to RIP-2 messages, an IP multicast address will be used for 
  periodic broadcasts.  The IP multicast address is 224.0.0.9.  Note<br>
  that IGMP is not needed since these are inter-router messages which<br>
  are not forwarded.</p>
  
  <p>On NBMA networks, unicast addressing may be used.  However, if a<br>
  response addressed to the RIP-2 multicast address is received, it<br>
  should be accepted.</p>
  
  <p>In order to maintain backwards compatibility, the use of the<br>
  multicast address will be configurable, as described in section 5.1.<br>
  If multicasting is used, it should be used on all interfaces which<br>
  support it.</p>
</blockquote>
","12951"
"To Inspect ESMTP on ASA or not?","8001","","<p>On an ASA I administer there is a policy-map in place which implements ""inspect ESMTP"".  I've reviewed what this does, and in my (rather uninformed) opinion at first blush it looks to be a good thing to implement.  It is however impacting the ability to send mass emails from lists with over 50 recipients according to our domain admins.  They want to remove this inspection to alleviate the problem.</p>

<p>Is ESMTP inspection a solid control to leave and place, or is removal safe?  If I don't want to remove it, is there a way to see what in the control is preventing mail from being sent and possibly alter that one element of it rather than removing it altogether?</p>
","<p>It only <em>looks</em> harmless. :-)  In reality, Cisco has a long history of botching the STMP and ESMTP inspection.  And honestly, it won't provide any protection from current evolving threats; it doesn't use a dynamic set of rules that can be updated regularly.  Email filtering and inspection is best done by a dedicated appliance that's up-to-date.</p>

<p>To my knowledge, there are no knobs on <code>inspect esmtp</code>.  And <strong><a href=""http://www.cisco.com/en/US/products/ps6120/products_tech_note09186a0080bab912.shtml"" rel=""nofollow"">this</a></strong> is enough of a reason to never turn it on:</p>

<blockquote>
  <p>For example, Telnet sends each character individually in a different
  packet on the wire, but actual email clients and servers send the
  entire command in one packet. If you use Telnet and you type <strong>H</strong>, the
  Telnet client sends an <strong>H</strong> to the email server. Since ESMTP and SMTP
  inspection do not recognize <strong>H</strong> as a valid command, the ASA replaces the
  <strong>H</strong> with an <strong>X</strong> and passes it along.</p>
</blockquote>
","6084"
"How do VLANs affect the broadcast domain?","7968","","<p>I'm repeating a ""LAN Switching and Wireless"" module in college and I'm looking over past exam papers in preparation for the repeat exam. One of the questions is</p>

<blockquote>
  <p>What is a broadcast domain? Using an example, explain how VLANs affect the broadcast domain.</p>
</blockquote>

<p>I know that a broadcast domain is a logical division of a network whereby all nodes can reach each-other on the data-link layer by broadcast. And I realise that each VLAN is essentially its own broadcast domain. But I don't know what example I could give that could answer this question properly.</p>
","<p>Each VLAN creates its own broadcast domain in 1 or more physical switches. If you have a switch taken out of the box it tends to put all ports in vlan 1 so for say a 24 ports the broadcast domain includes all 24 ports. If you were to create a vlan 2 and configure half the ports to be members of vlan 2 you then have 2 broadcast domains each of 12 ports. if you create a vlan 3 and put half the ports that are still in vlan 1 in it you would end of with 3 broadcast domains 2 with 6 ports and 1 with 12.</p>
","9771"
"What is the difference between WAN and LAN ports?","7954","","<p>I was looking some routers and I noticed that in some of them there is a distinction between WAN and LAN ports? The WAN ports is to connect an access point and LAN ports to connect a switch or a PC?</p>
","<p>Consumer grade routers generally have this distinction, although some enterprise SOHO routers also have this distinction.  WAN stands for Wide Area Network and this is the network that connects your router to your service provider.  The WAN port usually connects to a DSL modem, cable modem or fibre media converter.  LAN stands for Local Area Network and this is the network that connects the devices within your home/business to the router.  The LAN port or ports usually connect to PCs, printers etc.  LAN ports can also connect to wireless APs to allow laptops, smartphones, tablets etc to connect to the LAN.  The router then routes between the LAN and WAN network, applying NAT and firewall policy in the process.</p>
","34111"
"CAT7 Ethernet cable: order of wires in the clamp","7940","","<p>On a CAT 7 Ethernet cable each twisted pair is individually shielded, and all pairs together are inside a shielded jacket:</p>

<p><a href=""https://i.stack.imgur.com/6yZ8x.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/6yZ8x.jpg"" alt=""enter image description here""></a></p>

<p>Colors of the wires may change, for instance I recently got my hands on a cable where the wires were all different:</p>

<ul>
<li>red &amp; orange</li>
<li>yellow &amp; brown</li>
<li>white &amp; blue</li>
<li>black &amp; aqua</li>
</ul>

<p>When crimping a RJ-45 plug, should we follow the same order as in 568B, i.e. the four twisted pairs go to pins 1-2 4-5 7-8 3-6, as in the figure... </p>

<p><a href=""https://i.stack.imgur.com/FoeXV.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/FoeXV.jpg"" alt=""enter image description here""></a></p>

<p>... or any order of the wires (provided they match at both cable ends, of course) will work fine? </p>

<p>In a CAT 7 cable, a wire is protected from crosstalk from its pair because of the twisting, and is protected from crosstalk from all other wires because of the double shielding, so I'd lean towards the second option. </p>
","<p>Category-7 cable has not yet been recognized by ANSI/TIA/EIA. The only currently recognized cables are Category-3 (still talking about eliminating it), Category-5E, Category-6 (may not be recognized in the next revision), and Category-6A.</p>

<p>You are referencing an ANSI/TIA/EIA color code, so it is no surprise that un-recognized cabling has different colors. If Category-7 cabling is ever recognized, the manufacturers will need to adhere to the ANSI/TIA/EIA standards to be able to call the cable they produce by the recognized category.</p>

<p>If you are using this for ethernet, you will still need to follow the ethernet pinout of pairs: 1-2, 3-6, 4-5, and 7-8. Not pairing correctly will cause you no end of grief. Also, You need to make sure your equipment can proper ground the shielding. Most new equipment from the major manufacturers does this correctly, but some of the cheap stuff doesn't. Without proper connection of the shield in all the connectors (continuous the length of the cable, from one device to the device on the other end), and the shield is properly grounded on both ends, you wasted a lot of money on expensive cable that doesn't perform as it should.</p>
","28134"
"PVID vs. untagged","7937","","<p>I've seen similar spins on this question before but not one that adequately answers it.</p>

<p>In the following (paraphrased, not literal) config on a Cisco SF300:</p>

<pre><code>FastEthernet1
Port mode General
General access VLAN 20 tagged
General access VLAN 10 untagged
PVID 10
</code></pre>

<p>If I plug a PC into this port, any untagged packets entering the port will internally enter VLAN 10. Any traffic on VLAN 10 will exit that port untagged. This I completely accept since I use it on a daily basis.</p>

<p>What's the purpose of setting untagged access without setting PVID? Is untagged ingress traffic going to just go nowhere? If so, what's the purpose of having an untagged VLAN that can't communicate bidirectionally?</p>
","<p>Without getting into NDA territory, a lot of it has to do with the switch (chip) internals. Of course anyone with a clue codes their UI and configuration language to handle these things automatically. You'd think something with a Cisco logo on it would be better, but you'd be wrong -- that switch grew out of the Linksys Small Business product line and has never seen the same engineering effort behind IOS, for example.</p>

<p>While it makes little sense, it's a valid configuration to set a PVID of 20 in your example. Untagged traffic handed to the switch would forward in VLAN 20. (no one in their right mind would(should) do that.)</p>

<p>[Note: even in switch IOS, one can set the native VLAN to something that isn't in the allowed list. And it's 100% valid.]</p>
","12886"
"BGP remote-triggered blackhole (RTBH) filter for Juniper","7924","","<p>I'm trying to find the most elegant way to implement a <a href=""http://tools.ietf.org/html/rfc5635"">RTBH</a> filter for routes received from a customer.</p>

<p>The filter should:</p>

<ol>
<li>Only accept the customers own prefixes from a prefix-list</li>
<li>Only accept /32 prefixes</li>
<li>Only prefixes with the blackhole community</li>
<li>Set the next-hop to the RTBH next-hop (192.0.2.1)</li>
</ol>

<p>To begin I looked at the ""<a href=""http://www.juniper.net/techpubs/en_US/junos11.4/topics/usage-guidelines/policy-configuring-match-conditions-in-routing-policy-terms.html"">Configuring Match Conditions in Routing Policy Terms</a>"" document from Juniper.</p>

<p>First I thought about combining a <code>prefix-list-filter</code> to only match routes from the customers prefix-list and a <code>route-filter</code> to limit  the accepted prefixes to /32, like so:</p>

<pre><code>from {
    as-path customer;
    community blackhole;
    prefix-list-filter customer-prefixes orlonger;
    route-filter 0.0.0.0/0 prefix-length-range /32-/32;
}
</code></pre>

<p>But then I stumbled about this information in the document:</p>

<blockquote>
  <p>If you configure a policy that includes some combination of route filters, prefix lists, and source address filters, they are evaluated according to a logical OR operation or a longest-route match lookup.</p>
</blockquote>

<p>As I understand this (and I find it a bit unclear), if I use <code>prefix-list-filter</code>, <code>route-filter</code> and/or <code>source-address-filter</code> in the same term it would be evaluated with a longest-match OR between all of them, which makes this approach <strong>unusable</strong>.</p>

<p>What I came up with is this the following filter. The <code>hostroutes-only</code> term diverts all prefixes shorter than /32 to the next policy. After that the <code>prefixes</code> term matches if the /32 is in the range of the customer, matches his as-path and has the blackhole community set:</p>

<pre><code>term hostroutes-only {
    from {
        route-filter 0.0.0.0/0 prefix-length-range /0-/31;
    }
    then next policy;
}
term prefixes {
    from {
        as-path customer;
        community blackhole;
        prefix-list-filter customer-prefixes orlonger;
    }
    then {
        next-hop 192.0.2.1;
        accept;
    }
}
</code></pre>

<p>So, is this the most elegant way to handle this? Any other solutions?</p>
","<p>There is no reason to limit customer to blackhole only /32, allow them to blackhole anything from them.</p>

<p>Something like this:</p>

<pre><code>policy-statement AS42-IN {
    term blackhole {
        from {
            community BLACKHOLE;
            prefix-list-filter AS42 orlonger;
        }
        then {
            community add NO-EXPORT;
            next-hop 192.0.2.1;
            accept;
        }
    }
    term advertise {
        from {
            prefix-list AS42;
        }
        then {
            community add ADVERTISE;
            next-hop peer-address;
            accept;
        }
    }
    term reject {
        then reject;
    }
}
</code></pre>

<p>Remember to set 'accept-remote-nexthop' under BGP settings, so that the next-hop can be changed to something else than link address.  </p>

<p>I also strongly support that providers start to support different blackhole communities than just 'full blackhole'. Especially if you operate in more than one country usually attack is from transit and often customer actually mostly wants to access domestic peerings, so it's useful to implement several levels of blackhhole:</p>

<ol>
<li>Full</li>
<li>Outside local country (local IXP, whole own AS + customers seen)</li>
<li>Outside local area (if applicable, like for me it could be 'Nordics')</li>
<li>Include/Exclude specific peering router in blackhole</li>
</ol>

<p>I'm happy to give example how to implement something like this with JNPR DCU/SCU, provided your peering routers are JNPR, but it's possible with just communities, just bit more awkward.</p>

<hr>

<p>If you absolutely want to limit your customer's options you can add this:</p>

<pre><code>policy-statement /32 {
    term /32 {
        from {
            route-filter 0.0.0.0/0 prefix-length-range /32-/32;
        }
        then accept;
    }
    term reject {
        then reject;
    }
}

policy-statement AS42-IN {
    term blackhole {
        from {
            community BLACKHOLE;
            policy /32;
            prefix-list-filter AS42 orlonger;
        }
..
}
</code></pre>

<p>This way it should be logical AND. But I really don't see the value in creating complexity to reduce expressiveness of configuration.</p>
","1826"
"What is Null 0 interface?","7875","","<p>In which case is </p>

<pre><code>ip route 10.1.0.0 255.255.255.0 null0 used?
</code></pre>

<p>Thanks in advance.</p>

<hr>

<p>This question is a repost of the <a href=""https://learningnetwork.cisco.com/thread/62096"" rel=""nofollow"">same question</a> in <a href=""https://learningnetwork.cisco.com/"" rel=""nofollow"">The Cisco Learning Network</a>; however, the answers are unique to Stack Exchange.</p>
","<p><code>Null 0</code> is a virtual interface that’s used to guarantee routes make it into the RIB; remember, routes <strong>must</strong> have a next-hop in order to make it into the RIB.  When a packet arrives at a device that has a route to <code>Null 0</code> and nowhere else, it will discard it similar to how an ACL would.  Think of this as the virtual interface where packets go to die efficiently. </p>

<p>Most routing protocols, such as EIGRP, <a href=""http://www.cisco.com/c/en/us/td/docs/ios/12_2/ip/configuration/guide/fipr_c/1cfeigrp.html#wp1001069"">automatically generate a Null 0 route when summarizing addresses</a>.</p>
","7463"
"How to repair a break in a long Cat-5e cable run","7827","","<p>I have a long run of Cat5e which is broken at about 20' from one end. Replacing the entire cable isn't an option, as it's fairly long and is going through walls and such. </p>

<p>Searching this on google produced nothing but silly results, one of which recommended a splice box, but I'm concerned about signal attenuation, as well as the voltage from the POE.</p>

<p>My thoughts were to re-run a cable from the shorter end (again, about 20') and terminate the ends. </p>

<p>Is there a best practice for how they should connect?  Should they be terminated as male ends and connected using a female-to-female coupler? or as female ends and connected using a short patch cable?</p>
","<p><em>Anything</em> you choose to do will increase attenuation and potentially shorten the distance you can run PoE.</p>

<p>There is no best practice answer to this as the best practice is to re-run the cable.  Since you can't (or aren't willing to do this) then I would do one of two things, although I would still highly recommend running a new cable (you can use the old cable to pull the new cable through walls, etc).</p>

<ol>
<li>Use a quality mechanical splice solution maintaining the characteristics of the cable as much as possible (i.e. don't untwist or remove more jacket than needed).  This may include the splice box you found or may simply be the use of IDC splice connectors (although these are more of a voice solution).</li>
<li>Run a 20-30' cable to the break.  Terminate one side to a surface mount jack and the other to a male end. This still increases the terminations by two but will eliminate the coupler.</li>
</ol>

<p>No matter what you choose to do, after you are done make sure you re-certify the cable with a tester to make sure it meets your standard (Cat5E from your post).</p>
","8167"
"Can adding VLANs to a VPC be done hot?","7819","","<p>In this scenario, we have a VPC '17', consisting of two single port port-channels 'po17'.  There are 2 x N5K's (5548s) - so po17 from both sides combine to create the VPC.</p>

<p>The downstream devices are blade switches (Cisco 3020s).  We want to add a new VLAN to one side, then the other without loss of connectivity for the VMs behind the 3020s.  Downstream can handle this because if one side fails, the other side picks back up.</p>

<p>I know if one of the Port-Channels in the VPC goes down we still stay up, but since we're adding a new VLAN to one of the VPC member Port-Channel, the VPC will loose consistency and I didn't know if that would cause a problem.</p>
","<p>While it is certainly a good idea that a VPC has the same allowed VLAN list on all sides, it is not a requirement. Take a look at the output of ""show vpc consistency-parameters global"". </p>

<pre><code>switch# show vpc consistency-parameters global 
Legend:
        Type 1 : vPC will be suspended in case of mismatch
Name                        Type  Local Value            Peer Value             
-------------               ----  ---------------------- -----------------------
QoS                         2     ([], [3], [], [], [],  ([], [3], [], [], [], 
                                  [])                    [])                   
Network QoS (MTU)           2     (1538, 2240, 0, 0, 0,  (1538, 2240, 0, 0, 0, 
                                  0)                     0)                    
Network Qos (Pause)         2     (T, F, F, F, F, F)     (T, F, F, F, F, F)    
Input Queuing (Bandwidth)   2     (50, 50, 0, 0, 0, 0)   (50, 50, 0, 0, 0, 0)  
Input Queuing (Absolute     2     (F, F, F, F, F, F)     (F, F, F, F, F, F)    
Priority)                                                                      
Output Queuing (Bandwidth)  2     (50, 50, 0, 0, 0, 0)   (50, 50, 0, 0, 0, 0)  
Output Queuing (Absolute    2     (F, F, F, F, F, F)     (F, F, F, F, F, F)    
Priority)                                                                      
STP Mode                    1     MST                    MST                   
STP Disabled                1     None                   None                  
STP MST Region Name         1     """"                     """"                    
STP MST Region Revision     1     0                      0                     
STP MST Region Instance to  1                                                  
 VLAN Mapping                                                                  
STP Loopguard               1     Disabled               Disabled              
STP Bridge Assurance        1     Enabled                Enabled               
STP Port Type, Edge         1     Normal, Enabled,       Normal, Enabled,      
BPDUFilter, Edge BPDUGuard        Disabled               Disabled              
STP MST Simulate PVST       1     Enabled                Enabled               
Allowed VLANs               -     1,10,100-101,200-201   1,10,100-101,200-201,2
                                                         000                   
Local suspended VLANs       -     -                      -     
</code></pre>

<p>Type 1 parameters absolutely MUST match, else the vPC will be suspended. ""Allowed VLANs"" is neither a Type 1 or Type 2 parameter.</p>

<p>You should be able to modify the allowed VLAN list without problems, but obviously try to keep things consistent regardless, otherwise you'll still have issues, even though the vPC doesn't get suspended.</p>

<p>EDIT: You probably already know this but just to be sure - include the peer-link in your VLAN changes, as the VLAN (not the entire vPC) will show up as ""suspended"" on all vPCs until you do. </p>
","1952"
"What's the difference between RADIUS and 802.1X Port-Based Authentication?","7815","","<p>As long as I know RADIUS is a type of authentication protocol, where for example if someone wants to use a switch, it first of all needs to enter his/her credentials, and properly authenticate himself/herself to the RADIUS server in order to gain access to the switch. And it provides capabilities such as authentication, authorization, and accounting. </p>

<p>But, what exactly is 802.1X Port-Based Authentication? Doesn't it also use RADIUS as it's underlying authentication mechanism? What are their differences? And if we can somehow compare them, which one is more secure?</p>
","<p>That's a lot of questions, so let's take them one by one.</p>

<h3>What exactly is 802.1X Port-Based Authentication?</h3>

<p>From <a href=""https://en.wikipedia.org/wiki/IEEE_802.1X"" rel=""nofollow"">Wikipedia</a> :</p>

<blockquote>
  <p>IEEE 802.1X is an IEEE Standard for port-based Network Access Control
  (PNAC). It is part of the IEEE 802.1 group of networking protocols. It
  provides an authentication mechanism to devices wishing to attach to a
  LAN or WLAN.</p>
</blockquote>

<p>In other words, it is a mechanism used in (mostly) switches and wireless access-points to allow or block devices to access the <em>network</em> (or granularly allow access to parts of it).</p>

<p>For example if you have a network port in a meeting room, you can enable 802.1x on the switchport and configure it in such a way that when an employee connects she has access to the entire network but if a guest connects (with a temporary password) he can only reach the Internet and if a passer-by is tempted to try his luck, he cannot access anything at all.</p>

<h3>Doesn't it also use RADIUS as it's underlying authentication mechanism?</h3>

<p>Yes and no. 802.1x uses <a href=""https://en.wikipedia.org/wiki/Extensible_Authentication_Protocol"" rel=""nofollow"">Extensible Authentication Protocol (EAP)</a>, and the wikipedia article about 802.1x has <a href=""https://en.wikipedia.org/wiki/File:802.1X_wired_protocols.png"" rel=""nofollow"">this nice drawing</a> that shows that for <em>wired</em> 802.1x:</p>

<ul>
<li>EAP over LAN (EAPoL) is used between the Supplicant (software on your laptop) and the Authenticator (switch)</li>
<li>EAP is then usually tunnelled over Radius between the Authenticator and the Authentication Server, but it can also be done over <a href=""https://en.wikipedia.org/wiki/Diameter_(protocol)"" rel=""nofollow"">Diameter</a> (the successor to Radius)</li>
</ul>

<p>For <em>wireless</em> it is similar in the sense that there is also no Radius between the supplicant and the authenticator, only between the authenticator and the auth server (to tunnel the EAP).</p>

<p>Now the <em>Extensible</em> in EAP's name is very true, there are dozens of EAP protocols that you can choose from, some will use passwords, others certificates or both, etc. etc.</p>

<h3>What are their differences?</h3>

<p>Well, it's a bit like comparing apples and oranges.
Dot1x is not really a protocol but more a framework in which protocols like EAPoL and Radius are used.</p>

<p>Simplified (maybe over-simplified?) you could say:</p>

<ul>
<li>Radius is typically used as a 'simple' authentication method to control who can login to a router (or other device), or who can connect using a VPN client. Sometimes also for authorization, e.g. to determine the privilege-level when you log in to a router, or to push a dynamic access-list for a vpn user.</li>
<li>Dot1x is typically used to control access to switchports and wifi.</li>
</ul>

<h3>And if we can somehow compare them, which one is more secure?</h3>

<p>I don't believe (but anyone please correct me) that there are scenarios where you can choose between one or the other. It may make miore sense to compare Radius and EAP, to some extent.</p>

<p>Some things to consider:</p>

<ul>
<li>EAP is end-to-end while Radius is only used between the Authenticator and the Authentication Server and so you need to make sure that the part between the client and the Authenticator is also secured; e.g. use SSH instead of telnet to log in to your router.</li>
<li>similarly some (but not all) EAP methods can be used for <em>mutual</em> authentication (between the supplicant and the authentication server!), in the Radius case it depends again on what protocol is used between client and authenticator.</li>
<li>EAP is as secure as the EAP method you select (e.g. LEAP or EAP-MD5 are weak)</li>
</ul>
","35763"
"How is the OSPF Opaque LSA Option used?","7800","","<p>What is the OSPF Opaque LSA Option, exactly? In what case scenarios would someone use that? I just skimmed <a href=""http://tools.ietf.org/html/rfc5250"" rel=""nofollow"">RFC 5250</a> and <a href=""http://tools.ietf.org/html/rfc2370"" rel=""nofollow"">RFC 2370</a> but could not get the real world usage and how to set up.</p>
","<p>Opaque LSA's are used to extend the capabilities of OSPF, and to allow for transmission of arbitrary data that OSPF does not necessarily need to care about. For example, if you were writing an application and you decided you wanted to use OSPF to transport the application's data but you did not want OSPF to use this data for its own purposes, ie route calculations.</p>

<p>There are three types of Opaque LSA's (in context of the subtype of the Opaque LSA, similar to other LSA types), which determine the scope of flooding of those LSA's:</p>

<ul>
<li><strong>Type 9</strong> - link-local scope</li>
<li><strong>Type 10</strong> - area-local scope</li>
<li><strong>Type 11</strong> - AS scope</li>
</ul>

<p>The Opaque LSA has 32 bits allocated for the Opaque Type (8 bits) and the Opaque ID (24 bits). There are (AFAIK) currently four Opaque types that have been allocated by the IANA:</p>

<ol>
<li>Traffic Engineering LSA - used for MPLS-TE</li>
<li>Sycamore Optical Topology Descriptions - likely proprietary. I wasn't able to find much info on this, other than the fact that John Moy works for Sycamore.</li>
<li>Grace LSA - used for OSPF graceful restart</li>
<li><a href=""http://tools.ietf.org/rfc/rfc4970.txt"">Router Information LSA</a> - Intended (but not yet implemented AFAIK) to supplement the options field to allow for communication of optional capabilities between neighbors. Currently the options field is only 8 bits and there is only a single bit that can be used that just determines if a neighbor supports Opaque LSA's. This RI LSA would provide TLV values to signal support of up to 32 different capabilities between neighbors without needing to add more bits to the options field in the LSA.</li>
</ol>

<p>In regards to practical application of the Opaque LSA, likely the most common implementation you'll see of this in the wild is in MPLS traffic engineering. In OSPF extensions for MPLS traffic engineering, Opaque LSA's are used to communicate traffic engineering interface parameters (such as maximum bandwidth, maximum reservable bandwidth, unreserved bandwidth, etc) throughout an area in order to populate the traffic engineering databases of the routers within the area.</p>

<p>As for ""how to use it"" - you shouldn't have to, unless you're writing code that you would need to use it. In terms of practical application on a routing platform, on platforms I have experience with, there's not a specific knob you need to turn that ""enables"" Opaque LSAs. These should be implicitly enabled if you implement something that has dependencies on them, such as MPLS.</p>
","7744"
"traceroute many hops with the same ip","7777","","<p>I'm a software developer that sometimes has to do some easy network  tasks but knows almost nothing about it.</p>

<p>I'm having some problems with a vps I rent ( ENJOY VPS: Unmanaged VPS - Medium VPS) and they insist that their server is running ok, but I keep having this problem, My server keeps getting down everyday, It's less than 15 minutes, but it's everyday (sometime twice a day) and I think that's not acceptable.</p>

<p>Well. here is my traceroute:</p>

<p>My question is almost all the hops goes to the same ip, that is my provider ip (but not my server ip) ¿is that ok?  I config my own DNS server (bind9) might that be the problem?
When my server is down  ping doesn't respond either and I can't access either via ENJOY VPS console.  (it doesn't let me stop or restart the server) (so, basically I can do nothing)</p>

<pre>

traceroute to 74.117.153.110 (..HIDDEN..), 64 hops max, 52 byte packets
 1  dsldevice (192.168.1.254)  1.759 ms  1.281 ms  1.627 ms
 2  dsl-servicio-l200.uninet.net.mx (200.38.193.226)  18.611 ms  17.414 ms  26.365 ms
 3  bb-dallas-stemmons-5-pos0-14-0-0.uninet.net.mx (201.125.50.122)  60.559 ms  63.272 ms  72.120 ms
 4  xe-0-3-0-1.r01.dllstx04.us.bb.gin.ntt.net (157.238.225.45)  81.813 ms  81.872 ms  80.888 ms
 5  ae-9.r07.dllstx09.us.bb.gin.ntt.net (129.250.2.208)  83.735 ms  84.919 ms  89.175 ms
 6  xe-0-0-0-15.r07.dllstx09.us.ce.gin.ntt.net (129.250.195.118)  80.686 ms  81.170 ms  84.883 ms
 7  cust-108-60-193-226.corexchange.com (108.60.193.226)  94.542 ms  86.652 ms  85.616 ms
 8  74.117.154.4 (74.117.154.4)  82.222 ms  81.909 ms  80.970 ms
 9  74.117.154.1 (74.117.154.1)  83.212 ms  83.725 ms  81.852 ms
10  74.117.154.4 (74.117.154.4)  97.692 ms  81.136 ms *
11  74.117.154.1 (74.117.154.1)  83.025 ms  82.698 ms  88.137 ms
12  * * *
13  74.117.154.1 (74.117.154.1)  82.197 ms  83.792 ms  83.093 ms
14  * * *
15  74.117.154.1 (74.117.154.1)  83.534 ms  130.318 ms  83.675 ms
16  * * *
17  74.117.154.1 (74.117.154.1)  84.012 ms  84.844 ms  102.515 ms
18  * * *
19  74.117.154.1 (74.117.154.1)  83.032 ms  94.277 ms  86.625 ms
20  * * *
21  74.117.154.1 (74.117.154.1)  240.106 ms  119.049 ms  82.273 ms
22  * * *
23  74.117.154.1 (74.117.154.1)  84.167 ms  82.956 ms  84.310 ms
24  * * *
25  74.117.154.1 (74.117.154.1)  83.955 ms  83.636 ms  83.214 ms
26  * * 74.117.154.4 (74.117.154.4)  83.097 ms
27  74.117.154.1 (74.117.154.1)  83.860 ms  111.847 ms  86.387 ms
28  * * *
29  74.117.154.1 (74.117.154.1)  83.518 ms  83.944 ms  86.903 ms
30  * * *
31  74.117.154.1 (74.117.154.1)  271.557 ms  83.194 ms  103.277 ms
32  * * *
33  74.117.154.1 (74.117.154.1)  85.195 ms  83.311 ms  83.589 ms
34  * * *
35  74.117.154.1 (74.117.154.1)  87.368 ms  100.705 ms  84.437 ms
36  * * *
37  74.117.154.1 (74.117.154.1)  91.463 ms  120.895 ms  84.287 ms
38  74.117.154.4 (74.117.154.4)  82.238 ms *  82.750 ms
39  74.117.154.1 (74.117.154.1)  83.506 ms  83.911 ms  83.995 ms
40  * * *
41  74.117.154.1 (74.117.154.1)  84.081 ms  85.222 ms  84.120 ms
42  * * *
43  74.117.154.1 (74.117.154.1)  84.200 ms  84.603 ms  98.450 ms
44  * * *
45  74.117.154.1 (74.117.154.1)  85.244 ms  84.741 ms  103.672 ms
46  * * *
47  74.117.154.1 (74.117.154.1)  83.717 ms  84.648 ms  87.149 ms
48  * * *
49  74.117.154.1 (74.117.154.1)  88.051 ms  86.047 ms  84.800 ms
50  * * *
51  74.117.154.1 (74.117.154.1)  201.409 ms  170.421 ms  146.111 ms
52  * * *
53  74.117.154.1 (74.117.154.1)  84.987 ms  84.247 ms  87.167 ms
54  * * *
55  74.117.154.1 (74.117.154.1)  111.967 ms  133.665 ms  88.217 ms
56  74.117.154.4 (74.117.154.4)  109.692 ms *  83.531 ms
57  74.117.154.1 (74.117.154.1)  85.115 ms  86.417 ms  85.426 ms
58  * * *
59  74.117.154.1 (74.117.154.1)  84.038 ms  85.114 ms  122.035 ms
60  * * *
61  74.117.154.1 (74.117.154.1)  125.063 ms  84.423 ms  84.824 ms
62  74.117.154.4 (74.117.154.4)  82.987 ms *  133.977 ms
63  74.117.154.1 (74.117.154.1)  159.238 ms  163.869 ms  164.372 ms
64  * * *
</pre>
","<p>That is a routing loop. The router with IP address 74.117.154.1 keeps sending your packets to another router (74.117.154.4), which keeps sending them back to 74.117.154.1. They keep doing this until the TTL of the packet reaches zero, and the packet is discarded.</p>

<p>This cannot be caused by your bind9 setup, something is wrong with the configuration of the routers.</p>

<p>You should contact the people running that network. If you are sure that is in the VPS provider's network, contact them. You can also do an IP whois lookup to see to whom the IP address is assigned.</p>
","7137"
"Error: `EIGRP is restricted to stub configurations only on this platform`","7771","","<p>We just bought some new Cat4507R+E distribution switches.  When we bought the switches, we asked for an Advanced Services K9 image, but our reseller told us they only come with a Universal K9 image.  I didn't know better, so I said OK.</p>

<p>However, when I tried to bring the switches online in production, I had a problem with a huge number of unreachable subnets.   After sweating it for a very long fifteen minutes (while my boss insulted me for not testing the switch), I finally tracked the problem down to <code>eigrp stub connected</code> in the EIGRP process.</p>

<p>I tried remove the ""eigrp stub"" statement but I couldn't. When I tried, the switch errors out with <code>EIGRP is restricted to stub configurations only on this platform</code>.  </p>

<p>I had to roll back to our original distributions and my boss got even hotter about it.</p>

<p>My google searches blame this problem on the ip base license, which only supports EIGRP stub routing.   Our reseller says it will take at least 24 hours and thousands of dollars to get the Advanced Services K9 upgrade.  We didn't budget for the extra expense and we have other business units waiting on the upgrade.  Oh yeah, and my boss isn't happy.</p>

<p>Before we borrow money from another department, is there anything else we can do to get this working now?</p>
","<p>I really don't like how Cisco crippled EIGRP in the ipbase image... at a minimum, you should get some kind of warning that your configuration won't work, but they haven't done that either.</p>

<p>As you discovered, <code>eigrp stub</code> prevents EIGRP from advertising downstream routes from the switches connected to your distribution.</p>

<p>You can trick EIGRP into advertising routes it learned from other rotuers (even as a <code>stub</code> router) by using a <a href=""http://www.cisco.com/en/US/docs/ios/iproute_eigrp/command/reference/ire_a1.html#wp1065119"">stub leak-map</a>...</p>

<pre><code>ip prefix-list p~MATCH_ANY seq 5 permit 0.0.0.0/0 le 32
!
route-map r~MATCH_ANY permit 10
 match ip address prefix-list p~MATCH_ANY
!
router eigrp 100
 no auto-summary
 network 172.16.0.0
 eigrp log-neighbor-warnings
 eigrp log-neighbor-changes
 eigrp stub connected summary static redistributed leak-map r~MATCH_ANY
</code></pre>

<p>Technically, you can get away with using <code>eigrp stub leak-map</code> indefinitely, without upgrading your ipbase image.</p>
","3085"
"Static Nat Source and Destination on Router","7767","","<p>I have been working for the past 3 days to no avail. I have goggled and searched for all matter of solutions but still no success.</p>

<p>My task is to find a way to map an address to another. But, the network it is going in to does not have a default gateway. (Vlan1) (I cannot configure the default gateway on these devices.)</p>

<p>The scenario is that this device is about to be used for VPN site to site access. When the other site is connected it will connect using the ip address we map to it (10.1.1.21). For now its only one server that needs to access. But, in the future it might be two or more.</p>

<p>An idea of how a ping to 10.1.1.21 would work after finished.</p>

<p>Source: <strong>-RangeOfIPs-</strong> (Lets say 11.22.33.44)<br>
Destination: <strong>10.1.1.21</strong><br>
<strong>=></strong> ROUTER NAT <strong>=></strong><br>
Source: <strong>192.168.0.21</strong>
Destination: <strong>192.168.0.114</strong> (Internal Server)</p>

<p>On the return the following would happen:</p>

<p>Source: <strong>192.168.0.114</strong> (Internal Server)<br>
Destination: <strong>192.168.0.21</strong><br>
<strong>=></strong> ROUTER NAT <strong>=></strong><br>
Source: <strong>10.1.1.21</strong><br>
Destination: <strong>-RangeOfIPs-</strong> (11.22.33.44)</p>

<p>The Router in use is currently a <strong>Cisco 881</strong> and has one WAN port and 4 Switch Ports<br>
The WAN port is connected to the other networks and one of the switch ports is connected to our local network switch.</p>

<p>The roll of Loopback 0 is to create a network that the other side of the VPN site to site will use. They connect to the router via VPN which is to its public IP (1.1.1.36), then, they would connect to the server via 10.1.1.21 to access that resource. That way, we dont need default routes and at the same time control which server they have access too via VPN.</p>

<p>I plan on making the VPN after this is complete and ready, and i am going to use ACLs to prevent the VPN from accessing the 192 network. At least, to my knowledge should be possible.</p>

<p>Here is the configuration that i have to start with.</p>

<pre><code>!
interface Loopback0
 ip address 10.1.1.1 255.255.255.0
!
interface FastEthernet4
 ip address 1.1.1.36 255.255.255.240
 duplex auto
 speed auto
!
interface FastEthernet0
 switchport mode access
!
interface FastEthernet1
 switchport mode access
!
interface FastEthernet2
 switchport mode access
!
interface FastEthernet3
 switchport mode access
!
interface Vlan1
 ip address 192.168.0.1 255.255.255.0
!
ip classless
ip route 0.0.0.0 0.0.0.0 1.1.1.33 
!
</code></pre>

<p>Example Network Topology:
<img src=""https://i.stack.imgur.com/xwwog.png"" alt=""enter image description here"">
<strong>Key:</strong><br>
<strong>Grey:</strong> Internal Network<br>
<strong>Orange:</strong> VPN Site to Site (I'll work on this later, I know how to do this part)<br>
<strong>Dark Blue:</strong> Public Network<br>
<strong>1.1.1.X:</strong> Represent real public IP addresses.  </p>

<p><strong>The right most server</strong>:<br>
External IP: <strong>1.1.1.21</strong> / Gateway: <strong>1.1.1.18</strong><br>
Internal IP: <strong>192.168.0.114</strong> / Gateway: <strong>None</strong></p>
","<p>To test your scenario I set up the following lab:</p>

<p><img src=""https://i.stack.imgur.com/Xldkf.png"" alt=""NAT topology""></p>

<p>The 10.0.0.0/24 network is your <code>-RangeOfIPs-</code></p>

<p>When traffic comes from <code>10.0.0.0/24</code> it will be NATed to <code>192.168.0.21</code>.
Traffic sourcing from <code>192.168.0.114</code> will be NATed to <code>10.1.1.21</code>.</p>

<p>Configuration:</p>

<pre><code>R3(config)#int f0/0
R3(config-if)#ip nat outside
R3(config-if)#int f0/1
R3(config-if)#ip nat inside
</code></pre>

<p>The above commands define the interfaces as <code>outside</code> and <code>inside</code>.</p>

<pre><code>R3(config)#ip nat inside source static 192.168.0.114 10.1.1.21
</code></pre>

<p>This command translates the <code>inside local</code> address of <code>192.168.0.114</code> to an <code>inside global</code> address of <code>10.1.1.21</code>.</p>

<pre><code>R3(config)#access-list 1 permit 10.0.0.0 0.0.0.255
</code></pre>

<p>This access-list will define which hosts on the <code>outside</code> that will get NATed.</p>

<pre><code>R3(config)#ip nat pool NAT_POOL 192.168.0.21 192.168.0.21 netmask 255.255.255.0
</code></pre>

<p>We create a NAT pool consisting of a single address.</p>

<pre><code>R3(config)#ip nat outside source list 1 pool NAT_POOL add-route 
</code></pre>

<p>Then we configure so that hosts matching <code>access-list 1</code> will get NATed to <code>192.168.0.21</code>.</p>

<p>It is important to configure add-route here or to add a static route because when doing <code>inside to outside</code> NAT, NAT takes place before routing in the order of operations. That means that R3 must have a route for 10.1.1.21.</p>

<p>R3 now has the following NAT table:</p>

<pre><code>R3#show ip nat translations 
Pro Inside global      Inside local       Outside local      Outside global
--- ---                ---                192.168.0.21       10.0.0.1
--- 10.1.1.21          192.168.0.114      ---                ---
</code></pre>

<p>Note that R4 has configured with an IP and <code>ip routing</code> turned off to emulate a host. Debugging of ICMP on R1 is enabled and debugging of ip nat on R3 is also enabled.</p>

<pre><code>R1#debug ip icmp
ICMP packet debugging is on

R3#debug ip nat 
IP NAT debugging is on
</code></pre>

<p>A ping is then issued from R1:</p>

<pre><code>R1#ping 10.1.1.21 so f0/1

Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 10.1.1.21, timeout is 2 seconds:
Packet sent with a source address of 10.0.0.1 
!!!!!
Success rate is 100 percent (5/5), round-trip min/avg/max = 80/86/104 ms
R1#
ICMP: echo reply rcvd, src 10.1.1.21, dst 10.0.0.1
ICMP: echo reply rcvd, src 10.1.1.21, dst 10.0.0.1
ICMP: echo reply rcvd, src 10.1.1.21, dst 10.0.0.1
ICMP: echo reply rcvd, src 10.1.1.21, dst 10.0.0.1
ICMP: echo reply rcvd, src 10.1.1.21, dst 10.0.0.1
</code></pre>

<p>Debug and NAT table from R3:</p>

<pre><code>NAT*: s=10.0.0.1-&gt;192.168.0.21, d=10.1.1.21 [15]
NAT*: s=192.168.0.21, d=10.1.1.21-&gt;192.168.0.114 [15
NAT: s=192.168.0.114-&gt;10.1.1.21, d=192.168.0.21 [15]
NAT: s=10.1.1.21, d=192.168.0.21-&gt;10.0.0.1 [15]

R3#show ip nat translations
Pro Inside global      Inside local       Outside local      Outside global
--- ---                ---                192.168.0.21       10.0.0.1
icmp 10.1.1.21:3       192.168.0.114:3    192.168.0.21:3     10.0.0.1:3
--- 10.1.1.21          192.168.0.114      ---                ---
</code></pre>

<p>I think that this is the kind of configuration you are looking for. </p>

<p>However, note that there is a caveat because there is no <code>overload (PAT)</code> available for <code>outside to inside</code> translation. That means that as soon as one of your hosts communicate with <code>192.168.0.114</code>, there will be no free IP's in the pool. What you can do is to increase the <code>pool size</code> so that you reserve maybe 10 IP's that are only used for <code>NAT</code>.</p>
","10430"
"Cisco BGP - see communities on advertised-routes?","7762","","<p>We have an outbound route-map on an eBGP peer that adds some communities to certain prefixes. Is there any way to prove that this is actually happening from the sender side in classic IOS?</p>

<p><code>show ip bgp neighbor x.x.x.x advertised-routes</code> does not show them</p>

<p>Even <code>debug ip bgp update out</code> doesn't seem to!</p>

<p>In gns3 I can make the same config and see that it works from my fake upstream side, but I need to be able to verify in the production router from the local side...</p>
","<p>Last time I checked/tried to do this, it wasn't possible in IOS. I'm not sure about NX-OS or IOS-XE/XR though. It doesn't help you, but this is possible to do on Juniper gear.</p>

<p>Regarding your configuration - make sure you're using the <code>additive</code> keyword in your route-maps to set the communities, otherwise you will not be adding communities to the list, but rather replacing any existing communities with the one you're setting in your route-maps.</p>
","5434"
"STP Packet on specific interface eth1","7736","","<p>I have an issue related to some stp packet that being sent every 1 or 2 second on my server interface eth1.
This interface is connected to my stack switch, and the port is in a public vlan.
Here is the output I have from the server:</p>

<pre><code>server-1:
user@server-1:~$ sudo tcpdump -vvv -p -n -i eth1 stp
tcpdump: listening on eth1, link-type EN10MB (Ethernet), capture size 65535 bytes

15:44:10.772423 STP 802.1d, Config, Flags [none], bridge-id  8000.MAC.8687, length 43
        message-age 0.00s, max-age 20.00s, hello-time 2.00s, forwarding-delay 15.00s
        root-id 8000.MAC, root-pathcost 0
15:44:12.768245 STP 802.1d, Config, Flags [none], bridge-id 8000.MAC8.8687, length 43
        message-age 0.00s, max-age 20.00s, hello-time 2.00s, forwarding-delay 15.00s
        root-id 8000.MAC, root-pathcost 0
15:44:14.766513 STP 802.1d, Config, Flags [none], bridge-id 8000.MAC.8687, length 43
        message-age 0.00s, max-age 20.00s, hello-time 2.00s, forwarding-delay 15.00s
        root-id 8000.MAC, root-pathcost 0
15:44:16.766478 STP 802.1d, Config, Flags [none], bridge-id 8000.MAC.8687, length 43
        message-age 0.00s, max-age 20.00s, hello-time 2.00s, forwarding-delay 15.00s
        root-id 8000.MAC, root-pathcost 0
15:44:18.767851 STP 802.1d, Config, Flags [none], bridge-id 8000.MAC.8687, length 43
        message-age 0.00s, max-age 20.00s, hello-time 2.00s, forwarding-delay 15.00s
        root-id 8000.MAC, root-pathcost 0
---------------------------------------------------------------------
</code></pre>

<p>Do anyone know what is the issue here!? I did a research over the Internet but all queries on this topic is never ended or there is no answer.</p>

<p>Any help is welcome.</p>

<p>Thank you for your time.</p>
","<p>This are just spanning tree packets from your switch. Disable spanning tree on your switch on the interface towards your server if you don't need it and don't want to see these packets. </p>
","3831"
"How do I read optical transmit power via SNMP on Cisco ASR9k?","7731","","<p>I am looking to read optical transmit and recieve power of XFPs in our ASR9k. The MIB used should be ""CISCO-ENTITY-SENSOR-MIB"" which is <a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?local=en&amp;translate=Translate&amp;objectInput=1.3.6.1.4.1.9.9.91"">1.3.6.1.4.1.9.9.91</a> and occording the ASR9000 documentation, this is available on ASR9k's:
<a href=""http://www.cisco.com/en/US/docs/routers/asr9000/mib/guide/asr9kmib3.html#wp2293135"">http://www.cisco.com/en/US/docs/routers/asr9000/mib/guide/asr9kmib3.html#wp2293135</a>
If you scroll up, you will see that the MIB is in the supported list.</p>

<p>So, my question: am I missing something and should this information be available to SNMP, or is the Cisco documentation wrong here?
And if it is available, how can I get to this information?</p>

<p>However show snmp mib object-name | i 1.3.6.1.4.1.9.9.91 gives me nothing
neither does show snmp mib object-name | i Sensor</p>

<blockquote>
  <p>RP/0/RSP0/CPU0:router#show snmp mib object-name | i 1.3.6.1.4.1.9.9.91
  Thu May 16 09:08:01.679 CET 
  RP/0/RSP0/CPU0:router#show snmp mib
  object-name | i [sS]ensor Thu May 16 09:08:19.017 CET</p>
</blockquote>

<p>The version:</p>

<blockquote>
  <p>RP/0/RSP0/CPU0:router#show version Thu May 16 09:07:14.437 CET</p>
  
  <p>Cisco IOS XR Software, Version 4.2.3[Default] Copyright (c) 2012 by
  Cisco Systems, Inc.</p>
  
  <p>ROM: System Bootstrap, Version 1.06(20120210:003513) [ASR9K ROMMON],</p>
  
  <p>cn-asd-kl-cr15 uptime is 23 weeks, 3 days, 1 hour, 12 minutes System
  image file is
  ""bootflash:disk0/asr9k-os-mbi-4.2.3/0x100000/mbiasr9k-rp.vm""</p>
  
  <p>cisco ASR9K Series (MPC8641D) processor with 4194304K bytes of memory.
  MPC8641D processor at 1333MHz, Revision 2.2 ASR 9006 AC Chassis with
  PEM Version 2</p>
</blockquote>

<p>And the XFP I am trying to read:</p>

<blockquote>
  <p>RP/0/RSP0/CPU0:router#show inventory NAME: ""module 0/0/CPU0"", DESCR:
  ""8-Port 10GE Low Queue Line Card, Requires XFPs"" PID: A9K-8T-L, VID:
  V04, SN: FOC1641N6EH</p>
  
  <p>NAME: ""module mau TenGigE0/0/CPU0/0"", DESCR: ""Multirate 10GBASE-LR and
  OC-192/STM-64 SR-1 XFP, SMF"" PID: XFP-10GLR-OC192SR  , VID: V04 , SN:
  SPC1623090S</p>
</blockquote>

<p>To compare, this is the output from our 7606:</p>

<blockquote>
  <p>7606#show ver Cisco IOS Software, c7600s72033_rp Software
  (c7600s72033_rp-ADVIPSERVICESK9-M), Version 15.1(3)S4, RELEASE
  SOFTWARE (fc2)</p>
  
  <p>7606#show snmp mib | i Sensor entPhySensorType entPhySensorScale
  entPhySensorPrecision entPhySensorValue entPhySensorOperStatus
  entPhySensorUnitsDisplay entPhySensorValueTimeStamp
  entPhySensorValueUpdateRate entSensorType entSensorScale
  entSensorPrecision entSensorValue entSensorStatus
  entSensorValueTimeStamp entSensorValueUpdateRate
  entSensorMeasuredEntity entSensorThresholdSeverity
  entSensorThresholdRelation entSensorThresholdValue
  entSensorThresholdEvaluation entSensorThresholdNotificationEnable</p>
</blockquote>
","<p>Have you tried walking the MIB/OIDs in question from a management station?  After having spent a lot of time w/firmware QA, I've noticed things like show commands are likely to not display correct info, even when the OIDs are poll-able.  I recommend using and knowing Net-SNMP tools and utils as debug before trying to poll the information in cacti, observium, etc.</p>

<p>e.g. <code>snmpwalk -v2c -c &lt;community&gt; &lt;routername&gt; 1.3.6.1.4.1.9.9.91</code> will say ""No Such Object available on this agent at this OID"" if it's not there</p>

<p>Walking 1.3.6.1.4.1.9 on my IOS-XE box gives a lot (I just need to add the MIBs for description). Then I have something to work with (including other gems that might benefit me for monitoring) </p>

<p><code>snmpwalk -v2c -c &lt;community&gt; &lt;routername&gt; 1.3.6.1.4.1.9</code></p>

<p>Check out the MIBs available for 4.2.x on the ASR 9000 @:</p>

<p><a href=""ftp://ftp.cisco.com/pub/mibs/supportlists/asr9000/asr9000-supportlist.html#Supported_and_Verified_MIBs_XE_4_2_X"" rel=""nofollow"">ftp://ftp.cisco.com/pub/mibs/supportlists/asr9000/asr9000-supportlist.html#Supported_and_Verified_MIBs_XE_4_2_X</a></p>

<p>That link says that the CISCO-ENTITY-SENSOR-MIB is available, and hasn't been updated since 2007.  Edit: it appears that the <strong><em>asr9k-mgbl-p.pie</em></strong> package was not available on the router, as mapped in the ASR9000 MIB list above.</p>

<p><strong>Supplemental info:</strong></p>

<p>Cisco's MIB Locator tool is IOS-only, so check out the directories above above the asr9000 on the FTP link for more info.</p>

<p>Tool: <a href=""http://tools.cisco.com/ITDIT/MIBS/MainServlet"" rel=""nofollow"">http://tools.cisco.com/ITDIT/MIBS/MainServlet</a></p>

<p>SNMP ftp dir: <a href=""ftp://ftp.cisco.com/pub/mibs/supportlists/"" rel=""nofollow"">ftp://ftp.cisco.com/pub/mibs/supportlists/</a></p>

<p>For more information on loading MIBs: <a href=""http://www.cisco.com/en/US/tech/tk648/tk362/technologies_tech_note09186a00800b4cee.shtml"" rel=""nofollow"">http://www.cisco.com/en/US/tech/tk648/tk362/technologies_tech_note09186a00800b4cee.shtml</a></p>

<p>A really good Cisco SNMP links page:
<a href=""http://www.cisco.com/en/US/tech/tk648/tk362/tk605/tsd_technology_support_sub-protocol_home.html"" rel=""nofollow"">http://www.cisco.com/en/US/tech/tk648/tk362/tk605/tsd_technology_support_sub-protocol_home.html</a></p>
","443"
"Mitigating a IPv6 malformed packet multicast flood","7713","","<p>So we just had our first IPv6 multicast flood in the network this morning.
We managed to stop the offending computer by blocking the mac address with:
<code>mac-address-table static x.x.x vlan x drop</code></p>

<p>Before we blocked the mac address we started a Wireshark capture so we could analyze the packets later on.</p>

<p>After looking at the packets it seems the packets flooding the network was corrupt IPv6 DHCP requests contacting the IPv6 multicast address 33:33:00:01:00:02.</p>

<p>The impact of the flood was kind of weird, the only thing that seem affected was normal IPv4 DHCP requests, regular clients couldn't get a IP address, but those who already had one before the flooding started experienced no problems...
The CPU's on the switches also peaked to 95-100%, but did not seem to impact normal traffic switching/routing operations.</p>

<p>What we need help to determine is how only 30mbps of IPv6 multicast traffic can push the CPU on a 6509 SUP720 to 100% and make normal IPv4 DHCP to stop working and how to protect ourselves against this should it happen again.</p>

<p>Each access/client port has the following configuration:</p>

<pre><code> switchport access vlan x
 switchport mode access
 switchport nonegotiate
 switchport block multicast
 switchport block unicast
 switchport port-security maximum 2
 switchport port-security
 switchport port-security aging time 2
 switchport port-security violation restrict
 switchport port-security aging type inactivity
 storm-control broadcast level 5.00 4.00
 storm-control multicast level 5.00 4.00
 spanning-tree portfast
 spanning-tree bpduguard enable
</code></pre>

<p>Isn't storm-control multicast applied to IPv6 multicast?</p>

<p>Here is a extract from the Wireshark capture with the <a href=""https://www.dropbox.com/s/f86k957d1ruf3gv/malformed_ipv6_flood.zip"" rel=""nofollow noreferrer"">""evil"" packets on Dropbox</a>.</p>

<p>And a little collection of graphs to illustrate the impact:</p>

<p><a href=""https://i.stack.imgur.com/ROQuB.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ROQuB.png"" alt=""CPU Spike Graph""></a></p>

<p>We also investigated the offending computer and could not find the reason or being able to reproduce the issue...</p>
","<h3>Background</h3>

<p>I am somewhere that blocks Dropbox downloads, so I can't see the captured traffic, but I'll go on the assumption these were 64-byte ethernet multicasts.</p>

<p>Let's do some math to see how much traffic you're permitting...</p>

<p>A 64-byte frame is 672 bits (including 8 bytes for Preamble/SFD, and 12 bytes for IFG)...</p>

<p>8*(8 + 12 + 64) = 672 bits</p>

<p>That means line rate Gigabit Ethernet 64-bytes frames is about 1.488Mpps...</p>

<p>(1000000000 / 672.0) = 1488095.24 pps</p>

<p>What does this mean to you?  Well your current storm-control configuration throttles traffic at 5% of line-rate, so you're allowing 74.4kpps of traffic to hit your switch before storm-control kicks in.  74.4kpps * 64-byte frames is 38Mbps, which is right at what your graphs show: </p>

<p><a href=""http://oi40.tinypic.com/hs2xcm.jpg"" rel=""nofollow noreferrer"">http://oi40.tinypic.com/hs2xcm.jpg</a></p>

<h3>Answer</h3>

<p>So, the bottom line is that you're allowing too much traffic to hit the switch CPU, which is why the CPU utilization was high.  74.4kpps is really too much to allow any switch CPU to process.</p>

<p>Assuming these stations shouldn't be sending a lot of multicast or broadast, the simple answer is to throttle your traffic like this...</p>

<pre><code>   ! Note that broadcast traffic has the ethernet I/G bit set
   ! which means it is also classified technically as a multicast
   ! for storm-control purposes.  Therefore set your broadcast limit
   ! a little lower than your multicast limit
   storm-control broadcast level 0.4 0.3
   storm-control multicast level 0.5 0.3
</code></pre>

<p>Now storm-control kicks in when a port sends 6kpps of broadcast (0.4% 1GE line rate) or 7.5kpps of combined multicast / broadcast (0.5% 1GE line rate).</p>

<p>FYI, it is probably worth looking into <a href=""http://www.cisco.com/web/about/security/intelligence/coppwp_gs.html"" rel=""nofollow noreferrer"" title=""CPP"">Control Plane Policing</a>, which protects the switch CPU against several ports ganging up on it.  Keep in mind that CPP can be complicated to get right, so it's a good idea to test well before you roll it out in your environment.</p>
","5089"
"Can't ping a router's interface which is in a WAN directly connected to my router- (Packet tracer)","7649","","<p>Here s a pic from packet tracer</p>

<p><img src=""https://i.stack.imgur.com/osVDI.png"" alt=""enter image description here""></p>

<p>What I'm trying to do is to ping Router3's Se2/0 interface from PC0.(Or Router2's Se2/0 interface from PC1)</p>

<p>However the ping message gets only as far as the Router2's Ethernet interface 
Shouldn't the ping work since ROUTER3's serial interface is connected to the WAN, which is directly connected to ROUTER2?</p>

<p>Some configuration info</p>

<p>PC0</p>

<p>IP : 195.10.10.2<br>
Default gateway: 195.10.10.1</p>

<p>Router2</p>

<p>Fast Ethernet interface IP: 195.10.10.1<br>
Serial interface IP: 195.10.30.1</p>

<p>Router3</p>

<p>Serial interface IP: 195.10.30.2   </p>

<p>Subnet Masks are all 255.255.255.0 </p>
","<p>First of all that You have route from PC0 to PC1 doesn't mean that You have route from PC1 to PC0. </p>

<p><strong>Thats are Zinin’s 3 routing principles:</strong></p>

<ol>
<li>""Every router makes its decision alone, based on the
information it has in its own routing table.“</li>
<li>""The fact that one router has certain information in
its routing table does not mean that other routers have the same
information.“</li>
<li>""Routing information about a path from one network to
another does not provide routing information about the reverse, or
return path.""</li>
</ol>

<p>That means all routers must have full routing table to all networks - R1 to networks beyond R3 and R3 to all networks beyond R2.</p>

<p>Besides R3 probably don't have any information about networks at the other site of R2. You can check it showing R3 routing table - <code>show ip route</code></p>
","17696"
"How does a switch know where to route packet, when there is another switch in front of the destination?","7642","","<p>I am just wondering how a switch does know how to route packets to destinations ""hidden"" behind another switch.
In my understanding a switch has a table that maps each of its hardware ports to exactly one MAC-address. So far so good, when a packet/frame (?) arrives it now can determine the port at which the packet should be routed.</p>

<p>But what happens when there is another switch connected to one of these ports and this second switch has more than one devices connected?</p>

<p>I am wondering how a switch is able to resolve this (on OSI-Layer 2, without a router), as I think this does indeed work in reality (?)</p>

<p>I am sorry if this question already exists (I think so, it should not be that uncommon), but I could not manage to put my thought into a suitable search query.</p>
","<p>A Layer 2 switch learns most of its information about the location of other endpoints via ""listening"" to ingressing frames, and when it is not aware of the location, it uses <code>flooding</code>and will learn from the answer. Lets say the topology is:  </p>

<p>(Host A) &lt;--> (Switch A) &lt;--> (Switch B) &lt;-->(Host B).  </p>

<p>Also important to note, a L2 Switch forwards, it does not route. By that I mean, when it receives an encapsulated frame, it forwards it out interfaces.</p>

<ul>
<li>Host A wants to get to Host B. Host A knows Host B's MAC address. So Host A sends a frame out to Switch A.  </li>
<li>Switch A does not have Host B in its MAC address Table. Switch A then flood out the frame on all of its ports, except for the one Host A is located. Among all those ports there is the ports that Switch B is plugged into, so Switch B receives the frame.</li>
<li>Switch B then flood that frame out all of its ports (considering Switch B does not have Host B in its MAC address Table).</li>
<li>Host B will respond to the frame, Switch B will then record Host B MAC address and send the response to Switch A. Switch A then records the MAC address of Host B in its table and send the response to Host A</li>
</ul>

<p>Here's a related question: <a href=""https://networkengineering.stackexchange.com/questions/13012/how-does-a-switch-learn-a-switch-table"">How does a switch learn a switch table?</a></p>
","20894"
"OSI Model and Networking Protocols Relationship","7624","","<p>When most networking students first learn about the OSI model, they spend a great deal of time trying to figure out which layer of the model a particular protocol fits into.  We get a lot of questions about OSI layers on this forum, and they are usually like:</p>

<blockquote>
  <ul>
  <li>Which OSI layer does IS-IS operate at? </li>
  <li>Is HTML a presentation or    application protocol? </li>
  <li>Are VPN tunnels layer 2 or 3?</li>
  </ul>
</blockquote>

<p><strong>How should a student (or professional for that matter) understand the relationship between the OSI model and protocols he/she works with?</strong></p>
","<p>There are two important facts about the OSI model to remember:</p>

<ol>
<li><p>It is a conceptual model.  That means it describes an idealized, abstract, theoretical group of networking functions.  It does not describe anything that someone actually built (at least nothing that is in use today).</p></li>
<li><p>It is not the only model.  There are other models, most notably the TCP/IP protocol suite (RFC-1122 and RFC-1123), which is much closer to what is currently in use.</p></li>
</ol>

<p>A bit of history:  You’ve probably all heard about the early days of packet networking, including ARPANET, the Internet’s predecessor.  In addition to the U.S. Defense Department’s efforts to create networking protocols, several other groups and companies were involved as well. Each group was developing their own protocols in the brand new field of packet switching.  IBM and the telephone companies were developing their own standards.  In France, researchers were working on their own networking project called Cyclades.</p>

<p>Work on the OSI model began in the late 1970s, mostly as a reaction to the growing influence of big companies like IBM, NCR, Burroughs, Honeywell (and others) and their proprietary protocols and hardware.  The idea behind it was to create an open standard that would provide interoperability between different manufacturers.  But because the ISO model was international in scope, it had many competing political, cultural and technical interests. It took well over six years to come to consensus and publish the standards. </p>

<p>In the meanwhile, the TCP/IP model was also developed.  It was simple, easy to implement, and most importantly, it was free.  You had to purchase the OSI standard specifications to create software for it.  All the attention and development efforts gravitated to TCP/IP.  As a result, the OSI model was never implemented as a set of protocols, and TCP/IP became the standard for the Internet.</p>

<p>The point is, all of the protocols in use today, the TCP/IP suite; routing protocols like RIP, OSPF and BGP; and host OS protocols like Windows SMB and Unix RPC, were developed without the OSI model in mind.  They sometimes bear some resemblance to it, but the OSI standards were never followed during their development.  So it’s a fools errand to try to fit these protocols into OSI.  They just don’t exactly fit.</p>

<p>That doesn’t mean the model has no value; it is still a good idea to study it so you can understand the general concepts. The concept of the OSI layers is so woven into network terminology, that we talk about layer 1, 2 and 3 in everyday networking speech. The definition of layers 1, 2 and 3 are, if you squint a bit, fairly well agreed upon.  For that reason alone, it’s worth knowing.</p>

<p>The most important things to understand about the OSI (or any other) model are:</p>

<ul>
<li>We can divide up the protocols into layers</li>
<li>Layers provide encapsulation</li>
<li>Layers provide abstraction</li>
<li>Layers decouple functions from others</li>
</ul>

<p>Dividing the protocols into layers allows us to talk about their different aspects separately.  It makes the protocols easier to understand and easier to troubleshoot.  We can isolate specific functions easily, and group them with similar functions of other protocols.</p>

<p>Each “function” (broadly speaking) encapsulates the layer(s) above it.  The network layer encapsulates the layers above it.  The data link layer encapsulates the network layer, and so on.  </p>

<p>Layers abstract the layers below it.   Your web browser doesn’t need to know whether you’re using TCP/IP or something else at at the network layer (as if there were something else).  To your browser,  the lower layers just provide a stream of data. How that stream manages to show up is hidden from the browser. TCP/IP doesn’t know (or care) if you’re using Ethernet, a cable modem, a T1 line, or satellite. It just processes packets.   Imagine how hard it would be to design an application that would have to deal with all of that.  The layers abstract lower layers so software design and operation becomes much simpler. </p>

<p>Decoupling: In theory, you can substitute one specific technology for another at the same layer.  As long as the layer communicates with the one above and the one below in the same way, it shouldn’t matter how it’s implemented.   For example, we can remove the very well-known layer 3 protocol, IP version 4, and replace it with IP version 6.  Everything else should work exactly the same.  To your browser or your cable modem, it should make no difference.</p>

<p>The TCP/IP model is what TCP/IP protocol suite was based on (surprise!).  It only has four layers, and everything above transport is just “application.”  It is simpler to understand, and prevents endless questions like “Is this session layer or presentation layer?”  But it too is just a model, and some things don’t fit well into it either, like tunneling protocols (GRE, MPLS, IPSec to name a few). </p>

<p>Ultimately, the models are a way of representing invisible abstract ideas like addresses and packets and bits.  As long as you keep that in mind, the OSI or TCP/IP model can be useful in understanding networking.</p>
","6381"
"Any use for old CLEAR (WiMAX) modems?","7609","","<p><a href=""http://www.clear.com"" rel=""nofollow"">CLEAR</a>, the major <a href=""https://en.wikipedia.org/wiki/WiMAX"" rel=""nofollow"">WiMAX</a> provider in the United States is shutting down its WiMAX service and radio towers in November 2015.</p>

<p>Is there any use for their <a href=""http://www.clear.com/support"" rel=""nofollow"">existing WiMAX modems</a>? </p>

<p>Is WiMAX used anywhere else? If so, might these modems be compatible?</p>

<p>Or do all these devices go to the recycling center/trash heap?</p>
","<p>To be accurate, <em>Sprint</em> is shutting down WiMax to use the spectrum for LTE. They were, to my knowledge, the only WiMax operator in the US.  If you read the wiki article you linked, you'd see the <a href=""https://en.wikipedia.org/wiki/List_of_WiMAX_networks"" rel=""nofollow"">List of WiMAX networks</a>. However, that list doesn't mean there are (or were) <em>operational</em> networks -- some of the entries list ""spectrum licenses"".</p>

<p>Other countries do still have WiMax networks, but I doubt you could recode the modem to work on those networks. The clearwire branded gear have 802.1x certificates specific to the Clear network, and no interface for the user to mess with them. A big enough operator might be able to reset them, but why would they bother? (I'd like to see them reused, too. But they're 99% e-waste now.)</p>
","19784"
"Cisco ASA Routing Issue","7589","","<p>I am working on a lab right now and am having some issues with ASA routing.</p>

<p>Here is the current network topology:</p>

<p><img src=""https://i.stack.imgur.com/qzo2h.png"" alt=""Network Topology""></p>

<p>Currently if I login to the console on the ASA or Router I can get outside to the internet no problem. The second I login to the layer 3 switch I can only ping the inside interface of the ASA. This leads me to believe I have issues with the return routing from the ASA.</p>

<p>I want the layer 3 switch to do the intervlan routing (which it is).</p>

<p>This brings up a couple of questions:</p>

<ol>
<li>Best practice wise - should I let the router or the ASA handle NAT (Overloading)?</li>
<li>I can ping the 172.16.2.2 interface but not 172.16.2.1 from a pc connected to one of the layer 2 switches (proves intervlan routing is working -- i have a 172.20.100.8 address on the PC). Why can't I ping 172.16.2.1 from a PC but I can from the Layer 3 Switch?</li>
<li>I cannot get an ip address right now from the DHCP server (windows). Any insight into why?</li>
<li>And most of all -- Why can't I get out to the internet from the Layer 3 switch?</li>
</ol>

<p>Here are concatenated dumps of the configs:</p>

<p>Layer 3 Switch:</p>

<pre>version 15.1
no service pad
service timestamps debug datetime msec
service timestamps log datetime msec
no service password-encryption
service compress-config
service unsupported-transceiver
!
!
!
no aaa new-model
!
ip vrf mgmtVrf
!         
!         
!         
vtp mode transparent
!         
!         
!         
!         
!         
!         
spanning-tree mode pvst
spanning-tree extend system-id
!         
vlan internal allocation policy ascending
!         
vlan 3,12,100 
!         
!         
!         
!         
!         
!         
!         
interface FastEthernet1
 ip vrf forwarding mgmtVrf
no ip address
 speed auto
 duplex auto
!         
interface GigabitEthernet1/1
 no switchport
 ip address 172.16.2.2 255.255.255.224
!         
interface GigabitEthernet1/2
 switchport mode trunk
 shutdown 
!         
interface GigabitEthernet1/3
 switchport mode trunk
!         
interface GigabitEthernet1/4
 switchport mode trunk
!         
interface GigabitEthernet1/5
 switchport mode trunk
!         
interface GigabitEthernet1/6
 switchport mode trunk
!         
interface GigabitEthernet1/7
 switchport mode trunk
!         
interface GigabitEthernet1/8
 switchport mode trunk
!         
interface GigabitEthernet1/9
 switchport mode trunk
!         
interface GigabitEthernet1/10
 switchport mode trunk
!         
interface GigabitEthernet1/11
 switchport mode trunk
!         
interface GigabitEthernet1/12
 switchport mode trunk
!         
interface GigabitEthernet1/13
 switchport mode trunk
!         
interface GigabitEthernet1/14
 shutdown 
!         
interface GigabitEthernet1/15
 shutdown 
!         
interface GigabitEthernet1/16
 shutdown 
!         
interface Vlan1
 no ip address
!         
interface Vlan3
 ip address 172.19.3.1 255.255.255.0
 ip helper-address 172.20.100.27
!     
interface Vlan12
 ip address 172.19.12.1 255.255.255.240
 ip helper-address 172.20.100.27
!        
interface Vlan100
 ip address 172.20.100.1 255.255.255.224
 ip helper-address 172.20.100.27
!         
!         
no ip http server
ip route 0.0.0.0 0.0.0.0 172.16.2.1
!         
!         
!         
!     
line con 0
 logging synchronous
 stopbits 1
line vty 0 4
 login    
!         
end</pre>

<p>ASA:</p>

<pre>
ASA Version 8.6(1)2 
!
hostname ciscoasa
names
!
interface GigabitEthernet0/0
 nameif outside
 security-level 0
 ip address 172.16.1.10 255.255.255.0 
!
interface GigabitEthernet0/1
 nameif inside
 security-level 100
 ip address 172.16.2.1 255.255.255.224 
!
interface GigabitEthernet0/2
 shutdown
 no nameif
 no security-level
 no ip address
!
interface GigabitEthernet0/3
 shutdown     
 no nameif    
 no security-level
 no ip address
!             
interface GigabitEthernet0/4
 shutdown     
 no nameif    
 no security-level
 no ip address
!             
interface GigabitEthernet0/5
 shutdown     
 no nameif    
 no security-level
 no ip address
!             
interface Management0/0
 nameif management
 security-level 100
 ip address 192.168.1.1 255.255.255.0 
 management-only

ftp mode passive
object network OBJ_GENERIC_ALL
 subnet 0.0.0.0 0.0.0.0
pager lines 24
logging asdm informational
mtu management 1500
mtu outside 1500
mtu inside 1500
no failover   
icmp unreachable rate-limit 1 burst-size 1
asdm image disk0:/asdm-66114.bin
no asdm history enable
arp timeout 14400
nat (inside,outside) source dynamic OBJ_GENERIC_ALL interface
route outside 0.0.0.0 0.0.0.0 172.16.1.1 1
timeout xlate 3:00:00
timeout conn 1:00:00 half-closed 0:10:00 udp 0:02:00 icmp 0:00:02
timeout sunrpc 0:10:00 h323 0:05:00 h225 1:00:00 mgcp 0:05:00 mgcp-pat 0:05:00
timeout sip 0:30:00 sip_media 0:02:00 sip-invite 0:03:00 sip-disconnect 0:02:00
timeout sip-provisional-media 0:02:00 uauth 0:05:00 absolute
timeout tcp-proxy-reassembly 0:01:00
timeout floating-conn 0:00:00
dynamic-access-policy-record DfltAccessPolicy
user-identity default-domain LOCAL
http server enable
http 192.168.1.0 255.255.255.0 management
no snmp-server location
no snmp-server contact
snmp-server enable traps snmp authentication linkup linkdown coldstart warmstart
telnet timeout 5
ssh timeout 5 
console timeout 0
dhcpd address 192.168.1.2-192.168.1.254 management
dhcpd enable management
!             
threat-detection basic-threat
threat-detection statistics access-list
no threat-detection statistics tcp-intercept
webvpn        
!             
class-map inspection_default
 match default-inspection-traffic
!             
!             
policy-map type inspect dns preset_dns_map
parameters   
  message-length maximum client auto
  message-length maximum 512
policy-map global_policy
 class inspection_default
  inspect dns preset_dns_map 
  inspect ftp 
  inspect h323 h225 
  inspect h323 ras 
  inspect rsh 
  inspect rtsp 
  inspect esmtp 
  inspect sqlnet 
  inspect skinny  
  inspect sunrpc 
  inspect xdmcp 
  inspect sip  
  inspect netbios 
  inspect tftp 
  inspect ip-options 
!             
service-policy global_policy global
prompt hostname context 
no call-home reporting anonymous
</pre>

<p>Router Config:</p>

<pre>
version 15.3
service timestamps debug datetime msec
service timestamps log datetime msec
service password-encryption
no platform punt-keepalive disable-kernel-core
!
!
boot-start-marker
boot-end-marker
!
!
vrf definition Mgmt-intf
 !
 address-family ipv4
 exit-address-family
 !
 address-family ipv6
 exit-address-family
!         
!         
no aaa new-model
!         
!         
!         
!         
!         


!         
!         
!         
!         
!         
multilink bundle-name authenticated
!         
!         
!         
!         
!         
!         
!         
!         
!         
redundancy
 mode none
!         
!         
!         
ip tftp source-interface GigabitEthernet0
!         
!         
!         
!         
!         
!         
!         
interface GigabitEthernet0/0/0
 ip address 204.28.125.74 255.255.255.252
 ip nat outside
 negotiation auto
!         
interface GigabitEthernet0/0/1
 no ip address
 shutdown 
 negotiation auto
!         
interface GigabitEthernet0/0/2
 no ip address
 shutdown 
 negotiation auto
!         
interface GigabitEthernet0/0/3
 ip address 172.16.1.1 255.255.255.0
 ip nat inside
 negotiation auto
!         
interface GigabitEthernet0
 vrf forwarding Mgmt-intf
 no ip address
 shutdown 
 negotiation auto
!         
ip nat inside source list 1 interface GigabitEthernet0/0/0 overload
ip forward-protocol nd
!         
no ip http server
no ip http secure-server
ip route 0.0.0.0 0.0.0.0 200.200.200.200
!         
access-list 1 permit 172.16.1.0 0.0.0.255
!         
!         
!         
control-plane
!         
!         
line con 0
 logging synchronous
 stopbits 1
line aux 0
 stopbits 1
line vty 0 4
 login    
!         
!         
end       
</pre>
","<blockquote>
  <p>Best practice wise - should I let the router or the ASA handle NAT
  (Overloading)?</p>
</blockquote>

<p>In the most general of design best practices NAT is performed between an <a href=""http://www.cisco.com/en/US/tech/tk648/tk361/technologies_tech_note09186a0080094837.shtml"" rel=""nofollow"">inside and outside network</a>. NAT overloading is generally performed at the edge when there is limited public IP address space. You can learn more about NAT overloading, also known as Port Address Translation or PAT, in <a href=""http://tools.ietf.org/html/rfc2663"" rel=""nofollow"">RFC 2663</a> (PAT is referred to as Network Address Port Translation (NAPT) in section 4.1.2). </p>

<p>In this particular scenario you can argue that you have two inside and outside networks and will need to perform some form of NAT on both the ASA (whether that is the NAT overloading you're using now, <a href=""https://supportforums.cisco.com/docs/DOC-31116#TWICE-NAT-MANUAL-NAT"" rel=""nofollow"">NAT exemption</a>, <a href=""https://supportforums.cisco.com/docs/DOC-31116#TWICE-NAT-MANUAL-NAT"" rel=""nofollow"">static NAT</a>, <a href=""https://supportforums.cisco.com/docs/DOC-31116"" rel=""nofollow"">etc</a>) and the <em>Cisco Router</em>.</p>

<blockquote>
  <p>I can ping the <code>172.16.2.2</code> interface but not <code>172.16.2.1</code> from a pc
  connected to one of the layer 2 switches (proves intervlan routing is
  working -- i have a <code>172.20.100.8</code> address on the PC). Why can't I ping
  <code>172.16.2.1</code> from a PC but I can from the Layer 3 Switch?</p>
</blockquote>

<p>The ASA <code>172.16.2.2</code> is receiving the ICMP echo-request but does not have a route back to <code>172.20.100.0/27</code>. The echo-reply is actually being forwarded to the Router <code>172.16.1.1</code> via the default route.</p>

<blockquote>
  <p>And most of all -- Why can't I get out to the Internet from the Layer 3 switch?</p>
</blockquote>

<p>Currently your ASA and <em>Cisco Router</em> do not have routes to internal devices other than their connected routes.</p>

<h3>Your ASA configuration:</h3>

<pre><code>route outside 0.0.0.0 0.0.0.0 172.16.1.1 1
</code></pre>

<p>This will provide a default route via the outside interface, but how will the ASA know how to reach subnets residing behind the <em>Layer 3 Distribution Switch</em>?</p>

<p>You'll need to add routes to the internal subnets via the inside interface using the <em>Layer 3 Distribution Switch</em> as the next-hop IP address.</p>

<h3>ASA static routing example:</h3>

<pre><code>route inside 172.19.12.0 255.255.255.240 172.16.2.2
route inside 172.19.3.0 255.255.255.0 172.16.2.2
route inside 172.20.100.0 255.255.255.224 172.16.2.2
</code></pre>

<p>Further reading: <a href=""http://www.cisco.com/en/US/docs/security/asa/asa82/configuration/guide/route_static.html"" rel=""nofollow"">ASA static routing</a></p>

<h3>Your Cisco Router's configuration:</h3>

<pre><code>ip route 0.0.0.0 0.0.0.0 200.200.200.200
</code></pre>

<p>Additionally, how will your border router know how to reach subnets other than it's connected routes, and the <em>catch all default route</em> via the outside interface's next-hop address <code>200.200.200.200</code>?</p>

<h3>Router static routing example:</h3>

<pre><code>ip route 172.19.12.0 255.255.255.240 172.16.1.10
ip route 172.19.3.0 255.255.255.0 172.16.1.10
ip route 172.19.100.0 255.255.255.224 172.16.1.10
ip route 172.16.2.0 255.255.255.224 172.16.1.10
</code></pre>

<p>Further reading: <a href=""http://www.cisco.com/en/US/tech/tk365/technologies_tech_note09186a00800ef7b2.shtml"" rel=""nofollow"">ISR static routing</a></p>

<blockquote>
  <p>I cannot get an ip address right now from the DHCP server (Windows).
  Any insight into why?</p>
</blockquote>

<p>Ensure you have end-to-end IP reachability between the client(s) sending DHCP discover messages and the DHCP server.</p>

<p>From what I can gather from your topology and configuration, the subnets <code>172.19.3.0/24</code>, <code>172.19.12.0/28</code> and <code>172.20.100.0/27</code> should have no issues connecting to each other (assuming they are configured to use their respective default gateways) from a networking perspective.</p>

<p>You can remove the <a href=""http://www.cisco.com/en/US/docs/switches/lan/catalyst3750x_3560x/software/release/12.2_53_se/configuration/guide/swdhcp82.html#wp1266823"" rel=""nofollow""><code>ip helper-address</code></a> syntax from the SVI 100 given that the DHCP server is on the same segment and that command is used for a DHCP server(s) that is on a different segment. </p>

<pre><code>interface Vlan100
ip address 172.20.100.1 255.255.255.224
ip helper-address 172.20.100.27
</code></pre>
","3324"
"TCP Reset-I on Cisco ASA 5512x version 9.1","7557","","<p>I am trying to setup simple RDP rule from outside TEST_IPs to inside server 192.168.1.5 LLDHH-ADC. I configured nat and access list but I am not able to RDP to the server. I am new to ASA world and any help will be appreciated.</p>

<p>Here is part of my config:</p>

<pre><code>object network LLDHH-ADC
 host 192.168.1.5

object network LLDHH-ADC
 nat (inside,outside) static interface service tcp 3389 3389

nat (any,outside) after-auto source dynamic any interface

access-list outside_access extended permit object RDP object-group TEST_IPs object LLDHH-ADC
</code></pre>

<hr>

<p>On the server while trying to RDP I am getting:</p>

<pre><code>C:\Users\Administrator&gt;netstat -an | find "":3389""
  TCP    0.0.0.0:3389           0.0.0.0:0              LISTENING

  TCP    192.168.1.5:3389       38.122.xx.xx:2763     ESTABLISHED

  TCP    [::]:3389              [::]:0                 LISTENING
</code></pre>

<p>On the ASA I am getting the following output:</p>

<pre><code>6    May 07 2014    19:56:52    302013    38.122.xx.xx    2763    192.168.1.5 3389 
  Built inbound TCP connection 8341440 for outside:38.122.xx.xx/2763 
  (38.122.xx.xx/2763) to inside:192.168.1.5/3389 (50.204.xx.xx/3389)
</code></pre>

<p>and after RDP fails:</p>

<pre><code>6    May 07 2014    19:57:52    302014    38.122.xx.xx    2763    192.168.1.5 3389
  Teardown TCP connection 8341440 for outside:38.122.xx.xx/2763 to 
  inside:192.168.1.5/3389 duration 0:01:00 bytes 19 TCP Reset-I
</code></pre>
","<p>If you only have a single subnet behind the firewall, I would try something like this.</p>

<pre><code>object network inside-net
subnet 192.168.1.0 255.255.255.0
nat(inside,outside) dynamic interface dns
</code></pre>

<p>You would then be able to remove this.</p>

<pre><code>nat (any,outside) after-auto source dynamic any interface
</code></pre>

<p>I prefer to be explicit with the PAT rule.  </p>

<p>Instead of this ACL:</p>

<pre><code>access-list outside_access extended permit object RDP object-group TEST_IPs object LLDHH-ADC
</code></pre>

<p>Try this:</p>

<pre><code>access-list outside_access extended permit tcp object-group TEST_IPs object LLDHH-ADC eq 3389
</code></pre>

<p>This NAT rule looks good.</p>

<pre><code>object network LLDHH-ADC
 nat (inside,outside) static interface service tcp 3389 3389
</code></pre>
","7792"
"Why does my router not reply to ARP requests?","7554","","<p>I am trying to test the ability for an embedded system to create DNS requests and process their replies, but I'm having problems getting those replies.</p>

<p>Physically, my embedded system <code>(192.168.1.50)</code> is connected to a switch, which is connected to a router <code>(192.168.1.1)</code>. I have another computer, <code>(192.168.1.31)</code> connected to the same switch, on which I have Wireshark running.</p>

<p>I'm trying to send a DNS request to Google's public DNS server <code>(8.8.8.8:53)</code> from my embedded system. Having done a bit of reading, I'm not surprised that this request is repackaged as an ARP request to the router - Wireshark reports a <code>who has 192.168.1.1? tell 192.168.1.50</code> message - but I receive no ARP reply from the router with its MAC address, which I think is what I'm expecting before the actual DNS request can be sent.</p>

<p>So, why is the router not replying?</p>

<p>I'm no network expert, so any simple help will be appreciated.</p>
","<p>I have solved the issue. In fact, the reason that I was not able to receive ARP replies into my embedded system was because the switch was squashing them (I think this was because it was of a certain type). The solution was to place a downstream router of the switch and disable its firewall, thus creating another network within my LAN. I then requested the DNS server provided by the upstream router, through the downstream one. The downstream router does not squash ARP replies. To illustrate:</p>

<pre><code>| NETWORK 1 -----------------------| NETWORK 2 --------------------|
| 192.168.1.50 --&gt; 192.168.1.11   -|--&gt; SWITCH --&gt; 192.168.1.1    -|--&gt;
| E.SYSTEM     --&gt; DSTREAM ROUTER -|--&gt; SWITCH --&gt; USTREAM ROUTER -|--&gt;
</code></pre>

<p>The upstream router knows a primary DNS server at <code>192.104.4.10</code>, so the request was formulated from the embedded system with these IP addresses:</p>

<pre><code>IP:      192.168.1.50
Gateway: 192.168.1.11
Subnet:  255.255.255.0
DNS:     192.104.4.10
</code></pre>

<p>Thank you for the comments, they helped me to debug this.</p>
","6943"
"What is the use of a tunnel interface on a cisco router?","7507","","<p>What is a tunnel interface used for on a cisco router?</p>

<p>What is the difference between setting up a VPN connection and a tunnel interface; or does this serve the same purpose? </p>
","<p>Tunnel interfaces have many uses, including participating in a larger VPN configuration. A VPN setup usually has many parts, including encryption, authentication, routing, and finally, the tunneling. Tunneling is also used for IPv4/IPv6 coexistence setups, such as encapsulating IPv6 packets in IPv4 headers, creating GRE tunnels, and multicast tunneling. The point is that while tunnels may be part of a VPN setup, they do not necessarily represent the entire VPN configuration, but only the traffic encapsulation between endpoints.</p>
","1277"
"Native VLAN Mismatch between two access ports on cisco switches","7462","","<p>Ok, I have a cable between two cisco switches. The port on switch A is configured as switchport access vlan 2 and the port on switch B is configured as switchport access vlan 3. For the sake of the current question let's say I cannot change the number of these access vlans. Also, because these are access ports, traffic should be untagged and a trunk is not formed.  Traffic is successfully transferred between switches.</p>

<p>However, I am getting a ""Native Vlan Mismatch"" error.  </p>

<p>Aren't these mismatches generally shown only when a trunk is formed?  </p>

<p>Will the same problems associated with trunks and a native vlan mismatch occur?</p>
","<p>CDP (LLDP) lists how the each port is configured. Cisco, in their infinite wisdom, thinks access ports in different VLANs are an error. They aren't, but it could be a misconfiguration. Disable CDP and the switch will shut up about it.</p>
","18453"
"pfSense 2.3 How to setup each Lan traffic goes only over specific gateway","7453","","<p>I am running a pfSense 2.3 box with 4 NICs. Now i have 2 different ISPs (one Cable &amp; one DSL). How Can i configure, that all traffic from LAN1 goes ONLY over WAN1, and all traffic from LAN2 goes ONLY over WAN2? I Dont want any Failover or LoadBalancing, just seperate each Networks ""Gateways"". Here a simple diagram, on what i try to achieve.
<a href=""https://i.stack.imgur.com/ouaiX.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ouaiX.png"" alt=""enter image description here""></a></p>
","<p>Instead of ISP IP addresses as gateways, you could use two tier-based <em>gateway teams</em>.<br>
Each gateway team will have the preferred ISP in tier 1, while the other ISP will be in tier 2.  </p>

<ul>
<li>TEAM-ISP1

<ul>
<li>ISP1 <em>tier 1</em></li>
<li>ISP2 <em>tier 2</em></li>
</ul></li>
<li>TEAM-ISP2

<ul>
<li>ISP2 <em>tier 1</em></li>
<li>ISP1 <em>tier 2</em></li>
</ul></li>
</ul>

<p>In normal conditions, each LAN will use the tier 1 member of the team.<br>
When ISP1 goes down, ISP2 will be used by both LAN1 and LAN2.<br>
When ISP2 goes down, ISP1 will be used by both LAN1 and LAN2. </p>
","44217"
"pfSense multi-wan Bridge, NAT, Load balancing and CARP","7426","","<p><strong>Context</strong></p>

<p>I currently have :</p>

<ul>
<li>1 pfSense 2.0.2 router (on a Firebox X-Peak X5000)</li>
<li>2 WAN</li>
<li>1 LAN</li>
<li>3 Servers</li>
</ul>

<p>My interfaces</p>

<ul>
<li>WAN1 68.XX.XXX.98 to 69.XX.XXX.102</li>
<li>WAN2 65.XXX.XXX.58 to 66.XXX.XXX.62</li>
<li>LAN 192.168.1.XXX</li>
<li>DMZ</li>
</ul>

<p>My router is configured like this :</p>

<ul>
<li>Load balancing with a Gateway group based on this <a href=""http://doc.pfsense.org/index.php/Multi-WAN_2.0"" rel=""nofollow"">documentation</a>.</li>
<li>NAT</li>
<li>Rules to LAN servers</li>
<li>Bridge between WAN2 and DMZ (with external IPs on one DMZ server) - but can't communicate between this server and other servers on LAN passing by external IP address. With a custom route configuration I've been able to handle requests from LAN to server on DMZ, but I don't like doing it like this.</li>
</ul>

<p>My servers are using local IP addresses <code>192.168.1.XXX</code>, so the same for my computers.</p>

<p><strong>Expecting</strong></p>

<p>I would like to do two things :</p>

<p><strong>1 Bridge the two WANs with a DMZ and LAN behind NAT</strong></p>

<p>I want the possibility to attribute external IP addresses to servers, and possibility to mix IPs to same server from both WANs. I would also like to be able to communicate with servers from the LAN example :</p>

<pre><code>192.168.1.100 &lt;--&gt; http://68.XX.XXX.99
</code></pre>

<p>Also being able to communicate from server to another server example:</p>

<pre><code>65.XXX.XXX.59 &lt;--&gt; http://68.XX.XXX.99
</code></pre>

<ul>
<li>Will I need to dedicate one external IP address for computers on LAN behind NAT?</li>
<li>Will I be able to keep the load-balacing working for the NAT?</li>
</ul>

<p>Note : I would like to avoid one-to-one NAT, having local IP addresses on server complicate virtual hosting configuration so I prefer having external addresses.</p>

<p><strong>2 Router hardware redondancy (CARP)</strong></p>

<p>I have one more Firebox X-Peak X5000 identical, and would like to put it as a backup, if the first one fail, the second could take over without (or almost) loosing network (i.e., requests from outside to server must work, also from LAN and servers to Internet).</p>

<p>I've read this <a href=""http://doc.pfsense.org/index.php/Configuring_pfSense_Hardware_Redundancy_%28CARP%29"" rel=""nofollow"">documentation</a>, but I have no idea if it could work with my configuration (Bridge + NAT + Load balancing)</p>
","<p>For the multi-wan bridge + NAT + load balancing, it can be setup as follow :</p>

<p>1 Create a DMZ interface</p>

<ul>
<li>IPv4 Configuration Type : None</li>
</ul>

<p>2 Create a bridge</p>

<ul>
<li>Interfaces</li>
<li>Assign</li>
<li>Bridges</li>
<li>Add</li>
<li>Select WAN1, WAN2 and DMZ</li>
</ul>

<p>3 Firewall rules</p>

<p>Unblock necessary ports and allow them in the appropriate WAN :</p>

<ul>
<li>Source : *</li>
<li>Port : *</li>
<li>Destination : External IP address</li>
</ul>

<p>With that configuration, servers on the DMZ can now work with public IP addresses. The only drawback so far is that I can't access hosts on DMZ from LAN.</p>
","10677"
"Local pref VS prepend AS-path for two eBGP router","7423","","<p>I have two routers, AS50 and AS100, both are under my control. Since they are using different ASN, they should be eBGP routers. These two routers are connected by internet VPN and lease line, which means dual path between these two routers.</p>

<p>Lease line will take higher preference on packet routing while internet VPN will act as backup.</p>

<p>My questions:</p>

<ol>
<li><p>According to my reading, Local pref seems only applicable to iBGP not eBGP router, is this correct?</p></li>
<li><p>I am currently using prepend AS-path out method on both router, so the packet cover bidirectional routing. It seems work fine and I tested couple time on connection lost, BGP pick up change very quickly. But it did have couple packet loss in between. So when internet backup link in service, the primary link is recover, it will take couple packet loss before switching to primary link, is it possible to tell BGP test and ensure the primary link is functional before switching back from internet VPN backup link?</p></li>
<li><p>prepend always use ""out"" direction, is there have any real situation which prepend ""in"" could be use?</p></li>
<li><p>what will happen if I accidentally use local pref on eBGP routers instead of prepend?</p></li>
</ol>
","<p>Most of your confusion seems to be related to your other <a href=""https://networkengineering.stackexchange.com/questions/14837/bgp-prepend-question"">duplicate question</a>, which is the same as 3. above...:</p>

<blockquote>
  <p>prepend AS path usually running with route-map out to adjust outbound traffic from router which contain this option</p>
</blockquote>

<p>I'm sorry, but you are mistaken; prepending your ASN out adjusts traffic <em>inbound</em> to your ASN.</p>

<blockquote>
  <p>Does prepend work with route-map in at all to adjust inbound traffic?</p>
</blockquote>

<p>No, you don't prepend inbound, because you can only prepend with your own ASN.  If you prepend your own ASN to inbound announcements, bgp would think this is a routing loop (because it sees its own AS in the AS-path) and drop the route.</p>

<p>Let's eliminate the confusion in the question...</p>

<ul>
<li><code>neighbor x.x.x.x route-map FOO_out out</code> adjusts traffic <em>inbound</em> to your ASN</li>
<li><code>neighbor x.x.x.x route-map FOO_in in</code> adjusts traffic <em>outbound</em> from your ASN; use local-preference, med or some other criteria to influence your outbound traffic.</li>
</ul>

<p><em>Example configuration:</em></p>

<pre><code>ip prefix-list MATCH_ALL permit 0.0.0.0/0
!
route-map AS100_out
 match ip address prefix-list MATCH_ALL
 ! --&gt; Prepend so other ASN don't prefer this path
 !     NOTE: don't do this... 20 prepends is absurd in the real world.
 !          Five or ten ASN prepends should be sufficient
 set ip as-path prepend 65001 65001 65001 65001 65001 65001 65001 65001 65001 65001 65001 65001 65001 65001 65001 65001 65001 65001 65001 65001 
!
route-map AS100_in
 match ip address prefix-list MATCH_ALL
 ! --&gt; Set local-pref lower than 100, so we don't prefer this peer
 set local-preference 50
!
router bgp 777
 ! insert other ""normal"" bgp configuration here, network statement, etc..
 !
 neighbor 192.0.2.2 remote-as 100
 ! --&gt; AS100_out adjusts *inbound* traffic
 neighbor 192.0.2.2 route-map AS100_out out
 ! --&gt; AS100_in adjusts *outbound* traffic
 neighbor 192.0.2.2 route-map AS100_in in
</code></pre>

<p>NOTE: Prepending is deceptive; it might seem like nobody should select a path if you have prepended a lot of ASNs to your announcements, but even if you did that's no guarantee that downstream routers won't send traffic to you over that prepended path.  The reality is that internet routing is still a <em>per-hop / per-ASN</em> decision, and you're still somewhat at the mercy of the wisdom (or foolishness) of others.  See below for an example.</p>

<h1>Problems with AS-prepend traffic engineering</h1>

<p>Strictly speaking, you loose complete control of inbound routing paths when you announce your prefix to multiple providers because there are independent routing decisions made downstream for return traffic to you.  Furthermore, your announcements could even be modified by downstream providers after you send them.</p>

<p><strong>Example</strong></p>

<p>This is one example of what can happen.  Continuing with the example configuration shown above... Suppose you have AS 777, which owns 2.2.0.0/22.  You have services that a company with Router A needs to access... Let's also assume that AS 100 doesn't have a good link to you (maybe it's intermittently corrupting traffic due to physical-layer problems you haven't been able to fix).  So you think to yourself, <em>""I'll just prepend all my announcements to AS100 with a large number of ASNs so nobody will prefer the AS100 link until I can fix this""</em>.</p>

<p><img src=""https://i.stack.imgur.com/0vmvG.png"" alt=""bgp asymmetric""></p>

<p>The problem is that you only have complete control of your <em>outbound routing decisions</em>.  You don't get complete control inbound... so let's suppose Router A's administrator doesn't know your link to AS100 is bad.  They are dual-homed to AS200 and AS100, but AS100 offers much cheaper transit, per-Mbps; therefore Router A's engineer takes full routes from AS100 and only uses AS200 as a backup (taking only a default from them).</p>

<p>As the admin of AS 777, you can force traffic to Router A through AS 200, but traffic from Router A to 2.2.0.0/22 would still take AS 100 (because the best route is through AS 100, at Router A).</p>
","14839"
"How does BGP work over TCP?","7409","","<p>As far as I know we are using routing protocols to achieve Layer 3 connectivity, I am confused with the fact that BGP works over TCP which is L4. How can L4/TCP be established without prior L3 connectivity? </p>
","<p>TCP/IP sockets establish an end-to-end connection through the network, between two specifically addressed end points. BGP uses TCP/IP to communicate between routers (any devices exchanging routing information.) The information exchanged is used by the BGP peers, to better choose the way they choose where to send, (aka, next-hop) packets that they need to transmit.</p>

<p>At the very edges of the Internet, things are easy; ""everything is this way,"" towards your Internet provider. More in the middle, a router might have multiple choices. So it uses TCP/IP to move BGP traffic amongst its routing neighbors. The BGP information then tells the router which paths to prefer when there are multiple ways for a packet to get where it's going.</p>

<p>The end points (e.g. web browsers) and the routers are <em>speaking</em> TCP/IP. But the routers are <em>using</em> TCP/IP, (BGP communications composed of TCP/IP packets) to talk about what to do with the other TCP/IP packets they need to route.</p>
","6391"
"Mobile devices behind wireless bridge not getting IP address","7398","","<p>I'm trying to get a wireless link set up to a building about 1/2 mile away from the rest of my network. I'm using a pair of Engenius EOC2611P radios, and as far as I can tell everything is set up correctly. While in the remote building, my laptop works great. I'm there now, and I have a YouTube video playing in the background in HD as I write this. However, I can't get any ""mobile"" devices to get IP addresses. I've tested with an iPad 3, Kindle Fire, and at least three different kinds of smart phones. So far, only my laptop works. If I put a static IP address into the iPad, it's able to use the network just fine.</p>

<p><em>What do I need to do so that devices in the remote building can get IP valid addresses from our dhcp server?</em></p>

<p>Here's the network information:</p>

<p><strong>Main network</strong>  </p>

<ul>
<li>Windows 2008 R2 DNS/DHCP Server (10.1.1.11)
<ul>
<li>10.0.0.0/8 Scope for vlan 1 (Core network)</li>
<li>192.168.7.0/24 Scope for vlan 3 (vlan 3 intended for remote building)
<ul>
<li>192.168.7.1-26 excluded from scope, will not be distributed</li>
</ul></li>
<li>Several other scopes for various purposes, have worked for years (listed to show this isn't our only/first time using vlans)</li>
</ul></li>
<li>HP 5406zl core switch (10.1.1.1)
<ul>
<li>Connects directly to dhcp server</li>
<li>Rules to forward dns/dhcp traffic on vlan 3 to 10.1.1.11 (like Cisco ip helper-address, works for other vlans)</li>
<li>192.168.7.1 virtual interface for vlan 3</li>
</ul></li>
<li>Managed Switch in building nearest remote site
<ul>
<li>Connected to core switch via 1Gbps fiber link</li>
<li>fiber link tagged for vlan 3 at both ends</li>
<li>Engenius EOC2611P (10.1.1.249)
<ul>
<li>Directional antenna pointed at new building</li>
<li>Configured as access point</li>
<li>Port on switch is untagged/PVID vlan 1, tagged for vlan 3</li>
<li>Hidden SSID configured for 802.1q vlan separation, tags packets with vlan 3</li>
<li>This configuration scheme is used successfully to give vlan-specific addresses in numerous other access points on our network</li>
<li>My expectation is that everything the other side of this SSID will not use vlans, have 192.168.7.0/24 subnet</li>
</ul></li>
</ul></li>
</ul>

<p><strong>Remote Network</strong></p>

<ul>
<li>Engenius EOC2611P configured as Client Bridge (192.168.7.6)
<ul>
<li>Connects fine to other EOC2611P, good signal strength</li>
</ul></li>
<li>8-port switch (192.168.7.7)
<ul>
<li>Wired to EOC2611P</li>
<li>Limited 802.1q vlan support, but I'm not using it: all one vlan on this side of bridge</li>
<li>No dhcp server</li>
</ul></li>
<li>Engenius ECB9500 AP (192.168.7.4)
<ul>
<li>Wired to 8-port switch</li>
<li>""YCHolthus"" SSID</li>
<li>No security</li>
<li>dhcp server only available in router mode, will not distribute dns info</li>
</ul></li>
</ul>

<p><strong>Other Info</strong><br>
My laptop connects to the YCHolthus SSID, gets an address just fine, internet works<br>
My laptop connects via cat5 direct to switch, get an address, internet works<br>
My laptop is able to connect to both EOC2611P devices from the remote site<br>
An iPad, Kindle Fire, and 3 different smart phones all fail to get an address<br>
If I manually enter an address in the iPad for the YCHolthus SSID, it can use the internet<br>
DHCP Server only lists leases for my laptop  </p>

<p>When I get this much working, I'll add another access point (different make), two wired pcs, and a wired network printer to the switch at the remote location, and secure the SSID</p>

<p>I'm tempted to see if I have another switch available with adequate dhcp support, and then disable dhcp for that scope on our normal dhcp server, but I'd really prefer to use the existing dhcp server.</p>

<p><strong>Update</strong><br>
DHCP logs on the server have two mentions of the iPad's MAC address during the period I was testing, though I made many more connection attempts. Both mentions are NACKS for the <em>wrong</em> subnet:</p>

<pre>Line 37232: 15,10/30/13,14:23:00,NACK,192.168.40.38,,4CB19930D3C3,,0,6,,,
Line 37233: 15,10/30/13,14:23:00,NACK,192.168.40.38,,4CB19930D3C3,,0,6,,,</pre>

<p>That address belongs to a different vlan on our network. I'm not sure why these would reach the server, but not others.</p>
","<p>This sounds like broken broadcast to me.</p>

<p>First, the fact that your laptop works is maybe due to how Windows tend to do strange things with DHCP, like trying a unicast DHCPREQUEST with its previous lease to try to renew it.  I assume that it only works in your case because you always connect to the main site before connecting to the remote site, or your laptop was never connected to another network. Try connecting a laptop that has never seen the main network before, or use a LiveCD. I would expect it to not work.</p>

<p>Either fix/configure your wireless bridge to support broadcast (I would look at the AP side, you maybe have to register the client bridge or something) or deploy a DHCP relay on your remote site.</p>
","3819"
"Why does iBGP require a full-mesh?","7325","","<p>I understand that routes learnt via iBGP can't be redistributed to other iBGP peers to avoid loops, but then why is a iBGP connection between two routers that don't have eBGP connections needed? They won't distribute anything, right?</p>
","<blockquote>
  <p>...why is a iBGP connection between two routers that don't have eBGP
  connections needed? They won't distribute anything, right?</p>
</blockquote>

<p>Not quite right. It's not that two routers connected via iBGP cannot learn <em>any</em> prefixes from each other.</p>

<p>Suppose you have two WAN routers in your AS, A and B, both connected to separate WAN ASes via eBGP, and connected together via iBGP. Router A cannot learn prefixes from Router B about which Router B learned from other iBGP speakers in your AS, but it <em>can</em> learn about prefixes which Router B learned about from eBGP or an IGP.</p>

<p>Any prefixes which Router A learns about through iBGP from Router B cannot be passed on to any other iBGP speakers because those prefixes could be sent back to Router B, directly or indirectly. That's the reason for needing a full mesh or a mitigation such as route reflectors or confederations; other iBGP speakers will need to learn the prefixes which Router B <em>will</em> share with other iBGP speaker directly from Router B since Router A is unable to pass those prefixes on.</p>
","25821"
"Tunnel interface bandwidth?","7302","","<p>I am a little confused with the bandwidth setting on Tunnel interfaces between two Cisco devices. </p>

<p>On each end I have Cisco routers with ten gig interfaces connected to my provider. 
I Have a tunnel connecting two sites together. However the bandwidth statements don't seem to add up. My Tx/Rx look like they are maxed out. However the traffic on the input/output counters do not reflect the same as the bandwidth should be allowing. </p>

<p>Am I really choking out in the tunnel and not using my full interface bandwidth?</p>

<p>Router 1</p>

<pre><code>    Tunnel45 is up, line protocol is up 
      Hardware is Tunnel
      Internet address is z.z.z.z
      MTU 17868 bytes, BW 100 Kbit/sec, DLY 50000 usec, 
         reliability 255/255, txload 255/255, rxload 255/255
      Encapsulation TUNNEL, loopback not set
      Keepalive set (10 sec), retries 3
      Tunnel source x.x.x.x (TenGigabitEthernet3/4), destination y.y.y.y
       Tunnel Subblocks:
          src-track:
             Tunnel45 source tracking subblock associated with TenGigabitEthernet3/4
              Set of tunnels with source TenGigabitEthernet3/4, 11 members (includes iterators), on interface &lt;OK&gt;
      Tunnel protocol/transport GRE/IP
        Key disabled, sequencing disabled
        Checksumming of packets disabled
      Tunnel TTL 255, Fast tunneling enabled
      Tunnel transport MTU 9078 bytes
      Tunnel transmit bandwidth 8000 (kbps)
      Tunnel receive bandwidth 8000 (kbps)
      30 second input rate 47213000 bits/sec, 6452 packets/sec
      30 second output rate 85312000 bits/sec, 9380 packets/sec

    interface Tunnel45
     ip address z.z.z.z
     load-interval 30
     keepalive 10 3
     tunnel source TenGigabitEthernet3/4
     tunnel destination x.x.x.x
</code></pre>

<hr>

<p>Router 2</p>

<pre><code>    Tunnel45 is up, line protocol is up 
      Hardware is Tunnel
      Internet address is z.z.z.z
      MTU 9976 bytes, BW 100 Kbit/sec, DLY 50000 usec, 
         reliability 255/255, txload 255/255, rxload 255/255
      Encapsulation TUNNEL, loopback not set
      Keepalive set (10 sec), retries 3
      Tunnel linestate evaluation up
      Tunnel source x.x.x.x (TenGigabitEthernet0/0/4), destination y.y.y.y
       Tunnel Subblocks:
          src-track:
             Tunnel45 source tracking subblock associated with TenGigabitEthernet0/0/4
              Set of tunnels with source TenGigabitEthernet0/0/4, 2 members (includes iterators), on interface &lt;OK&gt;
      Tunnel protocol/transport GRE/IP
        Key disabled, sequencing disabled
        Checksumming of packets disabled
      Tunnel TTL 255, Fast tunneling enabled
      Tunnel transport MTU 9078 bytes
      Tunnel transmit bandwidth 2000000 (kbps)
      Tunnel receive bandwidth 2000000 (kbps)
      30 second input rate 49418000 bits/sec, 5955 packets/sec
      30 second output rate 33804000 bits/sec, 4266 packets/sec

     interface Tunnel45
     ip address z.z.z.z
     load-interval 30
     keepalive 10 3
     tunnel source TenGigabitEthernet0/0/4
     tunnel destination y.y.y.y
     tunnel bandwidth transmit 2000000
     tunnel bandwidth receive 2000000
    end
</code></pre>
","<p>Cisco IOS/NX-OS/etc. software does not configure the bandwidth for a virtual tunnel interface based on the physical interface to which it is assigned; instead, it applies a default ""bandwidth"" statement to the interface that depends on model of hardware and the version of software it is running (on many devices the default ""BW"" for a tunnel is 8kbps!). </p>

<p>As others have mentioned, this bandwidth statement does not actively affect the traffic throughput capability of the tunnel interface- tunnel traffic throughput is limited only by CPU traffic processing capability (if tunnel processing is not being performed in HW- usually not a limitation on most cisco routers unless this is being performed at scale) and the physical interface forwarding hardware. The only exception would be if BW-based QoS policies or custom routing configurations (e.g. non-default EIGRP implementation) were implemented on the tunnel interface, but based on the config you have shared that does not appear to be the case.</p>

<p>The <strong>displayed BW, txload and rxload counters</strong> that you are worried about are <strong>cosmetic only</strong> (unless the QoS/routing scenarios above apply) and will not -on their own- limit traffic throughput in any way. If you want the counters to display accurate information, configure the following on each tunnel interface:</p>

<pre><code>interface tunnel &lt;Tunnel Number&gt; ! e.g. int tu45
  bandwidth &lt;BW in kbps&gt; ! e.g. bandwidth 2000000 -(2Gbps)
</code></pre>
","25717"
"Cisco ASA cannot get ""inside"" vlan to internet through ""outside"" vlan","7297","","<p>I just got my outside vlan configured up-and-running <a href=""https://networkengineering.stackexchange.com/questions/3364/cannot-get-cisco-asa-5505-properly-configured"">See Post Here</a>.  I was able to get vlan 2 pinging to the internet 8.8.8.8 specifically.  However, now I honestly think I am misunderstanding what parameters I should be using ...  Here is my config so far:</p>

<pre><code>interface Ethernet0/0
 switchport access vlan 2
!
interface Ethernet0/1
!
interface Ethernet0/2
!
interface Ethernet0/3
!
interface Ethernet0/4
!
interface Ethernet0/5
!
interface Ethernet0/6
!
interface Ethernet0/7
!
interface Vlan1
 nameif inside
 security-level 100
 ip address 10.1.10.100 255.255.255.0
!
interface Vlan2
 nameif outside
 security-level 0
 ip address 74.xx.xx.225 255.255.255.248
!
ftp mode passive
pager lines 24
logging asdm informational
mtu inside 1500
mtu outside 1500
icmp unreachable rate-limit 1 burst-size 1
no asdm history enable
arp timeout 14400
global (outside) 1 interface
nat (inside) 10 10.1.10.0 255.255.255.0
nat (inside) 1 0.0.0.0 0.0.0.0
route outside 0.0.0.0 0.0.0.0 74.xx.xx.230 1
timeout xlate 3:00:00
timeout conn 1:00:00 half-closed 0:10:00 udp 0:02:00 icmp 0:00:02
timeout sunrpc 0:10:00 h323 0:05:00 h225 1:00:00 mgcp 0:05:00 mgcp-pat 0:05:00
timeout sip 0:30:00 sip_media 0:02:00 sip-invite 0:03:00 sip-disconnect 0:02:00
timeout sip-provisional-media 0:02:00 uauth 0:05:00 absolute
timeout tcp-proxy-reassembly 0:01:00
timeout floating-conn 0:00:00
dynamic-access-policy-record DfltAccessPolicy
http server enable
http 10.1.10.0 255.255.255.0 inside
no snmp-server location
no snmp-server contact
snmp-server enable traps snmp authentication linkup linkdown coldstart
crypto ipsec security-association lifetime seconds 28800
crypto ipsec security-association lifetime kilobytes 4608000
telnet timeout 5
ssh timeout 5
console timeout 0
dhcpd auto_config outside
!
dhcpd address 10.1.10.104-10.1.10.254 inside
dhcpd enable inside
!

threat-detection basic-threat
threat-detection statistics access-list
no threat-detection statistics tcp-intercept
webvpn
!
class-map inspection_default
 match default-inspection-traffic
!
!
policy-map type inspect dns preset_dns_map
 parameters
  message-length maximum client auto
  message-length maximum 512
 policy-map global_policy
 class inspection_default
  inspect dns preset_dns_map
  inspect ftp
  inspect h323 h225
  inspect h323 ras
  inspect rsh
  inspect rtsp
  inspect esmtp
  inspect sqlnet
  inspect skinny
  inspect sunrpc
  inspect xdmcp
  inspect sip
  inspect netbios
  inspect tftp
  inspect ip-options
!
service-policy global_policy global
prompt hostname context
: end
</code></pre>

<p>As you can see, I have a PC connected and assigned <code>10.1.10.104</code>.  So dhcp is working correctly .. It just can't see the outside world!!</p>
","<p>All you should need is...</p>

<pre><code>conf t
no nat (inside) 10 10.1.10.0 255.255.255.0
dhcpd dns 75.75.75.75 75.75.76.76
end
wr mem
</code></pre>

<p>Since your inside interface is already a higher security level than outside interface and you are nating everthing, you should not need an internal or external acl.</p>

<p>Do a release / renew to pick up the dns setting, and then start surfing...</p>
","3376"
"UDP Port Forwarding Range","7287","","<p>We just purchased a cisco 3825 router running IOS 15.1. The slice of the
topology in question is as follows:</p>

<pre><code>            RTP (8000-20000)            RTP (8000-20000)
192.168.2.1 &lt;--------------&gt; 192.168.2.5 &lt;----------&gt; 192.168.2.10
   (Router)                  (SIP Proxy)             (Media Server)
</code></pre>

<p>What we are trying to accomplish is to have the UDP range 8000-20000 forwarded
from the net to our SIP proxy 192.168.2.5. Also, our SIP proxy forwards
RTP traffic in the same range to our media server 192.168.2.10. The links
between the different servers, and the outside world are bi-directional.</p>

<p>Scouring the net there are some mixed reports on whether UDP port
forwarding using a range is possible. Can we please have a definitive answer if the following will work in getting RTP traffic to 192.168.2.5:</p>

<pre><code>ip nat pool voip-rtp 192.168.2.5 192.168.2.5 netmask 255.255.255.0 type rotary
ip nat inside destination list 114 pool voip-rtp
ip route 0.0.0.0 0.0.0.0 Dialer0
</code></pre>

<p>Finally, will we need another rule for the internal routing of RTP traffic (ie, 192.168.2.5&lt;---->192.168.2.10)?</p>

<p><strong>Update - Working Route Map for SIP RTP UDP Range</strong></p>

<pre><code>access-list 130 permit udp any any range 8000 20000
route-map voip-rtp permit 1
match ip address 130
ip nat inside source static &lt;private ip&gt; &lt;public ip&gt; route-map voip-rtp
</code></pre>
","<p>Try using a route map in the nat statement instead of the extended access list 114.  The route map will match the extended access list 114.</p>

<p>Route-maps enable you to match traffic using source ip, destination ip, and tcp/udp ports, interfaces, etc ...</p>

<p>You define your criteria in the extended access-list 114 (I see it's already configured in your question).</p>

<p>Then you configure :</p>

<pre><code>route-map RR permit 10
match ip address 114

ip nat inside destination route-map RR pool voip-rtp &lt;&lt; replace your nat with this
</code></pre>

<p>More details and configuration examples for NAT with route-maps in : 
<a href=""http://www.ciscopress.com/articles/article.asp?p=174107&amp;seqNum=5"" rel=""nofollow"">http://www.ciscopress.com/articles/article.asp?p=174107&amp;seqNum=5</a></p>
","5708"
"what is the purpose of network address? (aka subnet address)","7265","","<p>What is the purpose of network address? (aka subnet address, starting address of each subnet)</p>

<p>For example in this network:  </p>

<pre><code>  192.168.1.0/24   
</code></pre>

<p>Why we should leave 192.168.1.0 address free? </p>
","<p>They are functionally identical -- all-hosts subnet broadcast.  In the early days, long long ago, the all-zero's address (""Network"") was used for broadcast traffic. That was later changed to the all-one's address (""Broadcast""), and that's what we use today.</p>

<p><strong>[NOTE]</strong><br>
This is not the same thing as ""subnet-zero"" (or the all-one subnet) which is the the top and bottom <em>subnets</em> from a <em>larger mask</em>. eg. 192.168.1.0/24 broken into /28's: subnet-zero is 192.168.1.0/28 and all-ones subnet is 192.168.1.240/28</p>

<p>""Network Address"" and ""Broadcast Address"" are the first and last address <em>of a subnet</em>.</p>
","11205"
"How do you get rid of deleted sub-interfaces from NVRAM?","7263","","<p>This is more of a cosmetic issue however it does bug me....</p>

<p>I removed the sub-interfaces off a 3845 router by issuing.</p>

<pre><code>no int fast1/0.10
no int fast1/0.15
default int fast1/0
</code></pre>

<p>When I do a <code>show run</code>....the subinterfaces are no longer there. However, a <code>show ip int br</code> has them listed as follows:</p>

<pre><code>router#sh ip int br
Interface                  IP-Address      OK? Method Status                Protocol
FastEthernet1/0            unassigned      YES manual down                  down 
FastEthernet1/0.13         unassigned      YES NVRAM  deleted               down
FastEthernet1/0.30         unassigned      YES NVRAM  deleted               down
</code></pre>

<p>How do I remove them from NVRAM without a reboot?</p>
","<p><code>reload</code> is the only way to purge them.</p>
","2382"
"mtr output with high packet loss on one hop","7223","","<p>I'm investigating a complaint of poor performance from an end user accessing a site I help maintain.</p>

<p>I have these two mtr outputs to the end user, the first from the site:</p>

<pre><code>                                       Packets               Pings
 Host                                Loss%   Snt   Last   Avg  Best  Wrst StDev
 1. 198.199.92.253                    0.0%   200    7.3   4.2   0.9  89.6   8.0
 2. 69.22.130.37                      0.0%   200    0.4   2.5   0.3  51.4   8.0
 3. 69.22.143.170                    42.5%   200    1.3   2.0   1.1  47.9   4.9
 4. 69.22.143.165                     0.0%   200    2.3   6.4   1.6  56.9   9.7
 5. 206.223.116.86                    0.0%   200    2.5   3.0   1.8  14.1   1.5
 6. 64.125.24.1                       0.0%   200    3.0   6.9   2.2  65.7   9.9
 7. 64.125.26.230                     0.0%   200   56.3  61.4  55.6 119.0  10.0
 8. 64.125.24.33                      0.5%   200   76.4  78.9  76.0 116.1   7.1
 9. 64.125.29.38                      0.0%   200   73.9  77.5  73.4 238.8  13.4
10. 64.125.31.181                     0.5%   200  160.0 159.4 156.2 181.4   4.3
11. 64.125.32.93                      0.0%   200  156.9 157.8 155.9 217.0   6.8
12. 62.253.174.190                    0.0%   200  166.0 166.5 165.6 172.8   1.2
13. 62.253.175.217                    0.0%   200  162.1 163.1 161.7 200.4   4.2
14. 213.105.159.194                   0.0%   200  163.8 165.0 163.4 241.2   8.3
15. 81.97.112.218                     0.0%   200  164.7 166.5 164.5 220.0   7.4
16. ???
</code></pre>

<p>and the second from my network:</p>

<pre><code>                                       Packets               Pings
 Host                                Loss%   Snt   Last   Avg  Best  Wrst StDev
 1. 216.16.235.1                      0.0%   115    0.4   0.4   0.3   0.6   0.1
 2. 216.16.232.37                     0.0%   115    0.9   0.9   0.6  18.8   1.7
 3. 216.16.255.141                    0.0%   115    0.8   0.7   0.6   1.1   0.1
 4. 216.16.255.130                    0.0%   114    1.0   1.0   0.8   1.4   0.1
 5. 24.153.3.141                      0.0%   114    1.9   3.6   1.5   6.5   1.2
 6. 64.71.241.97                      0.0%   114    3.4   5.3   3.3   7.4   1.1
 7. ???
 8. 64.124.128.193                   34.5%   114   18.9  19.2  18.7  39.0   2.3
 9. 64.125.21.74                      0.0%   114   19.2  20.4  18.9  49.9   5.0
10. 64.125.29.38                      0.0%   114   19.3  23.1  19.2  48.3   7.6
11. 64.125.27.186                     0.9%   114  105.2 106.1 105.1 137.8   3.2
12. 64.125.32.93                      0.0%   114  106.3 107.1 106.1 163.3   5.8
13. 62.253.174.190                    0.0%   114  181.8 123.5 115.8 206.3  20.9
14. 62.253.175.217                    0.0%   114  113.8 114.8 113.6 144.3   4.2
15. 213.105.159.194                   0.0%   114  115.3 115.9 115.2 163.5   4.6
16. 81.97.112.218                     0.0%   114  113.3 114.4 113.2 140.7   4.5
17. ???
</code></pre>

<p>How should I interpret those hops with MASSIVE packet loss? I'm inclined to think those hops have some sort of asymmetric routing going on and one of the paths is congested.</p>

<p>Could this cause any problem for the end user?</p>
","<p>MTR uses ICMP, which is often rate limited on the internet due to how it can be misused to created problems (high CPU, wasted bandwidth, DoS, etc).</p>

<p>When you see output like this, generally this is a sign that rate limiting for ICMP is in place.  With a quick web search I found this <a href=""https://library.linode.com/linux-tools/mtr#sph_icmp-rate-limiting"">documentation</a> regarding using MTR.  While it is not official it looks decent (at least with a quick scan) and provides examples of some problems you may find using MTR.</p>
","3880"
"Cisco Router Limiting Bandwidth","7210","","<p>I have a Cisco 2621XM connected straight to my ISP modem. I have a computer on the second interface of the router.</p>

<p>Topology: </p>

<pre><code>ISP -&gt; Modem -&gt; Cisco Router -&gt; Computer
</code></pre>

<p>When I run a speedtest on my computer I get 30/10. When I connect my computer straight to my modem I get 100/10. I also have another Cisco Router, 871. Same exact results, I get 30/10 when I connect my computer to it. </p>

<p>I'm starting to think that it's a default setting that comes baked into the router? Here's my config:</p>

<pre><code>version 12.4
service timestamps debug datetime msec
service timestamps log datetime msec
no service password-encryption
!
hostname Router
!
boot-start-marker
boot-end-marker
!
enable secret 5 &lt;REMOVED&gt;
!
no aaa new-model
!
resource policy
!
no network-clock-participate slot 1
no network-clock-participate wic 0
ip subnet-zero
ip cef
!
no ip dhcp use vrf connected
ip dhcp excluded-address 10.4.4.1 10.4.4.100
!
ip dhcp pool ALL_ACCESS
   network 10.4.4.0 255.255.255.0
   dns-server 8.8.8.8 8.8.4.4
   default-router 10.4.4.1
!
interface FastEthernet0/0
 ip address 10.4.4.1 255.255.255.0
 ip nat inside
 speed 100
 full-duplex
!
interface Serial0/0
 no ip address
 shutdown
!
interface FastEthernet0/1
 ip address dhcp
 ip nat outside
 duplex auto
 speed auto
!
ip classless
!
no ip http server
no ip http secure-server
ip nat inside source list 1 interface FastEthernet0/1 overload
!
access-list 1 permit 10.4.4.0 0.0.0.255
!
control-plane
!
line con 0
 logging synchronous
line aux 0
line vty 0 4
 login
line vty 5 181
 login
!
end
</code></pre>

<p>Output from <code>show interface</code>:</p>

<pre><code>Router#sh interfaces FastEthernet0/1
FastEthernet0/1 is up, line protocol is up
  Hardware is AmdFE, address is 000e.3836.ff41 (bia 000e.3836.ff41)
  Internet address is xxx.xxx.xxx.xxx/xx
  MTU 1500 bytes, BW 100000 Kbit, DLY 100 usec,
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation ARPA, loopback not set
  Keepalive set (10 sec)
  Full-duplex, 100Mb/s, 100BaseTX/FX
  ARP type: ARPA, ARP Timeout 04:00:00
  Last input 00:00:00, output 00:00:00, output hang never
  Last clearing of ""show interface"" counters never
  Input queue: 1/75/128247/0 (size/max/drops/flushes); Total output drops: 0
  Queueing strategy: fifo
  Output queue: 0/40 (size/max)
  5 minute input rate 51000 bits/sec, 41 packets/sec
  5 minute output rate 4000 bits/sec, 6 packets/sec
     16778657 packets input, 2855708480 bytes
     Received 5967982 broadcasts, 0 runts, 0 giants, 0 throttles
     69379 input errors, 0 CRC, 0 frame, 15274 overrun, 54105 ignored
     0 watchdog
     0 input packets with dribble condition detected
     3231581 packets output, 590804149 bytes, 0 underruns
     0 output errors, 0 collisions, 2 interface resets
     0 babbles, 0 late collision, 0 deferred
     484 lost carrier, 0 no carrier
     0 output buffer failures, 0 output buffers swapped out
</code></pre>

<p><code>sh interfaces FastEthernet0/1 status</code> - Doesn't output anything</p>
","<p>Neither of the routers you are referencing will ever be able to run at line rate.  While the 2621XM is a better ""class"" of device, it is much older, so the performance is actually similar.</p>

<p>While dated, <a href=""http://www.cisco.com/web/partners/downloads/765/tools/quickreference/routerperformance.pdf"">this document</a> contains details for both routers you mention.</p>

<p>The ""overrun"" and ""ignored"" errors in your interface output indicate you are trying to pass more data through the device than it can handle.</p>
","14693"
"Why do we need IPv6?","7163","","<p>This will be a kind of newbie question but I am not quite sure why we really need IPv6. AFAIK, the story is as follows:</p>

<p>In the olden days, when computers were not plentiful, 32 bit IP addresses were enough for everybody. At these times, the subnet mask was implicit. Then the number of computers have increased and 32 bits started to become insufficient.</p>

<p>So the subnet mask started to become explicit. Essentially the size of an IP address has increased.</p>

<p>My question is, what is the downside of continuing the addressing with the subnet masks? For example when they become insufficient as well, can't we continue with using ""subnet-subnet masks"" etc.?</p>

<p>I understand that it consumes more space than the original IPv4 (and maybe not much different than using IPv6) but aren't explicit subnet masks a sufficient solution? If not, why are they an insufficient solution?</p>
","<p>Two things are getting confused here:</p>

<ul>
<li>classful addressing vs CIDR</li>
<li>Masquerading / NAT</li>
</ul>

<p>Going from classful addressing to Classless Inter Domain Routing (CIDR) was an improvement that made the address distribution to ISPs and organisations more efficient, thereby also increasing the lifetime of IPv4. In classful addressing an organisation would get one of these:</p>

<ul>
<li>a class A network (a /8 in CIDR terms, with netmask 255.0.0.0)</li>
<li>a class B network (a /16 in CIDR terms, with netmask 255.255.0.0)</li>
<li>a class C network (a /24 in CIDR terms, with netmask 255.255.255.0)</li>
</ul>

<p>All of these classes were allocated from fixed ranges. Class A contained all addresses where the first digit was between 1 and 126, class B was from 128 to 191 and class C from 192 to 223. Routing between organisations had all of this hard-coded into the protocols.</p>

<p>In the classful days when an organisation would need e.g. 4000 addresses there were two options: give them 16 class C blocks (16 x 256 = 4096 addresses) or give them one class B block (65536 addresses). Because of the sizes being hard-coded the 16 separate class C blocks would all have to be routed separately. So many got a class B block, containing many more addresses than they actually needed. Many large organisations would get a class A block (16,777,216 addresses) even when only a few hundred thousand were needed. This wasted a lot of addresses.</p>

<p>CIDR removed these limitations. Classes A, B and C don't exist anymore (since ±1993) and routing between organisations can happen on any prefix length (although something smaller than a /24 is usually not accepted to prevent lots of tiny blocks increasing the size of routing tables). So since then it was possible to route blocks of different sizes, and allocate them from any of the previously-classes-A-B-C parts of the address space. An organisation needing 4000 addresses could get a /20, which is 4096 addresses.</p>

<p>Subnetting means dividing your allocated address block into smaller blocks. Smaller blocks can then be configured on physical networks etc. It doesn't magically create more addresses. It only means that you divide your allocation according to how you want to use it.</p>

<p>What did create more addresses was Masquerading, better known as NAT (Network Address Translation). With NAT one device with a single public address provides connectivity for a whole network with private (internal) addresses behind it. Every device on the local network thinks it is connected to the internet, even when it isn't really. The NAT router will look at outbound traffic and replace the private address of the local device with its own public address, pretending to be the source of the packet (which is why it was also known as masquerading). It remembers which translations it has made so that for any replies coming back it can put back the original private address of the local device. This is generally considered a hack, but it worked and it allowed many devices to send traffic to the internet while using less public addresses. This extended the lifetime of IPv4 immensely.</p>

<p>It is possible to have multiple NAT devices behind each other. This is done for example by ISPs that don't have enough public IPv4 addresses. The ISP has some huge NAT routers that have a handful of public IPv4 addresses. The customers are then connected using a special range of IPv4 addresses (<code>100.64.0.0/10</code>, although sometimes they also use normal private addresses) as their external address. The customers then again have  NAT router that uses that single address they get on the external side and performs NAT to connect a whole internal network which uses normal private addresses.</p>

<p>There are a few downsides to having NAT routers though:</p>

<ul>
<li>incoming connections: devices behind a NAT router can only make outbound connections as they don't have their own 'real' address to accept incoming connections on</li>
<li>port forwarding: this is usually made less of a problem by port forwarding, where the NAT routed dedicates some UDP and/or TCP ports on its public address to an internal device. The NAT router can then forward incoming traffic on those ports to that internal device. This needs the user to configure those forwardings on the NAT router</li>
<li>carrier grade NAT: is where the ISP performs NAT. Yyou won't be able to configure any port forwarding, so accepting any incoming connections becomes (bit torrent, having your own VPN/web/mail/etc server) impossible</li>
<li>fate sharing: the outside world only sees a single device: that NAT router. Therefore all devices behind the NAT router share its fate. If one device behind the NAT router misbehaves it's the address of the NAT router that ends up on a blacklist, thereby blocking every other internal device as well</li>
<li>redundancy: a NAT router must remember which internal devices are communicating through it so that it can send the replies to the right device. Therefore all traffic of a set of users must go through a single NAT router. Normal routers don't have to remember anything, and so it's easy to build redundant routes. With NAT it's not.</li>
<li>single point of failure: when a NAT router fails it forgets all existing communications, so all existing connections through it will be broken</li>
<li>big central NAT routers are expensive</li>
</ul>

<p>As you can see both CIDR and NAT have extended the lifetime of IPv4 for many many years. But CIDR can't create more addresses, only allocate the existing ones more efficiently. And NAT does work, but only for outbound traffic and with higher performance and stability risks, and less functionality compared to having public addresses.</p>

<p>Which is why IPv6 was invented: Lots of addresses and public addresses for every device. So your device (or the firewall in front of it) can decide for itself which inbound connections it wants to accept. If you want to run your own mail server that is possible, and if you don't want anybody from the outside connecting to you: that's possible too :)  IPv6 gives you the options back that you used to have before NAT was introduced, and you are free to use them if you want to.</p>
","24141"
"Does 2504 WLC support LAG?","7162","","<p>I am finding some contradictions in Cisco documentation about the LAG support in 2504 WLC. On one hand, the <a href=""http://www.cisco.com/en/US/products/ps11630/products_tech_note09186a0080b8450c.shtml"">Cisco 2500 Series Wireless Controller Deployment Guide</a> clearly states:</p>

<blockquote>
  <p>Note: Link Aggregation (LAG) is not supported on the Cisco 2500 Series
  Wireless Controller.</p>
</blockquote>

<p>On the other hand, the brochure <a href=""http://www.cisco.com/en/US/prod/collateral/modules/ps2706/at_a_glance_c45-652653.pdf"">Cisco Wireless LAN Controllers at a glance</a> states 2504  does support LAG.</p>

<p>After some search, I have found the bulletin for <a href=""http://www.cisco.com/en/US/prod/collateral/wireless/ps6302/ps8322/ps10315/product_bulletin_c25-722724.html"">Cisco Unified Wireless Network Software Release 7.4</a> stating:</p>

<blockquote>
  <p>Wireless Controllers 8500, 2500, and Flex 7500 now support Link
  Aggregation Group (LAG).</p>
</blockquote>

<p>What makes me think the LAG support in the 2504 would be depending on the software version loaded on the device. </p>

<p>Since the only 2504 I can work on is having 7.2 software version and is in a production environment (not easy to upgrade and test on it), I still wonder:</p>

<ol>
<li>Does the 2504 WLC really support LAG? </li>
<li>Does it require a minimum software version or any additional hardware for it?</li>
<li>Is it having any limitation or is the same LAG functionality as in 5500 WLC series? </li>
</ol>
","<p><strong>Yes, the 2504 supports LAG in v7.4.</strong>  Your first guide refers to v7.0.116.0 and the second guide written in 5/2013 implies v7.4.  Enabling LAG requires a reboot of the WLC and has limitations similar to the 5500.</p>

<blockquote>
  <p>When LAG is enabled on a WLC, the WLC forwards data frames on the same port on which they were received. The WLC relies on the neighbor switch to load-balance traffic across the EtherChannel. The WLC does not perform any EtherChannel load-balancing on its own.</p>
</blockquote>

<p>Limitations/Restrictions, same as 5500 but note 5508 doesn't have ap-manager inf's:</p>

<blockquote>
  <ul>
  <li>LAG requires the EtherChannel to be configured for 'mode on' on both
  the controller and the Catalyst switch. </li>
  <li>The load-balancing method configured on the Catalyst switch must be a
  load-balancing method that terminates all IP datagram fragments on a
  single controller port. Not following this recommendation may result
  in problems with access point association. </li>
  <li>The recommended load-balancing method for Catalyst switches is src-dst-ip (enter the
  port-channel load-balance src-dst-ip command). </li>
  <li>With LAG, all of the controller ports need to connect to the same neighbor switch. <strong>If the neighbor switch goes down, the controller
  loses connectivity.</strong>  With multiple AP-manager interfaces, you can
  connect your ports to different neighbor devices. If one of the
  neighbor switches goes down, the controller still has connectivity.
  However, using multiple AP-manager interfaces presents certain
  challenges when port redundancy is a concern. </li>
  <li>Port mirroring is not supported when link aggregation (LAG) is enabled on the controller.</li>
  </ul>
</blockquote>
","1658"
"How to connect 5 different networks together?","7149","","<p>I have a network consisting of three servers in a data center, all of which are connected to each other via a switch.</p>

<p>In addition to this I need this network to access 4 additional networks, most of which are provided via cross connects to other data centers, as well as the Internet.</p>

<p>Basically the networks are as follows:</p>

<ul>
<li>LocalNetwork (192.168.0.1)</li>
<li>Equinex (10.4.131.1)</li>
<li>Atrium (204.10.83.1)</li>
<li>Internet (...)</li>
<li>HongKong (10.10.101.1)</li>
</ul>

<p>I have hired a network professional to give advice but his solution involved 3 routers which individually cost 1200 dollars a piece and a switch and it's still having issues.</p>

<p>I am not a network professional myself, only a developer, but I believe as though this should only require one single switch to connect the three server computers together to form LocalNetwork, and one single router to connect the 5 networks together.</p>

<p>My issue is that every router I've seen seems to just be a switch with one WAN port to connect to the Internet. Is there not an example of a basic router that has say 5 or more ports in it that allow me to connect 5 networks together? Can I not just solve this problem with a single switch and a single router?</p>
","<p>3 routers sounds like overkill to me but it would be interesting to see the topology and hear him explain the reason behind it.</p>

<p>Depending on your requirements for redundancy and/or loadbalancing a 1921/1941 could be fine for your needs. That would be only one device because it has both routing and switching if you stick a HWIC Etherswitch card in it. </p>

<p>The high availability design would be to have two routers and two switches but then the servers should be dually connected as well.</p>
","617"
"Access a Palo Alto VPN using Mint","7135","","<p>I'm Java developer and sometimes I need to test the development using the database of the client. So they give access using Windows and Mac by a program called <code>Palo Alto Global Protect</code> where I need to put my login, password and address of the gateway.</p>

<p>So I tried to configure the settings by myself but I couldn't connect. I asked the support team to configure it, they tried but it doesn't work.</p>

<p>I have one virtual machine using <code>Virtual Box</code> that I can install the program.</p>

<p>So there is one way to get the access to this <code>VPN</code> or configure it?</p>

<p>I'm using <code>Linux Mint</code>.</p>
","<p>The thing is that you are not using the official Global Protect client so you need and extra configuration step in the firewall. You need to define X-Auth support (on the firewall) and all related fields.</p>

<p>After that, you can use any SSL VPN Standard client. I confirm it works for me in Linux and IOS (the iphone thing, not the Cisco :P).</p>

<p>This link would be quite useful for you. <a href=""http://blog.webernetz.net/2014/03/31/palo-alto-globalprotect-for-linux-with-vpnc/"" rel=""nofollow"">http://blog.webernetz.net/2014/03/31/palo-alto-globalprotect-for-linux-with-vpnc/</a></p>
","19489"
"How Layer-2 data will be fragmented?","7126","","<p>Got a doubt while studying about LLC layer. From Network layer I came to know that IP fragmentation will be done, For L4 TCP will segment the data.</p>

<p>Here, the question is Protocols starting from Layer-2 (For eg : STP , RSTP), who will fragment the data.</p>
","<p>Layer 2 does not do any fragmentation.  It is up to L3 to pass data to L2 in a packet/frame size that will already match L2's MTU.  In fact, the reason L3 does fragmentation in the first place is is because of the limitations of the L2 Protocol.  </p>

<p>IP doesn't care if the packet size is 1500 bytes of 9999 bytes, it just knows what its underlying L2 protocol can handle.  The ""Packet Length"" field in the IP header is a 16 bit value, which means IP can create a packet as big as 65536 bytes if necessary, but only if the underlying L2 fabric can support it.</p>

<p>Now specifically speaking for ""L2 protocols"" like CDP, STP, VTP, (etc...), those by design send very small sized frames that should never need to be broken up into smaller frames.  So what you said is, in a way, correct, that the protocol itself handles the fragmentation (by means of not needing to send frames that would require any additional fragmentation).</p>
","5608"
"How do I power on devices in CCNA Packet Tracer?","7100","","<p>As the question says, i need an answer. I cannot find the power button.</p>
","<p>When you double click on a device in Packet Tracer, there is a section for the physical parts of the device (I believe the far right tab, but I can't be sure I'm not close to my computer with Packet Tracer). Here you can change and add drives, interfaces by drag and drop. On that same page there is also the power switch.</p>
","25446"
"How to download startup configuraton from a remote server on Cisco NX-OS","7077","","<p>I am trying to replace the startup configuration on Cisco Nexus device using a file on remote server. I tried the instructions given at this page:</p>

<p><a href=""http://www.cisco.com/c/en/us/td/docs/switches/datacenter/sw/4_0/nx-os/fundamentals/configuration/guide2/fun_nx-os_book/fun_config_files.html#wp1236980"" rel=""nofollow"">Working With Configuration Files: Downloading the Startup Configuration From a Remote Server</a></p>

<p>So, I tried running command <code>copy tftp://&lt;server-ip-address&gt;/nexus-startup.cfg startup-config</code> and got the following output with error:</p>

<pre><code>Nexus7K01# copy tftp://172.16.38.4/nexus7k01.cfg startup-config
Enter vrf (If no input, current vrf 'default' is considered): management
Trying to connect to tftp server......
Connection to Server Established.
TFTP get operation was successful
sysmgr_copy_nvram_dest_action: src uri_type = 2 is not supported yet
Nexus7K01#
</code></pre>

<p>I tried to copy the file using all the four remote server protocol and got the same error with different URI type. <code>1 for FTP, 128 for SCP and 512 for SFTP</code>.</p>

<p>The device is a Cisco Nexus 7000 series device with following details:</p>

<pre><code>Software
  BIOS:      version 3.22.0
  kickstart: version 6.1(3)
  system:    version 6.1(3)

Hardware
  cisco Nexus7000 C7010 (10 Slot) Chassis (""Supervisor module-1X"")
  Intel(R) Xeon(R) CPU         with 8251588 kB of memory.
</code></pre>

<p>Please let me know what am I doing wrong and how can I rectify this error.</p>

<p>Thanks in advance!</p>

<p>-Varun</p>
","<p>I would first check that you correctly have the 'nexus-startup.cfg' in your TFTP root folder, so that it's not a path issue.  I suggest this because the uri error your getting would suggest the path is not found.  Also - you'll need to address your syntax.  Following from Nx-OS contextual help:</p>

<pre><code> tftp:  Enter URL ""tftp:[//server[:port]][/path]""
</code></pre>

<p>Also - I would try just copying it to your flash and then to startup-config after that if it's not liking the syntax you used to copy it over.</p>

<p><strong>UPDATE:</strong></p>

<p>This known issue with your NX-OS version could be related, or even the root cause:</p>

<pre><code>CSCud05567
Symptom : Following a system switchover, copying to bootflash on the supervisor module does not work.

Conditions : This symptom might be seen under normal operating conditions for a Cisco Nexus 7000 Series device.

Workaround : None.
</code></pre>

<p>Source is <a href=""http://www.cisco.com/c/en/us/td/docs/switches/datacenter/sw/6_x/nx-os/release/notes/61_nx-os_release_note.html#pgfId-608687"" rel=""nofollow"" title=""HERE"">HERE</a></p>

<p>The good news is that this issue is only appearing from 6.1, so if you are in a position to move down to 6.0 family of NX-OS you should be good.  My personal preference anyway is to stay a family behind the latest and greatest unless there's a security patch.</p>
","10323"
"Difference between Symmetric and Cone NATs","7071","","<p>I am studying questions fro SelfTest Software 70-642, and on Question 70-642.3.1.7 </p>

<blockquote>
  <p>You are a network administrator for your company. The company network
  consists of Windows Server 2008 R2 servers and Windows XP Service Pack
  2 (SP2) client computers. You want to set up network address
  translators (NATs) to ensure that NATs map the same internal address
  and port number to different external addresses and ports. You must
  also ensure that the mapping is done depending on the address of the
  external destination address for outbound traffic. </p>
  
  <p>What should you do?</p>
</blockquote>

<p>The choices are</p>

<ol>
<li>Configure cone NATs</li>
<li>Configure restricted NATs</li>
<li>Configure static mappings</li>
<li>Configure symmetric NATs.</li>
</ol>

<p>I believe the answer should be <code>Configure cone NATs</code>, but the software says the answer is <code>Configure symmetric NATs</code> and explains:</p>

<blockquote>
  <p>You should configure symmetric NATs to ensure that NATs map the same
  internal address and port number to different external addresses and
  ports. Symmetric NATs also ensure that mapping is done depending on
  the address of the external destination address for outbound traffic.</p>
</blockquote>

<p>This makes no sense to me, because this doesn't sound symmetric, i.e. internal is same, external can be different. </p>

<p>Then they continue </p>

<blockquote>
  <p>Cone NATs are typically used to store a mapping between an internal
  address and port number and an external address and port number in the
  NAT translation table.</p>
</blockquote>

<p>This also makes no sense to me, and it sound like it should be called ""Symmetric"", while the NAT mapping for symmetric should be called ""Cone""</p>

<p>Then when I googled this (<a href=""http://www.cisco.com/web/about/ac123/ac147/archived_issues/ipj_7-3/anatomy.html"" rel=""nofollow noreferrer"">http://www.cisco.com/web/about/ac123/ac147/archived_issues/ipj_7-3/anatomy.html</a>), I get the following for Symmetric, where single internal address and port maps to a single external address and port</p>

<p><img src=""https://i.stack.imgur.com/dalkt.gif"" alt=""enter image description here""></p>

<p>And for Cone, the following shows a single internal address and port that maps to multiple external addresses and ports</p>

<p><img src=""https://i.stack.imgur.com/MZSD1.gif"" alt=""enter image description here""></p>

<p>Did the SelfTest software make an error?</p>
","<p>An <em>external address</em> is ""our"" global address that identifies an internal/local address* inside to the outside world. This translation is through NAT. For example, NAT translates the source address in an outbound packet from local  192.168.1.1 to global ""external address"" that we own, e.g. 10.10.10.10. </p>

<p>On the other hand, an <em>external destination</em> is the address of some host we want to access, outside.</p>

<p>Cone &amp; Symmetric NAT here is concerned (aside from restrictions) with how we assign ""our"" external address depending on the external destination addresses/ports. The same internal IP address and port are assumed.</p>

<p>A Cone NAT takes the analogy of a cone, there's just one cone apex (vertex) which is a single external address (and that is OUR global address that replaces our local address) and it applies whatever the destination is, so the Cone's base surface is all destination address. The same internal IP is assumed, so it's not part of that analogy.</p>

<p>The Symmetric NAT alludes to the symmetry of mapping each destination address to an external address, so there's many external addresses that are mapping according to the destination addresses (which was that Test's question).</p>

<p>Review the definitions, according to <a href=""http://tools.ietf.org/html/rfc3489"" rel=""nofollow"">RFC 3489</a></p>

<blockquote>
  <p><em>Full Cone NAT</em> is one where <em>all requests</em> from the same internal IP address and port are mapped to the <em>same external IP</em> address and port.  Furthermore, <em>any external host</em> can send a packet to the internal host, by sending a packet to the mapped external address.</p>
  
  <p><em>Symmetric NAT</em> is one where all requests from the same internal IP address and port, to a <em>specific destination IP</em> address and port, are mapped to the <em>same external IP</em> address and port. 
  If the same host sends a packet with the same source address and port, but to a <em>different destination</em>, a <em>different mapping</em> is used.  Furthermore, only the external host that receives a packet can send a UDP packet back to the internal host.</p>
</blockquote>

<p>*An address should be taken to mean an IP Address with Port number.</p>
","12899"
"Juniper Filesystem Full","7048","","<p>Our Splunk server recently reported an error on one of our Juniper EX 4200s. <sup>1</sup></p>

<pre><code>Aug  4 11:45:16  25SRV01 /kernel: pid 7661 (dd), uid 0 inumber 217 on /var: filesystem full
</code></pre>

<p>It appears our <code>/var</code> filesystem is full and is no longer accepting log messages.  This is also causing premature rotation of some of our files.</p>

<pre><code>rj@25SRV01# run show log interactive-commands.0.gz | last 1
Aug  4 11:40:16 25SRV01 newsyslog[7609]: logfile turned over due to -F request
rj@25SRV01# run show log firewall.0.gz | last 1
Aug  4 11:40:16 25SRV01 newsyslog[7609]: logfile turned over due to -F request
</code></pre>

<p>There doesn’t seem to be anything out of the ordinary with this system versus the rest of our devices.  Below is our configuration. <sup>2</sup></p>

<pre><code>rj@25SRV01# show system syslog
user * {
    any emergency;
}
file syslog {
    any any;
}
file firewall {
    firewall any;
}
file messages {
    any notice;
    authorization info;
}
file interactive-commands {
    interactive-commands any;
}
{master:0}[edit] 
</code></pre>

<p>The strange thing is that there isn’t that much actual data in our log files.</p>

<pre><code>root@25SRV01:RE:0% du -h /var/log/.
2.0K    /var/log/./flowc/failed
4.0K    /var/log/./flowc
2.0K    /var/log/./ext
2.0K    /var/log/./ggsn/gtppcdr
4.0K    /var/log/./ggsn
2.8M    /var/log/.      &lt;--- very reasonable log size
</code></pre>

<p>I've looked in the Juniper Knowledge Article: <a href=""http://kb.juniper.net/InfoCenter/index?page=content&amp;id=KB22966&amp;actp=RSS"" rel=""nofollow"">How to resolve the '/var: filesystem full' issue which occurs as result of the WTMP file not being archived</a>, but my WTMP file is resonably sized.</p>

<pre><code>root@25SRV01:RE:0% ls -lsah wtmp*
3040 -rw-rw-r--  1 root  wheel   1.5M Aug  4 13:48 wtmp   &lt;----- Small enough
   4 -rw-rw-r--  1 root  wheel    91B Nov 19  2013 wtmp.0.gz
   4 -rw-rw-r--  1 root  wheel    57B Jun 14  2013 wtmp.1.gz
   4 -rw-rw-r--  1 root  wheel    82B Nov 19  2013 wtmp.2.gz
root@25SRV01:RE:0%
</code></pre>

<p>How do I figure out what's taking up the space and fix it?</p>

<hr>

<p><sub>1. I am aware that this pid was induced with <code>dd</code>, which was intentional to replicate an issue we have had in the past.  I noticed a device getting near the limit and want to share a common issue we have. Command used: <code>dd if=/dev/random of=/var/overrun.pkg bs=1M count=20</code>.</sub><br>
<sub>2. Some log configuration removed for organizational restrictions, such as <code>syslog host</code> and <code>syslog source-address</code>.</sub></p>
","<p>There are 3 real ways to fix this, all of which are fairly simple.</p>

<h2>Automated Storage Cleanup</h2>

<p>Juniper has a <a href=""http://www.juniper.net/techpubs/en_US/junos13.2/topics/reference/command-summary/request-system-storage-cleanup.html"" rel=""nofollow"">system cleanup tool</a> for handling this automatically.  It operates almost exclusively under the <code>/var/*</code> directory structure; meaning it isn’t all that critical, unless you care about your log files (which you should!).</p>

<p>Below is a <code>system storage cleanup</code> on multiple FPCs.</p>

<pre><code>rj@25SRV01# run request system storage cleanup
Please check the list of files to be deleted using the dry-run option. i.e.
request system storage cleanup dry-run
Do you want to proceed ? [yes,no] (no) yes

fpc0:
--------------------------------------------------------------------------

List of files to delete:

         Size Date         Name
    11B Nov 19  2013 /var/jail/tmp/alarmd.ts
  71.8K Jun 28 20:54 /var/log/chassisd.0.gz
   147B Aug  5 07:52 /var/log/default-log-messages.0.gz
   142B Aug  4 13:16 /var/log/default-log-messages.1.gz
   125B Aug  4 11:40 /var/log/default-log-messages.2.gz
   135B Aug  5 07:52 /var/log/firewall.0.gz
   130B Aug  4 13:16 /var/log/firewall.1.gz
  3045B Aug  4 11:40 /var/log/firewall.2.gz
  8265B Nov 19  2013 /var/log/firewall.3.gz
   298B Nov 19  2013 /var/log/install.0.gz
  1708B Aug  5 07:52 /var/log/interactive-commands.0.gz
  1275B Aug  4 13:16 /var/log/interactive-commands.1.gz
  8465B Aug  4 11:40 /var/log/interactive-commands.2.gz
 &lt;snip&gt;
 124.0K Jun 14  2013 /var/tmp/gres-tp/env.dat
     0B Jun 14  2013 /var/tmp/gres-tp/lock
 106.3M Jul 31 08:16 /var/tmp/mchassis-install.tgz
     0B Jun 14  2013 /var/tmp/rtsdb/if-rtsdb

fpc1:
--------------------------------------------------------------------------

List of files to delete:

         Size Date         Name
    11B Jun 14  2013 /var/jail/tmp/alarmd.ts
   147B Aug  5 07:52 /var/log/default-log-messages.0.gz
   144B Aug  4 13:16 /var/log/default-log-messages.1.gz
   126B Aug  4 11:40 /var/log/default-log-messages.2.gz
   135B Aug  5 07:52 /var/log/firewall.0.gz
   &lt;snip&gt;
    27B Oct 20  2013 /var/log/wtmp.2.gz
    27B Sep 20  2013 /var/log/wtmp.3.gz
    27B Sep 20  2013 /var/log/wtmp.4.gz
     5B Jun 14  2013 /var/lost+found/#04112
     5B Jun 14  2013 /var/lost+found/#04163
 124.0K Jul 30 16:43 /var/tmp/gres-tp/env.dat
     0B Jun 14  2013 /var/tmp/gres-tp/lock
     0B Jun 14  2013 /var/tmp/rtsdb/if-rtsdb

{master:0}[edit]
rj@25SRV01# 
</code></pre>

<p>This is the preferred Juniper way of handling this. Running this with the <code>dry-run</code> option will show you what will be deleted ahead of time.  You should do this first.</p>

<hr>

<h2>Locate the Offending File</h2>

<p>You should be sending all of your logs to a syslog collector, making option 1 the best solution. If, however, you aren't and would rather not delete <strong>all</strong> of your log files, you may fare better at finding the offending file yourself.  You will need a tad bit more familiarity with Unix systems, but if you know your way around the CLI, you should be alright.</p>

<p>First you’ll want to see how much over you are on that specific volume.</p>

<pre><code>rj@25SRV01# run start shell user root
Password:
root@25SRV01:RE:0% df -h
Filesystem       Size    Used   Avail Capacity  Mounted on
/dev/da0s2a      183M    129M     39M    77%    /
devfs            1.0K    1.0K      0B   100%    /dev
/dev/md0          68M     68M      0B   100%    /packages/mnt/jbase
/dev/md1         5.8M    1.1M    4.2M    21%    /packages/mfs-fips-mode-powerpc
/dev/md2         2.9M    2.9M      0B   100%    /packages/mnt/fips-mode-powerpc-12.3R3.4
/dev/md3         9.0M    4.4M    3.9M    53%    /packages/mfs-jcrypto-ex
/dev/md4          12M     12M      0B   100%    /packages/mnt/jcrypto-ex-12.3R3.4
/dev/md5         8.1M    3.5M    4.0M    47%    /packages/mfs-jdocs-ex
/dev/md6         6.2M    6.2M      0B   100%    /packages/mnt/jdocs-ex-12.3R3.4
/dev/md7          43M     39M    718K    98%    /packages/mfs-jkernel-ex
/dev/md8         107M    107M      0B   100%    /packages/mnt/jkernel-ex-12.3R3.4
/dev/md9          12M    7.5M    3.6M    68%    /packages/mfs-jpfe-ex42x
/dev/md10         21M     21M      0B   100%    /packages/mnt/jpfe-ex42x-12.3R3.4
/dev/md11         17M     12M    3.2M    79%    /packages/mfs-jroute-ex
/dev/md12         38M     38M      0B   100%    /packages/mnt/jroute-ex-12.3R3.4
/dev/md13         12M    7.2M    3.6M    66%    /packages/mfs-jswitch-ex
/dev/md14         21M     21M      0B   100%    /packages/mnt/jswitch-ex-12.3R3.4
/dev/md15         14M    9.5M    3.4M    73%    /packages/mfs-jweb-ex
/dev/md16         25M     25M      0B   100%    /packages/mnt/jweb-ex-12.3R3.4
/dev/da0s3e      123M    122M   -8.6M   108%    /var  &lt;---- # This doesn't look right
/dev/md17        126M     12K    116M     0%    /tmp
/dev/da0s3d      369M    106M    233M    31%    /var/tmp
/dev/da0s4d       62M    368K     57M     1%    /config
/dev/md18        118M     22M     87M    20%    /var/rundb
procfs           4.0K    4.0K      0B   100%    /proc
/var/jail/etc    123M    122M   -8.6M   108%    /packages/mnt/jweb-ex-12.3R3.4/jail/var/etc
/var/jail/run    123M    122M   -8.6M   108%    /packages/mnt/jweb-ex-12.3R3.4/jail/var/run
/var/jail/tmp    123M    122M   -8.6M   108%    /packages/mnt/jweb-ex-12.3R3.4/jail/var/tmp
/var/tmp         369M    106M    233M    31%    /packages/mnt/jweb-ex-12.3R3.4/jail/var/tmp/uploads
devfs            1.0K    1.0K      0B   100%    /packages/mnt/jweb-ex-12.3R3.4/jail/dev
root@25SRV01:RE:0%
</code></pre>

<p>Next, you’ll need to figure out where you’re large directories are.</p>

<pre><code>root@25SRV01:RE:0% du /var/ | sort -r
8       /var/transfer
24      /var/lost+found/#08193/certs/common
24      /var/etc/filters
24      /var/db/certs/common
232     /var/jail
223156  /var/lost+found
217992  /var/tmp
217756  /var/lost+found/#04099
217736  /var/lost+found/#04099/remote   &lt;----- # Possible Issue
208     /var/jail/etc
root@25SRV01:RE:0% du -h /var/lost+found/#04099/remote
2.0K    /var/lost+found/#04099/remote/.ssh
106M    /var/lost+found/#04099/remote  &lt;------ # Culprit
root@25SRV01:RE:0%
</code></pre>

<p>In this instance, we can see that something is happening inside <code>/var/lost+found/#04099/remote</code>, it’s using 106M of a 123M volume.</p>

<p>Go there, find the file and remove it.</p>

<pre><code>root@25SRV01:RE:0% cd /var/lost+found/#04099/remote
root@25SRV01:RE:0% ls -lsah
total 217740
     4 drwxr-xr-x  3 remote  20      512B Nov  7  2013 .
     4 drwxr-xr-x  5 root    wheel   512B Nov 26  2012 ..
     4 drwxr-xr-x  2 remote  20      512B Nov 26  2012 .ssh
217728 -rw-r--r--  1 remote  20      106M Nov  7  2013 jinstall-ex-4200-12.3R3.4-domestic-signed.tgz
root@25SRV01:RE:0% rm jinstall-ex-4200-12.3R3.4-domestic-signed.tgz
</code></pre>

<p>Now, our filestructure is way under the limit we need it to be at.</p>

<pre><code>root@25SRV01:RE:0% df -h
Filesystem       Size    Used   Avail Capacity  Mounted on
/dev/da0s2a      183M    129M     39M    77%    /
devfs            1.0K    1.0K      0B   100%    /dev
/dev/md0          68M     68M      0B   100%    /packages/mnt/jbase
/dev/md1         5.8M    1.1M    4.2M    21%    /packages/mfs-fips-mode-powerpc
/dev/md2         2.9M    2.9M      0B   100%    /packages/mnt/fips-mode-powerpc-12.3R3.4
/dev/md3         9.0M    4.4M    3.9M    53%    /packages/mfs-jcrypto-ex
/dev/md4          12M     12M      0B   100%    /packages/mnt/jcrypto-ex-12.3R3.4
/dev/md5         8.1M    3.5M    4.0M    47%    /packages/mfs-jdocs-ex
/dev/md6         6.2M    6.2M      0B   100%    /packages/mnt/jdocs-ex-12.3R3.4
/dev/md7          43M     39M    718K    98%    /packages/mfs-jkernel-ex
/dev/md8         107M    107M      0B   100%    /packages/mnt/jkernel-ex-12.3R3.4
/dev/md9          12M    7.5M    3.6M    68%    /packages/mfs-jpfe-ex42x
/dev/md10         21M     21M      0B   100%    /packages/mnt/jpfe-ex42x-12.3R3.4
/dev/md11         17M     12M    3.2M    79%    /packages/mfs-jroute-ex
/dev/md12         38M     38M      0B   100%    /packages/mnt/jroute-ex-12.3R3.4
/dev/md13         12M    7.2M    3.6M    66%    /packages/mfs-jswitch-ex
/dev/md14         21M     21M      0B   100%    /packages/mnt/jswitch-ex-12.3R3.4
/dev/md15         14M    9.5M    3.4M    73%    /packages/mfs-jweb-ex
/dev/md16         25M     25M      0B   100%    /packages/mnt/jweb-ex-12.3R3.4
/dev/da0s3e      123M     15M     98M    14%    /var   &lt;----- # Much better
/dev/md17        126M     12K    116M     0%    /tmp
/dev/da0s3d      369M    106M    233M    31%    /var/tmp
/dev/da0s4d       62M    368K     57M     1%    /config
/dev/md18        118M     22M     87M    20%    /var/rundb
procfs           4.0K    4.0K      0B   100%    /proc
/var/jail/etc    123M     15M     98M    14%    /packages/mnt/jweb-ex-12.3R3.4/jail/var/etc
/var/jail/run    123M     15M     98M    14%    /packages/mnt/jweb-ex-12.3R3.4/jail/var/run
/var/jail/tmp    123M     15M     98M    14%    /packages/mnt/jweb-ex-12.3R3.4/jail/var/tmp
/var/tmp         369M    106M    233M    31%    /packages/mnt/jweb-ex-12.3R3.4/jail/var/tmp/uploads
devfs            1.0K    1.0K      0B   100%    /packages/mnt/jweb-ex-12.3R3.4/jail/dev
</code></pre>

<hr>

<h2>Dry-Run and Locate File</h2>

<p>This way is a little more arguous, since you have to look through everything and make sure not to mistake any <code>M</code>s for <code>K</code>s. Run the <code>request system storage cleanup</code> with the <code>dry-run</code> option and look through it.</p>

<pre><code>rj@25SRV01# run request system storage cleanup dry-run
fpc0:
--------------------------------------------------------------------------

List of files to delete:

         Size Date         Name
    11B Nov 19  2013 /var/jail/tmp/alarmd.ts
  71.8K Jun 28 20:54 /var/log/chassisd.0.gz
   142B Aug  4 13:16 /var/log/default-log-messages.0.gz
   125B Aug  4 11:40 /var/log/default-log-messages.1.gz
   130B Aug  4 13:16 /var/log/firewall.0.gz
   &lt;snip&gt;
     0B Nov 19  2013 /var/lost+found/#00124
   231B Nov 19  2013 /var/lost+found/#00125
   606B Nov 19  2013 /var/lost+found/#00126
  40.0K Nov 19  2013 /var/lost+found/#00139
  40.0K Nov 19  2013 /var/lost+found/#00142
106.3M Nov  7  2013 /var/lost+found/#04099/remote/
         jinstall-ex-4200-12.3R3.4-domestic-signed.tgz &lt;---- # Here it is
124.0K Jun 14  2013 /var/tmp/gres-tp/env.dat
     0B Jun 14  2013 /var/tmp/gres-tp/lock
 106.3M Jul 31 08:16 /var/tmp/mchassis-install.tgz
     0B Jun 14  2013 /var/tmp/rtsdb/if-rtsdb

fpc1:
--------------------------------------------------------------------------

List of files to delete:

         Size Date         Name
    11B Jun 14  2013 /var/jail/tmp/alarmd.ts
   144B Aug  4 13:16 /var/log/default-log-messages.0.gz
   126B Aug  4 11:40 /var/log/default-log-messages.1.gz
   &lt;snip&gt;
     0B Jun 14  2013 /var/tmp/rtsdb/if-rtsdb

{master:0}[edit]
</code></pre>

<p>Then go and delete it.</p>

<pre><code>rj@25SRV01# run start shell user root
Password:
root@25SRV01:RE:0% cd /var/lost+found/#04099/remote
root@25SRV01:RE:0% rm jinstall-ex-4200-12.3R3.4-domestic-signed.tgz
</code></pre>

<p>From here, you should have a healthy, usable filesystem that can resume logging.</p>
","10282"
"1 router, 1 internet connection/IP - multiple VRFs using the same ISP gateway","7024","","<p>My knowledge of inter-VRF routing isn't the best.</p>

<p>I have one public IP. The public Internet and its quad 0 is on the default VRF....</p>

<p>Then I have a Guest_VRF and a corporate_VRF which would both need to access the Internet and point to the default gateway on the default VRF.</p>

<p>I can see this being done with multiple Cisco routers however I can't figure out a way that I could do this all-in-one device. I keep envisioning multiple NAT/PATs here which is just messy or using loopbacks and tunnels.</p>

<p>I'm focusing mainly on an ISR G1/G2 router here. Does anyone have any advice?</p>
","<p>Using a VRF is like using a seperate router. If you have the same WAN IP for both VRF's, then you have to configure it twice in both WAN interfaces. If you however only use one WAN interface, you'll have to divide this interface by trunking (using VLAN's) or subinterfaces. </p>

<p>ex:</p>

<pre><code>interface FastEthernet0.5
encapsulation dot1Q 5
ip address 1.1.1.1 255.255.255.252
</code></pre>

<p>Notice we do not use ip vrf forwarding, we are using the default vrf here</p>

<pre><code>interface FastEthernet0.10
ip vrf forwarding wanconnection:1
encapsulation dot1Q 10
ip address 1.1.1.1 255.255.255.252 (&lt;== this can be another IP if you prefer to divide it with 2 different IP's)
</code></pre>

<p>The connection then goes as follows:</p>

<ul>
<li>your router (normal vrf) => wan connection => vpn used for dot1Q tag 5</li>
<li>your router (wanconnection:1 vrf) => wan connection => vpn used for dot1Q tag 10</li>
</ul>

<p>if you want to do this without tagging and just have 2 physical interfaces, it's the same implementation:</p>

<pre><code>interface FastEthernet0
ip address 1.1.1.1 255.255.255.252

interface FastEthernet1
ip vrf forwarding wanconnection:1
ip address 1.1.1.1 255.255.255.252 
</code></pre>

<p>Every other interface needed in the specific vrf ""wanconnection:1"" needs to be added in the same way: </p>

<pre><code>ip vrf forwarding wanconnection:1
</code></pre>

<p>ex:</p>

<pre><code>interface FastEthernet4
 ip vrf forwarding wanconnection:1
 ip address 10.0.0.1 255.255.255.0
</code></pre>

<p>making a vrf: <a href=""http://www.cisco.com/en/US/docs/switches/lan/catalyst4500/12.2/15.02SG/configuration/guide/vrf.html"" rel=""nofollow"">http://www.cisco.com/en/US/docs/switches/lan/catalyst4500/12.2/15.02SG/configuration/guide/vrf.html</a></p>

<pre><code>ip vrf wanconnection:1
 rd 65000:1
</code></pre>

<p>the rd 100:1 command explained:
Creates a VRF table by specifying a route distinguisher. Enter either an AS number and an arbitrary number (xxx:y) or an IP address and arbitrary number (A.B.C.D:y).</p>

<p>for the routing part:</p>

<pre><code>ip route 0.0.0.0 0.0.0.0 1.1.1.2
ip route vrf wanconnection:1 0.0.0.0 0.0.0.0 1.1.1.2
</code></pre>

<p>If you <strong>only have one WAN connection</strong> without tagging enabled, you could use inter Vrf routing: <a href=""http://packetlife.net/blog/2010/mar/29/inter-vrf-routing-vrf-lite/"" rel=""nofollow"">http://packetlife.net/blog/2010/mar/29/inter-vrf-routing-vrf-lite/</a></p>

<p>ex:</p>

<pre><code>ip vrf wanconnection:1
 rd 65000:1
 route-target export 65000:2
 route-target import 65000:99

ip vrf wanconnection:2
 rd 65000:2
 route-target export 65000:1
 route-target import 65000:99

ip vrf shared:1
 rd 65000:99
 route-target export 65000:99
 route-target import 65000:1
 route-target import 65000:2

interface FastEthernet0
ip vrf forwarding shared:1
ip address 1.1.1.1 255.255.255.252 

interface loopback1
ip vrf forwarding shared:1
ip address 2.2.2.2 255.255.255.255


ip route vrf shared:1 0.0.0.0 0.0.0.0 1.1.1.2
ip route vrf wanconnection:1 0.0.0.0 0.0.0.0 2.2.2.2
ip route vrf wanconnection:2 0.0.0.0 0.0.0.0 2.2.2.2

interface FastEthernet1
ip vrf forwarding wanconnection:1 
ip address 10.0.0.1 255.255.255.0
description ""LAN interface vrf 1""

interface FastEthernet2
ip vrf forwarding wanconnection:2
ip address 10.0.2.1 255.255.255.0
description ""LAN interface vrf 2""
</code></pre>

<p>here FastEthernet1 will use the default route for vrf wanconnection:1 and FastEthernet2 will use the default route for vrf wanconnection:2 (provided by the ""ip route"" commands).</p>
","1393"
"Cisco Router config alternatives to Cisco SDM (i.e. no Java required)","6997","","<p>We have an old Cisco 850 Series router hanging around here and happen to have a need for it temporarily until we get our new Palo-Alto into place.  </p>

<p>Now, after I reset it and try to pull up the configuration page at <code>10.10.10.1</code> as you would normally in order to configure it, I run into a few problems.</p>

<ol>
<li>The configurator does not recognize Internet Explorer 11 as even being Internet Explorer at all - thinks it is Netscape.  So I am forced to use an older version or Firefox (preferabal anyway, I'm just mentioning the issue)</li>
<li>The configuratior allows you to sign into the web page, and then launches Java where you sign in a second time.  After that it just stops working.  I've tried this in several browsers old and new.  I still have to try downgrading Java (<a href=""http://www.dslreports.com/forum/r22054550-"" rel=""nofollow"">as proposed here</a>) and seeing if I can get into it that way.  Apparently, this is the usual case with Cisco - check out <a href=""http://www.dslreports.com/forum/r22256671-"" rel=""nofollow"">this quote</a>:</li>
</ol>

<blockquote>
  <p>Just a silly anecdote...Cisco has a terrible history of causing a
  necessity for old JREs and it makes it almost impossible to manage
  several different pieces of equipment at different software versions.
  They really need to work on this.</p>
</blockquote>

<p>It looks like JRE 6 update 11 may do for that (only x86; the x64 isn't reported to work).</p>

<p>Okay, so, even if I can get the configurator running, I don't want to have to normally run an ancient version of Java just to access the router config.</p>

<p>If I can get into the router config once, is there a way to get this router running with some firmware that doesn't depend on Java?  I've flashed TP-Links with DD-WRT successfully, but DD-WRT doesn't seem to run on a Cisco 850.</p>

<p>Any advice?</p>

<p><strong>[conclusions]</strong></p>

<p>Although I have marked an answer for this question, I just wanted to share some of my final thoughts, just in case it helps anyone.</p>

<p>We ended up configuring the router via console cable + Putty.  This allowed us to do the work without worrying about SDM or Java at all.  And my plan is to be able to remotely administer the router via SSH (again through Putty, or a lovely tabbed application called <a href=""http://www.mremoteng.org/home"" rel=""nofollow"">mRemoteNG</a>), again avoiding the Java issue.</p>

<p>However, I also found another nice little tidbit.  I have an old Dell running Windows XP laying around that has a console port.  I decided to keep it just for configuring devices.  It also has Windows 7.  I also found the old Cisco disc that came with the router and it allowed me to install SDM on the computer itself, and also installed Java 5.  With that, now I have access to the router via console, SSH as well as SDM all on a machine which never needs to be updated. So I can just plug in this box and not have to worry about messing with the configuration of my regular workstation.</p>
","<blockquote>
  <p>The configuratior allows you to sign into the web page, and then launches Java where you sign in a second time. After that it just stops working.</p>
</blockquote>

<p>If you're running into java problems, it sounds like you're trying to use <a href=""http://www.cisco.com/c/en/us/products/cloud-systems-management/router-security-device-manager/index.html"" rel=""nofollow noreferrer"">Cisco SDM</a> to manage your Cisco 850.  <a href=""http://www.cisco.com/c/en/us/products/cloud-systems-management/router-security-device-manager/index.html"" rel=""nofollow noreferrer"">Cisco SDM</a> is EOL, and you should use <a href=""http://www.cisco.com/c/en/us/products/cloud-systems-management/configuration-professional/index.html"" rel=""nofollow noreferrer"">Cisco Configuration Professional</a> instead of SDM.  <a href=""http://www.cisco.com/c/en/us/products/cloud-systems-management/configuration-professional/index.html"" rel=""nofollow noreferrer"">Cisco Configuration Professional</a> <a href=""http://www.cisco.com/c/en/us/td/docs/net_mgmt/cisco_configuration_professional_express/v2_7/rlsnts/ccp_express_rel_notes.html#wp300705"" rel=""nofollow noreferrer"">supports the 850 series routers</a>.</p>

<blockquote>
  <p>If I can get into the router config once, is there a way to get this router running with some firmware that doesn't depend on Java? I've flashed TP-Links with DD-WRT successfully, but DD-WRT doesn't seem to run on a Cisco 850.</p>
</blockquote>

<p>You're in luck!  You don't need Java to access a Cisco router.  All you need is telnet or  a <a href=""http://www.cisco.com/c/en/us/support/docs/routers/7000-series-routers/12223-14.html#topic15"" rel=""nofollow noreferrer"">serial cable</a>... they commonly look like this:</p>

<p><img src=""https://i.stack.imgur.com/nS7XA.jpg"" alt=""cisco serial cable""></p>

<p>Options:</p>

<ul>
<li>You could try to telnet to the router's IP address, although that depends on whether someone previously had telnet configured on the router.</li>
<li>If you can telnet to the router, but don't know the password, then you'll have to perform <a href=""http://www.cisco.com/en/US/docs/routers/access/800/850/software/configuration/guide/trouble.html#wp1038210"" rel=""nofollow noreferrer"">password recovery</a>; this is a handy mapping of <a href=""http://www.cisco.com/c/en/us/support/docs/routers/10000-series-routers/12818-61.html?referring_site=bodynav"" rel=""nofollow noreferrer"">break sequences</a> for various serial terminal emulators.  This method is also useful if you can't telnet to the router.</li>
</ul>
","6635"
"Sonicwall re-direct to login page","6983","","<p>I have the firewall LAN > WAN rule in place to require trusted users before allowing http, https, and dns. This allows redirecting to the login page for user authentication when the user visits <a href=""http://example.com"" rel=""nofollow"">http://example.com</a>. </p>

<p>My issue is when a user visits <a href=""https://example.com"" rel=""nofollow"">https://example.com</a>, they are not redirected to the login page but are given a network reset error. This is causing our users to think the internet is down rather than they need to login.</p>

<p>How can I set up a rule to redirect all unauthenticated users to <a href=""https://login.mysonicwall"" rel=""nofollow"">https://login.mysonicwall</a> when they visit an https website before http?</p>

<p>I thought <a href=""https://www.fuzeqna.com/sonicwallkb/ext/kbdetail.aspx?kbid=10272&amp;SearchType=advanced&amp;referrer=&amp;status=&amp;rfield=&amp;sortmethod=datemodified&amp;usertype=&amp;subcats=True&amp;start=51&amp;match=or&amp;catid=143&amp;formaction=amq&amp;viewguid=08A09FAA-34B1-498F-AF9E-95EDBF539011"" rel=""nofollow"">this article</a> would work for https, but it did not. I do have DPI-SSL license for this Sonicwall.</p>
","<p>You have to allow DNS through.  Without DNS resolution, the http(s) requests will not finish and trigger the redirect to the login page.  What I did was add a rule that permitted DNS for All as the first rule, then everything else permitted for Trusted Users.</p>
","17094"
"How DHCP OFFER unicast works?","6958","","<p>In the DHCP discover packet, the source IP address field is 0.0.0.0 which means the client does not have an IP address yet. But, in the DHCP offer packet, an unicast address (which will be allocated for this client) is specified as destination address. Since the client does not have an IP address at this moment, how does the packet which has an unicast address reach the client correctly ? How the client identifies that this offer packet is destined for it ? My understanding is that, the client which has no IP can only be reachable with a broadcast IP. I cannot understand how it is reachable with an unicast IP.</p>
","<p>This is because the DHCP server must reside or have a relay/proxy on the same L2 network as the client.</p>

<p>The DHCP OFFER is sent to the L2 address of the client (i.e. it's MAC address).  If the request was relayed/proxied, then the DHCP OFFER goes to the relay/proxy which will then forward it to the correct L2 network.</p>

<p>Broadcast traffic can be problematic for networks, so this reduces the amount of broadcast network that is necessary.</p>
","11121"
"Juniper EX - disable multiple interfaces at the same time as a once off","6949","","<p>I have used the Cisco interface range commands on many occasions to disable  a large number of switching ports when the device is originally deployed as a once off and am looking for something similar in Junos.</p>

<p>I <strong>don't</strong> want to use <strong>apply-groups</strong> or the juniper <strong>interface-range</strong> command set as there changes are permanent and to be honest  it would confuse the Tier-1 / Tier 2 staff , aka inherited config is hidden by default and therefore will likely get missed when troubleshooting.</p>

<p>I am just looking for verification that there is no way to do this natively before I look at using slax to create a custom command.</p>
","<p>I don't think it's supported natively.</p>

<p>Fortunately you don't need to create the SLAX script yourself, as such <a href=""https://code.google.com/p/junoscriptorium/source/browse/trunk/library/juniper/commit/interfaces/expand-interface-ranges/expand-interface-ranges.slax"" rel=""nofollow"">script</a> already exists. Essentially you configure normal interface-range, but upon commit its content is expanded to the real interfaces and the interface-range config is removed, creating approximation of the IOS behavior.</p>
","2249"
"Can same port configured for different IP address or different protocol","6924","","<p>I read following line from <a href=""https://en.wikipedia.org/wiki/Port_%28computer_networking%29"" rel=""nofollow"">port WIKI</a></p>

<p>So, does it mean that same port, let's say 7001 can be bind to a different IP address or different protocol?</p>

<p>As per my knowledge, it cannot be and would result in ""port already in use"". But want to confirm.</p>

<blockquote>
  <p>Common application failures, sometimes called port conflicts, occur
  when multiple programs attempt to bind to the same port numbers on the
  same IP address using the same protocol.</p>
</blockquote>
","<p>It may help if you think of the port as an extension of the IP address.  Just as two different buildings may have a room 101, the rooms are not the same room.</p>

<p><code>10.1.2.3:1234</code> is a different port than <code>172.16.17.18:1234</code>. The function of the port may be the same across IP addresses or protocols (e.g., IPv6 ports have the same functions as IPv4 ports, even though they are different protocols).</p>
","20665"
"What is ""1 Erlang"" for network data traffic?","6902","","<p>I understand (or at least I believe I do) the concept of Erlang load unit when it is applied to voice communications. Voice communications occur in real-time and measured against real-time, so naturally we can just divide the total amount of voice traffic handled by the system (measured in minutes) in certain period of time by the length of that period of time (also measured in minutes) and obtain the dimensionless load factor known as Erlang. Naturally, 60 minutes of voice carried in 60 minutes of time is 1 Erlang.</p>

<p>But how can one apply this Erlang unit to data traffic? What do we divide by what? What is 1 Erlang for a data network? Is it even applicable? The reason I ask is that I see various Erlang-related formulas (Erlang-B and Erlang-C) being used to perform load analysis of data networks. But I'm having hard time applying the idea of Erlang unit to a network whose traffic is not measured in units of time.</p>

<p>The higher-level problem I'm working on is estimation of the load on a device that handles voice and data traffic simultaneously. And the data traffic in this case is general Internet traffic, not tied to voice communications in any way. For example, consider a cellular base station, AKA a cell site. The device has independent channels for handling voice and data traffic. How does one estimate the load in Erlangs for such device, if it is at all possible? How does one bring the different types of traffic to some sort of practically meaningful common measure?</p>
","<h2>Background</h2>

<p>An <a href=""http://en.wikipedia.org/wiki/Erlang_%28unit%29"">Erlang</a> measures load on a <a href=""http://en.wikipedia.org/wiki/Circuit_switching"">Circuit-Switched</a> link.  Quoting <a href=""http://www.unc.edu/~rowlett/units/dictE.html#erlang"">Russ Rowlett's page</a>:</p>

<blockquote>
  <p>The erlang is a dimensionless ""unit"" representing a traffic density of one call-second per second (or one call-hour per hour, etc.).</p>
</blockquote>

<p>The classical definition of an <a href=""http://en.wikipedia.org/wiki/Erlang_%28unit%29"">Erlang</a> was developed in the early 1900s by Professor <a href=""http://en.wikipedia.org/wiki/Agner_Krarup_Erlang"">A.K. Erlang</a>.  Erlang's definition does not apply generically to data traffic, because there is no standard definition of a ""call"" in data traffic, nor is there call-blocking as you would find in a fully-utilized <a href=""http://en.wikipedia.org/wiki/Circuit_switching"">Circuit-Switched</a> link.  If we make some assumptions about the data network and the type of calls, we can shoe-horn the measurement into a data network.</p>

<p>Erlang-B and Erlang-C evolved from classical analysis of circuit-switched networks; they can also be <a href=""http://www.scirp.org/journal/PaperDownload.aspx?paperID=6770"">adapted for use in data networks</a></p>

<h2>Q &amp; A</h2>

<p><hr></p>

<h3>Question 1</h3>

<ul>
<li><strong>Q1</strong>: How does this apply to data traffic?</li>
<li><strong>A1</strong>: You first have to define what a call is, the bandwidth consumed by a call, and the criteria for blocking a call.  Typically you define bandwidth per data call by referencing how much bandwidth is consumed by the <a href=""http://www.cisco.com/en/US/tech/tk652/tk698/technologies_tech_note09186a0080094ae2.shtml#topic1"">Voice Codec</a> in question.</li>
</ul>

<p><hr></p>

<h3>Question 2</h3>

<ul>
<li><strong>Q2</strong>: What do we divide by what?</li>
<li><strong>A2</strong>: If you're strictly asking about basic <a href=""http://en.wikipedia.org/wiki/Erlang_%28unit%29"">Erlang</a> calculations, see below.  Erlang-B and Erlang-C are a little easier to apply to a data network, because of queuing dynamics that are common to both circuit-switched and data networks.</li>
</ul>

<p>For the purposes of a basic Erlang calculation... First, let's assume that voice gets absolute priority across the data network in question.  Next, let's define the type of link we're dealing with (because the overhead of a call on <a href=""http://en.wikipedia.org/wiki/Ethernet"">Ethernet</a> is different than a <a href=""http://en.wikipedia.org/wiki/Packet_over_SONET/SDH"">Packet-over-SONET</a> link).  Finally, let's define some call rejection criteria... the simplest is that the call is rejected if you don't have enough incremental bandwidth for another call (ref the <a href=""http://www.cisco.com/en/US/tech/tk652/tk698/technologies_tech_note09186a0080094ae2.shtml#topic1"">Voice Codec</a>).</p>

<p>After you define those boundaries...</p>

<ul>
<li>C is the total capacity (in bits-per-second) dedicated to voice traffic</li>
<li>A is the bandwidth consumed by a single voice call, (ref <a href=""http://www.cisco.com/en/US/tech/tk652/tk698/technologies_tech_note09186a0080094ae2.shtml#topic1"">Voice Codec</a>s)</li>
</ul>

<p>The formula to calculate the Erlang capacity (per unit of time)... </p>

<pre><code>Erlang capacity (per unit of time) = C / A
</code></pre>

<p>Let's apply this to a 100Mbps Ethernet link, using <a href=""http://en.wikipedia.org/wiki/G.729"">G.729</a> voice calls (i.e 39200 bps per call).</p>

<ul>
<li>C = 100000000</li>
<li>A = 39200</li>
</ul>

<p>Maximum Erlang capacity of a FastEthernet link (using <a href=""http://en.wikipedia.org/wiki/G.729"">G.729</a> calls, which are assumed to have 100% of the link):</p>

<pre><code>100000000 bps / 39200 bps = 2551.02 Erlangs
</code></pre>

<p><em>Bandwidth Assumptions</em>:</p>

<p>My assumptions about the <a href=""http://en.wikipedia.org/wiki/G.729"">G.729</a> packet (ref Cisco's <a href=""http://www.cisco.com/en/US/tech/tk652/tk698/technologies_tech_note09186a0080094ae2.shtml#topic1"">Voice Codec</a> numbers)...</p>

<ul>
<li>Ethernet inter-frame overhead - <a href=""http://en.wikipedia.org/wiki/Preamble_%28communication%29"">Preamble</a>, <a href=""http://en.wikipedia.org/wiki/Start_frame_delimiter"">SFD</a>, <a href=""http://en.wikipedia.org/wiki/Interframe_gap"">IFG</a>: 20 Bytes</li>
<li><a href=""http://en.wikipedia.org/wiki/Ethernet"">Ethernet</a> II header &amp; CRC: 18 Bytes</li>
<li><a href=""http://en.wikipedia.org/wiki/IPv4"">IP</a>v4 Header: 20 Bytes</li>
<li><a href=""http://en.wikipedia.org/wiki/User_Datagram_Protocol"">UDP</a> Header: 8 Bytes</li>
<li><a href=""http://en.wikipedia.org/wiki/Real-time_Transport_Protocol"">RTP</a> Header: 12 Bytes</li>
<li><a href=""http://en.wikipedia.org/wiki/G.729"">G.729</a> Voice Payload: 20 Bytes </li>
</ul>

<p>Total <a href=""http://en.wikipedia.org/wiki/G.729"">G.729</a> ethernet frame (including all overhead): 98 Bytes</p>

<p>Total bandwidth of <a href=""http://en.wikipedia.org/wiki/G.729"">G.729</a> over ethernet:</p>

<pre><code>50 G.729 packets/sec * 98 Bytes/G.729 packet * 8 bits/Byte =  39200 bits/second
</code></pre>

<p>Note: I took the liberty of modifying Cisco's listed bandwidth of 31.2Kbps per <a href=""http://en.wikipedia.org/wiki/G.729"">G.729</a> call, because they leave out the Ethernet framing overhead in that number.  The simplest way to illustrate this without making the math more complicated is to include ethernet inter-frame overhead in the <a href=""http://en.wikipedia.org/wiki/G.729"">G.729</a> bandwidth consumed.</p>

<p><hr></p>

<h3>Question 3</h3>

<ul>
<li><strong>Q3</strong>: What is one Erlang of data traffic?</li>
<li><strong>A3</strong>: It's probably obvious by now... it depends on how the call is sent over the data network.</li>
</ul>
","3548"
"Difference between proxy arp and default gateway","6856","","<p>Firstly what I understand,
Default Gateway--> When we set the default gateway in PC the network layer check the destination IP address and if it is not on same broadcast domain as the source IP address it set destination MAC address to be of the router which further make routing decision.</p>

<p>Proxy ARP -->{{It is used when host do not have default gateway set}} When the destination IP address's MAC address is not in the table of PC it sent an ARP request to know its MAC address. THE switch broadcast the request and it also goes to router and the router knows the destination IP address as it is directly connected to it so it gives its MAC address as proxy.</p>

<p>Now my question is that
MY network is like this-->>  Host A---Switch1----Router----Switch2---Host B
and Host A has IP address of 192.168.1.1 (no default gateway set) and same for host B with IP address 192.168.2.1(no default gateway set) so why can't Host A ping Host B using Proxy ARP.Router has interfaces as 192.168.1.254 and 192.168.2.254</p>

<p>IS proxy ARP not enabled by default but it is given in cisco.com it is enabled by default so why can not then</p>

<p>AND Also </p>

<p>which is given preference default gateway method or proxy ARP is default gateway is set and router knows path to destination</p>
","<p>Let me start by saying proxy ARP is at best a sloppy solution. They only time I found it useful as a feature is when I was dealing with devices on the network that could not utilize classless netmasks or couldn't set a default route.</p>

<p>Yes, it can ""cover"" many client configuration or bad design problems, but it doesn't fix those problems. It also doesn't ""cover"" all of them and it can make troubleshooting issues more difficult. </p>

<p>Getting back to your question, the most likely reason this isn't working is that your client's aren't ARPing. My guess is that you have given them what is often considered a ""standard"" network mask of /24. So the solution would be to switch the network masks on the clients to /16.</p>

<p>Why? A client uses it's IP address and network mask to determine if a destination is on the local network or not. If it is on the local network, the client checks it's ARP table for any entries for the destination and if one doesn't exist, will send out an ARP request to get this information. This is where the router with proxy ARP enabled can respond, but if there is no ARP request then the router cannot provide a proxy ARP response.</p>

<p>If the destination is not on the local network, then the client will check it's routing table to see where to forward the traffic. This is typically your default gateway.</p>

<p>Now, with the IP addresses you used, if you used a /24 network mask, when the client checked the destination against it's IP/mask, it would find the destination is not on the local network. Going to the routing table, it won't have a specific entry for the destination network (clients won't by default) and no default route/gateway. It will then fail with a ""no route to host"" type of message.</p>
","22192"
"ASICs vs x86 general-purpose routing/switching","6846","","<p>SysAdmins often try to convince me that x86 general-purpose OS's can perform just as well as routers with low MHz CPUs and dedicated silicon (i.e., ASICs) at 1Gbps line rates. This thinking is carrying over into the SDN realm such as virtual switches in VMWare. </p>

<p>I think I intuitively understand the differences between the benefits of ASICs vs x86 in handling traffic particularly with respect to microbursts. <strong>Is it correct in assuming that ASICs for router or switch interfaces will outperform the use of an x86 CPU for <em>all</em> packet processing which will greatly suffer from CPU interrupts?</strong> I know the OS (Windows, Linux, or specialized) greatly contributes to the hardware's performance to route or switch too.  And I know the x86 bus-speeds impose theoretical maximums to switching bandwidth especially once rates exceed 1Gbps.</p>

<ol>
<li><p>How does the Catalyst 6500 Sup2T ASIC switching speed, for example, compare to the realistic x86 switching speeds found on general OSes or SDNs?</p></li>
<li><p>How does the Cisco 7200VXR-NPE-G2 switching speed, for example, compare to same...</p></li>
<li><p>How do typical router or switch latencies compare to general OSes performing the same function?</p></li>
</ol>

<p>NOTE: I don't want to hear the merits of virtual switch placement or their role within a virtual and physical network.  I also do not want to debate the merits of SDN for application time-to-deployment.</p>
","<blockquote>
  <p>Is it correct in assuming that ASICs for router or switch interfaces will outperform the use of an x86 CPU for all packet processing which will greatly suffer from CPU interrupts?</p>
</blockquote>

<p>It's hard to say specifically whether interrupts are a limitation, since we aren't naming specific CPU, operating system or router models in this part of your question.  Overall, it's a safe generalization that general-purpose CPUs cannot touch the packet-switching performance of a well-designed ASIC.  When I say performance, I'm talking about <a href=""https://www.ietf.org/rfc/rfc2544.txt"" rel=""nofollow noreferrer"">RFC 2544</a> metrics, such as no-drop packets-per-second forwarding rate (NDR), throughput, and latency.</p>

<p>That's not to say that there isn't a place for a CPU-based router; just that our life experiences tell us a CPU can't switch packets as quickly as an ASIC or FPGA.  My conclusion about ASICs / FPGAs being faster than a multi-core CPU seems to be reinforced by <a href=""https://electronics.stackexchange.com/q/140618"">this Q&amp;A on Electronics.SE</a>. </p>

<h2>PCI-bus performance</h2>

<blockquote>
  <p>I know the x86 bus-speeds impose theoretical maximums to switching bandwidth especially once rates exceed 1Gbps.</p>
</blockquote>

<p>I'm not sure which bus restrictions you're referring to here, but the information you have could be somewhat outdated.  The PCI Express bus used in most systems scales well above 10Gbps these days.</p>

<p><a href=""http://en.wikipedia.org/wiki/PCI_Express#PCI_Express_2.0"" rel=""nofollow noreferrer"" title=""PCI Express 2.0"">PCIe 2.0</a> uses an <a href=""http://en.wikipedia.org/wiki/8b/10b_encoding"" rel=""nofollow noreferrer"">8b/10b encoding</a> scheme that penalized it approximately 20% for the PCI lane encoding overhead; before that encoding penalty, <a href=""http://en.wikipedia.org/wiki/PCI_Express#PCI_Express_2.0"" rel=""nofollow noreferrer"" title=""PCI Express 2.0"">PCIe 2.0</a> delivers 4Gbps of raw bandwidth per lane.  However, even with the 20% 8b/10b penalty, <a href=""http://en.wikipedia.org/wiki/PCI_Express#PCI_Express_2.0"" rel=""nofollow noreferrer"" title=""PCI Express 2.0"">PCIe 2.0</a> x8 (8 PCIe lanes) squeezes out over 25Gbps; thus you can easily run a single 10GE adapter at bidirectional line-rate on a PCIe 2.0 x8 card.</p>

<p><a href=""http://en.wikipedia.org/wiki/PCI_Express#PCI_Express_3.x"" rel=""nofollow noreferrer"" title=""PCI Express 3.0"">PCIe 3.0</a> (used in Intel Ivy Bridge chipsets) uses 128b/130b encoding, which greatly improves PCI-bus efficiency, and doubles the per-lane bandwidth.  Thus a PCIe 3.0 x8 card could deliver 63Gbps (8.0*8*128/132).  This is nothing to sneeze at; you can safely pack two line-rate 10GEs on a single riser with those performance rates.</p>

<h2>Cisco vs Vyatta performance</h2>

<p>Caveat: I'm using vendor-supplied marketing material for all comparisions...  </p>

<blockquote>
  <ol>
  <li>How does the Catalyst 6500 Sup2T ASIC switching speed, for example, compare to the realistic x86 switching speeds found on general OSes or SDNs?</li>
  </ol>
</blockquote>

<p>This is a bit challenging because we're going to compare a fully-distributed switching system (Sup2T) to a centralized-switching system (Vyatta), so be careful interpreting the results.</p>

<ul>
<li>Sup2T can forward at up to 60Mpps non-drop rate <em>with features enabled</em>.  Reference: <em><a href=""http://www.cisco.com/c/en/us/products/collateral/switches/catalyst-6500-series-switches/white_paper_c11-676346.html"" rel=""nofollow noreferrer"">Catalyst 6500 Sup2T Architecture White Paper</a></em>.  Note that this is just a bare Sup2T system with no Distributed Forwarding Cards (DFC).<sup>Note 1</sup></li>
<li>I have found RFC 2544 test results for the Vyatta 5600 forwarding at up to 20.58Mpps non-drop rate, and 70Mpps if you can accept some drops.  The NDR throughput was 72Gbps.  Reference: <em><a href=""https://www.sdncentral.com/download-brocade-vyatta-5600-vrouter-performance-report/"" rel=""nofollow noreferrer"">Vyatta 5600 vRouter Performance Test (SDN Central)</a></em>.  SDN Central registration is required to see the full report.</li>
</ul>

<blockquote>
  <ol start=""2"">
  <li>How does the Cisco 7200VXR-NPE-G2 switching speed, for example, compare to same...</li>
  </ol>
</blockquote>

<p>The Vyatta blows an NPE-G2 out of the water, performance-wise; the NPE-G2 can do up to 2Mpps based on the <a href=""http://www.cisco.com/c/en/us/products/collateral/routers/7200-series-routers/product_data_sheet0900aecd8047177b.html"" rel=""nofollow noreferrer"">Cisco NPE-G2 Datasheet</a>.  That's not really a fair comparison though given the age of the NPE-G2, vs a brand-new Intel 10-Core system packed with 10GE cards.</p>

<blockquote>
  <p>How do typical router or switch latencies compare to general OSes performing the same function?</p>
</blockquote>

<p>That is a fantastic question. <a href=""http://www.iaeng.org/publication/WCECS2012/WCECS2012_pp973-978.pdf"" rel=""nofollow noreferrer"">This paper</a> indicates that Vyatta has higher latencies, but I would like to see this kind of testing done against the Intel E5 series CPUs.</p>

<h2>Summary</h2>

<p>Recap of a side-by-side comparison of Sup2T vs the Brocade Vyatta 5600:</p>

<ul>
<li>Sup2T: 60Mpps NDR IPv4 with features (such as ACLs)</li>
<li>Vyatta and Intel E5: up to 20Mpps IPv4 NDR <em>without features</em>, or 70Mpps if you can accept small numbers of drops.</li>
</ul>

<p>The Sup2T still wins in my opinion, particularly when you look at what you get with the Sup2T (distributed scale to 720Mpps, MPLS, countless MIBs, Layer2 and Layer3 switching, etc...). </p>

<p>If all you care about is raw switching performance, you can get respectable performance numbers from an x86 CPU.  However, in real networks, it's not often just about who has the best drag-race numbers; most people <a href=""https://networkengineering.stackexchange.com/a/3131/775"">need to worry about features</a> (see: <em>When should I focus on each value for switch assessment?</em>).  A big factor to consider is the number of features available, and how they integrate with the rest of your network.</p>

<p>It's also worth looking at operational feasibility of using x86-based systems in your company.  I haven't used Brocade + Vyatta myself, but they could do a decent job building good show commands and support hooks into the box.  If they indeed support enough features, and their system scales well in <em>real networks</em>, then go for it if that's what you like.</p>

<p>However, if someone goes cheap and just builds a linux box + <code>bird</code> / <code>quagga</code> + ACLs + qos, I would not want to be the guy supporting that solution.  I have always maintained that the open-source community does a great job innovating, but the supportability of their systems pales when compared with mainstream network vendors (Arista / Cisco / Force10 / Juniper).  One needs only to look at <code>iptables</code> and <code>tc</code> to see just how convoluted you can make a CLI.  I occasionally field questions from people who look at the output of <code>ip link show</code> or <code>ifconfig</code> and get wierded out because the packet counters aren't right; typically the major network vendors do a much better job testing their counters, vs what I see in the linux NIC drivers.</p>

<hr>

<p><strong>End Notes</strong>:</p>

<p><sup>Note 1</sup> Nobody who cares about performance would ever buy a Sup2T and fail to populate the chassis with DFCs.  The Sup2T can switch at 60Mpps, but a loaded chassis with DFCs scales to 720Mpps.<br><br>
<sup>Note 2</sup> The Vyatta test ran on dual-processor, 10-core Intel E5-2670v2 at 2.5Ghz per core; if we count a single core as two virtual cores (i.e. hyper-threading), that's a total of 40 cores for packet switching.  The Vyatta was configured with Intel x520-DA2 NICs, and used Brocade Vyatta version 3.2.</p>
","13304"
"Wireshark shows SSDP protocol for HTTP request, and not TCP protocol","6826","","<p>I have been learning ICND1 through CBTNuggets.com course online, 
I have recently started a video where the instructor is guiding on how to use Wireshark to trace the communication.</p>

<p>He first used DNS to show how User Datagram Protocol is shown in the Wireshark when i do 
<code>nslookup</code> of any website.</p>

<p>then he started the Wire Shark Capture and visited a website CBTNuggets.com and suddenly his Wireshark window started to show protocols like TCP, HTTP etc.</p>

<p>But when I tried the same process, and visited google.com or any other website while my Wireshark capture is on, All i could see is <code>SSDP</code> protocol in my wireshark window.</p>

<p>I know the difference between UDP and TCP, and that TCP is a reliable communication and HTTP is TCP based protocol.</p>

<p>But why my Wireshark is not showing any TCP protocol when I visit any website ?</p>

<p>P.S: I am use Wireless Network Device</p>

<p><img src=""https://i.stack.imgur.com/t2mPE.png"" alt=""enter image description here""></p>
","<p>Clear the expression ip.addr==192.168.0.1 filter.  This is probably whats filtering out what you want to see.  You can tell by the very first column in WireShark, Look at the No. jumps at DNS No.94 to SSDP No. 680 ---   So about 500 entries you arent seeing.  You can also turn off the ssdp discovery service in windows to eliminate that ssdp mess.</p>
","9456"
"Inter VLAN routing working, but VLANs can't access Internet","6787","","<p>i have a question/problem. i have a local router with default-gateway 192.168.3.254, now on my layer 3 switch 3560 i configure 3 vlans.</p>

<p>vlan 10 - data /ip address 192.168.10.254 255.255.255.0</p>

<p>vlan 20 - server /ip address 192.168.20.254 255.255.255.0</p>

<p>vlan 30 - mgt /ip address 192.168.30.254 255.255.255.0</p>

<p>pc1 connected to gig0/5 vlan 10 ip address 192.168.10.5 255.255.255.0</p>

<p>pc2 connected to gig0/10 vlan 20 ip address 192.168.20.10 255.255.255.0</p>

<p>pc3 connected to gig0/20 vlan 30 ip address 192.168.30.20 255.255.255.0</p>

<p>on switchport gig0/1 which the router is connected i issued no switchport command and give it ip 192.168.3.90 255.255.255.0</p>

<p>enable ip routing
ip route 0.0.0.0 0.0.0.0 192.168.3.254</p>

<p>inter-vlan routing on all pc's are working fine, but neither of the 3 pc is unable to connect to internet..</p>

<p>pls guide me, thank you.</p>
","<p>Your router doesn't know how to route to your 3 vlans.  When it receives a packet for 192.168.10.5, for example, it doesn't know where to forward it.</p>

<p>You need to configure static routes on your router like this (exact syntax depends on your model of router):</p>

<pre><code>ip route 192.168.10.0 255.255.255.0 192.168.3.90
ip route 192.168.20.0 255.255.255.0 192.168.3.90
ip route 192.168.30.0 255.255.255.0 192.168.3.90
</code></pre>
","19026"
"pinging broadcast address","6754","","<p>Iam using linux.I read somewhere in the internet that pinging the 255.255.255.255 will ping everyone in the network segment. And it will return every ip addresses in that subnet. but when i tried</p>

<pre><code>ashokkrishna@ashokkrishna-Lenovo-B560:~$ ping -b 255.255.255.255
WARNING: pinging broadcast address
PING 255.255.255.255 (255.255.255.255) 56(84) bytes of data.
64 bytes from 192.168.1.220: icmp_seq=1 ttl=64 time=100 ms
64 bytes from 192.168.1.220: icmp_seq=1 ttl=64 time=100 ms (DUP!)
64 bytes from 192.168.1.220: icmp_seq=2 ttl=64 time=128 ms
64 bytes from 192.168.1.220: icmp_seq=2 ttl=64 time=130 ms (DUP!)
</code></pre>

<p>I am only getting the reply from only one ip. how to get every ip, I know how to get every ip with nmap but what I read in the internet is totally opposite in my senario why?</p>

<p>same with </p>

<pre><code>ashokkrishna@ashokkrishna-Lenovo-B560:~$ ping -b 192.168.1.255
WARNING: pinging broadcast address
PING 192.168.1.255 (192.168.1.255) 56(84) bytes of data.
64 bytes from 192.168.1.220: icmp_seq=1 ttl=64 time=55.2 ms
64 bytes from 192.168.1.220: icmp_seq=1 ttl=64 time=66.6 ms (DUP!)
64 bytes from 192.168.1.220: icmp_seq=2 ttl=64 time=78.5 ms
64 bytes from 192.168.1.220: icmp_seq=2 ttl=64 time=79.2 ms (DUP!)
</code></pre>
","<p>Not all machines will answer a broadcast ping. (all broadcast -- 255.255.255.255, or subnet broadcast -- eg. x.x.x.255) Some see it as a ""security feature"", because one could spoof the origin to flood any host on the network.</p>
","19888"
"Backup IP for site 2 site VPN (Juniper SRX)","6733","","<p>We have two separate networks with SRXes on both sides (router, firewall, and site2sitevpn).</p>

<p>On one side (Site A), we have two ISPs (BGP), and currently the VPN is setup to the IP address of one of our ISP (ISP1). but if ISP1 line should go down our VPN also goes down. is there a way to Automatically change the VPN tunnel IP address to the IP of the second ISP (ISP2) in the event that ISP1 should go down? or is that a stupid way to do it?</p>

<p>Is is perhaps better to setup a 2nd VPN tunnel to the ISP2 IP address? if so, how can I automatically start the 2nd VPN if 1st fail?</p>

<p>Map:</p>

<p><img src=""https://i.stack.imgur.com/2Rwru.png"" alt=""explanations of network""></p>

<p>PS: site A has its own AS and ip series, and used BGP to route traffic to/from the two ISPs</p>

<p>UPDATE 1:</p>

<p>I have some clarifications, and also some new information (to futher complicate things).</p>

<p>1) SITE A has only one SRX, with each ISP on a separate port.
ge-0/0/4 = isp1
ge-0/0/3 = isp2</p>

<p>today the site2site vpn St0 (used ip range 192.168.21.0/30 on the vpn), uses only isp1, but I would like to have isp2 as a backup.</p>

<p>2) Site B actually only has one ISP, but they have given us 2 different IP addresses, one of the addresses uses a special routing to their upstream provider (but only that network!), wheras the other IP address uses BGP and will use whatever routing upstream work.. so we have
vlan.12 ip address 1) 6.6.6.6/29 (the one we use today)
vlan.12 ip address 2) 5.5.5.5/29 (another ip we also want to use).</p>

<p>So, the ip 6.6.6.6 gives us very fast speeds between the offices, as the route goes to the shortes path.. but it is limited to one provider, so the chance that it goes down is quite high. ip 5.5.5.5 is quite a bit slower, but is more robust to faults between the two networks. </p>

<p><img src=""https://i.stack.imgur.com/p76N3.png"" alt=""further explanations of network""></p>

<p>In the image above, you can see in red where the site2site vpn goes today. So in the end I would like to have redundancy so that all 4 combinations should work.</p>

<ol>
<li>WAN1 - WAN-A</li>
<li>WAN1 - WAN-B</li>
<li>WAN2 - WAN-A</li>
<li>WAN2 - WAN-B</li>
</ol>

<p>noteA: vlan.12 is just a vlan that could easily have been a port such as ge-0/0/2, I have just setup the vlan to be able to use other physical ports on the SRX just in case.</p>

<p>noteB: SITE B only uses one physical port to one and same ISP, but uses two different IP addresses.</p>

<p>thanks again for the help so far. I will setup a service window to test tome of these things soon.</p>

<p>update2:</p>

<p>BGP setup on SiteA:</p>

<pre><code>protocols {
    bgp {
    group bgp-ISP2 {
        preference 290;
        local-address 8.8.8.9;
        log-updown;
        import import-bgp-ISP2;
        authentication-key ""somekey""; ## SECRET-DATA
        peer-as &lt;ASNUMBER&gt;;
        neighbor 8.9.7.6 {
            export export-bgp-ISP2;
        }
    }
    group bgp-ISP1 {
        preference 250;
        local-address 7.7.7.8;
        log-updown;
        import import-bgp-ISP1;
        authentication-key ""somekey""; ## SECRET-DATA
        peer-as &lt;ASNUMBER&gt;;
        neighbor 7.8.9.1 {
            export export-bgp-ISP1;
        }
    }
}
}
</code></pre>
","<p>Junos does have DPD and you can use it in conjunction with multiple endpoint IP addresses in a single IKE tunnel.</p>

<p>There is a bit of info about it here (which I've copied below)</p>

<p><a href=""http://kb.juniper.net/InfoCenter/index?page=content&amp;id=KB29211&amp;actp=RSS"" rel=""nofollow noreferrer"">http://kb.juniper.net/InfoCenter/index?page=content&amp;id=KB29211&amp;actp=RSS</a></p>

<p><strong>SUMMARY:</strong>
This article explains how redundancy in site-to-site VPN can be achieved using multiple address in gateway and dead-peer-detection.</p>

<p><strong>PROBLEM OR GOAL:</strong>
How to use different modes of dead-peer-detection for VPN failover .</p>

<p><strong>CAUSE:</strong></p>

<p><strong>SOLUTION:</strong>
The gateway for VPN redundancy can be configured with the following commands :</p>

<pre><code>set interfaces fe-0/0/0 unit 0 family inet address 1.1.1.2/24
set interfaces st0 unit 0 family inet
set routing-options static route 0.0.0.0/0 next-hop 1.1.1.1
set security ike policy p1 mode main
set security ike policy p1 proposal-set standard
set security ike policy p1 pre-shared-key ascii-text ""$9$21oZjmfzCtOHqtO1RlegoJ""
set security ike gateway g1 ike-policy p1
set security ike gateway g1 address 2.2.2.1
set security ike gateway g1 address 3.3.3.1
set security ike gateway g1 dead-peer-detection interval 10
set security ike gateway g1 dead-peer-detection threshold 3
set security ike gateway g1 external-interface fe-0/0/0
set security ipsec policy p1 proposal-set standard
set security ipsec vpn v1 bind-interface st0.0
set security ipsec vpn v1 ike gateway g1
set security ipsec vpn v1 ike ipsec-policy p1
set security ipsec vpn v1 establish-tunnels immediately
</code></pre>

<p>The first address in the order of configuration is the one chosen to negotiate the tunnel:</p>

<pre><code>gateway g1 {
            ike-policy p1;
            address [ 2.2.2.1 3.3.3.1 ];
            dead-peer-detection {
                                 interval 10;
                                 threshold 3;
                                 }
            external-interface fe-0/0/0;
            }
</code></pre>

<p>The above configuration is in dead-peer-detection optimal mode. It sends probes if packets were sent out (encrypted packets), but no packets were received (decrypted) for the configured interval. Three probe-packets are sent at 10 second intervals.</p>

<pre><code>root@srx# run show security ike sa 
Index State Initiator cookie Responder cookie Mode Remote Address 
6770125 UP d570a30c806721ea ccc1572d2f763981 Main 2.2.2.1 


root@srx# run show security ipsec sa 
Total active tunnels: 1
ID Algorithm SPI Life:sec/kb Mon lsys Port Gateway 
&lt;131073 ESP:3des/sha1 1debda06 3397/ unlim - root 500 2.2.2.1 
&gt;131073 ESP:3des/sha1 7a7dff24 3397/ unlim - root 500 2.2.2.1
</code></pre>

<p>As soon as the tunnel drops, dead-peer-detection comes into play. If a response is not received from the peer in 30 seconds, the failover takes place and the tunnel is negotiated with 3.3.3.1 and vice-versa.</p>

<pre><code>root@srx# run show security ike sa
Index State Initiator cookie Responder cookie Mode Remote Address 
6770151 UP 36a2e145e0fd2c10 b3abc0b135cf33fe Main 3.3.3.1

root@srx# run show security ipsec sa 
Total active tunnels: 1
ID Algorithm SPI Life:sec/kb Mon lsys Port Gateway 
&lt;131073 ESP:3des/sha1 2420b2bd 3598/ unlim - root 500 3.3.3.1 
&gt;131073 ESP:3des/sha1 5c8bb9da 3598/ unlim - root 500 3.3.3.1
</code></pre>

<p>Always-Send mode for dead-peer-detection:</p>

<p>In order to instruct the device to send dead-peer-detection requests, regardless of whether or not there is outgoing IPSec traffic to the peer, the following command is also needed:</p>

<pre><code>set security ike gateway g1 dead-peer-detection always-send
</code></pre>

<p><strong>UPDATE</strong></p>

<p>I have configured this in a test lab and confirm that it works well. I have 3 devices, S3, S4 and S5.</p>

<p>S4 and S5 both have a basic IPSEC tunnel configured to connect to S3 (7.7.7.22 in my example). The config is dead simple and the same on both devices</p>

<pre><code>ike {
    gateway s3-gw {
        ike-policy ike-policy;
        address 7.7.7.22;
        external-interface ge-0/0/1.0;
    }
}
ipsec {
    policy standard-ipsec-policy {
        proposal-set standard;
    }
    vpn s3 {
        bind-interface st0.0;
        ike {
            gateway s3-gw;
            ipsec-policy standard-ipsec-policy;
        }
        establish-tunnels immediately;
    }
}
</code></pre>

<p>The device S3 has a config that is very similar to the above but has 2 gateways listed and DPD enabled.</p>

<p>The relevant section is in the IKE config</p>

<pre><code>gateway s4-s5-gw {
    address [ 7.7.7.21 192.168.211.2 ];
    dead-peer-detection {
        always-send;
        interval 10;
        threshold 3;
    }
    external-interface ge-0/0/1.0;
}
</code></pre>

<p>This brings up the tunnel as such</p>

<pre><code>root@TEST-srx3&gt; show security ike security-associations
Index   State  Initiator cookie  Responder cookie  Mode           Remote Address
1404200 UP     2f4f0465dc8c4556  d2e6022d0dc213c3  Main           7.7.7.21

root@TEST-srx3&gt; show security ipsec sa
  Total active tunnels: 1
  ID    Algorithm       SPI      Life:sec/kb  Mon lsys Port  Gateway
  &lt;131073 ESP:3des/sha1 d4428f3  3170/ unlim   -   root 500   7.7.7.21
  &gt;131073 ESP:3des/sha1 5cda9108 3170/ unlim   -   root 500   7.7.7.21
</code></pre>

<p>If I deactivate the IKE/IPSEC config sections on S4 the tunnel drops and then comes back up connected to the 2nd gateway</p>

<pre><code>root@TEST-srx3&gt; show security ike security-associations

root@TEST-srx3&gt; show security ipsec sa
  Total active tunnels: 0
</code></pre>

<p>Then after about 30 seconds (10 x 3)</p>

<pre><code>root@TEST-srx3&gt; show security ike security-associations
Index   State  Initiator cookie  Responder cookie  Mode           Remote Address
1404202 UP     35e54d457be6132f  0444ae31577c71a2  Main           192.168.211.2

root@TEST-srx3&gt; show security ipsec sa
  Total active tunnels: 1
  ID    Algorithm       SPI      Life:sec/kb  Mon lsys Port  Gateway
  &lt;131073 ESP:3des/sha1 93043b2  3595/ unlim   -   root 500   192.168.211.2
  &gt;131073 ESP:3des/sha1 e5c551e4 3595/ unlim   -   root 500   192.168.211.2
</code></pre>

<p>If you need any help post some config snippets and I'll do my best to have a look!</p>

<p><strong>UPDATE 2</strong></p>

<p>I have built this whole thing in a mini lab. The problem I have found is that while you can use multiple gateways in your IKE configuration you will still need to have an IPSEC tunnel per ISP on each device. This is because you have multiple source IP addresses you want to potentially make an IPSEC tunnel from.</p>

<p><img src=""https://i.stack.imgur.com/idqYY.png"" alt=""Lab Config""></p>

<p>To save me posting a lot of config each SRX (A and B) has two IPSEC tunnels configured as shown below. The things to note are I'm using a single tunnel interface on each device, these are set to multipoint. You could use multiple ones if you wanted.</p>

<p>This config will provide full redundancy if a single ISP at site A and/or site B goes down.</p>

<p>I tested this by dropping the linked between SRX-A and SRX-1 and then dropping SRX-B and SRX-4. Due to me using BGP and DPD it took just over a minute for the tunnel to come back up but worked well!</p>

<p>Hopefully this will ultimately help you sort out your config!</p>

<p><strong>SRX-A IPSEC Config</strong></p>

<pre><code>ike {
    gateway SRX-B_via_ISP1 {
        ike-policy ike-policy;
        address [ 6.6.6.6 5.5.5.5 ];
        dead-peer-detection {
            always-send;
            interval 10;
            threshold 3;
        }
        external-interface lo0.10;
        local-address 7.7.7.5;
    }
    gateway SRX-B_via_ISP2 {
        ike-policy ike-policy;
        address [ 6.6.6.6 5.5.5.5 ];
        dead-peer-detection {
            always-send;
            interval 10;
            threshold 3;
        }
        external-interface lo0.10;
        local-address 8.8.8.9;
    }
}
ipsec {
    policy standard-ipsec-policy {
        proposal-set standard;
    }
    vpn SRX-B_via_ISP1 {
        bind-interface st0.0;
        ike {
            gateway SRX-B_via_ISP1;
            ipsec-policy standard-ipsec-policy;
        }
        establish-tunnels immediately;
    }
    vpn SRX-B_via_ISP2 {
        bind-interface st0.0;
        ike {
            gateway SRX-B_via_ISP2;
            ipsec-policy standard-ipsec-policy;
        }
        establish-tunnels immediately;
    }
}
</code></pre>
","10356"
"load-balancing difference between DNS and IP - forwarding vs redirecting","6717","","<p>I have come across a situation that I cannot understand.  We have a Fortigate firewall that we  have enabled to do load-balancing across two back-end Apache web servers. A DNS name is then mapped to the virtual IP on the Load Balancer.</p>

<p>As expected, when you browse to the <strong>DNS</strong> name/URL (e.g. www.something.com), the Load Balancer serves up a page from one of the back-end Apache  web servers. The URL in the browser stays  <em>www.something.com</em>. From what I understand, the Load Balancer in this case is simply forwarding packets between the browser and Apache while always staying in-path.</p>

<p>However, if I browse to the <strong>IP address</strong> that the DNS is mapped to, then the Load Balancer returns a HTTP 302 Found, with the Location header set to the DNS URL of one of the Apaches. The URL in the browser changes to the back-end server DNS. </p>

<p>Why is the Load Balancer redirecting when queried via IP, but correctly forwarding in-path when  queried via DNS name.</p>
","<p>I haven't used a Fortigate FW for load balancing, so I will answer some of the questions more generally.</p>

<p>First, as to your problem, the load balancer is doing exactly as it is supposed to do and I think your servers may not be configured correctly to respond to a request on their IP address.  If you were to test this behind the load balancing, you could set the domain name in a local client's hosts file, behind the firewall with the server and access it both with domain name and internal IP.  You will probably get the same result you are seeing now.  </p>

<p>My guess is that you have virtual hosting turned on (to support multiple domains on a single server) and the ""default"" is not serving the same pages as your domain.  You are getting a web page back from the server in both cases.  If you need help with configuring your web server, you may want to try on <a href=""http://serverfault.com"">ServerFault</a>.</p>

<p>Second, to get into a bit more detail.  A load balancer typically operates at L7 for at least HTTP and HTTPS clusters.  This means that they don't just look at the IP address and forward it, nor do they ""redirect"" the page.</p>

<p>When they receive a request, they actually parse the request and forward it to a server after processing the request.  There are many things that they can do at this point, such as rewriting the headers in both directions, potentially adding cookies (for persistence) into the data going back to the client, terminating SSL sessions, matching based on the URL, etc.</p>

<p>I recommend you spend some time fully reading the vendor documents to get a better understanding of how load balancing works (with Fortigate you can read both theirs and Coyote Point - another load balancing company Fortigate acquired).  Understanding what it is doing will help you in cases like this and will allow you to unlock capabilities that you didn't realize existed.</p>
","3069"
"A FEX port remains inactive - how can I bring it up?","6713","","<p>When implementing Cisco Nexus 5k switches (5596UP), I connected a server to a dual homed 2000 FEX (2232T), the port belonging to a virtual port channel. However, the port changed the status from <em>notconnected</em> to <em>inactive</em> and remained so.</p>

<ul>
<li>I verified that speed and duplex match, i.e. auto/auto, tested also 1000/full.</li>
<li>I verified that the corresponding VLAN exists and is the access VLAN on this port.</li>
<li>Default port settings, except this access VLAN.</li>
</ul>

<p>What may be wrong, and how can I correct it?</p>
","<p>It turned out, that the configuration of this port did not match on both Nexus 5k, as I configured just one switch at first.</p>

<ul>
<li>I configured the port on the second Nexus switch in the same way.</li>
<li>I plan to implement the config sync feature so that issue should not happen again.</li>
</ul>

<p>Once the configuration of the ports of the virtual port channel matched, the link came up.</p>
","476"
"Cisco ASA VPN with split-dns on a Windows VPN client","6713","","<p>Split DNS ostensibly allows a remote device accessing a LAN using VPN to direct DNS queries for internal domain names to internal DNS servers while queries for public domain names are directed to public DNS servers local to the remote device.  For Cisco ASA, the operative command that claims to achieve this is <code>split-dns</code>.</p>

<p>When you establish a remote access VPN connection using a Windows machine, the VPN connection shows itself as a separate network adapter (at least for the Cisco clients I have experience with).  <a href=""https://serverfault.com/a/84293/115232"">The method that Windows uses to decide which network adapter and DNS server to use</a> cannot <em>by itself</em> enforce that all internal DNS queries are sent to the the VPN adapter and that all public DNS queries are sent to the physical adapter.  In fact, Windows will attempt the same DNS query on a different adapter if it doesn't receive a response from the first one within one second.  Furthermore, it seems that Windows might even choose to send a DNS query for an internal domain to the physical adapter which only has public DNS servers associated with it.</p>

<p>So, if Windows opts to send DNS queries for internal domains to adapters other than the VPN adapter, how can the VPN client ensure <em>all</em> DNS queries for internal domains are tunneled to the internal DNS servers?  Am I missing something here?  Is there something fancy going on that somehow allows the VPN client to intercept DNS queries that Windows sends to the wrong adapter?  If so, how, exactly, does that work?</p>
","<h2>Experiment</h2>

<p>There is a lot of conflicting information about what actually happens on a Windows client when using <code>split-dns</code>.  So much that I decided to gather some evidence and see where it points.  I set up a <em>simultaneous</em> packet capture on both the VPN-connected Windows client and the ASA to which that client is connected.  Here is a diagram of the test setup:</p>

<p><a href=""https://i.stack.imgur.com/F5J0X.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/F5J0Xm.png"" alt=""enter image description here""></a></p>

<p>With the packet captures running, I initiated DNS resolution on the client.  To do so, I pressed enter on <code>srv1.internal.example.com</code> in Google Chrome.  Here are the resulting packet captures adjusted to sync their clocks and merged together.  </p>

<p>Packets with IDs starting with ""C"" are from the Windows [C]lient.<br>
Packets starting with ""A"" are from the [A]SA.</p>

<p><img src=""https://i.stack.imgur.com/vgUk1.png"" alt=""enter image description here""></p>

<h2>Analysis</h2>

<p>In orange, we can see four separate DNS queries that are trying to be made by Windows/Chrome:  The destinations of the four DNS queries are as follows:</p>

<ul>
<li>8.8.8.8 - the DNS Server associated with the Wifi Adapter (packet <code>C69</code>) </li>
<li>10.10.10.3 - the first DNS Server associated with the VPN Adapter (packet <code>C70</code>)</li>
<li>8.8.8.8 - the DNS Server associated with the Wifi Adapter (packet <code>C78</code>)</li>
<li>10.10.10.4 - the second DNS Server associated with the VPN Adapter (packet <code>C81</code>)</li>
</ul>

<p>What is most revealing is that the two DNS queries apparently sent to 8.8.8.8 appear at the ASA in packets <code>A95</code> and <code>A105</code> with source and destination IPs translated from external addresses to internal addresses.  The responses from the DNS server for those translated queries are in <code>A97</code> and <code>A106</code> which are themselves then translated to external addresses again in packets <code>C74</code> and <code>C84</code>, respectively.  These DNS queries ultimately succeed.</p>

<h2>Answers to the original questions</h2>

<p><em>If Windows opts to send DNS queries for internal domains to adapters other than the VPN adapter, how can the VPN client ensure all DNS queries for internal domains are tunneled to the internal DNS servers?</em></p>

<p>Based on the above evidence, the VPN client seems to intercept DNS queries that match the domain configured using the <code>split-dns value</code> command on <em>non-VPN</em> adapters.</p>

<p><em>Am I missing something here? Is there something fancy going on that somehow allows the VPN client to intercept DNS queries that Windows sends to the wrong adapter?</em></p>

<p>The <em>fancy</em> part that was missing is that the VPN client performs a sort of network address translation to make it appear to Windows that DNS queries for the internal domain are being serviced by the <em>public</em> DNS server to which Windows sent its request.  In fact those requests are serviced by the internal DNS server.</p>

<p>I'm not sure exactly how this is accomplished, and there doesn't seem to be any documentation from Cisco that speaks to this.  I accept that there is some amount of sorcery that the VPN client performs on the Windows end to achieve a functioning split DNS.</p>

<hr>

<p><strong>Notes on Adapter Binding Order</strong></p>

<p>I tinkered with the oft-cited adapter binding order.  Here is what I found.  The adapter order seems to have no impact on the efficacy of the VPN Client's ability to intercept and translate DNS queries for internal domains.  </p>

<p>Putting the VPN adapter highest in the binding order seems to result in Windows sending DNS requests <em>only</em> to the DNS servers on the VPN adapter initially.  Those requests seem to be dropped entirely by the VPN Client (presumably because they don't match the internal domain).  This then results in a Windows timeout (or a series of them) until, eventually, Windows attempts DNS resolution using the non-VPN adapter.  This creates a noticeable and irritating delay when browsing.  </p>

<p>Based on this, it seems that in split DNS configurations the VPN adapter should <em>not</em> be the highest priority.</p>
","6806"
"What is the use of wild card masks vs normal masks","6669","","<p>I've always wondered what the use of wild card masks was. When I learned about them in college  I wondered what the use was, we saw that you could separate subnets by for instance even and uneven IPs. What is the practical use of wild card masks vs normal subnet masks?</p>
","<p>As I understand it, the question is what is the reason for the two different masks, not what are the differences between the masks. The two questions overlap somewhat, but it comes down to binary math (as YLearn hits on).</p>

<p>First, a netmask:</p>

<pre><code>IP:   1100 0000 . 1010 1000 . 1111 1000 . 0110 0100 = 192.168.248.100
Mask: 1111 1111 . 1111 1111 . 1111 1111 . 1111 1000 = 255.255.255.248
AND:  1100 0000 . 1010 1000 . 1111 1000 . 0110 0000 = 192.168.248.96
</code></pre>

<p>The <strong>AND</strong> operation on the IP address with the netmask results in the network <code>192.168.248.96/29</code>.</p>

<p>Next, a wildcard:</p>

<pre><code>NET:  1100 0000 . 1010 1000 . 1111 1000 . 0110 0000 = 192.168.248.96
WC:   0000 0000 . 0000 0000 . 0000 0000 . 0000 0111 = 0.0.0.7
OR:   1100 0000 . 1010 1000 . 1111 1000 . 0110 0111 = 192.168.248.103
</code></pre>

<p>performing an OR operation on the network results in the range of IPs (192.168.248.96-103) that may be permitted or blocked in an ACL or OSPF network statement (remember that OSPF only looks for interfaces that fall within the specified ranges -- i.e. it doesn't match IP <em>and</em> netmask, just the IP). It's very easy to check whether an IP is in range with:</p>

<blockquote>
  <p>IP <strong>OR</strong> WC == NET <strong>OR</strong> WC</p>
</blockquote>

<p>This is useful to the router because the netmask does not easily give you this information (without additional operations).</p>
","777"
"Using a Cisco router as an L2TP client?","6667","","<p>I have a customer that for various reasons has a Cisco router sitting behind a NATed ADSL connection. They want to create a VPN to one of our points of presence and the only options we offer are site to site or L2TP dial in.</p>

<p>Is it possible to configure their Cisco (3925) to connect via L2TP to our PoP? The L2TP server is a pair of Fortigate 100Ds and the configuration allows iPads, laptops, etc to dial in no problem, protected by IPSEC. </p>

<p>I'm testing this in my office with a 1921, the few references I've found indicate using a pseudowire setup is necessary, but I'm having trouble with getting that up, and where IPSEC fits into it.</p>
","<p>Sure, it's certainly possible. Basically, you'll need to setup a crypto map to catch and encrypt the L2TP traffic. The psuedowire\L2TP config can be attached to a Virtual-PPP interface. Here's a config snippet that should get you going. </p>

<pre><code>! Basic ISAKMP\IPSec configuration, tweak as needed. 
!
crypto isakmp policy 10
 encr 3des
 authentication pre-share
 group 2
 lifetime 4000
!
crypto isakmp key *preshared key* address 1.2.3.4
!
crypto ipsec transform-set ESP-AES256-SHA1 esp-aes 256 esp-sha-hmac
 mode transport
!
! Crypto map that will catch our L2TP Traffic defined in the L2TP_TRAFFIC ACL.
!
crypto map L2TP_VPN 10 ipsec-isakmp
 set peer 1.2.3.4
 set transform-set ESP-AES256-SHA1
 match address L2TP_TRAFFIC
!
! Match the L2TP traffic.
!
ip access-list extended L2TP_TRAFFIC
 permit udp host *Outbound IP* eq 1701 host 1.2.3.4 eq 1701
!
! Apply the crypto map to the outbound\internet facing interface. 
!
interface FastEthernet0/0
 ip address 192.168.1.2 255.255.255.0
 crypto map L2TP_VPN
!
! Define the psuedowire class that will speak L2TP and the source interface. 
!
pseudowire-class L2TP_PW
 encapsulation l2tpv2
 ip local interface FastEthernet0/0
!
! Create Virtual-PPP interface to bind the psuedowire class to. 
!
interface Virtual-PPP1
 description L2TP Tunnel
 ip address negotiated
 ppp chap hostname *User Name*
 ppp chap password *Password*
 ppp ipcp address accept
 pseudowire 1.2.3.4 1 pw-class L2TP_PW
</code></pre>

<p>You'll also need to add in relevant NAT and\or routing for your scenario. </p>
","6249"
"what to know about DSSS vs OFDM","6655","","<p>In all the detail on DSSS and OFDM, I have missed which characterics of DSSS and OFDM make these distinct technologies. Nothing I've read appears to contrast the two. </p>

<p>As I understand it, both DSSS and OFDM are intended to send many bits in parallel. DSSS spreads data across a channel for redundancy, and the books say that bits are sent in parallel. OFDM divides a channel into ""subcarriers"" and likewise sends bits in parallel. This might suggest the main difference between the two, that DSSS somehow sends data in parallel on a single carrier, whereas OFDM accomplishes this with multiple carriers. Either way, both take up more bandwidth than 1 signal, so I don't get how they're much different.</p>

<p>What should a network engineer know, about how DSSS and OFDM are fundamentally different from each other?</p>

<p>Update: According to the current CWNA book, OFDM is not a spread spectrum technology.</p>
","<p>From what I've gathered, the primary differentiation between DSSS and OFDM comes in a congested or constrained RF environment.  Because DSSS is transmitting as many bits as possible all at once, it runs the risk of having some of the transmission disrupted in transit should the RF become less than ideal.  In contrast, OFDM sacrifices a bit of performance to transmit the data in those multiple carrier ""packets"" that allow for reassembly or retransmission in the event of a failure.</p>

<p>If I use an extra-large semi truck to haul freight, it works well so long as the highway doesn't have any obstructions (like narrow lanes or short overpasses).  If I break my freight up into a greater number of smaller trucks, I can ensure that some of the freight arrives even if conditions (like a traffic jam) prevent the entire shipment from arriving.</p>
","326"
"Determining Host portion from a given ip address","6652","","<p>I need to determine the subnetmask and Host Id of a given address: 175.142.213.217/22</p>

<p>This is what I have so far:</p>

<pre><code>Address:    01010111.10001110.11010101.11011001
SubnetMask: 11111111.11111111.11111100.00000000 = 255.255.252.0
</code></pre>

<p>The part I'm stuck on is how to determine the Host Id.</p>

<p>Can someone please explain to me in great detail how I would get to that point from what I have so far (assuming my answers above are correct)</p>
","<p>You have a subnet mask, but you need a host mask, which is just the NOT of the subnet mask (reverse the ones and zeros) to get 00000000.00000000.00000011.11111111.</p>

<p>AND the address and the host mask (only ones in both positions get to be one in the result) to get 00000000.00000000.00000001.11011001.</p>

<p>Convert that back to decimal (0.0.1.217) or give it as an offset into the subnet (473).</p>
","11276"
"Negotiation speed/duplex between a Gigabit ethernet switch or hub and NIC","6632","","<p>Please help me on this case:</p>

<p>When I connect a NIC manually set to 100 Mbps and Full Duplex to a Gigabit Ethernet port (set to Auto/Auto), what will the result be?</p>

<p>Will the Gigabit Ethernet port negotiate to 100Mbps/FD or 100Mbps/HD?</p>

<p>Are there any documents that describe this behavior in detail?</p>
","<p>By manually setting the speed and duplex on one side with automatic detection on the other side, the side with automatic speed will detect (not negotiate) the correct speed.</p>

<p>For the duplex, negotiation will fail.  This results in the side with automatic duplex set to the default duplex for the speed.  The default duplex for 1 Gb is FULL, and for 10 and 100 Mb is HALF.</p>

<p>Your scenario results in a duplex mismatch which causes several problems that will slow the link to a crawl.</p>

<p>Cisco has a nice table in this document: <a href=""http://www.cisco.com/c/en/us/support/docs/switches/catalyst-6500-series-switches/17053-46.html"" rel=""nofollow"">http://www.cisco.com/c/en/us/support/docs/switches/catalyst-6500-series-switches/17053-46.html</a></p>

<p>Apparently, someone has isolated the <a href=""http://tools.cisco.com/search/results/display?url=https%3A%2F%2Fsupportforums.cisco.com%2Fsites%2Fdefault%2Ffiles%2Flegacy%2F7%2F3%2F0%2F9037-Switch%2520-%2520to%2520-%2520PC%2520Speed%2520%2526%2520Duplex%2520Settings%2520-%2520Valid%2520Configuration%2520Table.doc&amp;pos=27&amp;query=autonegotiation%20duplex%20mismatch"" rel=""nofollow"">table</a> in a separate document.</p>
","16620"
"Correct ACL rule to open UDP ports for VoIP","6621","","<p>I have the current rules in an attempt to open port 5060 and 10000-20000 for my VoIP provider.  We are on a Cisco 1921 router.  This ACL is applied to the WAN port on the router facing the ISP.  Nmap port scan shows these ports as closed.  </p>

<ol>
<li>Can anyone help verify my ACL and correct my rule if necessary?</li>
<li>Do I need an outbound ACL to open up the port as well since this is for a hosted VoIP PBX?</li>
<li>Is Nmap not detecting the open port because I am not the specific host for the ACL?  I tried some other ports that are not specific to a public IP and Nmap also shows as closed.</li>
<li>Do my L3 switches behind the router also need an ACL to open ports if they are between the PC and the router?</li>
</ol>

<p><strong>Router Config</strong></p>

<pre><code>interface GigabitEthernet0/0
 description WAN
 ip address x.x.x.x 255.255.255.240
 ip access-group 101 in
 ip nat outside
 ip virtual-reassembly in
 duplex auto
 speed auto
!
interface GigabitEthernet0/1
 description LAN
 ip address 192.168.1.2 255.255.255.0
 ip nat inside
 ip virtual-reassembly in
 duplex auto
 speed auto
!
access-list 101 permit udp host x.x.x.x any eq 5060
access-list 101 permit udp host x.x.x.x any range 10000 20000
</code></pre>

<p><strong>Nmap Port Scan</strong></p>

<pre><code>Starting Nmap 6.47 ( http://nmap.org ) at 2015-03-04 16:24 PST
Nmap scan report for
Host is up (0.022s latency).
PORT     STATE  SERVICE
5060/udp closed sip

Starting Nmap 6.47 ( http://nmap.org ) at 2015-03-04 16:24 PST
Nmap scan report for 
Host is up (0.023s latency).
PORT      STATE  SERVICE
10000/udp closed ndmp


Starting Nmap 6.47 ( http://nmap.org ) at 2015-03-04 16:24 PST
Nmap scan report for wsip-184-191-183-54.sd.sd.cox.net (184.191.183.54)
Host is up (0.026s latency).
PORT      STATE  SERVICE
20000/udp closed unknown
</code></pre>
","<p>You should not need an outbound ACL, based on the configuration shown the outbound path is not restricted.</p>

<p>You quote two lines of the inbound ACL:</p>

<pre><code>access-list 101 permit udp host x.x.x.x any eq 5060
access-list 101 permit udp host x.x.x.x any range 10000 20000
</code></pre>

<p>I assume the external IP X.X.X.X can reach any internal IP, using 5060 or 10000-20000 as the <strong>internal destination's port</strong>.</p>

<p>If that's correct then that's fine (it's not clear to me from the question).  However, if it's <strong>the source port</strong> (on the external server) that's using 5060 or 10000 to 20000 and the destination port doesn't happen to be the same then you'd need something like:</p>

<pre><code>access-list 101 permit udp host x.x.x.x eq 5060 any
access-list 101 permit udp host x.x.x.x  range 10000 20000 any
</code></pre>

<p>Also, I would refer to the hosted PBX's instructions on NAT because if they are trying to reach into VoIP devices on your network without them first reaching out, then there may be issues.</p>
","17272"
"How to trace a MAC address on a switched LAN?","6615","","<p>How to trace a MAC address on a switched LAN?</p>

<p>I want to be able to find out a switch port's MAC address.</p>

<ul>
<li>No device uses IP, therefore no address resolution and no SNMP.</li>
<li>No device runs CDP, therefore no Cisco L2 traceroute.</li>
<li>No fancy tools on my laptop available.</li>
</ul>

<p>Topology: There are 10 switches. One is in the center. It is connected to four other switches. Each of those four switches is connected to another switch. Each switch in the third row has three end devices attached. All devices are connected via switching port, except end devices which use their NIC. I cannot change the topology. But I can hang on to whatever device I want and change its configuration as far as I do not assign an IP address to a switch or enable CDP.</p>

<p>Firmware: Cisco Catalyst 2950-24 IOS C2950-I6Q4L2-M 12.1(22)EA4. That's the one Packet Tracer simulates.</p>

<p>Yes, I did read the question <em>Locate a host on Network</em>. This question may be answered with a simple no.</p>
","<p>If you have an <a href=""https://learningnetwork.cisco.com/thread/21137"" rel=""nofollow noreferrer"">end-to-end vlan topology</a>, where vlans are not terminated on switches, you can use somethink like this algorithm:</p>

<p>On the root switch get the mac address table, use filter output:</p>

<pre><code>sh mac add | i 8a06

1    0015.5d02.8a06   dynamic ip,ipx,assigned,other TenGigabitEthernet4/5 
</code></pre>

<p>Now you know, that mac is behind interface TenGigabitEthernet4/5. Connect to the switch behind this interface, and repeat <code>sh mac add | i 8a06</code>. You will find your host in the end.</p>
","5833"
"List of random existing IP addresses","6607","","<p>I would need a list of IP addresses (that can be reached by traceroute), preferably in random physical locations. </p>

<p>Is it possible to generate such a list from RIPE, ARIN and APNIC? If so, how would I do that? Or is there some other tool for generating random reachable IP addresses? </p>

<p>The list should contain at least 100 IP addresses.</p>
","<p>A crude, but functional way of finding addresses within the scope of what you’re looking for is pretty simple, given you find the right site.  Personally, I’d just crawl through <a href=""http://www.nirsoft.net/countryip/"" rel=""nofollow"">NirSoft’s Major IP Address Blocks By Country</a>.  Not entirely sure how reliable or up to date this site is, but it's the best I found.</p>

<p>If you do a <code>curl</code> on that link combined with a couple parsing parameters, you’d come up with something like this.</p>

<pre><code>Ryans-MacBook-Pro-4:~ ryan$ curl -s http://www.nirsoft.net/countryip/ | grep ""&lt;td&gt;&lt;a""
&lt;td&gt;&lt;a href=""af.html""&gt;Afghanistan&lt;/a&gt;
&lt;td&gt;&lt;a href=""al.html""&gt;Albania&lt;/a&gt;
&lt;td&gt;&lt;a href=""dz.html""&gt;Algeria&lt;/a&gt;
&lt;td&gt;&lt;a href=""as.html""&gt;American Samoa&lt;/a&gt;
&lt;td&gt;&lt;a href=""ad.html""&gt;Andorra&lt;/a&gt;
&lt;...snip...&gt;
&lt;td&gt;&lt;a href=""ye.html""&gt;Yemen&lt;/a&gt;
&lt;td&gt;&lt;a href=""zm.html""&gt;Zambia&lt;/a&gt;
&lt;td&gt;&lt;a href=""zw.html""&gt;Zimbabwe&lt;/a&gt;
</code></pre>

<p>From there, you just iterate through each <code>href</code> and replace the .html with .csv to get an usable output.  For example, if you wanted to see what IP spaces Yemen was using, I used:</p>

<pre><code>Ryans-MacBook-Pro-4:~ ryan$ curl -s http://www.nirsoft.net/countryip/ye.csv
31.31.176.0,31.31.191.255,4096,21/03/11,Public Telecommunication Corporation
46.35.64.0,46.35.95.255,8192,13/10/10,Public Telecommunication Corporation
78.137.64.0,78.137.95.255,8192,11/09/12,Public Telecommunication Corporation
82.114.160.0,82.114.191.255,8192,30/12/03,Public Telecommunication Corporation
89.189.64.0,89.189.95.255,8192,11/10/06,Public Telecommunication Corporation
109.74.32.0,109.74.47.255,4096,20/10/09,Public Telecommunication Corporation
109.200.160.0,109.200.191.255,8192,05/02/10,Public Telecommunication Corporation
195.94.0.0,195.94.31.255,8192,15/08/96,TeleYemen
</code></pre>

<p>Some basic syntax would make it usable; like taking the first subnet in each section.</p>

<pre><code>Ryans-MacBook-Pro-4:~ ryan$ curl -s http://www.nirsoft.net/countryip/ye.csv | head -1 \
 | cut -d "","" -f 1-2 | tr "","" "" ""
31.31.176.0 31.31.191.255
</code></pre>

<p>For obvious reasons we aren’t going to automate this entire process for you, but this should set you off in the right direction.</p>
","13316"
"Cisco 3560X Switch MAC reported with same IP as other equipment","6597","","<p>We have a network with a bunch of 3560 switches setup and desktops/laptops and some Rockwell Automation equipment connected to them. We had to add a new switch, a 3560X to the network recently to add capacity. After adding this switch, a bunch of the Rockwell Automation devices detect duplicate IPs from the MAC of the new switch. This does not occur with any desktops/laptops/printers/etc. The issue happens to Rockwell equipment plugged into 3 different switches.</p>

<p>All wired ports use vlan 101. It is on subnet:
10.2.30.0/23</p>

<p>All network devices are on vlan 2 for management. Subnet:
10.32.2.0/24</p>

<p>The new switch did have an interface on vlan 101 without an IP assigned (mistake) which I removed recently but the issue persisted. I am rebooting the switch now as at least on the routers, the interface persists in a deleted state until a reboot.</p>

<p>I am going to be setting up an RSPAN for the ports with equipment having the issue next if this persists after the reboot.</p>

<p>What would cause end user devices to think a switch has the same IP as them? We have not had this issue at any other site with the same setup.</p>

<p>Switch layout:</p>

<pre><code>switch-stack1 -G1/0/10----G0/1-&gt; switch2 -G0/2----G0/1 -&gt; switch3
                                 switch2 -G0/3----G0/1 -&gt; switch4

switch-stack1 -Gi1/0/6----G0/1-&gt; switch5

switch-stack1 -Gi1/0/5----G0/1-&gt; switch6 -G0/3--G1/0/1 -&gt; switch7

switch-stack1 -Gi1/0/4--G1/0/1-&gt; New switch causing problem

switch-stack1 -Gi1/0/1----G0/1-&gt; switch8
</code></pre>
","<p>Hope this helps as I had the same issue and this corrected the problem.</p>

<p>568750 - False Duplicate IP detection on Logix Ethernet modules when used with Cisco switches
Access Level: Everyone
Date Created: 10/22/2013 10:54 AM
Last Updated: 08/27/2014 10:33 AM</p>

<p>Problem
When Logix Ethernet modules are connected to a subnet containing Cisco switches with ""ip device tracking"" (IPDT) enabled, the modules may go into a duplicate IP address state after a restart/reset.</p>

<p>Environment
Any layer two networks that contain both Logix Ethernet modules and Cisco switches running IPDT. IPDT is much more likely to be implemented on Cisco switches as of August, 2013 because of a behavior change which enables this command if any feature which requires it is enabled. This behavior change also removes the ability to turn off IPDT without first turning off any features which require IPDT.</p>

<p>The Stratix line of switches will not have “ip device tracking” enabled by default until a permanent solution is in place.</p>

<p>Cause
The IPDT feature sends probe ARP packets with a source IP address of 0.0.0.0., the source MAC ID of the switch, and the target IP and MAC ID for the device being probed to check that it is still connected and responsive.</p>

<p>When a device becomes disconnected, and then is reconnected within the configurable IPDT timeout period, probe ARP packets may be received by a Logix Ethernet module at the same time as it is in its Address Conflict Detection mechanism. If this happens, the Logix Ethernet module will immediately go into a duplicate IP state, and stop communicating.</p>

<p>IPDT when activated on a Cisco switch will try to probe for every ip connected on the subnet, regardless of whether it is connected to that switch or not. Testing has shown that this affects the majority of Ethernet modules sold by Rockwell Automation.</p>

<p>Workaround
Several workarounds to this issue exist. They all make suggestions using Cisco IOS command-line interface commands.</p>

<p>Workaround 1
Architect manufacturing zone subnets such that:
1.     IPDT is explicitly disabled on every trunk port with the following command:</p>

<p>Hostname (config-if)# ip device tracking maximum 0
2.     IPDT probe delay is manually configured on any access port connected to a Rockwell Automation Ethernet module with the following command:</p>

<p>Hostname (config)# ip device tracking probe delay 10
Workaround 2
If the switch in question has an administration IP (SVI) configured on the subnet/VLAN in question the Cisco CLI command:</p>

<p>Hostname (config)# ip device tracking probe use-svi
will insert the administration IP into the source IP in the IPDT packet. This packet will not impact Address Conflict Detection operation.</p>

<p>Workaround 3
Disable IPDT on any Cisco switch ports with IPDT enabled that subsequently connect to a Rockwell Automation Ethernet module with the following command:</p>

<p>Hostname (config-if)# ip device tracking maximum 0
Solution
The permanent solution is under consideration.</p>

<p>Comments (1)</p>

<p>jbrodsky
06/04/2014 08:13 AM
This command does not work in all Cisco switch firmwares.</p>

<p>The command that worked for me was </p>

<p>Hostname (config-if) # nmsp attach suppress</p>

<p>and I later confirmed that it worked by issuing the following command</p>

<p>Hostname # show ip device tracking all</p>

<p>and the device should NOT show up in the list of enabled devices. </p>

<p>The alternative command that others have used to disable IP device tracking is 
Hostname (config-if) # no ip device tracking max</p>

<p>But that had no effect for me using a 3850 stack with version 3.02.03.SE
The command was accepted but did not disable anything when I checked with showing device tracking. </p>

<p>Be forewarned that Cisco is having complaints about this issue and they are probably going to change the firmware yet again...
Reply | Flag as Inappropriate |
Post a Comment
Product Tree for This Answer (expand/collapse)Expand Product Tree for This Answer ID
Answers others found helpful</p>

<p>35072 - EtherNet/IP Duplicate Address Detection
118216 - Logix modules Duplicate IP address detection enhancement
51541 - 1756-ENBT display Duplicate IP scrolling over display
573991 - Unknown multicast traffic flooding network with 1783-ETAP with IGMP
42616 - IP addresses of Ethernet modules in a Redun</p>
","10952"
"Can we change peer IP of IPSec VPN tunnel in one line?","6587","","<p>If I have a crypto map with a line as follows:</p>

<pre><code>crypto map Outside_map 10 set peer 1.2.3.4 5.6.7.8
</code></pre>

<p>Can I change that simply by typing the following in conf t:</p>

<pre><code># crypto map Outside_map 10 set peer 0.9.8.7 6.5.4.3
</code></pre>

<p>Or do additional steps need to be taken beforehand?  What about afterwards??
Running a Cisco ASA 5510, software version 8.3(2)</p>
","<blockquote>
  <p>Can I change that simply by typing the following in conf t:</p>
</blockquote>

<p>In your example, issuing <code>crypto map Outside_map 10 set peer 0.9.8.7 6.5.4.3</code> will append <code>0.9.8.7 6.5.4.3</code> to your existing peer list for <code>Outside_map</code>'s sequence number 10. <a href=""http://www.cisco.com/c/en/us/td/docs/security/asa/asa-command-reference/A-H/cmdref1/c6.html#pgfId-2478203"">The peer list can hold up to ten addresses</a>.</p>

<pre><code>ASA3(config)# show run crypto | i peer
crypto map Outside_map 10 set peer 1.2.3.4 5.6.7.8 

ASA3(config)# crypto map Outside_map 10 set peer 0.9.8.7 6.5.4.3
ASA3(config)# show run crypto | i peer
crypto map Outside_map 10 set peer 1.2.3.4 5.6.7.8 0.9.8.7 6.5.4.3
</code></pre>

<p>You'll need to negate the entries for <code>1.2.3.4 5.6.7.8</code> if you intend to simply swap the two for two.</p>

<blockquote>
  <p>..do additional steps need to be taken beforehand? What about
  afterwards?...</p>
</blockquote>

<p>Ensuring the new VPN peer(s) have compatible IKE phase I and phase II configurations, reflexive ACLs, <a href=""http://www.cisco.com/c/en/us/td/docs/security/asa/asa83/configuration/guide/config/vpngrp.html#wp1113843"">tunnel-group configuration</a> for the new peer addresses and a roll-back plan may help with making this change.</p>

<p><a href=""http://www.cisco.com/c/en/us/td/docs/security/asa/asa83/configuration/guide/config/site2sit.html#wp1055829"">ASA 8.3 L2L VPN Configuration Reference</a></p>

<p><strong>Example Output:</strong></p>

<p>The following example shows changing an ASA's remote peer IP address from 2.2.2.2 to 4.4.4.4.</p>

<pre><code>asa1(config)# show run crypto 
crypto map Outside_map 1 set peer 2.2.2.2

asa1(config)# tunnel-group 4.4.4.4 type ipsec-l2l
asa1(config)# tunnel-group 4.4.4.4 general-attributes
asa1(config-tunnel-general)# tunnel-group 4.4.4.4 ipsec-attributes
asa1(config-tunnel-ipsec)#  ikev1 pre-shared-key C1sc0123

asa1(config)# show crypto isa sa

1   IKE Peer: 2.2.2.2
    Type    : L2L             Role    : initiator 
    Rekey   : no              State   : MM_ACTIVE 

asa1(config)# show crypto ipsec sa
interface: outside
Crypto map tag: Outside_map, seq num: 1, local addr: 3.3.3.3

  access-list VPN_ALLOWED_ACCESS extended permit ip 1.1.1.0 255.255.255.0 1.1.2.0 255.255.255.0 
  local ident (addr/mask/prot/port): (1.1.1.0/255.255.255.0/0/0)
  remote ident (addr/mask/prot/port): (1.1.2.0/255.255.255.0/0/0)
  current_peer: 2.2.2.2

  #pkts encaps: 60, #pkts encrypt: 60, #pkts digest: 60
  #pkts decaps: 60, #pkts decrypt: 60, #pkts verify: 60 


asa1(config)# no crypto map Outside_map 1 set peer 2.2.2.2 
WARNING: The crypto map entry will be incomplete!
asa1(config)# crypto map Outside_map 1 set peer 4.4.4.4 
asa1(config)# show run crypto | include peer
crypto map Outside_map 1 set peer 4.4.4.4 
</code></pre>

<p>After making the change a new SA should be built to the new peer address(es).</p>

<pre><code>#ping vrf ASA4 10.10.10.2 rep 50 

Type escape sequence to abort.
Sending 50, 100-byte ICMP Echos to 1.1.2.2, timeout is 2 seconds:
!!!!!!!!!!!!!!!!!!!!..!!!!!!!!!!!!!!!!!!!!!!!!!!!!
Success rate is 96 percent (48/50), round-trip min/avg/max = 96/109/200 ms

asa1(config)# show crypto isa sa

1   IKE Peer: 4.4.4.4
    Type    : L2L             Role    : initiator 
    Rekey   : no              State   : MM_ACTIVE 


asa1(config)# show crypto ipsec sa
interface: outside
    Crypto map tag: Outside_map, seq num: 1, local addr: 3.3.3.3

    access-list VPN_ALLOWED_ACCESS extended permit ip 1.1.1.0 255.255.255.0 1.1.2.0 255.255.255.0 
    local ident (addr/mask/prot/port): (1.1.1.0/255.255.255.0/0/0)
    remote ident (addr/mask/prot/port): (1.1.2.0/255.255.255.0/0/0)
    current_peer: 4.4.4.4

    #pkts encaps: 172, #pkts encrypt: 172, #pkts digest: 172
    #pkts decaps: 172, #pkts decrypt: 172, #pkts verify: 172
</code></pre>
","7794"
"Why does the ASA 5512-X not support traffic shaping?","6585","","<p>The cisco documentation claims that the ASA 5512-X does not support traffic shaping because it is a multi processor device. Why is this? </p>

<p>Is shaping just inherently active? </p>

<p>It seems like the shapper is a good feature, i don't understand why it is not available. </p>

<p>To add more details, the shape command is not available under the class default policy, it is located elsewhere? 
Here is what I normally apply</p>

<pre><code>class-map RTP-traffic
 match dscp ef 
class-map SIP-traffic
 match dscp af31 

policy-map voice-policy
 class RTP-traffic
  priority
 class SIP-traffic
  priority

policy-map outside-policy
 class class-default
  shape average 5000000
  service-policy voice-policy

service-policy outside-policy interface outside
</code></pre>

<p>But when I go to apply this i only see</p>

<pre><code>ASAX(config-pmap-c)# policy-map outside-policy
ASAX(config-pmap)#  class class-default
ASAX(config-pmap-c)# ?

MPF policy-map class configuration commands:
  exit             Exit from MPF class action configuration mode
  help             Help for MPF policy-map class/match submode commands
  no               Negate or set default values of a command
  police           Rate limit traffic for this class
  priority         Strict scheduling priority for this class
  quit             Exit from MPF class action configuration mode
  set              Set connection values
  user-statistics  configure user statistics for identity firewall
  &lt;cr&gt;
  csc              Content Security and Control service module
  flow-export      Configure filters for NetFlow events
  inspect          Protocol inspection services
  ips              Intrusion prevention services
</code></pre>

<p>And the shape is not available. </p>
","<p>Shaping is not supported at this time on the new hardware. This is a hardware limitation with multi-processor multi-core units, not a software limitation. 
This is not specifically detailed in the document mentioned above. I asked a Cisco product rep and he confirmed that it is not support. </p>

<p><a href=""https://supportforums.cisco.com/thread/2231107"" rel=""nofollow"">https://supportforums.cisco.com/thread/2231107</a></p>
","2621"
"Dynamic ARP Inspection ports err-disable with %SW_DAI-4-PACKET_RATE_EXCEEDED","6573","","<p>Ports in my network on random switches(connected to Windows 7 workstations) are going into err-disable because of dynamic arp inspection. Ports are going into err-disable because there are too many arp requests packets per second. </p>

<p>Please see output from the log:</p>

<pre><code>Mar  2 13:14:35 EST: %SW_DAI-4-PACKET_RATE_EXCEEDED: 21 packets received in 922 milliseconds 
on Gi1/0/6.
Mar  2 13:14:35 EST: %PM-4-ERR_DISABLE: arp-inspection error detected on Gi1/0/6, putting 
Gi1/0/6 in err-disable state
Mar  2 13:14:36 EST: %LINEPROTO-5-UPDOWN: Line protocol on Interface 
GigabitEthernet1/0/6, changed state to down
</code></pre>

<p>I was able to capture port going into error disable (through SPAN). Please see attached capture:
<a href=""https://app.box.com/s/2ow0tlutzxwk5odk0zuqhug1kgqlykbd"" rel=""nofollow"">https://app.box.com/s/2ow0tlutzxwk5odk0zuqhug1kgqlykbd</a></p>

<p>The IP address of the workstation that is on port gig1/0/6 is 151.121.79.89.</p>

<p>As far as I see there are many ARP requests for 151.121.79.89 from random workstations at 13:14:34 and that is causing port to go into err-disable.</p>

<p>I am working with a Cisco <code>WS-C2960S-48FPS-L</code></p>

<p>Port configuration is standard for all access ports:</p>

<pre><code>switchport access vlan 79
switchport mode access
switchport voice vlan 3001
switchport port-security maximum 3
switchport port-security
switchport port-security aging time 2
switchport port-security violation restrict
ip arp inspection limit rate 20
srr-queue bandwidth share 1 30 35 5
queue-set 2
priority-queue out
mls qos trust device cisco-phone
mls qos trust cos
spanning-tree portfast
service-policy input AUTOQOS-SRND4-CISCOPHONE-POLICY
ip dhcp snooping limit rate 20
</code></pre>

<p>I'm also including the arp inspection config (the dhcp-snooping config on vlan 79 is typical): </p>

<pre><code>ip arp inspection vlan 79
ip arp inspection validate src-mac ip
ip arp inspection log-buffer entries 1024
ip arp inspection log-buffer logs 1024 interval 10
</code></pre>

<p>I am wondering why would random workstations try to resolve ip address of workstation connected to the 1/0/6 in less than a second?</p>
","<p><code>ip arp inspection limit rate 20</code></p>

<p>20 packets per second is <em>really</em> low. If there's a server on that port (or more than one system), 20 pps is nothing.</p>

<p><strong>Update</strong></p>

<p>I don't know what any hosts are on your network (who's talking to who, and why), but for the minute at 13:14:34, 15 hosts asked who 89 was. And 89 asked who 5 hosts were. The request ~0.1sec before this period runs the total to 21pps. [filter: arp &amp;&amp; (eth.src == 10:1f:74:f5:be:36)]</p>

<p>[Note: Cisco's default is even worse at <em>15</em>.]</p>
","17093"
"Trouble configuring AnyConnect to use a RSA token PIN only for authentication","6552","","<p>I have a 5515X 9.1.2 configured with AnyConnect 3.1.04059. I have successfully configured it to accept RSA secureID tokens by means of using the PIN+TokenCode. Now I simply want to enable it so Windows users can just enter their PIN.  </p>

<p>I have already:</p>

<ul>
<li>Enabled <code>proxy-auth SDI</code> in the tunnel-group (same as ""Enable the display of SecurID messages"" from ASDM)</li>
<li>Enabled <code>SoftwareToken</code> in the Anyconnect profile which gives me a prompt of ""PIN:"" when attempting the connection.</li>
</ul>

<p>Upon entering my PIN only, the RSA server is giving this error:</p>

<blockquote>
  <p>Bad tokencode, but good PIN detected for token serial number “0001162345211323” assigned to user “suser” in security domain “SystemDomain” from “Microsoft AD - MYDOM” identity source</p>
</blockquote>

<p>At this point I'm thinking that the new AnyConnect software doesn't know how to interact with RSAs stauto32.dll to get the token code. However I don't know how to troubleshoot that.</p>
","<p>I upgraded to Anyconnect 3.1.04063 and this has resolved my problem.</p>
","2733"
"Using wireless cards in promiscuous mode","6528","","<p>I have encountered problems trying to catch packets in promiscuous mode from a wireless interface. I have used various adapters on different platforms, but i can only catch packets destined or originating from my machine, nothing from other computers in the connection.</p>

<p>Is this even doable with commercial adapters and drivers?</p>
","<p>In Infrastructure/ESS mode, it doesn't make much sense to capture packets going to other stations in promiscuous mode, for several reasons :</p>

<ul>
<li>The 802.11 ESS operation assumes that, in a BSS, all non-AP stations must send all their packets to the AP, regardless of the destination address.</li>
</ul>

<p>This is implemented as follows: if a station wants to communicate with another station, it must send a packet to the AP with the transceiver and source address set to its MAC address, the receiver address set to the AP's MAC address (known as the BSSID) and the destination address set to the intended station's MAC.  The AP will then retransmit (or not) the packet to the destination station, changing only the transceiver and receiver address.</p>

<p>This means the AP essentially acts as a wireless switch. All stations only have a channel to the switch, and nothing else.  This has many implications on how the protocol (including security) works.  This means that a station can only reliably receive frames that are for him. The only exception being broadcast/multicast frames, which, guess what, are unreliable.</p>

<ul>
<li>The 802.11 standard is made to be compatible with 802.3 networks.</li>
</ul>

<p>The implication is that, on most OS, a 802.11 station is presented as an Ethernet interface, which carries Ethernet frames. You can already guess what you would see when capturing in promiscuous mode on a 802.11 managed interface: you get Ethernet frames that bear little resemblance with the actual 802.11 frames that got transmitted/received.</p>

<p>This means that this ""promiscuous"" flag is only enabled on an Ethernet-like network interface.  On an switched Ethernet network, turning on promiscuous mode will not allow you to receive Ethernet frames that are not for you (it will merely enable you to see multicast frames that you are not interested in), so the 802.11-as-ethernet interface should do just the same thing.</p>

<p>More importantly: Even if promiscuous mode on that interface is meant to enable receiving frames for other stations, these frames can not be presented as Ethernet frames: A 802.11 frame has 3 or 4 addresses, can have their payload encrypted and has many other fields that Ethernet does not have. And 802.11 has support for AP that both allow encryption and clear text, so you cannot even enable that feature when connected to a open access point. And remember that receiving frames for other stations is unreliable, because the AP will retransmit these frames until the other station received it correctly, not until you receive it correctly.</p>

<hr>

<p>What you actually need is an interface that can fetch true 802.11 frames.  Depending on the OS, this is either presented as a different API or as a true 802.11 network interface.</p>

<p>On modern Linux system and cfg80211-based drivers, the 802.11 network card is presented as a ""wiphy"", which is not a network interface nor allow you to capture frames. This wiphy is in fact a container of virtual network interfaces, known as ""vif""s. These vifs are the part that actually assumes wifi modes (managed station, AP, IBSS station, mesh point).  There is usually one vif per wiphy, but additional vifs may be created if supported by the driver and card.</p>

<p>One type of vif is the monitor vif.  This is a 802.11-with-radiotap network interface that receives as much 802.11 frames as the wifi card can provide to the kernel/driver.  Generally, these interface allow to receive frames for other stations associated to the same AP, but also frames that belong to other BSSes (depending on the monitor options).</p>

<p>Most Linux drivers support monitor mode vifs.  When the driver doesn't, it generally because the card is a fullMAC wifi interface that does not provide the functionality.</p>

<p>Now what you ask is a way to both act as a station AND receive frames from other stations.  For that you need two vifs: a managed station vif and a monitor vif.  This multi-vif configuration is supported by all mac80211 based softMAC drivers, but there is still the possibility that it is not supported by some fullMAC devices, even if they support a single monitor vif.</p>

<p>When this combination is supported, the monitor vif will automatically be slaved to whatever channel the managed vif is using, so you don't even have to configure the monitor channel or anything, and even if you try, it will most likely fail.</p>

<hr>

<p>On a practical note: use <code>iw phy</code> to list your wiphys, <code>iw dev</code> to list the vif associated with the wiphys, use <code>iw phy phyX interface add mon0 type monitor</code> to create a <code>mon0</code> monitor vif associated with the <code>phyX</code> wiphy. <code>iw dev wlanX interface add mon0 type monitor</code> can also be used if you want to specify a vif of the wiphy instead of the wiphy itself.  Once that is done, you may turn that monitor interface up (<code>ip link set mon0 up</code>) and start capturing packets with <code>tcpdump</code> or whatever capture program of your choice that can understand 802.11-with-radiotap while the other is connected to your AP.</p>

<p>Of course, if your AP use encryption, you will capture encrypted frames. But note that on a RSN/WPA2 network with a single PSK, anyone knowing the PSK can decrypt all frames of the BSS if it has captured the 4 way handshake and SAE is not used. The <code>airdecap-ng</code> tool from aircrack-ng implement that functionality.</p>
","3787"
"Is host name and server name the same thing?","6515","","<p>I have seen the use of both terms. Are they the same thing or are there any differences between them?</p>

<p>I have seen the use of ""server name"" on this <a href=""https://en.wikipedia.org/wiki/Virtual_hosting"" rel=""nofollow"">Wikipedia page</a> and on this <a href=""https://answers.yahoo.com/question/index?qid=20071201064530AAjdnGe"" rel=""nofollow"">Yahoo Answers page</a>.</p>
","<p><strong>hostname</strong> is the correct term when referring to the name of a machine, as opposed to its IP address.  From Wikipedia:</p>

<blockquote>
  <p>In computer networking, a hostname (archaically nodename) is a
  label that is assigned to a device connected to a computer network and
  that is used to identify the device in various forms of electronic
  communication such as the World Wide Web, e-mail or Usenet.</p>
</blockquote>

<p>With ""server name"" or ""machine name"" it is intended, well, the name (hostname) of the server or the machine.</p>

<p>Note that the hostname (e.g. <code>jupiter</code>) usually doesn't include the domain name (e.g. <code>example.org</code>). Together, they form a FQDN (Fully Qualified Domain Name): <code>jupiter.example.org</code>. This is the most precise usage. <br>However, for instance when talking about the World Wide Web as in the Wikipedia page you linked, <code>jupiter.example.org</code> is often called (somehow incorrectly) an hostname.<br>
In the Yahoo question you linked, they're synonyms.</p>
","24011"
"What does the 1000M on a network switch mean?","6434","","<p>I thought the 1000M ment that it was capable of Gigabit speed but it isn't, I noticed then that it stated 10/100Mbps. What does this 1000M mean?</p>

<p><a href=""https://i.stack.imgur.com/irX3P.jpg""><img src=""https://i.stack.imgur.com/irX3P.jpg"" alt=""Network Switch 1000M vs 100Mbps""></a></p>
","<blockquote>
  <p>I thought the 1000M ment that it was capable of Gigabit speed</p>
</blockquote>

<p>The 1000M is clearly labelling indicator lights showing that the ports in question are running at gigabit speeds.</p>

<blockquote>
  <p>but it isn't, I noticed then that it stated 10/100Mbps. </p>
</blockquote>

<p>Have you tested all the ports?</p>

<p>The line you highlighted part of says</p>

<p>""24 port 10/100 + 2 SFP/1000T combo""</p>

<p>""24 port 10/100"" indicates that your switch has 24 ports that are capable of 10/100 speeds.</p>

<p>""2 SFP/1000T combo"" indicates that your switch has two gigabit ports which can be used either directly for 1000BASE-T copper or used with a SFP module (for gigabit fiber).</p>

<p>Since only ports 25 and 26 have ""1000M"" lights it's pretty clear that ports 1-24 are the 10/100 ports and ports 25-26 are the gigabit ports. If you connect two devices to ports 25 and 26 you should get gigabit speeds between them. If you don't you might want to check the configuration to make sure noone has locked the ports to a lower speed.</p>

<p>It's very common in switches to have a couple of ports that are faster than the rest. This makes sense because in general you want your backbones to be faster than your access ports.</p>
","26705"
"Find SSL version in TCP-packets in established TCP-connection","6417","","<p>is it possible to see the used SSL-Version in a TCP-dump in an established TCP-connection without killing the connection and re-establishing it to capture the ""Client Hello""?
If yes, where can I find it?</p>

<p>BR and thanks in advance.</p>
","<p>Yes, absolutely, that is possible. The TLS record header is not encrypted. The two-octet version field is located at offset 1 in the TLS record header. Assuming a TLS record was not split into multiple TCP segments (which in practice is usually the case but cannot be relied upon), the second and third byte within the TCP payload indicate the TLS version used, e.g. <code>0x03 0x01</code> for TLS 1.0 or <code>0x03 0x03</code> for TLS 1.2. For more details, refer to the respective RFCs, e.g. <a href=""https://tools.ietf.org/html/rfc5246#section-6.2.3"" rel=""nofollow"">RFC 5246 6.2.3</a> for the format of the TLS 1.2 record layer for encrypted payloads.</p>

<p>Wireshark and its command line companion <code>tshark</code> will show you the decoded TLS version of any given TLS record as you would expect. To show that using <code>tcpdump</code>, you can use <code>-x</code> to get a hex dump and find offset 1 within the TCP data after removing the IP and TCP headers.</p>
","20233"
"What is a non-portable IPv4 address block?","6411","","<p>For example, a <strong>Whois</strong> query for <strong>4.4.4.0</strong> says:</p>

<blockquote>
  <p>ADDRESSES WITHIN THIS BLOCK ARE NON-PORTABLE</p>
</blockquote>

<p>Does the owner simply declare the block or a subnet are not up for sale? Or does non-portable have a deeper, technical meaning?</p>

<p>Here is the relevant section from the Whois query:</p>

<pre><code>NetRange:       4.0.0.0 - 4.255.255.255
CIDR:           4.0.0.0/8
OriginAS:       
NetName:        LVLT-ORG-4-8
NetHandle:      NET-4-0-0-0-1
Parent:         
NetType:        Direct Allocation
RegDate:        1992-12-01
Updated:        2012-02-24
Ref:            http:// whois.arin.net/rest/net/NET-4-0-0-0-1

OrgName:        Level 3 Communications, Inc.
OrgId:          LVLT
Address:        1025 Eldorado Blvd.
City:           Broomfield
StateProv:      CO
PostalCode:     80021
Country:        US
RegDate:        1998-05-22
Updated:        2012-01-30
Comment:        ADDRESSES WITHIN THIS BLOCK ARE NON-PORTABLE
Ref:            http:// whois.arin.net/rest/org/LVLT
</code></pre>
","<blockquote>
  <p>Does the owner simply declare the block or a subnet are not up for sale? Or does non-portable have a deeper, technical meaning?</p>
</blockquote>

<p>Non-portablility isn't about sales... it's a technical term.  </p>

<h3>Address Portability</h3>

<p>Non-portable IP addresses belong to a certain organization, and an end-user of the non-portable IP address is <strike><em>not</em> permitted to</strike> discouraged from announcing those IP addresses to another organization without the owing organization <a href=""https://www.arin.net/resources/request/reassignments.html"">SWIP</a>ing the addresses to the end-user.</p>

<p>The concept of portability comes from the <a href=""https://www.arin.net/policy/nrpm.html#four11"">ARIN Number Resource Policy Manual 2014.1, Section on IPv4</a> (<em>emphasis mine</em>)...</p>

<blockquote>
<pre><code>4. IPv4

 4.1. General Principles

  4.1.1. Routability

  Provider independent (*portable*) addresses issued directly from ARIN 
  or other Regional Registries are not guaranteed to be globally routable.
</code></pre>
</blockquote>

<p>The reason the RIRs don't guarantee that portable addresses are globally routable is because the RIRs can't influence route filtering policies of providers.</p>

<h3>Why some blocks are non-portable</h3>

<p>Addresses are either <em>allocated</em> or <em>assigned</em>.  If an address block is <em>assigned</em> to the ISP, then that ISP cannot sub-assign the addresses.  Quoting <a href=""https://www.arin.net/policy/nrpm.html#two5"">ARIN Number Resource Policy Manual 2014.1, Section on 2.5</a></p>

<blockquote>
<pre><code> 2.5. Allocate and Assign

 A distinction is made between address allocation and address assignment, 
 i.e., ISPs are ""allocated"" address space as described herein, while end-
 users are ""assigned"" address space.

 &gt; Allocate - To allocate means to distribute address space to IRs for 
 the purpose of subsequent distribution by them.

 &gt; Assign - To assign means to delegate address space to an ISP or 
 end-user, for specific use within the Internet infrastructure 
 they operate. Assignments must only be made for specific purposes 
 documented by specific organizations and are not to be sub-assigned to 
 other parties.
</code></pre>
</blockquote>

<h3>References</h3>

<p>Registries operate in accordance with <a href=""http://tools.ietf.org/html/rfc7020"">RFC 7020</a>, which replaced <a href=""http://tools.ietf.org/html/rfc2050"">RFC 2050</a>.  Arguably, much of the structure around these restrictions comes from <a href=""http://tools.ietf.org/html/rfc7020#section-2"">RFC 7020 Section 2, Goals</a>:</p>

<blockquote>
  <p>2)  Hierarchical Allocation: Given current routing technology, the
        distribution of IP addresses in a hierarchical manner increases
        the likelihood of continued scaling of the Internet's routing
        system.  As such, it is currently a goal to allocate IP addresses
        in such a way that permits aggregation of these addresses into a
        minimum number of routing announcements.</p>
</blockquote>

<h3>End Note</h3>

<p>You asked about ""the block or a subnet""; however, ARIN deals with allocations of <em>individual IP addresses</em>, <a href=""http://lists.arin.net/pipermail/arin-ppml/2001-August/000312.html"">not subnets or blocks of addresses</a>.</p>
","5916"
"Why use IP if we already have a MAC address?","6408","","<p>I am preparing for ICND1 exams and recently started to learn about different Cisco devices.
I have just come to know how the packet is generated to be transmitted over a network, or outside the network.</p>

<p>For example,
When the packet is generated, it adds source IP address, Destination IP address, Source Mac address, destination mac address, and other data.</p>

<p>Since Switch is a layer 2 device, and it uses MAC addresses to interact with other Hosts within the Network, then why do we use IP addresses within our local networks ?</p>

<p>What if someone do not need to connect to any host or network outside its own network, Why do he still needs to have an IP address, isn't MAC address is enough ?</p>
","<blockquote>
  <p>Since Switch is a layer 2 device, and it uses MAC addresses to interact with other Hosts within the Network, then why do we use IP addresses within our local networks?</p>
</blockquote>

<p>Well let's start with what traffic you're sending.</p>

<p><em>If</em> you use a strictly layer-2 protocol inside your own LAN with no <a href=""http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol"">HTTP</a>, SSL, <a href=""http://en.wikipedia.org/wiki/Network_File_System"">NFS</a>, <a href=""http://en.wikipedia.org/wiki/Server_Message_Block"">CIFS</a>, <a href=""http://en.wikipedia.org/wiki/ISCSI"">iSCSI</a>, <a href=""http://en.wikipedia.org/wiki/H.323"">H.323</a>, <a href=""http://en.wikipedia.org/wiki/Session_Initiation_Protocol"">SIP</a>, <a href=""http://en.wikipedia.org/wiki/Domain_Name_System"">DNS</a>, <a href=""http://en.wikipedia.org/wiki/Internet_Control_Message_Protocol"">ICMP</a>, databases, or websockets, <em>then</em> your proposal works just fine.  In fact, <a href=""http://en.wikipedia.org/wiki/Fibre_Channel_over_Ethernet"">FCoE</a> does not rely on an IP layer... so if that's what you want, knock yourself out :-)</p>

<p>The problem is that you just crippled 95% of the utility of most networks by removing those IP-based services.  Networks exist to share information; all operating systems on the planet share information by binding services to, and encapsulating inside IP.  That information is usually wrapped inside TCP as well.</p>

<ul>
<li><em>Rhetorical question</em>: Could a bunch of determined people implement TCP and UDP services directly on top of ethernet in all the major operating systems?</li>
<li><em>Pedantic Answer</em>: Yes, but that's a collosal waste of time and resources for insignificant gain.  Let's start with the basics... there is no <a href=""http://en.wikipedia.org/wiki/Domain_Name_System"">DNS</a> name-service for ethernet mac-addresses.  That means unless you build it, how would you resolve URLs without IP addresses?  I doubt that anyone really wants to type <code>http://00c0.9b4a.fb2c/</code> just so they can avoid 20 extra bytes in each packet.  This is just an example of the work required. </li>
</ul>

<blockquote>
  <p>What if someone do not need to connect to any host or network outside its own network, Why do he still needs to have an IP address, isn't MAC address is enough?</p>
</blockquote>

<p>Technically, yes.  In the real world... it's a pretty boring network without IP.</p>
","9575"
"What's the point of auto-sensing 10/100 Mbit/s Ethernet?","6358","","<p>According to the notes I'm reading:</p>

<blockquote>
  <p>10/100 Mbit/s Ethernet refers to the standard that can autosense which speed it needs to run between speeds of 10 Mbit/s or 100 Mbit/s.</p>
</blockquote>

<p>Why would autosensing be required? Wouldn't it be best to result to 100&nbsp;Mbit/s or will this impact the network in a negative way?</p>
","<p>Some devices could only run at 10 megabit/s, so the device at the other end would autosense the speed to match. If a device that has a maximum speed of 10&nbsp;Mbit/s is connected to a 10&nbsp;Mbit/s / 100&nbsp;Mbit/s switch, the switch needs to lower its speed on that particular port in order to effectively (efficiently) communicate with the device.</p>

<p>These days, most devices will autosense between 10&nbsp;Mbit/s, 100&nbsp;Mbit/s, and 1000&nbsp;Mbit/s, but back in the days of ""fast Ethernet"" the choices were 10&nbsp;Mbit/s and 100&nbsp;Mbit/s.</p>
","32097"
"ISP edge router configuration","6343","","<p>I need to configure Cisco 2901 router to route between interconnect block and usable ip block. Circuit is fiber 30Mb/s
I got this info from ISP provider:</p>

<p>IP space:</p>

<p>Interconnect block - 50.204.xxx.80/30</p>

<p>Netmask: 255.255.255.248</p>

<p>ISP Internet gateway: 50.204.xxx.81</p>

<p>Customer Layer 3 device WAN interface: 50.204.xxx.82</p>

<p>Interconnect usable IP's: 50.204.xxx.83 thru 50.204.xxx.86</p>

<p>Primary DNS: x.x.x.x</p>

<p>Secondary DNS: x.x.x.x</p>

<p>Customer useable IP block - 50.204.xxx.88/29</p>

<p>Netmask: 255.255.255.248</p>

<p>Usable IPs: 50.204.xxx.89 thru 50.204.xxx.94</p>

<p>The /29 of usable IP space is statically routed by ISP to 50.204.xxx.82</p>

<p>On the Customer device connected to the ISP, ISP recommends the
following:</p>

<blockquote>
  <ul>
  <li>Speed hardcoded to 100 Mbps* (No auto-negotiation) *Except 1G or
  larger circuits * Duplex hardcoded to Full (No auto-negotiation) *
  Traffic Shaping/Policing -- limit output rate at or below the
  bandwidth usage subscribed for that connection ISP is a layer 2
  transport service which only allows for complete content transmission.</li>
  </ul>
</blockquote>

<p>I was thinking about configuring this way. Please let me know if there is better way:</p>

<p>Setup ""wan"" interface (e.g gig0/0) with 50.204.xxx.82 /30. Hard code duplex and speed.</p>

<p>Setup ""lan"" interface (e.g gig 0/1) with 50.204.xxx.89 /29</p>

<p>Setup traffic shaping:</p>

<pre><code>class-map match-any SHAPE
 match any

policy-map SHAPE
 class SHAPE
  shape average 30000000

interface GigabitEthernet0/1
 service-policy output SHAPE
</code></pre>

<p>Setup default route <code>ip route 0.0.0.0 0.0.0.0 50.204.xxx.81</code></p>

<p>Also,</p>

<ol>
<li><p>Would it be better to setup traffic policing?</p></li>
<li><p>Would it be better to setup traffic shaping/policing on outside interface (gig 0/0)?</p></li>
<li><p>I am confused with ISP giving me 50.204.xxx.80/30 address for interconnect block and then saying that I can use 50.204.xxx.83 thru 50.204.xxx.86?</p></li>
</ol>
","<blockquote>
  <p>1.Would it be better to setup traffic policing?</p>
</blockquote>

<p>You're using shaping, which is better in this case.  The important thing is to buffer your traffic before sending it to your internet provider.   Consider this:</p>

<ul>
<li>Your ISP asks you to set your physical interface to 100Mbps</li>
<li>Your service from the ISP is 30Mbps</li>
<li>What happens if you're already sending 30Mbps of traffic, and you need to send a ping?</li>
</ul>

<p>By default, your Cisco 2901 router's interface will buffer based on the physical transmit rate (100Mbps) you are configuring.  If you do not add traffic shaping, that ping has a decent chance of being dropped because the ISP is almost certainly policing ingress to 30Mbps on the other end.  Traffic shaping allows you to buffer your instantaneous traffic in excess of 30Mbps, so it has a chance of making it past your ISP's ingress policing; otherwise your router won't even think about buffering traffic until it reaches the physical interface transmit rate (100Mbps).</p>

<blockquote>
  <p>Setup traffic shaping:
  class-map match-any SHAPE match any<br>
  policy-map SHAPE<br>
  class SHAPE<br>
  shape average 30000000<br>
  interface GigabitEthernet0/1<br>
  service-policy output SHAPE<br>
  ...<br>
  Would it be better to setup traffic shaping/policing on outside interface (gig 0/0)?</p>
</blockquote>

<p>You should definitely set up egress shaping on Gi0/0; consider qos, and / or <a href=""https://networkengineering.stackexchange.com/a/5318/775"">wred</a> as well.</p>

<p>Since Gi0/1 is a LAN-facing interface, egress shaping doesn't help much unless you need to prioritize certain traffic, or use <a href=""https://networkengineering.stackexchange.com/a/5318/775"">wred</a> on the queue (which wouldn't be a bad idea, if you set it up right).</p>

<p>When you configure your QoS policies, I recommend you do it in this order:</p>

<ul>
<li>Test ping loss from Gi0/0 to 50.204.xxx.81 for at least 20 minutes <em>without qos</em> on either interface; if you don't have a clean baseline, then you'll spend a lot of time chasing the wrong packet loss in the next steps.</li>
<li><a href=""https://networkengineering.stackexchange.com/a/1370/775"" title=""Use iperf or nuttcp to measure interface throughput"">Test</a> egress shaping rates on your Gi0/0 interface at about 200-300 byte IP packets (i.e. somewhere at or below <a href=""http://en.wikipedia.org/wiki/Internet_Mix"" rel=""nofollow noreferrer"">imix</a> sizes), and adjust the rates until you don't drop traffic to them (see below).  You might need to ask them to temporarily colo some of your test equipment in their network.  Failing that, you can rent a server on the internet to test with; however, that gets fairly complicated since there would likely be several additional congestion points.</li>
<li><a href=""https://networkengineering.stackexchange.com/a/1370/775"" title=""Use iperf or nuttcp to measure interface throughput"">Test</a> egress shaping rates on your Gi0/1 interface, in the same way you did above.</li>
<li>Add <a href=""https://networkengineering.stackexchange.com/a/5318/775"">wred</a> (if you plan to do so).  <a href=""https://networkengineering.stackexchange.com/a/1370/775"" title=""Use iperf or nuttcp to measure interface throughput"">Test</a> again with 3 parallel TCP streams in each traffic direction.</li>
</ul>

<p><em>Test strategy</em>:</p>

<p>I strongly recommend that you perform a UDP <a href=""https://networkengineering.stackexchange.com/a/1370/775"">non-drop transmit rate test</a> with whatever qos settings you choose because it's possible that your shaping rate could be slightly higher than your ISP's rate.  If so, then you need to lower your shaping parameters until you don't drop traffic when you send it to them.</p>

<blockquote>
  <ol start=""3"">
  <li>I am confused with ISP giving me 50.204.xxx.80/30 address for interconnect block and then saying that I can use 50.204.xxx.83 thru 50.204.xxx.86?</li>
  </ol>
</blockquote>

<p>That definitely is confusing, as far as I can tell, that sentence can be safely ignored; however, please double check with them to be sure.  The reason I say this:</p>

<ul>
<li>They said ""ISP Internet gateway: 50.204.xxx.81""</li>
<li>They said ""Customer Layer 3 device WAN interface: 50.204.xxx.82""</li>
<li>They said ""The /29 of usable IP space is statically routed by ISP to 50.204.xxx.82""</li>
</ul>

<blockquote>
  <p>Regarding your <a href=""https://networkengineering.stackexchange.com/questions/6823/isp-edge-router-configuration#comment11127_6824"">question in the comments</a></p>
</blockquote>

<p>The routes shown in this diagram are adequate.  You only need a default route to the provider, unless you plan to turn up other networks besides 50.204.xxx.88/29.</p>

<p><a href=""https://i.stack.imgur.com/M8mmE.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/M8mmE.png"" alt=""enter image description here""></a></p>

<h3>Side notes</h3>

<ul>
<li>I normally don't recommend hard-coding speed and duplex on ethernet interfaces, but this practice is entrenched in many ISP procedures, so there is no point in fighting it.</li>
<li>You should adequately protect your network with a firewall as well, as <a href=""https://networkengineering.stackexchange.com/a/6824/775"">Kit suggested</a>.</li>
</ul>
","6852"
"How do wifi clients detect SSIDs from APs?","6320","","<p>How can my wifi board detect wireless networks that are in range? What protocol is used to communicate with the devices in the area to announce a wifi AP? Does every router transmit on its own frequency and my wifi board scans ""every"" frequency to detect one?</p>
","<blockquote>
  <p>How can my wifi board detect wireless networks that are in range?</p>
</blockquote>

<p>Your client has a radio which listens to the wifi 802.11 frequencies for the country configured in the radio.</p>

<blockquote>
  <p>What protocol is used to communicate with the devices in the area to announce a wifi AP?</p>
</blockquote>

<p>Wifi APs are configured with an SSID; those SSIDs are known via <a href=""http://en.wikipedia.org/wiki/Beacon_frame"" rel=""noreferrer"">beacon frames</a>; by default beacon frames are sent every 102.4 milliseconds.</p>

<p>The <a href=""http://mrncciew.com/2014/10/08/802-11-mgmt-beacon-frame/"" rel=""noreferrer"">beacon frame format</a> includes an <a href=""http://en.wikipedia.org/wiki/Service_set_%28802.11_network%29#Service_set_identification_.28SSID.29"" rel=""noreferrer"">SSID</a> field, and the beacon interval.</p>

<p>The radio in your AP is configured for a specific <a href=""http://en.wikipedia.org/wiki/List_of_WLAN_channels"" rel=""noreferrer"">channel</a>.  Those beacon frames are transmitted on the AP's channel. </p>

<blockquote>
  <p>Does every router transmit on its own frequency and my wifi board scans ""every"" frequency to detect one?</p>
</blockquote>

<p>Every wireless AP can select from a pre-defined list of <a href=""http://en.wikipedia.org/wiki/List_of_WLAN_channels"" rel=""noreferrer"">wireless channels</a>, and it chooses one channel to announce the SSID.  Your wifi client constantly walks (or scans through) all those channels to figure out which SSIDs are available.</p>
","17103"
"How to configure VLANs on a TP-Link ER-5120 router","6289","","<p>I'm installing the network in an office building that will be used as co-working space by multiple smaller companies.</p>

<p>Since I was hoping to isolate traffic from the different companies I purchased hardware which (supposedly) has VLAN support:</p>

<ul>
<li><a href=""http://uk.tp-link.com/products/details/cat-4910_TL-ER5120.html#overview"" rel=""nofollow"">TP-Link ER-5120 broadband router</a></li>
<li>TP-Link TL-SG3424 L2 switch</li>
<li>Linksys LAPAC 1750 802.11AC access points</li>
</ul>

<p>The creation of company SSIDs on the Linksys and assigning them to VLAN IDs created on the L2 switch works fine. However, clients in this VLAN don't get an IP address from the router. The router doesn't know how to handle the VLANs.</p>

<p>The ER-5120 apparently has port-based VLAN support but does that mean it can't trunk the VLANs over a single cable? I only have 4 LAN ports on the router which is not enough for the number of VLANs that I need.</p>

<p>According <a href=""http://uk.tp-link.com/faq-887.html"" rel=""nofollow"">to this</a> doc on the TP-Link website I need to include a managed L3 switch, which (from TP-Link) costs more than all the equipment I already purchased :(</p>

<p>My question is whether I'm overlooking something. And if I <em>really</em> need an L3 switch for this configuration, could I also use a much cheaper model like HP's 1920 8-port L3 switch, or the Edgeswitch Lite from Ubiquity?</p>
","<p>That router, apparently, only does port based VLANs, not 802.1Q trunks. You either need a different router which can do 802.1Q trunks, or you need to get a layer-3 switch which can connect to this router via a point-to-point routed link. You are trying to use the equipment you have in a way it wasn't designed to be used. </p>

<p>You don't really give all the specifications for what you are trying to do. A layer-3 switch could work; you could get a router that supports trunking; you could get a router with enough ports, etc. You need to decide how you want to design the network, first, then buy equipment which supports your design. It seems you did that backwards (using the wrong tools for the job; don't use a screwdriver to drive nails).</p>

<p><strong>EDIT based on your comment:</strong></p>

<p>A layer-3 switch as a distribution switch is certainly a viable solution. You can set it up to trunk the correct VLANs to the various access switches. The VLANs defined in the Layer-3 switch will have the gateway addresses for the VLANs, and, probably, a static route to the WAN router. You should set up a point-to-point routed link between the layer-3 switch and the WAN router. If the WAN router is the DHCP server, you will need to set up a relay for that on the layer-3 switch for each of the VLANs using DHCP.</p>
","23817"
"Routing the same subnet in two locations / gateways?","6263","","<p><img src=""https://i.stack.imgur.com/u4PkE.png"" alt=""Topology""></p>

<p>In my current topology, I have two locations linked by a trunk.</p>

<p>Everything on one side of the trunk is Site A, everything on the other is Site B</p>

<p>In the example above, for 10.0.200.4 to talk to 10.0.100.5 it must traverse the trunk because the gateway is on Side A.</p>

<p>My problem is that I have machines on the same subnet in both locations, but I dont want to traverse the trunk if my traffic stays within the site.</p>

<p>I'm sure there is something basic I'm missing here, and OSPF seems like it may be a more complicated solution that I need. Do I make both sides of the trunk gateways? Both are capable of layer 3.</p>
","<p>Create two gateways, .1 for Site A and .2 for Site B.  Then setup all the machines in Site B to use the .2 gateway and all the machines in Site A to use the .1 gateway.  The one rectangle with nothing in it would be the gateway 10.0.100.2 and 10.0.200.2.  Then the one rectangle on the left labeled L3 gateway, this will stay the gateway for 10.0.100.1 and 10.0.200.1.  </p>

<p>So in this setup you would have to re IP the circle in the top left with 10.0.100.2 and 10.0.200.2 to something else.  </p>
","12842"
"How to configure Internet Port and Public IP settings on the CISCO Meraki Z1?","6244","","<p>What exactly do the <code>Internet Port</code> and <code>Public IP</code> settings mean on the CISCO Meraki Z1 gateway?
<br />
<br /></p>

<h2>Context</h2>

<p><em>Note: this is a detailed explanation with images - I apologize for its length but I'm striving for quality.</em></p>

<p><strong>Objective:</strong></p>

<p>I'm setting up the Z1 for my father to connect to a VPN with a cloud-hosted service from his work.  It seems like the configuration should be easy, but I'm getting some grief from the tech people at the cloud hosting service but not really getting their help in figuring out the answers.</p>

<p><strong>Network config:</strong></p>

<p>Internet &lt;--> DSL Modem-Router &lt;--> Meraki Z1, Wireless Router, etc. </p>

<p><strong>Problem:</strong></p>

<p>The specific problem I'm having is that I've been told that the <code>Internet Port</code> and the <code>Public IP</code> settings for the Z1 should be the same. I don't think I can set up the <code>Internet Port</code> to match our public IP since that would mean that the actual endpoint on the Internet would be the Z1 - and that's not possible since we need the modem.</p>

<p><strong>My solution so far:</strong></p>

<p>I checked and followed <a href=""https://docs.meraki.com/display/Z1/Installation+guide#Installationguide-ConnectingtoWAN"" rel=""nofollow noreferrer"">the Meraki Z1 installation documentation</a>:</p>

<p><img src=""https://i.stack.imgur.com/NVGYR.png"" alt=""Instructions from CISCO configuration website""></p>

<p>It tells me that the only necessary WAN configuration for the device is to tell it how to connect to the Internet, which it can do through DHCP or statically (I've set it statically to be sure it's the correct way to do it).</p>

<p>I've also set the public IP address on the configuration page, so that it knows our IP on the Internet.</p>

<p>The current overview on the device looks like this (all green):</p>

<p><img src=""https://i.stack.imgur.com/TkZ99.png"" alt=""Configuration overview of Z1 device""></p>

<p><strong>Finally</strong></p>

<p>This looks like it's ready to go.  So, in summary: have I made an incorrect assumption? Should I do something differently?</p>

<p>Thanks a lot!</p>
","<p>I think you're understanding the configuration correctly! The Internet Port IP address is the address of the physical port. If your ISP router/modem is in pass-thru mode, then the Public IP address will be the same as the Internet Port IP address. But, since your Internet port IP address is a private IP address, the Public IP address will reflect the public address assigned by your ISP as detected by the Meraki Cloud Controller.</p>
","17110"
"Zyxel USG100. GS1910 Vlans cannot access wan","6233","","<p>Iam trying to configure a network that looks like this:</p>

<p><img src=""https://i.stack.imgur.com/sSM1S.jpg"" alt=""enter image description here""></p>

<p>My Vlans and static routing seams to work fine, i am able to ping between the VLANs. My problem is, when i try to make a connection to the internet, I get a time out when trying to ping, i am aware that i need to configure some sort of NAT. But cant quite figure out what goes wrong. </p>

<p>I have tried to create a Policy Route, when i apply the policy but there is a unstable pattern in the replies, got a lot of timeouts, then at ones there is connectivity for a while and then it dies again.</p>

<p>Here are screenshots of my configurations on FW1 and SW1</p>

<p><strong>FW1:</strong></p>

<p><strong>Network -> Interface -> VLAN</strong></p>

<p><img src=""https://i.stack.imgur.com/kklnb.png"" alt=""enter image description here""></p>

<p><strong>Network -> Interface -> Port Role</strong></p>

<p><img src=""https://i.stack.imgur.com/yEajq.png"" alt=""enter image description here""></p>

<p><strong>Network -> Routing -> Static Route</strong></p>

<p><img src=""https://i.stack.imgur.com/st00s.png"" alt=""enter image description here""></p>

<p><strong>Network -> Routing -> Policy Route</strong></p>

<p>I have only added a rule and tested for the 102 vlan.</p>

<p><img src=""https://i.stack.imgur.com/LtbBE.png"" alt=""enter image description here""></p>

<p><strong>SW1:</strong></p>

<p><strong>Configuration -> VLANs -> VLAN Membership</strong></p>

<p><img src=""https://i.stack.imgur.com/Ng8cV.png"" alt=""enter image description here""></p>

<p><strong>Configuration -> VLANs -> Ports</strong></p>

<p><img src=""https://i.stack.imgur.com/z1uJP.png"" alt=""enter image description here""></p>
","<p>I have the exact same setup as you (ZyXEL ZyWALL USG 100 and GS1910 switch).
I had similar settings as you, but I did not create any static routes and my Network -> Interface -> VLAN page looked a bit different (not sure which of ours is more correct).</p>

<p>Anyways, I had the same problem with not being able to get out to the WAN from a VLAN. I was getting an IP address but traffic was not getting to the internet. Then it dawned on me... A FIREWALL RULE!  I added a rule to allow traffic from the VLAN to the WAN and voila! (Note: All those other firewall rules in my screenshot are stock; they came pre-configured).</p>

<p>Also, I'm not sure what the ""Policy Route"" is used for.  I disabled it, and everything is still working fine.  Here are a couple screenshots from my environment that differ from the ones in your original question; hopefully it will help others in the future that try to <em>setup a VLAN on Zyxel USG firewall routers</em>:</p>

<p><strong>FW1:</strong></p>

<p><strong>Network -> Interface -> VLAN</strong></p>

<p><img src=""https://i.stack.imgur.com/UHDQQ.png"" alt=""VLAN""></p>

<p><strong>Firewall</strong></p>

<p><img src=""https://i.stack.imgur.com/QC3Zw.png"" alt=""Firewall""></p>

<p><strong>Configuration -> Network --> Routing --> Policy Route</strong></p>

<blockquote>
  <p><strong>Note</strong>: I originally had this activated but I later deactivated it, as
  show in the screenshot, and everything continues to work fine as far
  as I can tell...</p>
</blockquote>

<p><img src=""https://i.stack.imgur.com/g0Tut.png"" alt=""Policy Route""></p>

<p><strong>Configuration -> Network --> Routing --> Static Route</strong></p>

<p><img src=""https://i.stack.imgur.com/Le7Ep.png"" alt=""Static Route""></p>
","6053"
"Why do we have both MDI and MDI-X?","6218","","<p>I understand which types of devices tend to use MDI or MDI-X, but why don't all devices just use one of them? It seems like Auto MDI-X was the solution to this but it still seems like all newly manufactured devices could just switch over to one. This way only crossover cables would be needed for all related connections.</p>
","<p>This is a matter of DTE vs. DCE -- the role each endpoint takes. The NIC in your desktop is a ""user terminal"" (DTE). The switch it connects to is ""communication equipment"" (DCE). All this means is which pins are transmit vs. receive, such that a straight through cable from DTE to DCE works as expected.  This is why a crossover cable is(was) required to connect two switches (DCE) or two hosts (DTE) together.</p>

<p>""Auto"" really didn't become popular (read: everywhere) until the era of gigabit ethernet. Gig-e uses all four pairs for both TX and RX, so the required logic for auto-mdix is already there. Prior to this, additional logic (read: additional <em>costs</em>) were required.</p>
","14879"
"What is ""usec"" and ""delay"" a measurement of?","6203","","<p>The term <strong>usec</strong> appears in the <code>delay</code> field of the <code>show interface</code> command on a router:</p>

<pre><code>Router# show interfaces fastethernet 0
 Fast Ethernet0 is up, line protocol is up 
   Hardware is DEC21140, address is 0000.0c0c.1111 (bia 0002.eaa3.5a60)
   Internet address is 10.0.0.1 255.0.0.0
   MTU 1500 bytes, BW 100000 Kbit, DLY 100 usec, rely 255/255, load 1/255
                                   ^^^^^^^^^^^^
</code></pre>

<p>According to <a href=""https://en.wikipedia.org/wiki/Microsecond"" rel=""nofollow"">Wikipedia</a>, a usec is a microsecond:</p>

<blockquote>
  <p>A microsecond is an SI unit of time equal to one millionth (0.000001 or 10−6 or 1/1,000,000) of a second. Its symbol is μs.</p>
</blockquote>

<p>There are values associated with each interface, based upon the interface's speed:</p>

<ul>
<li>An <a href=""http://www.cisco.com/c/en/us/td/docs/ios/12_2/interface/command/reference/finter_r/irfshoin.html#wp1056673"" rel=""nofollow"">ethernet</a> (10 Mbps) interface has a delay of 1000 usec.</li>
<li>A <a href=""http://www.cisco.com/c/en/us/td/docs/ios/12_2/interface/command/reference/finter_r/irfshoin.html#wp1018148"" rel=""nofollow"">fast ethernet</a> (100 Mbps) interface has a delay of 100 usec.</li>
<li>A <a href=""http://www.cisco.com/c/en/us/td/docs/ios/12_2/interface/command/reference/finter_r/irfshoin.html#wp1058046"" rel=""nofollow"">gigabit ethernet</a> (1000 Mbps) interface has a delay of 10 usec.</li>
</ul>

<p>In effect, the lower the delay usec, the higher the interface speed. But <strong>what is delay really measure of? What goes into the calculation to determine that a 100 Mbps link has a delay of 100 usec (and so on)?</strong></p>

<p>It can't be the time it takes for a ""bit"" to cross the wire, because voltage applied to any interface speed traverses at the speed of light. It can't be a measurement of how many bits can be sent over a given time frame (because that is the Bandwidth measurement).</p>

<p>So what is usec <em>really</em> a measure of?</p>
","<p>That is a measurement of the time between bits as they are placed on the ""wire."" For instance, a 1 Gbps interface will send one frame every 10 microseconds, but a 100 Mbps interface does that 10 times slower. It is basically the serialization delay imposed by the interface.</p>

<p>This number is used by EIGRP in its metric calculations, as are all the numbers on the line:</p>

<pre><code>MTU 1500 bytes, BW 100000 Kbit, DLY 100 usec, rely 255/255, load 1/255
</code></pre>

<p><a href=""http://www.cisco.com/c/en/us/td/docs/ios/12_2/interface/command/reference/finter_r/irfshoin.html#wp1017950"" rel=""nofollow"">Interface Commands</a></p>

<p><strong>Edit:</strong></p>

<p>I found a <a href=""http://www.cisco.com/c/en/us/td/docs/ios/12_2/interface/configuration/guide/finter_c/icfgenrl.html#wp1090579"" rel=""nofollow"">Cisco document</a> that explains more:</p>

<blockquote>
  <p><strong>Setting Interface Delay</strong></p>
  
  <p>Higher-level protocols might use delay information to make operating
  decisions. For example, IGRP can use delay information to
  differentiate between a satellite link and a land link. To set a delay
  value for an interface, use the following command in interface
  configuration mode:</p>
  
  <p>...</p>
  
  <p>Setting the delay value sets an informational parameter only; you
  cannot adjust the actual delay of an interface using this
  configuration command.</p>
</blockquote>

<p><a href=""http://blog.ine.com/2009/12/23/ccna-eigrps-use-of-bandwidth-and-delay/"" rel=""nofollow"">This CCNA ""Core Knowledge"" document</a> explains:</p>

<blockquote>
  <ul>
  <li>Setting bandwidth or delay on an interface does not change any physical properties of the interface at all; you are just changing
  the values that the interface reports for EIGRP metric purposes</li>
  </ul>
</blockquote>

<p>and</p>

<blockquote>
  <p>The DELAY command is a powerful command for manipulating EIGRP paths.
  Since the BANDWIDTH command can end up impacting a lot of other
  configurations (like QoS), we can use the DELAY command to manipulate
  EIGRP metrics (and therefore, paths) without having to touch the
  BANDWIDTH command.</p>
</blockquote>
","28859"
"What are the disadvantages of VLANs","6180","","<p>What are the disadvantages of VLAN?</p>

<p>Whereas advantages are : <code>Broadcast Control, Security and Fexibility</code></p>
","<p>I think, managment is a little more complex, nothing out of this world, but, you need to make sure wich ports do you configured like access, and vlans permitted on trunk ports. This one is only done on the firs time, the you only need to permits vlans and configure the access for machines who needs to communicate. </p>

<p>The other thing is when you need to add a new vlan, you need to configured on all the switches on your networks, or configure VTP, a little more complex too.</p>
","23745"
"Subnetting a IPv4 /24 into 7 equally large subnets","6179","","<p>I wrote a test a few days ago and wasn't able to solve one task in there:</p>

<blockquote>
  <p>Create 7 Subnets in the 192.168.10.0/24 Net <br/>
  The subnets should be equally large.<br/>
  The address range must be completely used.<br/></p>
</blockquote>

<p>So at first I tried to create one Subnet with /26 mask, so I get 64 hosts and the remaining address range gets filled with six /27 masked subnets (32 hosts). <br/>
Then I noticed that the second requirement has not been fulfilled. <br/></p>

<p>When I create only /27 masked subnets, the third (or first) requirement is not fulfilled.<br/>
In the end I gave up and created eight /27 masked subnets, where the last subnet is not used.</p>

<p>Now my question is whether I didn't understand something in subnetting or the teacher made a mistake.<br/>
I still hope that the task was not possible, so I can talk to the teacher.</p>
","<p>There's no solution which satisfies all requirements, your answer of making 8 /27's is probably the most logical one.</p>

<p>You can easily verify this by trying to divide 256 by 7, you can't do this without a remainder. Also, all subnets need to have a size which is a power of 2, and 7 * 32 (a /27) = 252, 8 * 16 (a /26) = 512, so there's no way to do this without unused space.</p>
","2081"
"What is Packet Loss Rate?","6146","","<p>I am confused on the definition of Packet Loss Rate.</p>

<p>Is it the number of packets lost per unit of time?</p>

<p>or</p>

<p>Is is the number of packets lost per number of packets sent?</p>
","<p>Both are possible. If no units are mentioned, I would assume it means</p>

<p><code>(# packets lost)/(# packet sent)</code>.</p>

<p>Often, this ratio will be given as a percentage.</p>

<p>When 'packet loss rate' is meant as a rate per unit of time, that unit of time should be specified.</p>
","7363"
"hp procurve trunk port group operation vs active lacp port group","6129","","<p>We recently purchased some HP Procurve 2920 switches and in setting them up I noticed multiple options for port groups. I wanted to see if anyone can clarify functional differences between setting up a port group as a 'Trunk' vs an active LACP group. Can't seem to find definitive documentation on the function of the 'Trunk' option or what protocols it uses.</p>

<p>Thanks a lot!</p>
","<p>The switch has a built-in help function: <code>?</code></p>

<pre><code>xa-eng(config)# trunk 1-2 trk17 
 trunk                 Do not use any protocol to create or maintain the trunk.
 lacp                  Use IEEE 802.1ad Link Aggregation protocol.
 &lt;cr&gt;
</code></pre>
","5981"
"QoS voice traffic on WAN of Cisco 1841","6125","","<p>I have the following lab topology and I am using the below configuration on the 1841. What I want to achieve here is reserve 1000Kbps of bandwidth for traffic between the voice VLAN and the remote VoIP provider across the Internet (lets pretend; 10 users, each needs 100Kbps of up and down bandwidth for RTP, and they all always use the phone at the same time).</p>

<p><img src=""https://i.stack.imgur.com/bvTKg.png"" alt=""QoS topology""></p>

<p><em>The pfSense device is just to limit the wan connection of the 1841 as this will go on the end of a 20Mbps Internet connection presented as Ethernet eventually. It plays no further role in this scenario (no NAT, or Firewalling, just plain L3 routing between LAN and WAN interfaces, limiting the traffic).</em></p>

<pre><code>class-map match-any CM-VOICE-TRAFFIC
 match access-group 145

policy-map PM-PRIORITISE-VOICE
 class CM-VOICE-TRAFFIC
   bandwidth 1000
 class class-default
   fair-queue

interface FastEthernet0/1
 service-policy output PM-PRIORITISE-VOICE

access-list 145 permit ip any 10.0.59.0 0.0.0.255
access-list 145 permit ip 10.0.59.0 0.0.0.255 any
</code></pre>

<p>The configuration I have given is only applied outbound on the WAN interface (so I have guaranteed 1000Kbps of traffic to the voice VLAN for their upstream path towards the VoIP provider). What can I do to guarantee the downstream bandwidth of the voice VLAN on this 1841 only?</p>

<p>Is it possible to create an inbound policy on fa0/1 (WAN) that prioritises packets that match access-list 145, as they pass through the router, so that other packets inbound on WAN don't affect the downstream speed of the voice VLAN (peraps queuing packets that don't match ACL-145)?</p>

<p>Or is it possible to create a policy on the physical fa0/0 interface, even though it is split into two sub interfaces, that will guarantee 1000Kbps of the traffic out of it, towards the voice VLAN, when it needs it?</p>
","<p>The short answer is no.  Your queuing policy needs to be
applied outbound at the point of bottleneck.  In this case, the bottleneck is
the WAN connection (20 Mbps) between the pfSense and the 1841.  Thus, the
proper location of your queuing policies are outbound on the LAN interface (a bit of a misnomer) of the pfSense and outbound on <code>Fa0/01</code> of the 1841, which you have.</p>

<p>All that being said, your policy on the 1841 is flawed.  In your example, you've reserved 1 Mbps of bandwidth for VoIP and applied the policy to a 100 Mbps interface.  What happens when the PCs start pushing 70Mbps of traffic while trying to make a VoIP call?  From a queuing standpoint on the 1841, the answer is nothing.  There is only 70 Mbps of data flowing out Fa0/1.  Therefore, there is always 1 Mbps available for VoIP.  However, once
this traffic reaches the pfSense,  at least 50 Mbps of data and VoIP will be dropped.  Your calls would be terrible at best.</p>

<p>Without getting into all of the details, and using your
prior example, the policy should be something like this:</p>

<pre><code>class-map match-any CM-VOICE-TRAFFIC
 match access-group 145
!
policy-map PM-PRIORITISE-VOICE-child
 class CM-VOICE-TRAFFIC
   set ip dscp ef
   priority 1000
 class class-default
   fair-queue
!
policy-map Shape-20Mb-parent
 class class-default
  shape average 20000000
  service-policy PM-PRIORITISE-VOICE-child
!
interface FastEthernet0/1
 service-policy output Shape-20Mb-parent
!
access-list 145 permit ip 10.0.59.0 0.0.0.255 any
</code></pre>

<p>This policy creates an artificial bandwidth limit on all traffic leaving the Fa0/1 on the 1841.  Thus, the pfSense will never have the opportunity to drop traffic indiscriminately.  Also, instead of the bandwidth command, the priority command should be used to limit latency and jitter.  The tagging and the ACL change should be self-explanatory.</p>
","2412"
"What is the difference between an untagged port and a tagged port?","6112","","<p>When setting up VLAN networks, we have to define whether the ports on the switch are tagged or untagged. </p>

<ol>
<li>What is the difference?</li>
<li>How are the ports related to trunk ports and access ports?</li>
</ol>
","<p>This all comes about because different vendors often choose to use different terminology or in some cases the same terminology for different concepts.</p>

<p>What Cisco calls a trunk port is also known as a tagged port by certain other vendors.  This means that 802.1Q headers are inserted on all of the traffic for the tagged VLANs.</p>

<p>What Cisco calls an access port would then equate to an untagged port.  Not to confuse the issue, but a tagged port generally will have zero or one untagged VLAN assigned to it as well.  An untagged port is more specifically one on which no traffic is 802.1Q tagged.</p>

<p>In some environments (Solaris, some HP switches, etc), a trunk is used to refer to link aggregation, or what Cisco calls etherchannel.  So sometimes to avoid confusion, tagged port may be preferred by some people.</p>
","13405"
"Implementing a secondary IP address?","6102","","<p>I am familiar with adding a secondary ip address to cisco device interfaces in order to work around corner case scenarios, for example having 2 ip subnets within the same vlan, needing to expand when one subnet is exhausted or to migrate the default gateway of a host from one address to another etc.<br>
The implementation scenarios I have seen Customers/clients use seem to point towards poor network design but I am not sure whether its usage is also perfectly valid either?</p>

<p>I would like to know what are the main pitfalls related to using a secondary ip addresses on an interface, i.e use of the same broadcast domain, any impact upon TTL, impact on DHCP, sharing of mac address, sub-optimal routing between hosts etc?</p>
","<p>The use of secondary IP interface addresses on Cisco routers at least do not seem to have major pitfalls necessarily but moreover some limitations I've found it is useful to be aware of.</p>

<ul>
<li>A flat network using secondary addresses/multiple subnets will avoid the need employ dot1q trunking but will generate more broadcast traffic (if the purpose is to be able to increase the number of hosts).  Depending on design this can impact upon network performance, specifically the hosts/clients.</li>
<li>Routing protocols:
<ul>
<li>In EIGRP neighbour adjacencies will not form on secondary ip addresses full stop.</li>
<li>In OSPF then secondary addressed networks are considered as stubs so no hello packets are sent on them and will not form adjacencies either.</li>
<li>In BGP then since it acts as an application on top of TCP then its doesn't seem to care if they are primary or secondary due to the TCP process just attempting to match a source address received with an available BGP peer to form neighborship...  So this can work but be careful not to mismatch primary and secondary.</li>
</ul></li>
<li>Packets sourced from the router will be from the primary interface address (Routers on a segment should normally agree on what the primary subnet is).</li>
<li>Multicast PIM interface configuration needs routers that connect to each other  to use the same subnet as the primary address as opposed to secondary. </li>
</ul>

<p>To avoid issues then I'll use primary addressing wherever possible and secondary in corner case scenarios.</p>
","16965"
"Dell PowerConnect 5524 VLAN routing","6092","","<p>I have a Dell PowerConnect 5524 that I'm trying to configure.</p>

<p>What I want is simple routing between VLANs and the <a href=""ftp://ftp.dell.com/Manuals/Common/powerconnect-5524_User%27s%20Guide_en-us.pdf"" rel=""nofollow"">user guide</a> is less than helpful.</p>

<p>On page 220, it says (or implies) that all you need to do to have routing enabled between two VLANs is create the VLANs on the switch and then plug devices in and everything should automagically work. This is not the case.</p>

<p>You can see my current running-config file <a href=""http://www.saairey.co.uk/PowerConnect-5524-running-config.txt"" rel=""nofollow"">here</a>.</p>

<p>I have my PC connected to port 21 (VLAN 2 192.168.2.41) and another PC connected to port 1 (VLAN 3 192.168.3.10) and they cannot reach each other, I just get a timeout when I try and ping (yes both PCs have ICMP echo requests enabled in the firewall).</p>

<p>If you look at the management page on the switch, you can see when you plug devices into different ports that local routes get added for the appropriate subnets but it seems like no traffic is flowing through.</p>

<p>I've done some reading and maybe what I need is a trunk port to connect the different VLANs?</p>

<p>I also tried connecting a cable to create a physical link between the VLANs in some fruitless last-ditch attempt and this didn't work either.</p>

<p>I'm at a loss as to what to do next, I'm no network engineer. Any help is greatly appreciated.</p>

<p>EDIT(s):</p>

<pre><code>console# show ip route
Maximum Parallel Paths: 1 (1 after reset)
IP Forwarding:          enabled

Codes: C - connected, S - static, D - DHCP

S  0.0.0.0/0          [1/1] via  192.168.2.1  0:18:50              vlan 2
C  192.168.2.0/24     is directly connected                        vlan 2
C  192.168.3.0/24     is directly connected                        vlan 3
</code></pre>

<p>As I said in the comments, the PCs in both VLAN 2 and VLAN 3 can ping the addresses for the router on both VLANs, see below for clarification.</p>

<p>PC 1, VLAN 2, IP: 192.168.2.41
    ping 192.168.2.254: success
    ping 192.168.3.1: success
    ping 192.168.3.10: failure</p>

<p>PC 2, VLAN 3, IP: 192.168.3.10
    ping 192.168.3.1: success
    ping 192.168.2.254: success
    ping 192.168.2.41: failure</p>

<p>Interestingly, when I have my internet cable plugged in to VLAN 2, the PC in VLAN 3 can ping the router on our internal network (192.168.2.1), tracert as follows:</p>

<pre><code>Tracing route to 192.168.2.1 over a maximum of 30 hops

  1     1 ms     4 ms     3 ms  192.168.3.1
  2     1 ms    &lt;1 ms    &lt;1 ms  192.168.2.1
</code></pre>

<p>When I have our internal network disconnected, the routing issues remain.</p>

<p>Traceroute from PC 2 to PC 1:</p>

<pre><code>Tracing route to 192.168.2.41 over a maximum of 30 hops

  1     1 ms     4 ms     4 ms  192.168.3.1
  2     *        *        *     Request timed out.
  3     *        *        *     Request timed out.
  4     *        *        *     Request timed out.
  5     *        *        *     Request timed out.
  6     *        *        *     Request timed out.
  etc. etc.
</code></pre>
","<p>When testing networking connections, don't use windows machines.</p>

<p>My firewall was set to allow ICMP traffic from any subnet on any domain profile yet it was still blocking the packets.</p>

<p>Turning the firewall off completely allowed the traffic through, so the routing is working.</p>

<p>Also, pings probably aren't the best way to test network connectivity.</p>

<p>For anyone looking to route between two VLANs on the Dell PowerConnect 5524, the commands on page 220 of the <a href=""ftp://ftp.dell.com/Manuals/Common/powerconnect-5524_User%27s%20Guide_en-us.pdf"" rel=""nofollow"">user guide</a> are sufficient:</p>

<pre><code>en
config

vlan database
vlan 100-101
exit

interface gi1/0/1
switchport access vlan 100
ip address 1.1.1.1 255.255.255.0
exit

interface gi1/0/2
switchport access vlan 101
ip address 2.1.1.1 255.255.255.0
exit
</code></pre>
","4933"
"Packet forwarding in TCP vs UDP","6058","","<p>Recently I had a discussion about differences between TCP and UDP, and the other person insisted that there's a difference in packet forwarding: The packets in a TCP connection follow an established path, so that in a diamond configuration where a host has two paths to another host a connection will use only one path. Moreover, if a path is broken the TCP connections on it will not use the other path, they will time out instead. UDP traffic is not affected in any way.</p>

<p>This goes against what I've learned about packet forwarding in general, but I haven't been able to confirm or deny it. Is it true? Why would switches give TCP connections this special treatment, doesn't it make the network less reliable in general? </p>
","<p>Actually there is <em>some</em> truth in what the other person was saying, though it is largely false.</p>

<h2>Is it true (that packets in a TCP connection follow an established path)?</h2>

<p>Yes, in general, all packets in a TCP stream will follow the same path through the network - even in the presence of a ""diamond"" network, all packets in the same stream will be routed down the same side of the diamond. However, it's not true that if that side of the diamond goes down, the TCP stream will time out - in that case it will be rerouted and its path will change.</p>

<h2>Why would switches give TCP connections this special treatment?</h2>

<p>Here I'll answer why switches and routers will always try to send packets in a stream along the same side of a ""diamond"", hopefully giving some insight into where your interlocutor got their (flawed) understanding of the situation. The brief answer is ""performance"".</p>

<p>Background: While it's true that TCP <em>can</em> handle reordered packets successfully, in practice reordering tends to cause significant performance issues. For instance, if the other end sees packets in the order ""1 2 4 3"", it will notice when it sees packet 4 that it has not yet seen packet 3, and request for the other end to resend it - and it will then receive packet 3 twice (the one originally sent plus the resend). This results in bandwith being wasted (by sending packets twice unnecessarily), and also in reduced connection performance, since the sender will assume the ""packet loss"" it thinks it has seen is due to congestion, so it will slow down its sending.</p>

<p>Therefore most quality switches and routers will go to quite some lengths to avoid packet reordering, and as part of this will try to send all packets from the same TCP stream along the same path (in case one path has higher latency than the other).</p>

<p>Contrary to what others have said, this happens even for core routers. Where there are multiple links that are being load-balanced over, the router will try to send packets from the same TCP stream over the same link. Although this might seem to require the tracking of a huge amount of state, in fact it can be done without tracking all of the streams: the router takes the identifiers of the stream (source/destination IP address, and sometimes source/destination port), and combines them (<em>hashes</em> them) into a single number. This number is used to select which link to send the packet on. (To give an example of one vendor's implementation of this feature, search for <code>ip cef load-sharing algorithm</code>.)</p>

<h2>Doesn't it make the network less reliable in general?</h2>

<p>Yes, of course it would, if networks did exactly what your interlocutor described - so they don't do that. The behaviour the other person talked about where a path is dropped and TCP connections using that path time out is not typical: though it may be possible to configure some products to behave like this, in general both TCP and UDP will start to use the alternative route straight away.</p>

<p>When a link goes down, the hashes will be redistributed across the remaining links. This will result in TCP streams changing their paths - which may sometimes result in some reordering - but this is generally acceptable as it happens occasionally, rather than on every packet.</p>

<h2>Other relevant information</h2>

<p>The discussion was originally about the difference between handling of TCP and UDP packets.</p>

<p>In fact, all of the above handing is done for UDP packets too: that is, UDP packets from the same ""connection"" will also typically always follow the same path. This is desirable since UDP packets are often used for realtime media streams such as phone calls - if many of your voice packets arrive out of order, this can result in terrible audio quality (since for a phone call large buffering is highly undesirable, so the received will typically drop packets that arrive out of sequence).</p>
","13199"
"Wireshark Etherent II Trailer field?","6041","","<p>What does Trailer field stand for in Ethernet II frame? Can you explain this on following cases (length of ARP packet is 28 bits)?</p>

<p>Case #1:</p>

<pre><code>Ethernet II
Destination: Broadcast (ff:ff:ff:ff:ff:ff)
Source: c4:46:19:1d:05:f6 (c4:46:19:1d:05:f6)
Type: ARP (0x0806)
Trailer: D01CCF9087084E0A00000000000000000000

Address Resolution Protocol (reply)
Hardware type: Ethernet (0x0001)
Protocol type: IP (0x0800)
Hardware size: 6
Protocol size: 4
Opcode: reply (0x0002)
[Is gratuitous: False]
Sender MAC address: c4:46:19:1d:05:f6
Sender IP address: 88.200.89.1
Target MAC address: ff:ff:ff:ff:ff:ff
Target IP address: 0.0.0.0
</code></pre>

<p>Case #2:</p>

<pre><code>Ethernet II
Destination: Broadcast (ff:ff:ff:ff:ff:ff)
Source: Cisco_f6:16:c7 (00:16:9d:f6:16:c7)
Type: ARP (0x0806)
Trailer: 000000000000000000000000000000000000

[Duplicate IP address detected for 88.200.89.1]

Address Resolution Protocol (reply/gratuitous)
Hardware type: Ethernet (0x0001)
Protocol type: IP (0x0800)
Hardware size: 6
Protocol size: 4
Opcode: reply (0x0002)
[Is gratuitous: True]
Sender MAC address: Cisco_f6:16:c7
Sender IP address: 88.200.89.1
Target MAC address: Cisco_f6:16:c7
Target IP address: 88.200.89.1
</code></pre>

<p>Thank you!</p>
","<p>Ethernet imposes a 60-byte (64-byte, if you include the CRC at the end of the packet) minimum on packet sizes (a requirement imposed by the CSMA/CD mechanism used in Ethernet).  The trailer is the padding added to short packets to satisfy that requirement.</p>

<p>Wireshark infers the length of the trailer from what information is available in the packet.  In packets in which the type/length field in the Ethernet header is a length field, the length field can be used to determine the length of the trailer; however, in packets in which it's a type field, the length has to be indicated by something in the payload, so that the implementation of the protocol running on top of Ethernet knows what's data and what's padding - for example, IPv4 and IPv6 have fields in the header from which the total length of the IP datagram can be determined.</p>
","7100"
"Does it make sense to deploy OSPF across Metro Ethernet?","6027","","<p>When I need to connect a number of branch sites to one another for a customer, I typically recommend an MPLS VPN through a trusted carrier. The CE at each site speaks BGP with its upstream PE and each site is numbered with its own private ASN. This is very convenient for us as BGP provides myriad traffic engineering tools and our adjacencies are limited to n+1 for n sites (the +1 being our colo environment).</p>

<p>Lately, however, I've noticed increasing customer interest in Metro Ethernet solutions. Many of our customers have branch sites within a common metro area and MetroE quotes are coming in at several hundred dollars (USD) less than MPLS service for circuits of the same speeds. While this is appealing, I'm not sure how to best establish routing across a layer two backbone while avoiding turning a mesh topology into hub-and-spoke.</p>

<p>BGP would necessitate a full mesh of adjacencies among branch sites in order to maintain mesh connectivity, which obviously is undesirable from a scalability perspective. The other option is to deploy an IGP, namely OSPF, and have all sites form adjacencies across the WAN. I'd like to address each site as its own area, which seems like overkill but I want to preserve the ability to summarize routes advertised from each site and this can only be done on area borders.</p>

<p>Does this make sense? Are there any caveats to watch out for when deploying OSPF in this manner (for example, should I consider disabling LSA flooding)? Or is there another solution I've overlooked?</p>
","<p>This is kind of a complex question, as the two different products are very different.  A MPLS L3VPN circuit inherently is a full mesh between all locations that participate, while a MetroE connection is generally a point to point link between two specific sites.  </p>

<p>In my experience, a MetroE circuit is a directly provisioned path, with no protect services, unless contracted with a protect path.  This means that failure of an interface or router along the specific path would be traffic interrupting between the two sites that are directly linked by the MetroE service.  The MPLS L3VPN will heal around interface/routing failures to keep you with a full mesh between your sites.  This generally accounts for the price difference between the two.</p>

<p>There is nothing wrong with building your own services on top of a MetroE platform -- you just need to work with customer requirements to determine what type of routing is appropriate.  If you are working with a small office network, OSPF/IS-IS/EIGRP could be a wonderful way to exchange routing information between the directly connected sites that you have established.  If you're more of an NSP/ISP/*SP, separating infrastructure and customer routes between IGP and EGP becomes much more important as you scale.</p>

<p>As an ISP engineer, we extensively use MetroE and EWAN links to build our backbone, and utilize our knowledge of the physical links to design our iBGP/eBGP environment.  In many cases, we use route reflectors, and dual route reflectors (route-reflector-client on both sides of the peering) to reduce our iBGP peer count.  However, unless you're dealing with 6+ routers in a POP, iBGP scales pretty well.</p>

<p>In short -- if it's for a single client, that is not offering network services to clients of their own -- stick with an IGP.  If external connectivity needs to be shared between sites, with failover/redundancy/etc, closely examine the physical paths you have, and design your eBGP/iBGP to reflect that.  No point in having a router in a remote location with only 1 link outside the site to iBGP peer with all other routers in the AS -- use a dual route reflector.</p>
","59"
"How to host server in DMZ zone of an ASA","5993","","<p>I have an ASA5525-X with 9.1.2. On it are several interfaces, but primarily I'm looking at:</p>

<p>(fake subnets)</p>

<ul>
<li>inside 10.0.0.0/24, security level 100</li>
<li>outside 10.0.200.0/24, security level 0</li>
<li>DMZ 10.0.100.0/24, security level 50</li>
</ul>

<p>I have a DNS server in DMZ, 10.0.100.1 which I can access from inside without issue. However, I want it to show up as 10.0.200.95 (not a real IP for this example) to people on the internet. I have what I thought was needed for this to work, but when I test it out, the packets are being dropped by the default acl.</p>

<p>Pertinent config pieces:</p>

<pre><code>interface GigabitEthernet0/0
 nameif outside
 security-level 0
 ip address 10.0.200.194 255.255.255.192 
interface GigabitEthernet0/6
 nameif DMZ
 security-level 50
 ip address 10.0.100.254 255.255.255.0 
interface GigabitEthernet0/7
 nameif inside
 security-level 100
 ip address 10.0.0.254 255.255.255.0 

object network DMZ-DNS-Server-1
 host 10.0.100.1

nat (inside,outside-backup) source static Company-MPLS-Network-Group Company-MPLS-Network-Group destination static VPN VPN no-proxy-arp route-lookup
nat (inside,outside) source static Company-MPLS-Network-Group Company-MPLS-Network-Group destination static VPN VPN no-proxy-arp route-lookup
nat (inside,outside) source static Company-MPLS-Network-Group Company-MPLS-Network-Group destination static Site-Site-VPN Site-Site-VPN no-proxy-arp route-lookup
nat (inside,outside-backup) source static Company-MPLS-Network-Group Company-MPLS-Network-Group destination static Site-Site-VPN Site-Site-VPN no-proxy-arp route-lookup
nat (inside,DMZ) source static Company-MPLS-Network-Group Company-MPLS-Network-Group destination static DMZ DMZ no-proxy-arp route-lookup
nat (DMZ,outside) source static DMZ DMZ destination static Site-Site-VPN Site-Site-VPN no-proxy-arp route-lookup
nat (DMZ,outside-backup) source static DMZ DMZ destination static Site-Site-VPN Site-Site-VPN no-proxy-arp route-lookup

object network DMZ-DNS-Server-1
 nat (DMZ,outside) static 10.0.200.195 net-to-net

nat (inside,outside-backup) after-auto source dynamic any interface
nat (inside,outside) after-auto source dynamic any interface
nat (DMZ,outside) after-auto source dynamic any interface
nat (DMZ,outside-backup) after-auto source dynamic any interface


access-list traffic-in-outside extended permit tcp any host 10.0.200.195 eq domain 
access-list traffic-in-outside extended permit udp any host 10.0.200.195 eq domain 
access-group traffic-in-outside in interface outside
</code></pre>

<p>Any ideas?</p>
","<p>Change your ACL to reference the real address of the server (10.0.100.1) instead of the translated address (10.0.200.195). This is another change in 8.3+.  ACLs match on real addresses.</p>
","1917"
"Connecting two different Cisco Switches using Fibre","5991","","<p>I have two Cisco Catalyst 2960-24TC-L switches and would like to connect them using fibre over a distance of 200Meters. According to cisco, the switches has two SFP ports, which I can clearly see on them but my issue is I do not know where or how to proceed knowing that I am not into networking at all. All I want to do is to make sure I am on the same page with the network engineer I will be contracting so they wont be here telling me what they want and not what we need.</p>

<p>Any help will be highly appreciated.</p>
","<p>You can use short range SFP optics for this.  The Cisco part number is GLC-SX-MM, and the cost is about $75-$100 each (you'll need two).  The person installing your fiber should use 50uM multimode fiber (62.5uM is also useable, but you're getting close to the maximum range) with LC type connectors.</p>
","5819"
"What is the difference between DD-WRT regulatory domains?","5990","","<p>DD-WRT offers two different ""Regulatory Domain"",</p>

<ul>
<li>United States</li>
<li>United States (Public Safety)</li>
</ul>

<p>Reading <a href=""http://svn.dd-wrt.com/browser/src/router/libutils/country.c?rev=16172"" rel=""nofollow"">the source</a>, I see,</p>

<pre><code>{CTRY_UNITED_STATES,       FCC1_FCCA, YES, YES, YES, YES, YES, YES, YES, 5825 },
{CTRY_UNITED_STATES_FCC49, FCC4_FCCA, YES, YES, YES, YES, YES, YES, YES, 7000 },
</code></pre>

<p>The struct is defined as,</p>

<pre><code>typedef struct {
  unsigned int countryCode;
  unsigned int regDmnEnum;
  char *isoName;
  const char *name;
  unsigned char allow11g;
  unsigned char allow11aTurbo;
  unsigned char allow11gTurbo;
  unsigned int outdoorChanStart;
} COUNTRY_CODE_TO_ENUM_RD;
</code></pre>

<p>So the difference is simply the <em>""regDmnEnum""</em> and the <em>""outdoorChanStart""</em>. What do these two things do?</p>
","<p>The particular frequency bands available for WiFi differ slightly between different jurisdictions, and a ""regulatory domain"" is basically a list of the channels that are legal to use in a certain area, which is fed to the radio's firmware on initialization.</p>

<p>In this case, it appears that DD-WRT is supporting the <a href=""http://en.wikipedia.org/wiki/List_of_WLAN_channels#4.9.C2.A0GHz_.28802.11y.29_Public_Safety_WLAN"">802.11y band</a>, which is a frequency range from channels 20-26 that run regular WiFi but are reserved for police, fire, and similar official use.</p>

<p>In the struct, <code>regDmnEnum</code> appears to be an arbitrary enumeration key identifying that domain, and <code>outdoorChanStart</code> appears to be a threshold indicating which channels can be used outdoors only and which are legal for use indoors as well; see the following snippet from the FreeBSD ath9k driver:</p>

<pre><code>if (!enableOutdoor)
    maxChan = country-&gt;outdoorChanStart;
</code></pre>
","2899"
"Are there any reasons to not use BFD?","5979","","<p>In looking to implement Bidirectional Forwarding Detection (BFD) it seems to be very flexible in terms of timer tuning, light weight regarding any overhead and it's flexibility in terms of overall application appears very impressive.</p>

<p>So if for example it can be applied to detect link failure over Ethernet, MPLS over multiple hops, at the network edge, for IGP convergence, for tunnels etc etc - why would it <strong>not</strong> be used in certain scenarios perhaps and are there other emerging alternatives to be aware of?</p>
","<p>I am only directly aware of one issue with BFD, which is CPU demand. I am currently investigating an issues with a Cisco 7301 which when pushing more traffic during our peak hours, compared to the rest of the day, BFD is sometimes timing out and routing trips over to the next link.</p>

<p>It seems that under high traffic volumes the router CPU usage is rising (which isn't unusual) but at about 40-50% CPU BFD packets aren't receiving enough resources.</p>

<p>However I have found the following information which suggests additional issues with BFD (From <a href=""http://www.nanog.org/meetings/nanog45/presentations/Monday/Scholl_BFD_N45.pdf"">this</a> NANOG presentation, there is more in the presentation, it's a good one, give it a read!)</p>

<p><strong>What are the caveats?</strong></p>

<ul>
<li>Two main ones:
<ol>
<li>BFD can have high resource demands depending on your
scale.</li>
<li>BFD is not visible to Layer 2 bundling protocols. (Ethernet
LAGs or POS bundles)</li>
</ol></li>
</ul>

<p><strong>BFD Resource Demands</strong></p>

<ul>
<li>The number of BFD sessions on each linecard or router can
impact how well BFD scales for you.
-Each unique platform has its own limits.</li>
<li>Bundled interfaces supporting min tx/rx of 250ms or 2 seconds have
been seen.</li>
<li>In some cases, BFD instances on a router may need to be operated on
the route-processor depending on the implementation (non-adjacency
based BFD sessions).</li>
<li>Test your platform first before deploying BFD. Attempt to put
load on the RP or LC CPU with your configured settings. This
can be done by:</li>
<li>Executing CPU-heavy commands</li>
<li>Flooding packets to TTL expire on the destination</li>
</ul>

<p><strong>BFD Resource Demands (cont’d)</strong></p>

<ul>
<li>What values are safe to try?</li>
<li>Based upon speaking to several operators, 300ms with a
multiplier of 3 (900ms detection) appears to be a safe value
that works on most equipment fairly well.</li>
<li>This is a significant improvement over some of the
alternatives.</li>
</ul>

<p><strong>BFD and L2 link-bundling</strong></p>

<ul>
<li>BFD is unaware of underlying L2 link bundle members.</li>
<li>A 4x10GigE L2 bundle (802.3ad) would appear as a single L3
adjacency. BFD packets would be transmitted on a single
member link, rather than out all 4 links.</li>
<li>A failure of the link with BFD on it would result in the entire L3
adjacency failing.</li>
<li>However, in some scenarios the failed member link may result in only a
single BFD packet being dropped. Subsequent packets may route over
working member links.</li>
</ul>
","637"
"Toggle Switch for an Ethernet Cable","5966","","<p><img src=""https://i.stack.imgur.com/jdm1E.png"" alt=""Switch""></p>

<p>Is it possible to place a switch in one of the four/five wires of an Ethernet cable that will disable it?</p>

<p>For my hardware project I would like the user to be able to disable the internet connection at the flick of a switch!</p>

<h2>Notes</h2>

<ul>
<li>I am aware that it will affect the speed and signal quality but with the hardware I am using it shouldn't matter.</li>
<li>I know there are commercial options available on the market (like <a href=""http://www.justhitthebutton.com/"" rel=""nofollow noreferrer"">Just hit the Button</a>) but at $50 and in a bulky branded box they are not suitable for my project!</li>
</ul>

<p>Is this possible?</p>
","<p>Have you got a physical switch that is rated for Cat5 cabling?  The answer to your question is the same as the answer to my question.</p>

<p>More than likely you need to buy an electronic relay, and I know of some rated for Cat5.</p>
","17303"
"About the inside local and outside local and inside global and outside global","5947","","<p>I have some concept problem with the NAT. Here is the Cisco definition for the local and Global and the NAT operation.</p>

<blockquote>
  <p>Local address—A local address is any address that appears on the inside portion of the network.</p>
  
  <p>Global address—A global address is any address that appears on the outside portion of the network.</p>
  
  <p>Packets sourced on the inside portion of the network have an inside local address as the source address and an outside local address as the destination address of the packet, while the packet resides on the inside portion of the network. When that same packet gets switched to the outside network, the source of the packet is now known as the inside global address and the destination of the packet is known as the outside global address.</p>
  
  <p>Conversely, when a packet is sourced on the outside portion of the network, while it is on the outside network, its source address is known as the outside global address. The destination of the packet is known as the inside global address. When the same packet gets switched to the inside network, the source address is known as the outside local address and the destination of the packet is known as the inside local address.</p>
  
  <p>Ref::<a href=""http://www.cisco.com/en/US/tech/tk648/tk361/technologies_tech_note09186a0080094837.shtml#defining"" rel=""nofollow"">http://www.cisco.com/en/US/tech/tk648/tk361/technologies_tech_note09186a0080094837.shtml#defining</a></p>
</blockquote>

<p>My question is the term ""local"" mean the traffic in the LAN side of the network and the term ""global"" mean the traffic in the WAN side of the network?  </p>

<p>and when I use the command ""<em>ip nat inside destination</em>"", I will set up a translation between a local inside address and a global inside address, and for the command ""<em>ip nat outside source</em>"", I will set up a translation between a local outside address and a global outside address, is this correct? </p>

<p>Last one, why we don't need to set up the NAT between the Outside local and Inside global? or the NAT between the Outside global and Inside local?</p>
","<p>Usually NAT will be used to translate between private to public IP address but this is not the only use case. You can also translate between any addresses you want such as private to private.</p>

<p>The terms local and global most often refer to the inside and outside of your network but this doesn't mean that it MUST be LAN and WAN although it often is.</p>

<p>So say that we have a webserver on our LAN with the IP 10.0.0.1. We want the webserver to be accessible from a public IP of 130.130.130.130.</p>

<pre><code>ip nat inside source static 10.0.0.1 130.130.130.130
</code></pre>

<p>What this does is to translate all packets from 10.0.0.1 (Source IP) to a source of 130.130.130.130 when exiting on the outside interface. This command is bidirectional so all packets entering the outside interface with a destination IP of 130.130.130.130 will also get translated to 10.0.0.1.</p>

<p>The ip nat inside destination command translates from inside global to one or several inside locals. This is primarily used to do primitive load sharing.</p>

<pre><code>ip nat inside destination list 1 pool real-hosts
ip nat pool real-hosts 10.0.0.1 10.0.0.3 prefix-length 24 type rotary
access-list 1 permit 130.130.130.130
</code></pre>

<p>What this does is to translate from 130.130.130.130 to 10.0.0.1, 10.0.0.2 and 10.0.0.3 in a rotary fashion. So for every incoming request to the inside global IP of 130.130.130.130 it will be translated to a different inside local address in a round robin fashion.</p>

<p>IP nat outside source static translates between outside global and outside local IP. One common use case would be if you have overlapping subnets. Like if you are doing a merger and both companies use the same IP subnets. So say that both company A and company B are using 10.0.0.0/24 for something. So you are working for company A and you want to translate all 10.0.0.0/24 on the outside to 192.168.0.0/24.</p>

<pre><code>ip nat outside source static network 10.0.0.0 192.168.0.0 /24
</code></pre>

<p>Then you would have to do the same for traffic going from the inside to the outside of course.</p>

<p>Regarding your last question it only really makes sense to either translate the source or the destination of the packet. What you are suggesting sounds like some kind of policy routing. You can use inside and outside NAT to do everything you need.</p>
","2757"
"What is Link-local addressing?","5945","","<p>I noticed that IPv4 reserved <code>169.254.0.0/16</code> and IPv6 reserved <code>fe80::/10</code> for link-local addressing. While I saw IPv6 uses both <code>fe80::/10</code> address and my private IPv6 address <code>fd00::12</code> to communicate with other devices in Wireshark, I never seen <code>169.254/16</code> working in IPv4. </p>

<p>So, what is the purpose of link-local addressing?</p>
","<blockquote>
  <p>I never seen 169.254/16 working in IPv4.</p>
</blockquote>

<p>A PC automatically acquires a 169.254.x.x/16 address if it does not receive an IP address from a DHCP server. If you disable the DHCP server on your home or lab network and issue the ""ipconfig/release"" and ""ipconfig/renew"" commands, your PC will receive a 169.254.x.x address.</p>

<p>As per <a href=""http://packetlife.net/blog/2008/sep/24/169-254-0-0-addresses-explained/"">this article</a>:</p>

<blockquote>
  <p>The purpose of these self-assigned link-local addresses is to
  facilitate communication with other hosts within the subnet even in
  the absence of external address configuration (via manual input or
  DHCP). Unlike in IPv6, implementation of IPv4 link-local addresses is
  recommended only in the absence of a normal, routable address. Hosts
  pseudo-randomly generate the last two octets of the address to
  mitigate address conflicts. Because of the broadcast nature of some
  local networking protocols (for example, Microsoft's NetBIOS), hosts
  may be able to detect one another even without any preexisting
  knowledge of the address scheme.</p>
</blockquote>
","24750"
"Why cant i NAT to a local network address on my UBNT edgerouter","5925","","<p>I am trying to set up a very simple network.</p>

<p>I have an Ubiquiti Edgerouter on 192.168.1.1 with eth0 as WAN port.
I also have an Ubiquiti Rocket m5 on 192.168.1.2, both the router and the Rocket have a web interface. I have set the https-port from the router on port 8443. The Rocket has a web interface on port 80 &amp; 443.</p>

<p>What i did:
I have made a working connection with my router, both ssh and web interface on 8443.<br>
Add a firewall rule for both port 80 and 443.
<img src=""https://i.stack.imgur.com/issOX.png"" alt=""Firewall Wan_local""></p>

<p>This seems to be working.
I also made a NAT rule to forward to the Rocket on 192.168.1.2
1 for port 80 and 1 for port 443.
Like so:
<img src=""https://i.stack.imgur.com/2Dm8j.png"" alt=""Nat rule""></p>

<p>As you can see, the ""count"" is still 0. So i'm assuming this is the problem.</p>

<p>Could anyone help me here? I'm looking for a very simple way to forward to 192.168.1.2. I am quite sure the web interface is enabled, because, if i ""join"" the network by plugging a cable directly into the router and into my PC, i can access the web interface.</p>
","<p>This may seem a little counter-intuitive, but you need to change the ""Translations"" IP address to 192.168.1.2 and remove the IP address from the ""Dest Address"" field.</p>

<p>What the configuration is actually telling the device is that when you receive traffic with destination address/port on this interface, translate it to the translation address/port.</p>

<p>The purpose of this is in cases where someone may have additional external IP addresses that they are given by their provider and you may want to be doing NAT translationns.</p>
","11241"
"VRFs, VLANs and subnets: difference","5918","","<p>I have a basic understanding of VRFs, VLANs and subnets. I understand that VLANs operate on L2, and subnets and VRFs (lite) on L3. What I don't understand, is why you would choose one over the other when you mostly care about segmentation.</p>

<hr>

<p>Imagine I have only 2 devices, and I don't want them to be able to talk to each other, but I do want them to be able to access the internet. </p>

<p><strong>VLANs</strong></p>

<p>Imagine I have only one switch and one router in my network. I could do as follows:</p>

<ul>
<li>device 1 => VLAN 1</li>
<li>device 2 => VLAN 2</li>
<li>Internet => VLAN 3</li>
</ul>

<p>Then, to prevent them from talking, I could allow traffic between vlan 1 and vlan 3, as well as traffic between vlan 2 and vlan 3. I would, however, drop all traffic flowing between vlan 1 and vlan 2. => Segmentation OK.</p>

<p><strong>Subnets</strong></p>

<p>Imagine I have two switches and one router in my network. I could do as follows:</p>

<ul>
<li>subnet 1 => switch 1 => device 1</li>
<li>subnet 2 => switch 2 => device 2</li>
</ul>

<p>Then, like I did with the VLANs, I could drop all packets flowing between subnet 1 and subnet 2. => Segmentation OK. </p>

<p><strong>VRFs</strong></p>

<p>Imagine I have multiple switches and one router. I could do as follows:</p>

<ul>
<li>VRF 1 => Device 1</li>
<li>VRF 2 => Device 2</li>
</ul>

<p>I do not explicitly have to prevent anything. By default, the two VRF's won't be able to talk to each other. => Segmentation OK.</p>

<hr>

<p>Is there any other advantage to any of the three? What is the preferred method? Why would I combine the three? What else did I miss?</p>

<p><strong>edit</strong>
I'm really looking for an answer which compares the three options, especially VLAN (which might be using separate subnets) vs VRF segmentation. </p>
","<p>Each fills a different purpose and all three may be part of an overall solution. Lets start with the oldest concept first.</p>

<p>Subnets are the IP worlds way of determining what devices are ""assumed to be on-link"". Devices within the same subnet will send unicast traffic directly to each other by default while devices in different subnets will send unicast traffic via a router by default.</p>

<p>You could put each subnet on a separate physical network. This forces traffic to go via the router, which can act as a firewall. That works fine if your isolation domains match up with your physical network layout but gets to be a PITA if they don't.</p>

<p>You can have multiple subnets on the same ""link"", but doing so does not provide a high degree of isolation between the devices. IPv4 unicast traffic and IPv6 global unicast traffic between different subnets will by default flow via your router where it can be filtered but broadcasts, IPv6 link local traffic and non-ip protocols will flow directly between the hosts. Furthermore if someone wants to bypass the router they can trivially do so by adding an extra IP address to their NIC.</p>

<p>VLANs take an Ethernet network and split it up into multiple seperate Virtual Ethernet networks. This lets you ensure that traffic goes via the router without constraining your physical network layout.</p>

<p>VRFs let you build multiple virtual routers in one box. They are a relatively recent idea and are mostly useful in large complex networks. Essentially while VLANs let you build multiple independent virtual Ethernet networks on the same infrastructure VRFs (used in conjunction with an appropriate virtual link layer such as VLANs or MPLS) let you build multiple independent IP networks on the same infrastructure. Some examples of where they might be useful.</p>

<ul>
<li>If you are running a multi-tenant datacenter scenario each customer may have their own (possibly overlapping) set of subnets and want different routing and filtering rules. </li>
<li>In a large network you may want to route between subnets/vlans in the same security domain locally while sending cross security domain traffic to a central firewall.</li>
<li>If you are doing DDOS scrubbing you may want to separate unscrubbed traffic from scrubbed traffic. </li>
<li>If you have multiple classes of customer you may want to apply different routing rules to their traffic. For example you could route ""economy"" traffic on the cheapest path while routing ""premium"" traffic on the fastest path.</li>
</ul>
","36035"
"interpreting ping results","5916","","<p>I'm pinging yahoo.com and am I'm puzzled by the result.</p>

<pre><code>C:\Users\jon&gt;ping -t yahoo.com

Pinging yahoo.com [98.138.253.109] with 32 bytes of data:
Reply from 98.138.253.109: bytes=32 time=195ms TTL=46
Reply from 98.138.253.109: bytes=32 time=230ms TTL=44
Reply from 98.138.253.109: bytes=32 time=175ms TTL=45
Reply from 98.138.253.109: bytes=32 time=208ms TTL=44
Reply from 98.138.253.109: bytes=32 time=180ms TTL=46
Reply from 98.138.253.109: bytes=32 time=206ms TTL=44
Reply from 98.138.253.109: bytes=32 time=209ms TTL=44
Reply from 98.138.253.109: bytes=32 time=173ms TTL=46
Reply from 98.138.253.109: bytes=32 time=170ms TTL=46
Reply from 98.138.253.109: bytes=32 time=224ms TTL=45
Reply from 98.138.253.109: bytes=32 time=200ms TTL=45
Reply from 98.138.253.109: bytes=32 time=172ms TTL=46
Reply from 98.138.253.109: bytes=32 time=258ms TTL=44
</code></pre>

<p>I vaguely understand the TTL value as the number of hops that the packet traverses to reach its destination, but I don't understand how TTL can have such a dramatic +/- 1 variance in such a short amount of time.</p>

<p>Also, it seems Yahoo has some kind of rate-limiting implemented as a persistent ping will start timing out after about 20 packets. Is this normal? bing.com doesn't even reply to me!</p>

<p>When pinging google.com the TTLs are consistent.</p>

<p>When pinging Twitter.com sometimes I get TTL=249, but usually TTL-58.  </p>

<p>What's going on? Are my ISP up to no good or is there a less sinister explanation?</p>
","<p>Most likely this is caused by load balancing across multiple networks. Each ping will take a different path and accordingly will have a difference TTL value.</p>

<p>I also read about search engine providers doing strange things with TTL, but its just going through a different route either way.</p>

<p>TTL values are different when sourced from different operating systems:</p>

<ul>
<li>Windows: 128</li>
<li>Linux: 64</li>
<li>Cisco: 255</li>
<li>Solaris: 255</li>
</ul>

<p>And yes, some sites will stop responding to ICMP after a certain amount of time, or when a rate limit is hit. I believe Google's DNS on 8.8.8.8 eventually stops after a while.</p>
","2222"
"How to understand the IPv6 route table","5896","","<p>Here is the <code>ip -6 route</code> result of my working OpenWRT system.  I find that this is quite different to the route table of ipv4.</p>

<pre><code>    default from :: via fe80::3e8a:b0ff:fe86:f870 dev eth0.2  proto static  metric 1024
    default from 2402:f000:5:8401::/64 via fe80::3e8a:b0ff:fe86:f870 dev eth0.2  proto static  metric 1024
    default from fc00:101:101::/64 via fe80::3e8a:b0ff:fe86:f870 dev eth0.2  proto static  metric 1024
    2402:f000:5:8401::/64 dev eth0.2  proto static  metric 256
    fc00:101:101::/64 dev br-lan  proto kernel  metric 256
    fda0:52f6:20cb::/64 dev br-lan  proto static  metric 1024
    fe80::/64 dev eth0  proto kernel  metric 256
    fe80::/64 dev eth0.2  proto kernel  metric 256
    fe80::/64 dev br-lan  proto kernel  metric 256
    fe80::/64 dev wlan1  proto kernel  metric 256
    fe80::/64 dev wlan0  proto kernel  metric 256
</code></pre>

<p>First, why IPv6 has multiple default routing entries?  Second, I found that all the ipv6 routing entries do not specify the source IP of the interface (in ipv4, the route table has a column like <code>src xxx.xxx.xxx.xxx</code>).</p>
","<p>First let's explain the address prefixes:</p>

<p><strong>fe80::/10</strong> - Link Local</p>

<p><strong>2000::/3</strong>  -  global Unicast (2402:f000:5:8401::/64 in your example)</p>

<p><strong>fc00::/7</strong>  - unique local (RFC4193) (fc00:101:101::/64 and  fda0:52f6:20cb::/64 in your example)</p>

<p>Link-Local addresses are valid on the link olny (e.g. the VLAN your are currently connected to), global unicast is globally reachable (at least if there is no firewall / acl blocking traffic) and unique-local addresses  globally unique (at least in theory) and used for local communications and not routed on the internet</p>

<p>An interface has always one link-local address and can have one or more global addresses. </p>

<p>You see a route for each of these prefix types (first three lines) </p>

<p>An address from 2402:f000:5:8401::/64 is assigned to eht0.2 and fc00:101:101::/64 / fda0:52f6:20cb::/64 to your br-lan interface. </p>

<p>Thr rest are the link-local entries for the different interfaces.</p>
","19575"
"Cisco ASA 9.0(1) - NAT / PAT","5886","","<p>I'm trying to open some ports in my ASA 5505 Firewall with the 9.0(1) software. I've being using another ASA with a lower software version. As you can imagine I'm quite confused and have been reading all CLI guides from Cisco and looking at different blogs for help.</p>

<p>I'm trying to open some external ports and trying to map them into my inside servers. I would like to use different ports on the onside and translate them to the original port on the inside.</p>

<p>outside = 77.77.77.77<br>
inside = 10.203.5.1</p>

<p>I'm trying to open for port 10001 and send that into my network while translating it into port 3389. So I'm basically trying to open for multiple servers via RDP but I only got 1 public IP address to work with. I would like to keep the port 3389 on all servers, so when on the inside LAN people can connect to the server without worrying about custom ports. When they are on the outside the have to use 77.77.77.77:10001 to connect to the server through the ASA.</p>

<p>As I understand the commands have changed quiet a bit since I last did the above configuration and that is I'm feeling stuck. I've tried following the examples on this <a href=""http://www.vionblog.com/cisco-asa-nat-migration/"" rel=""nofollow"">link</a> but without getting lucky. I think i read somewhere that I need 2 objects to do a correct NAT with a PAT configuration or am I way of here?</p>

<p>I would appreciate it if any one could point me in some direction because where I'm now I can't the ASA to do what I believe it is built to do :o)  </p>
","<p>Here's an example configuration for what you're looking to accomplish.</p>

<p>First create an object for you server:</p>

<pre><code>object network SRV1
host 10.203.5.1
</code></pre>

<p>Next, create the PAT rule that uses your outside interface IP:</p>

<pre><code>object network SRV1
nat (inside,outside) static interface service tcp 3389 10001
</code></pre>

<p>The packet processing order of operations on 8.2 code and below is ACL --> NAT.  Post 8.3 code is NAT --> ACL, so your ACL will have a permit to the inside network IP.</p>

<p>Finally, create your ACL rule:(assuming your access list name is outside_access_in)</p>

<pre><code>access-list outside_access_in extended permit tcp any object SRV1 eq 3389
</code></pre>

<p>Rinse and repeat.</p>
","8215"
"Whats the difference between VTP and DTP","5883","","<p>I am preparing for CCNA and i came across both VTP and DTP. It seems confusing. Are they both trunking protocols to trunk interfaces? But the modes are different for each. Can someone explain how they differ or same?</p>
","<p>VTP and DTP are two different things.</p>

<blockquote>
  <p>In summary, <em>VTP is a protocol used to share VLAN information</em> within a domain among connected switches. On the other hand, <em>DTP is a protocol used to negotiate trunking between switch ports on either ends of a link</em>.</p>
</blockquote>

<h1>DTP</h1>

<p>Think of it this way - if you want to automatically setup trunk interfaces on one switch, when the other side is requesting a trunk, you turn to DTP (Dynamic Trunking Protocol). Using the right settings, you’d be able to automatically set an interface to trunk mode, if it is connected to another switch.</p>

<h1>VTP</h1>

<p>Now lets say you have multiple VLANs that you need to create in your network. But you don’t want to bother going to every single switch and creating these VLANs. So you turn to VTP. You configure the right settings, and you just create the VLANs on one switch. VTP also propagates these VLANs to other switches that are set to client-mode.</p>

<p>In short, they are independent of each other, except for very little overlap. Like for instance, if you have VTP domains configured on 2 switches, and the domains mismatch, then this affects DTPs ability to negotiate trunking between them. But for the purpose of your CCNA, this level of detail is not required.</p>
","22915"
"What is most effective placement for firewall devices ?","5823","","<p><img src=""https://i.stack.imgur.com/4A4kB.jpg"" alt=""enter image description here""></p>

<p>Having attempted to research this I’m still uncertain of where best to place firewalls in an existing network due to needing to retain a common vlan between 2 core sites.  The network has the following requirements:</p>

<ul>
<li>Redundancy between 2 x corporate sites to allow network based
internet access with L2 adjacency for HSRP between the Cisco1921 routers so
that DMZ resources and Customer LAN hosts use the vip as their
default gateway </li>
<li>All internet traffic to/from the Customer LAN should be processed
by the local ASA </li>
<li>All traffic from the internet to the DMZ should be processed by the ASA</li>
<li>Internet traffic and Corporate data will share the same WAN links
and need to retain a common vlan that trunks between SVIs on
the L3 switches</li>
</ul>

<p>Is there a better way of achieving this instead of having to translate and explicitly send everything via the ASA firewalls between the internet access, dmz and lan users?
I would prefer to have the firewalls in the direct path between the routers and switches to simplify their configs but not sure how else I can retain the HSRP communication between sites if placed other than depicted in the diagram?
Does it actually matter where the ASA sits from a security perspective? </p>
","<p>Here is a description of one solution:</p>

<p>Create 4 additional VLANs on the L2 trunk.  Place the firewalls between the router and L3 switches, and use  3 VLANS to connect the inside, outside and DMZ interfaces, turning the firewalls into a HA (failover) pair.  The 4th VLAN becomes the heartbeat link between the two firewalls.</p>

<p>The default gateway for the outside interface is the HSRP address.  The firewalls are configured with two contexts with identical policies.  Context 1 will have the primary FW on the left side of the diagram, and context 2 will have the right FW as the primary.</p>

<p>Users on the left side will set their default gw to contect1, and users on the right will use context 2.  This will keep traffic on the local FW and also provide redundancy if the local FW fails. </p>

<p>Each context has a unique public address (and NAT configuration) so that inbound traffic always goes to the correct FW.</p>

<p>The downside of this is that your DMZ devices will have two public addresses if they are located on both sides of the network.  You can either:
   1.  Decide that the DMZ devices will always use one context regardless of their physical location
   2.  Use a global load balancer to direct traffic to one or the other contexts.  That of course requires additional hardware and configuration.</p>

<p><img src=""https://i.stack.imgur.com/QRsTn.png"" alt=""FW Diagram""></p>
","5550"
"Difference between Linux Bridge and Open vSwitch","5817","","<p>What are the most significant differences between how a Linux bridge and an Open vSwitch work?</p>
","<p>Open vSwitch has a section on that in their <a href=""http://openvswitch.org/support/dist-docs/FAQ.md.txt"" rel=""nofollow"">FAQ</a>:</p>

<blockquote>
  <p><strong><em>Q:</strong> Why would I use Open vSwitch instead of the Linux bridge?</em></p>
  
  <p><strong><em>A:</strong> Open vSwitch is specially designed to make it easier to manage VM    network configuration and monitor state spread across many
  physical    hosts in dynamic virtualized environments.  Please see<br>
  [WHY-OVS.md] for a more detailed description of how Open vSwitch<br>
  relates to the Linux Bridge</em></p>
</blockquote>

<p>The entire list of features/differences (<a href=""http://openvswitch.org/support/dist-docs/WHY-OVS.md.txt"" rel=""nofollow"">WHY-OVS.md</a>) is quite long, you should check it out if you want to know all the details. The short version is that Open vSwitch is targeted at large multi-server virualisation environments, so it is focused on logical abstraction and management; the Linux bridge is fast and reliable, but lacks all fancy control features.</p>
","28410"
"MAC Flapping on Cisco 2960G","5816","","<p>We've been having an issue for the last few weeks on a relatively small network. The issue started when we swapped a specific Cisco 3750 for a 2960G (there were some other changes), exactly since then we now get the following notifications all day long:</p>

<pre><code>019534: Feb 27 01:28:39: %SW_MATM-4-MACFLAP_NOTIF: Host 0016.3e64.98e2 in vlan 100 is flapping between port Gi0/22 and port Gi0/24
</code></pre>

<p>We get this on multiple mac addresses and multiple vlans, the above is the most common one we see (there are thousands per day).</p>

<p>The mac address in question is for a VM on a server, obviously the server does not move and is physically located on another switch directly connected to Gi0/24.
Gi0/22 is the uplink to the central router (there are other switches upstream, non if which are logging flaps), so the questions follows - how is this switch learning the VM's mac on Gi0/22 ?</p>

<p>Obviously the first thing was to eliminate a L2 loop, we have looked into this many times, rebuilding diagrams from scratch using both cdp and physical tracing and we absolutely cannot find a loop anywhere. Additionally, STP is not reporting any blocked paths, confirming that no loop has been detected.</p>

<p>Any help or tips on how to debug this would be greatly appreciated.</p>
","<p>Hunt for an L2 loop or a software misbehaviour.</p>

<p>Start at 2960G/Gi0/22, and go to the upstream router let's say <strong>R1</strong>.
Search on which port is the @MAC: 00:16:3e:64:98:e2, let's say R1/Gi0/7.
Go to the network equipment connect on R1/Gi0/7, and go ahead until you
reach the final port which says it sees this @MAC.</p>

<p>If this isn't a physical connection to the same machine,</p>

<ul>
<li>check for an L2 wireless loop (through a wireless access point),</li>
<li>check for a VLAN L2 loop (same VLAN trunked on 2 different ports),</li>
<li>check for a rogue repeater, switch or AP,</li>
<li>check for a ghost value at the CAM level (clear the port).</li>
</ul>
","16950"
"Converting PCAP to WAV","5801","","<p>How would I go about converting a RTP stream from a pcap file to wav format with a command-line tool such as sox?</p>
","<p>Here you go!<br>
 1. Enter <code>RTP</code> in the display filter in Wireshark when the capture is open.<br>
 2. Now select an RTP packet in any stream and click on the menu option <code>Telephony</code>.<br>
 3. Go to <code>RTP</code>><code>Stream Analysis</code> and click on <code>Save Payload</code> button.<br>
 4. Change the format to <code>.au</code> and choose a name (lets say <code>test.au</code>) and location for your file.<br>
 5. Play it using your favorite audio player.<br>
OR<br>
 5. Run the following command to convert the <code>.au</code> file to <code>.wav</code> if you like <code>.wav</code> files better: <code>sox test.au  -V -t wav -b 16 -c 2 test.wav</code></p>

<p>Hope that helps!</p>
","17070"
"Cisco IOS -- How do I make the console prompt for a password upon serial line session 0 connection?","5794","","<p>I'm using Putty to connect via a serial connection to the console. I have a <code>line con 0</code> password set, as shown by <code>show running-config</code>. I close this session (via Putty), reconnect, and the CLI prompt shows the last state I was in (in enable mode), and it does not prompt for a password. </p>

<p>I went into configuration -> line console 0 -> login local and it just returns the root with no indication that this command took effect. Either way, when I restart the session, it still does not prompt for password.</p>

<p>How can I get a serial session to prompt for a password at the start of a serial session, and how do I refresh the serial session?</p>
","<p>YLearn is correct in that you are not properly disconnecting the session. If I understand the way you have this configured (password on the line, <code>login local</code> on the line, and no global username and password configured), when you properly disconnect the session by <code>exit</code>, you will find yourself locked out of the router. If you use <code>login local</code> it doesn't look for the password under the line configuration.</p>

<p><a href=""http://www.cisco.com/c/en/us/support/docs/ios-nx-os-software/ios-software-releases-110/45843-configpasswords.html#pw-line"" rel=""nofollow"">Telnet, Console and AUX Port Passwords on Cisco Routers Configuration Example</a></p>

<blockquote>
  <h1>Configure Passwords on the Line</h1>
  
  <p>To specify a password on a line, use the <strong>password</strong> command in line
  configuration mode. To enable password checking at login, use the
  <strong>login</strong> command in line configuration mode.</p>
  
  <p><strong>Note:</strong> To find additional information on the commands used in this document, use the Command Lookup Tool (registered customers only).</p>
  
  <h2>Configuration Procedure</h2>
  
  <p>In this example, a password is configured for all users attempting to
  use the console.</p>
  
  <ol>
  <li><p>From the privileged EXEC (or ""enable"") prompt, enter configuration
  mode and then switch to line configuration mode using the following
  commands. Notice that the prompt changes to reflect the current
  mode.</p>

<pre><code>router#configure terminal
Enter configuration commands, one per line.  End with CNTL/Z.
router(config)#line con 0
router(config-line)#
</code></pre></li>
  <li><p>Configure the password, and enable password checking at login.</p>

<pre><code>router(config-line)#password letmein
router(config-line)#login
</code></pre></li>
  <li><p>Exit configuration mode.</p>

<pre><code>router(config-line)#end
router#
%SYS-5-CONFIG_I: Configured from console by console
</code></pre>
  
  <p><strong>Note:</strong> Do not save configuration changes to <strong>line con 0</strong> until your ability to log in has been verified.</p></li>
  </ol>
  
  <p><strong>Note:</strong> Under the line console configuration, login is a required configuration command to enable password checking at login. Console
  authentication requires both the <strong>password</strong> and the <strong>login</strong>
  commands to work.</p>
</blockquote>

<p>This is how to use <code>login local</code> command:</p>

<blockquote>
  <h1>Configure Local User-Specific Passwords</h1>
  
  <p>To establish a username-based authentication system, use the
  <strong>username</strong> command in global configuration mode. To enable password checking at login, use the <strong>login local</strong> command in line
  configuration mode.</p>
  
  <h2>Configuration Procedure</h2>
  
  <p>In this example, passwords are configured for users attempting to
  connect to the router on the VTY lines using Telnet.</p>
  
  <ol>
  <li><p>From the privileged EXEC (or ""enable"") prompt, enter configuration
  mode and enter username/password combinations, one for each user for
  whom you want to allow access to the router:</p>

<pre><code>router#configure terminal
  Enter configuration commands, one per line.  End with CNTL/Z.
  router(config)#username russ password montecito
  router(config)#username cindy password belgium
  router(config)#username mike password rottweiler
</code></pre></li>
  <li><p>Switch to line configuration mode, using the following commands.
  Notice that the prompt changes to reflect the current mode.</p>

<pre><code>router(config)#line vty 0 4
router(config-line)#
</code></pre></li>
  <li><p>Configure password checking at login.</p>

<pre><code>router(config-line)#login local
</code></pre></li>
  <li><p>Exit configuration mode.</p>

<pre><code>router(config-line)#end
router#
%SYS-5-CONFIG_I: Configured from console by console
</code></pre></li>
  </ol>
  
  <p><strong>Note:</strong> In order to disable auto Telnet when you type a name on the CLI, configure <strong>no logging preferred</strong> on the line that is used.
  While <strong>transport preferred none</strong> provides the same output, it also
  disables auto Telnet for the defined host that are configured with the
  <strong>ip host</strong> command. This is unlike the <strong>no logging preferred</strong> command, which stops it for undefined hosts and lets it work for the
  defined ones.</p>
</blockquote>
","28940"
"How to synchronize MD5 digest between VTP Server and Client?","5791","","<p>Follow up to <a href=""https://networkengineering.stackexchange.com/questions/16/how-can-i-force-vtp-clients-to-update-their-vlan-database-from-the-vtp-server-o"">this Q&amp;A</a>.</p>

<p>According to one of the answers it should be possible to solve a MD5 digest mismatch by synchronizing username, password and domain between VTP Client and Server and subsequently executing a VLAN change on the VTP Server to align the MD5 digest on the Client.</p>

<p>However, after executing these steps and executing <code>sh vtp st</code> on both the VTP Server and the Client a discrepancy between MD5 digest between these two remains, which avoids that the VLAN database on the VTP Client is synchronized with the one of the VTP Server.</p>

<p>Once a name of a VLAN has been changed on the VTP server the MD5 digest will be changed. However, the MD5 digest on the client remains the same and the following message is shown:</p>

<p><code>*** MD5 digest checksum mismatch on trunk: Po1 ***</code></p>
","<p>After checking <a href=""https://learningnetwork.cisco.com/thread/21771"" rel=""nofollow"">this thread</a> on the Cisco Learning Network and subsequently executing some checks on both the VTP Client and Server, e.g:</p>

<pre><code>sh vtp st
sh vtp password
sh int trunk
</code></pre>

<p>it appears that the <code>domain</code> is identical and the portchannel is in trunking mode. However, there was a discrepancy between the VTP passwords for some reason. </p>

<p>After synchronizing the passwords on the VTP Client and Server by executing <code>vtp password hello</code> and changing a name of a VLAN (<code>conf t</code> &amp;&amp; <code>vl X</code> &amp;&amp; <code>name helloworld</code>) on the VTP Server, the MD5 digests became identical </p>

<pre><code>Switch#sh vtp st
VTP Version capable             : 1 to 3
VTP version running             : 1
VTP Domain Name                 : domain
VTP Pruning Mode                : Enabled
VTP Traps Generation            : Disabled
Device ID                       : X.Y.Z
Configuration last modified by X at Y Z

Feature VLAN:
--------------
VTP Operating Mode                : Client
Maximum VLANs supported locally   : 1005
Number of existing VLANs          : 6
Configuration Revision            : 6
MD5 digest                        : 0xfc 0x5e 0x03 0x8d 0x38 0xa5 0x70 0x32 
                                    0x08 0x54 0x41 0xe7 0xfe 0x70 0x10 0xb0
</code></pre>

<p>and the VLAN lists subsequently synchronized.</p>

<pre><code>Switch&gt;sh vl

VLAN Name                             Status    Ports
---- -------------------------------- --------- -------------------------------
1    default                          active    Gi0/1, Gi0/2, Gi0/3, Gi0/4
                                                Gi0/5, Gi0/6, Gi0/7, Gi0/8
                                                Gi0/9, Gi0/10, Gi0/11, Gi0/12
                                                Gi0/13, Gi0/14, Gi0/15, Gi0/16
                                                Gi0/17, Gi0/18, Gi0/19, Gi0/20
                                                Gi0/21, Gi0/22, Gi0/23, Gi0/24
                                                Gi0/25, Gi0/26, Gi0/27, Gi0/28
                                                Gi0/29, Gi0/30, Gi0/31, Gi0/32
                                                Gi0/33, Gi0/34, Gi0/35, Gi0/36
                                                Gi0/37, Gi0/38, Gi0/39, Gi0/40
                                                Gi0/41, Gi0/42, Gi0/43, Gi0/44
100  helloworld                       active
</code></pre>
","9880"
"How do hardware timestamps (hardstamps) work","5771","","<p>I am currently diving into topics like PTP (IEEE 1588) and precise timestamping for capturing network traffic. Many resources on the Internet name <strong>hardstamps</strong> as a feature of network cards, allowing them to add a timestamp to a packet before putting it into a (typically non-deterministic) queue towards the application layer.</p>

<p>What are these timestamps like? Are they measured relative to a start signal sent by the OS or absolute timestamps? Are the absolute stamps synchronized to the OS clock or to a clock managed by the NIC?</p>
","<p>The timestamping happens in hardware based on a clock in the NIC. Depending on your NIC there's either a NIC register where your timestamp will be written or some card (Intel 82580) can prepend the information to the packet buffer. For cards that write the timestamp to a register you have to read the register before it can timestamp the next packet, effectively limiting your throughput, while the 82580 can timestamp all packets.</p>

<p>In Linux, you will receive the timestamp in a data structure outside of the packet itself. Here's a bit from the <a href=""https://www.kernel.org/doc/Documentation/networking/timestamping.txt"" rel=""noreferrer"">kernel docs</a> on it:</p>

<pre><code>These timestamps are returned in a control message with cmsg_level
SOL_SOCKET, cmsg_type SCM_TIMESTAMPING, and payload of type

struct scm_timestamping {
    struct timespec ts[3];
};

The structure can return up to three timestamps. This is a legacy
feature. Only one field is non-zero at any time. Most timestamps
are passed in ts[0]. Hardware timestamps are passed in ts[2].

ts[1] used to hold hardware timestamps converted to system time.
Instead, expose the hardware clock device on the NIC directly as
a HW PTP clock source, to allow time conversion in userspace and
optionally synchronize system time with a userspace PTP stack such
as linuxptp. For the PTP clock API, see Documentation/ptp/ptp.txt.
</code></pre>

<p>Timestamp is based on NIC time. I believe you can modify the NIC clock but the more common way is to let the NIC clock be free running (guaranteeing monotonic time) and do any adjustment in user space. Adjustments could include working out the offset with system time and adjusting all received timestamps to system time. The kernel can/could (was a long time since I checked) do this for you but I believe recommended way is to do it yourself in your user space. In other applications you simply don't care about absolute time as the relative time between packets is the only important factor.</p>

<p>Two colleagues of mine wrote a SLA measurement application relying on this. You'll find the source at on <a href=""https://github.com/SLANG-foundation/SLANG/"" rel=""noreferrer"">GitHub</a>.</p>

<p>There's also <a href=""https://github.com/emmericp/MoonGen"" rel=""noreferrer"">MoonGen</a> which is a DPDK based framework with Lua scripting abilities for packet processing. They have an <a href=""http://www.net.in.tum.de/fileadmin/bibtex/publications/papers/MoonGen_IMC2015.pdf"" rel=""noreferrer"">excellent paper</a> including information on timestamping.</p>
","23589"
"How to understand ""normal burst"" and ""maximum burst"" in Cisco CAR?","5749","","<p>As I understand, Cisco IOS CAR(Committed Access Rate) is based on <em>leaky bucket algorithm</em>(idea is exactly the same as <em>token bucket algorithm</em>) and the amount of bits I configure as average rate, is the amount of ""water constantly leaking the bucket"". For example here the average input rate-limit rate is 5Mbps:</p>

<pre><code>interface FastEthernet0/0
 ip address 10.10.10.2 255.255.255.0
 rate-limit input 5000000 937500 1875000 conform-action transmit exceed-action drop
</code></pre>

<p>Now if traffic rate is below the average rate, then it is always conformed. Am I correct that ""normal burst"" determines how large the traffic bursts can be before exceed-action is applied? So in case of example above, if there has been constant traffic rate of 5Mbps(625000 bytes in the bucket), then I could send for one second 7.5Mbps(adds additional 312500 bytes to bucket) of traffic and not a single bit is dropped? And if bytes in bucket are between the normal burst and maximum burst, then bytes are dropped based on RED-like algorithm until all the new packets are dropped if maximum burst is also full?</p>
","<p>Let's calculate what we're dealing with here.  CAR is basically the older version of IOS policing, so all these concepts apply to both.</p>

<pre><code>Committed Information Rate (CIR) = 5,000,000 (5Mbps)
Burst Commit Bucket (Bc) = 937,500
Burst Excess Bucket (Be) = 1,875,000
Time Interval (Tc) = Bc / CIR = 0.1875 s = 187.5 ms
</code></pre>

<p>The rate we want to restrict flows to is 5Mbps.  The Commit Bucket is 937,500 bytes.  The Burst Bucket is 1,875,000 bytes.  And the buckets are refilled every 187.5 ms. </p>

<p>As you mentioned, IOS uses a bucket mechanism to restrict how much traffic can pass.  <em>It does not smooth the traffic to X% of interface bandwidth over an arbitrary time period!</em>  Instead, it allows full access to the bandwidth of the interface as long as you have the tokens to pay for it.</p>

<p>Also, since this is policing, RED/WRED are not in play.  RED only happens when there is a queue to manage.  <em>There is no buffering/queuing in policing, only in shaping.</em></p>

<p>Let's deal with the Commit Bucket (Bc) first.  Assume that there is no Excess Bucket (Be) for now.</p>

<p><strong>* Commit Bucket Only (Two-Color Policer) *</strong></p>

<p>This is a very strict policer that will only let you send within the CIR exactly; no bursting above.  There is only one bucket, Bc.  There are two ""colors"" for traffic, <em>conforming</em> and <em>exceeding</em>.</p>

<p><strong><em>Time = 0 ms --</em></strong> The bucket starts out full, with 937,500 bytes worth of tokens in it.  Let's say you send 7,500 bytes across the interface.  Now IOS decrements the bucket by 7,500 bytes, and the bucket now has 930,000 bytes worth of tokens in it.  The traffic sent is considered ""conforming"" and has the ""conform-action"" applied to it.</p>

<p><strong><em>Time = 187.5 ms --</em></strong> We hit the Tc now, and refill the Bc bucket.  937,500 bytes worth of tokens are added.  Any extra tokens spill out and are lost.</p>

<p><strong><em>Time = 190 ms --</em></strong> The commit bucket has 937,500 tokens in it.  We receive 2,000,000 bytes of traffic.  The first 937,500 bytes are transferred fine as the bucket has tokens for it.  The remaining traffic is considered ""exceeding"" and is treated according to the ""exceed-action"".  Remeber, there is no buffering in policing (that's called shaping) - you either transmit, remark and transmit, or drop.</p>

<p><strong><em>Time = 375 ms --</em></strong> We hit Tc again, and the Bc bucket is refilled with 937,500 tokens.</p>

<p><strong>* Commit Bucket with Excess Bucket (Three-Color Policer) *</strong> </p>

<p>You can optionally add an Excess Bucket (Be).  This allows the traffic to  exceed the Bc bucket on a temporary basis.  The overall CIR should stay the same.  This is a three ""color"" policer: <em>conforming, exceeding, and violating</em>.</p>

<p><strong><em>Time = 0 ms --</em></strong> Both buckets (Bc and Be) start out full.  Bc has 937,500 tokens, Be has 1,875,000 tokens.</p>

<p><strong><em>Time = 50 ms --</em></strong> 2,000,000 bytes of traffic arrives.  The router first decrements the Bc bucket tokens.  It reduces the Bc bucket to zero.  The 937,500 bytes of traffic covered by Bc is considered ""conforming"" and has the ""conform-action"" applied to it.  </p>

<p>That leaves 1,062,500 bytes of traffic that doesn't have tokens yet.  Now the router dips into the Be bucket, and subtracts 1,062,500 tokens to cover the rest of the traffic.  These bytes are considered ""exceeding"" and will have the ""exceed-action"" applied to it.  In your example, the traffic would be dropped, but you could potentially remark or just transmit it.</p>

<p>If you're keeping score at home, Bc now has zero tokens, Be has 812,500 tokens.</p>

<p><strong><em>Time = 75 ms --</em></strong> Now, the router receives another 1,200,000 bytes of traffic.  The Bc bucket is empty, so no help there.  The Be bucket can help, so it covers the first 812,500 bytes of traffic with its tokens, and is now empty.  This traffic is considered ""exceeding"" and will have the ""exceed-action"" applied to it.</p>

<p>Now the buckets are dry, but there are still 387,500 bytes left to deal with.  This traffic is considered ""violating"" and is always dropped with CAR (You can do other things with it using MQC and the police command with ""violate-action"").</p>

<p><strong><em>Time = 187.5 ms --</em></strong> Now we arrive at the first Tc interval, time to fill up our buckets.  A key point is that only <strong><em>Bc</em></strong> worth of tokens are refilled!  The Bc bucket is filled up first to 937,500.  The Be bucket REMAINS EMPTY.</p>

<p><strong><em>Time = 375 ms --</em></strong> It's been quiet, and we make it to the next Tc interval.  Bc worth of tokens are added to the Bc bucket.  Since the Bc bucket is already full, the excess tokens aren't lost - they're ""spilled over"" to the Be bucket instead.  Now the Bc bucket is full with 937,500 tokens and the Be bucket is partially full with 937,500 tokens.</p>

<p><strong><em>Time = 562.5 ms --</em></strong> Quiet still, and we're at the next Tc.  Bc worth of tokens are added to the Bc bucket, which is already full.  All of it spills over into the Be bucket (which already has 937,500 tokens).  The Be fills all the way up to 1,875,000 tokens.</p>

<p><strong>* Final Notes *</strong></p>

<ul>
<li><p>Your configuration isn't making use of the Be bucket.  You are
rate-limiting/policing using only the Bc bucket, which may have
unintended side effects if the policer/shaper sending data to you
isn't configured identically and isn't in sync Tc-wise.</p></li>
<li><p>CAR/rate-limit is very old and deprecated.  Consider switching to MQC
and modern QoS to implement this, as it will give you more
information and options.</p></li>
<li><p>I totally ignore serialization delay (the time it takes to transmit
data on the line) above, and I'm quite sure the math doesn't work out
in a real scenario.  But the concepts are solid regardless of the
exact numbers in use.</p></li>
</ul>

<p><strong>* MQC Example *</strong></p>

<pre><code>policy-map PM-FA0/0-IN
 class class-default
  police cir 5000000 bc 937500 be 1875000
!
interface Fa0/0
 service-policy input PM-FA0/0-IN
!
</code></pre>

<p><strong>* Sources *</strong></p>

<ul>
<li><p><a href=""http://www.cisco.com/c/en/us/support/docs/quality-of-service-qos/qos-policing/19645-policevsshape.html"" rel=""nofollow"">http://www.cisco.com/c/en/us/support/docs/quality-of-service-qos/qos-policing/19645-policevsshape.html</a></p></li>
<li><p>INE CCIE Training Material</p></li>
<li><p>CCIE #38955</p></li>
</ul>
","17628"
"Cisco can't connect to Juniper device via SSH - Invalid modulus length","5731","","<p>I'm trying to connect from a Cisco 886VA to a Juniper EX2200 via SSH. The connection fails with the following messages on the Cisco:</p>

<pre><code>*Jan 17 09:51:20.823: SSH2 CLIENT 0: Server has chosen 2056 -bit dh keys
*Jan 17 09:51:20.823: %SSH-3-INV_MOD: Invalid modulus length
</code></pre>

<p>Is there any way to make this work by changing some parameter on either the Juniper or Cisco device?</p>

<p>IOS Version: <code>15.2(4)M5</code></p>

<p>JunOS Version: <code>12.3R3.4</code></p>
","<p>This is definitely an issue with your DH key size.</p>

<p>Try this:</p>

<pre><code>cisco886va(config)#ip ssh dh min size 4096
</code></pre>
","5894"
"Auto-QOS configuration for Cisco network","5725","","<p>I have a network with Cisco switches, Cisco IP Phones and video traffic. I want to add QoS markers to my traffic but I don't want to do it manually. </p>

<p>Ideally I want to use Cisco's auto QOS features but I'm not sure where I should add the commands.</p>

<p>My IP phones are on access switches and the traffic goes back to my core switch where it is routed towards several call manager servers.</p>

<p>My understanding is to do this : </p>

<ul>
<li>Enable QoS on all switches (access, distribution &amp; core) with ""mls qos""</li>
<li>Enable auto QOS markings on interfaces connected to cisco ip phones with ""auto qos voip cisco-phone""</li>
<li>Enable auto QOS trust on network uplinks with ""auto qos voip trust""</li>
</ul>

<p>Is this right ? Is there anything else to do ? Should I put ""auto qos voip trust"" on network uplinks for both directions on traffic ? (forward and back) Will there be downtime to be aware of ?</p>

<p>Thanks
Jeremy</p>
","<p>For Cisco IP phones, you've definitely got the right configuration:</p>

<pre><code>!
mls qos
!
interface UPLINK
 ! Unconditionally trust all QoS markings
 auto qos voip trust
!
interface ACCESS
 ! Look for the Cisco Phone's CDP frames, and trust VoIP from the phone...
 auto qos voip cisco-phone
</code></pre>

<blockquote>
  <p>Should I put ""auto qos voip trust"" on network uplinks for both directions on traffic?</p>
</blockquote>

<p>Yes, <code>auto qos voip trust</code> is required on both sides of any uplink for end-to-end QoS functionality (which is what you'd want, of course).</p>

<blockquote>
  <p>Will there be downtime to be aware of?</p>
</blockquote>

<p>There is no downtime associated with QoS settings.  I have enabled qos (platform-wide, and on individual links) with no observable impact;  even on links that were heavily utilized, there was no perceivable downtime for transit traffic.</p>

<p>For more info, you can reference <a href=""http://www.cisco.com/en/US/tech/tk543/tk759/technologies_white_paper09186a00801348bc.shtml#wp39463"">Cisco's Auto QoS Whitepaper</a></p>
","5389"
"How to configure PAgP or LACP on GNS3","5707","","<p>In gns3, when i configure a router with a NM-16ESW module to use as a switch. And I can not configure PAgP or LACP on this router. It has only one mode ON, and there is no DESIRABLE or AUTO or ACTIVE or PASSIVE mode. 
Can you show me help me to do this ? 
I saw in this video: <a href=""http://gns3vault.com/Switching/pagp-lacp-etherchannel.html"" rel=""nofollow"">http://gns3vault.com/Switching/pagp-lacp-etherchannel.html</a>
he did it very easy with no problem.
Thanks you.</p>
","<p>You will need real switches since there is no emulator for their ASICs. GNS3 can emulate only routers (and run their IOS images). You can try Cisco Packet Tracer for switches, but keep in mind that it is a simulator and it does not have full set of features you will find on real equipment.</p>
","3327"
"What factors drive L2 vs L3 in the access layer?","5695","","<p>When designing an access layer, best practices today seem to indicate going toward a L3 design.  I know the answers may be different depending on whether or not we talking about a DC design or Enterprise Campus design.  <strong>Please describe when you would choose L2 over L3 in the access layer and the differences in design with DC vs. campus.</strong></p>

<p>I know L2 adjacency requirements between servers such as clusters (Windows, VMWare, etc) would push for L2 in the DC access.  Are there other factors too?  (And if L2 is required, is it best practice is carry that L2 traffic up to the Aggregation layer and back down or just carry that L2 across directly connected trunks between access switches (i.e., build in looped squares instead of triangles).  Do you keep L2 adjancies limited to just a pair of access switches so as to not increased the broadcast/collision/STP domains?</p>

<p>In the Enterprise campus, assuming no L2 adjacency requirements, are there any cases that would indicate a design other than L3 in the access layer?</p>
","<p>L2 Access is often needed when autonomous wireless access points are deployed across multiple switches, thus allowing users to roam from AP to AP without having to get new addresses.  Current controller based wireless solutions tunnel the user traffic to a central drop-off point, so wireless APs can be connected in any subnet so long as they can communicate with the controller.</p>

<p>L3 in the access layer works well when there's no need for devices connected to multiple switches to access the same subnet/broadcast domain.  It eliminates the need for loop prevention (STP) and VLAN trunking configuration (such as Cisco VTP or manual VLAN configuration).</p>

<p>L3 access layers do add their own requirements for protocols and configuration.  Unless you want to do static routing you have to take on configuration of a dynamic routing protocol such as such as OSPF (standard) or EIGRP (Cisco).</p>

<p>In L3 access networks with dynamic routing it is also a good idea to summarize or tune advertised routes between layers of the network.  For example, you can advertise only a default route from the Aggregation layer to the Access layer to limit the number of routes a simple access switch must learn and maintain.  Turning off auto summarization on the Access switches can also help prevent a misconfiguration from causing one switch to advertise routes it should not. Auto summarization is disabled by default on many current software revisions, but is worth verifying for your switch and software version.</p>

<p>Finally, access layer diameter is a factor in choosing L2 or L3.  If you want to daisy-chain one access switch off another (where one switch does not connect directly to aggregation) you may need expanded features to run dynamic routing.  In Cisco switches you need a more advanced IOS license to run EIGRP in non-Stub mode, allowing it to advertise routes it learned from another switch to the rest of the network.</p>
","1434"
"When switchport port-security violation protect( or restrict) is configured , how many times can the security policy be breached?","5649","","<p>The switchport port-security violation shutdown , shuts the port (err-disabled) when the policy is violated. But, for restrict and protect modes there isn't a mention of shutting a port down. So, can the policy be violated unlimited number of times when a switch port is configured with :
switchport port-security violation restrict(or protect) </p>
","<p>Yes, the restrict and protect modes can be violated any number of times without shutting down the port since they are not designed to do that; they will drop packets with unknown source addresses:</p>

<p>See <a href=""https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=2&amp;ved=0ahUKEwj8ib7YzZrKAhWISiYKHWbzDWoQFggkMAE&amp;url=http%3A%2F%2Fwww.cisco.com%2Fc%2Fen%2Fus%2Ftd%2Fdocs%2Fswitches%2Flan%2Fcatalyst6500%2Fios%2F12-2SX%2Fconfiguration%2Fguide%2Fbook%2Fport_sec.pdf&amp;usg=AFQjCNGniMS0_1eavbameyhIPccDtQG7Dw&amp;sig2=bS8h3Aodj-0DGoWqBqzOAQ&amp;cad=rja"" rel=""nofollow"">Configuring the Port Security Violation Mode on a Port</a> on page 62-6:</p>

<blockquote>
  <ul>
  <li><strong>protect</strong>—Drops packets with unknown source addresses until you remove a sufficient number of secure MAC addresses to drop below the 
  maximum value.</li>
  <li><strong>restrict</strong>—Drops packets with unknown source addresses until you remove a sufficient number of secure MAC addresses to drop below the 
  maximum value and causes the SecurityViolation counter to increment.</li>
  <li><strong>shutdown</strong>—Puts the interface into the error-disabled state immediately and sends an SNMP trap notification.</li>
  </ul>
</blockquote>
","25768"
"In IPsec VPN, how is the pre-shared key encrypted?","5633","","<p>I was doing IPsec VPN on ASA 8.0, and I understand a little about that. The initiator starts by sending its ISAKMP policy to the responder, and the responder sends back the matched policy. After that, the Diffie-Hellman key gets exchange, and then both send the pre-shared key to the other for authentication.</p>

<p>Now we have two keys:</p>

<ul>
<li>One will be generated by AES encryption</li>
<li>One will be generated by the Diffie-Hellman group</li>
</ul>

<p>Which key is used to encrypt the pre-shared key?</p>
","<p>You've asked a great question.  The question seems very simple, but in fact the answer is somewhat more complex.  I'll do my best to answer it in a succinct manner.  Also, since you mentioned ISAKMP, I am going to assume you are interested in IKEv1.  Things change a little for IKEv2 (well, a lot), but I did want to mention the answer below only correlates to IKEv1.</p>

<p>Phase 1 can be accomplished in two different mods:  Main Mode and Aggressive Mode.  In either mode, the first message is sent by the Initiator, and the second message is sent by the Responder.  Both of these messages include what is known in the cryptography world as a <strong>Nonce</strong>.  A Nonce is simply a randomly generated number to use in key generation.  <em>(the term Nonce comes from _N_umber used _Once_)</em>.  So, after message 1 and message 2, both sides know each other's Nonces.  </p>

<p>The Nonce's are combined with the Pre-Shared-Key to create a Seed value for generating secret keys.  The relative part of the <a href=""http://www.faqs.org/rfcs/rfc2409.html"">IKE RFC</a> is here:</p>

<blockquote>
<pre><code> For pre-shared keys:       SKEYID = prf(pre-shared-key, Ni_b | Nr_b)
</code></pre>
</blockquote>

<p>SKEYID is the Seed value that will later be used to generate additional secret keys.  The Pre-Shared-Key and both Nonce values (Ni_b is the Initiator's Nonce, and Nr_B is the Responder's Nonce) is combined by using a PRF, or Psuedo Random Function.  A PRF is like a hashing algorithm, except that the result can be as many bits as you need.  </p>

<p>Now, if you were initially doing Main Mode, messages 3 and 4 share the Initiator's and Responder's (respectively) Diffie-Hellman public keys.  They both use the these values to generate the Diffie-Hellman <strong>shared secret</strong>.  If you were doing Aggressive mode, these DH Public values are also included in Message 1 and Message 2 (along with the Nonces).</p>

<p>The Seed value is then combined with the DH Shared Secret (and a few other values) to create three <strong>Session Keys</strong>:  a Derevative key, an Authentication key, and an Encryption key.  The RFC states it as such:</p>

<blockquote>
  <p>The result of either Main Mode or Aggressive Mode is three groups of
    authenticated keying material:</p>

<pre><code> SKEYID_d = prf(SKEYID, g^xy | CKY-I | CKY-R | 0)
 SKEYID_a = prf(SKEYID, SKEYID_d | g^xy | CKY-I | CKY-R | 1)
 SKEYID_e = prf(SKEYID, SKEYID_a | g^xy | CKY-I | CKY-R | 2)
</code></pre>
</blockquote>

<p>SKEYID_d, _a, and _e are the three Session keys mentioned above.  <code>SKEYID</code> is the Seed value.  <code>g^xy</code> is the DH Shared Secret. <code>CKY-I</code> and <code>CKI-R</code> are the Initiator and Responder Cookies, these are just additional randomly generated values that are used later to identify this particular ISAKMP exchange and security association.  <code>0 1 2</code> are the literal numbers 0, 1, and 2.  The Pipe symbol <code>|</code> represents concatenation.</p>

<p>In any case, all these values are combined together using a PRF which creates three Session keys:</p>

<ul>
<li><strong>Derivative Key</strong> -- this key is <em>not</em> used by ISAKMP, and is instead handed to IPsec so that IPsec can create its own Secret Keys</li>
<li><strong>Authentication Key</strong> -- this key is used by ISAKMP in its HMAC (aka, Hashing algorithm secured with a Secret key)</li>
<li><strong>Encryption Key</strong> -- this key is used by ISAKMP to symmetrically encrypt anything ISAKMP wants to securely to the other peer.  So if the chosen Encryption algorithm for Phase1 is AES, AES will <em>use this key</em> to symmetrically encrypt data -- AES will not generate its own keying material.  </li>
</ul>

<p>The Authentication Key and Encryption Key are used to secure/encrypt the ensuing Phase2 negotiation.  In Main Mode, messages 5 and 6 of Phase1 are also protected by these keys.  Furthermore, any future ISAKMP informational exchanges (DPD, Rekey events, Delete messages, etc) are also protected by these two keys.</p>

<p>The Derivative Key is handed to IPsec, and IPsec generates its own Keying material from this Key.  If you recall, IPsec does not innately include a Key Exchange mechanism, so the only way for it to acquire secret keys is to either set them manually (which is archaic, and never really done anymore), OR to depend on an external service to provide the keying material, like ISAKMP.</p>

<p>The RFC says it like so:</p>

<blockquote>
  <p>SKEYID_e is the keying material used by the ISAKMP SA to protect
  the confidentiality of its messages.</p>
  
  <p>SKEYID_a is the keying material used by the ISAKMP SA to
  authenticate its messages.</p>
  
  <p>SKEYID_d is the keying material used to derive keys for non-ISAKMP
  security associations.</p>
</blockquote>

<p>With all that said, we can refer back to your question:  What key is used to secure the Pre-Shared-Key?</p>

<p>In Main Mode, the Pre-Shared-Key (PSK) is verified in Messages 5 and 6.  Message 5 and 6 are Protected by the Session keys ISAKMP generates, described above.</p>

<p>In Aggressive Mode, none of the messages in the negotiation are encrypted.  And the PSK is verified in Messages 2 and 3.  Notice, I said in both cases the PSK is <em>verified</em>, and I never said the PSK is <em>exchanged</em>.  Obviously, if nothing in Aggressive mode is Encrypted, and you simply sent the Pre-Shared-Key across the wire unencrypted, there would be a huge gaping security vulnerability.</p>

<p>Lucky for us, the writers of ISAKMP already thought of that.  And as a result, they created a special method for verifying that each party has the correct PSK, without actually sharing it across the wire.  There are two items that are use to validate to each Peer that they both have the same PSK:  the <strong>Identity Method</strong> and the <strong>Identity Hash</strong>.</p>

<p>VPN Peers can choose to identify themselves by various methods; most commonly, peers will simply use their source IP address.  But they have the option to use a FQDN or Hostname.  Each of these, along with the correlating value for the chosen method, are what make up the Identity Method.  So for example, if I had the IP 5.5.5.5, and I wanted to use my IP address to identify myself, my <strong>ID Method</strong> would effectively be <strong>[IP Address, 5.5.5.5]</strong>.  <em>(Note:  BOTH values make up the entire ID Method)</em></p>

<p>The ID Method is then combined (using a PRF) with the Seed value we discussed earlier (SKEYID), and a few other values, to create the <strong>Identity Hash</strong>.   Recall, that what went into creating SKEYID in the first place was the Pre-Shared-Key.</p>

<p>The ID Method and ID Hash are then sent across the wire, and the other party attempts to re-create the ID Hash using the same formula.  If the receiver is able to re-create the same ID Hash, it proves to the receiver that the sender must have had the correct pre-shared-key.</p>

<p>This is described in the RFC here:</p>

<blockquote>
  <p>To authenticate either exchange the initiator of the protocol
    generates HASH_I and the responder generates HASH_R where:</p>

<pre><code>HASH_I = prf(SKEYID, g^xi | g^xr | CKY-I | CKY-R | SAi_b | IDii_b )
HASH_R = prf(SKEYID, g^xr | g^xi | CKY-R | CKY-I | SAi_b | IDir_b )
</code></pre>
</blockquote>

<p>IDii and IDir are the ID Method.  And HASH_I and HASH_R are the Initiator and Responder hash's.  Both of these are shared in Phase1.  From the RFC:</p>

<blockquote>
  <p>When doing a pre-shared key authentication, Main Mode is defined as
    follows:</p>

<pre><code>         Initiator                        Responder
        ----------                       -----------
         HDR, SA             --&gt;
                             &lt;--    HDR, SA
         HDR, KE, Ni         --&gt;
                             &lt;--    HDR, KE, Nr
         HDR*, IDii, HASH_I  --&gt;
                             &lt;--    HDR*, IDir, HASH_R
</code></pre>
  
  <p>Aggressive mode with a pre-shared key is described as follows:</p>

<pre><code>       Initiator                        Responder
      -----------                      -----------
       HDR, SA, KE, Ni, IDii --&gt;
                             &lt;--    HDR, SA, KE, Nr, IDir, HASH_R
       HDR, HASH_I           --&gt;
</code></pre>
</blockquote>

<p>And now, we can finally answer your question fully:</p>

<p>The Pre-Shared-Key is combined using a PRF with Nonces, and a bunch of other values known to anyone else in the negotiation.  The result is a value that can only be mutually attained by two parties if both parties started with the same values -- aka, the same pre-shared-key.  The resulting value is what is shared on the wire, with allows two parties to verify they have matching Pre-Shared-Keys without actually exposing any information about the Pre-Shared-Key itself.</p>

<p>Main Mode goes a step more secure by also encrypting the exchange of the ""resulting value"" described above, making it even more difficult to extract any useful information about what the Pre-Shared-Key was.</p>

<p><BR>
<em>(it seems I failed miserably at answering this succinctly)</em></p>
","13473"
"How do you convince management that 3560/3750s are a bad idea in your DC?","5622","","<p>3560/3750s have small buffers and make good wiring closet switches. However I very often see these switches sitting in DCs. Lots of folks tend to use them as they are generally 1Gb and L3 capable.</p>

<p>Is there a way to prove just how bad they are in DC deployments? I quite often hear people saying they removed their 3750s as soon as they could, but I've yet to hear an actual failure scenario that could be used to let management know to get them out.</p>
","<p>FWIW I've had experience with 3750's (3750G, and then later 3750E/3560E) at scale in a TOR setup; initially with L2 port-channels/GLBP (variants of 2x1G and 2x2G and the rare 2x4G for db racks) and then with L3 to the TOR (went with this for 3750E/3560E and 10G to the core). I'm talking thousands of them. We only saw issues with buffers for the <strong>most</strong> bandwidth intensive services, and at that point we were looking at 10G to the host anyway (and dense pizza boxes with 24-48 SFP+'s).</p>

<p>Whether or not you're going to be able to prove anything to management is really going to depend on the application and you doing your homework on what the requirements of your design and the application are, and knowing <em>exactly</em> what the specifications are of the application, as well as the expected growth velocity of it. Set up a design review with your management chain as well as the primary owners/customers of the network.</p>

<p>Management wants to see <strong>data</strong>, and if you don't have the resources to fully test the box (come up with a test plan, connect it up to some traffic generation hardware, fully scope it out and stress test it to the design spec, etc) this is going to be hard to do. They're not going to be impressed with anecdotal evidence, and finding this kind of hard data may prove difficult, since I'm sure that folks publishing this kind of thing would violate all kinds of NDA's.</p>

<p>Everyone else that's posted an answer to this has outlined the 3750 platform's ""problem areas"" pretty nicely: stacking and weird failure modes inherent to it, buffer sizes, etc. There's also <a href=""https://networkengineering.stackexchange.com/questions/1025/3750g-switch-buffer-monitoring"">this question</a> that outlines the issues with gathering SNMP statistics on output queue drops - the buffers are shared across the ASICs, so any stats you get with this via SNMP are going to be the same for specific port ranges (this could be one sticking point you could bring up with your management chain).</p>

<p>To summarize, I'd say that the 3750/3560 would be ""fine"" for most deployments, even at somewhat large scales. Avoid stacking them if you can, but I'd say that it's not <strong>too</strong> horrible to do this in very small and manageable quantities.</p>
","1184"
"what is the difference between a CSU/DSU and a modem?","5612","","<p>I'm so confused, both do the same function, converting the analog to digital, but what's the difference?</p>
","<blockquote>
  <p>...both does the same functions that converts the analog to digital...</p>
</blockquote>

<p>That would be incorrect.</p>

<p>A modem will modulate (the <code>mo</code> in modem) an analog carrier to encode digital information on it, and demodulate (the <code>dem</code> in modem) an analog carrier to convert the encoded information back to digital information.</p>

<p>A CSU/DSU connects two different types of digital signals. A CSU/DSU is actually two different devices, the CSU and the DSU, which may be in separate boxes. In the old days, These were separate pieces of equipment. Today, they are almost always in a single box (e.g., a DSL ""modem""), or a single interface module for the DTE (e.g. a T1/E1 WIC for a Cisco ISR). The DSU (Data Service Unit) is what connects to your DTE (Data Terminal Equipment), and converts your DTE serial communications to frames which the CSU can understand, and vice versa. The CSU (Channel Service Unit) is what connects to the communication circuit, and places the frames from the DSU onto the communications circuit, and vice versa.</p>
","29885"
"Simple Question: Does High Bandwidth usage affect Speedtest.net Results?","5604","","<p>In an office building with 20-some employees, our internet service sometimes drops to about .3 Mbits/sec from 5 Mbits/sec. I use speedtest.net to test the speed. When the speed drops, how can I tell the source of the issue?  Namely, are my speedtest results affected by employee streaming/downloading/etc, as opposed to an ISP problem?  Would I need a virtually quiet network to accurately test speed?</p>
","<p>To answer your first question, yes high bandwidth use will affect speedtest.net results. And yes, you would be best to wait until a time of low traffic to get a better/more accurate reading of your maximum possible speed.</p>

<p>Another metric of maximum possible speed would be (assuming you are connecting via ADSL) the line sync speed as reported by your modem. <em>Although it may not be as accurate, this would allow you to find out the maximum without having to wait until low bandwidth periods.</em></p>

<p>In terms of determining the source of the internet traffic, you will need to use some mechanism to examine the traffic going between your LAN and the internet. There are a number of ways you could do this, depending on what you have available:</p>

<ul>
<li><p>You could issue ""show ip flow top-talkers"" from your router, if it is a Cisco IOS router and you have Netflow configured properly. This is probably the easiest way to determine who is using the most traffic, and where it's going.</p></li>
<li><p>You could examine the NAT translations table on your router (assuming you use NAT), to show you which internal IPs have the most translations. This would give you a <em>rough</em> idea as to where your bandwidth is going. But it's hardly the best indicator.</p></li>
<li><p>You could setup a mirror port on your LAN switch, to mirror traffic to/from the router, and then use a packet capture utility such as Wirekshark to analyse the traffic.</p></li>
<li><p>You could setup a PC as a bridge to sit between your router and your LAN, with internet traffic passing through it, allowing you to again run a packet capture utility and analyse it to find the culprit(s). <strong>NOTE: In this case, you risk slowing down your internet speed while you do the capture. This would be best left until after-hours if done.</strong></p></li>
</ul>

<h2>Cisco 'Top Talkers' Example Config</h2>

<pre><code>! Configure top-talkers
ip flow-top-talkers
 top 100
 sort-by bytes

! Configure NetFlow on the appropriate interface on the router
interface Vlan1
 ip flow ingress
 ip flow egress
</code></pre>
","3004"
"IPv4 Address Space Planning Best Practices","5585","","<p>A recent question from Craig Constantine pertained to IPv6, but many people are not on the leading edge with IPv6 yet and are still responsible for new or improved IPv4 deployments.</p>

<p><strong>I would like to validate my own enterprise IPv4 address space planning against any public documents or guidance given directly here.</strong>  Addressing has some unique needs between the DC and Campus that would ideally be considered.  </p>

<p><strong>I'm specifically looking to see what best practices exist for planning out <em>private</em> (RFC1918) IP space assignments for regions, cities, campus, buildings, floors, uplinks, WAN links, loopbacks, etc.</strong>  Wired vs wireless.  Internal networks vs. guest networks.  *I know this on its own can be a bit of an open-ended question, so I'm looking for specific references or examples to proven and well-thought out plans in a similar way as to the IPv6 answers.  Suggested CIDR blocks would be helpful as the space gets allocated.</p>

<p>Aggregation for routing, of course, is desired, and so is the ability to have simplified ACLs.  There's a trade-off in ACLs on with the desire to aggregate all employee subnets, for example, whether wired or wireless vs aggregating all wireless users regardless if they are employees, contractors, or guests.</p>
","<p>Being in a semi-small company, we broke down our private network somewhat liberally as so:</p>

<p>/24 per Vlan
/16 per location</p>

<p>Vlans are spread out, skipping 10 /24s per. Vlan number matches the third octet. Locations are sequential, starting 10 /16s in.</p>

<p>i.e.</p>

<ul>
<li><p>10.10.1.0/24 - Location A, Management Vlan 1</p></li>
<li><p>10.10.11.0/24 - Location A, Wireless Vlan 11</p></li>
<li><p>10.11.11.0/24 - Location B, Wireless Vlan 11</p></li>
<li><p>10.11.81.0/24 - Location B, SAN Vlan 81</p></li>
<li><p>10.11.101.0/24 - Location B, Wired Office Vlan 101</p></li>
</ul>

<p>Vlan examples:</p>

<ul>
<li><p>1 - management</p></li>
<li><p>2 - management for wireless</p></li>
<li><p>11 - wireless access</p></li>
<li><p>21 - guests</p></li>
<li><p>31 - mobile devices</p></li>
<li><p>41 - factory equipment</p></li>
<li><p>51 - SAN</p></li>
<li><p>61 - VoIP</p></li>
<li><p>71 - Wired access</p></li>
</ul>

<p>And so on.</p>

<p>The benefits we saw with this are:</p>

<ul>
<li><p>Easy to refer to an entire location via /16. We use this quite often for VPN ACLs.</p></li>
<li><p>Easy to group device types together for web filtering.</p></li>
<li><p>Any Vlan within the next 10 /24s belongs to the same type as the previous root. </p>

<ul>
<li><p>So for example, factory equipment... Vlan 31, for certain vendors who have 24/7 remote access, we gave them their own Vlan, 32 or 33 or 34, up to 40. Their VPN access limits them to the equipment that they support without getting granular on IPs/ACEs. If the manufacturing team needs to drop more equipment in, we don't have to update the VPN ACLs. This also includes access ACLs/ACEs between Vlans.</p></li>
<li><p>Another example: SAN Vlans, we use two of them at minimum for redundancy. So they are always 81 and 82.</p></li>
<li><p>Last example: Wireless management is broken out to its own Vlan, 2. We do this because we have enough APs to need a WLAN controller but no budget for controllers. This Vlan uses tftp and dhcp options to auto configure and boot the APs from a central config repo and we don't want other equipment that can auto boot to pull the wireless configs.</p></li>
</ul></li>
</ul>

<p>This setup gives us an easy way to look at an IP and know the location and type of equipment it belongs to. This means less ACLs/ACEs in configuration files for us, especially on limited VPN users. We also have breathing room for expansion in the event we run out of IPs in a Vlan or because we need to further segregate traffic. And since we're a small company, we haven't broken into three digit location numbering yet. Plenty of growth room.</p>
","1526"
"why STUN doesn't work with symmetric NAT?","5584","","<p>I read this line from <a href=""http://en.wikipedia.org/wiki/STUN#Limitations"" rel=""nofollow"">wikipedia</a>.</p>

<blockquote>
  <p>""<strong><em>STUN does work with three types of NAT: full cone NAT, restricted
  cone NAT, and port restricted cone NAT</strong>. In the cases of restricted
  cone or port restricted cone NATs, the client must send out a packet
  to the endpoint before the NAT will allow packets from the endpoint
  through to the client. <strong>STUN does not work with symmetric NAT</em></strong>""</p>
</blockquote>

<p>Can anyone explain why?</p>
","<p>Because STUN(external server), cant know which port will be given to the client by NAT-device. In symmetric NAT, client gets unique port(ip:port in pool situation) on each connection</p>
","7803"
"Can I truly multicast over WIFI?","5578","","<p>Am streaming UDP over wifi (5ghz) - approx 1.5k/packet... trying to stream to ~10 devices simultaneously, with extremely low latency..</p>

<p>As I understand Wifi, it can never true multicast, as each device holds a '1:1"" relationship with the AP, and then receives the same packet... then the next device connects and gets the same packet.</p>

<ol>
<li><p>there are multiple types of router/APs -  ""3x3"" and ""4x4"", some with MIMO, etc. what should I use as criterion for choice of AP?</p></li>
<li><p>can I TRULY multicast over wifi to iOS devices? Is my theory correct? </p></li>
<li><p>is there a way to multicast instead of treating each packet/client as a unicast?</p></li>
</ol>
","<p>Lets test this out then. If we send multicast packets to multiple devices connected to a WiFi access point at a constant rate, then the access point should report the same amount of traffic. </p>

<p>To run this test, I'm sending packets from a wired PC to an an android tablet and a raspberry pi. Don't have any iOS devices. The network testing tool iperf can easily be used to send and receive these packets with the following settings:</p>

<p>Server (Devices on WiFI): iperf -s -u -B 230.5.5.82</p>

<p>Client (Wired PC): iperf -u -c 230.5.5.82 -t 60 -b 1M</p>

<p>With these settings we're sending multicast packets at 1Mbps for a minute. Running this test and looking at the wireless traffic on the access point shows it is consistently about 1Mbps so it must be doing true multicast. The other notable thing from the results is that the packet loss is really bad at well over 50%. This is likely because multicast packets are getting sent at the lowest possible speed so lets force the access point to only run in the fastest speed. I'm using a WRT54GL running dd-wrt where the setting is called ""Transmission Fixed Rate"". Running the same tests again after setting this to the fastest speed gives a much more acceptable packet loss of less than 5%.</p>

<p>To actually answer the questions:</p>

<ol>
<li><p>Get the fastest access point that allows you to fix the transmission rate and that supports multicast. There are definitely access points that do automatically convert multicast packets to unicast. For the speed issue, it isn't enough to just use a wide 5GHz channel since there are a number of different speeds that clients can actually communicate at.</p></li>
<li><p>Can't imagine things would work differently on iOS devices since the main determining factor would be the access point.</p></li>
<li><p>See 1 as it depends on the access point.</p></li>
</ol>

<p>Edit: After testing things out more and on some ac APs, it turns out the important thing for mulitcast is being able to set the available rates. Multicast still uses g speeds so the available physical rates are 6, 9, 12, 18, 24, 36, 48 and 54Mbps. Most APs are going to default to the slower speeds so being able to disable them to force it to use the higher rates will give a huge speed up. Being able to set this is probably the most important criterion for a multicast AP. As an example, in modern versions of DD-WRT, this can be set using the ""wl rateset"" command on the command line. It sure is well hidden and most firmware doesn't allow this to be set.</p>
","39204"
"Difference between Half duplex and Full duplex","5575","","<p>What is the difference between Half duplex and Full duplex in Transmission mode?</p>
","<p>Half duplex can not send and receive at the same time. It also has algorithms to detect and handle collisions (CSMA-CD). Think of it like a walkie talkie or a CB radio, only on a network.</p>

<p>Full duplex can send and receive at the same time. Think of it as a telephone.</p>

<p>One issue that can arise is sometimes you will see a 100 Mbps half duplex connection which should almost never happen. Since the 100 Mbps connection will most likely not be detecting collisions (it expects to be full duplex), it can be very very slow. </p>

<p>This normally happens when one side is hard set to 100/full and the other side is set to autonegotiate. The side that is set at auto will not be able to sense what the duplex is (because the other side is hard set) and use half duplex.</p>

<p>So, while you will see 10/half quite often on older equipment, be very very suspect if you see 100/half because you are probably looking at a duplex mismatch.</p>
","30917"
"Why would a WiFi extender use the same channel as the primary AP?","5575","","<p>I'm trying to set up a simple ""wall wart"" WiFi extender, a DLink DAP-1520. The setup is straight forward enough, but there seems to be no option for choosing a channel/frequency, so the extender will compete for bandwidth with the main AP. Is this normal? I would expect it to <em>avoid</em> the frequency used by the main AP. Am I missing something?</p>

<p>For context, I have been trying to learn a bit about extending WiFi networks (my expertise starts above TCP, I'm a bit lost when it comes to the lower layers). As far as I understand, the DAP-1520 is not a repeater. It's an AP with a second WiFi device that it uses to connect to the main AP. At least, that's what I gather from the fact that the configuration wants me to specify an SSID and password for the back-haul as well as for the extender itself. And they suggest to pick a different SSID. (Edit: the extender supports 2.4 OR 5 GHz for the back-haul, and dual 2.4 AND 5GHz for the use by clients). </p>

<p>Using the same frequency in this arrangement doesn't make sense top me. So I have a few questions:</p>

<ul>
<li>Does a repeater necessarily re-transmit on the same frequency? Why would it not be possible to re-transmit on a different frequency?</li>
<li>Does a repeater need a WiFi password? </li>
<li>When setting up multiple APs, should the all operate on different frequencies? Especially if they use WiFi for the back-haul? Why would an extender be hard coded to operate on the same frequency?</li>
<li>When setting up multiple APs, should they all share the same SSID? If not, why not? Why would the instructions for the DAP-1520 suggest using a different SSID?</li>
</ul>

<p>I have read <a href=""https://networkengineering.stackexchange.com/questions/13216/how-does-a-wifi-range-extender-work"">How does a WiFi range extender work?</a>, but it doesn't really help with my confusion...</p>
","<p>Simple, it only has one radio. One radio === one channel. If it has two (or more) radios, then it can use one for the mesh, and the others for clients.</p>

<p>If your WLAN employs security, then every device on the WLAN needs the correct settings (i.e. password) to connect.</p>

<hr>

<p>Note: Dual-band does not mean ""dual radio"". And it only has two internal antenna.</p>
","26164"
"SonicWall : Blocking Access Between Different Subnets or Interfaces","5555","","<p>I have two interfaces on NSA 220 configured as follows</p>

<p><strong>Real interface X2</strong> </p>

<p>192.168.1.1/24</p>

<p>LAN Zone</p>

<p><strong>Virtual interface X2:V1</strong></p>

<p>192.168.2.1/24</p>

<p>VLAN ID 100</p>

<p>LAN Zone</p>

<p>In this configuration computers in any of the subnets above can successfully reach each others, what I need to do is to block traffic between these two subnets? </p>

<p>How do I do this?</p>
","<p>By default the LAN Zone has <strong>Interface Trust</strong> enabled, which means all interfaces within the same Zone trust each other (pass traffic). Go to <strong>Network</strong>, <strong>Zones</strong>, and <em>Edit the Zone</em> in question (LAN) and remove the checkmark from <strong>Allow Interface Trust</strong>. This will remove the auto-added LAN&lt;->LAN Allow ANY/ANY/ANY rule.</p>

<p>Alternatively if these are NOT really both part of the same Zone (security context) then either change one of the interfaces <em>to a different Zone</em> (eg. DMZ) or create a new Zone. By default traffic between Zones is only allowed from ""more trusted"" to ""less trusted"" (but not the other way. Eg. from LAN to DMZ but not DMZ to LAN).</p>
","19102"
"Weather map and monitoring for network usage","5554","","<p>What tools are able to provide an almost real time weather map of usage and average traffic per timeframe going over the different links?</p>

<p>What are some ways or solutions to actively monitor my network and provide alerts on heavy network usage over a prolonged period? </p>


","<p>There are a few examples that can do this.</p>

<p><a href=""http://www.cacti.net/"">Cacti</a> is one. It has a weather-map plugin that can be leveraged to produce output such as the following</p>

<p><a href=""http://iccn.illinois.edu/status/weather-maps/"">GigaPop Illinois</a> </p>

<p><a href=""https://stats.net.wisc.edu/"">Wisconsin University</a></p>

<p>These are examples of what the weather map plugin can do. When configured correctly you can see minute, hourly, daily, weekly and monthly traffic stats.</p>

<p>You can download Cacti from the website listed above, <a href=""http://www.network-weathermap.com/"">weather-map here</a> or a nice script hosted by Brent Salisbury <a href=""http://networkstatic.net/cacti-network-management-installation-tutorial/"">here</a>.</p>

<p>It is worth reading up on Cacti as there is a lot of features and devices that it can look after. Email alerts based on thresholds, events, lack of information and more can be delivered. This can be utilized via SNMP.</p>
","49"
"upgrade RAM on a Cisco ASA 5520","5553","","<p>I understand the risks of using third party ram but paying for the Cisco branded memory modules and CF cards on an old ASA which is no longer covered but Smartnet is ludicrous. </p>

<p>There are plenty of third parties who claim they sell compatible RAM. Does anyone have any experience as to what memory the ASA 5520 or any of the 55x0 series is compatible with?</p>

<ul>
<li>speed (PC-xxxx or DDR-xxxx)</li>
<li>type (regular, ECC, buffered..etc)</li>
<li>sizes: (512, 1Gb, 2Gb DIMMS)</li>
</ul>
","<p>Assuming it's a real 5520 and not a fake that's actually a converted 5510 (yep, a bunch of those were floating around - you'll know it by the fact it's only got a single RAM slot) you'll want PC3200 with CAS latency (CL) of 3 running at 400MT/s, unbuffered, ECC.</p>

<p>Not sure if the ASAs are also picky about the chip arrangement too, so if you want to play it super safe, make sure the RAM you buy has the memory spread across 8 chips.</p>
","1585"
"TCP Handshake fails on Cisco ASA","5540","","<p>I am using a Traffic Generator for setting up a TCP connection that should pass a Cisco ASA firewall.</p>

<p>My topology looks like this: </p>

<pre><code>                     +------------------+                      
                     |  CISCO ASA       |                      
+------------+       |                  |                      
|  Client    +-------+Outside           |                      
|  10.1.202.1|       |10.1.202.254      |                      
|            |       |                  |        +------------+
+------------+       |            Inside|        |Server      |
                     |      10.1.102.254+--------+10.1.102.19 |
                     |                  |        |            |
                     +------------------+        +------------+
</code></pre>

<p>The connection should be established from one host in the external network (10.1.202.1/24) to a server in the internal network (10.1.102.19/24).</p>

<p>I see in Wireshark that the <code>SYN</code> passes the firewall (10.1.(1/2)02.254), the SYN-ACK does not pass and is dropped (see captures: <a href=""https://www.cloudshark.org/captures/7ca7c51b6456"" rel=""nofollow"">inside-interface</a> and the <a href=""https://www.cloudshark.org/captures/0b9a65f1db9f"" rel=""nofollow"">outside-interface</a>).</p>

<p>From <code>show asp drop</code> I am informed that frames are dropped due to the following reason:</p>

<pre><code>TCP failed 3 way handshake (tcp-3whs-failed)
</code></pre>

<p>I am not using ARP, but use the MAC address of the firewall interface, which is the default gateway.</p>

<p>I create the <code>SYN</code>, <code>SYN-ACK</code> and <code>ACK</code> like the following:</p>

<p><strong>SYN:</strong> (Client (outside) to server (inside))</p>

<pre><code>**Ethernet**
Destination MAC: &lt;Mac Address of the Firewall-Interface&gt;
Source MAC: &lt;Mac Address of the Sending Device-Interface&gt;

**IP**
Source IP: 10.1.202.1
Destination IP: 10.1.102.19
Default Gateway: 10.1.202.254

**TCP**
Source Port: 9000
Destination Port: 8000
Sequence number: 0
Acknowledgement number: 0
Synchronize: 1
Acknowledgement: 0
</code></pre>

<p><strong>SYN-ACK:</strong> (Server (inside) to client (outside)) <strong>(this does not pass the firewall)</strong></p>

<pre><code>**Ethernet**
Destination MAC: &lt;Mac Address of the Firewall-Interface&gt;
Source MAC: &lt;Mac Address of the Sending Device-Interface&gt;

**IP**
Source IP: 10.1.102.19
Destination IP: 10.1.202.1
Default Gateway: 10.1.102.254

**TCP**
Source Port: 8000
Destination Port: 9000
Sequence number: 0
Acknowledgement number: 1
Synchronize: 1
Acknowledgement: 1
</code></pre>

<p><strong>ACK:</strong> (Client (outside) to server (inside))</p>

<pre><code>**Ethernet**
Destination MAC: &lt;Mac Address of the Firewall-Interface&gt;
Source MAC: &lt;Mac Address of the Sending Device-Interface&gt;

**IP**
Source IP: 10.1.202.1
Destination IP: 10.1.102.19
Default Gateway: 10.1.202.254

**TCP**
Source Port: 9000
Destination Port: 8000
Sequence number: 1
Acknowledgement number: 1
Synchronize: 0
Acknowledgement: 1
</code></pre>

<p>Furthermore, my topology is like following:</p>

<p>The traffic generator client (outside network) is connected to a switch on which a VLAN is added. The switch is connected to the outside firewall interface.
On the inside network, traffic generator is connected to the switch where VLAN tags are added and the switch is connected to the inside interface of the firewall.</p>

<p>Can anyone tell me why the ASA drops the <code>SYN-ACK</code>?</p>

<p>Thanks in advance!</p>

<p>EDIT:</p>

<ul>
<li><p>As suggested by Ron Trunk, I disabled the randomization of sequence numbers by using:</p>

<p>random-sequence-number disable</p></li>
<li><p>Added capture of the <a href=""https://www.cloudshark.org/captures/7ca7c51b6456"" rel=""nofollow"">inside-interface</a> and the <a href=""https://www.cloudshark.org/captures/0b9a65f1db9f"" rel=""nofollow"">outside-interface</a>.</p></li>
<li><p>Updated the capture files</p></li>
</ul>
","<p>By default, the ASA randomizes the sequence numbers in the handshake (to prevent session hijacks).  So your sequence numbers don't actually match.   You can turn off that feature.</p>

<pre><code>random-sequence-number disable
</code></pre>
","20115"
"Is there a way to get physical location of computer through MAC address?","5528","","<p>Is there a way to get physical location of computer through MAC address?, I know switch's address and computer's mac address.</p>

<p>All this on a LAN network</p>
","<p>No, there is not. </p>

<p>MAC address are issued in blocks to network device builders and thats (usually) what you can infer from MAC addresses (who build the device), and thats all.</p>

<p>IP's on the other hand, can point to the <strong>general area</strong> where a computer may be connected to the internet. </p>

<p>Blocks of IPs are sold to Internet Service Providers and you can infer from the ISP where the device is connected to the internet.</p>

<p>There is something called a GeoIP database, that can correlate IP blocks (networks) to geografical locations. You might want to check with one.</p>
","17533"
"How to choose Cisco ASA software release","5517","","<p>I have some pre-8.3 ASAs that I'm planning to upgrade to standardize on the new NAT semantics.  I am aware of the big changes between pre-8.3 and 8.3+ from <a href=""https://networkengineering.stackexchange.com/questions/7028/upgrading-asa-and-asdm-on-a-asa5510"">these</a> <a href=""https://networkengineering.stackexchange.com/questions/8/migrating-pre-8-3-asa-config-to-8-3?rq=1"">two</a> great Q&amp;As.  </p>

<p>What is unclear to me is how to choose from the numerous 8.3+ ASA software releases available to me.  This is what the software release tree looks like in my Cisco support portal:</p>

<p><a href=""https://i.stack.imgur.com/2wmgt.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/2wmgtm.png"" alt=""enter image description here""></a></p>

<p>For IOS Cisco published <a href=""http://www.cisco.com/c/en/us/support/docs/ios-nx-os-software/ios-software-releases-121-t/15071-choosing-ios.html"" rel=""nofollow noreferrer"">How to Choose IOS Software Release</a> which, among other things, defines the nomenclature for the version numbers (ie. format <code>A.B(C)D</code>) and software image type (ie. <code>ED</code> vs. <code>GD</code> etc).  I have not found an equivalent document for ASA.</p>

<p>Surely there is some careful release engineering going on by Cisco to strive for stability in some ASA releases and new features in others.  I haven't, however, found any document that helps me to sort between the two priorities.</p>

<p>I expect to read the release notes to establish what features are available in each release, but without other information I'd still be guessing at how stable each release is.</p>

<p>I guess I'm left with the following questions:</p>

<ol>
<li>In general, how do you decide which ASA software release to upgrade to?</li>
<li>Is there a way to get a sense for how stable a particular release is?</li>
<li>What does the <code>.ED</code> suffix mean?  What does a numeric <code>.x</code> suffix mean?</li>
<li>Can I glean stability of a release based on the age of major and minor releases?  For example, should I expect <code>8.4.7.ED</code> to be more stable than <code>9.2.1.ED</code>?</li>
</ol>
","<ol>
<li>In general, how do you decide which ASA software release to upgrade to?</li>
</ol>

<p>If the newest major release has been out for a while, I look at the release notes to get a sense if there are no bugs that would affect my network and pick a minor version based on that.  Else, I go with the newest version of the second-newest major release--assuming that doesn't have open bugs that would affect my network.</p>

<ol start=""2"">
<li>Is there a way to get a sense for how stable a particular release is?</li>
</ol>

<p>Absolutely, look at the open caveats in the release notes.  For software that's been in the wild for a reasonable amount of time, the shorter the list of open caveats, the better.  This has held true in my experience going back to 6.x.</p>

<ol start=""3"">
<li>What does the .ED suffix mean? What does a numeric .x suffix mean?</li>
</ol>

<p>ED = early deployment -- ""Early Deployment releases offer new feature, platform, or interface support. Most non-major releases contain ED releases.""  This is a flag to tell you that there's something new--read the release notes as you say but it's usually benign in my experience.  A fourth number (.x in your question) is a ""interim release"" that replaces another version previously released.  For 8.4(4.1) (""8.4.4.1"" above) there was a ""build problem"" with 8.4(4) so 8.4(4.1) was put out to replace it.</p>

<ol start=""4"">
<li>Can I glean stability of a release based on the age of major and minor releases? For example, should I expect 8.4.7.ED to be more stable than 9.2.1.ED?</li>
</ol>

<p>Maybe.  I'd definitely say 8.4.7, as an example, would be more stable than 9.0 or 9.1, but a point-2 release could have reached sufficient maturity.  It really depends on the open caveats and your specific config and use case.</p>
","13189"
"Should I use default routes or full BGP table?","5498","","<p>I have a network with three links (ISPA, 3MB, ISPB, 1.5MB, ISPC, 50MB). I have three different speeds, and as such, ISPs A and B are primarily used for redundancy. I'm currently receiving routes from all three providers, but filtering a number of them on the backup links. As I would look to route traffic out the larger pipe near exclusively, I feel as though  I do not need to retrieve a full routing table from all the ISPs, and could merely synchronize default routes. </p>

<p>Is this the case? Is there a way to limit BGP to only synchronizing next-hop or local routes? I'm worried about enabling full synchronization, as I'm running with older routers, and I'm working with limited amounts of RAM. </p>
","<p>You could accept a full table from your main neighbour and ask the others to send you local routes + default route only. In that case, the full table routes would win over the default and your transit traffic would use the ""full table"" neighbour. traffic to the secondary neighbours should still use their uplinks as the ASPATH would be shorter.
This only applies to outbound traffic though, if most of your traffic is inbound, you need to de-prioritise the routes advertised <em>to</em> the secondary neighbours (via AS-prepends, etc).</p>
","7070"
"What is the benefit of a Cisco ""top of rack"" design?","5457","","<p>Aside from the obvious cabling mess you avoid (which I know for us as network engineers is great, but hard to use as an excuse when reasoning with someone who sees no point in it), what do you gain versus copper straight through to a larger core?</p>

<p>Context:
- Price is of no concern</p>

<ul>
<li><p>Company had already decided on a dual Nexus core.</p>

<ul>
<li><p>Option 1: Nexus 7004's, which would be nearly fully populated with 10G SFP+ and aggregate connections to several FEXs at the top of each rack in the DC, as well as aggregate SAN and various server connections</p></li>
<li><p>Option 2: Nexus 7009 cores that will be approx. 1/3 filled up with various modules to accommodate the aggregation of all fiber connections from all devices.</p></li>
</ul></li>
<li><p>This is a colocated data center</p></li>
<li><p>Standard call center/enterprise domain related services hosted on the network</p></li>
<li><p>QoS is a very important bulletpoint to emphasize given that this company is a call center</p></li>
</ul>

<p>Problem:</p>

<ul>
<li>I am unable to justify going with Cisco's ""top of rack"" setup despite my wanting less of a cabling mess and a more modular design.  I'm unable to do so because you are inserting a point of failure into the network.  Doing this increases the latency (even if it's only by a small amount), etc.  Not only that, but now that I think about it, since all FEXs rely on the Nexus to operate, you not only increase the chance of a hardware failure bringing down a block of devices, but now a software process that could wig out and cause the FEX to malfunction in some way.</li>
</ul>

<p>So, before I put the top of rack design in the idea graveyard for this project, can anyone else see a reason not to go with a larger core and no FEXs given the lack of budget limitation?</p>
","<p>Keep in mind that a FEX inherently is a method by which to extend the fabric, thus the name. The ability to manage centrally while still having ""line cards"" distributed throughout the DC is the real reason to use a FEX. Drastically reducing cabling is valuable to anyone, technical or not, and the argument of being able to manage the entire infrastructure at fewer points is time savings, pure and simple.</p>

<p>One of your big doubts is that you're worried about single points of failure. All devices have the ability to be dual-homed, and in certain configurations, you can even establish virtual port channels with the Nexus 2K FEXs themselves. </p>

<p>Take a look at <a href=""http://www.cisco.com/en/US/docs/switches/datacenter/nexus2000/sw/configuration/guide/rel_4_1/Cisco_Nexus_2000_Series_Fabric_Extender_Software_Configuration_Guide_chapter2.html#concept_090B6DECCB594BC7AE8368433FFB3B3B"" rel=""nofollow"">Cisco's documentation</a>. You'll find that you can design a topology that is just as redundant as the ""direct-cable"" option you're considering, with less fuss.</p>
","1104"
"Why is there the source IP address in an IPv4 header?","5456","","<p>I didn't find any information about this on the Internet, because every website was just stating that it is in there, but never why.</p>

<p>One thought I had is that the router can identify in which network segment the sender is, so it can redirect the packet faster, but I don't know if that's true...</p>
","<p>So the destination node knows which address to specify in the destination field when responding to the sender.</p>
","19562"
"Configure Cisco ASA in Transparent mode: Layer2 DMZ w/ Vlan translation","5443","","<p>I am in the middle of a project to migrate some existing switched ethernet dot1q trunks behind an ASA firewall... these trunks have five vlans each (numbered 51 - 55).  This is a simple drawing of the original layer2 service...</p>

<p><img src=""https://i.stack.imgur.com/Q3wqI.png"" alt=""VLAN_Translation_00""></p>

<p>One of the requirements is to have an ASA firewall context per Vlan in the original dot1q trunk.  This means I wind up using a BVI to bridge the new INSIDE interface to the DMZ interface in each FW context.  Due to other constraints, I wind up with a FW config like this (I am summarizing out all the context stuff to simplify the question)...</p>

<pre><code>firewall transparent
!
interface GigabitEthernet0/1.51
 vlan 51
 nameif INSIDE
 security-level 100
 bridge-group 1
!
interface GigabitEthernet0/2.951
 vlan 951
 nameif DMZ
 security-level 50
 bridge-group 1
!
interface BVI1
 ip address 10.10.51.240 255.255.255.0 standby 10.10.51.241
!
</code></pre>

<p>Cisco ASAs in transparent mode wind up using two different vlan IDs to connect a single layer2 vlan service.  Connect the two vlans through <code>interface BVI1</code>; the <code>bridge-group 1</code> configuration on each physical interface makes the connection between Vlan51 and Vlan951 in the config above.</p>

<p>Assume ASA:Gi0/2 connects to 4507:Gi1/2... Notice what happens to the DMZ interface... the ASA DMZ Vlan is 951, and this connects via a dot1q trunk to the DMZ switch (the Cat4507).   I need to connect D1 to switchport 4507:Gi1/1, but I must deliver the Vlan951-955 services to D1 as dot1q Vlan51-55 on 4507:Gi1/1.  In other words, the Vlan BVI wrangling I had to do on the ASA messes up the Vlan numbering in my original service definition.</p>

<p><img src=""https://i.stack.imgur.com/9kX35.png"" alt=""VLAN_translation_01""></p>

<p>Sadly, I cannot easily renumber the Vlans on D1. The perfect solution would be to somehow translate Vlan951 on 4507:Gi1/2 to Vlan51 on 4507:Gi1/1.  Cisco has a feature called <a href=""http://www.cisco.com/en/US/docs/switches/lan/catalyst4500/15.1/XE_330SG/configuration/guide/tunnel.html"" rel=""nofollow noreferrer"">vlan mapping</a>, but it seems to require QinQ... all my services are simple dot1q... the 4500 <a href=""http://www.cisco.com/en/US/docs/switches/lan/catalyst4500/15.1/XE_330SG/configuration/guide/tunnel.html"" rel=""nofollow noreferrer"">vlan mapping</a> docs are not clear about how they handle simple dot1q encapsulation.</p>

<p>I know I can translate the vlans in the 4500 via loopback cable, but this burns two extra ports per Vlan... a total of ten extra ports for all the Vlans in the service (v51 - v55).</p>

<h2>Question</h2>

<p>Refer to the diagram below.</p>

<p><img src=""https://i.stack.imgur.com/9kX35.png"" alt=""VLAN_translation_01""></p>

<p>How can I translate all Vlans numbered 95x on the 4507:Gi1/2 dot1q trunk to be numbered Vlan5x on 4507:Gi1/1 dot1q?  I need to use the fewest number of ports consumed for ""translation overhead"".  Please include configs for all ports that your answer requires.</p>

<p>I am open to <a href=""http://www.cisco.com/en/US/docs/switches/lan/catalyst4500/15.1/XE_330SG/configuration/guide/tunnel.html"" rel=""nofollow noreferrer"">vlan mapping</a>, if someone can explain how it would work in this topology...</p>

<h2>Equipment</h2>

<ul>
<li>4507R+E, Sup7L-E with IOS XE 3.4.0</li>
<li>ASA5555X with 9.0(2)</li>
</ul>
","<p>I don't have SUP7 to test, but it works on SUP6 and SUP32, I would presume SUP7 retains this functionality.</p>

<p>I've tested between JNPR M320 &lt;-> SUP32, and '<strong>vlan mapping JNPR SUP32</strong>' works just fine.</p>

<p>There is no need for QinQ, what the QinQ option does is it adds top tag to one particularly tag. So <code>switchport vlan mapping 1042 dot1q-tunnel 42</code> would map incoming [1042] stack to [42 1042] stack.
As opposed to <code>switchport vlan mapping 1042 42</code> which maps incoming dot1q Vlan [1042] to dot1q Vlan [42]. </p>

<p>JNPR M320 config:</p>

<pre><code>{master}[edit interfaces ge-0/1/0 unit 1042]
user@m320# show 
vlan-id 1042;
family inet {
    address 10.42.42.1/24;
}
{master}[edit interfaces ge-0/1/0 unit 1042]
user@m320# run show interfaces ge-0/1/0               
Physical interface: ge-0/1/0, Enabled, Physical link is Up
  Interface index: 135, SNMP ifIndex: 506
  Description: B: SUP32 ge5/1
  Link-level type: Flexible-Ethernet, MTU: 9192, Speed: 1000mbps, BPDU Error: None,
  MAC-REWRITE Error: None, Loopback: Disabled, Source filtering: Disabled, Flow control: Disabled,
  Auto-negotiation: Enabled, Remote fault: Online
  Device flags   : Present Running
  Interface flags: SNMP-Traps Internal: 0x4000
  CoS queues     : 8 supported, 8 maximum usable queues
  Current address: 00:12:1e:d5:90:7f, Hardware address: 00:12:1e:d5:90:7f
  Last flapped   : 2013-02-19 09:14:29 UTC (19w6d 21:12 ago)
  Input rate     : 4560 bps (5 pps)
  Output rate    : 6968 bps (4 pps)
  Active alarms  : None
  Active defects : None
  Interface transmit statistics: Disabled
</code></pre>

<p>SUP32 config:</p>

<pre><code>SUP32#show run int giga5/1
Building configuration...

Current configuration : 365 bytes
!
interface GigabitEthernet5/1
 description F: M320 ge-0/1/0
 switchport
 switchport trunk encapsulation dot1q
 switchport mode trunk
 switchport nonegotiate
 switchport vlan mapping enable
 switchport vlan mapping 1042 42
 mtu 9216
 bandwidth 1000000
 speed nonegotiate
 no cdp enable
 spanning-tree portfast edge trunk
 spanning-tree bpdufilter enable
end

SUP32#show ru int vlan42
Building configuration...

Current configuration : 61 bytes
!
interface Vlan42
 ip address 10.42.42.2 255.255.255.0
end

SUP32#sh int GigabitEthernet5/1 vlan mapping  
State: enabled
Original VLAN Translated VLAN
------------- ---------------
  1042           42  

SUP32#sh int vlan42                           
Vlan42 is up, line protocol is up 
  Hardware is EtherSVI, address is 0005.ddee.6000 (bia 0005.ddee.6000)
  Internet address is 10.42.42.2/24
  MTU 1500 bytes, BW 1000000 Kbit, DLY 10 usec, 
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation ARPA, loopback not set
  Keepalive not supported
  ARP type: ARPA, ARP Timeout 04:00:00
  Last input 00:00:09, output 00:01:27, output hang never
  Last clearing of ""show interface"" counters never
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 0
  Queueing strategy: fifo
  Output queue: 0/40 (size/max)
  5 minute input rate 0 bits/sec, 0 packets/sec
  5 minute output rate 0 bits/sec, 0 packets/sec
  L2 Switched: ucast: 17 pkt, 1920 bytes - mcast: 0 pkt, 0 bytes
  L3 in Switched: ucast: 0 pkt, 0 bytes - mcast: 0 pkt, 0 bytes mcast
  L3 out Switched: ucast: 0 pkt, 0 bytes mcast: 0 pkt, 0 bytes
     38 packets input, 3432 bytes, 0 no buffer
     Received 21 broadcasts (0 IP multicasts)
     0 runts, 0 giants, 0 throttles 
     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored
     26 packets output, 2420 bytes, 0 underruns
     0 output errors, 0 interface resets
     0 output buffer failures, 0 output buffers swapped out
</code></pre>

<p>And </p>

<pre><code>SUP32#ping 10.42.42.1

Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 10.42.42.1, timeout is 2 seconds:
!!!!!
Success rate is 100 percent (5/5), round-trip min/avg/max = 1/1/1 ms
SUP32#sh arp | i 10.42.42.1
Internet  10.42.42.1             12   0012.1ed5.907f  ARPA   Vlan42
SUP32#show mac address-table dynamic address 0012.1ed5.907f
Legend: * - primary entry
        age - seconds since last seen
        n/a - not available

  vlan   mac address     type    learn     age              ports
------+----------------+--------+-----+----------+--------------------------
Active Supervisor:
*  450  0012.1ed5.907f   dynamic  Yes          0   Gi5/1
*   50  0012.1ed5.907f   dynamic  Yes          0   Gi5/1
*   40  0012.1ed5.907f   dynamic  Yes          0   Gi5/1
*   42  0012.1ed5.907f   dynamic  Yes          5   Gi5/1


user@m320# run ping 10.42.42.2 count 2 
PING 10.42.42.2 (10.42.42.2): 56 data bytes
64 bytes from 10.42.42.2: icmp_seq=0 ttl=255 time=0.495 ms
64 bytes from 10.42.42.2: icmp_seq=1 ttl=255 time=0.651 ms

--- 10.42.42.2 ping statistics ---
2 packets transmitted, 2 packets received, 0% packet loss
round-trip min/avg/max/stddev = 0.495/0.573/0.651/0.078 ms

{master}[edit interfaces ge-0/1/0 unit 1042]
user@m320# run show arp no-resolve |match 10.42.42.2 
00:05:dd:ee:60:00 10.42.42.2      ge-0/1/0.1042        none
</code></pre>
","2258"
"Why does ipv6 specify 128 bit address, when there are only 48 bits in MAC addresses?","5430","","<p>So, I'm reading for a networking exam, and I'm just wondering if I have missed something basic. Is there a need for more ip addresses than MAC addresses, and how would a node with one network adapter be assigned many ip addresses in that case?</p>
","<p>MAC addresses only need to be unique in a local broadcast domain, not globally, so re-use of MAC addresses in different networks usually isn't a problem. </p>

<p>The internet isn't one global broadcast domain and thus needs to be divided into many blocks of addresses assigned to different ISP's and each ISP divides his blocks into smaller blocks for different customers/services. To allow each of these smaller blocks to contain many MAC addresses you need to have the IP-space much bigger than the MAC address space.</p>
","1587"
"Firewall-cmd - Allow a port for defined IP addresses","5412","","<p>I would like to open the port 3316 only for 3 IP addresses with firewall-cmd command.</p>

<p>The standard command is :
  firewall-cmd --add-port=3316/tcp --permanent</p>

<p>I don't know how to add at this sentence a multiple IP address filter.
Maybe it will be something like that but i'm absolutly not sure :</p>

<p>firewall-cmd --add-port=3316/tcp --permanent rule family=""ipv4"" source address=""192.168.2.2,192.168.3.2,192.168.4.2"" accept</p>

<p>Thank you for your helps.</p>

<p>Best regards</p>
","<p>To my knowledge, you cannot have multiple IP's in the same command. You will most likely have to do this for each IP.</p>

<p>Check out this site for a little how-to on the exact workings of firewall-cmd
<a href=""http://www.certdepot.net/rhel7-get-started-firewalld/"" rel=""nofollow"">http://www.certdepot.net/rhel7-get-started-firewalld/</a></p>
","16586"
"How are Weighted Fair Queuing and Weighted Random Early Detection related?","5401","","<p>I'm trying to understand how QoS systems work and I'm not sure how exactly would WFQ and WRED interact. </p>

<p>At first, I thought that WFQ is a queuing mechanism and that WRED is a congestion avoidance mechanism. WFQ should schedule packets in queues and WRED is there to drop them when queues are full. If I'm setting up QoS on for example an L3 switch, I'd set up a queuing mechanism and a congestion avoidance mechanism, so I could in theory have WFQ and WRD working together. For example, this document seems to imply that I they would be set up in such way. Some other Cisco documents mention that I could use them independently. </p>

<p>Then I wanted to learn more about how they worked and started searching the Internet. As a result, now I have no idea what they are and how they work. </p>

<p>Some sites (at least to my understanding of the content) claim that packet scheduling algorithms and congestion avoidance algorithms are basically the same. For example in <a href=""http://en.wikipedia.org/wiki/Network_scheduler#Network_scheduling_algorithms"" rel=""nofollow"">this</a> Wikipedia article, they are all placed in a same group. Some random articles mentioned that I could use WFQ XOR WRED. </p>

<p>So what I wanted to ask is how related are WFQ and WRED? When would I use one or another and when both, if that's even possible?</p>
","<p>Weighted Fair Queueing (WFQ) is as the name implies a queueing algorithm. Queueing is used when there is congestion on an interface. This is usually detected through that the Transmit Ring (TX-Ring) is full. This means that the interface is busy sending packets. Queuing does not take place unless there is congestion on the interface. In some cases the size of the TX-ring can be manipulated. A small TX-ring gives the software queue more power as to which packets get sent out first but it's not very effective. A too large TX-ring would make the software queue almost useless and lead to higher latency and jitter for important packets.</p>

<p>The default queueing algorithm is usually First In First Out (FIFO). This means that packets are delivered in exactly the order as they arrive on the input of the interface. This is not usually desirable because some packets should be prioritized.</p>

<p>It is quite common that a customer buys a service from an Internet Service Provider (ISP) at subrate. That is, the customer buys a 50 Mbit/s service but the physical interface is running at 100 Mbit/s. In this case there will be no congestion but the ISP will be limiting the amount of traffic from the customer. To introduce artificial congestion in these cases a shaper can be applied. </p>

<p>So now that there is congestion a queueing algorithm can be applied. Note that queueing algorithms don't provide any extra bandwidth, they just let us decide which packets are more important to us. WFQ is an algorithm that takes several parameters and makes a decision based on that. The algorithm is quite complex and uses weight (IP Precedence), packet size and scheduling time as parameters. There is a very detailed explanation from INE <a href=""http://s3.www.ine.com/downloads/IEWB-RS-VOL-I-V5.Section.10.QoS.teaser.pdf"" rel=""nofollow noreferrer"">here.</a> WFQ is a good choice if one does not want to fiddle too much with queueing as it provides adequate bandwidth to small size flows like SSH, Telnet, voice and that means that a file transfer won't steal all the bandwidth.</p>

<p>Weighted Random Early Detection (WRED) is a congestion avoidance mechanism. WRED measures the size of the queues depending on the Precedence value and starts dropping packets when the queue is between the minimum threshold and the maximum threshold. Configuration will decide that 1 in every N packets are dropped. WRED helps to prevent TCP synchronization and TCP starvation. When TCP loses packets it will go into slow start and if all TCP sessions lose packets at the same time they could become synchronized which provides a graph like this:</p>

<p><img src=""https://i.stack.imgur.com/3vSFi.gif"" alt=""TCP Synchronization""></p>

<p>As can be seen if WRED is not configured the graph goes full blast, then silent, then full blast and so on. WRED provides a more average transmit rate. It is important to note that UDP does not get affected by dropping packets because it has no acknowledgement mechanism and sliding window implemented like TCP. Therefore WRED should not be implemented on UDP based class like a class handling SNMP, DNS or other UDP based protocols.</p>

<p>Both WFQ and WRED can and should be deployed together.</p>
","5318"
"Traffic generation from Cisco IOS device to prove WAN circuit","5390","","<p>In essence I want to know if there is any way that we can use extended ping or any other command variants to prove to the customer that that the circuit is able to achieve the minimum CIR. The CE routers are Cisco ISRs 881,19x1 &amp; 29x1 running 15.1, and the PE routers are Juniper MXs.</p>

<p>In an ideal world we would just plug a laptop into a LAN port and use iperf to a remote destination behind the CE routers, but the WAN / LAN deployment is being done on separate days and therefore have been instructed to leave the LAN ports shutdown.</p>

<p>We need to contractually prove that 80/20MBps VDSL2 circuit meets the minimum 20/4MBps CIR requirements.</p>

<p>For reference: On the Juniper MX side, we can drop down into the shell and and run multiple flood pings with the DF flags set, but the problem is currently with the Cisco ISRs.</p>

<p>NOTE: RE-Protect will be disabled for the bandwidth test period and therefore wont be a factor. and were potentially deploying 12 sites a day so simplicity is a key success factor.</p>

<pre><code>  +---------------+          +---------------+             +-------------+
  |               |+--20mb--&gt;|               |             |Cisco ISR CE |
  |Juniper MX PE  |          |Carrier network|&lt;------4mb---|             |
  +---------------+          +---------------+             +-------------+
</code></pre>
","<p>IOS includes ttcp, albeit it might not be supported officially by Cisco it can come in handy in situations like this.</p>

<p>JUNOS does not support ttcp as far as I know, but it's probably not too much hassle adding one central Linux machine connected to the PE that you can do measurements with.</p>

<p>On IOS, you simply run 'ttcp', like so;</p>

<pre><code>LAB-C7600-1#ttcp
transmit or receive [receive]: transmit
Target IP address: 1.3.3.7
calculate checksum during buffer write [y]: 
perform tcp half close [n]: 
send buflen [32768]: 
send nbuf [2048]: 
bufalign [16384]: 
bufoffset [0]: 
port [5001]: 
sinkmode [y]: 
buffering on writes [y]: 
show tcp information at end [n]: y

ttcp-t: buflen=32768, nbuf=2048, align=16384/0, port=5001  tcp  -&gt; 1.3.3.7
</code></pre>

<p>Now I don't have a second end point, but you get the idea :)</p>
","3058"
"Behaviour of untagged traffic on TRUNK and ACCESS VLAN ports","5389","","<p>I have a situation where I have a switch with 2 vlans, that needs to connect to an upstream router -- which does not and will not know abut my VLANS (this is in a datacenter, where I cant change this directly).</p>

<p>I have 2 vlans:</p>

<ol>
<li>VLAN 1 - Internal management traffic</li>
<li>VLAN 24 - External traffic</li>
</ol>

<p>Essentially, I want the port which connects upstream to</p>

<ol>
<li>Assign untagged incoming traffic as VLAN 24.</li>
<li>Untag all outgoing traffic (only VLAN24, VLAN1 can be dropped).</li>
</ol>

<p>I have read many conflicting things online as to what happens when untagged traffic arrives on an ACCESS or TRUNK port. How does this behave for each?</p>

<p>I currently have this set to ACCESS UNTAGGED with a PVID of 24. Is this correct?</p>
","<p>As Adam stated, generally in a well designed network, you should not be receiving untagged frames on a trunk port.  Based on your description, you only want and expect to send and receive VLAN 24 on the uplink port.  Thus, configure the port as an access port in VLAN 24:</p>

<pre><code>interface gig0/1
 switchport access vlan 24
</code></pre>

<p>If for whatever reason this needs to remain a trunk port, but you still only want VLAN 24 (untagged), then configure as a trunk, but set the native VLAN to 24:</p>

<pre><code>interface gig0/1
 switchport trunk encapsulation dot1q  !may not be necessary depending on hardware
 switchport mode trunk
 switchport trunk native vlan 24
</code></pre>
","17754"
"How to disable 802.11b wireless clients on my WLAN?","5388","","<p>Most wireless vendors recommend that unless there is a need to support them, 802.11b should be disabled on the network.</p>

<p>How should I go about disabling 802.11b on my network?</p>
","<p>I have come across three different ways you may be able to go about disabling 802.11b, depending on your situation and wireless vendor.  I will start with what should generally be the most preferential choice, but any of them will work.</p>

<ol>
<li>Your wireless vendor may provide a setting to ""disable 802.11b clients"" or similar.  Generally this will implement the next method automatically for you and may tweak some other settings as well.</li>
<li>Remove the following data rates (these are the 802.11b data rates); this is generally a WLAN or ESS based setting:
<ul>
<li>1 Mbps</li>
<li>2 Mbps</li>
<li>5.5 Mbps</li>
<li>11 Mbps</li>
</ul></li>
<li>Adjust your base or required (terminology varies by vendor) data rates to remove the above data rates and select one or more of the following (or any other 802.11g data rate):
<ul>
<li>6 Mbps</li>
<li>9 Mbps</li>
<li>12 Mbps</li>
<li>18 Mbps</li>
</ul></li>
</ol>

<p>The third method allows you to keep the 1/2/5.5/11 Mbps data rates enabled in case you have non-802.11b devices that require them.  This may not be common, but I know that most Nintendo Wii gaming consoles require 1 and/or 2 Mbps to be supported to connect (although after they connect, they will operate at 802.11g speeds).  I have heard third hand that there is also a smartphone that has the same problem, but I do not know make/model or experienced it myself.</p>
","1288"
"Which is the Preferred location of an IPS within a network?","5380","","<p>In the context of protecting a campus network, which is the Preferred location of an IPS within a network?</p>

<ol>
<li>Within an ISR router</li>
<li>IPS as a separate device</li>
<li>Within ASA</li>
</ol>
","<p>Use google to check/translate the following blog post (in portuguese, from the author of the book Cisco Firewalls):
<a href=""http://alexandremspmoraes.wordpress.com/2012/07/03/multiplas-camadas-de-defesa-a-complementaridade-do-firewall-e-do-ips"" rel=""nofollow"">http://alexandremspmoraes.wordpress.com/2012/07/03/multiplas-camadas-de-defesa-a-complementaridade-do-firewall-e-do-ips</a>
For me this is the best explanation I've seen on where to place IDS and IPS (and their complementarity).</p>
","960"
"Difference between good-put throughput and data rate","5355","","<p>I want to know the difference between data rate, throughput, and goodput. All I know is the capacity of a link is not its throughput. Also, bandwidth is not capacity. Please, some one help me to know the difference? </p>
","<p>Wikipedia has a good explanation: <a href=""http://en.wikipedia.org/wiki/Goodput"">http://en.wikipedia.org/wiki/Goodput</a></p>

<blockquote>
  <p>... In computer networks, goodput is the application level throughput,
  i.e. the number of useful information bits delivered by the network to
  a certain destination per unit of time.</p>
  
  <p>...[For example, using FTP] the goodput that the user
  experiences corresponds to the file size in bits divided by the file
  transfer time. The goodput is always lower than the throughput (the
  gross bit rate that is transferred physically), which generally is
  lower than network access connection speed (the channel capacity or
  bandwidth).</p>
</blockquote>
","10388"
"How to communicate between devices on a switch via IP addresses","5346","","<p>I understand the differences between a switch and a router, but I don't understand the supposedly common practice of using a switch to extend/expand the number of ports provided by a router and where each device connected to the switch gets its own LAN IP address.</p>

<p>The switch and router operate on different layers (assuming the switch is not multi-layered) and hence I don't understand how it works.</p>

<p>Picture this scenario:</p>

<p>Router connects LAN to the WAN (public internet).
Switch is connected to one of the router LAN ports.
Devices (e.g. computers, laptops, etc.) are connected to the switch.
Say there is device A connected to the switch and it wants to talk to device B (also connected to the switch). I understand that a switch allows the two devices to communicate without involving the router, but that is via MAC addresses (data-link layer). What if I want them to communicate using their LAN IP addresses, i.e. so I can use simple TCP socket programming?</p>

<p>Device A could send some data to Device B via a TCP socket, but how does the data get from Device A to the router and back to Device B, via the switch in both cases? The switch only knows MAC addresses, not IP addresses.</p>
","<p>This is a simplified version of what happens:</p>

<p>The switch (assuming not a layer-3 switch) only involves itself with MAC addresses.  This is where ARP comes into play.  The sending PC will ARP, using the layer-3 address, and the receiving PC with that layer-3 address will respond with its layer-2 address.  The sending PC then encapsulates the layer-3 packets into layer-2 frames, and the switch will switch the layer-2 frames.</p>
","17598"
"What factors drive a Cisco IOS upgrade?","5313","","<p><strong>In order of preference/priority, what factors do you consider in driving an upgrade (or downgrade) with Cisco IOS?</strong>  If no compelling factors exist, how long would you allow a particular version of IOS to stay running?  <em>I've seen some switches with uptimes > 5 years.</em></p>

<p><strong>And when upgrading, how is the specific IOS release identified as the upgrade target?</strong></p>
","<p>In order of preference/priority, our company tends to upgrade based on these factors:  </p>

<ul>
<li><strong>Vulnerabilities, vulnerabilities, vulnerabilities!</strong> </li>
<li><strong>Bugs</strong> </li>
<li><strong>Attaining new features</strong> not currently available-- new cards/modules have a ""first supported in"" IOS version which could be higher than what you have running</li>
<li><strong>Migrating away from retired release trains</strong></li>
<li><strong>Matching versions</strong> on more recently deployed and similar hardware</li>
</ul>

<p>A device that is very critical to the infrastructure may not be as aggressively upgraded as one that is less critical.  Consideration is given to the role of the device, the redundancy surrounding it, and the impact of the upgrade itself by the downtime incurred or by the possibility of having config feature behavior changes or different defaults when going between major versions.  This is the <strong>necessity</strong> question that also touches on soft costs such as the time and resources to accomplish the upgrades measured against the weight given to each of the factors such as vulnerabilities.</p>

<p><em>Be sure to subscribe to multiple vulnerability announcement sites such as <a href=""http://www.cisco.com/go/psirt"" rel=""nofollow"">Cisco PSIRT</a> (Product Security Incident Response Team) and the <a href=""https://www.us-cert.gov"" rel=""nofollow"">US Cert</a> (Computer Emergency Readiness Team).</em></p>

<p>A downgrade might be in order if:  </p>

<ul>
<li>Organization has a policy to only run tested/QA'd versions and new equipment came with a more recent release.  </li>
<li>Org has a policy against running anything other than GD.</li>
</ul>

<hr>

<ul>
<li>Use Cisco's Output Interpreter of ""show version"" to look for obvious 
issues/vulnerabities/bugs.    </li>
<li>Look for GD (General Deployment) releases and avoid DF (Deferred).   </li>
<li>Use ED (Early Deployment) only when it contains must-have features not available elsewhere.   </li>
<li>Avoid LD (Limited Deployment) when possible and use GD instead.</li>
</ul>

<p>There are certainly arguments for going to an ED or LD version, but the desire, of course, is to get to the most stable version that meets requirements.  Use Cisco's <a href=""http://tools.cisco.com/ITDIT/CFN/"" rel=""nofollow"">Feature Navigator</a> to help identify potentially different feature-sets (assuming you're licensed to use them).</p>
","1397"
"Cisco GET VPN Configuration - Best Practices/Can the loopback be used?","5299","","<p>I am in the process of re-ip addressing a large number of remote locations, all of which are using a Cisco GET VPN/GDOI configuration for encryption of the traffic.  In the process, I also wanted to review the configuration to ensure we were following best-practices.</p>

<p>I have been over the Cisco <a href=""http://www.cisco.com/en/US/docs/ios-xml/ios/sec_conn_getvpn/configuration/15-2mt/sec-get-vpn.html"" rel=""nofollow"">GET VPN config guide</a> and <a href=""http://www.cisco.com/en/US/prod/collateral/iosswrel/ps6537/ps6586/ps6635/ps7180/deployment_guide_c07_554713.html"" rel=""nofollow"">Deployment Guide</a>, but haven't found a good answer to this question:</p>

<p><strong>Is it best practice to use a loopback or physical interface as the terminating interface of the encrypted traffic?</strong></p>

<p>Currently the configuration uses the physical Gig0/0 interface to terminate the encrypted traffic.  However to simplify some of the other changes involved, I would like to utilize the Loopback0 interface for that purpose.  Down the road, some of these sites would be getting redundant uplinks, and my understanding is that I could use the Loopback interface to terminate both encrypted connections.</p>

<p>Below are two samples, the existing configuration and how I understand I would have to set the router up to use the Loopback.  I believe I would only have to add the following command to the GM: </p>

<blockquote>
<pre><code>crypto map %MAPNAME local-address Loopback0
</code></pre>
</blockquote>

<p>The GM address would then also have to be changed on the Key Server; to my knowledge, that is the only change on the KS.</p>

<hr>

<p>A sample of the existing confiuration:</p>

<pre><code>!
crypto isakmp policy 10
 encr aes
 authentication pre-share
 group 2
crypto isakmp key %KEY address 10.100.1.1
crypto isakmp key %KEY address 10.100.2.1
!
crypto ipsec df-bit clear
crypto gdoi group GDOI-MPLS-GROUP-10
 identity number 10
 server address ipv4 10.100.1.1
 server address ipv4 10.100.2.1
!
crypto map CM-STATIC-MAP 10 gdoi 
 set group GDOI-MPLS-GROUP-10
!
interface Loopback0
 ip address 10.129.110.125 255.255.255.252
!
interface GigabitEthernet0/0
 description MPLS-Connection
 ip address 10.101.44.2 255.255.255.248
 ip virtual-reassembly
 ip tcp adjust-mss 1300
 duplex full
 speed 100
 no cdp enable
 crypto map CM-STATIC-MAP
!
</code></pre>

<hr>

<p>A sample using the loopback as the terminating interface: </p>

<pre><code>!
crypto isakmp policy 10
 encr aes
 authentication pre-share
 group 2
crypto isakmp key %KEY address 10.100.1.1
crypto isakmp key %KEY address 10.100.2.1
!
crypto ipsec df-bit clear
crypto gdoi group GDOI-MPLS-GROUP-10
 identity number 10
 server address ipv4 10.100.1.1
 server address ipv4 10.100.2.1
!
crypto map CM-STATIC-MAP local-address Loopback0
crypto map CM-STATIC-MAP 10 gdoi 
 set group GDOI-MPLS-GROUP-10
!
interface Loopback0
 ip address 10.129.110.101 255.255.255.252
!
interface GigabitEthernet0/0
 description MPLS-Connection
 ip address 10.101.24.2 255.255.255.248
 ip tcp adjust-mss 1300
 duplex full
 speed 100
 no cdp enable
 crypto map CM-STATIC-MAP
!
</code></pre>

<hr>
","<p>If you are planning to implement multiple links in the same GDOI group on the GMs, best practice would be to use a loopback interface as the crypto source.  The reason being that otherwise the key servers will see each interface as a separate entry and the router will receive multiple rekeys.  Your second sample config looks good.</p>

<p>See section 4.1.2.1.3 of the GETVPN DIG:  <a href=""http://www.cisco.com/en/US/prod/collateral/vpndevc/ps6525/ps9370/ps7180/GETVPN_DIG_version_1_0_External.pdf"" rel=""nofollow"">http://www.cisco.com/en/US/prod/collateral/vpndevc/ps6525/ps9370/ps7180/GETVPN_DIG_version_1_0_External.pdf</a></p>
","377"
"Active / Active BGP with Default routes","5287","","<p>I've just lodged a request with upstream to clarify some specifics of their recommended BGP configuration. Currently, I will be dual-homing with my upstream via PI addresses. Advertising via BGP with my own AS, and have requested they pass me a default route.</p>

<p>Their recommended configuration is to have two cross-connects, one from each of my primary/secondary router, connecting to their primary/secondary router, respectively. My primary would their peer with their primary, and my secondary with theirs. This is all fine (aside from the potential no-connectivity scenario if my primary is down, and their secondary is down).</p>

<p>But my confusion is this: <strong>My provider is suggesting that by taking only a default, I am going to have an active/standy configuration, and that I need a full set of routes for active/active.</strong></p>

<p>My understanding was that if I'm only homed via a single ISP, then a full-feed becomes effectively pointless, since all traffic is going the same path either way. What am I missing that would cause this to be an active/standy configuration? Surely the secondary router, if traffic hits it, is going to prefer to send out it's local default gateway, as opposed to first sending traffic to the primary?</p>

<p>Taking it from another perspective, I can't see how full routes is going to change the behavior (ignoring possible traffic engineering scenarios), since both routers would have the same set of routes from upstream.</p>
","<p>Absent any non-standard configuration, it is how you say. For outbound traffic, which uplink is used depends on which router the traffic hits. For inbound traffic, it should work the same way but that depends largely on your upstream's configuration. Full routes are really only required if you intend to peer with another upstream.</p>
","6137"
"Fortigate Open Ports","5283","","<p>I need to open this port in Fortigate:</p>

<blockquote>
  <p>443   PSOM/TLS    Outbound    Data sharing sessions</p>
</blockquote>

<p>But i dont know where I can open. I created a Custom Service, chose the option of TCP, but do not know if it's the right thing.</p>

<p>Does anyone know how can I open this port?</p>

<p>Thanks</p>
","<p>The FortiGate doesn't care which protocol is running over the port 443, so you just need to create a policy and select the corresponding interfaces/addresses and as service you can select HTTPS. If it's a policy from internal network to WAN, be sure to select NAT also</p>
","7188"
"HP Procurve 5406zl - ACL issue","5276","","<p>I'm having an issue with an ACL on a VLAN interface. I've followed HP's documentation here: 
<a href=""http://h20628.www2.hp.com/km-ext/kmcsdirect/emr_na-c02609963-3.pdf"" rel=""nofollow"">http://h20628.www2.hp.com/km-ext/kmcsdirect/emr_na-c02609963-3.pdf</a></p>

<p>I want to do the following: </p>

<p>VLAN 101 should only be able to communicate to VLAN 50 - no other VLANs, no internet access. </p>

<p>Initially, I tried the following access list: </p>

<pre><code>ip access-list extended ""SecureContent""
    10 permit ip 192.168.50.0 0.0.0.255 192.168.101.0 0.0.0.255
    20 remark ""SecurityVLAN""
</code></pre>

<p>I applied this ACL to VLAN 101 ""in"" with the following command: </p>

<pre><code>  vlan 101
    ip access-group ""SecureContent"" in
</code></pre>

<p>This configuration results in zero communication on that VLAN: The IP of 192.168.101.2 on port A1 cannot ping 192.168.101.1, the switch VLAN IP. If I change the access list to: </p>

<pre><code>10 permit ip 192.168.101.1 0.0.0.255 192.168.101.1 0.0.0.255 
20 permit ip 192.168.50.1 0.0.0.255 192.168.101.1 0.0.0.255
</code></pre>

<p>...this results in clients on the VLAN being able to ping their default gateway, but not the 50.1 gateway. That doesn't make any sense to me - the VLAN 101 IP interface should be considered logically ""inside"" that VLAN 101, correct? </p>

<p>I have tried various versions of this access list, even going so far as to do just a standard access list blocking a single IP yet permitting everything else with a ""permit ip any any"" statement - and this still results in zero inter or intra-vlan traffic - the host on that VLAN can't even ping its own gateway if I apply the list in the inbound direction (I also tried a variant in the outbound direction - exactly the same result!)</p>

<p>Below is the switch configuration: </p>

<pre><code>    Running configuration:

; J8697A Configuration Editor; Created on release #K.15.09.0012
; Ver #03:01.1f.ef:f2
hostname ""HP-5406zl""
module 1 type j8702a
module 2 type j8708a
module 3 type j9546a
module 4 type j8708a
power-over-ethernet pre-std-detect
ip access-list extended ""SecureContent""
     10 permit ip 192.168.101.1 0.0.0.255 192.168.101.1 0.0.0.255
     20 permit ip 192.168.50.1 0.0.0.255 192.168.101.1 0.0.0.255
   exit
ip route 0.0.0.0 0.0.0.0 172.16.0.1
ip routing
snmp-server community ""public"" unrestricted
snmp-server contact ""Person"" location ""Place""
vlan 1
   name ""DEFAULT_VLAN""
   no untagged A1-A20,A23-A24,B1-B4,C1-C8,D1-D4
   untagged A21-A22
   ip address 192.168.1.10 255.255.255.0
   jumbo
   exit
vlan 50
   name ""Editors""
   untagged A2-A19,B1-B3,C1-C8,D1-D4
   tagged A23-A24
   ip address 192.168.50.1 255.255.255.0
   jumbo
   exit
vlan 100
   name ""IO""
   tagged A23-A24
   ip address 192.168.100.1 255.255.255.0
   exit
vlan 101
   name ""SecureContent""
   untagged A1
   ip address 192.168.101.1 255.255.255.0
   ip access-group “SecureContent” in
   exit
vlan 200
   name ""Corp""
   tagged A23-A24
   ip address 192.168.200.1 255.255.255.0
   ip helper-address 192.168.50.2
   exit
vlan 800
   name ""IT""
   untagged A23-A24
   ip address 172.17.0.1 255.255.255.0
   exit
vlan 899
   name ""DMZ""
   untagged B4
   tagged A23-A24
   ip address 172.18.0.1 255.255.255.0
   jumbo
   exit
vlan 900
   name ""Routed""
   untagged A20
   tagged A23-A24
   ip address 172.16.0.2 255.255.255.252
   exit
vlan 999
   name ""VLAN999""
   no ip address
   exit
</code></pre>

<p>EDITED to add relevant chassis information: </p>

<pre><code>  Software revision  : K.15.09.0012         Base MAC Addr      : 002561-f80000
  ROM Version        : K.15.30              Serial Number      : XXXXXXXX
  Allow V1 Modules   : Yes     

         Opacity Shields    : Not Installed
</code></pre>

<p>Thanks in advance for your help!</p>
","<p>According to the Access Security Guide for your device, the first address and mask of an ACE  is source and the second address and mask is the destination. (Just in case, an ACE is an Access Control Entry; that is any line an access-list is made of) </p>

<p>ACE 20 of your ACL states source 192.168.50.0/24 and destination 192.168.101.0/24, then you apply the ACL at VLAN 101 input; however, your VLAN 101 is 192.168.101.0/24, so any input traffic at VLAN 101 would have source address in 192.168.101.0/24. So ACE 20 in your ACL is wrong,  you need an ACE with action permit, source 192.168.101.0/24 and destination 192.168.50.0/24. </p>

<pre><code>ip access-list extended ""SecureContent""
    10 permit ip 192.168.101.0 0.0.0.255 192.168.50.0 0.0.0.255
</code></pre>

<p>Regarding the way back for this traffic, it will cross VLAN 101 outbound, so ACL should not be applied to this traffic and it should be allowed.</p>

<p>If traffic back is not allowed then you need to add the way back in your ACL.</p>

<pre><code>ip access-list extended ""SecureContent""
    10 permit ip 192.168.101.0 0.0.0.255 192.168.50.0 0.0.0.255
    20 permit ip 192.168.50.0 0.0.0.255 192.168.101.0 0.0.0.255
</code></pre>

<p>EDITED to change the line above to reflect proper ACL structure of numbered entries. (10, 20, etc).</p>
","8268"
"Connecting two or more subnets","5271","","<p>Whether a router is needed to connect two subnets.</p>

<p>Say for example:</p>

<pre><code>Subnet-1 : 192.168.0.0 to 192.168.0.127  Subnet Mask:255.255.255.128
Subnet-2 : 192.168.0.128 to 192.168.0.255 Subnet Mask:255.255.255.128
</code></pre>

<p>Whether subnet-1 requires a router and subnet 2 requires another router.</p>
","<p>You could use separate routers for each subnet or you could use one for both. If you would use only one router, there are two ways to go: Router-on-a-stick (both subnets will use or are connected to the same router interface) or connect each subnet to a different interface (remember each router interface should belong to different subnets).</p>

<p>Router-on-a-stick is usually the way to go since routers generally have few interfaces.</p>
","12740"
"Difference between LR and ZR 10Gb Optics","5255","","<p>What is the difference between a 10Gb LR optic that can only go 10km compared to a ZR optic that can go a lot further at 70km?</p>
","<p>ZR optics are spec'ed to 80km but they're not part of the 10GE standard; they're rather a ""Cisco special.""</p>

<p>In terms of what actually allows them to transmit light over this distance may be ""protected"" information from Cisco (both the ZR and ER operate on 1550nm SMF), but they've published some of the optical parameters for the ZR XENPAK <a href=""http://www.cisco.com/en/US/prod/collateral/modules/ps2797/ps5138/product_data_sheet09186a008007cd00_ps5251_Products_Data_Sheet.html"" rel=""nofollow"">here</a>.</p>

<p>EDIT: While I thought that 10GBASE-ZR was Cisco-specific, it's not actually. <a href=""https://en.wikipedia.org/wiki/10-gigabit_Ethernet#10GBASE-ZR"" rel=""nofollow"">The wikipedia page for the 10Gig standard</a> states ""multiple manufacturers"" have introduced ""ZR"" optics which are based on the 80km PHY described in the OC192 SONET specs.</p>
","1279"
"Setup the BGP + ospf network","5216","","<p>I've the next Lab with GNS3</p>

<p>I have two autonomous systems(100,200), when the AS 100 run a OSPF with two areas, <code>0</code> and <code>1</code>. The AS 200 has only a router and computer, so easy. But I don't know how to setup the BGP protocol between the AS 100 and as 200.</p>

<p><strong>How should I setup R7 and R8 to work with BGP?</strong></p>

<p><a href=""https://i.stack.imgur.com/eAz6c.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/eAz6c.png"" alt=""network overview""></a></p>

<p>The AS100</p>

<p><a href=""https://i.stack.imgur.com/BZRUH.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/BZRUH.png"" alt=""network diagram, autonomous system 100""></a></p>

<p>The AS200</p>

<p><a href=""https://i.stack.imgur.com/uF48M.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/uF48M.png"" alt=""network diagram, autonomous system 200""></a></p>

<h2>OSPF Setup</h2>

<p><strong>R1:</strong></p>

<pre><code>R1#enable
R1#configure terminal
R1(config)#router ospf 1
R1(config-router)#Router-id 1.1.1.1
R1(config-router)#network 192.168.0.0  0.0.0.255 area 0
R1(config-router)#network 10.0.0.0  0.0.0.3 area 0
</code></pre>

<p><strong>R2:</strong></p>

<pre><code>R1#enable
R1#configure terminal
R1(config)#router ospf 1
R1(config-router)#Router-id 2.2.2.2
R1(config-router)#network 10.0.0.0  0.0.0.3 area 0
R1(config-router)#network 10.0.0.4  0.0.0.3 area 0
</code></pre>

<p><strong>R3:</strong></p>

<pre><code>R1#enable
R1#configure terminal
R1(config)#router ospf 1
R1(config-router)#Router-id 3.3.3.3
R1(config-router)#network 10.0.0.4  0.0.0.3 area 0
R1(config-router)#network 10.0.0.8  0.0.0.3 area 0
</code></pre>

<p><strong>R4:</strong></p>

<pre><code>R1#enable
R1#configure terminal
R1(config)#router ospf 1
R1(config-router)#Router-id 4.4.4.4
R1(config-router)#network 172.16.0.0 0.0.0.255 area 1
R1(config-router)#network 11.0.0.0  0.0.0.3 area 1
</code></pre>

<p><strong>R5:</strong></p>

<pre><code>R1#enable
R1#configure terminal
R1(config)#router ospf 1
R1(config-router)#Router-id 5.5.5.5
R1(config-router)#network 11.0.0.0  0.0.0.3 area 1
R1(config-router)#network 11.0.0.4  0.0.0.3 area 1
</code></pre>

<p><strong>R6:</strong></p>

<pre><code>R1#enable
R1#configure terminal
R1(config)#router ospf 1
R1(config-router)#Router-id 6.6.6.6
R1(config-router)#network 11.0.0.4  0.0.0.3 area 1
R1(config-router)#network 11.0.0.8  0.0.0.3 area 1
</code></pre>

<p><strong>R7:</strong></p>

<pre><code>R1#enable
R1#configure terminal
R1(config)#router ospf 1
R1(config-router)#Router-id 7.7.7.7
R1(config-router)#network 10.0.0.8  0.0.0.3 area 0
R1(config-router)#network 11.0.0.8  0.0.0.3 area 1
</code></pre>

<h2>BGP Setup</h2>

<p><strong>R7:</strong></p>

<pre><code>R7#en
R7#conf t
R7(config)# router bgp 100
R7(config-router)#neighbor 190.0.0.2 remote-as 200
R7(config-router)#network 190.0.0.0 mask 255.255.255.252
R7(config-router)#network 10.0.0.8 mask 255.255.255.252
R7(config-router)#network 11.0.0.0 mask 255.255.255.252
</code></pre>

<p><strong>R8:</strong></p>

<pre><code>R8#en
R8#conf t
R8(config)# router bgp 200
R8(config-router)#neighbor 190.0.0.1 remote-as 100
R8(config-router)#network 190.0.0.0 mask 255.255.255.252
R8(config-router)#network 173.31.0.0 mask 255.255.255.0
</code></pre>

<p><strong>R7 routing table:</strong></p>

<p><img src=""https://i.stack.imgur.com/PzTn5.png"" alt=""R7 RIB""></p>

<p><strong>R8 routing table:</strong></p>

<p><img src=""https://i.stack.imgur.com/0Tahw.png"" alt=""R8 RIB""></p>

<p><strong>Setup the vpcs</strong></p>

<pre><code>VPCS[1]&gt; ip 192.168.0.2 24 192.168.0.1
VPCS[1]&gt; 2
VPCS[2]&gt; ip 172.16.0.2 24 172.16.0.1
VPCS[2]&gt; 3
VPCS[3]&gt; ip 172.31.0.2 24 172.31.0.1
</code></pre>

<p>The problem is that when I try to do a ping from computer c3 to f0/0 or f0/01 in the router R7 not works only come until to s0/0.</p>

<p><strong>How should setup the router R7 and R8, to work with BGP?</strong></p>

<p>Thanks for your answers.</p>
","<p>Well I solve it, the solution is the next:</p>

<p>In the router that handle ospf and bgp I need to do the following setup:</p>

<pre><code>R7#en
R7#conf t
R7(config)# router ospf #number_process 
R7(config-router)#redistribute bgp #as subnets
R7(config-router)#exit
R7(config)#router bgp #as
R7(config-router)#redistribute ospf #number_process
</code></pre>
","7535"
"How OSPF decides a network to be a stub network?","5185","","<p>In <a href=""http://www.ietf.org/rfc/rfc2328.txt"" rel=""nofollow noreferrer"">RFC 2328</a> it mentions that link-state information of all Loopback interfaces and all interfaces with network mask as /32 (host ip addresses) are advertised as stub network type. Now what about the cases where a interface with /24 mask is connected to a network and this is the only router interface connected to that network. Technically these are also stub networks right? So how does OSPF determine these /24 interface links as stub or not? Will it look for a OSPF neighbor-ship via that /24 interface and decide if that is a stub network? If that is the case what will be the decision for cases where there is another router connected the same network but doesn't run OSPF.</p>

<p>I hope the question is clear hence have not added any diagrams in case anyone needs some clarification please let me know i'll add diagrams to explain my question.</p>

<p>Making long question short:- While generating Router LSAs how does OSPF decide to choose the link-type(p2p, stub, transit, Virtual-link) ?</p>
","<p>The link-type in router lsa link information would be <strong>stub if the interface is passive</strong>.(loopbacks are passive by default), which implies that there is no ospf router on that link. If a OSPf link is not passive then OSPF uses link type as transit. Point-to-point and virtual links are explicitly configured and hence the config information can be used to fill in the link-type os router lsa links. Hope this cover all link types.</p>
","42658"
"interface showing ""Link not connected"" on a Nexus 2200 FEX but it is very much connected","5179","","<p>I have to be over looking something dumb here but I can't figure it out.</p>

<p>The fex is set up properly and is communicating to the Nexus 5548 without issue. There are a few other fexs connected as well. </p>

<p>The interface config is bare bones at this point:</p>

<pre><code>interface fex100/1/1
  switchport access vlan xx
  spanning-tree port type edge
  no shut
</code></pre>

<p>I have tried to plug other devices into the port and no link lights will come up. No errors are shown in the log. I have connected to the server via its Ethernet port from a directly connected laptop and its link lights come up no problem. </p>

<p>The vlan is already on the switch as well.</p>

<p>A show interface shows that zero traffic has crossed the link. </p>

<p>If there is any other information I could provide please let me know.</p>
","<p>I found out the upstream 5k was in a pair so I needed to make the interface config change on both 5ks. Problem solved.</p>
","10210"
"Cisco Catalyst 2960 basic fiber install help","5179","","<p>new to fiber installs.
I'm trying to connect two catalyst switches using sfp modules.
Modules are in place and patch cords connected. I'm not seeing the activity lights come on .  My question is , are the fiber ports turned off by default on new switches??? Do i have to enable the interface for them to be active???</p>
","<p>If your switch has sfp ports coupled with rj45 you should enable sfp mode on them:</p>

<pre><code>interface gi0/45
  media-type sfp
</code></pre>

<p>By default it in <code>media-type rj45 mode</code>.</p>
","2968"
"Tracing TCN Messages in STP","5174","","<p>We have about 20 vlans on a L2 network running Rapid PVST+ where the root bridge is a stack of Cisco's 3750 switches. I am a bit puzzled by the number of TCN notifications I receive on the switch.. </p>

<p>The 3750 stack is the root for all VLANs and it receives TCN notifications on a daily basis (sometimes  more, sometimes a little less). It receives the TCNs at the same time and on the same port for all VLANs. When I trace back where these TCNs come from with <code>show spanning-tree detail | inc ieee|occurr|from|is exec</code>, I end up on a switch (switch-b) with only 5 trunks configured and no access ports. </p>

<p>I cannot match an event like a link on this switch going up or down on the same time the TCNs are received. When I issue the above command on this switch the results tells me that the last topology change was much longer ago.</p>

<p>My conclusions:</p>

<p>The TCN sent must be trigged by an event on a trunk link or an entire switch because all VLANs received the topology change notification. It must be something local on switch-b.</p>

<p>What can be the reason for originating these TCNs? The 5 trunk links didn't change their state. It cannot come further downstream because the last topology change on switch-b doesn't match the last topology change on the core. The last topology change on switch-b is much longer ago.</p>

<p>Any thoughts?</p>
","<p>You should be able to simply debug the TCNs. In my case I recently debugged them using
<code>debug spann mstp tc</code> (as I run MSTP), but also using <code>debug spanning-tree events</code>
you will see them:</p>

<pre><code>Jul 10 07:42:18 UTC: STP: VLAN0228 Topology Change rcvd on Gi1/0/9       &lt;&lt;&lt; received
Jul 10 07:42:18 UTC: STP: VLAN0228 sent Topology Change Notice on Po10   &lt;&lt;&lt; forwarded
</code></pre>
","2280"
"What exactly is IPoE?","5168","","<p>I am familiar with PPPoE but getting confused with the term IPoE. Is this same as usual ethernet with DHCP server? Does this have any auth built-in? How do I get authenticated? What can a client connect? I did some googling but the information I got is still not clear.</p>

<p>Thanks,
gs</p>
","<p>So in the strictest sense, ""IP over Ethernet"" is exactly what it sounds like, it's the encapsulation of IP packets (datagrams, formally) in standard ethernet frames.  For much of the networking universe this is just ""normal"" IP as so much of the transport has migrated to Ethernet nowadays.  Somewhat more specifically speaking, IPoE is often used in comparison to PPPoE when discussing how services such as residential broadband are delivered to the end user.  This can be a little confusing as PPPoE would more accurately be described as ""IP packets encapsulated in PPP, which is in turn encapsulated in Ethernet""... but it's just broadly known as ""PPPoE"".  </p>

<p>The use of either ""PPPoE"" or ""IPoE"" in the context of residential broadband also almost always implies other components of the service delivery system, such as address allocation, authentication, accounting, etc.  Authentication is normally a RADIUS server or sometimes Diameter.  The exact rules on how authentication is performed and what devices can/can't connect are usually set up by the specific service provider.  Broadly speaking, ""IPoE"" is more common in cable access networks, and ""PPPoE"" is more common in DSL and dialup access networks: although this is by no means cast in stone.</p>

<p>I found the document below to be relatively useful:</p>

<p><a href=""http://telecomsite.ru/upload/news/using_pppoe_and_ipoe.pdf"" rel=""noreferrer"">http://telecomsite.ru/upload/news/using_pppoe_and_ipoe.pdf</a></p>
","39568"
"Hardware tap vs port mirroring - Any limitations?","5167","","<p>I predominantly work in a Cisco environment and contemplating buying a network tap device for use with Wireshark.</p>

<p>Can anyone provide the pros and cons from their experience between using network taps OR setting up port mirroring given considerations like ease of use, cost of kit and are there limitations between the 2 approaches respectively?</p>
","<p>(having worked with this for a decade now)</p>

<p>Hands down, the biggest functional difference between a tap and a span... a passive tap will never, <em>ever</em> drop a frame, under any circumstances -- it electrically duplicates the frame, errors and all.  Active taps (regenerative, or aggregate) <em>can</em> drop frames, eg. if the bidirectional traffic exceeds the link speed of the monitor port. (a 1G link cannot carry TX+RX 1G (2G) of traffic)</p>

<p>Switch SPAN ports <em>will</em> drop traffic.  The SPAN is the lowest priority to the switch -- it will sacrifice the SPAN traffic in favor of maintaining live traffic. A slightly loaded switch may never show this, but I've had dozens of customer calls from all over the world complaining that <em>we</em> dropped traffic, when it was in fact their switch SPAN that didn't send it to us.</p>

<p>However, SPANs are cheap and plentiful. Almost every managed switch supports setting up a monitor session.  And they are usually trivial to setup and/or reconfigure.  Taps, on the other hand, are exceedingly expensive and rare.  Taps require unplugging network cables, which has a lot of resistance from just about everyone. And they cause a hit when they lose power. (momentary, not ""unplugged == broken link"".  even dirt simple ones will maintain link when off.)</p>
","595"
"Reason of ""aaa authorization exec default group tacacs+"" command in Cisco IOS?","5162","","<p>I have a following very minimalistic AAA configuration in ISR router with IOS 12.4(22)T:</p>

<pre><code>aaa new-model
aaa authentication login default group tacacs+ enable
aaa authentication enable default group tacacs+ enable
aaa authorization exec default group tacacs+ 
aaa session-id common
</code></pre>

<p>After authentication I end up in privilege level 15. Now if execute commands like <code>conf t</code> or <code>show ver</code>, the router does not consult with TACACS+ server(I run a packet capture on TACACS+ server TCP port 49). What exactly the <code>aaa authorization exec default group tacacs+</code> does? When does the command authorization happen?</p>
","<p>It seems to me that <code>aaa authorization exec default group tacacs+</code> command forces TACACS+ client(Cisco ISR router in my case) to take account the <code>service = exec</code> configuration snippet in TACACS+ daemon(<code>tac_plus</code> from <a href=""http://www.shrubbery.net/tac_plus/"" rel=""nofollow"">http://www.shrubbery.net/tac_plus/</a>) configuration file. For example:</p>

<pre><code>service = exec {
  priv-lvl = 15
  autocmd = ""show version""
}
</code></pre>

<p>If I remove the <code>aaa authorization exec default group tacacs+</code> command I end up in IOS shell in privilege level 1 and <code>show version</code> is not automatically executed. However, I would like to have an authoritative answer and does this command have any other purpose?</p>
","17743"
"Cisco 2960 switch will not recognize new TACACS+ commands","5156","","<p>I'm trying to add tacacs info to a switch.  However, I'm unable to use the new tacacs commands, even though the switch tells me to.</p>

<p><strong>WS-C2960-24PC-L - Version 15.0(2)SE5</strong></p>

<pre><code>switch(config)#tacacs-server host 10.1.1.1
Warning: The cli will be deprecated soon
'tacacs-server host 10.1.1.1'
Please move to 'tacacs server &lt;name&gt;' CLI
</code></pre>

<p>Ok, so I'll use it that way...</p>

<pre><code>wtc2b1asw01(config)#tacacs server ABC
                          ^
% Invalid input detected at '^' marker.
</code></pre>

<p>Guess I can't.</p>

<p>Any ideas on what I'm missing?</p>
","<pre><code>sw-R2-3#show ver | i Software
Cisco IOS Software, C2960S Software (C2960S-UNIVERSALK9-M), Version 15.0(2)SE3, RELEASE SOFTWARE (fc1)
sw-R2-3#conf t
Enter configuration commands, one per line.  End with CNTL/Z.
sw-R2-3(config)#tacacs?
tacacs  tacacs-server  

sw-R2-3(config)#tacacs ?
  server  Server configuration

sw-R2-3(config)#tacacs server ?
  WORD  Name for the tacacs server configuration

sw-R2-3(config)#tacacs server foo 
sw-R2-3(config-server-tacacs)#
</code></pre>

<p><code>aaa new-model</code> maybe?</p>

<p>[back story]<br>
This is one of many of my Cisco peavs... When I was first starting out with IOS (back when IOS 10 was new), I sat down with the ~1000 page documentation on authentication configuration. After a day of ""<em>why the f*** doesn't any of this work</em>"", I got to page 958-ish, where, as a <em>complete</em> after thought, the authors finally mention, ""<em>and you have to enter</em> aaa new-model <em>to turn any of this on.</em>"" I think I actually burned that handbook. (and was never allowed to go to NANOG, because I might ""do something"" to that author.) F'ing CCIEs!</p>
","8026"
"Why are IPv4 addresses 32-bit?","5150","","<p>Many moons ago, when I was just a <em><a href=""http://www.oxforddictionaries.com/definition/english/wee"" rel=""nofollow noreferrer"">wee</a> <a href=""http://www.oxforddictionaries.com/definition/english/bairn"" rel=""nofollow noreferrer"">bairn</a></em> commencing my career, I had a job interview for a low-level developer role.  Having at that time just learned how CIDR was implemented, I was keen to show off my knowledge.</p>

<p>Sadly, that tactic didn't work out too well for me.  I recall being completely floored by the very first question that was asked (and, then ruffled, it all went downhill).  The question was:</p>

<blockquote>
  <p><em>Why</em> are IPv4 addresses 32-bit?</p>
</blockquote>

<p>I readily admitted that I didn't <em>know</em> the answer, but I <em>did</em> know that the original protocol design divided the address space into an 8-bit network number and a 24-bit host identifier&mdash;so I tried to rationalise it on the grounds that the protocol designers imagined an Internet of a few networks (after all, it was originally intended to link together a <em>specific</em> few) each comprising many hosts and, for simplicity of programming, kept everything aligned to byte boundaries.</p>

<p>I recall the interviewer being unsatisfied with my answer and suggesting to me that the <em>real</em> reason is that it's guaranteed to fit inside a <code>long int</code> in C, so simplifies implementation details.  Being young and green at the time, I accepted that as a reasonable answer and (before today) hadn't thought any more of it.</p>

<p>For some reason that conversation has just returned to me and, now that I reflect upon it, it doesn't seem entirely plausible:</p>

<ol>
<li><p>Under the original addressing scheme comprising fixed-size network and host fields, it's unlikely that a developer would have <em>wanted</em> to assign the concatenation of the two fields to a single variable (I don't have access to any early IP implementations to verify what they actually did in practice); and</p></li>
<li><p>At the time that works on TCP/IP began, C was neither standardized nor the <em>de facto</em> ""lingua franca"" of low-level software development that it has become today.</p></li>
</ol>

<p><strong>Was the interviewer's suggestion actually founded in fact?  If not, what <em>were</em> the real reasons that the protocol designers chose 32-bit addressing?</strong></p>
","<p>Here's a link to a <a href=""https://www.youtube.com/watch?v=17GtmwyvmWE&amp;feature=share&amp;t=26m18s"" rel=""nofollow noreferrer"">Hangout with Vint Cerf</a> (Apr. 2014) where he explains how he thought that this internet was supposed to be an experiment only:</p>

<blockquote>
  <p>As we were thinking about the Internet (thinking well, this is going to be some arbitrary number of networks all interconnected &mdash; we don't know how many and we don't know how they'll be connected), but <em>national</em> scale networks we thought ""<strong>well, maybe there'll be two per country</strong>"" (because it was expensive: at this point Ethernet had been invented but it wasn't proliferating everywhere, as it did do a few years later).</p>
  
  <p>Then we said ""<strong>how many countries are there?</strong>"" (two networks per country, how many networks?) and we didn't have Google to ask, so <strong>we guessed at 128</strong> and that would be 2 times 128 is 256 networks (that's 8 bits) and then we said ""<strong>how many computers will there be on each network?</strong>"" and we said ""<strong>how about 16 million?</strong>"" (that's another 24 bits) so we had a 32-bit address which allowed 4.3 <em>billion</em> terminations &mdash; which I thought in 1974/3 was enough to do the experiment!</p>
</blockquote>

<p>I had already posted this as a comment to Jens Link's answer, but I felt it shoud surface a bit more.</p>
","7974"
"DWDM active and passive comparison","5136","","<p>I am trying to understand the cross-over point for when I would deploy active DWDM over passive DWDM (as active seems to be more expensive based on my initial research);</p>

<ul>
<li><p>Passive DWDM takes in various colours / wavelengths and muxes them onto a single fibre pair.  This seems to be the same principal as a CWDM mux/demux, however with DWDM we know, we can get a lot more channels. (Also I believe that with CWDM we are using different frequencies within the ITU grid?)</p></li>
<li><p>Active DWDM can take in 8/16/32 etc channels all on the same wavelength (say 1310nm) and them shift them all to different individual frequencies before muxing them onto a single fibre. They can be demuxed at the other end all back to the same frequency again (say 1310nm).</p></li>
</ul>

<p>So am I correct that the reasons for deploying active DWDM over passive are that</p>

<ol>
<li>Active can provide more channels</li>
<li>Active can use all the same input frequency, thereby any 1310nm device can connect to it, without the need for tuned/coloured optics?</li>
</ol>

<p>Have I missed any pro's of active over passive? What are the con's?</p>
","<p>It all really depends on your requirements and current setup.  That being said, here are some of the main ones.</p>

<h2>Active</h2>

<p><strong>Pros:</strong> </p>

<ol>
<li><p>Active can fit a lot more wavelengths (colors) onto a single fiber pair.  The pro being, the composite signal that is sent over a single fiber pair can carry more bandwidth than a passive of the same size could, in turn you don't need as much physical fiber between your two sites (this really only applies if you require that much bandwidth).  This is advantageous when distance is a problem because it allows you to get more out of a single leased fiber pair as opposed to passive - <a href=""https://i.stack.imgur.com/w5UlJ.jpg"" rel=""noreferrer"">see here</a>.  </p></li>
<li><p>Active setups grant you more control over your optical network, you can dynamically re-tune wavelengths without dropping connections (it's transparent to whatever is riding on that wavelength).  </p></li>
<li><p>Scalability - Active can be easier to scale as your network grows (you can fit more wavelengths on the fiber, see above), but again - we're talking seriously big iron.  I'll dig into it a bit more below.</p></li>
</ol>

<p><strong>Cons:</strong></p>

<ol>
<li><p>EXPENSIVE - Active DWDM setups are extremely expensive in comparison to passive, so as ytti mentioned, if your distance requirements aren't unreasonable this is not the route to go.</p></li>
<li><p>Setup/Configuration - Depending on your vendor, configuration can be a serious undertaking, and require a solid understanding of optical networks.  There are many more components in active builds.</p></li>
</ol>

<h2>Passive</h2>

<p><strong>Pros:</strong></p>

<ol>
<li><p>Inexpensive (in comparison to active) - As mentioned above, less components are required, and less engineering time is required.</p></li>
<li><p>INITIAL Setup - Because of the colored optics there isn't a need to tune wavelengths for all of your connections.  It's a matter of matching your colored optics and plugging it.</p></li>
</ol>

<p><strong>Cons:</strong></p>

<ol>
<li><p>Scalability - Not only are you limited to colored optics, and thus less wavelengths on the transport fiber as you grow you would be require to have more passive devices.  Furthermore, with the more passive devices you have the more difficult it can be to manage, you'll have to start managing the same wavelength on multiple passive devices and they could be serving different purposes on each depending on your setup.</p></li>
<li><p>Control - If you need to change a wavelength or connection for whatever reason, you're option is limited to taking it out of service and disconnecting the physical cabling as the wavelength is tied to the optic.</p></li>
</ol>

<p>Hope this helps.</p>
","3801"
"What happens when SYN and FIN flags in TCP headers are both set to 1?","5120","","<p>In TCP header, what happens when both SYN and FIN flags are set to 1? Or, can both even be simultaneously set to 1 ?</p>
","<p>In normal TCP behavior, they should never both be set to 1 (on) in the same packet.  There are <a href=""http://sectools.org/tag/packet-crafters/"">many tools that exist that let you craft TCP packets</a>, and the typical response to a packet with SYN and FIN bits set to one is a RST, since you are violating the rules of TCP.</p>
","12535"
"What does a UDP connection timeout really mean?","5120","","<p>Since UDP is a connectionless protocol, I'm confused by the setting on my Sonicwall Firewall for ""UDP Connection Timeout"".  It's set at a default of 30 seconds -- but what exactly times out after 30 seconds?</p>

<p><a href=""https://i.stack.imgur.com/leECJ.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/leECJ.png"" alt=""WTF?""></a></p>

<p>Here's my actual real-world situation:
I have an NTP server in the ntp.org pool that serves about 3000 queries per minute.  This puts a bit of a strain on my SOHO grade TZ-200 -- not in terms of bandwidth; but in terms of # of connections it has passing through it.  I'm wondering if the UDP connections somehow are 'kept alive' on the SonicWall; even though they're (by definition) connectionless.</p>

<p>What am I missing here?  What does SonicWall mean when it talks about a ""UDP Connection Timeout""?</p>
","<p>While there is no formal ""connection"" with UDP there is still a convention that clients send requests and expect to get responses back with the source IP and port swapped with the Destinatoin IP and port.</p>

<p>Stateful firewalls and NATs therefore assume that packets with a given combination of source IP/source port/Destination IP/Destination port and the corresponding combination with source and destination swapped form part of a ""connection"". This allows rules like ""outgoing connections only"" to be applied to UDP and allows reverse translations to be applied to response packets.</p>

<p>Unfortunately the firewall or NAT has no way of knowing when the client has finished talking to the server. So it has to wait for a timeout before removing the entry from it's state tracking tables. That is the timeout you are setting.</p>

<p>In principle it would be possible to build a NAT box that used a stateless approach for port forwards while maintaining a stateful approach for outgoing connections but it's simpler to just use stateful NAT for everything and it sounds like this is what your vendor is doing. </p>

<p>Unfortunately as you have discovered this sucks for stateless UDP servers serving large numbers of small requests. You end up in a situation where the firewall consumes far more resources than the sever itself.</p>
","37672"
"TCPDump and listening to wifi traffic of others","5110","","<p>This thread is to continue <a href=""https://networkengineering.stackexchange.com/questions/19737/tcpdump-filter-by-mac-address"">my previous one, where I was talking about the TCPDump command.</a></p>

<p>There is still something I don't get.  According to <a href=""http://www.ihtb.org/security/tcpdump-explained.txt"" rel=""nofollow noreferrer"">this website</a> (and some others), and according to my tests, one of the goals of TCPDump is exactly to intercept and display the communications of another user or
computer. So basically it can sniff everything on the network, and when
data are not encrypted we should be able to read them.</p>

<p>Please tell me if I am right about the following:</p>

<p>Let's talk about a wireless network where devices A, B, and C are connected to a WiFi access point. A, B, and C are all on the same network, let say 10.11.204.__ where A is 10, B is 20, and C is 30 for example.</p>

<p><strong>Situation 1)</strong> In normal times if A wants to communicate with B, it will
send out a packet with the IP Address of B in the header.  So if the third
device, C, is on the same network it will receive the packet addressed
to B, but will see that the IP address is different that its own and will
drop the packet.</p>

<p><strong>Situation 2)</strong> When using TCPDump in the exact same situation (A sends a
packet to B, with B IP in the header), C will receive the packet and will
see that it is not addressed to him but will not drop it.  And we will
be able to read any part of the packet that is not encrypted. (So
usually it is only the header).</p>

<p>Does it work like that?  If it does, I don't understand why I can
not read packets on my computer when I surf the web with my iPhone.  I have also some issues with certain Android devices, for these devices I can only read ""Echo"" requests and ""Echo"" responses.</p>

<p>It is blurred in my mind, I like networking and I would like to
understand that point. Thank you.</p>
","<p>A standard TCPDump, without any modifications to the mode of the Wireless NIC, will not display ALL frames traversing the wireless network.  It will only display frames directed at (and capable of being received by) your station.  TCPDump is just grabbing the information that is specifically delivered to your station, decrypted, and presented to the OS at the normal Ethernet/IP level.</p>

<p>To listen to ALL frames reaching your station on the wireless network, you'll need have a NIC capable of running in Monitor mode, and then put your NIC into Monitor mode.  While in Monitor mode, you won't be able to send traffic, only to observe all frames on the channel.  This is done similarly to the following:</p>

<pre><code>iw phy phy0 interface add wlan2 type monitor
iw dev wlan2 set freq 2412
ifconfig wlan2 up

tcpdump -i wlan2
</code></pre>

<p><a href=""https://wireless.wiki.kernel.org/en/users/documentation/iw"" rel=""nofollow"">Read the documentation</a> on <code>iw</code> for more information, and <a href=""http://sandilands.info/sgordon/capturing-wifi-in-monitor-mode-with-iw"" rel=""nofollow"">also, see <strong>this</strong> page for some good information</a> on using <code>iw</code> for monitoring, with an example.</p>

<p>As noted by @ylearn in the comments, your station will only be able to capture frames under specific circumstances (Some more obvious than others):</p>

<ol>
<li>Be in range of the sending station (duh)</li>
<li>Be of the same type as the sending station (single vs multiple spacial streams for example)</li>
<li>Be listening to the same channel/frequency as the sending station (listening to 2.4 GHz channels won't help you capture 5Ghz traffic, etc)</li>
</ol>

<p>And there are more conditions, but the bottom line is that wireless networks are wireless, so there's no guarantee of delivery of traffic and therefore no guarantee of receipt on your Monitoring station. :)</p>

<hr>

<p>Now with all of that said, you may have all the frames that are being transmitted, but you would still need to decrypt the frames.  This a large topic in and of itself, however the basics are this: the frames that any 802.11 station sends into the air are sent encrypted so that not just anyone can sniff all connections.</p>

<p><a href=""https://wiki.wireshark.org/HowToDecrypt802.11"" rel=""nofollow"">Wireshark has a nice intro page on Decyrypting 802.11</a>.  I recommend reading that, understanding it, and moving on from there.</p>

<hr>

<p><strong>Edit to respond to your comments, @phenetas:</strong></p>

<p>First, as alluded to in my response, I was assuming your OS was Linux in my answer so I recommended using <code>iw</code>.  If you're serious about learning more about penetrating 802.11 networks, I'd recommend looking into a linux distro such as <a href=""https://www.kali.org/"" rel=""nofollow"">Kali Linux, which is designed for exactly that purpose</a>.  (Use this power only for good please; with great power comes great responsibility, etc, etc.)</p>

<p>However, if you're insistent on using MAC OSX, you have other options as well to put the NIC into monitor mode (including just using <a href=""https://www.wireshark.org/download.html"" rel=""nofollow"">Wireshark</a> instead of TCPDump).  Some Googling around for MAC OSX monitor mode should help you there.</p>

<p>Finally, I would look into reading more about <a href=""https://en.wikipedia.org/wiki/Broadcast_address"" rel=""nofollow"">IP Broadcasts</a> and <a href=""https://en.wikipedia.org/wiki/Multicast_DNS"" rel=""nofollow"">mDNS (Multicast DNS)</a> as that is what you're seeing initially from the other devices.  These are not ""intercepted"" packets, this <strong>IS</strong> traffic destined to your device, that is why TCPDump is displaying the packets.</p>
","19806"
"Rolling Stack Upgrade on a Catalyst 3850","5099","","<p>I'm looking to do an IOS upgrade on a two Switch 3850 stack, with minimum downtime.</p>

<p>As our servers all have redundant uplinks to each switch, it would be preferable to reload each stack member individually. Unfortunately all the documentation I've read so far implies the entire stack needs to reload at the same time.</p>

<p>So my Question is: Can the IOS be upgraded on a 3850 Stack, without a complete outage? If so, how would I go about doing so?</p>
","<p>Nope, sorry.  That's why I prefer daisy-chaining to stacking, even though I lose out on some bandwidth and a couple of ports.</p>

<p>There are some helpful hints on the upgrade here, though:</p>

<p><a href=""https://supportforums.cisco.com/discussion/11924636/3850-stack-ios-upgrade"">https://supportforums.cisco.com/discussion/11924636/3850-stack-ios-upgrade</a></p>
","9966"
"Cisco Prime NCS not starting","5091","","<p>I have received the Cisco Prime OVA file and which we placed onto an Oracle virtual environment. We turn the VM on and the CLI boots, When we try to start the NCS service we get errors.</p>

<pre><code>HOSTNAME/USER# ncs start

Starting Network Control System...

Exception in thread ""main"" java.lang.NullPointerException
        at com.cisco.wnbu.udi.impl.UDIManager.isPhysicalAppliance(UDIManager.java:184)
        at com.cisco.packaging.WCSAdmin.start(WCSAdmin.java:335)
        at com.cisco.packaging.WCSAdmin.runMain(WCSAdmin.java:281)
        at com.cisco.packaging.WCSAdmin.main(WCSAdmin.java:901)
</code></pre>

<p>Logs </p>

<pre><code>HOSTNAME/USER# show logging   
    07/18/13 10:25:38.878 INFO  [system] [main] Setting management interface address to 192.168.0.10
    07/18/13 10:25:38.884 INFO  [system] [main] Setting peer server interface address to 192.168.0.10
    07/18/13 10:25:38.884 INFO  [system] [main] Setting client interface address to 192.168.0.10
    07/18/13 10:25:38.884 INFO  [system] [main] Setting local host name to HOSTNAME
    07/18/13 10:25:40.341 ERROR [system] [main] THROW
    java.sql.SQLRecoverableException: IO Error: The Network Adapter could not establish the connection
            at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:419)
            at oracle.jdbc.driver.PhysicalConnection.&lt;init&gt;(PhysicalConnection.java:536)
            at oracle.jdbc.driver.T4CConnection.&lt;init&gt;(T4CConnection.java:228)
            at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
            at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:521)
            at java.sql.DriverManager.getConnection(Unknown Source)
            at java.sql.DriverManager.getConnection(Unknown Source)
            at com.cisco.server.persistence.util.OracleSchemaUtil.openConnection(OracleSchemaUtil.java:277)
            at com.cisco.server.persistence.util.OracleSchemaUtil.dbServerUp(OracleSchemaUtil.java:836)
            at com.cisco.packaging.DBAdmin.dbServerUp(DBAdmin.java:1429)
            at com.cisco.packaging.WCSAdmin.status(WCSAdmin.java:833)
            at com.cisco.packaging.WCSAdmin.status(WCSAdmin.java:757)
            at com.cisco.packaging.WCSAdmin.wcsServerUp(WCSAdmin.java:637)
            at com.cisco.packaging.WCSAdmin.start(WCSAdmin.java:294)
            at com.cisco.packaging.WCSAdmin.runMain(WCSAdmin.java:281)
            at com.cisco.packaging.WCSAdmin.main(WCSAdmin.java:901)
    Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
            at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:375)
            at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
            at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:678)
            at oracle.net.ns.NSProtocol.connect(NSProtocol.java:238)
            at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1054)
            at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:308)
            ... 15 more
    Caused by: java.net.ConnectException: Connection refused
            at java.net.PlainSocketImpl.socketConnect(Native Method)
            at java.net.PlainSocketImpl.doConnect(Unknown Source)
            at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
            at java.net.PlainSocketImpl.connect(Unknown Source)
            at java.net.SocksSocketImpl.connect(Unknown Source)
            at java.net.Socket.connect(Unknown Source)
            at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:209)
            at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
            at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:353)
            ... 20 more
    07/18/13 10:25:40.347 INFO  [admin] [main]
    07/18/13 10:25:40.347 INFO  [admin] [main] Starting Network Control System...
    07/18/13 10:25:40.347 INFO  [admin] [main]
    07/18/13 10:25:40.394 ERROR [admin] [main] Problem using CARS API:
    com.cisco.cars.fnd.CARSException: CARS_FAILURE : -999 : Failed to get UDI configuration. : Failure occurred during request
            at com.cisco.cars.fnd.CARSException.analyzeReturnCode(CARSException.java:118)
            at com.cisco.cars.serviceEngine.impl.EngineAdminServiceImpl.getUDI(EngineAdminServiceImpl.java:66)
            at com.cisco.wnbu.udi.impl.UDIManager.generateUDI(UDIManager.java:69)
            at com.cisco.wnbu.udi.impl.UDIManager.setPersistenceDirectory(UDIManager.java:139)
            at com.cisco.packaging.WCSAdmin.start(WCSAdmin.java:332)
            at com.cisco.packaging.WCSAdmin.runMain(WCSAdmin.java:281)
            at com.cisco.packaging.WCSAdmin.main(WCSAdmin.java:901)
    07/18/13 10:25:40.396 ERROR [admin] [main] Problem using CARS API:
    com.cisco.cars.fnd.CARSException: CARS_FAILURE : -999 : Failed to get UDI configuration. : Failure occurred during request
            at com.cisco.cars.fnd.CARSException.analyzeReturnCode(CARSException.java:118)
            at com.cisco.cars.serviceEngine.impl.EngineAdminServiceImpl.getUDI(EngineAdminServiceImpl.java:66)
            at com.cisco.wnbu.udi.impl.UDIManager.generateUDI(UDIManager.java:69)
            at com.cisco.wnbu.udi.impl.UDIManager.setVirtualPID(UDIManager.java:169)
            at com.cisco.packaging.WCSAdmin.start(WCSAdmin.java:333)
            at com.cisco.packaging.WCSAdmin.runMain(WCSAdmin.java:281)
            at com.cisco.packaging.WCSAdmin.main(WCSAdmin.java:901)
    07/18/13 10:25:40.397 ERROR [admin] [main] Problem using CARS API:
    com.cisco.cars.fnd.CARSException: CARS_FAILURE : -999 : Failed to get UDI configuration. : Failure occurred during request
            at com.cisco.cars.fnd.CARSException.analyzeReturnCode(CARSException.java:118)
            at com.cisco.cars.serviceEngine.impl.EngineAdminServiceImpl.getUDI(EngineAdminServiceImpl.java:66)
            at com.cisco.wnbu.udi.impl.UDIManager.generateUDI(UDIManager.java:69)
            at com.cisco.wnbu.udi.impl.UDIManager.setPhysicalPID(UDIManager.java:154)
            at com.cisco.packaging.WCSAdmin.start(WCSAdmin.java:334)
            at com.cisco.packaging.WCSAdmin.runMain(WCSAdmin.java:281)
            at com.cisco.packaging.WCSAdmin.main(WCSAdmin.java:901)
    07/18/13 10:25:40.397 ERROR [admin] [main] Problem using CARS API:
    com.cisco.cars.fnd.CARSException: CARS_FAILURE : -999 : Failed to get UDI configuration. : Failure occurred during request
            at com.cisco.cars.fnd.CARSException.analyzeReturnCode(CARSException.java:118)
            at com.cisco.cars.serviceEngine.impl.EngineAdminServiceImpl.getUDI(EngineAdminServiceImpl.java:66)
            at com.cisco.wnbu.udi.impl.UDIManager.generateUDI(UDIManager.java:69)
            at com.cisco.wnbu.udi.impl.UDIManager.getUDI(UDIManager.java:112)
            at com.cisco.wnbu.udi.impl.UDIManager.isPhysicalAppliance(UDIManager.java:184)
            at com.cisco.packaging.WCSAdmin.start(WCSAdmin.java:335)
            at com.cisco.packaging.WCSAdmin.runMain(WCSAdmin.java:281)
            at com.cisco.packaging.WCSAdmin.main(WCSAdmin.java:901)
</code></pre>

<p>Any Help is appreciated</p>
","<p>Prime/NCS is only supported on Vmware ESX 4.x and 5.X.
see 
<a href=""http://www.cisco.com/en/US/docs/wireless/ncs/1.1/release/notes/NCS_RN1.1.html#wp167866"" rel=""nofollow"">http://www.cisco.com/en/US/docs/wireless/ncs/1.1/release/notes/NCS_RN1.1.html#wp167866</a>
<br>and 
<a href=""http://www.cisco.com/en/US/prod/collateral/netmgtsw/ps6504/ps6528/ps12239/data_sheet_c78-715144.html"" rel=""nofollow"">http://www.cisco.com/en/US/prod/collateral/netmgtsw/ps6504/ps6528/ps12239/data_sheet_c78-715144.html</a><br>
for more details.</p>
","2418"
"Does the source MAC address of a frame change when it passes through several switches?","5078","","<p>If PC1 sends an Ethernet frame to Switch1 which forwards the frame to Switch2 which in turn forwards the frame to PC2, does any decapsulation happen that changes the source MAC address? </p>
","<p>No. If all the switches are layer-2 switches, the frames are switched without any changes.</p>

<p>Only with routers, including layer-3 switches where the packets need to cross to other VLANs, will the frames be stripped and rewritten for the new network or VLAN.</p>
","28330"
"How to connect two switches together","5051","","<p>I am a novice so please bear with me.</p>

<p>At work we have a Cisco SG200-50P (which is connected to our router and server)</p>

<p>I just bought a Engenius EGS2110P that I want to add to our network.</p>

<p>How do I do this please? Do I just get a CAT5e and connect it to a empty port on each switch and then it will work? Or do I have to use the Link/Act ports, or something else?</p>

<p>Cheers, Roger</p>
","<p>you need to bring cat 5 (cat 6 preferred as it is 1G BW) and connect the two switches to each other and then log to each one (using the GUI)and configure the ports involved in this connection as a trunk , <strong><em>change the management IP of the two switches</em></strong> to be in the same range to be able to manage them from any where .</p>

<p><strong><em>NOTE:</em></strong> if you connected the two switches to each other directly without trunk configuration , it will work but under the consideration of you run single vlan which is called   <strong><em>spread network</em></strong> but this solution is not standered and not recommended as well</p>
","22829"
"Is a TCP three-way handshake required for an HTTP POST?","5041","","<p>I don't quite understand if i posting http form data from the browser to the server, does the protocol still need to make three-way handshake (syn-ack-data) or it only works for GET http requests?</p>
","<p>Both HTTP GET and HTTP POSTS use TCP.  If you are asking whether a POST also requires a 3-way TCP handshake (syn-synack-ack), it does just like any other TCP connection.  The TCP handshake is required before any application protocol (such as HTTP) starts work.</p>

<p>FYI, your three-way handshake is incorrect; it should be ""syn-synack-ack""</p>

<p><strong>ADD:</strong></p>

<p>If browser use <a href=""https://en.wikipedia.org/wiki/QUIC"" rel=""nofollow noreferrer"">QUIC</a> (Quick UDP Internet Connections, pronounced quick. Proposed by Google) protocol for HTTP is possible to avoid 3-way TCP handshake.
But AFAIK it supported in Chrome and Google.</p>

<p>Most software prefer <a href=""https://en.wikipedia.org/wiki/HTTP/2"" rel=""nofollow noreferrer"">HTTP/2</a> which still TCP but wit many features it use 
persistent connection then 3-way handshake done once for each server server.</p>

<p>If this protocols is used, 3-way hanshake can be avoided by any request, including GET.</p>
","13439"
"route tags and policy routing alternatives - traffic engineering question","5038","","<p>I have a specific static routes that require advertising into EIGRP and eventually into BGP for remote offices.  My goal is to cut down on the configuration updates required for updating not only the static routes for new additions, but the route-map ACL for EIGRP, and the policy-route ACL to the next hop.</p>

<p>I've learned that route tags may be an option for routing traffic with less configuration.  Basically I can tag a static route with a number, (such as 20).  Then I can create a route-map that matches on tag 20, and sets tag 20 and configure this within EIGRP to match and advertise that tag again.  On the receiving router I should be able to perform this same step for BGP in a similar manner (EIGRP-to-BGP route-map that retags), however, I still have a policy route that doesn't quite fit with this tagging method (ACL has a source/destination - whereas a prefix list does not).</p>

<p>My goal here is to create specific static routes with tags, and have those tags carry through and advertise properly (including a policy route-map or equivalent ) without me having to update 3 other ACLs everytime.  Policy-map doesn't play well with the redistribution - any one come up with other ideas for something similar?</p>
","<p>I am not 100% sure whether tags are carried in BGP updates but here is what I put together pretty quick:</p>

<p><img src=""https://i.stack.imgur.com/KvHWn.png"" alt=""enter image description here""></p>

<p>Router ""Static"":</p>

<pre><code>interface Loopback0
 ip address 172.16.1.1 255.255.255.0
!
interface Loopback1
 ip address 172.16.2.1 255.255.255.0

interface Ethernet0/1
 ip address 172.16.0.1 255.255.255.0
 half-duplex

ip route 0.0.0.0 0.0.0.0 172.16.0.2
</code></pre>

<p>Router R1:</p>

<pre><code>interface Ethernet0/0
 ip address 10.0.0.1 255.255.255.252
 half-duplex

interface Ethernet0/1
 ip address 172.16.0.2 255.255.255.0
 half-duplex

ip route 172.16.1.0 255.255.255.0 172.16.0.1 tag 20
ip route 172.16.2.0 255.255.255.0 172.16.0.1 tag 20

router eigrp 100
 redistribute static route-map MyRouteMap
 network 10.0.0.0 0.0.0.3
 no auto-summary

route-map MyRouteMap permit 10
 match tag 20
</code></pre>

<p>Router R2:</p>

<pre><code>interface Ethernet0/0
 ip address 10.0.0.2 255.255.255.252
 half-duplex

interface Ethernet0/1
 ip address 10.0.0.5 255.255.255.252
 half-duplex

router eigrp 100
 network 10.0.0.0 0.0.0.3
 no auto-summary

router bgp 65000
 no synchronization
 bgp log-neighbor-changes
 redistribute eigrp 100 route-map MyRouteMap
 neighbor 10.0.0.6 remote-as 65000
 neighbor 10.0.0.6 next-hop-self
 no auto-summary

route-map MyRouteMap permit 10
 match tag 20

R2#show ip route 172.16.1.0
Routing entry for 172.16.1.0/24
  Known via ""eigrp 100"", distance 170, metric 307200
  Tag 20, type external
</code></pre>

<p>Router R3:</p>

<pre><code>interface Ethernet0/1
 ip address 10.0.0.6 255.255.255.252
 half-duplex

router bgp 65000
 no synchronization
 bgp log-neighbor-changes
 neighbor 10.0.0.5 remote-as 65000
 no auto-summary

R3#show ip bgp 172.16.1.0
BGP routing table entry for 172.16.1.0/24, version 3
Paths: (1 available, best #1, table Default-IP-Routing-Table)
  Not advertised to any peer
  Local
    10.0.0.5 from 10.0.0.5 (10.0.0.2)
      Origin incomplete, metric 307200, localpref 100, valid, internal, best
</code></pre>

<p>I hope this is what you were asking for.</p>
","5938"
"ip ssh source-interface vlan - allow ssh from specific vlan not working","5017","","<p>I am doing some practice on <code>GNS3</code> related switch and want to allow SSH from specific <code>VLAN</code> Ex: vlan1 </p>

<p>In GNS3 i used router with 16NM ethernet module to emulate switch, so i am using following command to tell allow SSH from only vlan1, it seems not working. Do i need <code>ACL</code> ? </p>

<pre><code>ip ssh source-interface vlan 1
</code></pre>

<h1>EDIT</h1>

<p>I have following cisco config. but its not working </p>

<pre><code> line con 0
  stopbits 1
 line aux 0
 line vty 5 15
  access-class ALLOW-SSH in
</code></pre>
","<p>You are using the wrong command.
<code>ip ssh source-interface</code> command defines the source IP when starting an SSH session from the router.  It has no effect on other traffic.</p>

<p>To control who can SSH into your router, you use an ACL and access-class.</p>

<pre><code>ip access-list standard ALLOW-SSH
permit 192.168.100.0 0.0.0.255

line vty 0 15
transport ssh
access-class ALLOW-SSH in
</code></pre>
","24977"
"Cisco IOS Forward / reverse name lookups","5008","","<p>I want to configure our Ciscos so they can do forward DNS resolution, but not reverse DNS resolution from the CLI.</p>

<pre><code>R01(config)#ip domain-name domain.local
R01(config)#ip name-server 10.1.1.1
R01(config)#ip domain-lookup
</code></pre>

<p>That config makes the router do a forward lookup when we ping, and reverse lookup under show commands that return ip addresses.  When we do a ""show user"", the router does a reverse lookup for every one of the source ip addresses.  It looks like we get both forward and reverse lookups when we turn on ""ip domain-lookup"".  Is there a way to turn off reverse lookups and leave forward lookups on?</p>
","<blockquote>
  <p>Is there a way to turn off reverse lookups and leave forward lookups on?</p>
</blockquote>

<h2>Summary:</h2>

<p>Use <code>no domain-lookup</code> under <code>line vty 0 4</code>...</p>

<h2>Details:</h2>

<p>You're right, the default behavior is to perform &amp; cache a forward / reverse lookup for the addresses in show commands.  This config starts similar to yours...</p>

<h3>Baseline behaviour: Forward / Reverse lookups</h3>

<pre><code>HotCoffee#clear host *
HotCoffee#sh runn | i ip domain|ip name|^ +domain|NTP
Time source is NTP, 06:10:42.327 CDT Tue Aug 13 2013
ip domain name pennington.net
ip name-server 172.16.1.5
 domain-name pennington.net
HotCoffee#
</code></pre>

<p>After clearing the host cache, there are no entries in it...</p>

<pre><code>HotCoffee#show host
Load for five secs: 0%/0%; one minute: 1%; five minutes: 1%
Time source is NTP, 06:11:46.864 CDT Tue Aug 13 2013

Default domain is pennington.net
Name/address lookup uses domain service
Name servers are 172.16.1.5

Codes: UN - unknown, EX - expired, OK - OK, ?? - revalidate
       temp - temporary, perm - permanent
       NA - Not Applicable None - Not defined

Host                      Port  Flags      Age Type   Address(es)
HotCoffee#
</code></pre>

<p>Doing a <code>show user</code> or <code>ping</code> populates the host cache...</p>

<pre><code>HotCoffee#sh user
    Line       User       Host(s)              Idle       Location
* 66 vty 0     cisco      idle                 00:00:00 tsunami.pennington.net

  Interface    User               Mode         Idle     Peer Address

HotCoffee#ping flame
Translating ""flame""...domain server (172.16.1.5)

Translating ""flame""...domain server (172.16.1.5) [OK]

Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 172.16.1.1, timeout is 2 seconds:
.!!!!
Success rate is 80 percent (4/5), round-trip min/avg/max = 1/2/4 ms
HotCoffee#
</code></pre>

<p>Now there are host entries for both the <code>ping</code> target and <code>show user</code>...</p>

<pre><code>HotCoffee#sh hosts
Load for five secs: 1%/0%; one minute: 0%; five minutes: 0%
Time source is NTP, 06:16:32.811 CDT Tue Aug 13 2013

Default domain is pennington.net
Name/address lookup uses domain service
Name servers are 172.16.1.5

Codes: UN - unknown, EX - expired, OK - OK, ?? - revalidate
       temp - temporary, perm - permanent
       NA - Not Applicable None - Not defined

Host                      Port  Flags      Age Type   Address(es)
tsunami.pennington.net    None  (temp, OK)  0   IP    172.16.1.5
flame.pennington.net      None  (temp, OK)  0   IP    172.16.1.1
flame                     None  (temp, UN)  0  IPv6 
HotCoffee#
</code></pre>

<h3>Solution: Only Forward lookups</h3>

<p>Use <em><code>no domain-lookup</code></em> under the vty / console lines to restrict IOS behaviour to only forward lookups...</p>

<pre><code>HotCoffee#conf t
Enter configuration commands, one per line.  End with CNTL/Z.
HotCoffee(config)#line vty 0 4
HotCoffee(config-line)#no domain-lookup
HotCoffee(config-line)#end
HotCoffee#
</code></pre>

<p>First I clear the host cache for a clean test...</p>

<pre><code>HotCoffee#clear host *
HotCoffee#
HotCoffee#
</code></pre>

<p><code>show user</code> formerly performed a reverse-lookup on 172.16.1.5 as well as populating the host cache, but neither happens now...</p>

<pre><code>HotCoffee#sh user
Load for five secs: 1%/0%; one minute: 0%; five minutes: 0%
Time source is NTP, 06:20:00.250 CDT Tue Aug 13 2013

    Line       User       Host(s)              Idle       Location
* 66 vty 0     cisco      idle                 00:00:00 172.16.1.5   &lt;----

  Interface    User               Mode         Idle     Peer Address

HotCoffee#
HotCoffee#sh host
Load for five secs: 2%/0%; one minute: 0%; five minutes: 0%
Time source is NTP, 06:20:06.729 CDT Tue Aug 13 2013

Default domain is pennington.net
Name/address lookup uses domain service
Name servers are 172.16.1.5

Codes: UN - unknown, EX - expired, OK - OK, ?? - revalidate
       temp - temporary, perm - permanent
       NA - Not Applicable None - Not defined

Host                      Port  Flags      Age Type   Address(es)
                                                                    &lt;----
HotCoffee#
</code></pre>

<p>Just to show that forward lookups still function...</p>

<pre><code>HotCoffee#
HotCoffee#ping flame
Translating ""flame""...domain server (172.16.1.5)

Translating ""flame""...domain server (172.16.1.5) [OK]

Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 172.16.1.1, timeout is 2 seconds:
!!!!!
Success rate is 100 percent (5/5), round-trip min/avg/max = 1/1/4 ms
HotCoffee#
HotCoffee#
HotCoffee#
HotCoffee#sh hosts
Load for five secs: 0%/0%; one minute: 0%; five minutes: 0%
Time source is NTP, 06:25:43.237 CDT Tue Aug 13 2013

Default domain is pennington.net
Name/address lookup uses domain service
Name servers are 172.16.1.5

Codes: UN - unknown, EX - expired, OK - OK, ?? - revalidate
       temp - temporary, perm - permanent
       NA - Not Applicable None - Not defined

Host                      Port  Flags      Age Type   Address(es)
tsunami.pennington.net    None  (temp, OK)  0   IP    172.16.1.5
flame.pennington.net      None  (temp, OK)  0   IP    172.16.1.1
flame                     None  (temp, UN)  0  IPv6 
HotCoffee#
</code></pre>
","2798"
"VXLAN: how receiver knows that the received packet is VXLAN-encapsulated?","4985","","<p>I'm trying to understand how a receiver knows that the received packet is a VXLAN-encapsulated.</p>

<p>Looking at the <a href=""http://tools.ietf.org/html/draft-mahalingam-dutt-dcops-vxlan-00#section-5"" rel=""nofollow"">VXLAN RFC</a>, I can't see anything specific that defines that the packet contains VXLAN header.
I see (parsing the packet from the beginning):</p>

<ul>
<li>outer MAC (L2) header</li>
<li>outer IP (L3) header</li>
<li>outer UDP (L4) header</li>
<li><strong>VXLAN header</strong></li>
<li>inner MAC header</li>
<li>inner ... etc</li>
</ul>

<p>But I don't see anything specific in the outer UDP header that says that the next header is VXLAN.</p>

<p>What am I missing?</p>
","<p>The destination UDP port in the outer UDP header is specified in the <a href=""https://tools.ietf.org/html/draft-mahalingam-dutt-dcops-vxlan-09#section-5"" rel=""nofollow"">VXLAN specification</a> (Port 4789). This means it is a well-known service. So an UDP packet that arrives on Port 4789 is expected to be a VXLAN packet¹ in the same way that a TCP packet that arrives on Port 80 is expected to be a HTTP packet¹.</p>

<p>The draft you linked to is outdated and is missing this port number (although it mentions that the port number is to be obtained from IANA).</p>

<p>¹) When I talk about VXLAN/HTTP packets I mean of course the respective UDP/TCP packets with VXLAN/HTTP header/protocol inside.</p>
","7556"
"ASA 5505 remote access VPN - Connection established, but no internet/access to internal subnet","4979","","<h1>Update</h1>

<p>Finally got upgraded to 9.1.4. I got everything configured, reenabled VPN, and was still having the same problem. So, I cleared all VPN config information and started from scratch. Below is my current config. I am able to connect and access resources on the internal network. I am not, however, able to access the internet through the VPN.</p>

<p><code><pre>
xlate per-session deny tcp any4 any4
xlate per-session deny tcp any4 any6
xlate per-session deny tcp any6 any4
xlate per-session deny tcp any6 any6
xlate per-session deny udp any4 any4 eq domain
xlate per-session deny udp any4 any6 eq domain
xlate per-session deny udp any6 any4 eq domain
xlate per-session deny udp any6 any6 eq domain
ip local pool VPNPool 192.168.3.1-192.168.3.30
!
interface Ethernet0/0
 switchport access vlan 2
!
interface Ethernet0/1
 switchport access vlan 2
!
interface Ethernet0/2
 switchport access vlan 2
!
interface Ethernet0/3
!
interface Ethernet0/4
!
interface Ethernet0/5
!
interface Ethernet0/6
!
interface Ethernet0/7
!
interface Vlan1
 description Private-Interface
 nameif inside
 security-level 100
 ip address 10.3.3.1 255.255.255.0 
!
interface Vlan2
 description Public-Interface
 nameif outside
 security-level 0
 ip address xx.xx.xx.xx 255.255.255.248 
!
boot system disk0:/asa914-k8.bin
object network obj-10.3.3.0
 subnet 10.3.3.0 255.255.255.0
object network vpn_nat
 subnet 192.168.3.0 255.255.255.0
object-group service Internet-udp udp
 description UDP Standard Internet Services
 port-object eq domain
 port-object eq ntp
object-group service Internet-tcp tcp
 description TCP Standard Internet Services
 port-object eq www
 port-object eq https
 port-object eq smtp
 port-object eq 465
 port-object eq pop3
 port-object eq 995
 port-object eq ftp
 port-object eq ftp-data
 port-object eq domain
 port-object eq ssh
object-group network Internal-Subnet
object-group network obj-vpnpool
access-list inside-in remark -=[Access Lists for Outgoing Packets from Inside interface]=-
access-list inside-in extended permit udp 10.3.3.0 255.255.255.0 any4 object-group Internet-udp 
access-list inside-in extended permit tcp 10.3.3.0 255.255.255.0 any4 object-group Internet-tcp 
access-list inside-in extended permit icmp 10.3.3.0 255.255.255.0 any4 
access-list outside-in remark -=[Access Lists for Incoming Packets on OUTSIDE interface]=-
access-list outside-in extended permit icmp any4 any4 echo-reply 
access-list outside-in extended permit icmp any4 any4 echo 
access-list vpn_splitTunnelAcl standard permit 10.3.3.0 255.255.255.0 
nat (inside,outside) source static obj-10.3.3.0 obj-10.3.3.0 destination static vpn_nat vpn_nat no-proxy-arp route-lookup
object network obj-10.3.3.0
 nat (inside,outside) dynamic interface
access-group inside-in in interface inside
access-group outside-in in interface outside
route outside 0.0.0.0 0.0.0.0 xx.xx.xx.xx 1 
timeout xlate 3:00:00
timeout pat-xlate 0:00:30
timeout conn 1:00:00 half-closed 0:10:00 udp 0:02:00 icmp 0:00:02
timeout sunrpc 0:10:00 h323 0:05:00 h225 1:00:00 mgcp 0:05:00 mgcp-pat 0:05:00
timeout sip 0:30:00 sip_media 0:02:00 sip-invite 0:03:00 sip-disconnect 0:02:00
timeout sip-provisional-media 0:02:00 uauth 0:05:00 absolute
timeout tcp-proxy-reassembly 0:01:00
timeout floating-conn 0:00:00
dynamic-access-policy-record DfltAccessPolicy
user-identity default-domain LOCAL
aaa authentication telnet console LOCAL 
aaa authentication http console LOCAL 
aaa authentication ssh console LOCAL 
http server enable
http 10.3.3.0 255.255.255.0 inside
no snmp-server location
no snmp-server contact
snmp-server enable traps snmp authentication linkup linkdown coldstart
crypto ipsec ikev1 transform-set vpn-transform-set-ikev1 esp-3des esp-sha-hmac 
crypto ipsec ikev1 transform-set vpn-transform-set-ikev1 mode transport
crypto ipsec security-association pmtu-aging infinite
crypto dynamic-map dyno 10 set ikev1 transform-set vpn-transform-set-ikev1
crypto map vpn 20 ipsec-isakmp dynamic dyno
crypto map vpn interface outside
crypto ca trustpool policy
crypto isakmp nat-traversal 3600
crypto ikev1 enable outside
crypto ikev1 policy 10
 authentication pre-share
 encryption 3des
 hash sha
 group 2
 lifetime 86400
telnet timeout 5
ssh 10.3.3.0 255.255.255.0 inside
ssh timeout 20
ssh version 2
ssh key-exchange group dh-group1-sha1
console timeout 0</p>

<p>dhcpd address 10.3.3.100-10.3.3.150 inside
dhcpd dns xx.xx.xx.xx xx.xx.xx.xx interface inside
dhcpd enable inside
!
threat-detection basic-threat
threat-detection statistics host number-of-rate 2
threat-detection statistics port number-of-rate 2
threat-detection statistics protocol number-of-rate 2
threat-detection statistics access-list
no threat-detection statistics tcp-intercept
group-policy vpn_policy internal
group-policy vpn_policy attributes
 vpn-tunnel-protocol l2tp-ipsec 
 split-tunnel-policy tunnelspecified
 split-tunnel-network-list value vpn_splitTunnelAcl
username mike password x
username mike attributes
 vpn-tunnel-protocol l2tp-ipsec 
username admin password x encrypted privilege 15
tunnel-group DefaultRAGroup general-attributes
 address-pool VPNPool
 default-group-policy vpn_policy
tunnel-group DefaultRAGroup ipsec-attributes
 ikev1 pre-shared-key <strong>*</strong>
tunnel-group DefaultRAGroup ppp-attributes
 authentication ms-chap-v2
!
class-map inspection_default
 match default-inspection-traffic
!
!
policy-map type inspect dns preset_dns_map
 parameters
  message-length maximum client auto
  message-length maximum 512
policy-map global_policy
 class inspection_default
  inspect dns preset_dns_map 
  inspect ftp 
  inspect h323 h225 
  inspect h323 ras 
  inspect ip-options 
  inspect netbios 
  inspect rsh 
  inspect rtsp 
  inspect skinny<br>
  inspect esmtp 
  inspect sqlnet 
  inspect sunrpc 
  inspect tftp 
  inspect sip<br>
  inspect xdmcp 
 class class-default
  user-statistics accounting
!
service-policy global_policy global
prompt hostname context 
no call-home reporting anonymous
call-home
 profile CiscoTAC-1
  no active
  destination address http <a href=""https://tools.cisco.com/its/service/oddce/services/DDCEService"" rel=""nofollow"">https://tools.cisco.com/its/service/oddce/services/DDCEService</a>
  destination address email callhome@cisco.com
  destination transport-method http
  subscribe-to-alert-group diagnostic
  subscribe-to-alert-group environment
  subscribe-to-alert-group inventory periodic monthly
  subscribe-to-alert-group configuration periodic monthly
  subscribe-to-alert-group telemetry periodic daily
: end</p>

<p></pre></code></p>

<h1>Old Stuff</h1>

<p>I'm trying to set up an L2TP over IPSec remote access VPN on an ASA 5505, version 8.2(5). I'm able to authenticate and a connection is established. I am not, however, able to access resources on the internal network or access the internet. Furthermore, the ASA is not able to ping connected clients.</p>

<p>On the connected client I can ping the ASA's external IP. When I do that, I even see the encrypted and decrypted packet count go up on the ASA with <code>show crypto ipsec sa</code>.</p>

<p>I've tried doing a few things with NAT and with the routes, but just can't get it working.</p>

<p>My internal network is 10.3.3.0/24 and my VPN pool is 192.168.3.0/24. Below I've copied the relevant portions of the config.</p>

<pre><code>
object-group service Internet-udp udp
 description UDP Standard Internet Services
 port-object eq domain
 port-object eq ntp
object-group service Internet-tcp tcp
 description TCP Standard Internet Services
 port-object eq www
 port-object eq https
 port-object eq smtp
 port-object eq 465
 port-object eq pop3
 port-object eq 995
 port-object eq ftp
 port-object eq ftp-data
 port-object eq domain
 port-object eq ssh
 port-object eq 993
object-group network Internal-Subnet
object-group network obj-vpnpool
access-list inside-in remark -=[Access Lists for Outgoing Packets from Inside interface]=-
access-list inside-in extended permit udp 10.3.3.0 255.255.255.0 any object-group Internet-udp
access-list inside-in extended permit tcp 10.3.3.0 255.255.255.0 any object-group Internet-tcp
access-list inside-in extended permit icmp 10.3.3.0 255.255.255.0 any
access-list outside-in remark -=[Access Lists for Incoming Packets on OUTSIDE interface]=-
access-list outside-in extended permit icmp any any echo-reply
access-list DefaultRAGroup_splitTunnelAcl standard permit 10.3.3.0 255.255.255.0
access-list DefaultRAGroup_splitTunnelAcl standard permit 192.168.3.96 255.255.255.224
access-list inside_nat0_outbound extended permit ip 10.3.3.0 255.255.255.0 192.168.3.0 255.255.255.0

ip local pool VPNPool 192.168.3.100-192.168.3.120 mask 255.255.255.0

nat (inside) 0 access-list inside_nat0_outbound
nat (inside) 1 10.3.3.0 255.255.255.0
access-group inside-in in interface inside
access-group outside-in in interface outside
route outside 0.0.0.0 0.0.0.0 **.**.**.** 1

group-policy DefaultRAGroup internal
group-policy DefaultRAGroup attributes
 dns-server value **.**.**.** **.**.**.**
 vpn-tunnel-protocol l2tp-ipsec
 split-tunnel-policy tunnelspecified
 split-tunnel-network-list value DefaultRAGroup_splitTunnelAcl

crypto ipsec transform-set ESP-AES-256-MD5 esp-aes-256 esp-md5-hmac 
crypto ipsec transform-set ESP-DES-SHA esp-des esp-sha-hmac 
crypto ipsec transform-set ESP-3DES-SHA esp-3des esp-sha-hmac 
crypto ipsec transform-set ESP-DES-MD5 esp-des esp-md5-hmac 
crypto ipsec transform-set ESP-AES-192-MD5 esp-aes-192 esp-md5-hmac 
crypto ipsec transform-set ESP-3DES-MD5 esp-3des esp-md5-hmac 
crypto ipsec transform-set ESP-AES-256-SHA esp-aes-256 esp-sha-hmac 
crypto ipsec transform-set ESP-AES-128-SHA esp-aes esp-sha-hmac 
crypto ipsec transform-set ESP-AES-192-SHA esp-aes-192 esp-sha-hmac 
crypto ipsec transform-set ESP-AES-128-MD5 esp-aes esp-md5-hmac 
crypto ipsec transform-set TRANS_ESP_3DES_SHA esp-3des esp-sha-hmac 
crypto ipsec transform-set TRANS_ESP_3DES_SHA mode transport
crypto ipsec security-association lifetime seconds 28800
crypto ipsec security-association lifetime kilobytes 4608000
crypto dynamic-map SYSTEM_DEFAULT_CRYPTO_MAP 65535 set transform-set TRANS_ESP_3DES_SHA ESP-AES-128-SHA ESP-AES-128-MD5 ESP-AES-192-SHA ESP-AES-192-MD5 ESP-AES-256-SHA ESP-AES-256-MD5 ESP-3DES-SHA ESP-3DES-MD5 ESP-DES-SHA ESP-DES-MD5
crypto map outside_map 65535 ipsec-isakmp dynamic SYSTEM_DEFAULT_CRYPTO_MAP
crypto map outside_map interface outside
crypto isakmp enable outside
crypto isakmp policy 10
 authentication pre-share
 encryption 3des
 hash sha     
 group 2
 lifetime 86400
</code>
</pre>

<hr>

<h2>Update 1</h2>

<p>I took Ron's suggestion and learned how the <code>packet-tracer</code> commands function. Here are some things I found after issuing <code>packet-tracer input inside icmp 10.3.3.100 8 0 192.168.3.100</code></p>

<pre>
<code>
Phase: 1
Type: ROUTE-LOOKUP
Subtype: input
Result: ALLOW
Config:
Additional Information:
in   192.168.3.100   255.255.255.255 outside

Phase: 2
Type: ACCESS-LIST
Subtype: log
Result: ALLOW
Config:
access-group inside-in in interface inside
access-list inside-in extended permit icmp 10.3.3.0 255.255.255.0 any 
Additional Information:

Phase: 3
Type: IP-OPTIONS
Subtype: 
Result: ALLOW
Config:
Additional Information:

Phase: 4      
Type: INSPECT 
Subtype: np-inspect
Result: ALLOW
Config:
Additional Information:

Phase: 5
Type: NAT-EXEMPT
Subtype: 
Result: ALLOW
Config:
  match ip inside 10.3.3.0 255.255.255.0 outside 192.168.3.0 255.255.255.0
    NAT exempt
    translate_hits = 16, untranslate_hits = 2
Additional Information:

Phase: 6
Type: NAT
Subtype: 
Result: ALLOW
Config:
nat (inside) 1 10.3.3.0 255.255.255.0
  match ip inside 10.3.3.0 255.255.255.0 outside any
    dynamic translation to pool 1 (**.**.**.** [Interface PAT])
    translate_hits = 21582, untranslate_hits = 2392
Additional Information:

Phase: 7
Type: NAT
Subtype: host-limits
Result: ALLOW
Config:
nat (inside) 1 10.3.3.0 255.255.255.0
  match ip inside 10.3.3.0 255.255.255.0 inside any
    dynamic translation to pool 1 (No matching global)
    translate_hits = 0, untranslate_hits = 0
Additional Information:

Phase: 8
Type: HOST-LIMIT
Subtype: 
Result: ALLOW
Config:
Additional Information:

Phase: 9
Type: L2TP-PPP
Subtype: 
Result: ALLOW 
Config:
Additional Information:

Phase: 10
Type: PPP
Subtype: 
Result: ALLOW
Config:
Additional Information:

Phase: 11
Type: FLOW-CREATION
Subtype: 
Result: ALLOW
Config:
Additional Information:
New flow created with id 23037, packet dispatched to next module

Result:
input-interface: inside
input-status: up
input-line-status: up
output-interface: outside
output-status: up
output-line-status: up
Action: allow
</code>
</pre>

<p>Phase 6 shows a NAT translation. I then check the echo-reply with <code>packet-tracer input outside icmp 192.168.3.100 0 0 10.3.3.100</code>.</p>

<pre>
<code>
Phase: 1
Type: ROUTE-LOOKUP
Subtype: input
Result: ALLOW
Config:
Additional Information:
in   10.3.3.0        255.255.255.0   inside

Phase: 2
Type: ACCESS-LIST
Subtype: log
Result: ALLOW
Config:
access-group outside-in in interface outside
access-list outside-in extended permit icmp any any echo-reply 
Additional Information:

Phase: 3
Type: IP-OPTIONS
Subtype: 
Result: ALLOW
Config:
Additional Information:

Phase: 4      
Type: CP-PUNT
Subtype: 
Result: ALLOW
Config:
Additional Information:

Phase: 5
Type: L2TP-PPP
Subtype: 
Result: ALLOW
Config:
Additional Information:

Phase: 6
Type: INSPECT
Subtype: np-inspect
Result: ALLOW
Config:
Additional Information:

Phase: 7
Type: VPN
Subtype: ipsec-tunnel-flow
Result: ALLOW 
Config:
Additional Information:

Phase: 8
Type: NAT-EXEMPT
Subtype: rpf-check
Result: ALLOW
Config:
Additional Information:

Phase: 9
Type: HOST-LIMIT
Subtype: 
Result: ALLOW
Config:
Additional Information:

Phase: 10
Type: NAT
Subtype: rpf-check
Result: ALLOW
Config:
nat (inside) 1 10.3.3.0 255.255.255.0
  match ip inside 10.3.3.0 255.255.255.0 outside any
    dynamic translation to pool 1 (**.**.**.** [Interface PAT])
    translate_hits = 21589, untranslate_hits = 2392
Additional Information:

Phase: 11
Type: FLOW-CREATION
Subtype: 
Result: ALLOW
Config:
Additional Information:
New flow created with id 23079, packet dispatched to next module

Result:
input-interface: outside
input-status: up
input-line-status: up
output-interface: inside
output-status: up
output-line-status: up
Action: allow
</code>
</pre>

<p>Phase 8 shows <code>NAT-EXEMPT</code> but Phase 10 shows a NAT translation. That would be problematic.</p>

<hr>

<h2>Update 2</h2>

<p>Currently <code>show vpn-sessiondb detail remote filter protocol L2TPOverIPSec</code> returns nothing while a client is connected.</p>

<p>On the other hand <code>show vpn-sessiondb detail remote filter protocol L2TPOverIPSecOverNatT</code> shows the connected client. While trying to do things on the client, the Bytes Rx and Pkts Rx increase. Bytes Tx and Pkts Tx do not increase (Pkts Tx stays at 17). Pkts Tx Drop and Pkts Rx Drop are both 0. If I ping 192.168.3.100 (the vpn client), then Pkts Tx increases for each ping.</p>

<hr>

<h2>Update 3</h2>

<p>I enabled logging on the ASA and established a connection. Here are some interesting log messages I'm seeing</p>

<pre><code>
%ASA-6-737026: IPAA: Client assigned 192.168.3.100 from local pool
ppp_virtual_interface_id is 1, client_dynamic_ip is 192.168.3.100
%ASA-7-609001: Built local-host outside:192.168.3.100
%ASA-2-106001: Inbound TCP connection denied from 192.168.3.100/57013 to **.**.**.**/443 flags SYN  on interface outside
%ASA-2-106001: Inbound TCP connection denied from 192.168.3.100/57013 to **.**.**.**/443 flags SYN  on interface outside
%ASA-2-106001: Inbound TCP connection denied from 192.168.3.100/57013 to **.**.**.**/443 flags SYN  on interface outside
%ASA-2-106007: Deny inbound UDP from 192.168.3.100/9562 to **.**.**.**/53 due to DNS Query
%ASA-2-106007: Deny inbound UDP from 192.168.3.100/61529 to **.**.**.**/53 due to DNS Query
%ASA-2-106007: Deny inbound UDP from 192.168.3.100/38824 to **.**.**.**/53 due to DNS Query

%ASA-3-713042: IKE Initiator unable to find policy: Intf inside, Src: 10.3.3.100, Dst: 192.168.3.100
%ASA-3-713042: IKE Initiator unable to find policy: Intf inside, Src: 10.3.3.100, Dst: 192.168.3.100
</code></pre>
","<p>All of the answers suggest a split tunnel, which I believe I had setup correctly.</p>

<p>In the end, I setup a proxy server on the internal network. If my browser was pointed at that, then I could access the internet through it.</p>
","43136"
"SFP / Fiber Link Issue - Can't connect a Fiber CPE","4958","","<p>I've a CPE connected to a 4506 switch. The interface is Up but I don't see traffic CPE MAC address on MAC sddes-table</p>

<p>I've already replaced the cable, SFP and port. Now I've the minimal config (nothing i.e. switchport access) and no MAC yet. </p>

<pre><code>4506-1#sh int gi2/3
GigabitEthernet2/3 is up, line protocol is up (connected) 
  Hardware is Gigabit Ethernet Port, address is XXXX.XX7b.c407 (bia XXXX.XX7b.c407)
  MTU 1500 bytes, BW 1000000 Kbit/sec, DLY 10 usec, 
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation ARPA, loopback not set
  Keepalive set (10 sec)
  Full-duplex, 1000Mb/s, link type is force-up, media type is 1000Base-2BX10-D
  input flow-control is on, output flow-control is on 
  ARP type: ARPA, ARP Timeout 04:00:00
  Last input never, output never, output hang never
  Last clearing of ""show interface"" counters 00:13:11
  Input queue: 0/2000/0/0 (size/max/drops/flushes); Total output drops: 0
  Queueing strategy: fifo
  Output queue: 0/40 (size/max)
  5 minute input rate 0 bits/sec, 0 packets/sec
  5 minute output rate 0 bits/sec, 0 packets/sec
     444 packets input, 200910 bytes, 0 no buffer
     Received 446 broadcasts (0 multicasts)
     0 runts, 0 giants, 0 throttles 
     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored
     0 input packets with dribble condition detected
     463 packets output, 35901 bytes, 0 underruns
     0 output errors, 0 collisions, 0 interface resets
     0 unknown protocol drops
     0 babbles, 0 late collision, 0 deferred
     0 lost carrier, 0 no carrier
     0 output buffer failures, 0 output buffers swapped out

4506-1#sh mac address-table 
Unicast Entries
 vlan     mac address     type        protocols               port
---------+---------------+--------+---------------------+-------------------------
   1      XXXX.XX43.23ad   dynamic ip,ipx,assigned,other TenGigabitEthernet1/1      
   1      XXXX.XX43.23ad   dynamic ip,ipx,assigned,other TenGigabitEthernet1/1      
1100      XXXX.XX6a.2548   dynamic ip,ipx,assigned,other TenGigabitEthernet1/1      
1100      XXXX.XXa1.6f3f   dynamic ip,ipx,assigned,other TenGigabitEthernet1/1      
1100      XXXX.XXa1.7b7f   dynamic ip,ipx,assigned,other TenGigabitEthernet1/1      
1100      XXXX.XX48.fabf    static ip,ipx,assigned,other Switch                     
1110      XXXX.XX07.ac01   dynamic ip,ipx,assigned,other TenGigabitEthernet1/1      
1111      XXXX.XX07.ac01   dynamic ip,ipx,assigned,other TenGigabitEthernet1/1      
1111      XXXX.XXa1.6f3f   dynamic ip,ipx,assigned,other TenGigabitEthernet1/1      
1112      XXXX.XX07.ac01   dynamic ip,ipx,assigned,other TenGigabitEthernet1/1      
1112      XXXX.XXa1.6f3f   dynamic ip,ipx,assigned,other TenGigabitEthernet1/1      
1120      XXXX.XX07.ac01   dynamic ip,ipx,assigned,other TenGigabitEthernet1/1      
1120      XXXX.XXa1.7b7f   dynamic ip,ipx,assigned,other TenGigabitEthernet1/1      
1121      XXXX.XX07.ac01   dynamic ip,ipx,assigned,other TenGigabitEthernet1/1      
1121      XXXX.XXa1.7b7f   dynamic ip,ipx,assigned,other TenGigabitEthernet1/1      
1122      XXXX.XX07.ac01   dynamic ip,ipx,assigned,other TenGigabitEthernet1/1      
1122      XXXX.XXa1.7b7f   dynamic ip,ipx,assigned,other TenGigabitEthernet1/1      

4506-1#sh mac address-table int gi2/3
Multicast Entries
 vlan      mac address     type    ports
---------+---------------+-------+--------------------------------------------
   1      ffff.ffff.ffff   system Gi2/3,Te1/1
</code></pre>

<p>SFP is 1000Base-2BX10-D and I check the <a href=""https://www.cisco.com/en/US/prod/collateral/modules/ps5455/ps6577/product_data_sheet0900aecd8033f885.pdf"" rel=""nofollow"">specifications</a>. I saw the operation range for the SFP is RX: -3 to -19.5 and TX: -3 to -9. 
When I type the command,</p>

<pre><code>4506-1#sh int gi2/1 transceiver 
ITU Channel not available (Wavelength not available),
Transceiver is internally calibrated.
If device is externally calibrated, only calibrated values are printed.
++ : high alarm, +  : high warning, -  : low warning, -- : low alarm.
NA or N/A: not applicable, Tx: transmit, Rx: receive.
mA: milliamperes, dBm: decibels (milliwatts).

                                 Optical   Optical
           Temperature  Voltage  Tx Power  Rx Power
Port       (Celsius)    (Volts)  (dBm)     (dBm)
---------  -----------  -------  --------  --------
Gi2/1        36.3       3.25      -6.1     -22.0  
</code></pre>

<p>So I think this is related with Fiber Optic link but the packets counters are incrementing.</p>

<p>ADD info :  </p>

<p>Patched cable of 3M cable due to specification. Problem not solved. </p>

<p>Output of <code>debug platform packet all int gi2/2</code></p>

<pre><code>*Aug 12 03:30:03.803: Tx packet to Port Gi2/2 Vlan Tag 1 FwdVlan 1 CoS 7 TagType No   Tag Src XX:XX:XX:7B:C4:06 Dst 01:80:C2:00:00:00 Type/Len 0x0026 Length 60  
*Aug 12 03:30:05.802: Tx packet to Port Gi2/2 Vlan Tag 1 FwdVlan 1 CoS 7 TagType No   Tag Src XX:XX:XX:7B:C4:06 Dst 01:80:C2:00:00:00 Type/Len 0x0026 Length 60  
*Aug 12 03:30:07.802: Tx packet to Port Gi2/2 Vlan Tag 1 FwdVlan 1 CoS 7 TagType No    Tag Src XX:XX:XX:7B:C4:06 Dst 01:80:C2:00:00:00 Type/Len 0x0026 Length 60  
*Aug 12 03:30:09.802: Tx packet to Port Gi2/2 Vlan Tag 1 FwdVlan 1 CoS 7 TagType No   Tag Src XX:XX:XX:7B:C4:06 Dst 01:80:C2:00:00:00 Type/Len 0x0026 Length 60  
</code></pre>
","<p>After reading the specification of SFP, I change the fiber cable and the issue persist. I check the two sides (SFP and CPE), both are sending packet and the counters are incrementing. So a colleague suggest this probably it's the negotiation (speed/duplex). I configure the <code>speed</code> on no-negotiate, strangely I can set a numerical speed (100/1000/...) as other switchs, only <code>Auto</code> or <code>Nonegotiate</code>. I set too the <code>duplex</code> on full, the problem persist. I contact our supplier of CPE Packetfront. We tried to tshoot the link. After a while and reading the Release Note of CPE we found there is improvements on firmware on negotiation with Cisco equipment, so he strongly recommend to upgrade version to the last version (1.10). Update done the CPE works fine. Thanks all for the support.</p>
","2806"
"How can I delete the L3 switch port configuration?","4914","","<p>I have HP 5500 L3 switch. I wanted to delete the particular port configuration and wanted to reconfigure it. </p>

<p>Since the command set is different from Cisco, can anyone help me?</p>
","<p>With later versions of ComWare you can use the default command on an interface.</p>

<pre><code>interface GigabitEthernet1/0/1
[HP-GigabitEthernet1/0/1]default
This command will restore the default settings. Continue? [Y/N]:y
</code></pre>

<p>It should clear the port back to just <strong>port link-mode bridge</strong>.</p>

<p>If you have an older version of the OS you will need to use the <strong>undo</strong> command and negate the previous settings as the other guys mentioned.</p>

<p>Hope this helps you on your quest. </p>

<p>SleepyMan</p>
","32203"
"Causes of low SNR","4910","","<p>I am using a ADSL 2+ broadband service. My router shows very low SNR margin. While I quite understand what is SNR, I was curious to know what causes low SNR practically.</p>
","<p>There are many things that can cause low SNR. If you put aside natural reasons such as attenuation caused by  distance, most of the time problem lies in bad infrastructure. Bad cables (damaged shielding and exposed wires), ingress noise, crosstalk, impedance mismatches, bad connectors and micro-reflections, bad splitters and filters and stuff like that. It depends on many different things and it varies in real time.</p>
","2947"
"What are the alternatives to OTV for stretching a layer 2 network across 2 datacenters?","4909","","<p>We want to find a ""safe"" way to stretch layer 2 network across 2 data-centers, and since we don't have any equipment running NX-OS on either data-centers we can't use OTV.
So what are the alternatives for us who have the following equipment at hand:</p>

<p>Data-center 1: 2x 6509-E in VSS (SUP720, IP Services)</p>

<p>Data-center 2: 2x 4500-X in VSS (IP Base at the moment)</p>
","<p>VPLS, AToM, and L2TP are also additional ways to glue ports together that land on distant routers.  Some of them require MPLS on all the in-between routers, but L2TP(v3 in particular) does not require anything besides ip routing on the intermediary routers.  Basically, they glue together two remote router ports, and can usually pass spanning tree, etc, since they're not acting as switches in this regard.</p>
","215"
"Speed of Light in Copper VS Fiber - Why is Fiber Better?","4891","","<p>I'm reading <em>Computer Networks - A Systems Approach 5th ed.</em>, and I came across the following statistics for the speed of light through different mediums:</p>

<p>Copper – 2.3 × 10<sup>8</sup> m/s</p>

<p>Fiber – 2.0 × 10<sup>8</sup> m/s</p>

<p>So, are these figures wrong, or is there another reason to explain why copper is worse than fiber?  Does fiber have better bandwidth (per volume) or something?</p>
","<p>No, the numbers are right (Page 46).  If I can reword your question, it's ""Why should I use fiber if the propagation delay is worse than copper?""  You are assuming that propagation delay is an important characteristic.  In fact (as you'll see a few pages later), it rarely is.</p>

<p>Fiber has three characteristics that make it superior to copper in many (but not all) scenarios.</p>

<ol>
<li><p>Higher bandwidth.  Because fiber uses light, it can be modulated at a much higher frequency than electrical signals on copper wire, giving you a much higher bandwidth.  Also the maximum modulation frequency on copper wire is highly dependent on the length -- inductance and capacitance increase with length, reducing the maximum modulation frequency.</p></li>
<li><p>Longer distance.  Light over fiber can travel tens of kilometers with little attenuation, which makes it ideal for long distance connections.</p></li>
<li><p>Less interference.   Because fiber uses light, it is impervious to electromagnetic interference.  That makes it best for ""noisy"" electromagnetic environments.  Also, fiber does not conduct electricity, so it can electrically isolate devices. </p></li>
</ol>

<p>But fiber has drawbacks too.</p>

<ol>
<li>Expense.  The optical transmitters and receivers can be expensive ($100's) and have more stringent environmental requirements than copper wire.</li>
<li><p>Fiber optic cable is more fragile than wire.  If you bend it too sharply, it will fracture. Copper wire is much more tolerant of movement and bending.</p></li>
<li><p>Difficult to terminate.  Placing a connector on a optical fiber strand requires precision tools, technique, and expertise.  Fiber cables are usually terminated by trained specialists.  In comparison, you can terminate a copper cable in seconds with little or no training.</p></li>
</ol>
","16440"
"Cisco ASA - Remote VPN - Dual ISP","4887","","<p>I'm trying to set up a L2TP/IPSec VPN on a Windows 7 client, to a Cisco ASA 5505 SecPlus license.</p>

<p>ASA have dual WAN connections:</p>

<ul>
<li>wan1: a mobile 3G connection behind the ISP router, used for Internet browsing.</li>
<li>wan2: a DSL connection with ""static"" DHCP IP, used for incoming firewall traffic.</li>
</ul>

<p>A static route with tracking is set so if the 3G is down it will failover to DSL:</p>

<pre>route wan1 0.0.0.0 0.0.0.0 192.168.98.1 1 track 1</pre>

<p>wan2 have this config:</p>

<pre>
dhcp client route distance 200
ip address dhcp setroute 
</pre>

<p>All that is working fine.</p>

<p>Now I have tried to make a L2TP/IPsec VPN connection from a Windows 7 client to the wan2 interface, I get these errors:</p>

<pre>Duplicate first packet detected.  Ignoring packet.</pre>

<pre>Phase 1 failure:  Mismatched attribute types for class Group Description:  Rcv'd: Unknown  Cfg'd: Group 2</pre>

<p>The first error I'm also getting with the ""old"" Cisco VPN client, using the ASDM Wizard.</p>

<p>ASA version is: 9.1</p>

<p>Question is: Do I miss something? I suspect the dual wan setup to be the problem. Do the ASA send VPN reply back on the default route (wan1)?</p>

<p>/Kim</p>
","<p>I've solved the problem by getting a static IP for the client too, which also was a 3G link. Then I could create that static route for this client only.</p>

<p>The ISP also require both endpoints to have static IP for communication to work as they both are on same ISP.</p>
","3656"
"Packet Tracer: Ethernet interface up/down","4880","","<p>I found that different interfaces have different behaviour on different device (router, switch) when no cable is attached on Packet Tracer 6.0.1.0011.</p>

<p>Router's serial  : down down</p>

<p>Router's ethernet: up down</p>

<p>Switch's         : down down</p>

<p>What is that so special for ethernet? For serial, I was informed that the status will be up down if a cable is attached but has some mismatch for L2 configuration.</p>

<p>Note: I don't know if the behaviour is same if a cable is attached on the interface but the other end of the cable is not attached to any device.</p>
","<p>All the PT-jabbing aside, this is just a strange Packet Tracer behavior and does not match the real world.  On a real switch, an unplugged ethernet, fast ethernet, or gigabit ethernet interface would show down down.</p>
","9809"
"How to create Ethernet cables when I cannot figure out color of cat 5e cable wires?","4878","","<p>I'm learning how to make my own Ethernet cables (to get deep understanding of Cisco for their exams), but the cables I am getting have small wires whose colors I cannot distinguish.</p>

<p>A person in my organization who is expert at making Ethernet cables insists he can see the colors as they are. Is this another case of what <a href=""http://www.wired.com/2015/02/science-one-agrees-color-dress/"" rel=""nofollow noreferrer"">color is that dress</a>? Seriously.</p>

<p>Really, I am so stumped right now, and I've seen two CAT5 cables like this, where the colors are faded and indistinguishable.</p>

<p>How can I create my own Ethernet cables when I cannot figure out the faded color of these wires? Is it that the cables are too old and the colors get faded over time? Is there another solution. I really wish to create Ethernet cables.</p>

<p><img src=""https://i.stack.imgur.com/xSnRm.jpg"" alt=""enter image description here""></p>

<p>UPDATE:</p>

<p>I stripped more of the cabling. What is supposed to be brown/white is plain white, and the rest of the white/color combos are plain faded</p>

<p><img src=""https://i.stack.imgur.com/jO3wo.jpg"" alt=""enter image description here""></p>

<p>UPDATE II</p>

<p>On the cable it is printed:</p>

<p>0100 FEET CAT-5e General Cable L CMP (UL) C(UL) 4PR 24AWG GENSPEED 5000 PLENUIM --- VERIFIED (UL)  CAT-5e--- 03-03 100537J1 CAT-5e</p>

<p>UPDATE III</p>

<p>Here are wires from another cable, printed:</p>

<p>BERK-TEK HYPER-PLUS 24 AWG CMP C(UL) US ETL VERIFIED TIA0568-C.2 CAT 5E &amp; ISO/IEC 11801 CAT 5 26100016 FT</p>

<p><img src=""https://i.stack.imgur.com/MF80e.jpg"" alt=""enter image description here""></p>
","<p>The colors are just there as an ease-of-use tool.  What really matters from a functional standpoint is what cable is connected in the jack in what position.  Electrically the colors of the wires make no difference.  It will require care, but you can identify the wires per pair by ""ringing"" them out with a multi-meter with a continutiy check ( the symbol looks like an arrow pointing at a vertical line or a plus sign ).</p>

<p><a href=""https://learn.sparkfun.com/tutorials/how-to-use-a-multimeter/continuity"" rel=""noreferrer"">https://learn.sparkfun.com/tutorials/how-to-use-a-multimeter/continuity</a></p>

<p>Pick a pair and check with test leads on the meter to match them up (holding both ends of the cable together, put one test lead on one wire and one test lead on the other end, testing each wire in turn until you get a reading).</p>

<p>It's a little bit more work, but you can identify a each wire this way and place them in the appropriate postion.</p>

<p>Two issues with my original post addressed pointed out by comments below:  You must keep the pairs in the proper relationship to one another and conforming to wiring standards and good practice.  </p>

<p>@Ron has pointed out this answer was unclear (Thanks!).  It's VITALLY important to keep the pairs together as per standard.</p>

<p><img src=""https://i.stack.imgur.com/btwxI.gif"" alt=""enter image description here""></p>

<p>The reason this is so important is because using a pair of wires twisted together to carry a signal utilizes the electrical properties of the wire to improve signal strength, reduce attenuation and destructive interference - it's a great trick to make crosstalk work to our advantage! ( <a href=""http://en.wikipedia.org/wiki/Twisted_pair"" rel=""noreferrer"">http://en.wikipedia.org/wiki/Twisted_pair</a> )  </p>

<p>The difference between CAT5 and CAT3 is the number of twists per inch ( three vs. five, unsurprisingly ).  CAT3 is not rated for speeds over 10Mbps and as a result is mostly seen as legacy POTS/PBX cable, whereas CAT5 is rated up to 100Mbps ( and years ago replaced CAT3 for pretty much all uses ).  CAT5e has a plastic core that keeps the pairs twisted evenly in the cable related to one another and is rated up to 1000Mbps.  ( @YLearn pointed out this is not the case -- CAT5e and CAT6 do <strong><em>NOT</em></strong> require a spline, however some manufacturers used this as a strategy in production of cables ) You can see that the same basic electrical wiring sees an order of magnitude performance improvement just based increasing the twist of each pair and another order of magnitude based on the way the pairs are twisted together.</p>

<p>Another poster ( @Jordan Head ) correctly pointed out that while this is a great learning exercise or as an emergency <strong><em>short-term</em></strong> production fix, it's very important to follow standards - no one wants to have to troubleshoot random wiring pinouts in the middle of the night when there is an outage.  It's an added difficulty that should be avoided in production environments.</p>
","18085"
"ASA tunnel up but not passing traffic","4877","","<p>I have two offices (Victoria at IP 1.2.3.4 and Toronto at IP 5.6.7.8) each with pfSense running Strongswan, and each with an IKEv2 IPSec tunnel back to a Cisco ASA 5512 at IP 9.8.7.6. I recently updated software on the ASA from 9.4.2(11) to 9.4.3(4) without issue. Both tunnels came back up and worked fine for 1 day and 17 hours, but (without any configuration changes on either side) the Victoria tunnel has now stopped passing traffic.</p>

<p>The tunnel is established without a problem, but <code>show ipsec sa</code> tells me no traffic is passing. Restarting the tunnel does not make a difference.</p>

<pre><code>ASA1# show ipsec sa peer 1.2.3.4
peer address: 1.2.3.4
    Crypto map tag: OUTSIDE_map, seq num: 1, local addr: 9.8.7.6

      access-list OUTSIDE_cryptomap_2 extended permit ip 192.168.242.0 255.255.255.0 192.168.244.0 255.255.255.0 
      local ident (addr/mask/prot/port): (192.168.242.0/255.255.255.0/0/0)
      remote ident (addr/mask/prot/port): (192.168.244.0/255.255.255.0/0/0)
      current_peer: 1.2.3.4


      #pkts encaps: 0, #pkts encrypt: 0, #pkts digest: 0
      #pkts decaps: 1428, #pkts decrypt: 1428, #pkts verify: 1428
      #pkts compressed: 0, #pkts decompressed: 0
      #pkts not compressed: 0, #pkts comp failed: 0, #pkts decomp failed: 0
      #pre-frag successes: 0, #pre-frag failures: 0, #fragments created: 0
      #PMTUs sent: 0, #PMTUs rcvd: 0, #decapsulated frgs needing reassembly: 0
      #TFC rcvd: 0, #TFC sent: 0
      #Valid ICMP Errors rcvd: 0, #Invalid ICMP Errors rcvd: 0
      #send errors: 0, #recv errors: 0

      local crypto endpt.: 9.8.7.6/500, remote crypto endpt.: 1.2.3.4/500
      path mtu 1500, ipsec overhead 55(36), media mtu 1500
      PMTU time remaining (sec): 0, DF policy: copy-df
      ICMP error validation: disabled, TFC packets: disabled
      current outbound spi: CB3A6309
      current inbound spi : 5E3D8A13

    inbound esp sas:
      spi: 0x5E3D8A13 (1581091347)
         transform: esp-aes-gcm-256 esp-null-hmac no compression 
         in use settings ={L2L, Tunnel, PFS Group 14, IKEv2, }
         slot: 0, conn_id: 167936, crypto-map: OUTSIDE_map
         sa timing: remaining key lifetime (sec): 2676
         IV size: 8 bytes
         replay detection support: Y
         Anti replay bitmap: 
          0xFFFFFFFF 0xFFFFFFFF
    outbound esp sas:
      spi: 0xCB3A6309 (3409601289)
         transform: esp-aes-gcm-256 esp-null-hmac no compression 
         in use settings ={L2L, Tunnel, PFS Group 14, IKEv2, }
         slot: 0, conn_id: 167936, crypto-map: OUTSIDE_map
         sa timing: remaining key lifetime (sec): 2676
         IV size: 8 bytes
         replay detection support: Y
         Anti replay bitmap: 
          0x00000000 0x00000001
</code></pre>

<p>A packet capture looking for dropped packets gives me this, but doesn't tell me what rule is being applied.</p>

<pre><code>939: 20:11:44.438591 0023.ab3f.8255 24e9.b315.cddf 0x0800 Length: 89
      192.168.244.114.51353 &gt; 192.168.242.200.53:  [no cksum] udp 47 [tos 0x10]  (ttl 63, id 8826) Drop-reason: (acl-drop) Flow is denied by configured rule
</code></pre>

<p>Here is some of the relevant configuration; as far as I can see both offices are identical. If anyone has any suggestions as to what could be happening here, I'd appreciate it!</p>

<pre><code>ASA1# show running-config crypto map
crypto map OUTSIDE_map 1 match address OUTSIDE_cryptomap_2
crypto map OUTSIDE_map 1 set pfs group14
crypto map OUTSIDE_map 1 set peer 1.2.3.4
crypto map OUTSIDE_map 1 set ikev2 ipsec-proposal AESGCM
crypto map OUTSIDE_map 1 set security-association lifetime seconds 3600
crypto map OUTSIDE_map 1 set nat-t-disable
crypto map OUTSIDE_map 2 match address OUTSIDE_cryptomap_3
crypto map OUTSIDE_map 2 set pfs group14
crypto map OUTSIDE_map 2 set peer 5.6.7.8
crypto map OUTSIDE_map 2 set ikev2 ipsec-proposal AESGCM
crypto map OUTSIDE_map 2 set security-association lifetime seconds 3600
crypto map OUTSIDE_map 2 set nat-t-disable
crypto map OUTSIDE_map interface OUTSIDE

ASA1# show running-config access-list OUTSIDE_cryptomap_2
access-list OUTSIDE_cryptomap_2 extended permit ip object NOC-network object Victoria-network

ASA1# show running-config access-list OUTSIDE_cryptomap_3
access-list OUTSIDE_cryptomap_3 extended permit ip object NOC-network object Toronto-network

ASA1# show running-config nat
nat (INSIDE,OUTSIDE) source static NOC-network NOC-network destination static Victoria-network Victoria-network no-proxy-arp route-lookup
nat (INSIDE,OUTSIDE) source static NOC-network NOC-network destination static Toronto-network Toronto-network no-proxy-arp route-lookup

ASA1# show running-config tunnel-group 
tunnel-group 1.2.3.4 type ipsec-l2l
tunnel-group 1.2.3.4 general-attributes
 default-group-policy GroupPolicy_Victoria
tunnel-group 1.2.3.4 ipsec-attributes
 ikev1 pre-shared-key *****
 ikev2 remote-authentication pre-shared-key *****
 ikev2 local-authentication pre-shared-key *****
tunnel-group 5.6.7.8 type ipsec-l2l
tunnel-group 5.6.7.8 general-attributes
 default-group-policy GroupPolicy_Toronto
tunnel-group 5.6.7.8 ipsec-attributes
 ikev1 pre-shared-key *****
 isakmp keepalive threshold 15 retry 2
 ikev2 remote-authentication pre-shared-key *****
 ikev2 local-authentication pre-shared-key *****

ASA1# show running-config crypto ikev2
crypto ikev2 policy 2
 encryption aes-gcm-256
 integrity null
 group 21 24
 prf sha512
 lifetime seconds 28800
crypto ikev2 policy 3
 encryption aes-256
 integrity sha512
 group 21 24
 prf sha512
 lifetime seconds 28800
crypto ikev2 enable OUTSIDE

ASA1# show running-config crypto ipsec
crypto ipsec ikev2 ipsec-proposal AES256-SHA512
 protocol esp encryption aes-256
 protocol esp integrity sha-512
crypto ipsec ikev2 ipsec-proposal AESGCM
 protocol esp encryption aes-gcm-256
 protocol esp integrity sha-512
crypto ipsec ikev2 sa-strength-enforcement
crypto ipsec security-association pmtu-aging infinite

#ASA1 show running-config all sysopt
no sysopt traffic detailed-statistics
no sysopt connection timewait
sysopt connection tcpmss 1380
sysopt connection tcpmss minimum 0
sysopt connection permit-vpn
sysopt connection reclassify-vpn
no sysopt connection preserve-vpn-flows
no sysopt radius ignore-secret
no sysopt noproxyarp OUTSIDE
no sysopt noproxyarp INSIDE
no sysopt noproxyarp DMZ1
no sysopt noproxyarp management
</code></pre>
","<p>Your scenario looks very similar to something you'll see if you have a stale SPI on your ASA that is ""trumping"" the valid active SPI. The bad news is, if this is the case...you can only correct this by rebooting the ASA itself.</p>

<p>Something you can try is running a packet tracer to simulate traffic and check that you see a ""VPN Encrypt Phase"" in the output. If you do, but the traffic fails to encrypt then it could be match against a stale SPI that isn't active.</p>

<p>You can also use <code>show asp table classify crypto</code> and look for matches on your encryption domain. You do not want to see multiple matches with the same <code>cs_id</code>. See this example: (notice how they networks are exactly the same but they have different <code>cs_id</code> and only one has hitscounts?)</p>

<hr>

<pre><code>in  id=0x7fff370d6450, priority=70, domain=ipsec-tunnel-flow, deny=false
    hits=17302, user_data=0x8e0d6a4, **cs_id=0x7fff36c15af0**, reverse, flags=0x0, protocol=0
    src ip/id=10.202.140.0, mask=255.255.255.0, port=0, tag=0
    dst ip/id=10.202.126.0, mask=255.255.255.0, port=0, tag=0, dscp=0x0
    input_ifc=outside, output_ifc=any

in  id=0x7fff3d48dda0, priority=70, domain=ipsec-tunnel-flow, deny=false
    hits=0, user_data=0xaaf9b0c, **cs_id=0x7fff38d9d080**, reverse, flags=0x0, protocol=0
    src ip/id=10.202.140.0, mask=255.255.255.0, port=0, tag=0
    dst ip/id=10.202.126.0, mask=255.255.255.0, port=0, tag=0, dscp=0x0
    input_ifc=outside, output_ifc=any
</code></pre>

<hr>

<p>The above example is something I've taken directly from troubleshooting exactly the same problem you are describing in which case a reboot corrected the issue. I also had an issue where the same firewall stopped passing traffic on an active tunnel with encaps and decaps for only a few hosts. Bouncing the tunnel corrected the problem.</p>

<p>These issues only started after upgrading their VPNs to IKEv2. I suspect if you re-key you're tunnels to often on IKEv2 it seems to be very likely you're have issues with SPIs. You may want to try increasing the lifetime of your phase two tunnels since you have it set to 3600 right now (My customer was hitting the default data lifetime on the Phase 2 tunnels every 4 minutes and rekeying, so I set the data lifetime to unlimited)</p>
","33305"
"IPSec Site-to-site VPN between Cisco ASA 9.0 and StrongSwan 4.4","4862","","<p>The problem is the ikeV2 authentication with the ASA as initiator.</p>

<p>For the following experimets I set on the ASA the followings PSKs: <code>local: 123, remote: 321</code></p>

<hr>

<p>In case the <strong>ASA is the initiator</strong>:</p>

<p>Now several combinations in <code>ipsec.secrets</code> on the StrongSwan side:</p>

<p><strong><em>left 123 right 321</em></strong></p>

<pre><code>ASA:Auth exchange failed

SWAN: tried 1 shared key for '%any' - 'XXX', but MAC mismatched
</code></pre>

<p><strong><em>left 123 right 123</em></strong></p>

<pre><code>ASA:Failed to authenticate the IKE SA

charon: 11[IKE] authentication of 'a with pre-shared key successful
charon: 11[IKE] authentication of 'b' (myself) with pre-shared key
charon: 11[IKE] IKE_SA x[1] established between b[b]...a[a]
</code></pre>

<p><strong><em>left 321 right 123</em></strong> (should be the working one)</p>

<pre><code>ASA:Failed to authenticate the IKE SA

charon: 08[IKE] authentication of 'a' with pre-shared key successful
charon: 08[IKE] authentication of 'b' (myself) with pre-shared key
charon: 08[IKE] x[1] established between b[b]...a[a]
</code></pre>

<p><strong><em>left 321 right 321</em></strong></p>

<pre><code>ASA: Auth exchange failed

SWAN: ... but MAC mismatched
</code></pre>

<p><strong><em>If I set the two PSKs the same on each side then everything works.</em></strong></p>

<p>BTW what is the point anyway with IKEv2 having two different PSKs?</p>

<p>Oh, and ASA debugs show the following when it cannot connect:</p>

<pre><code>REAL Decrypted packet:Data: 8 bytes
IKEv2-PROTO-5: Parse Notify Payload: AUTHENTICATION_FAILED NOTIFY(AUTHENTICATION_FAILED)  Next payload: NONE, reserved: 0x0, length: 8
    Security protocol id: Unknown - 0, spi size: 0, type: AUTHENTICATION_FAILED
</code></pre>

<hr>

<p>Now with <strong>StrongSwan being the initiator</strong>: (ASA still <code>local: 123, remote: 321</code>)</p>

<p><strong><em>left 123 right 321</em></strong> !!!</p>

<pre><code>SWAN ok

ASA ok
</code></pre>

<p><strong><em>left 123 right 123</em></strong> </p>

<pre><code>SWAN: received AUTHENTICATION_FAILED notify error

ASA: Failed to authenticate the IKE SA
</code></pre>

<p><strong><em>left 321 right 123</em></strong>  (should be the working one) </p>

<pre><code>SWAN: received AUTHENTICATION_FAILED notify error

ASA: Failed to authenticate the IKE SA
</code></pre>

<p><strong><em>left 321 right 321</em></strong> !!!</p>

<pre><code>SWAN ok

ASA ok
</code></pre>

<hr>

<p>Here's the <strong>strongswan conf</strong></p>

<pre><code># cat /var/lib/strongswan/ipsec.conf.inc

conn TEST
 left=l
 leftsubnet=n/24
 leftid=l
 leftfirewall=yes
 right=r
 rightsubnet=n/24
 rightid=r
 auto=add # or start
 ike=aes256-sha512-modp1024
 esp=aes256-sha1
 keyexchange=ikev2
        authby=secret
</code></pre>

<p>Here's the <strong>ASA conf</strong>, standard stuff</p>

<pre><code>tunnel-group x type ipsec-l2l
tunnel-group x general-attributes
 default-group-policy VPN_x_GP
tunnel-group x ipsec-attributes
 ikev2 remote-authentication pre-shared-key 321
 ikev2 local-authentication pre-shared-key 123
group-policy VPN_x_GP internal
group-policy VPN_x_GP attributes
 vpn-filter value ACL_VPN_x
 vpn-tunnel-protocol ikev2
crypto ipsec ikev2 ipsec-proposal IKEv2-ESP-AES256-SHA1
 protocol esp encryption aes-256
 protocol esp integrity sha-1
crypto map internet_crypto_map 1 match address internet_cryptomap
crypto map internet_crypto_map 1 set pfs
crypto map internet_crypto_map 1 set peer x
crypto map internet_crypto_map 1 set ikev2 ipsec-proposal IKEv2-ESP-AES256-SHA1
crypto map internet_crypto_map interface outside
crypto ikev2 policy 999
 encryption aes-256
 integrity sha512
 group 2
 prf sha512
 lifetime seconds 86400
crypto ikev2 policy 1000
 encryption aes-256
 integrity sha
 group 2
 prf sha
 lifetime seconds 86400
</code></pre>

<p><strong><em>ipsec.secrets</em></strong></p>

<pre><code>left : PSK ""321""
right : PSK ""123""
</code></pre>

<p>Although I currently suspect that is not entirely correct, I believe it would be for ikev1 but I don't find much documentation for ikev2 (multiple PSKs). For now, I'll investigate in that direction.</p>
","<p>This was <a href=""https://lists.strongswan.org/pipermail/users/2015-April/007941.html"" rel=""nofollow"">discussed on the strongSwan mailing list</a>.</p>

<p>As you can see from that thread, in the end it turned out that it makes no real sense to use this, at least not with strongSwan.</p>
","25817"
"How to force VPLS/L2VPN to use a specific path","4856","","<p>We're using VPLS and L2VPN on Juniper MX for L2 connections. Signaling is done via BGP and label distribution via LDP. </p>

<p>Now we want one L2VPN to use a specific path trough the network and not follow the IGP. </p>

<p>As we currently only use LDP we would have to introduce RSVP alongside LDP. Are there any caveats while doing that?</p>

<p>I'm looking for practical examples how this is done on the Juniper boxes.</p>
","<p>Short answer, just use Resource ReSerVation Protocol (RSVP).</p>

<p>Long answer, you could use multi-topology-routing and have multiple metrics in each interface and force some packets to different topology than another packets. But I would not really venture there.</p>

<p>You might want to talk to your account team that you want segment routing implemented: <a href=""http://tools.ietf.org/html/draft-previdi-filsfils-isis-segment-routing-02"" rel=""nofollow"">http://tools.ietf.org/html/draft-previdi-filsfils-isis-segment-routing-02</a> (customer pressure will help resource development)</p>

<p>Segment routing would make it trivial to solve your problem while removing both LDP and RSVP from your network, relying only on IGP.</p>

<hr>

<p>As my suggestion in comments did not actually work, I'll explain why not, and how to fix.<br>
Problem is we need to have LSP installed in HW to be able to use it. And by my suggestion the RSVP LSP is not actually installed until LDP LSP goes away. So we cannot conditionally inject traffic there.</p>

<p>I couldn't find any way to force RSVP+LDP in ECMP, with equal preference LDP wins. But we still can achieve what is desired at least in two separate ways.</p>

<ol>
<li><strong>Dual next-hops</strong><br>
Add second next-hop in the l2circuit PEs. This next-hop will not be used by iBGP, so it draws no traffic at all.<br>
Now configure RSVP tunnel for this second loopback and use it as neighbor address for l2circuit.<br>
Net effect is, all traffic is using LDP except this l2circuit which is using RSVP</li>
<li><strong>RSVP only</strong><br>
Create two RSVP tunnels, one using IGP path (i.e. will use same as LDP) another using your explicit path. These can be set to ECMP, i.e. all traffic will use both tunnels.<br>
Now as we've accomplished ECMP requirement, we can use 'routing-options forwarding-table' export policy to put some traffic on LSP_NORMAL and some traffic on LSP_EVPN. Essentially our export policy would be:</li>
</ol>

<p>. </p>

<pre><code>term EVPN {
    from community EVPN;
    then {
        install-nexthop lsp LSP_EVPN;
        accept;
    }
}
term NORMAL {
    from next-hop 1.2.3.4;
    then {
        install-nexthop lsp LSP_NORMAL;
        accept;
    }
}
</code></pre>

<p>Now none of the traffic would actually use the ECMP as all of the traffic would be forced to one or the other RSVP LSP.<br>
I would prefer the 1st option.</p>
","455"
"What is the purpose of TIME WAIT in TCP connection tear down?","4849","","<p>I found that the reason the active closer enters TIME WAIT is to make sure that the final ACK is not lost. But how does it know if the final ACK is lost? Will the passive closer resend the FIN and then the active closer knows the ACK was lost? Here is a picture of the TCP FSM.</p>

<p><img src=""https://jose-manuel.me/wp-content/uploads/2011/09/connection-fsm.gif"" alt=""TCP FSM""></p>
","<blockquote>
  <p>Will the passive closer resend the FIN and then the active closer
  knows the ACK was lost?</p>
</blockquote>

<p>Yes. Quoting from <em>TCP/IP Illustrated Volume 1</em>, in the TCP Connection Management section:</p>

<blockquote>
  <ol start=""3"">
  <li>To complete the close, the final segment contains an ACK for the last FIN. Note that if a FIN is lost, it is retransmitted until an ACK
  for it is received.</li>
  </ol>
</blockquote>

<p>There is a timeout. When in <code>LAST_ACK</code>, the passive closer will resend <code>FIN</code> when there is a timeout, assuming that it was lost. If it was indeed lost, then the active closer will eventually receive the retransmitted <code>FIN</code> and enter <code>TIME_WAIT</code>. If the <code>FIN</code> was not lost but the final <code>ACK</code> was lost, then the active closer is in <code>TIME_WAIT</code> and receives <code>FIN</code> again. When this happens - receiving a <code>FIN</code> in <code>TIME_WAIT</code> - the <code>ACK</code> is retransmitted.</p>

<p>The timeout value in <code>TIME_WAIT</code> is <em>NOT</em> used for retransmission purposes. When there is a timeout in <code>TIME_WAIT</code>, it is assumed that the final <code>ACK</code> was successfully delivered because the passive closer didn't retransmit <code>FIN</code> packets. So, the timeout in <code>TIME_WAIT</code> is just an amount of time after which we can safely assume that if the other end didn't send anything, then it's because he received the final <code>ACK</code> and closed the connection.</p>
","19718"
"Delay or Offset-List for EIGRP tuning?","4847","","<p>Studying for CCNP-ROUTE - everything I read says it's preferable to use delay and offset-lists for metric tuning vs. say bandwidth in EIGRP.  In practice what is more commonly used out of those two options (delay/Offset-lists)?  How common is low level metric tuning for EIGRP?</p>
","<p>Any metric manipulation I've ever seen has been via offset-lists.  This allows very fine-grained control over the metric, and removes the need to calculate metric differences based on different interface delays.  </p>

<p>Note that offset-lists have the added benefit of being applied (optionally) per-interface.  So you can essentially do everything that a delay change does with an offset-list.</p>

<p>In the 'wild', the only thing my org uses offset-lists for is to force traffic to take a particular backup WAN link when the primary is having issues that don't actually take it down.  That is -- I've seen very little EIGRP metric manipulation in production networks.  I'm sure someone else will almost immediately disagree. =)</p>
","1965"
"Routing traffic out different links from the same BGP AS","4836","","<p>I have two sites, A and B, in BGP AS 65000, and a third site, C, in AS 65001. All three sites have connectivity via carrier MPLS and there is internal connectivity between sites A and B. I am trying to influence BGP so that traffic from site A to site C will be routed via site A's MPLS link, and traffic from site B to site C will route via site B's MPLS link. The topology is similar to what is described in <a href=""http://www.cisco.com/en/US/tech/tk365/technologies_configuration_example09186a00800945bf.shtml#conf3"" rel=""nofollow noreferrer"">this example</a>.</p>

<p><img src=""https://i.stack.imgur.com/UYQsa.png"" alt=""AS 65000 and 65001""></p>

<p>The edge routers at sites A and B will both see their own MPLS link as the best path, because EBGP routes are preferred over IBGP routes. However, routers further inside AS 65000 will all prefer either one link or the other. My goal is to force all the routers at either site to prefer the closest link. (Unfortunately, I'm not able to split the two sites into separate ASes at this time.)</p>

<p>Is there a sane way to accomplish this while still allowing failover connectivity to site C between the site A and B links?</p>

<p>Edit: I should have noted that there is no IGP in use here. In fact, the networks at each site exist within a VRF as part of a much, much larger network. As such, any solution needs to be rely entirely on BGP.</p>
","<p>Is there a clear definition between site A and site B?</p>

<p>If so then I would look to define a policy on the edge routers to inject a community when receiving routes from the carrier MPLS.</p>

<p>Once this community has been put on the prefixes (say 100:1 for site A and 100:2 for site B) you could then add a policy to each of site A's routers to increase the LP for any routes with community 100:1 and likewise for site B with community 100:2.</p>

<p>This solution would match the requirement of only using BGP and also would be flexible enough to still allow B to use A's uplink if it lost its own uplink to the carrier.</p>
","864"
"Why use SSH and VPN in combination?","4832","","<p>My employer requires me to first log on to a VPN, and only then I can SSH into the servers. But, given the security of SSH, is a VPN overkill?  </p>

<p>What is the use of a VPN in terms of security if I am <strong>already using SSH</strong>?</p>
","<p>The reasoning behind your current setup is probably some combination of the following three reasons.</p>

<p>The VPN is a security solution for outside your company's network <strong><em>(See #1 below)</em></strong>. SSH however, might be a second layer of security outside of your company's network... but its main purpose is to secure the traffic within your company's network <strong><em>(See #2 Below)</em></strong>.  VPN is also necessary if the device you are trying to SSH into is using a private address on your companies network <strong><em>(See #3 below)</em></strong>.</p>

<ol>
<li><p>VPN creates the tunnel to your company network that you push data through.  Thus no one seeing the traffic between you and your company's network can actually see what you're sending.  All they see is the tunnel.  This prevents people that are outside the company network from intercepting your traffic in a way that is useful.</p></li>
<li><p>SSH is an encrypted way of connecting to devices on your network (as opposed to Telnet, which is clear text).  Companies often require SSH connections even on a company network for security sake.  If I have installed malware on a network device and you <strong>telnet</strong> into that device (even if you're coming through a VPN tunnel - as the VPN tunnel usually terminates at the perimeter of a company's network), I can see your username and password.  If it's SSH you're using, then I cannot.</p></li>
<li><p>If your company is using private addressing for the internal network, then the device you are connecting to may not be rout-able over the internet.  Connecting via a VPN tunnel would be like you are directly connected in the office, therefore you would use the internal routing of the company network that would not be reachable outside of the company network.</p></li>
</ol>
","23976"
"if ABR and ASBR both are the same in OSPF,what might be reason to use NSSA?","4827","","<p><img src=""https://i.stack.imgur.com/UDHvb.png"" alt=""enter image description here""></p>

<p>in this diagram we have same ABR and ASBR,this router functions as an ABR between area 1 and zero,plus it works as an ASBR and redistribute external routes from some other routing domain to OSPF domain, so the question is:</p>

<ol>
<li>why do we need to have an NSSA in here? I mean this router has got one interface in Area 0 and one in Area 1,and one in some other routing domain,it does not belong to a particular area(does not have all its interfaces in one single,individual area)so waht's the reason to have a NSSA in here?and if we are supposed to have NSSA which area will be that?</li>
</ol>

<p>refereed to this document <a href=""http://www.cisco.com/c/en/us/support/docs/ip/open-shortest-path-first-ospf/6208-nssa.html"" rel=""nofollow noreferrer"">http://www.cisco.com/c/en/us/support/docs/ip/open-shortest-path-first-ospf/6208-nssa.html</a> in which talks about ""Bit P"" and it says ""This happens when NSSA ASBR is also an NSSA ABR."" so why on the earth in this case do we need to have NSSA? it's so confusing.</p>

<p>thank you</p>
","<p>You don't need area 1 to be NSSA if it is not a stub area.  In that case, the external routes are flooded into both area 1 and 0.  But if you want area 1 to be stubby, meaning that it doesn't receive any external LSAs from other areas, then it must be NSSA, because it is injecting external routes. </p>

<p>The external routes are flooded in both areas. But if area 1 is a stub, the routers don't forward type 5 LSAs  The only external routes that can be flooded in a stub area are type 7, which by definition makes it a NSSA area.</p>

<p>The reason the P bit is not set is because the router is already injecting type 5 LSAs into area 0, so there's no need for translating type 7 to type 5.</p>

<p>By the way, area 0 is never a stub or nssa.</p>
","7966"
"Checking advertised routes - BGP","4817","","<p>For <strong>IOS-XE</strong> and <strong>Junos</strong>, I wanted to know the command that displays the routes advertised by BGP to neighbors. On IOS-XR, this command is 'show bgp advertised'.</p>

<p>I know on XE, per neighbor based advertised routes can be checked. But I want advertised routes to all the neighbors combined.</p>

<p>Thanks in advance.</p>

<p><strong>UPDATE: Confirmed with Cisco TAC - for Cisco IOS-XE, there is no such command to view routes to ALL the neighbors. It can only be per neighbor based.</strong></p>
","<p>For Junos, the command is ""show route advertising-protocol bgp 'neighbor'"".</p>

<p>According to the XE <a href=""http://www.cisco.com/c/en/us/td/docs/ios-xml/ios/iproute_bgp/command/iproute_bgp-xe-3se-3850-cr-book/iproute_bgp-xe-3se-3850-cr-book_chapter_0100.html#wp3502759178"" rel=""nofollow"">command reference</a>:</p>

<p>show ip bgp neighbors 'neighbor' advertised-routes </p>
","7033"
"Native VLAN between switch and router","4802","","<p>I'm asking you today for helping me out with demistifying a question I have regarding the native vlan and a trunk link between a regular L2 switch and a router.</p>

<p>Let me explain quickly the scenario here:</p>

<p>We have a seperate network whose switch is a regular HP2824 hooked up with a SM fiber uplink coming from another building (the corporate network/internet). The trunk port 20 of this switch is hooked up to a regular router in our engineering network (isolated). This router serves us to route between multiple vlans/subnets we have for different sectors in the factory.</p>

<p>There is that trunk port going to the HP switch which confuses me a bit. I'm a cisco guy so i speak access/trunk links, not tag/untag. I'm getting used to it more everyday. On the HP switch, <strong>port 20 is untag vlan 8</strong>. vlan1 is not used on the HP side. So i'm assuming the native vlan of that port is 8.</p>

<p>On the router side, the link is considered an <strong>edge port</strong> (not configured as trunk) and its <strong>pvid is 69</strong>. In the factory, when you hook something in the vlan 69, you can pass through the corporate side and get internet access/ip phone, etc. Which makes sense. On switches that have computers needing an internet access, you must tag/allow vlan 69 to passthrough and untag the said port in 69 for their NIC.</p>

<p>I am wondering how the traffic is handled between the switch and the router? <strong>There is obviously a native vlan mismatch which leads to double-tagging/hopping. How in the 802.something world is this working?</strong> Router knows the destination network so it discards the vlan tag (which there isn't any) and routes traffic to next hop?</p>

<p>I'm wanting to change that router port to a trunk (because that's how to nature of things works in networking isn't? trunking two equipments together), leaving the native vlan 69 but i'm wondering what would happen on the other side with that port 20 leaving untag on vlan 8 ?? Should I tag port20 with vlan 8 accordingly?</p>

<p>(Need to mention there is no traffic restriction or acls on the network)</p>

<p>Thanks for reading me and taking the time to help!</p>

<p>Happy holidays!</p>
","<p>Hope I understand what you are asking here (your writing is long and my memory is short :))</p>

<p>The HP untagged VLAN on a tagged interface functions similarly as the native VLAN you configure on Cisco switch trunk interface (actually tag/untag makes more sense than access/trunk technically speaking), the VLAN 8 in your case.</p>

<p>On your router interface facing HP switch, it is running as access/untagged port. So all ingress traffic on that router interface is VLAN 69; meantime router will remove VLAN 69 tag of the egree traffic to switch and when traffic arrives on switch, it will be VLAN 8. However if you have traffic marked with other VLAN, like VLAN 10 and send the traffic to router as the interface facing router is tagged/trunk port, router will not be able to understand it as the edge interface is expecting something without VLAN tag.</p>

<p>There is no native VLAN mismatch just like you connect a laptop to a trunk interface with certain native VLAN configured and switch does not complain about mismatch, right? </p>

<p>Hope this helps.</p>
","14768"
"how to find a minimum number of host bits needed?","4784","","<p>let's say I have 200.35.1.0/24 network block. I need to address 20 hosts on each subnet. How do I specify the minimum number of host bits that are required?</p>
","<p>First, you have to add 2 addresses to the number of hosts you want. These are for network and broadcast addreses (therefore, for 20 hosts you get 20+2=22)</p>

<p>Second, convert this number to the binary (22d = 10110b)</p>

<p>Now, count how many bits you used and that's your answer (in this case, it will be 5 bits, so 32-5=27 bits for network)
Your subnets will be then 200.35.1.0/27, 200.35.1.32/27, 200.35.1.64/27, and so on..</p>

<p>Alternatively, you can use some network subnet calculator, most of them allow you to choose or enter number of hosts per subnet (always choose closest bigger number by at least 2 hosts, as I said in 1st step). Example of such calculator is <a href=""http://www.subnet-calculator.com/"" rel=""nofollow"">http://www.subnet-calculator.com/</a></p>
","23359"
"Why is the protocol field part of an IP header?","4783","","<p><em>Note this is <strong>not</strong> a duplicate of <a href=""https://networkengineering.stackexchange.com/questions/14841/why-is-the-ip-layer-aware-of-higher-layers-in-the-network-stack"">Why is the IP layer aware of higher layers in the network stack?</a></em></p>

<p>The need for a protocol identifier (eg. the IP header's Protocol field) in packet-based communication is clear: It's either this or some sort of computationally-intensive inference algorithm. The question is: why must it exist as part of the IP header rather than in the encapsulated protocols' headers?</p>

<p>It seems to me that this one of those cases where theoretical clarity meets practical considerations (AKA ""Haskell meets Go""...): On the one hand placing a ""protocol"" field in the IP header breaks the conceptual <em>separation of interests</em> that eg. the OSI model aimed for; on the other hand forcing protocols higher up the stack to state their type in a consistent manner is much harder, and would eventually lead to a similar situation anyway (eg. if every protocol higher up the stack used its first header byte to state its type, it would look as if IP used its <em>last</em> header byte to do the same).</p>

<p>So my question is - what was the reasoning behind placing the ""protocol"" field inside the IP's packet header rather than anywhere else?</p>

<p><strong>Edit</strong>: When writing this question I pondered whether to add the word ""<em>original</em>"" before ""reasoning"", ie the reasoning of the team that devised <em>IP</em>, but reckoned it was redundant as the question was phrased in the past tense (""what <em>was</em> the reasoning...""). Nevertheless this seems needed, as none of the replies actually answers that question. Some insights of note:</p>

<ul>
<li>@immibis suggests any other form would break other protocols' models (eg. encrypted communication protocols would have to have a plaintext identification field)</li>
<li>@Eddie essentially states that the reason is convention (acceptance of the <em>protocol chain</em> design, though why that's the convention remains a mystery)</li>
<li>@Ricky stresses practicality as an overarching consideration</li>
<li>@Claudio suggests that were the protocol field a part of the encapsulated header there would be need for an additional <em>header identification</em> step, where in the current model that takes place during the IP header's parsing</li>
</ul>

<p>So I'll rephrase: What's wrong with a model where instead of every header identifying the next header's type, every header identifies its <em>own</em> type in a predetermined location (eg. in the first header byte)? Why is such a model any less desirable than the current one?</p>

<p><strong>Edit #2</strong>: It seems that the answer is a combination of several of the answers given (mainly those mentioned above along with @Eddie's second addendum):</p>

<ol>
<li><p>Simplicity: Breaking the principal of <em>layer agnosticism</em> in <em>this particular case</em> means the stack (or the model) as a whole can be simpler:</p>

<ul>
<li>There's no ""protocol identification"" phase, neither implicit nor explicit</li>
<li>Layer independence is improved (eg. an encrypted communications handler doesn't have to share a <a href=""https://imgur.com/aWPsqpW"" rel=""nofollow noreferrer"">layer</a> with any helper protocol)</li>
</ul>

<p>Regulation is also greatly simplified, not having to enforce any requirements on client protocols.</p></li>
<li><p>Performance: Stating the protocol of an encapsulated packet ahead of the packet itself allows several types of fast routing protocols (packet filtering, QOS, cut-through switching) to be integrated into the network (internet) layer itself; these can then make decisions as quickly as a hash table can be accessed, which is all the more important considering the limited hardware this protocol was designed to run on.</p></li>
</ol>

<p>This model has its disadvantages, but it seems that for the <em>common</em> usage cases it's better suited than the alternatives.</p>
","<p>Remember, bits arrive on a NIC as a series of 1's and 0's. Something has to exist to dictate how the next series of 1's and 0's should be interpreted.</p>

<p>Ethernet2 is the defacto standard for L2, as such it is assumed to interpret the first 56 bits as a Preamble, and the next 8 bits as the Preamble, and the next 48 bits as the Destination MAC, and the next 48 bits as the Source MAC, and <a href=""https://en.wikipedia.org/wiki/Ethernet_frame#Structure"" rel=""nofollow noreferrer"">so on and so forth</a>.</p>

<p>The only variation might be the somewhat antiquated <a href=""https://networkengineering.stackexchange.com/questions/5300/what-is-the-difference-between-ethernet-ii-and-802-3-ethernet"">802.3 L2 header</a>, which predates the current Ethernet2 standard, but also included a <a href=""http://www.wildpackets.com/resources/compendium/ethernet/frame_snap_iee8023#SNAP"" rel=""nofollow noreferrer"">SNAP header</a> which served the same purpose. But, I digress.</p>

<p>The standard, Ethernet2 L2 header has a Type field, which tells the receiving node how to interpret the 1's and 0's that follow:
<a href=""https://i.stack.imgur.com/WRiNM.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/WRiNM.png"" alt=""Ethernet Header with Type field highlighted""></a></p>

<p>Without this, how would the receiving entity know whether the L3 header is IP, or IPv6? (or AppleTalk, or IPX, or IPv8, etc...)</p>

<p>The L3 header (to the same frame as above) has the Protocol field, which tells the receiving node how to interpret the next set of 1's and 0's that follow the IP header:
<a href=""https://i.stack.imgur.com/p8shv.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/p8shv.png"" alt=""IP Header with Protocol field highlighted""></a></p>

<p>Again, without this, how would the receiving entity know to interpret those bits as an ICMP packet? It <em>could</em> also be TCP, or UDP, or GRE, or another IP header, or a plethora of others.</p>

<p>This creates a sort of <em>protocol chain</em> to indicate to the receiving entity how to interpret the next set of bits. Without this, the receiving end would have to use heuristics (or other similar strategy) to first identify the type of header, and then interpret and process the bits. Which would add significant overhead at each layer, and noticeable delay in packet processing.</p>

<p>At this point, its tempting to look at the <a href=""http://www.networksorcery.com/enp/protocol/tcp.htm"" rel=""nofollow noreferrer"">TCP header</a> or <a href=""http://www.networksorcery.com/enp/protocol/udp.htm"" rel=""nofollow noreferrer"">UDP header</a> and point out that <em>those</em> headers don't have a Type or Protocol field... but recall, once TCP/UDP have interpreted the bits, it passes its payload to the application. Which undoubtedly probably has some sort of marker to at least identify the version of the L5+ protocol. For example, HTTP has a version number built into the HTTP requests: (1.0 vs 1.1).</p>

<p><HR></p>

<p><em>Edit to speak to the original poster's edit:</em></p>

<blockquote>
  <p>What's wrong with a model where instead of every header identifying the next header's type, every header identifies its own type in a predetermined location (eg. in the first header byte)? Why is such a model any less desirable than the current one?</p>
</blockquote>

<p>Before getting into my attempt at an answer, I think its worth noting that there is probably no definitive million dollar answer as to why one way is better or the other. In both cases, protocol identifying itself vs protocol identifying what it encapsulates, the receiving entity would be able to interpret the bits correctly.</p>

<p>That said, I think there are a few reasons why the protocol identifying the next header makes more sense:</p>

<p><strong>#1</strong></p>

<p>If the standard was for the first byte of <em>every</em> header to identify itself, this would be setting a standard across <em>every</em> protocol at <em>every</em> layer. Which means if only one byte is dedicated we could only ever have 256 protocols. Even if you dedicated two bytes, that caps you at 65536. Either way, it puts an arbitrary cap on the number of protocols that could be developed.</p>

<p>Whereas if one protocol was only responsible for interpreting the next, and even if only one byte was dedicated to each protocol identification field, at the very least you 'scale' that 256 maximum to each layer.</p>

<p><strong>#2</strong></p>

<p>Protocols which order their fields in such a way to allow receiving entities the option to only inspect the bare minimum to make a decision only exists if the next protocol field exists in the previous header.</p>

<p>Ethernet2 and ""<a href=""https://en.wikipedia.org/wiki/Cut-through_switching"" rel=""nofollow noreferrer"">Cut-Through</a>"" switching come to mind. This would be impossible if the first (few) bytes were forced to be a protocol identification block.</p>

<p><strong>#3</strong></p>

<p>Lastly, I don't want to take credit, but I think <a href=""https://networkengineering.stackexchange.com/users/4882/reirab"">@reirab</a>'s <a href=""https://networkengineering.stackexchange.com/questions/26446/why-is-the-protocol-field-part-of-an-ip-header#comment41686_26446"">answer in the comment</a> in the comments of the original question is extremely viable:</p>

<blockquote>
  <p>Because then it's effectively just the last byte of the IPv4 (or whatever lower-level protocol) header in all but name. It's a ""chicken or egg"" problem. You can't parse a header if you don't know what protocol it is.</p>
</blockquote>

<p><em><sub>Quoted with Reirab's permission</sub></em></p>
","26457"
"When is an IPv4 TTL decremented and what is the drop condition?","4764","","<p>When an IPv4 packet traverses a router or is processed by a host, the TTL is decremented and if the TTL is too low, the packet is dropped.</p>

<p>My questions are:</p>

<ul>
<li>When is the TTL decremented? Before or after the packet is considered for dropping?</li>
<li>What is the drop condition? Is it if the TTL=0? Or is it if the TTL would be 0 if the TTL were decremented? Something else?</li>
<li>Do certain types of networking hardware behave differently than others? For example, if a router would drop a packet received with TTL=0, would a host also drop this, or would it forward it to the client?</li>
</ul>

<p>From this <a href=""http://www.dslreports.com/forum/r25655787-When-is-TTL-Decremented-by-a-Router-"" rel=""nofollow"">forum post</a>, it appears that the answer to the first question is usually that the TTL is decremented only once the router has decided not to drop the packet, and that the drop condition is that the the packet is dropped if the TTL=0 on the received packet.</p>

<p>What that really leaves is:</p>

<ul>
<li>Is there more nuance to these answers than that forum post would make it seem?</li>
<li>If a router would drop a packet, is a host delivering a packet to a client considered to be a ""hop"" (and thus the packet is dropped), or not?</li>
</ul>
","<p>What you are looking for is specified in <a href=""http://tools.ietf.org/html/rfc1812#section-4.2.2.9"">RFC1812</a>. To answer your specific questions:</p>

<p>The router would drop the packet when it sees the TTL is too low after it decides to forward it:</p>

<blockquote>
  <p>Note in particular that a router MUST NOT check the TTL of a packet
  except when forwarding it.</p>
  
  <p>A router MUST NOT originate or forward a datagram with a Time-to-Live
  (TTL) value of zero.</p>
  
  <p>A router MUST NOT discard a datagram just because it was received with
  TTL equal to zero or one; if it is to the router and otherwise valid,
  the router MUST attempt to receive it.</p>
</blockquote>

<p>The receiving host doesn't check the TTL so even though a packet with TTL 0 should not be sent the receiving host will process it anyway:</p>

<blockquote>
  <p>TTL expiration is intended to cause datagrams to be discarded by
  routers, but not by the destination host.</p>
</blockquote>
","10932"
"Cisco Static NAT with route-maps","4738","","<p><strong>Update:</strong></p>

<p>Seems that route maps only match on IP addresses, not on the ports. Had another situation this week on a different device, model and software version. Ended up changing the NAT statements to:</p>

<p>ip nat inside source static tcp <em>192.168.1.20 3389 x.x.x.x 3389</em></p>

<p>I then restricted access based on an ACL rather than a route map. Would have been nice to define conditional NATing, but it seems it just doesn't work.</p>

<hr>

<p>So we have a pretty standard NAT box setup to offer a hosted NAT solution for a number of customers.</p>

<p>Here is the basic topology:</p>

<p><img src=""https://i.imgur.com/OzKoo65.jpg"" alt=""Topology"" title=""Topology""></p>

<p><em>Cisco IOS Software, C2900 Software (C2900-UNIVERSALK9-M), Version 15.2(4)M3, RELEASE SOFTWARE (fc2)</em></p>

<p>The issue I have is to do with the route-map section of the NAT statements.</p>

<pre><code>ip nat inside source static tcp 10.1.10.201 22 x.x.x.x 22 vrf Customer1-vrf route-map Customer1-portforwarding extendable

ip access-list extended Customer1-forwarding-acl
 permit tcp host 10.1.10.201 host a.a.a.a eq 22
 permit tcp host 10.1.10.201 host b.b.b.b eq 22

route-map Customer1-portforwarding permit 10
 match ip address Customer1-forwarding-acl
</code></pre>

<p>I believe I have the understanding of the route-map correct. It is meant to designate what is allowed to NAT and what isn't. I am basically trying to set it up to allow only translations from specific public source addresses. It doesn't seem to be doing that. It seems to be permitting translations from any public address.</p>

<p>I changed the ACL completely to a 'deny ip any any' statement and it still permits. I'm at a bit of a loss. It appears the route-map isn't doing anything.</p>

<p>Any help would be greatly appreciated!</p>

<p>Cheers,</p>

<p>H</p>
","<p>It appears that the route map has some issues. I wasn't able to troubleshoot further.</p>
","43224"
"Is 'switchport protected' supposed to block unicast flooding?","4735","","<p>Does having <code>switchport protected</code> configured on an interface prevent unicast flooding for a MAC address the switch hasn't learned?</p>

<p>The information that I'm seeing conflicts -- the <a href=""http://en.wikipedia.org/wiki/Unicast_flood#Remedies"" rel=""nofollow"">wikipedia page</a> on unicast flooding cites protected mode as a mechanism to block flooding, while Cisco's documentation says that <code>switchport protected</code> doesn't matter, and that <code>switchport block unicast</code> would still be needed to prevent flooding.</p>

<p>However, I recently ran into an issue where on a 2950G running some relatively ancient 12.1(22) code, unicast flooding seemed to be completely broken for a protected port -- the aging time on the switch was 5 minutes, while the router's ARP timeout was 30 minutes, and the one TCP connection utilizing this interface had a tendency to sit dormant for 10 minutes at a time - and be non-functional when waking up after 10 minutes in this case.</p>

<p>Captures run on the host showed no unicast flooding when it was expected, and increasing the MAC aging timer on the switch to match ARP completely resolved the problem.</p>

<p>Is this behavior undefined or inconsistent in older IOS versions, or is this just a bug in this old code?</p>
","<blockquote>
  <p>The information that I'm seeing conflicts -- the wikipedia page on unicast flooding cites protected mode as a mechanism to block flooding, while Cisco's documentation says that switchport protected doesn't matter, and that switchport block unicast would still be needed to prevent flooding.</p>
</blockquote>

<p><code>switchport protected</code> is used to enforce privacy within a vlan... the command prevents ports from talking to other ports configured with <code>switchport protected</code>.  This command reduces flooding as a side-effect of using it on all ports in a Vlan, but it does much more than ""just"" remove flooding from a switchport.  Honestly, I think there are better ways to accomplish your goals.</p>

<p><code>switchport protected</code> is useful if you're aggregating colocation customers in the same vlan; this command is one way to offer privacy between the customers without the complications of private vlans.  The wikipedia article you mentioned, says you can ""bounce"" traffic off the default gateway (which should not be on a protected switchport) to reach those other destinations... </p>

<p><code>switchport block unicast</code> does stop unknown unicast flooding; however, see below for why I think you shouldn't need this command.</p>

<blockquote>
  <p>However, I recently ran into an issue where on a 2950G running some relatively ancient 12.1(22) code, unicast flooding seemed to be completely broken for a protected port -- the aging time on the switch was 5 minutes, while the router's ARP timeout was 30 minutes, and the one TCP connection utilizing this interface had a tendency to sit dormant for 10 minutes at a time - and be non-functional when waking up after 10 minutes in this case.</p>
</blockquote>

<p>As I mentioned in my comment, if there is any potential for an asymmetric routed path in this network, you either need unknown unicast flooding, or you need to match the CAM and ARP timers to ensure that CAM entries don't age out before the ARP entries.</p>

<p>In most cases, <a href=""https://networkengineering.stackexchange.com/a/2193/775"">matching the ARP and CAM timers is the right way to fix the situation</a>, but the choice is yours...</p>

<p><strong>EDIT to respond to the comments:</strong></p>

<blockquote>
  <p>Setting the timers to match is working great as a workaround - I just don't understand why the flooding isn't happening as expected.</p>
</blockquote>

<p>Quoting from ""CCIE Practical Studies, Volume 2"", page 115 by Karl Solie, Leah Lynch, Charles Ragan:</p>

<p>If unknown unicast and multicast traffic is forwarded to a protected port, there could be security issues. To prevent unknown unicast or multicast traffic from being forwarded from one port to another, you can configure a port (protected or nonprotected) to block unknown unicast and multicast traffic.</p>

<pre><code>3550_switch(config-if)#switchport block unicast
3550_switch(config-if)#switchport block multicast
</code></pre>
","2906"
"Troubleshooting low Metro Ethernet TCP throughput","4731","","<p><strong>The setup</strong></p>

<p>We have rented a few leased lines that present themselves as a layer 2 network, i.e. you have one big pipe at the datacenter and the remote sites have smaller pipes. Inside the layer 2 network you can do whatever you like. Probably they use 802.1ad to give each customer their separate network inside their network. AFAICS most sites are connected via plain VDSL. </p>

<p>We decided to put a router at each site, and give each site its own VLAN. The firewall at the DC thus has as many VLANs defined as there are sites. Each site thus uses its on address range in its own VLAN.</p>

<p>Network diagram:</p>

<p><a href=""https://i.stack.imgur.com/Z8Wtf.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/Z8Wtf.png"" alt=""network diagram""></a></p>

<p><strong>The problem</strong></p>

<p>Now, we are faced with throughput problems:</p>

<ul>
<li>Running an FTP transfer from site to DC works fine at about 10Mb/s which is line speed.</li>
<li>Running an FTP transfer from DC to site does not work fine at 6Mb/s or less.</li>
</ul>

<p>It does not matter <em>which side</em> initiates the transfer. The only consistent thing is that one direction is not working well. Too bad it is the direction toward the site because that would be the bandwidth we need most as we'd like to use terminal server clients.</p>

<p>About 10 seconds into the transfer, the throughput drops. We see DUP ACKs when sniffing. Which maybe leads me to rate limiting at the provider's end?? (Currently, they don't have a clue, and I like to make sure we're not at fault before escalating)</p>

<p><strong>NOTE</strong> The remote sites are limited to 10Mb somehow. Setting the switch-to-Metro-port to 10Mb doesn't help either. In fact it's the worst then (max. 30 KB/s). Setting to 100Mb works fine but already starts to produce the outlined problem. Same for 1G.</p>

<p>Captures of the problem can be downloaded here:</p>

<pre><code>* http://178.63.11.6/dc-to-remote_dc-side.pcapng
* http://178.63.11.6/dc-to-remote_remote-side.pcapng
</code></pre>

<p><strong>Diagnostics</strong></p>

<p>In the image you see the Wireshark IO Graph with some error details:</p>

<ul>
<li>on the left: FTP transfer from DC to site</li>
<li>on the right: FTP transfer from site to DC</li>
</ul>

<p><img src=""https://i.stack.imgur.com/faSWa.jpg"" alt=""duplicate acks""></p>

<p>In case the other side initiates the transfer (i.e. put from dc, instead of get from remote), the problem remains unchanged.</p>

<p>Please indulge me with what you think could be the problem here.</p>

<hr>

<p>UPDATE #1 (integrated above)</p>

<hr>

<p><strong><em>UPDATE #2</em></strong> (<em>UPDATED</em>)</p>

<p>This must be a congestion control thing.</p>

<p>Note that from DC to remote we have 10G->1G->100M->10M->1G links. &lt;-- not working</p>

<p>In the other direction we thus have the inverse: 1G->10M->100M->1G->10G. &lt;-- just fine</p>

<p>The first ""1G->10M"" is the ""invisible"" 10M at the remote site, where everything including the uplink port speed is set at 1G, even though there's only 10M behind it (being sold).</p>

<p>However the 100Mbps at the DC are real 100Mbps, the interface is configured at 100Mbps on the physical layer.</p>

<p>I now used iperf:</p>

<ul>
<li><strong>TCP</strong> tests work fine only in one direction (client=DC, server=remote)</li>
</ul>

<pre>
./iperf -c 192.168.x -i2 -t 60 -r
------------------------------------------------------------
Server listening on TCP port 5001
TCP window size: 85.3 KByte (default)
------------------------------------------------------------
------------------------------------------------------------
Client connecting to 192.168.x, TCP port 5001
TCP window size: 16.0 KByte (default)
------------------------------------------------------------
[  3] local 10.x port 38195 connected with 192.168.x port 5001
[  3]  0.0- 2.0 sec  1.44 MBytes  6.03 Mbits/sec
[  3]  2.0- 4.0 sec  2.23 MBytes  9.37 Mbits/sec
[  3]  4.0- 6.0 sec  2.28 MBytes  9.57 Mbits/sec
[  3]  6.0- 8.0 sec  1.88 MBytes  7.90 Mbits/sec
[  3]  8.0-10.0 sec  1.00 MBytes  4.19 Mbits/sec
[  3] 10.0-12.0 sec  1.30 MBytes  5.47 Mbits/sec
[  3] 12.0-14.0 sec    688 KBytes  2.82 Mbits/sec
[  3] 14.0-16.0 sec    840 KBytes  3.44 Mbits/sec
[  3] 16.0-18.0 sec  1.03 MBytes  4.33 Mbits/sec
[  3] 18.0-20.0 sec  1.01 MBytes  4.23 Mbits/sec
[  3] 20.0-22.0 sec  1.03 MBytes  4.33 Mbits/sec
[  3] 22.0-24.0 sec  1.18 MBytes  4.95 Mbits/sec
[  3] 24.0-26.0 sec    904 KBytes  3.70 Mbits/sec
[  3] 26.0-28.0 sec    840 KBytes  3.44 Mbits/sec
[  3] 28.0-30.0 sec    936 KBytes  3.83 Mbits/sec
[  3] 30.0-32.0 sec  1.09 MBytes  4.59 Mbits/sec
[  3] 32.0-34.0 sec    960 KBytes  3.93 Mbits/sec
[  3] 34.0-36.0 sec    752 KBytes  3.08 Mbits/sec
[  3] 36.0-38.0 sec  1.09 MBytes  4.59 Mbits/sec
[  3] 38.0-40.0 sec  1.09 MBytes  4.59 Mbits/sec
[  3] 40.0-42.0 sec    840 KBytes  3.44 Mbits/sec
[  3] 42.0-44.0 sec  1.27 MBytes  5.34 Mbits/sec
[  3] 44.0-46.0 sec  1.16 MBytes  4.85 Mbits/sec
[  3] 46.0-48.0 sec    840 KBytes  3.44 Mbits/sec
[  3] 48.0-50.0 sec    960 KBytes  3.93 Mbits/sec
[  3] 50.0-52.0 sec  1.28 MBytes  5.37 Mbits/sec
[  3] 52.0-54.0 sec  1.09 MBytes  4.59 Mbits/sec
[  3] 54.0-56.0 sec    992 KBytes  4.06 Mbits/sec
[  3] 56.0-58.0 sec  1.00 MBytes  4.19 Mbits/sec
[  3] 58.0-60.0 sec  1.09 MBytes  4.59 Mbits/sec
[  3]  0.0-60.2 sec  33.9 MBytes  4.73 Mbits/sec
[  5] local 10.x port 5001 connected with 192.168.x port 10965
[  5]  0.0- 2.0 sec  1.85 MBytes  7.75 Mbits/sec
[  5]  2.0- 4.0 sec  1.90 MBytes  7.98 Mbits/sec
[  5]  4.0- 6.0 sec  1.89 MBytes  7.93 Mbits/sec
[  5]  6.0- 8.0 sec  1.92 MBytes  8.07 Mbits/sec
[  5]  8.0-10.0 sec  1.91 MBytes  8.02 Mbits/sec
[  5] 10.0-12.0 sec  1.83 MBytes  7.69 Mbits/sec
[  5] 12.0-14.0 sec  1.86 MBytes  7.78 Mbits/sec
[  5] 14.0-16.0 sec  1.79 MBytes  7.52 Mbits/sec
[  5] 16.0-18.0 sec  1.79 MBytes  7.52 Mbits/sec
[  5] 18.0-20.0 sec  1.89 MBytes  7.91 Mbits/sec
[  5] 20.0-22.0 sec  1.91 MBytes  8.00 Mbits/sec
[  5] 22.0-24.0 sec  1.88 MBytes  7.91 Mbits/sec
[  5] 24.0-26.0 sec  1.95 MBytes  8.16 Mbits/sec
[  5] 26.0-28.0 sec  1.90 MBytes  7.99 Mbits/sec
[  5] 28.0-30.0 sec  1.87 MBytes  7.84 Mbits/sec
[  5] 30.0-32.0 sec  1.85 MBytes  7.77 Mbits/sec
[  5] 32.0-34.0 sec  1.55 MBytes  6.49 Mbits/sec
[  5] 34.0-36.0 sec  1.92 MBytes  8.07 Mbits/sec
[  5] 36.0-38.0 sec  1.90 MBytes  7.99 Mbits/sec
[  5] 38.0-40.0 sec  1.84 MBytes  7.73 Mbits/sec
[  5] 40.0-42.0 sec  1.66 MBytes  6.95 Mbits/sec
[  5] 42.0-44.0 sec  1.92 MBytes  8.07 Mbits/sec
[  5] 44.0-46.0 sec  1.91 MBytes  7.99 Mbits/sec
[  5] 46.0-48.0 sec  1.90 MBytes  7.98 Mbits/sec
[  5] 48.0-50.0 sec  1.84 MBytes  7.70 Mbits/sec
[  5] 50.0-52.0 sec  1.93 MBytes  8.09 Mbits/sec
[  5] 52.0-54.0 sec  1.80 MBytes  7.54 Mbits/sec
[  5] 54.0-56.0 sec  1.83 MBytes  7.67 Mbits/sec
[  5] 56.0-58.0 sec  1.88 MBytes  7.86 Mbits/sec
[  5] 58.0-60.0 sec  1.85 MBytes  7.78 Mbits/sec
[  5]  0.0-60.3 sec  56.0 MBytes  7.79 Mbits/sec
</pre>

<ul>
<li>To get to the bottom of it, here are <strong>UDP</strong> tests from two hosts in the same VLAN yet using the Metro Connection, 200=remote, 201=DC</li>
</ul>

<p>We see the packet loss increasing with incrementing bandwidth (when approaching 10Mbps we have 0.93%, starts to be critical... and would also explain why TCP has problem performing)</p>

<pre>

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
C:\iperf-2.0.5-2-win32>iperf -c 192.168.191.200 -i 1 -t 20 -r -u
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
------------------------------------------------------------
Server listening on UDP port 5001
Receiving 1470 byte datagrams
UDP buffer size: 64.0 KByte (default)
------------------------------------------------------------
------------------------------------------------------------
Client connecting to 192.168.191.200, UDP port 5001
Sending 1470 byte datagrams
UDP buffer size: 64.0 KByte (default)
------------------------------------------------------------
[  4] local 192.168.191.201 port 61759 connected with 192.168.191.200 port 5001
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0- 1.0 sec   128 KBytes  1.05 Mbits/sec
[  4]  1.0- 2.0 sec   128 KBytes  1.05 Mbits/sec
[  4]  2.0- 3.0 sec   129 KBytes  1.06 Mbits/sec
[  4]  3.0- 4.0 sec   128 KBytes  1.05 Mbits/sec
[  4]  4.0- 5.0 sec   128 KBytes  1.05 Mbits/sec
[  4]  5.0- 6.0 sec   128 KBytes  1.05 Mbits/sec
[  4]  6.0- 7.0 sec   128 KBytes  1.05 Mbits/sec
[  4]  7.0- 8.0 sec   128 KBytes  1.05 Mbits/sec
[  4]  8.0- 9.0 sec   128 KBytes  1.05 Mbits/sec
[  4]  9.0-10.0 sec   129 KBytes  1.06 Mbits/sec
[  4] 10.0-11.0 sec   128 KBytes  1.05 Mbits/sec
[  4] 11.0-12.0 sec   128 KBytes  1.05 Mbits/sec
[  4] 12.0-13.0 sec   128 KBytes  1.05 Mbits/sec
[  4] 13.0-14.0 sec   128 KBytes  1.05 Mbits/sec
[  4] 14.0-15.0 sec   128 KBytes  1.05 Mbits/sec
[  4] 15.0-16.0 sec   128 KBytes  1.05 Mbits/sec
[  4] 16.0-17.0 sec   128 KBytes  1.05 Mbits/sec
[  4] 17.0-18.0 sec   128 KBytes  1.05 Mbits/sec
[  4] 18.0-19.0 sec   131 KBytes  1.07 Mbits/sec
[  4] 19.0-20.0 sec   128 KBytes  1.05 Mbits/sec
[  4]  0.0-20.0 sec  2.50 MBytes  1.05 Mbits/sec
[  4] Sent 1785 datagrams
[  4] Server Report:
[  4]  0.0-20.0 sec  2.50 MBytes  1.05 Mbits/sec   0.257 ms    0/ 1785 (0%)
[  3] local 192.168.191.201 port 5001 connected with 192.168.191.200 port 50749
[  3]  0.0- 1.0 sec   128 KBytes  1.05 Mbits/sec   0.285 ms    0/   89 (0%)
[  3]  1.0- 2.0 sec   128 KBytes  1.05 Mbits/sec   0.313 ms    0/   89 (0%)
[  3]  2.0- 3.0 sec   128 KBytes  1.05 Mbits/sec   0.278 ms    0/   89 (0%)
[  3]  3.0- 4.0 sec   128 KBytes  1.05 Mbits/sec   0.241 ms    0/   89 (0%)
[  3]  4.0- 5.0 sec   128 KBytes  1.05 Mbits/sec   0.266 ms    0/   89 (0%)
[  3]  5.0- 6.0 sec   128 KBytes  1.05 Mbits/sec   0.293 ms    0/   89 (0%)
[  3]  6.0- 7.0 sec   128 KBytes  1.05 Mbits/sec   0.314 ms    0/   89 (0%)
[  3]  7.0- 8.0 sec   128 KBytes  1.05 Mbits/sec   0.280 ms    0/   89 (0%)
[  3]  8.0- 9.0 sec   128 KBytes  1.05 Mbits/sec   0.242 ms    0/   89 (0%)
[  3]  9.0-10.0 sec   129 KBytes  1.06 Mbits/sec   0.250 ms    0/   90 (0%)
[  3] 10.0-11.0 sec   128 KBytes  1.05 Mbits/sec   0.275 ms    0/   89 (0%)
[  3] 11.0-12.0 sec   128 KBytes  1.05 Mbits/sec   0.299 ms    0/   89 (0%)
[  3] 12.0-13.0 sec   128 KBytes  1.05 Mbits/sec   0.327 ms    0/   89 (0%)
[  3] 13.0-14.0 sec   128 KBytes  1.05 Mbits/sec   0.290 ms    0/   89 (0%)
[  3] 14.0-15.0 sec   128 KBytes  1.05 Mbits/sec   0.251 ms    0/   89 (0%)
[  3] 15.0-16.0 sec   128 KBytes  1.05 Mbits/sec   0.275 ms    0/   89 (0%)
[  3] 16.0-17.0 sec   128 KBytes  1.05 Mbits/sec   0.303 ms    0/   89 (0%)
[  3] 17.0-18.0 sec   128 KBytes  1.05 Mbits/sec   0.333 ms    0/   89 (0%)
[  3] 18.0-19.0 sec   128 KBytes  1.05 Mbits/sec   0.294 ms    0/   89 (0%)
[  3] 19.0-20.0 sec   131 KBytes  1.07 Mbits/sec   0.281 ms    0/   91 (0%)
[  3]  0.0-20.0 sec  2.50 MBytes  1.05 Mbits/sec   0.305 ms    0/ 1785 (0%)

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
C:\iperf-2.0.5-2-win32>iperf -c 192.168.191.200 -i 1 -t 20 -r -u -b 5m
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
------------------------------------------------------------
Server listening on UDP port 5001
Receiving 1470 byte datagrams
UDP buffer size: 64.0 KByte (default)
------------------------------------------------------------
------------------------------------------------------------
Client connecting to 192.168.191.200, UDP port 5001
Sending 1470 byte datagrams
UDP buffer size: 64.0 KByte (default)
------------------------------------------------------------
[  4] local 192.168.191.201 port 61760 connected with 192.168.191.200 port 5001
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0- 1.0 sec   610 KBytes  5.00 Mbits/sec
[  4]  1.0- 2.0 sec   609 KBytes  4.99 Mbits/sec
[  4]  2.0- 3.0 sec   610 KBytes  5.00 Mbits/sec
[  4]  3.0- 4.0 sec   609 KBytes  4.99 Mbits/sec
[  4]  4.0- 5.0 sec   610 KBytes  5.00 Mbits/sec
[  4]  5.0- 6.0 sec   609 KBytes  4.99 Mbits/sec
[  4]  6.0- 7.0 sec   610 KBytes  5.00 Mbits/sec
[  4]  7.0- 8.0 sec   609 KBytes  4.99 Mbits/sec
[  4]  8.0- 9.0 sec   610 KBytes  5.00 Mbits/sec
[  4]  9.0-10.0 sec   619 KBytes  5.07 Mbits/sec
[  4] 10.0-11.0 sec   610 KBytes  5.00 Mbits/sec
[  4] 11.0-12.0 sec   609 KBytes  4.99 Mbits/sec
[  4] 12.0-13.0 sec   609 KBytes  4.99 Mbits/sec
[  4] 13.0-14.0 sec   610 KBytes  5.00 Mbits/sec
[  4] 14.0-15.0 sec   609 KBytes  4.99 Mbits/sec
[  4] 15.0-16.0 sec   610 KBytes  5.00 Mbits/sec
[  4] 16.0-17.0 sec   609 KBytes  4.99 Mbits/sec
[  4] 17.0-18.0 sec   610 KBytes  5.00 Mbits/sec
[  4] 18.0-19.0 sec   619 KBytes  5.07 Mbits/sec
[  4] 19.0-20.0 sec   609 KBytes  4.99 Mbits/sec
[  4]  0.0-20.0 sec  11.9 MBytes  5.00 Mbits/sec
[  4] Sent 8504 datagrams
[  4] Server Report:
[  4]  0.0-20.0 sec  11.9 MBytes  4.99 Mbits/sec   0.000 ms   12/ 8503 (0.14%)
[  4]  0.0-20.0 sec  1 datagrams received out-of-order
[  3] local 192.168.191.201 port 5001 connected with 192.168.191.200 port 50750
[  3]  0.0- 1.0 sec   606 KBytes  4.96 Mbits/sec   2.238 ms    1/  423 (0.24%)
[  3]  1.0- 2.0 sec   610 KBytes  5.00 Mbits/sec   2.739 ms    0/  425 (0%)
[  3]  2.0- 3.0 sec   609 KBytes  4.99 Mbits/sec   3.089 ms    1/  425 (0.24%)
[  3]  3.0- 4.0 sec   609 KBytes  4.99 Mbits/sec   3.605 ms    0/  424 (0%)
[  3]  4.0- 5.0 sec   607 KBytes  4.97 Mbits/sec   1.954 ms    0/  423 (0%)
[  3]  5.0- 6.0 sec   612 KBytes  5.01 Mbits/sec   2.666 ms    0/  426 (0%)
[  3]  6.0- 7.0 sec   607 KBytes  4.97 Mbits/sec   2.602 ms    0/  423 (0%)
[  3]  7.0- 8.0 sec   612 KBytes  5.01 Mbits/sec   2.960 ms    0/  426 (0%)
[  3]  8.0- 9.0 sec   609 KBytes  4.99 Mbits/sec   2.512 ms    0/  424 (0%)
[  3]  9.0-10.0 sec   619 KBytes  5.07 Mbits/sec   2.133 ms    0/  431 (0%)
[  3] 10.0-11.0 sec   609 KBytes  4.99 Mbits/sec   3.605 ms    1/  425 (0.24%)
[  3] 11.0-12.0 sec   609 KBytes  4.99 Mbits/sec   2.509 ms    0/  424 (0%)
[  3] 12.0-13.0 sec   610 KBytes  5.00 Mbits/sec   3.570 ms    0/  425 (0%)
[  3] 13.0-14.0 sec   609 KBytes  4.99 Mbits/sec   3.077 ms    1/  425 (0.24%)
[  3] 14.0-15.0 sec   609 KBytes  4.99 Mbits/sec   2.679 ms    0/  424 (0%)
[  3] 15.0-16.0 sec   609 KBytes  4.99 Mbits/sec   1.887 ms    0/  424 (0%)
[  3] 16.0-17.0 sec   610 KBytes  5.00 Mbits/sec   2.651 ms    0/  425 (0%)
[  3] 17.0-18.0 sec   609 KBytes  4.99 Mbits/sec   3.390 ms    0/  424 (0%)
[  3] 18.0-19.0 sec   617 KBytes  5.06 Mbits/sec   2.601 ms    0/  430 (0%)
[  3] 19.0-20.0 sec   612 KBytes  5.01 Mbits/sec   3.525 ms    0/  426 (0%)
[  3]  0.0-20.0 sec  11.9 MBytes  4.99 Mbits/sec   3.156 ms    3/ 8503 (0.035%)
[  3]  0.0-20.0 sec  1 datagrams received out-of-order

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
C:\iperf-2.0.5-2-win32>iperf -c 192.168.191.200 -i 1 -t 20 -r -u -b 9m
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
------------------------------------------------------------
Server listening on UDP port 5001
Receiving 1470 byte datagrams
UDP buffer size: 64.0 KByte (default)
------------------------------------------------------------
------------------------------------------------------------
Client connecting to 192.168.191.200, UDP port 5001
Sending 1470 byte datagrams
UDP buffer size: 64.0 KByte (default)
------------------------------------------------------------
[  4] local 192.168.191.201 port 61761 connected with 192.168.191.200 port 5001
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0- 1.0 sec  1.07 MBytes  9.00 Mbits/sec
[  4]  1.0- 2.0 sec  1.07 MBytes  8.98 Mbits/sec
[  4]  2.0- 3.0 sec  1.07 MBytes  9.00 Mbits/sec
[  4]  3.0- 4.0 sec  1.07 MBytes  8.98 Mbits/sec
[  4]  4.0- 5.0 sec  1.07 MBytes  9.00 Mbits/sec
[  4]  5.0- 6.0 sec  1.07 MBytes  8.98 Mbits/sec
[  4]  6.0- 7.0 sec  1.07 MBytes  8.98 Mbits/sec
[  4]  7.0- 8.0 sec  1.07 MBytes  9.00 Mbits/sec
[  4]  8.0- 9.0 sec  1.07 MBytes  8.98 Mbits/sec
[  4]  9.0-10.0 sec  1.09 MBytes  9.14 Mbits/sec
[  4] 10.0-11.0 sec  1.07 MBytes  9.00 Mbits/sec
[  4] 11.0-12.0 sec  1.07 MBytes  8.98 Mbits/sec
[  4] 12.0-13.0 sec  1.07 MBytes  8.98 Mbits/sec
[  4] 13.0-14.0 sec  1.07 MBytes  9.00 Mbits/sec
[  4] 14.0-15.0 sec  1.07 MBytes  8.98 Mbits/sec
[  4] 15.0-16.0 sec  1.07 MBytes  9.00 Mbits/sec
[  4] 16.0-17.0 sec  1.07 MBytes  8.98 Mbits/sec
[  4] 17.0-18.0 sec  1.07 MBytes  8.98 Mbits/sec
[  4] 18.0-19.0 sec  1.09 MBytes  9.14 Mbits/sec
[  4] 19.0-20.0 sec  1.07 MBytes  9.00 Mbits/sec
[  4]  0.0-20.0 sec  21.5 MBytes  9.00 Mbits/sec
[  4] Sent 15315 datagrams
[  4] Server Report:
[  4]  0.0-20.0 sec  21.3 MBytes  8.94 Mbits/sec   0.104 ms   96/15314 (0.63%)  !!!!!!!!!!
[  4]  0.0-20.0 sec  1 datagrams received out-of-order
[  3] local 192.168.191.201 port 5001 connected with 192.168.191.200 port 50751
[  3]  0.0- 1.0 sec  1.06 MBytes  8.89 Mbits/sec   2.405 ms    0/  756 (0%)
[  3]  1.0- 2.0 sec  1.07 MBytes  9.00 Mbits/sec   2.308 ms    0/  765 (0%)
[  3]  2.0- 3.0 sec  1.07 MBytes  9.00 Mbits/sec   2.305 ms    0/  765 (0%)
[  3]  3.0- 4.0 sec  1.07 MBytes  8.97 Mbits/sec   2.290 ms    1/  764 (0.13%)
[  3]  4.0- 5.0 sec  1.07 MBytes  8.98 Mbits/sec   2.271 ms    1/  765 (0.13%)
[  3]  5.0- 6.0 sec  1.07 MBytes  8.98 Mbits/sec   2.313 ms    0/  764 (0%)
[  3]  6.0- 7.0 sec  1.07 MBytes  9.00 Mbits/sec   2.191 ms    0/  765 (0%)
[  3]  7.0- 8.0 sec  1.07 MBytes  8.95 Mbits/sec   2.314 ms    3/  764 (0.39%)
[  3]  8.0- 9.0 sec  1.07 MBytes  8.98 Mbits/sec   2.232 ms    1/  765 (0.13%)
[  3]  9.0-10.0 sec  1.09 MBytes  9.13 Mbits/sec   2.257 ms    0/  776 (0%)
[  3] 10.0-11.0 sec  1.07 MBytes  8.98 Mbits/sec   2.365 ms    0/  764 (0%)
[  3] 11.0-12.0 sec  1.07 MBytes  8.98 Mbits/sec   2.301 ms    1/  765 (0.13%)
[  3] 12.0-13.0 sec  1.07 MBytes  8.98 Mbits/sec   2.277 ms    0/  764 (0%)
[  3] 13.0-14.0 sec  1.07 MBytes  9.00 Mbits/sec   2.323 ms    0/  765 (0%)
[  3] 14.0-15.0 sec  1.07 MBytes  9.00 Mbits/sec   2.176 ms    0/  765 (0%)
[  3] 15.0-16.0 sec  1.07 MBytes  8.96 Mbits/sec   2.273 ms    2/  764 (0.26%)
[  3] 16.0-17.0 sec  1.07 MBytes  8.98 Mbits/sec   2.313 ms    0/  764 (0%)
[  3] 17.0-18.0 sec  1.07 MBytes  8.98 Mbits/sec   2.247 ms    1/  765 (0.13%)
[  3] 18.0-19.0 sec  1.09 MBytes  9.11 Mbits/sec   2.276 ms    1/  776 (0.13%)
[  3] 19.0-20.0 sec  1.07 MBytes  8.97 Mbits/sec   2.394 ms    1/  764 (0.13%)
[  3]  0.0-20.0 sec  21.5 MBytes  8.99 Mbits/sec   2.659 ms   11/15314 (0.072%)
[  3]  0.0-20.0 sec  1 datagrams received out-of-order

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
C:\iperf-2.0.5-2-win32>iperf -c 192.168.191.200 -i 1 -t 20 -r -u -b 9850k
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
------------------------------------------------------------
Server listening on UDP port 5001
Receiving 1470 byte datagrams
UDP buffer size: 64.0 KByte (default)
------------------------------------------------------------
------------------------------------------------------------
Client connecting to 192.168.191.200, UDP port 5001
Sending 1470 byte datagrams
UDP buffer size: 64.0 KByte (default)
------------------------------------------------------------
[  4] local 192.168.191.201 port 61762 connected with 192.168.191.200 port 5001
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0- 1.0 sec  1.17 MBytes  9.84 Mbits/sec
[  4]  1.0- 2.0 sec  1.17 MBytes  9.84 Mbits/sec
[  4]  2.0- 3.0 sec  1.17 MBytes  9.84 Mbits/sec
[  4]  3.0- 4.0 sec  1.17 MBytes  9.84 Mbits/sec
[  4]  4.0- 5.0 sec  1.17 MBytes  9.84 Mbits/sec
[  4]  5.0- 6.0 sec  1.17 MBytes  9.83 Mbits/sec
[  4]  6.0- 7.0 sec  1.17 MBytes  9.84 Mbits/sec
[  4]  7.0- 8.0 sec  1.17 MBytes  9.84 Mbits/sec
[  4]  8.0- 9.0 sec  1.17 MBytes  9.84 Mbits/sec
[  4]  9.0-10.0 sec  1.19 MBytes  10.0 Mbits/sec
[  4] 10.0-11.0 sec  1.17 MBytes  9.84 Mbits/sec
[  4] 11.0-12.0 sec  1.17 MBytes  9.84 Mbits/sec
[  4] 12.0-13.0 sec  1.17 MBytes  9.83 Mbits/sec
[  4] 13.0-14.0 sec  1.17 MBytes  9.85 Mbits/sec
[  4] 14.0-15.0 sec  1.17 MBytes  9.83 Mbits/sec
[  4] 15.0-16.0 sec  1.17 MBytes  9.85 Mbits/sec
[  4] 16.0-17.0 sec  1.17 MBytes  9.83 Mbits/sec
[  4] 17.0-18.0 sec  1.17 MBytes  9.84 Mbits/sec
[  4] 18.0-19.0 sec  1.19 MBytes  10.0 Mbits/sec
[  4] 19.0-20.0 sec  1.17 MBytes  9.84 Mbits/sec
[  4]  0.0-20.0 sec  23.5 MBytes  9.85 Mbits/sec
[  4] Sent 16765 datagrams
[  4] Server Report:
[  4]  0.0-20.0 sec  23.3 MBytes  9.74 Mbits/sec   3.421 ms  156/16764 (0.93%) !!!!!!!!!!
[  4]  0.0-20.0 sec  1 datagrams received out-of-order
[  3] local 192.168.191.201 port 5001 connected with 192.168.191.200 port 50752
[  3]  0.0- 1.0 sec  1.16 MBytes  9.74 Mbits/sec   2.131 ms    0/  828 (0%)
[  3]  1.0- 2.0 sec  1.17 MBytes  9.84 Mbits/sec   2.140 ms    0/  837 (0%)
[  3]  2.0- 3.0 sec  1.17 MBytes  9.83 Mbits/sec   2.099 ms    1/  837 (0.12%)
[  3]  3.0- 4.0 sec  1.17 MBytes  9.84 Mbits/sec   2.113 ms    0/  837 (0%)
[  3]  4.0- 5.0 sec  1.17 MBytes  9.84 Mbits/sec   2.105 ms    0/  837 (0%)
[  3]  5.0- 6.0 sec  1.17 MBytes  9.83 Mbits/sec   2.058 ms    1/  837 (0.12%)
[  3]  6.0- 7.0 sec  1.17 MBytes  9.82 Mbits/sec   2.165 ms    1/  836 (0.12%)
[  3]  7.0- 8.0 sec  1.17 MBytes  9.84 Mbits/sec   2.156 ms    0/  837 (0%)
[  3]  8.0- 9.0 sec  1.17 MBytes  9.82 Mbits/sec   2.135 ms    2/  837 (0.24%)
[  3]  9.0-10.0 sec  1.19 MBytes  9.97 Mbits/sec   2.152 ms    2/  850 (0.24%)
[  3] 10.0-11.0 sec  1.17 MBytes  9.83 Mbits/sec   2.153 ms    1/  837 (0.12%)
[  3] 11.0-12.0 sec  1.17 MBytes  9.84 Mbits/sec   2.127 ms    0/  837 (0%)
[  3] 12.0-13.0 sec  1.17 MBytes  9.83 Mbits/sec   2.136 ms    1/  837 (0.12%)
[  3] 13.0-14.0 sec  1.17 MBytes  9.82 Mbits/sec   2.087 ms    2/  837 (0.24%)
[  3] 14.0-15.0 sec  1.17 MBytes  9.83 Mbits/sec   2.061 ms    1/  837 (0.12%)
[  3] 15.0-16.0 sec  1.17 MBytes  9.84 Mbits/sec   2.045 ms    0/  837 (0%)
[  3] 16.0-17.0 sec  1.17 MBytes  9.82 Mbits/sec   2.203 ms    1/  836 (0.12%)
[  3] 17.0-18.0 sec  1.17 MBytes  9.84 Mbits/sec   2.165 ms    0/  837 (0%)
[  3] 18.0-19.0 sec  1.17 MBytes  9.83 Mbits/sec   2.154 ms    1/  837 (0.12%)
[  3] 19.0-20.0 sec  1.19 MBytes  9.98 Mbits/sec   2.209 ms    0/  849 (0%)
[  3]  0.0-20.0 sec  23.5 MBytes  9.84 Mbits/sec   2.548 ms   13/16764 (0.078%)
[  3]  0.0-20.0 sec  1 datagrams received out-of-order
</pre>

<hr>

<p><strong>The real question remains:</strong></p>

<p>We are not oversubscribing the DC link since it's at 100Mbps and cannot send more than 100Mbps. However the remote sites are at 10Mbps. </p>

<ul>
<li>Are the buffers at the remote side overflowing and dropping packets?</li>
<li>Is the provider's traffic shaper doing something to the traffic? (Would the traffic coming from another node be influenced by the ISPs traffic shaper or only the traffic ingressing the node (from outside))...... You see what I mean?</li>
</ul>

<p>Why can't TCP handle that all on its own? </p>

<hr>

<p><strong>Update #3</strong>
I have now used the following scenario: </p>

<pre><code>Laptop ------- ... LAN ... --- DC switch --- Metro-Eth --- Laptop (directly connected)
NIC@10Mbps                       100Mbps                  NIC@10Mbps
</code></pre>

<p>Here is the packet loss in the DC->remote direction: (iperf 9 Mbps UDP test)</p>

<pre><code>[  3] local 192.168.191.200 port 5001 connected with 192.168.191.201 port 55236
[ ID] Interval       Transfer     Bandwidth        Jitter   Lost/Total Datagrams
[  3]  0.0- 1.0 sec   912 KBytes  7.47 Mbits/sec   2.713 ms    0/  635 (0%)
[  3]  1.0- 2.0 sec  1001 KBytes  8.20 Mbits/sec   2.168 ms    0/  697 (0%)
[  3]  2.0- 3.0 sec  1001 KBytes  8.20 Mbits/sec   2.478 ms    0/  697 (0%)
[  3]  3.0- 4.0 sec   999 KBytes  8.18 Mbits/sec   0.933 ms    0/  696 (0%)
[  3]  4.0- 5.0 sec  1001 KBytes  8.20 Mbits/sec   2.620 ms    0/  697 (0%)
[  3]  5.0- 6.0 sec  1001 KBytes  8.20 Mbits/sec   2.721 ms    0/  697 (0%)
[  3]  6.0- 7.0 sec  1001 KBytes  8.20 Mbits/sec   2.089 ms    0/  697 (0%)
[  3]  7.0- 8.0 sec   999 KBytes  8.18 Mbits/sec   2.641 ms    0/  696 (0%)
[  3]  8.0- 9.0 sec  1002 KBytes  8.21 Mbits/sec   0.896 ms    0/  698 (0%)
[  3]  9.0-10.0 sec  1015 KBytes  8.31 Mbits/sec   2.557 ms    0/  707 (0%)
[  3] 10.0-11.0 sec   999 KBytes  8.18 Mbits/sec   2.822 ms    1/  697 (0.14%)
[  3] 11.0-12.0 sec   999 KBytes  8.18 Mbits/sec   1.551 ms    1/  697 (0.14%)
[  3] 12.0-13.0 sec   998 KBytes  8.17 Mbits/sec   2.504 ms    2/  697 (0.29%)
[  3] 13.0-14.0 sec   995 KBytes  8.15 Mbits/sec   2.038 ms    3/  696 (0.43%)
[  3] 14.0-15.0 sec   991 KBytes  8.11 Mbits/sec   2.539 ms    7/  697 (1%)
[  3] 15.0-16.0 sec   992 KBytes  8.13 Mbits/sec   2.759 ms    6/  697 (0.86%)
[  3] 16.0-17.0 sec   998 KBytes  8.17 Mbits/sec   2.229 ms    2/  697 (0.29%)
[  3] 17.0-18.0 sec   993 KBytes  8.14 Mbits/sec   2.723 ms    4/  696 (0.57%)
[  3] 18.0-19.0 sec   998 KBytes  8.17 Mbits/sec   2.038 ms    2/  697 (0.29%)
[  3] 19.0-20.0 sec  1012 KBytes  8.29 Mbits/sec   2.575 ms    3/  708 (0.42%)
[  3]  0.0-20.0 sec  19.5 MBytes  8.15 Mbits/sec   2.775 ms   31/13917 (0.22%)
[  3]  0.0-20.0 sec  1 datagrams received out-of-order
</code></pre>

<p>The other direction is fine. <em>However</em>, when running a TCP test the remote->DC direction does not perform much better than the DC->remote direction (about 5Mbps).......</p>

<p>I'm not sure we reached the bottom of this.</p>
","<p>While discussing this problem was very interesting, the ISP has in the meantime started exchanging the DSL modems on the different sites by another brand. Some packet fragmentation issue they say. And hey, 9.5 Mbps in both directions without any problems or special settings.</p>
","11263"
"Cisco ASA 5505 Remote Users Cannot Access site-to-site tunnel","4700","","<p>I've (finally) got a VPN tunnel to an AWS VPC up and running.  I'm not a network engineer.</p>

<p>It works fine from the office to the VPC, but remote users cannot access anything through this site-to-site tunnel.  Just to eliminate anything on the AWS side I've set a #1 ACL rule to allow all traffic and I have a test VM with a security group that allows all traffic.</p>

<p>All we really care about is office and remote (10.0.0.0/8) to VPC (172.17.0.0/16) traffic.</p>

<p>I'll try to post relevant config info, but let me know if you need more which I will gladly share.  The only things I've redacted are the AWS tunnel IPs and our office's outside IP address:</p>

<p>access lists</p>

<pre><code>ciscoasa(config)# show run access-list
access-list inside_nat0_outbound extended permit ip any 10.0.0.0 255.255.255.192 
access-list Split_Tunnel_List standard permit 10.0.0.0 255.255.255.0 
access-list Split_Tunnel_List standard permit 172.17.0.0 255.255.0.0 
access-list acl-amzn extended permit ip any 172.17.0.0 255.255.0.0 
access-list amzn-filter extended permit ip 172.17.0.0 255.255.0.0 10.0.0.0 255.0.0.0 
access-list amzn-filter extended deny ip any any 
access-list outside_access_in extended permit ip host AWS_TUNNEL_IP_1 host OFFICE_OUTSIDE_IP
access-list outside_access_in extended permit ip host AWS_TUNNEL_IP_2 host OFFICE_OUTSIDE_IP
ciscoasa(config)# 
</code></pre>

<p>group-policy</p>

<pre><code>ciscoasa(config)# show run group-policy
group-policy RA_GROUP internal
group-policy RA_GROUP attributes
 dns-server value 8.8.8.8 8.8.4.4
 vpn-tunnel-protocol IPSec 
 split-tunnel-network-list value Split_Tunnel_List
group-policy filter internal
group-policy filter attributes
 vpn-filter value amzn-filter
ciscoasa(config)# 
</code></pre>

<p>crypto map</p>

<pre><code>ciscoasa(config)# show run crypto map
crypto map outside_map 1 match address acl-amzn
crypto map outside_map 1 set pfs 
crypto map outside_map 1 set peer AWS_TUNNEL_IP_1 AWS_TUNNEL_IP_2 
crypto map outside_map 1 set transform-set transform-amzn
crypto map outside_map 65535 ipsec-isakmp dynamic SYSTEM_DEFAULT_CRYPTO_MAP
crypto map outside_map interface outside
ciscoasa(config)# show run nat
nat (inside) 0 access-list acl-amzn
nat (inside) 1 0.0.0.0 0.0.0.0
nat (outside) 1 10.0.0.0 255.255.255.0
ciscoasa(config)#
</code></pre>

<p>same-security-traffic</p>

<pre><code>ciscoasa(config)# show run same-security-traffic 
same-security-traffic permit intra-interface
ciscoasa(config)# 
</code></pre>

<p>ping from 10.0.0.15 to VPC works</p>

<pre><code>ciscoasa(config)# packet-tracer input inside icmp 10.0.0.15 0 8 172.17.44.71      

Phase: 1
Type: ROUTE-LOOKUP
Subtype: input
Result: ALLOW
Config:
Additional Information:
in   0.0.0.0         0.0.0.0         outside

Phase: 2
Type: IP-OPTIONS
Subtype: 
Result: ALLOW
Config:
Additional Information:

Phase: 3
Type: INSPECT
Subtype: np-inspect
Result: ALLOW
Config:
Additional Information:

Phase: 4
Type: NAT-EXEMPT
Subtype: 
Result: ALLOW
Config:
  match ip inside any outside 172.17.0.0 255.255.0.0
    NAT exempt
    translate_hits = 258, untranslate_hits = 104
Additional Information:

Phase: 5
Type: NAT
Subtype: 
Result: ALLOW
Config:
nat (inside) 1 0.0.0.0 0.0.0.0
  match ip inside any outside any
    dynamic translation to pool 1 (OFFICE_OUTSIDE_IP [Interface PAT])
    translate_hits = 9425616, untranslate_hits = 1313465
Additional Information:

Phase: 6
Type: NAT
Subtype: host-limits
Result: ALLOW
Config:
nat (inside) 1 0.0.0.0 0.0.0.0
  match ip inside any inside any
    dynamic translation to pool 1 (No matching global)
    translate_hits = 0, untranslate_hits = 0
Additional Information:

Phase: 7
Type: HOST-LIMIT
Subtype: 
Result: ALLOW
Config:
Additional Information:

Phase: 8
Type: ACCESS-LIST
Subtype: vpn-user
Result: ALLOW
Config:
Additional Information:

Phase: 9
Type: VPN
Subtype: encrypt
Result: ALLOW
Config:
Additional Information:

Phase: 10
Type: FLOW-CREATION
Subtype: 
Result: ALLOW
Config:
Additional Information:
New flow created with id 10392911, packet dispatched to next module

Result:
input-interface: inside
input-status: up
input-line-status: up
output-interface: outside
output-status: up
output-line-status: up
Action: allow

ciscoasa(config)# 
</code></pre>

<p>ping from office outside IP fails</p>

<pre><code>ciscoasa(config)# packet-tracer input inside icmp OFFICE_OUTSIDE_IP 0 8 172.17.44.71 detailed 

Phase: 1
Type: ROUTE-LOOKUP
Subtype: input
Result: ALLOW
Config:
Additional Information:
in   0.0.0.0         0.0.0.0         outside

Phase: 2
Type: IP-OPTIONS
Subtype: 
Result: ALLOW
Config:
Additional Information:
 Forward Flow based lookup yields rule:
 in  id=0xc959e0e0, priority=0, domain=inspect-ip-options, deny=true
    hits=9738259, user_data=0x0, cs_id=0x0, reverse, flags=0x0, protocol=0
    src ip=0.0.0.0, mask=0.0.0.0, port=0
    dst ip=0.0.0.0, mask=0.0.0.0, port=0, dscp=0x0

Phase: 3
Type: INSPECT
Subtype: np-inspect
Result: ALLOW
Config:
Additional Information:
 Forward Flow based lookup yields rule:
 in  id=0xc959dd58, priority=66, domain=inspect-icmp-error, deny=false
    hits=305383, user_data=0xc959dc40, cs_id=0x0, use_real_addr, flags=0x0, protocol=1
    src ip=0.0.0.0, mask=0.0.0.0, port=0
    dst ip=0.0.0.0, mask=0.0.0.0, port=0, dscp=0x0

Phase: 4
Type: NAT-EXEMPT
Subtype: 
Result: ALLOW
Config:
  match ip inside any outside 172.17.0.0 255.255.0.0
    NAT exempt
    translate_hits = 259, untranslate_hits = 107
Additional Information:
 Forward Flow based lookup yields rule:
 in  id=0xc9603e48, priority=6, domain=nat-exempt, deny=false
    hits=271, user_data=0xca1792f8, cs_id=0x0, use_real_addr, flags=0x0, protocol=0
    src ip=0.0.0.0, mask=0.0.0.0, port=0
    dst ip=172.17.0.0, mask=255.255.0.0, port=0, dscp=0x0

Phase: 5
Type: NAT
Subtype: 
Result: ALLOW
Config:
nat (inside) 1 0.0.0.0 0.0.0.0
  match ip inside any outside any
    dynamic translation to pool 1 (OFFICE_OUTSIDE_IP[Interface PAT])
    translate_hits = 9431076, untranslate_hits = 1314029
Additional Information:
 Forward Flow based lookup yields rule:
 in  id=0xc9620cf8, priority=1, domain=nat, deny=false
    hits=10741033, user_data=0xc9620c38, cs_id=0x0, flags=0x0, protocol=0
    src ip=0.0.0.0, mask=0.0.0.0, port=0
    dst ip=0.0.0.0, mask=0.0.0.0, port=0, dscp=0x0

Phase: 6
Type: NAT
Subtype: host-limits
Result: ALLOW
Config:
nat (inside) 1 0.0.0.0 0.0.0.0
  match ip inside any inside any
    dynamic translation to pool 1 (No matching global)
    translate_hits = 0, untranslate_hits = 0
Additional Information:
 Forward Flow based lookup yields rule:
 in  id=0xc96208b8, priority=1, domain=host, deny=false
    hits=10681997, user_data=0xc9620538, cs_id=0x0, reverse, flags=0x0, protocol=0
    src ip=0.0.0.0, mask=0.0.0.0, port=0
    dst ip=0.0.0.0, mask=0.0.0.0, port=0, dscp=0x0

Phase: 7
Type: HOST-LIMIT
Subtype: 
Result: ALLOW
Config:
Additional Information:
 Forward Flow based lookup yields rule:
 in  id=0xc95a1058, priority=0, domain=host-limit, deny=false
    hits=3610687, user_data=0x0, cs_id=0x0, flags=0x0, protocol=0
    src ip=0.0.0.0, mask=0.0.0.0, port=0
    dst ip=0.0.0.0, mask=0.0.0.0, port=0, dscp=0x0

Phase: 8
Type: ACCESS-LIST
Subtype: vpn-user
Result: DROP
Config:
Additional Information:
 Forward Flow based lookup yields rule:
 out id=0xca201808, priority=12, domain=vpn-user, deny=true
    hits=17, user_data=0xc793c300, filter_id=0x4(amzn-filter), protocol=0
    src ip=0.0.0.0, mask=0.0.0.0, port=0
    dst ip=0.0.0.0, mask=0.0.0.0, port=0

Result:
input-interface: inside
input-status: up
input-line-status: up
output-interface: outside
output-status: up
output-line-status: up
Action: drop
Drop-reason: (acl-drop) Flow is denied by configured rule

ciscoasa(config)# 
</code></pre>

<p>sysopt</p>

<pre><code>ciscoasa(config)# show run all sysopt
no sysopt connection timewait
sysopt connection tcpmss 1387
sysopt connection tcpmss minimum 0
sysopt connection permit-vpn
sysopt connection reclassify-vpn
no sysopt connection preserve-vpn-flows
no sysopt nodnsalias inbound
no sysopt nodnsalias outbound
no sysopt radius ignore-secret
no sysopt noproxyarp inside
no sysopt noproxyarp outside
ciscoasa(config)# 
</code></pre>

<p>Turning on <code>debug icmp trace</code> and pinging from a remote connection yields nothing when I try to ping something through the site-to-site tunnel.  When I try to ping something in the office LAN I get:</p>

<pre><code>ICMP echo request from outside:10.0.0.19 to outside:10.0.1.34 ID=12 seq=0 len=8
ICMP echo request translating outside:10.0.0.19/12 to outside:OFFICE_OUTSIDE_IP/47077
</code></pre>

<p>10.0.0.19 is the remote connection's IP address.</p>

<p>From the office LAN I can successfully ping AWS VMs through the site-to-site tunnel but the pings fail if done directly from the ASA 5505.</p>

<p>I don't know if this is normal behavior but to my untrained eyes it looks like the remote connection is being treated as an outside connection.  I would have assumed if you're connected via the VPN you'd be considered inside.</p>

<p>Here's the route table when connected remotely minus the IPv6 section(produced by <code>netstat -nr</code> on a macbook):</p>

<pre><code>Routing tables

Internet:
Destination        Gateway            Flags        Refs      Use   Netif Expire
default            link#12            UCS            16        0   utun1
default            10.128.128.128     UGScI          16        0     en0
8.8.8.8            link#12            UHWIi           6       41   utun1
10                 link#4             UCS             1        0     en0
10.0.0.19          10.0.0.19          UH              0       11   utun1
10.128.128.128/32  link#4             UCS             1        0     en0
10.128.128.128     0:18:a:34:c7:94    UHLWIir        19       89     en0   1198
10.243.58.109/32   link#4             UCS             0        0     en0
10.255.255.255     ff:ff:ff:ff:ff:ff  UHLWbI          0        3     en0
17.146.233.11      link#12            UHW3I           0        5   utun1     10
17.158.28.36       link#12            UHWIi           2       10   utun1
17.171.4.15        link#12            UHWIi           1        1   utun1
17.172.224.14      link#12            UHWIi           1        3   utun1
17.172.232.134     link#12            UHWIi           1       23   utun1
17.173.254.222     link#12            UHW3I           0        9   utun1      9
17.173.254.223     link#12            UHW3I           0        4   utun1      9
23.211.232.189     link#12            UHW3I           0       17   utun1      7
23.212.21.149      link#12            UHWIi           1        4   utun1
74.125.25.188      link#12            UHWIi           1       14   utun1
74.125.28.125      link#12            UHWIi           1       71   utun1
74.125.239.17      link#12            UHWIi           1       18   utun1
74.125.239.181     link#12            UHWIi           1       19   utun1
127                127.0.0.1          UCS             0        0     lo0
127.0.0.1          127.0.0.1          UH              1    39007     lo0
169.254            link#4             UCS             0        0     en0
OFFICE_OUTSIDE_IP  10.128.128.128     UGHS            3        1     en0
OFFICE_OUTSIDE_IP  link#12            UHW3I           0        3   utun1      6
224.0.0.251        link#12            UHmW3I          0        0   utun1     10
</code></pre>

<p>A cleaner route table from my home linux box connected to the VPN:</p>

<pre><code>$ route -n
Kernel IP routing table
Destination       Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0           0.0.0.0         0.0.0.0         U     0      0        0 tun0
10.0.0.0          0.0.0.0         255.255.255.0   U     0      0        0 tun0
OFFICE_OUTSIDE_IP 192.168.1.1     255.255.255.255 UGH   0      0        0 eth0
192.168.1.0       0.0.0.0         255.255.255.0   U     1      0        0 eth0
</code></pre>

<p>As an experiment (AKA grasping at straws) I added the OFFICE_OUTSIDE_IP to the amazon-filter access list:</p>

<pre><code>access-list amzn-filter extended permit ip 172.17.0.0 255.255.0.0 10.0.0.0 255.0.0.0 
access-list amzn-filter extended permit ip 172.17.0.0 255.255.0.0 host OFFICE_OUTSIDE_IP 
access-list amzn-filter extended deny ip any any 
</code></pre>

<p>With that in place, and <code>debug icmp trace</code> I can see ping attempts from remote connections, but the pings still fail:</p>

<pre><code>ICMP echo request from outside:10.0.0.19 to outside:172.17.44.71 ID=22350 seq=2 len=56
ICMP echo request translating outside:10.0.0.19/22350 to outside:OFFICE_OUTSIDE_IP/8998
</code></pre>

<p>The current running config is <a href=""https://gist.github.com/pmac72/f483ea8c7c8c8c254626"" rel=""nofollow"">here</a>.  Anything that I edited in the configuration should be pretty obvious.  The address spaces are messy due to what I inherited.  I do hope to clean that up in the future.</p>
","<p>Got a <a href=""https://supportforums.cisco.com/discussion/12373291/remote-vpn-users-cannot-access-site-site-tunnel"" rel=""nofollow"">response on the cisco forums</a> that solved my problem.</p>

<blockquote>
<pre><code>you are missing NAT exempt from the IP local pool to the destination of the site to site:

access-list NAT_EXEMPT permit ip 10.0.0.0 255.255.255.0 172.17.0.0 255.255.0.0

NAT (outside) 0 access-list NAT_EXEMPT
</code></pre>
</blockquote>
","14667"
"Route-based ipsec between cisco router end juniper srx","4696","","<p>network experts! Help, please, to  understand why there is no ping from source address to destination address over ipsec vpn(here, route-based).</p>

<p>I have such schema:</p>

<p><img src=""https://i.stack.imgur.com/HOpKH.jpg"" alt=""enter image description here""></p>

<p>Phase1 and Phase2 of IPSec are up.</p>

<p><strong>cisco1811:</strong></p>

<pre><code>Router#show crypto session 
Crypto session current status

Interface: Tunnel0
Session status: UP-ACTIVE     
Peer: 1.1.1.2 port 500 
 IKEv1 SA: local 1.1.1.1/500 remote 1.1.1.2/500 Active 
 IPSEC FLOW: permit ip 0.0.0.0/0.0.0.0 0.0.0.0/0.0.0.0 
    Active SAs: 2, origin: crypto map
</code></pre>

<p><strong>SRX210:</strong></p>

<pre><code>[edit]
root# run show security ike security-associations 
Index   State  Initiator cookie  Responder cookie  Mode           Remote Address   
507742  UP     e4ce17853e784b75  686afe9bad0c6831  Main           1.1.1.1  

[edit]
root# run show security ipsec security-associations 
  Total active tunnels: 1
  ID    Algorithm       SPI      Life:sec/kb  Mon lsys Port  Gateway   
  &lt;131073 ESP:3des/sha1 f7797ad5 3409/  4608000 -  root 500   1.1.1.1         
  &gt;131073 ESP:3des/sha1 f4f78f65 3409/  4608000 -  root 500   1.1.1.1 
</code></pre>

<p>But there is no connection from cisco loopback 10.10.10.1 to srx fe-0/0/4 dest 20.20.20.1.
Ping faild. To my mind all routing and security zones, policies has configured correct.</p>

<p>But pings failed. ( Ping from tunnel0 to st0.1 failed too).</p>

<p><strong>output cisco1811:</strong></p>

<pre><code>version 15.1
service timestamps debug datetime msec
service timestamps log datetime msec
no service password-encryption
!
hostname Router
!
boot-start-marker
boot-end-marker
!
!
no aaa new-model
!
memory-size iomem 20
!
!
dot11 syslog
ip source-route
!         
!
ip cef
no ipv6 cef
!
multilink bundle-name authenticated
!
!
!
license udi pid CISCO1811W-AG-A/K9 sn FHK0930507W
!
!
! 
!
crypto isakmp policy 1
 encr 3des
 authentication pre-share
 group 2
 lifetime 28800
crypto isakmp key regata577 address 1.1.1.2
!
!
crypto ipsec transform-set TS esp-3des esp-sha-hmac 
!
crypto ipsec profile VPN_P2
 set transform-set TS 
!
!
interface Loopback10
 ip address 10.10.10.1 255.255.255.0
!
interface Tunnel0
 ip address 172.16.0.1 255.255.255.252
 ip mtu 1400
 tunnel source 1.1.1.1
 tunnel mode ipsec ipv4
 tunnel destination 1.1.1.2
 tunnel protection ipsec profile VPN_P2
!
interface FastEthernet0
 ip address 1.1.1.1 255.255.255.0
 duplex auto
 speed auto
!
interface FastEthernet1
 ip vrf forwarding vrf1
 ip address 5.5.5.1 255.255.255.0
 duplex auto
 speed auto

interface Vlan1
 no ip address
!
interface Async1
 no ip address
 encapsulation slip
!

!
ip forward-protocol nd
no ip http server
no ip http secure-server
!
!
ip route 0.0.0.0 0.0.0.0 1.1.1.2
ip route 20.20.20.0 255.255.255.0 Tunnel0
</code></pre>

<p><strong>output srx210:</strong></p>

<pre><code>version 12.1X44-D35.5;
system {
    root-authentication {
        encrypted-password ""$1$APbBS19g$N1umrpu1sUcdWCb7RUyLa1""; ## SECRET-DATA
    }
    services {
        ssh;
    }
    syslog {
        file kmd-logs {
            daemon info;
            match KMD;
        }
    }
}
interfaces {                                  
    fe-0/0/4 {
        unit 0 {
            family inet {
                address 20.20.20.1/24;
            }
        }
    }
    fe-0/0/5 {
        unit 0 {
            family inet {
                address 1.1.1.2/24;
            }
        }
    }
    st0 {
        unit 1 {
            family inet {
                mtu 1400;
                address 172.16.0.2/30;
            }
        }
    }
}
routing-options {
    static {                            
        route 0.0.0.0/0 next-hop 1.1.1.1;
        route 10.10.10.0/24 next-hop st0.1;
    }
}
security {
    ike {
        policy ike_policy {
            mode main;
            proposal-set compatible;
            pre-shared-key ascii-text ""$9$.fF/u0IleWTzSevMN-.Pfz9AIEc""; ## SECRET-DATA
        }
        gateway ike_gate {
            ike-policy ike_policy;
            address 1.1.1.1;
            external-interface fe-0/0/5;
        }
    }
    ipsec {
        policy ipsec_policy {
            proposal-set standard;      
        }
        vpn My_VPN {
            bind-interface st0.1;
            ike {
                gateway ike_gate;
                ipsec-policy ipsec_policy;
            }
            establish-tunnels immediately;
        }
    }
    flow {
        tcp-mss {
            ipsec-vpn {
                mss 1350;
            }
        }
    }
    policies {
        from-zone Untrust to-zone Trust {
            policy 100 {
                match {
                    source-address any;
                    destination-address any;
                    application any;
                }
                then {
                    permit;
                }
            }
        }
        from-zone Trust to-zone Untrust {
            policy 101 {
                match {
                    source-address any;
                    destination-address any;
                    application any;
                }
                then {
                    permit;
                }
            }
        }
    }
    zones {
        security-zone Untrust {
            address-book {              
                address MOSCOW 10.10.10.0/24;
            }
            host-inbound-traffic {
                system-services {
                    all;
                }
                protocols {
                    all;
                }
            }
            interfaces {
                fe-0/0/5.0;
                st0.1;
            }
        }
        security-zone Trust {
            address-book {
                address KRASNODAR 20.20.20.0/24;
            }
            host-inbound-traffic {
                system-services {
                    all;
                }                       
                protocols {
                    all;
                }
            }
            interfaces {
                fe-0/0/4.0;
            }
        }
    }
}
</code></pre>
","<p>I have done some changes. Added the router behind srx. Setup bgp. Now it works good. (routing, security ike, ipsec, policies). Here I use crypto map instead VTI on cisco router. ( VTI have tried too. Works good.)</p>

<p><img src=""https://i.stack.imgur.com/wSY5R.png"" alt=""enter image description here""></p>

<p><strong>cisco1811:</strong></p>

<pre><code>version 12.4
service timestamps debug datetime msec
service timestamps log datetime msec
no service password-encryption
!
hostname R1
!
boot-start-marker
boot-end-marker
!
no logging console
!
no aaa new-model
memory-size iomem 5
no ip icmp rate-limit unreachable
ip cef
!
!
!
!
no ip domain lookup
ip auth-proxy max-nodata-conns 3
ip admission max-nodata-conns 3
!
multilink bundle-name authenticated
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!         
!
archive
 log config
  hidekeys
! 
!
crypto isakmp policy 1
 encr 3des
 authentication pre-share
 group 2
 lifetime 28800
crypto isakmp key regata577 address 172.16.0.2
!
!
crypto ipsec transform-set TS esp-3des esp-sha-hmac 
!
crypto ipsec profile IPSECPROFILE
 set transform-set TS 
!
!
crypto map PI-IPSEC 1 ipsec-isakmp 
 description **TEST-IPSEC**
 set peer 172.16.0.2
 set security-association lifetime seconds 28800
 set transform-set TS 
 match address TEST-IPSEC
!
!
!
ip tcp synwait-time 5
!
policy-map FOO
 class class-default
  shape average 128000
!
!
!
!
!
interface Loopback5
 ip address 5.5.5.1 255.255.255.255
!
interface Loopback10
 ip address 10.10.10.1 255.255.255.0
!
interface Loopback33
 description **for IPSEC-PI**
 ip address 33.33.33.33 255.255.255.255
 ip nat outside
 ip virtual-reassembly
 ip policy route-map REROUTE
 crypto map PI-IPSEC
!
interface FastEthernet0/0
 ip address 172.16.0.1 255.255.255.252
 duplex auto
 speed auto
!
interface FastEthernet0/1
 no ip address
 shutdown
 duplex auto
 speed auto
!
router bgp 100
 bgp log-neighbor-changes
 neighbor 172.16.0.2 remote-as 200
 !
 address-family ipv4
  redistribute connected
  neighbor 172.16.0.2 activate
  no auto-summary
  no synchronization
 exit-address-family
!
ip local policy route-map REROUTE
ip forward-protocol nd
ip route 0.0.0.0 0.0.0.0 172.16.0.2
ip route 20.20.20.0 255.255.255.0 Loopback33
!
!
no ip http server
no ip http secure-server
!
ip access-list extended TEST-IPSEC
 permit ip 10.10.10.0 0.0.0.255 20.20.20.0 0.0.0.255
!
!
!
!
route-map REROUTE permit 6
 description **for IPSEC-PI**
 match ip address REROUTE
 set default interface Loopback33
!
!
!
!
control-plane
!
!
!
!
!
!
!
!
!
!
line con 0
 exec-timeout 0 0
 privilege level 15
 logging synchronous
line aux 0
 exec-timeout 0 0
 privilege level 15
 logging synchronous
line vty 0 4
 login
!
!
end
</code></pre>

<p><strong>srx:</strong></p>

<pre><code>system {
    root-authentication {
        encrypted-password ""$1$XTjfjhv5$vXlOzT/W4kK6nj4fHfxvY/""; ## SECRET-DATA
    }
    login {
        user vlazarev {
            uid 2000;
            class super-user;
            authentication {
                encrypted-password ""$1$KN2wmboA$co8aH/Q1nZfBQ1oO81HLv0""; ## SECRET-DATA
            }
        }
    }
    services {
        telnet;
    }
}
interfaces {
    ge-0/0/0 {
        unit 0 {
            family inet {
                address 172.16.0.2/30;
            }
        }
    }
    ge-0/0/1 {
        unit 0 {
            family inet {
                address 192.168.0.2/30;
            }
        }
    }
    ge-0/0/2 {
        unit 0 {
            family inet {
                address 131.131.131.100/24;
            }
        }
    }
    st0 {
        unit 0 {
            family inet;
        }
    }
}
routing-options {
    static {
        route 10.10.10.0/24 next-hop st0.0;
    }
    autonomous-system 200;
}
protocols {
    bgp {
        group eBGP {
            type external;
            neighbor 172.16.0.1 {
                export send-direct;
                peer-as 100;
            }
            neighbor 192.168.0.1 {
                export [ send-direct send-static ];
                peer-as 300;
            }
        }
    }
}
policy-options {
    policy-statement send-direct {
        term term1 {
            from protocol direct;
            then accept;
        }
    }
    policy-statement send-static {
        from protocol static;
        then accept;
    }
}
security {
    ike {
        policy ike_policy {
            mode main;
            proposal-set compatible;
            pre-shared-key ascii-text ""$9$wP2JD.mT9Cu4anCtpREwY2ajHTz3""; ## SECRET-DATA
        }
        gateway ike_gate {
            ike-policy ike_policy;
            address 33.33.33.33;
            external-interface ge-0/0/0;
        }
    }
    ipsec {
        policy ipsec_policy {
            proposal-set compatible;
        }
        vpn IPSEC_VPN {
            bind-interface st0.0;       
            ike {
                gateway ike_gate;
                proxy-identity {
                    local 20.20.20.0/24;
                    remote 10.10.10.0/24;
                    service any;
                }
                ipsec-policy ipsec_policy;
            }
            establish-tunnels immediately;
        }
    }
    policies {
        from-zone Untrust to-zone Trust {
            policy 100 {
                match {
                    source-address MOSCOW;
                    destination-address KRASNODAR;
                    application any;
                }
                then {
                    permit;
                }
            }
        }
        from-zone Trust to-zone Untrust {
            policy 101 {
                match {
                    source-address KRASNODAR;
                    destination-address MOSCOW;
                    application any;
                }
                then {
                    permit;
                }
            }
        }
    }
    zones {
        security-zone ACCESS {
            host-inbound-traffic {
                system-services {
                    all;
                }
                protocols {
                    all;
                }
            }
            interfaces {                
                ge-0/0/2.0;
            }
        }
        security-zone Trust {
            address-book {
                address KRASNODAR 20.20.20.0/24;
            }
            host-inbound-traffic {
                system-services {
                    ike;
                }
                protocols {
                    bgp;
                }
            }
            interfaces {
                ge-0/0/1.0;
            }
        }
        security-zone Untrust {
            address-book {
                address MOSCOW 10.10.10.0/24;
            }
            host-inbound-traffic {
                system-services {
                    all;
                }
                protocols {
                    all;
                }
            }
            interfaces {
                ge-0/0/0.0;
                st0.0;
            }
        }
    }
}
</code></pre>
","11177"
"SonicWall : Bandwidth Management Per User","4695","","<p>I have connected my SonicWall NSA220 to LDAP and obtained available user accounts, now I would like to give every user/group BW rules, for example</p>

<p>Set user for guaranteed speed of 1Mb and max speed of 2Mb.</p>

<p>Also I would like to know if I can set a user for 1Mb of speed with maximum of 2 GB of download per day then have it reduced automatically to 256Kb after consuming his 2 GB for the day.</p>

<p>Also I would like to know if I can put such rules on applications instead of users.</p>
","<blockquote>
  <p>Set user for guaranteed speed of 1Mb and max speed of 2Mb.</p>
</blockquote>

<p>This is absolutely possible.  Dell has an article outlining this specifically; <a href=""https://support.software.dell.com/kb/sw12385"" rel=""nofollow"">How To Configure Bandwidth Management with limits Per IP (SW12385)</a>.</p>

<ol>
<li>Enable <code>Advanced Bandwidth Management</code></li>
<li>Activate bandwidth management on WAN interface and declare the interface speed</li>
<li>Generate a new bandwidth object and configure it for <code>Per-IP Bandwidth Management</code>.</li>
<li>Edit your default <code>any -&gt; any</code> firewall rule and enable the bandwidth object you created earlier for both ingress and egress.</li>
</ol>

<blockquote>
  <p>Also I would like to know if I can set a user for 1Mb of speed with
  maximum of 2 GB of download per day then have it reduced automatically
  to 256Kb after consuming his 2 GB for the day.</p>
</blockquote>

<p>I can't find any documentation that says you can do this, so I would imagine per-ip based bandwidth management is about as close as you can get to evening the playing field for everyone.  This is usually sufficient as you wouldn't stand to benefit much from limiting someone who has reached this limit if they aren't effecting anyone else (because you're already guaranteeing bandwidth evenly).  </p>

<blockquote>
  <p>Also I would like to know if I can put such rules on applications
  instead of users.</p>
</blockquote>

<p>Yes this is certainly possible, but is accomplished in a couple different areas.  It's slightly more involved, too, since you setup everything manually versus the per-IP based solution which works across the board.  Dell has another write-up for that, as well; <a href=""https://support.software.dell.com/kb/sw11515"" rel=""nofollow"">UTM: Configuring Bandwidth Management for HTTP Websites using App Rules feature (SW11515)</a>.</p>

<ol>
<li>Create <code>Bandwidth</code> object</li>
<li>Create <code>Action</code> object</li>
<li>Match that Action object to the sites you want (or don't want)</li>
<li>Map the <code>Bandwidth</code> object to the <code>Action</code> object with an <code>App Rule</code></li>
</ol>

<p>Since this is all performed under the <code>Firewall</code> section, it should just begin working across the board.</p>

<p>Good luck!</p>
","18961"
"Cisco IOS built-in SSH client default version","4692","","<p>You issue the command <code>ssh 192.168.97.97</code> from a IOS device and the destination IOS router/switch SSH server is accepting both SSH versions. Being that you did not specify a version to use on the SSH client, which version of SSH will be used to connect to the IOS SSH server?</p>
","<p><a href=""http://www.cisco.com/en/US/tech/tk583/tk617/technologies_tech_note09186a00800949e2.shtml"">ssh version 2</a> for IOS 12.1(19)E and later</p>

<p>SSH from one switch to another... for reasons I can't explain, Cisco calls SSHv2 SSH-1.99...</p>

<pre><code>SRV1#debug ip ssh client
SSH Client debugging is on
SRV1#ssh 10.19.1.2

Password:
Jun  4 13:45:28.747 CDT: SSH1: sent protocol version id SSH-1.99-Cisco-1.25   &lt;-----
Jun  4 13:45:28.787 CDT: SSH CLIENT0: protocol version id is - SSH-1.99-Cisco-1.25
Jun  4 13:45:28.787 CDT: SSH CLIENT0: sent protocol version id SSH-1.99-Cisco-1.25
</code></pre>

<p>Also from linux when connecting to IOS...</p>

<pre><code>[mpenning@something ~]$ ssh -v dst1
OpenSSH_5.3p1, OpenSSL 1.0.0-fips 29 Mar 2010
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: Applying options for *
debug1: Connecting to dst1 [10.19.1.1] port 22.
debug1: Connection established.
debug1: identity file /home/mpenning/.ssh/identity type -1
debug1: identity file /home/mpenning/.ssh/id_rsa type 1
debug1: identity file /home/mpenning/.ssh/id_dsa type -1
debug1: Remote protocol version 1.99, remote software version Cisco-1.25     &lt;-------
debug1: no match: Cisco-1.25
debug1: Enabling compatibility mode for protocol 2.0                         &lt;--------
debug1: Local version string SSH-2.0-OpenSSH_5.3
</code></pre>
","1597"
"Cisco ASA: which side is ""inside"" with same security-level?","4681","","<p>I have an issue with an FWSM apparently killing RDP sessions after a random amount of time, and the log entry looks like:</p>

<pre><code>Teardown TCP connection 145379776990678860 for MS_LZ1:10.30.3.150/49924 to LZ1_MS:10.254.0.217/3389 duration 0:01:58 bytes 705828 TCP Reset-I
</code></pre>

<p>I understand that ""TCP Reset-I"" means that a TCP Reset was received on the 'inside' interface, but in this particular firewall, both interfaces are security-level 0. Which one is the inside?</p>
","<blockquote>
  <p>I understand that ""TCP Reset-I"" means that a TCP Reset was received on the 'inside' interface, but in this particular firewall, both interfaces are security-level 0. Which one is the inside?</p>
</blockquote>

<p>I have been looking at the PIX and FWSM docs for the last 30 minutes.  I could not find a source that clearly stated how the PIX / FWSM behaves in this situation.</p>

<p>Unfortunately, I don't think there is a way to know with 100% certainty without a <a href=""https://networkengineering.stackexchange.com/a/5147/775"" title=""Capture on the PIX or FWSM"">packet capture</a> to find the source of the reset.</p>

<p>FYI, <a href=""http://www.cisco.com/en/US/docs/security/asa/asa71/command/reference/s2_711.html#wp1117924"" rel=""nofollow noreferrer"" title=""TCP Reset-I: This reason is given for closing an outbound flow (from a low-security interface to a same- or high-security interface) when a TCP reset is received on the flow."">Cisco ASA flow-drop rules</a> say that <code>TCP Reset-I</code> is used for same-security traffic; since the FWSM and ASA are so close, I think it's a strong possibility that the syslogs simply don't give you enough information in this case.</p>
","5218"
"L2TP over IPSEC with a LAN to LAN link","4676","","<p>I'm looking to add security on a LAN to LAN link that we have in my network.
This LAN to LAN link is used to extend vlans over 2 sites (local &amp; remote).</p>

<p>For now, the diagram is this one : </p>

<p><a href=""https://i.stack.imgur.com/HqBp3.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/HqBp3.jpg"" alt=""diagram-l2l""></a></p>

<p>I have to add the security features with 2 Cisco 891 routers (this is not a choice but a constraint).</p>

<p>I am looking to change the network architecture following this diagram :</p>

<p><a href=""https://i.stack.imgur.com/zhNXT.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/zhNXT.jpg"" alt=""l2tp ipsec""></a></p>

<p>In fact, the idea here is to add a 891 router between my L3 switch and the ISP's equipment, and to do this on both sites of course.</p>

<p>Then, I will have to create L3 connectivity between my 2 routers using the lan to lan link.
This way I can encrypt the packets using IPSEC.</p>

<p>But to be as transparent as possible for the network, I will have to encapsulate the L2 datagrams coming from my network into L2TP packets, which will then be encrypted via IPSEC and sent over the LAN to LAN link to the remote router.</p>

<p>Am I correct in these assumptions ? Is this something that is technically possible ? </p>

<p>I don't really know how I can interconnect my 891 router with the ISP's equipment, for starters.</p>

<p>Thanks for the help
Jeremy</p>
","<p>Well, You can extend the LANs with L2TPv3 and protect the setup with IPsec.</p>

<p>Here's example configuration:
<a href=""https://www.softether.org/index.php?title=4-docs/2-howto/L2TP//IPsec_Setup_Guide_for_SoftEther_VPN_Server/Cisco_IOS_L2TPv3//IPsec_Edge-VPN_Router_Setup"" rel=""nofollow"">https://www.softether.org/index.php?title=4-docs/2-howto/L2TP//IPsec_Setup_Guide_for_SoftEther_VPN_Server/Cisco_IOS_L2TPv3//IPsec_Edge-VPN_Router_Setup</a></p>

<p>And here's another one, modern, using FlexVPN - unfortunately, depending on your IOS version, you may not be able to use it:
<a href=""http://www.cisco.com/c/en/us/support/docs/security/flexvpn/116207-configure-l2tpv3-00.html"" rel=""nofollow"">http://www.cisco.com/c/en/us/support/docs/security/flexvpn/116207-configure-l2tpv3-00.html</a></p>

<p>I did some testing for that kind of setups, bear in mind transporting all the L2 traffic over IP will cost you bandwidth. If you need any help in setup/troubleshooting, let me know.</p>

<p>As for more obvious problem - connecting 891's to ISPs - just point default network to them as gateway. From this setup the routing itself is typical in terms of configuration.</p>
","7984"
"Difference between control plane, data plane and management plane?","4667","","<p>I think I understand these concepts but I'm a little rusty. Can someone give a concise, easy-to-understand explanation of these concepts? The planes are logical concepts, correct? Is this a cisco only thing?</p>
","<p>These terms are abstract logical concepts, much like the OSI model. </p>

<p>Data plane refers to all the functions and processes that forward packets/frames from one interface to another. </p>

<p>Control plane refers to all the functions and processes that determine which path to use. Routing protocols, spanning tree, ldp, etc are examples. </p>

<p>Management plane is all the functions you use to control and monitor devices.  </p>

<p>These are mostly logical concepts but  things like SDN separate them into actual devices. </p>

<p>Finally, all manufacturers use these concepts. </p>
","38575"
"What is the Cisco ASA DHCP Server Address Limit on higher end modles","4667","","<p>I know on the Cisco ASA 5505 is limited to only a class C 254 addresses in the DCHPD pool, mainly because of physical resource limitations. </p>

<p>Does this hold true for higher end models likes the 5512-X or 5515-X? </p>

<p>Thanks</p>
","<p>From the <a href=""http://www.cisco.com/en/US/docs/security/asa/asa91/configuration/general/basic_dhcp.html#wp1125251"" rel=""nofollow"">ASA Config Guide</a></p>

<blockquote>
  <p>For all ASA models, the maximum number of DHCP client addresses varies
  depending on the license:</p>
  
  <p>•If the limit is 10 hosts, the maximum available DHCP pool is 32
  addresses.</p>
  
  <p>•If the limit is 50 hosts, the maximum available DHCP pool is 128
  addresses.</p>
  
  <p>•<strong>If the number of hosts is unlimited, the maximum available DHCP pool
  is 256 addresses.</strong></p>
</blockquote>

<p>Example from an
ASA5512X:</p>

<pre><code># dhcpd address 10.206.0.1-10.206.254.254 inside
Warning, DHCP pool range is limited to 256 addresses, set address range as: 10.206.0.1-10.206.1.0
</code></pre>
","4984"
"Obtain Static IP set in DHCP on Cisco ASA","4658","","<p>I am working with an ASA-5505.  I am trying to set aside a set of 10 IP addresses.   Currently I have internally 10.1.10.100 - 254 set for my current vlan -- <code>vlan 1</code>, and all equipment attached is receiving it's IP via dhcp from the ASA.   I would like to reserve the group <code>10.1.10.200 through .210</code> for static IPs ..  For servers, equipment and whatnot.  Is it possible to to this on the ASA?  Would I have to set up a separated vlan on it's own switch?  I have googled and googled, however I cannot piece together exactly what I am asking.  Is it possible to reserve these IP's from the dhcp so they don't get leased out and possibly change/conflict with other appliances on the network?  Any help appreciated from this networking noob..</p>
","<p>The ASA does not have a means of excluding addresses (or adding reservations.) The only option is to use addresses outside the DHCP scope (i.e. adjust the range to not include your statics.)</p>

<p><a href=""http://ccie-or-null.net/2013/02/06/dhcp-reservations-on-a-cisco-asa-5505-maybe/"">This</a> suggests a static arp entry may steer dhcp assignments, but a) it's not a documented/supported feature, and b) others report it not working.</p>
","3393"
"What would cause 'Unable to create temp dir ""flash:/update""' when updating Cisco AP?","4654","","<p>When trying to update an Aironet 1262 to a new firmware, I received this error:</p>

<pre><code>ap#archive download-sw /overwrite scp://root@10.10.10.10/ap3g1-k9w8-tar.152-4.JB5.tar
Unable to create temp dir ""flash:/update""
</code></pre>

<p>My first thought is that the flash was full. Which is odd since normally updating the firmware, I overwrite the old firmware. However, even <code>dir</code> resulted in an error:</p>

<pre><code>ap#dir
%Error opening flash:/ (Invalid argument)
</code></pre>

<p>How do I resolve this issue without trying a reboot of the AP and risking it not booting due to a flash error?</p>
","<p>Many Cisco devices include the <code>fsck</code> command to check the file system with. If you run this command on the flash, it will attempt to fix file system errors for you. These were my results:</p>

<pre><code>ap#fsck flash:
Fsck operation may take a while. Continue? [confirm]
flashfs[3]: WARNING - Unable to allocate backup blocks.
Please free some space on the flash file system.
flashfs[3]: 202 files, 7 directories
flashfs[3]: 0 orphaned files, 0 orphaned directories
flashfs[3]: Total bytes: 31610880
flashfs[3]: Bytes used: 31610880
flashfs[3]: Bytes available: 0
flashfs[3]: flashfs fsck took 19 seconds.
Fsck of flash: complete
</code></pre>

<p>Well, this appears to have proved that the file system is full. But did it fix the issue with the flash system so I could look at the flash system to find files to delete? Yes:</p>

<pre><code>ap#dir
Directory of flash:/

    2  -rwx          64   Mar 1 1993 00:03:30 +00:00  sensord_CSPRNG0
    3  -rwx    12257280   Mar 1 2002 00:44:20 +00:00  ap3g1-k9w7-tar.152-2.JB.tar
    4  -rwx        1864   Mar 1 1993 00:04:03 +00:00  backup.config
    5  -rwx      294235   Apr 3 2014 22:01:12 +00:00  ap_log_r1_0.log
    6  -rwx           0   Apr 4 2014 08:12:42 +00:00  env_vars.tmp
    7  -rwx        2072   Mar 1 1993 20:26:00 +00:00  private-multiple-fs
    8  drwx         832   Mar 1 2002 00:54:21 +00:00  ap3g1-k9w7-mx.152-2.JB
   11  -rwx        3567   Mar 1 1993 20:26:00 +00:00  private-config
   12  -rwx          64   Apr 3 2014 22:16:37 +00:00  sensord_CSPRNG1
   13  -rwx       25960   Mar 1 1993 01:05:43 +00:00  event.log
   14  -rwx           4  Feb 18 2014 21:02:33 +00:00  FOC16441UX9
   15  -rwx      158878   Mar 7 1993 20:49:30 +00:00  event.r1
   16  -rwx      294235   Apr 3 2014 22:01:17 +00:00  ap_log_r1_1.log
   17  -rwx      294235   Apr 3 2014 22:01:22 +00:00  ap_log_r1_2.log
   18  -rwx     6111232   Apr 3 2014 22:16:23 +00:00  r1.rcore
   19  -rwx           0   Apr 3 2014 22:16:27 +00:00  r1.rcore.info
   20  -rwx         217   Apr 3 2014 20:16:20 +00:00  env_vars

31610880 bytes total (0 bytes free)
ap#
</code></pre>

<p>You can see why the file system is full, someone copied a firmware tarball direct to the AP's flash instead of using the archive command to pull it remotely. Easy fix though, just delete the tarball:</p>

<pre><code>ap#del flash:ap3g1-k9w7-tar.152-2.JB.tar
Delete filename [ap3g1-k9w7-tar.152-2.JB.tar]? 
Delete flash:/ap3g1-k9w7-tar.152-2.JB.tar? [confirm]
ap#dir
Directory of flash:/

    2  -rwx          64   Mar 1 1993 00:03:30 +00:00  sensord_CSPRNG0
    4  -rwx        1864   Mar 1 1993 00:04:03 +00:00  backup.config
    5  -rwx      294235   Apr 3 2014 22:01:12 +00:00  ap_log_r1_0.log
    6  -rwx           0   Apr 4 2014 08:12:42 +00:00  env_vars.tmp
    7  -rwx        2072   Mar 1 1993 20:26:00 +00:00  private-multiple-fs
    8  drwx         832   Mar 1 2002 00:54:21 +00:00  ap3g1-k9w7-mx.152-2.JB
   11  -rwx        3567   Mar 1 1993 20:26:00 +00:00  private-config
   12  -rwx          64   Apr 3 2014 22:16:37 +00:00  sensord_CSPRNG1
   13  -rwx       25960   Mar 1 1993 01:05:43 +00:00  event.log
   14  -rwx           4  Feb 18 2014 21:02:33 +00:00  FOC16441UX9
   15  -rwx      158878   Mar 7 1993 20:49:30 +00:00  event.r1
   16  -rwx      294235   Apr 3 2014 22:01:17 +00:00  ap_log_r1_1.log
   17  -rwx      294235   Apr 3 2014 22:01:22 +00:00  ap_log_r1_2.log
   18  -rwx     6111232   Apr 3 2014 22:16:23 +00:00  r1.rcore
   19  -rwx           0   Apr 3 2014 22:16:27 +00:00  r1.rcore.info
   20  -rwx         217   Apr 3 2014 20:16:20 +00:00  env_vars

31610880 bytes total (12257280 bytes free)
ap#
</code></pre>

<p>Ok, file system fixed. Free space created. Did all of this fix the original issue of updating the firmware? Yes:</p>

<pre><code>ap#archive download-sw /overwrite scp://root@10.10.10.10/ap3g1-k9w8-tar.152-4.JB5.tar
examining image...
Password: 
 Sending file modes: C0644 10475520 ap3g1-k9w8-tar.152-4.JB5.tar

extracting info (286 bytes)
Image info:
    Version Suffix: k9w8-.152-4.JB5
    Image Name: ap3g1-k9w8-mx.152-4.JB5
    Version Directory: ap3g1-k9w8-mx.152-4.JB5
    Ios Image Size: 594432
    Total Image Size: 10465792
    Image Feature: WIRELESS LAN|LWAPP
    Image Family: AP3G1
    Wireless Switch Management Version: 7.6.100.0
Extracting files...!
</code></pre>
","10185"
"BGP - Soft Reset Outbound & Verification","4647","","<p>My understanding of the command:</p>

<pre><code>clear ip bgp * soft out
</code></pre>

<p>is that the router on which the command is issued will re-advertise everything it knows about BGP to it's neighbors. As I see it, it's as if the two routers are creating a brand new adjacency, without severing the adjacency first (which would adversely affect the BGP reliability metrics).</p>

<p><br>
My question is this: How can I verify that the command has been successful? When I issue</p>

<pre><code>show ip bgp nei
</code></pre>

<p>the ""Route Refresh"" column still displays 0 sent and 0 received. I don't have access to the provider device (my BGP Neighbor), but I need to verify that my changes have been received by the provider. Any suggestions?</p>
","<p>Soft reconfig (inbound) is only used if route refresh isn't supported (you also have to explicitly configure this); They're two different things. Does ""show ip bgp neighbor x.x.x.x"" output show route refresh in its advertised capabilities - ""advertised &amp; received""? To answer your question, the only way that you can verify that the ""soft reconfig out"" took effect (because this basically tells your router to refresh your outbound policy and send the updates to the neighbor) is to verify this with your provider.</p>

<p>Edit: To clarify, I suppose it depends on what policy you're trying to set. You can always do ""show ip bgp neigh x.x.x.x advertised-routes"" but AFAIK you can't get <strong>all</strong> the bits of info, i.e. communities (disclaimer: this was how it worked with Cisco kit I've worked on, not sure if Juniper/whomever else is better here or not).</p>

<p>One last edit (to clear up any possible confusion):</p>

<p>Soft reconfig inbound is used really to refresh your inbound policy in accordance to what someone is sending you. It basically stores a copy of the Adj-RIB(s)-In and when ""clear ip bgp neigh x.x.x.x soft in"" is run, it refreshes your inbound policy by applying it to the [copy] Adj-RIB-In prefixes before inserting them into the Loc-RIB.</p>

<p>With the route refresh capability, it eliminates the need to store a copy of the Adj-RIB-In and (assuming the neighbor supports it) will allow you to request a route refresh from the neighbor via just doing ""clear ip bgp neigh x.x.x.x in"" - no ""soft"" needed. In addition, even if your neighbor is capable of route refresh, and you've configured that neighbor with soft-reconfig, the soft-reconfig will take precedence over route refresh (not ideal due to the increased memory footprint with running soft-reconfig).</p>

<p>Soft reconfig outbound (you don't need anything to turn this on, you get it for free) will re-run your Loc-RIB (Adj-RIB-Out is just a pointer back to the Loc-RIB) through your outbound policies and send those updates to the peer.</p>
","787"
"What is the difference between RJ45 connection standards WE/SS and TE-AMP and when and where are they used?","4635","","<p>I recently decided to run some CAT6 cabling and wanted to ensure that my Crimpmaster RJ45 die would work fine for the CAT6A shielded connectors.  I noticed that several people had trouble using the CAT6 connectors (eg, from Monoprice for one) for different reasons, one of which seemed to be compatibility with their crimpers (eg, bad pin contact).  There are EZRJ45 connectors that need a special crimper (Platinum Tools), and that crimper seems to work for standard connectors as well... but not AMP; so EZRJ45 just seems to be a proprietary connector.  I've used my Ideal Crimpmaster for years for CAT5e and never knew there to be a difference in connectors needed; Ideal says that its die is AMP.  </p>

<p>I came across this tidbit on Wikipedia, but I can't seem to find more detail: <a href=""http://en.wikipedia.org/wiki/RJ45_%28computers%29#Types_and_incompatibility"">http://en.wikipedia.org/wiki/RJ45_%28computers%29#Types_and_incompatibility</a>  Only after looking for the differences do I find that some crimp tools manufacturers make different WE/SS and TE-AMP compatible crimpers with further explanation, but in all my years I've never heard of different RJ45 standards to be concerned about. I know that solid and stranded connectors can use different pins to make wire contact, and that CAT6A and CAT7 cable diameters can be larger than CAT5, but I've seen no mention that new crimpers must be used for CAT6A/7 vs CAT5.  Is it time to upgrade my tools and connectors?!</p>
","<p>As I recall (and I will admit I am too busy ATM to go research this myself), the RJ standards define the mechanical characteristics of the connector (shape, size, contacts, etc).  They do not define the manner of crimping the connector to a cable.</p>

<p>Each manufacturer could make their own decisions on the manner of crimping, but there isn't really much you can vary in this process.  The result is that there were two major crimp dies and types of connectors that provided at least the majority (or possibly the entirety) of the market.</p>

<p>This is true prior to Cat6.  With Cat6 it is more difficult to adhere to the standard when making terminations, as you have very little room to ""untwist"" pairs and need to maintain proper separation of the pairs.</p>

<p>This led to a whole new range of connector products and tools that may or may not be compatible with older tools.  For instance, I have seen Cat6 connectors where you wire the cable to an ""insert"" that is then inserted and crimped into the connector.</p>

<p>Morale of the story is that you need to do your research and make sure that you are getting connectors that work with your current tools or buy the right tools with the connectors.  On top of that you need to know what you are doing or you may produce cables that will only pass a Cat5 certifications at the extra costs of Cat6.</p>

<p>My advice generally, and especially if you are looking to do Cat6 or better, buy your cables pre-manufactured.  The failure rate of hand made cables is much higher and can cost more in troubleshooting/downtime in the long run.  Especially since many of these are made in organizations that are ""trying to save money"" and also don't have the tools to properly test the cables they are making (certification testers are not cheap).</p>
","3018"
"Squid Reverse Proxy alternating between destinations","4635","","<p>I'm faced with with an odd issues I can not explain. After having setup the Squid Reverse Proxy in pfSense, 1 of the 2 mappings I've setup keeps alternating between destinations, while the other mapping consistently goes to the correct destination.</p>

<p><a href=""https://i.stack.imgur.com/8neA7.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/8neA7.png"" alt=""enter image description here""></a></p>

<p>Both mappings are identical (as far as I can tell)
<a href=""https://i.stack.imgur.com/kJWQt.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/kJWQt.png"" alt=""enter image description here""></a>
<a href=""https://i.stack.imgur.com/a2zeg.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/a2zeg.png"" alt=""enter image description here""></a></p>

<p>I cannot explain why <a href=""http://skami.steuff.net/"" rel=""nofollow noreferrer"">http://skami.steuff.net</a> keeps alternating between the two different webservers. There is no load balancing involved. </p>

<p>As for the bonus confusion whenever I do a cache refresh the page it seems to stay on the same webserver.</p>

<p>Any help would be greatly appreciated.</p>

<p><a href=""http://test.steuff.net/"" rel=""nofollow noreferrer"">http://test.steuff.net/</a></p>

<p><a href=""http://skami.steuff.net/"" rel=""nofollow noreferrer"">http://skami.steuff.net/</a></p>
","<p>There seems to be several bugs when using squid with pfsense 2.2. I believe the answer is somewhere around the topic in this thread. I have the same problem after ugrading pfsense to 2.2 from 2.1.1. <a href=""https://forum.pfsense.org/index.php?topic=87280.15"" rel=""nofollow"">https://forum.pfsense.org/index.php?topic=87280.15</a></p>

<p>I have 7 servers behind my pfsense and it's working with three of them activated, but when i activate the 4th, i get the same error as you.</p>

<p>Unfortunately i have not been able to work this out so i'll be happy for a solution. (I am thinking about downgrading my pfsense to 2.1.1)</p>
","23450"
"Access pfSense LAN through OpenVPN","4628","","<p>I'm trying to access a LAN through OpenVPN.</p>

<p>My current setup is that I have one machine (Linux (old)) that can successfully connect to OpenVPN running on a pfSense (2.3.2) machine. Behind the pfSense machine is a LAN with a third machine attached.</p>

<p>The subnet used for OpenVPN clients is <code>10.0.8.0/24</code>. The client I'm testing with has the IP <code>10.0.8.3</code>.</p>

<p>The subnet used for the LAN is <code>X.Y.Z.0/24</code>. The machine that's on the LAN has the IP <code>X.Y.Z.12</code>, and it can ping its gateway, <code>X.Y.Z.254</code>.</p>

<p>So, I'd like the machine that's connected to pfSense over OpenVPN to be able to talk to the machine that's on the LAN. In the pfSense configuration for the OpenVPN server, there is an option ""IPv4 Local network(s)"", which implies that the VPN clients should have access to the specified subnets. I put <code>X.Y.Z.0/24</code> for that option. I also added a firewall rule that allows all traffic from hosts on <code>10.0.8.0/24</code> to hosts on <code>X.Y.Z.0/24</code>.</p>

<p>The last bit of configuration I did is I manually added routing rules on the OpenVPN client, since they are not added successfully by the OpenVPN client (likely due to a version mismatch?). Following are the current (relevant) routing rules on the OpenVPN client:</p>

<pre><code>$ ip route
10.0.8.1 dev tun0  scope link
X.Y.Z.0/24 via 10.0.8.1 dev tun0
10.0.8.0/24 via 10.0.8.1 dev tun0
</code></pre>

<p><code>10.0.8.1</code> is the gateway that the OpenVPN connection command outputs on the client, although I am unable to ping it. When multiple OpenVPN clients are connected, they can ping each other.</p>

<p>pfSense can ping both the OpenVPN client and the machine on the LAN.</p>

<p>With this configuration, I expect that trying to ping <code>X.Y.Z.12</code> from my connected OpenVPN client should yield a response, but any attempt to connect fails. Trying <code>traceroute X.Y.Z.12</code> outputs only stars.</p>

<p>I suspect that either I need to tell pfSense how to route traffic between <code>10.0.8.0/24</code> and <code>X.Y.Z.0/24</code>, such as with a bridge or a NAT, or that my routing table is incorrect. It's possible that there's something obvious I'm missing since I'm not very familiar with networking stuff.</p>

<p>Is there an error in my configuration, or is there an additional step I need to take to access the LAN from an OpenVPN client?</p>
","<p>You're going down the correct path, you need a route for your local LAN. But you need a route back from your LAN machine. At the moment it only has a default route of X.Y.Z.254 so sends all its traffic not on the local LAN here. Theres 2 options:</p>

<ol>
<li>Add a route on your gateway router, if its a half decent after-market router you should be able to add a route to 10.0.8.0/24 pointing at your pfsense box. So any traffic going there will be directed out the OpenVPN route.</li>
<li>If you cant add the route then for every device you will need to add a static route to the VPN clients so it knows that subnet exists through the pfSense box.</li>
</ol>

<p>For Windows:</p>

<blockquote>
  <p>route add 10.0.8.0 mask 255.255.255.0 X.Y.Z.pfsense -p</p>
</blockquote>

<p>^^ replace the IP on your LAN with that of the pfsense box, the P flag is to permanently add it to the routing table</p>

<p>For Linux:</p>

<blockquote>
  <p>ip route add 10.0.8.0/24 via X.Y.Z.pfsense</p>
</blockquote>

<p>^^to persistantly add it varies per Linux distro</p>
","37524"
"ACL Question. access-list permit ip any any","4628","","<p>so quick question, in the ACL bellow, Would ""permit ip any any"" allow ICMP packet to traverse the router? Or is ""permit ip any any"" in the ACL only referring to allowing any layer 3 address from traversing the router and since there is not a specific ACL for ICMP packets it will deny (Implicit Deny).</p>

<pre><code>access-list 102 permit tcp any any eq ftp
access-list 102 permit tcp any any eq ftp-data
access-list 102 deny tcp any any eq telnet
access-list 102 deny icmp any any echo-reply
access-list 102 permit ip any any
</code></pre>
","<p>Referring to IP in an access list refers to all IP based protocols. You have denied echo replies but all other messages as ICMP redirect, time exceeded, fragmentation needed, echo would be allowed through.</p>

<p>Other IP based protocols such as OSPF would also be allowed to pass through with your ACL.</p>
","13297"
"Juniper equivalent to Cisco's vPC?","4627","","<p>I'm looking to implement a new network design with Juniper EX Series switches. Part of this involves implementing vPC between my core and ToR switches (and also between ToR and host).</p>

<p>The goal is to be able to split 4x1GE links into 2x2GE port groups, each one split between my two core switches for redundancy, and still obtain near 4 Gbps bandwidth to each rack.</p>

<p><img src=""https://i.stack.imgur.com/Vz6ov.png"" alt=""enter image description here""></p>

<p>I'm fairly new to the concept of vPC but I don't seem to be able to find a Juniper equivalent for this technology - other than stacking the ToR switches with Virtual Chassis technology.</p>

<p>I'll probably end up using Virtual Chassis if I can't do it any other way, but I'd like to try and keep the ToR switches un-stacked, if I can.</p>

<p>The only other option I know of is to use MSTP to balance traffic per VLAN - which is probably OK given that we use 1xVLAN per customer and each host can do 2 Gbps max, but a port channel seems much simpler to configure and maintain.</p>

<p>Am I missing something?</p>
","<p>Geekman,</p>

<p>If talking in Cisco terms, the main difference between vPC and basic stacking (StackWise, FlexStack) is excluding of splitbrain situation, when both members become a master and continue to forwarding.</p>

<p>Juniper EX series currently do not support any technology like vPC, so MLAG can be completed only with Virtual Chassis which can be splitbrained.</p>

<p>Although Juniper have an analog of vPC, greatly works on MX series routers. They calling it directly ""MC-LAG"", which additionally uses ICCP to communicating between MC-LAG nodes.
Those technologies well discribed in the book ""Juniper MX Series"" by Douglas Richard Hanks, Jr. and Harry Reynolds.</p>
","5425"
"Catalyst4500 Sup7E ""mgmtVrf"" vs ""Mgmt-vrf""","4590","","<h3>Background</h3>

<p>I recently upgraded a pair of Catalyst4500s from Sup6E to Sup7E.  Before the upgrade, I pre-loaded IOS-XE 3.4.1SG on the Sup7Es, and loaded the migration configurations into <code>bootflash:</code> on the new sups.  We needed to perform the upgrade as quickly as possible; and I had only a few hours between the time I cut the tape on the shipping boxes and putting the new Sup7Es into production.  </p>

<p>After pulling the old Sup6s out, I started maintenance with one Sup7E in each chassis running 3.4.1SG (which I had pre-loaded); the other two Sup7Es were left on 3.2.2SG to conserve time while I prepared for maintenance.  I manually copied 3.4.1SG to <code>slavebootflash:</code> and reloaded when I inserted the standby supervisors.</p>

<p>FWIW, copying IOS to <code>slavebootflash:</code> is much faster than copying with tftp on these Sup7Es.</p>

<h3>Maintenance window results</h3>

<p>I had a strange result by the end of the maintenance window:</p>

<ul>
<li>Both Sup7E OOB mgmt interfaces on <code>sw1</code> operated in <code>mgmtVrf</code></li>
<li>One Sup7E OOB mgmt interface on <code>sw2</code> operated in <code>Mgmt-vrf</code> (this one was ACTIVE)</li>
<li>The other Sup7E OOB mgmt interface on <code>sw2</code> operated in <code>mgmtVrf</code> (this one was STANDBY)</li>
</ul>

<p>Somehow three out of the four new Sup7Es came up with <code>mgmtVrf</code> on the OOB FastEthernet1 interface, but one was stuck with <code>Mgmt-vrf</code>.  I could not find a way to change <code>Mgmt-vrf</code> -> <code>mgmtVrf</code>, or <code>mgmtVrf</code> to <code>Mgmt-vrf</code>.  During my attempts to get consistent management VRFs inside my maintenance window, one of the supervisors went lights-out and crashed.</p>

<p>At the end of maintenance, I was: </p>

<ul>
<li>Running out of time</li>
<li>Hesitant to keep putting time into this, because it took over five minutes each time I booted IOS-XE on Sup7E</li>
<li>Unwilling to risk a config mismatch between Sup7E ACTIVE / STANDBY oob FastEthernet1 (every time I saw this during the maintenance window, I could not successfully fail from ACTIVE -> STANDBY, and still ping FastEthernet1).</li>
</ul>

<h3>Lab work</h3>

<p>Thus, I decided to take sw2 STANDBY Sup7E to our lab to try to fix it, hoping that I'd be able to replicate how I managed to get the others into <code>mgmtVrf</code>.</p>

<p>In my attempts to get sw2 STANDBY FastEth1 into <code>Mgmt-vrf</code> in IOS-XE 3.4.1SG, I've had no luck with:</p>

<ul>
<li>Copying a new config with <code>Mgmt-vrf</code> from <code>bootflash:</code></li>
<li>tftping a new startup-config with <code>Mgmt-vrf</code> into <code>nvram:</code> and reloading</li>
<li>tftping a new running-config with <code>Mgmt-vrf</code> into the sup</li>
<li>Changing the config to use <code>Mgmt-vrf</code> while the switch is running</li>
</ul>

<h3>Question</h3>

<p>How can I reconfigure this supervisor to use <code>Mgmt-vrf</code>, or reconfigure the other supervisor to use <code>mgmtVrf</code>?</p>

<h3>Console log from sw2</h3>

<p>This is what I see when I boot 3.4.1SG on the misbehaving supervisor.</p>

<pre><code>% Use 'vrf definition mgmtVrf' command
% Management interface VRF can not be changed.

... more console output here

Interface FastEthernet1's vrf mgmtVrf does not match with cfg vrf Mgmt-vrf     


Press RETURN to get started!

sw2#show mod | i SUP7
 3     4  Sup 7-E 10GE (SFP+), 1000BaseX (SFP)   WS-X45-SUP7-E      CAT12345678
sw2#
sw2#sh ver | i Software                                                 
Cisco IOS Software, IOS-XE Software, Catalyst 4500 L3 Switch Software 
(cat4500e-UNIVERSALK9-M), Version 03.04.01.SG RELEASE SOFTWARE (fc3)
sw2#
sw2# 
sw2#sh ip vrf                                                           
  Name                             Default RD          Interfaces        
  Liin-vrf                         &lt;not set&gt;                                   
  Mgmt-vrf                         &lt;not set&gt;                                                    
  mgmtVrf                          &lt;not set&gt;           Fa1    &lt;---------
sw2#
</code></pre>
","<p>Documenting to help future googlers, since I could find no information about <code>Mgmt-vrf</code> online...  I managed to find the solution while I was typing the question above.  I remembered that the Sup7Es had IOS-XE 3.2.2 loaded when I pulled them out of the boxes; the other important fact was that 3.2.2 would not turn up the OOB interface on FastEthernet1 while I was staging / licensing the supervisors.</p>

<h3>Solution</h3>

<p>First I loaded 3.2.2 on the switch again, and booted into it.  Then I did a <code>wr erase</code> to zero <code>nvram</code> and reloaded.  When the switch rebooted <code>mgmtVrf</code> was gone :-).</p>

<pre><code>Switch#sh ip vrf                                                               
  Name                             Default RD          Interfaces              
  Liin-vrf                         &lt;not set&gt;                                   
  Mgmt-vrf                         &lt;not set&gt;           Fa1                     
Switch#sh ver | i Software                                                     
Cisco IOS Software, IOS-XE Software, Catalyst 4500 L3 Switch Software 
(cat4500e-UNIVERSAL-M), Version 03.02.02.SG RELEASE SOFTWARE (fc3)                      
Switch#
Switch#sh bootflash: | i SG                                                    
  1   87674776 Feb 12 2014 18:56:05 +00:00 cat4500e-universal.SPA.03.02.02.SG.1
50-2.SG2.bin                                                                   
  2  125216116 Feb 06 2014 17:13:26 +00:00 cat4500e-universalk9.SPA.03.04.01.SG
.151-2.SG1.bin                                                                 
Switch#
</code></pre>

<p>Now I did a second <code>wr e</code> just to be sure, and loaded 3.4.1SG again to check which VRFs came up by default in 3.4.1SG.  As one might suspect, some crazy person at Cisco renamed the management interfaces between IOS releases (probably because they were scolded for using a non-standard oob vrf name, since every other Cisco I can think of uses <code>mgmtVrf</code>).</p>

<pre><code>Switch#sh ver | i Software                                                     
Cisco IOS Software, IOS-XE Software, Catalyst 4500 L3 Switch Software (cat4500e
-UNIVERSALK9-M), Version 03.04.01.SG RELEASE SOFTWARE (fc3)                    
Switch#sh ip vrf                                                               
  Name                             Default RD          Interfaces              
  Liin-vrf                         &lt;not set&gt;                                   
  mgmtVrf                          &lt;not set&gt;           Fa1                     
Switch# 
</code></pre>

<p>Now the path to fixing this is clear.</p>
","6259"
"ARP Replies can they be Broadcast","4580","","<p>I have been informed by certain networking professionals that ARP replies can and sometimes actually are broadcast packets instead of unicast. If and when would you use a broadcast ARP reply?</p>
","<p>According to the RFC826 (An Ethernet Address Resolution Protocol) the sender has to:</p>

<blockquote>
  <p>put the local hardware and protocol addresses in the sender fields</p>
</blockquote>

<p>But as you pointed out why an host would use the broadcast address in an ARP reply? Maybe because this could seem clever: using the L2 broadcast address all the hosts in the LAN would immediately know a new (IP,MAC) pair saving time. Actually this method is not desired by the RFC (even if they refer to periodic broadcasting):</p>

<blockquote>
  <p>Periodic broadcasting is definitely not desired.  Imagine 100
  workstations on a single Ethernet, each broadcasting address
  resolution information once per 10 minutes (as one possible set
  of parameters).  This is one packet every 6 seconds.  This is
  almost reasonable, but what use is it?  The workstations aren't
  generally going to be talking to each other (and therefore have
  100 useless entries in a table);</p>
</blockquote>

<p>It also depends on the host's OS to add in the ARP table a tuple learned by a broadcasted message.</p>

<p><strong>EDIT: As stated in the comments the RFC 5227 updates the RFC 826 and it says</strong> </p>

<blockquote>
  <p>In some applications of IPv4 Address Conflict Detection (ACD), it may be advantageous to deliver ARP Replies using broadcast instead of unicast because this allows address conflicts to be detected sooner than might otherwise happen</p>
</blockquote>
","7138"
"Why are 802.11n data rates for 5GHz not faster than 2.4GHz?","4571","","<p>Same protocol, different frequency. So why does 802.11 spec not take advantage of the higher frequency to obtain higher data rates?</p>
","<p>Keep in mind that a higher frequency doesn't translate to moving data faster, rather it is the modulation of the signal that determines that data rate.  The 802.11n standard either requires or makes optional the same set of major features and modulations in both frequency ranges.</p>

<p>However, that being said, there are a number of best or common practices that typically will make 5GHz faster than 2.4GHz.</p>

<p>First, there is an option for channel width, either 20MHz or 40MHz.  In 2.4GHz, you only have room for one non-overlapping 40MHz channel (in most regions).  To reduce co-channel interference, you need at least three, so this option is generally not used in 2.4GHz.  In 5GHz where you have many more non-overlapping channels available, this isn't a concern and 40MHz channels are the norm.</p>

<p>Second, is the guard interval.  802.11b/g used a longer guard interval than 802.11a.  802.11n makes the short guard interval an option in 2.4GHz, but this is still often left as the long guard interval since some older devices have issues with a shorter guard interval. Deployments in the last couple of years are more likely to enable a short guard interval on 2.4GHz, but this still seems to be in the minority. </p>

<p>These two factors alone account for over twice the performance between the two frequency ranges in a normal deployment.</p>

<p>From there, it is not at all uncommon for enterprises to turn off any legacy support in 5GHz and run it in a 802.11n only or Greenfield mode.  Not having to allow for older 802.11a devices can further increase performance.  The reasoning behind this decision usually follows that the majority non-802.11n devices did not support 802.11a (5GHz), for those that were dual band, the 2.4GHz band still exists for them to connect.</p>
","5443"
"Cisco 1200 AP, client information from CLI","4561","","<p>I'm working with several cisco 1200 series APs, trying to get relevant client information off of them.  It would be helpful to see RSSI and SNR for individual clients connected, but I am unable to find any commands that are related to this.  I've checked around the cisco forums, and a lot of people were able to find this info using some perl scripts along with information from end user wireless cards, but that is not an option for me.  I have remote access only to the APs.  Other posts recommend using some kind of wireless controller to view this, but that is also not an option.  Any suggestions are appreciated.</p>
","<p><em>You state that a Wireless Controller is not an option, so I'm assuming these are Autonomous Access Points.</em></p>

<p>On Cisco Autonomous APs, you are looking for the <code>show dot11 associations</code> command and it's associated sub commands.</p>

<p>It gives an output like so:</p>

<pre><code>SPARKY#show dot11 associations                                  

802.11 Client Stations on Dot11Radio0: 

SSID [sparky] : 

MAC Address    IP address      IPV6 address     Device        Name     Parent         State 
XXXX.da1d.1b05 172.20.1.102    ::               unknown       -        self           Assoc
XXXX.2c90.c42f 172.20.1.103    ::               unknown       -        self           Assoc
XXXX.59c0.4ac4 172.20.1.116    ::               unknown       -        self           Assoc
</code></pre>

<p>Once you have the MAC address of your client, you can run the <code>show dot11 associations &lt;MAC ADDRESS&gt;</code> command where <code>&lt;MAC ADDRESS&gt;</code> is the MAC address of the client you're interested in.  It should give you all the information you're after.  You can also run <code>show dot11 associations all-client</code> and see this information for all associated clients.  See the below sample:</p>

<pre><code>SPARKY#show dot11 associations XXXX.da1d.1b05
Address           : XXXX.da1d.1b05     Name             : NONE
IP Address        : 172.20.1.102       IPv6 Address        : ::                                      
Gateway Address   : 0.0.0.0            
Netmask Address   : 0.0.0.0            Interface        : Dot11Radio 0
Bridge-group        : 1
reap_flags_1        : 0x0     ip_learn_type       : 0x0       transient_static_ip : 0x0       
Device            : unknown            Software Version : NONE 
CCX Version       : NONE               Client MFP       : Off

State             : Assoc              Parent           : self               
SSID              : sparky                          
VLAN              : 10
Hops to Infra     : 1                  Association Id   : 3
Clients Associated: 0                  Repeaters associated: 0
Tunnel Address    : 0.0.0.0
Key Mgmt type     : WPAv2 PSK          Encryption       : AES-CCMP
Current Rate      : m7-2               Capability       : WMM ShortHdr ShortSlot
Supported Rates   : 1.0 2.0 5.5 11.0 6.0 9.0 12.0 18.0 24.0 36.0 48.0 54.0 m0-2 m1-2 m2-2 m3-2 m4-2 m5-2 m6-2 m7-2
Voice Rates       : disabled           Bandwidth        : 20 MHz 
Signal Strength   : -59  dBm           Connected for    : 209172 seconds
Signal to Noise   : 34  dB            Activity Timeout : 25 seconds
Power-save        : Off                Last Activity    : 35 seconds ago
Apsd DE AC(s)     : NONE

Packets Input     : 8306               Packets Output   : 4109      
Bytes Input       : 816594             Bytes Output     : 565535    
Duplicates Rcvd   : 17                 Data Retries     : 803       
Decrypt Failed    : 0                  RTS Retries      : 0         
MIC Failed        : 0                  MIC Missing      : 0         
Packets Redirected: 0                  Redirect Filtered: 0         
IP source guard failed : 0             PPPoE passthrough failed : 0             
DAI failed : IP mismatch  : 0             src MAC mismatch : 0             target MAC mismatch : 0           
Existing IP failed :  0              New IP failed :  0             
11w Status       : Off
Session timeout   : 0 seconds
Reauthenticate in : never
</code></pre>
","5003"
"How is it possible to run VoIP on CAT3. Do you not need CAT5 for the voice data?","4557","","<p>So I never knew this till today but I thought you needed CAT5 for VoIP but this business is running VoIP on CAT3.</p>

<p>Don't you need the extra wires for the voice, data and power?</p>
","<p><strong>Ethernet</strong> specifications state <em>four pairs</em>, even if only two are used. The <em>category</em> rating system is a set of signal specifications, independent of the number of pairs. (there are 25, 100, etc. -- even <em>500</em> -- pair CAT3 trunk cables.)</p>

<p>As long as there are four pairs, a VoIP phone can be powered and connected over a CAT3 ethernet cable.</p>
","19059"
"How ARP works in case of Virtual machine?","4554","","<p>As far as my understading goes MAC address is used to recognize a computer node in a LAN where as internet communications happen over IPv4 address. When a request comes from the internet to the gateway the packet has the destination IP address. Now the cached ARP table is looked up to see the corresponding MAC address. If not ARP broadcast request is sent to get the corresponding MAC address.</p>

<p>But in case of virtual machine(Windows XP) running on my CentOS both will have same MAC address but different IPV4 addresses. So how the packet will be delievred to the correct host?</p>
","<p>I am assuming you're using ""bridge-mode"" for networking (your internal, virtual adapter is bridged to your host's physical adapter).</p>

<p>In any case (unless you explicitlly manually set them to the same address, which causes a lot of other problems), your guest (WinXP) machine will have a different MAC address than your host (CentOS). Due to bridge-mode, your host acts as an ethernet switch, and forwards packets to the guest.</p>

<p>So when an ARP broadcast comes, your host gets the packet and also forwards it to your guest machine. When packets for your host come, they are processed by your host's network stack. When packets for your guest come, the host forwards them to your guest, which then processes them as needed.</p>
","3507"
"Is there any limitation of Secondary IP address number on a SVI or interface on 450x?","4531","","<p>After a search on configuration guide and documentation, I didn't any evidence of a limitation on <code>ip address secondary</code>configuration on a certain VLAN on 450x SUP6E. </p>

<p>Anyone know where I can found such information or confirm if is there any ? </p>

<p>By my perception, there is no limitation on secondary IP possible to configure on a SVI or interface. </p>

<p>Thanks.</p>
","<p>There is no defined maximum limit for the amount of secondary IP addresses. However using a lot of secondary IPs usually points to a poor network design. What is your need for these secondary addresses?</p>

<p>Here is a quote from Ivan Pepelnjak:</p>

<blockquote>
  <p>… and pasted the results into the console window. No problem, a router
  accepted at least 250 secondary addresses. Chris repeated the process
  on his Catalyst switch and reported that he stopped the test after
  approximately 150 addresses (obviously way more than what he needed).</p>
</blockquote>

<p><a href=""http://blog.ipspace.net/2009/04/secondary-subnets-limitation.html"">Ivan IOS hints maximum secondary IP</a></p>

<p>Also from Cisco's FAQ:</p>

<blockquote>
  <p>Q. What are the maximum number of secondary IP addesses that can be
  configured on a router interface?</p>
  
  <p>A. There are no limits on configuring secondary IP addresses on a
  router interface. For more information, refer to Configuring IP
  Addressing.</p>
</blockquote>

<p><a href=""http://www.cisco.com/c/en/us/support/docs/ip/border-gateway-protocol-bgp/28745-44.html#q21"">Cisco FAQ</a></p>

<p>If you really want to find out then you could test it with a script generating configuration and then pasting it in. My guess is you will get bored before you run into any limit though.</p>
","7151"
"Setting up PIM Sparse mode","4530","","<p>I am working on trying to setup our network for multicast traffic. In the coming months we will be installing new equipment that sends out multicast traffic. In the past we have only had 1 VLAN so we just used IGMP querier and snooper and this met our needs. In the new office that we just moved into we have segregated the network into multiple VLANs. I understand that we will need to use PIM to accomplish what we want. After some research I understand that PIM Dense Mode will broadcast initially out to every user and then prune back the ports that do not want the multicast feed. This leads me to believe that PIM Sparse Mode is the better option.</p>

<p>We are currently a Dell PowerConnect shop with a pretty simple layout. (See below for our network topology diagram)</p>

<p>My questions are:</p>

<ol>
<li>Should we setup on our core network switch OSPF with a router ID of 1.1.1.1 and then not set any OSPF settings on any other switch? </li>
<li>Would PIM Sparse Mode only need to be enabled on the core switches or on all of the switches in the network?</li>
</ol>

<p>We are wanting to keep as much of the data from hitting our Cisco switch as that connects to our other branch offices. </p>

<p>When I attempted to setup PIM Sparse Mode I did not see any neighbors showing up which I believe is needed to have PIM work.</p>

<p>I initially looked at this PDF for sample configurations but they use PIM Dense and following this paper didn't work at all.
<a href=""ftp://ftp.dell.com/Manuals/Common/powerconnect-m6220_White%20Papers48_en-us.pdf"" rel=""nofollow noreferrer"">ftp://ftp.dell.com/Manuals/Common/powerconnect-m6220_White%20Papers48_en-us.pdf</a></p>

<p><strong>Update:</strong> I seemed to be able to get this working in my test environment but that used 2x 6224 switches. I have not been able to get this to work yet going through the 8132F switches yet. </p>

<p><strong>Update:</strong> Does IP PIM Sparse need to be enabled on each interface on the acting router? Have been testing with this just enabled on the VLAN not the interface.</p>

<p><strong>Update:</strong> Have been doing some more testing with VLC player trying to get this working. Have attached my configs for the switches. Any suggestions? After upgrading the 8132F to version 6 of the firmware it does remove the ""ip igmp"" command from the VLAN.</p>

<p><strong>Core config</strong> *Switch shows model of N4032F but this is indeed an 8132F</p>

<pre>
!Current Configuration:
!System Description ""Dell Networking N4032F, 6.0.0.8, Linux 2.6.32.9""
!System Software Version 6.0.0.8
!Cut-through mode is configured as disabled
!
configure
vlan 9
name ""Metronet""
exit
vlan 10
name ""Servers""
exit
vlan 11
name ""Endpoints""
exit
vlan 12
name ""Voice""
exit
vlan 13
name ""Guest""
exit
vlan 14
name ""Security Cameras""
exit
vlan 15
name ""Mobile Media""
exit
vlan 9-15
exit
snmp-server location ""MSH Rack 1 Slots 36-37""
snmp-server contact ""Daniel""
hostname ""Core""
slot 1/0 3    ! Dell Networking N4032F
slot 1/1 6    ! Dell QSFP Card
slot 2/0 3    ! Dell Networking N4032F
slot 2/1 6    ! Dell QSFP Card
sntp unicast client enable
sntp server 10.10.10.242
clock timezone -5 minutes 0
stack
member 1 2    ! N4032F
member 2 2    ! N4032F
exit
interface out-of-band
ip address none
exit
ip access-list BlockGuest3
permit tcp 10.11.13.0 0.0.0.255 10.11.10.40 0.0.0.0
permit tcp 10.11.13.0 0.0.0.255 eq 67 10.11.10.12 0.0.0.0
permit ip 10.11.13.0 0.0.0.255 10.11.15.0 0.0.0.0
deny ip 10.11.13.0 0.0.0.255 10.10.0.0 0.0.0.255
deny ip 10.11.13.0 0.0.0.255 10.11.10.0 0.0.0.255
deny ip 10.11.13.0 0.0.0.255 10.11.11.0 0.0.0.255
deny ip 10.11.13.0 0.0.0.255 10.11.12.0 0.0.0.255
permit every
exit
ip routing
ip route 0.0.0.0 0.0.0.0 10.11.9.2
interface vlan 1
exit
interface vlan 9
ip address 10.11.9.1 255.255.255.252
exit
interface vlan 10
ip address 10.11.10.1 255.255.255.0
ip pim
exit
interface vlan 11
ip address 10.11.11.1 255.255.255.0
ip pim
exit
interface vlan 12
ip address 10.11.12.1 255.255.255.0
ip pim
exit
interface vlan 13
ip address 10.11.13.1 255.255.255.0
ip access-group BlockGuest3 in 1
exit
interface vlan 14
ip address 10.11.14.1 255.255.255.0
exit
interface vlan 15
ip address 10.11.15.1 255.255.255.0
ip pim
exit
username ""admin"" password password_removed privilege 15 encrypted
ip ssh server
ip multicast-routing
ip pim sparse-mode
ip pim rp-address 10.11.10.1 224.0.0.0 240.0.0.0
!
interface Te1/0/1
description ""Metronet""
switchport access vlan 9
exit
!
interface Te1/0/3
channel-group 1 mode active
description ""MDF""
switchport mode trunk
exit
!
interface Te1/0/4
channel-group 2 mode active
description ""IDF""
switchport mode trunk
exit
!
interface Te2/0/3
channel-group 1 mode active
description ""MDF""
switchport mode trunk
voice vlan dscp 1
exit
!
interface Te2/0/4
channel-group 2 mode active
description ""IDF""
switchport mode trunk
voice vlan dscp 1
exit
!
interface port-channel 1
classofservice trust ip-dscp
switchport mode trunk
exit
!
interface port-channel 2
classofservice trust ip-dscp
switchport mode trunk
exit
!
snmp-server engineid local 800002a203d067e5d1a2e3
snmp-server community ""dev1"" ro ipaddress 10.10.10.169
snmp-server community ""nagios"" ro ipaddress 10.10.10.31
snmp-server host 10.10.10.31 traps version 2 ""nagios""
enable password password_removed encrypted
exit
</pre>

<p><strong>MDF Config</strong></p>

<pre>
!Current Configuration:
!System Description ""PowerConnect 6248P, 3.3.8.2, VxWorks 6.5""
!System Software Version 3.3.8.2
!Cut-through mode is configured as disabled
!
configure
vlan database
vlan 10-15
exit
hostname ""MDF""
sntp unicast client enable
sntp server 10.10.10.242
clock timezone -5 minutes 0
stack
member 1 5
member 2 5
member 3 5
exit
ip address 10.11.10.31 255.255.255.0
ip default-gateway 10.11.10.1
ip address vlan 10
no ip helper enable
interface vlan 10
name ""Servers""
exit
interface vlan 11
name ""Endpoint""
exit
interface vlan 12
name ""Voice""
exit
interface vlan 13
name ""Guest""
exit
interface vlan 14
name ""Security Cameras""
exit
username ""admin"" password password_removed level 15 encrypted
voice vlan
ip ssh server
bridge multicast filtering
ip igmp snooping
!
interface ethernet 2/g14
classofservice trust ip-dscp
switchport mode general
switchport general pvid 11
switchport general allowed vlan add 11
switchport general allowed vlan add 12 tagged
switchport general allowed vlan remove 1
voice vlan 12
exit
!
interface ethernet 3/g46
classofservice trust ip-dscp
switchport mode general
switchport general pvid 11
switchport general allowed vlan add 11
switchport general allowed vlan add 12 tagged
switchport general allowed vlan remove 1
voice vlan 12
exit
!
interface ethernet 3/xg3
channel-group 1 mode auto
switchport mode general
switchport general allowed vlan add 10-14
exit
!
interface port-channel 1
classofservice trust ip-dscp
switchport mode general
switchport general allowed vlan add 10-15 tagged
exit
snmp-server community daniel ro ipaddress 10.10.10.129
snmp-server community nagios ro ipaddress 10.10.10.31
snmp-server host 10.10.10.31 nagios traps v2
exit
</pre>

<p><img src=""https://i.stack.imgur.com/Puf9h.jpg"" alt=""Current network layout""></p>
","<p>I believe the answer from John Kennedy is the correct way to do things for other model of switches. However after being in correspondence with Dell there is a limitation in the PowerConnect 6248 firmware currently and the topology we are running.</p>

<p>Will have to wait for future released firmware.</p>
","7325"
"ASA as DNS transparent proxy","4525","","<p>I'm trying to configure an ASA as transparent DNS proxy. This means that the ASA has to redirect all the DNS queries that violets a certain policy to a DNS server.
For example in this way it is possible to avoid that a client uses a self-configured DNS server redirecting his traffic to a trusted DNS server. </p>
","<p>A transparent proxy is a device that operating on the network layer is able to redirect the traffic to a proxy server without any configuration on the client side. The following configuration will address the problem of how to configure the ASA (version 8.4) as DNS transparent proxy. With very little effort it is possible to configure the ASA as HTTP transparent proxy. </p>

<p>Before configure a transparent proxy ensure that your clients know and understand the security policy.</p>

<p>This kind of problem (and many others) would be solved with policy based route using the ""set ip next hop"" IOS's command and some form of ""transparency"" on the local proxy server. </p>

<p>The ASA does not support policy based routing (PBR) but it's still possible to achieve some degree of PBR (at least to solve the question) using NAT and the egress interface selection process. More info <a href=""http://www.cisco.com/c/en/us/td/docs/security/asa/asa84/configuration/guide/asa_84_cli_config/nat_overview.html#wpxref17243"" rel=""nofollow"">here</a></p>

<p>Let's assume this schema:</p>

<pre><code>(inside)----ASA----(outside)
             |
             |
           (dmz)
</code></pre>

<p>With the following network addresses:</p>

<ul>
<li>inside 192.168.1.0/24</li>
<li>dmz 10.0.0.0/24</li>
<li>outside 1.1.1.0/30 </li>
</ul>

<p>Suppose there is a DNS server on the dmz with 10.0.0.2 as IP address.</p>

<p>Assuming the network objects and the service objects have been properly configured the following NAT statement (known as Policy NAT) will do the trick:</p>

<pre><code>nat (inside,dmz) source static obj-inside obj-inside destination static obj-any obj-DNS-Serv service obj-DNS obj-DNS
</code></pre>

<p>For a reference on how to configure the objects refer to this:</p>

<pre><code>object network obj-inside
 subnet 192.168.1.0 255.255.255.0
object network obj-DNS-Serv
 host 10.0.0.2
object network obj-any
 subnet 0.0.0.0 0.0.0.0
object service obj-DNS
 service udp destination eq domain
 service tcp destination eq domain
</code></pre>

<p>Pay attention that you have to properly define network objects according to your envirorment.</p>
","6489"
"What does this ""no switchport"" command do?","4520","","<p>I came across this command at a Layer 2 Switch, and I don't know what it does. </p>

<pre><code>no switchport
Ip Addr 10.2.3.4 255.255.0.0
</code></pre>
","<p>This would have to be commands provided from an interface on a L3 capable switch.</p>

<p>The <code>no switchport</code> command puts the interface in L3 mode (known as ""routed port"") and makes it operate more like a router interface rather than a switch port. The <code>ip address</code> command assigns an IP address and network mask to the interface. Routed ports can be configured with a Layer 3 routing protocol.</p>

<p>However, <a href=""https://www.cisco.com/c/en/us/td/docs/switches/lan/catalyst3750/software/release/12-2_55_se/configuration/guide/scg3750/swint.html#16355"" rel=""nofollow noreferrer"">restrictions apply</a>:</p>

<ul>
<li>It does not support VLAN subinterfaces.</li>
<li>It does not support Layer 2 protocols, such as DTP and STP.</li>
<li>It is supported only on switches running the IP base or IP services image.</li>
</ul>
","24310"
"Static redistribution into EIGRP as internal failure","4518","","<p>I am redistributing a static route into EIGRP on a 6500. I had read <a href=""http://www.cisco.com/en/US/tech/tk365/technologies_white_paper09186a0080094cb7.shtml#statictointerface"">here</a> if you enter a network statement matching a static route that it would be redistributed as an internal route by EIGRP. However, after entering the configuration, neighbors indicate the route as external.</p>

<p>Does the redistribute static preempt and cause the route to be marked as external?    </p>

<pre><code>router eigrp 10 
network 10.0.0.0
network 10.1.13.0 0.0.1.255
redistribute static

ip route 10.1.13.0 255.255.254.0 10.1.29.5
</code></pre>
","<p>You can inject static routes into EIGRP two ways:</p>

<ul>
<li>The 'network' command</li>
<li>'redistribute static'</li>
</ul>

<p>You only need one or the other; here you've used both. It seems that the redistribution command takes precedence over the network command so the route is appearing as static routes. Remove 'redistribute static' and the route should appear as internal.</p>
","487"
"How to simulate the Internet in Cisco Packer Tracer?","4513","","<p>I have a network designed in the image given below which is configured with RIPv2. I need to connect this network to the internet in simulation. How to simulate internet in cisco packet tracer? Thanks. </p>

<p><a href=""https://i.stack.imgur.com/jlxHV.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/jlxHV.png"" alt=""network digram""></a></p>
","<p>Previously in packet tracer I have setup an additional router simulating google dns as the IP address (8.8.8.8) to act as the internet based location. This has helped as a simple simulation allowing test ACL's and routing.</p>
","19351"
"Why would a switch be connected to a router using three ethernet cables?","4488","","<p>In our rented office, we have a router (<a href=""https://www.productsandservices.bt.com/products/smart-hub"" rel=""noreferrer"">BT smart hub</a>) connected to a large switch (model unknown).  The two are connected using <strong>three</strong> ethernet cables, thus:</p>

<pre><code>-----------------------
|  1  2  3  4  Router |  
-----------------------
   |  |  |  |
   |  |  |  ------[Mobile signal booster]
   |  |  | 
------------------------------------
|  1  2  3  4 5 6 7 8 9 10  Switch |
------------------------------------
</code></pre>

<p>Can anyone please explain the advantage this offers?  I always assumed that a switch was connected to a router using a single cable (as <a href=""https://www.howtogeek.com/99001/htg-explains-routers-and-switches/"" rel=""noreferrer"">here</a>).</p>
","<p>The switch is probably a managed switch on which multiple VLANs are configured.  The three cables between the router and the switch are used to provide inter-VLAN routing. </p>

<p>Another possibility is that the multiple cables are used for link aggregation (e.g. LACP) to increase throughput.</p>
","39679"
"SIP through ASA without inspection","4473","","<p>After talking to a few hosted VoIP providers, they all state that ""ALG"" or SIP inspection in the case of the Cisco firewall should be disabled.  <strong>How is SIP not broken after leaving the firewall over the public Internet when being NAT'd</strong> from a private to public address if the SIP payload contains a private address that inspection would normally fixup -- using the older inspection terminology there ;-) ?  Is STUN or TURN the <strong>only</strong> way preventing this breakage and can I assume that these providers support that or does that have to be confirmed?  Is it not better to have inspection?  I know that certain SIP implementations don't add addressing in the application layer, but in the these cases they do.</p>

<p>I have <strong>SIP inspection enabled and don't see any issues</strong> with it and I gain the benefit of not only being able to do a <em>show SIP</em> but the necessary pinholes are dynamically created instead of opening wide static holes these providers often request, but the providers still insist having ALG creates more problems.</p>
","<p>We had problems using ""ALG"" or SIP inspection using SIP clients.
The problem was the ASA was keeping sessions open when the call was terminated.</p>

<p>What was happening was the when we made a second call we had no voice over the call.</p>

<p>note: We haven't had problems with the provider that was providing voip for our SIP trunk's.</p>

<p>But...
The moment we disabled the SIP inspection in total on the ASA, all SIP clients where working perfectly and registration to our own sip server was restored much faster if we had a network disconnect of somekind.</p>

<p>Also i did lots of research in this on the web and everywhere you see to disable the SIP inspection. I have tried to find a workaround or tune the inspection but nothing worked as good as just disabling the inspection.</p>

<p>Maybe this is not the best answer but couldnt comment yet(just signed up) and maybe my reaction can help in somekind of way.</p>
","27854"
"SNMP ENGINE process has high CPU usage on a few 6500 chassis","4471","","<p>Four of our 6500 chassis have a constant high CPU usage from the SNMP ENGINE process. Three of the chassis run around 20-30% constantly and the fourth is running around 50% constantly. We have about thirty more 6500s that are showing no issues at all. To the best of my knowledge we are monitoring the same exact OIDs on all 6500 chassis. Is there a show command that will display what OID being polled is causing so much CPU to be used?</p>

<p>I implemented the ""snmp-server view cutdown"" from <a href=""http://www.cisco.com/en/US/tech/tk648/tk362/technologies_tech_note09186a00800948e6.shtml#large_route"">here</a> and it dropped the CPU down a bit but really need to find a solution other than this.</p>
","<p>I would take a look at <a href=""https://supportforums.cisco.com/docs/DOC-15956"" rel=""nofollow"">this</a> support document from Cisco.</p>

<p>In part it recommends to run the following command to see which OID's were recently polled:</p>

<pre><code>show snmp stats oid
</code></pre>

<p>This gives a readout for which OID's you are polling.  It will allow you to see, by judging the time stamps, which OID is taking a long time to poll.  This is usually where your problem lies.  See the below sample output:</p>

<pre><code>asr1001-1#show snmp stats oid

time-stamp               #of times requested             OID
20:31:33 EDT May 25 2013         1142                    ifOutDiscards
20:31:33 EDT May 25 2013         1142                    ifOutErrors
20:31:33 EDT May 25 2013         1142                    ifInDiscards
20:31:33 EDT May 25 2013         1142                    ifInErrors
20:31:33 EDT May 25 2013         1142                    ifHCOutOctets
20:31:33 EDT May 25 2013         1902                    ifHCInOctets
</code></pre>

<p>However do note that it was only added in IOS release 12.4(20)T and 12.0(22)S, so may not be available to you.</p>

<hr>

<p>In the linked document there are some other methods such as:</p>

<ol>
<li>Sniffing the packets on the port to see what OID's are being polled heavily</li>
<li>Using <code>debug snmp packets</code></li>
</ol>

<p>They aren't as nice and neat as the <code>show snmp stats oid</code> but they can help you out if that command isn't available.</p>
","1022"
"Easily deploying new VLANs in a large environment","4464","","<p>How do people handle the need to add VLANs to all switches on their network (or even a subset of devices)? We are adding around 6 new VLANs per week at the moment and as the network grows this is becoming a very cumbersome and risky task.</p>
","<p>Here is a really basic script template in Perl for telneting into a list of devices (one on each line in a file called devicelist.txt) and configuring some commands.  Depending on exactly what you are doing it should provide a good start.</p>

<pre><code>  use Net::Telnet::Cisco;

    # read in a list of devices
    my @devicelist;
    open(DATA, ""&lt;devicelist.txt"") || die ""Can't open file!"";
    while (&lt;DATA&gt;) {
            chomp;
            push( @devicelist, $_);
    }

    # loop through the devices
    foreach $hostname (@devicelist)
    {
            # telnet to device
            my $cs = Net::Telnet::Cisco-&gt;new(Host =&gt; $hostname);

            # login, go enable, disable paging, go into config mode
            $cs-&gt;login( ""username"", ""password"" );
            $cs-&gt;enable( ""enable_password"" );
            $cs-&gt;cmd( 'terminal length 0' );
            $cs-&gt;cmd( 'config t' );

            # configure the device
            $cs-&gt;cmd( 'vlan 100, 200, 300' );
            $cs-&gt;cmd( 'interface Ethernet0' );
            $cs-&gt;cmd( ' switchport access vlan 100' );

            # exit config mode and write the config
            $cs-&gt;cmd( 'end' );
            $cs-&gt;cmd( 'wr mem' );

            # close the connection
            $cs-&gt;close;
    }
</code></pre>

<p><a href=""http://nettelnetcisco.sourceforge.net/docs.html"">Here</a> are some more details on Net::Telnet::Cisco as well.</p>
","381"
"https url filtering on Cisco ASA 5520","4456","","<p>I'm aware that you can use the ASA's URL filtering to filter URLs being accessed with regular expressions, but I'm curious if there is a way to filter which URLs can be accessed from the Internet to an internal webserver if the traffic is encrypted. </p>

<p>We will want to be able to limit connections to our WepSphere server to specific URL requests. ie: www.websphereyl.com/lawson/myfile and not www.websphereyl.com/lawson/yourfiles etc...</p>

<p>An example scenario would be someone hits our websphere server from the Internet, which has NAT/PAT setup on the ASA to allow it access via TCP port 443. Could we restrict the URLs that can be accessed with the ASA? I'm thinking that URL filtering will not work because it's SSL traffic, but wanted to see what you guys thought.</p>
","<p>You are correct, if all the ASA sees is an HTTPS request, then the TCP payload is encrypted, which prevents the ASA's URL filtering (or any other TCP payload inspection).</p>

<p>Typically, url filtering is done by an <a href=""http://en.wikipedia.org/wiki/Reverse_proxy"" rel=""nofollow noreferrer"">http reverse-proxy</a> or <a href=""http://en.wikipedia.org/wiki/Load_balancing_(computing)#Load_balancer_features"" rel=""nofollow noreferrer"">load-balancer</a> (like Cisco's ACE/CSM, F5 LTM, or Citrix Netscaler to name a few).  The devices I mentioned can also offload SSL encryption from your web server pool as well.</p>

<p>Offloading SSL before you perform payload scrubbing / inspection has some significant advantages.  By off-loading your encryption at a <a href=""http://en.wikipedia.org/wiki/Load_balancing_(computing)#Load_balancer_features"" rel=""nofollow noreferrer"">load-balancer</a>, the <a href=""http://en.wikipedia.org/wiki/Intrusion_detection_system"" rel=""nofollow noreferrer"">IDS</a> / <a href=""http://en.wikipedia.org/wiki/Intrusion_prevention_system"" rel=""nofollow noreferrer"">IPS</a> / Firewall can also see the raw HTTP traffic, which means it can <a href=""https://security.stackexchange.com/q/10483/9185"">spot application-layer attacks</a> and it generally gives you better protection, if that's a priority.</p>
","5663"
"How can a TCP socket be identified by IP address?","4456","","<p>This is from the book: ""Computer Networking - A Top Down Approach"" :</p>

<blockquote>
  <p>One subtle difference between a TCP socket and a UDP socket is that a
  TCP socket is identified by a four-tuple: (source IP address, source
  port number, destination IP address, destination port number). Thus,
  when a TCP segment arrives from the network to a host, the host uses
  all four values to direct (demultiplex) the segment to the appropriate
  socket.<sup>1</sup></p>
</blockquote>

<p>So when I look at TCP headers, such as the one below, I do not see any IP parts in the header.</p>

<p><img src=""https://i.stack.imgur.com/r4oTN.gif"" alt=""TCP Header""></p>

<p><strong>How does TCP use IP information when passing the data to the correct socket?</strong> </p>

<hr>

<p><sup>1</sup><sub>Kurose, J. F., &amp; Ross, K. W. (2013). <em>Computer networking: A top-down approach.</em> Boston, Mass: Pearson.</sub></p>
","<p>TCP header is located after the IP header, so the TCP/IP stack knows all four (and many more) values. </p>

<p>Those four values are used to form a unique connection ID (""socket""), which is used to recieve and send packets to/from the remote host.</p>
","6399"
"Juniper - eBGP change next-hop on advertised routes","4431","","<p>unable to advertise a route to ebgp peer and modify next-hop address. on receive router this can be resolved by configuring a import policy that matches on community and sets next hop to proper address; however, curious what i'm overlooking.</p>

<pre><code>root@juniper.mx5# show logical-systems arouter protocols bgp       
accept-remote-nexthop;
local-address 10.10.200.46;
group external-65534 {
    traceoptions {
        file arouter-bgp-update;
        flag update;
        flag route;
        flag packets;
    }
    description root-ls;
    export internal-rtbh;
    peer-as 65534;
    neighbor 10.10.200.45;
}

group external-65422 {
    description arouter-ls;
    accept-remote-nexthop;
    local-address 10.10.200.45;
    peer-as 65422;
    neighbor 10.10.200.46;
}

root@juniper.mx5# show logical-systems arouter routing-options static | find 172.16.22.100 
route 172.16.22.100/32 {
    discard;
    tag 65422;
}


root@juniper.mx5# show logical-systems arouter policy-options policy-statement internal-rtbh 
from {
    protocol static;
    tag 65422;
}
then {
    local-preference 400;
    origin igp;
    community add no-export;
    next-hop 192.0.2.13;
    accept;
}


root@juniper.mx5# run show route logical-system arouter advertising-protocol bgp 10.10.200.45 extensive 

inet.0: 26 destinations, 26 routes (26 active, 0 holddown, 0 hidden)
* 172.16.22.100/32 (1 entry, 1 announced)
 BGP group external-65534 type External
     Nexthop: Self
     Flags: Nexthop Change
     AS path: [65422] I
     Communities: no-export


root@juniper.mx5# run show route logical-system brouter receive-protocol bgp 10.10.200.46 extensive 

inet.0: 40 destinations, 40 routes (40 active, 0 holddown, 0 hidden)
* 172.16.22.100/32 (1 entry, 1 announced)
     Accepted
     Nexthop: 10.10.200.46
     AS path: 65422 I
     Communities: no-export
</code></pre>
","<p>The way eBGP works is that it will always set the next-hop to the directly connected address of the sending router (except for multihop sessions or when the original next-hop is in the same subnet). As you can see in your output the router is sending the route with <code>Nexthop: Self</code>, not with the nexthop you have configured. You can find the decision tree for next-hop generation in the <a href=""http://tools.ietf.org/html/rfc4271#section-5.1.3"" rel=""noreferrer"">BGP RFC4271</a></p>

<p>As a workaround you could change the session to use eBGP multihop, which has a <code>no-nexthop-change</code> <a href=""http://www.juniper.net/techpubs/en_US/junos12.1/topics/reference/configuration-statement/no-nexthop-change-protocols-bgp-multihop.html"" rel=""noreferrer"">option</a>:</p>

<pre><code>set protocols bgp group external-65534 multihop no-nexthop-change
</code></pre>

<p>Using <a href=""https://www.juniper.net/techpubs/en_US/junos11.4/topics/concept/bgp-multihop-understanding.html"" rel=""noreferrer"">eBGP multihop</a> has other drawbacks like no fast external failover.</p>

<p>Normally you would just leave the next-hop unchanged and set a BGP community. The receiver would then set the correct next-hop by matching the community. That's how <a href=""http://tools.ietf.org/html/rfc5635"" rel=""noreferrer"">remote triggered blackholing (RTBH)</a> works between eBGP peers.</p>
","6811"
"Fortigate logging: how to prevent ping to firewall interface to be logged while still getting logs for implicitly denied traffic","4426","","<p>Is there a way to configure a fortinet firewall (e.g, fortigate600 running FortiOS 5 or FortiOS 4) so it do not generate log entries for pings that are directed to the firewall's own interfaces but still do generate log entries for implicitly denied traffic?</p>

<p>In both cases, the log entries specifies the policy with id '0' as the policy generating the log message.</p>

<p>In the case of successful pings, 'status' is set to 'accept' in the log and the VDOM name is set as the 'dstintf'.</p>

<p>I have tried to create firewall rules that match the ping traffic directed to local firewall interfaces, with the intent to explicitly disable logging, but I failed to come up with a rule that manage to match the traffic.  Also, there is the option to disable the logging for implicit rule 0 (the implicit 'deny' rule at the bottom of the policy) but that also disables the logging of denied traffic, which is not what I want.</p>

<p>Pinging firewall interfaces (for determining that the firewall interface is available) is relied upon in certain situations and can not always be designed away. (E.g is some setups using load balancers).  Also, being able to configure network equipment to avoid unwanted logging messages from being generated is always desirable, to keep down the amount of ""noise"" that is sent to external logging servers (Splunk etc), and in our case, logs about those 'heartbeat pings' is just considered noise.</p>
","<p>For Fortigate firewalls running FortiOS 5.0 or newer, it is possible to use the CLI to specifically disable logs for accepted traffic directed to the firewall itself:</p>

<p>Log on to firewall using SSH, then run the following commands (assuming the firewall has a VDOM named 'root')</p>

<pre><code>config vdom
edit root
config log settings
set local-in-allow disable
</code></pre>

<p>This has to be done on a per VDOM basis.</p>

<p>Once this is done, the firewall keeps logging all denied traffic, without logging accepted pings, SNMP monitoring queries etc.</p>

<p>Fortinet has more informationg here: <a href=""http://docs-legacy.fortinet.com/fgt/handbook/cli_html/index.html#page/FortiOS%25205.0%2520CLI/config_log.17.13.html"" rel=""nofollow"">http://docs-legacy.fortinet.com/fgt/handbook/cli_html/index.html#page/FortiOS%25205.0%2520CLI/config_log.17.13.html</a></p>

<p>For Fortigate firewalls running FortiOS older than 5.0, I suppose the best advice is to upgrade to 5.0 or newer and then apply the setting suggested above.  It seems like the feature 'set local-in-allow disable' is not available before FortiOS 5.0.</p>
","18007"
"RIPv2 manual subnet mask configuration?","4426","","<p>As I understand Cisco IOS takes subnet mask from interface to which is network connected and put it in RIPv2 updates.</p>

<p>Could you advice please if it possible to somehow manualy set subnet mask of RIPv2 updates (in Cisco IOS)?</p>

<p>For instance assuming that I have following topology:</p>

<p><a href=""https://i.stack.imgur.com/tHqM4.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/tHqM4.jpg"" alt=""topology""></a></p>

<p>How should be configured R1 in way to advertise only network A.B.C.D/28 but not entire network A.B.C.D/24?</p>

<p>It's strange that configuring of subnet mask for RIPv2 is not supported by wide range of vendors (actually I don't know the one who supports it:))</p>

<p>Do you know if there are any RIPv2 standart limitation for it?</p>

<p>Thank you.</p>
","<p>RIPv2 with the <code>no auto-summary</code> option will advertise the specific routes, not the aggregated prefix, unless you you use the <code>ip summary-address rip</code> interface command.</p>

<p>The network statements in RIP are not specifically telling RIP what prefix(es) to advertise, they tell RIP which interfaces should participate in RIP, and RIP will get the specific prefix(es) from the interface(s) which fall into the network statement. This is true for most routing protocols on Cisco routers, and it is a source of confusion for many people. For instance:</p>

<pre><code>interface FastEthernet0/0
 ip address 10.1.1.1 255.255.255.0

interface FastEthernet0/1
 ip address 10.2.2.1 255.255.255.0

interface FastEthernet1/0
 ip address 172.16.1.1 255.255.255.0

router rip
 version 2
 no auto-summary
 network 10.0.0.0
</code></pre>

<p>The above configuration will run RIP on <code>F0/0</code> and <code>F0/1</code>, but not <code>F1/0</code>. RIP will advertise two routes: <code>10.1.1.0/24</code> and <code>10.2.2.0/24</code>.</p>

<p>There are Cisco documents, such as <a href=""http://www.cisco.com/c/en/us/td/docs/ios/12_2/ip/configuration/guide/fipr_c/1cfrip.html#wp1001118"" rel=""nofollow"">Configuring Routing Information Protocol</a> which explain RIP route summarization:</p>

<blockquote>
  <p><strong>Restrictions to RIP Route Summarization</strong></p>
  
  <p>Supernet advertisement (advertising any network prefix less than its
  classful major network) is not allowed in RIP route summarization,
  other than advertising a supernet learned in the routing tables.
  Supernets learned on any interface that is subject to configuration
  are still learned. For example, the following summarization is
  invalid:</p>

<pre><code>interface E1
.
.
.
ip summary-address rip 10.0.0.0 252.0.0.0 (invalid supernet summarization)
</code></pre>
  
  <p>Each route summarization on an interface must have a unique major net,
  even if the subnet mask is unique. For example, the following is not
  permitted:</p>

<pre><code>interface Ethernet1
.
.
.
ip summary-address rip 10.1.0.0 255.255.0.0
ip summary-address rip 10.2.0.0 255.255.0.0 (or different mask)
</code></pre>
</blockquote>
","25169"
"Configuration of voice VLAN in HP switch","4419","","<p>I have to configure an IP EPABX e.g., an NEC 9100 series. I have an HP managed PoE switch. We have existing VLANs 5 and 50. VLAN 5 is for wireless/guests, and VLAN 50 is for the Internet. </p>

<ul>
<li>VLAN 5: Ports 1,2,3,4</li>
<li>VLAN 50:Ports 35,36,37,38</li>
<li>Ports 45,46,47,48 are for uplinks to other switches</li>
</ul>

<p>I have to configure VLAN 10 for VoIP on the existing switch. My office wants me to configure the EPABX with the static IP 192.168.1.1. Then the VoIP phones will receive the IP addresses from 192.168.1.0/24. PCs need to be connected to the VoIP phones, and the PCs should get IP addresses from 10.2.107.0.24.</p>

<p>This is my first task with any EPABX. Is it possible? Is the EPABX able to route?</p>

<p><a href=""https://i.stack.imgur.com/fwMSl.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/fwMSl.png"" alt=""enter image description here""></a></p>
","<p>NOTE: Adjusted from an answer I accidentally <a href=""https://superuser.com/a/1019502/438726"">posted</a> on an old question</p>

<p>Your layer 3 (IP) is kinda irrelevant! Your PCs can be (and should be) on a different subnet completely decoupled from your <code>voice</code> vlan. Now, to the point. As I wrote in the previous post and with the help of <a href=""https://community.spiceworks.com/topic/409714-hp-procurve-vlan-configuration-for-voip"" rel=""nofollow noreferrer"">this</a> post:</p>

<ul>
<li>Keep your up-links tagged (I tend to use ports at the end  - i see you do too ... ++)</li>
<li>Voice is also tagged based on the above link</li>
<li>Data will always be untagged on access ports (servers might be an exception - this is mainly for desktops)</li>
</ul>

<p>So, to the config (<code>#</code> and after are comments):</p>

<pre><code>vlan 5
   name ""guests""
   untagged 1-4 # wifi ports
   tagged 45-48 # uplinks

vlan 10
   name ""voice""
   tagged 35-38,45-48  # Includes uplinks - based on the prev post voice is tagged
   untagged 12 # This is the EPABX... i just assumed 12... adjust
   qos priority 6 # based on the previous post, L2 priority I assume
   voice
   exit 

vlan 50
   name ""data"" 
   untagged 35-38 
   tagged 45-48 # uplinks
   exit 
</code></pre>

<p>What's going on?:</p>

<ul>
<li>your data remain the same (vlan 50) and wifi guests (vlan 5)</li>
<li>voice vlan sends tagged to the phones (35-38) and also (if needed) to your uplinks. Phones should pick-up tagged traffic but forward untagged packets to the data - which belongs to vlan 50</li>
<li>you send your voice traffic untagged to the EPABX via port 12 (I might be wrong here, you might have to tag it)</li>
<li>Nothing changes on the guest wifi</li>
</ul>

<p>Now depending on what the EPABX is (I have not configured one of those...) it might require tagged traffic on both data and voice so it can route between them... not sure</p>

<p>EDIT 1:</p>

<p>Based on the question how the PCs are getting IPs: You can think of VLANs as separate LANs, each one using a different switch so your phones are completely separate from the PCs. Then notice that on ports 35-38 we send both vlan 10 and 50 with the difference that 50 has a <a href=""https://en.wikipedia.org/wiki/IEEE_802.1Q"" rel=""nofollow noreferrer"">dot1q</a> tag on the frame. Each phone has a simple bridge/switch. It keeps the tagged traffic for itself and is forwarding all the untagged to the PC port. So, for example, when the PC is doing a DHCP request:</p>

<ol>
<li>DHCP req. is broadcast</li>
<li>The phone will receive an untagged frame from the PC port which will forward to the switch (as is, no tag added)</li>
<li>The switch sees the frame on port 36 <em>without</em> a tag so it knows it belongs to vlan 50 (if the phone was doing the DHCP the frame would have a tag and the switch will see it as vlan 10)</li>
<li>The switch will forward the frame on all ports that belong to vlan 50, including uplinks. On the uplinks the switch is adding a tag to the frame before sending it.</li>
<li>The DHCP server for PCs is on the same vlan (50), sees the request and sends a reply</li>
<li>The reply is received from the switch which now knows the PCs mac address is untagged on port 36 so it forwards the frame to that port</li>
<li>The phone receives the DHCP reply frame, but since it is untagged it does not look into it, it directly forwards it to the PC</li>
<li>PC now has an IP! (few ACKs go up and down the same way)</li>
</ol>

<p>Now, if the phone was doing the DHCP:</p>

<ul>
<li>Step 3: Switch would see vlan 10</li>
<li>Step 4-5: The same but for vlan 10 which means that different DHCP server receives the request</li>
<li>Step 6: The switch now knows the phone's MAC is behind port 36... but this time it is <em>tagged</em></li>
<li>Step 7: The phone receives a tagged frame so it keeps it/looks into it and does not forward</li>
<li>Step 8: Phone now got an IP, note that the PC saw no traffic at all. Completely separate network</li>
</ul>

<p>Finally, note that since we are talking for a switch, we are staying on OSI Layer 2. Everything involving vlans is in this layer. We have not yet setup any routing. If for any reason your phones should be able to talk to the PCs, then a layer 3 router is required to connect the two networks (currently completely independent from each other)</p>

<p>Hope it helps</p>
","28525"
"Why do I need a crossover cable to connect devices of the same type?","4417","","<p>I know that a crossover cable should be used to directly connect devices of the same type and patch cable is used to connect devices of different types.</p>

<p>But I never understood why is it so exactly? Why does such design has been chosen? Does the device used together with a patch cable always perform crossover?</p>
","<p><em>When</em> you need crossover cables is often explained, but <em><a href=""http://www.practicalnetworking.net/stand-alone/ethernet-wiring/#why_crossover"" rel=""noreferrer"">why</a></em> is seldom explained.</p>

<p>It has to do with the copper (often referred to as Ethernet) wire itself. In copper wiring, there are <a href=""http://www.practicalnetworking.net/stand-alone/ethernet-wiring/#twisted_pair"" rel=""noreferrer"">four pairs of two wires (eight total wires)</a>. The pairs are numbered 1-4.</p>

<p>The entire copper cable is full duplex, which means data can be sent and received at the same time. But individually, each pair of wires is dedicated to <em>only</em> send or <em>only</em> receive, and some pairs are not used at all. The specifics differ with each specific standard, but for the sake of the rest of this write up, we will be discussing 100BASE-TX.</p>

<p>100BASE-TX uses two of the four pairs (the other two are unused). One pair of wires are used for transmission, and the other pair is used for receiving.</p>

<h2><a href=""http://www.practicalnetworking.net/stand-alone/ethernet-wiring/#pc_pc"" rel=""noreferrer"">PC to PC</a></h2>

<p>Specifically, a PC using 100BASE-TX wil transmit over wire pair #2 (TX) and receive over wire pair #3 (RX). The NIC in this setup that this PC is using is referred to as a Media Dependent Interface (MDI) NIC.</p>

<p>But if we have two computers connected directly to each other. And they both try to transmit on wire pair #2, their signals will collide. Moreover, nothing will be sent on wire pair #3 and therefore neither computer will be able to receive anything.</p>

<p>So, the cables in the wires are crossed so that on one PC, the signal sent on Pair 2 from the first PC arrives on the second PC on Pair 3:</p>

<p><a href=""https://i.stack.imgur.com/xE4dE.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/xE4dE.png"" alt=""PC to PC""></a></p>

<p>Both PC's are still using the MDI NIC, which means they are both sending on what they believe are Pair 2. But the individual wires are crossed so that what is sent on Pair 2 arrives on the other PC on Pair 3.</p>

<h2><a href=""http://www.practicalnetworking.net/stand-alone/ethernet-wiring/#pc_switch_pc"" rel=""noreferrer"">PC to Switch to PC</a></h2>

<p>But what of a Switch, then? How do they fit in to the mix.</p>

<p>Switches are designed to be ""in between"" two PC's communicating. Therefore, <strong>switches are created with an innate crossing of the wires</strong>. This is accomplished by switches using the MDI-X standard, which is the opposite of the MDI standard. The MDI-X NICs send on pair3, and receive on pair2:</p>

<p><a href=""https://i.stack.imgur.com/pLs3i.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/pLs3i.png"" alt=""PC to Switch to PC""></a></p>

<p>Notice we don't need the cable to cross the wires for us. What the PC sends on its TX wire is received by the switch on its RX wire, when then transmits on its TX wire and is then received by the other PC's RX wire. Therefore, when a Switch is connected to a PC, it can simply use a straight through cable (one that doesn't introduce an additional crossing of the wires).</p>

<h2><a href=""http://www.practicalnetworking.net/stand-alone/ethernet-wiring/#pc_switch_switch_pc"" rel=""noreferrer"">PC to Switch to Switch to PC</a></h2>

<p>What then happens if we have two switches in the mix? They each ""cross"" the wire once, therefore two PC's connected through to switches would have the switch's crossing effect negated. </p>

<p>Unless of course, we introduce another pair crossing in between the switches:</p>

<p><a href=""https://i.stack.imgur.com/cS0D2.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/cS0D2.png"" alt=""enter image description here""></a></p>

<p>From the image above, we can see ...</p>

<ul>
<li>The PC connection to the Switch does <em>not</em> require a crossover cable</li>
<li>The Switch connection to the other Switch <em>does</em> require a crosover cable</li>
<li>The Switch's connection to the other PC does <em>not</em> require a cross over cable</li>
</ul>

<p>Notice how in the diagram, with all the crossing, the path from one PC's TX wire to the other PC's RX wire is maintained. Anytime something is sent on a TX pair, it is always received by an RX pair, all the way through the communication.</p>
","34446"
"JunOS: Password recovery has failed","4415","","<p>I am trying to recover a root password on an MX80 but I'm receiving some errors and have no idea what they mean (it's not live so suggestive ""disruptive"" steps is acceptable);</p>

<p>The steps I have taken are as follows;</p>

<ul>
<li><p>Reboot the router, at the prompt <code>Hit [Enter] to boot immediately, or space bar for command prompt</code> - I hit space</p></li>
<li><p>I enter <code>boot -s</code> to boot into single user mode</p></li>
<li><p>At the prompt <code>Enter full pathname of shell or 'recovery' for root password recovery or RETURN for /bin/sh:</code> I enter <code>recovery</code></p></li>
<li><p>Once into the CLI I enter configuration mode and then attempt to reset root password and commit the config;</p></li>
</ul>

<p>This is were I experience the errors; What do they mean, and how can I correct this? Does it even need correcting (I'd assume so!):</p>

<pre><code>[edit]
root# set system root-authentication plain-text-password 
New password:
Retype new password:

[edit]
root# commit    
error: could not open database: /var/run/db/juniper.data: No such file or directory
error: Database open failed for file '/var/run/db/juniper.data': No such file or directory
error: commit failed: daemon file propagation failed

[edit]
root# WATCHDOG_TIMER : Loss of soft watchdog
panic: Loss of soft watchdog
Entering boot mastership relinquish phase
KDB: enter: panic
[thread pid 11 tid 100005 ]
Stopped at      kdb_enter+0x1a4:        addis   r3, r0, -0x5f7a
db&gt;
</code></pre>

<p>The MX80 is running JunOS 11.4R1.14. I have rebooted and the password hasn't been reset. Should I try again, or is something wrong with this router which I should address first? I don't want to damage anything.</p>

<p><strong>UPDATE</strong></p>

<p>As an update to this; Today I booted into recovery mode again and did nothing, I was on the phone with the router sitting at the ""root>"". Whilst on the phone for a few minutes the router suddenly had a panic;</p>

<pre><code>Enter full pathname of shell or 'recovery' for root password recovery or RETURN for /bin/sh: recovery

Performing filesystem consistency checks ...
/dev/da0s1a: 1466 files, 91908 used, 361032 free (56 frags, 45122 blocks, 0.0% fragmentation)
/dev/da0s1e: 9 files, 8 used, 50273 free (17 frags, 6282 blocks, 0.0% fragmentation)

Performing mount of main filesystems ...

Performing filesystem consistency of secondary filesystems ...
/dev/da1s1f: 232 files, 362550 used, 1105677 free (125 frags, 138194 blocks, 0.0% fragmentation)

Performing mount of secondary filesystems ...
Verified manifest signed by PackageProduction_11_4_0
Verified jboot signed by PackageProduction_11_4_0
Verified jbase-ppc-11.4R1.14 signed by PackageProduction_11_4_0
Mounted jkernel package on /dev/md1...
Verified manifest signed by PackageProduction_11_4_0
veriexec: fingerprint for dev 73, file 49356 f743694d46ccdfd6bc72f0793c1cc0e8e5bdf80e != b3dfc26ab4c595f569e86791aa3dcfa4a277892c
Verified jkernel-ppc-11.4R1.14 signed by PackageProduction_11_4_0
Mounted jpfe package on /dev/md2...
Mounted jdocs package on /dev/md3...
Verified manifest signed by PackageProduction_11_4_0
Verified jdocs-11.4R1.14 signed by PackageProduction_11_4_0
Mounted jroute package on /dev/md4...
Verified manifest signed by PackageProduction_11_4_0
Verified jroute-ppc-11.4R1.14 signed by PackageProduction_11_4_0
Mounted jcrypto package on /dev/md5...
Verified manifest signed by PackageProduction_11_4_0
Verified jcrypto-ppc-11.4R1.14 signed by PackageProduction_11_4_0
machdep.bootsuccess: 1 -&gt; 1

Performing initialization of management services ...
mgd: error: could not open database: /var/run/db/schema.db: No such file or directory
mgd: error: Database open failed for file '/var/run/db/schema.db': No such file or directory
mgd: error: could not open database schema: /var/run/db/schema.db
mgd: error: could not open database schema
mgd: error: database schema is out of date, rebuilding it
mgd: error: could not open database: /var/run/db/juniper.data: No such file or directory
mgd: error: Database open failed for file '/var/run/db/juniper.data': No such file or directory
mgd: error: Cannot read configuration: Could not open configuration database

Performing checkout of management services ...

NOTE: Once in the CLI, you will need to enter configuration mode using
NOTE: the 'configure' command to make any required changes. For example,
NOTE: to reset the root password, type:
NOTE:    configure
NOTE:    set system root-authentication plain-text-password
NOTE:    (enter the new password when asked)
NOTE:    commit
NOTE:    exit
NOTE:    exit
NOTE: When you exit the CLI, you will be asked if you want to reboot
NOTE: the system

Starting CLI ... 
root&gt; WATCHDOG_TIMER : Loss of soft watchdog
panic: Loss of soft watchdog
###Entering boot mastership relinquish phase
KDB: enter: panic
[thread pid 11 tid 100005 ]
Stopped at      kdb_enter+0x1a4:        addis   r3, r0, -0x5f7a
db&gt;
</code></pre>

<p>I will reinstall and see what happens.</p>
","<p>It could be a corrupt filesystem - was the router rebooted w/o proper shutdown? If it is the case, try booting from USB stick and re-install (with re-partition) the CF card:</p>

<p>request system snapshot partition media compact-flash (or similar, check manual for exact device name) </p>
","3046"
"Is there an SNMP MIB for Cisco Track Objects","4410","","<p>My goal is to write a service check that pulls the status of a Cisco track list that is performing a <code>Boolean OR</code>. I have a screen scraper in place currently, but that is really not ideal in terms of scaling this type of service check.</p>

<p>The track object below simply pulls out the tracked static route if <code>object 10</code> and <code>object 20</code> are both unreachable, allowing a BGP learned default route to be installed, that is otherwise in RIB-failure status.</p>

<p><strong>Configuration Example:</strong></p>

<pre><code>!
track 10 ip sla 1 reachability
!
track 20 ip sla 2 reachability
!
track 30 list boolean or
 object 10
 object 20
!
ip sla 1
 icmp-echo 8.8.8.8 source-ip 10.10.10.10
ip sla schedule 1 life forever start-time now
ip sla 2
 icmp-echo 4.2.2.2 source-ip 10.10.10.10
ip sla schedule 2 life forever start-time now

ip route 0.0.0.0 0.0.0.0 10.10.10.1 track 30
</code></pre>

<p>It would be ideal to pull either the number of changes or the <code>Boolean OR</code> status (up or down) from an OID.</p>

<pre><code>HOSTNAME#show track 30
Track 30
  List boolean or
  Boolean OR is Up
    14716 changes, last change 02:18:47
    object 10 Up
    object 20 Up
  Tracked by:
    STATIC-IP-ROUTINGTrack-list 0
</code></pre>

<p>I've been digging through the Google machine, forums and the <a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do"" rel=""nofollow"">Cisco SNMP Object Navigator</a> to no avail.</p>
","<p>I don't believe there is a way to directly poll the results of the <code>OR</code> via SNMP, but you can certainly poll for the IP SLA results and calculate it yourself.</p>

<p>Using the <a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?local=en&amp;translate=Translate&amp;objectInput=1.3.6.1.4.1.9.9.42"">CISCO-RTTMON-MIB</a> (1.3.6.1.4.1.9.9.42), you can check the timeout value of your reachability checks, take the true/false value it returns and do the <code>OR</code> in whatever scripting language you're using to poll via SNMP.</p>

<hr>

<p>For example, I setup a similar test to yours above:</p>

<pre><code>track 10 ip sla 1 reachability
!
track 20 ip sla 2 reachability
!
track 30 list boolean or
 object 10
 object 20
!
ip sla 1
 icmp-echo 8.8.8.8 source-ip 10.129.10.62
ip sla schedule 1 life forever start-time now
ip sla 2
 icmp-echo 4.2.2.2 source-ip 10.129.10.62
ip sla schedule 2 life forever start-time now
!
ip route 10.171.20.0 255.255.255.252 10.129.10.61 track 30
</code></pre>

<p>Then, I verified the output in IOS:</p>

<pre><code>R-VOIPLAB#show track 30
Track 30
  List boolean or
  Boolean OR is Up
    2 changes, last change 00:01:21
    object 10 Up
    object 20 Up
</code></pre>

<hr>

<p>Next, with the IP SLA tracking in place, I installed the CISCO-RTTMON-MIB on my monitoring server, and walked the value of <a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?local=en&amp;translate=Translate&amp;objectInput=1.3.6.1.4.1.9.9.42.1.2.9.1.6#oidContent"">rttMonCtrlOperTimeoutOccurred</a> (1.3.6.1.4.1.9.9.42.1.2.9.1.6) for it's True/False output. </p>

<p>The key item to note is that since we are polling whether a timeout occurred or not, that <strong>False means that the destination is reachable</strong>, and <strong>True means that it is not reachable and a timeout has occurred</strong>.</p>

<pre><code>snmpwalk -v3 -a SHA -A SNMP-AUTH-PASS -l authNoPriv -u SNMPUSER r-voiplab rttMonCtrlOperTimeoutOccurred
CISCO-RTTMON-MIB::rttMonCtrlOperTimeoutOccurred.1 = INTEGER: false(2)
CISCO-RTTMON-MIB::rttMonCtrlOperTimeoutOccurred.2 = INTEGER: false(2)
</code></pre>

<p>Finally, I blackholed traffic to 8.8.8.8 from that box, and checked the Track results in IOS again:</p>

<pre><code>R-VOIPLAB(config)#ip route 8.8.8.8 255.255.255.255 null 0
R-VOIPLAB(config)#end
R-VOIPLAB#show track 30
Track 30
  List boolean or
  Boolean OR is Up
    2 changes, last change 00:21:18
    object 10 Down
    object 20 Up
  Tracked by:
    STATIC-IP-ROUTING 0
</code></pre>

<p>Now that we have one of the test objects in a <code>Down</code> state, let us see the results of polling rttMonCtrlOperTimeoutOccurred again:</p>

<pre><code>snmpwalk -v3 -a SHA -A SNMP-AUTH-PASS -l authNoPriv -u SNMPUSER r-voiplab rttMonCtrlOperTimeoutOccurred
CISCO-RTTMON-MIB::rttMonCtrlOperTimeoutOccurred.1 = INTEGER: true(1)
CISCO-RTTMON-MIB::rttMonCtrlOperTimeoutOccurred.2 = INTEGER: false(2)
</code></pre>

<hr>

<p>Now, as I stated above, you would just have to poll those values and use them however you need to in your script.</p>
","6786"
"Translating SNMPWALK output into human-readable format","4401","","<p>I am asking this question which is related to <a href=""https://networkengineering.stackexchange.com/questions/2900/using-snmp-to-retrieve-the-arp-and-mac-address-tables-from-a-switch?rq=1"">a question I previously asked</a> and was comprehensively answered by @MikePennington.  When I asked that question, I intended to know how to poll arp table from a switch, but in his answer, he included mac address tables as well.  Out of curiousity, I polled for the mac address tables. I used the command:</p>

<pre><code> sudo /usr/bin/snmpbulkwalk -v 2c -c public@1 -OXsq 10.0.0.98 .1.3.6.1.2.1.17.4.3.1.2
</code></pre>

<p>In Mike`s solution, he had a clear result shown below</p>

<pre><code>[mpenning@tsunami ~]$ snmpbulkwalk -v 2c -c public@10 -OXsq \
    172.16.1.210 .1.3.6.1.2.1.17.4.3.1.2 
dot1dTpFdbPort[0:6:53:fe:39:e0] 52 
dot1dTpFdbPort[0:1d:a1:cd:53:46] 52 
dot1dTpFdbPort[0:30:1b:bc:a7:d7] 52
 dot1dTpFdbPort[0:80:c8:0:0:0] 52 
dot1dTpFdbPort[38:ea:a7:6d:2e:8e] 52 
dot1dTpFdbPort[80:ee:73:2f:b:40] 52 
[mpenning@tsunami ~]$
</code></pre>

<p>This is a clear solution in which you can easily tell the port and Mac Address. However, my own solution comes out in the form of</p>

<pre><code>iso.3.6.1.2.1.17.4.3.1.2.0.20.42.49.139.235 25
iso.3.6.1.2.1.17.4.3.1.2.0.21.23.10.229.224 25
iso.3.6.1.2.1.17.4.3.1.2.28.111.101.71.85.113 25
iso.3.6.1.2.1.17.4.3.1.2.28.111.101.174.157.35 25
iso.3.6.1.2.1.17.4.3.1.2.48.133.169.153.178.62 25
iso.3.6.1.2.1.17.4.3.1.2.60.208.248.182.16.108 25
iso.3.6.1.2.1.17.4.3.1.2.108.240.73.231.208.120 25
</code></pre>

<p>I understand that the port number is 25, but do the other numbers represent a MAC address and if so, why are they different from the give solution?</p>

<p>Any Help will be truly appreciated. I am polling a Cisco Catalyst 2960 switch.</p>
","<blockquote>
  <p>my own solution comes out in the form of</p>
  
  <p>iso.3.6.1.2.1.17.4.3.1.2.0.20.42.49.139.235 25</p>
  
  <p>... do the other numbers represent a MAC address and if so, why are they different from the give solution?</p>
</blockquote>

<p>First, I apologize for not including this dependency...</p>

<p>The MIB tables you're polling are indexed by a value.  In this case, you're polling <code>dot1dTpFdbPort</code> (which shows up as <em>iso.3.6.1.2.1.17.4.3.1.2</em>, if you don't have the BRIDGE-MIB loaded).  That OID is indexed by a mac-address.  Therefore, <em>0.20.42.49.139.235</em> is the mac-address in dotted-decimal format...</p>

<p>To see the results you expect, you need to <a href=""ftp://ftp.cisco.com/pub/mibs/v2/v2.tar.gz"">get the v2 mibs from Cisco's FTP site</a>:</p>

<ul>
<li><code>mkdir /usr/share/snmp/mibs/cisco</code> (as root)</li>
<li><code>cd /usr/share/snmp/mibs/cisco</code></li>
<li>Copy <code>v2.tar.gz</code> that you just downloaded to <code>/usr/share/snmp/mibs/cisco/v2.tar.gz</code></li>
<li><code>tar xvfz v2.tar.gz</code></li>
<li>Edit <code>/etc/snmp/snmp.conf</code> and make this the first line in the file: <code>mibdirs +/usr/share/snmp/mibs/cisco</code></li>
</ul>

<p><em>Assumptions</em>:</p>

<ul>
<li>You're using NET-SNMP libraries to poll</li>
<li>Your NET-SNMP default MIBs are loaded in <code>/usr/share/snmp/mibs/</code></li>
<li>Your NET-SNMP configuration is in <code>/etc/snmp/snmp.conf</code></li>
</ul>
","2993"
"Is it possible to disable a single DHCP pool in IOS?","4396","","<p>I am working on a Cisco L3 switch where most of SVIs are having <code>ip helper-address</code> configured for DHCP relay but also a couple of DHCP pools have been configured in the switch itself to serve dynamic addresses to a couple of VLANs.</p>

<p>I'm planning some changes where I would like to disable only one of the DHCP pools in the switch. So far, I have read about the following options related to disabling DHCP in IOS:</p>

<ul>
<li>Adding <code>no service dhcp</code> in global config: not suitable for my scenario, as it would disable all DHCP relay and all DHCP pools. </li>
<li>Deleting configuration for the pool to be disabled: this would work in my scenario but I would like to keep the pool configuration in running config, just in case I need to rollback the change. </li>
</ul>

<p>So my question is: for an IOS based device, is there a way  to disable a single DHCP pool while keeping the pool configuration in running config? Something like <code>shutdown</code> for an interface? </p>
","<p>Well, one way to do this would be to exclude the entire pool from assignment. This would leave the configuration of the pool in there and you would just remove the exclusion if you wanted it to assign addresses again.</p>

<pre><code>ip dhcp excluded-address &lt;first address&gt; &lt;last address&gt;
</code></pre>

<p>However, I would just archive a copy of the config and remove the pool.</p>
","2433"
"Chassis temperature and Fan status on Cisco 3548 switch","4386","","<p>I need to remotely check the status of the fans and temperature of a switch that I currently do not have physical access to. I have done so in the past on a 2950 with the command:</p>

<pre><code>Show environment
</code></pre>

<p>But I don't have this command on this platform. Does anyone know a command I can use check this? I don't have SNMP configured at the moment, I can do if its needed but I would rather just look it up with a command if possible.</p>

<p>The Switch is a WS-C3548-XL running IOS 12.0(5)WC17.</p>
","<p>To extend my comment, these switches don't have any pollable environment sensors. Only WS-C3524-PWR-XL-EN model has pollable fan sensor.</p>

<p>They've been completely out of support since 2007 and you'll never get newer software than WC17 which you are running.</p>

<p>We are having difficulties finding people who'll accept them free from us, so we usually just trash them.
If I'd have XL switches and no budget I'd upgrade them to 3550, which is also EOL, but much superior switch and can be acquired for 50USD/pcs. 3550 runs modern IOS, 12.2(55)SE8 but technically is out of SW maintenance.</p>

<p>With 3550 you'd at least get MST, QinQ, L2PT, SSH, proper storm-control, IP routing, QoS, ACLs, SPAN.</p>
","2739"
"SonicWALL TZ 300 DNS Forwarding","4383","","<p>Clients set up with static IPs and static DNS entries pointed to my SonicWALL at 192.168.0.1 fail to resolve DNS lookup request. </p>

<p>Client DNS -> 192.168.0.1 (DNS look ups fail)
Client DNS -> Dynamic (SonicWALL assigns the proper DNS server to the client)</p>

<p>I have an existing environment and need my clients DNS server to point to the SonicWALL, and have it forward the requests to the to the appropriate server.</p>

<p>I believe the name for it is DNS forwarding? So do I set this up? </p>

<p>PS: All my WAN / DNS settings are already configured. I just need to set up the forwarding part.</p>
","<p>Ron is correct, SonicWALLs will not do DNS Proxy/redirection or act as a DNS forwarder. BUT you <em>can</em> use <strong>NAT rules</strong> to accomplish the same thing!</p>

<p>If you need your SonicWALL to act as a DNS resolver for LAN clients then configure a loopback NAT rule like so:</p>

<p><PRE>
Original Source: Any
Translated Source: WAN Primary IP            [Or your X1/WAN interface IP]
Original Destination: LAN Primary IP         [Or your X0/LAN interface IP]
Translated Destination: {Some Public DNS}    [Or an Address Group of DNS]
Original Service: DNS (Name Service)         [This is usually pre-defined]
Translated Service: Original
Inbound Interface: X0                        [Or your LAN interface]
Outbound Interface: Any
Comment: DNS forwarding for LAN IP
</PRE></p>

<p>It should look something like:
<a href=""https://i.stack.imgur.com/IdUlf.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/IdUlf.gif"" alt=""SonicWALL DNS loopback NAT rule""></a></p>

<p>In the screenshot I have an Address Object with both of Google's Public DNS addresses added. If my LAN Primary IP is 192.168.0.1 then I can give that out via DHCP (or assign it statically) and my LAN clients will be able to do DNS lookups against 192.168.0.1 such as:</p>

<pre><code>nslookup www.stackexchange.com 192.168.0.1
</code></pre>

<p>You will of course need a Firewall rule that allows DNS traffic from the LAN/X0 Subnet to the SonicWall's LAN/X0 IP -- but this should exist by default [as an Any/Any rule].</p>

<p>I've done this on a variety of SonicWALL routers when I have swapped out consumer/home-grade routers that do DNS Proxy/Redirection and there were devices with Static IPs that I couldn't log into to adjust. Works fine.</p>
","30339"
"VLAN with Mixture of Managed/Unmanaged Switches","4374","","<p>I've got a setup in my house as a test to try and figure this stuff out, but i've hit a bit of an end point. Here is a picture of my network setup.
<img src=""https://i.stack.imgur.com/mKVBU.png"" alt=""enter image description here""></p>

<p>So i have my internet provided by Virgin Media, which comes through into a 16 port unmanaged switch, our of that into a Desktop PC which uses DHCP to pick up an address from the Virgin router. I also have another cable going down to the garage which has a managed Dell Switch and a managed Cisco router.</p>

<p>From my Desktop PC, i can ping 192.168.1.253 (dell) and 192.168.1.254 (cisco) and the gateway of the Desktop PC is 192.168.1.1 (virgin). If i was to change my gateway to 192.168.1.254 (cisco) then i can now ping 192.168.200.254 (VLAN 200) as well as the rest of the network. Which is great, so i know i can get across the subnet which is exactly what i'm after.</p>

<p>The problem then starts if i want to have a machine on the 200 VLAN. So, i change my IP Config of the Desktop to...</p>

<p>IP: 192.168.200.50
Sub: 255.255.255.0
GW: 192.168.200.254</p>

<p>I now can't ping a thing, getting destination host unreachable across the board. So that leads me to think it isn't working!</p>

<p>Here are the configs for the Switch and the Router.</p>

<p>Dell Switch
<a href=""http://pastebin.com/iun8WKne"" rel=""nofollow noreferrer"">http://pastebin.com/iun8WKne</a></p>

<p>Cisco Router
<a href=""http://pastebin.com/6VE8yQ4r"" rel=""nofollow noreferrer"">http://pastebin.com/6VE8yQ4r</a></p>

<p>I think i've covered everything here...</p>
","<p>The reason that this doesn't work is that your desktop isn't actually <em>in</em> vlan 200. You changed the IP address of the desktop to be on the 192.168.200.0/24 <em>subnet</em> but that's at layer 3. </p>

<p>Looking at the layer 2 topology, your PC is connected to a dumb switch which is hooked into a vlan 1 port on the managed switch. Because of this, regardless of what your IP address is the traffic coming from your desktop is hitting the switch on vlan 1.</p>

<p>Going back to layer 3 a bit, your default gateway 192.168.200.254 isn't in vlan 1 it's in vlan 200 because it's assigned to a router sub-interface which is watching for traffic tagged vlan 200. Therefore the PC's default gateway is unreachable at layer 2 and you get the infamous ""Destination host unreachable"" error.</p>

<p>For you to add a host in vlan 200, you need to plug it into a totally new port on the Dell managed switch and assign that port to vlan 200, as well as giving it an IP address in the 192.168.200.0/24 subnet.</p>

<hr>

<p>On a related note, if you want traffic from vlan 200 to reach the outside internet you will need to create static routes on both the virgin media router and the Cisco router telling them about the other networks.</p>

<p>On the Cisco router you need to add <code>ip route 0.0.0.0 0.0.0.0 192.168.1.1</code> to tell it to forward any traffic with a destination network it doesn't know about to virgin media. On the virgin media router you need the equivalent of <code>ip route 192.168.200.0 255.255.255.0 192.168.1.254</code> so that the virgin media router knows where to send traffic coming back from the internet destined for vlan 200.</p>
","9479"
"switchport block multicast vs storm-control multicast","4365","","<p>I'm not sure what is the difference in behaviour between <code>switchport block multicast</code> and <code>storm-control multicast</code> and I don't think cisco elaborates the difference very well in their documentation, other than the fact storm-control grants you levels of control, but for this case, suppose the storm-control only lets you pick up 0 or 100. How is it any different from switchport block, for instance?</p>

<p>Update: I accidentally wrote ""switchport block unicast"" when I intended to write ""switchport block multicast"". </p>
","<p>Well the first difference would be that <code>switchport block unicast</code> blocks unknown unicast and <code>storm-control multicast</code> blocks multicast packets.</p>

<p>The difference between <code>switchport block XXXcast</code> and <code>storm-control XXXcast</code> is exactly what you want to exclude in your question. You can pick any percent value for <code>storm-control</code>. It will block traffic of the specified type which exceeds this percentage of bandwidth on the port. <code>switchport block</code> is a simple yes/no. It blocks everything when activated.</p>

<p><strong>Update:</strong></p>

<p>As ytti mentioned, on some low-end boxes when <code>storm-control multicast</code> is exceeded all traffic will get filtered. In that case <code>storm-control multicast</code> is dangerous and useless.</p>

<p>Also on high-bandwidth interfaces (1/10GE) please remember that even a small percentage of the bandwidth can kill a box that punts the packets to the CPU. If possible use CoPP to protect the control plane. Also always use pps instead of bps for CoPP if possible.</p>
","2743"
"Reason for half-duplex mode in Ethernet?","4363","","<p>Half-duplex connections were popular at the time of 10Mbps and 100Mbps <em>Ethernet</em>, and, according to standards, it is allowed also in case of 1Gbps <em>Ethernet</em>.</p>

<p>Am I correct that half-duplex mode support in <em>Ethernet</em> chipsets was crucial in case either a network hub (hub is internally a single wire) or some other shared <em>Ethernet</em> medium (for example, 10BASE-5) was used?</p>

<p>Are there any reasons for half-duplex connections in <em>Ethernet</em> environments where twisted-pair cabling is used and hubs are not used?</p>
","<p>The reasons for half-duplex ethernet are as you understand them.  In fact, there was a movement to not include half-duplex for 1000Base-T, but it still made it into the standard.  For 10 Gb ethernet, half-duplex was dropped so there is no such thing as 10 Gbps half-duplex ethernet as a standard.</p>

<p>Unless you still have a hub (they are still around) or a device that doesn't support full-duplex (they exist, especially for 10Base-T), 10Base-T or 100Base-TX on UTP don't really need half-duplex.</p>
","19941"
"How to failover static ipsec vpn tunnels?","4363","","<p>I have a network with resilient gateways whereby Customer sites use a default gateway to reach the internet edge routers and the primary route for traffic uses a lower metric.  </p>

<p>ipsec tunnels are initiated from vpn concentrators behind the edge routers and are statically configured to the destination tunnel endpoints which are 3rd party data centers.  I am not able to use a dynamic routing protocol with the 3rd party.
<img src=""https://i.stack.imgur.com/SJ1lK.jpg"" alt=""Network Topology""></p>

<p>The problem is that the peering address range that the 3rd party is using periodically changes and brings down the primary tunnel and a manual switch to the secondary tunnel is being cumbersomely carried out.</p>

<ol>
<li>Can how can I most efficiently failover between tunnels in this
scenario if the destination IPs are not reliable for the static
ipsec configuration? </li>
<li>How would I pre-empt the primary tunnel once the endpoint becomes
available?</li>
</ol>
","<p>One solution is to use Performance routing (PfR) on the gateway routers.  PfR can test connectivity to each data center and then route traffic to whichever one is responding.   So if a tunnel goes down, PfR will automatically route traffic through the other tunnel to the other data center.</p>

<p>PfR can do this by pinging (or using IP SLA) each of the data centers.  If the London tunnel fails, PfR will route traffic through the New York tunnel, and vice versa.</p>

<p>I would like to give you a configuration, but I need to see more details about your network.  In the meantime, you can look at a couple of things:</p>

<p><a href=""http://blog.ine.com/2011/11/01/cisco-performance-routing-pfr-optimized-edge-routing-oer/"" rel=""nofollow"">http://blog.ine.com/2011/11/01/cisco-performance-routing-pfr-optimized-edge-routing-oer/</a></p>

<p><a href=""http://www.netcraftsmen.net/archived-documents/c-mug-article-archive/7-20090922-cmug-understanding-performance-routing/file.html"" rel=""nofollow"">http://www.netcraftsmen.net/archived-documents/c-mug-article-archive/7-20090922-cmug-understanding-performance-routing/file.html</a></p>

<p>Here's a video if you're more of a visual learner.</p>

<p><a href=""http://www.cisco.com/en/US/prod/iosswrel/ps6537/ps6554/ps6599/ps8787/pfr_configure_video.html"" rel=""nofollow"">http://www.cisco.com/en/US/prod/iosswrel/ps6537/ps6554/ps6599/ps8787/pfr_configure_video.html</a></p>
","5603"
"Sonicwall Two Wan Interfaces and Two LAN Interface on TZ100 - Routing Question","4356","","<p>I'm trying to set up some simple routing rules for the following scenario:</p>

<p>XO LAN : 172.x.x.x
X1 WAN: 64.x.x.x
X2 WAN: 199.x.x.x
X3 SIP: 192.168.28.1</p>

<p>X3 has a PBX 192.168.28.2 directly connected to it and I'm trying to route it to only use X2's WAN. Obviously I can ping the X3 Interface from .2 but no routing rules are set up for this and after trying a few, I thought I'd ask for help. It should be simple but I'm not seeing it. Any help is highly appreciated. </p>
","<p>Go to Network->Routing. Add a new Route Policy.</p>

<ul>
<li>Source = PBX (192.168.28.2) </li>
<li>Destination = Any</li>
<li>Service = Any (or the    specific services you want routed over X2)</li>
<li>Gateway = X2</li>
<li>Default Gateway Interface = X2</li>
<li>Metric= something less than 20 (10?) so that    it preempts the other
route policies.</li>
</ul>

<p>That should do it.  </p>
","10538"
"Licensing for two Cisco ISE servers","4346","","<p>We have two Cisco ISE servers (ISE-3355-K9) running 1.2.  When we ordered these from our reseller, the reseller's engineer (who was a wireless CCIE) insisted that we only needed one copy of the <code>L-ISE-BSE-500</code> license for both servers, since they would be a redundant pair.</p>

<p>In the mean time, that engineer left the reseller, and nobody there understands what he was thinking; however, we spent our entire budget on this order.  We don't have extra money to purchase more licenses, but we could have asked for more money if we needed it for the order.  The budget cycle is over for this project.</p>

<p>I don't understand how to build these servers as a redundant pair and only one license.  Can someone explain how this works?</p>
","<p>One license is all you need.</p>

<p>I assume since you have the licensing, you also ought to have TAC support along with it.</p>

<p>If not, the docs on Cisco.com will really help in pointing you in the right direction.</p>

<p>Here's a good place to start: <a href=""http://www.cisco.com/en/US/docs/security/ise/1.0/user_guide/ise10_dis_deploy.html#wp1128454"" rel=""nofollow"">ISE HA Docs</a></p>

<p>And here's another helpful link: <a href=""https://supportforums.cisco.com/discussion/12112441/cisco-ise-generate-license-high-availability-primarysecondary-nodes"" rel=""nofollow"">support forums question</a></p>
","7823"
"Does TCP use Virtual Circuit Model?","4338","","<p>First some information: </p>

<p>In virtual circuit model ( which is in the Network Layer ) there are three phases: </p>

<p>1) Connection establishment => In this step a path is chosen. Let's simply say, use routers with id 4,9,12 to get to the destination. </p>

<p>2) Data transfer => In this step the packets ( IP packets ) are forwarded. </p>

<p>3) Connection tear down => Circuit information is removed from the routers. </p>

<p>So in this model, the packets only need to know what circuit they are on. So they do not need full addresses. If a packet only carries the information that it is on circuit 9454, the routers will be able to know where to forward the packets to, because a connection was established, and routers hold the necessary information...</p>

<p>Now lets move up one level, to the Transport Layer.. TCP ( Transmission Control Protocol ) uses connections! Does that mean TCP uses Virtual Circuit Model in the Network Layer? 
Or is still Datagram Model used in Network Layer, and TCP makes its own connection in the Transport Layer? </p>

<p>My question is also valid for UDP in Transport Layer and Datagram Model in Network Layer. Can we say that a UDP connection will always use Datagram Model in the Network Layer? </p>
","<p>I would give an answer of ""no, but it is remarkably similar.""</p>

<p>Here's some history and a largely complete explanation.</p>

<p><strong>Circuits 101</strong></p>

<p>Information networks can route traffic, basically, in terms of circuit switching or in terms of packet switching.  Circuit switching offers many more guarantees than packet switching, but this comes at a cost, and so circuit switched networks can't degrade gracefully.  The classic circuit-switched network is the PSTN, and a virtual circuit would be something like a DS0 on the PSTN.</p>

<p>A DS0 basically works as part of a bundle of connections, usually in a DS1.  In a DS1, you will have a bundle of DS0's which are transmitted together, frame-by frame in time-division manner, so each DS0 is guaranteed a specific bandwidth, timeliness, etc. by the underlying network transport.</p>

<p>Another way to look at this is that a physical circuit would be something like a cat6 cable running between two terminals.  You can send data back and forth over the wires at guaranteed speeds, and no other communications are going to interfere with that.  Indeed the early telephone networks worked by connecting physical circuits (that is copper wires) using manual or electromechanical switches.  As this was computerized, the circuits were virtualized and digital (as opposed to analog) information was sent down wires on a time division basis again with a circuit reserving a slot in the time division schedule.</p>

<p>What this means is that circuit switching is more about bandwidth reservation than it is about routing.  The former leads to the latter.  I.e. a circuit <em>reserves bandwidth for the entire connection.</em></p>

<p><strong>Why TCP Connections are not Virtual Circuits</strong></p>

<p>TCP/IP is fully packet-switched.  It makes no provisions for virtual circuits.  This is why things like QoS are often necessary when trunking VOIP (a virtual circuit has built-in QoS guarantees).  You have no guarantee that all packets will be routed alike.  They may not come through in the same order.  They may not come through in a timely manner (from a connection-oriented perspective).  So you can't really build virtual circuits per se on top of a packet switched protocol like IP.</p>

<p>TCP comes somewhat close and in fact can work as a somewhat imperfect substitute.  It offers as many of the guarantees as it can. This is why, when implemented on TCP/IP, H.323 uses TCP connections instead of the virtual circuits the protocol prefers.</p>

<p>But TCP connections still aren't circuits, because they don't reserve bandwidth during connection on every switch between the two nodes.</p>

<p>Of course TCP connections are more than just datagrams.  They include routing information (as does UDP) but they also include the accounting information necessary to reconstruct the stream on the other side in order.</p>

<p><strong>The Answer</strong></p>

<p>Both TCP and UDP are datagram protocols.  They send a packet of data with routing information to routers with none of the guarantees of that a circuit offers.  TCP offers a subset of guarantees on the end points of what a circuit would offer by adding accounting information to allow the end points to handle errors and a series of data in order, but it is only a subset.  Of datagram protocols, TCP is the closest thing one will find to a virtual circuit but it is still conceptually and operationally very different.</p>
","6322"
"Why there are no different classes of network in IPv6?","4336","","<p>In IPv4 we have class A, class B, and class C. In IPv6 we have only global prefix and Interface ID. I know there are plenty of addresses in IPv6 but it gives room for too many host addresses.And when it comes to P2P links only two addresses are used but /64 gives around 18 quintillion possible addresses that's a terrible waste of ip addresses. Is it good or bad practice to subnet the address beyond global prefix ?</p>
","<p>IPv4 classes A, B and C have been deprecated since the publication of <a href=""https://tools.ietf.org/html/rfc1519"" rel=""nofollow"">RFC 1519</a> in 1993.</p>

<p>I agree with you that 64 bits for host addresses is more than anybody will ever need, but that is how it is designed and never having to worry about subnet sizes is wonderful! :)</p>
","12766"
"MAC address recycling?","4332","","<p>Something I've always wondered about is MAC address exhaustion. Do hardware vendors keep track of MAC address allocation to their platforms, and then subsequently ""reclaim"" MAC addresses when a product goes EOL, and then re-use them on a new platform?</p>
","<p>MAC-48 has a maximum of 2^48 possible addresses which is somewhere in the neighborhood of 281 trillion different addresses(Compared to IPv4 which has around 4.2 billion). That said I've seen some studies and estimates saying that we won't have to worry about exhaustion until around 2100. The IEEE is one organization that supports this estimate. By that time we may not even being using MAC addresses anymore. Additionally there is another standard called EUI-64 which provides 2^64 possible addresses(24 being the OUI and 40 being the individual card number). </p>

<p>To answer your question about recycling, I don't imagine vendors do it nor that IEEE supports vendors doing it. When assigning local MAC addresses a network admin could do it but I can't imagine why you would want to.</p>
","749"
"Difference between cisco asa cluster and active/active failover","4330","","<p>Whar are differences between cluster and active/active failover with cisco asa 5525-x?</p>
","<p>The active/active cluster allows you to split traffic into groups so the A node handles traffic for some networks while the B node handles traffic for the others, in the event of a failover the stable unit will handle traffic for both A&amp;B traffic groups (assigned on a per context basis). Active/Standby cluster handle all traffic on a single node while the other is brought into use only in the event of a failure.</p>

<p>This is generally used when you're going to have more traffic than a single node can handle, if one of the units fails, instead of stopping all traffic destined to the failed ASA it will run in a degraded state until it is replaced. So essentially you're stretching you're hardware and actually utilizing it taking the risk of degradation if there's a failure instead of paying for a standby unit that essentially never sees any traffic pass through. </p>

<p>Edit: Forgot to clarify active/active is only available for multi-context mode since it would serve no purpose otherwise since you couldn't create the groups</p>
","25870"
"Impact of IOS BGP soft-reconfiguration-inbound and peering options","4328","","<p>This scenario is a network with four routers in a square; each has a connection to a different transit provider with a full BGP table from each.</p>

<pre><code>R1----R2
|     |
|     |
R3----R4
</code></pre>

<p><em>How do full BGP feeds affect the memory requirement of the routers in the ring, other than the router receiving the full feed?</em></p>

<p>All four routers here take full feeds from different providers, and are iBGP meshed (you can imagine diagonal lines join R1 &amp; R4, and R2 &amp; R3, my ASCII art isn't brilliant).</p>

<p>iBGP peers send each other all eBGP routes so, R1 receives full table from upstream1. R2 receives a full feed from upstream2. R2 will send R1 all its external routes and vice versa. For any received routes that are better via upstream2, R1 will place into it's FIB, and send traffic to R2. And so on and so fourth, for all four routers and upstream providers. Now, for traffic that has a better path via upstream3, it will be sent via R3,  even when it comes from a device attached to R1. That is the beauty of BGP.</p>

<p>Lets just use R1 and R2 to keep it simple for now, and they are booth bringing up BGP peerings for the first time;</p>

<ol>
<li><p>When R1's BGP session with upstream1 first establishes, it receives BGP updates from upstream1, it processes the routes and they progress from BGP RIB into the FIB.</p></li>
<li><p>All of these routes on R1 are now passed to R2 via iBGP, and R2 pushes them all from its BGP RIB into FIB (these are the only external routes it has at present).</p></li>
<li><p>R2's session with upstream2 comes up and upstream2 sends BGP updates to R2. At this point, does R2 compare the routes in it's BGP RIB, keeping the better ones, drop the lesser ones, than it has from upstream1, and push the replaced better ones into FIB (assuming no better routes in FIB from other routing protocols or sources). <strong>Does R2's BGP RIB still only contains one full BGP table at this point, but its a mix of both upstream providers table views?</strong> Is the correct?</p></li>
<li><p>The same now happens in reverse, with R2 sending updates to R1. R1 ends up with the same BGP view.</p></li>
</ol>

<p>Am I correct that unless <code>soft-reconfiguration inbound</code> or something similar is configured, any router in this square only holds the equivalent of one full table? What change in memory requirements would enabling <code>soft-reconfiguration inbound</code> here make, would each router hold 4 full tables and need 4 times as much memory?</p>
","<p>Just like BGP attributes are packed when sending BGP UPDATEs, they are stored in memory in a rather compact format where each prefixes only holds references to the attributes that apply to that route. The AS path and the communities applied to a route are typically the attributes that are largest in size and as these are often the same over a large amount of routes, a great deal of memory can be saved by just storing an AS path once and then keeping references to all routes for which this AS path applies. The exact in-memory format changes with different versions of IOS/JUNOS.</p>

<p>A route for the same prefix received via different eBGP sessions will likely share many attributes (especially if the eBGP sessions are to the same upstream) and so they can be ""packed"" quite efficiently in memory.</p>

<p>Your explanation of BGP behaviour is mostly correct. R1 has sent the content of its entire BGP RIB to R2. R2s eBGP session is enablde and for every route received, R2 will compare it to the one in its BGP RIB (which mostly contains routes from R1). When R2 finds a prefix from its new eBGP peer that is better than the one in BGP RIB, it will use the new eBGP route and announce it to R1. If R1 finds the route received from R2 to be better than its own route (received from its eBGP session) then R2 will withdraw the route that it announced to R2. The routers will only announce their best route and if the best route is not from eBGP but from another iBGP neighbor, it will not announce it unless you have some route-reflection going on as well. You can easily end up in a scenario where both R1 and R2 each select all the routes learnt from their respective eBGP session as the best routes and that means they will always announce a full table to their iBGP buddies.</p>

<p>There's also something called ""best external"" which means you always announce your best eBGP route regardless if that's the one you have chosen as best path or not. Best external enhances convergence time by not having to go through ""BGP path hunting"" when something breaks. Obviously it consumes more memory.</p>

<p>Personally I don't think BGP Soft reset enhancement is much of an enhancement. RAM is cheap, so keeping the routes, exactly as received from your neighbor, in memory is quite easy, especially on a modern router. JUNOS doesn't even offer you the option to not store it - it always keeps the Adj-RIB-IN, but JUNOS was designed in the late 90s when RAM was plentiful and not in the 80s when IOS made the scene. If someone out there designing a router thinks ""let's save on RAM because we have BGP soft reset enhancement"", I'd like to shoot that person ;)
On the other hand, if you are running a network with old routers running low on memory I totally understand if you don't enable soft-reconf.</p>

<p>Bottom line, it's difficult to say and depends on your environment.</p>
","2654"
"Cisco ISE - Issues after new CA Certificate","4322","","<p>Our Root CA Certificate expired recently, in advance we loaded the new one on our ISE servers however after the expiry we have had issues with Android devices and BYOD onboarding.</p>

<p>Apple devices are working without issue and our 802.1x with workstations is also working without issues however Android devices are flagging the following error in the logs: <strong>""EAP-TLS failed SSL/TLS handshake because the client rejected the ISE local-certificate""</strong></p>

<p>We have tried removing the old certificate, restarted the PSN and ISE servers and forced a resync as well. Apple and Windows devices are showing the certificates are fine and NOT flagging the same error, they operate 100% of the time.</p>

<p>Note: All ISE certificates come from our enterprise CA</p>

<p>Has anyone encountered this issue before?</p>
","<p>In case this helps someone else I can confirm the problem was ultimately resolved by forcing a manual Sync of the PSN, no other changes were required.</p>
","10050"
"IGMP snooping and link-local multicast addresses","4279","","<p>I have a network which has many devices sending data to 224.0.0.225 on a VLAN which spans multiple switches. Each device (aprox 12 of them) is sending reporting data at roughly 500-600 kbps. Each port on the VLAN, whether the receiver sends a join or not, is getting flooded with roughly 6mbps of multicast traffic.</p>

<p>IGMP snooping is enabled on all the switches and the local VLAN.<br>
pim sparse-mode is configred on the mrouter/default gateway.</p>

<p>If I do a <code>show ip igmp snooping groups</code> on the switch, there is no entry in the snooping table.</p>

<p>I know 224.0.0.1 - 224.0.0.255 fall within the link-local reserved IP Multicast range meaning a router will not forward packets within this range. These ranges are also used for routing protocol chatter. eg) EIGRP, OSPF, HSRP...etc</p>

<p>I have two questions:<br>
1) I think the answer is YES - for 224.0.0.1 224.0.0.255...does IGMPv2 ignore this range for snooping and does the switch just forward this to all ports?<br>
2) Is there a way to force IGMP to snoop this multicast traffic and only send it to the ports which request it with an IGMP join?</p>

<p>I have a feeling this is one of those instances where the application/programmers need to design their devices and application to respect scalable non-consumer networks. Thus they should be using a multicast address in the 239.0.0.0/8 range.</p>
","<p>I've kept digging around the internet....and I think I've answered my own question.<br>
Now I need to go back to the application/device owners/developers and see what we can do or further lock these devices down to their own VLAN.</p>

<p>Please leave comments or answers with any further advice.</p>

<p><a href=""http://tools.ietf.org/html/rfc4541"" rel=""nofollow"">RFC 4541 2.1.2</a>:</p>

<p>1) Packets with a destination IP address outside 224.0.0.X which are
      not IGMP should be forwarded according to group-based port
      membership tables and must also be forwarded on router ports.</p>

<pre><code>  This is the main IGMP snooping functionality for the data path.
  One approach that an implementation could take would be to
  maintain separate membership and multicast router tables in
  software and then ""merge"" these tables into a forwarding cache.
</code></pre>

<p>2) Packets with a destination IP (DIP) address in the 224.0.0.X range
      which are not IGMP must be forwarded on all ports.</p>

<pre><code>  This recommendation is based on the fact that many host systems do
  not send Join IP multicast addresses in this range before sending
  or listening to IP multicast packets.  Furthermore, since the
  224.0.0.X address range is defined as link-local (not to be
  routed), it seems unnecessary to keep the state for each address
  in this range.  Additionally, some routers operate in the
  224.0.0.X address range without issuing IGMP Joins, and these
  applications would break if the switch were to prune them due to
  not having seen a Join Group message from the router.
</code></pre>
","2978"
"Cisco: Using carrier-delay with BFD on the same interface","4273","","<p>Will lowering the carrier-delay on an interface configuration interfere with using BFD on the same interface?</p>

<p>If I configure <code>carrier-delay msec 0</code> on an Ethernet interface the RIB is automatically notified of the physical link down event. In a scenario where the physical link doesn't go down but communications are not traversing the link (3rd party DWDM lamda for example) BFD would detect this.</p>

<p>Are there dangers to using a low carrier delay value with BFD, or is it recommended? Or will one simply superseed the other from a configuration perspective?</p>

<p>I would be using them in conjunction with interaface dampening and <code>ip routing protocol purge interface</code> in global configuration.</p>
","<p>I am using the following interface configuration, although this is platform depending. This is a 7600 with LAN cards, on some ASR9Ks and ME3800s the timers are lower due to the better hardware support so you need to tune this to your own requirements:</p>

<pre><code>conf t

 ip routing protocol purge interface 

 int te6/5
  carrier-delay up 5
  carrier-delay down 0
  dampening
  bfd interval 500 min_rx 500 multiplier 3
</code></pre>

<p>I couldn't find any information in any Cisco docs and that doesn't recommend combining these commands. I did find this thread in which a Cisco employee has contributed to saying that one can mix them and it is recommended: 
<a href=""http://www.gossamer-threads.com/lists/cisco/nsp/161219"" rel=""nofollow"">http://www.gossamer-threads.com/lists/cisco/nsp/161219</a></p>

<p>BFD is performing rapid link down detection. When that happens the link will go straight down. When the link comes back up, the carrier-delay will hold it back from being signal as UP to the routing protocol for 5 seconds. Dampening is also enabled such that if this link continues to flap and violates the damping threshold it will be supressed from being signalled to the routing protocol(s).</p>

<p>It is recommend you tune the damping values to your needs: <a href=""http://www.cisco.com/c/en/us/td/docs/ios/12_0s/feature/guide/s_ipevdp.html#wp1027265"" rel=""nofollow"">http://www.cisco.com/c/en/us/td/docs/ios/12_0s/feature/guide/s_ipevdp.html#wp1027265</a></p>
","19597"
"Windows - ping an ip via different interfaces","4266","","<p>I am working on Windows Server 2008/12.</p>

<p>I have two interfaces: a PPTP tunnel and the LAN card and I want to ping an IP via both of them to compare their results. As per the documentation, that should be possible via <code>ping -S default_gateway_for_interface</code></p>

<p>Now this works when I pass the gateway for the default interface but I get </p>

<pre><code>PING: transmit failed. General failure.
</code></pre>

<p>when I pass the PPTP tunnel's gateway. Any clues? </p>
","<p>You are confusing me with the ""default gateway"" thing. The source address is the address on the device from which you are pinging, not the gateway for that subnet.</p>

<p>Suppose I have two addresses, 10.11.12.13 and 172.16.17.18 on my computer. I want to ping on the respective interfaces (logical or physical). I ping from the source (-S) with each of the addresses on my computer, not the gateways for those addresses.</p>

<p>For instance, I have a VPN tunnel and a physical interface on one of my computers, each with IP addresses.  The VPN doesn't allow me to ping outside the network on the other end of the tunnel.</p>

<p>Assume they are addressed like this: Tunnel=<code>172.16.17.18</code>, Ethernet=<code>10.11.12.13</code>.</p>

<pre><code> C:\&gt;ping -S 10.11.12.13 time1.google.com

 pinging time1.google.com [216.239.32.15] from 10.11.12.13 with 32 bytes of data: 
 Reply from 216.239.32.15 bytes=32 time=21 ms TTL=43
 Reply from 216.239.32.15 bytes=32 time=22 ms TTL=43
 Reply from 216.239.32.15 bytes=32 time=23 ms TTL=43
 Reply from 216.239.32.15 bytes=32 time=22 ms TTL=43

 Ping statistics for 216.239.32.15:
     Packets: Sent = 4, Received = 4, Lost = 0 (0% loss), Approximate round trip times in milli-seconds:
     Minimum = 21ms, Maximum = 23ms, Average = 22ms

 C:\&gt;ping -S 172.16.17.18 time1.google.com

 pinging time1.google.com [216.239.32.15] from 172.16.17.18 with 32 bytes of data:
 Request timed out.
 Request timed out.
 Request timed out.
 Request timed out.

 Ping statistics for 216.239.32.15:
     Packets: Sent = 4, Received = 0, Lost = 4 (100% loss),

C:\&gt;
</code></pre>
","21116"
"How is BGP ""AS_SET"" used?","4264","","<p>RFC 1771 defines a path attribute type of <strong>AS_PATH</strong> as follows:</p>

<pre><code>AS_PATH (Type Code 2):

AS_PATH is a well-known mandatory attribute that is composed
of a sequence of AS path segments. Each AS path segment is
represented by a triple &lt;path segment type, path segment
length, path segment value&gt;.

The path segment type is a 1-octet long field with the
following values defined:

Value Segment Type
1 AS_SET:      unordered set of ASs a route in the
               UPDATE message has traversed
2 AS_SEQUENCE: ordered set of ASs a route in
               the UPDATE message has traversed
</code></pre>

<p>Using a AS_PATH type of AS_SEQUENCE makes perfect sense to me: You end up with a reverse list of the ASN's you cross to get to a particular prefix.</p>

<p>However, I have no idea what purpose having an unordered list of ASN's between you and the prefix that would occur if you chose to use an AS_PATH of AS_SET.</p>

<p>The quote above is from the UPDATE message format, so presumably, an Admin has the option to send to BGP peers an ordered list or an unordered list.  My question then is, <strong>what would the purpose be of sending an unordered list</strong>?   In what cases would you be better off sending an unordered list as opposed to an ordered list?</p>
","<blockquote>
  <p>My question then is, what would the purpose be of sending an unordered list? In what cases would you be better off sending an unordered list as opposed to an ordered list?</p>
</blockquote>

<p><code>as-set</code> is commonly used when aggregating routes downstream of an autonomous system; so the use case for an unordered list is <a href=""http://www.cisco.com/c/en/us/support/docs/ip/border-gateway-protocol-bgp/5441-aggregation.html"">bgp aggregation</a>.</p>

<p><em>EXAMPLE</em>:</p>

<p>In the example below, AS65500 aggregates the eBGP announcements from AS65000 and AS65001 into 10.1.0.0/23.  After aggregating the announcements from AS65000 and AS65001, AS65500 sends <code>NETWORK: 10.1.2.0/23   AS-PATH: 65500</code> and <code>NETWORK: 10.1.0.0/23   AS-PATH: 65500 {65000, 65001}</code> (the aggregate).  Typically, an AS will aggregate when it has delegated portions of a larger address block to customers.</p>

<p>It doesn't make sense to build an ordered list when you aggregate space for multiple ASNs; for instance, an ordered AS-PATH for the aggregate below would be either <code>65500 [65000, 65001]</code> or <code>65500 [65001, 65000]</code>.  However, both of those ordered lists are non-sense because ordering is irrelevant to the aggregate (i.e. both autonomous systems are directly connected to AS 65500).  Ordering implies a sequence which is meaningless to the aggregate.</p>

<p>Unordered lists (i.e. <em><a href=""http://en.wikipedia.org/wiki/Set_%28mathematics%29"">mathematical sets</a></em>) make the most sense for an AS_SET.</p>

<pre><code>          _.------------.
      ,-''               `--.
    ,'                       `.
   (         AS65000           )
    `.       10.1.0.0/24     ,'
      `--.               _.-'
          `------------''
                    \          ------&gt; NETWORK: 10.1.2.0/23   AS-PATH: 65500
                     \         ------&gt; NETWORK: 10.1.0.0/23   AS-PATH: 65500 {65000, 65001}
           _.--------------.        router bgp 65500
       ,-''                 `--.     no sync
     ,'                         `.   no auto-summary
    (          AS65500             ) neighbor 10.1.0.2 remote-as 65000
     `.        10.1.2.0/23      ,'   neighbor 10.1.1.2 remote-as 65001
       --.                 _.-'      network 10.1.2.0 mask 255.255.254.0
           `--------------''         aggregate-add 10.1.0.0 255.255.254.0 summary-only as-set
                    /
                   /
          _.--------------.
      ,-''                 `--.
   ,'                         `.
  (           AS65001           )
   `.         10.1.1.0/24     ,'
     `--.                 _.-'
         `--------------''
</code></pre>
","14953"
"How is IEEE 802.1ad (aka VLAN Tagging, QinQ) valid, when the packets are too large?","4264","","<p>Recently <a href=""https://superuser.com/questions/655253/windows-7-doesnt-request-mtu-from-dhcp-server-what-is-it-thinking"">i've been dealing with MTU issues</a>. And it all seems to stem from the fact that the ethernet adapter on newer computers default of a frame size of 1504 bytes:</p>

<pre><code>&gt;netsh interface ipv4 show subinterfaces

   MTU  MediaSenseState   Bytes In  Bytes Out  Interface
------  ---------------  ---------  ---------  -------------
  1504                1  3954161316  804790885  Local Area Connection
</code></pre>

<p>Now, according to a random person on <a href=""https://networkengineering.stackexchange.com/questions/5261/what-is-meant-by-jumbo-frame-what-happen-when-a-frame-size-is-greater-than-the?rq=1"">NetworkEngineering.stackexchange.com</a>, any packet that is too large will be dropped by any receiving Network Interface Card (NIC), as the ethernet packet is too large:</p>

<blockquote>
  <p>...any frame with an MTU greater than the 802.3 spec of 1500</p>
  
  <p>A frame larger than the set max <strong>will</strong> be dropped by the NIC -- it's an error, and the OS will never know about it. (an oversized frame counter will click up, but that's all.)</p>
</blockquote>

<p>Which causes problems when the computer tries to send packets to the gateway machine. Ideally i would be relying on <strong>Path MTU</strong> discovery. But since the ethernet packets being generated are too large for any other machine to receive, there is <a href=""https://networkengineering.stackexchange.com/questions/3524/mtu-and-fragmentation?newreg=1b653a9e55294b6d810a357eb97c9c10"">no opportunity for IP <em>Packet too big</em> fragmentation messages</a> to be returned:</p>

<blockquote>
  <p>There will be no ""fragmentation"" at all. Layer-2 (ethernet) has no means if indicating ""fragmentation needed"". This is figured out at Layer-3 (IP) by routers sending an ICMP message when it has to drop the packet because it won't fit on the next-hop interface.</p>
</blockquote>

<p>Which brings me to my second question first:</p>

<ul>
<li>Why is there a spec that intentionally creates invalid ethernet frames? What is the intended behaviour here? Given that other network interface cards cannot receive these new default-sized packets, what were they expecting to happen.</li>
</ul>

<p>This then brings me to my first question second. And this is something that has been asked before - a lot. </p>

<ul>
<li>Is the 4-byte QinQ tag part of the ethernet frame header, or part of the ethernet payload? If it's part of the header, why did the payload body increase by 4-bytes? If it's part of the ethernet payload, why the the payload MTU increase by 4 bytes (when we know that increasing it by 4 bytes makes it an invalid packet)?</li>
</ul>

<h1>The larger question is...</h1>

<p>If we step back for a moment, we have the larger question:</p>

<blockquote>
  <p>What are we supposed to do?</p>
</blockquote>

<p>There must have been people who designed this standard. What was it they expected people to do with devices that generate these <em>too large</em> packets?</p>

<p>I'm really asking. I assume we weren't meant to go to every hardware device and undo the increase of the MTU 1504 and revert it to 1500:</p>

<pre><code>netsh interface ipv4&gt;set subinterface ""Local Area Connection"" mtu=1500 store=persistent
Ok.
</code></pre>

<p>that would be (and is being) a configuration nightmare.</p>

<p>Is the idea perhaps to turn off VLAN tagging? Aside from the configuration nightmare, it simply doesn't work:</p>

<ul>
<li><p>Step 1: disable VLAN tagging</p>

<p><img src=""https://i.stack.imgur.com/AnxGT.png"" alt=""enter image description here""></p></li>
<li><p>Step 2: observe that it doesn't work:</p>

<blockquote>
  <p>netsh interface ipv4 show subinterfaces</p>
</blockquote>

<pre><code> MTU  MediaSenseState   Bytes In  Bytes Out  Interface
</code></pre>

<hr>

<pre><code>1504                1     238125     245855  Local Area Connection
</code></pre></li>
</ul>

<p>If the solution to this is to manually force all network cards back to an MTU of 1500, then why did they bump it up to 1504 bytes, and create invalid packets, in the first place?</p>

<p>There is a piece of the puzzle i am missing.</p>

<h1>Bonus Chatter</h1>

<pre><code> Without 802.1Q tagging        Without 802.1Q tagging   
+------------------------+    +------------------------+
|Destination MAC: 6 bytes|    |Destination MAC: 6 bytes|
|Source MAC: 6 bytes     |    |Source MAC: 6 bytes     |
|Ethertype: 2 bytes      |    |802.1Q tag: 4 bytes     |
+------------------------+    |Ethertype: 2 bytes      |
|                        |    +------------------------+
|                        |    |                        |
/ Payload: 1500 bytes    /    / Payload: 1500 bytes    /
|                        |    |                        |
|                        |    |                        |
+------------------------+    |                        |
| Frame Check Sequence:  |    +------------------------+
|                 4 bytes|    | Frame Check Sequence:  |
+------------------------+    |                 4 bytes|
                              +------------------------+
</code></pre>

<h1>Network Diagram</h1>

<pre><code>+------------------+      +----------------+     +------------------+
| Realtek PCIe GBe |      | NetGear 10/100 |     | Realtek 10/100   |
|       (on-board) |      |     Switch     |     |     (on-board)   |
|                  |      +----------------+     |                  |
| Windows 7        |           ^    ^            |                  |
|                  |           |    |            |                  |
| 192.168.1.98/24  |-----------+    +------------| 192.168.1.10/24  |
| MTU = 1504 bytes |                             | MTU = 1500 bytes |
+------------------+                             +------------------+
</code></pre>

<p>You could also substitute any configuration you like, generating packets larger than the maximum allowed <code>1500</code> bytes:</p>

<pre><code>+------------------+      +----------------+     +------------------+
| Realtek PCIe GBe |      | NetGear 10/100 |     | Realtek 10/100   |
|       (on-board) |      |     Switch     |     |     (on-board)   |
|                  |      +----------------+     |                  |
| Windows 7        |           ^    ^            | MTU = 1500 bytes |
| MTU = 16384bytes |           |    |            |                  |
|                  |-----------+    +------------|                  |
+------------------+                             +------------------+
</code></pre>

<p>I'm trying to find a site that might be able to address my technical, conceptual, logical, fundamental, theoretical problem of how Ethernet can work when some devices intentionally generate invalid packets.</p>

<p>The concern comes when i try to send an invalid Ethernet packet to another Ethernet device:</p>

<ul>
<li><p>computer generates Ethernet packet</p>

<pre><code>Source MAC:      xx-xx-xx-xx-xx-xx
Destination MAC: yy-yy-yy-yy-yy-yy
Ethertype:       0x0800
Payload:         ...1504 bytes...  (or could be ...16384 bytes, anything larger than 1500...)
CRC:             4 bytes                
</code></pre></li>
</ul>

<p>This packet is invalid because it is too large to be received by the target 802.3u device. Because the target's host operating system never sees the packet, and because Ethernet has no functionality to report invalid packets back to the sender, the <em>""large""</em> packet is lost. </p>

<h1>Bonus Chatter</h1>

<p>From <a href=""http://www.cisco.com/c/en/us/support/docs/lan-switching/8021q/17056-741-4.html#frame2"" rel=""nofollow noreferrer"">Cisco's Inter-Switch Link and IEEE 802.1Q Frame Format</a>: </p>

<blockquote>
  <p><strong>Frame Size</strong></p>
  
  <p>The default maximum transmission unit (MTU) of an interface is 1500 bytes. With an outer VLAN tag attached to an Ethernet frame, the packet size increases by 4 bytes. Therefore, it is advisable that you appropriately increase the MTU of each interface on the provider network. The recommended minimum MTU is 1504 bytes.</p>
</blockquote>

<p>Meanwhile:</p>

<blockquote>
  <p>The IEEE 802.3 Ethernet standard only mandates support for 1500-byte MTU frames.</p>
</blockquote>
","<p>Responding to individual concerns in the post...</p>

<h3>Regarding Path MTU Discovery</h3>

<blockquote>
  <p>Ideally i would be relying on Path MTU discovery. But since the ethernet packets being generated are too large for any other machine to receive, there is no opportunity for IP Packet too big fragmentation messages to be returned</p>
</blockquote>

<p>Based on your diagram, I agree that <a href=""http://tools.ietf.org/html/rfc1191"" rel=""nofollow"">PMTUD</a> cannot function between two different PCs in the same LAN segment; PCs do not generate ICMP Error messages required by <a href=""http://tools.ietf.org/html/rfc1191"" rel=""nofollow"">PMTUD</a>.</p>

<h3>Jumbo frames</h3>

<p>Some vendors (such as Cisco) have switch models which support ethernet payloads larger than 1500 bytes.  Officially <a href=""http://staff.psc.edu/mathis/MTU/arguments.html#ieee"" rel=""nofollow"">IEEE does not endorse this configuration</a>, but the industry has valid needs to judiciously deviate from the original 1500 byte MTU.  I have storage LAN / backup networks which leverage jumbo frame for good reason; however, I made sure that all MTUs matched inside the same vlan when I deployed jumbo frames.</p>

<h3>Mismatched MTUs within a broadcast domain</h3>

<p>The bottom line is that you should never have mismatched ethernet MTUs inside the same ethernet broadcast domain; if you do, it's a bug or configuration error.  Regardless of bug or error, you have to solve these problems, sometimes manually.</p>

<p>All that discussion leads to the next question...</p>

<blockquote>
  <p>Why is there a spec that intentionally creates invalid ethernet frames?</p>
</blockquote>

<p>I'm not sure that I agree... I don't see how the IEEE 802.3 series, or <a href=""http://tools.ietf.org/html/rfc894"" rel=""nofollow"">RFC 894</a> create invalid frames.  Host implementations or host misconfigurations create invalid frames.  To understand whether your implementation is following the spec, we need a lot more evidence...</p>

<p>This diagram is at least prima facie evidence that your MTUs are mismatched inside a broadcast domain...</p>

<pre><code>+------------------+      +----------------+     +------------------+
| Realtek PCIe GBe |      | NetGear 10/100 |     | Realtek 10/100   |
|       (on-board) |      |     Switch     |     |     (on-board)   |
|                  |      +----------------+     |                  |
| Windows 7        |           ^    ^            |                  |
|                  |           |    |            |                  |
| 192.168.1.98/24  |-----------+    +------------| 192.168.1.10/24  |
| MTU = 1504 bytes |                             | MTU = 1500 bytes |
+------------------+                             +------------------+
</code></pre>

<h3>How should an 802.3-compliant implementation respond to MTU mismatches?</h3>

<blockquote>
  <p>What was it they [the writers of 'the spec'] expected people to do with devices that generate these too large packets?</p>
</blockquote>

<p>MTU 1504 and MTU 1500 within the same broadcast domain is simply a misconfiguration; it should never be expected to work any more than mismatched IP netmasks, or mismatched IP subnets can be expected to work.  Your company will have to knuckle-down and fix the root-cause of the MTU mismatches... at this time it's hard to say whether the root cause is user error, an implementation bug, or some combination of the above.</p>

<p>If the affected Windows machines are successfully logging into to an Active Directory Domain, one could write Windows login scripts to automatically fix MTU issues based on some well-constructed tests inside the domain login scripts (assuming the Domain Controller isn't part of the MTU issues).</p>

<p>If the machines are not logging into a domain, manual labor is another option.</p>

<h3>Other possibilities to contain the damage</h3>

<p>Use a layer3 switch<sup>Note 1</sup> to build a custom vlan for anything that has broken MTUs and set the layer3 switch's ethernet MTU to match the broken machines; this relies on <a href=""http://tools.ietf.org/html/rfc1191"" rel=""nofollow"">PMTUD</a> to resolve MTU issues at the IP layer. Layer3 switches generate the ICMP errors required by <a href=""http://tools.ietf.org/html/rfc1191"" rel=""nofollow"">PMTUD</a>.</p>

<p>This option works best if you can re-address the broken machines with DHCP; and you can identify the broken machines by mac-address.</p>

<blockquote>
  <p>... why did they bump it up to 1504 bytes, and create invalid packets, in the first place?</p>
</blockquote>

<p>Hard to say at this point</p>

<h3>802.1ad vs 802.1q</h3>

<blockquote>
  <p>How is IEEE 802.1ad (aka VLAN Tagging, QinQ) valid, when the packets are too large?</p>
</blockquote>

<p>I haven't seen evidence so far that you're using <a href=""http://en.wikipedia.org/wiki/IEEE_802.1Q#Double_tagging"" rel=""nofollow"">QinQ</a>; from the limited evidence I have seen so far, you're using simple <a href=""http://en.wikipedia.org/wiki/IEEE_802.1Q#Frame_format"" rel=""nofollow"">802.1q</a> encapsulation, which <em>should</em> work correctly in Windows, assuming the NIC driver supports <a href=""http://en.wikipedia.org/wiki/IEEE_802.1Q#Frame_format"" rel=""nofollow"">802.1q</a> encap.</p>

<hr>

<p><strong>End Notes</strong>:</p>

<p><sup>Note 1</sup><sub>Any layer 3 switch should do... Cisco, Juniper, and Brocades all could perform this kind of function.</sub></p>
","7285"
"What are the reasons for not putting multiple subnets on the same VLAN?","4236","","<p>I would like to know why we do not (and should not I guess) use 2 different networks on the same LAN/vLAN. From what I tried and understood :</p>

<ul>
<li>Host in network A (ex: 10.1.1.0/24) can talk to each other</li>
<li>And host in network B (ex: 10.2.2.0/24) cant talk to each other</li>
<li>Host and network A cannot talk to host in network B which is normal since inter-LAN communications need a L3 device with routing function.</li>
</ul>

<p>The idea/principle of a LAN/vLAN is, in the course I've followed, described as a broadcast domain. But I am confused since I can configure 2 working networks within the same LAN.</p>

<p>I also tried the same configuration but with a second switch and a different vlan number (SW1 with vlan 10 and SW2 with vlan 20). All ports of each switch are in access mode with vlan 10 and 20 respectively. I had the same result.</p>

<p>Note : each side of the topology has a host from network A and B
<a href=""https://i.stack.imgur.com/H1Q1p.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/H1Q1p.jpg"" alt=""enter image description here""></a></p>

<p>Now, nobody does that and I supposed it is for some goods reasons, but I did not find what are those reasons and that is what I am asking you ?</p>

<p>I found <a href=""https://networkengineering.stackexchange.com/questions/23769/what-blocks-a-computer-from-another-network-in-the-same-switch-from-answering-an"">this topic</a> which seems similar, but the purpose is not the same.</p>
","<p>There's really no reason not to put multiple subnets on the same VLAN, but there's also probably no reason to do it. </p>

<p>Pro:</p>

<ul>
<li>Allows the subnets to talk directly without a router or firewall</li>
<li>Save's VLANs</li>
</ul>

<p>Con:</p>

<ul>
<li>Allows the subnets to talk directly without a router or firewall</li>
<li>It's messy from a documentation and troubleshooting perspective</li>
<li>More broadcast traffic</li>
</ul>

<p>We generally don't do it because of the messiness and lack of security. One VLAN = one subnet is easier to document and easier to troubleshoot and there's usually not a good reason to complicate things.</p>

<p>The only reason I can think of to do it is company mergers or network upgrades and for both of those I'd prefer it to be temporary.</p>

<p>Edit to clarify, for the hosts on different subnets but the same VLAN to talk directly you'd need to either make them their own default gateway or add a route to the ""other"" subnet that connects it to the interface. </p>

<p>In the gateway case if the host IP was 10.1.1.2 then the gateway would also be 10.1.1.2.  This will cause the host to ARP for everything on or off it's subnet.  This would allow it to talk to the second subnet on that VLAN but the only way it'll be able to talk to anything else is if there's a router/firewall running proxy arp that can help it out.</p>

<p>In the route out the interface case you'd add something like ""route add -net 192.56.76.0 netmask 255.255.255.0 eth0"" to the device and then 10.1.1.2 will ARP directly on eth0 when it wants to reach 192.56.76.*.  </p>
","32331"
"Mikrotik Website Whitelist","4220","","<p>guys!</p>

<p>I'm noob to MikroTik's RouterBOARD and RouterOS and ended up finding it a bit confusing.</p>

<p>What I need is as simple as the title says: I need to create a website White-list; just that.</p>

<p>I need to be able to block <strong>all websites</strong> except those that are on the proposed White-list.</p>

<p>Thanks!</p>
","<p>On the mikrotik wiki there are lot of examples on how to use the http proxy feature.
Anyway:
On the IP/Proxy menu you can set the options of the embedded http proxy: in the ""<em>/ip proxy access</em>"" part you can define you access policies in terms of http host names or ip addresses.</p>

<p>Then, you have two options to make it working as a trasparent proxy.
A fully trasparent proxy means that the users do not have to configure it in their browser.
<a href=""http://wiki.mikrotik.com/wiki/How_to_make_transparent_web_proxy"" rel=""nofollow"">http://wiki.mikrotik.com/wiki/How_to_make_transparent_web_proxy</a></p>

<p>BUT, doing so, you cannot filter HTTPS protocol.</p>

<p>If you want to filter also https using your proxy, I can advise to use a ""proxy auto-discover"" mechanism, like WPAD.
<a href=""http://findproxyforurl.com/wpad-introduction/"" rel=""nofollow"">http://findproxyforurl.com/wpad-introduction/</a></p>

<p>Is this enough to start?</p>
","18816"
"Authenticate ssh key via Cisco ACS (TACACS+)","4219","","<p>I can set a router to authenticate via a ssh public-key with:</p>

<pre><code>ip ssh pubkey-chain
 username admin
  key-string
   &lt;ssh-pub-key&gt;
  exit
 exit
</code></pre>

<p>Is it possible to do something similar with Cisco ACS, to enable a public key to be trusted for ssh across a whole set of devices that are already configured for TACACS+?</p>
","<p>It looks like, ""No"".  There's nothing specific in TACACS+ to transport a certificate exchange, however an ASCII data payload <em>could</em> suffice. (the RFC is a decade old) The real question is if ACS has any method to handle it? And that also appears to be ""no"". The only mention I can find to PKI or certificate based authentication is for EAP-TLS, which is not what you want.</p>

<p><strong>Update</strong></p>

<p>I found a single reference in <a href=""http://www.cisco.com/c/en/us/td/docs/routers/crs/software/crs_r4-2/security/configuration/guide/b_syssec_cg42crs/b_syssec_cg42crs_chapter_01001.html#con_1095059"" rel=""nofollow"">IOS-XR documents</a>:</p>

<blockquote>
  <p><strong>Note</strong> The preferred method of authentication would be as stated in the SSH RFC. The RSA based authentication support is only for local authentication, and not for TACACS/RADIUS servers.</p>
</blockquote>
","9365"
"TCP and Go-Back-N","4218","","<p>While studying about TCP i notice that is very similar to Go-Back-N, but ,i think i'm missing something very important:</p>

<p>In <a href=""http://www.ccs-labs.org/teaching/rn/animations/gbn_sr/"" rel=""nofollow"">http://www.ccs-labs.org/teaching/rn/animations/gbn_sr/</a> we can see that in GBN , the server gives ack to every packet that coming. </p>

<p>In <a href=""https://www.scribd.com/doc/2631780/56/Is-TCP-Go-Back-N-or-Selective-Repeat"" rel=""nofollow"">https://www.scribd.com/doc/2631780/56/Is-TCP-Go-Back-N-or-Selective-Repeat</a> p.<strong>65</strong>,  it says: </p>

<blockquote>
  <p>Is TCP Go-Back-N or Selective Repeat?</p>
  
  <p> similarity of TCP with Go-Back-N</p>
  
  <p>1.TCP :cumulative ack for the last correctively received, in-order seg<br>
  2.cumulative and correctly received but out-of-order segs are not individually acked ⇒ TCP sender need only maintain
  <em>SendBase</em> and  <em>NextSeqNum</em></p>
</blockquote>

<p>What is the meaning of cumulative ACK? and what is the difference between selective ACK? and why TCP uses the first one?</p>
","<p>To add to the previous answer: </p>

<p>A ""Cumulative ACK"" implies that all the bytes sent by the sender (so far) have been received correctly by the receiver. In order words, when the sender receives an ACK with sequence number <code>n</code>, the receiver is telling the sender that it has received every byte up to and including <code>n-1</code> and it is expecting byte <code>n</code> next. </p>

<p>In ""selective ACKs"", the receiver sends ACKs for every packet that it has received, regardless of whether it was the packet that the receiver was expecting or not (i.e. whether the packet was out-of-order or not). </p>

<p><strong>E.g. Let's assume that sender S sends 3 packets: <code>pkt1</code> (seq # = 100), <code>pkt2</code> (seq # = 200), and <code>pkt3</code> (seq # = 300), but <code>pkt2</code> gets lost in transmission.</strong> </p>

<p><strong>With GBN:</strong> When the receiver R gets <code>pkt1</code>: It sends <code>ACK=200</code>, telling the sender that it has received all the bytes up to (but not including) 200 and is expecting byte 200 next. Now, <code>pkt2</code> got lost, but <code>pkt3</code> was received by the receiver. So, the receiver will send ACK=200 again and drop <code>pkt3</code> because it is out-of-order. S will then have to re-transmit <code>pkt2</code> AND <code>pkt3</code>.</p>

<p>Once <code>pkt2</code> is retransmitted and successfully received, R will send ACK=300 (i.e. it has received everything up to, but not including, byte 300 and is expecting byte 300, i.e. <code>pkt3</code>). Once <code>pkt3</code> is transmitted successfully, it will ACK that too.  </p>

<p><strong>With Selective Repeat (SR):</strong> Once R receives <code>pkt1</code>, it will send an ACK for it. Once it receives <code>pkt3</code>, it will send an ACK specifically for this packet too and will NOT drop the packet even though <code>pkt3</code> is out-of-order (it will buffer it). Eventually, <code>pkt2</code> will timeout on the sender's end, so the sender will retransmit <code>pkt2</code>. If it's successful the receiver will send an ACK for it too. </p>

<p>Notice that, with SR, you didn't have to retransmit <code>pkt3</code> even though <code>pkt2</code> was lost. This is beneficial because it prevents the sender from having to retransmit the packets that had already been successfully received by the receiver (it's pointless, right? Why send <code>pkt3</code> again when it was already delivered?). This helps avoid congestion in the network because you're not constantly retransmitting packets that DON'T need to be retransmitted.</p>

<p><strong>In general, TCP's congestion control can be described as a combination/hybrid of GBN and Selective Repeat.</strong> Here's why:</p>

<p>TCP is similar to GBN because both protocols have a limit on the number of 
unACK'd packets that the sender can send into the network. However, TCP is different from GBN because GBN requires the re-transmission of every unACK'd
packet when packets are lost, but TCP only retransmits the oldest unACK'd one. </p>

<p>TCP is similar to selective repeat because, when packets are lost due to congestion, the protocols do not require the sender to retransmit EVERY unACK'd packet sent by the sender. The sender just retransmits the oldest unACK'd packet. TCP is different from selective repeat because SR requires individual acknowledgement of each packet that was sent by the receiver; but rather than selectively ACKing every packet, TCP sends an ACK for the next packet that it is expecting (like GBN) and buffers the ones that it has received so far, even if they're out of order (like SR). That's why it can be considered a hybrid. </p>

<p>Hope this helps.    </p>
","29478"
"What are the SNMP MIBs for Cisco IPSLA ICMP echo","4217","","<p>I have two ipsla operations set up:</p>

<pre><code>ipsla
 operation 10
  type icmp echo
   source address 10.0.0.1
   destination address 10.0.2
   frequency 30
 operation 11
  type udp jitter
   tos 128
   source address 10.0.0.3
   destination address 10.0.0.4
   destination port 10001
   frequency 30
</code></pre>

<p>With operation 11, I can SNMP walk <a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?objectInput=1.3.6.1.4.1.9.9.42.1.5.2.1&amp;translate=Translate&amp;submitValue=SUBMIT"">1.3.6.1.4.1.9.9.42.1.5.2.1</a> to get the values that match with <code>sh ipsla stats 11</code>.  However, I cannot find the MIB to walk to get the values for <code>sh ipsla stats 10</code>.</p>

<p>The router is running <strong>Cisco IOS XR Software (Cisco ASR9K Series),  Version 4.2.3[Default]</strong></p>

<p>What are the MIBs for an IPSLA operation configured to use ICMP echo?</p>
","<p>I found out the MIBs.  For the IPSLA types, <code>udp jitter</code>, <code>icmp echo</code> and <code>icmp path-echo</code>, the RTT and connection status are stored in the <a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?local=en&amp;translate=Translate&amp;objectInput=1.3.6.1.4.1.9.9.42.1.2.10.1"" rel=""nofollow"">rttMonLatestRttOperEntry</a> table</p>

<ul>
<li><a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?local=en&amp;translate=Translate&amp;objectInput=1.3.6.1.4.1.9.9.42.1.2.10.1.1"" rel=""nofollow"">rttMonLatestRttOperCompletionTime</a> has the average RTT</li>
<li><a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?local=en&amp;translate=Translate&amp;objectInput=1.3.6.1.4.1.9.9.42.1.2.10.1.2"" rel=""nofollow"">rttMonLatestRttOperSense</a> has the connection status (ok/disconected etc.)
<ul>
<li><a href=""https://support.ipmonitor.com/mibs/CISCO-RTTMON-MIB/item.aspx?tid=RttResponseSense"" rel=""nofollow"">List of values</a> for <a href=""https://support.ipmonitor.com/mibs/CISCO-RTTMON-MIB/item.aspx?tid=RttResponseSense"" rel=""nofollow"">RttResponseSense</a></li>
</ul></li>
</ul>
","18136"
"Default-network and default-gateway","4215","","<p>When would you choose to use the <code>ip default-network</code> command instead of the <code>ip default-gateway</code> command?</p>
","<p><code>ip default-gateway</code> is to be used in L2 devices. </p>

<p><code>ip default-network</code> would be used in L3 devices, but works slightly different from the usual static default route configured with <code>ip route 0.0.0.0 0.0.0.0 &lt;next_hop&gt;</code>. Let's say you configure <code>ip default-network 172.31.0.0</code>. Then, if the device already knows a route for 172.31.0.0, this route will be flagged as a default route candidate. </p>

<p>You need to take into account that <code>ip default-network</code> command is classful. </p>

<p>Further details and clarifications are available <a href=""http://www.cisco.com/en/US/tech/tk365/technologies_tech_note09186a0080094374.shtml#ipnetwork"">here</a></p>
","1432"
"Edit Cisco IOS ACL without hanging the router","4197","","<p>I have a Cisco Router 1941 Series and I want to make some changes to the access-list on the router. I got to know I will have to delete one of the list and then re-add everything again with my additional ones included while stating the deny ones at the end of it. On removing, it went well but on adding, it hangs after the first statement. And whenever I try pasting the code at once, it hangs too. </p>

<p>I tried copying the file to tftp, make some edits and then bring it back, I got some errors with the certificate signing side of it making some complaints..  How can I solve the problem with the ACL?</p>

<p>[Edit]</p>

<p>At the present, this is what I have,</p>

<pre><code>interface GigabitEthernet0/0
 description ### WAN INTERFACE ###
 ip address xxx.xxx.xxx.xxx 255.xxx.xxx.xxx
 ip flow ingress
 ip nat outside
 ip virtual-reassembly
 duplex full
 speed 100
 no cdp enable
!
interface GigabitEthernet0/1
 description ### LAN INTERFACE ###
 no ip address
 ip flow ingress
 ip virtual-reassembly
 duplex auto
 speed auto
!
interface GigabitEthernet0/1.1
 description ### 1st FLR NETWORK ###
 encapsulation dot1Q 1 native
 ip address 192.168.1.1 255.255.255.0
 ip access-group 110 in
 ip accounting output-packets
 ip flow ingress
 ip nat inside
 ip virtual-reassembly
!
interface GigabitEthernet0/1.2
 description ### GROUND FLR NETWORK ###
 encapsulation dot1Q 2
 ip address 192.168.2.1 255.255.255.0
 ip access-group 110 in
 ip accounting output-packets
 ip flow ingress
 ip nat inside
 ip virtual-reassembly
!
ip forward-protocol nd
!
ip http server
ip http access-class 23
ip http authentication local
ip http secure-server
ip http timeout-policy idle 60 life 86400 requests 10000
ip flow-export source GigabitEthernet0/1
ip flow-export version 9
ip flow-export destination 192.168.1.120 9996
ip flow-top-talkers
 top 10
 sort-by bytes
!
ip nat source static 192.168.1.19 interface Loopback100
ip nat inside source list NAT interface GigabitEthernet0/0 overload
ip route 0.0.0.0 0.0.0.0 xxx.vvv.vvv.vvv
!
ip access-list standard NAT
 permit 192.168.1.0 0.0.0.255
 permit 192.168.2.0 0.0.0.255
!
access-list 110 permit ip 192.168.1.0 0.0.0.255 host 192.168.2.44
access-list 110 permit ip host 192.168.2.44 192.168.1.0 0.0.0.255
access-list 110 permit ip 192.168.2.0 0.0.0.255 host 192.168.1.18
access-list 110 permit ip host 192.168.1.18 192.168.2.0 0.0.0.255
access-list 110 deny   ip 192.168.1.0 0.0.0.255 192.168.2.0 0.0.0.255
access-list 110 permit udp any any
access-list 110 permit ip any any
</code></pre>

<p>And I would like to add additional ones to it... like this...</p>

<pre><code>access-list 110 permit ip 192.168.2.0 0.0.0.255 host 192.168.1.120
access-list 110 permit ip host 192.168.1.120 192.168.2.0 0.0.0.255
access-list 110 permit ip 192.168.2.0 0.0.0.255 host 192.168.1.222
access-list 110 permit ip host 192.168.1.222 192.168.2.0 0.0.0.255
</code></pre>
","<p>The reason your router hangs is because you're editing the ACL through the same interface that it's applied to.  Usually what happens is you wind up blocking yourself accidentally.</p>

<p>Note that I make a suggestion for reorganizing your ACLs at the bottom of this answer, although most people will be interested in this first section (the easiest way to change ACLs).</p>

<hr>

<h3>The easiest way to change Cisco IOS ACLs</h3>

<p>Newer Cisco IOS images (such as the image on your Cisco 1941) support <a href=""http://www.cisco.com/c/en/us/td/docs/ios/12_2s/feature/guide/fsaclseq.html"">IP access-list line numbering</a>, which means you can modify your ACL without removing it...</p>

<p>I will use the example of your original ACL 110, although as I mentioned you should really consider reorganizing your ACLs into two different ACLs.</p>

<p><em><strong>Step 1, ACL 110 already on the router</em></strong>:<br></p>

<pre><code>LAB_RTR#sh access-list 110
Extended IP access list 110
    10 permit ip 192.168.1.0 0.0.0.255 host 192.168.2.44
    20 permit ip host 192.168.2.44 192.168.1.0 0.0.0.255
    30 permit ip 192.168.2.0 0.0.0.255 host 192.168.1.18
    40 permit ip host 192.168.1.18 192.168.2.0 0.0.0.255
    50 deny ip 192.168.1.0 0.0.0.255 192.168.2.0 0.0.0.255
    60 permit udp any any
    70 permit ip any any
</code></pre>

<p>Take note of the line numbers that Cisco automatically added to ACL 110. Remember that you need to add your ACL entries before line 50, due to the deny statement.</p>

<p><em><strong>Step 2, Modify ACL 110 in place with new entries, starting after line 40</em></strong>:<br></p>

<pre><code>LAB_RTR#conf t
Enter configuration commands, one per line.  End with CNTL/Z.
LAB_RTR(config)#ip access-list extended 110
LAB_RTR(config-ext-nacl)#41 permit ip 192.168.2.0 0.0.0.255 host 192.168.1.120
LAB_RTR(config-ext-nacl)#42 permit ip host 192.168.1.120 192.168.2.0 0.0.0.255
LAB_RTR(config-ext-nacl)#43 permit ip 192.168.2.0 0.0.0.255 host 192.168.1.222
LAB_RTR(config-ext-nacl)#44 permit ip host 192.168.1.222 192.168.2.0 0.0.0.255
LAB_RTR(config-ext-nacl)#end
LAB_RTR#
LAB_RTR#
LAB_RTR#
LAB_RTR#sh access-list 110
Extended IP access list 110
    10 permit ip 192.168.1.0 0.0.0.255 host 192.168.2.44
    20 permit ip host 192.168.2.44 192.168.1.0 0.0.0.255
    30 permit ip 192.168.2.0 0.0.0.255 host 192.168.1.18
    40 permit ip host 192.168.1.18 192.168.2.0 0.0.0.255
    41 permit ip 192.168.2.0 0.0.0.255 host 192.168.1.120
    42 permit ip host 192.168.1.120 192.168.2.0 0.0.0.255
    43 permit ip 192.168.2.0 0.0.0.255 host 192.168.1.222
    44 permit ip host 192.168.1.222 192.168.2.0 0.0.0.255
    50 deny ip 192.168.1.0 0.0.0.255 192.168.2.0 0.0.0.255
    60 permit udp any any
    70 permit ip any any
LAB_RTR#
</code></pre>

<p><em><strong>Step 3, Renumber the ACL, automatically</em></strong>:<br></p>

<p>The automatic line numbers are nice, because Cisco also gives you a way to renumber the config...</p>

<pre><code>LAB_RTR#conf t
LAB_RTR(config)#! Renumber ACL 110, from line 10... increment in steps of 10
LAB_RTR(config)#ip access-list resequence 110 10 10
LAB_RTR(config)#end
LAB_RTR#

LAB_RTR#sh access-list 110
Extended IP access list 110
    10 permit ip 192.168.1.0 0.0.0.255 host 192.168.2.44
    20 permit ip host 192.168.2.44 192.168.1.0 0.0.0.255
    30 permit ip 192.168.2.0 0.0.0.255 host 192.168.1.18
    40 permit ip host 192.168.1.18 192.168.2.0 0.0.0.255
    50 permit ip 192.168.2.0 0.0.0.255 host 192.168.1.120
    60 permit ip host 192.168.1.120 192.168.2.0 0.0.0.255
    70 permit ip 192.168.2.0 0.0.0.255 host 192.168.1.222
    80 permit ip host 192.168.1.222 192.168.2.0 0.0.0.255
    90 deny ip 192.168.1.0 0.0.0.255 192.168.2.0 0.0.0.255
    100 permit udp any any
    110 permit ip any any
LAB_RTR#
</code></pre>

<hr>

<h3>Original way to change Cisco IOS ACLs</h3>

<p>Originally, the safest way to change your ACL was by removing it from the interfaces in question (this prevented problems if you were changing the ACL via the same interface it was applied to).</p>

<p>Use this technique if your IOS doesn't support <a href=""http://www.cisco.com/c/en/us/td/docs/ios/12_2s/feature/guide/fsaclseq.html"">IP access-list line numbering</a>:</p>

<pre><code>interface GigabitEthernet0/1.1
 no ip access-group 110 in
!
interface GigabitEthernet0/1.2
 no ip access-group 110 in
</code></pre>

<p>Now you can add the new ACL lines, but do it before the other permit any entries...</p>

<pre><code>! Reset the ACL
no access-list 110
!
access-list 110 permit ip 192.168.1.0 0.0.0.255 host 192.168.2.44
access-list 110 permit ip host 192.168.2.44 192.168.1.0 0.0.0.255
access-list 110 permit ip 192.168.2.0 0.0.0.255 host 192.168.1.18
access-list 110 permit ip host 192.168.1.18 192.168.2.0 0.0.0.255
!! New ACL lines before the deny statement
access-list 110 permit ip 192.168.2.0 0.0.0.255 host 192.168.1.120
access-list 110 permit ip host 192.168.1.120 192.168.2.0 0.0.0.255
access-list 110 permit ip 192.168.2.0 0.0.0.255 host 192.168.1.222
access-list 110 permit ip host 192.168.1.222 192.168.2.0 0.0.0.255
!! Deny statement
access-list 110 deny   ip 192.168.1.0 0.0.0.255 192.168.2.0 0.0.0.255
access-list 110 permit udp any any
access-list 110 permit ip any any
</code></pre>

<p>Finally, reapply the ACL to the switch...</p>

<pre><code>interface GigabitEthernet0/1.1
 ip access-group 110 in
!
interface GigabitEthernet0/1.2
 ip access-group 110 in
</code></pre>

<hr>

<h3>ACL Reorganization</h3>

<p>You should really consider using two different ACLs for Gigabit0/1.1 and GigabitEthernet0/1.2... this is a guess at what you're trying to do, but it's unclear that I'm interpreting things correctly...</p>

<pre><code>access-list 111 permit ip 192.168.1.0 0.0.0.255 host 192.168.2.44
access-list 111 permit ip host 192.168.1.18 192.168.2.0 0.0.0.255
access-list 111 permit ip host 192.168.1.120 192.168.2.0 0.0.0.255
access-list 111 permit ip host 192.168.1.222 192.168.2.0 0.0.0.255
access-list 111 deny   ip 192.168.1.0 0.0.0.255 192.168.2.0 0.0.0.255
access-list 111 permit udp any any
access-list 111 permit ip any any
!
interface GigabitEthernet0/1.1
 no ip access-group 110 in
 ip access-group 111 in
!
interface GigabitEthernet0/1.2
 no ip access-group 110 in
</code></pre>
","7018"
"SonicWALL HA w/ Dual WAN HSRP from two redundant switches","4193","","<p>We're adding two SonicWALL NSA 2600 firewalls to our current setup. We currently get two WAN connections from two separate Cisco routers running on the same external subnet with what I believe is HSRP. Right now we run these two connections into two Cisco switches, and all of our computers then plug into both switches with NIC teaming.</p>

<p>In the new setup, we'd like to create a 3-port VLAN on each switch, one port for the WAN connection from the Internet and two ports for each NSA 2600. I've got the WAN port setup from one switch to each SonicWALL in HA mode. If I add the second switch connections to X2, I can't figure out how get the bridged in the Network section. If I choose the WAN zone, I just get Static, Wire Mode, and Tap Mode. Static doesn't make much sense, since I'd need to pick a new IP address. Wire Mode will only let me choose unused interfaces (X4 and X5), and Tap Mode looks totally useless.</p>

<p>Does anyone have any tips on how to make this work or where to learn more about getting something like this working (and maintains full redundancy)?</p>

<p>In case a diagram might help someone understand what I'm trying to do:</p>

<p><img src=""https://i.stack.imgur.com/MnAkG.png"" alt=""Network Setup Diagram""></p>

<p>Here is what it looked like pre-firewall:</p>

<p><img src=""https://i.stack.imgur.com/6dfrB.png"" alt=""Old Network Setup Diagram""></p>

<p>Here are pictures of what I'm seeing on my LAN side:</p>

<p><img src=""https://i.stack.imgur.com/4FgK9.png"" alt=""LAN bridge""></p>

<p>Nothing like that seems to exist on the WAN side:</p>

<p><img src=""https://i.stack.imgur.com/sIwFL.png"" alt=""enter image description here""></p>
","<p>One option is to connect both switches together and create two vlans that span across both switches.  Connect the routers and the WAN side of the FW to VLAN 1.  Connect the LAN side and the servers to VLAN 2.  If you run HSRP on the routers, that is your default gatewway for the firewall.  Here is a logical diagram.  Let me know if you need help configuring trunking on the switches.</p>

<p><img src=""https://i.stack.imgur.com/PJotn.jpg"" alt=""HA Logical diagram""></p>
","7026"
"HP 1910 Configuration Question","4189","","<p>So i have a customer who purchased 5 HP 1910 switches (4 24port and 1 8port switch). They currently have a flat network using 192.168.80.x/24 subnet. They are adding voice and wanto to segregate their network using vlans. It's been a while since i've configured HP switches (these are web based GUI's) and i wanted to confirm my config appears correct.</p>

<p>Managment: Vlan1 - 10.10.1.X/28<br/>
Data: Vlan10 - 192.168.80.X/24<br/>
Voice: Vlan20 - 172.16.80.X<br/></p>

<p>Cisco Router (running BGP) > Core switch > 4 distribution switches > LAN</p>

<p>Using 1 of the 24port 1910's as a Layer 3 Core switch i've configured it the folowing way:</p>

<ul>
<li>IP: 10.10.1.2</li>
<li>Port 28: SFP Trunk port to the 8port HP 1910 switch connected via Fiber</li>
<li>Port 24: Trunk port to the Cisco Router (should this be a trunk or ""Hybrid"" port?)</li>
<li>Port 23: Trunk port connected to the 2nd 24port HP1910 switch</li>
<li>Port 22: Trunk port connected to the 3rd 24port HP1910 switch</li>
<li>Port 21: Trunk port connected to the 4th 24port HP1910 switch</li>
<li>Configured Vlan10 with IP 192.168.80.X with IP helper going to a remote site DHCP server</li>
<li>Configured Vlan20 with IP 172.168.80.X with IP helper going to a remote site DHCP server</li>
</ul>

<p>For the Distribution switches they configured as follows:</p>

<ul>
<li>2nd: IP 10.10.1.3</li>
<li>3rd: IP 10.10.1.4</li>
<li>4th: IP 10.10.1.5</li>
<li>5th (remote): IP 10.10.1.6</li>
</ul>

<p>Switches 2-4 are configured identically:</p>

<ul>
<li>Ports 1-23 are untagged in Vlan1 and 10, tagged in Vlan20 with PVID 1</li>
<li>Port 24 is the uplink port to the core switch configured as a trunk</li>
<li>I've configured the Vlan's on the switch as well but did not assign them IP's (i set to to ""DHCP"") assuming they would get their IP's from the DHCP server</li>
</ul>

<p>Switch 5:</p>

<ul>
<li>Port 1-8 are untagged in Vlan1 and 10, tagged in Vlan20 with PVID 1</li>
<li>Port 9 is the uplink port to the core switch configured as a trunk with a fiber SFP</li>
</ul>

<p>My question really is will it work the way i think it should? IE if i plug a PC in any of the distribution switches it should grab a Vlan10 IP, likewise if i plug a phone into a port it should grab a Vlan20 IP?</p>

<p>As it stands i can ping the distribution switches from the core and vice versa. I didn't have any way of testing the Vlan's. I'm a little confused as when to use a Trunk port and when to use a Hybrid port as HP's terminology differs from Cisco's.</p>
","<p>First, it is invalid to configure <em>more than one</em> untagged VLAN per port. Into which VLAN does an untagged packet belong? Thus, VLAN 1 (management) should exist, and be the PVID, only on trunk ports. (PVID 10 everywhere else.)</p>

<p>Second, unless a switch is acting as a router (eg. the core switch), it doesn't need an ip on any non-management interfaces. Thus, the default gateway for devices in VLANs 10 and 20 (and 1) should be the relevant address of the core switch.</p>

<p>With this setup, the VoIP devices need to know to use VLAN 20. This can be via direct configuration, maybe DHCP(???), or CDP/LLDP<sup>[1]</sup>.</p>

<p><sup>[1] Disable ""Voice VLAN Security"". Enable LLDP-MED.</sup></p>
","14882"
"Dual ASA5510 with dual ISP failover","4180","","<p>I am setting up a highly redundant network and want to run my two ASA's in failover mode - each with a link to a router connected to two different ISP's.</p>

<p>The topology:</p>

<p><img src=""https://i.stack.imgur.com/bPDRg.png"" alt=""Topology""></p>

<p>My two 2911's are running BGP to the ISPs, and the ASAs are configured in active/passive failover mode. </p>

<p>But how do I configure the links from the ASAs to the routers? They are on 2 different subnets at the moment.</p>
","<p>Assuming a single context active/passive failover configuration with the ASAs connecting to the 2911s on unique subnets, you could trunk the links using two subinterfaces and vlan tagging.  But the <strong>hack</strong> is to not have both subinterfaces active at the same time on a single ASA.  On the ASA on the left assuming it's active, the first subint would be alive and the second down.  After a failover event, the ASA on the right becomes active, and the first subint goes down and the second subint comes up.</p>

<blockquote>
  <p>Ideally, the ASAs share a common subnet with the LAN side of the
  2911s precluding this hack; a L2 switch can sit between the ASAs and provide connectivity
  from any ASA to any 2911.</p>
</blockquote>

<hr>

<p><em>Only the relevant subinterfaces' config shown.</em></p>

<p><strong>ASA</strong></p>

<pre>
interface GigabitEthernet0/0
 no nameif
 no security-level
 no ip address
!
interface GigabitEthernet0/0.10
 vlan 10
 nameif Outside-ISP1
 security-level 0
 ip address 1.1.1.254 255.255.255.0
!
interface GigabitEthernet0/0.11
 vlan 11
 nameif Outside-ISP2
 security-level 0
 ip address 2.1.1.254 255.255.255.0

route Outside-ISP1 0.0.0.0 0.0.0.0 1.1.1.1 1
route Outside-ISP2 0.0.0.0 0.0.0.0 2.1.1.2 1
</pre>

<p><strong>2911-ISP1</strong></p>

<pre>
interface GigabitEthernet0/1
 description LAN
 no ip address
 duplex auto
 speed auto
!
interface GigabitEthernet0/1.10
 description LAN-ISP1
 encapsulation dot1Q 10
 ip vrf forwarding vpn
 ip address 1.1.1.1 255.255.255.0
!
interface GigabitEthernet0/1.11
 description LAN-ISP2
 encapsulation dot1Q 11
 ip address 2.1.1.1 255.255.255.0
 shutdown
</pre>

<p><strong>2911-ISP2</strong></p>

<pre>
interface GigabitEthernet0/1
 description LAN
 no ip address
 duplex auto
 speed auto
!
interface GigabitEthernet0/1.10
 description LAN-ISP1
 encapsulation dot1Q 10
 ip address 1.1.1.2 255.255.255.0
 shutdown
!
interface GigabitEthernet0/1.11
 description LAN-ISP2
 encapsulation dot1Q 11
 ip address 2.1.1.2 255.255.255.0
</pre>
","10564"
"Switching to multiple context mode on a Cisco ASA 5585-X; what happens to running config?","4180","","<p>I might need to implement a change where an existing in production ASA 5585-X pair (single fail-over) would need to transition to multiple context mode to allow the addition of a new context.</p>

<p>For what I understand the running-config gets split into a system context config and an admin context config. I then can create a new context to do the work that I need done.</p>

<p>What i'm unsure about is if there will need to be other config changes needed to transition into a multiple context mode? Since this ASA pair is in production I was hoping for a direct migration to multiple context mode.</p>

<p>Side question: Would it be possible to do this migration in stages on the ASA pair to avoid needing to reboot both at the same time?</p>
","<blockquote>
  <p>What i'm unsure about is if there will need to be other config changes needed to transition into a multiple context mode? Since this ASA pair is in production I was hoping for a direct migration to multiple context mode.</p>
</blockquote>

<h3>Config summary</h3>

<p>I have made the transition from single context to multiple context mode several times on running firewall pairs.  You are correct that multiple context mode creates the following contexts by default:</p>

<ul>
<li>system context</li>
<li>admin context</li>
</ul>

<p>After you configure <code>mode multiple</code> in single-context mode, the running configuration is saved as <code>old_running.cfg</code> on the flash disk (ref <a href=""http://www.cisco.com/c/en/us/td/docs/security/asa/asa70/configuration/guide/config/contexts.html#wp1081764"" rel=""nofollow noreferrer"">this CCO doc</a>).</p>

<h3>Features / Licensing:</h3>

<p>If you can't test the exact changes on the same model of ASA ahead of time, the safest thing to do is asking for a maintenance window; <a href=""http://www.cisco.com/c/en/us/td/docs/security/asa/asa90/configuration/guide/asa_90_cli_config/ha_contexts.html#wp1382237"" rel=""nofollow noreferrer"">feature support changes</a> when you go into multiple context mode.</p>

<p>Also, depending on how many contexts you create, you may run into <a href=""http://www.cisco.com/c/en/us/td/docs/security/asa/asa90/configuration/guide/asa_90_cli_config/ha_contexts.html#wp1188797"" rel=""nofollow noreferrer"">licensing issues</a>.  I had to convert a <a href=""https://networkengineering.stackexchange.com/q/2257/775"">single layer2 firewall into multiple contexts</a> (per-Vlan firewalls); this meant buying another 10-context license from Cisco because you don't get many licenses by default.  Also, vlan mapping was a big issue to work around... ymmv.</p>

<blockquote>
  <p>Side question: Would it be possible to do this migration in stages on the ASA pair to avoid needing to reboot both at the same time?</p>
</blockquote>

<h3>Breaking a redundant pair</h3>

<p>Yes, but as Ricky said you should just take half the pair down.  Disconnect uplinks from the standby, and remove the redundancy config; then, migrate the standby unit first.  When the standby comes up in multiple context mode, switch to the system context (<code>changeto system</code>) and:</p>

<ul>
<li>create a new context in system context config mode: <code>context FOO</code></li>
<li>assign a dedicated config location: <code>config-url disk0:FOO.cfg</code></li>
<li>assign interfaces to the context: i.e. <code>allocate GigabitEthernet0/1</code></li>
</ul>

<p>Now <code>changeto context FOO</code> to start configuring.  It is best to be on the console when you migrate.  If interface names don't change between single and multiple context mode, you can copy / paste the config directly into the new context... be aware that some things (i.e. ssh timeout settings) go into the admin context and still others in the system context.  It's not hard to work out after you get started... context-sensitive <code>?</code> help alerts you to which pieces need to be in a given context.</p>

<p>After you have the former standby turned up, you cut services over to it and migrate the former primary.  Redundancy still works in multiple context mode, but you <em>must</em> configure the state synchronization link(s) in the system context.</p>
","6528"
"Broadcasting wifi packets without a network","4170","","<p>I have a question about Wifi, I couldn't find the answer anywhere.</p>

<p>Is it possible to send a packet over wifi <strong>without having joined any kind of network (ad-hoc or not)?</strong></p>

<p>I would like to be able to send packets in the air without joining a network. Another device in monitor mode would be able to recognize which packets it should treat. I know wifi may not be the best way to do this, just wanted to know how it works technically.</p>

<p>Indeed, there must be some kind of packets sent during wireless network discovery? How are the various SSIDs transferred over network without a connection being made? What kind of packets are sent to discover networks over wifi?</p>

<p>If someone could just point me in the direction of some documentation about this, I couldn't find it.</p>

<p>Thanks a lot!</p>
","<p>The short answer is yes, it is not only possible, but happens all the time.  Examples of this are CTS-to-self, beacons (sent by APs), probe requests, probe responses and a number of other management types of frames.</p>

<p>However, it seems that isn't exactly what you mean and are looking for a way to transmit data from one device to another without any sort of established relationship.  The only software I know of that transmits data in this fashion are tools used when penetration testing wireless security.</p>

<p>Generally, these work by replaying data captures back into the air.  Instead of replaying captured traffic, you could craft your own 802.11 frames into a ""capture"" file and replay any data you wanted.  Your second station in monitor mode could then capture the traffic out of the air.</p>

<p>Do keep in mind that this would be a very rudimentary form of wireless communication and  does not provide any mechanism for retries/retransmissions (recovery from collisions or other interference) or a means of encryption (unless you encrypt the data before creating your frames).</p>
","3366"
"PPPoE - How does it reach the Radius Server?","4166","","<p>Hi guys I have a couple of questions related to PPPoE.</p>

<p>When an ISP provides a service and they use a Radius Server for Authentication how does the client router know where to send the Authentication request?</p>

<p>For example I am of the understanding that when the router is turned on at some point it will send a PPPoE Active Discovery Initiation (PADI) packet, according to this page.
<a href=""http://whatismyipaddress.com/ppp-pppoe"" rel=""nofollow"">http://whatismyipaddress.com/ppp-pppoe</a></p>

<p>How does the router know the address of the Radius server to send the packet to? Does the packet simply hop from gateway to gateway broadcasting the packet until it hits a Radius server?</p>

<p>Secondly whilst using an active internet connection, is it possible to say Authenticate through another PPPoE server outside of the current network so that you can receieve a different public IP? or is the only way to use another network, is to use a VPN.</p>

<p>Apologies if these questions are a bit moronic, I'm just trying to wrap my head around this.</p>
","<p>For your home router to establish a WAN connection to your ISP, a few things specific to PPP must happen first.
You may also have to do some research on LCP and NCP.</p>

<p>Check this link below, it may have the answer you are looking for (see the excerpt on PPPoE below):
<a href=""https://infoproducts.alcatel-lucent.com/html/0_add-h-f/93-0098-09-01/7750_SR_OS_Triple_Play_Guide/concepts_PPPoE.html"" rel=""nofollow"">https://infoproducts.alcatel-lucent.com/html/0_add-h-f/93-0098-09-01/7750_SR_OS_Triple_Play_Guide/concepts_PPPoE.html</a></p>

<p>PPPoE has two phases, the discovery phase and the session phase.•<br>
Discovery: The client identifies the available servers. 
To complete the phase the client and server must communicate a session-id. During the discovery phase all packets are delivered to the PPPoE control plane (CPM or MDA). The IOM identifies these packets by their ethertype (0x8863). </p>

<p>→   PPPoE Active Discovery Initiation (PADI). This broadcast packet is used by the client to search for an active server (Access Concentrator) providing access to a service. </p>

<p>→   PPPoE Active Discovery Offer (PADO): If the access server can provide the service it should respond with a unicast PADO to signal the client it may request connectivity. Multiple servers may respond and the client may choose a server to connect to. </p>

<p>→   PPPoE Active Discovery Request (PADR): After the client receives a PADO it will use this unicast packet to connect to a server and request service. </p>

<p>→   PPPoE Active Discovery Session-confirmation (PADS) A server may respond to the client with this unicast packet to establish the session and provide the session-id. Once the PADS was provided the PPP phase begins.</p>

<p>•   Session: Once the session ID is established connectivity is available for the duration of the session, using ethertype 0x8864. Either client or server can terminate a session.</p>

<p>During the life of the session the packets may be uniquely identified by the client’s MAC address and session-id. The session can terminate either by PADT sent by the client or server or by an LCP Terminate-Request packet.</p>
","12761"
"Generate list of subnets on switch using SNMP?","4166","","<p>Is anyone familiar with an approach to generate a list of subnets on a particular switch (let's pick a more popular one - Cisco) using SNMP? How about a list of VLANs? If so, can you point me to the MIBs / OIDs involved? (network newbie here)</p>
","<h2> <strong>Interfaces/IP Addressing:</strong></h2>

<p>If you're looking to poll a device's IP address, subnet mask and corresponding interface you can use the following OIDs from the <a href=""http://www.net-snmp.org/docs/mibs/ip.html"">IP-MIB</a> and <a href=""http://www.net-snmp.org/docs/mibs/interfaces.html"">IF-MIB</a> MIBs:</p>

<ul>
<li><p><code>.1.3.6.1.2.1.4.20.1.1</code> - The IP address can be found at this OID</p>

<pre><code>~]$ snmptranslate .1.3.6.1.2.1.4.20.1.1
IP-MIB::ipAdEntAddr

~]$ snmpwalk -v2c -c cisco 10.30.46.1 .1.3.6.1.2.1.4.20.1.1
IP-MIB::ipAdEntAddr.10.30.46.1 = IpAddress: 10.30.46.1
IP-MIB::ipAdEntAddr.25.255.25.254 = IpAddress: 25.255.25.254
IP-MIB::ipAdEntAddr.55.44.33.22 = IpAddress: 55.44.33.22
IP-MIB::ipAdEntAddr.172.31.10.10 = IpAddress: 172.31.10.10
</code></pre>

<p><br></p></li>
<li><p><code>.1.3.6.1.2.1.4.20.1.3</code> - The subnet mask cane be found at this OID</p>

<pre><code>~]$ snmptranslate .1.3.6.1.2.1.4.20.1.3
IP-MIB::ipAdEntNetMask

~]$ snmpwalk -v2c -c cisco 10.30.46.1 .1.3.6.1.2.1.4.20.1.3
IP-MIB::ipAdEntNetMask.10.30.46.1 = IpAddress: 255.255.255.0
IP-MIB::ipAdEntNetMask.25.255.25.254 = IpAddress: 255.255.255.0
IP-MIB::ipAdEntNetMask.55.44.33.22 = IpAddress: 255.255.255.0
IP-MIB::ipAdEntNetMask.172.31.10.10 = IpAddress: 255.255.255.0
</code></pre>

<p><br></p></li>
<li><p><code>.1.3.6.1.2.1.4.20.1.2</code> - The interface index (<a href=""http://www.net-snmp.org/docs/mibs/interfaces.html#ifTable"">ifTable Indexes</a>) are unique integers for each interface.</p>

<pre><code>~]$ snmptranslate .1.3.6.1.2.1.4.20.1.2
IP-MIB::ipAdEntIfIndex

~]$ snmpwalk -v2c -c cisco 10.30.46.1 .1.3.6.1.2.1.4.20.1.2
IP-MIB::ipAdEntIfIndex.10.30.46.1 = INTEGER: 1
IP-MIB::ipAdEntIfIndex.25.255.25.254 = INTEGER: 5
IP-MIB::ipAdEntIfIndex.55.44.33.22 = INTEGER: 6
IP-MIB::ipAdEntIfIndex.172.31.10.10 = INTEGER: 7
</code></pre>

<p><br></p></li>
<li><p><code>.1.3.6.1.2.1.2.2.1.2</code> - The interface friendly name can be found at this OID and the ifTable index is appended (eg. <code>...2.1.2.[INDEX]</code>) for each interface.</p>

<pre><code>~]$ snmptranslate .1.3.6.1.2.1.2.2.1.2
IF-MIB::ifDescr

~]$ snmpwalk -v2c -c cisco 10.30.46.1 .1.3.6.1.2.1.2.2.1.2
IF-MIB::ifDescr.1 = STRING: FastEthernet0/0
IF-MIB::ifDescr.2 = STRING: FastEthernet0/1
IF-MIB::ifDescr.4 = STRING: Null0
IF-MIB::ifDescr.5 = STRING: Loopback0
IF-MIB::ifDescr.6 = STRING: Tunnel10
IF-MIB::ifDescr.7 = STRING: Dialer1
IF-MIB::ifDescr.8 = STRING: Virtual-Access1
</code></pre></li>
</ul>

<p>You can walk these OIDs manually, script something out in the language of your choice, or use much smarter programs/scripts similar to what's mentioned in Tim Peck's answer. </p>

<p>Here's a quick (and dirty) shell example:</p>

<pre><code>#!/bin/bash
# duct taped by one.time
# Basic interface information collector

##
# Set usage var and getoptions
usage=""Usage: interface-info.sh -H &lt;IP Address&gt; -C &lt;snmp community string&gt;

OPTIONS:
  -H Hostname          set IP address or hostname
  -h Help              prints usage options

SNMPv2 OPTIONS:
  -C Community         set SNMPv2 community string
""

while getopts H:C:h option;
do
        case $option in
                H) ipaddress=$OPTARG;;
                C) community=$OPTARG;;
                h) echo ""$usage""
                exit $invalid_result;;
        esac
done

##
# Prevent blank argvars
if [[ -z $ipaddress || -z $community ]]; then
  echo ""$usage""
  exit 0
fi

## 
# Set field separator to new line
IFS=$'\n'

##
# Store our IP-MIB info in arrays
ipAdEntAddr=( $(snmpbulkwalk -v2c -c $community  $ipaddress .1.3.6.1.2.1.4.20.1.1 | awk -F "": "" '{print $2}') )
ipAdEntNetMask=( $(snmpbulkwalk -v2c -c $community $ipaddress .1.3.6.1.2.1.4.20.1.3 | awk -F "": "" '{print $2}') )
ipAdEntIfIndex=( $(snmpbulkwalk -v2c -c $community $ipaddress .1.3.6.1.2.1.4.20.1.2 | awk -F "": "" '{print $2}') )

for ((i=0; i&lt;${#ipAdEntAddr[@]}; i++)); do
  ifDescr[$i]=$(snmpwalk -v2c -c $community $ipaddress .1.3.6.1.2.1.2.2.1.2.${ipAdEntIfIndex[$i]} | awk -F "": "" '{print $2}')
  echo ""${ifDescr[$i]}: ${ipAdEntAddr[$i]} ${ipAdEntNetMask[$i]}""
done
</code></pre>

<p><strong>Example:</strong></p>

<pre><code>~]$ ./interface-info.sh -H 10.30.46.1 -C cisco
FastEthernet0/0: 10.30.46.1 255.255.255.0
Loopback0: 25.255.25.254 255.255.255.0
Tunnel10: 55.44.33.22 255.255.255.0
Dialer1: 172.31.10.10 255.255.255.0
</code></pre>

<p><br></p>

<h2><strong>VLANs:</strong></h2>

<p>If you're looking for the VLAN IDs and VLAN names you can use the following OID:</p>

<ul>
<li><p><code>.1.3.6.1.4.1.9.9.46.1.3.1.1.4.1</code> The <a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?local=en&amp;translate=Translate&amp;objectInput=1.3.6.1.4.1.9.9.46.1.3.1.1.4"">vtpVlanName</a> can be found (on Cisco devices) at this OID and the VLAN-ID can be found appended, e.g.: <code>...1.4.1.[VLAN-ID]</code> (similar to the ifIndex and ifDescr example above). </p>

<pre><code>~]$ snmptranslate  .1.3.6.1.4.1.9.9.46.1.3.1.1.4.1
SNMPv2-SMI::enterprises.9.9.46.1.3.1.1.4.1

~]$ snmpwalk -v2c -c cisco 192.168.0.8 SNMPv2-SMI::enterprises.9.9.46.1.3.1.1.4.1
SNMPv2-SMI::enterprises.9.9.46.1.3.1.1.4.1.1 = STRING: ""default""
SNMPv2-SMI::enterprises.9.9.46.1.3.1.1.4.1.10 = STRING: ""VLAN0010""
SNMPv2-SMI::enterprises.9.9.46.1.3.1.1.4.1.21 = STRING: ""VLAN0021""
SNMPv2-SMI::enterprises.9.9.46.1.3.1.1.4.1.100 = STRING: ""VLAN0100""
SNMPv2-SMI::enterprises.9.9.46.1.3.1.1.4.1.344 = STRING: ""VLAN0344""
SNMPv2-SMI::enterprises.9.9.46.1.3.1.1.4.1.456 = STRING: ""iSCSI-TRAFFIC""
SNMPv2-SMI::enterprises.9.9.46.1.3.1.1.4.1.1002 = STRING: ""fddi-default""
SNMPv2-SMI::enterprises.9.9.46.1.3.1.1.4.1.1003 = STRING: ""token-ring-default""
SNMPv2-SMI::enterprises.9.9.46.1.3.1.1.4.1.1004 = STRING: ""fddinet-default""
SNMPv2-SMI::enterprises.9.9.46.1.3.1.1.4.1.1005 = STRING: ""trnet-default""
</code></pre>

<p><br></p></li>
</ul>

<p><strong>Manual example of scraping the VLAN IDs:</strong></p>

<pre><code>    ~]$ snmpbulkwalk -v2c -c cisco 192.168.0.8 1.3.6.1.4.1.9.9.46.1.3.1.1.4 | sed -e 's/.*4.1.\(.*\) =.*/\1/'
    1
    10
    21
    100
    344
    456
    1002
    1003
    1004
    1005
</code></pre>
","7992"
"Cisco IOS: Show ip route output order","4159","","<p>I am runing some BGP tests through the lab before rolling them out in production (thus, any IP addresses or AS numbers etc used here are done so in a completely fictitious manner).</p>

<p>Something that has always bugged me is the output on Cisco IOS of <code>show ip route</code>. What order are these routes in, it isn't numerical, 1, 2, 58 ,10! They aren't grouped by protocol , or metric either.</p>

<pre><code>br2#show ip route
Codes: C - connected, S - static, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area 
       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
       E1 - OSPF external type 1, E2 - OSPF external type 2
       i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2
       ia - IS-IS inter area, * - candidate default, U - per-user static route
       o - ODR, P - periodic downloaded static route

Gateway of last resort is not set

     1.0.0.0/32 is subnetted, 4 subnets
B       1.1.1.1 [200/0] via 10.10.0.1, 00:20:24
B       1.1.0.1 [200/0] via 10.10.0.1, 00:20:24
B       1.1.0.2 [20/0] via 10.20.0.1, 00:15:03
B       1.1.2.1 [200/0] via 10.10.0.1, 00:20:24
     2.0.0.0/32 is subnetted, 4 subnets
B       2.1.2.1 [20/0] via 10.100.0.1, 07:41:53
B       2.1.3.1 [20/0] via 10.200.0.1, 07:41:53
B       2.1.1.1 [20/0] via 10.100.0.1, 07:41:53
B       2.1.4.1 [20/0] via 10.200.0.1, 07:41:53
     58.0.0.0/8 is variably subnetted, 3 subnets, 2 masks
B       58.58.58.2/32 [200/0] via 10.65.12.2, 00:20:25
S       58.58.58.0/24 is directly connected, Null0
B       58.58.58.1/32 [200/0] via 10.65.11.2, 00:20:26
     10.0.0.0/8 is variably subnetted, 15 subnets, 3 masks
i L2    10.10.0.0/30 [115/10] via 10.65.0.1, FastEthernet0/0
C       10.0.0.2/32 is directly connected, Loopback0
i L2    10.0.1.2/32 [115/30] via 10.65.0.1, FastEthernet0/0
i L2    10.0.0.1/32 [115/20] via 10.65.0.1, FastEthernet0/0
C       10.20.0.0/30 is directly connected, FastEthernet1/0
i L2    10.65.11.0/30 [115/20] via 10.65.0.1, FastEthernet0/0
i L2    10.65.13.0/30 [115/20] via 10.65.0.1, FastEthernet0/0
i L2    10.65.12.0/30 [115/20] via 10.65.0.1, FastEthernet0/0
i L2    10.65.1.0/28 [115/20] via 10.65.0.1, FastEthernet0/0
B       10.65.12.12/32 [200/0] via 10.65.12.2, 00:20:26
B       10.65.11.11/32 [200/0] via 10.65.11.2, 00:20:26
C       10.65.0.0/28 is directly connected, FastEthernet0/0
C       10.100.0.0/30 is directly connected, FastEthernet2/0.100
C       10.200.0.0/30 is directly connected, FastEthernet2/0.200
B       10.10.200.0/30 [20/0] via 10.200.0.1, 07:41:57
     60.0.0.0/32 is subnetted, 1 subnets
B       60.0.0.60 [200/0] via 10.65.13.2, 00:20:27
</code></pre>

<p>Even within the class-full boundaries or integer boundaries of prefix groups for example, <code>10.65.0.0/28</code> comes after <code>10.65.11.11/32</code>.</p>
","<p>They are in order of specificity; The most specific (longest network mask) is first, and the least specific (shortest netmask) is last. If the network is variably subnetted, then they are grouped with the least-specific of the various netmasks, and ordered most-specific-first in each of the groupings.</p>

<p><strong>update</strong></p>

<p>It seems the output of <code>show ip route</code> is in the order of the internal tree structure, rather than an explicitly ordered (in the sense of route selection order) listing.</p>

<p>For example, here's an old post from the Cisco forums; <a href=""https://supportforums.cisco.com/thread/344940"">https://supportforums.cisco.com/thread/344940</a> regarding IOS 12.</p>

<p>(If anyone can write a more authoritative answer, please leave me a comment and I'll delete my answer.)</p>
","2663"
"How to C3850 activate license to ipservices","4154","","<p>We have Cisco C3850 running <code>ipbase</code> license recently we decided to run <code>BGP</code> protocol for that we need <code>ipservices</code> license. </p>

<p>Question: Do i need to buy new license or i have already that i just need to activate using <code>right-to-use</code>?</p>

<pre><code>C3850#show switch
Switch/Stack Mac Address : 6c99.8962.2801 - Local Mac Address
Mac persistency wait time: Indefinite
                                             H/W   Current
Switch#   Role    Mac Address     Priority Version  State
------------------------------------------------------------
*1       Active   6c99.8962.2801     15     M0      Ready
 2       Standby  c414.3c9b.4190     1      M0      Ready
</code></pre>

<p>License:</p>

<pre><code>C3850#show license right-to-use
 Slot#  License name   Type     Count   Period left
----------------------------------------------------------
 1      ipbase       permanent     N/A   Lifetime

License Level on Reboot: ipbase


 Slot#  License name   Type     Count   Period left
----------------------------------------------------------
 2      ipbase       permanent     N/A   Lifetime

License Level on Reboot: ipbase
</code></pre>

<p>Summary:</p>

<pre><code>C3850#show license right-to-use usage
 Slot#  License Name     Type     usage-duration(y:m:d)  In-Use  EULA
-----------------------------------------------------------------------
 1      ipservices     permanent    0 :0 :0                no    no
 1      ipservices     evaluation   0 :0 :0                no    no
 1      ipbase         permanent    2 :0 :14               yes   yes
 1      ipbase         evaluation   0 :0 :0                no    no
 1      lanbase        permanent    0 :0 :0                no    no
 1      apcount        evaluation   0 :0 :0                no    no
 1      apcount        base         0 :0 :0                no    no
 1      apcount        adder        0 :0 :0                no    no

 Slot#  License Name     Type     usage-duration(y:m:d)  In-Use  EULA
-----------------------------------------------------------------------
 2      ipservices     permanent    0 :0 :0                no    no
 2      ipservices     evaluation   0 :0 :0                no    no
 2      ipbase         permanent    2 :0 :14               yes   yes
 2      ipbase         evaluation   0 :0 :0                no    no
 2      lanbase        permanent    0 :0 :0                no    no
 2      apcount        evaluation   0 :0 :0                no    no
 2      apcount        base         0 :0 :0                no    no
 2      apcount        adder        0 :0 :0                no    no
</code></pre>

<p>Can't i just activate using following command?</p>

<pre><code>C3850#license right-to-use activate ?
  apcount     configure the AP-count licenses on the switch
  ipbase      activate ipbase license on the switch
  ipservices  activate Ipservices license on the switch
  lanbase     activate lanbase license on the switch
</code></pre>

<h1>Update:</h1>

<p>In following command its showing this, Does that means i already have license and i just need to Activate it? Look at <code>Index 1</code> what that means? </p>

<pre><code>C3850#show license right-to-use detail
Index 1:  License Name: ipservices
           Period left: Lifetime
           License Type: permanent
           License State: Not Activated
           License Count: Non-Counted
           License Location: Slot 1
Index 2:  License Name: ipservices
           Period left: 90
           License Type: evaluation
           License State: Not Activated
           License Count: Non-Counted
           License Location: Slot 1
Index 3:  License Name: ipbase
           Period left: Lifetime
           License Type: permanent
           License State: Active, In use
           License Count: Non-Counted
           License Location: Slot 1
Index 4:  License Name: ipbase
           Period left: 90
           License Type: evaluation
           License State: Not Activated
           License Count: Non-Counted
           License Location: Slot 1
Index 5:  License Name: lanbase
           Period left: Lifetime
           License Type: permanent
           License State: Not Activated
           License Count: Non-Counted
           License Location: Slot 1
</code></pre>
","<blockquote>
  <p>From <a href=""http://www.cisco.com/c/en/us/td/docs/switches/lan/catalyst3850/software/release/3se/system_management/configuration_guide/b_sm_3se_3850_cg/b_sm_3se_3850_cg_chapter_0100.html"" rel=""nofollow"">This Cisco Config Guide</a>:</p>
</blockquote>

<pre><code>Permanent licenses—Purchased with a specific feature set with no expiration date.
Evaluation licenses—Pre-installed on the switch and is valid for only a 90 day in-use period.
</code></pre>

<p>You can run <code>license right-to-use activate ip-services all accepteula</code> to activate ipservices, and then restart the switch.</p>

<p>In general if you activate an image you don't have a license for it will warn you that you must purchase or deactivate in 90 days, etc.</p>
","29743"
"Difference between NAT overload and regular NAT?","4147","","<p>I'm having a bit of trouble grasping this, but it is probably me being a moron.</p>

<p>I've recently had to familiarise myself with <code>NAT overload</code> for some network changes we have planned at work. Diving in to it, I can honestly say that I see no difference between NAT overload and standard <code>NAT</code> though? </p>

<p>It shows a pretty diagram on <a href=""http://www.orbit-computer-solutions.com/NAT-Overload.php"" rel=""nofollow"">orbit-computer-solutions.com</a> that it gets internal IPs, sends them to a router, which then uses NAT overload to send it off in to the web. But, isn't this the regular functionality of NAT in a router? </p>

<p>Is there any key difference between the functionality of NAT overload and regular NAT through a router? I've seen a few things about PAT, but I thought that PAT fell under regular NAT too?</p>
","<p>Strictly speaking, when performing (pure) NAT, only IP addresses are translated, and every internal IP address has to be translated to a different external IP address. This can be a static one-on-one mapping in the case of <strong><em>static NAT</em></strong>, or a dynamic mapping with a pool of public addresses.</p>

<p>With <strong><em>dynamic NAT</em></strong>, the router selects one IP address from the NAT pool when an internal hosts wants to connect to the internet. When a second host sends traffic to the internet, a second external IP from the pool is used. This works just fine, but the number of hosts that can use the internet is limited by the number of external addresses available in the NAT pool. When the 11th host behind a NAT router with a pool of 10 addresses wants to set up a connection, the connection will be refused (until one of the previous mapping times out).</p>

<p><strong><em>NAT overload</em></strong> overcomes this limitation by allowing internal hosts to share external IP addresses. To keep the connections apart, in addition to swapping the internal IP for an external one, the router can change the source port of the outgoing traffic.</p>

<p>Because NAT overload is used most often, it is sometimes considered the default and just called NAT. Other terms include <strong><em>Port Address Translation</em></strong> (PAT) and <strong><em>Network Address Port Translation</em></strong> (NAPT). In Linux iptables, it is called masquerading.</p>
","18421"
"REP (Resilient Ethernet Protocol - Cisco Proprietary) configuration","4144","","<p>I've the challenge to configure REP on a ring with 2 4500-X and 2 4506 as you can see on topologie picture. I was able to configure a basic REP ring but don't know how to define the block port as on picture. With my configuration the blocked port it's the 4500x-1 - Te1/16.</p>

<p>Here the configuration applied. </p>

<pre><code>! ### On every Switch ###
! Configure REP on a admin vlan
!
conf t
rep admin vlan 1100
!
! ### 4500x-1 ###
!
! # Port to  4500x-2
interface TenGigabitEthernet1/1
! the port must be on trunk or PVLAN promiscuous trunk port. 
rep segment 1 edge
!
! # Port to  4506-1
interface TenGigabitEthernet1/16 
rep segment 1 edge primary 
!
!
! ### 4500x-2 ###
!
! # Port to  4500x-1
interface TenGigabitEthernet1/1 
rep segment 1 
!
! # Port to  4506-2
interface TenGigabitEthernet1/16 
no rep segment 1 edge primary 
rep segment 1 edge
!
!
! ### 4506-1 ###
!
! # Port to  4500x-1
interface TenGigabitEthernet1/1 
rep segment 1 
!
! # Port to  4506-2
interface TenGigabitEthernet1/2 
rep segment 1
!
!
! ### 4506-2 ###
!
! # Port to  4500x-2
interface TenGigabitEthernet1/1 
rep segment 1 
!
! # Port to  4506-1
interface TenGigabitEthernet1/2 
rep segment 1
!
</code></pre>

<p><img src=""https://i.stack.imgur.com/NV7M2.png"" alt=""Topologie""></p>

<p>What I'm looking is a solution for the describe problem - How to define certain port as blocked ? What is the best practice on REP implementation.</p>

<p>I read the official documentation and I'm still confuse on. If someone can share with me some document (other than the <a href=""http://www.cisco.com/en/US/docs/switches/lan/catalyst4500/12.2/15.02SG/configuration/guide/swrep.html"" rel=""nofollow noreferrer"">official</a>) to better understanding, I will be grateful.</p>
","<p>I found the solution to my issue, read more carefully the cisco doc, take some notes and test. It's working now. </p>

<p>It's ring topology. We should configure on the same switch the ports, one 'edge' and the other 'edge primary' . In my example, I configure 4500x-1 the te1/1 as 'edge' and te1/16 'edge primary'. </p>

<p>To achieve my goal, defining the alternate (block) port.
I found two ways,<br>
- By the command - <code>rep block port id &lt;port-id&gt; vlan all</code> to be configured under primary edge port. 
and the port id can be found here on interface to be block : <code>show interface &lt;interface-id&gt; rep</code> </p>

<p>The other way is to configure under the port to be preferred as alternate entering under the interface configuration the following command <code>rep segment 1 preferred</code></p>

<p><a href=""https://8config.com/template/rJuIA4xpl"" rel=""nofollow noreferrer"">Configuration Generator Link</a></p>

<pre><code>! ### On every Switch ###
! Configure REP on a admin vlan
!
conf t
rep admin vlan 1XXX
!
! ### 4500x-1 ###
!
! # Port to  4500x-2
interface TenGigabitEthernet1/1
! the port must be on trunk or PVLAN promiscuous trunk port. 
rep segment 1 edge
!
! # Port to  4506-1
interface TenGigabitEthernet1/16 
rep segment 1 edge primary
rep block port 00817CADXXXXXXXX vlan Y,Z
rep preempt delay 15
!
!
! ### 4500x-2 ###
!
! # Port to  4500x-1
interface TenGigabitEthernet1/1 
rep segment 1
!
! # Port to  4506-2
interface TenGigabitEthernet1/16 
rep segment 1 edge
!
!
! ### 4506-1 ###
!
! # Port to  4500x-1
interface TenGigabitEthernet1/1 
rep segment 1 
!
! # Port to  4506-2
interface TenGigabitEthernet1/2 
rep segment 1
!
!
! ### 4506-2 ###
!
! # Port to  4500x-2
interface TenGigabitEthernet1/1 
rep segment 1 
!
! # Port to  4506-1
interface TenGigabitEthernet1/2 
rep segment 1
!
</code></pre>

<p>EDIT : Corrected, the previous config isn't right and I had an working but instable configuration. </p>
","2688"
"PPPoA ADSL Configuration with external modem on Cisco 891","4143","","<p><strong>Context</strong></p>

<p>We use Cisco 891 routers as CPE for several client sites. They are all running IOS 15.</p>

<pre><code>Cisco IOS Software, C890 Software (C890-UNIVERSALK9-M), Version 15.0(1)M8, RELEASE SOFTWARE (fc1)
</code></pre>

<p>The majority of these sites terminate against an external ADSL2 modem which we put into bridge mode (I can't recall the exact bridge mode, but basically the modem just passes everything through).</p>

<p>We rely on our Cisco 891 devices for PPP session termination, NAT, etc... And I've come up with the below config, we've been successfully for some time with our main ISP, its been working fine:</p>

<pre><code>interface GigabitEthernet0
 description WAN PPPoE ADSL2+
 bandwidth 1024
 bandwidth receive 20480
 no ip address
 ip nat outside
 ip virtual-reassembly
 duplex auto
 speed auto
 pppoe-client dial-pool-number 1

interface Dialer0
 description ADSL2+ Dialer Interface
 bandwidth 1024
 bandwidth receive 20480
 ip address negotiated
 no ip redirects
 no ip proxy-arp
 ip mtu 1492
 ip nat outside
 ip virtual-reassembly
 encapsulation ppp
 ip tcp adjust-mss 1452
 dialer pool 1
 dialer-group 1
 ppp authentication chap pap callin
 ppp chap hostname XXX@isp.com
 ppp chap password 0 XXX
 ppp pap sent-username XXX@isp.com password 0 XXX
 no cdp enable
</code></pre>

<p>However, in the last few days our ISP has made some changes which has affected a few customer sites, and they've said we need to ensure that all CPE are using <strong>""PPPoA and VC Mux encapsulation""</strong></p>

<p><strong>Question</strong></p>

<p>I've been looking at some existing Cisco CPE and cannot figure out a way to ensure we are using PPPoA, or a way to force that if not. It looks like, right now, that we're using PPPoE:</p>

<pre><code>PPPoE vaccess, cloned from Dialer0
</code></pre>

<p>All config examples I've found are using ATM interface which allows specification of PVC, encapsulation settings etc...</p>

<p>I can understand that things like PVC settings are modem-related and so would not be in the router config as our routers do not contain the modem functionality. But, can I assume that once the traffic has passed the modem to the WAN interface on the router, the ATM cells have been converted to Ethernet packets, and is this why there is no way (that I can see) to configure PPPoA instead of PPPoE?</p>
","<p>Technically, you're doing PPPoEoA.</p>

<p>The VC Mux part will have to be set on the modem, as that's the only thing that has access to the ATM layer.  If you had a dsl interface in the router, you'd do:</p>

<pre><code>blue-gw#show run int atm0.1
Building configuration...

Current configuration : 131 bytes
!
interface ATM0.1 point-to-point
 bandwidth 6000
 pvc dsl 8/35 
  encapsulation aal5mux ppp dialer
  dialer pool-member 1
 !
end
</code></pre>

<p>Other devices will vary.</p>
","786"
"What do TCP/UDP add to ""raw ip""?","4139","","<p>I know that both TCP and UDP are built on top of IP, and I know the differences between TCP &amp; UDP, but I'm confused about what exactly ""raw ip"" is. Would it be fair to say that TCP &amp; UDP both implement IP, but that IP in and of itself isn't capable of transferring data? Or is IP some very low level form of communication, which is further abstracted by TCP and UDP?</p>
","<p>IP is a <a href=""http://www.practicalnetworking.net/packet-traveling/osi-model/#osi-layer-3"" rel=""noreferrer"">Layer 3</a> protocol. TCP/UDP are <a href=""http://www.practicalnetworking.net/packet-traveling/osi-model/#osi-layer-4"" rel=""noreferrer"">Layer 4</a> protocols. They each serve different purposes.</p>

<p><strong>Layer 3 is in charge of end to end delivery</strong>. Its sole function is adding whatever is necessary to a packet to get a packet from one host to another.</p>

<p><strong>Layer 4 is in charge of service-to-service delivery</strong>. Its sole function is to segregate data streams. Your computer can have multiple programs running, each which sends/receives bits on to the wire. IE: You could have multiple browser tabs running, streaming internet radio, running a download, running some <em>legal</em> torrents, using a chat application, etc. All of these receive 1s and 0s from the wire, and Layer 4 segregates each data streams to the unique application that needs them. Here is an illustration:</p>

<p><a href=""https://i.stack.imgur.com/weffJ.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/weffJ.png"" alt=""L4 segregating Data Streams""></a></p>

<p>IP is unable to deliver a packet to the correct service/application. And TCP/UDP is unable to deliver a packet from one end of the internet to the other. </p>

<p>Both TCP and IP work together to enable them both to achieve the ""end-goal"" of Internet communication.</p>

<p>Data that needs to get from one host to another is generated by the upper layers of the OSI model. </p>

<p>This data is passed down to L4 which will add the information necessary to deliver the data from service to service, like a TCP header with a Source and Destination Port. The Data and the L4 header is now referred to as a segment.</p>

<p>Then the Segment will be passed to L3 which will add the information necessary to deliver the segment from end to end, like an IP header with a Source an Destination IP address. The L3 header and the segment can now be referred to as a Packet.</p>

<p>This process is known as <a href=""http://www.practicalnetworking.net/packet-traveling/osi-model/#encap-decap"" rel=""noreferrer"">Encapsulation and De-encapsulation</a> (or sometimes decapsulation). Here is an animation of how it works:</p>

<p><a href=""https://i.stack.imgur.com/6dKkj.gif"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/6dKkj.gif"" alt=""Encapsulation and De-encapsulation, used with permission from Practical Networking.net""></a></p>

<p>If this doesn't make sense, I suggest reading more about the <a href=""http://www.practicalnetworking.net/packet-traveling/osi-model"" rel=""noreferrer"">OSI model</a>, and how each layer has different responsibilities that all work together to accomplish <a href=""http://www.practicalnetworking.net/packet-traveling/packet-traveling"" rel=""noreferrer"">moving a packet across the Internet</a>.</p>
","27836"
"How to detect loops created by unmanaged switches?","4124","","<p>Is there a way to detect unmanaged switches that are connected on access ports?</p>

<p>In a spanning tree trunking managed network I look at bpdu errors on ports which usually indicate an unmanaged switch as a PC should not sent these.</p>

<p>I also look at logs that indicate that a switch is running low on resources as a loops can overload the CPU if it's not detected.</p>

<p>Do you know of any other or better ways?</p>

<p>I am primarily interested in solutions that work with Cisco and Juniper but a vendor agnostic approach would be also welcome.</p>

<p>I am asking as access ports use two vlans (data and voice) and any frames sent through unmanaged switches lose the voice vlan tag which causes problems with the phones.</p>
","<p><strong>Preventing Unmanaged Switches and Loops:</strong></p>

<p>The best solution would be to block unmanaged switches entirely, except those that you explicitly allow. This can be done by enabling bpduguard on access ports, which would disable any port that receives a bpdu packet.</p>

<p>Example:</p>

<pre><code>CISCO: Switch(config-if)#spanning-tree bpduguard enable
JUNIPER: user@switch# set ethernet-switching-options bpdu-block interface ge-0/0/0.0 shutdown
</code></pre>

<p>If there are unmanaged switches on your network that you would like to keep but protect STP and prevent loops you could enable a feature called root guard. This would allow that port to still receive bpdu packets, but it would not forward those that try to alter STP.</p>

<p>Example:</p>

<pre><code>CISCO: Switch(config-if)# spanning-tree guard root
JUNIPER: user@switch# set protocols rstp interface ge-0/0/7 no-root-port
</code></pre>

<p>Limit the number of MAC addresses or whitelist MAC addresses on switch ports.</p>

<p>Example: </p>

<pre><code>CISCO: switch(config-if)# switchport port-security maximum 2
     Switch(config-if)# switchport port-security mac-address 0000.000.000.0000

JUNIPER: user@switch# set interface ge-0/0/1 mac-limit 10
user@switch# set interface ge–0/0/2 allowed-mac 00:00:00:00:00:00
</code></pre>

<p><strong>Detecting Unmanaged Switches:</strong></p>

<p>Method 1: View the MAC address table, if you see multiple machines connecting on a single port, that is a pretty good indication that their is a switch connected to that port.</p>

<p>Method 2: Look for ports running STP</p>

<p>Example:</p>

<pre><code>Switch# show spanning-tree vlan 1-4094 | inc STP
</code></pre>

<p>Method 3: Using Cisco Debug to see which ports are receiving bpdu's</p>

<p>Example:</p>

<pre><code>CISCO: Switch# debug spanning-tree bpdu receive
JUNIPER: user@switch&gt; show spanning-tree statistics interface
</code></pre>
","33838"
"Configure DNS Table on Sonic Wall TZ205","4112","","<p>I just installed a TZ-205 on our company network and I can not seem to find where I would add to a DNS table. On our Linksys LRT224 there is a option to add a domain name and an associated IP. Does this function even exist in the Sonic Wall? I want to be able to type in ""example.com"" and have it point that domain name at my server IP address at home. I know I can edit the hosts file but I use my server at home for development sites I have 5 of them currently on one server so to go to every employees computer and update the hosts file will be time consuming. Thanks</p>
","<p>The sonicwall can point to one of your own internal DNS servers (running on another device in your network), but it doesn't include a DNS server itself.  You can set your server up to do DNS and point the sonicwall at it, then all DHCP clients will use that server for name lookups.</p>

<p>If you have multiple websites and multiple employee workstations, it's worth it to set up your own DNS server.  It will save a lot of trouble, especially as you grow.</p>
","9499"
"What is a token in token bucket?","4104","","<p>I believe, tokens are nothing but packets, but my question is, weather these tokens are fixed size? If yes, why fixed packets? Can anyone explain the algorithm clearly with examples.
Thanks.</p>
","<p>The concept of a token bucket is generic/universal, but the implementations for QoS may use different token units to control traffic flow at a specified rate.</p>

<p>In <a href=""http://www.cisco.com/c/en/us/support/docs/quality-of-service-qos/qos-policing/19645-policevsshape.html"">Cisco traffic policing</a> (the most basic QoS token bucket technique), the token bucket size is specified in bytes (each token is one byte). For example, if you want to police traffic at a rate of 100Kbps, you could use a command like <code>police 100000 18750</code> which sets your <strong>cir</strong> (committed information rate) to 100 thousand bits per second and your <strong>bc</strong> (burst committed/token bucket size) to 18,750 bytes. Here is an example of how this token bucket works with some sample traffic (t is the elapsed time in milliseconds):</p>

<ul>
<li>Policer bucket starts full with 18,750 bytes</li>
<li>at t=0ms: 1,500 byte packet is sent leaving 17,250 bytes in bucket</li>
<li>at t=100ms: we add 1,250 bytes (tokens) to the bucket (0.1s at 100k) then transmit two 1500 byte packets that just arrived. 17250+1250-3000=15,500 bytes left in bucket</li>
<li>at t=200ms: we add 1,250 bytes (tokens) to bucket then transmit three 1500 byte packets that just arrived. 15500+1250-4500=12,250 bytes left in bucket</li>
<li>at t=300ms: we add 1,250 bytes (tokens) to bucket then transmit four 1500 byte packets that just arrived. 12250+1250-6000=7,500 bytes (tokens) left in bucket</li>
<li>at t=500ms: we add 2,500 bytes (100Kbps for 0.2seconds without traffic) then transmit six 1000 byte newly arrived packets. 7500+2500-6000=4,000 bytes</li>
<li>at t=600ms: we add 1,250 bytes (tokens) to bucket then transmit three 1500 byte fresh packets. 4000+1250-4500=750 bytes</li>
<li>at t=650ms: we add 625 bytes (tokens) and try to send a just arrived 1500 byte packet but must DROP IT because there are not enough tokens (bytes) in the bucket. 750+625=1375 bytes (not enough tokens, drop 1500 byte packet)</li>
</ul>

<p>Let me try to describe how the algorithm works. Bucket starts full when first packet arrives we take bytes from bucket. When next packet(s) arrive, we add tokens based on time since last packet(s) processed then transmit as many packets as new bucket size allows. When new packets arrive we always add tokens (bytes) (rate * seconds since last packet(s) / 8bitsperbyte) then transmit as many packets as the bucket will allow. We can NEVER fill bucket beyond the fixed size (bc / bucket size) and we can never take out more tokens to transmit packets at a given instant if the size exceeds tokens IN the bucket.</p>

<p>Another way to think of this is that you turn on a water faucet at a set rate (liters per second) and place a bucket under. You may empty the bucket into your baby pool or other cistern (consume water from token bucket) at a rate of no more than the rate at which water is flowing into the bucket. If you wait too long while the bucket is filling under the faucet, the extra water (tokens) will be lost (wasted/thrown away) due to the fixed size of the bucket. Since packets are measured in fixed bytes, we can compare a byte to a fixed size droplet of water - the token bucket has a maximum capacity measured in number of water droplets (tokens).</p>

<p>Does this help? See the Cisco article I linked to as well.</p>
","20633"
"How can I allow the same MAC address on different ports with port security?","4104","","<p>How can I allow my laptop MAC address on every port with port security? Is it even possible?</p>

<p>When I try, I get this:</p>

<pre><code>SW2(config-if)#switchport port-security mac-address XXXX.XXXX.XXXX
Found duplicate mac-address XXXX.XXXX.XXXX.
</code></pre>
","<p>Please allow me to join the discussion. </p>

<p>Why would you even want to allow your Laptop MAC address on all switch ports with port security ?</p>

<p>The port security feature is mainly meant to increase Layer 2 security e.g. prevent MAC overflow attacks on a switch. It's not meant to prevent unauthorized devices to be connected to a RJ45 socket aka Ethernet port. Normally you configure the RJ 45 sockets in your office that are terminated on a Patch Panel and connected to the switch to allow a certain amount of MAC the given port can learn before taking any action (protect, restrict, shutdown). In doing so you're preventing from a possible MAC overflow attack's that can be executed against your switch. </p>

<p>Again (it's my personal opinion) the question doesn't make much sense. If you can prove there's a real life reason why you would even care of configuring it that way, let me know. </p>

<p>Adam</p>
","29672"
"load balance between two ISP bgp links","4094","","<p>I have up-links to two separate ISPs on one router and receive a default route from each via BGP. Both links are the same speed and BGP is used only to advertise our prefixes out. Whats the best way to load balance across the two links? It was suggested that the easiest would be to add static default routes to the router.</p>
","<p>You didn't mention vendor, but if Cisco IOS, you can use:</p>

<pre><code>router bgp 43792
  bgp bestpath as-path multipath-relax
  address-family ipv4
    maximum-paths 2
  !
!
</code></pre>

<p>multipath-relax is needed as normally you'll only multipath with same as-path routes.</p>

<p>I'm personally strongly against carrying default routes via dynamic routing-protocols, there simply isn't any need, as long as you operate platform which supports recursive static routes.</p>

<p>Consider your operator router gets disconnect from their core, then you still receive the default route and your traffic is blackholed until you manually intervene. However if they'd send you some candidate route, perhaps their own PA block or maybe few PA blocks crucial to you, you could add static default routes towards these networks, if edge box is disconnected from core, the aggregate network is gone, and you can converge without manual intervention.</p>
","1692"
"Static routes: numerical next-hop vs interface","4086","","<p>I'm reviewing old Cisco modules, and in CCNA 2, Module 2.5.1.2, it states,</p>

<blockquote>
  <p>Under certain conditions, the network administrator will not want to configure the static route with an exit interface but with the next-hop IP address.</p>
</blockquote>

<p>Why would you prefer routes with a next-hop IP address instead of an exit interface?</p>
","<p>If you point a static route to a broadcast interface, the route is inserted into the routing table only when the broadcast interface is up. This configuration is not recommended because when the next hop of a static route points to an interface, the router considers each of the hosts within the range of the route to be directly connected through that interface. For example, <code>ip route 0.0.0.0 0.0.0.0 Ethernet0</code>.</p>

<p>With this type of configuration, a router performs Address Resolution Protocol (ARP) on the Ethernet for every destination the router finds through the default route because the router considers all of these destinations as directly connected to Ethernet 0.</p>

<p>This kind of default route, especially if it is used by a lot of packets to many different destination subnets, can cause high processor utilization and a very large ARP cache (along with attendant memory allocation failures).</p>

<p>Specifying a numerical next hop on a directly connected interface prevents the router from performing ARP or each destination address. However, if the interface with the next hop goes down and the numerical next hop is reachable through a recursive route, you should specify both the next hop IP address and the interface through which the next hop should be found. For example, <code>ip route 0.0.0.0 0.0.0.0 Serial 3/3 192.168.20.1</code>.</p>

<p>Excerpt from <a href=""http://www.cisco.com/c/en/us/support/docs/ip/border-gateway-protocol-bgp/27082-ip-static-routes.html"">Specifying a Next Hop IP Address for Static Routes</a> at cisco.com</p>
","7221"
"Mikrotik RouterOS - NAT to multiple ports on the same IP","4084","","<p>Some network services require a group of open ports, and those might not even be next to each other (by port number, I mean). </p>

<p>What I'm doing still is I create a dst-nat rule for each port that should be mapped to the server, then enable/disable the rule as needed. </p>

<p>In my specific case, that's a bit tedious because sometimes the ports should point to a different computer for a short period of time which means I have to manually change all the entries to the new IP each time I do this. Also, I wish I could just say ""disable service x"" instead of figuring out which port rules belong together. </p>

<p>Is there a better and more efficient way of doing this? </p>
","<p>In a single NAT rule, you can specify multiple ports in the same rule by using a comma separator, or hypen for range, or combination of them both.</p>

<p>So for FTP, I use ports:  21, 990, 65000-65100</p>

<p>If you are also translating ports, you specify the translated ports in the same order.</p>

<p>If I want to temporarily point my rule at another server, I create another rule and place it above my original so that it takes precedence. </p>

<p>Then simply disable the rule and all ports are disable with it.</p>
","25746"
"What is the length of SNMP sysUpTime counter?","4074","","<p>What is the length of <a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?local=en&amp;translate=Translate&amp;objectInput=sysUpTime"" rel=""nofollow"">Cisco SNMP sysUpTime counter</a>? 32 bits?</p>
","<p>Did a quick test and it looks like the data is a type 'Timeticks' which is a 32 bit integer. From the RFC:</p>

<pre><code>The TimeTicks type represents a non-negative integer which represents
the time, modulo 2^32 (4294967296 decimal), in hundredths of a second
between two epochs.  When objects are defined which use this ASN.1
type, the description of the object identifies both of the reference
epochs.
</code></pre>

<p><a href=""https://tools.ietf.org/html/rfc2578#section-7.1.8"" rel=""nofollow"">https://tools.ietf.org/html/rfc2578#section-7.1.8</a></p>

<pre><code>[user@host ~]$ snmpwalk -v 2c -c $COMMUNITY $DEVICE sysUpTime
DISMAN-EVENT-MIB::sysUpTimeInstance = Timeticks: (1342832478) 155 days, 10:05:24.78
</code></pre>
","19139"
"LACP from Cisco 6509 to Force10 S48-10 - in default VLAN1","4053","","<p>A client has the following configuration: </p>

<p>The entire network is on VLAN1, with the subnet 172.16.0.0/16 - performing a redesign of their network is not an option at this point, as they're a 24/7 facility that cannot currently afford downtime (yeah, I know).</p>

<p>The client wishes to trunk two switches together: </p>

<p>1: Cisco 6509 running IOS 12.3</p>

<p>2: Dell F10 S48-10</p>

<p>The Cisco 6509 module 8 is equipped with 10gbps links - the client wants to use four of those links to trunk to the Force10. The problem that I have run into is that the Force10 does not allow tagged traffic on VLAN1, and spanning-tree pvst on the S48-10 rejects the untagged BPDU on VLAN1 from the 6509. </p>

<p>I've tried this configuration with the following settings - the LACP link works, but the Force10 rejects the BPDU from VLAN1 of the Cisco switch saying ""Rejected untagged BPDU on VLAN1"", and subsequently shuts the port down. Attempting to tag VLAN1 fails on the Force10 - that functionality is not allowed.</p>

<p><strong>Force 10 Configuration</strong></p>

<pre><code>protocol spanning-tree pvst
no disable
!
!
interface range Te0/40 - 43
 description Port Channel 2 Member
 no ip address
!  
 port-channel-protocol LACP 
  port-channel 2 mode active 
 no shutdown
!

interface Port-channel 2
 description TenGig Uplink to Cisco 6509
 no ip address
 switchport
 no shutdown
</code></pre>

<p><strong>Cisco 6509 configuration</strong></p>

<pre><code>!
spanning-tree mode pvst
!
interface range TenGigabitEthernet8/1 - 4
 switchport
 switchport mode trunk
 channel-protocol lacp
 channel-group 2 mode active
!
interface port-channel2
 no ip address
 switchport
 switchport trunk encapsulation dot1q
 switchport mode trunk 
 no shutdown
! 
</code></pre>

<p>I feel that either I'm missing something very simple, or this may need to be fully converted off VLAN1 before the configuration will function. I was able to try every variant of this configuration that I could, except for forcing ""trunk native vlan 1"" on the Cisco side. I have not been able to obtain equipment to sandbox this configuration yet. :(</p>

<p>Thoughts?</p>
","<p>Configure your Force10 with <code>portmode hybrid</code> and <code>no spanning-tree pvst err-disable cause invalid-pvst-bpdu</code> on the interface which faces the Cisco 6500... Reference: <em><a href=""http://en.community.dell.com/techcenter/extras/m/white_papers/20404373.aspx"">Force10 - Cisco STP Interoperability paper</a></em>.</p>

<p>This is the complete configuration for your Port-channel (however, see the warning below)</p>

<pre><code>interface Port-channel 2
 portmode hybrid
 switchport
 no spanning-tree pvst err-disable cause invalid-pvst-bpdu
!
</code></pre>

<p>As described in the aforementioned white paper, the Force10 ""Hybrid Mode"" is required for an untagged Vlan1 on the trunk port.  Note that hybrid mode accepts both tagged and untagged frames; however, it will err-disable when it sees the PVST+ BPDU from the Catalyst 6500.  Thus, I recommended that you also use <code>no spanning-tree pvst err-disable cause invalid-pvst-bpdu</code>.</p>

<p><em>Warning:</em></p>

<p>According to at least one blog I found, hybrid mode <a href=""http://humairahmed.com/blog/?p=4520&amp;cpage=1#comment-3092"">must be configured before any switchport command</a>; this means you might need to unbundle Port-channel 2 and add it again with <code>portmode hybrid</code>.  Sadly, I can't confirm this myself since I don't have a Force10.</p>

<p>Also note that the Force10 needs manual configuration for each Vlan which gets tagged; I'm assuming you've already tagged your Force10 Vlans.</p>
","9442"
"Logging in to console port on Juniper EX2200","4034","","<p>I have a Juniper EX2200 with JunOS 10.3R1.9 in a remote location, making it impossible for me to test. </p>

<p>I will be on-site for one day and while there, I would like to login through the console port using a serial to RJ45 cable. I need to know which accounts can login through that interface. </p>

<p>Currently, I have an admin account (username: admin) which I'm able to use to login over SSH. Will I be able to use this account or does it have to be the ""root"" user? If it has to be root, how can I get/reset the password?</p>

<p>Thanks for the help.</p>
","<p>You can use your admin account.</p>
","6412"
"Whats's the function of a loopback interface in routing protocols?","4030","","<p>So I've got this task where I have to setup a virtual network with an OSPF routing protocol. I firstly ignored this loopback interface I had to configure on the routers since it didn't do any difference in this virtualization software called Cisco Packet Tracer (I thought). Then I've built the network in real life with some Cisco routers and it didn't do anything either. With or without this loopback the network worked (pinging from one host to another).  Now my question is: Why is this loopback interface needed or what function does it do? In the picture below is the network I had to build (if it is any help).<a href=""https://i.stack.imgur.com/TLEFV.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/TLEFV.png"" alt=""Network configuration""></a></p>
","<p>The loopback interface is useful because it is an interface with an IP address which never goes down.  OSPF, without a specifically defined Router ID, will pick a Router ID on its own.  It chooses the Router ID from the IP addresses of the configured and enabled interfaces.  A loopback is a good choice since the loopback interface is always up unless someone specifically shuts it down.  Other interfaces may go down if there is a problem on the link.</p>
","22896"
"Can a probe request be answered on a different channel?","4024","","<p>I am monitoring the 802.11 traffic in my network, and especially the active probing from my smartphone. I am sending Probe Requests for certain hidden SSIDs, but also an Undirected Probe Request, supposed to reveal networks matching the capabilities announced by my device. </p>

<p>I am in Europe, so we get to use more channels than in the US I think (right?) and thus they overlap. </p>

<p>As expected, the scanning takes place on different channels in turn, but what surprises me is this behaviour: </p>

<p>An undirected probe request sent on channel 5 is answered by an AP on channel 6.
Is this completely normal behaviour i.e. defined anywhere in the official specs?</p>

<p>EDIT: Here is the content of both probe request and response, I am basing my assumption on the DS Parameter Set: Current Channel. 
<a href=""https://i.imgur.com/YD0kXpa.png"" rel=""noreferrer"">Picture on i.imgur</a></p>

<p>The time difference between the two frames is 4ms, and I did not observe any other activity on the waves during this time period. </p>

<p>EDIT: Here is the command I run with airodump-ng 1.0 
airodump-ng -c 6 mon0</p>

<p>and the capture tool shows beacons coming from APs on channel 2 to 9. To me it means that airodump accepts all packets visible on a frequecy range, without dismissing them according to the Current Channel Parameter, makes sense for performance reasons.</p>

<p>If the router has the same behaviour for answering probe requests... this may be why. (Starting to question the selectivity of the frequency filters used in our beloved routers.) </p>

<p>EDIT 1:</p>

<p>Is this behaviour 1) repeatable, could someone with a working device please try to observe this ?
2) specified somewhere in the 802.11 references ? Could not find it my self.</p>

<p>EDIT 2:</p>

<p>Thanks to everyone so far who tried repeating this setup. Here is my last attempt at getting an explanation to this. I need to move on :P Here is the exact order in which I did things.</p>

<pre><code>root@mymachine:~# iwconfig :: no mon interface, wlan0 is managed, not associated, and on channel 6: 2.437GHz
root@mymachine:~# airmon-ng start wlan0 6 :: mon0 created, set on channel 6: 2.437GHz
</code></pre>

<p>This is confirmed later by another <code>iwconfig</code>. (on a sidenote, I can change the channel of wlan0, and mon0 stays independent.)</p>

<pre><code>root@mymachine:~# airodump-ng mon0 --channel 6 -w out --output-format pcap :: start a capture on channel 6, write to a file. 
</code></pre>

<p>Observation: airodump-ng doesn't display any change in channel, the top left corner is fixed on number 6. However, beacons observed on channels 2 to 11... 
-> Apparently no selectivity and passing the arguments to both airmon-ng and airodump-ng seem pointless.</p>

<p>Observed with:<br>
CHIPSET Intel 4965       driver iwlwifi<br>
CHIPSET Atheros AR 9271  driver ath9k  </p>

<p>Screenshot here, on <a href=""https://imgur.com/OEF0rxh"" rel=""noreferrer"">IMGUR again</a></p>
","<p>What happens is that your wireless device, even when tuned for channel 6 (2437) also have a small probability to receive frames from neighboring channels, such as channel 5 and 7. and even further (with less probability).</p>

<p>This is highly dependent on the wireless interface that you use. The worst radio that I found was an AR9170 based USB adapter, which was able to pick traffic on channel 1 when turned for channel 6. Some other interfaces (e.g. AR9280) do not have this problem, or it is fairly reduced.</p>

<p>PS: AR9271 is not supported by the ath9k driver, but by the ath9k_htc driver. Because this card seems to be the natural successor to AR9170, I am not surprised that you experience the same issue.</p>
","2759"
"Cisco ASA double NAT with DNS translation","4022","","<p>I'm trying to set up double Auto NAT with DNS translation on Cisco ASA 9.0(3), and I'm having a few challenges with the DNS portion.  I got double NAT working correctly, such that I have a server in production and in the lab with the same IP address.  See b2masd1, nameif INSIDE (production) and masd1, nameif DMZ (lab).</p>

<p>When you ping from DMZ 10.195.18.182 to 1.195.18.182, I see the translations happening correctly in both directions...</p>

<pre><code>D:10.195.18.182      S:192.168.11.101       D:1.195.18.182   S:10.195.18.182
             &lt;-----------                         &lt;-----------
                                           1) echo-request to 1.195.18.182
                                           nat (INSIDE,DMZ) static 1.195.18.182 dns



  S:10.195.18.182    D:192.168.11.101       S:1.195.18.182   D:10.195.18.182
              ------------&gt;                        ------------&gt;
      2) echo-reply to 192.168.11.101
      nat (DMZ,INSIDE) static 192.168.11.101 dns


 b2masd1                   +-----------+              masd1
 10.195.18.182      INSIDE |           | DMZ          10.195.18.182
 Mfg Server   -------------| Cisco ASA |------------  Devel Server
                           |           |
                           +-----------+

 Manufacturing                                        Development
 Network                                              Network
 Security: 100                                        Security: 50
</code></pre>

<p>This is what I see on masd1...</p>

<pre><code>masd1$ /usr/sbin/ping 1.195.18.182
PING 1.195.18.182: 64 byte packets
64 bytes from 1.195.18.182: icmp_seq=0. time=0. ms
64 bytes from 1.195.18.182: icmp_seq=1. time=0. ms

----1.195.18.182 PING Statistics----
2 packets transmitted, 2 packets received, 0% packet loss
round-trip (ms)  min/avg/max = 0/0/0
masd1$
</code></pre>

<p>The problem is that DNS queries from the DMZ to INSIDE are <em>not</em> getting translated.  When I query for b2masd1 from the DMZ, I expect the nameserver on the INSIDE to respond with 10.195.18.182, and then the ASA should translate that to 1.195.18.182.  However, that is not happening; as you can see, the DNS entry is not translated.</p>

<pre><code>masd1$ nslookup
Using /etc/hosts on:  masd1

&gt; a2mosd1
Using /etc/hosts on:  masd1

looking up FILES
Trying DNS
Name:    b2masd1.domain.local
Address:  10.195.18.182

&gt; exit
masd1$
</code></pre>

<p>Can anyone explain what I need to do to get DNS queries correctly translated?  I need a query for b2masd1 in the DMZ to a nameserver on the INSIDE interface to return 1.195.18.182 (because the ASA translates the INSIDE A-Record 10.195.18.182 to DMZ addr 1.195.18.182).</p>

<p>I have set up a <a href=""http://chat.stackexchange.com/rooms/11647/cisco-asa-double-nat-with-dns-translation"">chat room</a> to assist with diagnosis</p>

<p><hr>
<em>Misc debugging information</em></p>

<p>This is my config...</p>

<pre><code>!
interface GigabitEthernet0/0
 nameif INSIDE
 security-level 100
 ip address 10.195.2.197 255.255.255.248 standby 10.195.2.198
!
interface GigabitEthernet0/1
 nameif DMZ
 security-level 50
 ip address 10.195.2.201 255.255.255.248 standby 10.195.2.202
!
object network DMZ_NAT_masd1
 host 10.195.18.182
 description xlate masd1 NAT DMZ src 10.195.18.182 to INSIDE src 192.168.11.101
object network INSIDE_NAT_masd1
 host 10.195.18.182
 description xlate masd1 NAT INSIDE src 10.195.18.182 to DMZ src 1.195.18.182
!
object network DMZ_NAT_masd1
 nat (DMZ,INSIDE) static 192.168.11.101 dns
object network INSIDE_NAT_masd1
 nat (INSIDE,DMZ) static 1.195.18.182 dns
!
policy-map type inspect dns DNS_INSPECT_MAP
 parameters
  message-length maximum 512
!
policy-map global_policy
 class inspection_default
  inspect dns DNS_INSPECT_MAP
!
service-policy global_policy global
</code></pre>

<p>Show xlate, in case this helps...</p>

<pre><code>B2-DEV-FW1/DEVELOPMENT# sh xlate local 10.195.18.182
121 in use, 126 most used
Flags: D - DNS, e - extended, I - identity, i - dynamic, r - portmap,
       s - static, T - twice, N - net-to-net
NAT from DMZ:10.195.18.182 to INSIDE:192.168.11.101
    flags sD idle 0:00:01 timeout 0:00:00
NAT from INSIDE:10.195.18.182 to DMZ:1.195.18.182
    flags sD idle 0:03:55 timeout 0:00:00
B2-DEV-FW1/DEVELOPMENT#
</code></pre>

<p>Show service-policy inspect dns...</p>

<pre><code>B2-DEV-FW1/DEVELOPMENT# sh service-policy inspect dns

Global policy:
  Service-policy: global_policy
    Class-map: inspection_default
      Inspect: dns DNS_INSPECT_MAP, packet 15302, drop 0, reset-drop 0, v6-fail-close 0
        message-length maximum 512, drop 0
        dns-guard, count 7649
        protocol-enforcement, drop 0
        nat-rewrite, count 139
B2-DEV-FW1/DEVELOPMENT#
</code></pre>

<p>Captures showing queries from b2masd1 to the name server (10.195.18.201).  NOTE the double DNS queries sent on the INSIDE interface, but we don't seem to get those on the DMZ interface.</p>

<pre><code>B2-DEV-FW1/DEVELOPMENT# capture FOO interface DMZ real-time match udp host 10.195.18.182 host 10.195.18.201

Warning: using this option with a slow console connection may
         result in an excessive amount of non-displayed packets
         due to performance limitations.

Use ctrl-c to terminate real-time capture


   1: 09:54:35.994730       10.195.18.182.52639 &gt; 10.195.18.201.53:  udp 45
   2: 09:54:35.995218       10.195.18.201.53 &gt; 10.195.18.182.52639:  udp 83
   3: 09:54:47.875076       10.195.18.182.52644 &gt; 10.195.18.201.53:  udp 53
   4: 09:54:47.875549       10.195.18.201.53 &gt; 10.195.18.182.52644:  udp 136
   5: 09:54:47.875854       10.195.18.182.52645 &gt; 10.195.18.201.53:  udp 51
   6: 09:54:47.876297       10.195.18.201.53 &gt; 10.195.18.182.52645:  udp 138
   7: 09:54:47.876648       10.195.18.182.52646 &gt; 10.195.18.201.53:  udp 35
   8: 09:54:47.877075       10.195.18.201.53 &gt; 10.195.18.182.52646:  udp 35

B2-DEV-FW1/DEVELOPMENT# capture FOO interface INSIDE real-time match udp host 192.168.11.101 host 10.195.18.201

Warning: using this option with a slow console connection may
         result in an excessive amount of non-displayed packets
         due to performance limitations.

Use ctrl-c to terminate real-time capture


   1: 09:56:27.282608       10.195.18.182.52742 &gt; 10.195.18.201.53:  udp 43
   2: 09:56:27.282684       192.168.11.101.52742 &gt; 10.195.18.201.53:  udp 43
   3: 09:56:27.283081       10.195.18.201.53 &gt; 192.168.11.101.52742:  udp 59
   4: 09:56:27.283096       10.195.18.201.53 &gt; 10.195.18.182.52742:  udp 59
</code></pre>
","<p>Answering my own question to help future googlers.  I spent about 3 hours on the phone with TAC; we finally got to the root cause of the issue.</p>

<p>The solution is to add a special NAT entry, which matches the IP address in the DNS A-Record when it arrives on the INSIDE interface.</p>

<pre><code>object network DNS_NAT_masd1
 description xlate A-Record DMZ src 1.195.18.182 to INSIDE src 10.195.18.182
 host 1.195.18.182
 nat (DMZ,INSIDE) static 10.195.18.182
</code></pre>

<p>When I asked for a pointer to documentation that describes why DNS translation works this way, the TAC lead said that he didn't know of any that described this behavior.  The TAC lead also mentioned that with more code, the ASA would know to automatically translate the DNS A-Record without explicitly adding <code>object network DNS_NAT_masd1</code>; however, that is not how the <code>dns</code> keyword for ASA NAT works today.  For reasons that still are not completely clear yet, the ASA requires the DNS A-Record IP to match the <code>&lt;proxy_addr&gt;</code> in the NAT statement, using syntax similar to this...</p>

<pre><code>object network obj-EXAMPLE
 description NAT object explicitly for translating DNS A-Records
 host &lt;proxy_addr&gt;
 nat (&lt;REAL_INTF&gt;,&lt;PROXY_INTF&gt;) static &lt;real_addr&gt; dns
</code></pre>

<p>The difficulty is that this configuration is exactly backwards for what you need to do if you're going to nat regular ""data plane"" IP traffic through the firewall.</p>

<p>This is the whole configuration that works...</p>

<pre><code>object network DMZ_NAT_masd1
 host 10.195.18.182
 description xlate masd1 NAT DMZ src 10.195.18.182 to INSIDE src 192.168.11.101
object network INSIDE_NAT_masd1
 host 10.195.18.182
 description xlate masd1 NAT INSIDE src 10.195.18.182 to DMZ src 1.195.18.182
!!! DNS_NAT_masd1 is new
object network DNS_NAT_masd1
 host 1.195.18.182
 description xlate A-Record DMZ src 1.195.18.182 to INSIDE src 10.195.18.182
!
object network DMZ_NAT_masd1
 nat (DMZ,INSIDE) static 192.168.11.101
object network INSIDE_NAT_masd1
 nat (INSIDE,DMZ) static 1.195.18.182
!!! DNS_NAT_masd1 is new
object network DNS_NAT_masd1
 nat (DMZ,INSIDE) static 10.195.18.182 dns
</code></pre>
","5157"
"Limit egress traffic 2960G","4013","","<p>This is to support a user who has the requirement of simulating specific speeds for download/upload.  We have configured a limit using service-policy that as successfully limiting upload speed (ingress on the interface) but we (more importantly) need to limit download speed (egress on the interface).  I know of using srr-queue but we need specific speeds (such as 512KB).  Been banging away at this for a few days now and can't find a working method.  I pursued shaping via:</p>

<pre><code>class-map match-any CLASS_EgressLimit_512KB
  match access-group name ACL_RateLimit_512KB
policy-map POLICY_EgressLimit_512KB
  class CLASS_EgressLimit_512KB
    shape average 512000
interface gi0/6
  service-policy output POLICY_EgressLimit_512KB
</code></pre>

<p>but shaping doesn't seem to be supported in this context on our switch </p>

<p><code>(WS-C2960G-8TC-L 15.0(2)SE4 C2960-LANBASEK9-M)</code></p>

<p>Any help is sincerely appreciated!</p>
","<pre><code>mls qos aggregate-policer ltusa-5mbps-in 5000000 625000 exceed-action drop
mls qos aggregate-policer ltusa-5mbps-out 5000000 625000 exceed-action drop
mls qos min-reserve 5 170
mls qos min-reserve 6 85
mls qos min-reserve 7 51
mls qos min-reserve 8 34
mls qos
...
class-map match-all cm-ltusa
 match ip dscp default 
!
policy-map pm-ltusa-out
 class cm-ltusa
    police aggregate ltusa-5mbps-out
policy-map pm-ltusa-in
 class cm-ltusa
    police aggregate ltusa-5mbps-in
...
interface FastEthernet0/xxx
 switchport access vlan 4000
 switchport mode access
 fair-queue
 service-policy input pm-ltusa-in
 service-policy output pm-ltusa-out
</code></pre>

<p>As far as I recall, that worked on my 3550. (It's not in service anymore.) There's more than one interface in vlan 4000; all have the same configuration. <code>mls qos</code> is the Magic&trade; to make shaping work on a switch.</p>
","16071"
"What does 'clear int giX/X/X' do? Cisco","4008","","<p>Simple question
What functionally happens when executing 'clear int giX/X/X' on a switch?  The port config looks the same afterwards, I see no difference.</p>
","<p><strong>Clear Interface</strong> resets the hardware logic on the specific interface. It basically resets the controller.</p>

<p>If you were looking to clear the configs on a port, <strong>default interface</strong> will do the job for you.</p>

<p><strong>EDIT</strong>
It does nothing to the configuration of the port. And yes, the GigE's controller for that specific interface is reset. It is not the same as bringing the interface up/down. Bringing the interface up/down only prevents it from taking traffic while <code>clear interface</code> is used for interfaces that are not functioning properly to rectify problems with the way the port is handling the traffic. </p>
","16491"
"ASA VPN works as responder but not as initiator","4002","","<p>I'm trying to build an IKEv2/IPSec VPN between a pfSense which uses StrongSWAN 5.2.1 and an ASA 5512 (version 9.1 software.)</p>

<p>When the pfSense starts the connection, everything works fine. When the ASA starts the connection, the SA comes up, but the CHILD_SA fails because <a href=""http://pastebin.com/egAZmYFu"" rel=""nofollow"">the ASA claims it can't find a matching policy</a>. This happens every night, after the CHILD_SA expires so I have to manually restart the tunnel from the pfSense every morning.</p>

<p>The config for the Cisco looks like this:</p>

<pre><code>object network Victoria-network
 subnet 192.168.244.0 255.255.255.0
 description Victoria office subnet
object network NOC-network
 subnet 192.168.242.0 255.255.255.0
 description NOC management subnet

nat (INSIDE,OUTSIDE) source static NOC-network NOC-network destination static Victoria-network Victoria-network no-proxy-arp route-lookup

access-list OUTSIDE_cryptomap extended permit ip 192.168.242.0 255.255.255.0 object Victoria-network 

crypto ipsec ikev2 ipsec-proposal AES256-SHA256
 protocol esp encryption aes-256
 protocol esp integrity sha-512

crypto map OUTSIDE_map 1 match address OUTSIDE_cryptomap
crypto map OUTSIDE_map 1 set pfs group14
crypto map OUTSIDE_map 1 set peer 1.2.3.4 
crypto map OUTSIDE_map 1 set ikev2 ipsec-proposal AES256-SHA256
crypto map OUTSIDE_map interface OUTSIDE
crypto ca trustpool policy

crypto ikev2 policy 2
 encryption aes-256
 integrity sha512
 group 14
 prf sha512
 lifetime seconds 3600

crypto ikev2 enable OUTSIDE

group-policy GroupPolicy_1.2.3.4 internal
group-policy GroupPolicy_1.2.3.4 attributes
 vpn-tunnel-protocol ikev2

tunnel-group 1.2.3.4 type ipsec-l2l
tunnel-group 1.2.3.4 general-attributes
 default-group-policy GroupPolicy_1.2.3.4
tunnel-group 1.2.3.4 ipsec-attributes
 ikev2 remote-authentication pre-shared-key *****
 ikev2 local-authentication pre-shared-key *****
</code></pre>

<p>And the strongSwan config looks like this:</p>

<pre><code>conn con1
    fragmentation = yes
    keyexchange = ikev2
    reauth = yes
    forceencaps = no
    rekey = yes
    reqid = 1
    installpolicy = yes
    type = tunnel
    dpdaction = restart
    dpddelay = 10s
    dpdtimeout = 60s
    auto = route
    left = 1.2.3.4
    right = 9.8.7.6
    leftid = 1.2.3.4
    ikelifetime = 28800s
    lifetime = 3600s
    rightsubnet = 192.168.242.0/24
    leftsubnet = 192.168.244.0/24
    ike = aes256-sha512-modp2048!
    esp = aes256-sha512-modp2048,aes256gcm128-sha512-modp2048!
    leftauth = psk
    rightauth = psk
    rightid = 9.8.7.6
</code></pre>

<p>Full disclosure: I may be woefully unqualified for this task. That said, I have so far managed to get a Juniper NS5-GT, Fortigate FG-60B, and a pfSense 2.1 box tunneled to this ASA so I must be doing something right! Any assistance will be appreciated.</p>
","<p>I've seen similar behavior when the Phase 2 SA liftetime settings don't match.  You may want to try matching both your Phase 1 and 2 lifetime settings.</p>

<p>This is your Phase 1 lifetime configuration on the ASA:</p>

<pre><code>  crypto ikev2 policy 2
  lifetime seconds 3600
</code></pre>

<p>This is your Phase 1 lifetime configuration with StrongSwan:</p>

<pre><code> ikelifetime = 28800s
</code></pre>

<p>The ASA Phase 2 lifetime defaults to 28800 seconds.  You can explicitly configure the Phase 2 lifetime globally or on a per crypto map instance.  You can configure the latter as follows:</p>

<pre><code> crypto map OUTSIDE_map 1 set security-association lifetime seconds 28800
</code></pre>

<p>The Phase 2 lifetime configuration with StrongSwan:</p>

<pre><code> lifetime = 3600s
</code></pre>

<p>Try changing the StrongSwan lifetime value to 28800 to match the ASA default value.  </p>
","14594"
"Port forwarding in cisco router","3999","","<p>Today i was trying to configure port forwarding in one of my client's office. They wanted me to forward ports like 5000 and 6000. I was given the GUI access of the cisco router 2900 series. I could not see any options for NAT or ACL there. I doubt we can't forward ports from that particular router. Help me if there is any way we can do that via CLI.</p>

<p>My private ip is 172.16.32.250 and my private is 5.6.7.8. When someone does 5.6.7.8:5000 from their browser outside the office, i want them to have the interface of my biometric devices. I want TCP 5000 to be opened/forwarded.</p>

<p>Is it not called port forwarding? Please help me understand this concept better.
 Please help</p>
","<p>You can absolutely do Network Address Translation on the 2900.</p>

<p>Cisco has a public document here: <a href=""http://www.cisco.com/c/en/us/support/docs/long-reach-ethernet-lre-digital-subscriber-line-xdsl/asymmetric-digital-subscriber-line-adsl/12905-827spat.html"" rel=""nofollow noreferrer"">http://www.cisco.com/c/en/us/support/docs/long-reach-ethernet-lre-digital-subscriber-line-xdsl/asymmetric-digital-subscriber-line-adsl/12905-827spat.html</a></p>

<p>I'm not certain what you would be doing with forwarding 5000 and 6000 into the network, but I suppose that's their business.  However it might be helpful if we knew what they are trying to accomplish.</p>

<p>I've never used the GUI to configure a IOS router.  I suggest using the CLI.  The command: </p>

<pre><code>router #sh ip int br
</code></pre>

<p>will list your interfaces and help you determine that is inside vs outside.</p>

<p>Edit your inside interface, adding the line ip nat inside</p>

<pre><code>router #conf t
router (config)#int gi0/1
router (config-if)#ip nat inside
router (config-if)#
</code></pre>

<p>Do the same with your outside interface but make sure you tell the router this is the outside NAT interface.</p>

<pre><code>router (config-if)#int gi0/0
router (config-if)#ip nat outside
router (config-if)#end
router (config)#
</code></pre>

<p>Tell the router what you want to NAT with an access list</p>

<pre><code>router (config)#ip nat inside source list 101 interface gi0/0 overload
</code></pre>

<p>Build the access list.  An extended access list is required if you want to specify the port.</p>

<pre><code>router (config)#ip access-list extended 101 
router (config-ext-nacl)#permit tcp any eq 6000 host 1.2.3.4 eq 6000  
</code></pre>

<p>EDIT</p>

<p>I'll use 1.2.3.4 as the public IP the server on the internet side of the router.  Make sure you identify what the IP reaching out to the biometric device is...  I put ""any"" in the above example, but it's just an example.  I prefer not to use ""any"" if at all possible.</p>

<p>If TCP:</p>

<pre><code>router #permit tcp host 172.16.32.250 eq 5000 host 1.2.3.4 eq 5000
router #permit tcp host 172.16.32.250 eq 6000 host 1.2.3.4 eq 6000
</code></pre>

<p>If UDP:</p>

<pre><code>router #permit udp host 172.16.32.250 eq 5000 host 1.2.3.4 eq 5000
router #permit udp host 172.16.32.250 eq 6000 host 1.2.3.4 eq 6000
</code></pre>

<p>END OF EDIT</p>

<p>After the Permit, you can specify the protocol (TCP, UDP, ICMP, ESP, etc) or everything with IP.  You can use host and an IP or IP address + subnet mask.</p>

<pre><code>router (config-if)#end
router #copy run start
</code></pre>
","37142"
"Privilege configuration on cisco switch","3997","","<p>I have a Cisco switch who have an user configured with <strong>privilege</strong> level 3 configured as below</p>

<pre><code>! the user can configure an interface 
privilege configure level 3 interface
privilege exec level 3 configure terminal
privilege exec level 3 configure
</code></pre>

<p>I wonder how can I get him the privilege to execute the following command. </p>

<p>the goal :  </p>

<pre><code>copy run tftp:XXX
</code></pre>

<p>by curiosity :   </p>

<pre><code>show run               
</code></pre>

<p>EDIT: I found the answer for the first <strong>copy run tftp:XXX</strong> add the following command </p>

<pre><code>privilege exec level 3 copy
</code></pre>

<p>If anyone know how to view the <strong>show run</strong> will be great. </p>
","<p><a href=""http://www.cisco.com/en/US/tech/tk59/technologies_tech_note09186a00800949d5.shtml"">http://www.cisco.com/en/US/tech/tk59/technologies_tech_note09186a00800949d5.shtml</a> probably answers your question:</p>

<pre><code>privilege exec level 3 show running 
</code></pre>
","3306"
"How do I preload an Autonomous AP with the latest CAPWAP firmware from WLC?","3991","","<p>We are running a Cisco WLC 5508 with version 7.6.120. We have over 100 autonomous APs around the globe. The latest CAPWAP firmware from Cisco's website for these APs contains CAPWAP code for 7.6.100, not 7.6.120. So each AP I load this with and reboot will then download the latest firmware from the WLC so it has 7.6.120. </p>

<p>This causes a lot more downtime on the APs, especially ones over poor WAN connections. Some sites are 24/7 operations and downtime on the APs can cause production problems if there is not adequate overlapping WIFI coverage.</p>

<p>So I am trying to find a way to pull the update from WLC manually to my laptop to preload on the AP so when I reboot it I only need to configure it in WLC, not wait for it to download another full firmware package. That or send the latest code direct from the WLC to the autonomous AP.</p>

<p>Is this possible? Or am I stuck loading firmware twice on these APs to convert them?</p>

<p>EDIT: The AP models are 1252, 1262, 2602E, and 3602E all running various 15.X autonomous firmware.</p>

<p>EDIT3: I've tried Smithers' suggestion of grabbing the firmware from a fully updated CAPWAP AP connected to the WLC. It appears to work when I generate the tar file:</p>

<pre><code>ap-01#archive upload-sw flash:2602.tar
Image info:
    Version Suffix: k9w8-.152-4.JB5
    Image Name: ap3g2-k9w8-mx.152-4.JB5
    Version Directory: ap3g2-k9w8-mx.152-4.JB5
    Ios Image Size: 215552
    Total Image Size: 13701632
    Image Feature: WIRELESS LAN|LWAPP
    Image Family: AP3G2
    Wireless Switch Management Version: 7.6.120.0
</code></pre>

<p>However, when I try to load this file on an AP, I get a different set of info for the image. Direct from the <code>info</code> file in the tar file:</p>

<pre><code>version_suffix: diagk9w7-.152
version_directory: ap3g2-diagk9w7-mx.152
image_name: ap3g2-diagk9w7-mx.152
ios_image_file_size: 215552
total_image_file_size: 10097152
image_feature: WIRELESS LAN|LWAPP
image_family: AP3G2
system_type: 0x9b
ws_management_version: 7.6.1.118
info_end:
</code></pre>

<p>I am unsure why this is a ""diag"" image and why it is 7.6.1.118 instead of 7.6.120.0.</p>
","<p>Turns out this is a bug and is on file already with Cisco.</p>

<p>From Cisco TAC:</p>

<blockquote>
  <p>A bug has already been filed on this type of scenario. Here is the bug
  ID- <a href=""https://tools.cisco.com/bugsearch/bug/CSCuo44475/?reffering_site=dumpcr"" rel=""nofollow"">CSCuo44475</a></p>
  
  <p>This should be addressed starting with the 8.0 FCS / 7.6 MR3(7.6.130.0) releases - i.e. at that point you should be able to download the applicable k9w8 image, install it on the AP, and then join that AP directly to a WLC, without having to re-download the software.</p>
  
  <p>7.6.130.0 is expected to be released by end of this month and 8.0 in September.</p>
</blockquote>
","10466"
"How does Ethernet detect a collision in the CSMA/CD method?","3981","","<p>I understand that Carrier Sense is essentially the NIC ""listening"" to the medium for any transmissions, Multiple Access means that multiple devices on the network can ""listen"" to the medium, and Collision Detection is the procedure it goes through if there is a Frame collision. My question is how does a NIC actually determine if there was a collision? is there a discrepancy in the voltages, or what?</p>
","<p>Assume you have the following situation...</p>

<ul>
<li>PC with the NIC hard-coded to 100Mbps, Full-duplex</li>
<li>RJ45 cable, pinned EIA-568B (not that the colors in the pinout matter)</li>
<li>Cisco Catalyst Switch, using autonegotiation (at 100Mbps)</li>
</ul>

<p>Since the PC's NIC is locked at 100/full, the Cisco's Ethernet autonegotiation fails and it falls back to 100/half. Now there is a duplex mismatch on the line.  The Cisco switch uses CSMA/CD for access to the link.</p>

<p>Let's assume the PC and the Cisco both transmit at exactly the same instant; the logical diagram and physical layer diagram show the same behavior from two different perspectives, but the physical layer diagram is most relevant to your question.</p>

<pre><code>  LOGICAL DIAGRAM
  ===============

                   Tx                     Tx
  100/full       -----&gt;                 &lt;-----   100/half
  PC        -----------------------------------  Cisco Catalyst Switch


  PHYSICAL LAYER PIN DIAGRAM
  ==========================

      PC                                         Cisco Catalyst Switch
      100/full                                   100/half

                    Tx D1             
                    -----&gt;
      568B                                       568B
      Pin Signal                                 Pin Signal
      1   TX+ D1    ---------------------------  3   RX+ D2
      2   TX- D1    ---------------------------  6   RX- D2
      3   RX+ D2    ---------------------------  1   TX+ D1
      6   RX- D2    ---------------------------  2   TX- D1

                                         &lt;------
                                           Tx D1
</code></pre>

<p>In the diagrams above, the PC (full duplex) is on the left and the Cisco Switch (half duplex) is on the right.  Both sides transmit (Tx) simultaneously on pins 1 and 2, this pair of pins is called D1.</p>

<p>When the NIC on the switch receives the PC's frame on the D2 pair while the switch is simultaneously transmitting on the D1 pair, the switch registers a collision (<a href=""https://electronics.stackexchange.com/a/98457/4179"" title=""Electronics.SE"">answer reference</a>).  The collision is only registered on the switch, because it is in half-duplex mode.</p>

<p>Notes about GigabitEthernet:</p>

<ul>
<li>Half-duplex is called out in the standard<sup><em>Note 1</em></sup>; however, nobody actually uses half-duplex GigE.  This means that GE won't use CSMA/CD</li>
<li>GE uses all 8 pins in the RJ45 mod plug, and the specific TX / RX pins are allocated dynamically.</li>
</ul>

<p><em>End Notes</em>:</p>

<p><sup><em>Note 1</em></sup> Quoting IEEE 802.3-2012 4.1 (Italic emphasis mine):</p>

<blockquote>
  <p><strong>4.1.2.1.2 Reception without contention</strong></p>
  
  <p><em>In half duplex mode, at an operating speed of 1000 Mb/s</em>, frames may be extended by the transmitting station under the conditions described in 4.2.3.4. The extension is discarded by the MAC sublayer of the receiving station, as defined in the procedural model in 4.2.9.</p>
</blockquote>
","12627"
"Raman amplifier vs EDFA, what is the tradeoff?","3978","","<p>For light amplification for longer-haul fiber lines, as far as I can tell, the two major options are EDFA's and Raman amplifiers.  What is the tradeoff between one type and the other?  Are there areas where Raman amplifiers are clearly better?  Is it just a matter of EDFA's being cheaper and Raman Amplifiers having greater gain ranges, or is there something more major that I am missing?</p>

<p>(For the uninitiated, EDFA = erbium doped fiber amplifier.  It acts basically as a sort of a lasing chamber without the mirrors, so it amplifies laser signals as they go through the (usually single mode) fiber.  This boosts the maximum distance of a fiber run.)</p>
","<p>I think another reason someone might use one over the other is just cost.</p>

<p>EDFA is usually cheaper from what I've seen, in comparison to RAMAN.</p>

<p>From MRV website: ""They [RAMAN] also have a better optical signal-to-noise ratio than EDFA amplifiers."" <a href=""http://www.mrv.com/product/MRV-FD-OARM/"" rel=""nofollow"">http://www.mrv.com/product/MRV-FD-OARM/</a></p>
","154"
"Change mgmt IP, vlan and default GW HP Switch","3978","","<p>Does anyone know if it is possible to remotely change the mgmt IP, vlan and default gw of a HP Switch without loosing connectivity when ssh to said IP?</p>

<ul>
<li>Create new (mgmt) vlan</li>
<li>Create svi in new vlan</li>
<li>Change default gw to network of new vlan IP</li>
</ul>

<p>Thanks</p>
","<p>This depends entirely on the switch model.</p>

<p>Simple layer-2 switches, ""<em>not likely</em>"". The issue is the inability to enter an atomic set of commands. Each configuration change will be active the instant it's entered. So, when you enter <code>primary-vlan xx</code>, the minute you hit <kbd>enter</kbd> your connection will fail.</p>

<p>With layer-3 switches, ""Yes"". But it takes a careful sequence. Be sure your moving of the mgmt interface and any associated route(s) will not break traffic forwarding/routing through the switch. Bring up IP on a different SVI (vlan). Then access the switch through that new interface, preferably from a local host (i.e. host in the same subnet) to avoid any routing issues. Then move the management vlan, if that model has any notion of ""management vlan"".</p>

<p>[Doing an in-place network / management redesign with a few nortel (avaya) switches was a real test. That ultimately took a bit of netmask juggling, proxy-arp, /32 routing *grin* <sup>(yes, a host can live on the wrong network)</sup>, and leap-frog telnet's... and that was on a switch down the hall from me.]</p>
","14737"
"Do wireless routers on the same channel share frequencies actively or simply collide?","3976","","<p>In the scenario of 802.11n 2.4GHz routers, and assuming a very simplified example of only channels 6 and 11:</p>

<ul>
<li>Us in Building A: router on channel 6</li>
</ul>

<p><em>-- next door --</em> </p>

<ul>
<li>Building B: router on channel 6</li>
</ul>

<p><em>-- far away --</em></p>

<ul>
<li>Building C: router on channel 11</li>
</ul>

<p>For best performance for us working in Building A,
will the routers share the channel 6 frequency proactively, and therefore less likely to have collisions,</p>

<p>OR</p>

<p>Is it better to pick channel 11 as the router using that is far away and less likely to interfere?</p>

<p>Essentially do wireless routers engage in a primitive form of TDMA (time-division multiple access) or similar?</p>
","<p>If those are your only two choices, building A should be on 11 for best performance.   Access points use CSMA/CA, not TDMA.  The CA stands for collision avoidance, so they listen first before transmitting.  If they hear someone else talking (over a certain threshold), they will wait until the channel is clear before transmitting.</p>

<p>If you use Ch 11, then you will not have any channel contention, since the other AP signal (bldg C) will be very low (I am assuming no other APs than what you've described).</p>

<p>If you put bldg A on channel 6, then it will compete with bldg B for channel time, reducing throughput for both buildings.  If the signal from the adjacent building is low enough, it won't cause channel contention, but it can still lower your SNR (signal to noise ratio) and lower your throughput due to errors and retransmissions.</p>
","6751"
"Configure External Interface for DHCPv6 client on Cisco IOS","3974","","<p>What are the necessary steps to configure IOS 12.4(25f) to support IPv6?  Comcast is the ISP, and I'll be using a Server 2012 box for internal DHCPv6.</p>

<p>I'll need to grab a DHCPv6 address from Comcast for the external interface.</p>

<p>So far, on my external interface, I have:  </p>

<pre><code>ipv6 address autoconfig default
ipv6 enable
ipv6 traffic-filter al in
ipv6 verify unicast reverse-path
ipv6 dhcp client pd comcast-ipv6
</code></pre>

<p>For the 'al' access-list, I have:<br>
<code>permit udp any any eq 546</code></p>
","<p>To complete this, here is what I have for the 1841 running 12.4(24)T8, which has a bug for HTTP inspection over IPv6, so a work-around ACL is provided.</p>

<pre><code>ipv6 unicast-routing
ipv6 cef
ipv6 dhcp pool ComcastPool
 prefix-delegation pool comcast-ipv6
 dns-server &lt;IPv6-IP&gt;
 domain-name internal.domain
ipv6 inspect name traffic ftp
ipv6 inspect name traffic udp
ipv6 inspect name traffic icmp

interface FastEthernet0/0
 ipv6 address dhcp
 ipv6 address autoconfig default
 ipv6 enable
 ipv6 traffic-filter wan-in in
 ipv6 traffic-filter wan-out out
 ipv6 verify unicast reverse-path
 ipv6 dhcp client pd comcast-ipv6
 ipv6 inspect traffic out

interface FastEthernet0/1
 ipv6 address comcast-ipv6 ::1/64
 ipv6 address autoconfig
 ipv6 enable
 ipv6 nd other-config-flag
 ipv6 dhcp server ComcastPool

ipv6 access-list wan-in
 permit icmp any any
 permit udp any any eq 546
 permit tcp any any established
 sequence 100 deny ipv6 any any

ipv6 access-list wan-out
 permit icmp any any
 permit tcp any any
 permit udp any any
 sequence 100 deny ipv6 any any
</code></pre>
","5809"
"Juniper netscreen: What failover/NSRP commands are available to troubleshoot?","3955","","<p>I have a main (active) Juniper Netscreen SSG firewall that I can access. I can't access the standby unit. I'd love to find out more about the standby unit from the main unit. Are there commands that would answer any of these questions?</p>

<p>What is the IP of the standby unit?
Let's reboot the standby unit from the active.
What is the status of the standby unit? (get nsrp is very cryptic and not clear, how do I decipher that?)
When was the last failover and is there a reason why it happened?
Is the standby unit ok enough to fail back over to without it immediately failing back?</p>
","<p>The main commands you want to use is <code>get nsrp vsd-group all</code>. That will show the current status. Note which units are master, primary back up and any secondary backups.</p>

<p>For the IP address of the stand by unit, it won't have one unless you set a manage-ip on the interface. The address on any interfaces are shared addresses by all devices in the vsd-group. The manage-ip on any interface is unique to that device. You should always set a manage-ip on devices on secure network interfaces (i.e., usually in the Trust zone or on the management interface) and generally not on unsecured networks (i.e., the Untrust zone). If you only have access to one over the network I suggest logging in on the serial console and setting a manage-ip for each device.</p>

<p>The best way to know when the last failover was is to check the log (<code>get event</code>). The reason why is almost always because a manual failover was initiated or a device went to ineligible state. Devices usually go to ineligible state if one of the monitor conditions (e.g., interface, ip-track).</p>
","5480"
"Problem with VPN tunel from local network to the local VPN server","3953","","<p>I have network situation like this:</p>

<p><img src=""https://i.stack.imgur.com/ZKbU0.png"" alt=""Problem with VPN tunel from local network to the local VPN server""></p>

<ul>
<li><strong>ISP Router (modem)</strong> - device given to us by our ISP - modem &amp; router in one but it is set into transparent mode - ISP say so ;D we have to find it that it is true :)</li>
<li><strong>MikroTik Router (MTR)</strong> - our edge router with firewall</li>
<li><strong>Server NAS &amp; VPN Server (NAS)</strong> - Synology box with our data storage and also with VPN server with running PPTP, OpenVPN, L2TP/IPSec services- to which workers from our local company and from remote location conect to get data</li>
<li><strong>Local station (LS)</strong> - workers at our network site - they are using Windows 8 which means they use PPTP</li>
</ul>

<hr>

<p>Bellow I present our Mikrotik configuration:</p>

<p><strong><em>Routing table:</em></strong></p>

<pre><code>Dst. address   | Gateway      | Distance | Pref. source   |
0.0.0.0/0      | 1.1.1.9      | 2        | -              |
1.1.1.8/30     | ether1       | -        | 1.1.1.8/30     |
192.168.1.0/24 | bridge local | -        | 192.168.1.0/24 |
</code></pre>

<p><strong><em>Firewall:</em></strong></p>

<pre><code>Action | Chain | Dst. Address  | Protocol | Dst. Port |
accept | input | 192.168.1.230 | 6 (TCP)  | 1723      |
accept | input | 192.168.1.230 | 47 (GRE) | -         |
accept | input | 192.168.1.230 | 6 (TCP)  | 5006      |
</code></pre>

<p><strong><em>NAT:</em></strong></p>

<pre><code>Action     | Chain  | Source Addr    | Dst Address   | Proto    | Dst Port | Out Intf   |
masquerade | srcnat | -              | -             | -        | -        | ether1     |
dstnat     | dstnat | -              | 1.1.1.10      | 6 (TCP)  | 1723     | -          |
dstnat     | dstnat | -              | 1.1.1.10      | 47 (GRE) | -        | -          |
dstnat     | dstnat | -              | 1.1.1.10      | 6 (TCP)  | 5006     | -          |
masquerade | srcnat | 192.168.1.0/24 | 192.168.1.230 | -        | -        | -          |
</code></pre>

<p><em>The last rule is used to avoid hairpin occurrence</em></p>

<p><strong>Rules at Mikrotik are made for now only for PPTP protocol !!!</strong></p>

<hr>

<p><strong>When people from local network try connect to the VPN serwer at NAS there is error 807 or 800 occure - it deepends from station. All are Windows 8 and Windows 7. What could be the cause ?</strong></p>
","<p>The problem was wrong NAT translation to the VPN server and two rules at the firewall. They should check chain FORWARD instead of INPUT. It is a little hard to belive but it worked. </p>

<p>INPUT chain is for packet which have router public IP in destination address like in my case so they ""wants"" reach the router not host beyond - like FORWARD chain does. Thats interesting ^^</p>
","10256"
"/31 Point-to-point bitmasks","3948","","<p><strong>When is it appropriate to use a /31 network in production</strong>, and is using them considered good practice?  On a point-to-point link, broadcasts shouldn't be required, so is there any compelling case for just using /31 over /30 as it seems /30s are still widely deployed and prevalent.
This has been defined by <a href=""http://www.faqs.org/rfcs/rfc3021.html"">RFC 3021</a>. </p>

<p>Are there any use-cases for using a /31 other than to conserve address space?  Does the introduction of /31s bring a new set of concerns that are not found in /30s?  </p>

<p>Are /31s generally only seen in public space, particularly for ISPs, or are they commonly used in private space too for both ISPs and Enterprises?</p>
","<p>I've been using them internally in labs running EIGRP for a bit and haven't find any problem so far.</p>

<p>The way I see it if a /24 is allocated for a P2P range.</p>

<ol>
<li>/30 bitmask = 64 P2P links</li>
<li>/31 bitmask = 128 P2P links</li>
</ol>

<p>/23 allocation</p>

<ol>
<li>/30 bitmask = 128 P2P links</li>
<li>/31 bitmask = 256 P2P links</li>
</ol>

<p>Alright, I'm not going to bore people w/ subnet math and powers of two. But since we're in the IPv4 exhaustion mode, it allows us to better utilize our given subnet assignments.</p>

<p>Also, in a P2P I see no reason why we need a broadcast address. There are only two hosts in this network. Therefore, any packets destined for broadcast are going to be heard by the other host.</p>

<p>BTW, Cisco routers have supported this feature since IOS 12.2(2)T</p>
","1548"
"Why does my Cisco 4507 core switch not recognize my SFP+?","3941","","<p>I have a SFP+ cable of dubious parentage (I think it is a knockoff) that I'm trying to use to connect a Cisco 2960S stack with a 4507 core chassis.  I have included what I think is relevant information below but please feel free to request more and I'll provide it.  Neither side complains about it being an incompatible SFP module, or anything of the like.  If I hook the cable up between two 2960S's, it works just fine.  The SFP cable doesn't appear to be listed on Amazon anymore, but here is a comparable version to give you an idea of what I'm using: <a href=""http://rads.stackoverflow.com/amzn/click/B00KMR8R8S"" rel=""nofollow"">Diablo 15m direct attach SFP+</a></p>

<p>My 4507 shows ""inactive"" status and the 2960S's show ""notconnect"" leading me to believe the problem may be with the 4507.  I've attempted the <code>service unsupported-transceiver</code> trick but it has not affected the 'inactive' status.</p>

<p>Here is the 4507 side:</p>

<pre><code>nyhq-core01#sh int status | inc SR
Te3/3                        inactive     1            full   auto 10GBase-SR


interface TenGigabitEthernet3/3
 switchport mode trunk
end

TenGigabitEthernet3/3 is down, line protocol is down (inactive)
  Hardware is Ten Gigabit Ethernet Port, address is e02f.6da5.8dc2 (bia e02f.6d)
  MTU 1500 bytes, BW 10000000 Kbit/sec, DLY 10 usec,
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation ARPA, loopback not set
  Keepalive set (10 sec)
  Full-duplex, Auto-speed, link type is auto, media type is 10GBase-SR
  input flow-control is off, output flow-control is off
  ARP type: ARPA, ARP Timeout 04:00:00
  Last input never, output never, output hang never
  Last clearing of ""show interface"" counters never
  Input queue: 0/2000/0/0 (size/max/drops/flushes); Total output drops: 0
  Queueing strategy: fifo
  Queueing strategy: fifo
  Output queue: 0/40 (size/max)
  Output queue: 0/40 (size/max)
  5 minute input rate 0 bits/sec, 0 packets/sec
  5 minute input rate 0 bits/sec, 0 packets/sec
  5 minute output rate 0 bits/sec, 0 packets/sec
  5 minute output rate 0 bits/sec, 0 packets/sec
     0 packets input, 0 bytes, 0 no buffer
     0 packets input, 0 bytes, 0 no buffer
  MTU 1500 bytes, BW 10000000 Kbit/sec, DLY 10 usec,
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation ARPA, loopback not set
  Keepalive set (10 sec)
  Full-duplex, Auto-speed, link type is auto, media type is 10GBase-SR
  input flow-control is off, output flow-control is off
  ARP type: ARPA, ARP Timeout 04:00:00
  Last input never, output never, output hang never
  Last clearing of ""show interface"" counters never
  Input queue: 0/2000/0/0 (size/max/drops/flushes); Total output drops: 0
  Queueing strategy: fifo
  Output queue: 0/40 (size/max)
  5 minute input rate 0 bits/sec, 0 packets/sec
  5 minute output rate 0 bits/sec, 0 packets/sec
     0 packets input, 0 bytes, 0 no buffer
     Received 0 broadcasts (0 multicasts)
     0 runts, 0 giants, 0 throttles
     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored
     0 input packets with dribble condition detected
     0 packets output, 0 bytes, 0 underruns
     0 output errors, 0 collisions, 3 interface resets
     0 unknown protocol drops
     0 babbles, 0 late collision, 0 deferred
     0 lost carrier, 0 no carrier
     0 output buffer failures, 0 output buffers swapped out

NAME: ""TenGigabitEthernet3/3"", DESCR: ""SFP-10Gbase-SR""
PID: SFP-10G-SR        , VID: V03  , SN: C1402250129
NAME: ""Supervisor(slot 4)"", DESCR: ""Sup 7-E 10GE (SFP+), 1000BaseX (SFP) with 4 SFP+ Ports""
PID: WS-X45-SUP7-E     , VID: V04  , SN: CAT164ZZZZ
</code></pre>

<p>And here is the 2960S stack:</p>

<pre><code>NYC-SW-26-01#sh int status | inc SR
Te2/0/1                      notconnect   1            full    10G SFP-10GBase-SR


interface TenGigabitEthernet2/0/1
 switchport mode trunk
end
TenGigabitEthernet2/0/1 is down, line protocol is down (notconnect) 
  Hardware is Ten Gigabit Ethernet, address is 44ad.d975.51b3 (bia 44ad.d975.51b3)
  MTU 1500 bytes, BW 10000000 Kbit/sec, DLY 10 usec, 
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation ARPA, loopback not set
  Keepalive not set
  Full-duplex, 10Gb/s, link type is auto, media type is SFP-10GBase-SR
  input flow-control is off, output flow-control is unsupported 
  ARP type: ARPA, ARP Timeout 04:00:00
  Last input never, output never, output hang never
  Last clearing of ""show interface"" counters never
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 0
  Queueing strategy: fifo
  Output queue: 0/40 (size/max)
  5 minute input rate 0 bits/sec, 0 packets/sec
  5 minute output rate 0 bits/sec, 0 packets/sec
     0 packets input, 0 bytes, 0 no buffer
     Received 0 broadcasts (0 multicasts)
     0 runts, 0 giants, 0 throttles
     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored
     0 watchdog, 0 multicast, 0 pause input
     0 input packets with dribble condition detected
     0 packets output, 0 bytes, 0 underruns
     0 output errors, 0 collisions, 3 interface resets
     0 unknown protocol drops
     0 babbles, 0 late collision, 0 deferred
     0 lost carrier, 0 no carrier, 0 pause output
     0 output buffer failures, 0 output buffers swapped out

NYC-SW-26-01#sh log | inc 2/0/1  
Jul 31 19:00:28.175: %LINK-5-CHANGED: Interface TenGigabitEthernet2/0/1, changed state to administratively down
Jul 31 19:02:17.989: %LINK-3-UPDOWN: Interface TenGigabitEthernet2/0/1, changed state to down

NYC-SW-26-01#sh inv
NAME: ""1"", DESCR: ""WS-C2960S-48LPD-L""
PID: WS-C2960S-48LPD-L , VID: V04  , SN: FOC1713ZZZZ

NAME: ""2"", DESCR: ""WS-C2960S-48LPD-L""
PID: WS-C2960S-48LPD-L , VID: V04  , SN: FOC1713ZZZZ

NAME: ""TenGigabitEthernet2/0/1"", DESCR: ""SFP-10GBase-SR""
PID: SFP-10G-SR          , VID: V03  , SN: C1402250130     

NAME: ""3"", DESCR: ""WS-C2960S-48LPD-L""
PID: WS-C2960S-48LPD-L , VID: V04  , SN: FOC1709ZZZZ

nyhq-core01#sh log | inc 3/3
nyhq-core01#
</code></pre>
","<p>As MikePennington and YLearn have corroborated, if you have dual supervisor cards in a 4500 chassis, only the first two of the four SFP+ slots will work on each sup blade.  The other two ports are disabled in software and there is <em>currently</em> no indication to the end user that the ports are disabled.</p>
","10238"
"Run out of ideas to troubleshout Ping issue Cisco IOS 3560 Switch","3934","","<p><strong>Summary</strong></p>

<p>Yesterday, four of the eight systems (connected to same VLAN, identical ethernet adapter settings) were able to ping <code>tweakers.net</code>. Today, another system is not able to ping the internet anymore.</p>

<p>As the <a href=""https://serverfault.com/questions/617008/production-servers-can-suddenly-not-access-the-internet-anymore"">system site has been investigated extensively</a>, the Cisco switch is perhaps suspected and has been analyzed as well (see <code>Switch analysis section</code> of the question), but the issue persists.  </p>

<p><strong>Current situation:</strong> <a href=""https://networkengineering.stackexchange.com/questions/640/how-can-i-capture-traffic-on-cisco-ios-switches"">this Q&amp;A</a> regarding packet sniffing is read</p>

<p><strong>Question:</strong> Which further steps can be done to debug while some systems can ping the internet and others not while ethernet adapters are identical and these are connected to the same VLAN?</p>

<hr>

<p><strong>Switch Analysis</strong></p>

<p><em>ARP</em></p>

<pre><code>Switch&gt;sh arp
Protocol  Address          Age (min)  Hardware Addr   Type   Interface
Internet  10.10.10.2            147   Y               ARPA   VlanNum
</code></pre>

<p><em>MAC-Address table</em></p>

<pre><code>Switch&gt;sh mac address-table
          Mac Address Table
-------------------------------------------

Vlan    Mac Address       Type        Ports
----    -----------       --------    -----
 Num    Y                 DYNAMIC     Gi0/Z
</code></pre>

<p><em>VLAN</em></p>

<pre><code>Switch&gt;sh vl

VLAN Name                             Status    Ports
---- -------------------------------- --------- -------------------------------
1    default                          active    
Num  VLAN0Num                         active    Gi0/Z

VLAN Type  SAID       MTU   Parent RingNo BridgeNo Stp  BrdgMode Trans1 Trans2
---- ----- ---------- ----- ------ ------ -------- ---- -------- ------ ------
1    enet  ...        1500  -      -      -        -    -        0      0
Num  enet  ...        1500  -      -      -        -    -        0      0

Remote SPAN VLANs
------------------------------------------------------------------------------

Primary Secondary Type              Ports
------- --------- ----------------- ------------------------------------------
</code></pre>

<p><em>Running-config</em></p>

<pre><code>Switch&gt;sh run

interface GigabitEthernet0/Z
 switchport access vlan Num
 switchport mode access
 switchport nonegotiate
!
</code></pre>

<p><em>IP Interfaces</em></p>

<pre><code>Switch&gt;sh ip int br
Interface              IP-Address      OK? Method Status                Protocol
Vlan1                  X               YES NVRAM  up                    up
VlanNum                10.10.10.1      YES NVRAM  up                    up
GigabitEthernet0/Z     unassigned      YES unset  up                    up
</code></pre>

<p><em>Interface</em></p>

<pre><code>Switch&gt;show interface Gi0/Z
GigabitEthernet0/Z is up, line protocol is up (connected)
  Hardware is Gigabit Ethernet, address is MAC (bia MAC)
  MTU 1500 bytes, BW 1000000 Kbit, DLY 10 usec,
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation ARPA, loopback not set
  Keepalive set (10 sec)
  Full-duplex, 1000Mb/s, media type is 10/100/1000BaseTX
  input flow-control is off, output flow-control is unsupported
  ARP type: ARPA, ARP Timeout 04:00:00
  Last input never, output 00:00:00, output hang never
  Last clearing of ""show interface"" counters never
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 669
  Queueing strategy: fifo
  Output queue: 0/40 (size/max)
  5 minute input rate 248000 bits/sec, 34 packets/sec
  5 minute output rate 516000 bits/sec, 51 packets/sec
     6069964 packets input, 2943921646 bytes, 0 no buffer
     Received 99 broadcasts (56 multicasts)
     0 runts, 0 giants, 0 throttles
     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored
     0 watchdog, 56 multicast, 88133 pause input
     0 input packets with dribble condition detected
     8562995 packets output, 4951152227 bytes, 0 underruns
     0 output errors, 0 collisions, 1 interface resets
     0 babbles, 0 late collision, 0 deferred
     0 lost carrier, 0 no carrier, 0 PAUSE output
     0 output buffer failures, 0 output buffers swapped out
</code></pre>
","<p>if you want to capture packages and analyze them with a packet sniffer (e.g. wireshark) the correct search term for Cisco IOS is SPAN (Switched Port Analyzer). <a href=""http://www.cisco.com/c/en/us/td/docs/switches/lan/catalyst3560/software/release/12-2_52_se/configuration/guide/3560scg/swspan.html"" rel=""nofollow"">See this documentation from Cisco</a>. </p>

<p>Regarding your problem: I don't think that you'll find anything in the logs. </p>

<p>I would start checking if the port System1 is connected to is still active an really still accessing the right vlan. (<em>show run</em>) </p>

<p><em>sh ip int brief</em> and <em>show interface </em> would be my first choices. Check if there are any error counters > 0.</p>

<p>There may also be some issues on the system itself. Check ip settings, proxy, DNS, ... (again). Ping the default gateway and system 2 and check if arp resolution is working. </p>
","10237"
"Connecting clients to two networks using Mikrotik router","3923","","<p>I have two networks Network 1 and Network 2 shown in the picture, and one client machine that must access resources on both networks. Due to security reasons the two networks must be isolated from each other. I have only basic understanding of networking and am complete newbie to Mikrotiks. How do I configure the router to support this configuration? I understand that this scenario is like having 2 ISPs, but I cannot figure out how to configure the routes so that each gateway is used only to access it's own resources.
<a href=""https://i.stack.imgur.com/Zcmyv.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/Zcmyv.png"" alt=""Network Schema""></a></p>

<p>gvhfghj</p>
","<p>assign the correct IPs to each interface, for example</p>

<pre><code>/ip address add interface=ether1 address=10.191.4.192/24
/ip address add interface=ether2 address=10.100.4.100/24
/ip address add interface=ether3 address=192.168.10.1/24
</code></pre>

<p>(not sure about the /24 masks, you have to adapt to your real network)</p>

<p>by default, mikrotik does automatic routing, so you just have to block traffic between network1 and network2</p>

<pre><code>/ip firewall filter chain=prerouting src-address=10.191.4.0/24 dst-address=10.100.4.0/24 action=drop
/ip firewall filter chain=prerouting src-address=10.100.4.0/24 dst-address=10.191.4.0/24 action=drop
</code></pre>

<p>so traffic between net1 and net2 is blocked but traffic between net1/net2 and operator is allowed. Of course you will have to add the correct routes on all the devices, for example for operator, if it's a windows system</p>

<pre><code>route add 10.191.4.0 mask 255.255.255.0 192.168.10.1
route add 10.100.4.0 mask 255.255.255.0 192.168.10.1
</code></pre>
","24698"
"Why should the native VLAN never be used?","3914","","<p>Currently studying for a CCNA Security, I am teached to never use the native VLAN for security purposes. <a href=""https://supportforums.cisco.com/discussion/10814051/native-vlans-securing-8021q-trunks"" rel=""noreferrer"">This old discussion</a> from Cisco forum states it very cleary:</p>

<blockquote>
  <p>You should never use the default VLAN either because VLAN hopping is
  much more easily accomplished from the default VLAN.</p>
</blockquote>

<p>However, from a practical point-of-view, I am not able to precisely pin-point what is the actual threat which is being addressed here.</p>

<p>My thoughts were the following ones:</p>

<ul>
<li><p>The attacker being located on the native VLAN, maybe he can directly inject 802.1q packets which will be forwarded without modification by the first switch (as coming from a native VLAN) and upcoming switches will consider these packets as legitimate packets coming from any VLAN chosen by the attacker.</p>

<p>This would have indeed made VLAN hopping attacks <em>""much more easy""</em>, however this does not work since the first switch rightly considers as abnormal to receive 802.1q packets on an access port and therefore drops such packets.</p></li>
<li><p>An attacker being located on a non-native VLAN manages to turn a switch access port into a trunk one. To send traffic to the native VLAN he will just have to change his IP address (a single command) instead of enabling VLAN on his network interface (four commands), saving three commands.</p>

<p>I obviously consider this at most as a very marginal gain...</p></li>
<li><p>When digging in the history, I thought I read somewhere old recommendations stating that 802.1q injection could require a compatible network card and specific drivers. Such requirements would indeed limit attacker's ability to inject 802.1q packets and make native VLAN exploitation much more practical in the previous scenario.</p>

<p>However this does not seem to be a real limitation nowadays and VLAN configuration commands are a common part of Linux (at least) network configuration commands.</p></li>
</ul>

<p>May therefore this advice of not using the native VLAN be outdated and kept only for historical and configuration sanity purposes, even-though this practice does not address any particular threat anymore nowadays? Or is there a concrete scenario where VLAN hopping indeed becomes much more easy because of the native VLAN being used?</p>
","<p>You can and most likely will need to use a native VLAN on your trunk ports, at least on Cisco switches, other vendors do it differently. But what you have to remember that the security risk is more to do with VLAN 1 (default VLAN) being set as a native VLAN.</p>

<p>You should change the native VLAN from being VLAN 1 to a new VLAN that you create. The native VLAN is used for a lot of management data such as DTP, VTP and CDP frames and also BPDU’s for spanning tree.</p>

<p>When you get a brand new switch, VLAN 1 is the only VLAN that exists, this also means that all ports are members of this VLAN by default.</p>

<p>If you are using VLAN 1 as your native VLAN, you have all the ports that you haven't configured to be part of this VLAN. So if an attacker connects to a port that is not used and not configured (because it's not used), he has straight away access to your management VLAN and can read and inject packets that could allow VLAN hopping or capture packets you don't want him/her to see, or worse, SSH into your switches/routers (never allow telnet).</p>

<p>The advice is always to not use VLAN 1, so if an attacker or unwanted client connects and ends up on VLAN 1 and there is nothing configured on this VLAN, such as a useable gateway, they are pretty much stuck and can't go anywhere, while you native VLAN is something like VLAN 900 which is less likely to have any port access as it isn't the default VLAN.</p>

<p>Alot of engineers do not disable unused ports and using VLAN 1 for important stuff leaves you in a situation where the access is open unless you use something like 802.1x. Engineers/Network admins forget and you have a little security hole that can benefit an attacker. If your VLAN 1 is not used and ports are left as default, it's not such a big deal because it is not used.</p>

<p>Hope this helps you on your quest.</p>

<p>SleepyMan</p>
","32740"
"Is it possible to use single MAC address for multiple IPv4 addresses?","3907","","<ul>
<li>Topology: modem with router and Ethernet LAN bridge &lt;---> server having one NIC.</li>
<li>Server network interface: It is capable of handling more than one IPv4 address. All addresses are within the same subnetwork.</li>
<li>Modem: Does the routing service and nothing else. Itself has one address for both WAN and LAN, also within the subnetwork.</li>
</ul>

<p>Will there be an address conflict or will the ARP table have more than one IP, but always the same MAC address? We did encounter packet loss or host unreachability. The modem's ARP table did contain all addresses apart from its own, all associated with the same MAC.</p>
","<p>Putting multiple IP addresses on a single interface (and thus a single MAC address) is quite common for servers.</p>

<p>For example: if a server has multiple roles and services running on it, it might be a good idea to give each role/service its own IP address. When you later want to move a role/service to a different machine you can do so without disrupting the other roles/services on the first server.</p>
","5711"
"load-balancing on congestion, OSPF over MPLS","3907","","<p>I have a network of routers with two clients at both ends, as shown in the Figure below. All the routers use OSPF routing protocol over IP, and the three routers inside the ""MPLS backbone"" subnetwork use OSPF over MPLS over IP, and is supposed to load-balance the traffic from jperf-c to jperf-s. The clients are configured for normal ip routing (just a default gateway to the nearest router).</p>

<p><a href=""https://i.stack.imgur.com/1gPiK.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/1gPiK.png"" alt=""OSPF over MPLS network""></a></p>

<p>I know that in practice, the load balancing is useless in this case. But this is for an exercise, not a real network. The load balancing works when I replace the MPLS by ATM switches. However with MPLS routers, all the TCP and UDP traffic goes through R3 and R5, even if there is congestion, and as a consequence R4 and R6 are never used. The weirdest thing is that when I traceroute R7 from R1, the packet go through R4 and R6.</p>

<p>How do I load-balance the traffic when risks of congestion occur? I have read that OSPF is supposed to do it by default, but in my case it does not?</p>

<p>All the links have a cost of 64 and my configuration for router 2, supposed to redirect to R2 and R4 by load-balancing, is:</p>

<pre><code>config t
!
ip cef
!
interface Serial2/0
 ip address 192.168.0.2 255.255.255.252
 no shutdown
!
interface Serial2/1
 ip address 192.168.0.5 255.255.255.252
 no shutdown
 mpls label protocol ldp
 mpls ip
 mpls mtu 1512
 ip route-cache cef
!
interface Serial2/2
 ip address 192.168.0.9 255.255.255.252
 no shutdown
 mpls label protocol ldp
 mpls ip
 mpls mtu 1512
 ip route-cache cef
!
router ospf 1
 network 192.168.0.0 0.0.0.3 area 0
 network 192.168.0.4 0.0.0.3 area 0
 network 192.168.0.8 0.0.0.3 area 0
</code></pre>
","<blockquote>
  <p>... The load balancing works when I replace the MPLS by ATM switches. </p>
</blockquote>

<p>This doesn't sound like a parallel comparison, because routers don't care whether you're forwarding through an ATM PVC or an MPLS LSP, they will load-balance in the same way, assuming the routers have the same configuration.  Perhaps you've done something unusual with your ATM VCs, but that isn't the focus of this question.</p>

<blockquote>
  <p>However with MPLS routers, all the TCP and UDP traffic goes through R3 and R5, even if there is congestion, and as a consequence R4 and R6 are never used.  The weirest thing is that when I traceroute R7 from R1, the packet go through R4 and R6.</p>
</blockquote>

<p>This actually is not weird, this is how routing works.  Routing happens on a per-hop basis; routers have no forward-looking wisdom to predict congestion along subsequent hops of a particular path.  Routing protocols don't carry information about load in their metric calculations (except for <a href=""http://blog.ipspace.net/2009/06/eigrp-load-and-reliability-metrics.html"" rel=""nofollow"">EIGRP if you play games with the K values</a>, but that could  result in path instability when you do that).</p>

<p>That said, you can use a different algorithm and force load-balancing in this case, use <code>ip load-sharing per-packet</code> on R2 (serial2/1 &amp; serial 2/2) as well as R7 (serial 2/0 &amp; 2/1):</p>

<pre><code>interface Serial2/1
 ip address 192.168.0.5 255.255.255.252
 no shutdown
 mpls label protocol ldp
 mpls ip
 mpls mtu 1512
 ip route-cache cef
 ip load-sharing per-packet
!
interface Serial2/2
 ip address 192.168.0.9 255.255.255.252
 no shutdown
 mpls label protocol ldp
 mpls ip
 mpls mtu 1512
 ip route-cache cef
 ip load-sharing per-packet
</code></pre>

<p><a href=""http://blog.ipspace.net/2014/03/per-packet-load-balancing-interferes.html"" rel=""nofollow"">Per-packet load-balancing</a> forces the router to round-robin traffic between destinations.  You should <em>never use this is a production network without considering the consequences</em> (most often, reordering packets... which makes VoIP / video, and sometimes TCP unhappy).</p>

<p><a href=""http://blog.ipspace.net/2014/03/per-packet-load-balancing-interferes.html"" rel=""nofollow"">Per-packet load-balancing</a> is great in the lab, and usually unwise in production, unless you're in a very specific situation and know what you're doing.  Per-packet load-balancing also has very spotty platform support... some Cisco routers (such as the Catalyst 6500 Sup720) simply won't use per-packet load-balancing.</p>

<blockquote>
  <p>How do I do for the MPLS backbone to load-balance the traffic when risks of congestion occur? I have read that OSPF is supposed to do it by default, but in my case it does not?</p>
</blockquote>

<p>As I mentioned above, you're misunderstanding how routing works... this is a huge topic, but I'll just summarize the most relevant info here...</p>

<h3>How Cisco IOS load-balancing works by default</h3>

<p>By default <a href=""http://www.netcraftsmen.net/blogs/entry/cisco-express-forwarding-cef-with-parallel-paths.html"" rel=""nofollow"">Cisco routers use <em>per-source / per-destination</em> hashes of IP addresses</a> at the ingress Label Edge Router (LER) to decide which path to take.  You can see this in action by performing <code>show ip cef exact-route [src-ip] [dst-ip]</code>... notice the <code>label [FOO] TAG adj</code> output below, which indicates the MPLS label allocated by LDP.</p>

<pre><code>PE4#sh ip cef exact-route 192.168.4.1 192.168.0.5

192.168.4.1 -&gt; 192.168.0.5 =&gt; label 154 TAG adj out of GigabitEthernet1/0/0, 
 addr 10.10.1.189
</code></pre>

<p>If I choose a different source or destination address, it's possible to see a different path chosen...</p>

<pre><code>PE4#sh ip cef exact-route 192.168.4.1 192.168.0.12

192.168.4.1 -&gt; 192.168.0.12 =&gt; label 152 TAG adj out of GigabitEthernet1/0/1, 
 addr 10.10.1.193
</code></pre>

<p>If you want to see the general load-balancing configuration on the router, use <code>show ip cef [dst] internal</code> (borrowing output from <a href=""http://rekrowten.wordpress.com/2013/08/12/is-load-balancing-in-mpls-happening/"" rel=""nofollow"">this blog</a>)... also note the chosen load-balance algorithm (<code>per-destination sharing</code>).</p>

<pre><code>R2#show ip cef 10.200.4.1 internal 
10.200.4.1/32, epoch 0, flags rib only nolabel, rib defined all labels, RIB[B], refcount 5, 
 per-destination sharing
  sources: RIB 
  feature space:
   IPRM: 0x00018000
  ifnums:
   FastEthernet1/1(5): 192.168.23.3
   FastEthernet2/0(6): 172.16.23.3
  path 6896722C, path list 68991DF0, share 1/1, type recursive, for IPv4
  recursive via 10.4.4.4[IPv4:Default], fib 6894F9B0, 1 terminal fib, v4:Default:10.4.4.4/32
    path 689672A4, path list 68991E3C, share 0/1, type attached nexthop, for IPv4
      MPLS short path extensions: MOI flags = 0x0 label 19
    nexthop 172.16.23.3 FastEthernet2/0 label 19, adjacency IP adj out of FastEthernet2/0, 
     addr 172.16.23.3 686FC0A0
    path 6896731C, path list 68991E3C, share 1/1, type attached nexthop, for IPv4
      MPLS short path extensions: MOI flags = 0x0 label 19
    nexthop 192.168.23.3 FastEthernet1/1 label 19, adjacency IP adj out of FastEthernet1/1, 
     addr 192.168.23.3 686FC360
  output chain:
    loadinfo 689C4DA0, per-session, 2 choices, flags 0003, 6 locks
    flags: Per-session, for-rx-IPv4
    16 hash buckets
      &lt; 0 &gt; label 19 TAG adj out of FastEthernet2/0, addr 172.16.23.3 686FBF40
      &lt; 1 &gt; label 19 TAG adj out of FastEthernet1/1, addr 192.168.23.3 686FC200
      &lt; 2 &gt; label 19 TAG adj out of FastEthernet2/0, addr 172.16.23.3 686FBF40
      &lt; 3 &gt; label 19 TAG adj out of FastEthernet1/1, addr 192.168.23.3 686FC200
      &lt; 4 &gt; label 19 TAG adj out of FastEthernet2/0, addr 172.16.23.3 686FBF40
      &lt; 5 &gt; label 19 TAG adj out of FastEthernet1/1, addr 192.168.23.3 686FC200
      &lt; 6 &gt; label 19 TAG adj out of FastEthernet2/0, addr 172.16.23.3 686FBF40
      &lt; 7 &gt; label 19 TAG adj out of FastEthernet1/1, addr 192.168.23.3 686FC200
      &lt; 8 &gt; label 19 TAG adj out of FastEthernet2/0, addr 172.16.23.3 686FBF40
      &lt; 9 &gt; label 19 TAG adj out of FastEthernet1/1, addr 192.168.23.3 686FC200
      &lt;10 &gt; label 19 TAG adj out of FastEthernet2/0, addr 172.16.23.3 686FBF40
      &lt;11 &gt; label 19 TAG adj out of FastEthernet1/1, addr 192.168.23.3 686FC200
      &lt;12 &gt; label 19 TAG adj out of FastEthernet2/0, addr 172.16.23.3 686FBF40
      &lt;13 &gt; label 19 TAG adj out of FastEthernet1/1, addr 192.168.23.3 686FC200
      &lt;14 &gt; label 19 TAG adj out of FastEthernet2/0, addr 172.16.23.3 686FBF40
      &lt;15 &gt; label 19 TAG adj out of FastEthernet1/1, addr 192.168.23.3 686FC200
    Subblocks:
     None
</code></pre>

<h3>Cisco IOS with CEF Load-balancing, hashed on L4 ports...</h3>

<p>In IOS 12.4, Cisco introduced another algorithm to <a href=""http://www.cisco.com/c/en/us/td/docs/ios/ipswitch/configuration/guide/12_4/isw_12_4_book/cef_load_balancng.html#wp1063014"" rel=""nofollow"">load-balance traffic based on L4 ports</a>... use <code>ip cef load-sharing algorithm include-ports source destination</code> at the global configuration level.</p>

<h3>Load-balancing with <a href=""http://www.cisco.com/c/en/us/td/docs/ios/12_0s/feature/guide/TE_1208S.html"" rel=""nofollow"">MPLS TE</a></h3>

<p>MPLS TE introduces yet another twist into load-balancing, including the potential for offline optimization of paths; typically you buy an application to perform offline load optimization among various MPLS TE tunnels in the network.  This too, is a very deep subject... I mention it only because you're asking about load-balancing with MPLS ""automatically"".</p>
","6922"
"Remote sniffing with ERSPAN to the desktop","3902","","<p>I know how to use both SPAN and RSPAN. If I'm not wrong, ERSPAN leads us to the possibility of remotely monitoring a router through an IP network and a GRE tunnel. However a tunnel end-point is needed. </p>

<p>My question is, is it possible for the tunnel endpoint to be a desktop computer to receive the mirrored traffic? I'm mostly looking for an OpenSource/Freware solution, since I guess a proprietary one would involve VMWare Vswitch or Nexus1000V.</p>

<p>Dynamips could be a solution, but I don't think any routers support ERSPAN.</p>

<p>I know about <a href=""http://openvswitch.org/"" rel=""nofollow"">OpenVswitch</a>, but it does not support ERSPAN.</p>
","<p>There are a couple of options, depending on how much traffic you will receive:</p>

<ul>
<li>If you're going to receive a lot of traffic, should use <a href=""http://staff.washington.edu/corey/gulp/"" rel=""nofollow"">gulp</a>, which runs on linux; <a href=""http://staff.washington.edu/corey/gulp/"" rel=""nofollow"">gulp</a> requires the linux <a href=""http://www.ntop.org/products/pf_ring/"" rel=""nofollow"">pf_ring</a> kernel module.</li>
<li>If the bandwidth requirements are reasonable, you could simply use your laptop with <a href=""https://www.wireshark.org/lists/wireshark-bugs/201009/msg00508.html"" rel=""nofollow"">wireshark's ERSPAN decoder</a>; wireshark can see the protocols inside <a href=""https://supportforums.cisco.com/document/139236/understanding-spanrspanand-erspan"" rel=""nofollow"">ERSPAN</a> v2 and v3 packets.  Use <code>ip proto 0x2f</code> as your capture filter, if you want to only capture ERSPAN traffic.  I use the wireshark to capture <a href=""https://supportforums.cisco.com/document/139236/understanding-spanrspanand-erspan"" rel=""nofollow"">ERSPAN</a> from Catalyst6500 user ports when I need to remotely sniff a port without walking up to the switch with a laptop.  This works well for user ports and even some server ports (as long as they aren't sending tons of traffic)</li>
</ul>

<p>Example ERSPAN config:</p>

<pre><code>!
monitor session 2 type erspan-source
 source interface GigabitEthernet7/22
 destination
  erspan-id 1
  ! This is the ip address of gulp, or the wireshark laptop
  !    If using wireshark, capture with ""ip proto 0x2f""
  ip address 10.1.1.5
  ! This is the IP address of the switch sourcing ERSPAN packets
  origin ip address 10.21.4.12
 no shutdown
</code></pre>
","3275"
"Check split tunnel","3900","","<p>I am using Shrew Client 2.2.2 to use a VPN connection with split tunneling. How can I check or where can I see, that the split tunnel is working properly?</p>

<p>Thanks in advance,
Dirk</p>
","<p>Traceroute will show you the path your traffic is following. With split tunneling, a traceroute to an internet IP should not pass your VPN gateway.</p>

<p>Another way to make sure traffic to the internet is not going through the tunnel is by visiting a website which shows your IP address (eg. <a href=""http://www.whatismyip.com"" rel=""nofollow"">whatismyip.com</a> or <a href=""http://ifconfig.me"" rel=""nofollow"">ifconfig.me</a>). If your IP address is from your local provider and not from the network your tunnel is connected to, the packets were routed to the website directly, not through the tunnel.</p>
","9616"
"Why does 1000BASE-T need Auto-MDIX?","3899","","<p>A 100BASE-TX PC interface sends out its frames on pins 1,2 and receives frames on pins 3,6. If we connect this PC's NIC with that of another PC we cannot use a straightout cable, because the frames sent by the first PC would arrive on pins 1,2 of the second PC, which can only trasmit, not receive. In this case we clearly need a crossover cable or auto-mdix.</p>

<p>Now if we have a PC with a 1000BASE-T NIC, frames can be sent out and received on any of four cable pairs. If we connect this PC to another 1000BASE-T PC and the first one sends a message out of pins 1,2 then the second PC may use its 1,2 pair to receive the message. The way I see it, no crossover is necessary. </p>

<p>Where am I going wrong?</p>
","<p>1000Base-T strictly speaking does not need auto-MIDX.  However, when the standard was written, inter-operation with older technologies was taken into account.  So to keep things simple, when communicating with a 100base or 10base device, auto-MIDX is there so crossover cables are no longer necessary.</p>

<p><strong>Edit:</strong> I forgot to mention, while auto-MIDX is in the standard, it is an optional feature, so it may not be present in all hardware.</p>
","752"
"Should i run UDLD with spanning tree?","3884","","<p>Can spanning tree and UDLD be run together, and if so, is this a good idea?</p>
","<p>UDLD is generally run on fibre media, it is not required on UTP due to the use of Fast Link Pulse which is already monitoring link status.</p>

<p><a href=""http://ericleahy.com/index.php/bpdu-guard-bpdu-filter-root-guard-loop-guard-udld/"">This page has a very good explanation of the various L2 protections available</a>. Here is an excerpt specifically regarding UDLD:</p>

<blockquote>
  <p>UDLD is used to detect if a link is only available in one direction,
  for example half the fibre is disconnected. UDLD performs this check
  faster than STP will bring the port in to a fowarding state. That
  means if you have UDLD and STP enabled then UDLD will prevent STP from
  bringing a port in to a state where it will forward traffic to
  nowhere.</p>
  
  <p>A unidirectional link occurs when traffic is transmitted between
  neighbors in one direction only. Unidirectional Link Detection is a
  Layer 2 protocol. UDLD performs tasks that Layer 1  mechanisms, such
  as auto negotiation, cannot perform. When UDLD and auto-negotiation
  are enabled, both Layer 1 and Layer 2 detections work together to
  prevent physical and logical unidirectional connections and the
  malfunctioning of other protocols. Unidirectional links can cause 
  spanning-tree topology loops. UDLD enables devices to detect when a
  unidirectional link exists and also to shut down the affected
  interface. UDLD is useful on a fiber ports to prevent  network issues
  resulting in miswiring at the patch panel causing the link to be in
  up/up status but the BPDUs are lost.</p>
  
  <p>With UDLD enabled, the switch periodically sends UDLD protocol packets
  to its neighbor and expects the packets to be echoed back before a
  predetermined timer expires. If the timer  expires, the switch
  determines the link to be unidirectional and shuts down the port. If
  messages are not received within the timeout interval (45 seconds),
  the port is disabled. The messages are sent out every default
  interval, which is 15 seconds.</p>
  
  <p>The 45 seconds it takes to detect a unidirectional link and errdisable
  the port is less than the 50 seconds it would take for STP to
  transition the port to a Forwarding state, which is based on 20
  seconds for Max Age + 30 seconds for Listening and Learning. This
  prevents a loop that would otherwise be caused if STP transitioned the
  port into the Forwarding state because of a lack of received BPDUs.</p>
</blockquote>

<p>So in summary, yes they can be run together and on fibre links they <em>should</em> be run together.</p>
","92"
"Unicast RPF On the Edge","3882","","<p>Unicast RPF is supposed to prevent source addresses that differ from what they should be to be allowed. While reading Cisco's documentation for URPF, I noticed that there are options to allow it to be used on an uplink interface by letting it go by the routing-table.</p>

<p>My question is, if it's going by a default route wouldn't all source addresses be allowed? What benefit would URPF be doing at that point? </p>

<p>I'm sure I'm missing something, so I'd really like a point in the right direction.</p>
","<p>Unicast Reverse Path Forwarding (RPF) functions in three distinct modes and can potentially help reduce a router's attack vector, specifically from spoofed IP addresses.</p>

<h2>Strict Mode</h2>

<p><code>(config-if)#ip verify unicast source reachable-via rx</code></p>

<p>In strict mode, a router will inspect and check an incoming packet's source IP address against it's Forwarding Information Base (FIB) table for a matching route. <em>If the route to that source IP address is reachable via the interface it was received on</em>, the packet will be received. By default, a default route is not considered in strict mode (as configured above).</p>

<h3><em>Strict Mode Options:</em></h3>

<p>Following the configuration of Unicast RPF strict mode on a given interface, a router can no longer ping itself on that interface:</p>

<pre><code>#sh ip int bri | ex unas|Int
FastEthernet0/0            11.0.11.1

#ping 11.0.11.1                                    
.....
Success rate is 0 percent (0/5)
</code></pre>

<p>Verification of URPF dropped packets:</p>

<pre><code>#show ip int fa0/0 | i ^  [1-9]+ verification drops
     5 verification drops
#show ip traffic | i unicast
     0 no route, 5 unicast RPF, 0 forced drop
</code></pre>

<p>This behavior can be altered by adding the <code>allow-self-ping</code> syntax:</p>

<p><code>(config-if)#ip verify unicast source reachable-via rx allow-self-ping</code></p>

<p>Additionally, as mentioned in your question, strict mode can allow incoming packet's source IP addresses to be checked against a default route. This is enabled by the syntax <code>allow-default</code>:</p>

<p>In strict mode, adding the syntax <code>allow-default</code> by itself will only prevent receipt from incoming packet's source IP address that have a route out via a different interface than received. This is assuming there are no access-lists or null routes configured on the router. All routeable source addresses that are reachable out the interface they're received will either match against specific routes or the default route.</p>

<p>However, if you were to employ null routes, the most specific route will be evaluated first, before the URPF check gets to the default route, and will act as a black list(s) for known malicious IP ranges.</p>

<p><em>Example -</em> All traffic sourced from 3.0.0.0/8 will be dropped by the URPF check:</p>

<pre><code>(config-if)#ip verify unicast source reachable-via rx allow-default
(config)#ip route 3.0.0.0 255.0.0.0 null 0

Bad-Source-RTR#ping 11.0.11.1 so l1

Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 11.0.11.1, timeout is 2 seconds:
Packet sent with a source address of 3.3.3.3 
.....
Success rate is 0 percent (0/5)
</code></pre>

<p>Furthermore, you can specify an Access-Control List (ACL) in stead of adding the <code>allow-default</code> syntax to accomplish a structured list of allowed and denied addresses. Addresses that are reachable out of the interface they were received on and are matched in a defined ACL are either dropped or permitted accordingly.</p>

<pre><code>!
access-list 23 permit 3.0.0.0 0.255.255.255
access-list 23 deny   4.0.0.0 0.255.255.255 log
access-list 23 permit any
!
(config)#int fa0/0                                 
(config-if)#ip verify unicast source reachable-via rx 23
</code></pre>

<p>Finally, you can specify an ACL with the <code>allow-default</code> syntax, but it will have no effect. The packets will not be checked against ACLs specified with the <code>allow-default</code> option.</p>

<pre><code>#ip verify unicast source reachable-via rx allow-default ? 
  &lt;1-199&gt;          A standard IP access list number
  &lt;1300-2699&gt;      A standard IP expanded access list number
</code></pre>

<h2>Loose Mode</h2>

<pre><code>R1(config-if)#ip verify unicast source reachable-via any
</code></pre>

<p>In loose mode, a router will inspect an incoming packet's source IP address, and check it against it's FIB table for a matching route. If the route to that source IP address is reachable, the packet can be received, <em>regardless of the interface it was received on.</em> By default, a default route is not considered in loose mode (as configured above).</p>

<p>Loose mode and strict mode have similar configuration options; The main differences are the syntax that's used (<code>any</code> vs. <code>rx</code>) and whether or not the the incoming packet's source IP address is reachable via the interface it was received on.</p>

<pre><code>(config-if)#ip verify unicast source reachable-via any ?
  &lt;1-199&gt;          A standard IP access list number
  &lt;1300-2699&gt;      A standard IP expanded access list number
  allow-default    Allow default route to match when checking source address
  allow-self-ping  Allow router to ping itself (opens vulnerability in
                   verification)
</code></pre>

<h2>VRF Mode</h2>

<p>VRF mode can leverage either loose or strict mode in a given VRF and will evaluate an incoming packet's source IP address against the VRF table configured for an eBGP neighbor. </p>

<hr>

<p><strong>References:</strong> <br>
<a href=""http://www.cisco.com/web/about/security/intelligence/urpf.pdf"">Cisco URPF white paper</a><br>
<a href=""http://www.cisco.com/web/about/security/intelligence/unicast-rpf.html"">Understanding Unicast Reverse Path Forwarding</a><br>
<a href=""http://www.cisco.com/en/US/docs/ios/12_2/security/configuration/guide/scfrpf.html"">URPF configuration guide</a></p>
","3136"
"How many IP addresses can a device or an interface possess?","3876","","<p>Can one IP address be assigned to more then one device or interface? In which situations may this happen? </p>

<p>Can one device or interface posses more than one IP address?</p>
","<blockquote>
  <p>Can one IP address be assigned to more then one device or interface? In which situations may this happen?</p>
</blockquote>

<p>If you actually stopped to think this through, clearly this can happen. All you need to consider is all the consumer/CPE devices that default their management interfaces to an IP address something like 192.168.1.1. </p>

<p>Generally speaking, in a single local network (i.e. flat network or VLAN) a single IP address can only be assigned to one interface/device at any given time. The reason why is that other devices need to learn a correlation between a MAC address and an IP address. This is what the ARP process provides.</p>

<p>However like many general rules, there are exceptions and in this case these are normally mechanisms used to provide some sort of load balancing and/or redundancy.</p>

<p>Let's say you have two devices that both want to provide the same service on the local network. They could be programmed in a fashion where one responds to ARP for queries where the source MAC address is odd, and the other for even (or hashes or some other mechanism to group sources). This will allow the load to be distributed between the two.</p>

<p>If your two devices can then also maintain some sort of ""heartbeat"" and have the ability to ""take over"" the other device's MAC address in case of a failure, then you now also have a means of providing redundancy.</p>

<p>The presences of these capabilities and exactly how they work would be dependent on the features available in the device.</p>

<blockquote>
  <p>Can one device or interface posses more than one IP address?</p>
</blockquote>

<p>Yes, however this capability will depend on the device/operating system in question. Some may provide this capability by allowing you to create multiple ""virtual"" interfaces of some sort tied to the interface or device. Others may allow multiple IP addresses on one interface. Or they may be able to do both.</p>

<p>Here are examples of virtual interfaces (Linux pulled as example off web after quick search):</p>

<pre><code>[root@here]# ifconfig
eth0      Link encap:Ethernet  HWaddr 00:0C:29:28:11:22
          inet addr:172.16.16.125  Bcast:172.16.16.100  Mask:255.255.255.224
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:237 errors:0 dropped:0 overruns:0 frame:0
          TX packets:198 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:25429 (24.8 KiB)  TX bytes:26910 (26.2 KiB)
          Interrupt:18 Base address:0x2000

eth0:0    Link encap:Ethernet  HWaddr 00:0C:29:28:11:22
          inet addr:172.16.16.126  Bcast:172.16.16.100  Mask:255.255.255.224
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          Interrupt:18 Base address:0x2000

eth0:1    Link encap:Ethernet  HWaddr 00:0C:29:28:11:22
          inet addr:172.16.16.127  Bcast:172.16.16.100  Mask:255.255.255.224
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          Interrupt:18 Base address:0x2000
</code></pre>

<p>Here is an example of multiple IP address on an interface (BSD based load balancer IIRC):</p>

<pre><code>vlan100: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
    inet 192.168.1.30 netmask 0xffffffff broadcast 48.0.5.12
    inet 192.168.1.40 netmask 0xffffffff broadcast 48.0.5.12
    inet 192.168.1.50 netmask 0xffffffff broadcast 48.0.5.12
    inet 1.2.3.35 netmask 0xffffffff broadcast 48.0.5.12
    inet 1.2.3.36 netmask 0xffffffff broadcast 48.0.5.12
    inet 1.2.3.37 netmask 0xffffffff broadcast 48.0.5.12
    inet 1.2.3.55 netmask 0xffffffff broadcast 48.0.5.12
    inet 1.2.3.233 netmask 0xffffffff broadcast 48.0.5.12
    inet 1.2.3.250 netmask 0xffffffff broadcast 48.0.5.12
    inet 1.2.3.252 netmask 0xffffffff broadcast 48.0.5.12
    inet 1.2.3.253 netmask 0xffffffff broadcast 60.0.5.12
    inet 192.168.1.10 netmask 0xffffff00 broadcast 192.168.1.255
    ether 00:11:22:33:44:55
</code></pre>

<blockquote>
  <p>How many IP addresses can a device or an interface possess?</p>
</blockquote>

<p>This will be entirely dependent on what limitations are present in the device/operating system. Without knowing a specific device/operating system (and version), this is not a question that can be answered.</p>
","23758"
"Looking for suitable Cisco model for new switches in datacentre environment","3854","","<p>I'm looking for some model recommendations to replace our existing switch hardware. Doesn't need to be too specific, but some pointers on what models to look at would be appreciated. I've got two particular models in mind but I would be interested in seeing if people call me mad for trying to use these models, and what kind of problems it might cause if I do use these models. </p>

<p>I am partially open to Juniper and other recommendations, but we've already started heading down the Cisco route with CPE etc, so that's what I'll be focused on. I am also focused on fixed configuration switches, as I'm sure anything too modular would be well outside our price range. Would be good to have the option of modules to move from 1GE to 10GE as I've seen with the 3750-x models, though.</p>

<h1>Current Setup</h1>

<p>Basically right now we're using 2950 48x100 Mbps switches for all of our traffic, and a software router.</p>

<p>We've only got a single rack of gear, but are in our own 6 rack cage, so there will be a lot of expansion.</p>

<p>The amount of bandwidth we use is low, 10 - 20 Mbps. And the majority of our traffic is hosted web applications or remote access applications. We are doing an increasing amount of virtual servers, and so there is a need to be able to ocassionally transfer images between hosts.</p>

<h1>New Setup</h1>

<p>For the new setup, I am working towards something like:</p>

<ul>
<li><p>Redundant ASR 1001s to handle core and edge routing.</p></li>
<li><p>Two stacked Catalyst switches in the core, with at least 4x1GE uplinks per switch (6 would be better); and 48x1GE for the servers we keep in the same rack as our core equipment (eg. Storage Servers)</p></li>
<li><p>Catalyst access switches at the top of each rack (potentially two stacked as well). With 1x1GE uplink going to each core switch, for a total of 2 uplinks to each rack. 48x1GE ports to the servers in each rack.</p></li>
</ul>

<h1>Requirements: Wants and Needs</h1>

<p>The main requirement for this new hardware is simply to provide gigabit transfer speeds to each server so that nightly image backups can be done to a storage server, which will be connected by LACP. Sustaining 1Gbps on all servers is not so much an issue, more that we're not capped at 100 Mbps.</p>

<h2>Core Switches</h2>

<ul>
<li>Need: 48x1GE (non-blocking preferrable)</li>
<li>Need: At least 4x1GE uplinks (6 preferrable)</li>
<li>Need: Redundant power</li>
<li>Need: LACP/PAgP</li>
<li>Want: Ability to upgrade to 10GE uplinks in future</li>
<li>Want: StackWise or similar</li>
<li>Want: L3 Switch capabilities. MPLS Edge capabilities (so we can deploy the same model at smaller sites)</li>
</ul>

<p><strong>I am looking at Cisco Catalyst 3750-x for this role.</strong> It seems to fit the bill pretty well, my main concern is that looking around it seems like this switch has a fairly small port buffer, and is generally not recommended for datacentre environments (particularly due to that).</p>

<p>See here: <a href=""https://networkengineering.stackexchange.com/questions/135/can-i-use-a-catalyst-2960-s-for-iscsi"">Can I use a Catalyst 2960-S for iSCSI?</a></p>

<p>I'm looking at the 4948-E instead, but it's missing a number of nice features. I'm guessing the appropriate aggregation/core switches would be something like 4500-x which is out of our price range.</p>

<p><strong>Is there a similarly datacentre oriented model that offers more of the features that the 3750-X has?</strong></p>

<h2>Access Switches</h2>

<ul>
<li>Need: 48x1GE Switch ports for servers</li>
<li>Need: 2x1GE Uplinks</li>
<li>Need: Cost is a factor with these, so it's going to end up being low-end.</li>
<li>Need: LACP/PAgP</li>
<li>Want: Stackable</li>
<li>Want: L3 Switching capabilities</li>
<li>Want: Redundant Power</li>
</ul>

<p><strong>I'm looking at the Catalyst 2960-S here</strong>, which would allow me to stack using the optional module, I believe. </p>

<p>To avoid being called an idiot, I'm also thinking that the 4948-E might be better suited. </p>

<p>I'm interested to see what the recommendations are, since I want to be using the ""right"" hardware for the job, but I'm not entirely convinced that given our current setup, I should be concerned about if I am using what would be classified as using a ""desktop access"" switch. (Keeping in mind we are coming from some old 2950s which have done the job).</p>

<h1>Port Buffer Sizes</h1>

<p>With this one, I honestly can't quantify what our requirements would be exactly, I'm not even familiar with what is a lot and what isn't in terms of buffer size. The best I can do is to give a picture of what might potentially cause this to be an issue.</p>

<p>Each night we'll be backing up 30-40 servers, each one with about 300 - 1 TB of data to be imaged (though it's differential so actual data sizes will vary). All of these servers will back up to the same single storage server, which will have 4 GE capacity.</p>

<p>I expect that this 4GE capacity will be saturated. The source servers, I'm not too sure as I haven't tested this yet, but I imagine most servers will not saturate their 1GE links.  So I suppose the port buffer sizes are only really an issue on the 4x1GE links for the storage server. But to add to that, I don't really mind if lack of buffer causes slower transfer rates, as long as it doesn't get so bad that the iSCSI connections actually drop.</p>

<p>Which again makes me wonder if I'm over-thinking this particular thing, and it may not be an issue. I've never really experienced (or at least noticed) this particular problem before, it just stuck out to me that several people have complained about the buffers being too small on the 3750 and 2960 models. Like here: <a href=""http://www.gossamer-threads.com/lists/cisco/nsp/150448"" rel=""nofollow noreferrer"">http://www.gossamer-threads.com/lists/cisco/nsp/150448</a> and here: <a href=""http://www.networking-forum.com/viewtopic.php?t=23060"" rel=""nofollow noreferrer"">http://www.networking-forum.com/viewtopic.php?t=23060</a></p>

<p>I'm in the process of deploying these image backups, and even at 100 Mbps, it still works, it's just annoying because it's obviously getting capped. Day traffic I'm not really concerned about as we don't even come close to saturating our 1GE VLAN trunk ports at the moment, and won't for some time.</p>

<h1>Budget</h1>

<p>Pretty much on the low end for both the core and access switches. Which I know will limit our options, but then, our needs I don't think are too intense. </p>

<p>Basing my prices in AUD, the 3750-Xs I can see are around $5k, I think I can manage 5k, <em>maybe</em> closer to 10k for the core switches. </p>

<p>But for the access switches definitely looking at something around the 2 - 3k mark. </p>

<p>Also would be interested in older models that I might be able to get refurb at good prices. But obviously am looking more at brand new.</p>
","<p>If you need to stick to the lower end because of budget concerns, the 4948 will do what you need.  I have never thought of the 3750 as a data center switch.  It a great closet switch with full L3 and net flow.  It's great for small offices, but not for servers.</p>

<p>I personally have used the 4948 in a data center, up linked to 6500's, until we outgrew them and went with a Nexus solution.  I have used a fiber 3750 (the model with 12 SFP ports) at remote sites with 2960's up linked to it and it, in turn, up linked to our providers MPLS router.  That is where the 3750 belongs.  It's an advanced closet switch.  We used it to separate voice from data and traffic shape before we sent the traffic to the provider.</p>
","2895"
"OpenVPN Bridge on pfsense: once LAN pings clients, connectivity breaks","3840","","<p>So I'm using a pfsense openvpn to bridge my LAN segment so VPN users can access the servers.</p>

<p>The problem I'm having now is that I can establish a connection, I can ping the LAN server from the VPN, but as soon as I ping the client from the LAN server, there is no connectivity anymore between both parties.</p>

<p>So: </p>

<ul>
<li>connect from the VPN client to the LAN => works</li>
<li>ping the LAN from the VPN client => works</li>
<li>access server from the VPN (ssh, ftp,...) => works</li>
<li>ping client from server => doesn't work</li>
<li>ping LAN from the VPN client =>  doesn't work anymore</li>
</ul>

<p>My bridge has em1 and ovpns1 bridged. I noted with tcpdump that ICMP is reaching the bridge between LAN and the VPN segment. But it's not put onto the em1 interface for some reason. </p>

<p>My pfsense is running on an ESXi host with th vSwitch port enabled in promiscious mode. Firewall rules allow in and outbound traffic regardless origin or destination.</p>
","<p>Turns out there was an implicit rule in the firewall defined on the bridge which dropped fragmented packets. This is not shown in the normal firewall overview.</p>

<p>I ended up turning off this 'feature' in the system ->advanced -> firewall/NAT section.</p>
","3867"
"Change Ping Response for Traffic Blocked by Access Control List","3822","","<p>I am trying to ping a host, let's say 10.1.1.1, from 20.1.1.1.</p>

<p>I have created the ACL:</p>

<pre><code>R1(config)#access-list 1
R1(config)#Deny 20.1.1.1 
R1(config)#Permit any
R1(config)# int s0/0
R1(config-if)#ip access-group 1 in 
</code></pre>

<p>Never mind the configuration, I can deny the host 20.1.1.1 which tries to access 10.1.1.1.</p>

<p>Now when I try to ping 10.1.1.1 from 20.1.1.1, it returns <code>U.U.U</code>.  This means destination host unreachable or it is blocked.</p>

<p>I don't want a malicious person to know that I have used an access-list to block him. I want to change this ICMP Request to be done so that when it throws the error message, it should not return <code>U.U.U</code>.  It should read Destination Host Unreachable or anything better than this.</p>

<p>Kindly Suggest to me how to do this...Thank You</p>
","<blockquote>
<pre><code>R1(config)#access-list 1
R1(config)#Deny 20.1.1.1 
R1(config)#Permit any
R1(config)# int s0/0
R1(config-if)#ip access-group 1 in
</code></pre>
  
  <p>When i try to ping 10.1.1.1 it returns <code>U.U.U</code> -----> Which means destination host unreachable.</p>
</blockquote>

<p>The only thing you can do is add <code>no ip unreachables</code> to Serial0/0.  This would make pings simply timeout instead of receiving an ICMP admin prohibited message when packets are denied on the serial interface.</p>

<p><strong>Examples</strong>:</p>

<p>The following examples illustrate what happens:</p>

<ul>
<li>When ROUTER1 pings ROUTER2:Gi0/0, and ROUTER2 denies ROUTER1 via acl 166; <code>ip unreachables</code> is configured on Gi0/0</li>
<li>When ROUTER1 pings ROUTER2:G0/0, and ROUTER2 denies ROUTER1 via acl 166; <code>no ip unreachables</code> is configured on Gi0/0</li>
</ul>

<h3>With <code>ip unreachables</code> (which is the default) on the interface</h3>

<p>On the router with the ACL...</p>

<pre><code>ROUTER2#sh runn | i access-list 166
access-list 166 deny  ip host 192.0.2.111 any
access-list 166 permit ip any any
ROUTER2#sh runn int gi0/0
!
interface GigabitEthernet0/0
 ip address 192.0.2.29 255.255.255.0
 ip access-group 166 in
 no ip redirects
 no ip proxy-arp
</code></pre>

<p>And on the host being blocked...</p>

<pre><code>ROUTER1#debug ip icmp
ROUTER1#ping 192.0.2.29 source lo0

Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 192.0.2.29, timeout is 2 seconds:
Packet sent with a source address of 192.0.2.111
U.U.U
Success rate is 0 percent (0/5)
ROUTER1#sh log | i administrat
Jan 16 11:02:29.251 CST: ICMP: dst (192.0.2.111) administratively 
 prohibited unreachable rcv from 192.0.2.29
Jan 16 11:02:31.255 CST: ICMP: dst (192.0.2.111) administratively 
 prohibited unreachable rcv from 192.0.2.29
Jan 16 11:02:33.263 CST: ICMP: dst (192.0.2.111) administratively 
 prohibited unreachable rcv from 192.0.2.29
</code></pre>

<h3>With <code>no ip unreachables</code></h3>

<p>Adding <code>no ip unreachables</code> on ROUTER2...</p>

<pre><code>ROUTER2#conf t
ROUTER2(config)#int gi0/0
ROUTER2(config-if)#no ip unreach
</code></pre>

<p>Now the pings fail <em>silently</em>...</p>

<pre><code>ROUTER1#ping 192.0.2.29 source lo0

Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 192.0.2.29, timeout is 2 seconds:
Packet sent with a source address of 192.0.2.111
.....
Success rate is 0 percent (0/5)
ROUTER1#
</code></pre>
","5873"
"Why only after 3-duplicate ACK retransmission takes place in TCP?","3818","","<p>Is there any reason of choosing ""3"" only for retransmission. why not 2 or 4 or any other number?</p>
","<p>You're referring to 'Fast Retransmit' in the TCP Reno implementation. It is basically an assumption.</p>

<p><a href=""https://tools.ietf.org/html/rfc2001#section-3"" rel=""nofollow"">RFC 2001, TCP Slow Start, Congestion Avoidance, Fast Retransmit, and Fast Recovery Algorithms</a> covers this:</p>

<blockquote>
  <p>Since TCP does not know whether a duplicate ACK is caused by a lost
  segment or just a reordering of segments, it waits for a small number
  of duplicate ACKs to be received. </p>
  
  <p>It is assumed that if there is just a reordering of the segments,
  there will be only one or two duplicate ACKs before the reordered
  segment is processed, which will then generate a new ACK. If three or
  more duplicate ACKs are received in a row, it is a strong indication
  that a segment has been lost.</p>
</blockquote>

<p>The key here is that Reno wants to avoid slow-start it makes the assumption that 3 dup-acks received without any intervening packets is the receiver indicating that it wants that single segment resent(fast re-transmit). If a timeout occurs that is when Reno will trigger slow start.</p>

<p><a href=""https://tools.ietf.org/html/rfc2001#section-4"" rel=""nofollow"">RFC 2001, TCP Slow Start, Congestion Avoidance, Fast Retransmit, and Fast Recovery Algorithms, Section 4, Fast Recovery</a>:</p>

<blockquote>
  <p>After fast retransmit sends what appears to be the missing segment,
  congestion avoidance, but not slow start is performed.  This is the
  fast recovery algorithm.  It is an improvement that allows high
  throughput under moderate congestion, especially for large windows.</p>
  
  <p>The reason for not performing slow start in this case is that the
  receipt of the duplicate ACKs tells TCP more than just a packet has
  been lost.  Since the receiver can only generate the duplicate ACK
  when another segment is received, that segment has left the network
  and is in the receiver's buffer.  That is, there is still data flowing
  between the two ends, and TCP does not want to reduce the flow
  abruptly by going into slow start.</p>
  
  <p>The fast retransmit and fast recovery algorithms are usually
  implemented together as follows.</p>
  
  <ol>
  <li><p>When the third duplicate ACK in a row is received, set ssthresh to
  one-half the current congestion window, cwnd, but no less than two
  segments.  Retransmit the missing segment.  Set cwnd to ssthresh
  plus 3 times the segment size.  This inflates the congestion window
  by the number of segments that have left the network and which the
  other end has cached (3).</p></li>
  <li><p>Each time another duplicate ACK arrives, increment cwnd by the
   segment size.  This inflates the congestion window for the
   additional segment that has left the network.  Transmit a
   packet, if allowed by the new value of cwnd.</p></li>
  <li><p>When the next ACK arrives that acknowledges new data, set cwnd
   to ssthresh (the value set in step 1).  This ACK should be the
   acknowledgment of the retransmission from step 1, one round-trip
   time after the retransmission.  Additionally, this ACK should
   acknowledge all the intermediate segments sent between the lost
   packet and the receipt of the first duplicate ACK.  This step is
   congestion avoidance, since TCP is down to one-half the rate it
   was at when the packet was lost.</p></li>
  </ol>
  
  <p>The fast retransmit algorithm first appeared in the 4.3BSD Tahoe
  release, and it was followed by slow start.  The fast recovery
  algorithm appeared in the 4.3BSD Reno release.</p>
</blockquote>
","30622"
"config pimd on Linux to forward incoming multicast packet to OpenVPN tunnel interface","3813","","<p><img src=""https://i.imgur.com/btR4ZdE.png"" alt=""network diagram""></p>

<p>Does anyone know how could I setup pimd on Linux so that multicast address from 225.0.30.30 could route to 172.24.0.66/30 router on the right?</p>

<p>So this is the lab I just setup today,
<img src=""https://i.imgur.com/pUAjCOb.png"" alt=""PoC network diagram"">
<img src=""https://i.imgur.com/EV2SpmW.png"" alt=""host 1 IP config"">
<img src=""https://i.imgur.com/WnqGqJV.png"" alt=""Router A IP config"">
<img src=""https://i.imgur.com/ZY8yRt2.png"" alt=""Router B IP config""></p>

<p>In the lab environment, I changed IP so that I don't need to run another NAT setup.
Router A and B is running pimd without any detail configuration, here is pimd -r detail for both routers:
<img src=""https://i.imgur.com/I4PW932.png"" alt=""pimd -r detail on router A"">
<img src=""https://i.imgur.com/DUzUsXw.png"" alt=""pimd -r detail on router B""></p>

<p>After all parts glued together, I start fire ""iperf -c 225.0.100.100 -u -t 1 -i 1"" on host 1, and ""iperf -s -u -B 225.0.100.100 -i 1"" on router B; Router B receive no multicast at all, anyone know what's wrong with this?</p>

<p>EDIT: testing Everton's suggestion, result still nothing</p>

<p>test_igmpv3_join result from Router B:</p>

<p><img src=""https://i.imgur.com/3wXyEeS.png"" alt=""test_igmpv3_join""></p>

<p>PIM debug log from Router A after test_igmpv3_join running:</p>

<pre><code>2016/01/28 13:55:03 PIM: pim_socket_recvfromto: HAVE_IP_PKTINFO to=224.0.0.22,2
2016/01/28 13:55:03 PIM: pim_zebra.c fib_lookup_if_vif_index: high vif_index=2 &gt; highest_vif_index=-1 nexthop for address 10.101.16.135
2016/01/28 13:55:03 PIM: pim_zebra.c fib_lookup_if_vif_index: pim disabled on interface eth0 vif_index=2 ?
2016/01/28 13:55:03 PIM: pim_zebra.c igmp_source_forward_start: could not find input interface for source 10.101.16.135
2016/01/28 13:55:03 PIM: pim_zebra.c fib_lookup_if_vif_index: high vif_index=2 &gt; highest_vif_index=-1 nexthop for address 10.101.16.135
2016/01/28 13:55:03 PIM: pim_zebra.c fib_lookup_if_vif_index: pim disabled on interface eth0 vif_index=2 ?
2016/01/28 13:55:03 PIM: pim_zebra.c igmp_source_forward_start: could not find input interface for source 10.101.16.135
2016/01/28 13:55:03 PIM: pim_socket_recvfromto: HAVE_IP_PKTINFO to=224.0.0.22,2
2016/01/28 13:55:03 PIM: pim_zebra.c fib_lookup_if_vif_index: high vif_index=2 &gt; highest_vif_index=-1 nexthop for address 10.101.16.135
2016/01/28 13:55:03 PIM: pim_zebra.c fib_lookup_if_vif_index: pim disabled on interface eth0 vif_index=2 ?
2016/01/28 13:55:03 PIM: pim_zebra.c igmp_source_forward_start: could not find input interface for source 10.101.16.135
2016/01/28 13:55:03 PIM: pim_zebra.c fib_lookup_if_vif_index: high vif_index=2 &gt; highest_vif_index=-1 nexthop for address 10.101.16.135
2016/01/28 13:55:03 PIM: pim_zebra.c fib_lookup_if_vif_index: pim disabled on interface eth0 vif_index=2 ?
2016/01/28 13:55:03 PIM: pim_zebra.c igmp_source_forward_start: could not find input interface for source 10.101.16.135
2016/01/28 13:55:04 PIM: pim_socket_recvfromto: HAVE_IP_PKTINFO to=224.0.0.13,103
2016/01/28 13:55:04 PIM: Recv IP PIM pkt size=30 from 10.101.16.135 to 224.0.0.13 on fd=9 on ifindex=2 (sock_ifindex=2)
2016/01/28 13:55:04 PIM: Recv IP packet from 10.101.16.135 to 224.0.0.13 on eth0: size=30 ip_header_size=20 ip_proto=103
2016/01/28 13:55:04 PIM: Recv PIM packet from 10.101.16.135 to 224.0.0.13 on eth0: ttl=1 pim_version=2 pim_type=0 pim_msg_size=10 checksum=93df
2016/01/28 13:55:04 PIM: pim_hello_recv: from 10.101.16.135 on eth0
2016/01/28 13:55:04 PIM: pim_hello_recv: parse left_size=6: PIM hello TLV type=1 length=2 from 10.101.16.135 on eth0
2016/01/28 13:55:04 PIM: pim_hello_recv: PIM hello option from 10.101.16.135 on interface eth0: holdtime=105
2016/01/28 13:55:04 PIM: neighbor_timer_off: cancelling timer for neighbor 10.101.16.135 on eth0
2016/01/28 13:55:04 PIM: pim_neighbor_timer_reset: starting 105 sec timer for neighbor 10.101.16.135 on eth0
2016/01/28 13:55:04 PIM: dr_election_by_addr: on interface eth0
2016/01/28 13:55:04 PIM: Scheduling READ event on PIM socket fd=9
2016/01/28 13:55:04 PIM: pim_socket_recvfromto: HAVE_IP_PKTINFO to=224.0.0.13,103
2016/01/28 13:55:04 PIM: Recv IP PIM pkt size=30 from 10.101.16.135 to 224.0.0.13 on fd=11 on ifindex=2 (sock_ifindex=3)
2016/01/28 13:55:04 PIM: Scheduling READ event on PIM socket fd=11
2016/01/28 13:55:07 PIM: Rescheduling 30 sec hello on interface eth1
2016/01/28 13:55:07 PIM: hello_send: to 224.0.0.13 on eth1: holdt=105 prop_d=500 overr_i=2500 dis_join_supp=0 dr_prio=1 gen_id=2518d352 addrs=2
2016/01/28 13:55:07 PIM: pim_tlv_append_addrlist_ucast: number of encoded secondary unicast IPv4 addresses: 0
2016/01/28 13:55:07 PIM: pim_msg_send: to 224.0.0.13 on eth1: msg_size=34 checksum=3adb
2016/01/28 13:55:07 PIM: pim_socket_recvfromto: HAVE_IP_PKTINFO to=224.0.0.1,2
2016/01/28 13:55:09 PIM: pim_socket_recvfromto: HAVE_IP_PKTINFO to=224.0.0.13,103
2016/01/28 13:55:09 PIM: Recv IP PIM pkt size=56 from 10.101.16.135 to 224.0.0.13 on fd=9 on ifindex=2 (sock_ifindex=2)
2016/01/28 13:55:09 PIM: Recv IP packet from 10.101.16.135 to 224.0.0.13 on eth0: size=56 ip_header_size=20 ip_proto=103
2016/01/28 13:55:09 PIM: Recv PIM packet from 10.101.16.135 to 224.0.0.13 on eth0: ttl=1 pim_version=2 pim_type=4 pim_msg_size=36 checksum=b88e
2016/01/28 13:55:09 PIM: pim_pim.c pim_pim_packet: unsupported PIM message type=4 from 10.101.16.135 on eth0
2016/01/28 13:55:09 PIM: pim_sock_read: pim_pim_packet() return=-1
2016/01/28 13:55:09 PIM: Scheduling READ event on PIM socket fd=9
2016/01/28 13:55:09 PIM: pim_socket_recvfromto: HAVE_IP_PKTINFO to=224.0.0.13,103
2016/01/28 13:55:09 PIM: Recv IP PIM pkt size=56 from 10.101.16.135 to 224.0.0.13 on fd=11 on ifindex=2 (sock_ifindex=3)
2016/01/28 13:55:09 PIM: Scheduling READ event on PIM socket fd=11
2016/01/28 13:55:12 PIM: pim_socket_recvfromto: HAVE_IP_PKTINFO to=224.0.0.22,2
2016/01/28 13:55:12 PIM: pim_zebra.c fib_lookup_if_vif_index: high vif_index=2 &gt; highest_vif_index=-1 nexthop for address 10.101.16.135
2016/01/28 13:55:12 PIM: pim_zebra.c fib_lookup_if_vif_index: pim disabled on interface eth0 vif_index=2 ?
2016/01/28 13:55:12 PIM: pim_zebra.c igmp_source_forward_start: could not find input interface for source 10.101.16.135
2016/01/28 13:55:15 PIM: pim_socket_recvfromto: HAVE_IP_PKTINFO to=224.0.0.22,2
2016/01/28 13:55:16 PIM: pim_socket_recvfromto: HAVE_IP_PKTINFO to=224.0.0.22,2
2016/01/28 13:55:16 PIM: pim_zebra.c fib_lookup_if_vif_index: high vif_index=2 &gt; highest_vif_index=-1 nexthop for address 10.101.16.135
2016/01/28 13:55:16 PIM: pim_zebra.c fib_lookup_if_vif_index: pim disabled on interface eth0 vif_index=2 ?
2016/01/28 13:55:16 PIM: pim_zebra.c igmp_source_forward_start: could not find input interface for source 10.101.16.135
2016/01/28 13:55:16 PIM: pim_socket_recvfromto: HAVE_IP_PKTINFO to=224.0.0.22,2
2016/01/28 13:55:21 PIM: Rescheduling 30 sec hello on interface eth0
2016/01/28 13:55:21 PIM: hello_send: to 224.0.0.13 on eth0: holdt=105 prop_d=500 overr_i=2500 dis_join_supp=0 dr_prio=1 gen_id=ca948d20 addrs=2
2016/01/28 13:55:21 PIM: pim_tlv_append_addrlist_ucast: number of encoded secondary unicast IPv4 addresses: 0
2016/01/28 13:55:21 PIM: pim_msg_send: to 224.0.0.13 on eth0: msg_size=34 checksum=f07b
</code></pre>

<p>Router A configuration:</p>

<pre><code>routerA# show run

Current configuration:
!
password quagga
log stdout
!
interface eth0
 ip pim ssm
 ip igmp query-interval 125
 ip igmp query-max-response-time-dsec 100
!
interface eth1
 ip pim ssm
 ip igmp
 ip igmp query-interval 125
 ip igmp query-max-response-time-dsec 100
!
interface eth2
!
interface eth3
!
interface lo
!         
!
line vty
!
end
</code></pre>

<p>Quagga pimd troubleshoot details</p>

<pre><code>routerA# show ip rib 10.101.16.135
Address         NextHop         Interface Metric Preference
10.101.16.135   0.0.0.0         eth0           0          0
routerA# show ip multicast 
Multicast disabled

Zclient update socket: 7 failures=0
Zclient lookup socket: 8 failures=0

Current highest VifIndex: -1
Maximum highest VifIndex: 31

Upstream Join Timer: 60 secs
Join/Prune Holdtime: 210 secs

RPF Cache Refresh Delay:    10000 msecs
RPF Cache Refresh Timer:    0 msecs
RPF Cache Refresh Requests: 5
RPF Cache Refresh Events:   2
RPF Cache Refresh Last:     00:02:20

Scan OIL - Last: 00:02:20  Events: 2
MFC Add  - Last: --:--:--  Events: 0
MFC Del  - Last: --:--:--  Events: 0

Interface Address         ifi Vif  PktsIn PktsOut    BytesIn   BytesOut
ioctl(SIOCGETVIFCNT=35296) failure for interface eth0 vif_index=-1: errno=9: Bad file descriptor
ioctl(SIOCGETVIFCNT=35296) failure for interface eth1 vif_index=-1: errno=9: Bad file descriptor
routerA# show ip mroute        
Proto: I=IGMP P=PIM

Source          Group           Proto Input iVifI Output oVifI TTL Uptime  
</code></pre>

<p>I saw something funny ""Multicast disabled"", so on Quagga pimd, I added config line ""ip multicast-routing"", then I fire up iperf to send out multicast packet and show the details again,</p>

<pre><code>routerA# show ip multicast 
Mroute socket descriptor: 14
Mroute socket uptime: 00:08:12

Zclient update socket: 7 failures=0
Zclient lookup socket: 8 failures=0

Current highest VifIndex: 3
Maximum highest VifIndex: 31

Upstream Join Timer: 60 secs
Join/Prune Holdtime: 210 secs

RPF Cache Refresh Delay:    10000 msecs
RPF Cache Refresh Timer:    0 msecs
RPF Cache Refresh Requests: 5
RPF Cache Refresh Events:   2
RPF Cache Refresh Last:     00:13:14

Scan OIL - Last: 00:13:14  Events: 2
MFC Add  - Last: 00:01:04  Events: 1
MFC Del  - Last: --:--:--  Events: 0

Interface Address         ifi Vif  PktsIn PktsOut    BytesIn   BytesOut
eth0      10.101.16.134     2   2    5687       0    8519126          0
eth1      172.24.0.65       3   3       0       0          0          0

routerA# show ip pim interface 
Interface Address         ifIndex Socket Uptime   Multi Broad MLoop AllMu Prmsc Del
eth0      10.101.16.134         2      9 00:23:20   yes   yes    no    no    no  no
eth1      172.24.0.65           3     11 00:23:20   yes   yes    no    no    no  no

routerA# show ip igmp sources 
Interface Address         Group           Source          Timer Fwd Uptime  
eth1      172.24.0.65     225.0.100.100   10.101.16.135   02:48   Y 00:02:03

routerA# show ip igmp interface 
Interface Address         ifIndex Socket Uptime   Multi Broad MLoop AllMu Prmsc Del
eth1      172.24.0.65           3     10 00:23:45   yes   yes   yes    no    no  no
</code></pre>

<p>but tcpdump on router B still receive no multicast packet.</p>

<p>Redo PIM debug log from Router A after test_igmpv3_join running:</p>

<pre><code>2016/01/29 10:40:05 PIM: Rescheduling 30 sec hello on interface eth1
2016/01/29 10:40:05 PIM: hello_send: to 224.0.0.13 on eth1: holdt=105 prop_d=500 overr_i=2500 dis_join_supp=0 dr_prio=1 gen_id=921c168a addrs=2
2016/01/29 10:40:05 PIM: pim_tlv_append_addrlist_ucast: number of encoded secondary unicast IPv4 addresses: 0
2016/01/29 10:40:05 PIM: pim_msg_send: to 224.0.0.13 on eth1: msg_size=34 checksum=ff2a
2016/01/29 10:40:09 PIM: pim_socket_recvfromto: HAVE_IP_PKTINFO to=224.0.0.22,2
2016/01/29 10:40:09 PIM: pim_rpf.c pim_nexthop_lookup: found nexthop 0.0.0.0 for address 10.101.16.135: interface eth0 ifindex=2 metric=0 pref=0
2016/01/29 10:40:09 PIM: pim_if_find_neighbor: neighbor not found for address 0.0.0.0 on interface eth0
2016/01/29 10:40:09 PIM: pim_rpf.c pim_rpf_update: RPF'(10.101.16.135,225.0.100.100) not found: won't send join upstream
2016/01/29 10:40:09 PIM: pim_rpf.c pim_rpf_update: (S,G)=(10.101.16.135,225.0.100.100) source nexthop now is: interface=eth0 address=0.0.0.0 pref=0 metric=0
2016/01/29 10:40:09 PIM: pim_rpf.c pim_rpf_update: (S,G)=(10.101.16.135,225.0.100.100) RPF_interface(S) changed from &lt;oldif?&gt; to eth0
2016/01/29 10:40:09 PIM: pim_ifassert_winner_set: (S,G)=(10.101.16.135,225.0.100.100) assert state changed from ifassert_bad_state to NOINFO on interface eth1
2016/01/29 10:40:09 PIM: pim_ifassert_winner_set: (S,G)=(10.101.16.135,225.0.100.100) assert winner changed from 64.146.254.46 to 0.0.0.0 on interface eth1
2016/01/29 10:40:09 PIM: ifmembership_set: (S,G)=(10.101.16.135,225.0.100.100) membership now is INCLUDE on interface eth1
2016/01/29 10:40:09 PIM: pim_upstream_switch: PIM_UPSTREAM_JOINED: (S,G)=(10.101.16.135,225.0.100.100)
2016/01/29 10:40:09 PIM: pim_ifchannel_update_assert_tracking_desired: AssertTrackingDesired(10.101.16.135,225.0.100.100,eth1) changed from 0 to 1
2016/01/29 10:40:09 PIM: pim_forward_start: (S,G)=(10.101.16.135,225.0.100.100) oif=eth1
2016/01/29 10:40:09 PIM: send_join: can't send join upstream: RPF'(10.101.16.135,225.0.100.100)=0.0.0.0
2016/01/29 10:40:09 PIM: pim_joinprune_send: sending Join(S,G)=(10.101.16.135,225.0.100.100) to upstream=0.0.0.0 on interface eth0
2016/01/29 10:40:09 PIM: pim_joinprune_send: Join(S,G)=(10.101.16.135,225.0.100.100): upstream=0.0.0.0 is myself on interface eth0
2016/01/29 10:40:09 PIM: join_timer_start: starting 60 sec timer for upstream (S,G)=(10.101.16.135,225.0.100.100)
2016/01/29 10:40:09 PIM: pim_ifchannel_update_could_assert: CouldAssert(10.101.16.135,225.0.100.100,eth1) changed from 0 to 1
2016/01/29 10:40:09 PIM: pim_ifchannel_update_my_assert_metric: my_assert_metric(10.101.16.135,225.0.100.100,eth1) changed from 1,4294967295,4294967295,0.0.0.0 to 0,0,0,172.24.0.65
2016/01/29 10:40:09 PIM: Rescheduling 30 sec hello on interface eth0
2016/01/29 10:40:09 PIM: hello_send: to 224.0.0.13 on eth0: holdt=105 prop_d=500 overr_i=2500 dis_join_supp=0 dr_prio=1 gen_id=661e4198 addrs=2
2016/01/29 10:40:09 PIM: pim_tlv_append_addrlist_ucast: number of encoded secondary unicast IPv4 addresses: 0
2016/01/29 10:40:09 PIM: pim_msg_send: to 224.0.0.13 on eth0: msg_size=34 checksum=ef2b
2016/01/29 10:40:10 PIM: pim_socket_recvfromto: HAVE_IP_PKTINFO to=224.0.0.22,2
2016/01/29 10:40:20 PIM: pim_socket_recvfromto: HAVE_IP_PKTINFO to=224.0.0.22,2
2016/01/29 10:40:20 PIM: pim_socket_recvfromto: HAVE_IP_PKTINFO to=224.0.0.22,2
2016/01/29 10:40:22 PIM: ifmembership_set: (S,G)=(10.101.16.135,225.0.100.100) membership now is NOINFO on interface eth1
2016/01/29 10:40:22 PIM: pim_upstream_switch: PIM_UPSTREAM_NOTJOINED: (S,G)=(10.101.16.135,225.0.100.100)
2016/01/29 10:40:22 PIM: pim_ifchannel_update_assert_tracking_desired: AssertTrackingDesired(10.101.16.135,225.0.100.100,eth1) changed from 1 to 0
2016/01/29 10:40:22 PIM: pim_forward_stop: (S,G)=(10.101.16.135,225.0.100.100) oif=eth1
2016/01/29 10:40:22 PIM: pim_zebra.c del_oif: nonexistent protocol mask 2 removed OIF eth1 (vif_index=3, min_ttl=0) from channel (S,G)=(10.101.16.135,225.0.100.100)
2016/01/29 10:40:22 PIM: pim_joinprune_send: sending Prune(S,G)=(10.101.16.135,225.0.100.100) to upstream=0.0.0.0 on interface eth0
2016/01/29 10:40:22 PIM: pim_joinprune_send: Prune(S,G)=(10.101.16.135,225.0.100.100): upstream=0.0.0.0 is myself on interface eth0
2016/01/29 10:40:22 PIM: pim_ifchannel_update_could_assert: CouldAssert(10.101.16.135,225.0.100.100,eth1) changed from 1 to 0
2016/01/29 10:40:22 PIM: pim_ifchannel_update_my_assert_metric: my_assert_metric(10.101.16.135,225.0.100.100,eth1) changed from 0,0,0,172.24.0.65 to 1,4294967295,4294967295,0.0.0.0
2016/01/29 10:40:22 PIM: pim_mroute_msg: kernel upcall NOCACHE type=1 ip_p=0 from fd=14 for (S,G)=(10.101.16.135,225.0.100.100) on eth0 vifi=2
</code></pre>

<p>mroute detail:</p>

<pre><code>routerA# show ip mroute 
Proto: I=IGMP P=PIM

Source          Group           Proto Input iVifI Output oVifI TTL Uptime  
10.101.16.135   225.0.100.100   I     eth0      2 eth1       3   1 02:47:40 
routerA# show ip mroute count

Source          Group           Packets      Bytes WrongIf  
10.101.16.135   225.0.100.100    841231 1260164038       0 
</code></pre>

<p>Problem solved by running iperf on host 1 with -T 10 instead of default 1. </p>
","<p>This is a quick recipe using Quagga pimd:</p>

<p>1) Setup Host1 static default route towards RouterA (you could also use an static specific route for the multicast group).</p>

<p>2) Make sure Host1 source is sending multicast stream with proper TTL (high enough to reach the receivers).</p>

<p>3) Make sure unicast routing towards multicast source is correct on RouterA.</p>

<p>4) Run Quagga pimd on RouterA:</p>

<p><strong>ATTENTION</strong>: pimd requires the zebra daemon: run zebra daemon <strong>before</strong> starting pimd.</p>

<pre><code>! RouterA: interface to source
! (pimd is enabled on eth0 just to activate multicast on it)
interface eth0
 ip pim ssm

! RouterA: interface to RouterB
! (for this simple topology, we actually only need IGMP here)
interface eth1
 ip pim ssm
 ip igmp
</code></pre>

<p>5) Install Quagga pimd on RouterB, in order to run this IGMPv3 join tool:</p>

<p>RouterB: <code>test_igmpv3_join eth1 225.0.30.30 192.168.18.132</code></p>

<p>6) Use Quagga pimd commands on RouterA to verify multicast. For instance:</p>

<p>RouterA: <code>show ip mroute</code></p>

<p>RouterA: <code>show ip mroute count</code></p>

<p>7) If things aren't working as expected, try pimd troubleshooting commands:</p>

<pre><code>show ip rib 192.168.18.132 (unicast route towards source?)
show ip multicast          (multicast enabled at all?)
show ip mroute             (kernel mcast programming is correct?)
show ip pim interface      (pim enabled on interfaces?)
show ip igmp sources       (receiver joined on interface?)
show ip igmp interface     (igmp enabled on receiver interface?)
</code></pre>

<p>From: <a href=""http://git.savannah.gnu.org/cgit/quagga.git/tree/pimd/TROUBLESHOOTING"" rel=""nofollow"">http://git.savannah.gnu.org/cgit/quagga.git/tree/pimd/TROUBLESHOOTING</a></p>
","26313"
"IP Address and Subnet Mask of Static Default Route","3812","","<p>Again, I'm continuing a review of previous Cisco modules. In CCNA 2, Chapter 2.9.1.4, it states,</p>

<blockquote>
  <p>Discard Route</p>
  
  <p>A common configuration in many networks is to have a static default route on the edge router forwarding packets to the ISP. The ISP router then has a static route pointing to the customer's network. </p>
  
  <p>For example, Customer A has the network address of 172.16.0.0/16, which is subnetted into several /24 subnets. The edge router of Customer A has a static default route forwarding all other traffic to the ISP router: </p>
</blockquote>

<pre><code>ip route 0.0.0.0 0.0.0.0 serial 0/0/0
</code></pre>

<blockquote>
  <p>The ISP router has a static default route for forwarding traffic to Customer A's network: </p>
</blockquote>

<pre><code>ip route 172.16.0.0 255.255.0.0 serial 0/0/1
</code></pre>

<p>Is 172.16.0.0 255.255.0.0 really a static default route? I know it is a static route, but a static <strong>default</strong> route? I thought all static <strong>default</strong> routes had an IP and subnet mask of <strong>0.0.0.0 0.0.0.0</strong>.</p>
","<p>I think you're getting your verbiage off, but not wrong.</p>

<blockquote>
  <p>A common configuration in many networks is to have a static default
  route on the edge router forwarding packets to the ISP.</p>
</blockquote>

<p>A LAN that has no other exits will have a default route (i.e. static route) that points all unknown traffic to the edge.  Since routers match on the <a href=""http://en.wikipedia.org/wiki/Longest_prefix_match"" rel=""nofollow"">longest prefix</a> matching the destination address, this is your gateway of last resort.</p>

<blockquote>
  <p>The ISP router then has a static route pointing to the customer's
  network.</p>
</blockquote>

<p>An ISP will never have a default route pointing to a customer network.  They will have a static route for the networks they service.</p>

<blockquote>
  <p>Is 172.16.0.0 255.255.0.0 really a static default route?</p>
</blockquote>

<p>That is not a default route.  You were right in your assumption below.</p>

<blockquote>
  <p>I thought all static <strong>default</strong> routes had an IP and subnet mask of
  <strong>0.0.0.0 0.0.0.0</strong>.</p>
</blockquote>
","7232"
"OSPF Area Backbone(0) is Inactive","3802","","<p>I am having a puzzling issue with OSPF connectivity on one of my routers. The other routers in my network have formed an adjacency and are working correctly, but this last one is a case I've never seen before. All of the interfaces on the remaining router are up and functional and are connected to AREA 0 just as the other two routers are. However, a <code>show ip ospf</code> command results in the following:</p>

<pre><code> Area BACKBONE(0) (Inactive)

        Number of interfaces in this area is 3
</code></pre>

<p>Additionally, I get nothing if I try to ping 224.0.0.5 or 224.0.0.6 from this router. I've tried restarting the OSPF process on the router as well as rebooting the router itself, but it makes no difference. When I turn debugging on, I can see the router isn't even sending OSPF hello messages. What could be the cause of something like this? </p>

<p>The router interfaces are configured as follows for the router in question:</p>

<pre><code>f0/0 - 111.1.0.2/8
f0/1 - 112.1.0.2/8
f0/2/0 - (Vlan5) 122.0.0.1/8
f0/2/3 - (Vlan88) 10.10.10.1/28
</code></pre>

<p>Here is the entire router config along with OSPF process info and interface statuses:</p>

<pre><code>router_1#sh ip ospf 
 Routing Process ""ospf 10"" with ID 122.0.0.1
 Start time: 00:00:19.304, Time elapsed: 18:57:25.596
 Supports only single TOS(TOS0) routes
 Supports opaque LSA
 Supports Link-local Signaling (LLS)
 Supports area transit capability
 Router is not originating router-LSAs with maximum metric
 Initial SPF schedule delay 5000 msecs
 Minimum hold time between two consecutive SPFs 10000 msecs
 Maximum wait time between two consecutive SPFs 10000 msecs
 Incremental-SPF disabled
 Minimum LSA interval 5 secs
 Minimum LSA arrival 1000 msecs
 LSA group pacing timer 240 secs
 Interface flood pacing timer 33 msecs
 Retransmission pacing timer 66 msecs
 Number of external LSA 0. Checksum Sum 0x000000
 Number of opaque AS LSA 0. Checksum Sum 0x000000
 Number of DCbitless external and opaque AS LSA 0
 Number of DoNotAge external and opaque AS LSA 0
 Number of areas in this router is 1. 1 normal 0 stub 0 nssa
 Number of areas transit capable is 0
 External flood list length 0
 IETF NSF helper support enabled
 Cisco NSF helper support enabled
    Area BACKBONE(0) (Inactive)
    Number of interfaces in this area is 3
    Area has no authentication
    SPF algorithm last executed 01:36:13.484 ago
    SPF algorithm executed 3 times
    Area ranges are
    Number of LSA 1. Checksum Sum 0x00F9B7
    Number of opaque link LSA 0. Checksum Sum 0x000000
    Number of DCbitless LSA 0
    Number of indication LSA 0
    Number of DoNotAge LSA 0
    Flood list length 0

 router_1#sh ip int br
    Interface                  IP-Address      OK? Method Status                Protocol
    FastEthernet0/0            111.1.0.2       YES NVRAM  up                    up      
    FastEthernet0/1            112.1.0.2       YES NVRAM  up                    up      
    FastEthernet0/2/0          unassigned      YES unset  up                    up      
    FastEthernet0/2/1          unassigned      YES unset  administratively down down    
    FastEthernet0/2/2          unassigned      YES unset  administratively down down    
    FastEthernet0/2/3          unassigned      YES unset  up                    up      
    Vlan1                      unassigned      YES NVRAM  administratively down down    
    Vlan5                      122.0.0.1       YES NVRAM  up                    up      
    Vlan88                     10.10.10.1      YES NVRAM  up                    up      

router_1#sh run
Building configuration...

Current configuration : 3904 bytes
!
version 12.4
service timestamps debug datetime msec
service timestamps log datetime msec
no service password-encryption
!
hostname router_1
!
boot-start-marker
boot-end-marker
!
enable secret 5 $1$iXM1$Rcki3hrzpXULV8lCJXDqY1
!
no aaa new-model
!
!
ip cef
!
!
no ip domain lookup
multilink bundle-name authenticated
!
!
!
username thedoctor privilege 15 secret 5 $1$KUwA$VWYQeI/fm8LacwgysL7RK/
archive
 log config
  hidekeys
!
!
!
class-map match-all data-inmmediate
 match ip dscp af13 
class-map match-all class-all
 match any 
class-map match-all data-priority
 match ip dscp af23 
class-map match-all data-routine
 match ip dscp default 
class-map match-all data-flash
 match ip dscp default 
 match ip dscp af33 
class-map match-all video
 match ip dscp cs4  33  af41  35  af42 
class-map match-all data-flash-override
 match ip dscp 31 
class-map match-all voice
 match ip dscp cs5  41  42  43  44 
!
!
policy-map ecn-llq-enable
 class voice
  priority 48
 class video
  bandwidth percent 1
  random-detect dscp-based
  random-detect exponential-weighting-constant 1
  random-detect ecn
  random-detect dscp 32   8     16    16   
  random-detect dscp 33   16    24    16   
  random-detect dscp 34   24    32    16   
  random-detect dscp 35   32    40    16   
  random-detect dscp 36   40    48    16   
 class data-flash-override
  bandwidth percent 35
  random-detect dscp-based
  random-detect exponential-weighting-constant 1
  random-detect ecn
  random-detect dscp 31   70    4000  2    
 class data-flash
  bandwidth percent 1
  random-detect dscp-based
  random-detect exponential-weighting-constant 1
  random-detect ecn
  random-detect dscp 30   80    96    16   
 class data-priority
  bandwidth percent 1
  random-detect dscp-based
  random-detect exponential-weighting-constant 1
  random-detect ecn
  random-detect dscp 22   96    112   12   
 class data-inmmediate
  bandwidth percent 1
  random-detect dscp-based
  random-detect exponential-weighting-constant 1
  random-detect ecn
  random-detect dscp 14   112   128   8    
 class data-routine
  bandwidth percent 25
  random-detect dscp-based
  random-detect exponential-weighting-constant 1
  random-detect ecn
  random-detect dscp 0   2     4000  2    
policy-map shape-all-ncw
 class class-all
  shape average 128000
  service-policy ecn-llq-enable
policy-map shape-all-hnw
 class class-all
  shape average 1000000
  service-policy ecn-llq-enable
!
!
!
!         
interface FastEthernet0/0
 description Intermidiate_Router_GW
 ip address 111.1.0.2 255.0.0.0
 ip ospf cost 400
 duplex auto
 speed auto
 service-policy output shape-all-hnw
!
interface FastEthernet0/1
 description Router2
 ip address 112.1.0.2 255.0.0.0
 ip ospf cost 600
 duplex auto
 speed auto
 service-policy output shape-all-hnw
!
interface FastEthernet0/2/0
 description ENCRYPTION1
 switchport access vlan 5
!
interface FastEthernet0/2/1
 shutdown
!
interface FastEthernet0/2/2
 shutdown
!
interface FastEthernet0/2/3
 description AF_NM
 switchport access vlan 88
!
interface Vlan1
 no ip address
 shutdown
!
interface Vlan5
 description ENCRYPTION1
 ip address 122.0.0.1 255.0.0.0
!
interface Vlan88
 description AF_NM
 ip address 10.10.10.1 255.255.255.248
!
router ospf 10
 log-adjacency-changes
 network 111.0.0.0 0.255.255.255 area 0
 network 112.0.0.0 0.255.255.255 area 0
 network 122.0.0.0 0.255.255.255 area 0
!
ip forward-protocol nd
ip route 0.0.0.0 0.0.0.0 120.0.0.1
ip route 122.1.1.0 255.255.255.0 122.0.0.2
ip route 122.1.2.0 255.255.255.0 122.0.0.2
!         
!
ip http server
ip http access-class 23
ip http authentication local
ip http timeout-policy idle 60 life 86400 requests 10000
!
access-list 23 permit 10.10.10.0 0.0.0.7
!
!
control-plane
!
!
line con 0
 login local
line aux 0
line vty 0 4
 privilege level 15
 login local
 transport input telnet
line vty 5 15
 privilege level 15
 login local
 transport input telnet
!
scheduler allocate 20000 1000
!
end
</code></pre>
","<p>Well, this is kinda funny. Firstly, I should mention that this is a project that I was recently asked to work on where everyone that previously worked on it has left the company and there is next to no documentation. All I had to go on was a grossly inaccurate network topology diagram which I am in the process of redrawing.</p>

<p>Anyway, after investigating a million other things, I traced the tremendous mess of cables behind the server racks to look at the multiple ethernet cables from the segment that wasn't talking to the rest of the network. This is where I saw no link lights for the ethernet ports on the back of a server whereas the front panel showed several green lights. What I found out is that the front panel of the server will show those green lights even when it isn't turned on! Since it was off, there was no active connection from that particular server rack to the rest of the network. After turning it on, I checked the router again and AREA 0 is no longer inactive. It now has its OSPF neighbors and routes that it should have and the end devices are able to communicate properly. So, everything works now that the server has been turned on. </p>

<p>In summary, one needs to always ask the following two questions:</p>

<ol>
<li>Are you sure it's plugged in? </li>
<li>Have you tried turning it off and on again?</li>
</ol>
","5620"
"Minimum ethernet frame is 64 bytes, Why the payload must be padded to at least 46 bytes","3794","","<p>What is reason to pad payload to mininum 46bytes, to form a ethernet frame of 64 bytes.</p>

<p>Following says min would be 41 bytes.</p>

<p><a href=""https://stackoverflow.com/questions/14526139/what-is-the-minimum-packet-size-for-tcp-over-ipv4"">https://stackoverflow.com/questions/14526139/what-is-the-minimum-packet-size-for-tcp-over-ipv4</a></p>

<p>I could not connect the dots, can any one explain this.</p>
","<p>The entire frame has to be at least 64 bytes. This is not just the payload, this includes the headers and the frame check sequence. The FCS takes up 4 bytes at the end. An Ethernet header consists of two 6 byte MAC addresses plus a 2 byte type field, 14 bytes in total. 64-4-14 = 46. IPv4 packets have an additional header of at least 20 bytes on top of the Ethernet header, making the minimum payload size 26 bytes. TCP and UDP add more headers on top of that.</p>

<p>And the 41 byte answer on the other question is ignoring the padding. That only considers the headers.</p>

<p>The reason this was originally done with Ethernet was to ensure a minimum frame length on the wire so that collisions could be reliably detected by all devices over the specified maximum cable length. This is required because early incarnations of 10M Ethernet used a shared coaxial medium and connected devices had to be able to detect when two of them tried to transmit on the shared medium at the same time. Slightly less ancient 10M and 100M Ethernet networks over twisted pair that were built with hubs instead of switches also needed to be able to detect collisions. However, most modern Ethernet networks are switched and do not use a shared medium, so this is no longer strictly necessary, but it's still part of the spec for compatibility reasons. Frames shorter than 64 bytes are called runt frames, and if you see runt frames in a network that usually indicates some sort of configuration or hardware issue.</p>
","34191"
"EtherChannel and odd number of ports","3791","","<p>Is the requirement of 2<sup>n</sup> number of ports for EtherChannel a critical requirement or just a recommendation to ensure, perhaps, an even load balancing?</p>

<p>Particularly, if we setup an EtherChannel group with 8 ports but one of them went down. Would the remaining 7 ports still be functional but with uneven load balance, or would 3 ports be forced into standalone to ensure a power of two group?</p>

<p>Is it dealt with similarly for both PAgP and LACP?</p>
","<p>The power of 2 requirement varies per vendor/hardware/software.  Cisco had (has) a pretty bad stigma against them with a lot of the earlier catalyst switches capable of 10G.  The problem comes with how the software hashes (or ""balances"") data over the multiple ports in the port-channel (this is agnostic of PAgP or LACP).</p>

<p>This post does an excellent job of simplifying the problem in finer detail.  This is less relevant today with hardware/software improvements, but again, it varies - so just check your hardware requirements and make sure you're not buying older hardware that falls victim to this problem.</p>

<p><a href=""http://www.packetmischief.ca/2012/07/24/doing-etherchannel-over-3-5-6-and-7-link-bundles/"">http://www.packetmischief.ca/2012/07/24/doing-etherchannel-over-3-5-6-and-7-link-bundles/</a></p>
","12759"
"Are multiple links with different VLANs between two switches possible?","3790","","<p>I'm not considering Etherchannel or LACP.</p>

<p>Given 2 Ethernet switches A and B, where both switches have port 0 configured as a tagged trunk for VLAN 100 and 101 and port 1 configured as a tagged trunk for VLAN 200 and 201. Can I connect port 0 on switch A to port 0 on switch B and port 1 on switch A to port 1 on switch B without having spanning tree shut down one of the ports or otherwise cause other problems ?</p>
","<p>It depends. With IEEE 802.1Q specified STP, where you have one instance per trunk, STP will block ports. </p>

<p>With Cisco's PVST+ (Per-VLAN STP), every VLAN has a corresponding instance of STP. This means that if there are no loops within the VLANs, STP will not block ports.</p>

<p>MST, defined in IEEE 802.1s, works a bit differently. Instead of providing a one-to-one VLAN-STP mapping, VLANs can be grouped together into a few instances of STP. This way, if you do STP odd-even load balancing (odd VLANs over link A, even over link B) you only need two instances of STP, instead of one instance for every single VLAN. If you use MST correctly, your proposed configuration should work without any blocked links, just like PVST+, but with VLANs grouped into instances instead of working with each VLAN independently.</p>
","562"
"What are invalid characters for a password in a Cisco router or firewall?","3783","","<p>I'm trying to figure out what characters the Cisco router doesn't like when creating a password or pre-shared key. Please help me understand this. Thank you.</p>
","<p>Generally, the characters <code>?</code> and <code>[space]</code> are the only il-advised characters. The <code>?</code> indicates you are asking for help. The space indicates you are done with the password and moving onto the next command.</p>

<p>You should avoid <code>@</code> and <code>!</code> since they could interfere with other commands as you type them.</p>

<p>For IOS, <code>username (user) password 0 ...</code> everything to the end-of-line is the password - literally, even a ""blind"" trailing space! For an ASA, <code>username (user) password ""...""</code> everything inside the quotes is the password. (<kbd>ctrl</kbd><kbd>v</kbd> will allow the input of <code>?</code> on both platforms) (the use of quotes allows use of spaces, but then excludes the use quotes in the password)</p>
","14983"
"Is TCP maximum segment size (MSS) ""clamping"" compatible with IPv6?","3782","","<p>With IPv4, TCP MSS ""clamping"" (a network device editing the MSS value in a TCP header) can help when path maximum transmission unit discovery is not working. (e.g., when ICMP is being blocked somewhere in the path.) Since there's no fragmentation in IPv6, we still have ICMPv6's 'packet too big' to signal the originating end point.</p>

<p>Is there any guidance about clamping TCP MSS over IPv6 specifically?</p>
","<p>Well technically fragmentation can happen in IPv6; <a href=""http://en.wikipedia.org/wiki/IPv6_packet#Fragmentation"">This</a> is the wikipedia article on it.</p>

<p><a href=""http://www.juniper.net/techpubs/software/erx/junose93/swconfig-ip-ipv6-igp/ipv6-tcp-configuration.html"">This</a> Juniper page is a bit old but it shows that you can clamp an MSS for TCP over IPv6 on Junos the same as you would in IPv4 using the same command, <code>tcp mss</code>. The same is shown in <a href=""http://blog.ioshints.info/2013/01/mtu-issues-and-tcp-mss-clamping-in.html"">this</a> article for Cisco IOS 15, using the traditional ip tcp <code>adjust-mss</code> command.</p>

<p>So you can configure MSS clamping if PMTUD isn't working as it should be in a part of your network, otherwise, you should be ensuring that you are aiding the smoothing running of PTMUD across your networking so that MSS clamping isn't required (I understand this isn't always under your control).</p>

<p><strong>Update</strong></p>

<p><a href=""https://www.juniper.net/techpubs/en_US/junose10.0/information-products/topic-collections/swconfig-ip-ipv6/setting-mss-for-tcp-connections_1.html"">Here</a> is a link to a newer Junos article for Junos 10x rather than 9, I can't find one for 11 and I'm not in front of 11 right now, but I expect it will be the same.</p>
","241"
"NX-OS peer-switch issues with 6500 VSS","3731","","<p>I'm bringing up a new pair of Nexus 5500s running NX-OS 5.2 and I'd like to make use of the new vPC Peer Switch feature:</p>

<blockquote>
  <p>The Virtual Port Channel (vPC) peer switch feature addresses performance concerns around STP convergence. This feature allows a pair of Cisco Nexus 5000 Series devices to appear as a single STP root in the Layer 2 topology. This feature eliminates the need to pin the STP root to the vPC primary switch and improves vPC convergence if the vPC primary switch fails.</p>
  
  <p>To avoid loops, the vPC peer link is excluded from the STP computation. In vPC peer switch mode, STP BPDUs are sent from both vPC peer devices to avoid issues related to STP BPDU timeout on the downstream switches, which can cause traffic disruption.</p>
  
  <p>This feature can be used with the pure peer switch topology in which the devices all belong to the vPC.</p>
</blockquote>

<p>The current topology is a pair Nexus 5500s with a peer-link between them and one connected to each side of a 6500 VSS. All connections are LACP port channels.</p>

<p>The VSS should represent a single logical device, but the 5500s don't seem to agree. When I try to bring up both connections to the VSS the 5500s give me this error:</p>

<blockquote>
  <p>%VPC-3-INTF_CONSISTENCY_FAILED: In domain 2, VPC 1 configuration (interface port-channel1) is not consistent (vpc port channel mis-config due to vpc links in the 2 switches connected to different partners)</p>
  
  <p>%VPC-3-VPC_BRINGUP_FAILED: vPC 1 (interface port-channel1) bringup failed (Type-1 inconsistency exists)</p>
</blockquote>

<p>The 6500 VSS does not log any errors.</p>

<p>Why is the vPC viewing each side of the VSS as a different partner? Am I mistaken in thinking this should be work?</p>
","<p>Of course, there's nothing like asking something publicly for you to realize your own mistake.</p>

<p>The links to the VSS are a vPC, yet on the VSS side I had configured them as separate Etherchannels for each Nexus switch. It was now two logically different connections, which created the errors.</p>

<p>Moving the links all into the same Etherchannel on the VSS resolved the problem.</p>
","1737"
"What is the difference between persistent connection vs multiplexing for http?","3730","","<p>As the title says, I am a little confused with these two concepts. Could someone help clarify it with examples? </p>
","<p>A persistent connection is a TCP connection kept open for some time and used for multiple http requests. This improves performance as it takes time to set up anew TCP connections and it takes time for TCP to figure out how fast it can safely send data.</p>

<p>Pipeling (I know you didn't mention this but I feel it's important to the overall picture) is sending multiple requests on the same connection at the same time to be processed in-order. This avoids waiting for a round trip for each request but creates it's own problem, later requests can get blocked behind earlier equests.</p>

<p>IIRC Persistent connections and Pipelining were added in HTTP 1.1 which is nearly universal these days.</p>

<p>Multiplexing as a concept is handling multiple active requests at the same time so that they do not block for each other. A traditional way of achiving this is using multiple TCP connections from the same client at the same time. However this has problems, each connection does congestion control seperately which leads to less than ideal results. Using too many connections also creates extra server load and extra load on stateful devices in the network like NATs and firewalls.</p>

<p>So HTTP 2.0 introduced multiplexing at the http level. A single TCP connection can now support multiple active HTTP requests with each request able to complete on it's own timescale. This allows congestion control to work better and allows the server to decide how many requests from a given client to work on at a time rather than forcing it to deal with however many TCP connections the browser decides to throw at it.</p>
","35275"
"fast ethernet vs serial interface","3716","","<p>I have a simple confusion about these two kinds of interfaces:
As far as Fast Ethernet is faster, then why it is not used over WAN connections. Typically, network traffic nowadays between any workstation and the internet is more than that between two workstations on the same network. This is not true always but it is more common.
Moreover, the serial interface of a router generally hold the traffic of all internal PCs towards the internet. So it has to be faster than internal Ethernet as far as using switches makes any communication between two PCs a one to one communication.
Can any body clarify this point to me?</p>
","<p>Fast Ethernet over cooper is limited to a max distance of 100 meters over Cat5 or higher category cabling. It makes it impossible to be used over typical WAN lines. </p>

<p>However you can provide a long distance fast ethernet using fiber optics: </p>

<ul>
<li>100 BASE-FX can give up to 2 kms for full-duplex over multi-mode optical fiber.</li>
<li>100 BASE-SX (<em>not an 802.3 standard</em>) goes 550m on multi-mode fiber.</li>
<li>100 BASE-LX10 can reach 10km using single-mode fiber.<br/>
[<a href=""https://en.wikipedia.org/wiki/Fast_Ethernet"" rel=""nofollow"">Wikipedia Fast_Ethernet</a>]</li>
</ul>

<p>Besides fiber optics, the other predominant WAN media is <em>air</em>. Typically you use RF, microwaves, wiMAX,etc. </p>

<p>The main problem is that on <em>air</em> dedicated bandwith is expensive. Having 100 Mbps dedicated could be costly in equipments and licenses. So most systems use a shared spectrum where you can have good speed, but it's a system prone to interferences. </p>

<p>Serial interfaces as RS-232 or V.35 were designed having in mind speeds below 2 Mbps. They aren't useful for today speeds.</p>
","25034"
"How can I disable SIP on IOS 12.x","3711","","<p>How would I disable SIP on an Cisco router running IOS 12.x?</p>
","<p>Depending on which version of 12.x you're on, you should be able to do the following:</p>

<pre><code>router(config)#sip-ua
router(config-sip-ua)#no transport tcp
router(config-sip-ua)#no transport udp
</code></pre>

<p>This stops the router from listening on port 5060.</p>
","1168"
"How can I see what interfaces belong to the default routing instance on the SRX?","3702","","<p>I'm working with routing instances on the Juniper SRX. When you configure NAT you have the option to specify ""to"" and ""from"" statements, with these option you can specify NAT to translate to or from a routing instance. On the Routing Instance list you get, you can configure the ""default"" routing instance. I'm assuming that every interface that wasn't assigned a specific routing instance belongs to the default but I want to be sure, is there a way to verify?</p>

<p>Thanks!</p>
","<p>There are a couple of ways you can check</p>

<ol>
<li><code>show interfaces routing-instance all terse</code> which will list all interfaces and their routing instance (See example)</li>
<li><code>show confiuration routing-instances</code> which is going to show the configuration of any routing instances you have, you will need to check out the interface stanza</li>
<li>Check the routing table and see if the routes from your interface are being shown in another routing instance.</li>
</ol>

<p><strong>Example</strong></p>

<p>The below shows the interfaces are all in the default instance except fe-0/0/6.0 which is in a routing instance called <code>test</code></p>

<pre><code>root@Gareth-FW&gt; show interfaces fe-0/0* routing-instance all terse
Interface        Admin Link Proto  Local                Instance
fe-0/0/0.0       up    up   inet   1.1.1.1/30
                                   172.30.1.100/24      default
fe-0/0/1.0       up    up   inet   192.168.218.240/24   default
fe-0/0/6.0       up    up   inet   10.10.10.2/24
                                   10.77.77.2/30        test
fe-0/0/7.0       up    up   inet   10.10.10.1/24        default
</code></pre>
","10385"
"QoS bandwith calculation","3701","","<p>Please explain: </p>

<p>I have two routers with QoS on them.. Both WAN-facing interfaces have a bandwidth command with the same value (100000) but the priority queue (also the other reservations) calculates a different amount of kbps for this queue? I would think that when the bandwidth is the same the calculated result of kbps per queue should be the same?</p>

<p>The fist router (lets call it router a) is at the main office and has a multi-point connection to 3 other routers at branch offices. The real bandwidth at the main office is 300Mbit and at the branches its 100Mbit. I made a HQos script to shape the bandwidth 
at the main to 100mbit per site (parent) and then the QoS queues (child). I put the bandwidth on the main to 100Mbit to make sure it would calculate the bandwidth (all in percentages) in the correct way (e.g. 100mbit per site). I know i could use a strict amount of bandwidth but I wonder why this is not functioning the way I think it should..</p>

<p><strong>main router (A):</strong></p>

<pre><code>interface GigabitEthernet0/0
 description WAN
 bandwidth 100000
 ip address 172.16.2.1 255.255.255.0
 ip flow ingress
 ip flow egress
 ip ospf message-digest-key 1 md5 7 
 duplex full
 speed 1000
 service-policy output 300Mb-forward-qos
end



Service-policy output: 300Mb-forward-qos

Class-map: site1-100Mb-forward-qos (match-all)
  97350980 packets, 60719394859 bytes
  5 minute offered rate 1891000 bps, drop rate 0 bps
  Match: access-group name site1
  Queueing
  queue limit 64 packets
  (queue depth/total drops/no-buffer drops) 0/864/0
  (pkts output/bytes output) 97350116/60718176568
  shape (peak) cir 97000000, bc 388000, be 388000
  target shape rate 194000000

  Service-policy : forward-qos

    queue stats for all priority classes:

      queue limit 64 packets
      (queue depth/total drops/no-buffer drops) 0/0/0
      (pkts output/bytes output) 148794/7659376

    Class-map: forward-qos-class-prec5 (match-all)
      148794 packets, 7659376 bytes
      5 minute offered rate 0 bps, drop rate 0 bps
      Match: ip precedence 5
      Priority: 10% (2500 kbps), burst bytes 62500, b/w exceed drops: 0
      !^^^^^^^^^^^^^^^^^^^^^^^^
</code></pre>

<p><strong>Router at branch (B)</strong></p>

<pre><code>interface GigabitEthernet0/0
 description WAN
 bandwidth 100000
 ! ^^^^^^^^^^^^^^
 ip address 172.16.2.4 255.255.255.0
 ip ospf message-digest-key 1 md5 7 12480603150C02573E
 duplex auto
 speed auto
 service-policy output 100Mb-forward-qos
end



  Service-policy : forward-qos

    queue stats for all priority classes:

      queue limit 64 packets
      (queue depth/total drops/no-buffer drops) 0/0/0
      (pkts output/bytes output) 3873239/716718654

    Class-map: forward-qos-class-prec5 (match-all)
      3873238 packets, 716718440 bytes
      5 minute offered rate 123000 bps, drop rate 0 bps
      Match: ip precedence 5
      Priority: 10% (5000 kbps), burst bytes 125000, b/w exceed drops: 0
      !^^^^^^^^^^^^^^^^^^^^^^^^
</code></pre>
","<p>There is no need to put a bandwidth statement on the router (A) interface. If you're doing H-QoS then you shape to 100Mb on the parent, while the child policies then inherit that shaped value.</p>

<p>Like so:</p>

<pre><code>policy-map parent
 class class-default
  shape average 100m
  service-policy child

policy-map child
 class EF
  priority percent 5
</code></pre>

<p>If you put bandwidth statement on the physical interface you mess up the H-QoS calculation. It's fine for the branches as they are not running H-QoS</p>
","3310"
"USE of ICMP echo request in DHCP","3688","","<p>In <a href=""http://www.rfc-editor.org/rfc/rfc2131.txt"" rel=""nofollow"">RFC2131</a> (page 12) it's been mentioned that </p>

<blockquote>
  <p>The server should use whatever information is available in the
  configuration information repository to choose an address to reuse. 
  For example, the server may choose the least recently assigned
  address.  As a consistency check, the allocating server SHOULD probe
  the reused address before allocating the address, e.g., with an <strong>ICMP
  echo request</strong>, and the client SHOULD probe the newly received
  address, e.g., with <strong>ARP</strong>.</p>
</blockquote>

<p>Can you please explain to me how ICMP echo requests and ARPs are helpful in DHCP?</p>

<p>Thank You</p>
","<p>An ICMP Echo request from the DHCP server to the IP address its about to allocate is used to determine if the IP address about to be assigned is already in use on the network.
If a response is received from that IP the DHCP server will assign a different address. </p>

<p>The ARP request on the newly received address from the client would do the same, check if another device is using that address and responding to ARP. If so it knows the address it received is already in use.</p>

<p>The RFC you linked to does mention later on:</p>

<pre><code>Servers need not reserve the offered network address, although the protocol will
work more efficiently if the server avoids allocating the offered
network address to another client.  When allocating a new address,
servers SHOULD check that the offered network address is not
already in use; e.g., the server may probe the offered address
with an ICMP Echo Request.  Servers SHOULD be implemented so that
network administrators MAY choose to disable probes of newly
allocated addresses.
</code></pre>

<p>I am not certain if all DHCP servers implement this requirement but as far as I am aware there is no other way a DHCP server could reliably become aware of another device using an IP that is available in its DHCP pool.</p>

<p>Also from the same RFC regarding ARP from the clients:</p>

<pre><code>if the client is on a network that
supports ARP, the client may issue an ARP request for the suggested
request.  ...  If the network address appears to be in use, the client MUST send a
DHCPDECLINE message to the server
</code></pre>
","9907"
"GNS3: Map the console output of a router on GNS3 to a COM Port (Serial Port)","3676","","<p>When a router is configured on GNS3 and started, it is possible to access the console output of the router by right clicking a router -> and then clicking <code>Console</code></p>

<p>I need to be able to map this output to a virtual COM port (serial port) on the physical workstation. So that I can use terminal emulation software such as <code>HyperTerminal</code> to connect to the router as if it were plugged into a COM port of the workstation.</p>

<p>I need to be able to do this as a part of a project I am doing so that I don't need physical routers to demonstrate my project.</p>

<p>Appriciate any suggestions on how I could do this. Thank you for your time!</p>
","<p>I was able to do this by redirecting the localhost: of the GNS router to a virtual COM port using the following software:</p>

<ol>
<li><p><a href=""http://www.eterlogic.com/Products.VSPE.html"" rel=""nofollow noreferrer"">Virtual Serial Ports Emulator</a> - Freeware (32 Bit version is
freeware. When installed on 64 Bit workstation, it asks for
registration)</p></li>
<li><p><a href=""http://www.eltima.com/products/serial-over-ethernet/"" rel=""nofollow noreferrer"">Eltima Serial to Ethernet Connector</a> - Commercial with a 14 day trial</p></li>
</ol>

<p>Steps:</p>

<ol>
<li><p>Find out the console port that the GNS router is accessible on: Right click the router and click on <code>Change console port</code></p></li>
<li><p>Find out if you can telnet to it using Windows Telnet Client or Putty or similar. Use <code>127.0.0.1</code> (or <code>localhost</code>) and the port number found in step 1 above.</p></li>
<li><p>Install one of the software mentioned above.</p></li>
<li><p>Use the software to map the TCP/Telnet session accessed in step 2 above to a virtual COM port.</p></li>
</ol>

<p>Screenshots of configuration:</p>

<p><strong>Virtual Serial Ports Emulator</strong>
<a href=""https://i.stack.imgur.com/ipegu.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ipegu.png"" alt=""Virtual Serial Ports Emulator""></a></p>

<p><strong>Eltima Serial to Ethernet Connector</strong>
<a href=""https://i.stack.imgur.com/UpKKT.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/UpKKT.png"" alt=""Eltima Serial to Ethernet Connector""></a></p>
","7784"
"What are real life examples of broadcast and multicast?","3674","","<p>In broadcast routing, packets are sent to all nodes even if they do not want it.  What is a real life example of ""broadcast""? Almost everything I can think of, like GMail and YouTube, appears to be unicast.</p>

<p>Along similar lines whats a real life use case for ""multicast""?</p>
","<p>Broadcasts are stopped at a layer-3 boundary (router). An example of a broadcast is an ARP request where a host is looking for the MAC address of the owner of an IP address. The host sends a broadcast asking, ""Who owns this IP address?"" Broadcasts are received and processed by every host in the layer-2 domain.</p>

<p>A multicast is received and processed by hosts which subscribe to the multicast group of the multicast. It is an elective ""broadcast"". Many things use multicast, including some routing protocols. An example of multicasting is an IPTV application which some companies use. Multicasts are normally stopped at a layer-3 boundary (router) unless the router is configured for multicast routing, which is a large topic which cannot be adequately addressed here.</p>

<p>Since broadcasts are stopped at a layer-3 boundary, and multicasts only traverse layer-3 when all the routers in the path are configured to do multicast routing, broadcasts and multicasts cannot traverse the Internet,  which is why all your internet traffic will be unicasts.</p>

<p>By the way, IPv6 has eliminated broadcasts; there is no such concept in IPv6. IPv6 makes heavy use of multicasts. You may also see the term anycast used a lot in IPv6, but IPv4 can use anycasting, too. Anycasts are really unicasts, so the unicast rules and concepts apply to anycasts.</p>
","23693"
"Why are there checksums for different OSI layers?","3672","","<p>Can anyone clarify the question ""why we need checksum in both layer-2 and layer-3 of OSI layer"", Layer-2 would encapsulate the rest of OSI layers into a single unit. </p>

<ul>
<li>If Layer-2 has a checksum, shouldn't this validation be enough? </li>
<li>Why we are having checksum validation in different OSI Layers ?</li>
</ul>
","<blockquote>
  <ul>
  <li>If Layer-2 has a checksum, shouldn't this validation be enough?</li>
  <li>Why we are having checksum validation in different OSI Layers?</li>
  </ul>
</blockquote>

<p>Simply put, different layers of the OSI model have checksums so you can assign blame appropriately.</p>

<ul>
<li>Suppose there is a webserver running on some system (assume TCP port 80, i.e. OSI Layer 4)</li>
<li>Suppose there is a software error in the Operating System of that webserver that corrupts certain IP payloads. (IPv4 OSI Layer 3)</li>
</ul>

<h3>Case 1: Only use Ethernet checksums</h3>

<p>If we only rely on Ethernet (i.e. OSI Layer 2) checksums, then that error would go un-noticed until something crashes or throws an error, because the Ethernet NIC would simply transmit the (already corrupted) data that it received from the Operating System IP stack. For sake of argument, let's assume the TCP payload is corrupted, but the Ethernet checksum is fine.</p>

<p>When the IP stack on the other side receives the Ethernet frame, it unpacks the IP payload and delivers it to the webserver.  However, the TCP payload in this packet is corrupted.  When the web server crashes from data corruption, the developer has no way to isolate whether this was an IP-level failure or a TCP failure (or perhaps something else farther up the application stack).</p>

<h3>Case 2: Layered checksums</h3>

<p>However, if TCP, IP and Ethernet all have checksums, we can isolate the layer where the error occurred, and notify the appropriate Operating System or application component of the error.</p>
","5192"
"Best practice - Set static IP in device or router?","3666","","<p>Pretty simple question.</p>

<p>What is the industry best practice? In a <strong>small</strong> business which has computers which require static IP addresses is it better to set static IP addresses for devices on the devices themselves, or in the router/managed switch? All non-static IP requiring devices can use DHCP.</p>

<p>Thanks.</p>
","<p>This is what I think you're trying to ask:  When I have a DHCP network but want a handful of hosts to have static IPs, is it best to <em>reserve</em> the IPs on my DHCP server or set <em>static</em> IPs on the hosts themselves? If that's your question, edit it and I'll take out this paragraph.</p>

<p>The only benefit I see of configuring static IPs on select hosts themselves is that the address is permanently set and not relying on the interface's MAC to reacquire the ""reserved"" IP.  However, reserving address already handed out by DHCP is quick and easy and doesn't require any access to the host.  For instance, if I put a wireless print server on my WLAN and want it to maintain a specific address but don't care what, I can reserve the address it is assigned without every touching the print server.</p>

<p>As an aside, you mention this is a small business.  For an office of five or 10 people I would personally set static IPs as a best practice.  No DHCP server needed, nothing ever changes, and perhaps it adds just a tiny extra bit of security in that one can't just plug a device into the network and have instant access.</p>
","29746"
"Propagate VLAN through VPN (IPsec)?","3665","","<p>I have a question about connecting two LANs (logically same LAN) over a VPN.
In picture below you can see overall representation of our implementation.</p>

<p>Description:</p>

<p>On each side, we have distinct sites with AAA servers (both servers share same base). We have 2 VLANs. For normal users (who can pass authentication) and guests.</p>

<p>Guests can only get to the Internet. Normal users can get to the Internet, and, if needed connect to co-workers at the other site.</p>

<p>So, an IPsec + NAT configuration should work well.</p>

<p>The main problem is outgoing IPsec packets from one router will be ""stripped"" on the site side of another router. How, in this situation, do we put this packet in VLAN 10 (for normal users) if we lose the VLAN tag information?</p>

<p>I hope I was clear in description of problem.</p>

<p>In short: How do we put packets, coming from IPsec, in VLAN 10 (for normal users), or is there any way to propagate a VLAN?</p>

<p><a href=""https://i.stack.imgur.com/BxaqS.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/BxaqS.gif"" alt=""enter image description here""></a></p>
","<p>VLANs are layer-2 domains, and they end at a layer-3 boundary (router). A layer-2 frame is stripped from the layer-3 packet at the first router it encounters. When the layer-3 packet reaches the second router, a new layer-2 frame will encapsulate the packet for the VLAN of the destination subnet.</p>
","24102"
"Can/Should a DHCP server send a DHCPDISCOVER message?","3660","","<p><em>I have added some context to my question incase this is helpful but please feel free to just answer the question at the bottom.</em></p>

<p>I have a TP-Link router that keeps crashing but in two stages, first the DHCP, web management and remote log saving become nonfunctional then about 2 hours after this the router becomes of less use than a lobster, that is it responds to no form of outside input that I could think of, until it is rebooted.</p>

<p>Immediately before the first stage of the crash the router logs the following events (captured using the remote save system log function:<img src=""https://i.stack.imgur.com/PyYo4.png"" alt="""">)</p>

<p>11/04/2015 11:25:27 &lt;13> DHCPC: Send DISCOVER with request ip 0.0.0.0 and unicast flag 1
11/04/2015 11:25:30 &lt;13> DHCPC: Send DISCOVER with request ip 0.0.0.0 and unicast flag 1
11/04/2015 11:25:33 &lt;13> DHCPC: Send DISCOVER with request ip 0.0.0.0 and unicast flag 1
11/04/2015 11:25:38 &lt;13> DHCPC: Send DISCOVER with request ip 0.0.0.0 and unicast flag 0
11/04/2015 11:25:41 &lt;13> DHCPC: Send DISCOVER with request ip 0.0.0.0 and unicast flag 0
11/04/2015 11:25:44 &lt;13> DHCPC: Recv no OFFER, DHCP Service unavailable</p>

<p><strong>My Question is: Can/Should a DHCP server send a DISCOVER message?</strong> As it was my understanding based on <a href=""http://tools.ietf.org/html/rfc2131"" rel=""nofollow noreferrer"">http://tools.ietf.org/html/rfc2131</a> that servers should only receive DISCOVER.</p>

<p>Many thanks in advance for any help.</p>
","<p>It's acting as a dhcp relay agent.</p>

<p>This is a feature that is used to offer IP addresses for subnets that the current DHCP server is not offering.</p>

<p>This feature should generally have an off or on setting and is generally something a router does. </p>

<p>It is useful if the actual DHCP server for a segment is, for example, on a different VLAN.</p>

<p>If there is a server answering the DHCPDISCOVER message a DHCPOFFER is sent unicast to the DHCP-relay on port 67 UDP. The DHCP-relay agent then broadcasts the DHCPOFFER to a subnet using UDP port 68. </p>
","17820"
"What is the correct way to diagram a Patch Panel?","3643","","<p>I am creating a network diagram for my local LAN. I would like to include a patch panel diagramming what physical location (office) each port goes to, as well as the devices in that office. I have attached what I have created below, but I am unsure that this is the best way to do this. </p>

<p>What is the correct way to diagram physical locations that a patch panel goes to within a Network Diagram?</p>

<p><a href=""https://i.stack.imgur.com/CPkK3.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/CPkK3.png"" alt=""Patch Panel""></a></p>
","<p>Typically you diagram network connections, and then make good use of labeling the physical patch panel and cables. The reason for this is patch panels are only a physical pass through, If you are troubleshooting at that point, then you should be looking at it in person.</p>

<p>Here is a good link for some network diagrams <a href=""http://www.ratemynetworkdiagram.com/toplist.php?ut=8"" rel=""nofollow"">link</a></p>

<p>I would diagram out the network from a layer2/3 perspective and go through the patch panels and physically label everything including the patch panel and the cables. </p>
","8064"
"Layer 2 vs Layer 3 core - with HP IRF","3641","","<p>The SMB organization I work for is migrating to HP/3COM Comware L3 switches and we will be implementing the standard Core>Distribution>Access design.  </p>

<p>Please refer to this diagram for clarification:</p>

<p><a href=""https://i.stack.imgur.com/dxQD7.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/dxQD7.jpg"" alt=""Network Design Diagram""></a></p>

<p>In the Cisco world, it's always been highly recommended to have layer 3 between distribution and core using a routing protocol.  Mainly due to avoiding blocked ports due to STP, faster convergence/fail over times, L2 loop prevention etc.  Also allowing inter-vlan traffic without sending traffic up to the core. </p>

<p><strong>My question is:</strong> Is the practice of implementing a 'layer 3 distribution to core' applicable today in the HP world when it's possible to have a highly redundant layer 2 to  the core without STP, using IRF?<br>
<em>I’ve researched a bit but can’t find clear guidance when it comes to specifically a core using IRF or equivalent.</em></p>

<p>I’m torn between the ease of L2 and the wildly recommended L3 solution. Thanks very much for your help.</p>

<p>Edit:</p>

<p>Further Information: In the layer 2 example, I would be tagging traffic all the way to routed interfaces on the core using inter-vlan routing.  This would allow me to do most of my configuration on the core without having to replicate it to the distribution - resulting in simplicity and less human error (Could be useful for eg guest VRF or security policies).  The HP switch specs are well beyond our requirements therefore larger broadcast traffic isn’t an issue.</p>
","<p>Straight from Cisco’s <a href=""http://www.cisco.com/c/en/us/td/docs/solutions/Enterprise/Campus/HA_campus_DG/hacampusdg.html"" rel=""nofollow"">Campus Network for High Availability Design Guide</a>, L3 is superior because:</p>

<blockquote>
  <p>– Faster convergence around a link or node failure.</p>
  
  <p>– Increased scalability because neighbor relationships and meshing are
  reduced.</p>
  
  <p>– More efficient bandwidth utilization.</p>
</blockquote>

<p><sup>From <a href=""http://www.cisco.com/c/en/us/td/docs/solutions/Enterprise/Campus/HA_campus_DG/hacampusdg.html#wp1107724"" rel=""nofollow"">Cisco: Campus Network for High Availability Design Guide - Core Layer</a></sup></p>

<p>These are all great reasons, but you won’t stand to benefit from any of them, as your setup doesn’t allow for it.  If a packet arrives at your distribution node, it’s only going to have one node that it can go to next; your core which is using IRF.  There isn’t a routing protocol that is going to be intelligent enough to determine that you have another (perhaps <em>lower</em> speed) connection combining your 2 cores.  That additional hop is transparent and would require some manual intervention (somehow).</p>

<p>Personally, I don’t think it’s a good idea for you to virtualize your cores. Path determination is impossible, independent device operation is severed, and you completely eliminate the possibility of intelligent routing.  All of those are critical to a well oiled network. </p>

<p>Though, you may have additional business requirements that dictate this design but aren't outlined above.</p>

<blockquote>
  <p>In the Cisco world, it's always been highly recommended to have layer
  3 between distribution and core using a routing protocol.</p>
</blockquote>

<p>This isn’t just the Cisco world, this is the Networking world overall.  Network engineers work to eliminate STP in as many cases as possible because they know of the limitations it drags along with it.  Routing to the access layer is recommended nowadays:</p>

<blockquote>
  <ul>
  <li><p>Consider EIGRP/Routing in the access layer.</p>
  
  <p>A routing protocol like EIGRP, when properly tuned, can achieve
  better convergence results than designs that rely on STP to resolve
  convergence events. A routing protocol can even achieve better
  convergence results than the time-tested L2/L3 boundary hierarchical
  design. However, some additional complexity (uplink IP addressing and
  subnetting) and loss of flexibility are associated with this design
  alternative. Additionally, this option is not as widely deployed in
  the field as the L2/L3 distribution layer boundary model.</p></li>
  </ul>
</blockquote>

<p><sup>From <a href=""http://www.cisco.com/c/en/us/td/docs/solutions/Enterprise/Campus/HA_campus_DG/hacampusdg.html#wp1107593"" rel=""nofollow"">Cisco: Campus Network for High Availability Design Guide
- Access Layer Tuning</a></sup></p>

<p>There used to be an idiom: <em>“Switch where you can, Route where you must”</em>.  In recent times, that has been <strong>completely</strong> flipped on it’s head:</p>

<p><strong>Route where you can, Switch where you must</strong></p>

<p>Tons of enterprise switches support some level of routing now.  We can’t stand behind <em>‘my device doesn’t support that’</em> because that’s not the case, anymore.</p>

<blockquote>
  <p>Is the practice of implementing a 'layer 3 distribution to core'
  applicable today in the HP world when it's possible to have a highly
  redundant layer 2 to the core without STP, using IRF?</p>
</blockquote>

<p>Yes, it absolutely is.  HP’s Intelligent Redundant Framework is just another system virtualization technology like Cisco’s StackWise and Juniper’s Virtual Chassis, just painted a different color and tagged with ‘the most disruptive technology in ages’.  Every vendor will tout how much better theirs is than the competitor, but it’s not a game changer or anything to write home about.</p>
","14884"
"Why is such a large IPv4 range assigned to localhost?","3634","","<p>Why is so large a range of IPv4 addresses assigned to <code>localhost</code>, (<code>127.0.0.0</code> through <code>127.255.255.255</code>)?</p>
","<p>It comes from <a href=""http://tools.ietf.org/html/rfc990#page-6"">RFC 990, pg 5</a>, under ""Special Addresses"":</p>

<blockquote>
  <p>The class A network number 127 is assigned the ""loopback"" function, that is, a datagram sent by a higher level protocol to a network 127 address should loop back inside the host.  No datagram ""sent"" to a network 127 address should ever appear on any network anywhere.</p>
</blockquote>

<p>At the time (1986), the internet was completely classful and nobody really gave much thought to allocating this much space to the loopback address.  Thus, the loopback got an entire Class A network.</p>
","2842"
"How do Metropolitan Area Networks (MAN) interconnect?","3628","","<p>If an organization in a city (perhaps New York) has multiple offices within that city, how would they interconnect their LANs? I already understand that they will connect to an ISP, but my question is: Does a MAN travel across the internet to connect their networks where they have routers running eBGP?</p>
","<p>There are quite a few possibilites. </p>

<ol>
<li><p>They can get a dark fiber from an ISP and interconnect their network equipment, in this case they ""own"" the whole network and they are fully responsible for routing between different offices.</p></li>
<li><p>They also can get plain Internet access in each location and build a secure overlay network, like DMVPN. The branch offices of course can run BGP with ISPs. </p></li>
<li><p>Another option is to get some sort of L2/L3 VPN from an ISP. In case of L2VPN the offices will be directly connected in L2. In case of L3 VPN, the company's equipment usually will have to run some sort of routing protocol with ISP, who will ""own"" company's core network. </p></li>
</ol>
","6281"
"How to connect to a Summit switch via PuTTy using a RJ45-DB9 cable","3627","","<p>I have the following: </p>

<ul>
<li>Windows 7</li>
<li>Putty .66</li>
<li>RJ45-DB9</li>
</ul>

<p>I have been out of the networking field for quite sometime (10 years) and I forgot how to console into a switch.</p>

<p>Do I need to configure my PC interface with an IP address?</p>

<p>Do I select serial/ssh/telnet for my connection on PuTTy?</p>

<p>If someone would be able to provide a step-by-step ""guide"" I'd appreciate it very much.</p>
","<p>I'm not familiar with Summit switches (I have tried Cisco switches) </p>

<p>So if your switch has Console port (usually they need either serial cable or RJ45)</p>

<p>Im gonna assume it's RJ45. Your RJ45 cable ends with serial end just like in this picture: 
<a href=""https://i.stack.imgur.com/BYmiv.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/BYmiv.jpg"" alt=""enter image description here""></a></p>

<p>You plug the RJ45 into the switch. The other end needs to go to your computer. If you're computer has serial port input, great.. If not, then you will need a good quality serial to USB cable. </p>

<p>Go to your device manager on your computer and find out what COM number you have.</p>

<p>Take a look at my attachment. 
<a href=""https://i.stack.imgur.com/ju6jF.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ju6jF.png"" alt=""enter image description here""></a></p>

<p>In my computer it's COM9, open putty and follow the attachment picture.</p>
","32486"
"PIM-SM multicast and HSRP/VRRP","3601","","<p>I need to set up a PC to listen in on a multicast (PIM-SM) data feed. The multicast sources and (anycast) Rendezvous point are behind a ""HSRP/VRRP address"" on the other side of a WAN link. (The instructions actually say ""HSRP/VRRP"") </p>

<p>As per the received documentation, I have set up a router with a static route to the HSRP/VRRP address, and the other side has added a route to my network. Unicast traffic works fine, but I am not receiving any multicast traffic. Wireshark shows no PIM joins are sent by my router.</p>

<p>What could be wrong?</p>
","<p>PIM messages are not sourced from HSRP VIP's so the RPF check fails since the HSRP VIP is your RPF neighbor.  There are two ways around this though. </p>

<ol>
<li><p>Set up a dynamic routing protocol between your router and the other sides routers so HSRP is not needed.</p></li>
<li><p>Configure static mroutes to the other sides actual interface IP's such as:</p>

<p>ip mroute 0.0.0.0 0.0.0.0 1.1.1.1</p></li>
</ol>
","1452"
"How do I tag traffic with a DSCP value on an ASA?","3590","","<p>I have a SIP Server that does not put a <a href=""/tags/dscp"" title=""Differentiated Services Code Point"">DSCP</a> code on it's traffic.  This server is behind an ASA, and I want to prioritize its traffic passing through an ASA from the private to public network. </p>

<p>I am using the ASA shape feature, and have it set to prioritize  ""EF AF31"" DSCP.</p>

<p>I am assuming I would use and ACL to match the traffic, but then would I use a class map / policy map to mark the traffic on the inside, before it passes 
through the shaper?</p>
","<p>To my knowledge, the ASA platform is only able to classify based on existing DSCP markings, not apply or change them.</p>

<p>It does preserve existing markings, though.</p>
","1947"
"Juniper EX 3300 Incorrectly Identifies SFP+ Transceiver Module","3586","","<p>We have 2 Juniper EX 3300 switches operating in a stack. It is running Junos 12.3R3.4. The switches have 4 SFP/SFP+ Ports. On FPC 1, PIC 1, Xcvr 0 you see a description of ""SFP-FC8G-SW."" However, the transceiver is a Juniper branded 10GE SFP+ SR (see image below). </p>

<p>The interface is up/down. On the client side the physical media indicates that it is connected but there seems to be no link layer connectivity. No traffic passes on the interface. </p>

<p>Here is the output of ""show chassis hardware"" </p>

<pre><code>root@juniper&gt; show chassis hardware 
Hardware inventory:
Item             Version  Part number  Serial number     Description
Chassis                                GA021XXXXXXX      Virtual Chassis
Routing Engine 0 REV 10   750-034247   GA021XXXXXXX      EX3300 48-Port
Routing Engine 1 REV 10   750-034247   GA021XXXXXXX      EX3300 48-Port
FPC 0            REV 10   750-034247   GA021XXXXXXX      EX3300 48-Port
  CPU                     BUILTIN      BUILTIN           FPC CPU
  PIC 0                   BUILTIN      BUILTIN           48x 10/100/1000 Base-T
  PIC 1          REV 10   750-034247   GA021XXXXXXX      4x GE/XE SFP+
    Xcvr 0                NON-JNPR     TED1728B11R       SFP+-10G-CU3M
    Xcvr 1       REV 01   740-021308   ALE0GT1           SFP+-10G-SR
    Xcvr 2       !        NON-JNPR     PRO3M110          SFP+-10G-CU1M
    Xcvr 3       !        NON-JNPR     PRO3M102          SFP+-10G-CU1M
  Power Supply 0                                         PS 100W AC
  Fan Tray                                               Fan Tray
FPC 1            REV 10   750-034247   GA021XXXXXXX      EX3300 48-Port
  CPU                     BUILTIN      BUILTIN           FPC CPU
  PIC 0                   BUILTIN      BUILTIN           48x 10/100/1000 Base-T
  PIC 1          REV 10   750-034247   GA021XXXXXXX      4x GE/XE SFP+
    Xcvr 0                NON-JNPR     PNN32WL           SFP-FC8G-SW
    Xcvr 1                NON-JNPR     TED1729BEKS       SFP+-10G-CU3M
    Xcvr 2       !        NON-JNPR     PRO3M103          SFP+-10G-CU1M
    Xcvr 3       !        NON-JNPR     PRO3M111          SFP+-10G-CU1M
  Power Supply 0                                         PS 100W AC
  Fan Tray                                               Fan Tray
</code></pre>

<p><img src=""https://i.stack.imgur.com/QWzf3.jpg"" alt=""SFP+ Transceiver Module""></p>
","<p>Quick test: Swap the SFPs with a known working ones on the switch (if possible) and see if the condition stays with the ports or follow the SFPs.</p>

<p>If the other SFP works in the current ""problematic SFP ports"" there is less possibility of this being the switch's problem (I still could be, but just unlikely).</p>

<p>You can try to plug it in the other switch's too... if it's problematic there, it's almost guaranteed to be the SFP, unless you got the One-In-A-Million chance of having two switches with exactly the same freaking bug - extremely unlikely</p>

<p>If after all that JTAC still insist for RMA on both switches, just escalate the issue to get someone more reasonable at their end.</p>

<p>Edit: I've just seen that it was a mislabeling issue, you might want to mark this question as answered. :)</p>
","8271"
"Output Drops on Serial interface: Better queueing or Output queue size?","3576","","<p>On Internet edge routers speaking eBGP to multiple carriers and iBGP to one another, all interfaces on the LAN and WAN side are GE except for one Serial full-DS3 (~45Mbps) on each router.  Although I think I'm hardly sending much traffic outbound on the serial interfaces -- in the 3-10Mbps range -- I see constant output queue drops (OQD).  <strong>Is the likely explanation that there really is bursty traffic</strong> I'm not seeing as the load-interval is at the 30 second minimum and SNMP polling is averaging traffic over 5 minutes, so those won't illuminate the burstiness?</p>

<p>The platform is a Cisco 7204VXR NPE-G2.  Serial queuing is <em>fifo</em>.</p>

<pre>
Serial1/0 is up, line protocol is up
  Hardware is M2T-T3+ pa
  Description: -removed-
  Internet address is a.b.c.d/30
  MTU 4470 bytes, BW 44210 Kbit, DLY 200 usec,
     reliability 255/255, txload 5/255, rxload 1/255
  Encapsulation HDLC, crc 16, loopback not set
  Keepalive set (10 sec)
  Restart-Delay is 0 secs
  Last input 00:00:02, output 00:00:00, output hang never
  Last clearing of ""show interface"" counters 00:35:19
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 36
  Queueing strategy: fifo
  Output queue: 0/40 (size/max)
  30 second input rate 260000 bits/sec, 208 packets/sec
  30 second output rate 939000 bits/sec, 288 packets/sec
     410638 packets input, 52410388 bytes, 0 no buffer
     Received 212 broadcasts, 0 runts, 0 giants, 0 throttles
              0 parity
     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored, 0 abort
     515752 packets output, 139195019 bytes, 0 underruns
     0 output errors, 0 applique, 0 interface resets
     0 output buffer failures, 0 output buffers swapped out
     0 carrier transitions
   rxLOS inactive, rxLOF inactive, rxAIS inactive
   txAIS inactive, rxRAI inactive, txRAI inactive
</pre>

<p>24 hours later will show thousands of OQD. We do push out more traffic around 3am each day, so maybe there is some bursty traffic here I'm not giving enough weight towards.</p>

<pre><code>Last clearing of ""show interface"" counters 1d01h
Input queue: 0/75/0/158 (size/max/drops/flushes); Total output drops: 12049
</code></pre>

<p>I'd like to push more outbound traffic on the DS3, but not with my concern on the OQD.  The tier 2 ISP behind the DS3 has POPs that double as peering-points with 6+ tier 1's, so the idea is to get that traffic on-net with the client asap as opposed to our primary ISP on the GE who is a tier 1, but must work their way towards their peering exchanges. Inbound traffic is not a concern.</p>

<p><strong>Is there a better queueing strategy than fifo in this situation?</strong>  Looking at the Cisco docs on input &amp; output queue drops, incrementing outbound queue size is not recommended as the packets are already on the router and it would be better to drop at input so TCP can throttle the app back. There's plenty of bandwidth on our GE links, so there's no really need to throttle the input.  <em>There are no policy-maps on these routers.  90% of outbound traffic comes from our HTTP responses; most of the rest from FTP and SMTP.  The GE links push 50-200+Mbps.</em></p>

<p><strong>Would you recommend any adjustments to the output queue size buffer?</strong> These serial interfaces are our backup links that I'd rather utilize more for the reason given earlier (if valid), but tempered with my BGP policies that attempt not to overload that serial interface (which appears very underloaded most of the time).</p>
","<p>You're right, you wouldn't really see the burstiness easily on SNMP. 1GE can send 1.48Mpps, so it takes very very little time to congest the the 45Mbps, which can handle less than 75kpps.  </p>

<p>If your ingress is 1GE and egress is 45Mbps, then obviously the congestion point of 45Mbps will need to drop packets. This is normal and expected. If you increase buffers you'll introduce more delay.<br>
1GE takes 0.45ms to send 40 1500B IP frames, which is right now the amount of burst you can handle. However dequeueing them on the 45Mbps already takes 10ms.</p>

<p>If you don't have any acute problem, I would probably not do anything about it. But if some traffic is more eligible for dropping than other, then you should replace FIFO with class-based queueing. Say maybe you want to prioritize so that more ftp is dropped and less voip.<br>
Then it'll also make more sense to add more buffering on the ftp traffic, as it's not really sensitive to delay.</p>

<p>If you want to try your luck with deeper buffers, something like this should suffice:</p>

<pre><code>policy-map WAN-OUT
 class class-default
    fair-queue
    queue-limit 200 packets
!
interface Serial1/0
  service-policy output WAN-OUT
</code></pre>

<p>This would cause 50ms buffers on the Serial1 and would allow you to handle up-to 2.25ms burst from single Gige interface.</p>
","1509"
"Moving interface names on a Cisco ASA while maintaining the rest of the configuration in place","3574","","<p><strong>My initial problem:</strong> I’ve run out of physical ports on my ASA 5525-X</p>

<p><strong>My initial solution:</strong> Create sub-interfaces on a port-channel and use a switch to aggregate my VLANs</p>

<p><strong>The subsequent issue:</strong> How do I move the names assigned to the original interfaces to the new sub-interfaces while keeping the rest of my configuration in place?</p>

<p>If I issue a ‘<em>no nameif</em>’ directive on the original interface prior to reassigning the name, the ASA will delete every configuration element that referenced that name.</p>

<p>If I reissue the ‘<em>nameif</em>’ directive to rename the interface to something temporary prior to reassigning the original name, all of the configuration elements that referenced the original name will be updated to reflect the new name. In the end, I’m no closer to my goal.</p>

<p>The only solution I’ve fund so far is the obvious one - edit the startup-config offline and reload the firewall with my changes already in place. What I don’t like about this is the reload time – the ASA doesn’t boot quickly. I won’t be able to sneak the downtime into a small maintenance window at the end of the day (is the internet down? Huh, it’s back up now - must have been me). Instead, I’ll will have to schedule a longer maintenance window.</p>

<p><strong>Update</strong>: Please check out the related question, <a href=""https://networkengineering.stackexchange.com/questions/18879/cisco-asa-startup-config-command-ordering-for-sub-interfaces"">Cisco ASA startup-config command ordering for sub-interfaces</a>.</p>

<p>Is there another way to ‘move’ a name from one interface to a new interface while keeping everything else in place?</p>
","<p>Leave the physical port you are using as the untagged VLAN.  You can direct that traffic to a VLAN# on your switch by setting the Native VLAN the VLAN# you want that traffic to be on.</p>

<p>Then for every new VLAN you are adding to your ASA, make that a sub interface.  </p>

<p>I don't have an ASA to validate this code, but it will look something like this:</p>

<pre><code>interface gig0/0
  nameif ORIGINAL-NAMEIF
  security-level 100

interface gig0/0.20
  vlan 20
  nameif NEW-VLAN-2
  security-level 20

interface gig0/0.30
  vlan 30
  nameif NEW-VLAN-3
  security-level 30
</code></pre>

<p>etc.  It should allow you to add new sub interfaces without making any changes to your original interface.  The ""root"" interface doesn't include a VLAN tag, so that traffic is unchanged.</p>

<p>You can run it this way indefinitely, or change it so everything is using VLAN tags at a later date when its more convenient for you to bring the network down. </p>
","18742"
"Why should I use Router on a Stick If already doing interVlan routing using L3 Switch in same netwrok?","3573","","<p>I have this network in which the top switch(one connected to router) is used for routing between all the vlans in the network. </p>

<p><img src=""https://i.stack.imgur.com/OnYo9.png"" alt=""enter image description here""></p>

<p>I have defined <code>vlan interface</code> in this switch, but I haven't configured anything in a router on a stick.</p>

<p>My network below the router is working absolutely fine and I can ping every device from every other.</p>

<p>Now the scenario defined above is provided by my professor. Since everything is pinging properly , what am I supposed to configure in router on a stick ?</p>

<p>I know how to configure router on a stick using sub-interfaces and everything, but I am already using L3 Switching so why this router is even connected , and what am I supposed to configure in it ?</p>
","<p>The answer is simple: if you <strong>only</strong> need to do inter-VLAN routing and you are already doing it with a L3 switch, then you don't <strong>need</strong> a router. Not to mention that switches are faster than routers at doing this because of ASIC. </p>

<p>Having said this, though, it makes sense to have a router in the picture because that's what you will find in the real world. You use routers to connect remote LANs via WAN links, you use them for QoS, ACLs etc. You need to be able to configure routers even when they are connected to L3 switches which do some of the routing. </p>

<p>Then again, if you just need to configure inter-VLAN routing, you are good to go, no need to configure it on the router as well because the switch is already taking care of it. </p>
","18212"
"What happens if two hosts with the same MAC address are in the same broadcast domain?","3556","","<p>I am aware that situation, where duplicate MAC addresses appear in the same broadcast domain, should never happen. However, if such situation happens, then how will the network work? I think one should distinguish three scenarios here:</p>

<p>1) If NIC's with the same MAC address are directly connected with a crossover-cable, then based on my tests, some kernels will not send the ARP reply(for example FreeBSD 9.2 kernel, IOS 12.2) if the MAC address in ""ARP reply"" message is the same as configured to the NIC, while others do(for example Linux 2.6 and 3.7).</p>

<p>2) If NIC's with the same MAC address are connected through a switch and those two hosts try to communicate with each other. This should not work because if one host sends an unicast frame which has the same source and destination MAC address, then switch would like to send the frame out of the port where it received the frame which is an illegal operation? In other words, such traffic should be dropped by the switch.</p>

<p>3) If two NIC's with the same MAC address are connected to switch and try to communicate with other hosts in the same broadcast domain. In this case, only one host at a time should be reachable? Depends on which of the switch ports has learned the MAC address. If both hosts generate traffic, then MAC address will flap between the two switch ports and there is a packet loss to both hosts?</p>
","<p>I have seen this a few times, where manufacturers are lazy and store MAC addresses in CMOS or similar, and fall back to a common default. It would also be easy to arrange if using locally assigned addresses (e.g. when provisioning VMs)</p>

<ol>
<li><p>I've not tested what individual OSs do. If your only problem is ARP, then static ARP entries might work for you.</p>

<ol start=""2"">
<li><p>Some old DEC systems used to send loopback packets to their own address, as a duplicate address check. I believe some Cisco switches do the same for loop detection. Either way, it's a special case of destination MAC filtering. If the address wasn't in the cache, I wouldn't be sure that first packet would be dropped immediately: it might be added to the forwarding tables and forwarded. Otherwise, silently drop.</p></li>
<li><p>The MAC address would flap; if you are running a stateless protocol at the higher levels, you may end up with something like a crude unicast load balancer. For something like TCP, you'll get a lot of RST's as well as packet loss. And as others have said, to an 'enterprise' switch it looks like MAC spoofing and some may log/trap on this event.</p></li>
</ol></li>
</ol>
","11284"
"TCAM relationships in hardware-switching architecture","3552","","<p>I am familiar (high level) with how Ternary Content Addressable Memory operates but I remain confused as to how TCAM relates to ASICs and when these components possibly also combine with the CPU for greater switching performance... <em>(particularly when vendors often market the use of merchant/custom silicon, or custom ASICs for new products &amp; features then it appears confusing)</em>.</p>

<p>I am familiar in Cisco IOS for example with the ability to partition more space for TCAM performance  for features like qos, acl and route lookups.  I also understand features like NAT will still rely on CPU processing, however i am specifically struggling with;</p>

<ol>
<li>Is TCAM part of the same hardware architecture, i.e. internal or
external to the ASIC itself?</li>
<li>Are TCAMs scalable (for example can manufacturers just keep adding TCAMs to a platform for greater performance &amp; custom features) or is there a limit based on things like power consumption?</li>
<li>Do TCAM cycles and ASICs work in parallel with the CPU at all for features like
NAT or should I only think of them as independent things?</li>
</ol>
","<p><a href=""http://en.wikipedia.org/wiki/Content-addressable_memory#Ternary_CAMs"">TCAM</a> is a type of memory, which takes 10-12 transistors to store a single bit. By way of comparison, Static RAM (<a href=""http://en.wikipedia.org/wiki/Static_random-access_memory"">SRAM</a>) only takes 6 transistors to store a single bit, and Dynamic RAM (<a href=""http://en.wikipedia.org/wiki/Dynamic_random-access_memory"">DRAM</a>) takes one transistor and a capacitor.  All these different types of memories can either be internal or external to an ASIC. One reason to put all memories on a chip, is that they can be ran at higher clock rates than when external to a chip. Why choose one type of memory over another? This has to do with characteristics of the memory, <a href=""http://en.wikipedia.org/wiki/Static_random-access_memory"">SRAM</a> can be accessed every clock, <a href=""http://en.wikipedia.org/wiki/Dynamic_random-access_memory"">DRAM</a> requires periodic refresh, so can not be accessed every clock and <a href=""http://en.wikipedia.org/wiki/Content-addressable_memory#Ternary_CAMs"">TCAM</a> gives you <a href=""http://en.wikipedia.org/wiki/Ternary_operation"">ternary capability</a>. </p>

<p><a href=""http://en.wikipedia.org/wiki/Content-addressable_memory#Ternary_CAMs"">TCAM</a>s are as scalable as long as you have space on a chip to instantiate them, or pins on package to connect to external ones. The issue with <a href=""http://en.wikipedia.org/wiki/Content-addressable_memory#Ternary_CAMs"">TCAM</a> is they take 2x space of <a href=""http://en.wikipedia.org/wiki/Static_random-access_memory"">SRAM</a>, and 12x space of <a href=""http://en.wikipedia.org/wiki/Dynamic_random-access_memory"">DRAM</a>. It does not always make sense to use <a href=""http://en.wikipedia.org/wiki/Content-addressable_memory#Ternary_CAMs"">TCAM</a> for the same operations that you can do them algorithmically (Hashes, *tries) with other memory types. It comes down to a tradeoff between utilization effectiveness of the algorithm and space on the chip on which one to choose. <a href=""http://en.wikipedia.org/wiki/Content-addressable_memory#Ternary_CAMs"">TCAM</a>'s power utilization grows in linear proportion to size. The majority of large <a href=""http://en.wikipedia.org/wiki/Content-addressable_memory#Ternary_CAMs"">TCAM</a>s (greater than 2M entries) now use algorithmic techniques so that power savings can be achieved. </p>

<p>NAT/PAT is complex feature, which generally needs a CPU or Network Processor (NPU) to handle fixups. The general packet flow for NAT is first packet goes to CPU/NPU, and a flow entry is installed in flow table or ACL table with the information on how to translate subsequent packets in the flow. There are multiple different forms of NAT/PAT, and just as many ways to optimize each one in a chip. The simplest NAT being rewrite the IPs, and don't worry if you break the addresses embedded in the payload, no fixups.</p>

<p>There is another version of BRKARC-3466 which was presented at CiscoLive 2013 in Melbourne that covers some of the high level ideas behind lookups, which is missing from the 2013 Orlando one. A good reference book on this area is <a href=""http://rads.stackoverflow.com/amzn/click/0120884771"">Network Algorithmics: An Interdisciplinary Approach to Designing Fast Networked Devices</a> by George Varghese.</p>
","5643"
"What is the purpose of subnetting, if we have NAT?","3548","","<p>As I know, NAT is the system, that divides IP addresses into two categories - public and private. Public represents the local network from the outside and private represents the device from the inside.</p>

<p>Subnetting divides one IP address into the part that represents the network from outside and the part that represents the device on the network.</p>

<p>Remembering that every IP addresses is 32 bit, having two of them (in NAT) gives an opportunity to use more IP addresses (both on the inside and on the outside), than in the situation with subnetting. Why would we need subnet masks then?</p>

<p>When I ask google for my IP from computer and from my phone, I see the very same public IP, and when I scan the local network with nmap, I see only private IPs.</p>

<p>So why do we need subnet masks, if we have NAT?</p>

<p>P.S.
When the server sends out the signal to my PC, does it send it only to my public IP and the router remembers which private IP needs it, or does the server send out both, the public and the private IPs?</p>
","<p>NAT and subnetting solve two different problems.</p>

<p>Problem 1: Previously IP addresses were divided into classes A, B and C. A class C address had a default subnet mask of 255.255.255.0 meaning 24 bits decide which network and the last 8 bits are for the host. With 8 bits for hosts you could have 2^8 - 1 = 254 IP addresses that are part of the same network.</p>

<p>Historically it was not recommended to have more than around 250 IPs on the same network because of broadcasts flooding the network which meant that class B networks, which have a default subnet mask of 255.255.0.0 with 16 bits for hosts, have way too many addresses for a single network. Even more so with a class A network.</p>

<p>Also most of the time we require many smaller networks with just a few hosts which is why we subnet. Subnetting is basically moving the boundary between the host and network part of the address. So by decreasing the number of addresses on each network, you can increase the number of networks.</p>

<p>Problem 2 is that, even with subnetting, we have way too few addresses for every device to get its own, which is why we've got NAT.</p>

<p>NAT or in this case PAT works by letting multiple private adresses share a single public IP address by mapping to a port number. </p>

<p>So, in the IPv4 address space, we have a few reserved blocks of addresses which are meant to be used locally on a private network, e.g. 192.168.0.0 with a subnet mask of 255.255.255.0. This network can be used on multiple sites at the same time because they are private and not allowed to be used on the Internet. </p>

<p>So when a device with a private IP wants to go out on the Internet, the private IP is mapped to a public IP address, together with a port number which means that multiple devices on a local network can share on a single public IP. This extends the number of devices that can access the Internet.</p>

<p>If the server is on the same network as your PC it will communicate with your private IP. If the server is on the Internet, it will communicate with your public IP on a specific port which your router maps to your private IP.</p>
","28849"
"what are IFL IFD and IFA","3541","","<p>I came across terms like IFL IFD and IFA 's recently when studying some articles related to my project, I dont clearly understand what they are and the difference between them. I know they are related to interfaces within networking devices. I came across these terms when studying article on Juniper network's website.</p>
","<p><a href=""http://www.gossamer-threads.com/lists/nsp/juniper/23778#23778"" rel=""nofollow"">This juniper-nsp email</a> explains them pretty clearly...</p>

<blockquote>
  <p>We try to avoid the terms ""ifd"" and ""ifl"" completely in our docs,
  but these internal terms have slipped out in a few places. The
  relationship is fairly simple: ""ifd"" is the physical interface
  device, where ""ifl"" is the logical interface (aka unit). Logical
  interfaces are arranged as children of a physical interface... As an example, [interfaces so-1/2/3] would be a physical interface and [interfaces so-1/2/3 unit 0] would be a logical unit. The organization hierarchy continues down with address families (iff) as [... family inet] and addresses (ifa) as [... address 10.1.2.3/24].</p>
</blockquote>

<p>In summary:</p>

<ul>
<li>ifd: A Junos Physical Interface</li>
<li>ifl: A <a href=""http://forums.juniper.net/t5/Junos/Juniper-logical-interface-concept/td-p/163660"" rel=""nofollow"">Junos Logical Interface</a> (how individual vlans on a physical interface are distinguished)</li>
<li>ifa: A Junos interface address</li>
</ul>
","6973"
"When a ping is lost, what happens?","3540","","<p>Suppose that the message you are sending does not reach the destination, such as a ping. Is the content of that message protected?  How is a retransmission accomplished?</p>
","<p>IP protocol provides no guarantee that packets will arrive, arrive on time, or arrive in the proper order.  The only thing IP can verify is that the packet header is intact (due to the header checksum).    So if a ping is lost, it is...lost.   It is up to the sending program to detect that no corresponding reply was received.   If you want to guarantee delivery, you need to rely on layer 4 protocols, namely TCP.</p>
","5857"
"How to assign a static IP to a Cisco Layer 3 switch in order to connect using SSH?","3537","","<p><a href=""http://www.cisco.com/c/en/us/td/docs/switches/lan/catalyst3560/software/release/12-2_55_se/configuration/guide/3560_scg/swauthen.html#wp1204672"" rel=""nofollow"">The steps of this manual</a> have been executed in order to configure SSH.</p>

<p>Once SSH has been configured, how to access the switch from a computer using SSH?</p>

<p>The following steps have been executed in order to assign an IP to a switch and subsequently connect to it.</p>

<p>An IP has been assigned to a Cisco Layer3 switch.</p>

<pre><code>interface FastEthernet0
 ip address 20.40.60.80 255.255.255.0
!
</code></pre>

<p>A computer (20.40.60.81/24) is connected to Gi0/1</p>

<pre><code>interface GigabitEthernet0/1
!
</code></pre>

<p>However, neither from the switch to the computer nor vice versa a ping is successful.</p>
","<pre><code>interface FastEthernet0
  switchport
  switchport mode access
  switchport access vlan 1
!
interface GigabitEthernet0/1
  switchport
  switchport mode access
  switchport access vlan 1
!
interface vlan 1
  ip address 20.40.60.80 255.255.255.0
!
</code></pre>

<p>This should be the bare minimum configuration to get your scenario working, at least some IP connectivity.</p>

<p>The reason it is not working right now is because those two interfaces are in separate broadcast domains, isolating one Ethernet data-link from another.  The above configuration assigns the IP address to the SVI in VLAN 1 and places both ports into VLAN 1.</p>

<p>Also, the default configuration applied to Ethernet interfaces would work as well...</p>

<pre><code>!
default interface FastEthernet0
default interface GigabitEthernet0/1
!
</code></pre>
","9842"
"KEMP load balancers using UCARP (VRRP) - multicast MAC address not being picked up","3530","","<p>Alright - been battling this for at least 20 hours consecutive.. Sorry if this seems like a long rant, or a blog post, but I'm getting to the point of exhaustion.</p>

<p>So, here's the deal. We're using KEMP load balancers, who utilizes UCARP (a Linux clone of CARP, which is a VRRP clone) for HA heartbeat and persistent states. We want to utilize IGMP in our environment to prevent flooding across the datacenter.</p>

<p>We have two Dell PowerConnect 8124F switches running SW 5.1.1.7 acting as top-of-rack. These two are connected to a stacked pair of Cisco 3750-X, which is our core.</p>

<p>The problems began when we upgraded to the PowerConnect 5.1.x, where they apparently defaulted to leave IGMP snooping on unless you tell it otherwise. And behold - our load balancers went into split-brain, causing all sorts of warm fuzzy fun.</p>

<ul>
<li>If I disable IGMP snooping on the VLAN where the load balancers do their multicast nothing happens, multicast is still dead</li>
<li>If I set up IP PIM on our core, the PowerConnect switches sees it on the same VLAN, but still no multicast traffic</li>
<li>If I enable flooding of all unregistered multicast traffic, it still does nothing at all.</li>
<li>If I disable IGMP snooping <em>globally</em> on the PowerConnect switches, all multicast traffic works. It works so great, that we get multicast traffic flooded to every single port that has the same VLAN tagged. Wonderful.</li>
</ul>

<p>I noticed some strange MAC address entries on the VLAN at our core:</p>

<pre><code>coresw#sh mac address-table vlan 367 | include 5e00
 367    0000.5e00.0101    DYNAMIC     Po13   seq_no:0
</code></pre>

<p>And I think.. Isn't that the multicast address? Why isn't this in the ""sh mac address-table multicast""?</p>

<pre><code>coresw#sh mac address-table multicast vlan 367
Vlan    Mac Address       Type        Ports
----    -----------       ----        -----
coresw#
</code></pre>

<p>And then I read this in the PowerConnect CLI guide:</p>

<blockquote>
  <p>Multicast traffic is traffic that is destined to a host group. Host
  groups are identified by the destination MAC address, i.e. the range
  01:00:5e:00:00:00-01:00:5e:7f:ff:ff:ff for IPv4 multicast traffic or
  33:33:xx:xx:xx:xx for IPv6 multicast traffic.</p>
</blockquote>

<p>Seems like we are missing a ""01"" at the beginning of the MAC address, no? The dynamic MAC entry above start with ""00"". At this point I'm thinking about calling KEMP, and letting them know that their product is horribly misconfigured. But then I go read <a href=""http://tools.ietf.org/html/rfc5798#page-28"" rel=""nofollow"">the RFC for VRRP</a> - and behold:</p>

<blockquote>
  <p>The virtual router MAC address associated with a virtual router is an 
  IEEE 802 MAC Address in the following format:</p>
  
  <p>IPv4 case: 00-00-5E-00-01-{VRID} (in hex, in Internet-standard bit-
  order)</p>
</blockquote>

<p>Alright - so switches doesn't normally pick up the multicast mac address range for VRRP. Fine, let's configure a static host group on the Dell switches. Nope.</p>

<blockquote>
  <p>Invalid input: Multicast MAC Address must be of format 01XX:XXXX:XXXX</p>
</blockquote>

<p>OK then.. Next step, try to add a static mac entry:</p>

<pre><code>osl-sys-swrack03(config)#mac address-table multicast ?

forbidden                forbid adding specific multicast addresses to
                         specific ports.

osl-sys-swrack03(config)#
</code></pre>

<p>So - no way to configure a static multicast MAC entry. If I try to do the same with a regular static MAC entry, I can only bind it to one port - this load balancing cluster runs across 4 different 10gig ports.</p>

<p><strong>Update</strong>: There seems to be some confusion regarding MAC addresses.
172.30.1.0/24 is the front-facing loadbalancer network. 172.30.1.6 is the default shared VIP for the cluster, .7 is the management IP for the first load balancer and .8 is for the second load balancer.
All other addresses (30, 40, 70, 80 etc) are all VIP with different services on them.
When a failover occurs, all the VIP's change their MAC address to the second LB's physical MAC address.
The multicast address in the bottom table does <em>not</em> change.</p>

<pre><code>coresw#sh ip arp vlan 367
Protocol  Address          Age (min)  Hardware Addr   Type   Interface
Internet  172.30.1.6             78   0050.56b4.5004  ARPA   Vlan367    &lt;- VIP - Loadbalancer1 physical MAC
Internet  172.30.1.40           204   0050.56b4.5004  ARPA   Vlan367    &lt;- VIP - Loadbalancer1 physical MAC
Internet  172.30.1.80           167   0050.56b4.5004  ARPA   Vlan367    &lt;- VIP - Loadbalancer1 physical MAC
Internet  172.30.1.70            38   0050.56b4.5004  ARPA   Vlan367    &lt;- VIP - Loadbalancer1 physical MAC
Internet  172.30.1.66            12   0050.56b4.5004  ARPA   Vlan367    &lt;- VIP - Loadbalancer1 physical MAC
Internet  172.30.1.35           185   0050.56b4.5004  ARPA   Vlan367    &lt;- VIP - Loadbalancer1 physical MAC
Internet  172.30.1.60            97   0050.56b4.5004  ARPA   Vlan367    &lt;- VIP - Loadbalancer1 physical MAC
Internet  172.30.1.30            80   0050.56b4.5004  ARPA   Vlan367    &lt;- VIP - Loadbalancer1 physical MAC
Internet  172.30.1.61            33   0050.56b4.5004  ARPA   Vlan367    &lt;- VIP - Loadbalancer1 physical MAC
Internet  172.30.1.7             27   0050.56b4.5004  ARPA   Vlan367    &lt;- Management - Loadbalancer1 physical MAC
Internet  172.30.1.8             21   0050.56b4.08c2  ARPA   Vlan367    &lt;- Management - Loadbalancer2 physical MAC

osl-sys-coresw#sh mac address-table dynamic vlan 367
          Mac Address Table
-------------------------------------------

Vlan    Mac Address       Type        Ports
----    -----------       --------    -----
 367    0000.5e00.0101    DYNAMIC     Po13   seq_no:0   &lt;- multicast HA mac (UCARP)
 367    0050.56b4.08c2    DYNAMIC     Po13   seq_no:0   &lt;- Loadbalancer1 physical MAC
 367    0050.56b4.5004    DYNAMIC     Po13   seq_no:0   &lt;- Loadbalancer2 physical MAC
</code></pre>

<p>And that's the story. What on earth am I going to do with this?</p>
","<p>I was able to resolve the issue. On the Kemp (with HA pair) you have the option of using a ""Virtual MAC Address"". If this box isn't checked, then the MAC of a load balancer VIP is that of the physical interface of the active Kemp unit. If this box is checked, then the MAC address of the VIP is a VRRP MAC. As you mentioned above the VRRP RFC states that the MAC being ""00:00""{blah} with the last octet being the Router ID. The default Kemp HA [router] ID is 01. On my Powerconnects using Firmware 5.1.x.x I'm not using VRRP but I ran some traces and determined that the Powerconnect will drop a VRRP frame if the router ID is the same as itself. They do this EVEN if VRRP isn't configured and in that mode they default to 01. So changing the Kemp HA router ID to something like 22 (0x16) resulted in everything working.</p>
","29605"
"What is the correct way to determine SFP+ Direct Attach cable compatibility between switches and NICs?","3514","","<p>I'm contemplating a 10 Gigabit link between an <a href=""http://www.cisco.com/en/US/prod/collateral/ps10265/ps10493/Intel_X520_for_Rack.pdf"" rel=""nofollow noreferrer"">Intel x520 NIC</a> and a <a href=""http://www.cisco.com/en/US/prod/collateral/switches/ps10903/ps12128/c78-695646_data_sheet.html"" rel=""nofollow noreferrer"">Cisco SG500X switch</a>.  These two would be within 5m of one another, so using one of the Cisco SFP+ passive Direct Attach cables like the <a href=""http://www.cisco.com/en/US/prod/collateral/modules/ps5455/data_sheet_c78-455693.html"" rel=""nofollow noreferrer"">SFP-H10GB-CUxM</a> seems an obvious choice.</p>

<p><img src=""https://i.stack.imgur.com/IDYwg.jpg"" alt=""enter image description here""></p>

<p>I'm new to spec'ing SFP components.  It's not obvious to me how to determine that the Intel NIC is compatible with this cable and switch.  The Cisco switch supports the Cisco cable.  The Cisco cable is SFF-8431 compliant and so is the Intel NIC.  However, I'm not sure that's sufficient for this to work.  </p>

<p>What is the correct way to determine compatibility?</p>
","<p>I usually check the <a href=""http://www.cisco.com/en/US/docs/interfaces_modules/transceiver_modules/compatibility/matrix/OL_6981.html"" rel=""nofollow"">Cisco Gigabit Ethernet Transceiver Modules Compatibility Matrix</a> and the <a href=""http://www.cisco.com/en/US/docs/interfaces_modules/transceiver_modules/compatibility/matrix/OL_6974.html"" rel=""nofollow"">10-Gigabit Ethernet Transceiver Modules Compatibility Matrix</a>. However, none of them contains any reference to SG500X</p>

<p>Anyway: regarding the switch,  SFP-H10GB-CUxM is listed in the datasheet of the 500 Series as an option for 10G connectivity, so you should have no problem to attach it to the switch. Regarding the NIC, its specification states it supports standard SFF-8431 and according to <a href=""http://www.cisco.com/en/US/docs/interfaces_modules/transceiver_modules/compatibility/matrix/OL_6974.html"" rel=""nofollow"">10-Gigabit Ethernet Transceiver Modules Compatibility Matrix</a> the SFP-H10GB-CUxM does also support SFF-8431 (as you can see next), so they should be able to work toghether. </p>

<blockquote>
  <p><strong>Regulatory and Standards Compliance</strong> </p>
  
  <p>Standards:</p>
  
  <p>• GR-20-CORE: Generic Requirements for Optical Fiber and Optical Fiber
  Cable</p>
  
  <p>• GR-326-CORE: Generic Requirements for Single-Mode Optical Connectors
  and Jumper Assemblies</p>
  
  <p>• GR-1435-CORE: Generic Requirements for Multifiber Optical Connectors</p>
  
  <p>• IEEE 802.3: 10-Gigabit Ethernet</p>
  
  <p>• ITU-T G.709: Interfaces for the Optical Transport Network</p>
  
  <p>• ITU-T G.975: GFEC</p>
  
  <p>• ITU-T G.975.1: EFEC</p>
  
  <p>• SFP+ MSA <strong>SFF-8431</strong> (Optical Modules, Active Optical Cables, and
  Passive Twinax cables)</p>
  
  <p>• SFP+ MSA SFF-8461 (Active Twinax cables)</p>
</blockquote>
","3444"
"A packet's journey through the internet - which addresses change?","3513","","<p>I'd like an explaination about <strong><em>which addresses of a packet change as it travels through the internet</em></strong>, e.g. I send a request from Sweden to a Youtube server in England. The addresses I'm interested in are <em>IP, MAC and port numbers</em>. For an example, the MAC-address of the packet changes for every hop from a node to a node right? And in my Youtube example; how does the reply from the server find it's way back?</p>

<p>Thank you :)!</p>
","<p>Assuming there is no NAT or PAT, the source and destination IP addresses will not change.  Likewise, the source and destination TCP or UDP ports will not change.  The source and destination MAC address will change with every layer 3 hop.</p>

<p>The server ""finds"" its way back to the requesting host by directing its traffic to the source IP address and TCP or UDP port contained in the original request.</p>
","6500"
"What are EUI-48 and EUI-64?","3510","","<p>What are EUI-48 and EUI-64 addresses formed and used? Give me examples.</p>

<p>What are MA-L, MA-S and MA-M assignments?</p>

<p>I have read <a href=""https://standards.ieee.org/develop/regauth/tut/eui48.pdf"" rel=""nofollow"">https://standards.ieee.org/develop/regauth/tut/eui48.pdf</a></p>

<p>and </p>

<p><a href=""https://standards.ieee.org/develop/regauth/tut/eui64.pdf"" rel=""nofollow"">https://standards.ieee.org/develop/regauth/tut/eui64.pdf</a></p>

<p>And, understood nothing.</p>
","<p>Historically, both EUI-48 and MAC-48 were concatenations of a 24-bit OUI (Organizationally Unique Identifier) assigned by the IEEE and a 24-bit extension identifier assigned by the organization with that OUI assignment (NIC). The subtle difference between EUI-48 and MAC-48 was not well understood; as a result, the term MAC-48 is now obsolete and the term EUI-48 is used for both (but the terms “MAC” and “MAC address” are still used).</p>

<p>In other words, EUI-48 and the MAC number of a device represent the same thing! Usually it is represented in 12 hex (e.g. 0023.a34e.abc9), equivalent to 48 bits or 6 bytes.</p>

<p>By implementing the EUI-64 (64-bit Extended Unique Identifier format), a host can automatically assign itself a unique 64-bit IPv6 interface identifier without the need for manual configuration or DHCP. So it's an IPv6 matter. Anyway, if you are interested about how it's calculated, it is applied to a MAC address like this:</p>

<p>The 48-bit MAC address is split in half, the hex group <code>FFFE</code> is inserted in the middle (after the 24th bit), and the seventh bit is inverted.</p>

<p>Example:</p>

<pre><code>The MAC address    0021.86b5.6e10      (48 bit) becomes 
the EUI-64 address 0221.86ff.feb5.6e10 (64 bit)
</code></pre>

<p>MAC-Large, MAC-Small and MAC-Medium (abbreviated MA-L, MA-S and MA-M) have the all the same size. The names refer instead to number of bits within a MAC that remain governed by organization as opposed to the OUI bits governed by IEEE. If 24 bits of a MAC are governed by an organization/vendor/manufacturer, it is called a MAC-Large (this is a traditional scheme discussed so far). If 20 bits, it's MAC-Medium. If 12 bits, it's MAC-Small.</p>

<p>It addresses serious exhaustion problem of MAC addresses. Think how many devices are produced each day!</p>
","30864"
"Difference between routing, forwarding, switching","3459","","<p>I feel like the three terms are often used as synonyms but actually all mean something different. I did look at Wikipedia sites and at a <a href=""https://networkengineering.stackexchange.com/questions/12912/difference-between-the-routing-table-and-fib"">related question</a> but I'm still unsure about the definitions of the three.</p>

<p>From my understanding, <strong>routing</strong> is concerned about finding a path or paths to a destination and deciding where to send a (unknown) packet to/which path to use based on its destination or prefix and not just based on a simple lookup in a table. This is what happens at IP routers (shortest prefix routing).</p>

<p>These simple lookups are what I understand as <strong>forwarding</strong>: The header/label (cf. MPLS)/etc are matched against entries in a flow table (or multiple tables). An exact match tells the switch at which port to output the packet without further computation or decisions to be made. If no match is found, a default action is performed or a seperate controller is asked (as in SDN). This cna be done faster than routing because of less computation and specialized hardware, correct?</p>

<p><strong>Switching</strong> seems to be fairly similar to forwarding but with an emphasis on what happens on hardware in the switching fabric after the lookup in a table. This on OSI level 2 (data link) while routing and forwarding are actions on level 3 (network)?</p>

<p>What's correct/wrong about these intuitions? Did I miss something of importance? Are there differences between IP routing/forwarding (Google returns the same Wikipedia article)? What about the MAC layer?</p>
","<p>In general, <strong>forwarding</strong> refers to a device sending a datagram to the next device in the path to the destination, <strong>switching</strong> refers to moving a datagram from one interface to another within a device, and <strong>routing</strong> refers to the process a layer-3 device uses to decide on what to do with a layer-3 packet.</p>

<p>A host sending data to another host through an ethernet interface will place a frame on the wire. If the next device is a bridge (a switch is a bridge), the bridge will inspect the frame for the source and destination MAC addresses. The bridge will use the source MAC address in its MAC address table so that it knows the host with that MAC address is connected to the interface where the frame entered the bridge. It will also try to look up the destination MAC address in its MAC address table to see to which interface it should <strong>switch</strong> the frame. If it finds the MAC address in its MAC address table, it will <strong>switch</strong> the frame to the interface indicated in its MAC address table, otherwise it will <strong>flood</strong> the frame to all other interfaces, <strong>forwarding</strong> the frame to the device(s) on the other end(s) of the interface(s) link(s).</p>

<p>A router receiving a frame on an interface will strip the frame from the packet. The router will then try to look up the destination IP address in its <strong>routing</strong> table. If it doesn't find a match, even a default route, it will drop the packet. If it finds one or more matches, it will <strong>switch</strong> the packet to the interface of the longest match in the <strong>routing</strong> table. The router will then prepare a new frame for the packet on the new interface (the link on new interface may or may not use MAC addresses), and the router will <strong>forward</strong> the new frame containing the original packet over the next hop interface toward its destination. The whole process a router uses is called <strong>routing</strong>, but within the router, it <strong>switches</strong> packets before <strong>forwarding</strong> them to the next hop device.</p>
","33624"
"Connect 3 Cisco switches via ethernet ports?","3457","","<p>We have been using 2 Cisco 2960-S 48 Port switches which were connected together using a regular Cat5e cable and everything was working fine, however we have purchased a 3rd switch of the same model and need to connect it to the other switches. </p>

<p>What would be the best way to connect all 3 switches?</p>

<p>The switches will be in a ring like this:</p>

<pre><code>          switch 1
         /        \
        /          \
switch 2------------switch 3
</code></pre>

<p>On another site on an old thread I found, someone said this would cause a loop and cause problems.</p>

<p>Can anyone shed any light on if this config would work or cause any problems?</p>

<p>Any help greatly appreciated!</p>
","<blockquote>
  <p>We have been using 2 Cisco 2960-S 48 Port switches which were connected together using a regular Cat5e cable and everything was working fine, however we have purchased a 3rd switch of the same model and need to connect it to the other switches.</p>
  
  <p>What would be the best way to connect all 3 switches?</p>
</blockquote>

<p>Generally, you connect all three switches in a ""triangle"".  There is no problem with this configuration as long as you have some version of spanning-tree running.</p>

<p>I'm not sure what state your network is in right now, so I'm assuming you might not have spanning-tree running, and you have not connected the third switch.  Generic steps to introduce the new switch:</p>

<ol>
<li>Make sure the third switch is disconnected. Configure <code>spanning-tree mode rapid-pvst</code> on all switches.</li>
<li>Configure <code>spanning-tree vlan 1-4094 priority 4096</code> on the switch closest to your Internet / WAN connection</li>
<li>Configure <code>spanning-tree vlan 1-4094 priority 8192</code> on the other (running) switch</li>
<li>Configure <code>spanning-tree portfast disable</code> on all ports connecting to the other switches.</li>
</ol>

<p>I gave you a very basic recipe to make this work... depending on the bandwidth needs of the clients, you might want to bundle multiple links between these switches with LACP or EtherChannel.</p>
","2883"
"Multiple LAN interfaces on SonicWALL","3454","","<p>We have a SonicWALL 2400. Is there any way to assign multiple interfaces to the same LAN subnet? </p>

<p>Basically, we would like to have X1 for the WAN and X0, X2, X3 and X4 connected to 4 devices that would form a LAN.</p>

<p>Due to limited space, we are unable to add a switch to do this.</p>
","<p>This is not possible using the Firewall model specified in the question.</p>

<p>The final solution was to get more space to add a switch behind the firewall.</p>
","43126"
"Cisco-configuration syntax highlighting for TextMate/Sublime Text","3436","","<p>I would like to have syntax highlighting while perusing my configs - does anybody know of a good Cisco IOS syntax highlighting bundle for TextMate or Sublime Text?</p>

<p>Edited (2015-09-21) to add:</p>

<p>GitHub Atom Editor has a Cisco IOS syntax highlighter in their built in ""packages"" repo and it is easy to install. I think that Sublime Text is a better editor, but if you are not already invested in ST, I recommend giving Atom a look.</p>
","<p>Though a <a href=""http://polydistortion.net/monkey/archives/2006/06/24/003722.html"" rel=""nofollow""><code>.tmBundle</code></a> exists for syntax highlighting in Cisco IOS, it is very limited in scope. </p>

<p>Have you made or do you know of a better bundle?</p>
","463"
"Configuring HSRP on Nexus OS","3436","","<p>How do you configure HSRP on a Nexus 7000 series switch?</p>

<p>I know in IOS the commands are in the interface configuration, for example:</p>

<pre><code>switch-a#config t
switch-a(config)#interface g1/0/1
switch-a(config-if)#ip address 10.1.1.2 255.255.255.0
switch-a(config-if)#standby 10 ip 10.1.1.1
switch-a(config-if)#standby 10 priority 110
switch-a(config-if)#standby 10 preempt
</code></pre>

<p>When I am configuring an interface in Nexus OS, the standby command isn't there.  My output of ""?-ing"" around in the interface config mode doesn't give anything that looks likely...  What am I missing?</p>
","<p>On a Cisco Nexus switch, the syntax for HSRP is actually ""HSRP"" instead of ""Standby"".</p>

<p>In my experience, it makes it easier to troubleshoot as you know immediately which redundancy protocol you're dealing with (HSRP, GLBP, or VRRP).</p>

<p>See <a href=""http://www.cisco.com/en/US/products/ps9402/products_configuration_example09186a0080b7e104.shtml"" rel=""nofollow"">this</a> Cisco doc for more information on HSRP on the Nexus 7000 platform.</p>

<hr>

<p>First, be sure that you have enabled HSRP on the device:</p>

<pre><code>switch-b(config)#feature hsrp
</code></pre>

<p>Then go into the interface and issue the command ""hsrp <em>groupnumber</em>"".   You will then be able to enter your configuration similarly to in IOS.  This actually takes you into a sub-configuration mode as shown below:</p>

<pre><code>switch-b(config)#interface Eth1/1 
switch-b(config-if)#ip address 10.1.1.3/24
switch-b(config-if)#hsrp 10
switch-b(config-if-hsrp)#preempt
switch-b(config-if-hsrp)#priority 90
switch-b(config-if-hsrp)#ip 10.1.1.1
</code></pre>

<p>Don't forget to ""no shut"" the interface, but then that should do it!</p>

<hr>

<p>Also, I just realized that Cisco has a great writeup on these differences <a href=""http://docwiki.cisco.com/wiki/Cisco_NX-OS/IOS_HSRP_Comparison"" rel=""nofollow"">here</a> on their DocWiki.</p>
","620"
"Does CIDR really ""do away"" with IP address classes?","3425","","<p>I am still struggling to understand to what extent CIDR really renders IP address classes obsolete. Here's what I understood so far:</p>

<ol>
<li><p>It's ridiculously inefficient (and impossible, too) to assign every organization that needs to address more than 255 hosts a class B address, which could technically address 65535 hosts.</p></li>
<li><p>However, if such an organization needed to address, say, approximately 700 hosts, one could just assign three (preferably contiguous) class C network addresses to that organization. E.g.:</p>

<pre><code>192.42.42
192.42.43
192.42.44
</code></pre></li>
<li><p>Problem: For that <em>one</em> organization, routers would have to store <em>three</em> entries in their forwarding tables, which won't scale.</p></li>
<li><p>CIDR solves this problem by introducing route summarization/aggregation, enabling the ISP that assigned the three class C networks to the organization to advertise only <em>one</em> prefix to the rest of the world. E.g.,</p>

<pre><code>192.42.42.0/21
</code></pre></li>
</ol>

<p>So far, so good. However, I just can't grasp why every resource I touch claims that classful addressing is ""a thing of the past"". After all, the ISP <em>is</em> in charge of, say, class C network addresses, and <em>does</em> assign these to its customers. CIDR just fixes the problem of multiple entries in the forwarding tables, right? Thus, IP address classes are still around, are they not?</p>

<p>Exam's coming up, so help is much appreciated. :P </p>
","<p>Address delegation really used to happen in three sizes: class A, B and C. Class A delegations would be given from a certain address range, class B delegations from a different range etc. Because the different classes used different address ranges you could determine the class by looking at the first part of an address. And this was built into the routing protocols.</p>

<ul>
<li>Class A delegations contained 16777216 addresses each</li>
<li>Class B delegations contained 65536 addresses each</li>
<li>Class C delegations contained 256 addresses each</li>
</ul>

<p>This was very inefficient for networks that didn't fit these sizes. A network that needed 4096 addresses would either get sixteen Class C delegations (which would be bad for the global routing table because each of them would have to be routed separately: the class size was built into the protocol) or they would get one Class B delegation (which would waste a lot of addresses).</p>

<p>In 1993 CIDR was introduced. The protocols were adjusted to be able to deal with prefixes of different sizes and it became possible to route (both internally and externally) prefixes like a /30 or a /21 or a /15 etc etc. Anything between /0 and /32 became possible. Organisations that needed 2048 addresses could get a /21: exactly what they would need. </p>

<p>The way you could internally subdivide those addresses was also limited. There were rules on how you could subnet. Originally each subnet within your classful network had to be the same size. You need one subnet with 128 addresses and another subnet with 16 addresses: too bad.</p>

<p>Variable Length Subnet Masking (VLSM) is the internal-network equivalent of CIDR. VLSM has existed longer than CIDR. It was already mentioned in 1985. So CIDR is basically extending VLSM to inter-domain routing. With VLSM your subnets don't all have to be the same size anymore. You can assign a different number of addresses for each subnet, depending on your needs.</p>

<p>These days all routing on the internet is done without classes. A prefix in the routing table might by coincidence (or because of history) match the classful structure, but protocols will no longer assume they can deduce the prefix length (subnet mask) from the first part of the address. All prefix lengths are explicitly communicated: classless.</p>

<p>Saying that an ISP is in charge of a Class C network is similarly obsolete. Addresses are distributed completely classless by the RIRs (<a href=""https://www.nro.net/about-the-nro/regional-internet-registries"">Regional Internet Registries</a>, the organisations responsible for delegating addresses to ISPs and businesses with their own independent addresses).</p>

<p>IPv4 addresses classes really don't exist anymore, and have been deprecated in 1993. If you look at old obsolete routing protocols you can of course still see the assumptions they made based on address class, but that was 20 years ago...</p>
","19854"
"How can hosts with public IP addresses have nodes with private IP addresses in their traceroute?","3421","","<p>I'm doing some research on users connected to Internet via cable operators and I've seen some unusual route traces.</p>

<p>A bit about setup:</p>

<p>Basically user has a home router connected to a DOCSIS modem. The router seems to receive a public IP address from the modem for its WAN interface using DHCP, but when traceroute is done, there is a number of routers in the path which have private IP addresses. </p>

<p>Example traceroute output:</p>

<pre><code>Tracing route to google.com [5.22.190.25]
over a maximum of 30 hops:

  1     3 ms     1 ms     1 ms  192.168.1.1//This router has public WAN address
  2    10 ms    12 ms     8 ms  10.14.0.1
  3    11 ms    19 ms     9 ms  bg-he-m-1-pc2.sbb.rs [89.216.6.94]
  4    12 ms    11 ms    11 ms  bg-he-m-1-pc2.sbb.rs [89.216.6.94]
  5    12 ms    11 ms    12 ms  cache.google.com [5.22.190.25]

Trace complete.
</code></pre>

<p>I've seen some examples on other providers as well which use the 176.16.0.0/12 addresses. The private addresses are always right after the user's CPE. </p>

<p>Some of my thoughts on this:</p>

<p>As far as I understand it, it shouldn't be possible to route private addresses over public Internet and all routers on the Internet should drop packets with private IP address destinations. I'm aware that the routers with private addresses here are in ISP's network, but I still don't understand how this all works.</p>

<p>I expect that there is some sort of tunneling involved, but I believe that in that case only tunnel endpoints would be visible. The other option would be carrier grade NAT. I'm not sure how that would look like. From what I've heard (but I could be wrong), in CGN systems, users usually can't directly access the Internet and can't be directly accessed from the Internet. In setup I've seen, I can connect to user from the Internet using its IP address normally. </p>

<p>After this rather long exposition, I've come to point where I should present the actual question:</p>

<p>I'd like to know which technology is used here to enable such a setup? A little bit about architecture and some keywords for Google would be helpful as well. </p>
","<p>There is no tunneling. This is completely normal. With IP routing you are concerned about the source and destination address which doesn't change unless something is NAT'd. If a router in the middle has an RFC1918 address that's fine as it can still forward transit traffic as again the source and destination is unchanged.</p>

<p>Each router will simply reply to the source with their own directly connected interface address. The 10.14.0.1 above is not being routed over the internet, it's simply the device that is attached to the CPE on the WAN side.</p>

<p>There is no magic technology being used. It's pure standard routing. </p>
","3846"
"Limit bandwidth in cisco router with policy-map doesn't work","3420","","<p>I have a problem with my scenario in limiting bandwidth of ubuntu PC in GNS3 with class-map and policy-map.
this is my topology in GNS3:
<img src=""https://i.stack.imgur.com/xtL3v.png"" alt=""enter image description here""></p>

<p>The R1 is a cisco 3725 router with c3725-adventerprisek9-mz.124-25d.bin image, and this is my configuration:</p>

<h2>access-lists</h2>

<pre><code>ip access-list extended UBUNTU_DW
  permit ip any host 10.0.0.51
ip access-list extended UNUNTU_UP
  permit ip host 10.0.0.51 any
</code></pre>

<h2>class and policy maps</h2>

<pre><code>class-map match-all UBUNTU_DW
  match access-group name UBUNTU_DW
class-map match-all UBUNTU_UP
  match access-group name UBUNTU_UP

policy-map UP
  class UBUNTU_UP
    police cir 32000 bc 4000 be 4000
      conform-action transmit 
      exceed-action drop 
      violate-action drop 
policy-map DW
  class UBUNTU_DW
    police cir 32000 bc 4000 be 4000
      conform-action transmit 
      exceed-action drop 
      violate-action drop 
</code></pre>

<h2>interface FastEthernet0/1</h2>

<pre><code>interface FastEthernet0/1
  ip address 192.168.10.254 255.255.255.0
  ip nat outside
  ip virtual-reassembly
  duplex auto
  speed auto
  service-policy input DW
  service-policy output UP
</code></pre>

<p>The problem is the 32kbps limitaion for ubuntu does not work.</p>

<pre><code>R1#sh policy-map interface fastEthernet 0/1
 FastEthernet0/1

  Service-policy input: DW

    Class-map: UBUNTU_DW (match-all)
      0 packets, 0 bytes
      5 minute offered rate 0 bps, drop rate 0 bps
      Match: access-group name UBUNTU_DW
      police:
          cir 32000 bps, bc 4000 bytes, be 4000 bytes
        conformed 0 packets, 0 bytes; actions:
          transmit
        exceeded 0 packets, 0 bytes; actions:
          drop
        violated 0 packets, 0 bytes; actions:
          drop
        conformed 0 bps, exceed 0 bps, violate 0 bps

    Class-map: class-default (match-any)
      905 packets, 812409 bytes
      5 minute offered rate 27000 bps, drop rate 0 bps
      Match: any

  Service-policy output: UP

    Class-map: UBUNTU_UP (match-all)
      0 packets, 0 bytes
      5 minute offered rate 0 bps, drop rate 0 bps
      Match: access-group name UBUNTU_UP
      police:
          cir 32000 bps, bc 4000 bytes, be 4000 bytes
        conformed 0 packets, 0 bytes; actions:
          transmit
        exceeded 0 packets, 0 bytes; actions:
          drop
        violated 0 packets, 0 bytes; actions:
          drop
        conformed 0 bps, exceed 0 bps, violate 0 bps

    Class-map: class-default (match-any)
      979 packets, 154180 bytes
      5 minute offered rate 7000 bps, drop rate 0 bps
      Match: any
</code></pre>

<p>Is there any wrong configuration? How can I apply this policy?</p>
","<p>I solve the problem with dscp packet marking.here is the configuration for Downloading stream.</p>

<p>the class map as before:</p>

<pre><code>class-map match-all UBUNTU_DW  match access-group name UBUNTU_DW
</code></pre>

<p>and the new policy with the help of dscp is: </p>

<pre><code>  Policy-Map DW
    Class UBUNTU_DW
     police cir 32000 bc 1500 pir 64000 be 2000
       conform-action set-dscp-transmit af21
       exceed-action set-dscp-transmit default
       violate-action drop
</code></pre>

<p>then I apply the policy to int fa 0/0</p>

<pre><code>service-policy output DW
</code></pre>

<p>and it works :)</p>

<pre><code>R1#sh policy-map interface fa 0/0 output
 FastEthernet0/0

  Service-policy output: DW

    Class-map: UBUNTU_DW (match-all)
      1699 packets, 2075517 bytes
      5 minute offered rate 20000 bps, drop rate 8000 bps
      Match: access-group name UBUNTU_DW
      police:
          cir 32000 bps, bc 1500 bytes
          pir 64000 bps, be 2000 bytes
        conformed 964 packets, 1063157 bytes; actions:
          set-dscp-transmit af21
        exceeded 336 packets, 440593 bytes; actions:
          set-dscp-transmit default
        violated 399 packets, 571767 bytes; actions:
          drop
        conformed 10000 bps, exceed 3000 bps, violate 8000 bps

    Class-map: class-default (match-any)
      77 packets, 7490 bytes
      5 minute offered rate 0 bps, drop rate 0 bps
      Match: any
</code></pre>
","16274"
"Microsoft NLB - static MAC necessary?","3401","","<p>We've implemented Microsoft NLB before, but it's not a common thing for our environment, consequently I've not looked at the config in a while.  The topology is:</p>

<p>EDGE == 3750X's (stack of 2) == N5K's (vpc'd together) == Blade switches == servers</p>

<p>Looking through our existing config.. I see static ARP entries in the 3750 (which make sense to me), and in the N5K I see static MAC address-table entries.  the thing is that there are 3 static ARP entries (all 3 are NLB clients of ours), but only one static MAC address table entry, but all 3 are working without issue.  So it got me thinking.. </p>

<p>Do I need to include the static MAC address entries in the N5K? I am pretty sure the only contention with NLB was telling the L3 device, that 'yes you can send this unicast response back to this multicast MAC' by making a static ARP entry.  Thanks for any clarification.</p>
","<p>You should not need to manually configure any static MAC address entries in any of your switches for MS NLB to work.  As a point in fact, doing so can break a MS NLB setup as the MS server/cluster can no longer shift instances between links or servers.</p>

<p>Normally you would configure IGMP snooping on the Cisco devices and it will learn the hosts who want to be part of the multicast group and the ports they are on.  IOS will then automatically add or remove static multicast entries on the switch as needed.</p>

<p>Rather than your assertion about unicast/multicast response, this limits where the multicast traffic should go.  Normal switch operations would be to flood multicast traffic out of all ports, which isn't generally necessary and only adds unnecessary traffic to a number of devices.  IGMP snooping gives a mapping to the switch of which ports should be sent traffic for the multicast destination.</p>

<p>I would recommend reading (and possibly rereading) documents on MS NLB, Cisco IGMP snooping and general multicast.  Searching in your engine of choice should find you any number of documents.</p>
","3433"
"Does Cisco *ip dhcp snooping limit rate* apply if DHCP snooping is not configured for the access VLAN?","3400","","<p>Came across a situation where DHCP snooping was enabled on a Cisco switch, but only for certain VLANs.  However, all access ports had a <em>ip dhcp snooping limit rate 15</em> applied whether or not DHCP snooping was configured for the assigned access VLAN.</p>

<p>My instinct is that if DHCP snooping is not enabled for that VLAN, then this statement isn't doing anything at all on those ports.  I would prefer to remove the unnecessary configuration if this is the case, however I couldn't find anything definitive in a quick search.</p>

<p>Does anyone know of a reference that addresses this?  Or alternatively tested this use case and can provide any data one way or another?</p>
","<p>It appears the answer is that it is unnecessary configuration.  If DHCP snooping is not running on that VLAN, then this configuration has no effect.</p>

<p>I still couldn't find documentation that clearly states this, so I decided to test this myself.</p>

<p>Started off with DHCP snooping enabled for all VLANs and a rate limit of one (1) DHCP packet per second (assuming that the client will send the DISCOVER and REQUEST in one second if the DHCP server responds quickly enough):</p>

<pre><code>router#show ip dhcp snoop
Switch DHCP snooping is enabled
DHCP snooping is configured on following VLANs:
1-4094
Insertion of option 82 is disabled
Interface                    Trusted     Rate limit (pps)
------------------------     -------     ----------------
FastEthernet0/8              no          1         
router#show run int fa 0/8
Building configuration...

Current configuration : 230 bytes
!
interface FastEthernet0/8
 switchport access vlan 841
 switchport mode access
 ip dhcp snooping limit rate 1
 shutdown
end
</code></pre>

<p>Time for the control test, which should err-disable the port, which is exactly what occurs in about a second after the port transitions to up/up:</p>

<pre><code>router#term mon
router#config t
Enter configuration commands, one per line.  End with CNTL/Z.
router(config)#int fa 0/8
router(config-if)#no shut
router(config-if)#
Feb 13 22:57:04.589 CST: %LINK-3-UPDOWN: Interface FastEthernet0/8, changed state to down
Feb 13 22:57:07.701 CST: %LINK-3-UPDOWN: Interface FastEthernet0/8, changed state to up
Feb 13 22:57:08.553 CST: %PM-4-ERR_DISABLE: dhcp-rate-limit error detected on Fa0/8, putting Fa0/8 in err-disable state
Feb 13 22:57:08.561 CST: %DHCP_SNOOPING-4-DHCP_SNOOPING_RATE_LIMIT_EXCEEDED: The interface Fa0/8 is receiving more than the threshold set
Feb 13 22:57:10.561 CST: %LINK-3-UPDOWN: Interface FastEthernet0/8, changed state to down
router(config-if)#shut
</code></pre>

<p>Since the control worked as expected, I now remove VLAN 841 from the DHCP snooping configuration and enable the port again.  One minute later, I shut the port (to show the timestamp):</p>

<pre><code>router(config-if)#no ip dhcp snooping vlan 841
router(config)#do sh ip dhcp snoop
Switch DHCP snooping is enabled
DHCP snooping is configured on following VLANs:
1-840,842-4094
Insertion of option 82 is disabled
Interface                    Trusted     Rate limit (pps)
------------------------     -------     ----------------
FastEthernet0/8              no          1         
router(config)#int fa   0/8
router(config-if)#no shut
router(config-if)#
Feb 13 22:58:49.150 CST: %LINK-3-UPDOWN: Interface FastEthernet0/8, changed state to down
Feb 13 22:58:52.290 CST: %LINK-3-UPDOWN: Interface FastEthernet0/8, changed state to up
Feb 13 22:58:53.290 CST: %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/8, changed state to up
router(config-if)#shut
Feb 13 22:59:55.119 CST: %LINK-5-CHANGED: Interface FastEthernet0/8, changed state to administratively down
Feb 13 22:59:56.119 CST: %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/8, changed state to down
</code></pre>

<p>Repeated multiple times with the same results using the following:</p>

<ol>
<li>Three different client devices</li>
<li>2950 running 12.1(22)EA14</li>
<li>3750 running 12.2(55)SE8</li>
</ol>

<p>Would still love for someone to find documentation for this though.</p>
","6278"
"NAT and ACL order - Cisco ASA, Palo Alto, Checkpoint","3397","","<p>I've recently begun working with firewalls (Different brands) and what really confuses me is the order the different firewalls check the ACL and NAT rules.</p>

<p>For instance, allow HTTP traffic from the internet to a webserver on a LAN:</p>

<ul>
<li>Public IP: 1.1.2.2</li>
<li>Privat IP: 192.168.1.2</li>
<li>Destination port: 80</li>
<li>NAT the public IP-address 1.1.2.2 to 192.168.1.2</li>
</ul>

<p>On some firewalls the ACL allows traffic from the internet to the webserver defining the LAN IP-address as the destination:</p>

<ul>
<li>ACL: outside-in</li>
<li>Allow</li>
<li>Interface: Outside</li>
<li>Source: any</li>
<li>Destination: 192.168.1.2</li>
<li>Port: 80</li>
</ul>

<p>But I sometimes see the public IP-address instead:</p>

<ul>
<li>ACL: outside-in</li>
<li>Allow</li>
<li>Interface: Outside</li>
<li>Source: any</li>
<li>Destination: 1.1.2.2</li>
<li>Port: 80</li>
</ul>

<p>In what order does the different brands of firewalls check NAT rules and the ACL's? Is there a difference between versions on the same type of firewall?</p>
","<p>I can't speak to other platforms with authority but the Cisco ASA platform does it both ways depending on the version of code.</p>

<p>Pre-8.3, NAT was done after the ACL (so you would use the global or outside IP address in the ACL).  8.3 or later NAT is done before the ACL (so you will use the actual configured or inside IP in the ACL).</p>

<p>The way NAT is configured also changed in this version.  You can check <a href=""https://supportforums.cisco.com/document/48646/asa-83-upgrade-what-you-need-know"" rel=""nofollow"">this Cisco Support Community post</a> or other resources for details.</p>
","9745"
"Wake on LAN across VLANs in IPv6 network","3397","","<p>In IPv4, if I want to send a magic packet to a workstation in another VLAN, I enable directed broadcasts in the remote VLAN and send it to the VLAN's broadcast address.  This works great.</p>

<p>In IPv6, I can use FF02::1 to send a WoL frame to workstations inside the same VLAN, but without broadcasts, how would I send it to a workstation in a different VLAN?</p>
","<p>On any router or firewall where you can put in static ARP or ND entries you might try to bind an address to MAC <code>ff:ff:ff:ff:ff:ff</code> and then send the Wake-on-LAN packet to that address. If the router/firewall sends the packet onto the ethernet segment with destination <code>ff:ff:ff:ff:ff:ff</code> then you'll have a broadcast packet...</p>
","7476"
"debug crypto ipsec via ssh","3394","","<p>How to debug IP Sec VPN on ASA using SSH?
I try  <code>debug crypto ipsec</code> <code>terminal monitor</code> <code>logging monitor</code> it asks for completion if i choose debug, all debug info are flooded. How do i view just IPSEC debugs via SSH?</p>
","<p>If you want to debug a single L2L VPN connection you can enable the following configuration</p>

<p><code>ASA# debug crypto condition peer 1.1.1.1</code></p>

<p>This should limit the debugs to only this specific L2L VPN Peer</p>

<p>You can confirm the setting with</p>

<pre><code>ASA# sh crypto debug-condition
Crypto conditional debug is turned ON
IKE debug context unmatched flag:  OFF
IPSec debug context unmatched flag:  OFF
IKE debug context error flag:  OFF
IPSec debug context error flag:  OFF
IKE peer IP address filters:
1.1.1.1/32
</code></pre>

<p>After this you can use the <code>debug crypto isakmp</code> and <code>debug crypto ipsec</code> commands</p>

<p>When you are done be sure to remove the above condition we set with the command</p>

<pre><code>ASA# debug crypto condition reset
Do you want to clear the crypto debug filters? [confirm]
</code></pre>

<p>Also, you might have to change the logging lever for monitor</p>

<p><code>logging monitor debugging</code></p>

<p>And during the SSH connection issue the command</p>

<p><code>terminal monitor</code></p>

<p>And to disable it enter</p>

<p><code>terminal no monitor</code></p>

<p>You should be able to disable all debugging with</p>

<p><code>no debug all</code></p>

<p><a href=""https://supportforums.cisco.com/discussion/11794906/how-debug-ssh-session-asa"" rel=""nofollow"">- Jouni</a></p>
","33307"
"Network Neutrality, how does it actually work, technically speaking?","3386","","<p>In <a href=""http://www.npr.org/blogs/alltechconsidered/2014/05/15/312666733/fcc-to-unveil-proposed-rules-to-govern-internet-traffic"" rel=""noreferrer"">this NPR article</a> there is mentioned <em>'network neutrality'</em> with very little details on what it actually is or <strong>how</strong> it actually works. I tried researching it on my own but I get a lot of non-technical explanations of what it is fighting against (essentially metering internet traffic speeds) but I am very confused as to <strong>how</strong> this works.</p>

<p>My understanding of the internet (broadly) is that user <em>Joe</em> opens up a connection with website <em>npr.com</em> via the HTTP protocol (after some DNS work) which sends and receives data to and from <em>NPR's</em> server utilizing both <em>NPR's</em> and <em>Joe's</em> upload and download speeds.</p>

<p><strong>Where is the throttling occurring?</strong> Am I missing a crucial step? Is the <em>'traffic'</em> being throttled <em>'on the way'</em> to the client/server somewhat like a tollbooth at the ISP level?</p>

<p>The NPR article brings up the example of how one website could pay to have their traffic go to the user faster. I just don't understand this because isn't all my incoming traffic maxed out at whatever my download speed is? Further, isn't the server maxed out at whatever their upload speed is? </p>

<p>For example, if I try to send 1MB of data from a server (www.mysimplesite.com) with an upload speed of 1MB/s to a client (joe) who has a download speed of 1mb/s would this transfer not happen in the same [theoretical] time as a server (www.thesuperubersite.com) with an upload speed of 2MB/s? </p>

<p>I fail to see how any server can pay to have their content <em>'reach the user faster'</em> if it is the client who generally is the speed limitation. From a <strong>technical perspective</strong>,  <strong>how</strong> would this work?  I'm also not looking for an analogy or opinions.</p>
","<p>Network neutrality effectively governs how providers can handle traffic. It's a broad concept in theory, with potential upsides and downsides in practice. Consensus seems to be <a href=""http://www.slate.com/blogs/future_tense/2014/04/24/fcc_s_new_net_neutrality_proposal_is_even_worse_than_you_think.html"" rel=""nofollow noreferrer"">the downsides might be fairly harmful to consumers and startups</a>.  </p>

<p>In the absence of net neutrality, internet service providers and the big businesses with the budget to support them would win – with consumers and internet startups losing. In theory, abolishing net neutrality would allow ISPs like Verizon to decide for themselves whether or not they want to provide VoIP traffic, or any other traffic type, to traverse their networks. Other Tier 1 providers would be free to do the same.</p>

<p>To be fair, internet in the US isn't currently operated under perfect net neutrality rules. Information freedom is increasingly eroding around the edges of the law, with an egregious, perhaps extortive agreement taking place earlier this year between <a href=""http://arstechnica.com/business/2014/02/comcast-gets-paid-by-netflix-and-might-still-want-money-from-cogent/"" rel=""nofollow noreferrer"">Netflix and Comcast</a>. Comcast makes up a significant portion of Netflix’s customer base; the video streaming service was all but forced to pay up. This eventually caused <a href=""http://www.forbes.com/sites/greatspeculations/2014/05/15/the-impact-of-netflixs-price-rise/"" rel=""nofollow noreferrer"">Netflix to raise its prices</a> (however slightly), thus, altering their business model and harming consumers. If net neutrality is to fail completely, then expect more deals like this.</p>

<p>As for your question:</p>

<blockquote>
  <p>Where is the throttling occurring? Am I missing a crucial step? Is the
  'traffic' being throttled 'on the way' to the client/server somewhat
  like a tollbooth at the ISP level?</p>
</blockquote>

<p>When you think of throttling, think of quality of service.  Most points of the internet work on the principle of oversubscription, which makes more effective use of infrastructure.  So even if you have a 1Gb/s internet connection, you probably won't be getting 1Gb/s service. That's because Tier 1 internet providers' backbones aren’t capable of sustaining 1Gb/s for millions of customers.</p>

<blockquote>
  <p>I fail to see how any server can pay to have their content 'reach the
  user faster' if it is the client who generally is the speed
  limitation. From a technical perspective, how would this work?</p>
</blockquote>

<p>A provider has the ability to service packets as they see fit.  At micro-scale, imagine you have 2 users connected via a 100Mb connection to separate providers with each provider peering through a 100Mb connection to one another. If either provider decides those users are less important than any other customer they have, they can shape that traffic to be <em>lower priority</em> than anything else, meaning they have the capability of being dropped <em>first</em> if there isn’t enough bandwidth to support them.  </p>

<p>It's also important to point out that those packets may not make it to the consumer at all.  It is entirely possible to drop packets altogether if they fall outside the threshold those providers provisioned.</p>
","7937"
"Splitting two Internet connections between two VLANs","3374","","<p><strong>My current setup is as follows:</strong></p>

<p>Cisco 881 router (only 1 WAN interface) that has a pair of T1's coming in on the WAN interface, this currently provides internet access to two VLANs, 10 and 20.</p>

<p><strong>What is changing:</strong></p>

<p>We are adding another pair of T1's, for a total of two Internet connections.</p>

<p><strong>My thoughts on a solution:</strong></p>

<p>The end goal is to have one pair of T1's be dedicated to VLAN 10 and the other pair to VLAN 20. My thought right now is to add another router that connects to the 881 router that acts as a gateway for the second T1 pair. So I'd have VLAN 10 route to the Internet via the 881 router, and VLAN 20 via a new router that connects to the second pair of T1's. Is this the best setup or would you go about it a different way?</p>
","<p>Assuming you have the correct IOS and feature set (IOS >=15.0(1)M7 &amp; Adv IP Services license loaded), the simplest way to do this is by putting each internet link and Vlan in a different VRF (this is a <a href=""http://www.cisco.com/en/US/docs/ios/12_2sb/12_2sba/feature/guide/vrflite.html"">VRF-lite config</a>).  Assume you want to use:</p>

<ul>
<li>Ethernet1/0 uplink for Vlan10</li>
<li>Ethernet2/0 uplink for Vlan20</li>
</ul>

<p>The configuration would look similar to this...</p>

<pre><code>ip vrf Inet_Vlan10
 rd 65535:10
 route-target 65535:10
!
ip vrf Inet_Vlan20
 rd 65535:20
 route-target 65535:20
!
interface Ethernet1/0
 ip vrf forwarding Inet_Vlan10
 ip address 192.0.2.2 255.255.255.252
 ! insert nat, if required
interface Ethernet2/0
 ip vrf forwarding Inet_Vlan20
 ip address 192.0.2.6 255.255.255.252
  ! insert nat, if required
interface Vlan10
 ! This assumes you're using the onboard switch in a C800 series
 ip vrf forwarding Inet_Vlan10
 ip address 10.0.1.254 255.255.255.0
 ! insert nat, if required
interface Vlan20
 ! This assumes you're using the onboard switch in a C800 series
 ip vrf forwarding Inet_Vlan20
 ip address 10.0.2.254 255.255.255.0
 ! insert nat, if required
! Simple example of routing Vlan10 out Ethernet1/0
ip route vrf Inet_Vlan10 0.0.0.0 0.0.0.0 &lt;ip_addr_in_192.0.2.0/30&gt;
! Simple example of routing Vlan20 out Ethernet2/0
ip route vrf Inet_Vlan20 0.0.0.0 0.0.0.0 &lt;ip_addr_in_192.0.2.4/30&gt;
</code></pre>

<p>VRFs dedicate a different forwarding table for each VRF; thus you can have dedicate an internet access provider for each Vlan, exactly as you described in your question.</p>
","5736"
"Overlaps with VLANS","3373","","<p><a href=""https://i.stack.imgur.com/Z40jQ.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/Z40jQ.png"" alt=""Topology""></a></p>

<p>This's problem</p>

<p><code>SW_R2(config)#int vlan 2
SW_R2(config-if)#ip addr 172.16.0.129 255.255.255.240
SW_R2(config-if)#int vlan 3
SW_R2(config-if)#ip addr 172.16.0.145 255.255.255.224
% 172.16.0.128 overlaps with Vlan2
SW_R2(config-if)#</code></p>

<p>I'm using a Switch Layer 3, setting up Ip address in three Vlans. </p>

<p>172.16.0.128/29 and 172.16.0.144/27 are in differents subnets, I tested that address in a Router, setting in a FastEthernet Interface, and works!</p>

<pre><code>interface FastEthernet0/1
!
interface FastEthernet0/2
 switchport trunk encapsulation dot1q
!
interface FastEthernet0/3
 switchport trunk encapsulation dot1q
!
interface FastEthernet0/4
 switchport trunk encapsulation dot1q
!

interface Vlan1
 no ip address
 shutdown
!
interface Vlan2
 ip address 172.16.0.129 255.255.255.240
!
interface Vlan3
 no ip address
</code></pre>

<p>I can't SEE where is my error, Please any suggestions?</p>
","<p>The error lies in your subnets</p>

<p>172.16.0.145 with subnet mask 255.255.255.224 give you a network 172.16.0.128/27</p>

<p>The network you set on VLAN 2 is a subnet of the one you try to set on VLAN3 , so the overlap.</p>

<p>EDIT in response to the comment</p>

<p>The network 172.16.0.128/27 can be subnetted in 2 networks </p>

<ul>
<li>172.16.0.128/28</li>
<li>172.16.0.144/28</li>
</ul>

<p>So you can use those two subnets on VLAN2 and VLAN3 but not the original network and one of its subnet.</p>

<p>Change your subnet mask to 255.255.255.240 and you will have no overlap.</p>

<p>If you need a bigger subnet (for more than 14 hosts) then you need to use the next-available /27 network which is 172.16.0.160/27 (I.E. 172.16.0.160 with subnet mask 255.255.255.224)</p>

<p>Edit 2 in response to other comment</p>

<p>to subnet the /26 to a /27 plus two /28 you can use</p>

<ul>
<li>172.16.0.128/28</li>
<li>172.16.0.144/28</li>
<li>172.16.0.160/27</li>
</ul>

<p>or </p>

<ul>
<li>172.16.0.128/27</li>
<li>172.16.0.160/28</li>
<li>172.16.0.176/28</li>
</ul>

<p>Note that due to the network address and the broadcast address a /28 allows 14 hosts (including the one that will be used as gateway) and a /27 allows 30.</p>
","20802"
"Enabling MLS QoS on a production 7600","3369","","<p>I am looking at a 7609-S with a RSP720-3CXL running 12.2(33)SRE3.</p>

<p>I have been asked to help with rate limiting some servers attached to a couple of ports running as L2 ports (<code>switchport mode access</code>), so this requires me to apply a policy-map to the L3 SVI that is the default gateway in this VLAN. When enabling the service policy under the SVI interface configuration I received the following error;</p>

<pre><code>router(config-if)#service-policy input PM-LIMIT-100M
Warning (QoS): MLS QoS is disabled, marking/policing will be done after 
enabling MLS QoS globally
</code></pre>

<p>I have a looked through the config and sure enough, there is no ""mls qos"" in the global configuration. <strong>What potential issues can happen from enabling this global config command on this production device?</strong> I can obviously perform this during scheduled maintenance period for safety, but should it even be attempted at all?</p>

<p>If it makes any difference, there were no class maps or policy maps defined on this router until I logged in, to make one to rate limit the previously mentioned server ports (all ports are Gig, I have been tasked with limiting this SVI to 100Mps for a short period). I trying to use the following configuration;</p>

<pre><code>class-map match-any CM-LIMIT-100M
  match access-group name ACL-SERVERS
!
policy-map PM-LIMIT-100M
  class CM-LIMIT-100M
    police 100000000 18750000 31250000 conform-action transmit exceed-action drop violate-action drop
!
int vlan 123
service-policy input PM-LIMIT-100M
service-policy output PM-LIMIT-100M
</code></pre>

<p>I would like to think there is no potential issues that will occur if I enable this, but you never know so I'm all ears!</p>
","<p>You definitely should enable MLS QoS. It is also prerequisite for CoPP, which you should add in your TODO list to implement.</p>

<p>Enabling 'mls qos' without other config is extremely bad idea in low-end cats, like 3560/3750, due to unexpected default scheduling and due to heavily reduced buffers causing more microbursting.</p>

<p>On 7600/6500 it's comparatively safe to enable, but of course you can crash your router with 'show run'. I would feel comfortable enough to enable it during production hours.</p>

<p>You should monitor 'show queueing interface X' after enabling to see that you're not dropping anything. Long term, you should design QoS policy and implement it, I recommend using as few queues as possible (and assign 100% of buffer to those few queues).
Example of possible QoS policy in WS-X6704-10GE:</p>

<pre><code>interface TenGigabitEthernet4/1
 wrr-queue bandwidth percent 30 40 30 0 0 0 0  ## allocate 3 queues (+implied strictpriority) share buffer 30% 40% 30% on thos three queues
 wrr-queue cos-map 1 1 0 7 # map cos values to queues
 wrr-queue cos-map 2 2 3 
 wrr-queue cos-map 3 1 4 
 wrr-queue cos-map 3 2 6 
</code></pre>

<p>For advanced config, you may want to supplement that with 'wrr-queue random-detect' with RED curve per queue+threshold.
Be sure to mark your traffic correctly when it enters your network.</p>
","957"
"VTP V3 Cisco Switch Error when creating new VLAN","3368","","<p>While trying to create a new VLAN on a switch stack (that has many VLANs and many interconnected switches) I get an error about the switch not being the primary server for VLAN database.  When running the exec command ""show VTP status"" the switch shows up as 'VTP Operating Mode: Server' and all other switches that I can access show up as client.  </p>

<p><strong>First question is:</strong>  If there is a switch elsewhere in the network that I can't see that is also a server, will I break or screw up the VTP or VLAN database if I set this switch to 'Primary?'</p>

<p>The way I've been reading the documentation, all of the switches in the network default to ""Server Secondary"" and in order to make configuration changes to the VTP or VLAN database, one of those switches needs to be temporarily set to ""Server Primary"" via the EXEC command ""VTP Primary.""  After making the configuration changes (i.e. adding a VLAN) the system will eventually reset that primary server back to secondary status.  </p>

<p><strong>Second question is:</strong> Is my understanding of the functionality described in the above paragraph accurate?</p>
","<p>You can see the primary server (if any) in the output of <code>show vtp status</code>:</p>

<pre><code>Primary ID                        : 0011.2233.4455
Primary Description               : primary-switch-name
</code></pre>

<p>If the Primary ID is <code>0000.0000.0000</code>, then your current switch does not recognize any primary server, including itself. To answer your questions:</p>

<ol>
<li><p>When you try to promote a switch to the VTP primary server role, VTP performs a sanity check to make sure no other switch on the network if already the primary, and will warn you if one is found. Either way, IOS will prompt you to proceed, so you can still back out if you're unsure. This is important, because the new primary server will cause all other VTP clients and servers to overwrite their existing VTP configuration with that of the new server. However, only switches in the same VTP domain and with the same password would be affected, and you would be able to see those with <code>show vtp devices</code>.</p></li>
<li><p>I think you have it mostly correct. The one part I would comment on is that the only time a primary server demotes itself to secondary status is when it rejoins the VTP domain after a reload. During normal operation, a primary server will remain the primary server unless you run <code>vtp primary</code> on another server.</p></li>
</ol>

<p>If you have only one switch configured as the VTP server, and it is not primary, I would conclude that it was rebooted at some point, which would have caused it to demote itself. It should be safe to promote it back to primary. If you're ever unsure, back up your VLAN database (typically <code>flash:vlan.dat</code> on smaller platforms) before making changes, so you can switch to transparent mode and restore your VLANs quickly if you need to.</p>

<p>Cisco has a comprehensive document on <a href=""http://www.cisco.com/en/US/prod/collateral/switches/ps5718/ps708/solution_guide_c78_508010.html"">VTP Version 3</a> that goes over all of this and more.</p>
","6065"
"Inbound BGP load-balancing from same ISP router","3362","","<p>I have two BGP routers for DIA with an issue with one provider in that the two links to this provider land on the <em>same</em> SP router.  My ethernet handoffs via two separate MetroE links from another provider on behalf on my main provider as the one provider already had fiber to the bldg.  <em>If someone could also clear up the ISP terminology when one provider transports services for another, I'd appreciate it.</em>  The two circuits terminate L3 with the same SP router, so my two routers each peer with the same provider router.  I'm assigned PA space from this SP.  </p>

<p>I have no issues with outbound load-balancing (or load-sharing as I guess would be more technically accurate).  Outbound, I do ECLB at the firewall which picks one of the two edge routers based on a <em>srcip/dstip</em> hash.  </p>

<p>This particular carrier -- forget about the carrier just providing transport -- is not load-balancing inbound traffic from their one router across the two links to my two routers, and this is the direction where we could use the combined 5x50Mb BW that we have contracted.  <strong>The SP sees equal paths to us for the same advertised network and essentially just the first path they learn is what becomes the bestpath.</strong></p>

<p><strong>I've listed what I'm considering as my options below to get traffic over both circuits, and would like to know what the experts here think is best particularly if you're familiar with typical SP SOPs</strong>.  <em>Since I have a contract, changing the contract at this time is not an option to have this rebuilt some other way.</em> </p>

<p>Allowing <code>maximum-paths 2</code> in the SP network fixes this, but this applies to all their BGP customers on the same router that I don't think they will allow.  At least one option that will work involves static routes, but that’s not what I would prefer.</p>

<p><strong>Below are the options I have considered in my order of preference.</strong>  </p>

<ol>
<li><p><strong>Allow BGP <code>maximum-paths 2</code></strong> on SP router (affects all BGP customers homed there) so /24 is used when advertised on both circuits</p></li>
<li><p><strong>Split my /24 in half and advertise separate /25s</strong> over each link along with the /24.  The SP has recently stated that a non-documented community could be used for them to accept > /24 prefixes. This requires manipulating NAT on my firewall to use global addresses in both /25’s as most traffic now is destined back to us on just a few addresses in the lower /25.</p></li>
<li><p><strong>SP static routes to /24</strong> to force load-balancing w/BGP /24 (floating route).</p></li>
<li><p><strong>SP static routes to /25s</strong> to force ECLB w/BGP /24 prefix (in RIB, but not used unless failure of /25s).</p></li>
</ol>

<p><strong>I think advertising the /25s in BGP is the best option</strong> which I only found out recently is possible with the SP undocumented community, but are there other options I haven't considered or concerns about out-of-order packets with some of these choices?</p>

<p><em>This is sort of the reverse load-balancing problem most people ask with BGP.</em></p>
","<p>I would ask for 'maximum-paths' (it's usually called ECMP in standards and documents, not ECLB). And if ECMP is non-starter, then fallback to your /25 plan.</p>

<p>Other acronyms that I couldn't immediately figure out were DIA (dedicated internet access?) and SOP (standard operating procedure?). I'm not sure if these are really so universal acronyms that they should be used in stackexchange without at least hovertext to resolve them.</p>
","1755"
"How would one route an IP network through different ISPs?","3356","","<p>So, if I have a site that has 2 (or more) internet connections, with a routable IP subnet that I own, and one ISP goes down, how do I tell the rest of the world to send traffic addressed to my network through ISP B instead of ISP A? This is in relation to a high-availability type setup. I'm pretty sure it involves BGP, but I don't know how to implement it.</p>
","<p>Multihoming is normally done with BGP by announcing your ASN (Autonomous System number) &amp; Prefixes (""Network/Subnet"") to both of your ISPs. This mean that you have to have your own ASN and valid Public ip address space)</p>

<p>You Peer in BGP with both ISPs, they re-announce your ASN &amp; Prefixes upstream of them so any traffic for your network is directed through them depending on BGP policies (AS-Path, etc).</p>

<p>Now, if you plan on announcing your ASN yourself, be sure to have GOOD LINKS (DSL will cause you problems if it flaps - BGP is treating flapping/unstable route as BAD and will drop them until they're stable for a while).</p>

<p>The FUN of BGP is that you can control how traffic comes in and out.</p>

<ul>
<li><p>With AS-Path Prepending you can make some links ""worse"" than others (even if they're much greater than speed) as the AS-PATH length is what's first looked at when deciding which route is the best. This can be done on a prefix-by prefix basis.</p></li>
<li><p>With Local-Preference and Route-Maps, you can decide which ISP to use for your egress traffic and for any flows you want (basically, you manipulate routes matching some conditions before accepting them in your own routing table).</p></li>
</ul>
","3183"
"VPN client to multiple locations simultaneously","3351","","<p>I need to connect to 15+ locations to run network scans weekly. All the locations have Fortigate firewalls over which I have full control. The current solution I have is to connect via IPSec VPN to each location one by one to run my scans. I have considered scripting the connection and scanning process but it seems like network connectivity to all locations simultaneously is a superior solution.</p>

<p>All locations have the same internal subnet (which I can't control) and many locations have dynamic IP addresses. Because of this I was thinking I would need some type of NAT for VPN to give each subnet a unique address on my end allowing me to reach them all. But I am not sure how this would work.</p>

<p>I am wondering what the best solutions is, either hardware or through a VPN client, that would allow me to more easily gain access to these networks (preferably simultaneously). I've looked into StrongSwan as a VPN server and a Fortigate firewall on my side for form the mesh but don't have a solution yet.</p>
","<p>I think you need a hub-n-spoke VPN where one location acts as the main termination point for all of the other locations, and then routes between them for connectivity for them.</p>

<p>Fortinet devices definitely support this. And I don't think they will have a problem with the same LAN topology on each local network; you're correct in that you will likely have to do some NAT to achieve that, but that will actually help you keep the traffic 'straight' in your head anyway.</p>

<p>Here's the link for the hub-and-spoke VPN solution:</p>

<p><a href=""http://docs-legacy.fortinet.com/fos50hlp/50/index.html#page/FortiOS%25205.0%2520Help/hub-and-spoke.096.02.html"" rel=""nofollow"">http://docs-legacy.fortinet.com/fos50hlp/50/index.html#page/FortiOS%25205.0%2520Help/hub-and-spoke.096.02.html</a></p>
","5924"
"SonicWall DMZ and LAN inbound mapping","3348","","<p>I have a question, to which I think I know the answer.
I have a SonicWall TZ 215 configured and working fine with a DMZ and ports mapped through to that DMZ, but the need has come up to map traffic through to a system on the LAN network. 
When I configured the NAT Rules exactly the same as the ones I have for the DMZ no traffic was allowed through to the LAN.
So, my guess is when you have a DMZ configured, that you can only allow traffic through to that, because lets face it, mapping through to your LAN isn't the smartest thing to do.
Here are some details.</p>

<p>WAN1 11.11.11.11</p>

<p>WAN2 22.22.22.22</p>

<p>LAN 192.192.192.192</p>

<p>DMZ 193.193.193.193</p>

<p>FTP Traffic mapped through from WAN2 to DMZ address 193.193.193.X</p>

<p>My added configuration was</p>

<p>HTTP Traffic from WAN1 (Or all WAN) to LAN address 192.192.192.X</p>

<p>This just wouldn't work. Suggestions, assistance, help greatly received.</p>
","<p>That should work fine.  Did you add a firewall rule in addition to the NAT policy?  You'll need to allow  HTTP traffic from ""Any"" to ""WAN Interface IP"" (for both)</p>
","10255"
"What's the difference between a traditional switch and OpenFlow Switch?","3335","","<p>What's the difference between a traditional switch and OpenFlow Switch?</p>

<p>I know that OpenFlow switch is used in Software-defined networking but am failing to understand why a OpenFlow switch is so special?</p>
","<p>A normal switch works independently of the rest of the network.</p>

<p>A OpenFlow/SDN switch, when it receives a packet, that it does not have a flow for (Match + exit port) will contact a SDN controller(Server) and ask what must it do with this packet.  The controller can then download a flow to the switch, possibly including some packet manipulation.  Once the flow is downloaded to the switch it will switch similar packets at wire-speed.</p>

<p><strong>Why is centralizing the decision making so wow ?</strong></p>

<p>Having a central server that knows the network layout and can make all the switching decisions and build the paths gives us new capabilities.</p>

<ol>
<li>The sdn controller could route non critical/bulk traffic on longer routes that are not fully utilized.</li>
<li>The sdn controller could send the initial couple of packets to a firewall, and once the firewall is happy/accepts the flow, the sdn controller can bypass the firewall thus removing load from the FW and allowing multi-gigabit datacenters to be fire-walled.</li>
<li>The sdn controller can easily implement load-balancing also at high data rates by just directing different flows to different hosts, only doing the set-up of the initial flow's.</li>
<li>Traffic can be isolated without the need for vlan's, the sdn controller can just refuse certain connections.</li>
<li>Setup a network TAP/Sniffer easily for any port or even specific traffic by programming the network to send a duplicate stream to a network monitoring device.</li>
<li>It allows for the development of new services and ideas all in software on the sdn controller. <a href=""http://flowgrammable.org/sdn/openflow/actions/#tab_ofp_1_4"">OpenFlow-Actions</a></li>
</ol>
","20017"
"DHCP request failed, APIPA being used","3323","","<p>So, I have the following network configuration in Packet Tracer.<a href=""https://i.stack.imgur.com/LtTkW.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/LtTkW.jpg"" alt=""Network configuration""></a></p>

<p>The router is configured with DHCP. The ports on the switches are configured with access mode - for those that belong to the PCs. The unused ports are shut down. The ports between the switches and the ports between the switch and the router are configured as trunk ports. All the PCs that are connected to the S1 that is directly connected to the R1 get the IP addresses from the router. However, the PCs that are connected to the S2 and S3 don't - instead they get the message ""DHCP request failed, APIPA being used"". What could be the problem?</p>

<p>Here is the link for the configurations - <a href=""https://1drv.ms/u/s!AiRtffZ-QpFphY8iof_YGdcuua3KXw"" rel=""nofollow noreferrer"">https://1drv.ms/u/s!AiRtffZ-QpFphY8iof_YGdcuua3KXw</a></p>

<p><strong>The configurations for R1:</strong>  </p>

<pre><code>ip dhcp pool Head  
 network 10.10.10.0 255.255.255.0  
 default-router 10.10.10.1  
ip dhcp pool R&amp;D  
 network 10.10.20.0 255.255.255.0  
 default-router 10.10.20.1  
ip dhcp pool M&amp;S  
 network 10.10.30.0 255.255.255.0  
 default-router 10.10.30.1  
ip dhcp pool Lab  
 network 10.10.40.0 255.255.255.0  
 default-router 10.10.40.1  
ip dhcp pool WS  
 network 10.10.50.0 255.255.255.0  
 default-router 10.10.50.1  

no ip cef  
no ipv6 cef  

spanning-tree mode pvst  

interface FastEthernet0/0  
 no ip address  
 ip nat inside  
 duplex auto  
 speed auto  
!  
interface FastEthernet0/0.1  
 encapsulation dot1Q 1 native  
 ip address 10.10.1.1 255.255.255.0  
!  
interface FastEthernet0/0.10  
 encapsulation dot1Q 10  
 ip address 10.10.10.1 255.255.255.0  
!  
interface FastEthernet0/0.20  
 encapsulation dot1Q 20  
 ip address 10.10.20.1 255.255.255.0  
!  
interface FastEthernet0/0.30  
 encapsulation dot1Q 30  
 ip address 10.10.30.1 255.255.255.0  
!  
interface FastEthernet0/0.40  
 encapsulation dot1Q 40  
 ip address 10.10.40.1 255.255.255.0  
!  
interface FastEthernet0/0.50  
 encapsulation dot1Q 50  
 ip address 10.10.50.1 255.255.255.0  
!  
interface FastEthernet0/0.99  
 encapsulation dot1Q 99  
 ip address 10.10.99.1 255.255.255.0  
!  
interface FastEthernet0/1  
 ip address 85.143.163.237 255.255.255.0  
 ip nat outside  
 duplex auto  
 speed auto  

interface Vlan1  
 no ip address  
 shutdown  

ip nat inside source list 1 interface FastEthernet0/1 overload  
ip classless  

ip flow-export version 9  

access-list 1 permit 10.10.0.0 0.0.255.255  

line con 0  

line aux 0  

line vty 0 4  
 login  
</code></pre>

<p><strong>The configuration for S1:</strong></p>

<pre><code>spanning-tree mode pvst  
!  
interface FastEthernet0/1   
 switchport mode trunk  
!  
interface FastEthernet0/2  
 switchport mode trunk  
!  
interface FastEthernet0/3  
 shutdown  
!  
interface FastEthernet0/4  
 switchport mode trunk  
!  
interface FastEthernet0/5  
 shutdown  
!  
interface FastEthernet0/6  
 shutdown  
!  
interface FastEthernet0/7  
 shutdown   
!  
interface FastEthernet0/8  
 shutdown  
!  
interface FastEthernet0/9  
 shutdown  
!  
interface FastEthernet0/10  
 switchport access vlan 20  
 switchport mode access  
 spanning-tree portfast  
!  
interface FastEthernet0/11   
 switchport access vlan 20  
 switchport mode access  
 spanning-tree portfast  
!  
interface FastEthernet0/12  
 switchport access vlan 20  
 switchport mode access  
 spanning-tree portfast  
!  
interface FastEthernet0/13  
 switchport access vlan 20  
 switchport mode access  
 spanning-tree portfast  
!  
interface FastEthernet0/14  
 switchport access vlan 20  
 switchport mode access  
 spanning-tree portfast  
!  
interface FastEthernet0/15  
 switchport access vlan 10  
 switchport mode access  
 spanning-tree portfast  
!  
interface FastEthernet0/16  
 switchport access vlan 10  
 switchport mode access  
 spanning-tree portfast  
!  
interface FastEthernet0/17  
 switchport access vlan 30  
 switchport mode access  
 spanning-tree portfast  
!  
interface FastEthernet0/18  
 switchport access vlan 30  
 switchport mode access  
 spanning-tree portfast  
!  
interface FastEthernet0/19  
 switchport access vlan 30  
 switchport mode access  
 spanning-tree portfast  
!  
interface FastEthernet0/20  
 switchport access vlan 30  
 switchport mode access  
 spanning-tree portfast  
!  
interface FastEthernet0/21  
 switchport access vlan 20  
 switchport mode access  
 spanning-tree portfast  
!  
interface FastEthernet0/22  
 switchport access vlan 20  
 switchport mode access  
 spanning-tree portfast  
!  
interface FastEthernet0/23  
 switchport access vlan 30  
 switchport mode access  
 spanning-tree portfast  
!  
interface FastEthernet0/24  
 shutdown  
!  
interface Vlan1  
 no ip address  
 shutdown  
!  
interface Vlan99  
 ip address 10.10.99.10 255.255.255.0  
!  
ip default-gateway 10.10.99.1  

line con 0  
!  
line vty 0 4  
 login  
line vty 5 15  
 login  
!  
</code></pre>

<p><strong>The configurations for S2:</strong>  </p>

<pre><code>spanning-tree mode pvst  
!  
interface FastEthernet0/1  
 shutdown  
!  
interface FastEthernet0/2  
 switchport mode trunk  
!  
interface FastEthernet0/3  
 switchport mode trunk  
!  
interface FastEthernet0/4  
 shutdown  
!  
interface FastEthernet0/5  
 shutdown  
!  
interface FastEthernet0/6  
 shutdown  
!  
interface FastEthernet0/7  
 shutdown  
!  
interface FastEthernet0/8  
 shutdown  
!  
interface FastEthernet0/9  
 shutdown  
!  
interface FastEthernet0/10  
 switchport access vlan 40  
 switchport mode access  
 spanning-tree portfast  
!  
interface FastEthernet0/11  
 switchport access vlan 40  
 switchport mode access  
 spanning-tree portfast  
!  
interface FastEthernet0/12  
 switchport access vlan 40  
 switchport mode access  
 spanning-tree portfast  
!  
interface FastEthernet0/13  
 switchport access vlan 40  
 switchport mode access  
 spanning-tree portfast  
!  
interface FastEthernet0/14  
 switchport access vlan 40  
 switchport mode access  
 spanning-tree portfast  
!  
interface FastEthernet0/15  
 switchport access vlan 40  
 switchport mode access  
 spanning-tree portfast  
!  
interface FastEthernet0/16  
 shutdown  
!  
interface FastEthernet0/17  
 shutdown  
!  
interface FastEthernet0/18   
 shutdown  
!  
interface FastEthernet0/19  
 shutdown  
!  
interface FastEthernet0/20  
 shutdown  
!  
interface FastEthernet0/21  
 shutdown  
!  
interface FastEthernet0/22  
 shutdown  
!  
interface FastEthernet0/23  
 shutdown  
!  
interface FastEthernet0/24  
 shutdown  
!  
interface Vlan1  
 no ip address  
 shutdown  
!  
interface Vlan99  
 ip address 10.10.99.20 255.255.255.0  
!  
ip default-gateway 10.10.99.1  

line con 0  
!  
line vty 0 4  
 login  
line vty 5 15  
 login  
!  
</code></pre>

<p><strong>The configurations for S3:</strong>  </p>

<pre><code>spanning-tree mode pvst  
!  
interface FastEthernet0/1  
 shutdown  
!  
interface FastEthernet0/2  
 shutdown  
!  
interface FastEthernet0/3  
!  
interface FastEthernet0/4  
!  
interface FastEthernet0/5  
 shutdown  
!  
interface FastEthernet0/6  
 shutdown  
!  
interface FastEthernet0/7  
 shutdown  
!  
interface FastEthernet0/8  
 shutdown  
!  
interface FastEthernet0/9  
 shutdown  
!  
interface FastEthernet0/10  
 switchport access vlan 50  
 switchport mode access  
 spanning-tree portfast  
!  
interface FastEthernet0/11  
 switchport access vlan 50  
 switchport mode access  
 spanning-tree portfast  
!  
interface FastEthernet0/12  
 shutdown  
!  
interface FastEthernet0/13  
 shutdown  
!  
interface FastEthernet0/14  
 shutdown  
!  
interface FastEthernet0/15  
 shutdown  
!  
interface FastEthernet0/16  
 shutdown  
!  
interface FastEthernet0/17  
 shutdown  
!  
interface FastEthernet0/18  
 shutdown  
!  
interface FastEthernet0/19  
 shutdown  
!  
interface FastEthernet0/20   
 shutdown  
!  
interface FastEthernet0/21  
 shutdown  
!  
interface FastEthernet0/22  
 shutdown  
!  
interface FastEthernet0/23  
 shutdown  
!  
interface FastEthernet0/24  
 shutdown  
!  
interface Vlan1  
 no ip address  
 shutdown  
!  
interface Vlan99  
 ip address 10.10.99.30 255.255.255.0  
!  
ip default-gateway 10.10.99.1  

line con 0  
!  
line vty 0 4  
 login  
line vty 5 15  
 login  
!  
</code></pre>
","<p>Why didn't you configure trunks on S3?</p>

<p>It's a very good idea to use the <code>description</code> command on the interfaces to describe where the interface connects. It's not labeled on the drawing, and we are left to guess. For instance, S1 has trunks on <code>F0/1</code>, <code>F0/2</code>, and <code>F0/4</code>, but which connects to S2, and on which S2 interface does it connect? It's a good idea to use the <code>show cdp neighbor</code> command to double-check that what you label matches the actual connection.</p>

<p>You should also create the VLANs on each switch, and set S1 as the root switch for the VLANs.</p>
","33525"
"Full-Duplex and Speed negotiation","3321","","<p>I have a server where speed and duplex are set to <code>auto</code>. The NIC supports 1000mb/s, and is connected to my Cisco switch.</p>

<p>When I check on port I see that the speed is set to 100Mb/s and Full Duplex.</p>

<p>Other unused ports on my switch are set to  Auto-duplex, Auto-speed, media type is 10/100/1000BaseTX.</p>

<p>Could the NIC drivers be the reason why I can not link at 1000Mb/s?!</p>

<p>What is the issue, if it's not the NIC drivers?</p>
","<p>The usual suspects in the case of autonegotiations are:</p>

<ul>
<li>bad cables</li>
<li>bad ports, SFPs or NICs</li>
<li>port configs (are they both set to auto and do they both list the 1000BASE-T FD ability?)</li>
<li>bugs, compatibility or legacy issues</li>
</ul>

<p>I would not recommend a fixed speed and duplex setting in this (or almost any) situation. The days of frequent autoneg issues and incompatible implementations are gone, on recent equipment such issues are very rare. If autoneg is not working, switching to a fixed setting is a workaround, hiding the underlying issue that causes the autonegotiation to fail. Not fixing this issue might allow it to bite you later.</p>

<p>Also, the probability of speed or duplex mismatches and the like is actually much higher in an environment with fixed settings, caused by left over settings when moving equipment around.</p>

<p>As an example, if in your case the cable is to blame, setting both sides to 1000 fixed could disable the link with the faulty cable completely. Autonegotation gracefully degrades you to 100. It is of course up to you or your monitoring equipment to detect and fix this.</p>

<p>Interesting blog post, with links some vendor recommendations: <a href=""http://etherealmind.com/ethernet-autonegotiation-works-why-how-standard-should-be-set/"">""EtherealMind on Autonegotiation""</a></p>
","4973"
"DHCP with Brocade","3319","","<p>I have the following config on a brocade icx with the premium license for L3 features:</p>

<pre><code>stack unit 1
  module 1 icx6450-24p-poe-port-management-module
  module 2 icx6450-sfp-plus-4port-40g-module
!
global-stp
!
!
!
vlan 10 by port
 untagged ethe 1/1/1 to 1/1/24 ethe 1/2/1 
 router-interface ve 10
 spanning-tree 802-1w
!
vlan 50 name DEFAULT-VLAN by port
!
!
!
!
!
!                                                                 
!
!
optical-monitor 1
boot sys fl sec
enable telnet password .....
enable super-user-password .....
ip dhcp-server enable
!
ip dhcp-server pool noc
 dhcp-default-router 10.10.10.1 
 dns-server 208.67.222.222 
 domain-name noc.com
 excluded-address 10.10.10.1 10.10.10.10
 lease 1 0 0
 network 10.10.10.0 255.255.255.0
 deploy
!
ip route 0.0.0.0 0.0.0.0 x.x.x.137
!
fdp run

!
!
interface ethernet 1/2/1
 port-name To_9/11
 speed-duplex 1000-full-master
!
interface ve 10
 ip address x.x.x.140 255.255.255.248
</code></pre>

<p>I have a PC plugged into a random port 17 but it's not able to get a lease from this switch.</p>

<p>The logs show this when the PC tries to renew its ip:</p>

<pre><code>    0d03h52m09s:A:DHCPS: unable to find an address pool for rx port 10, dropping DHCPOFFER message
0d03h52m09s:A:DHCPS: Exhausts all allocation methods, no address pool found from received port 10 
0d03h51m53s:A:DHCPS: unable to find an address pool for rx port 10, dropping DHCPOFFER message
0d03h51m53s:A:DHCPS: Exhausts all allocation methods, no address pool found from received port 10
</code></pre>

<p>Anyone know how I can get this to work properly and so that once the PC's get a lease, they will be able to browse the internet, etc?</p>

<p>Thanks</p>

<p><strong>UPDATE</strong></p>

<p>I made the following changes and now the PC is able to get a lease.</p>

<p><strong>added a new vlan and put port 17 into it along with creating a new ve instance</strong></p>

<pre><code> vlan 20 by port
     untagged ethe 1/1/17 
     router-interface ve 20
    spanning-tree 802-1w


interface ve 20
 ip address 10.10.10.1 255.255.255.0
</code></pre>

<p>Now I got this:</p>

<pre><code>0d04h19m04s:I:DHCPS: sending ACK message to client 10.10.10.11    
0d04h19m04s:I:DHCPS: verified client requested address 10.10.10.11 in lease binding, updating entry
0d04h19m04s:I:DHCPS: No ARP-PING reply from client 10.10.10.11

Bindings from all pools:
    IP Address    Client-ID/        Lease expiration Type
                  Hardware address

   10.10.10.11    0013.72d1.c847   000d:23h:49m:43s   Automatic
</code></pre>

<p>Now just need to make sure I can browse the internet from the PC tomorrow and I'm all good!</p>

<p>Even though I figured it out on my own...hope this helps someone and thanks everyone :)</p>
","<pre><code>interface ve 10
 ip address x.x.x.140 255.255.255.248

ip dhcp-server pool noc
 network 10.10.10.0 255.255.255.0
</code></pre>

<p>It doesn't work because <code>ve 10</code> (the L3 interface) isn't within the <code>noc</code> dhcp pool (10.10.10.0/24)  Your updated <code>ve 20</code> is, but unless you have something upstream of here doing NAT, there won't be any internet access.</p>
","6415"
"Identifying a Cisco access point post-install","3314","","<p>We have about 50 Cisco 1242 access-points and we're managing them with a Cisco 4404 Wireless Lan controller.  The guy who installed the APs did not assign a location to the access points in the controller.</p>

<p>We are seeing some malicious behavior from one of the APs called ""AP27"", and we want to find the physical location of this AP.  I have tracked down the mac address of the AP and know where the cable is on our PoE switch, but this still leaves about seven possible APs, given the radius of the coverage for that IDF.  Unfortunately the same guy who didn't put a location on the APs also did not label the cabling to them.</p>

<p>Is there a way to find exactly where the AP is, other than tracing cables?</p>
","<p>Depending on the version of WLC code that you're running, you can either manually disable the status LED on the AP or flash it by logging into the WLC and issuing a command... Then just walk around with your laptop and turn off / flash LEDs until you find the right AP.</p>

<p>To disable the status LED, use this...</p>

<pre><code>config ap led-state disable AP27
</code></pre>

<p>To flash the status LED on two second intervals, you can use this...</p>

<pre><code>config ap led-state flash 2 AP27
</code></pre>

<p>Be sure to revert the AP LED back to the original state, otherwise it could cause confusion down the road.  You can see the LED configuration of your APs with</p>

<pre><code>show ap led-state
</code></pre>
","2299"
"Uplinkports between two Cisco stacks gets blocked by RSTP","3312","","<p>I should get this figured out by my own, but actually I seem to be a blockedhead.</p>

<p>I have two stacks of Cisco 3750X with two switches in each stack. One Stack is in building A, the other one in Building B. Each stack acts as core switch for the building and as a router for the local traffic. Also, there are some VLANs shared between the two stacks with no routing.</p>

<p>The stacks are connected with a dark fiber and 1Gbps single mode SFP. This is working like a charm.</p>

<p>Now, we want to install a second uplink between the two stacks for backup. Unfortunately, we could only get a 100 Mbit (STM-100) leased ethernet line between the buildings, so no portchannel/etherchannel is possible.</p>

<p>Then I thought: Just configure a second port with same settings (trunk) as the first uplink port and plug in the line. Spanning-Tree will disable it because of higher cost and enable it in case the main uplink (Gbit fiber) fails. And there is the problem:</p>

<p>Spanning-Tree (RSTP) has disabled the ""new"" port, but detected it as ""Backup"" and made it discard all packets and don't enables it when the main uplinks fails.</p>

<p>The question is: How can I make the stacks enable the backup line in case of a main line failure OR if this is not possible, what would be a better approach to reach the same goal.</p>

<p>Here is a simple drawing to visualize the problem:</p>

<p><img src=""https://i.stack.imgur.com/qAf8N.jpg"" alt=""##""></p>

<p>The relevant parts of the running config:</p>

<p>Stack in Building A:</p>

<pre><code>interface GigabitEthernet1/0/28
 description downlink trunk BldB
 switchport access vlan 666
 switchport trunk encapsulation dot1q
 switchport trunk native vlan 666
 switchport trunk allowed vlan 2-99,101-199,201-4094
 switchport mode trunk
 switchport nonegotiate
 speed nonegotiate
end


interface GigabitEthernet2/0/28
 description ""downlink trunk BldgB 100M-Backup""
 switchport access vlan 666
 switchport trunk encapsulation dot1q
 switchport trunk native vlan 666
 switchport trunk allowed vlan 2-99,101-109,111-4094
 switchport mode trunk
 switchport nonegotiate
 shutdown
 speed 100
 duplex full
 spanning-tree vlan 99 port-priority 128
 spanning-tree vlan 99 cost 50
end
</code></pre>

<p>Stack in Building B:</p>

<pre><code>interface GigabitEthernet1/0/1
 description downlink trunk BldgA
 switchport access vlan 666
 switchport trunk encapsulation dot1q
 switchport trunk native vlan 666
 switchport trunk allowed vlan 2-99,101-199,201-4094
 switchport mode trunk
 switchport nonegotiate
 speed nonegotiate
 duplex full
end

interface GigabitEthernet2/0/1
 description ""downlink trunk BldgA 100Mbit-Backup""
 switchport access vlan 666
 switchport trunk encapsulation dot1q
 switchport trunk native vlan 666
 switchport trunk allowed vlan 2-99,101-109,111-4094
 switchport mode trunk
 switchport nonegotiate
 speed 100
 duplex full
end
</code></pre>

<p><strong>EDIT: Added spanning tree information:</strong></p>

<pre><code>bldga-core# show spanning-tree summary
Switch is in rapid-pvst mode
Root bridge for: VLAN0099, VLAN0101-VLAN0117, VLAN0200
Extended system ID           is enabled
Portfast Default             is disabled
PortFast BPDU Guard Default  is disabled
Portfast BPDU Filter Default is disabled
Loopguard Default            is disabled
EtherChannel misconfig guard is enabled
UplinkFast                   is disabled
Stack port is StackPort1
BackboneFast                 is disabled
Configured Pathcost method used is short


bldgb-core# show spanning-tree summary
Switch is in rapid-pvst mode
Root bridge for: VLAN0100, VLAN0110, VLAN0118, VLAN0200
EtherChannel misconfig guard is enabled
Extended system ID           is enabled
Portfast Default             is disabled
PortFast BPDU Guard Default  is disabled
Portfast BPDU Filter Default is disabled
Loopguard Default            is disabled
UplinkFast                   is disabled
Stack port is StackPort1
BackboneFast                 is disabled
Configured Pathcost method used is short


bldga-core# show spanning-tree vlan 99

VLAN0099
  Spanning tree enabled protocol rstp
  Root ID    Priority    99
             Address     081f.f31e.9c80
             This bridge is the root
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    99     (priority 0 sys-id-ext 99)
             Address     081f.f31e.9c80
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time  300 sec

Interface           Role Sts Cost      Prio.Nbr Type
------------------- ---- --- --------- -------- --------------------------------
Po14                Desg FWD 3         128.592  P2p
Po15                Desg FWD 3         128.600  P2p
Po17                Desg FWD 3         128.616  P2p
Po19                Desg FWD 3         128.632  P2p
Po22                Desg FWD 3         128.656  P2p
Po23                Desg FWD 3         128.664  P2p
Po24                Desg FWD 3         128.672  P2p
Po28                Desg FWD 4         128.704  P2p

bldgb-core#show spanning-tree vlan 99

VLAN0099
  Spanning tree enabled protocol rstp
  Root ID    Priority    99
             Address     081f.f31e.9c80
             Cost        4
             Port        616 (Port-channel14)
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    4195   (priority 4096 sys-id-ext 99)
             Address     d072.dc9b.4980
             Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time  300 sec

Interface           Role Sts Cost      Prio.Nbr Type
------------------- ---- --- --------- -------- --------------------------------
Po14                Root FWD 4         128.616  P2p
Po15                Desg FWD 4         128.624  P2p
Po16                Desg FWD 4         128.632  P2p
Po17                Desg FWD 4         128.640  P2p
Po18                Desg FWD 4         128.648  P2p
Po19                Desg FWD 4         128.656  P2p
Po20                Desg FWD 4         128.664  P2p
Po21                Desg FWD 4         128.672  P2p
Po22                Desg FWD 4         128.680  P2p
Po23                Desg FWD 4         128.688  P2p
Po25                Desg FWD 4         128.704  P2p

bldga-core#show interfaces gi2/0/28
GigabitEthernet2/0/28 is administratively down, line protocol is down (disabled)
  Hardware is Gigabit Ethernet, address is 081f.f31e.c39c (bia 081f.f31e.c39c)
  MTU 1500 bytes, BW 100000 Kbit, DLY 100 usec,
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation ARPA, loopback not set
  Keepalive not set
  Full-duplex, 100Mb/s, link type is force-up, media type is 10/100/1000BaseTX SFP
  input flow-control is off, output flow-control is unsupported
  ARP type: ARPA, ARP Timeout 04:00:00
  Last input 20:35:08, output 20:34:56, output hang never
  Last clearing of ""show interface"" counters never
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 6039
  Queueing strategy: fifo
  Output queue: 0/40 (size/max)
  5 minute input rate 0 bits/sec, 0 packets/sec
  5 minute output rate 0 bits/sec, 0 packets/sec
     964013646 packets input, 740488440354 bytes, 0 no buffer
     Received 3529649 broadcasts (2477004 multicasts)
     0 runts, 0 giants, 0 throttles
     12 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored
     0 watchdog, 2477004 multicast, 0 pause input
     0 input packets with dribble condition detected
     975352039 packets output, 923509356637 bytes, 0 underruns
     0 output errors, 0 collisions, 9 interface resets
     0 babbles, 0 late collision, 0 deferred
     0 lost carrier, 0 no carrier, 0 PAUSE output
     0 output buffer failures, 0 output buffers swapped out


bldgb-core#show interfaces gigabitEthernet 2/0/1
GigabitEthernet2/0/1 is down, line protocol is down (notconnect)
  Hardware is Gigabit Ethernet, address is 74a0.2f7e.3001 (bia 74a0.2f7e.3001)
  MTU 1500 bytes, BW 100000 Kbit/sec, DLY 100 usec,
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation ARPA, loopback not set
  Keepalive not set
  Full-duplex, 100Mb/s, link type is auto, media type is 10/100/1000BaseTX SFP
  input flow-control is off, output flow-control is unsupported
  ARP type: ARPA, ARP Timeout 04:00:00
  Last input never, output 20:25:27, output hang never
  Last clearing of ""show interface"" counters never
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 346
  Queueing strategy: fifo
  Output queue: 0/40 (size/max)
  5 minute input rate 0 bits/sec, 0 packets/sec
  5 minute output rate 0 bits/sec, 0 packets/sec
     0 packets input, 0 bytes, 0 no buffer
     Received 0 broadcasts (0 multicasts)
     0 runts, 0 giants, 0 throttles
     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored
     0 watchdog, 0 multicast, 0 pause input
     0 input packets with dribble condition detected
     160167 packets output, 19128660 bytes, 0 underruns
     0 output errors, 0 collisions, 2 interface resets
     0 unknown protocol drops
     0 babbles, 0 late collision, 0 deferred
     0 lost carrier, 0 no carrier, 0 pause output
     0 output buffer failures, 0 output buffers swapped out

bldga-core#show etherchannel summary
Flags:  D - down        P - bundled in port-channel
        I - stand-alone s - suspended
        H - Hot-standby (LACP only)
        R - Layer3      S - Layer2
        U - in use      f - failed to allocate aggregator

        M - not in use, minimum links not met
        u - unsuitable for bundling
        w - waiting to be aggregated
        d - default port


Number of channel-groups in use: 15
Number of aggregators:           15

Group  Port-channel  Protocol    Ports
------+-------------+-----------+-----------------------------------------------
1      Po1(SD)          -
14     Po14(SU)         -        Gi1/0/14(P) Gi2/0/8(P)
15     Po15(SU)         -        Gi1/0/15(P) Gi2/0/9(P)
16     Po16(SD)         -        Gi2/0/16(D)
17     Po17(SU)         -        Gi1/0/17(P) Gi2/0/17(P)
18     Po18(SD)         -
19     Po19(SU)         -        Gi1/0/22(P) Gi2/0/19(P)
20     Po20(SD)         -
21     Po21(SD)         -
22     Po22(SU)         -        Gi1/0/9(P)  Gi2/0/10(P) Gi2/0/14(P)
                                 Gi2/0/15(P)
23     Po23(SU)         -        Gi1/0/10(P) Gi1/0/18(P) Gi2/0/11(P)
                                 Gi2/0/18(P)
24     Po24(SU)         -        Gi2/0/5(P)  Gi2/0/6(P)
27     Po27(SD)         -        Gi2/0/23(D)
28     Po28(SU)         -        Gi1/0/28(P)
29     Po29(SD)         -
</code></pre>

<p>Thanks for any help!</p>
","<p>First of all you may want to remove the unnecessary spanning-tree configuration on your secondary uplink. STP calculates the cost metric based on the link speed. Your 100Mbit/sec CU uplink has a default cost of 19 and your primary 1Gbit/sec SM Fibre uplink got a cost of 4, so no need to set it manually.</p>

<p>You may also remove the ""access vlan configuration"" since your trunk configuration with native vlan 666 will be preferred. Also change your allowed vlan configuration to match the primary link. I do not know which vlans you actually use, but inconsistency may become a big pain in case your primary link fails.</p>

<pre><code> interface GigabitEthernet2/0/28
 description ""downlink trunk BldgB 100M-Backup""
 switchport access vlan 666              -&gt; unnecessary
 switchport trunk encapsulation dot1q
 switchport trunk native vlan 666
 switchport trunk allowed vlan 2-99,101-109,111-4094
 switchport mode trunk
 switchport nonegotiate
 shutdown
 speed 100
 duplex full
 spanning-tree vlan 99 port-priority 128 -&gt; unnecessary
 spanning-tree vlan 99 cost 50           -&gt; unnecessary
end
</code></pre>

<p>An interesting counter from Gi1/0/28 (Site A) are the input errors on the interface. Might be a layer 1 issue but since you do not have any crc errors and the realibility is 255/255 it may be due to repluging cables.</p>

<p>Since there are no obvious configuration issues I would recommand re-enabling the port and posting the output of:</p>

<p>Site A:</p>

<pre><code>show spanning-tree interface gi1/0/28
show spanning-tree detail
</code></pre>

<p>Site B: </p>

<pre><code>show spanning-tree interface gi2/0/1
show spanning-tree detail
</code></pre>

<p>Last but not least could you provide the following information:</p>

<ul>
<li>Which IOS release are you running on the stacks?</li>
<li>Does your Service Provider provide transparent L2 services (BPDUs received on  both sides? ... you may check if CDP packets are received on both sites via show cdp neighbors) </li>
</ul>
","25465"
"LACP from Server to Switch","3304","","<p>I am trying to configure link aggregation (LACP) from a server to a HP 2920-48G switch. The server has a 4 port Intel NIC that supports LACP, and a OS that natively supports LACP as well.</p>

<p>The switch has three modes for LACP, Passive, Active, and a separate ""LACP Trunk"" which appears to be primarily a proprietary option for trunking HP switches together. I have tried all three options on the two ports I am attempting to aggregate with no success. I have also read that I must have GVRP enabled on the ports, then forbid those ports from joining the default VLAN (as I am attempting to aggregate on a different VLAN then the default) to get dynamic LACP working. I have tried that with all three previous options and I still cannot get a working connection.</p>

<p>Any ideas on where I am failing?</p>
","<p>Sounds like you're almost there.</p>

<p>You'll need to create a ""team"" on the server using two or more of the Intel ports.  Use the Configure option in the NIC settings to choose 802.3ad.</p>

<p>Let's say you're using a team with two server NIC ports into two ports (47 and 48) on the same switch.</p>

<p>On the HP switch,</p>

<blockquote>
  <p>HP Procurve 2920> config<br>
  HP Procurve 2920(config)# int 47-48 lacp active<br>
  HP Procurve 2920(config)# show lacp  </p>
</blockquote>

<p>Check to be sure lacp status is ""success""</p>

<p>Now patch in your server, each Intel NIC port to an HP port.  Come back to the CLI and </p>

<blockquote>
  <p>HP Procurve 2920(config)# show lacp</p>
</blockquote>

<p>to check if it's successful.  Look for LACP partner = yes on both interfaces 47 and 48 and be sure all interfaces in your team are ""up""  Check your server to be sure traffic is flowing through both NIC ports.  If so, </p>

<blockquote>
  <p>HP Procurve 2920(config)# write mem</p>
</blockquote>

<p>to save configuration to memory.</p>
","16729"
"Configuring a password policy on Cisco IOS or NX-OS","3301","","<p>I was wondering if it's possible at all to configure a password policy which enforces password complexity for locally defined accounts. I know it's possible for TACACS+ and RADIUS, but I need to know if it's possible to enforce such policy for locally defined accounts. </p>

<p>The devices I have in scope are running IOS and NX-OS</p>
","<p>Regarding password complexity for local accounts, you have these options...</p>

<ul>
<li><strong>Cisco NX-OS</strong>: I'm not sure you can configure a local password policy in NX-OS; however, NX-OS <a href=""http://www.cisco.com/c/en/us/td/docs/switches/datacenter/nexus5000/sw/configuration/guide/cli/CLIConfigurationGuide/sec_rbac.html#wp1258879"" rel=""nofollow noreferrer"">rejects weak passwords by default</a>.  To disable this feature, use <code>no password strength-checking</code> in the global configuration.</li>
<li><strong>Cisco IOS</strong>:

<ul>
<li>Password length: <a href=""http://www.cisco.com/c/en/us/td/docs/ios-xml/ios/security/s1/sec-s1-cr-book/sec-cr-s1.html#wp4245155510"" rel=""nofollow noreferrer""><code>security password min-length</code></a>.  Admittedly, length is a fairly weak check itself, but IOS at least can detect / deny brute force attacks (see below).</li>
</ul></li>
</ul>

<p>There are a few things to remember...</p>

<ul>
<li><p>Many older versions of Cisco IOS use a <a href=""http://packetlife.net/toolbox/type7/"" rel=""nofollow noreferrer"">weak ""Type 7"" hash</a> to protect passwords from shoulder-surfing; there are a billion tools like this on the internet to reverse those hashes.  Type 7 hashes should not be considered secure and thus, archive configs in a directory with good permissions enforcement (i.e. your linux tftp directory probably isn't a good location, since most people change tftp file permissions to 777).</p>

<ul>
<li>Ironically the weak ""Type 7"" algorithm looks secure to the uninitiated, and is enabled with a command called <code>service password-encryption</code>.</li>
<li>One should always use the <code>secret</code> keyword when possible in usernames: i.e. <code>username joe secret 5 $1$pJz5$28CTViXggZmhjikYdDyls0</code>.   This is at least a decent <code>md5</code> hash of the plaintext password.  Newer IOS versions <a href=""http://www.infoworld.com/article/2613969/password-security/cisco-inadvertently-weakens-password-encryption-in-its-ios-operating-system.html"" rel=""nofollow noreferrer"">attempt to use a stronger algorithm</a>, but failed before getting it right.</li>
<li>It's not a bad idea to audit local accounts to see whether you can upgrade them to use the <code>secret</code> keyword. In linux, it's as simple as <code>grep ^username /path/to/your/configs/* | grep -v secret</code> (making a note to myself to do this today at my $dayjob)</li>
</ul></li>
<li>Newer versions of IOS have a feature to trap brute-force attacks against the router; an ACL is applied to the vty.

<ul>
<li>This command would automatically apply an acl to block the offending source IP address for 60 seconds if it had failed password checks 3 times in five minutes: <code>login block-for 60 attempts 3 within 300</code></li>
<li>You can customize the access-list which is applied using <code>login quiet-mode access-class [acl-name]</code>; by default <a href=""https://networkengineering.stackexchange.com/a/6675/775"">IOS applies an acl called <code>sl_def_acl</code></a></li>
</ul></li>
</ul>
","13521"
"Download startup config from Cisco device using SCP","3292","","<p>I can successfully programmatically download the config from Juniper network devices using SCP - I'd like to do the same for a Cisco router.</p>

<p>SSH access is already working, and I've enabled SCP using <code>ip scp server enable</code>. Problem is that I don't know the name or location of the file I need to download, and GUI tools like WinSCP don't seem to work (complains that I need a BASH shell).</p>

<p>Is this possible for Cisco devices?</p>
","<p>I finally figured it out - I was quoting the filename, which seems to work just fine for other devices, such as Juniper devices, but not for Cisco IOS.</p>

<p>I was doing this:</p>

<p><code>scp -f ""system:running-config""</code></p>

<p>But this is what works:</p>

<p><code>scp -f system:running-config</code></p>
","18787"
"What is the difference between all the switching modes on 6500/7600?","3291","","<p>On one of my routers, I see the following switching modes:</p>

<pre><code>#show fabric switching-mode 
Global switching mode is Truncated
dCEF mode is not enforced for system to operate
Fabric module is not  required for system to operate
Modules are allowed to operate in bus mode
Truncated mode is allowed, due to presence of DFC, CEF720, Standby supervisor module

Module Slot     Switching Mode
1                      Bus
2                 Crossbar
3                     dCEF
4                      Bus
5                      Bus
6                 Crossbar
7                      Bus
8                      Bus
9                 Crossbar
</code></pre>

<p>What is the difference between Crossbar, Bus, and dCEF switching modes?</p>
","<p>""Bus"" is connection to 16Gbit/s bus that is common to legacy 6500 architecture.</p>

<p>Crossbar and dCEF mean the connection from the LC (line card) is using switch fabric (separate SFM module for Sup2, integrated switch fabric chip on Sup720 and Sup2T).</p>

<p>Crossbar means the connection is from the line card that doesn't have distributed processing capabilities (no DFC on it, CFC is installed), while dCEF means there's distributed CEF mode running on line card using DFC.</p>
","139"
"Firewall preventing access to internal resource using external NAT address when traffic comes in from a third interface","3287","","<p>I'm using a Fortinet 311B firewall and having an issue understanding why this traffic is being blocked.</p>

<p>There is an access rule and matching NAT statement for an external IP address pointing to an internal web server.  External users (via the Internet) can access this website with no problem.</p>

<p>Internal users are using internal DNS, which resolves the same hostname to a private IP address, providing direct access to the website, and this works normally.</p>

<p>Wireless users, connected via FortiAP and coming into the Fortinet on a separate ""wireless"" interface, have a completely separate subnet and are not allowed any LAN access; Internet only.  When they attempt to connect to the website host address, it fails.  Since they are Internet only, they are using external DNS and resolving the outside IP address.  This outside IP address of the web server is a virtual IP on the Fortinet attached to the External interface, with a 1-to-1 NAT to the internal web server.</p>

<p>I've tried creating ACL entries to allow traffic from the wireless interface to the External interface, and even a ""NAT 0"" rule for this traffic, but I'm wondering if there is some other security feature at work here, as I know firewalls don't necessarily like this sort of ""hairpin"" traffic.  I've checked the logs and I'm not seeing any of my interesting traffic show up.</p>

<p>Anyone have any ideas?</p>
","<p>This is a pretty common problem on a lot of stateful firewalls (SRXs and ScreenOS will do this as well).</p>

<p>The issue is that traffic from your wireless interface/zone will be routed out the Internet Zone/Interface, but not <em>to</em> the NAT.</p>

<p>On the SRX at least, you need to configure the NAT so that it is available on the wireless interface (as if it was another Internet-facing interface) and then the inbound traffic from your wireless interface will be destination NATted before the routing decision is made and then routed to the ""LAN"" interface.</p>

<p>I would be very surprised if Fortinet didn't require something similar.</p>
","23394"
"Is a VPN concentrator different from a VPN gateway?","3282","","<p>I hear both terms used, sometimes in conjunction, sometimes seemingly as synonyms.</p>

<p>What is the technical difference between these types of devices if they are in fact different?</p>
","<p><strong>Yes</strong>, though they are often used interchangeably.  </p>

<blockquote>
  <p><strong>A VPN gateway may refer to a router, firewall, or VPN Concentrator that provides Virtual Private Networks.</strong></p>
  
  <p><strong>A VPN Concentrator is a dedicated [VPN gateway] appliance (physical or virtual).</strong></p>
</blockquote>

<p><em>All VPN Concentrators are VPN Gateways, but not all VPN Gateways are VPN Concentrators.</em></p>
","17840"
"ASA 9.1 static PAT (""port forwarding"") not working","3281","","<p>The goal is to forward two different ports 1195 and 1196 from the outside address of the ASA to two different hosts on the inside but on the same port.</p>

<p>These are the addresses used in this example:</p>

<ul>
<li>ASA.Internet   192.168.1.99/24</li>
<li>ASA.DMZ        172.16.0.1/24</li>
</ul>

<p>Here is the relevant part of the config for one inside host:</p>

<pre><code>object network VPN2
 host 172.16.0.66 
 nat (DMZ,Internet) static interface service udp 1194 1195

object service VPN
 service udp destination eq 1194

access-list Internet_access_in_1 extended permit object VPN any object VPN2
access-list Internet_access_in_1 extended deny ip any any
</code></pre>

<hr>

<p>The questions are:</p>

<ul>
<li><strong>What is the correct way to use packet tracer in this case?</strong></li>
<li><strong>What is the correct destination port to use in the ACL in this case?</strong></li>
</ul>

<hr>

<p>Experiments: </p>

<p>Using <code>packet-tracer input internet udp 8.8.8.8 1234 172.16.0.66 1194</code> (inside IP/port) I get</p>

<pre><code>Phase: 7
Type: NAT
Subtype: rpf-check
Result: DROP
Config:
object network VPN2
 nat (DMZ,Internet) static interface service udp 1194 1195
Additional Information:
</code></pre>

<p>Using <code>packet-tracer input internet udp 8.8.8.8 1234 192.168.1.99 1195</code> (outside IP/port) I obviously get</p>

<pre><code>Phase: 4
Type: ACCESS-LIST
Subtype:
Result: DROP
Config:
Implicit Rule
Additional Information:
</code></pre>

<p>In any case, packets are currently hitting the firewall on the Internet(outside) interface on udp port 1195 but they aren't seen inside. <code>show nat detail</code>:</p>

<pre><code>  (DMZ) to (Internet) source static VPN2 interface   service udp 1194 1195
     translate_hits = 0, untranslate_hits = 0
     Source - Origin: 172.16.0.66/32, Translated: 192.168.1.99/24
     Service - Protocol: udp Real: 1194 Mapped: 1195
</code></pre>

<p><strong>Now what is making me crazy in addition</strong>, if I add port 1195 to the access list, the following invocation of packet tracer accepts the traffic:</p>

<pre><code>packet-tracer input internet tcp 8.8.8.8 1234 172.16.0.66 1195
</code></pre>

<p>That's the inside IP but the outside port? WT...? </p>
","<p>There was a manual Dynamic PAT (Hide) to any in NAT section 1. I moved it to after-auto (section 3) and all is good...</p>
","25007"
"3 subnets, 2 OSPF areas - Will This Work?","3271","","<p>Will any issues occur if I have a topology involving 3 subnets and two OSPF areas where one subnet is in AREA 0 and the other two subnets are both in AREA 1?</p>

<p>For example:</p>

<pre><code>[area 1, subnet 1]---[ABR #1]---[area 0, subnet 2]---[ABR #2]---[area 1, subnet 3]
</code></pre>
","<p>Regarding the question of splitting area 1 across the backbone (area 0):</p>

<blockquote>
  <p>[area 1, subnet 1]---[ABR #1]---[area 0, subnet 2]---[ABR #2]---[area 1, subnet 3]</p>
  
  <p>[area 1, subnet 1]---[Router #1]---[area 0, subnet 2, end device #1]---[Router #2]---[area 0, subnet 2, end device #2]---[Router #3]---[area 1, subnet 3] </p>
</blockquote>

<p>Short answer: There is no problem with your proposal...</p>

<p>Long answer:</p>

<p>Even Peter's answer, which argues that reusing area numbers is bad design, offers no proof that this is a bad design; if you examine the hyperlinks he used, there is no explanation of undesirable consequences for this design.  Furthermore, the argument that you might have problems connecting R1 and R3 falls short, since the R1 to R3 link could legitimately be configured in either Area 0 or Area 1, depending on what traffic you want to transit it.  The difficulties he mentions are a false dilemma.</p>

<p>In <a href=""http://tools.ietf.org/html/rfc2328#page-38"" rel=""nofollow"">RFC 2328, Section 3.7</a> OSPF explicitly allows you to use discontiguous non-backbone areas (which are called ""area partitions"", below):</p>

<pre><code>    OSPF does not actively attempt to repair area partitions.  When
    an area becomes partitioned, each component simply becomes a
    separate area.  The backbone then performs routing between the
    new areas.  Some destinations reachable via intra-area routing
    before the partition will now require inter-area routing.
    ...  Also, the backbone itself must not partition.
</code></pre>

<p>Thus whether you use the proposed discontiguous Area 1 is just a matter of taste... some people find it illogical to use the configuration in your diagram; these people might suggest that you keep OSPF area numbers together... so you'd have to change [area 1, subnet 3] on Router #3 to [area 3, subnet 3].  Other people see no problem with reusing Area 1, since OSPF area numbers are only locally significant to the router originating OSPF hellos.</p>

<p>Either way, we should admit that OSPF is a remarkably flexible protocol; regardless of choosing one side or another in this debate. </p>
","2902"
"Juniper SRX100 / Junos - Static Routers between virtual Routers","3246","","<p>i am replacing a Juniper SSG5 with Screenos against a SRX100 with Junos (12.1X44-D35.5).</p>

<p>I am replacing a virtual router configuration that Looks like this:</p>

<pre><code>                                     +--------------------+
    192.168.0.1/24 --------(fe-0/0/2)| trust-vr           |
(Trust zone network)                 | routing-instance   | 
                                     +--------------------+
                                               |
                                               |
                                               |
                                               |
                                     +---------------------+
   pppoe dynamic ip--------(fe-0/0/0)| untrust-vr          |
(Untrust zone network)               | routing-instance    |
                                     +---------------------+ 
</code></pre>

<p>I found a Juniper KB that explains exactly this at <a href=""http://kb.juniper.net/InfoCenter/index?page=content&amp;id=KB22053"" rel=""nofollow"">http://kb.juniper.net/InfoCenter/index?page=content&amp;id=KB22053</a></p>

<p>In ScreenOS it is possible to Point static routes inside a VR to another VR (In this example: Inside trust-vr - Target 0.0.0.0/0 - next hop - untrust vr)</p>

<p>According to the Juniper KB with Junos they configure a Frame realy (virtual Interface) on both Virtual Routers. </p>

<p>This Approach has 2 downsides in my opinion: </p>

<p>I Need to configure IP Adresses for the Virtual Routers (okay i could live with that) but more important: The configuration is three times larger (more lines) than with ScreenOS and thus also more complex to troubleshoot.</p>

<p>Is there no ""easy way"" to just set a Virtual Router as a next-hop in JunOS as it was possible in ScreenOS?</p>
","<p>In Junos you can add a route to point at your next routing table. EG If you wanted to route 0.0.0.0/0 to your routing instance called untrust you would use this syntax</p>

<pre><code>set routing-options 0.0.0.0/0 next-table untrust.inet.0
</code></pre>

<p>The untrust routing instance is configured using</p>

<pre><code>set routing-instances untrust instance-type virtual-router
set routing-instances untrust interface x.0
set routing-instances routing-options static route 0.0.0.0/0 next-hop x.x.x.x
</code></pre>

<p>Then if you did a show route 1.1.1.1 you should see something like this</p>

<pre><code>&gt;show route 1.1.1.1

inet.0: 1 destinations, 1 routes (1 active, 0 holddown, 0 hidden)
+ = Active Route, - = Last Active, * = Both

0.0.0.0/0           *[Static/5] 1d 22:15:55
                      to table untrust.inet.0

untrust.inet.0: 1 destinations, 1 routes (1 active, 0 holddown, 0 hidden)
+ = Active Route, - = Last Active, * = Both

0.0.0.0/0           *[Static/5] 1d 22:14:42
                    &gt; to x.x.x.x via ge-0/0/0.0
</code></pre>
","11084"
"AODV sequence numbers and loop prevention","3245","","<p>I am learning about the AODV (ad-hoc on-demand distance vector) protocol.  I saw a ""sequence number"" with a value like ""A 46""; however, I don't understand why incrementing this sequence number can prevent loops.  Why does this help?</p>
","<p>Mike's suggestion to read <a href=""http://tools.ietf.org/html/rfc3561"" rel=""nofollow"">RFC 3561 - Ad hoc On-Demand Distance Vector (AODV) Routing</a> should do the trick; in the meantime, I will go ahead and summarize it for you.</p>

<p>Wireless (routing) protocols, such as AODV protocols, use sequence numbers in a different way than wireline protocols do.  AODV maintains a table of destination IP addresses, along with the last sequence number.  This way, if it receives the same routing sequence number in an update, it detects the duplicate and drops the update; thus, avoiding a potential loop. Additionally, AODV does not forward/process update packets that it has seen before.  The sending node (based on whatever message they send Route request, Route Reply), maintains their own sequence numbers and increments it before sending a new packet out.</p>

<p>AODV is hardly alone in depending upon sequence numbers to avoid loops; <a href=""http://www.ietf.org/rfc/rfc4728.txt"" rel=""nofollow"">RFC 4728 - Dynamic Source Routing (DSR)</a> also depends on sequence numbers. Yet another wireless (multicast) routing protocol that uses sequence number to avoid looping is <a href=""http://www.monarch.cs.rice.edu/internet-drafts/draft-jetcheva-manet-admr-00.txt"" rel=""nofollow"">IETF Draft - The Adaptive Demand-Driven Multicast Routing Protocol for Mobile Ad Hoc Networks (ADMR)</a>.</p>

<p>We should note that layer-2 in wireless networks (typically) do not use Spanning Tree Protocol (STP) for loop prevention.</p>
","3228"
"Cisco packet tracer no shut or no shutdown","3227","","<p>I just want to whether their is any difference between the command no shut or no shutdown.</p>
","<p>There is no difference between those two commands in Cisco IOS. <code>no shut</code> is just a shortened form of <code>no shutdown</code>. If you were to type <code>no shut</code> at the CLI and press the TAB key you will see that it will complete the command as <code>no shutdown</code>.</p>
","9504"
"How does an Access Point handle broadcast packets from the wired side?","3213","","<p>I have an Cisco AP 1242AG autonomous AP connected to L2 switches.</p>

<p>Let's say I have 100 wired devices each sending 2 broadcast UDP packets per second.</p>

<p>Obviously these packets will reach the Access Point switch port, but will the AP actually send these packets (200 pps) into the air?</p>

<p>Thanks</p>
","<p>(non-cisco specific answer)</p>

<p>Yes, unless you disable it.</p>

<p>The broadcast frames will be sent at the multicast base rate, which is typically low (1 Mbps most of the time), and only every DTIM * beacom interval if there are powersaving stations. And the packet loss rate for those will be quite high.</p>

<p>However, if there are no clients associated to the AP, then the AP will typically be smart and not send them.</p>

<p>200 broadcast packets per second, assuming a 8192 bit packet size and a 1 mbps multicast rate, will just Not Work, since the multicast traffic will be more than 1 mbps, and the AP will typically allocate much less capacity and buffers for broadcast, so the limit is actually much less than 1 mbps.</p>

<hr>

<p>Anyway, broadcast is so 1990, if you can use multicast instead, and enable MLD/IGMP snooping on the AP, then the AP may be smarter and only deliver the multicast frames if clients actually subscribe to the multicast address. And depending on the client capabilities and the AP configuration, the multicast frames may even be sent as unicast, at higher data rates and with less packet loss.</p>

<p>IPv6 has no broadcast anyway.</p>
","7222"
"What is a reasonable latency for a L2 1G leased line between 2 sites, about 420km apart?","3207","","<p>We need a dual gigabit connection to one of our customers and for the time being one of the lines has been brought online. The connection is between our DC and the customer's HQ, it's a L2 connection. The cities are roughly 420km apart. </p>

<p>The initial tests showed a RTT of 26ms. Since this seemed a bit high so we complained to the carrier (T-Systems in Germany). They did some tests and ""optimizations"" and suddenly the RTT went down to 15ms. </p>

<p>I know they can't break the speed of light, I also know that the speed of light in fiber is quite a bit lower than in a vacuum but still, 15 ms seems a bit high for 420km. I also assume there must be several hops along the way but nevertheless, is this what we can reasonably expect ? Should we insist that they do some more ""optimizations"" ?</p>
","<p>Each piece of equipment you run through will add latency through it. If you leased dark fiber between the two locations you should see something just under 3ms one way. Just under 6ms RTT.</p>

<p>How much latency a device will add can vary wildly depending on how efficient it is at processing the packet, how efficient it is at converting to/from light, if any buffering must be done due to over subscription, etc.</p>

<p>I don't know how your service is delivered but more than likely you're looking at something like this:
<br>
CE -> CPE -> PE -> P -> P -> PE -> CPE ->CE</p>

<ul>
<li>CE = Client Edge</li>
<li>CPE = Customer Premesis Device</li>
<li>PE = Provider Edge</li>
<li>P = Provider Router (Similar to a Core device)</li>
</ul>

<p>If each device adds 1ms of latency you've gone from 6ms RTT on dark fiber to 22ms. Each device will probably handle the packet for &lt;1ms but you can see how this adds up.</p>

<p>More than likely the ""optimizations"" your SP did was to use MPLS-TE to use a more efficient route. I can't confirm this but there's no special voodoo you can throw at a box to make it all of a sudden decrease latency...at least none that I've found yet...still looking.</p>

<p>To sum up, I don't think 15ms is too outrageous. If you need better numbers from a latency perspective then you might want to consider other options.</p>

<p><strong>Note:</strong> These times do not include any optical devices these lines might (more than likely) be going through. Things like multiplexers and amplifiers will add small amounts of latency as well. Over long distances the likelihood of going through a multiplexer increases greatly.</p>
","1226"
"CEF operations on L3 switch vs router","3206","","<p>I understand that L3 switches use CEF for faster packet forwarding. However, CEF will not work for packets that need to undergo NAT. Does this mean CEF isn't used by edge routers and edge L3 switches? Is CEF's usefulness limited to the LAN?</p>
","<p>NAT can of course use CEF. This is from Cisco's own guide over here: <a href=""http://www.cisco.com/en/US/tech/tk648/tk361/technologies_q_and_a_item09186a00800e523b.shtml"">http://www.cisco.com/en/US/tech/tk648/tk361/technologies_q_and_a_item09186a00800e523b.shtml</a></p>

<pre><code>Q. What kind of routing performance can be expected when using Cisco IOS NAT?

    A. Cisco IOS NAT supports Cisco Express Forwarding switching, fast switching, and process switching. For 12.4T release and later, fast-switching path is no longer supported. For Cat6k platform, the switching order is Netflow (HW switching path), CEF, process path.

    Performance depends on several factors:

        The type of application and its type of traffic

        Whether IP addresses are embedded

        Exchange and inspection of multiple messages

        Source port required

        The number of translations

        Other applications running at the time

        The type of hardware and processor
</code></pre>

<p>Bigger platforms running IOS-XR, where the FIB gets ditributed to the line cards, also support carrier grade NAT, so it's usefulness is not limited to the LAN alone.</p>

<p>Also a lot of Cisco's L3 switches simply do not do NAT at all</p>
","1530"
"How to signal a VPLS multihoming change to a L2 CE device","3197","","<p>We have the following setup:</p>

<p><img src=""https://i.stack.imgur.com/5T60X.png"" alt=""enter image description here""></p>

<p>Two MX routers connect to the same L2 site. Loop protection / redundancy is done via <a href=""http://www.juniper.net/techpubs/en_US/junos11.4/topics/concept/vpn-vpls-multihoming.html"" rel=""nofollow noreferrer"">VPLS multihoming</a>. On the other end are two switches (EX4200 for example).</p>

<p>When the blue link fails the two switches and the rest of the L2 infrastructure have to know that traffic must now go through the yellow link (and consequently trough the EX switch on the right).</p>

<p>The problem is, the yellow mac-table only gets filled when there is traffic arriving from the VPLS through the yellow link. If no traffic is received from a certain MAC address, traffic for that address will still be sent over the blue link and noone knows that that link is now broken (except perhaps the EX switch on the left <strong>if</strong> the link fails physically).</p>

<p>I can't find a good solution to fix this problem.</p>

<p>A few approaches:</p>

<ol>
<li><p>You can somewhat lessen the impact by <strong>not</strong> making the blue/yellow link portfast so that spanning-tree can send a topology change when the interface goes down/up. When the interface does not go down physically you're out of luck. On the other hand the spanning-tree solution will bite you when the port comes up again. VPLS will take the site online but the port needs to go trough the STP learning stages before it forwards traffic.</p></li>
<li><p>You could stack the two switches. This will fix the problem for the rest of the L2 infrastructure as they always send to the same switch (stack). Still the stack needs to know when to switch to the other uplink interface with the active VPLS instance.</p></li>
<li><p>When doing planned maintenance (and if you have a stack), you can deactivate the primary link manually to switch over to the secondary link. Then you can lower the site-preference for the deactivated link on the router so that the now active site becomes the new primary. Same thing when switching back. Not ideal and does not work for unforeseen outages. </p></li>
</ol>

<p>Any input on how to solve this is appreciated. (Waiting for EVPN/TRILL does not count. ;))</p>
","<ol>
<li>Disable Portfast on the PE facing ports (On CE)</li>
<li>Enable RSTP across the CE network</li>
<li>Favor ""Blue link"" w/ interface cost</li>
</ol>

<p>Working this out in my head I believe it should react as follows:</p>

<p>When blue link dies the CE will stop sending/receiving BPDUs from the blue interface. Default RSTP hello timer is 2 seconds. It waits for three missed hellos before calling that link ""dead"". Once three hellos (6 seconds) have been missed it will then re-establish the STP tree and age the MAC addresses.</p>

<p>This is basically option 1 you've stated above except the way I've read the comments and your original post it sounds like you want the PE to participate in STP. I'm suggesting allowing the customer to build its own tree between all CEs.</p>

<p>Your network should fail over smoothly, and the client network would follow suit a few seconds later.</p>

<p>This feels too simple to be the answer...but that's what I can see based on your write up.</p>
","996"
"2960s and outdiscards","3197","","<p>I have an issue with a pair of 2960s switches. I can see a lot of outdiscards on some of the interfaces and the end users are noticing network issues. I also have some access points that can't download the configuration from the controller because of this.</p>

<p>The interfaces are trunks which are connected to other switches in the other end via multimode fiber 100Mbit. They are configured like this:</p>

<pre><code>interface GigabitEthernet2/0/7
 switchport mode trunk
 speed 100
 duplex full
</code></pre>

<p>The command show interfaces counters errors:</p>

<pre><code>Port        Align-Err     FCS-Err    Xmit-Err     Rcv-Err  UnderSize  OutDiscards 
Gi2/0/17            0         899           0         903          0     42443970
</code></pre>

<p>I have searched around via different forums and noticed that some says that this issue is because of the incoming traffic is higher than 100Mbit and forces the switch to discards some packets because it can't send them out on the slow interface. Incoming interface is with Gigabit speed.</p>

<p>Is it possible to increase the buffer on the switch for the outgoing traffic or is the only solution to install gigabit traffic on these as well?</p>

<p>Is it the 2960s that is slow or is it not possible to have different speeds in a LAN environment?</p>
","<p>What is probably happening is that your access bandwidth is too big for your uplink bandwidth. The only real solution is to increase the uplink bandwidth. For instance, with 48 100 Mb access ports and only a 100 Mb uplink, one host could monopolize the uplink, forcing the situation you describe.</p>

<p>Cisco has a recommendation for access to distribution bandwidth of 20:1. That is for every 20 access ports of 100 Mb, you need 100 Mb in the uplink. This is for normal everyday use, but if you are streaming something at 1 Gb, you may need something less than 20:1.</p>
","25039"
"Changing the Stacking Configuration on four Dell M6220 blade switches","3196","","<p>My main production environment is in a Dell M1000e blade chassis with M6220 switches in Fabrics B and C.  Fabric B is dedicated to vMotion traffic, and Fabric C is dedicated to iSCSi traffic and connected directly to our SAN.  None of the switches in either Fabric are connected to the rest of the network, so I am unable to monitor them, and I can only manage the configs through the Dell Chassis Management Controller.</p>

<p>When our consultants set this up two years ago, they configured stacking as follows:
C1=C2
B1=B2</p>

<p>I'd like to change the stacking configuration so it is looped in the following way:
B1=C1=C2=B2</p>

<p>If I make this change and merge the two stacks, will it change the configs on the switches?  </p>
","<p>This can be done, see the page 15 of the Dell white paper on the subject here:
<a href=""http://www.dell.com/downloads/global/products/pwcnt/en/pwcnt_stacking_switches.pdf"" rel=""nofollow"">http://www.dell.com/downloads/global/products/pwcnt/en/pwcnt_stacking_switches.pdf</a></p>

<p>Specifically it says:</p>

<blockquote>
  <p>Merging Two Operational Stacks</p>
  
  <p>The recommended procedure for merging two operational stacks is as
  follows:</p>
  
  <ol>
  <li>Always power off all units in one stack before connecting to another stack.</li>
  <li>Add the units as a group by unplugging one stacking cable in the operational stack and physically connecting all unpowered units.</li>
  <li>Completely cable the stacking connections, making sure the redundant link is also in place.</li>
  </ol>
  
  <p>Two operational stacks can also be merged by reconnecting stack cables
  without powering down units in either stack. Connecting a powered up
  standalone unit to an existing stack leads to same behavior as when
  merging two operational stacks. In such cases, Manager reelection is
  done and the Manager with the higher MAC address wins the election.
  The losing stack manager resets itself and all its member units. After
  the reset, all the losing stack members join the winning stack to form
  a single stack. The winning stack remains functional through the merge
  process. If the stack merge is performed in this way, then it is
  strongly recommended that the user set the admin management preference
  of the desired winner stack manager to a higher value than the stack
  manager that should lose the election.</p>
</blockquote>

<p>Also, in your above proposed cabling you are not completing a loop with your stacking cables. You should always aim to do this, even though it is not a requirement. See page 7 of the Dell m6220 stacking use case:
<a href=""http://i.dell.com/sites/content/business/solutions/whitepapers/zh/Documents/powerconnect-m6220-switch_cn.pdf"" rel=""nofollow"">http://i.dell.com/sites/content/business/solutions/whitepapers/zh/Documents/powerconnect-m6220-switch_cn.pdf</a></p>

<blockquote>
  <p>Cabling: </p>
  
  <p>M6220 switches should be stacked together by connecting a
  stacking cable from stack port xg2 of one switch to stack port xg1 of
  the next sw itch. The stacking cable is included with the stacking
  module. Stack port xg2 of the fi nal switch in the stack should be
  connected to stack port xg1 of the first switch, completing the stack
  loop. A loop topology is not strictly required for a stack but it is
  recommended, as it is the most robust stacking topology and has seen
  the most time in production use.</p>
</blockquote>
","368"
"Can regular wifi adapters communicate with WiMax access points?","3194","","<p>I'm trying to set up a WiMAX and would like to know if I can use wifi usb's on the devices I plan to test with. If not what WiMax options are available that work via USB. </p>

<p>Also, I do not plan to have connection to the internet. You can consider this a closed network of sorts.</p>
","<p>802.11 wireless (WiFi) works in different frequency ranges than 802.16 (WiMax).  Generally speaking the radios in the hardware will be limited to the frequencies in use by their technology, so you can't mix the two.</p>

<p>Since WiMax can operate in a number of different frequency ranges, the hardware designed to operate in one frequency range may not be able to work with equipment designed for another frequency.  Some will be able to operate in all of them, so you will need to research your hardware.</p>

<p>One of the major differences, is that WiFi operates entirely within unlicensed areas of the RF spectrum.  Many WiMax solutions (Clear/Sprint for example) operate in licensed RF spectrum.  If the equipment is designed to operate in one of these licensed frequencies, you can only operate the equipment if you have a license to do so or are authorized to do so by a license holder as part of their service (i.e. you are paying them for service).</p>

<p>So even with the closed network, make sure you are not operating in any licensed spectrum to avoid potential legal issues and fines.</p>
","6666"
"Configure spanning-tree on Cisco router","3194","","<p>I have seen spanning tree being configured on switches to prevent switching loops.</p>

<p>I recently noticed that <code>show spanning tree</code> command works on a Cisco 1841 router as well.</p>

<p>For what reasons would we want to configure spanning-tree on router. Any examples?</p>
","<p><strong>On a general note</strong>: not everything that is present in parser, will actually work on given platform, or even makes sense.</p>

<p>In that particular case, you can enable spanning tree if you have either IRB (integrated routing &amp; bridging) configured on ethernet ports, or you insert the integrated switching module (WIC-4ESW) into the router. Then, those ports are L2 by default and actually it makes sense to run STP on them to avoid loops.</p>
","7368"
"Meaning of the ip default-gateway L2 switch","3173","","<p>What is meaning of the <code>ip default-gateway</code> command on a Cisco L2 switch? I read something about it on the Internet, but there was written that it allows you to Telnet to the switch. I am little bit confused. When I want to Telnet to the switch, I set the IP address of the VLAN 1 interface, and it works. </p>
","<p><strong>tl;dr</strong> </p>

<p>The switch management cannot send anything to a different layer-3 network without a default gateway. Telnet is a bidirectional protocol, and the switch, without the default gateway, would be unable to respond to the host which is attempting to establish the Telnet session.</p>

<p><strong>Long explanation:</strong></p>

<p>The default gateway on a switch has the same function as any gateway configured on a host PC. Without a default gateway, the switch management address (on VLAN 1 in your case, but it could be on any VLAN configured on the switch) cannot send traffic off its network to another network.</p>

<p>When a host (including the switch management), wants to send a packet to another host, it needs to resolve the layer-3 address (IP, etc.) to the other host's layer-2 address (MAC, etc.) in order to build a layer-2 frame.</p>

<p>The host (including the switch management) sends an ARP (Address Resolution Protocol) request via a broadcast to do the resolution. Broadcasts do not cross layer-3 boundaries (routers). The host (including the switch management) can tell if the destination layer-3 address is outside its network because it has its own layer-3 address, the destination layer-3 address, and the network mask of its network. If the destination is on a different layer-3 network, the host (including the switch management) will send the frame to the gateway's layer-2 address.</p>

<p>IPv6 does basically the same thing, but IPv6 doesn't have broadcasts, so it uses a special multicast group based on the last 24 bits of the IPv6 address. This doesn't interrupt every host on the LAN, and it, in all probability, with only hit the host for which it wants to resolve the layer-2 address. Multicast doesn't cross layer-3 boundaries, either, unless a router is configured to route multicast (off by default).</p>
","25828"
"Limit the bandwidth for microsoft windows updates with pfsense","3170","","<p>In our infrastructure we have no WSUS installed so when microsoft pushes new updates all our computers start excessive downloads, we use pfsense and as I am new to it, I need an advise how can I limit the download bandwidth from the certain hosts having only hostnames of the update servers from here
<a href=""https://technet.microsoft.com/en-us/library/cc708605(v=ws.10).aspx"" rel=""nofollow"">https://technet.microsoft.com/en-us/library/cc708605(v=ws.10).aspx</a></p>
","<p>If the rest of your pfSense setup plays well with it, setting up your pfSense  so that squid can cache the updates really speeds things up, while limiting the WAN traffic. This may require more resources than many people seem to allocate to a pfSense install, and it spent quite a while being broken from 2.15 or so forward (I don't know if it's actually fixed for sure in the current release, it partly depends on what other things you are doing with pfSense, IIRC.)</p>

<p>Alternatively, set up a separate squid box, tuned to handle the rather portly things that are system updates, as opposed to the typical default tuning for smaller things that leaves updates out of the cache. </p>

<p>On the third hand, setting up a local WSUS might be the most sensible approach for your location, if it's ONLY windows updates that are the issue. Otherwise all those hosts <strong>are</strong> going to move all that traffic eventually, while having that set up will limit your WAN traffic to pulling down one copy.</p>
","35177"
"Juniper SRX240 and EX2200 network","3165","","<p>I'm not a network engineer, so this must be a noob question.</p>

<p><img src=""https://i.stack.imgur.com/XZEdS.jpg"" alt=""Network setup""></p>

<p>My task is simple, I need all clients to have internet access. Both EX2200 were configured before as layer 2 switches, so i assume their configuration is fine.</p>

<p>On SRX240 i was able to setup internet access. If i connect my laptop to it, the internet works fine. But connection to EX2200 doesn't work. I tried different guides from the internet, but nothing seems to work.</p>

<p>How should i configure SRX240, so all EX2200 clients have internet access. Ideally, i would love all clients to get ip from SRX240 DHCP and be in the same subnet.</p>

<p>Current config.</p>

<p>SRX240</p>

<pre><code>version 11.2R4.3;
system {
    name-server {
        208.67.222.222;
        208.67.220.220;
    }
    services {
        ssh;
        telnet;
        xnm-clear-text;
        web-management {
            http {
                interface vlan.0;
            }
            https {
                system-generated-certificate;
                interface vlan.0;
            }
        }
        dhcp {
            router {
                192.168.1.1;
            }
            pool 192.168.1.0/24 {
                address-range low 192.168.1.2 high 192.168.1.254;
            }
            propagate-settings ge-0/0/0.0;
        }
    }
    syslog {
        archive size 100k files 3;
        user * {
            any emergency;
        }
        file messages {
            any critical;
            authorization info;
        }
        file interactive-commands {
            interactive-commands error;
        }
    }
    max-configurations-on-flash 5;
    max-configuration-rollbacks 5;
    license {
        autoupdate {
            url https://ae1.juniper.net/junos/key_retrieval;
        }
    }
}
interfaces {
    ge-0/0/0 {
        unit 0 {
            family inet {
                dhcp;
            }
        }
    }
    ge-0/0/1 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members vlan-trust;
                }
            }
        }
    }
    ge-0/0/2 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members vlan-trust;
                }
            }
        }
    }
    ge-0/0/3 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members vlan-trust;
                }
            }
        }
    }
    ge-0/0/4 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members vlan-trust;
                }
            }
        }
    }
    ge-0/0/5 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members vlan-trust;
                }
            }
        }
    }
    ge-0/0/6 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members vlan-trust;
                }
            }
        }
    }
    ge-0/0/7 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members vlan-trust;
                }
            }
        }
    }
    ge-0/0/8 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members vlan-trust;
                }
            }
        }
    }
    ge-0/0/9 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members vlan-trust;
                }
            }
        }
    }
    ge-0/0/10 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members vlan-trust;
                }
            }
        }
    }
    ge-0/0/11 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members vlan-trust;
                }
            }
        }
    }
    ge-0/0/12 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members vlan-trust;
                }
            }
        }
    }
    ge-0/0/13 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members vlan-trust;
                }
            }
        }
    }
    ge-0/0/14 {
        unit 0 {
            family ethernet-switching {
                port-mode trunk;
                vlan {
                    members vlan-trust;
                }
            }
        }
    }
    ge-0/0/15 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members vlan-trust;
                }
            }
        }
    }
    vlan {
        unit 0 {
            family inet {
                address 192.168.1.1/24;
            }
        }
    }
}
routing-options {
    static {
        route 0.0.0.0/0 next-hop 10.129.152.129;
    }
}
protocols {
    stp;
}
security {
    screen {
        ids-option untrust-screen {
            icmp {
                ping-death;
            }
            ip {
                source-route-option;
                tear-drop;
            }
            tcp {
                syn-flood {
                    alarm-threshold 1024;
                    attack-threshold 200;
                    source-threshold 1024;
                    destination-threshold 2048;
                    timeout 20;
                }
                land;
            }
        }
    }
    nat {
        source {
            rule-set trust-to-untrust {
                from zone trust;
                to zone untrust;
                rule source-nat-rule {
                    match {
                        source-address 0.0.0.0/0;
                    }
                    then {
                        source-nat {
                            interface;
                        }
                    }
                }
            }
        }
    }
    policies {
        from-zone trust to-zone untrust {
            policy trust-to-untrust {
                match {
                    source-address any;
                    destination-address any;
                    application any;
                }
                then {
                    permit;
                }
            }
        }
    }
    zones {
        security-zone trust {
            host-inbound-traffic {
                system-services {
                    all;
                }
                protocols {
                    all;
                }
            }
            interfaces {
                vlan.0;
            }
        }
        security-zone untrust {
            screen untrust-screen;
            interfaces {
                ge-0/0/0.0 {
                    host-inbound-traffic {
                        system-services {
                            dhcp;
                            tftp;
                        }
                    }
                }
            }
        }
    }
}
vlans {
    vlan-trust {
        vlan-id 3;
        l3-interface vlan.0;
    }
}
</code></pre>

<p>EX2200 - 24</p>

<pre><code>version 11.4R7.5;
system {
    ports {
        console {
            log-out-on-disconnect;
            type vt100;
        }
    }
    login {
        user admin {
            uid 2000;
            class super-user;
        }
    }
    services {
        ssh {
            root-login allow;
        }
        telnet;
    }
    syslog {
        user * {
            any emergency;
        }
        file messages {
            any notice;
            authorization info;
        }
        file interactive-commands {
            interactive-commands any;
        }
    }
}
chassis {
    alarm {
        management-ethernet {
            link-down ignore;
        }
    }
}
interfaces {
    ge-0/0/0 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members public-eth;
                }
            }
        }
    }
    ge-0/0/1 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members public-eth;
                }
            }
        }
    }
    ge-0/0/2 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members public-eth;
                }
            }
        }
    }
    ge-0/0/3 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members public-eth;
                }
            }
        }
    }
    ge-0/0/4 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members public-eth;
                }
            }
        }
    }
    ge-0/0/5 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members public-eth;
                }
            }
        }
    }
    ge-0/0/6 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members public-eth;
                }
            }
        }
    }
    ge-0/0/7 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members public-eth;
                }
            }
        }
    }
    ge-0/0/8 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members public-eth;
                }
            }
        }
    }
    ge-0/0/9 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members public-eth;
                }
            }
        }
    }
    ge-0/0/10 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members public-eth;
                }
            }
        }
    }
    ge-0/0/11 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members public-eth;
                }
            }
        }
    }
    ge-0/0/12 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members public-eth;
                }
            }
        }
    }
    ge-0/0/13 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members public-eth;
                }
            }
        }
    }
    ge-0/0/14 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members public-eth;
                }
            }
        }
    }
    ge-0/0/15 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members public-eth;
                }
            }
        }
    }
    ge-0/0/16 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members public-eth;
                }
            }
        }
    }
    ge-0/0/17 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members public-eth;
                }
            }
        }
    }
    ge-0/0/18 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members public-eth;
                }
            }
        }
    }
    ge-0/0/19 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members public-eth;
                }
            }
        }
    }
    ge-0/0/20 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members public-eth;
                }
            }
        }
    }
    ge-0/0/21 {
        unit 0 {
            family ethernet-switching {
                vlan {
                    members public-eth;
                }
            }
        }
    }
    ge-0/0/22 {
        unit 0 {
            family ethernet-switching {
                port-mode trunk;
                vlan {
                    members all;
                }
            }
        }
    }
    ge-0/0/23 {
        unit 0 {
            family ethernet-switching {
                port-mode trunk;
                vlan {
                    members all;
                }
            }
        }
    }
    ge-0/1/0 {
        unit 0 {
            family ethernet-switching;
        }
    }
    ge-0/1/1 {
        unit 0 {
            family ethernet-switching;
        }
    }
    ge-0/1/2 {
        unit 0 {
            family ethernet-switching;
        }
    }
    ge-0/1/3 {
        unit 0 {
            family ethernet-switching;
        }
    }
    vlan {
        unit 10 {
            family inet {
                address 192.168.1.2/24;
            }
        }
        unit 100 {
            family inet {
                address 10.129.152.135/25;
            }
        }
    }
}
snmp {
    community school-ro {
        authorization read-only;
        clients {
            10.143.255.0/24;
        }
    }
    trap-group ESMA {
        targets {
            10.143.255.2;
            10.143.255.6;
            10.143.255.10;
            10.143.255.14;
            10.143.255.42;
        }
    }
}
routing-options {
    static {
        route 0.0.0.0/0 next-hop 10.129.152.129;
    }
}
protocols {
    igmp-snooping {
        vlan all;
    }
    rstp;
    lldp {
        interface all;
    }
    lldp-med {
        interface all;
    }
}
ethernet-switching-options {
    storm-control {
        interface all;
    }
}
vlans {
    management {
        vlan-id 10;
        l3-interface vlan.10;
    }
    private-eth {
        vlan-id 20;
    }
    public-eth {
        vlan-id 30;
    }
    wan {
        vlan-id 100;
        l3-interface vlan.100;
    }
}
</code></pre>
","<p>To answer this question, I'll go through your configuration piece by piece.</p>

<p>Your SRX240 configuration is essentially correct and should work, with one small issue, that is your WAN/Internet interface (ge-0/0/0) appears to be using DHCP:</p>

<p>SRX:</p>

<pre><code>interfaces {
    ge-0/0/0 {
        unit 0 {
            family inet {
                dhcp;
            }
        }
    }
[...]
</code></pre>

<p>While you've got a default gateway defined:</p>

<p>SRX:</p>

<pre><code>routing-options {
    static {
        route 0.0.0.0/0 next-hop 10.129.152.129;
    }
}
</code></pre>

<p>Likely, your default gateway is provided by DHCP, so you probably don't need/want to define it statically. If 10.129.152.129 is not in your dhcp address/netmask though, JunOS is probably ignoring it, and since you also said that you were able to successfully get Internet connectivity when directly plugged into the SRX, this is probably not causing a problem. To get rid of this for cleanliness, issue the following commands on the SRX240:</p>

<p>SRX:</p>

<pre><code>configure
delete routing-options static
commit
</code></pre>

<p>On to the switches. You didn't tell us which port on the SRX240 is connected to which port on the EX2200, so this is hard to answer, but based on the configuration provided I can deduce that your WAN/Internet link is ge-0/0/0 on the SRX240, and that at least one switch is plugged into one of the other interfaces on the SRX (ge-0/0/1 through 15.)</p>

<p>With the configuration you provided (for only the EX2200-24, and not the EX2200-48), your topology should work as long as port ge-0/0/0 through 21 are connected to the SRX. If, however the SRX is plugged into ports 22 or 23 on the the EX, you have a problem, because those ports are in trunk mode and the SRX isn't configured for or expecting VLAN-tagged ethernet frames.</p>

<p>EX:</p>

<pre><code>interfaces {
[...]
    ge-0/0/22 {
        unit 0 {
            family ethernet-switching {
                port-mode trunk;
                vlan {
                    members all;
                }
            }
        }
    }
    ge-0/0/23 {
        unit 0 {
            family ethernet-switching {
                port-mode trunk;
                vlan {
                    members all;
                }
            }
        }
    }
[...]
</code></pre>

<p>Also, if all you really wanted was a flat L2 topology, you have some configuration left over from someone that didn't:</p>

<p>EX:</p>

<pre><code>ge-0/0/XX {
    unit 0 {
        family ethernet-switching {
            vlan {
                members public-eth;
            }
        }
    }
}
</code></pre>

<p>and</p>

<p>EX:</p>

<pre><code>vlans {
    management {
        vlan-id 10;
        l3-interface vlan.10;
    }
    private-eth {
        vlan-id 20;
    }
    public-eth {
        vlan-id 30;
    }
    wan {
        vlan-id 100;
        l3-interface vlan.100;
    }
}
</code></pre>

<p>and</p>

<p>EX:</p>

<pre><code>interfaces {
[...]
    vlan {
        unit 10 {
            family inet {
                address 192.168.1.2/24;
            }
        }
        unit 100 {
            family inet {
                address 10.129.152.135/25;
            }
        }
    }
</code></pre>

<p>You can see several IP addresses, vlans and such configured. To get back to the most basic of L2 functionality, we should remove some of that old unnecessary configuration (as long as you're sure that this is <em>your</em> network and you're not a rogue going against the wishes of your network admin.)</p>

<p>EX:</p>

<pre><code>configure
delete interfaces ge-0/0/0
delete interfaces ge-0/0/1
delete interfaces ge-0/0/2
delete interfaces ge-0/0/3
delete interfaces ge-0/0/4
delete interfaces ge-0/0/5
delete interfaces ge-0/0/6
delete interfaces ge-0/0/7
delete interfaces ge-0/0/8
delete interfaces ge-0/0/9
delete interfaces ge-0/0/10
delete interfaces ge-0/0/11
delete interfaces ge-0/0/12
delete interfaces ge-0/0/13
delete interfaces ge-0/0/14
delete interfaces ge-0/0/15
delete interfaces ge-0/0/16
delete interfaces ge-0/0/17
delete interfaces ge-0/0/18
delete interfaces ge-0/0/19
delete interfaces ge-0/0/20
delete interfaces ge-0/0/21
delete interfaces ge-0/0/22
delete interfaces ge-0/0/23
set interfaces ge-0/0/0.0 family ethernet-switching
set interfaces ge-0/0/1.0 family ethernet-switching
set interfaces ge-0/0/2.0 family ethernet-switching
set interfaces ge-0/0/3.0 family ethernet-switching
set interfaces ge-0/0/4.0 family ethernet-switching
set interfaces ge-0/0/5.0 family ethernet-switching
set interfaces ge-0/0/6.0 family ethernet-switching
set interfaces ge-0/0/7.0 family ethernet-switching
set interfaces ge-0/0/8.0 family ethernet-switching
set interfaces ge-0/0/9.0 family ethernet-switching
set interfaces ge-0/0/10.0 family ethernet-switching
set interfaces ge-0/0/11.0 family ethernet-switching
set interfaces ge-0/0/12.0 family ethernet-switching
set interfaces ge-0/0/13.0 family ethernet-switching
set interfaces ge-0/0/14.0 family ethernet-switching
set interfaces ge-0/0/15.0 family ethernet-switching
set interfaces ge-0/0/16.0 family ethernet-switching
set interfaces ge-0/0/17.0 family ethernet-switching
set interfaces ge-0/0/18.0 family ethernet-switching
set interfaces ge-0/0/19.0 family ethernet-switching
set interfaces ge-0/0/20.0 family ethernet-switching
set interfaces ge-0/0/21.0 family ethernet-switching
set interfaces ge-0/0/22.0 family ethernet-switching
set interfaces ge-0/0/23.0 family ethernet-switching
delete interfaces vlan.100
delete vlans
delete snmp
rename interfaces vlan.10 to unit 0
set vlans default l3-interface vlan.0
set vlans default vlan-id 1
delete routing-options
set routing-options static route 0.0.0.0/0 next-hop 192.168.1.1

commit
</code></pre>

<p>The above commands do the following:</p>

<ol>
<li>Clear the current configuration of each of the interfaces on the switch</li>
<li>Create new blank/default configuration for each of the same interfaces</li>
<li>Get rid of the probably unused IP address on vlan 100</li>
<li>Remove SNMP configuration (which is not relevant to your stated goal)</li>
<li>Consolidate everything to the default VLAN (all of the interfaces are automatically members of ""default"" if another VLAN isn't specified.)</li>
<li>Change the Management VLAN to the default VLAN, as it normally would be on a factory-fresh JunOS install</li>
<li>Set the default gateway to be the Firewall, which is not strictly necessary in this topology since the EX is just acting as a layer 2 switch in this case, but at least you'll be able to ping hosts on the internet from the switch if everything is working.</li>
</ol>

<p>You'll probably want to do something similar for the EX2200-48 that you didn't give the configuration for, but hopefully you can look at the commands above and perform a similar procedure. If you flatten the topology as I've described, all of your clients will get their IP addresses from the SRX240 and will get internet access.</p>
","17716"
"Cisco Switch Can't Ping Attached Device","3164","","<pre><code>PC1-VLAN1======Switch : Successful pings from the switch
PC1-VLAN2======Switch : *Unsuccessful* pings from the switch
</code></pre>

<p>I've got a single switch with a static IP directly connected to PC1 with a static IP, both on the same 192.168.1.0/24 network. The switch has no VLAN's on it except the default VLAN1.</p>

<p>With this setup, the switch can successfully ping PC1.</p>

<p>If I Create a VLAN2 and assign PC1's port to VLAN2, the switch can no longer ping PC1. I would understand if another PC on a different VLAN couldn't ping PC1, but I would think that the switch could ping either.</p>

<p>What am I missing?</p>

<p>Thanks!</p>
","<p>That's the whole point of VLANs.  VLANs create a layer-2 separation. You can't get from one layer-2 domain to another without a layer-3 device (router) connecting them.  The switch is just another host on a different VLAN.</p>

<p>The VLANs are like yards separated by fences.  You need a gate (router) to get from one to the other.</p>

<p>If you add a VLAN 2 SVI on the switch with an address in the same subnet as the PC, you could ping the PC.</p>
","20980"
"Why do i only see QUIC and not UDP during capture in wireshark?","3154","","<p>I've been using wireshark and noticed that I no longer see UDP but QUIC, why is this the case?</p>
","<p>Wireshark uses dissectors and lua scripts to analyze and classify capture traffic (or parts thereof).  What is displayed in the <em>Protocol</em> field of Wireshark's <em>Packet List Pane</em> is the information returned that is most specific after analyzing the data and will determine how the data is presented.</p>

<p>If the UDP dissector is the most specific dissector for the captured data, than the <em>Protocol</em> column will show UDP. However many types of UDP traffic will be identified (SIP, RTP, DNS, etc).</p>

<p>The same is true for TCP traffic as well. Typically you will see this as HTTP, FTP, IRC, etc.</p>

<blockquote>
  <p>I've using wireshark and noticed that I no longer see UDP but QUIC, why is this the case?</p>
</blockquote>

<p>In your case because the traffic has been analyzed as QUIC data. It may or may not be QUIC traffic; no program of this type is perfect, but Wireshark will be correct more often than not.</p>

<p>QUIC is one of the ""newer"" classifications, as it appears to have been added in 1.11.3/1.12.0. If you were using a version of Wireshark prior to these versions, the same traffic may likely have been classified as UDP (or another protocol).</p>

<p>If you don't want the QUIC protocol to be identified, simply go to the ""Analyze"" menu and select ""Enabled Protocols"" from the list. Find the entry for QUIC and uncheck the box.</p>
","27880"
"In which layer is TLS situated within the TCP/IP stack?","3152","","<p>I have an endless amount of books and websites at my disposal, but this question stays totally unanswered, or rather every author invests his own solution for this problem. It's even placed within different layers depending on which Wikipedia article you're just reading.</p>

<pre><code>        TCP/IP
|--------------------|
| application layer  |
|--------------------|
|   transport layer  |
|--------------------|
|    internet layer  |
|--------------------|
|        link layer  |
|--------------------|
</code></pre>

<p>I assume in my question that we all agree that TCP/IP consists of four layers. Yes, I've seen different views on this as well. Mainly people adding a fifth layer at the bottom for the physical stuff or they added a fifth layer beneath the application layer, just to place TLS there.</p>

<p>As far as I understand the whole thing, TLS (and the old dying SSL), are situated in the application layer of TCP/IP and acting as a wrapper around other application layer protocols (e.g. HTTP). Further they act on behalf of e.g. TCP, but the protocol is merely sitting in front of the actual application protocol rather than in the transport layer and sharing the space with TCP.</p>

<p>Well, I'd love to hear a clarification of this maybe not so important <em>problem</em>.</p>
","<p>Given the 4-layer model you are working within, TLS would fall the Application Layer.  The Transport Layer only deals with the connection mode between processes - TCP/UDP multiplexing and the like.</p>
","12678"
"Cisco ASA 5505 doesn't allow internet connection","3150","","<p>This is my Cisco ASA 5505 ""show run"":</p>

<pre><code>: Saved
:
ASA Version 8.2(5) 
!
hostname LAB-ASA
domain-name TEST.com
enable password X encrypted
passwd X encrypted
names
name 192.168.1.0 AsusWireless
!
interface Ethernet0/0
 switchport access vlan 2
!
interface Ethernet0/1
!
interface Ethernet0/2
!
interface Ethernet0/3
!
interface Ethernet0/4
!
interface Ethernet0/5
!
interface Ethernet0/6
!
interface Ethernet0/7
!
interface Vlan1
 nameif inside
 security-level 100
 ip address 172.16.1.1 255.255.255.0 
!
interface Vlan2
 nameif outside
 security-level 0
 ip address xx.xx.xx.xx 255.255.255.248 
!
ftp mode passive
dns domain-lookup inside
dns domain-lookup outside
dns server-group DefaultDNS
 domain-name TEST.com
object-group protocol DM_INLINE_PROTOCOL_1
 protocol-object ip
 protocol-object udp
 protocol-object tcp
object-group protocol DM_INLINE_PROTOCOL_2
 protocol-object ip
 protocol-object udp
 protocol-object tcp
object-group protocol DM_INLINE_PROTOCOL_3
 protocol-object ip
 protocol-object udp
 protocol-object tcp
object-group protocol DM_INLINE_PROTOCOL_4
 protocol-object ip
 protocol-object udp
 protocol-object tcp
access-list TUNNEL_LIST standard permit 172.16.1.0 255.255.255.0 
access-list TUNNEL_LIST standard permit 172.16.16.0 255.255.255.0 
access-list outside_in extended permit icmp any host xx.xx.xx.xx 
access-list outside_in extended permit ip 172.16.16.0 255.255.255.0 any 
access-list outside_in extended permit ip 172.16.1.0 255.255.255.0 any 
access-list inside_in extended permit icmp any any log 
access-list inside_in extended permit tcp any any log 
access-list inside_in extended permit udp any any log 
access-list inside_in extended permit ip any any log 
access-list inside_in extended permit ip 172.16.16.0 255.255.255.0 any 
access-list inside_in extended permit ip 172.16.1.0 255.255.255.0 any 
access-list inside_in extended permit object-group DM_INLINE_PROTOCOL_1 interface inside any 
access-list inside_in extended permit object-group DM_INLINE_PROTOCOL_3 AsusWireless 255.255.255.0 any 
access-list inside_out extended permit icmp any any log 
access-list inside_out extended permit tcp any any log 
access-list inside_out extended permit udp any any log 
access-list inside_out extended permit ip any any log 
access-list inside_out extended permit object-group DM_INLINE_PROTOCOL_2 172.16.1.0 255.255.255.0 any 
access-list inside_out extended permit object-group DM_INLINE_PROTOCOL_4 AsusWireless 255.255.255.0 any 
access-list outside_out extended permit icmp any any log 
access-list outside_out extended permit tcp any any log 
access-list outside_out extended permit udp any any log 
access-list outside_out extended permit ip any any log 
pager lines 24
logging console debugging
mtu inside 1500
mtu outside 1500
ip local pool VPN_CLIENTS 172.16.16.16-172.16.16.64 mask 255.255.255.0
icmp unreachable rate-limit 1 burst-size 1
no asdm history enable
arp timeout 14400
global (outside) 1 interface
nat (inside) 0 172.16.1.0 255.255.255.0 outside
nat (inside) 0 AsusWireless 255.255.255.0 outside
access-group inside_in in interface inside
access-group inside_out out interface inside
access-group outside_in in interface outside
access-group outside_out out interface outside
route outside 0.0.0.0 0.0.0.0 xx.xx.xx.xx 1
timeout xlate 3:00:00
timeout conn 1:00:00 half-closed 0:10:00 udp 0:02:00 icmp 0:00:02
timeout sunrpc 0:10:00 h323 0:05:00 h225 1:00:00 mgcp 0:05:00 mgcp-pat 0:05:00
timeout sip 0:30:00 sip_media 0:02:00 sip-invite 0:03:00 sip-disconnect 0:02:00
timeout sip-provisional-media 0:02:00 uauth 0:05:00 absolute
timeout tcp-proxy-reassembly 0:01:00
timeout floating-conn 0:00:00
dynamic-access-policy-record DfltAccessPolicy
 description ""AnyConnectACL""
 network-acl inside_in
 network-acl inside_out
aaa authentication ssh console LOCAL 
aaa authentication telnet console LOCAL 
http server enable
http 172.16.1.0 255.255.255.0 inside
http AsusWireless 255.255.255.255 inside
no snmp-server location
no snmp-server contact
snmp-server enable traps snmp authentication linkup linkdown coldstart
crypto ipsec transform-set ESP-3DES-MD5 esp-3des esp-md5-hmac 
crypto ipsec transform-set ESP-DES-MD5 esp-des esp-md5-hmac 
crypto ipsec transform-set ESP-3DES-SHA esp-3des esp-sha-hmac 
crypto ipsec transform-set ESP-AES-128-SHA esp-aes esp-sha-hmac 
crypto ipsec transform-set ESP-AES-192-SHA esp-aes-192 esp-sha-hmac 
crypto ipsec transform-set ESP-AES-128-MD5 esp-aes esp-md5-hmac 
crypto ipsec transform-set ESP-AES-192-MD5 esp-aes-192 esp-md5-hmac 
crypto ipsec transform-set ESP-AES-256-SHA esp-aes-256 esp-sha-hmac 
crypto ipsec transform-set ESP-AES-256-MD5 esp-aes-256 esp-md5-hmac 
crypto ipsec transform-set ESP-DES-SHA esp-des esp-sha-hmac 
crypto ipsec security-association lifetime seconds 28800
crypto ipsec security-association lifetime kilobytes 4608000
crypto dynamic-map SYSTEM_DEFAULT_CRYPTO_MAP 65535 set transform-set ESP-AES-128-SHA ESP-AES-128-MD5 ESP-AES-192-SHA ESP-AES-192-MD5 ESP-AES-256-SHA ESP-AES-256-MD5 ESP-3DES-SHA ESP-3DES-MD5 ESP-DES-SHA ESP-DES-MD5
crypto map outside_map 65535 ipsec-isakmp dynamic SYSTEM_DEFAULT_CRYPTO_MAP
crypto map outside_map interface outside
crypto map inside_map 65535 ipsec-isakmp dynamic SYSTEM_DEFAULT_CRYPTO_MAP
crypto map inside_map interface inside
crypto isakmp enable inside
crypto isakmp enable outside
crypto isakmp policy 10
 authentication crack
 encryption aes-256
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 20
 authentication rsa-sig
 encryption aes-256
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 30
 authentication pre-share
 encryption aes-256
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 40
 authentication crack
 encryption aes-192
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 50
 authentication rsa-sig
 encryption aes-192
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 60
 authentication pre-share
 encryption aes-192
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 70
 authentication crack
 encryption aes
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 80
 authentication rsa-sig
 encryption aes
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 90
 authentication pre-share
 encryption aes
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 100
 authentication crack
 encryption 3des
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 110
 authentication rsa-sig
 encryption 3des
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 120
 authentication pre-share
 encryption 3des
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 130
 authentication crack
 encryption des
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 140
 authentication rsa-sig
 encryption des
 hash sha
 group 2
 lifetime 86400
crypto isakmp policy 150
 authentication pre-share
 encryption des
 hash sha
 group 2
 lifetime 86400
telnet timeout 5
ssh 172.16.1.0 255.255.255.0 inside
ssh AsusWireless 255.255.255.255 inside
ssh timeout 5
console timeout 0
management-access inside
dhcp-client update dns server both
dhcpd address 172.16.1.5-172.16.1.36 inside
dhcpd dns 8.8.8.8 8.8.4.4 interface inside
dhcpd enable inside
!

threat-detection basic-threat
threat-detection statistics access-list
no threat-detection statistics tcp-intercept
webvpn
 enable inside
 enable outside
 anyconnect-essentials
 svc image disk0:/anyconnect-win-3.1.05187-k9.pkg 1
 svc image disk0:/anyconnect-linux-64-3.1.05187-k9.pkg 2
 svc image disk0:/anyconnect-linux-3.1.05187-k9.pkg 3
 svc image disk0:/anyconnect-macosx-i386-3.1.05187-k9.pkg 4
 svc enable
 tunnel-group-list enable
group-policy DfltGrpPolicy attributes
 dns-server value 172.16.1.2
 vpn-tunnel-protocol webvpn
 split-tunnel-network-list value TUNNEL_LIST
 split-tunnel-all-dns enable
 webvpn
  svc rekey method ssl
  svc compression deflate
group-policy GroupPolicy1 internal
group-policy GroupPolicy1 attributes
 wins-server none
 dns-server value 172.16.1.2 8.8.4.4
 vpn-filter value inside_in
 vpn-tunnel-protocol IPSec l2tp-ipsec svc 
 group-lock value AnyConnectProfile
 split-tunnel-policy tunnelall
 split-tunnel-network-list value TUNNEL_LIST
 default-domain value TEST.com

tunnel-group AnyConnectProfile type remote-access
tunnel-group AnyConnectProfile general-attributes
 address-pool VPN_CLIENTS
 authorization-server-group LOCAL
 default-group-policy GroupPolicy1
tunnel-group AnyConnectProfile webvpn-attributes
 group-alias AnyConnectProfile enable
!
class-map inspection_default
 match default-inspection-traffic
!
!
policy-map type inspect dns preset_dns_map
 parameters
  message-length maximum client auto
  message-length maximum 512
policy-map global_policy
 class inspection_default
  inspect dns preset_dns_map 
  inspect ftp 
  inspect h323 h225 
  inspect h323 ras 
  inspect ip-options 
  inspect netbios 
  inspect rsh 
  inspect rtsp 
  inspect skinny  
  inspect esmtp 
  inspect sqlnet 
  inspect sunrpc 
  inspect tftp 
  inspect sip  
  inspect xdmcp 
!
service-policy global_policy global
prompt hostname context 
no call-home reporting anonymous
call-home
 profile CiscoTAC-1
  no active
  destination address http https://tools.cisco.com/its/service/oddce/services/DDCEService
  destination address email callhome@cisco.com
  destination transport-method http
  subscribe-to-alert-group diagnostic
  subscribe-to-alert-group environment
  subscribe-to-alert-group inventory periodic monthly
  subscribe-to-alert-group configuration periodic monthly
  subscribe-to-alert-group telemetry periodic daily
Cryptochecksum:e09e55d66228358f8038da3c81d19847
: end
asdm location AsusWireless 255.255.255.0 inside
no asdm history enable
</code></pre>

<p>I was playing with ASDM and now no one has internet in whole network, there is AsusWireless (wireless router) which assigns people with IP addresses such as 192.168.1.X, none of those and non of people connected directly to Cisco ASA (172.16.1.X) and none of people who connected through AnyConnect (172.16.16.X) does have internet. No internet at all.
But when I go to ssh of Cisco router and when I ping Google servers, it's connected and does have internet. What's wrong? What did I do wrong?</p>
","<p>The problem is </p>

<pre><code>nat (inside) 0 172.16.1.0 255.255.255.0 outside
nat (inside) 0 AsusWireless 255.255.255.0 outside
</code></pre>

<p>""nat 0"" tells the firewall not to do translation.  you should say ""nat 1"" to associate the nat with the</p>

<pre><code>global (outside) 1 interface
</code></pre>

<p>command.</p>
","17613"
"VPN connection between 2 sonicwall devices","3133","","<p>I am trying to create a VPN connection between 2 sonicwall TZ 200 and I follow most popular tutorial on the net without success; as sonicwall - whatever I did - shows ""No Active VPN Tunnels"". The VPN should got linked between:</p>

<ul>
<li>Main Office [sonicwall router with local IP 192.168.2.1]</li>
<li>Branch office [sonicwall router with local IP 192.168.3.1]</li>
</ul>

<p>In both offices we have static WAN IP address from ISP.</p>

<p>I need to make basic Site to Site connection between those offices so they can access each other subnet.</p>

<p>What I need in order to make this work?</p>

<p>UPDATE:</p>

<p>the configuration I used is as following:
<img src=""https://i.imgur.com/BDyj1VD.jpg"" alt=""General"">
<img src=""https://i.imgur.com/YpaP54y.jpg"" alt=""Network"">
<img src=""https://i.imgur.com/B46DIVy.jpg"" alt=""Branch office""> <img src=""https://i.imgur.com/rRrZprV.jpg"" alt=""Main office"">
<img src=""https://i.imgur.com/86jswj4.jpg"" alt=""Proposals"">
<img src=""https://i.imgur.com/8Z75AiB.jpg"" alt=""Advance""></p>

<p>Then the it was activated like this from the other side but with changing the peer and local </p>

<p><img src=""https://i.imgur.com/amJUbii.jpg"" alt=""After activate""></p>

<p>UPDATE:</p>

<p>Aggressive mode:</p>

<p>1   11/08/2015 09:11:35.912 Info    VPN IKE IKE negotiation aborted due to timeout  192.168.1.15, 500   xx.xx.xx.xxx, 500   VPN Policy: Tubli Office</p>

<p>2   11/08/2015 09:11:01.912 Info    VPN IKE IKE Initiator: Remote party timeout - Retransmitting IKE request.   192.168.1.15, 500   xx.xx.xx.xxx, 500   VPN Policy: Tubli Office</p>

<p>3   11/08/2015 09:10:42.912 Info    VPN IKE IKE Initiator: Remote party timeout - Retransmitting IKE request.   192.168.1.15, 500   xx.xx.xx.xxx, 500   VPN Policy: Tubli Office</p>

<p>4       11/08/2015 09:10:33.912 Info    VPN IKE IKE Initiator: Remote party timeout - Retransmitting IKE request.   192.168.1.15, 500   xx.xx.xx.xxx, 500   VPN Policy: Tubli Office</p>

<p>5       11/08/2015 09:10:26.400 Info    VPN IKE IKE Initiator: Start Aggressive Mode negotiation (Phase 1)  192.168.1.15, 500   xx.xx.xx.xxx, 500   VPN Policy: Tubli Office</p>

<hr>

<p>Main mode:</p>

<p>1       11/08/2015 08:59:28.352 Info    VPN IKE IKE Initiator: Remote party timeout - Retransmitting IKE request.   192.168.1.20, 500   xx.xx.xx.xxx, 500   VPN Policy: Main Office </p>

<p>2       11/08/2015 08:59:09.352 Info    VPN IKE IKE Initiator: Remote party timeout - Retransmitting IKE request.   192.168.1.20, 500   xx.xx.xx.xxx, 500   VPN Policy: Main Office </p>

<p>3       11/08/2015 08:58:57.352 Info    VPN IKE IKE Initiator: Remote party timeout - Retransmitting IKE request.   192.168.1.20, 500   xx.xx.xx.xxx, 500   VPN Policy: Main Office </p>

<p>4       11/08/2015 08:58:50.352 Info    VPN IKE IKE Initiator: Start Main Mode negotiation (Phase 1)    192.168.1.20, 500   xx.xx.xx.xxx, 500   VPN Policy: Main Office</p>

<p>I am sure settings are same from both sides. xx.xx.xx.xxx to hide the IP</p>

<p>Not sure if Advance settings is needed here as well but it is same in both sides</p>
","<p>According your last log, not even Phase 1 is established because both sides of tunnel got a timeout.</p>

<p>I would suggest to make a packet capture to find where the packet is stopping. You should filter in each device with public ip as filter. I suggest three scenarios:</p>

<ul>
<li>The (returning) traffic is dropped at the firewall. You will see a red line with a drop code.</li>
<li>There are no returning traffic. Some device is dropping IKE packets in the middle.</li>
<li>You see normal returning traffic. There are another problem in your tunnel config.</li>
</ul>
","24195"
"What IPv6 prefixes should never be routed?","3131","","<p>Seems clear to me that the Link Local, and Unique Local, addresses should at least be filtered.</p>

<ol>
<li><p>Is there anything other than LLA/ULA that should be filtered?</p></li>
<li><p>For LLA, is it standard practice to blanket filter the full fe80::/10, or just filter the fe80::/64?</p></li>
</ol>
","<p>RFC 6890 section 2.2.3 describe special purpose prefixes for IPv6. Link is here:</p>

<p><a href=""http://tools.ietf.org/html/rfc6890#page-14"" rel=""nofollow"">http://tools.ietf.org/html/rfc6890#page-14</a></p>

<p>Prefixes to include are:</p>

<pre><code>               +----------------------+------------------+
               | Attribute            | Value            |
               +----------------------+------------------+
               | Address Block        | ::1/128          |
               | Name                 | Loopback Address |
               | RFC                  | [RFC4291]        |
               | Allocation Date      | February 2006    |
               | Termination Date     | N/A              |
               | Source               | False            |
               | Destination          | False            |
               | Forwardable          | False            |
               | Global               | False            |
               | Reserved-by-Protocol | True             |
               +----------------------+------------------+

                    Table 17: Loopback Address

             +----------------------+---------------------+
             | Attribute            | Value               |
             +----------------------+---------------------+
             | Address Block        | ::/128              |
             | Name                 | Unspecified Address |
             | RFC                  | [RFC4291]           |
             | Allocation Date      | February 2006       |
             | Termination Date     | N/A                 |
             | Source               | True                |
             | Destination          | False               |
             | Forwardable          | False               |
             | Global               | False               |
             | Reserved-by-Protocol | True                |
             +----------------------+---------------------+

                   Table 18: Unspecified Address

            +----------------------+---------------------+
            | Attribute            | Value               |
            +----------------------+---------------------+
            | Address Block        | 64:ff9b::/96        |
            | Name                 | IPv4-IPv6 Translat. |
            | RFC                  | [RFC6052]           |
            | Allocation Date      | October 2010        |
            | Termination Date     | N/A                 |
            | Source               | True                |
            | Destination          | True                |
            | Forwardable          | True                |
            | Global               | True                |
            | Reserved-by-Protocol | False               |
            +----------------------+---------------------+

              Table 19: IPv4-IPv6 Translation Address

             +----------------------+---------------------+
             | Attribute            | Value               |
             +----------------------+---------------------+
             | Address Block        | ::ffff:0:0/96       |
             | Name                 | IPv4-mapped Address |
             | RFC                  | [RFC4291]           |
             | Allocation Date      | February 2006       |
             | Termination Date     | N/A                 |
             | Source               | False               |
             | Destination          | False               |
             | Forwardable          | False               |
             | Global               | False               |
             | Reserved-by-Protocol | True                |
             +----------------------+---------------------+

                   Table 20: IPv4-Mapped Address

          +----------------------+----------------------------+
          | Attribute            | Value                      |
          +----------------------+----------------------------+
          | Address Block        | 100::/64                   |
          | Name                 | Discard-Only Address Block |
          | RFC                  | [RFC6666]                  |
          | Allocation Date      | June 2012                  |
          | Termination Date     | N/A                        |
          | Source               | True                       |
          | Destination          | True                       |
          | Forwardable          | True                       |
          | Global               | False                      |
          | Reserved-by-Protocol | False                      |
          +----------------------+----------------------------+

                   Table 21: Discard-Only Prefix

          +----------------------+---------------------------+
          | Attribute            | Value                     |
          +----------------------+---------------------------+
          | Address Block        | 2001::/23                 |
          | Name                 | IETF Protocol Assignments |
          | RFC                  | [RFC2928]                 |
          | Allocation Date      | September 2000            |
          | Termination Date     | N/A                       |
          | Source               | False[1]                  |
          | Destination          | False[1]                  |
          | Forwardable          | False[1]                  |
          | Global               | False[1]                  |
          | Reserved-by-Protocol | False                     |
          +----------------------+---------------------------+

         [1] Unless allowed by a more specific allocation.

                +----------------------+----------------+
                | Attribute            | Value          |
                +----------------------+----------------+
                | Address Block        | 2001::/32      |
                | Name                 | TEREDO         |
                | RFC                  | [RFC4380]      |
                | Allocation Date      | January 2006   |
                | Termination Date     | N/A            |
                | Source               | True           |
                | Destination          | True           |
                | Forwardable          | True           |
                | Global               | False          |
                | Reserved-by-Protocol | False          |
                +----------------------+----------------+

                         Table 23: TEREDO

                +----------------------+----------------+
                | Attribute            | Value          |
                +----------------------+----------------+
                | Address Block        | 2001:2::/48    |
                | Name                 | Benchmarking   |
                | RFC                  | [RFC5180]      |
                | Allocation Date      | April 2008     |
                | Termination Date     | N/A            |
                | Source               | True           |
                | Destination          | True           |
                | Forwardable          | True           |
                | Global               | False          |
                | Reserved-by-Protocol | False          |
                +----------------------+----------------+

                      Table 24: Benchmarking

                +----------------------+---------------+
                | Attribute            | Value         |
                +----------------------+---------------+
                | Address Block        | 2001:db8::/32 |
                | Name                 | Documentation |
                | RFC                  | [RFC3849]     |
                | Allocation Date      | July 2004     |
                | Termination Date     | N/A           |
                | Source               | False         |
                | Destination          | False         |
                | Forwardable          | False         |
                | Global               | False         |
                | Reserved-by-Protocol | False         |
                +----------------------+---------------+

                      Table 25: Documentation

                 +----------------------+--------------+
                 | Attribute            | Value        |
                 +----------------------+--------------+
                 | Address Block        | 2001:10::/28 |
                 | Name                 | ORCHID       |
                 | RFC                  | [RFC4843]    |
                 | Allocation Date      | March 2007   |
                 | Termination Date     | March 2014   |
                 | Source               | False        |
                 | Destination          | False        |
                 | Forwardable          | False        |
                 | Global               | False        |
                 | Reserved-by-Protocol | False        |
                 +----------------------+--------------+

                         Table 26: ORCHID

                +----------------------+---------------+
                | Attribute            | Value         |
                +----------------------+---------------+
                | Address Block        | 2002::/16 [2] |
                | Name                 | 6to4          |
                | RFC                  | [RFC3056]     |
                | Allocation Date      | February 2001 |
                | Termination Date     | N/A           |
                | Source               | True          |
                | Destination          | True          |
                | Forwardable          | True          |
                | Global               | N/A [2]       |
                | Reserved-by-Protocol | False         |
                +----------------------+---------------+

                  [2] See [RFC3056] for details.

                          Table 27: 6to4

                 +----------------------+--------------+
                 | Attribute            | Value        |
                 +----------------------+--------------+
                 | Address Block        | fc00::/7     |
                 | Name                 | Unique-Local |
                 | RFC                  | [RFC4193]    |
                 | Allocation Date      | October 2005 |
                 | Termination Date     | N/A          |
                 | Source               | True         |
                 | Destination          | True         |
                 | Forwardable          | True         |
                 | Global               | False        |
                 | Reserved-by-Protocol | False        |
                 +----------------------+--------------+

                      Table 28: Unique-Local

            +----------------------+-----------------------+
            | Attribute            | Value                 |
            +----------------------+-----------------------+
            | Address Block        | fe80::/10             |
            | Name                 | Linked-Scoped Unicast |
            | RFC                  | [RFC4291]             |
            | Allocation Date      | February 2006         |
            | Termination Date     | N/A                   |
            | Source               | True                  |
            | Destination          | True                  |
            | Forwardable          | False                 |
            | Global               | False                 |
            | Reserved-by-Protocol | True                  |
            +----------------------+-----------------------+

                      Table 29: Linked-Scoped Unicast
</code></pre>

<p>This should be enough. There is also the option of filtering bogons but that feels a bit overkill unless you setup peering to Team Cymru or such.</p>
","358"
"Using Fabric on a Cisco device : ""Line has invalid autocommand""","3131","","<p>I wasn't sure where to ask this but it seems to be something on the switch side so I thought I would start here first.</p>

<p>I am working on a little project to automate updates to config files in bulk using <a href=""http://docs.fabfile.org/en/1.6/"" rel=""nofollow"">Fabric</a>.  I have everything installed and seemingly working correctly in Python and have gotten to the point where I am ready to start building some tests.  However, all of the commands that I feed through Fabric come back with the following error:</p>

<blockquote>
  <p>Line has invalid autocommand ""/bin/bash -l -c ""<strong>X</strong>""""</p>
</blockquote>

<p>Where <strong>X</strong> is the command I am trying to run on the switch.  I am having trouble understanding why this is failing, maybe somebody can offer an explaination?  Is this something that needs to be configured on the Cisco side?  I am testing this on a 3750 switch running 12.2, not sure what other details to provide.</p>
","<p>So it turns out that there is an argument that is implied when you invoke a command from Fabric called shell=True.  To get things to work correctly I had to specify an argument <strong>shell=False</strong>.</p>

<p>So for example, here is a command that I was running that was failing.</p>

<pre><code>def config_t():
  run(""config t"")
</code></pre>

<p>Which was producing the <em>Line has invalid autocommand ""/bin/bash -l -c ""config t""""</em> error.  Change your command to include the shell=False</p>

<pre><code>def config_t():
    run(""config t"", shell=False)
</code></pre>

<p>Everything ran smoothly for me after I made this change.  For more information there is a section in the documentation describing this. <a href=""https://fabric.readthedocs.org/en/1.6/api/core/operations.html?highlight=run#fabric.operations.run"">Fabric docs</a>.</p>
","552"
"How to setup Cisco IOS with multi public IP's","3126","","<p>I'd like to set up a little network environment. We have bought 2 different subnet from our ISP. 
<br><strong>The WAN internet connection</strong> : xx.yy.81.61/26
<br><strong>WAN gateway</strong>: xx.yy.81.1
<br><strong>First subnet</strong> : xx.yy.81.80/30    (this has the same first 3 octet as the WAN, probably doesn't count, because it is a different subnet)
<br><strong>Second subnet</strong> : zz.uu.156.48/29</p>

<p>As you can see in the first diagram, the xx.yy.81.61/26 is assigned to the CISCO's outside(WAN) interface, the internet connection is alive, all hosts in LAN have internet connection. We want to assign some hosts with public IP address (for webserver sake). I'm not familiar with networking, so please forgive me if I make some silly questions. In brackets, I make the cisco router setup with the ""Cisco Configuration Professional"" PC program.<br></p>

<blockquote>
<pre><code>      |     
      |     ADSL or Optical cable (fiber link)
      |
   +-----+
   |     |   modem
   |     |
   +-----+
      |
      |        WAN (xx.yy.81.61/26)
      |     Gateway(xx.yy.81.1)
      |
 +----------+
 |          |
 |          |    CISCO 881 (router/firewall)
 |          |    IOS 15.2(4)M6
 |          |
 +----------+
      |
      |
 -----+-------------   our local LAN segment (vlan)
  10.10.10.1/24
</code></pre>
</blockquote>

<p><br>
I want to set up the CISCO:<br>
- The question is, that how can i make my subnets alive? I just want to transmit(NAT) some public IP from subnet to specific HOST computer(or inverse?). I have made the NAT rules (zz.uu.156.50 &lt;- 10.10.10.xxx), but no result, the public IP is unreachable(no ping, no traceroute). <br>
- Do I have to assign a second IP(virtual) address from subnets to the outside interface(WAN). If yes, than how?
<br><br>
The truth is that the original setup was different, as you can see in the second diagram. In this case the both subnet was alive. Based on this I think the subnets is being routed through the WAN IP address(xx.yy.81.61). Now, I unmounted the ISP owned HP router and I attached the CISCO directly to the modem output(first diagram), because we had some DNS issues and I think it is unnecessary to be 2 router sequentially. Please indicate if i was wrong. <br>
I mention, that by the original setup, I could access the HP router (just the login interface) from internet with first IP of the subnets (xx.yy.81.81 from the first subnet and  zz.uu.156.49 from the second subnet).</p>

<blockquote>
<pre><code>      |     
      |     ADSL or Optical cable (fiber link)
      |
   +-----+
   |     |   modem
   |     |
   +-----+
      |
      |
      |
  +-------+
  |       |    blackbox, no acces
  |       |    ISP owned HP router
  |       |
  +-------+
      |
      |        WAN (xx.yy.81.82/30)    or      WAN (zz.uu.156.50/29)
      |     Gateway(xx.yy.81.81)            Gateway(zz.uu.156.49) 
      |
 +----------+
 |          |
 |          |    CISCO 881 (router/firewall)
 |          |    IOS 15.2(4)M6
 |          |
 +----------+
      |
      |
 -----+-------------   our local LAN segment
  10.10.10.1/24
</code></pre>
</blockquote>
","<p>To clarify, normally in this situation you will have your /30 subnet being where your /26 and /29 subnet are routed to by upstream.  You bring up your side of the /30, eg xx.yy.81.82/30 and there being only one other available address the gateway is xx.yy.81.81/30 on the provider end.</p>

<p>The ISP will typically route xx.yy.81.61/26 and zz.uu.156.48/29 via xx.yy.81.82/30 (aka your side) because its a predictable address. All internet traffic then asks the device which has xx.yy.81.82/30 how to get to the /26 and the /29 if im not mistaken.</p>

<p>So, you have three options:</p>

<p>a) If you want to map a public IP address directly to a server you will need to use one-to-one nat -> <a href=""http://ciscoskills.net/2011/01/21/configuring-nat-one-to-one-mapping/"" rel=""nofollow"">http://ciscoskills.net/2011/01/21/configuring-nat-one-to-one-mapping/</a></p>

<p>b) If you want to do port forwards, put each ip address as a sub-interface on your wan nic and do normal PAT.</p>

<p>c) If you want to put the public IP address directly on your internal devices and avoid nat altogether you will need to put an ip address on a second nic or a vlan interface on the cisco and plug it into a switch, and connect your servers from there. You may have to exclude these addresses from getting natted perhaps and depends how many nics your cisco has.</p>

<p>Hopefully this helps you come to a solution :)</p>
","20577"
"ALU interop GRE tunnel","3123","","<p>I've been trying to figure out how to setup a GRE tunnel between an ALU 7750SR and a 3rd party vendor.  I think it's balking at the VC-ID in the SDP but i'm hoping someone has experience getting a GRE tunnel to come up in a multi-vendor environment with ALU.</p>

<p>Here's the requested syntax:</p>

<pre><code>sdp 9999 create
far-end 1.1.1.1 
path-mtu 1500 
keep-alive 
exit

ies 9998 customer 1 create 
 interface ""PACKET_DESIGN"" create 
 address 10.128.105.6/30 
 spoke-sdp 9999:1 create 
 no shutdown 
 exit 
no shutdown
</code></pre>
","<p>AFAIK GRE support is limited to VPN services or as an access-pseudowire. At least according to ALU there is no way to use GRE as a logical tunnel on the 'network' side. This would require a service blade. However, I haven't tested this but it seems to be the official story.</p>
","1131"
"Does anyone know how to import ssh public key to ASR9K (IOS-XR)?","3113","","<p>I am trying to login ASR9001 router using ssh public key authentication.
I tried to import my ssh public key to the router but no success.</p>

<pre>
RP/0/RSP0/CPU0:ASR9K-1#crypto key import authentication rsa disk0:/test.pem
Cannot execute the command : Invalid argument
</pre>

<p>Does any one know how to do that?</p>

<p>Thanks.</p>
","<p>I got response from Cisco Tech support and there are a few things not correctly described in the manual.</p>

<p>First, ASR router supports key size 1024 bit or smaller contrary to its manual(supporting up to 2048 bit key).<br>
Second, only the key part of SSH public key must be 'de'coded w/ base64 en/decoding program.</p>

<h2>SSH Key Generation</h2>

<pre><code>ssh-keygen -b 1024 -t rsa -f myrouter_sshkey
</code></pre>

<p>This will generate <code>myrouter_sshkey</code> and <code>myrouter_sshkey.pub</code>. When you look into the public key file, it looks like followings:</p>

<blockquote>
  <p>ssh-rsa
  AAAAB3NzaC1yc2EAAAADAQABAAAAgQDR/ggtknqBZ50pIAyzw0E93wfu2EsGLnft/uF6N4ov6Dsp1H7yoC5ssE+yOcrWHeDEQnD0BsNCLZPW+ye7jjYeE+CUrOINpi04PtD+zx95knpAFnREMV7w8fJ9c7/SMb2L4Jk6KlmTcqtM+lUgrxEnCD7Z1kpCUzkP+0D0N/RG2Q==
  foo@bar.com</p>
</blockquote>

<p>We only need the second part of the public key file separated by space for base64 decoding.</p>

<h2>'de'code SSH public key with base64.</h2>

<pre><code>cut -d"" "" -f2 myrouter_sshkey.pub | base64 -d &gt; myrouter_sshkey.pub.b64
</code></pre>

<p>This generated file is binary format and can be imported to ASR router.<br>
Note that if you're using MAC, use -D option instead.</p>

<h2>Upload 'de'coded public key to the router.</h2>

<pre><code>RP/0/RSP0/CPU0:ASR9K#copy ftp:myrouter_sshkey.pub.b64 harddisk:/
</code></pre>

<p>I used ftp but you can use tftp or else.</p>

<h2>import public key to a router user.</h2>

<pre><code>RP/0/RSP0/CPU0:ASR9K#admin
RP/0/RSP0/CPU0:ASR9K(admin)#crypto key import authentication rsa username admin
</code></pre>

<h2>Verify key import</h2>

<pre><code>RP/0/RSP0/CPU0:ASR9K(admin)#sh crypto key authentication rsa all    
Key label: admin
Type     : RSA public key authentication
Size     : 1024
Imported : 18:39:54 UTC Thu Jul 03 2014
Data     :
 {{intentionally removed}}
</code></pre>

<h2>Login test</h2>

<pre><code>ssh -oIdentitiesOnly=yes -i myrouter_sshkey ${myrouter}
</code></pre>

<p>Note that if you have more than one ssh keys, <code>-oIdentitiesOnly=yes</code> must be given or your connection will fail. SSH tries every keys sequentially until one of the keys is accepted or finally falls back to password authentication if applicable. SSH server may allow this multiple key trials even if the first key trial fails. Unfortunately ASR router seems not to allow this. If the first tried key fails, it disconnect the session. To explicitly specify the key you use, give <code>-oIdentitiesOnly=yes</code> option to ssh.</p>
","10051"
"Setting up a switch to pass data from a SPAN port","3109","","<p>Situation: We have a 3750 with a monitoring session setup on it, grabs a few VLAN's running over the switch and has a destination port on that device (normal SPAN not RSPAN). Historically speaking - that destination port had a 1GB cable plugged into it connecting down to a 3020 (in the back of an HP blade chassis), and hosts in that chassis could be set with a promiscuous NIC to monitor the network.</p>

<p>The 3020 has lost it's config.  How do I set up the port on the 3020 to pass the SPAN traffic?  Very curious about this because I had thought RSPAN was needed for a setup like this, but it's worked for years in the manner described above with regular SPAN.</p>
","<p>A back-to-back SPAN session would seem to work. I can't say that is what was used in your environment but I just labbed it up and it worked with no problems. I was able to capture packets on the laptop that were from the gi0/7 interface on the 2960G. A poor mans RSPAN.</p>

<p>Test layout and configurations below. No special configuration on the switchports at all, just our leftover lab stuff. </p>

<p>rest-of-world ======== [gi0/7]2960G[gi0/2] ====== [fa1/0/1]3750-24[fa1/0/2] =========== laptop</p>

<pre><code>2960G
====================
!
interface GigabitEthernet0/2
 switchport access vlan 705
 switchport mode access
 switchport nonegotiate
 spanning-tree portfast
!
interface GigabitEthernet0/7
 description Trunk to rest of world
 switchport trunk allowed vlan 1,4,113,125,130,132,270,420,444,655,705,998
 switchport mode trunk
 switchport nonegotiate
 logging event trunk-status
!
monitor session 1 source interface Gi0/7
monitor session 1 destination interface Gi0/2
!

3750-24
=======================
!
interface FastEthernet1/0/1
 switchport access vlan 777
 spanning-tree portfast
!
interface FastEthernet1/0/2
 switchport access vlan 777
 spanning-tree portfast
!
monitor session 1 source interface Fa1/0/1
monitor session 1 destination interface Fa1/0/2
!
</code></pre>

<p>Edit: Does not work with ""encapsulation replicate"" on the monitor destination command.</p>
","2620"
"How to infer 2960S switch base ethernet MAC Address","3102","","<p>Cisco switches seem to allocate unique MAC address for each interface they have, this includes ports and vlan interfaces. </p>

<p>These unique MAC are derived from a ""Base ethernet MAC Address"", which can be found with:</p>

<pre><code>MySwitch#show version
...snip...
Base ethernet MAC Address        : 70:10:5C:22:83:80
</code></pre>

<p>The interfaces MAC, then look like:</p>

<pre><code>MySwitch#show interface FastEthernet0/1
Hardware is Fast Ethernet, address is 7010.5c22.8381
...snip...

MySwitch#show interface vlan87
Hardware is EtherSVI, address is 7010.5c22.83c6
...snip...
</code></pre>

<p>Then, if I inspect a CDP packet received from a switch, the MAC address on the packet is the actual ""port"" MAC address. </p>

<p>Is there a reliable way to infer the switch ""Base ethernet MAC Address"" from receiving such a CDP interface MAC Address, so that I can use that ""Base ethernet MAC Address"" as a globally unique identifier for the switch device equipment on the network?</p>
","<blockquote>
  <p>Is there a reliable way to infer the switch ""Base ethernet MAC Address"" from receiving such a CDP interface MAC Address, so that I can use that ""Base ethernet MAC Address"" as a globally unique identifier for the switch device equipment on the network?</p>
</blockquote>

<p><a href=""http://ccie20728.wordpress.com/2010/10/07/mac-addresses-of-switches/"" rel=""nofollow"">You can't determine the base ethernet mac from CDP without guessing or assumptions</a> about how Cisco behaves today (as well as future behavior).  On the other hand, if all you want is a unique identifier, use the Chassis serial number; however, that would require polling the CDP source for <a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?local=en&amp;translate=Translate&amp;objectInput=1.3.6.1.2.1.47.1.1.1.1.11"" rel=""nofollow"">entPhysicalSerialNum</a>... a small price to eliminate guesswork.</p>

<p><a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?local=en&amp;translate=Translate&amp;objectInput=1.3.6.1.2.1.47.1.1.1.1.11"" rel=""nofollow"">entPhysicalSerialNum</a> has the added bonus of working across many of Cisco's current platforms.</p>

<p><em>Sample SNMP walk of <code>entPhysicalSerialNum</code>:</em></p>

<pre><code>[mpenning@tsunami ~]$ snmpbulkwalk -OXsq -v 2c -c ciscoro -m ENTITY-MIB \
  172.16.1.200 entPhysicalDescr
entPhysicalDescr[1] 2650 chassis
entPhysicalDescr[2] 2600 Chassis Slot
entPhysicalDescr[3] C2600 Mainboard
entPhysicalDescr[4] 2600 DaughterCard Slot
entPhysicalDescr[5] 2600 DaughterCard Slot
entPhysicalDescr[6] AIM Container Slot 0
entPhysicalDescr[7] 2600 Chassis Slot
entPhysicalDescr[8] One port Fastethernet TX
entPhysicalDescr[9] AmdFE
entPhysicalDescr[10] AmdFE
[mpenning@tsunami ~]$ snmpbulkwalk -OXsq -v 2c -c ciscoro -m ENTITY-MIB \
  172.16.1.200 entPhysicalSerialNum
entPhysicalSerialNum[1] JAB05290Z8Q
entPhysicalSerialNum[2]
entPhysicalSerialNum[3] yyyyyyyyyyy
entPhysicalSerialNum[4]
entPhysicalSerialNum[5]
entPhysicalSerialNum[6]
entPhysicalSerialNum[7]
entPhysicalSerialNum[8] 25809045
entPhysicalSerialNum[9]
entPhysicalSerialNum[10]
[mpenning@tsunami ~]$
</code></pre>
","2696"
"Why we can not ping to multicast address 224.0.0.9 of RIP","3102","","<p>We know that RIP v2 uses multicast address 224.0.0.9 for periodic broadcast of routing table. So it means that every router configured with RIP V2 is monitoring for any packet with destination address of 224.0.0.9. </p>

<p>So now if I ping that ip address; since router si listening to that ip, I should get a reply. But when I tested it on both GNS3 and Packet Tracer, no reply came.</p>

<p>I would like to know what is the reason.</p>

<p>Thank you in advance.</p>
","<p>Damon, I'm afraid there is something wrong with your specific implementation.  I, personally, can't think of an instance where a router <strong>doesn't</strong> respond to an icmp request on any of it's interfaces.  Others, please chime in if that's inaccurate.</p>

<p>At any rate, I mocked it up in GNS3 to make sure there weren't any funky software bugs.</p>

<p><img src=""https://i.stack.imgur.com/o4DJ5.png"" alt=""GNS3 Network Diagram""></p>

<p>Basic configurations were set up on the interfaces with each router having it's router number as the <code>lo0</code> interface address (i.e. R1 - <code>1.1.1.1</code>).  For verification, here's the rip routing table.</p>

<pre><code>R1#show ip route rip
     2.0.0.0/32 is subnetted, 1 subnets
R       2.2.2.2 [120/1] via 10.1.1.2, 00:00:07, FastEthernet0/0
     3.0.0.0/32 is subnetted, 1 subnets
R       3.3.3.3 [120/1] via 10.3.3.3, 00:00:26, FastEthernet0/1
     10.0.0.0/24 is subnetted, 3 subnets
R       10.2.2.0 [120/1] via 10.3.3.3, 00:00:26, FastEthernet0/1
                 [120/1] via 10.1.1.2, 00:00:07, FastEthernet0/0
R1#
</code></pre>

<p>When pinging the multicast address of <code>224.0.0.9</code>, 3 replys came back; <code>R2</code> sent a reply, <code>R3</code> sent a reply, and <code>R1</code> replied to itself because it is also listening for that address.</p>

<pre><code>R1#debug ip icmp
ICMP packet debugging is on
R1#ping 224.0.0.9 source lo0 repeat 1

Type escape sequence to abort.
Sending 1, 100-byte ICMP Echos to 224.0.0.9, timeout is 2 seconds:
Packet sent with a source address of 1.1.1.1

*Mar  1 00:15:41.163: ICMP: echo reply sent, src 1.1.1.1, dst 1.1.1.1
*Mar  1 00:15:41.163: ICMP: echo reply rcvd, src 1.1.1.1, dst 1.1.1.1   &lt;--- R1 Response
*Mar  1 00:15:41.179: ICMP: echo reply rcvd, src 10.1.1.2, dst 1.1.1.1  &lt;--- R2 Response
*Mar  1 00:15:41.179: ICMP: echo reply rcvd, src 10.3.3.3, dst 1.1.1.1  &lt;--- R3 Response
Reply to request 0 from 1.1.1.1, 8 ms
Reply to request 0 from 10.3.3.3, 24 ms
Reply to request 0 from 10.1.1.2, 20 ms
R1#
</code></pre>

<p>Pinging a multicast address will generate a response from participants listening to that address.</p>
","14761"
"How to find out TCP/UDP latency of your network?","3100","","<p>Many people often suggest you to use <code>ping</code> command to find out your network latency. But it is false and a myth you often find in articles on Internet.
ICMP ping was never designed to find out latency because it is given very low priority for routing and ICMP packets may be routed over completely different path from what your TCP/UDP packets are being sent. 
The routes which are chosen for sending ICMP packets can be longer and highly occupied with other traffic and thus they can never give you true result.
ICMP <code>ping</code> was designed for checking connectivity with a server. I want to find the latency of TCP/UDP route. Is it possible?</p>
","<p>If you're asking if you can measure latency using TCP or UDP packets, the answer is a qualified yes.  There is software you can install on servers that will generate TCP/UDP flows, and you can measure the latency from that.  If you have newer Cisco routers, you can use a feature called IP SLA where the routers will generate traffic. </p>

<p>All these assume you can install software on the target server, or you have access to the routers.  The advantage of Ping is that no additional software is needed.</p>

<p>You can also capture live traffic with Wireshark or something similar and analyze the packet flows to calculate latency.</p>

<p>All the caveats that @ronmaupin mentions still hold true -- latency continuously varies as traffic conditions change.  Unless the servers you use are dedicated for this purpose, their changing load can influence your results.</p>
","35383"
"Fortigate HA: how to locate switch port connected to passive unit?","3098","","<p>In a new customer's network I have found the following scenario:</p>

<p><img src=""https://i.stack.imgur.com/gBvyd.png"" alt=""Diagram""></p>

<ul>
<li>Fortigate 1 and 2 form and HA cluster in active-passive mode. The HA link is just a cable connecting them directly. </li>
<li>Racks A and B are a several meters apart and  cables between them run through the ceiling. It is not possible to follow them and they are not identified: no pannels, no labels, ... </li>
<li>Port 1 of each Fortigate is connected to a switch but customer doesn't know the switch ports. </li>
<li>All switch ports are access ports in the default VLAN. Fortigate port 1 is default gateway for the subnet associated to this VLAN</li>
</ul>

<p>In order to locate the switch ports, I considered  connecting my PC in one switch, setting up an address of the subnet and ping the default gateway. Then check ARP looking for the  MAC address of the default gateway and finally search for this MAC address in the CAM of both switches. However, I realized this will make me  discover only the switch port connected to the active Fortigate unit. </p>

<p>Is there a way to track down the switch port connected to the passive Fortigate unit, without disconnecting the cable on firewall side, neither forcing a transition of the cluster active unit?</p>
","<p>What you can do is SSH to the Active unit, then run:</p>

<pre><code>execute ha manage &lt;x&gt;
</code></pre>

<p>where x is the ID of the other unit.</p>

<p>Then run</p>

<pre><code>config system interface
edit ""port1""
set status down
next 
edit ""port1""
set status up
end
</code></pre>

<p>You can then log on to the switch (assuming it is logging interface UP/DOWNS) and see which interface went down.</p>
","1875"
"High-Density WiFi & 2.4GHz Co-channel Interference design","3096","","<p><em>The issue</em>: CCI (Co-channel Interference) on 2.4GHz.</p>

<p><em>The Environment</em>: 40 seats per classroom. Higher-ed, so extremely mixed client base.
AP-on-a-stick set to 24Mb lowest Mandatory data rate &amp; lowest Tx power setting (2 dBm)</p>

<p><em>The Problem</em>: Needing to disable 2.4GHz radio's to achieve the required density does not seem optimal. Am I going about this wrong?</p>

<p><em>The plan</em>:</p>

<p>I've used the following formula for AP density and number of radios:</p>

<ul>
<li>TTc = Target TCP/UDP Throughput, per client</li>
<li>TCc = Throughput Capabilities of client</li>
<li>CUm = Maximum realistic Channel Utilization</li>
<li><p>c   = Number of clients</p>

<p>TTc / TCc / CUm * c = # of Radios</p></li>
</ul>

<p>At 40 seats per classroom, assuming each student has a laptop and a smartphone or tablet, with a target throughput of 3Mbps for laptops &amp; 1Mbps for smartphone/tablets:</p>

<ul>
<li>Laptops: 3Mbps / 150 / .8 * 40 = 1</li>
<li>Smartphone/Tablet: 1Mbps / 30 / .8 * 40 = 1.6</li>
</ul>

<p>Total radios needed per classroom = 2.6. Each AP having 2 radios, this brings me to 1 AP per classroom; if rounding down. All classrooms are in use, and fully populated every day. Current client base shows about 30% 5GHz capable, campus-wide. I expect this number to increase rapidly as most clients are becoming 5GHz capable.</p>

<p>Antenna in use: <a href=""http://www.cisco.com/en/US/docs/wireless/antenna/installation/guide/ant2566p4w.pdf"" rel=""noreferrer"">AIR-ANT2566P4W-R (Dual-band patch)</a></p>

<p>PDF picture is result of placing the AP/Antenna at the front of classroom (facing East, or away from the hallway).  There is very little attenuation between the rooms (sheetrock walls).  This is a 3-story building, with same layout on each floor.</p>

<p><em>Current plan</em>:</p>

<p>One AP per classroom, with patch antenna mounted facing east, for classrooms which have an exterior wall (see diagram), except using Mechanical down-tilt on first floor to reduce the signal in the rooms 'behind' the Anetanna. 2nd &amp; 3rd floors have antenna mounted as drawn, w/ no downtilt. Using 20MHz 5GHz channels, and disabling some of the 2.4GHz radio's, to reduce CCI.</p>

<p>Interior classrooms will utilize same patch antenna, again using down-tilt on first floor and not on upper floors. Disabling some of the 2.4GHz radio's. If down-tilt is utilized on 2nd/3rd floors, the signal penetrates the floors too much.</p>

<p>Options I've considered:</p>

<ul>
<li>Purposefully creating attenuation 'behind' the antenna (mesh on wall, RF blocking paint etc.) to reduce the signal 'behind').</li>
<li>Using non-Cisco antenna, with a better front-to-back ratio, which would reduce CCI as a result of the radiation of signal 'behind'. Not sure if an equivelant one exists. Essentially, I'd benefit from a similiar radiation patter, minus the back-lobes.</li>
<li>Using internal antenna, and just disabling more 2.4GHz radio's (ea. antenna is ~500$)</li>
</ul>

<p>The picture represents the results of having an antenna mounted in room 222, pointing out/east/towards the exterior wall; and client RSSI readings from various locations.</p>

<p><img src=""https://i.stack.imgur.com/aU6nk.jpg"" alt=""ap-on-a-stick_results""></p>
","<p>You seem to be going about this the right way (which is the only real question I can find in your post), but I will throw in a few more considerations and/or options.</p>

<ol>
<li>With this many APs deployed and as many users as you expect (and the other non-802.11 devices they bring with such as bluetooth), what is the noise floor in 2.4GHz?  It may be that your noise floor is in the -70 to -80 range, which means that ""usable"" signal outside the room is nominal.</li>
<li>You mentioned RF paint (or mesh), behind the APs.  Another option to consider is using it on all walls and deploying two APs per room (for redundancy and extra capacity).  You may also need to use it on ceilings of rooms below.  However, test any product before using it widely as some do not work as advertised.</li>
<li>You mention that your transmit power is  set to the lowest setting (2dBm) and your antenna is 6dBi.  Since you can't turn down the transmit power anymore, you could consider a lower gain antennas or use <a href=""http://www.terra-wave.com/shop/accessories-attenuators-c-1017_1019_98.html"" rel=""noreferrer"">attenuators</a> to further decrease the signal strength.  You will want to make sure that you are able to produce enough signal for a good connection (and high data rates) for a range of devices that will likely be found in the room.</li>
<li>Test. Test. Test.  High density deployments are a challenge, and the challenges change all the time as technology and the types of devices users bring into the environment are always changing.  Unfortunately, you can't just set it in place and walk away.</li>
<li>Realize that there will be problems and issues.  This is just a fact of life in an environment where you don't have control over devices that will be brought onto your wireless network. Keep a list of device details that have been reported as having issues (type, make, wireless chipset, driver version, OS, what steps resolved the issue, etc) as this will allow you to start finding trends and general solutions so you can provide information (i.e. ""try these steps"" or ""avoid this hardware"") to your support staff and/or end users.</li>
<li>Subscribe to mailing lists and utilize resources such as forums and industry blogs regularly to keep aware of problems that might be the result of OS updates or other problems.  Some examples: <a href=""http://www.educause.edu/discuss/networking-and-emerging-technologies/wireless-local-area-networking-constituent-group"" rel=""noreferrer"">Educause wireless-lan mailing list</a> (probably applies since you are an education organization of some sort), <a href=""http://community.arubanetworks.com/t5/Discuss/ct-p/discuss"" rel=""noreferrer"">Aruba Airheads forums</a>, <a href=""http://community.ubnt.com/t5/custom/page/page-id/Forums"" rel=""noreferrer"">Ubiquiti forums</a>, <a href=""https://supportforums.cisco.com/community/netpro/wireless-mobility"" rel=""noreferrer"">Cisco Wireless-Mobility support forums</a>, <a href=""http://www.theruckusroom.net/"" rel=""noreferrer"">Ruckus Room</a> (while a number of these are vendor sites, there can be very good information on them and many wireless problems will apply to other vendor environments as well).</li>
</ol>

<p>Good luck.</p>
","3395"
"How is a TCP connection maintained over a changing IP address","3094","","<p>I remember when I connected to the internet via the phone line and a 56kbps modem, changing ISPs was as simple as changing the phone number dialled by the modem. </p>

<p>I remember that my IP address would change every 1 minute, without a break in connection. But I also remember downloading large files over HTTP, sometimes downloads would take hours to complete. </p>

<p><strong>In a situation like this, how does the TCP connection remain open, while the IP address changes frequently?</strong></p>

<p>Also, as a side question... I live in the UK, so it's all fibre optic and static IP's now, I'd be interested to know if other places in the world still rely on technology like this.</p>
","<p>The TCP connection cannot stay open with a changing IP, because a connection is defined by source IP+Port and destination IP+Port. If one of these changes, then you don't have the same connection anymore.</p>

<p>If you need to maintain a connection when the IP to your ISP changes, then you should not use this IP as outgoing, but instead built a tunnel to some VPN server outside. The VPN will give you a constant IP, even if the IP you got from the ISP changes. Another option would be to write your application so that it notices changes of IP and reconnects and resumes traffic.</p>
","12566"
"How to connect to a POTS line via a 66 block?","3091","","<p>Today I had a POTS line installed to my 66 block/DEMARC.  I need to hook-up a phone for this line for my boss.  I'm assuming I can just wire the appropriate patch cable into the 66 block, patch it to his phone port and plug the phone in on the other end in his office.</p>

<p>After inspecting the 66 block in the telco room I realize I don't really understand how it works.  Here's an image of the 66 block, where the phone line has been installed into 'slot #2'.</p>

<p><img src=""https://i.stack.imgur.com/aw7Rl.jpg"" alt=""punch down box""></p>

<p>This is the patch cable I want to use.  It's just 4 wires, open on one end, and an RJ45 on the other. (Image because the colors look atypical)</p>

<p><img src=""https://i.stack.imgur.com/I52PC.jpg"" alt=""patch cable""> </p>

<p>Is my assumption in how to hook up this line correct? </p>

<p>If so, <strong>which wires do I put into which terminals specifically?</strong> (That's what I don't understand.)</p>

<p>Additional note: I do not have any sort of tone/dial tone detection equipment, the line is installed to ""slot #2.""</p>
","<p>The black and yellow pair should be terminated on the pins just to the right of where the phone company terminated the pair. You can look at the pair above the pair you want and see someone has terminated something right above where you want to terminate.</p>

<p>That's called a 66 block and it has 50 rows of terminals by four columns. Each row in the left two columns are connected and each row in the right two columns is connected, but the left and right half are not connected.</p>

<p>So you need to go to the second column from the left and the third and fourth rows.</p>

<p>Now it sort of matters which one you terminate on the third row and which one you terminate on the fourth, but for your situation it's not worth worrying about.</p>
","17883"
"Can't configure the Cisco CP-8851 IP Phone","3090","","<p>I do not have a cisco contract or license, but I did order the Cisco CP-8851 IP Phone from Amazon, and was hoping that I could configure it to work with my VoIP SIP PBX.  But I can't seem to log into the Web GUI to configure anything, it seems pretty locked down.  When I go to try to download anything from Cisco, it seems that the Cisco site will not let me because I don't have an active contract.  </p>

<p>How else could I configure my device to run on my VoIP PBX?  I have the Cisco 525G2a and was able to configure it from the Web GUI just fine, but I wanted a nicer phone.</p>
","<p>here i can gave you the basic steps you need and i'll guide you to how accomplishing this proccess </p>

<p>By default most Cisco VoIP phones come configured for Call Manager, which uses the 'Skinny' protocol - SCCP.
most of other PBX has 2 implementations for this channel </p>

<p>•   Skinny implements a very basic set of telephone functions and ships with asterisk.<br>
•   SCCP has implemented more of the SCCP protocol, so some class 5 features (hold, transfer, forward, etc) should work.</p>

<p>However, cisco phones can be reconfigured to use SIP (recommended for use with other PBX than CUCM):<br>
make sure you have the next </p>

<ul>
<li>DHCP - By far the easiest way to configure the phones IP address is via DHCP, make sure you have a fully working DHCP server before continuing.</li>
<li>TFTP Server - The phone picks its firmware and configuration up from a tftp server and you'll therefore need to have one on your LAN for this to work.</li>
<li>Download Firmware , i know it is impossible for the normal users but may you can get from any integrator you know or from internet file sharing sites</li>
<li>Create The Config Files . please check this link <a href=""http://wiki.siftah.com/Cisco_7960G_IP_Phone_on_Asterisk"" rel=""nofollow"">Asterisk</a>
it is taking Asterisk as  an example for free PBX</li>
</ul>
","22524"
"show ip route shows interface with /32 subnet mask","3082","","<p>I am new to networking, and currently studying about how router learn different routes.
One of my lecture slides shows the following,</p>

<p>First of all, please have a look at this network,</p>

<p><a href=""https://i.stack.imgur.com/4AH7z.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/4AH7z.png"" alt=""enter image description here""></a></p>

<p>I know that <code>link local</code> is created in the routing table when interface is configured, and <code>connected</code> is created when an interface is active.</p>

<p>Now, I tried the same scenario in Packet Tracer and here is what I got when i type <code>show ip route</code> command,</p>

<pre><code>Router#show ip route 
Codes: C - connected, S - static, I - IGRP, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
       E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP
       i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area
       * - candidate default, U - per-user static route, o - ODR
       P - periodic downloaded static route

Gateway of last resort is not set

C    192.168.10.0/24 is directly connected, FastEthernet0/0
</code></pre>

<p>My question is,</p>

<ul>
<li>If the interface is active why there is still two entries (<code>C</code> and <code>L</code>) in routing
table (in the photo), and just single <code>C</code> entry in my network ?</li>
<li>How come the diagram shows the ip address for link local
with subnet mask of <code>32</code> because when I tried assigning ip address with <code>/32</code> subnet mask to this interfacce, I got bad mask error  ?</li>
</ul>
","<p>Assigning a /32 to an interface that connects to something else doesn't make any sense.  You can assign the /32 to a loopback interface:</p>

<pre><code>interface Loopback0
 ip address 192.168.1.1 255.255.255.255
</code></pre>

<p>If you want to assign the <code>192.168.10.1</code> address to the GigabitEthernet0/0 interface which uses <code>192.168.10.0/24</code>:</p>

<pre><code>interface GigabitEthernet0/0
 ip address 192.168.10.1 255.255.255.0
</code></pre>

<p>This results in the network <code>192.168.10.0/24</code> entry in the routing table as a connected route (<code>C</code>).  I suppose it depends on the IOS version, but you can also get a local (not link local which is something else, entirely) route to the specific (<code>/32</code>) address assigned to an interface in your router.  My IOS does this.  The version you have doesn't show the <code>L</code> in the codes, whereas mine does as the first entry:</p>

<pre><code>Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area 
       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
       E1 - OSPF external type 1, E2 - OSPF external type 2
       i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2
       ia - IS-IS inter area, * - candidate default, U - per-user static route
       o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP
       a - application route
       + - replicated route, % - next hop override
</code></pre>

<p>`</p>
","22615"
"Pfsense with WAN (NIC 1) and routing between two networks(NIC 2 and 3)","3078","","<p>I have a server with three NICs running PfSense. The first NIC connects to my ISP, the second NIC connects to local computers in my office (LAN-1). For the third NIC(LAN-2), i have connected it to a computer and i want it to be able to connect to the second NIC(LAN-1) as well as the first(WAN).</p>

<p><strong>NIC 1 = gateway  = WAN
NIC 2 = LAN-1   = 172.30.0.3/16
NIC 3 = LAN-2   = 172.40.0.3/16</strong></p>

<p>Problem is that is that i can ping LAN-2(172.40.0.3)  from LAN-1(172.30.0.0/16)  but i cannot ping or trace anything from LAN-2 to LAN-1, or even to the internet. When i ping from LAN-2, there is no reply, not even a timeout.. it stays blank till i disconnect and it give an destination host unreachable message.</p>

<p>The pfsense version is 2.2.3-RELEASE (amd64) </p>

<p>Kindly help me out.</p>
","<p>The firewall seems to consider your LAN-1 as Inside, and LAN-2 as Outside.  You need to fix the firewall rules.</p>

<p>While you are at it, double-check that the WAN connection is an Outside connection.</p>
","22309"
"Why do I get 8 addresses and 6 hosts on a /29 subnet?","3074","","<p>I am moving my company to a leased line and in their brochure they have mentioned that I will be getting a /29 IPs. When I wanted to lookup how many IP addresses that will be, this page <a href=""http://www.aelius.com/njh/subnet_sheet.html"" rel=""nofollow"">http://www.aelius.com/njh/subnet_sheet.html</a> , I found this line:</p>

<pre><code>    Addresses   Hosts   Netmask         Amount of a Class C
/30     4       2       255.255.255.252     1/64
/29     8       6       255.255.255.248     1/32
</code></pre>

<p>While I understand how I get 8 addresses, (since a /29 means 3-bits for addresses, given me 2^3 = 8 addresses), I don't understand what does ""6 Hosts"" mean? What is the differentiation between a host and an address in this case? How does it affect me?</p>

<p>Also, if someone could clarify what ""Amount of a class C"" means. I am thinking it means the ratio of addresses in a particular subnet to the total addresses in a class C network. Is this right?</p>
","<p>Like you said, a /29 leaves 3 bits for addresses.  However, the first address is the network address and cannot be used for a host.  Likewise, the last address is the broadcast address and also cannot be used.</p>

<p>Regarding your class C question, see <a href=""https://en.wikipedia.org/wiki/Classful_network"">https://en.wikipedia.org/wiki/Classful_network</a>.  However, the class A, B, and C terms are often used incorrectly to denote /8, /16, and /24, respectively.  More than likely, that's what is meant when they are referring to the ""amount of a class C"".  They are referring to a /24, which has 256 addresses - 254 which are usable for hosts.</p>
","18341"
"Block Inter-Subnet Routing -Ubiquiti Edge Router","3074","","<p>I would like to know how to block routing between subnets on my Ubiquiti EdgeRouter. These subnets are on 6 different VLANs, and the layout goes like this:</p>

<p>VLAN 1    -  10.0.0.1/24 (management)</p>

<p>VLAN 100 - 10.1.1.1/24</p>

<p>VLAN 200 - 10.2.1.1/24</p>

<p>VLAN 300 - 10.3.1.1/24 (guest network)</p>

<p>VLAN 400 - 10.4.1.1/24</p>

<p>VLAN 450 - 10.4.2.1/24 (guest network)</p>

<p>I want VLAN 1 to have access into all the other networks, since it is the management network, and access to it is heavily secured, but I do not want any of the other networks to be able to talk to each other at all. </p>

<p>I would also like to allow a group of admin computers access to any subnet either from VLAN 200's subnet, <em>or ideally,</em> from any subnet (based on MAC address I suppose..)</p>

<p>I feel like this should be fairly simple to implement via some form of ACLs or Firewall rules, but I do not have a strong enough grasp of these concepts to implement this at this point in time. </p>

<p>Thanks in advance for your help!</p>
","<p>Chapter 5 of the manual <a href=""http://dl.ubnt.com/guides/edgemax/EdgeOS_UG.pdf"" rel=""nofollow"">here</a> should get you started. </p>

<p>What you want to do is: </p>

<ul>
<li><p>Allow traffic from your admin computers to anywhere in 10.0.0.0/8</p></li>
<li><p>Deny all traffic from 10.0.0.0/8 to 10.0.0.0/8</p></li>
<li><p>Permit all traffic to 0.0.0.0/0  (assuming those other vlans are allowed to reach the Internet).</p></li>
</ul>

<p>Rules are processed in order and the first rule they hit will be the effective one so your management computers will ""hit"" the first rule and be allowed.  Other computers trying to reach other vlans will ""hit"" the second rule.  Traffic that is not destined to other vlans (source and destination not both within 10.0.0.0/8) will be allowed (internet traffic). </p>
","19155"
"Is it possible to connect two private eBGP peers with the same AS number?","3072","","<p><strong>The Problem</strong></p>

<p>A third party has implemented a small network and private BGP setup within one of our branches. We need to setup a eBGP peer relationship with this network. However we are both using the same private BGP AS number.</p>

<p><strong>The Solution</strong></p>

<ol>
<li><em>One of us changes our BGP AS number</em> - This isn't out of the question, and even if there is another solution but its overly complex we may still do this. </li>
<li><em>BGP Confederation</em> - In my research it appears that setting up a BGP Confederation between the peers might be a work around. The basic idea would be to sub-divide the shared private AS number into multiple private AS numbers. I'm not entirely sure yet whether this would solve the problem properly.</li>
<li><em>Other solutions</em>? It is here I'm looking for more advice on whether it is possible to work around this problem is an effective way.</li>
</ol>
","<p>Yes.</p>

<p>Option 1 is likely your best bet for simplicity's sake, but you <em>can</em> use the confederation method if you don't want to change the ASN. You can also do <code>neighbor x.x.x.x local-as &lt;as&gt;</code> in the BGP config but this prepends an ASN of your choosing onto the path, rather than replace the ASN in the path, so updates from one router to the other would be dropped anyway. Unless there's a <em>really</em> good reason as to why you want to maintain the eBGP session, you can also migrate to an iBGP session vs eBGP.</p>

<p>As @DanielDib has pointed out below, a third option (if you're running a version of IOS that supports it) is to use <code>local-as</code> in conjunction with <code>replace-as</code> and <code>no-prepend</code> to strip your ASN from the AS_PATH and send a different one:</p>

<pre><code>router bgp [your asn]
  neighbor x.x.x.x remote-as [peer-asn]
  neighbor x.x.x.x local-as [new asn] no-prepend replace-as
</code></pre>
","5365"
"Cisco Nexus 7k as NTP server","3071","","<p>Anyone have experience with setting up their Nexus 7k core as an NTP server?<p> 
I was thinking the code would look like below:</p>

<pre>ntp master stratum 2
ntp server ns.arc.nasa.gov prefer
ntp server bitsy.mit.edu
ntp source-interface vlan 1 </pre>
","<p>That is all you need to get going, however it isn't an ideal configuration. I'll ignore security and local NTP architecture and focus on your current config.</p>

<p>The minimum recommended NTP servers is generally 3, but preferably 4. The reason for this is not only resiliency but it gives the client (your N7k) a better reference if any of the upstream servers start experiencing issues or clock drift.</p>

<p>With NTP, when a server is well out of sync, the client will disregard it as a valid source (even if it is a higher stratum than the others!). If you have two servers configured then how do you tell who is out of sync? The third server gives the client another point of reference that can be used to tell who is out of sync (the more the merrier, up until a certain point).</p>

<p>Also, I think bitsy.mit.edu is a Stratum 3 - you might be able to find a few Stratum 2 servers that are close by instead. If you have a reason for those particular servers then feel free to ignore this.</p>

<p>Tl;dr yes it will work.</p>
","10621"
"Difference between LLDP and LLDP-MED","3063","","<p>What is the difference between LLDP and LLDP-MED? Is LLDP-MED an add-on to LLDP or something completely different?</p>
","<p>Media Endpoint Discovery is an enhancement of LLDP, known as LLDP-MED, that provides the following facilities:</p>

<ul>
<li>Auto-discovery of LAN policies (such as VLAN, Layer 2 Priority and Differentiated services (Diffserv) settings) enabling plug and play networking.</li>
<li>Device location discovery to allow creation of location databases and, in the case of Voice over Internet Protocol (VoIP), Enhanced 911 services.</li>
<li>Extended and automated power management of Power over Ethernet (PoE) end points.</li>
<li>Inventory management, allowing network administrators to track their network devices, and determine their characteristics (manufacturer, software and hardware versions, serial or asset number).</li>
</ul>

<p>The LLDP-MED protocol extension was formally approved and published as the standard ANSI/TIA-1057 by the Telecommunications Industry Association (TIA) in April 2006.</p>
","1283"
"How to configure native vlan on D-Links switches","3027","","<p>My infrastructure contains exclusively D-Link switches, I wonder if there is a way to configure native vlan on trunk ports?</p>

<p>I need to configure native on DGS-3100 48</p>
","<p>The DGS-3100 series supports IEEE 802.1Q VLANs. </p>

<p>The switch's default is to assign all ports to a single 802.1Q VLAN named <em>default.</em>
The <em>default</em> VLAN has a VID = 1.</p>

<p>If a port is configured with <em>Tagging</em> enabled, then incoming frames that come with a tag will be untouched and will maintain its VID, but if they come untagged then it will put a VID number.</p>

<p>This port will be a ""trunk port"" (capable of receiving tagged traffic from one or more VLANs).</p>

<p>For more details, here is the configuration <a href=""https://dl.dropboxusercontent.com/u/338963/dgs310048.pdf"" rel=""nofollow"">manual</a>  (<strong>Tagging and untagging</strong>, page 68).</p>
","32499"
"Writing text to the log","3026","","<p>Is it possible to write an arbitrary line of text to the log of a Cisco IOS 12.x device?</p>

<p>I should like to be able to put in markers when fetching configs via TFTP and I would like to be able to have log lines á la</p>

<pre><code> May 30 14:14:00.000: %CONFIG-REMARK: Halfway through the script! Now on to SomethingThatMightFail!
 May 30 14:14:05.000: %CONFIG-REMARK: SomethingThatMightFail didn't fail! Woo! Continuing!
</code></pre>
","<p>You can use the <code>send log</code> command:</p>

<pre><code>switch#send log Halfway through the script!
</code></pre>

<p>gives my on a Catalyst 3750 with IOS 12.2</p>

<pre><code>May 31 16:36:18: %SYS-2-LOGMSG: Message from 1(name): Halfway through the script!
</code></pre>

<p>and with IOS 15.0:</p>

<pre><code>May 31 16:38:08: %SYS-7-USERLOG_DEBUG: Message from tty1(user id: name): Halfway through the script!
</code></pre>
","1476"
"Can I poll firewall counters on Juniper routers via SNMP","3026","","<p>I have a firewall counter on a Juniper MX router (<code>set firewall filter myfilter term myterm then count mycounter</code>) and want to poll its packet/byte count via SNMP. I searched for an OID but I'm unable to find one. Is it possible at all to poll firewall filter counters via SNMP and if so which MIB/OID do I use?</p>
","<p>Yes, this data is populated in the Firewall MIB</p>

<ul>
<li>.1.3.6.1.4.1.2636.3.5.2.1.5 contains your counters</li>
<li>.1.3.6.1.4.1.2636.3.5.2.1.6 contains your filter names</li>
<li>.1.3.6.1.4.1.2636.3.5.2.1.7 contains your counter names</li>
</ul>

<p>show firewall filter RE-FILTER | match mgmt_ntp<br>
mgmt_ntp           <strong>199728</strong>                 2628</p>

<p>% snmpbulkwalk jnpr .1.3.6.1.4.1.2636.3.5.2.1.7|grep mgmt_ntp<br>
.1.3.6.1.4.1.2636.3.5.2.1.7.<strong>9.82.69.45.70.73.76.84.69.82.8.109.103.109.116.95.110.116.112.2</strong> = STRING: ""mgmt_ntp""</p>

<p>% snmpbulkwalk jnpr .1.3.6.1.4.1.2636.3.5.2.1.5.<strong>9.82.69.45.70.73.76.84.69.82.8.109.103.109.116.95.110.116.112.2</strong><br>
.1.3.6.1.4.1.2636.3.5.2.1.5.9.82.69.45.70.73.76.84.69.82.8.109.103.109.116.95.110.116.112.2 = Counter64: <strong>199728</strong></p>

<p>More information on <a href=""http://www.juniper.net/techpubs/en_US/junos/topics/concept/mib-firewall-junos-overview.html"">juniper.net</a></p>
","1915"
"Ethernet termination density per rack and space planning","3013","","<p>I am in the process of designing the network for a new office space. To give a little bit of background...</p>

<p>There will only be one network closet to start with potential for an IDF in the future. This closet will have approximately 600 termination points. My question comes down to design. Is this too much for one rack? Should I split this into two racks? My only thought with why this should happen is strictly ease of cable management.</p>
","<p>I would consider this too much for one rack.  You always want to leave yourself at least some space for the future.  I have seldom been in situations where less space is used in a rack over time, rather quite often the opposite (you end up needing more).</p>

<p>Figure it this way: </p>

<ul>
<li>Typical 48 port switch = 1U</li>
<li>Typical 48 port patch panel = 2U</li>
<li>Typical full rack = 42U</li>
</ul>

<p>For 600 terminations, you will need about 39U worth of switches and patch panels, which doesn't leave much room, especially for things like UPSes or any other equipment.  </p>

<p>If you decide you want any horizontal cable management, there isn't room unless integrated into the patch panels and then depending on brand/model, these may be 3U.</p>

<p>If you go with a chassis based switch solution (now or the future), this also wouldn't work as usually these are not as space efficient (while line cards take up only 1U, their power supplies will take up additional space).</p>

<p>If you need to add more cabling in the future, again you wouldn't have space.</p>

<p>Go for the second rack and give yourself some space.</p>

<p><strong>Edit:</strong> Adding this to comment on some of the other answers.  I left the actual rack layouts out of my answer originally as they are an issue for much discussion as there is no ""correct"" way to do it.  While several good ideas are proposed, a rack design/layout has to address the concerns of your environment and what will provide your organization a reliable and manageable solution.</p>

<p>While there are some things that should be done for any proper installation (racks should be properly grounded, if you use two post racks a ladder rack or other means of securing/stabilizing the top should be installed, etc), many of them come down to personal preference.</p>

<p>For instance, some cabling companies will tell you that you should not put patch panels on the lower 1/3-1/2 of the rack, as it is harder to terminate and prone to more errors.  Some will say you shouldn't do any sort of patch panel/switch/patch panel layout as getting access to the back of the patch panels (for additional cabling or repairs) can be restricted.</p>

<p>In earthquake prone areas, some people will tell you that you should mount your equipment in the bottom half of the rack (with heaviest items - UPSes - at the bottom) as this provides a more stable rack.  The more weight at the top of the rack, the more the rack has a tendency to sway.</p>

<p>Ultimately, you should put thought into any rack design.  Think through the tasks that you will be doing most often, the tasks that are prone to mistakes/errors or can affect other connections, the amount of space you have, your budget and any other considerations the job/site may have.</p>
","1609"
"Why can't I do a reverse DNS lookup on this IP address?","3010","","<p>I keep noticing that web pages I have open are exchanging messages with third party servers without my permission.  This is somewhat annoying, and I would like to find out which pages they are so I can close them.  I copied an IP address - 72.21.91.121 - from the TCPdump output, and Googled ""reverse dns lookup 72.21.91.121"" to see if I could find a hostname that would give me a clue as to the URL of the page and indicate which tab I should close (I tend to have like 20 to 50 tabs open at a time because I can't close anything).  I got the website lookip.net, which told me that there was no reverse DNS lookup found.</p>

<p>So I would like to know what is the reason for this.  Is this a bad lookup service?  Would I have better luck using a different one?  Or does this host just not have a hostname associated with it (that doesn't make sense; I thought all hosts had hostnames associated with them).</p>

<p>I know that if this is a third party server, the hostname wouldn't be the same as the site that's sending the packets, but it would at least be a good starting point.  I'm not very good at this, but it's something I could get better at as I learn more about how this stuff works.  Right now I'm just a novice at this networking stuff.  All I have to work with is a basic understanding of networking principles and TCP/IP.  I would like to learn more.  A lot more.</p>
","<p>Short answer: There is not requirement that IP addresses provide a reverse lookup, so there are many IP addresses that do not have any reverse DNS lookup zone associated with them.</p>

<p>Long answer: DNS was really designed to do look ups from a human readable name to an IP address. When you do normal DNS query, say for ""www.my-example.com"", the DNS query is actually a series of queries from least specific to most specific asking ""what is the IP address of host www in domain example.com?"" It may look a bit like this (simplistic):</p>

<ul>
<li>The root servers are asked for information about ""com""</li>
<li>The ""com"" servers are asked for information about ""my-example""</li>
<li>The ""my-example"" servers are asked for information about ""www""</li>
<li>You get a response of ""1.2.3.4""</li>
</ul>

<p>However, this won't work well when you do a DNS query for an IP address, such as 1.2.3.4 mainly because unlike a host/domain/URL, the most specific information point is at the end. So DNS changes things a bit and asks ""what is the server and domain of host 4 in 3.2.1.IN-ADDR-ARPA?"" which may look more like this (simplistic):</p>

<ul>
<li>The ""IN-ADDR-ARPA"" servers are asked for information about ""3.2.1""</li>
<li>The ""3.2.1"" servers are asked for information about ""4""</li>
<li>You get a response of ""www.my-example.com""</li>
</ul>

<p>Take note, that while one server may contain the information for both the ""my-example.com"" zone and the ""3.2.1.IN-ADDR-ARPA"" zones, they could also be two different servers. </p>

<p>Further, it is often the case that the servers are run by two different companies. For instance, if you pay CompanyX to host your website on their server, you may control the DNS zone for your domain pointing to the IP address of CompanyX's serve (which may be hosting many different domains from different clients) but CompanyX controls the zone for the reverse lookup of the IP address. Their reverse lookup for that IP address would likely reflect a server/domain of CompanyX's.</p>

<p>Even when an entity is entitled to control both the forward and reverse zones, they are not required to provide DNS services for either. You are perfectly within your rights to register a domain name and not provide any DNS service for it.</p>

<p>The end result is that this means that even if you do get a response to a reverse lookup, it may have no relation to the domain name of the service you are accessing. You may be accessing ""www.my-example.com"" but the reverse lookup of that IP address may give you ""server37.companyx.com"" or something else entirely.</p>
","25424"
"Locate a host on Network","3004","","<p>What is the best method of locating a particular workstation on a VLAN ?</p>

<p>I sometimes need to do this, if a workstation IP address, shows up on an ACL Deny </p>

<ol>
<li>torrent use</li>
<li>High bandwidth usage (Top Talkers)</li>
<li><p>Snort alert</p>

<p>The way I do it now,</p>

<ul>
<li>Logon to a core switch in the same VLAN</li>
<li>Ping the IP address, </li>
<li>Retrieve the MAC from the ARP table</li>
<li>Mac address lookup to see which switch it was learned from</li>
<li>logon to that switch rinse and repeat until I locate the workstation</li>
</ul></li>
</ol>

<p>sometimes this can take logging in to ~7 switches, there are specific challenges to this network that I can do nothing about at the moment. Huge VLANs (/16) with a few hundred users on each VLAN</p>

<p>in an all Cisco shop, with minimal budget using Cisco switches, there must be a more efficient way to track down host machines ?</p>

<p>EDIT: To add further details</p>

<p>Specifically I'm looking for the switch-port the user is connected to ? also some history would be great .. because my approach only works while the user is still connected, and no value when i review the logs in the morning, but the device is no longer connected.</p>

<p>There is no central DNS or Active Directory it is like a Guest Network, where only internet access is provided. I try to provide some management and a bit of security.</p>

<p>I've tried ""show ip dhcp binding | inc "" it gives me a strange MAC (with 2 extra characters) that is not the associated device MAC, I have not looked into this yet, but ARP is accurate and I'm more concerned with finding the switch port the offending machine is connected to.</p>

<p>hope this provides some clarification</p>
","<p>Take a look at <a href=""http://www.cisco.com/en/US/docs/switches/lan/catalyst6500/ios/12.2SX/configuration/guide/l2trace.html"" rel=""nofollow"">Layer2 traceroute</a> (for cisco).. Cdp should be running btw...</p>

<pre><code>Router# traceroute mac 0000.0201.0601 0000.0201.0201
Source 0000.0201.0601 found on con6[WS-C2950G-24-EI] (2.2.6.6)
con6 (2.2.6.6) :Fa0/1 =&gt; Fa0/3
con5                 (2.2.5.5        )  :    Fa0/3 =&gt; Gi0/1
con1                 (2.2.1.1        )  :    Gi0/1 =&gt; Gi0/2
con2                 (2.2.2.2        )  :    Gi0/2 =&gt; Fa0/1
Destination 0000.0201.0201 found on con2[WS-C3550-24] (2.2.2.2)
Layer 2 trace completed
Router# 
Router# traceroute mac 0001.0000.0204 0001.0000.0304 detail 
Source 0001.0000.0204 found on VAYU[WS-C6509] (2.1.1.10)
1 VAYU / WS-C6509 / 2.1.1.10 :
                Gi6/1 [full, 1000M] =&gt; Po100 [auto, auto]
2 PANI / WS-C6509 / 2.1.1.12 :
                Po100 [auto, auto] =&gt; Po110 [auto, auto]
3 BUMI / WS-C6509 / 2.1.1.13 :
                Po110 [auto, auto] =&gt; Po120 [auto, auto]
4 AGNI / WS-C6509 / 2.1.1.11 :
                Po120 [auto, auto] =&gt; Gi8/12 [full, 1000M] Destination 0001.0000.0304 
found on AGNI[WS-C6509] (2.1.1.11) Layer 2 trace completed.
Router# 
</code></pre>
","1702"
"GNS3: Local install vs Workbench","2998","","<p>Does anyone have any experience running GNS3 locally (on Windows or Mac) vs the VM Workbench? I tend to have larger and larger topologies and my 4GB of RAM get pretty loaded...</p>

<p>Anyway, can workbench calculate and utilize the idle PC value efficiently, and is there a significant performance decrease when using the VM in comparison to a local install?</p>
","<p>I'll go ahead and provide some more ""in-depth"" instructions on telling GNS3 to use a ""remote hypervisor"" (a dynamips instance listening on another machine).</p>

<p>You can even use this setup with Amazon EC2 (or another utility computing provider). A setup with a utility computing provider would also be extremely useful for testing out topologies with a <strong>very large</strong> number of routers, to see how OSPF may behave at scale, etc. I've documented how to do this at my last job (but this was before GNS3 was so popular) and we used it successfully for numerous scale tests. This would also be ideal for folks that don't want to spend the money on a high-end server but can afford to spend a few dollars for a few hours of ""server time"" for GNS3 labs, without chewing up CPU cycles on their home machines.</p>

<p>The following instructions assume your remote hypervisor is running Linux.</p>

<p>Step One: Set up your Linux box.</p>

<pre>jjensen@jjensen-dev:~$ mkdir dynamips
jjensen@jjensen-dev:~$ cd dynamips
jjensen@jjensen-dev:~/dynamips$ mkdir tmp</pre>

<p>Step Two: Set up GNS3. Edit -> IOS images and hypervisors. Click the ""External Hypervisors"" tab. Add in the IP address info for your remote hypervisor (Most of the time you can leave all the fields besides IP address as the default). Once you've filled in the IP of your remote hypervisor, click ""Save"".</p>

<p><img src=""https://i.stack.imgur.com/ISt6G.png"" alt=""add remote hypervisor""></p>

<p>Once you have your remote hypervisor added, go back to the ""IOS images"" tab and add in IOS images. There are two important bits to remember:</p>

<p>Use the ""Linux format"" directory notation (see screenshot), and make sure that the ""use the hypervisor manager"" checkbox is <strong>unchecked</strong> so that you can select the remote hypervisor that you just added. When adding the IOS image with the remote hypervisor, make sure that your remote hypervisor is selected.</p>

<p><img src=""https://i.stack.imgur.com/f9syE.png"" alt=""add IOS image""></p>

<p>Once you have your IOS image added, start up Dynamips on your remote machine.</p>

<pre>jjensen@jjensen-dev:~/network_eng/dynamips$ sudo ./dynamips-0.2.8-RC3-community-x86_64.bin -H 7200 &</pre>

<p>You should now be able to add devices to GNS3 topologies on your Windows machine, and GNS3 will communicate with the remote hypervisor on another machine. You also get the console access via PuTTy and such for free as well. Note that there isn't really a ""configuration limit"" on how you want to add your IOS images and hypervisors. You could even have it so that you have a separate remote hypervisor per IOS image if you wanted. Pretty powerful stuff.</p>

<p>If anyone could add additional answers on how to make this work with JunOS/""virtual"" Olive, I think that would also be pretty useful. :-)</p>
","1214"
"Mac / CAM entries from non-Cisco switches with Q-BRIDGE-MIB","2989","","<p>How do I do community string Indexing for other switches like <strong>D link DES 3526</strong> and <strong>Brocade Fastiron SX800</strong>?</p>

<p>I am running a java program to poll a specific vlan on a <strong>Brocade sx 800</strong> l3 switch.  The program throws a ""Time out error"". I then checked the switch log , which says <strong>community string invalid</strong>. I'm having trouble with the syntax ""community@vlanid"".</p>

<p>Displaying all Vlans and their names:</p>

<p><img src=""https://i.stack.imgur.com/IH232.jpg"" alt=""Displaying all Vlans and their names""></p>

<p>Could someone please tell me the community string indexing for switches other than Cisco?</p>

<h3>EDIT</h3>

<p>I tried the commands in CLI with Net-SNMP: </p>

<p>Poll sysDescr:</p>

<pre><code>snmpwalk -v 2c -c public 10.21.200.4 1.3.6.1.2.1.1.1
SNMPv2-MIB::sysDescr.0 = STRING: DES-3526 Fast-Ethernet Switch
</code></pre>

<p>Poll dot1dTpFdbAddress (default Vlan):</p>

<pre><code>snmpbulkwalk -v 2c -c public 10.21.200.4 1.3.6.1.2.1.17.4.3.1.1
SNMPv2-SMI::mib-2.17.4.3.1.1.0.27.17.189.90.220 = Hex-STRING: 00 1B 11 BD 5A DC
SNMPv2-SMI::mib-2.17.4.3.1.1.4.254.127.149.86.136 = Hex-STRING: 04 FE 7F 95 56 88
</code></pre>

<p>Poll dot1dTpFdbAddress (default Vlan4):</p>

<pre><code>snmpbulkwalk -v 2c -c public@4 10.21.200.4 .1.3.6.1.2.1.17.4.3.1.1
Timeout: No Response from 10.21.200.4
</code></pre>

<p>Netdisco listing all ports and corresponding MAC addresses
<img src=""https://i.stack.imgur.com/XXr1q.jpg"" alt=""Netdisco listing all ports and corresponding MAC addresses""></p>

<p>I want to retrieve all MAC addresses from individual ports. The <strong>Q-Bridge MIB</strong> shows all the ports on the switch but unfortunately the MAC address OID is not accessible. On the other hand, using the <strong>Bridge MIB</strong> lists only MAC addresses from the default Vlan.
P.S: the community string indexing ( coommstring@vlanid ) to access other vlans only works with CISCO switches.</p>
","<blockquote>
  <p>Could someone please tell me the community string indexing for switches other than Cisco?</p>
</blockquote>

<h2>Edit:</h2>

<p>This is how to poll Q-BRIDGE-MIB for mac-addresses from the only non-Cisco I have, a DLink DGS-3200.  I'm <em>not</em> using [community@vlan] for non-Cisco switches.  You're correct that this indexing only applies to Ciscos.  I expect any non-Cisco switch, which supports Q-BRIDGE-MIB to work the same way.</p>

<h3>Polling <a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?objectInput=sysDescr&amp;translate=Translate"" rel=""nofollow"">sysDescr</a> to document the switch under test</h3>

<pre><code>[mpenning@tsunami ~]$ # Demo from a DLink DGS-3200 switch
[mpenning@tsunami ~]$ snmpbulkwalk -v 2c -c public -OXsq 172.16.1.2 sysdescr
sysDescr.0 ""DGS-3200-10 Gigabit Ethernet Switch""
[mpenning@tsunami ~]$
</code></pre>

<h3>Walking <a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?objectInput=dot1qVlanStaticName&amp;translate=Translate"" rel=""nofollow"">dot1qVlanStaticName</a>: List Vlans and their text names</h3>

<pre><code>[mpenning@tsunami ~]$
[mpenning@tsunami ~]$ snmpbulkwalk -v 2c -c public 172.16.1.2 .1.3.6.1.2.1.17.7.1.4.3.1.1
BRIDGE-MIB::dot1dBridge.7.1.4.3.1.1.1 = STRING: ""default""
[mpenning@tsunami ~]$
</code></pre>

<h3><a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?objectInput=dot1qFdbDynamicCount&amp;translate=Translate"" rel=""nofollow"">dot1qFdbDynamicCount</a>: Number of mac addresses known</h3>

<pre><code>[mpenning@tsunami ~]$ 
[mpenning@tsunami ~]$ snmpbulkwalk -v 2c -c public  172.16.1.2 .1.3.6.1.2.1.17.7.1.2.1.1.2
BRIDGE-MIB::dot1dBridge.7.1.2.1.1.2.1 = Counter32: 17
[mpenning@tsunami ~]$
</code></pre>

<h3><a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?objectInput=dot1qVlanCurrentEgressPorts&amp;translate=Translate"" rel=""nofollow"">dot1qVlanCurrentEgressPorts</a>: bitmap of ports in the vlan</h3>

<pre><code>[mpenning@tsunami ~]$ 
[mpenning@tsunami ~]$ snmpbulkwalk -v 2c -c public 172.16.1.2 .1.3.6.1.2.1.17.7.1.4.2.1.4
BRIDGE-MIB::dot1dBridge.7.1.4.2.1.4.2562.1 = Hex-STRING: FF C0 00 00
[mpenning@tsunami ~]$
</code></pre>

<h3><a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?objectInput=dot1qTpFdbPort&amp;translate=Translate"" rel=""nofollow"" title=""dot1qTpFdbPort"">dot1qTpFdbPort</a>: All MAC Addresses learned</h3>

<p>The mac-addresses show up as a string of six decimal digits in the indexes to <a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?objectInput=dot1qTpFdbPort&amp;translate=Translate"" rel=""nofollow"" title=""dot1qTpFdbPort"">dot1qTpFdbPort</a>.  Note that I have a downstream switch connected to this switch on port <code>1/5</code>...</p>

<pre><code>[mpenning@tsunami ~]$ 
[mpenning@tsunami ~]$ snmpbulkwalk -v 2c -c public 172.16.1.2 .1.3.6.1.2.1.17.7.1.2.2.1.2
BRIDGE-MIB::dot1dBridge.7.1.2.2.1.2.1.0.13.101.22.202.65 = INTEGER: 5
BRIDGE-MIB::dot1dBridge.7.1.2.2.1.2.1.0.13.189.7.134.128 = INTEGER: 5
BRIDGE-MIB::dot1dBridge.7.1.2.2.1.2.1.0.13.189.7.134.129 = INTEGER: 5
BRIDGE-MIB::dot1dBridge.7.1.2.2.1.2.1.0.29.161.205.83.70 = INTEGER: 9
BRIDGE-MIB::dot1dBridge.7.1.2.2.1.2.1.0.48.27.188.167.215 = INTEGER: 2
BRIDGE-MIB::dot1dBridge.7.1.2.2.1.2.1.0.192.183.110.158.29 = INTEGER: 3

... more entries here
[mpenning@tsunami ~]$
</code></pre>

<h3><a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?objectInput=dot1dBasePortIfIndex&amp;translate=Translate"" rel=""nofollow"" title=""dot1dBasePortIfIndex"">dot1dBasePortIfIndex</a>: Map values from <a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?objectInput=dot1qTpFdbPort&amp;translate=Translate"" rel=""nofollow"" title=""dot1qTpFdbPort"">dot1qTpFdbPort</a> to an <a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?objectInput=ifIndex&amp;translate=Translate"" rel=""nofollow"" title=""ifIndex"">ifIndex</a></h3>

<pre><code>[mpenning@tsunami ~]$ snmpbulkwalk -v 2c -c public -OXsq 172.16.1.26 .1.3.6.1.2.1.17.1.4.1.2
dot1dBasePortIfIndex[1] 1
dot1dBasePortIfIndex[2] 2
dot1dBasePortIfIndex[3] 3
dot1dBasePortIfIndex[4] 4
dot1dBasePortIfIndex[5] 5
dot1dBasePortIfIndex[6] 6
dot1dBasePortIfIndex[7] 7
dot1dBasePortIfIndex[8] 8
dot1dBasePortIfIndex[9] 9
dot1dBasePortIfIndex[10] 10
</code></pre>

<h3><a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?objectInput=ifName&amp;translate=Translate"" rel=""nofollow"" title=""ifName"">ifName</a>: Map values from <a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?objectInput=ifIndex&amp;translate=Translate"" rel=""nofollow"" title=""ifIndex"">ifIndex</a> to an <a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?objectInput=ifName&amp;translate=Translate"" rel=""nofollow"" title=""ifName"">ifName</a></h3>

<pre><code>[mpenning@tsunami ~]$ snmpbulkwalk -v 2c -c public -OXsq 172.16.1.26 ifName
ifName[1] 1/1
ifName[2] 1/2
ifName[3] 1/3
ifName[4] 1/4
ifName[5] 1/5
ifName[6] 1/6
ifName[7] 1/7
ifName[8] 1/8
ifName[9] 1/9
ifName[10] 1/10
ifName[5121] System
[mpenning@tsunami ~]$
</code></pre>

<hr>

<h2>ORIGINAL:</h2>

<p>There is a mistake in your OID, you're using <code>1.3.6.2.3.1.17.4.3.1.1</code>; however, <a href=""http://tools.cisco.com/Support/SNMP/do/BrowseOID.do?local=en&amp;translate=true&amp;objectInput=dot1dTpFdbAddress"" rel=""nofollow"">dot1dTpFdbAddress</a> is <code>1.3.6.1.2.1.17.4.3.1.1</code>.</p>

<p>The difference is changing some octets, below...</p>

<pre><code>OID Incorrect: 1.3.6.2.3.1.17.4.3.1.1   &lt;--- Not this
OID Corrected: 1.3.6.1.2.1.17.4.3.1.1   &lt;--- Use this
                     ^ ^
                     | |
</code></pre>
","6071"
"Juniper SRX - interface filters vs firewall rules?","2984","","<p>I'm trying to display all firewall rule associated with a specific interface. However, the best I can find is <code>show interfaces filters</code>. I'm assuming since these are called ""filters"", they're not the same as the ""rules"" from <code>show security application-firewall rule-sets all</code>...</p>

<p>Could someone enlighten me here?</p>
","<p>You are correct, these are not the same thing.</p>

<p><strong>""Interface Filters"" / Firewall Filters</strong></p>

<p>The <code>show interfaces filters</code> command is used to show what <strong>firewall filters</strong> are applied to each interface, and in which direction.  Firewall filters are supported on just about every Juniper hardware platform.</p>

<pre><code>jhead@MX-WS-ZT-1&gt; show interfaces filters ge-0/0/0
Interface       Admin Link Proto Input Filter         Output Filter
ge-0/0/0        up    up
ge-0/0/0.0      up    up   inet  MGMT
</code></pre>

<p>In a general sense, firewall filters are far less robust than the application firewall feature.  They cannot do deep packet inspection (they operate on Layers 3 and 4), they can see things like source/destination IP or source/destination port.  The most common use for firewall filters is to protect your control/management plane on a Juniper device, here's a very basic example on how to only allow SSH.  </p>

<p><strong>NOTE:</strong> Firewall filters are generally called ACL's by other vendors and the industry.</p>

<p><strong>NOTE:</strong> Firewall filters can also be used in CoS configuration.</p>

<pre><code>jhead@SRX1&gt; show configuration firewall
    family inet {
        filter MGMT {
            term SSH {
                from {
                    port 22;
                }
                then accept;
            }
        }
    }

jhead@SRX1&gt; show configuration interfaces ge-0/0/0
unit 0 {
    family inet {
        filter {
            input MGMT;
        }
        address 172.16.67.2/24;
    }
}
</code></pre>

<p>If you want some good information, check out the <a href=""http://www.juniper.net/techpubs/en_US/junos13.1/information-products/pathway-pages/config-guide-firewall-filter/config-guide-firewall-filter.html"" rel=""nofollow"">Juniper Documentation</a>.</p>

<p><strong>Application Firewall</strong></p>

<p>The other command you referenced, <code>show security application-firewall rule-sets all</code> relates to SRX's application firewall feature.</p>

<p>The full feature set of application firewalls can get pretty unwieldy, but in short they do a much more thorough analysis of the traffic.  If you check out the <a href=""http://www.juniper.net/techpubs/en_US/junos12.1/topics/concept/application-firewall-overview.html"" rel=""nofollow"">Application Firewall Overview</a> you'll see the following text:</p>

<blockquote>
  <p>Many dynamic applications use HTTP static ports to tunnel non-HTTP
  traffic through the network. Such applications can send traffic that
  might not be adequately controlled by standard network firewall
  policies, leading to a security threat. <strong>Standard policies function
  based on IP address and port and therefore are not effective with
  these dynamic applications.</strong></p>
</blockquote>

<p>The reference to ""standard network firewall policies"" is pretty much a direct comparison to the above mentioned ""firewall filters"".  Let me know if this isn't clear, and I'll happily edit my answer.</p>
","19318"
"SonicWALL NSA 220 degraded egress performance","2982","","<p>We have a SonicWALL NSA 220 running SonicOS Enhanced 5.8.1.2-20o. Our ISP provides a symmetrical 100/100 ethernet handoff. Performance on the ingress achieves the full 100Mbps while egress only achieves ~30-40Mbps. What am I not considering in troubleshooting this? Is there anything that might cause this type of asymmetry in performance? </p>

<p>Here is what I have done so far: </p>

<p>• Disabled auto-negotiation on WAN interface and coordinated hard coded 100/Full Duplex setting on ISP gateway</p>

<p>• Confirmed MTU is 1500 bytes on all devices on the local ethernet</p>

<p>• Confirmed MTU is 1500 bytes on firewall and ISP gateway and ISP next hop </p>

<p>• Confirmed all services are disabled on SonicWall (including CFS, DPI, BWM, LB, etc.) - it is pretty much just running a stock configuration minus some port forwarding rules</p>

<p>• Observed high CPU utilization (65%-95% for periods in excess of 10 minutes under a relatively light load 58 connections) </p>
","<p>The issue was resolved by updating the firmware. Firmware was updated to 5.9.x.</p>
","3824"
"Does WiFi Router/AP change the working channel automatically during the normal use?","2981","","<p>I'm sure a lot of AP or WiFi modem/router can perform an autoscan to select the best channel to be used during the boot. </p>

<p>Is the channel selection also performed in other situations (other than device boot)?</p>
","<p>This is not a general truth, but some WiFi Routers/ AP's do change the channel without rebooting. Some reasons include, but not limit to:</p>

<ul>
<li>Noisy environment on specific channel</li>
<li>Lots of other AP's on the same channel</li>
<li>Interference with Bluetooth and/or other RF Communication</li>
<li>Intrusion Prevention/Detection Systems trigger such as routers sensing that the WPS PIN is being bruteforced by Reaver or other tools</li>
<li>Another AP with the same ESSID (name) on that channel</li>
</ul>

<p>Please note that this behavior is very manufacturer specific / firmware specific, for example some Open Source Firmware such as OpenWRT or DD-WRT can be configured to hop channels based on user defined conditions</p>
","6535"
"How to calculate subnet mask from IP Gateway","2972","","<p>Suppose I was given this IP gateway : </p>

<pre><code>199.141.27.129/26
</code></pre>

<p>How can I tell the subnet mask from the <code>/26</code>? Sometimes I notice this, for example : IP 150.10.10.10 with a mask 255.255.252.0 can be written 150.10.10.10/22 </p>
","<p>The number (26) is the number of bits in the mask:</p>

<pre><code>11111111.11111111.11111111.11000000
</code></pre>

<p>Convert it back to decimal:</p>

<pre><code>255.255.255.192
</code></pre>
","12483"
"UDLD state: tx/rx loop detected","2960","","<p>Relevant Log messages</p>

<pre><code>Feb  1 03:39:08.338 EST: %IPV6-4-DUPLICATE: Duplicate address FE80::212:44FF:FE4D:4400 on GigabitEthernet8/20
Feb  1 03:39:08.904 EST: %UDLD-SP-4-UDLD_PORT_DISABLED: UDLD disabled interface Gi8/20, transmit/receive loop detected
Feb  1 03:39:08.904 EST: %PM-SP-4-ERR_DISABLE: udld error detected on Gi8/20, putting Gi8/20 in err-disable state
</code></pre>

<p>Not Really sure where to go with this, i feel like the duplicate address message is telling in this case, however, sh run |i  yields nothing, the interface itself doesn't even have that address to begin with.. Would really like to know more about both.</p>

<p>I already understand UDLD - I'm just not familiar with that state and what to look at afterwards</p>

<p>Other output:</p>

<pre><code>sh udld gi8/20

Interface Gi8/20
---
Port enable administrative configuration setting: Follows device default
Port enable operational state: Enabled
Current bidirectional state: Transmit-to-receive loop
Current operational state: Disabled port
Message interval: 7
Time out interval: 5
No neighbor cache information stored

interface GigabitEthernet8/20
 ip address 43.160.0.229 255.255.255.252
 ip flow ingress
 ip flow egress
 ipv6 address 2607:FD28:AAAA:4::1/64
 ipv6 enable
 ipv6 ospf network point-to-point
 ipv6 ospf 21 area 0
end

GigabitEthernet8/20 is down, line protocol is down (err-disabled)
  Hardware is C6k 1000Mb 802.3, address is 0012.444d.4400 (bia 0012.444d.4400)
  Internet address is 43.160.0.229/30
  MTU 1500 bytes, BW 1000000 Kbit, DLY 10 usec, 
     reliability 255/255, txload 0/255, rxload 0/255
  Encapsulation ARPA, loopback not set
  Keepalive set (10 sec)
  Full-duplex, 1000Mb/s, media type is LH
  input flow-control is off, output flow-control is off
  Clock mode is auto
  ARP type: ARPA, ARP Timeout 04:00:00
  Last input 06:10:24, output 06:10:24, output hang never
  Last clearing of ""show interface"" counters 22:09:46
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 0
  Queueing strategy: fifo
  Output queue: 0/40 (size/max)
  5 minute input rate 0 bits/sec, 0 packets/sec
  5 minute output rate 0 bits/sec, 0 packets/sec
  L2 Switched: ucast: 0 pkt, 0 bytes - mcast: 3 pkt, 246 bytes
  L3 in Switched: ucast: 0 pkt, 0 bytes - mcast: 0 pkt, 0 bytes mcast
  L3 out Switched: ucast: 0 pkt, 0 bytes mcast: 0 pkt, 0 bytes
     4 packets input, 488 bytes, 0 no buffer
     Received 4 broadcasts (0 IP multicasts)
     0 runts, 0 giants, 0 throttles 
     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored
     0 watchdog, 0 multicast, 0 pause input
     0 input packets with dribble condition detected
     140 packets output, 37264 bytes, 0 underruns
     0 output errors, 0 collisions, 3 interface resets
     0 babbles, 0 late collision, 0 deferred
     0 lost carrier, 0 no carrier, 0 PAUSE output
     0 output buffer failures, 0 output buffers swapped out
</code></pre>
","<blockquote>
  <p>Relevant Log messages</p>

<pre><code>Feb  1 03:39:08.338 EST: %IPV6-4-DUPLICATE: Duplicate address FE80::212:44FF:FE4D:4400 on GigabitEthernet8/20
Feb  1 03:39:08.904 EST: %UDLD-SP-4-UDLD_PORT_DISABLED: UDLD disabled interface Gi8/20, transmit/receive loop detected
Feb  1 03:39:08.904 EST: %PM-SP-4-ERR_DISABLE: udld error detected on Gi8/20, putting Gi8/20 in err-disable state
</code></pre>
</blockquote>

<p>When you see ""Duplicate address"" and ""transmit/recieve loop detected"" on the same interface, that's almost a slam-dunk that this is a cabling problem.</p>

<p>Looped circuits are very common when dealing with WAN providers.  It typically happens because some technician is testing the circuit with a loop<sup>Note 1</sup> at their cross-connnect and gets pulled off to perform some other task.  However, the loop prevents your circuit from coming up on both sides.</p>

<p>The switch is complaining because it (correctly) considers it a problem when it sees it's own packets received on the interface it was sent from.  The best thing to do is work with the provider and tell them you've detected a loop at this location.</p>

<p>If the provider resists (not uncommon), ask them to perform a loop at on their panel at <em>this site</em> towards the other site.  If the circuit is indeed correct, you should see your other switch link up (assuming you don't have UDLD on it, as you stated).</p>

<p>After the loop is corrected, just shut/no shut this port to test it again.</p>

<p>This problem illustrates a good use-case for out-of-band connections to your WAN sites through another carrier.  This way, if you need to diagnose your far-end circuits, you've got some way to connect to your far-end router / switch.</p>

<hr>

<p><em>End Notes</em></p>

<p><sup>Note 1</sup>  A loop is just a physical or logical jumper, which connects the Transmit side to the Receive side of the same circuit.  This is usually done so a tech can validate the circuit is functional to some demarc point in their network.  Ironically, it takes down all connectivity past the loop (until it is removed).</p>
","16450"
"Why does my UDP Broadcast wireless communication is capped at 1MBs?","2944","","<p>I am trying to implement Network Coding over a meshed network. Therefore I need to send packets to several destinations, this is way I am using Broadcast packets. But I can not understand why this is capped at ~990KBs.</p>

<p>Is there some configuration to do ?</p>
","<p>It is actually possible to modify the bit rate by forcing the rate on the wireless card. On Linux, the command is :</p>

<blockquote>
  <p>sudo iwconfig wlan0 rate 11M</p>
</blockquote>
","1803"
"Disable port Netgear GS728TP","2938","","<p>I have some Netgear GS728TP smart switches with some CCTV camera that run over them.</p>

<p>Occasionally these camera's freeze and require the network plug pulling on them to reset (They are PoE)</p>

<p>Some of these switches are in some awkward to get to places so:</p>

<p>Is there a way in the Netgear admin panel to disable / enable switch ports so I can kill the power and essentially reboot the camera without having to climb ladders etc?!</p>

<p>I've hunted through the manuals but no joy.</p>

<p>Thanks in advance.</p>
","<p>In the <a href=""http://www.downloads.netgear.com/files/GDC/GS728TP/GS752TP_GS728TP_GS728TPP_SWA_3Dec2013.pdf"" rel=""nofollow"">GS752TP, GS728TP, and GS728TPP Gigabit Smart Switches Software Administration Manual</a>, on page 47:</p>

<blockquote>
  <p>Admin Mode. Select whether to enable or disable the ability of the
  port to deliver power.</p>
</blockquote>

<p>It would seem that you can shut off power on the port, wait a few minutes, then re-enable it.</p>

<p>Aside from that, it is not a very good idea to have the switches in awkward places. Network infrastructure devices, like switches and routers, should be racked in data closets, and the cabling should extend back to the data closet.</p>
","25205"
"Finding transparent firewall packet loss","2926","","<p>We use the Cisco ASA 5585 in a layer2 transparent mode.  The configuration is just two 10GE links between our business partner dmz and our inside network.  A simple map looks like this.</p>

<pre><code>10.4.2.9/30                    10.4.2.10/30
core01-----------ASA1----------dmzsw
</code></pre>

<p>The ASA has 8.2(4) and SSP20.  The switches are 6500 Sup2T with 12.2.  There are no packet drops on any switch or ASA interface!!  Our maximum traffic is about 1.8Gbps between the switches and the CPU load on the ASA is very low.</p>

<p>We have a strange problem.  Our nms admin sees very bad packet loss that started sometime in June.  The packet loss is growing very fast, but we do not know why.  Traffic through the firewall has remained constant, but packet loss is growing quickly.  These are the nagios ping failures we see through the firewall.  Nagios sends 10 pings to every server.  Some of the failures loose all pings, not all failures loose all ten pings.</p>

<p><img src=""https://i.stack.imgur.com/nKyU4.png"" alt=""enter image description here""></p>

<p>The strange thing is that if we use mtr from the nagios server, the packet loss isn't very bad.</p>

<pre><code>                             My traceroute  [v0.75]
nagios    (0.0.0.0)                                    Fri Jul 19 03:43:38 2013
Keys:  Help   Display mode   Restart statistics   Order of fields   quit
                                  Packets               Pings
 Host                           Loss%   Snt Drop   Last  Best   Avg  Wrst StDev
 1. 10.4.61.1                    0.0%  1246    0    0.4   0.3   0.3  19.7   1.2
 2. 10.4.62.109                  0.0%  1246    0    0.2   0.2   0.2   4.0   0.4
 3. 10.4.62.105                  0.0%  1246    0    0.4   0.4   0.4   3.6   0.4
 4. 10.4.62.37                   0.0%  1246    0    0.5   0.4   0.7  11.2   1.7
 5. 10.4.2.9                     1.3%  1246   16    0.8   0.5   2.1  64.8   7.9
 6. 10.4.2.10                    1.4%  1246   17    0.9   0.5   3.5 102.4  11.2
 7. dmz-server                   1.1%  1246   13    0.6   0.5   0.6   1.6   0.2
</code></pre>

<p>When we ping between the switches, we don't loose many packets, but it is obvious the problem starts somewhere between the switches.</p>

<pre><code>core01#ping ip 10.4.2.10 repeat 500000

Type escape sequence to abort.
Sending 500000, 100-byte ICMP Echos to 10.4.2.10, timeout is 2 seconds:
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
Success rate is 99 percent (499993/500000), round-trip min/avg/max = 1/2/6 ms
core01#
</code></pre>

<p>How can we have so many ping failures and no packet drops on the interfaces?  How can we find where the problem is?  Cisco TAC is going in circles on this problem, they keep asking for show tech from so many different switches and it is obvious that the problem is betwen core01 and dmzsw.  Can someone help?</p>

<p><strong>Update July 30, 2013</strong></p>

<p>Thank you to everyone for helping me find the problem.  It was a misbehaving application that sent a lot of small UDP packets for about 10 seconds at a time.  These packets were were denied by the firewall.  It looks like my manager wants to upgrade our ASA so we don't have this problem again.</p>

<p><strong>More Information</strong></p>

<p>From questions in the comments:</p>

<pre><code>ASA1# show inter detail | i ^Interface|overrun|error
Interface GigabitEthernet0/0 """", is administratively down, line protocol is down
        0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored, 0 abort
        0 output errors, 0 collisions, 0 interface resets
Interface GigabitEthernet0/1 """", is administratively down, line protocol is down
        0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored, 0 abort
        0 output errors, 0 collisions, 0 interface resets
Interface GigabitEthernet0/2 """", is administratively down, line protocol is down
        0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored, 0 abort
        0 output errors, 0 collisions, 0 interface resets
Interface GigabitEthernet0/3 """", is administratively down, line protocol is down
        0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored, 0 abort
        0 output errors, 0 collisions, 0 interface resets
Interface GigabitEthernet0/4 """", is administratively down, line protocol is down
        0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored, 0 abort
        0 output errors, 0 collisions, 0 interface resets
Interface GigabitEthernet0/5 """", is administratively down, line protocol is down
        0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored, 0 abort
        0 output errors, 0 collisions, 0 interface resets
Interface GigabitEthernet0/6 """", is administratively down, line protocol is down
        0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored, 0 abort
        0 output errors, 0 collisions, 0 interface resets
Interface GigabitEthernet0/7 """", is administratively down, line protocol is down
        0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored, 0 abort
        0 output errors, 0 collisions, 0 interface resets
Interface Internal-Data0/0 """", is up, line protocol is up
     2749335943 input errors, 0 CRC, 0 frame, 2749335943 overrun, 0 ignored, 0 abort
         0 output errors, 0 collisions, 0 interface resets
           RX[00]: 156069204310 packets, 163645512578698 bytes, 0 overrun
           RX[01]: 185159126458 packets, 158490838915492 bytes, 0 overrun
           RX[02]: 192344159588 packets, 197697754050449 bytes, 0 overrun
           RX[03]: 173424274918 packets, 196867236520065 bytes, 0 overrun
Interface Internal-Data1/0 """", is up, line protocol is up
    26018909182 input errors, 0 CRC, 0 frame, 26018909182 overrun, 0 ignored, 0 abort
    0 output errors, 0 collisions, 0 interface resets
           RX[00]: 194156313803 packets, 189678575554505 bytes, 0 overrun
           RX[01]: 192391527307 packets, 184778551590859 bytes, 0 overrun
           RX[02]: 167721770147 packets, 179416353050126 bytes, 0 overrun
           RX[03]: 185952056923 packets, 205988089145913 bytes, 0 overrun
Interface Management0/0 ""Mgmt"", is up, line protocol is up
        0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored, 0 abort
        0 output errors, 0 collisions, 0 interface resets
Interface Management0/1 """", is administratively down, line protocol is down
        0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored, 0 abort
        0 output errors, 0 collisions, 0 interface resets
Interface TenGigabitEthernet0/8 ""Inside"", is up, line protocol is up
        0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored, 0 abort
        0 output errors, 0 collisions, 0 interface resets
Interface TenGigabitEthernet0/9 ""DMZ"", is up, line protocol is up
        0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored, 0 abort
        0 output errors, 0 collisions, 0 interface resets

ASA1#
</code></pre>
","<pre><code>Interface Internal-Data0/0 """", is up, line protocol is up
     2749335943 input errors, 0 CRC, 0 frame, 2749335943 overrun, 0 ignored, 0 abort
                                              ^^^^^^^^^^^^^^^^^^
         0 output errors, 0 collisions, 0 interface resets
</code></pre>

<p>You show <em>overruns</em> on the InternalData interfaces, so you <em>are</em> dropping traffic through the ASA.  With that many drops, it's not hard to imagine that this is contributing to problem.  Overruns happen when the internal Rx FIFO queues overflow (normally because of some problem with load).</p>

<p><em>EDIT to respond to a question in the comments</em>:</p>

<blockquote>
  <p>I don't understand why the firewall is overloaded, it is not close to using 10Gbps. Can you explain why we are seeing overruns even when the CPU and bandwidth are low? The CPU is about 5% and the bandwidth either direction never goes much higher than 1.4Gbps.</p>
</blockquote>

<p>I have seen this happen over and over when a link is seeing <a href=""http://en.wikipedia.org/wiki/Micro-bursting_%28networking%29"" rel=""nofollow"">traffic microbursts</a>, which exceed either the bandwidth, connection-per-second, or packet-per-second horsepower of the device.  So many people quote 1 or 5 minute statistics as if the traffic is relatively constant across that timeframe.</p>

<p>I would take a look at your firewall by running these commands every two or three seconds (run <code>term pager 0</code> to avoid paging issues)...</p>

<pre><code>show clock
show traffic detail | i ^[a-zA-Z]|overrun|packets dropped
show asp drop
</code></pre>

<p>Now graph out how much traffic you're seeing every few seconds vs drops; if you see massive spikes in policy drops or overruns when your traffic spikes, then you're closer to finding the culprit.</p>

<p>Don't forget that you can sniff directly on the ASA with this if you need help identifying what's killing the ASA... you have to be quick to catch this sometimes.</p>

<pre><code>capture FOO circular-buffer buffer &lt;buffer-size&gt; interface &lt;intf-name&gt;
</code></pre>

<p>Netflow on your upstream switches could help as well.</p>
","2466"
"Routing throughput of an L3 switch","2925","","<p>The Cisco SG300-10 says its forwarding rate is 14.88Mpps with 64 byte packets. I estimated this to be ~ 7 Gb/s.</p>

<p>Does this mean that up to 7 computers can transfer data across VLANs at full 1 Gb/s wirespeed (assuming 64 byte) packets?</p>

<p>How will this vary with packet size? What kind of actual throughput can I expect when multiple computers are transferring files using SMB across VLANs?</p>
","<blockquote>
  <p>The Cisco SG300-10 says its forwarding rate is 14.88Mpps with 64 byte packets. I estimated this to be ~ 7 Gb/s.</p>
  
  <p>Does this mean that up to 7 computers can transfer data across VLANs at full 1 Gb/s wirespeed (assuming 64 byte) packets?</p>
</blockquote>

<p>Why would you ever send line-rate 64 byte packets in any scenario other than a switch drag-race?  That said, cisco's data sheet numbers indicate it can do unidirectional 64-byte line rate for at least seven computers.</p>

<p>I'm assuming you understand that ethernet's IFG and SFD mean that you get nowhere near 1Gbps of real data @ 64 bytes.</p>

<p>If you're using FTP, HTTP, CIFS/SMB, H.264 or any other protocol used for data transfer, then yes 7 computers can do bi-directional line-rate based on Cisco's quoted 14.88Mpps and 20Gbps of ""bandwidth"" in the <a href=""http://www.cisco.com/en/US/prod/collateral/switches/ps5718/ps10898/data_sheet_c78-610061.html"" rel=""nofollow"">data sheet</a></p>

<blockquote>
  <p>How will this vary with packet size? What kind of actual throughput can I expect when multiple computers are transferring files using SMB across VLANs?</p>
</blockquote>

<p>Under normal circumstances the SMB protocol is not limited by the network.  It's limited by how fast you can unspool data from your server's disk.</p>

<blockquote>
  <p>does it do wirespeed intervlan routing? </p>
</blockquote>

<p>Yes up to 14.88 Mpps</p>
","5220"
"Output drops on serial interface when service-policy applied","2925","","<p>Our core router is a Cisco 7206VXR with NPE-G2 running 12.4(20)T1. It has numerous interfaces connected to WAN links (DS3, ATM DS3, 2xT1, onboard Gig0/1), and feeds into the LAN core with 2xGig EtherChannel.</p>

<p>The LAN side clearly has more bandwidth than any of the WAN links. We address this with a service-policy on the WAN side that allocates bandwidth to each ""interesting"" class of service, based on an ACL or DSCP markings. So far, so good.</p>

<p>Our problem is that we're seeing excessive tail drops for one particular class of traffic that leaves on a serial DS3 card:</p>

<pre><code>Class-map: class-symposium-unicast-acl (match-all)
  1530 packets, 2153296 bytes
  30 second offered rate 336000 bps, drop rate 247000 bps
  Match: access-group name acl-symposium-ucast
  Queueing
  queue limit 64 packets
  (queue depth/total drops/no-buffer drops) 0/1056/0
  (pkts output/bytes output) 474/672266
  bandwidth remaining 10% (4421 kbps)
    Exp-weight-constant: 9 (1/512)
    Mean queue depth: 50 packets
    dscp     Transmitted   Random drop   Tail drop      Minimum   Maximum   Mark
              pkts/bytes   pkts/bytes    pkts/bytes     thresh    thresh    prob

    af31       474/672266    22/31547    1034/1449483     32        40      1/10
</code></pre>

<p>This is an abbreviated version of our configuration:</p>

<pre><code>class-map match-all class-symposium-unicast-acl
 match access-group name acl-symposium-ucast
!
policy-map WAN
 class class-symposium-unicast-acl
  bandwidth remaining percent 10
   random-detect dscp-based
 class class-default
!
interface Serial2/0
 description PA-T3/E3-EC - 45 Mbps DS3
 service-policy output WAN
!
ip access-list extended acl-symposium-ucast
 permit udp host x.x.x.x any
</code></pre>

<p>Adjusting the <code>hold-queue</code> on the serial interface, or <code>queue-limit</code> within the policy-map have no apparent effect, and repeatedly checking <code>show int</code> or <code>show policy-map</code> does not show the output queue filling up. Bandwidth should not be an issue, because the interface is very lightly loaded (under 2 Mbps output on a 45 Mbps link), and the offered rate on the class-map is well below the bandwidth provisioned. Removing the <code>service-policy</code> from the serial interface causes the drops to stop, but we need to be able to reserve bandwidth for certain applications, so this is not an acceptable long-term solution.</p>

<p>I suspect the nature of the affected traffic has something to do with the drops we're seeing, because it's unlike anything else our network. UDP packets are emitted from a server at regular (7-second) intervals to one or more remote PCs that request it. Some of the packets are in excess of 15KB, so they have to be fragmented.</p>

<p>Could the excessive fragmentation be a contributing factor, and if so, would <code>ip virtual-reassembly</code> on the ingress interface be of any benefit? Any other thoughts or suggestions?</p>

<p>EDIT: Output of ""show int ser 2/0"" as requested:</p>

<pre><code>Serial2/0 is up, line protocol is up
  Hardware is PA-T3/E3-EC
  Description: xxxxx
  Internet address is x.x.x.x/30
  MTU 4470 bytes, BW 44210 Kbit/sec, DLY 200 usec,
     reliability 255/255, txload 8/255, rxload 235/255
  Encapsulation PPP, LCP Open
  Open: IPCP, CDPCP, crc 16, loopback not set
  Keepalive set (10 sec)
  Restart-Delay is 0 secs
  Last input 00:00:22, output 00:00:00, output hang never
  Last clearing of ""show interface"" counters 1d00h
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 14291
  Queueing strategy: Class-based queueing
  Output queue: 0/1000/0 (size/max total/drops)
  30 second input rate 40774000 bits/sec, 3435 packets/sec
  30 second output rate 1442000 bits/sec, 1847 packets/sec
     274986144 packets input, 4019985342 bytes, 0 no buffer
     Received 0 broadcasts, 0 runts, 0 giants, 0 throttles
              0 parity
     6 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored, 6 abort
     149374995 packets output, 1855187875 bytes, 0 underruns
     0 output errors, 0 applique, 3 interface resets
     0 unknown protocol drops
     0 output buffer failures, 0 output buffers swapped out
     0 carrier transitions no alarm present
  DSU mode 0, bandwidth 44210 Kbit, scramble 0, VC 0
</code></pre>

<p>I realize the input rate is close to maximum in this copy/paste, but the problem occurs even when input is next to zero.</p>
","<p>In your <code>show policy-map</code> output, notice how you have <code>Mean queue depth: 50 packets</code> and the <code>Maximum Thresh</code> is <code>40</code>.  As your average queue depth is above the threshold you will begin tail dropping (<a href=""http://www.cisco.com/en/US/products/hw/routers/ps341/products_tech_note09186a0080af893d.shtml"" rel=""nofollow"">reference</a>).</p>

<p>Since this UDP traffic is the only thing in the class I don't think you gain anything by implementing WRED on the class.  I would recommend removing it (maybe consider using it under class-default instead).</p>

<p>If you really want to use WRED on the class then consider tuning the random-detect exponential weighting-constant to a higher value.  This will help WRED from too quickly reacting and starting to drop packets.  Given your description of the traffic pattern this could potentially solve the issue as well. (<a href=""http://communitystring.com/2008/08/weighted-random-early-detection-wred/"" rel=""nofollow"">Reference</a>)</p>
","5124"
"Juniper Switching - Cheap Lab","2918","","<p>A little bit new to Juniper here.
I am working on scripting few of our switch ports. All switches are Juniper, Ex, FX, QFX, ...etc.</p>

<p>I have no access to a lab to test my scripts, and was looking for one. Of course Olive was suggested but really don't have the time to maintain it.
Saw few ads about SSG-20, at low prices. I see it has several swich ports, and did my best to find out more, but do not see this anywhere.
Can that be used as a managed switch?
In other words, same Juniper switch commands (nothing crazy, basic port configuration, adding/changing description, and enable/disable) work on it?</p>
","<p>Smallest switch would be an EX-2200c. I bought one for my home lab. It has 12 ports and most of the important features. You can even use virtual chassis functionality (with up to 2 or 4 devices). </p>

<p><a href=""http://www.juniper.net/us/en/products-services/nos/junosphere/"" rel=""noreferrer"">Junosphere</a> might also be worth a look. And I guess you already know about the Junos Fasttrack program where you can get the training materials for the ""lower"" certifications including switching. </p>
","10454"
"Apple devices causing ""Land Attack"" on Cisco ASA","2912","","<p>Recently migrated to a Cisco ASA/Sourcefire implementation in our enviroment and have been going through the logs on the ASA.  Looking over the logs I noticed multiple critical errors that kept coming in waves.  The message is a ""Land Attack"" being denied.  </p>

<p>The IP's are our external PAT POOL addresses being sent from the inside to the ASA itself.  Here is the error message from the ASA.  Below is a sample of the error message:</p>

<blockquote>
  <p>06-17-2016 08:01:16 Local4.CriticalX.X.X.X.X%ASA-2-106017: Deny IP due
  to Land Attack from (external IP) to (external IP)</p>
</blockquote>

<p>After doing some wiresharking we discovered that this was happening everytime Apple devices in the network were trying to get to addresses:  </p>

<blockquote>
  <p>17.173.254.222</p>
  
  <p>17.173.254.223</p>
  
  <p>17.173.255.222</p>
  
  <p>17.173.255.223</p>
</blockquote>

<p>Here is a packet capture from one: (1.1.1.1 = Our external Nat address)</p>

<blockquote>
  <p>61065 232.862006 10.70.200.188 -> 17.173.254.222 UDP Source port:
  58994  Destination port: 16384</p>
  
  <p>61066 232.862006 10.70.200.188 -> 17.173.254.222 UDP Source port:
  58994  Destination port: 16385</p>
  
  <p>61067 232.862006 10.70.200.188 -> 17.173.254.223 UDP Source port:
  58994  Destination port: 16386</p>
  
  <p>61068 232.862006 10.70.200.188 -> 17.173.254.222 UDP Source port:
  49729  Destination port: 16384</p>
  
  <p>61069 232.862006 10.70.200.188 -> 17.173.254.222 UDP Source port:
  49729  Destination port: 16385</p>
  
  <p>61070 232.862006 10.70.200.188 -> 17.173.254.223 UDP Source port:
  49729  Destination port: 16386</p>
  
  <p>61080 232.901006 10.70.200.188 -> 1.1.1.1 UDP Source port: 58994 
  Destination port: 58994</p>
</blockquote>

<p>Line 61080 is what triggers the ""land attack"" message and is repeated about 5 times before reverting back to using the correct inside local address for the source.  For some reason it is acting like Apple resorts to using the outside global address as the source address for the devices, causing the land attack log.  We have found the ports its using when this happens are common to Apple's FaceTime, iMessage, Gamecenter and iChat.  Usually 16393 - 16403.</p>

<p>I have tried adding ""ip verify unicast source reachable-via rx"" on layer 3 interfaces on the core switch right before the ASA with no success.</p>

<p>Has anyone seen this before and successfully fix it?  Looking for a solution other than blocking the 17.173.xxx.222/3 with an ACL at the core before being sent to the ASA.</p>
","<p>A LAND attack, or LAN-D attack in some circles, is an attack that involves sending a host a packet with a source and destination address matching the host's IP address. </p>

<p>The idea is if a host with the IP 5.5.5.5, receives a packet with a destination of 5.5.5.5 (itself) and a source of 5.5.5.5, it will respond to the packet, back to itself... potentially creating a response loop... and sometimes simply blue-screen crashing the host's OS.</p>

<p>Nearly all modern operating system have been patched to make this ""attack"" useless, but the Cisco ASA (and many other security products) still protect against this type of ""attack"". Which is to say, if the ASA seems a packet with a matching Source and Destination address, it will drop it claiming a potential LAND attack.</p>

<p>In your case, your inside addresses <code>10.70.200.0/24</code> are being NAT'ed to a public address of <code>1.1.1.1</code>. So two things can be happening, both of which might be triggering the LAND attack. </p>

<p>Imagine this scenario:</p>

<pre><code>Host ----- ASA ----- Upstream Router ----- Internet
</code></pre>

<p><strong>Scenario #1</strong>: Host sends a packet with SRC 10.70.200.20 and DST 1.1.1.1. Packet gets to ASA, ASA applies your PAT rule and translates it to SRC 1.1.1.1 DST 1.1.1.1 -- ASA detects matching source/destination and drops packet</p>

<p><strong>Scenario #2</strong>: Host sends a packet with SRC 10.70.200.20 and DST 1.1.1.1. Packet gets to ASA, ASA applies your PAT rule and translates it to SRC 1.1.1.1 DST 1.1.1.1. Packet is forwarded to Upstream Router. Upstream Router has an entry in its Routing Table telling it the 1.1.1.1 IP address exists back towards your ASA and sends it that way. ASA receives a packet with a DST of 1.1.1.1 and a SRC of 1.1.1.1 -- ASA detects matching source/destination and drops packet</p>

<p>In my experience, I have seen it mostly be #2 that was in play. I don't believe (don't quote me) the ASA will watch for the land attack on traffic going from higher security level to lower security level (aka, inside to outside).</p>

<p>I am guessing this is happening when the Apple devices are trying to talk directly to each other, they detect each other's public IP addresses using STUN or some other system, but they don't realize are on the same internal network, so they both actually share the same public IP address.</p>

<p>To circumvent, you will need to create a new PAT rule so that when your inside hosts are speaking to 1.1.1.1, their source should be re-written as 1.1.1.2 (or anything <em>other</em> than 1.1.1.1). This way the SRC and DST don't match, and don't trigger the ASA's LAND Attack defense.</p>
","32509"
"How to whois ARIN to get IP ranges?","2909","","<p>I'd like to know how, using command-line whois, I can get all IP ranges (i.e., NET objects) assigned to a particular organisation.</p>

<p>For example, consider this company: <a href=""http://whois.arin.net/rest/org/HT-136"" rel=""nofollow"">http://whois.arin.net/rest/org/HT-136</a> ... if you click on the link ""Related networks"" it will bring you to <a href=""http://whois.arin.net/rest/org/HT-136/nets"" rel=""nofollow"">http://whois.arin.net/rest/org/HT-136/nets</a> which shows you the networks assigned to it.</p>

<p>I am finding it difficult to figure out how to get the same info using command-line whois.</p>

<p>Any help would be greatly appreciated!</p>
","<pre><code>$ whois -a ""o ! &gt;  HT-136""
</code></pre>

<p>As found by doing <code>man whois</code> and <code>whois -a ?</code></p>

<ul>
<li><p>-a</p>

<blockquote>
  <p>Use the American Registry for Internet Numbers (ARIN) database.
  It contains network numbers used in those parts of the world cov-
  ered neither by APNIC, AfriNIC, LACNIC, nor by RIPE.</p>
</blockquote></li>
<li><p>o</p>

<blockquote>
  <p>Query-by-record-type:
       o       Organizations</p>
</blockquote></li>
<li><p>!</p>

<blockquote>
  <p>Query-by-attribute:
       !          Searches for matches by handle or id</p>
</blockquote></li>
<li><p>></p>

<blockquote>
  <p>Record hierarchy:
                Displays the record related down the hierarchy.
                For an organization or customer, display
                the resources registered to that organization or customer, in
                list format.</p>
</blockquote></li>
</ul>

<p>The Result is:</p>

<pre><code>#
# ARIN WHOIS data and services are subject to the Terms of Use
# available at: https://www.arin.net/whois_tou.html
#
# If you see inaccuracies in the results, please report at
# http://www.arin.net/public/whoisinaccuracy/index.xhtml
#


#
# The following results may also be obtained via:
# http://whois.arin.net/rest/orgs;handle=HT-136?showDetails=true&amp;ext=netref2
#

OrgName:        HAProxy Technologies, Inc.
OrgId:          HT-136
Address:        1013 Centre Road, Suite 403S
City:           Wilmington
StateProv:      DE
PostalCode:     19805
Country:        US
RegDate:        2014-04-02
Updated:        2014-07-18
Ref:            http://whois.arin.net/rest/org/HT-136

TechHandle: SCARP14-ARIN
TechName:   Scarpa, John
TechPhone:  +1-857-366-5050
TechEmail:  john.scarpa@haproxy.com
TechRef:    http://whois.arin.net/rest/poc/SCARP14-ARIN

TechHandle: BRKIC2-ARIN
TechName:   Brkic, andrej
TechPhone:  +19547320642
TechEmail:  abrkic@haproxy.com
TechRef:    http://whois.arin.net/rest/poc/BRKIC2-ARIN

NOCHandle: NETWO6774-ARIN
NOCName:   Network Operations
NOCPhone:  +1-857-366-5050
NOCEmail:  noc@haproxy.com
NOCRef:    http://whois.arin.net/rest/poc/NETWO6774-ARIN

AdminHandle: SCARP14-ARIN
AdminName:   Scarpa, John
AdminPhone:  +1-857-366-5050
AdminEmail:  john.scarpa@haproxy.com
AdminRef:    http://whois.arin.net/rest/poc/SCARP14-ARIN

AbuseHandle: NETWO6775-ARIN
AbuseName:   Network Abuse
AbusePhone:  +1-857-366-5050
AbuseEmail:  abuse@haproxy.com
AbuseRef:    http://whois.arin.net/rest/poc/NETWO6775-ARIN
HAProxy Technologies, Inc. SCNET-205-234-170-0-1 (NET-205-234-170-0-1) 205.234.170.0 - 205.234.170.255
HAProxy Technologies, Inc. SCNET-205-234-181-0-1 (NET-205-234-181-0-1) 205.234.181.0 - 205.234.181.255
HAProxy Technologies, Inc. SCNET-205-234-165-0-1 (NET-205-234-165-0-1) 205.234.165.0 - 205.234.165.255
HAProxy Technologies, Inc. SCNET-205-234-166-0-1 (NET-205-234-166-0-2) 205.234.166.0 - 205.234.166.255
HAProxy Technologies, Inc. HAPNET-1 (NET-104-152-112-0-1) 104.152.112.0 - 104.152.119.255
HAProxy Technologies, Inc. (AS11019) HAPROXY-TECHNOLOGIES 11019



#
# ARIN WHOIS data and services are subject to the Terms of Use
# available at: https://www.arin.net/whois_tou.html
#
# If you see inaccuracies in the results, please report at
# http://www.arin.net/public/whoisinaccuracy/index.xhtml
#
</code></pre>

<hr>

<p>As an alternate answer, using CURL or any REST client via RWHOIS is in my opinion MUCH easier to parse.</p>

<p><code>curl http://whois.arin.net/rest/org/HT-136/nets</code></p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
&lt;?xml-stylesheet type='text/xsl' href='http://whois.arin.net/xsl/website.xsl' ?&gt;
&lt;nets xmlns=""http://www.arin.net/whoisrws/core/v1"" xmlns:ns2=""http://www.arin.net/whoisrws/rdns/v1"" xmlns:ns3=""http://www.arin.net/whoisrws/netref/v2"" termsOfUse=""https://www.arin.net/whois_tou.html"" inaccuracyReportUrl=""http://www.arin.net/public/whoisinaccuracy/index.xhtml""&gt;
   &lt;limitExceeded limit=""256""&gt;false&lt;/limitExceeded&gt;
   &lt;netRef startAddress=""205.234.170.0"" endAddress=""205.234.170.255"" name=""SCNET-205-234-170-0-1"" handle=""NET-205-234-170-0-1""&gt;http://whois.arin.net/rest/net/NET-205-234-170-0-1&lt;/netRef&gt;
   &lt;netRef startAddress=""205.234.181.0"" endAddress=""205.234.181.255"" name=""SCNET-205-234-181-0-1"" handle=""NET-205-234-181-0-1""&gt;http://whois.arin.net/rest/net/NET-205-234-181-0-1&lt;/netRef&gt;
   &lt;netRef startAddress=""205.234.165.0"" endAddress=""205.234.165.255"" name=""SCNET-205-234-165-0-1"" handle=""NET-205-234-165-0-1""&gt;http://whois.arin.net/rest/net/NET-205-234-165-0-1&lt;/netRef&gt;
   &lt;netRef startAddress=""205.234.166.0"" endAddress=""205.234.166.255"" name=""SCNET-205-234-166-0-1"" handle=""NET-205-234-166-0-2""&gt;http://whois.arin.net/rest/net/NET-205-234-166-0-2&lt;/netRef&gt;
   &lt;netRef startAddress=""104.152.112.0"" endAddress=""104.152.119.255"" name=""HAPNET-1"" handle=""NET-104-152-112-0-1""&gt;http://whois.arin.net/rest/net/NET-104-152-112-0-1&lt;/netRef&gt;
&lt;/nets&gt;
</code></pre>
","10615"
"Trying to find out exact TCP overhead cost","2905","","<p>Corresponding this topic:</p>

<p><a href=""https://stackoverflow.com/questions/3613989/what-of-traffic-is-network-overhead-on-top-of-http-s-requests"">https://stackoverflow.com/questions/3613989/what-of-traffic-is-network-overhead-on-top-of-http-s-requests</a></p>

<blockquote>
  <p>The maximum segment size (which does not include the TCP or IP
  headers) is typically negotiated between the layers to the size of the
  MTU minus the headers size. For Ethernet MTU is usually configured at
  1500 bytes. The TCP header is 160 bits, or 20 bytes. The fixed part of
  the IPv4 header is 160 bits, or 20 bytes as well. ... . Thus:</p>
  
  <ul>
  <li>for HTTP over TCP/IPv4</li>
  </ul>
  
  <p>overhead = TCP + IP = 40 bytes</p>
  
  <p>payload = 1500 - 40 = 1460 bytes</p>
  
  <p>overhead % = 2% (40 * 100 / 1460)</p>
</blockquote>

<p>Here's 100 Mbit and 1Gbit iperf results in TCP mode with default Debian distros:</p>

<pre><code>[  5] local 10.0.51.1 port 5001 connected with 10.0.51.20 port 45009
[  5]  0.0-10.0 sec   112 MBytes  94.1 Mbits/sec
[  4] local 10.0.51.1 port 5001 connected with 10.0.51.94 port 35065
[  4]  0.0-10.0 sec  1.10 GBytes   941 Mbits/sec
</code></pre>

<p>I can lower it to almost 2% overhead by raising MTU to 9000 :</p>

<pre><code>[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-10.0 sec  1.14 GBytes   982 Mbits/sec
</code></pre>

<p>But shouldn't it be even less?</p>

<pre><code>overhead = TCP + IP = 40 bytes
payload = 9000 - 40 = 8960 bytes
overhead % = 0.4% (40 * 100 / 8960)
</code></pre>

<p><strong>Why actual ""bandwidth loss"" is notably greater than the theoretical?
If formula missing something valuable?</strong></p>
","<p>I think you should add the ethernet header and interframe gap.</p>

<p>1500 - 20b(IPv4) -20b(TCP+checksum) = 1460b DATA (and 40b Overhead)</p>

<p>Add 40b + 14b(Ethernet) + 4b(FCS) + 12b(Interframe gap) + 8b(preamble) = 78b Overhead</p>

<p>78 / 1460 * 100 = 5.34% overhead</p>

<p>1460 / ( 1460 + 78) * 100 = 94.93% Throughput/Goodput</p>

<p>1,000,000,000(1Gbit) * 94.93% = 949Mbit/s(0.949Gbit)</p>

<p>you measured 941Mbit/s that gives (949 - 941) / 949 * 100 = <strong>0.84 % error</strong> between theoretical and actual.</p>
","19979"
"Can my MAC address be identified by a web site?","2902","","<p>Can my MAC address be identified by a web site when I access the site?
Does it make a difference if the site requires me to upload files?</p>
","<p>In general it is not possible for a web site that you access to learn your MAC address. However there are special cases where the server could learn your MAC address:</p>

<ol>
<li>IPv6 supports assigning addresses in a way which embed the MAC address in the IP address. For privacy reasons this way of assigning IPv6 addresses is not very common.</li>
<li>If you are directly attached to the same network segment as the web server, it will be able to see your MAC address. (But this is probably not the scenario you had in mind.)</li>
<li>I have seen some ISPs embed the MAC address of the customer's equipment in reverse DNS records (the format was <code>x1-6-</code> followed by the MAC address).</li>
<li>There might be scripting capabilities in the browser which would allow scripts to learn the MAC address of the client machine and send it to the server. I do not know whether javascript can acquire the MAC address of the client machine, but I know that it can find the <a href=""https://security.stackexchange.com/q/94783/47143"">local IP</a> address.</li>
</ol>
","29070"
"Point-to-point vs unicast, and multiaccess vs multicast/broadcast?","2893","","<ol>
<li><p>From Tanenbaum's Computer Networks:</p>

<blockquote>
  <p><strong>Point-to-point links</strong> connect individual pairs of machines. To go from the source to the destination on a network made up of
  point-to-point links, short messages, called packets in certain
  contexts, may have to first visit one or more intermediate machines.
  Often multiple routes, of different lengths, are possible, so finding
  good ones is important in point-to-point networks. </p>
  
  <p><strong>Point-to-point transmission</strong> with exactly one sender and exactly one receiver is sometimes called
  <strong>unicasting</strong>.</p>
</blockquote>

<p>What is the difference between point-to-point and unicasting?</p>

<p>What
does the last sentence mean? 
Doesn't a point-to-point transmission
always have exactly one sender and exactly one receiver?</p></li>
<li><p>From Tanenbaum's book</p>

<blockquote>
  <p>In the literature, <strong>broadcast channels</strong> are sometimes referred to as
  <strong>multiaccess channels</strong> or random access channels. The protocols used to determine who goes next on a multiaccess channel be- long to
  a
  sublayer of the data link layer called the MAC (Medium Access Con-
  trol) sublayer.</p>
</blockquote>

<p>From <a href=""https://en.wikipedia.org/wiki/Media_access_control"" rel=""nofollow"">https://en.wikipedia.org/wiki/Media_access_control</a></p>

<blockquote>
  <p><strong>The MAC layer</strong> emulates a full-duplex logical communication channel in a multi-point network. This channel may provide
  <strong>unicast,
  multicast or broadcast</strong> communication service. </p>
</blockquote>

<p>Tanenbaum seems to suggest that multiaccess and broadcast are the
same, while Wikipedia says multiaccess can be unicast, multicast or
broadcast.  What is the difference between multiaccess and
broadcast?</p></li>
</ol>

<p>Thanks.</p>
","<p>When you discuss a point-to-point link, you are usually referring to a physical link that exists only between two devices.</p>

<p>A point-to-point transmission is a transmission from one device to a single other device.  This may or may not cross point-to-point links, but that is not a requirement.  A unicast is essentially the same idea in that it means the packet is addressed to a single recipient.</p>

<p>Contrast a broadcast or mutiaccess medium with the idea of a point-to-point link.  A broadcast medium allows multiple devices on a single link.  Each device looks at the destination address of a packet sent on the medium to see if it belongs to him.  This doesn't directly relate to the 'cast designations since those are about how a packet is addressed rather than the medium on which it is sent.</p>

<p>The 'cast references refer to how the packet is addressed, not the medium on which the packet travels.  A unicast is addressed to a single recipient, while a broadcast is addressed to every recipient.  A multicast is addressed to every recipient which has subscribed to the multicast group (the destination address of the packet).</p>
","23074"
"IPSec VPN on Juniper MX80","2893","","<p>Does anyone know how, if at all supported, to setup site-to-site IKE/IPSec VPN end-point on a Juniper MX80 router? The other side is SRX640, so not a problem.</p>

<p>Juniper online documentation is very confusing in this regard. Looks like I either need additional hardware on the router (which?), or I am completely missing something.</p>

<p>The MX80 runs Junos 11.2R3.3.</p>

<p>Would appreciate any pointers.</p>
","<p>As you said, the Junos documentation for IPSec is pretty confusing; it took a while to find a definitive reference for how to get IPSec in HW on the MX80.</p>

<p>Since you're looking for site-to-site VPN support, this means higher throughput and certainly you don't want to do this on a CPU.  As such, you should use the <a href=""http://www.juniper.net/techpubs/en_US/junos13.2/topics/concept/ms-mic-and-mpc-overview.html"" rel=""nofollow"">MS-MIC-16G</a>, which started supporting IPSec VPN in Junos 13.2.  According to the <a href=""http://www.juniper.net/techpubs/en_US/junos13.2/information-products/topic-collections/release-notes/13.2/index.html?topic-76116.html"" rel=""nofollow"">Junos 13.2 Release Notes</a>, only IPv4 is supported at this time.</p>
","6207"
"Is it possible to run an IPv6 only MPLS core?","2890","","<p>I am looking for information on whether it is actually possible to run an IPv6 only MPLS Core with respect to the transport labels, without the current requirement to tunnel across IPv4.</p>

<p>To put this into perspective, I am running a dual stack Juniper network currently and can only get IPv6 to work on MPLS when I enable IPv6 tunneling, which in essence just uses the IPv4 labels.</p>

<p>Is this possible currently with Juniper or Cisco?</p>
","<p>No it's not possible today, because neither CSCO or JNPR have implemented LDP to distribute labels for IPV6 prefixes.  </p>

<p>In my opinion people have too sentimental view on this matter, thinking IPV6-only is value in itself, it's not. You should differentiate services you offer from your control-plane used to offer those.<br>
There is no particular reason to have dual-stack control-plane, it's just additional complexity. Personally, I'd be happy to run IPv4 + 6PE until in some far future I'll fork-lift or build new network with IPv6 + 4PE.</p>

<p>Running MPLS for IPv4 and native IPv6 is probably the silliest thing you could do, as you'll remove all the scaling, TE and convergence benefits you get from MPLS.</p>

<p>Segment Routing/SRING which uses IGP for labels instead of LDP will likely happen before LDP for IPv6 prefixes happen. So if you really for some strange reason want to have both control-planes that's your most likely source to get it soon.</p>
","4914"
"Port mirroring just the Rx (or Tx) direction of a port?","2890","","<p>Something on my Ethernet LAN is occasionally sending out spurious duplicate packets and I need to track it down. The culprit is likely a switch or other bridge (such as a Wi-Fi AP) and not an endpoint, because the packets that get duplicated are not always from the same source MAC address.</p>

<p>I'm thinking of getting a manageable switch that supports port mirroring, and using it with a sniffer to sniff traffic going into and out of a port, but I need to know which direction each captured packet was sent, so I can tell which direction the original and the duplicate came from. If I can find a place on my network where the original and duplicate came from different directions, I'll know that the culprit must be on the side where the duplicate came from.</p>

<p>My problem is, the port-mirroring switches I've worked with in the past have only allowed me to mirror ""both directions"" (both transmit and receive) from a given port, to the mirror port. </p>

<p>Can anyone suggest a solution that would allow me to mirror just one direction? I'm thinking of hooking up two sniffers, one for the ""Tx"" direction, and one for the ""Rx"" direction, so I can tell which way the packets were going. I don't mind buying a new manageable switch or tap to achieve this.</p>

<p>I'm open to any other ideas for tracking down the source of spurious packet duplication, but beware that my current switches on this network aren't terribly manageable, so solutions that assume manageable switches (like ""enable such-and-such packet tracing"", or ""pull stats from all your switches via SNMP and crunch the data in &lt;app>"") aren't likely to be practical in my situation.</p>
","<p>On Cisco switches, you can configure whether you mirror rx, tx or both.</p>

<p>For example:</p>

<pre><code>monitor session 1 source interface gi0/1 rx
</code></pre>

<p>For receive only:</p>

<pre><code>monitor session 1 source interface gi0/1 tx
</code></pre>

<p>For transmit only:</p>

<pre><code>monitor session 1 source interface gi0/1
</code></pre>

<p>If you don't specify, you mirror both tx and rx.</p>
","7710"
"Is a router always necessary to link two subnets?","2883","","<p>I am thinking especially of VLANs, which represent separate subnets that may need only one switch.</p>
","<p>You need a Layer-3 capable device to route between VLANs. This can be a L3-capable switch though, it doesn't have to be a <em>separate</em> router.</p>
","1705"
"Site-To-Site IPSec Tunnel behind NAT","2882","","<p>Forgive me if this question is not for here. I have a situation where I need to connect Site-to-Site VPN between two offices but the company is small and a startup with a very tight budget. Thing is that the two offices have just a single static public IP. The routers in the offices do not have a VPN capability however it is possible for me to NAT/PAT individual devices out of the network, as well as to add additional static routes.</p>

<p>Is it possible for me to create a site to site tunnel behind NAT? I was thinking to deploy two PFsense VMs and use those to create the IPSec tunnel? Any other suggestion is welcomed, like a Linux box with Openswan/Strongswan etc. </p>

<p>So far my experience is mostly with Cisco, Palo Alto, Sonicwall and stuff and I have little experience with theese OpenVPN solutions so I was wandering if it is possible?</p>

<p>A short overview of how the network diagram would be:
<a href=""https://i.stack.imgur.com/vF4Rr.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/vF4Rr.png"" alt=""IPSec behind NAT Diagram""></a></p>
","<p>As long as you can NAT the required protocol and ports (see below) on the routers, you can use any VPN solution that support <em>NAT-Traversal</em> (NAT-T) to establish an IPSEC tunnel (as commented by Zac67)</p>

<p>pfSense does support NAT-T, so you're good to go.</p>

<p>As you already find out, OpenVPN is commonly used in such case, because it is very NAT-friendly, and it is also supported by pfSense.</p>

<p>For IPSEC, you need to open / forward / PAT  the following:   </p>

<ul>
<li>UDP 500</li>
<li>UDP 4500</li>
<li>ESP  </li>
</ul>

<p>Some access router have a specific feature to forward IPSEC packets. Others simply cannot forward ESP, in this case there's often a DMZ option (that will forward all incoming traffic to a given internal host) that could be used.</p>
","41905"
"When does switch talk to router","2878","","<p>I have read a lot on how switches forward within LAN, but little about how switch talks to router.</p>

<p>When does a switch send packet to router ? Is it when it does not find recipient on the same LAN ?</p>
","<p>It kind of depends.</p>

<p>Normal primary operation for a switch is to forward frames from one host on the L2 domain to another host based on the destination MAC address. So in this sense, a switch will only forward frames to the router if the frame it received has the router's MAC address as the destination.</p>

<p>However if it is a managed switch, then it is also acting as a host on the network as well as a L2 device. So management traffic that needs to be routed (i.e. to hosts on a different subnet/network) will be sent by the switch to the router (assuming correct routing/default gateway are in place).</p>
","22629"
"why TTL value 1 in IGMP","2877","","<p>why TTL value 1 in IGMP protocol and what are the different values possible in TTL section for Multicasting.</p>

<p>What I got from the google is that if TTL value is 1 then it won't leave the LAN, but if it won't leave the LAN how the msg will be broadcasted ?</p>
","<p>The reason that it doesn't have to leave the LAN is that IGMP (or MLD if you use IPv6) only talks to the multicast router on the LAN. The multicast router will take care of the routing.</p>
","9637"
"Cisco: No autostate on GigabitEthernet interfaces, any alternative? (not working)","2876","","<p>I recently tried the command ""no autostate"" on a GigabitEthernet interface (on a newer router) and this didn't work anymore, does anyone know why this is occuring? This use to work on FastEthernet interfaces. Any alternative suggestions?</p>

<p>Working configuration: (Cisco router 881)</p>

<pre><code>Interface vlan 2
no autostate
</code></pre>

<p>Not working: (Cisco router 1921)</p>

<pre><code>Interface vlan 2
no autostate
</code></pre>
","<p>After some research and questioning with cisco specialists, we can conclude that in newer versions of IOS and newer routers, autostate is applied by default and unchangeable. (so the ""no autostate"" will not work anymore on vlan's).</p>
","806"
"What is an Edge Points of Presence (POPs)","2871","","<p>I was browsing through the web about WAN technologies, and came across <a href=""https://peering.google.com/about/delivery_ecosystem.html"" rel=""nofollow"">Google Peering</a>, It seems they have rolled out their backbone across the globe, and have multiple peering locations globally. I have a couple questions to ask:</p>

<ol>
<li><p>What is an Edge Points of Presence (POP)?</p></li>
<li><p>Is Google now considered a Tier1 network? Do they no longer have to buy IP transit from tier 1 networks and can peer directly with them?</p></li>
</ol>
","<p>The answer to your first question is on the page you mentioned: </p>

<blockquote>
  <p>Google has 70+ Edge POPs in 32 countries, interconnected via Google's backbone network. This is where we interconnect via peering with other network operators who then deliver Google traffic to users. </p>
</blockquote>

<p>So Edge POPs are locations where Google interconnects with other networks.</p>

<p>I'm not sure, but I don't think Google is Tier1 (yet?). It's not mentioned on the <a href=""http://en.wikipedia.org/wiki/Tier_1_network#List_of_tier_1_networks"" rel=""nofollow"">list of Tier1's</a> on Wikipedia at least, but I can't tell for sure based on the routing tables I checked.</p>

<p>The third question is impossible to answer, it's too broad. It all depends on the length and location of those fibers, if you want to buy existing ones or place them yourself, etc. But you can be sure it isn't cheap.</p>
","6431"
"Cisco RV042 Port Forwarding","2868","","<p>We have an application server that our company's branches connect to. Right now, they can connect because the E.R.P app developer configured our main router for port forwarding. They connect by typing <code>1.1.1.1:9001/forms/servlet</code> into a web browser. 1.1.1.1 is the router's interface connected to the ISP (1.1.1.1 made up).</p>

<p>Our internal subnet is on the 192.168.1.0/24 subnet, the server in question is 192.168.1.25. We have 2 ISPs connected to 2 different routers, one is for backup in case the primary goes down. I want to configure the backup router (Cisco RV042) for port forwarding but I am a bit confused regarding which ports and addresses to use. </p>

<p>Assume 2.2.2.2 is the IP address of the second router's interface connected to the ISP. How would I forward this to my application server?</p>
","<p>It doesn't look like you're doing any complex port forwarding with this setup.  All you need to do is specify a private IP address for inbound requests to port 9001 to head to.</p>

<pre><code>  2.2.2.2:9001 --------&gt; 192.168.1.25:9001
</code></pre>

<p>You can access the port forwarding options on the RV042, under Setup > Forwarding</p>

<p>Check out the full <a href=""http://s3.amazonaws.com/szmanuals/5890c9cc77fda234e2a0d7c5efb8f877"" rel=""nofollow"">RV042 Manual</a> for more information, page 14 has more info on Port Forwarding.</p>
","6438"
"What is the proper term for ipaddress/hostname:port","2864","","<p>What is the proper term for (example) hostname.tld:433 (hostname:portnumber)?</p>

<p>It is not just hostname, and it is not really a URL either :) same goes for 10.0.0.1:3306 etc.</p>
","<p>IP address and port pair is called, <a href=""http://en.wikipedia.org/wiki/Network_socket"">Socket Address</a></p>

<p>Pair of socket addresses (10.0.0.1:123, 192.168.0.1:123) may also be called 4-tuple or 5-tuple if the protocol is specified as well (10.0.0.1:123, 192.168.0.1:123 UDP)</p>
","9431"
"Cisco: broadcast and multicast storm control on distribution switches","2862","","<p>I just got some already configured switches that are giving a lot of problems on the network with port shutdowns due to storm control policies.</p>

<p>Finally after dumping the running-config. I've saw extremely tight broadcast and multicast storm control policies, as low as 2 percent on a distribution switch, even on the trunk ports.</p>

<pre><code>interface GigabitEthernet1/0/1
 speed 100
 storm-control broadcast level 2.00
 storm-control multicast level 2.00
 storm-control action shutdown
 no cdp enable
 spanning-tree portfast
!
</code></pre>

<p>Those are the configurations on <strong>all</strong> switchports of a 2960 model, and as I said, those guys act as a distribution switch, so some ports are plain access ports and others have switches attached to them.</p>

<p>The whole point here is: why using storm control on distribution switches and why using with this low threshold. I've seen a good practice being 5 to 10 percent of broadcast/multicast storm control, but never 2 percent. And why it was enabled on trunk ports? This makes no sense for me, since trunk ports will be receiving a lot more broadcasts then other ports.</p>

<p>Thanks in advance,</p>

<p>PS: Just in case, this network is huge and badly deployed, so it's a /20 network running with more than 2000+ devices, so I'm expecting huge broadcast traffic on the devices, which causes problem with this storm control policy.</p>
","<p>The interface you are showing is a gigabit port that is configured to run at 100Mbps due to the <code>speed 100</code>.  This means the port will shut down if there is more than <strong>2Mbps</strong> of broadcast or multicast in any 1-second period, which given the size of the subnet is a very real possibility.</p>

<p>I would definitely be increasing these values on uplink ports considering the size of your network - start by increasing to <code>10.0</code> and seeing if this alleviates your issue.</p>

<p>A real broadcast storm is going to generate a lot more than 10Mbps, so setting the level higher is not that big of a deal. </p>
","20372"
"How can I deploy multiple APs in the same office without a centralized WLC?","2860","","<p>In a small office with 5-10 WAPs, do you create distinct SSIDs for each WAP, or do you name each one the same? </p>

<p>Recently I have been deploying multiple WAPs configured with the same SSID and password, and leaving it to the client computer to decide which WAP provides the best coverage, and have had good luck with this. </p>

<p>How can I deploy multiple APs in the same office without a centralized WLC?</p>
","<p>You certainly can do without a controller.  A number of vendors either provide management software with the purchase of the AP or have products that are designed to run without one.  You can choose from Cisco, Aruba, Aerohive, Meraki (now Cisco), Ubiquiti and quite a few others (supposedly Meru has a solution soon to launch as well) for solutions that work without a controller.</p>

<p>As for single SSID or multiple, that is really up to a design choice, but generally speaking you would want to only provide one for roaming if you do mobile computing.  Wireless clients have been getting better about making good choices when presented with multiple wireless access points, with some notable exceptions (Apple devices seem to still have some issues periodically).</p>

<p>If mobility isn't a concern and you are largely dealing with nomadic (i.e. they may move, but are used almost entirely in one position)or stationary clients, then you can balance your clients in several ways with unique SSIDs.  However managing the clients and educating users can be troublesome if you don't put some thought into it.</p>

<p>Controllers largely help with the management, reporting and coordination (and sometimes troubleshooting) of the wireless network.  While they are nice to have, they are by no means essential for general wireless.  If you are looking to do something more complex or that requires a higher class of service (such as wireless-VoIP), then you should look into a controller based solution.</p>
","1934"
"ping in pure layer 2 LAN","2849","","<p>How can I ping a specific IP on a network which only contain switches while switches as far as I know don't understand IPs but only MAC!</p>
","<p>You are correct the switch only knows/cares about the MAC.</p>

<p>When you send a ping, it first generates a arp with a MAC(ffff.ffff.ffff) broadcast that goes to all ports asking for the MAC of a specific ip.</p>

<p>Once the destination host receives the broadcast, is will see that it is a ARP for it's own IP, and using the MAC from the received packet, reply back to the original host, using known MAC's as src and dst.</p>

<p>Once the host receives the ARP reply it has the MAC of the destination and will cache the mapping of IP-MAC in the ARP table, it then send's the actual ping's using the destination MAC.</p>

<p>The switches don't care that it is a ping or any other packet it only works for the MAC.</p>
","20004"
"What is the effect of SVI MTU on Catalyst 6509?","2849","","<p>I have some ports on a Catalyst 6509 set to MTU 9216.  Some of these ports belong to port channels with a displayed MTU of 1500.  I also have a great number of VLANs set to 1500 and not 9216.  This is on an aging 6509 chassis with mostly CFCs (though some DFCs) - PFC3A mode running 12.2(33)SXI.  What is the negative effect if any of not adjusting the MTUs of the port-channels and SVIs?</p>
","<p>Regarding jumbo frame support on the Cat6k, IIRC the default system MTU size is 9216, but there are some modules where a maximum ingress frame size of only 8092 bytes is supported vs 9216 bytes (they'll drop frames larger than 8092 bytes at ingress). Double check the documentation to find out which modules exactly have this limitation.</p>

<p>Regarding the port-channels, if both ports in the port-channel are already set to the same MTU of 9216, it shouldn't make a difference if you configure the port-channel interface to have a 9216 MTU, but it wouldn't hurt for completeness'/clarity's sake in your configuration. You actually can't have two ports in an EtherChannel that have different MTU sizes.</p>

<p>Regarding the SVI's, there's really not much of a difference between routing jumbo frames across a routed L3 interface or an SVI (they're essentially the same thing) - just realize that if fragmentation is required across an L3 interface (ie a jumbo frame is routed from one L3 interface to another with a smaller MTU), the frame is punted to the CPU for fragmentation in software, and this can lead to problems. The rule of thumb here is to keep your jumbo frame traffic localized to other destinations/networks that also support jumbo frames.</p>

<p>While changing the MTU on the VLANs themselves shouldn't really be necessary, make sure that the interface MTU is the same across all the interfaces in the VLAN before setting the VLAN MTU to that same value. And similar to the port-channels, if you already have 9216 as the interface MTU's and the VLAN MTU for those interfaces, it shouldn't actually cause problems to set the MTU of the SVI for those VLANs to 9216.</p>
","5020"
"Native VLAN on a router subinterface (RoAS)","2847","","<p>I am aware of all the background information to <strong>native VLANs</strong>, just to repeat here that they are used for 'control traffic', that is CDP / VTP / PAgP / DTP.</p>

<p>On a router, sub-interfaces can be defined to allow different VLAN IDs over a trunk from a connected switch to communicate, each VLAN ID will be on different subnet, the sub-interfaces act as default gateways and have nothing to do with trunking.</p>

<p>Often in prominent study texts and books and answers on forums, it is always stated that you must define the <strong>native VLAN</strong> on one of the sub-interfaces (or the physical interface in earlier scenarios).</p>

<p>My question is <strong>specifically</strong> why do we need the <strong>native VLAN</strong> defined on one of these sub interfaces when the connected VLANs do not need to pass control traffic (e.g. layer 2) to each other?</p>

<p>In every lab I have setup (PT and GNS3), I never have a problem missing out the native VLAN on a sub interface:</p>

<pre><code>router(config-subif) #**encapsulation dot1q 1 native** 
</code></pre>
","<p>With Cisco devices, you do not need to configure a native VLAN, and it is recommended that you do not configure one. Traffic that is local to the link (CDP, VTP, PAgP, DTP, etc.) will still be sent and received untagged, and it will work correctly. This traffic will never be sent beyond the link, even with a native VLAN configured.</p>

<p>Having a native VLAN configured can present a security risk, as can the use of VLAN 1 (the default VLAN and default native VLAN). If you don't have a native VLAN, then any traffic spoofed to be on the native VLAN will never travel beyond the single link, and that limits any damage which may be done.</p>

<p>You can never delete VLAN 1, but you can limit which VLANs are allowed on a trunk with the <code>switchport trunk allowed vlan &lt;list&gt;</code> command, and just not allow VLAN 1 by excluding it from the list.</p>
","30392"
"Unpredictable Juniper SNMPv3 Access Error","2846","","<p>We're having issues where SNMPv3 ceases to accept SNMP requests on our Juniper EX series switches.  In what seems like random occurrences, Juniper nodes refuse SNMP authentication credentials.</p>

<p>This is what we end up getting:</p>

<pre><code>rj@MHN00525SYS01:~$ snmpwalk -v 3 -a SHA -A ""PASS"" -l authPriv -x AES -X ""PASS"" 
  -u ""username"" mhn00416an01 iso.3.6.1.2.1.1.1.0
snmpwalk: Unknown user name
rj@MHN00525SYS01:~$
</code></pre>

<p>Our devices were working, but then just stop.  The usernames are correct and loaded into the system.</p>

<pre><code>rj@MHN00416AN01# run show snmp v3 users

Engine ID: 80 00 0a 4c 04 31 33 &lt;...snip...&gt;
    User                            Auth/Priv   Storage      Status
    username                         sha/aes128 nonvolatile  active
</code></pre>

<p>After dealing with this for some time, we finally decided to investigate.  I'm seeing this entry before the system stops accepting requests:</p>

<pre><code>Nov  6 09:44:32  MHN00416AN01 mgd[7996]: UI_COMMIT: User 'rj' requested 'commit' 
  operation (comment: none)
Nov  6 09:44:35  MHN00416AN01 snmpd[1260]: LIBJSNMP_NS_LOG_ERR: ERR: snmpd: send_trap: USM 
  unknown security name (no such user exists) (plaintext scopedPDU header type 00: s/b 30)
Nov  6 09:44:35  MHN00416AN01 snmpd[1260]: SNMPD_ENGINE_ID_CHANGED: Warning: Local 
  engine ID has changed. Passwords for all the users under [edit snmp v3 usm local-engine] 
  need to be reconfigured.
</code></pre>

<p>I have found that simply re-inputting the username/passwords restore access to the device.</p>

<pre><code>rj@MHN00416AN01# set snmp v3 usm local-engine user username 
  authentication-sha authentication-password PASS

{master:0}[edit]
rj@MHN00416AN01# set snmp v3 usm local-engine user username 
  privacy-aes128 privacy-password PASS
</code></pre>

<p>After a <code>commit</code> operation, we can access it again.</p>

<pre><code>rj@MHN00525SYS01:~$ snmpwalk -v 3 -a SHA -A ""PASS"" -l authPriv -x AES -X ""PASS"" 
  -u ""username"" mhn00416an01 iso.3.6.1.2.1.1.1.0
iso.3.6.1.2.1.1.1.0 = STRING: ""Juniper Networks, Inc. ex3300-48p Ethernet Switch, kernel 
  JUNOS 12.3R3.4, Build date: 2013-06-14 02:21:01 UTC Copyright (c) 1996-2013 Juniper 
  Networks, Inc.""
rj@MHN00525SYS01:~$
</code></pre>

<p>This issue is happening across a ton of different devices.  Models include EX2200-c, EX3300, EX4200 and EX4550 on version 12.3.</p>

<p>Why is this happening and how can I make it stop?</p>
","<p>This issue is a result of the engine-id changing.  If you run into this syslog message, that is the exact definition of the problem.</p>

<pre><code>Nov  6 09:44:35  MHN00416AN01 snmpd[1260]: SNMPD_ENGINE_ID_CHANGED: Warning: Local 
  engine ID has changed. Passwords for all the users under [edit snmp v3 usm local-engine] 
  need to be reconfigured.
</code></pre>

<p>Unfortunately, I have found that this is happening for no apparent reason.  The commit performed before this engine-id changed was a simple <code>syslog-host</code> addition that resulted in the engine-id changing.  <a href=""http://www.juniper.net/documentation/en_US/junos13.2/topics/reference/configuration-statement/engine-id-edit-snmp.html"" rel=""nofollow"">Juniper covers the <code>engine-id</code> option in their TechLibrary</a>, which says the default option is to use the default IP address of the device.</p>

<p>After a lot of beating our heads against the desk, we have found that simply defining one with an explicit setting is the best option, as it remains consistent.</p>

<pre><code>rj@MHN00416AN01# set snmp engine-id local ***.**.244.245

{master:0}[edit]
rj@MHN00416AN01# commit
configuration check succeeds
commit complete
</code></pre>

<p>Juniper also has a note for changing the engine-id that needs to be done before it will work.  It effectively means once you commit a new engine-id, you must also commit another username/password.  </p>

<blockquote>
  <p><strong>Note:</strong> SNMPv3 authentication and encryption keys are generated based on the associated passwords and the engine ID. If you configure
  or change the engine ID, you must commit the new engine ID before you
  configure SNMPv3 users. Otherwise the keys generated from the
  configured passwords are based on the previous engine ID. For the
  engine ID, we recommend using the MAC address of the management port.</p>
</blockquote>

<p>You'll need to commit new users into the configuration <strong>after</strong> the engine change.  This is important because SNMPv3 users won't function if you don't do this despite what is actually said under the <code>show snmp v3 users</code>.  So make sure you define new users.</p>

<pre><code>rj@MHN00416AN01# set snmp v3 usm local-engine user username 
  authentication-sha authentication-password PASS

{master:0}[edit]
rj@MHN00416AN01# set snmp v3 usm local-engine user username 
  privacy-aes128 privacy-password PASS

{master:0}[edit]
rj@MHN00416AN01# commit
configuration check succeeds
commit complete
</code></pre>

<hr>

<p>Before the change:</p>

<pre><code>rj@MHN00416AN01# run show snmp v3

Local engine ID: 80 00 0a 4c 01 ** ** f4 f5
Engine boots:           1
Engine time:       421043 seconds
Max msg size:       65507 bytes

Engine ID: 80 00 0a 4c 04 31 33 &lt;...snip...&gt;
    User                            Auth/Priv   Storage      Status
    Username                         sha/aes128 nonvolatile  active
</code></pre>

<p>After the change:</p>

<pre><code>Local engine ID: 80 00 0a 4c 04 31 33 &lt;...snip...&gt;   &lt;---- previously Engine ID
Engine boots:           1
Engine time:       421110 seconds
Max msg size:       65507 bytes

Engine ID: local   &lt;------ changed
    User                            Auth/Priv   Storage      Status
    Username                         sha/aes128 nonvolatile  active
</code></pre>

<p>This provides a more reliable SNMP setup that isn't prone to engine-id changes and eliminating access.  Juniper does recommend that you use the <code>use-mac-address</code> option as opposed to the <code>local engine-id-suffix</code>.  This option is susceptible to issues in a virtual chassis setup.  If a backup routing engine takes over, the SNMP engine-id will change to the <code>me0</code> interface of the new master.</p>
","12871"
"Use Wifi over Wired(Disabled Internet Connection) and allow Remote Desktop Connection","2843","","<p>I have This Two Computers, a Laptop and a Pc. The laptop has a better and powerful specs, the problem is the screen was broken and keyboard is not functioning very well but no performance issue. I use my laptop through Remote Desktop Connection. Both are connected on one network using wired.Using wired my internet connection is very slow. When my laptop is still fix i used to connect to internet usng  my mobile through portable hotspot and the internet connection is faster. How can i make my laptop use the wifi internet connection and still connected on wired connection.</p>

<p>i tried this solutions on Another laptop</p>

<blockquote>
  <p>laptop is connected on both wired and wifi but it uses the internet connection from the wired.
  To disable the internet connection of wired and use the wifi, I used this Following solution.</p>
  
  <p>On adapter settings>Ethernet>internet protocol version 4> properties </p>
  
  <p>use the following ip address:current ip address</p>
  
  <p>subnet mask set to default.</p>
</blockquote>

<p>this disables the wired internet connection and use the wifi and has access on LAN. The problem is I can't Remote on it using my pc. I want to remote my laptop on same lan but the laptops internet connection is from the wifi.Is this possible?</p>
","<p>Use Wired for Remote desktop of PC as it is directly connect to PC and internet for Wireless for Laptop.</p>

<p>Following is configuration for your case.</p>

<p><strong>Wireless for Internet</strong></p>

<p>Wireless LAN adapter Wireless Network Connection:</p>

<p>IPv4 Address. . . . . . . . . . . : 192.168.1.105(Preferred)
   Subnet Mask . . . . . . . . . . . : 255.255.255.0
   Default Gateway . . . . . . . . . : 192.168.1.1</p>

<p><strong>Wired for RD of PC</strong></p>

<p>Ethernet adapter Local Area Connection:</p>

<p>IPv4 Address. . . . . . . . . . . : 192.168.18.1(Preferred)
   Subnet Mask . . . . . . . . . . . : 255.255.255.0
   Default Gateway . . . . . . . . . : 192.168.18.2</p>

<p><strong>TESTING</strong>
Both internet and PC is accessible.</p>

<p>C:\Users\BAZ>ping 8.8.8.8</p>

<p>Ping statistics for 8.8.8.8:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 125ms, Maximum = 132ms, Average = 127ms</p>

<p>C:\Users\BAZ>ping 192.168.18.2</p>

<p>Ping statistics for 192.168.18.2:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 0ms, Maximum = 0ms, Average = 0ms</p>
","2516"
"Suppress confirmation prompts in IOS when copying files","2833","","<p>I am about to upgrade the IOS on several hundred Cisco VG224's in preparation for a CUCM upgrade.</p>

<p>I am attempting to streamline/automate this process as much as possible, and currently my main problem is the ""confirmation"" prompts that IOS gives back for the <code>copy</code> command.  For example:</p>

<pre><code>GW-TEST#copy scp://USER:PASSWORD@SERVER//path/path/vg224-i6k9s-mz.151-4.M7.bin slot0:vg224-i6k9s-mz.151-4.M7.bin
Destination filename [vg224-i6k9s-mz.151-4.M7.bin]? 
Translating ""SERVER""...domain server (192.168.101.2) [OK] 
 Sending file modes: C0644 28935060 vg224-i6k9s-mz.151-4.M7.bin
!!! ::SNIP:: !!!!
28935060 bytes copied in 501.532 secs (57693 bytes/sec)

GW-TEST#
</code></pre>

<p>I have found the appropriate syntax to have the device not prompt me for the username or password every time.  </p>

<p>But now, no matter what I do, it still prompts me to confirm the <code>Destination filename [vg224-i6k9s-mz.151-4.M7.bin]</code>.</p>

<p>Is there a way to stop this behavior?</p>
","<p>The command you're looking for is <code>file prompt quiet</code>.</p>

<p>If you change this setting in Global Configuration mode, it will suppress the confirmation alerts you're seeing and allow one line, automated file operations.</p>

<p>However, it is worth noting that for the most part, the confirmation prompts are there to protect your system and ""CYA""...  If you feed the wrong information into your file operations, you could potentially interrupt service on this device.</p>

<p>If you do disable the file prompts, I would make sure that one of the last steps in your script is to reset it to the default of <code>file prompt alert</code>.</p>

<p>See <a href=""http://www.cisco.com/en/US/docs/ios/fundamentals/command/reference/cf_f1.pdf"">this Cisco PDF</a> for more information.</p>
","3792"
"In which OSI/TCP-IP model layers do BGP, RIP protocols belong?","2833","","<p>We know that in the OSI or TCP-IP model, the higher layer utilizes the services offered by the lower layer. For example, the data link layer uses services offered by the physical layer, network layer uses services offered by the data link layer and so on.</p>

<p>However, I find that some protocols uses services provided by the protocols in the layers above them. For example, both BGP and RIP perform routing which is usually considered as network layer functionality. BGP uses TCP while RIP uses UDP. So here protocols at the network layer which are using services from the protocols in the transport layer. That's why some people online argue that BGP &amp; RIP should be associated at least at the transport layer, while some say that these are application layer protocols as they use services of transport layers, and in TCP-IP model above transport layer there is only application layer.</p>

<p>I understand both BGP and RIP perform mostly network layer functionality of routing. What's the truth/convention?</p>
","<p>You have to remember that models like OSI are just that, models. They are theoretical. The real world doesn't fall neatly into these models. For the most part, routing is a layer-3 function, but, as you pointed out, BGP uses a layer-4 protocol to communicate with other BGP speakers in order to do what is normally considered a layer-3 function.</p>

<p>Many network protocols fall into a gray area, or are considered in one layer while using another layer. Take ARP for instance. It resolves layer-3 addresses to layer-2 addresses. Which layer should it be considered to be in?</p>

<p>Understanding the models is useful, but the models are not mandated by any organization, and you are free to create protocols and functions that do not follow any model.</p>
","24256"
"OSPF between ASA and IOS: Subnet and area design","2821","","<p><img src=""https://i.stack.imgur.com/waG32.png"" alt=""enter image description here"">Network: 100.10.0.0/21</p>

<pre><code>R1, 100.10.0.9/29 (loopback 100.10.0.1/32)
R2, 100.10.0.10/29 (loopback 100.10.0.2/32)

ASA (active), 100.10.0.11/29
ASA (passive), 100.10.0.12/29
</code></pre>

<p>R1 has two bgp transit upstreams. R2 and R1 has iBGP so R2 can route via R1. R2 will, after ospf is confirmed working, get one of the transit upstreams. Both R1 and R2 now has a static route for 100.10.0.0/21 to 100.10.0.11 (asa).</p>

<p>Do I have to divide the /21 subnet into smaller areas, or can it, in its whole, be part of area 0 (if so, I don't understand how R1 or R2 would know to reach everything on the /21 by routing to the asa).</p>

<p>Divide the /21</p>

<pre><code>area 0
    network 100.10.0.8 255.255.255.248

area 1
    network 100.10.1.0 255.255.255.0
    network 100.10.2.0 255.255.255.0
    network 100.10.3.0 255.255.255.0
    network 100.10.4.0 255.255.255.0
    network 100.10.5.0 255.255.255.0
    network 100.10.6.0 255.255.255.0
    network 100.10.7.0 255.255.255.0
</code></pre>

<p>OR, have the network as a whole in area 0?</p>

<pre><code>area 0
    network 100.10.0.0 255.255.248.0 
</code></pre>
","<p>Like Mike said (in the comments) the network command will search for interfaces within that range and start advertising through it. It will also take the subnet of that interface and advertise it into OSPF. A cleaner way of looking at it that now a days instead of giving the network command you can go into an interface and add it to the OSPF proccess. This in turn does the same as the network command (find interface - advertise it)</p>

<p>If you say /24 or /21 doesn´t matter it's just a wider scope for OSPF to search for the interface.</p>

<p>Now back to your issue, the /21 won´t be advertised unless you have an interface as /21 and are advertising it in OSPF. What you could do is a static route (pointing to null0) on the ASA and redistribute it into OSPF (redistribute static subnets). Other methods like summary address are only available in ABR and ASBR  (OSPF Border routers). Or you could, if applicable inject a default route in OSPF at the ASA.</p>

<p>The area part totally depends on your setup but if we are only talking OSPF within routers and ASA we can safely assume that one Area 0 will suffice. Try not to get mixed up with areas and networks here. Without going into to much detail and explinations of area and LSA just remember the golden rule, every area has to connect to the center (area 0), and area 0 can not be discontiguous.</p>

<p>Also remember if you want to redistribute iBGP into OSPF you need to allow it within BGP with ""bgp redistribute-internal"".</p>

<p>Based on your information i hope this is what you where looking for.</p>

<p>EDIT: OSPF area</p>
","3679"
"Can't query NTP through router","2820","","<p><strong>Network diagram</strong> <a href=""http://www.gliffy.com/go/publish/6010719"" rel=""nofollow"">http://www.gliffy.com/go/publish/6010719</a></p>

<p>We have a small-business grade NAT router, Draytek Vigor 2950. Devices behind the router are unable to communicate with NTP servers on the outside. This includes both Windows PCs, and our IP phones. All other services (DNS, HTTP, FTP, IMAP, SMTP, POP) function as expected.</p>

<p>I know that NTP (<strong>edit</strong> used to be ""NAT"") uses UDP port 123. I thought I wouldn't have to make any adjustments on the router in order for UDP to function properly; the NAT functionality should take care of it. Our IP phones (and some PCs) use SIP to initiate the connection; they work fine.</p>

<p>EDIT: I decided to test other UDP applications. Using the method suggested at <a href=""https://support.safesoftsolutions.com/index.php?pg=kb.page&amp;id=639"" rel=""nofollow"">https://support.safesoftsolutions.com/index.php?pg=kb.page&amp;id=639</a> nothing gets through. I'm confused.</p>

<p>How can I further test?</p>
","<p>You updated to say that no UDP appears to be working.</p>

<p>I am not familiar with your product, but I have seen this type of behavior when the device uses a stateful firewall and it is configured to only allow inbound ""established"" traffic.</p>

<p>TCP will establish a connection, but UDP does not.  To allow UDP return traffic, you typically have to allow ""related"" traffic in addition to established traffic.</p>
","10209"
"Add secondary public IP to Sonicwall NSA 3500","2818","","<p>I have a Sonicwall NSA 3500 firewall. I have a primary block of public IP addresses that are working fine but I need to utilize a second block of IPs that are routing over the primary from the telco side.  Does anyone know how to configure this on a sonic wall? I am not finding much info on it.
I have done the NATing and firewall rules etc but I don't see a place to configure the gateway on the firewall for the 2nd block of IPs. </p>
","<p>See <a href=""https://support.software.dell.com/kb/sw7621"" rel=""nofollow"">this knowledge base article</a> for details, but basically:</p>

<ol>
<li>Create a Static ARP entry for the new network.</li>
<li>Create a Static Route</li>
</ol>
","7661"
"Switchport in half duplex - Download speed suffering but upload was fine","2818","","<p>A user had issues with download speed from the Internet. The connection to the Internet is 100 Mbit/s. The user got around 7 Mbit/s downstream and around 80 Mbit/s upstream.</p>

<p>I tested from my computer and it got around 70 Mbit/s downstream and 80 Mbit/s upstream. Obviously the users PC was to blame.</p>

<p>I checked the switch which is a Catalyst 3560 and there it was as I expected, the port was in half duplex. The user had hard coded his PC to 100/full and the port was using auto. The speed is detected by the Fast Link Pulses (FLP) but the duplex must be assumed to be half so the port was using 100/half. With show controller I could see collisions and late collisions as expected.</p>

<p>The bandwidth was tested via the swedish site www.bredbandskollen.se. It uses TCP to test the latency at first. Then it opens a socket via Flash and does several HTTP GET (TCP) and measures the downstream bandwith for about 10 seconds. After that it does four HTTP posts to the server and sends traffic for 10 seconds and calculates the upstream bandwidth.</p>

<p>I know that these kind of sites are not 100% accurate but usually they can at least give some kind of indication if you are close to receiving the kind of bandwidth that you should and it was an easy test to run to make sure it was the user and not the network at fault here.</p>

<ol>
<li><p>Why was only downstream affected and not upstream?</p></li>
<li><p>Are these real collisions? Since cable has separate transmit and receive pairs.</p></li>
</ol>
","<p>This is entirely normal behaviour with a duplex mismatch.</p>

<blockquote>
  <p>Why was only downstream affected and not upstream?</p>
</blockquote>

<p>Since the computer is operating in full duplex mode, it isn't utilizing CSMA-CD.  This means it doesn't check if the medium is idle before it transmits, nor will it perceive any data it receives while transmitting as a collision.  As such, the upload from the computer would remain largely unaffected.</p>

<p>Conversely, the switch is utilizing CSMA-CD and will wait for the medium to be idle before it transmits.  In addition, when the switch detects a collision, it immediately stops transmitting the frame and follows the CSMA-CD collision detect procedure.  This has a significant performance impact on the traffic sent to the computer.</p>

<p>When the traffic is TCP, the negative effect will be multiplied as any lost TCP ACK's going to the computer will cause a TCP retransmission.</p>

<blockquote>
  <p>Are these real collisions? Since cable has separate transmit and receive pairs.</p>
</blockquote>

<p>Yes, they are real collisions; even in a full half duplex environment (i.e. hubs) there are separate transmit and receive pairs.  The reason is that in a half duplex environment the hubs will repeat the signal received on one port out all other ports.  If two stations were to try to transmit at the same time, the signal that gets repeated will not be usable.</p>

<p>Since the switch is operating in half duplex mode, it operates like it is in such an environment and can only transmit or receive at any given time.  Any time the switch is sending a frame and detects other traffic on the medium (i.e. the computer, which isn't checking for an idle medium), this is treated as a collision and the switch will follow the collision detection procedure (which includes a wait or back off period of time).</p>

<p>As the computer is not operating this way (i.e. it starts transmitting automatically when there is data to send), you end up with many more collisions than you would get in a environment that was entirely made up of half duplex devices.</p>

<p><strong>Edit:</strong> I did come across a reference to these this weekend while searching an unrelated matter where they were referred to as <em>false collisions</em>.  I would disagree with this viewpoint since the switch clearly sees them as a collision and handles them as such.  Rather, I would think of them as <em>unnecessary collisions</em> in that they should not exist in a switched network.</p>

<hr>

<p>As an aside, this is the most often reported type of duplex mismatch (where the switch is set to auto and the computer to full duplex).  Most people download much more than they upload, they tend to notice this condition more easily to report it.</p>
","6127"
"Does a subnet mask indicate the class of a Private IP?","2812","","<p>This question is fairly basic to those in this community...</p>

<ul>
<li><p>Is <code>192.168.X.X/24 (255.255.255.0)</code> a class C private address?</p></li>
<li><p>If so, can someone explain how is it possible to have a subnet mask greater than
<code>255.255.0.0</code>? I thought <code>255.255.0.0</code> was the default/natural mask of a class C private?</p></li>
</ul>

<p>I have some understanding that CIDR is different from classful. In this example, however, my professor went on to subnet the networks, separating them by <code>192.168.10.0</code> and <code>192.168.20.0</code> which made no sense to me considering the original question was written with <code>/24</code>.</p>

<ul>
<li>If it is of the private class C range, why would the 3rd octet be usable?</li>
</ul>

<p><em>While I know this question is outdated, I'm studying for Net+/CCNA so I need to know, unfortunately.</em></p>
","<h1>Is 192.168.X.X/24 (255.255.255.0) a class C private address?</h1>

<p>You got it and you usually see it like this because of it being the default on so many home routers.</p>

<h1>If so, can someone explain how is it possible to have a subnet mask greater than 255.255.0.0? I thought 255.255.0.0 was the default/natural mask of a class C private?</h1>

<p>Greater as in 255.0.0.0 or 255.255.255.0? It's possible because you have 4 octet's in a Ip4 address. Which gives you 4 octets to mask. </p>

<h1>In this example, however, my professor went on to subnet the networks, separating them by 192.168.10.0 and 192.168.20.0 which made no sense to me considering the original question was written with /24.</h1>

<p>Ahh this is where you got confused. A subnet mask will tell you what part of an ip address is the network part. So if you have 192.168.XXX.XXX /16 or 255.255.0.0 we can see that only the first 2 octets are part of the network address and the last 2 octets are part of the host address. so any Ip's that start with 192.168 are now part of the same network and anything in the third octet is only used to identify a host. </p>

<p>so if you take 192.168.10.xxx and 192.168.20.xxx /16 they are in the same network (192.168.xxx.xxx) if you change the mask to /24 (255.255.255.0) the first 3 octet's are now Network's and have to match. So 192.168.10.xxx and 192.168.20.xxx 10 and 20 dont match, they are different networks, and only the last octet is used to identify host on the network (255.255.255.0 255 is for networks, 0 is for host), and this gets much more advanced so get a good understanding of it now while you can. For instance you can use a ACL to route traffic to one host only. say 192.168.10.123 all you have to do is set the netmask to 255.255.255.255 and it will make sure it only goes to the host that matchs ever number in every octet.</p>

<h1>If it is of the private class C range, why would the 3rd octet be usable?</h1>

<p>Now you know it's because of the netmask /24 =)</p>
","20110"
"standard results for gigabit ethernet iperf","2810","","<p>I can't achieve good transfer rate through scp and I wonder if the network configuration isn't tuned up correctly. I've noticed some differences when running iperf through tcp vs udp. 
Are these results normal for two PC's in the same gigabit ethernet lan? 
This is the output from the server:</p>

<pre><code>./iperf -s
------------------------------------------------------------
Server listening on TCP port 5001
TCP window size:  128 KByte (default)
------------------------------------------------------------
[  4] local 192.168.91.150 port 5001 connected with 192.168.91.164 port 50651
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-10.0 sec   599 MBytes   501 Mbits/sec


./iperf -s -u -w 64K
------------------------------------------------------------
Server listening on UDP port 5001
Receiving 1470 byte datagrams
UDP buffer size: 64.0 KByte
------------------------------------------------------------
[  3] local 192.168.91.150 port 5001 connected with 192.168.91.164 port 39694
[ ID] Interval       Transfer     Bandwidth        Jitter   Lost/Total Datagrams
[  3]  0.0-30.0 sec   179 MBytes  50.0 Mbits/sec   0.386 ms    0/127660 (0%)
[  3]  0.0-30.0 sec  1 datagrams received out-of-order
</code></pre>

<p>when transfering through scp:</p>

<pre><code>129MB   4.6MB/s   00:28  
</code></pre>

<p>Are these results coherent? Why is so much difference between UDP/TCP/SCP ( is scp supposed to go over tcp?) </p>

<p>Thanks</p>
","<p>iperf testing over UDP requires the client to specify what bandwidth to send at (-b option).  So for your UDP test results listed, your iperf client was configured to push data to your server at a rate of 50 Mbits/sec.  </p>

<p>iperf testing over TCP sometimes requires that you adjust the TCP Window Size option (-w) to fully saturate a fast link.  Try using ""-w 256k"" on both the iPerf client and iPerf server and test again.</p>

<p>=-=-=-=</p>

<p>scp runs over TCP.  scp can be configured to encrypt and/or compress data before sending it.  Your bottleneck may be the CPU on one side of your link (do you have a way to check CPU utilization?).  You can try specifying a different encryption method or (if you trust your link) even disable encryption altogether.  You can also confirm that compression is disabled.  </p>

<p>Are you trying to transfer many small files over scp?  If so, you may get better performance if you 'tar' up the small files into one big file before sending over scp.</p>
","5382"
"How to Configure a Server with two NIC","2802","","<p><a href=""https://i.stack.imgur.com/R1mLi.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/R1mLi.png"" alt=""enter image description here""></a></p>

<p>I'm reformulating the question, once the previous provoked a little confusion. </p>

<p>I didn't find a way to subnet <code>172.16.1.0/26</code> between two interfaces. MY thought was to set device's gateway to the next device. </p>

<p>Ex: </p>

<pre><code>R3 - 172.16.1.1 255.255.255.192
Server Fa0/0 - 172.16.1.2 255.255.255.192 ; 172.16.1.1
Server Fa0/1 - 172.16.1.3 255.255.255.192 ; 172.16.1.2
</code></pre>

<p>Triggered it : <strong>PT uses 1st port as the default port to forward traffic to the outside network. The 2nd port is only for forwarding traffic within the subnet. Configuring default gateway on 2nd port is insignificant.</strong></p>

<p>How to subnet my network for what all traffic can pass and be filtered?</p>
","<p>Change the server Fa0 to 172.16.1.66 255.255.255.192  The default gateway is 172.16.1.65.  </p>

<p>Fa1 has the original address 172.16.1.3 255.255.255.192. No default gateway.</p>

<p>Change the router interface fa0/0 to 172.16.1.65 255.255.255.192</p>

<p>You will also need a static route on the router:</p>

<pre><code>ip route 172.16.1.0 255.255.255.192 172.16.1.66
</code></pre>
","20845"
"Weird ping back from Cisco Router","2802","","<p>I just got this router, fresh out of the box. I turn it on and set it up and I get these weird IPs:</p>

<pre><code>Pinging 192.168.1.1 with 32 bytes of data:
Reply from 74.x.x.254: TTL expired in transit.
Reply from 74.x.x.254: TTL expired in transit.
Reply from 74.x.x.106: TTL expired in transit.
Reply from 74.x.x.254: TTL expired in transit.

Ping statistics for 192.168.1.1:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
</code></pre>

<p>Never seen this before. Is this a Cisco thing?</p>
","<p>My best guess here without more information is that you hooked up a WAN port to your existing network.  The new router got an IP from DHCP, along with a default gateway.  When you try to ping 192.168.1.1, the packet is routed to your default gateway.  </p>

<p>For whatever reason, your network routes the packet out to the Internet, where it loops around in no-man's land until the 30-hop TTL expires.  A traceroute to the same IP should tell us more about what's going on in case my guess is incorrect. =)</p>
","5082"
"Extend MACSec encryption over provider bridge","2784","","<p>I already asked this question on SF, but figured it might be a better fit here.</p>

<p>Is it at all possible to extend MACSec encryption over a provider bridge? Will the typical 802.1ad implementation be able to forward the encrypted frame, or will forwarding break frame integrity?</p>

<p>I do realize MACSec is intended for hop-by-hop security. Are there any reasons not to use MACSec for point-to-point encryption over a carrier, or other special considerations that should be taken into account?</p>

<p>The reason I ask is that MACSec hardware offers wirespeed encryption at a fraction of the typical cost associated with layer 2 encryption.</p>

<p>I don't have the rep to add new tags, but feel free to add relevant tags for MACSec, PBN, 802.1ad and 802.1ae etc</p>
","<p>MacSec (i.e. 802.1ae-2006) is a hop-by-hop encyption technology... Therefore provider-bridged MacSec isn't possible today; however, there is <a href=""http://www.ieee802.org/1/files/public/docs2013/ae-seaman-macsec-hops-0213-v02.pdf"" rel=""nofollow"">a talk of relaxing per-hop MacSec encryption</a></p>
","2220"
"DHCP Server On Two Subnet On Single Shared Network","2781","","<p>I had been working in a mid-large company, and had limited administrator privilege both server and network.</p>

<p>We had network that had two subnet on single shared network consist of 192.168.1.0/24 and 192.168.4.0/24. The full flagged administrator had been setup DHCP server with 2 pool 192.168.1.0/24 and 192.168.4.0/24.</p>

<p>I had been noticed that pool 192.168.4.0/24 not working even when 192.168.1.0/24 already full assigned.</p>

<p>Following picture of how our DHCP server look like.
<a href=""https://i.stack.imgur.com/shpij.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/shpij.jpg"" alt=""enter image description here""></a></p>

<p>Are there way to solve this, so we can also use 192.168.4.0/24 when other exhausted ?</p>
","<p>There is quite a bit of detail missing from your description, but you do have a fairly simple question:</p>

<blockquote>
  <p>Can I implement dhcp relay on the router for two subnet in same broadcast domain?</p>
</blockquote>

<p>You could, but there really is no point. DHCP relay features are only there to proxy specific broadcast traffic (by default only DHCP traffic) from one broadcast domain to another.</p>

<p>Since your client and your DHCP server are in the same broadcast domain, there is no need to proxy DHCP broadcasts. The server and client will be able to communicate with broadcasts just fine without any help.</p>

<p>A bit more commentary on other parts of your description, although we are still lacking details:</p>

<blockquote>
  <p>I as I know it would not be successful for subnet address that not used as IP address in router in this case 192.168.4.0/24 should not work.</p>
</blockquote>

<p>There is no reason the router interface/SVI for the VLAN cannot have two addresses, one from each subnet. As such, it could work just fine. Even if this weren't the case, there are other reasons one may do something like this.</p>

<blockquote>
  <p>But since it not sunetted properly I had no idea what that full flagged administrator tried to achive </p>
</blockquote>

<p>There is nothing wrong with the subnetting. There are two perfectly good subnets that do not overlap in your description. Although there may be other problems in the setup.</p>

<p>What he was trying to achieve we could only guess without knowing more detail and/or asking the party in question.</p>
","22510"
"how to make udp reliable","2777","","<p>In a job interview i had faced a question that</p>

<p>In my company we always use udp because it is very much fast. and we have reliability also. can u answer how? without adding so much overhead to the udp how can you make udp reliable?</p>
","<p>UDP by itself isn't reliable.  The data acknowledge/retransmission functions have to occur at a higher (i.e. application) level.  TFTP is a good example of that.</p>
","16813"
"How to best re-allocate interfaces to move to a different VDC","2776","","<p>I'm working on re-allocating interfaces that are on a N7K-M132XP-12L (32 port 10 Gig module) in a Nexus 7k.</p>

<p>The ports are currently configured as follows</p>

<pre><code>vdc router_VDC_2 id 2
allocate interface Ethernet1/1-24 
vdc router_VDC_3 id 3
allocate interface Ethernet1/25-32
</code></pre>

<p>I need to move 8 interfaces from VDC_2 to VDC_1. The 8 I would like to move is 1/16-24.</p>

<p>How do I go about moving the interfaces without causing any kind of outage on VDC 2?</p>

<p>Would the following work?</p>

<pre><code>vdc router_VDC_1 id 1
allocate interface Ethernet1/16-24 
</code></pre>
","<p>Assuming that these ports are just access ports and are not participating in any routing or VLAN trunking which would cause a STP re-convergence or a routing re-convergence. It should be safe to move them.</p>

<p>You should not have to specify the id field.
This command should simply work:</p>

<pre><code>vdc router_VDC_1
allocate interface Ethernet1/16-24
!now exit, switchto vdc and begin configuring the interfaces
switchto vdc router_VDC_1
int e1/16
  no shut
  ....etc
</code></pre>

<p>The only outage you'll see when moving ports between VDCs is on the ports themselves.
By default - the config they are populated with on the new VDC is simply shutdown. So the devices attached will have their links drop until you configure and unshut the interface.</p>

<p><strong>Update:</strong> I didn't notice that you mentioned that since this is a N7K-M132XP-12L card - the port assignments work in 4's due the way the ASICS are configured. You would not be allowed to move port 16. If you did, it would cause ports 11, 12, &amp; 13 to move with it. You could move e1/17-24 without any problems.</p>
","7569"
"Juniper EX2200 can't boot","2771","","<p>I recently acquired a Juniper EX2200-24T-4G switch, but I have some issues getting it up and running.</p>

<p>When I power on the switch the boot process looks normal, but after some time it suddenly turns up with some errors and after that it automatically reboots.</p>

<p>I have tried to reinstall Junos through the <code>loader&gt;</code> prompt, but it just fails.</p>

<p>Software version installed is 12.3R7.7.</p>

<p>I have no clue, why it's doing this, can someone explain how to solve the problem?</p>

<pre><code>---------- BOOT PROCESS ----------

U-Boot 1.1.6 (Nov 22 2009 - 07:01:21)

Board: EX2200-24T-4G 4.12
EPLD:  Version 04.100311 (0x02)
DRAM:  Initializing (512MB)
Flash: 8 MB
USB:   scanning bus for devices... 3 USB Device(s) found
       scanning bus for storage devices... 1 Storage Device(s) found

ELF file is 32 bit
Consoles: U-Boot console

FreeBSD/arm U-Boot loader, Revision 1.0
(Wed Nov 18 14:02:39 PST 2009)
Memory: 512MB
Loading /boot/defaults/loader.conf
/kernel data=0x885980+0xdde78 syms=[0x4+0xf0b60+0x4+0xc81f4]


Hit [Enter] to boot immediately, or space bar for command prompt.
Booting [/kernel]...
Kernel entry at 0x1400100 ...
GDB: debug ports: uart
GDB: current port: uart
KDB: debugger backends: ddb gdb
KDB: current backend: ddb
Copyright (c) 1996-2014, Juniper Networks, Inc.
All rights reserved.
Copyright (c) 1992-2006 The FreeBSD Project.
Copyright (c) 1979, 1980, 1983, 1986, 1988, 1989, 1991, 1992, 1993, 1994
    The Regents of the University of California. All rights reserved.
JUNOS 12.3R7.7 #0: 2014-06-12 14:14:29 UTC
    /volume/build/junos/12.3/release/12.3R7.7/obj-arm/junos/bsd/kernels/JUNIPER-EX-2200/kernel
can't re-use a leaf (all_slot_serialid)!
CPU: Feroceon 88FR131 rev 1 (Marvell core)
cpu53: Feroceon 88FR131 revision   WB enabled EABT branch prediction enabled
  16KB/32B 4-way Instruction cache
  16KB/32B 4-way write-back-locking-C Data cache
real memory  = 536870912 (512 MB)
avail memory = 503222272 (479 MB)
SOC: Marvell 88F6281 rev A0, TClock 200MHz
Security policy loaded: Junos MAC/veriexec (mac_veriexec)
MAC/veriexec fingerprint module loaded: SHA256
MAC/veriexec fingerprint module loaded: SHA1
ETHERNET SOCKET BRIDGE initialising
Initializing EXSERIES properties ...
mbus0: &lt;Marvell Internal Bus (Mbus)&gt; on motherboard
ic0: &lt;Marvell Integrated Interrupt Controller&gt; at mem 0xf1020200-0xf102023b on mbus0
timer0: &lt;Marvell CPU Timer&gt; at mem 0xf1020300-0xf102032f irq 1 on mbus0
gpio0: &lt;Marvell Integrated GPIO Controller&gt; at mem 0xf1010100-0xf101011f irq 35,36,37,38,39,40,41 on mbus0
uart0: &lt;16550 or compatible&gt; at mem 0xf1012000-0xf101201f irq 33 on mbus0
uart0: console (9600,n,8,1)
uart1: &lt;16550 or compatible&gt; at mem 0xf1012100-0xf101211f irq 34 on mbus0
ehci0: &lt;88F5XXX Integrated USB 2.0 controller&gt; at mem 0xf1050000-0xf1050fff irq 48,19 on mbus0
usb0: EHCI version 1.0
usb0 on ehci0
usb0: USB revision 2.0
uhub0: Marvell EHCI root hub, class 9/0, rev 2.00/1.00, addr 1
uhub0: 1 port with 1 removable, self powered
uhub1: vendor 0x04cc product 0x1520, class 9/0, rev 2.00/2.00, addr 2
uhub1: single transaction translator
uhub1: 2 ports with 2 removable, self powered
umass0: STMicroelectronics ST72682  High Speed Mode, rev 2.00/2.10, addr 3
mge0: &lt;Marvell Gigabit Ethernet controller&gt; at mem 0xf1072000-0xf1073fff irq 12,13,14,11,46 on mbus0
miibus0: &lt;MII bus&gt; on mge0
e1000phy0: &lt;Marvell 88E1118 Gigabit PHY&gt; on miibus0
e1000phy0:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, 1000baseTX-FDX, auto
i2c0: &lt;Marvell I2C ARM OnChip Controller&gt; at mem 0xf1011000-0xf101101f irq 29 on mbus0
syspld0: &lt;SYSPLD&gt; on i2c0
8564 rtc0: &lt;8564 RTC&gt; on i2c0
poe0: &lt;POE&gt; on i2c0
poe_attach: re-types method failed
device_attach: poe0 attach returned 19
cfi0: &lt;SPI flash - 8MB&gt; at mem 0xf1010600-0xf101062f,0xf8000000-0xf87fffff irq 23 on mbus0
mpfe0: &lt;Juniper EX-series Packet Forwarding Engine&gt; at mem 0xf4000000-0xf7ffffff irq 113 on mbus0
pcib0: &lt;Marvell 88F6281 PCI-Express host controller&gt; at mem 0xf1040000-0xf1041fff,0xe8000000-0xefffffff irq 9 on mbus0
pci0: &lt;PCI bus&gt; on pcib0
Initializing product: 75 ..
bmeb: bmeb_lib_init done 0xc3386800, addr 0xc1d5d7a4
bme0:Virtual BME driver initializing
Timecounter ""CPU Timer"" frequency 200000000 Hz quality 1000
###PCB Group initialized for udppcbgroup
###PCB Group initialized for tcppcbgroup
da0 at umass-sim0 bus 0 target 0 lun 0
da0: &lt;ST ST72682 2.10&gt; Removable Direct Access SCSI-2 device
da0: 40.000MB/s transfers
da0: 1000MB (2048000 512 byte sectors: 64H 32S/T 1000C)
Kernel thread ""wkupdaemon"" (pid 42) exited prematurely.
Trying to mount root from ufs:/dev/da0s2a
Invalid time in real time clock.
Check and reset the date immediately!
Attaching /packages/jbase via /dev/mdctl...
Mounted jbase package on /dev/md0...
Verified manifest signed by PackageProduction_12_3_0
Verified jboot signed by PackageProduction_12_3_0
Verified jbase-ex-12.3R7.7 signed by PackageProduction_12_3_0
Mounted fips-mode-arm package on /dev/md1...
Verified manifest signed by PackageProduction_12_3_0
Verified fips-mode-arm-12.3R7.7 signed by PackageProduction_12_3_0
Mounted jcrypto-ex package on /dev/md2...
Verified manifest signed by PackageProduction_12_3_0
Verified jcrypto-ex-12.3R7.7 signed by PackageProduction_12_3_0
Mounted jdocs-ex package on /dev/md3...
Verified manifest signed by PackageProduction_12_3_0
Verified jdocs-ex-12.3R7.7 signed by PackageProduction_12_3_0
Mounted jkernel-ex-2200 package on /dev/md4...
Verified manifest signed by PackageProduction_12_3_0
Verified jkernel-ex-2200-12.3R7.7 signed by PackageProduction_12_3_0
Mounted jpfe-ex22x package on /dev/md5...
Verified manifest signed by PackageProduction_12_3_0
Verified jpfe-ex22x-12.3R7.7 signed by PackageProduction_12_3_0
Mounted jroute-ex package on /dev/md6...
Verified manifest signed by PackageProduction_12_3_0
Verified jroute-ex-12.3R7.7 signed by PackageProduction_12_3_0
Mounted jswitch-ex package on /dev/md7...
Verified manifest signed by PackageProduction_12_3_0
Verified jswitch-ex-12.3R7.7 signed by PackageProduction_12_3_0
Mounted jweb-ex package on /dev/md8...
Verified manifest signed by PackageProduction_12_3_0
Verified jweb-ex-12.3R7.7 signed by PackageProduction_12_3_0
Executing /packages/mnt/jweb-ex-12.3R7.7/mount.post..
Automatic reboot in progress...
Media check on da0 on ex platforms
camcontrol: error sending command
(pass0:umass-sim0:0:0:0): Vendor Specific Command. CDB: f1
(pass0:umass-sim0:0:0:0): CAM Status: SCSI Status Error
(pass0:umass-sim0:0:0:0): SCSI Status: Check Condition
(pass0:umass-sim0:0:0:0): DATA PROTECT asc:27,0
(pass0:umass-sim0:0:0:0): Write protected
camcontrol: error sending command
** /dev/da0s2a
FILE SYSTEM CLEAN; SKIPPING CHECKS
clean, 37042 free (10 frags, 4629 blocks, 0.0% fragmentation)
(da0:umass-sim0:0:0:0): WRITE(10). CDB: 2a 0 0 1a 5e 80 0 0 20 0
(da0:umass-sim0:0:0:0): CAM Status: SCSI Status Error
(da0:umass-sim0:0:0:0): SCSI Status: Check Condition
(da0:umass-sim0:0:0:0): DATA PROTECT asc:27,0
(da0:umass-sim0:0:0:0): Write protected
(da0:umass-sim0:0:0:0): Unretryable error
** /dev/da0s3e
** Last Mounted on /var
** Phase 1 - Check Blocks and Sizes
PARTIALLY TRUNCATED INODE I=12363
SALVAGE? yes


CANNOT WRITE BLK: 194176
UNEXPECTED SOFT UPDATE INCONSISTENCY

CONTINUE? yes

THE FOLLOWING SECTORS COULD NOT BE WRITTEN: 194176, 194177, 194178, 194179, 194180, 194181, 194182, 194183, 194184, 194185, 194186, 194187, 194188, 194189, 194190, 194191, 194192, 194193, 194194, 194195, 194196, 194197, 194198, 194199, 194200, 194201, 194202, 194203, 194204, 194205, 194206, 194207,
-1 BAD I=12363
UNEXPECTED SOFT UPDATE INCONSISTENCY

1 DUP I=12363
UNEXPECTED SOFT UPDATE INCONSISTENCY

2 DUP I=12363
UNEXPECTED SOFT UPDATE INCONSISTENCY

3 DUP I=12363
UNEXPECTED SOFT UPDATE INCONSISTENCY

4 DUP I=12363
UNEXPECTED SOFT UPDATE INCONSISTENCY

5 DUP I=12363
UNEXPECTED SOFT UPDATE INCONSISTENCY

6 DUP I=12363
UNE(da0:umass-sim0:0:0:0): WRITE(10). CDB: 2a 0 0 1a 5e 54 0 0 1 0
(da0:umass-sim0:0:0:0): CAM Status: SCSI Status Error
(da0:umass-sim0:0:0:0): SCSI Status: Check Condition
(da0:umass-sim0:0:0:0): DATA PROTECT asc:27,0
(da0:umass-sim0:0:0:0): Write protected
(da0:umass-sim0:0:0:0): Unretryable error
XPECTED SOFT UPDATE INCONSISTENCY

-1 BAD I=12363
UNEXPECTED SOFT UPDATE INCONSISTENCY

1 DUP I=12363
UNEXPECTED SOFT UPDATE INCONSISTENCY

2 DUP I=12363
UNEXPECTED SOFT UPDATE INCONSISTENCY

3 DUP I=12363
UNEXPECTED SOFT UPDATE INCONSISTENCY

4 DUP I=12363
UNEXPECTED SOFT UPDATE INCONSISTENCY

5 DUP I=12363
UNEXPECTED SOFT UPDATE INCONSISTENCY

EXCESSIVE DUP BLKS I=12363
CONTINUE? yes

INCORRECT BLOCK COU(da0:umass-sim0:0:0:0): WRITE(10). CDB: 2a 0 0 1a 5e 55 0 0 1 0
(da0:umass-sim0:0:0:0): CAM Status: SCSI Status Error
(da0:umass-sim0:0:0:0): SCSI Status: Check Condition
(da0:umass-sim0:0:0:0): ILLEGAL REQUEST asc:20,0
(da0:umass-sim0:0:0:0): Invalid command operation code
(da0:umass-sim0:0:0:0): Unretryable error
NT I=12363 (2592 should be 472)
CORRECT? yes

INTERNAL ERROR: dups with -p
UNEXPECTED SOFT UPDATE INCONSISTENCY
** Phase 1b - Rescan For More DUPS

CANNOT WRITE BLK: 192096
UNEXPECTED SOFT UPDATE INCONSISTENCY

CONTINUE? yes

THE FOLLOWING SECTORS COULD NOT BE WRITTEN: 192096, 192097, 192098, 192099, 192100, 192101, 192102, 192103, 192104, 192105, 192106, 192107, 192108, 192109, 192110, 192111, 192112, 192113, 192114, 192115, 192116, 192117, 192118, 192119, 192120, 192121, 192122, 192123, 192124, 192125, 192126, 192127,
1 DUP I=12363
UNEXPECTED SOFT UPDATE INCONSISTENCY

2 DUP I=12363
UNEXPECTED SOFT UPDATE INCONSISTENCY

3 DUP I=12363
UNEXPECTED SOFT UPDATE INCONSISTENCY

4 DUP I=12363
UNEXPECTED SOFT UPDATE INCONSISTENCY

5 DUP I=12363
UNEXPECTED SOFT UPDATE INCONSISTENCY

6 DUP I=12363
UNEXPECTED SOFT UPDATE INCONSISTENC(da0:umass-sim0:0:0:0): WRITE(10). CDB: 2a 0 0 1a 5e 57 0 0 1 0
(da0:umass-sim0:0:0:0): CAM Status: SCSI Status Error
(da0:umass-sim0:0:0:0): SCSI Status: Check Condition
(da0:umass-sim0:0:0:0): DATA PROTECT asc:27,0
(da0:umass-sim0:0:0:0): Write protected
(da0:umass-sim0:0:0:0): Unretryable error
Y

** Phase 2 - Check Pathnames
DIRECTORY CORRUPTED  I=12481  OWNER=39 MODE=40775
SIZE=512 MTIME=Sep 30 09:15 2014
DIR=?

UNEXPECTED SOFT UPDATE INCONSISTENCY

SALVAGE? yes

MISSING '.'  I=12481  OWNER=39 MODE=40775
SIZE=512 MTIME=Sep 30 09:15 2014
DIR=?

UNEXPECTED SOFT UPDATE INCONSISTENCY

FIX? yes

DIRECTORY CORRUPTED  I=12484  OWNER=0 MODE=41777
SIZE=512 MTIME=Sep 30 09:15 2014
DIR=?

UNEXPECTED SOFT UPDATE INCONSISTENCY

SALVAGE? yes

MISSING '.'  I=12484  OWNER=0 MODE=41777
SIZE=512 MTIME=Sep 30 09:15 2014
DIR=?

UNEXPECTED SOFT(da0:umass-sim0:0:0:0): WRITE(10). CDB: 2a 0 0 17 6c c0 0 0 20 0
(da0:umass-sim0:0:0:0): CAM Status: SCSI Status Error
(da0:umass-sim0:0:0:0): SCSI Status: Check Condition
(da0:umass-sim0:0:0:0): ILLEGAL REQUEST asc:20,0
(da0:umass-sim0:0:0:0): Invalid command operation code
(da0:umass-sim0:0:0:0): Unretryable error
 UPDATE INCONSISTENCY

FIX? yes


CANNOT WRITE BLK: 194128
UNEXPECTED SOFT UPDATE INCONSISTENCY

CONTINUE? yes

THE FOLLOWING SECTORS COULD NOT BE WRITTEN: 194128, 194129, 194130, 194131,

CANNOT WRITE BLK: 194132
UNEXPECTED SOFT UPDATE INCONSISTENCY

CONTINUE? yes

THE FOLLOWING SECTORS COULD NOT BE WRITTEN: 194132, 194133, 194134, 194135,
DUP/BAD  I=12363  OWNER=0 MODE=100640
SIZE=1297280 MTIME=Sep 30 10:01 2014
FILE=/log/chassisd

UNEXPECTED SOFT UPDATE INCONSISTENCY

REMOVE? yes

MISSING '..'  I=12481  OWNER=39 MODE=40775
SIZE=512 MTIME=Sep 30 09:15 2014
DIR=/log/ext

UNEXPECTED SOFT UPDATE INCONSISTENCY

FIX? yes

DIRECTORY CORRUPTED  I=12481  OWNER=39 MODE=40775
SIZE=512 MTIME=Sep 30 09:15 2014
DIR=?

UNEXPECTED SOFT UPDATE INCONSISTENCY

SALVAGE? yes

MISSING '..'  I=12484  OWNER=0 MODE=41777
SIZE=51(da0:umass-sim0:0:0:0): WRITE(10). CDB: 2a 0 0 17 6c c1 0 0 1 0
(da0:umass-sim0:0:0:0): CAM Status: SCSI Status Error
(da0:umass-sim0:0:0:0): SCSI Status: Check Condition
(da0:umass-sim0:0:0:0): DATA PROTECT asc:27,0
(da0:umass-sim0:0:0:0): Write protected
(da0:umass-sim0:0:0:0): Unretryable error
2 MTIME=Sep 30 09:15 2014

CANNOT WRITE BLK: 255976
UNEXPECTED SOFT UPDATE INCONSISTENCY

CONTINUE? yes

THE FOLLOWING SECTORS COULD NOT BE WRITTEN: 255976, 255977, 255978, 255979,

CANNOT WRITE BLK: 194128
UNEXPECTED SOFT UPDATE INCONSISTENCY

CONTINUE? yes

THE FOLLOWING SECTORS COULD NOT BE WRITTEN: 194128, 194129, 194130, 194131,
DIR=/log/ggsn

UNEXPECTED SOFT UPDATE INCONSISTENCY

FIX? yes

DIRECTORY C(da0:umass-sim0:0:0:0): WRITE(10). CDB: 2a 0 0 17 6c c2 0 0 1 0
(da0:umass-sim0:0:0:0): CAM Status: SCSI Status Error
(da0:umass-sim0:0:0:0): SCSI Status: Check Condition
(da0:umass-sim0:0:0:0): ILLEGAL REQUEST asc:20,0
(da0:umass-sim0:0:0:0): Invalid command operation code
(da0:umass-sim0:0:0:0): Unretryable error
ORRUPTED  I=12484  OWNER=0 MODE=41777
SIZE=512 MTIME=Sep 30 09:15 2014
DIR=?

UNEXPECTED SOFT UPDATE INCONSISTENCY

SALVAGE? yes

** Phase 3 - Check Connectivity
UNREF DIR  I=12485  OWNER=0 MODE=41777
SIZE=512 MTIME=Sep 30 09:15 2014
(da0:umass-sim0:0:0:0): WRITE(10). CDB: 2a 0 0 17 6c c4 0 0 1 0
(da0:umass-sim0:0:0:0): CAM Status: SCSI Status Error
(da0:umass-sim0:0:0:0): SCSI Status: Check Condition
(da0:umass-sim0:0:0:0): DATA PROTECT asc:27,0
(da0:umass-sim0:0:0:0): Write protected
(da0:umass-sim0:0:0:0): Unretryable error
RECONNECT? yes


CANNOT WRITE BLK: 194132
UNEXPECTED SOFT UPWARNING: /var was not properly dismounted
DATE INCONSISTENCY

CONTINUE? yes

THE FOLLOWING SECTORS COULD NOT BE WRITTEN: 194132, 194133, 194134, 194135,
DIR I=12485 CONNECTED. PARENT WAS I=12484

** Phase 4 - Check Reference Counts
BAD/DUP FILE I=12363  OWNER=0 MODE=100640
SIZE=1297280 MTIME=Sep 30 10:01 2014
CLEAR? yes


CANNOT WRITE BLK: 1216
UNEXPECTED SOFT UPDATE INCONSISTENCY

CONTINUE? yes

THE FOLLOWING SECTORS COULD NOT BE WRITTEN: 1216, 1217, 1218, 1219, 1220, 1221, 1222, 1223, 1224, 1225, 1226, 1227, 1228, 1229, 1230, 1231, 1232, 1233, 1234, 1235, 1236, 1237, 1238, 1239, 1240, 1241,(da0:umass-sim0:0:0:0): WRITE(10). CDB: 2a 0 0 17 6c 60 0 0 4 0
(da0:umass-sim0:0:0:0): CAM Status: SCSI Status Error
(da0:umass-sim0:0:0:0): SCSI Status: Check Condition
(da0:umass-sim0:0:0:0): ILLEGAL REQUEST asc:20,0
(da0:umass-sim0:0:0:0): Invalid command operation code
(da0:umass-sim0:0:0:0): Unretryable error
 1242, 1243, 124g_vfs_done():da0s3e[WRITE(offset=573440, length=2048)]error = 22
4, 1245, 1246, 1247,
LINK COUNT DIR I=12484  OWNER=0 MODE=41777
SIZE=512 MTIME=Sep 30 09:15 2014  COUNT 3 SHOULD BE 2
ADJUST? yes

** Phase 5 - Check Cyl groups
FREE BLK COUNT(S) WRONG IN SUPERBLK
SALVAGE? yes

SUMMARY INFORMATION BAD
SALVAGE? yes

BLK(S) MISSING IN BIT MAPS
SALVAGE? yes


CANNOT WRITE BLK: 64
UNEXPECTED SOFT UPDATE INCONSISTENCY

CONTINUE? yes

THE FOLLOWING SECTORS COULD NOT BE WRITTEN: 64, 65, 66, 67, 68, 69, 70, 71,
1107 files, 2485 used, 60417 free (265 frags, 7519 blocks, 0.4% fragmentation)

CANNOT WRITE BLK: 16
UNEXPECTED SOFT UPDATE INCONSISTENCY

CONTINUE? yes

THE FOLLOWING SECTORS COULD NOT BE WRITTEN: 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31,

CANNOT WRITE BLK: 1120
UNEXPECTED SOFT UPDATE INCONSISTENCY

CONTINUE? yes

THE FOLLOWING SECTORS COULD NOT BE WRITTEN: 1120, 1121, 1122, 1123,

CANNOT WRITE BLK: 192064
UNEXPECTED SOFT UPDATE INCONSISTENCY

CONTINUE? yes

THE FOLLOWING SECTORS COULD NOT BE WRITTEN: 192064, 192065, 192066, 192067, 192068, 192069, 192070, 192071,

CANNOT WRITE BLK: 197208
UNEXPECTED SOFT UPDATE INCONSISTENCY

CONTINUE? yes

THE FOLLOWING SECTORS COULD NOT BE WRITTEN: 197208, 197209, 197210, 197211,

CANNOT WRITE BLK: 96
UNEXPECTED SOFT UPDATE INCONSISTENCY

CONTINUE? yes

THE FOLLOWING SECTORS COULD NOT BE WRITTEN: 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127,

CANNOT WRITE BLK: 192096
UNEXPECTED SOFT UPDATE INCONSISTENCY

CONTINUE? yes

THE FOLLOWING SECTORS COULD NOT BE WRITTEN: 192096, 192097, 192098, 192099, 192100, 192101, 192102, 192103, 192104, 192105, 192106, 192107, 192108, 192109, 192110, 192111, 192112, 192113, 192114, 192115, 192116, 192117, 192118, 192119, 192120, 192121, 192122, 192123, 192124, 192125, 192126, 192127,

CANNOT WRITE BLK: 192128
UNEXPECTED SOFT UPDATE INCONSISTENCY

CONTINUE? yes

THE FOLLOWING SECTORS COULD NOT BE WRITTEN: 192128, 192129, 192130, 192131, 192132, 192133, 192134, 192135, 192136, 192137, 192138, 192139, 192140, 192141, 192142, 192143, 192144, 192145, 192146, 192147, 192148, 192149, 192150, 192151, 192152, 192153, 192154, 192155, 192156, 192157, 192158, 192159,

***** FILE SYSTEM STILL DIRTY *****

***** PLEASE RERUN FSCK *****
Computing slice and partition sizes for /dev/da0 ...
savecore: could not be determined
No dump exists
(da0:umass-sim0:0:0:0): WRITE(10). CDB: 2a 0 0 17 6c 60 0 0 4 0
(da0:umass-sim0:0:0:0): CAM Status: SCSI Status Error
(da0:umass-sim0:0:0:0): SCSI Status: Check Condition
(da0:umass-sim0:0:0:0): DATA PROTECT asc:27,0
(da0:umass-sim0:0:0:0): Write protected
(da0:umass-sim0:0:0:0): Unretryable error
** /dev/da0s3d

CANNOT READ BLK: 128
CONTINUE? yes

THE FOLWARNING: /var/tmp was not properly dismounted
LOWING DISK SECTORS COULD NOT BE READ:
** Last Mounted on /var/tmp
** Phase 1 - Check Blocks and Sizes
** Phase 2 - Check Pathnames
** Phase 3 - Check Connectivity
** Phase 4 - Check Reference Counts
** Phase 5 - Check Cyl groups
10 files, 69 used, 188785 free (33 frags, 23594 blocks, 0.0% fragmentation)

CANNOT WRITE BLK: 16
UNEXPECTED SOFT UPDATE INCONSISTENCY

CONTINUE? yes

THE FOLLOWING SECTORS COULD NOT BE WRITTEN: 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31,

CANNOT WRITE BLK: 3104
UNEXPECTED SOFT UPDATE INCONSISTENCY

CONTINUE? yes

THE FOLLOWING SECTORS COULD NOT BE WRITTEN: 3104, 3105, 3106, 3107,

***** FILE SYSTEM MARKED CLEAN *****
(da0:umass-sim0:0:0:0): WRITE(10). CDB: 2a 0 0 b b1 10 0 0 4 0
(da0:umass-sim0:0:0:0): CAM Status: SCSI Status Error
(da0:umass-sim0:0:0:0): SCSI Status: Check Condition
(da0:umass-sim0:0:0:0): DATA PROTECT asc:27,0
(da0:umass-sim0:0:0:0): Write protected
(da0:umass-sim0:0:0:0): Unretryable error
** /dev/da0s4d

CANNOT READ BLK: 128
CONTINUE? yes

THE FOLWARNING: /config was not properly dismounted
LOWING DISK SECTORS COULD NOT BE READ:
** Last Mounted on /config
** Phase 1 - Check Blocks and Sizes
** Phase 2 - Check Pathnames
** Phase 3 - Check Connectivity
** Phase 4 - Check Reference Counts
** Phase 5 - Check Cyl groups
42 files, 49 used, 31557 free (37 frags, 3940 blocks, 0.1% fragmentation)

CANNOT WRITE BLK: 16
UNEXPECTED SOFT UPDATE INCONSISTENCY

CONTINUE? yes

THE FOLLOWING SECTORS COULD NOT BE WRITTEN: 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31,

CANNOT WRITE BLK: 608
UNEXPECTED SOFT UPDATE INCONSISTENCY

CONTINUE? (da0:umass-sim0:0:0:0): WRITE(10). CDB: 2a 0 0 1b 53 60 0 0 4 0
(da0:umass-sim0:0:0:0): CAM Status: SCSI Status Error
(da0:umass-sim0:0:0:0): SCSI Status: Check Condition
(da0:umass-sim0:0:0:0): DATA PROTECT asc:27,0
(da0:umass-sim0:0:0:0): Write protected
(da0:umass-sim0:0:0:0): Unretryable error
yes

THE FOLLOg_vfs_done():da0s4d[WRITE(offset=311296, length=2048)]error = 13
WING SECTORS COULD NOT BE WRITTEN: 608, 609, 610, 611,

***** FILE SYSTEM MARKED CLEAN *****
(da0:umass-sim0:0:0:0): WRITE(10). CDB: 2a 0 0 17 6d 60 0 0 20 0
(da0:umass-sim0:0:0:0): CAM Status: SCSI Status Error
(da0:umass-sim0:0:0:0): SCSI Status: Check Condition
(da0:umass-sim0:0:0:0): ILLEGAL REQUEST asc:20,0
(da0:umass-sim0:0:0:0): Invalid command operation code
(da0:umass-sim0:0:0:0): Unretryable error
initiate_write_filepage: already started
initiate_write_filepage: already started
(da0:umass-sim0:0:0:0): WRITE(10). CDB: 2a 0 0 18 66 6c 0 0 4 0
(da0:umass-sim0:0:0:0): CAM Status: SCSI Status Error
(da0:umass-sim0:0:0:0): SCSI Status: Check Condition
(da0:umass-sim0:0:0:0): DATA PROTECT asc:27,0
(da0:umass-sim0:0:0:0): Write protected
(da0:umass-sim0:0:0:0): Unretryable error
g_vfs_done():da0s3e[WRITE(offset=33978368, length=2048)]error = 5
panic: initiate_write_inodeblock_ufs1: already started
Uptime: 5m14s
Cannot dump. No dump device defined.
Automatic reboot in 15 seconds - press a key on the console to abort
Rebooting...
</code></pre>
","<p>All the SCSI errors indicate a broken disk, or a disk about to break. Request an RMA at JTAC if you have support. If not, you may be able to find some hints on the internet on how to replace the disk, I personally haven't tried that.</p>
","16975"
"riverbed wan optimizer does not receive traffic","2756","","<p>I have 2 Riverbed WAN optimizers and a WAN simulator. I connected 2 WAN ports of the 2 Riverbeds to the WAN simulator, connected 2 LAN ports along with 2 servers on a switch, and configured 2 subnets for the server and Riverbed –– But the Riverbed does not receive traffic from my servers.</p>

<p>Why? Is there something special I need to do for the Riverbed?</p>

<p>The topology is like so:</p>

<p><a href=""https://i.stack.imgur.com/hOrp2.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/hOrp2.png"" alt=""enter image description here""></a></p>
","<p>Assuming the servers can ping each other:</p>

<ul>
<li><p>You need to check that the Optimization Service is enabled globally and for your inpath interface otherwise the Riverbed will not interact with network traffic at all. </p></li>
<li><p>As soon as Optimization is enabled you can check under ""Reports / Connected Appliances"" if the Riverbeds can see each other.</p></li>
</ul>
","2042"
"How to identify IPsec phase 2 on particular phase 1","2753","","<p>I want to find out which phase 2 is associated with a particular phase 1 on cisco ASA device.</p>

<p>There are several phase 1 and phase 2 on the device. With the following commands, I can see the active SAs :</p>

<pre><code>   show crypto isakamp sa details
   show crypto ipsec sa details
</code></pre>

<p>But there is only one active for each phase. The configuration itself does not explicitly say ""This phase 2 is associated with this phase 1"" like Fortigate 60D from Fortinet for example.</p>

<p>Referring to <a href=""http://www.cisco.com/c/en/us/td/docs/security/asa/asa70/configuration/guide/config/ike.html"" rel=""nofollow"">this doc</a> on cisco website, I understand VPNs tunnels are established after trying each phase configuration until a match is found.</p>

<p>Is there a way to know on cisco ASA devices which phase 2 is associated with a particular phase 1 ?</p>
","<p>Another useful vpn show command is:   </p>

<p><em>show vpn-sessiondb detail l2l</em></p>

<p><a href=""http://www.cisco.com/c/en/us/td/docs/security/asa/asa82/command/reference/cmd_ref/s7.html#wp1306284"" rel=""nofollow"">ASA Command Reference Guide</a></p>

<p>This should give you what you are looking for.  This command gives quite a bit of information for each tunnel that is negotiated.  This can also be utilized to view other types of VPNs.  The syntax may be slightly different depending on code version.</p>
","28018"
"Default Stateful nature of Cisco ASA not working. What should I look for?","2752","","<p>Scenario:
Host A (trusted side of firewall) needs to talk to a web server on port 443 (untrusted side)
Trusted rule exists on the Cisco ASA - permit Host_A Web_SVR port 443</p>

<p>The trusted rule should allow Host A to talk to the web server on port 443 and also allow the return traffic for that session through the firewall due to the session being initiated by the trusted source.</p>

<p>Everywhere I have read that the ASA is state full and return traffic rule should not be needed.</p>

<p>The problem is in my specific situation the ASA is denying the return traffic due to the source/destination ip's and protocols being reversed.  </p>

<p>The question is what configurations exist in the default setup that make the Cisco ASA act in a stateful manner?</p>

<p>Historical Information:
The stateful manner was working previously.  We did an OS upgrade and received a new baseline config around the same time a few months ago.  This is around when the issue started.  I'm thinking it's a possible bug in the new IOS or a necessary config was overlooked or didn't take with the new IOS.</p>

<p>I've compared the old config and new config and there were a few object/service type syntax changes which were updated prior to loading the new config.  I did not notice any failed commands when the new configs were loaded.</p>

<p>If you have any suggestions as to what I should try to look for I would appreciate it.</p>

<p>Thanks
J</p>
","<p>The issue has been resolved.</p>

<p>Problem was we upgraded the ASA OS version and the upgrade required a memory upgrade as well and memory usage was pegged at 100%.  Memory upgrade is complete now and the stateful nature of the ASA has returned to normal.</p>

<p>Thanks for everyone's support.</p>
","9926"
"Network not participating in OSPF. Does not appear in the routing table","2750","","<p>I am running OSPF on 2 router in GNS simulation for practice. Adjacencies are ok. Router R2 has in the routing table all networks of R3 . But R3 fails to add R2 network in its routing table . The network that is not participating in ospf is the 172.16.100.0/24 as shown below Any idea why?</p>

<pre><code>**R2**
Routing Protocol is ""ospf 1""
  Outgoing update filter list for all interfaces is not set
  Incoming update filter list for all interfaces is not set
  Router ID 172.168.100.1
  It is an autonomous system boundary router
  Redistributing External Routes from,
    eigrp 1, includes subnets in redistribution
  Number of areas in this router is 2. 2 normal 0 stub 0 nssa
  Maximum path: 4
  Routing for Networks:
    172.16.23.0 0.0.0.255 area 0
    172.16.100.0 0.0.0.255 area 10
 Reference bandwidth unit is 100 mbps
  Routing Information Sources:
    Gateway         Distance      Last Update
    192.168.40.1         110      00:14:35
  Distance: (default is 110)

R2#show run | s ospf
 ip ospf network point-to-point
 redistribute ospf 1 metric 10000 100 255 1 1500
router ospf 1
 log-adjacency-changes
 redistribute eigrp 1 subnets
 network 172.16.23.0 0.0.0.255 area 0
 network 172.16.100.0 0.0.0.255 area 10

R2#show ip ospf interface
Serial0/1 is up, line protocol is up
  Internet Address 172.16.23.2/24, Area 0
  Process ID 1, Router ID 172.168.100.1, Network Type POINT_TO_POINT, Cost: 64
  Transmit Delay is 1 sec, State POINT_TO_POINT,
  Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5
    oob-resync timeout 40
    Hello due in 00:00:07
  Supports Link-local Signaling (LLS)
  Index 1/1, flood queue length 0
  Next 0x0(0)/0x0(0)
  Last flood scan length is 1, maximum is 6
  Last flood scan time is 0 msec, maximum is 0 msec
  Neighbor Count is 1, Adjacent neighbor count is 1
    Adjacent with neighbor 192.168.40.1
  Suppress hello for 0 neighbor(s)

R2#show ip int b
Interface                  IP-Address      OK? Method Status                Protocol
FastEthernet0/0            unassigned      YES NVRAM  administratively down down 
Serial0/0                  172.16.12.2     YES NVRAM  up                    up   
FastEthernet0/1            unassigned      YES NVRAM  administratively down down 
Serial0/1                  172.16.23.2     YES NVRAM  up                    up   
Loopback0                  172.16.2.1      YES NVRAM  up                    up   
Loopback100                172.168.100.1   YES manual up                    up

R2#show ip route
Codes: C - connected, S - static, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
       E1 - OSPF external type 1, E2 - OSPF external type 2
       i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2
       ia - IS-IS inter area, * - candidate default, U - per-user static route
       o - ODR, P - periodic downloaded static route

Gateway of last resort is not set

     192.168.30.0/32 is subnetted, 1 subnets
O       192.168.30.1 [110/65] via 172.16.23.3, 00:36:47, Serial0/1
     192.168.25.0/32 is subnetted, 1 subnets
O       192.168.25.1 [110/65] via 172.16.23.3, 00:36:47, Serial0/1
     192.168.40.0/32 is subnetted, 1 subnets
O       192.168.40.1 [110/65] via 172.16.23.3, 00:36:47, Serial0/1
     172.168.0.0/24 is subnetted, 1 subnets
C       172.168.100.0 is directly connected, Loopback100
     172.16.0.0/16 is variably subnetted, 5 subnets, 2 masks
C       172.16.23.0/24 is directly connected, Serial0/1
C       172.16.12.0/24 is directly connected, Serial0/0
D       172.16.1.0/24 [90/2297856] via 172.16.12.1, 01:06:07, Serial0/0
O       172.16.3.1/32 [110/65] via 172.16.23.3, 00:36:48, Serial0/1
C       172.16.2.0/24 is directly connected, Loopback0
     192.168.20.0/32 is subnetted, 1 subnets
O       192.168.20.1 [110/65] via 172.16.23.3, 00:36:49, Serial0/1
D    192.168.51.0/24 [90/2297856] via 172.16.12.1, 01:06:08, Serial0/0
D    192.168.50.0/24 [90/2297856] via 172.16.12.1, 01:06:08, Serial0/0
     192.168.35.0/32 is subnetted, 1 subnets
O       192.168.35.1 [110/65] via 172.16.23.3, 00:36:49, Serial0/1
D    192.168.70.0/24 [90/2297856] via 172.16.12.1, 01:06:08, Serial0/0
O IA 192.168.8.0/22 [110/65] via 172.16.23.3, 00:36:49, Serial0/1
D    192.168.48.0/23 [90/2297856] via 172.16.12.1, 01:06:08, Serial0/0
</code></pre>

<p>""HERE the interface loopback 100 does not appear , i added it using network command""</p>

<pre><code>**R3**
Routing Protocol is ""ospf 1""
  Outgoing update filter list for all interfaces is not set
  Incoming update filter list for all interfaces is not set
  Router ID 192.168.40.1
  It is an area border router
  Number of areas in this router is 2. 2 normal 0 stub 0 nssa
  Maximum path: 4
  Routing for Networks:
    172.16.3.0 0.0.0.255 area 0
    172.16.23.0 0.0.0.255 area 0
    192.168.8.0 0.0.0.255 area 20
    192.168.9.0 0.0.0.255 area 20
    192.168.10.0 0.0.0.255 area 20
    192.168.11.0 0.0.0.255 area 20
    192.168.20.0 0.0.0.255 area 0
    192.168.25.0 0.0.0.255 area 0
    192.168.30.0 0.0.0.255 area 0
    192.168.35.0 0.0.0.255 area 0
    192.168.40.0 0.0.0.255 area 0
 Reference bandwidth unit is 100 mbps
  Routing Information Sources:
    Gateway         Distance      Last Update
    (this router)        110      00:35:11
    Gateway         Distance      Last Update
    172.168.100.1        110      00:15:09
    172.16.2.1           110      02:03:26
  Distance: (default is 110)

R3#show run | s ospf
 ip ospf network point-to-point
 ip ospf network point-to-point
 ip ospf network point-to-point
 ip ospf network point-to-point
router ospf 1
 log-adjacency-changes
 area 20 range 192.168.8.0 255.255.252.0
 network 172.16.3.0 0.0.0.255 area 0
 network 172.16.23.0 0.0.0.255 area 0
 network 192.168.8.0 0.0.0.255 area 20
 network 192.168.9.0 0.0.0.255 area 20
 network 192.168.10.0 0.0.0.255 area 20
 network 192.168.11.0 0.0.0.255 area 20
 network 192.168.20.0 0.0.0.255 area 0
 network 192.168.25.0 0.0.0.255 area 0
 network 192.168.30.0 0.0.0.255 area 0
 network 192.168.35.0 0.0.0.255 area 0
 network 192.168.40.0 0.0.0.255 area 0

R3#show ip ospf interface
Loopback40 is up, line protocol is up
  Internet Address 192.168.40.1/24, Area 0
  Process ID 1, Router ID 192.168.40.1, Network Type LOOPBACK, Cost: 1
  Loopback interface is treated as a stub Host
Loopback35 is up, line protocol is up
  Internet Address 192.168.35.1/24, Area 0
  Process ID 1, Router ID 192.168.40.1, Network Type LOOPBACK, Cost: 1
  Loopback interface is treated as a stub Host
Loopback30 is up, line protocol is up
  Internet Address 192.168.30.1/24, Area 0
  Process ID 1, Router ID 192.168.40.1, Network Type LOOPBACK, Cost: 1
  Loopback interface is treated as a stub Host
Loopback25 is up, line protocol is up
  Internet Address 192.168.25.1/24, Area 0
  Process ID 1, Router ID 192.168.40.1, Network Type LOOPBACK, Cost: 1
  Loopback interface is treated as a stub Host
Loopback20 is up, line protocol is up
  Internet Address 192.168.20.1/24, Area 0
  Process ID 1, Router ID 192.168.40.1, Network Type LOOPBACK, Cost: 1
  Loopback interface is treated as a stub Host


R3#show ip int b
Interface                  IP-Address      OK? Method Status                Protocol
FastEthernet0/0            unassigned      YES NVRAM  administratively down down
Serial0/0                  172.16.23.3     YES NVRAM  up                    up
FastEthernet0/1            unassigned      YES NVRAM  administratively down down
Serial0/1                  unassigned      YES NVRAM  administratively down down
Loopback0                  172.16.3.1      YES NVRAM  up                    up
Loopback8                  192.168.8.1     YES manual up                    up
Loopback9                  192.168.9.1     YES manual up                    up
Loopback10                 192.168.10.1    YES manual up                    up
Loopback11                 192.168.11.1    YES manual up                    up
Loopback20                 192.168.20.1    YES NVRAM  up                    up
Loopback25                 192.168.25.1    YES NVRAM  up                    up
Loopback30                 192.168.30.1    YES NVRAM  up                    up
Loopback35                 192.168.35.1    YES NVRAM  up                    up
Loopback40                 192.168.40.1    YES NVRAM  up                    up

R3#show ip route eigrp

R3#show ip route
Codes: C - connected, S - static, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
       E1 - OSPF external type 1, E2 - OSPF external type 2
       i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2
       ia - IS-IS inter area, * - candidate default, U - per-user static route
       o - ODR, P - periodic downloaded static route

Gateway of last resort is not set

C    192.168.30.0/24 is directly connected, Loopback30
C    192.168.8.0/24 is directly connected, Loopback8
C    192.168.25.0/24 is directly connected, Loopback25
C    192.168.9.0/24 is directly connected, Loopback9
C    192.168.10.0/24 is directly connected, Loopback10
C    192.168.40.0/24 is directly connected, Loopback40
     172.16.0.0/24 is subnetted, 5 subnets
C       172.16.23.0 is directly connected, Serial0/0
O E2    172.16.12.0 [110/20] via 172.16.23.2, 00:35:47, Serial0/0
O E2    172.16.1.0 [110/20] via 172.16.23.2, 00:35:49, Serial0/0
O E2    172.16.2.0 [110/20] via 172.16.23.2, 00:35:49, Serial0/0
C       172.16.3.0 is directly connected, Loopback0
C    192.168.11.0/24 is directly connected, Loopback11
C    192.168.20.0/24 is directly connected, Loopback20
O E2 192.168.51.0/24 [110/20] via 172.16.23.2, 00:35:50, Serial0/0
O E2 192.168.50.0/24 [110/20] via 172.16.23.2, 00:35:50, Serial0/0
C    192.168.35.0/24 is directly connected, Loopback35
O E2 192.168.70.0/24 [110/20] via 172.16.23.2, 00:35:50, Serial0/0
O    192.168.8.0/22 is a summary, 00:55:56, Null0
O E2 192.168.48.0/23 [110/20] via 172.16.23.2, 00:35:50, Serial0/0
</code></pre>
","<p>Your loopback 100 address is 172.168.100.0/24, but your network statement is 172.16.100.0/24, so Loopback 100 is not in the OSPF domain.</p>
","5679"
"Enable OpenVPN tunnel to dynamic IP without DynDNS","2750","","<p>I need to get acces to multiple remote LAN (not <em>specially</em> at the same time) from my office (Fixed IP).</p>

<p>All these remote LAN will be connected to internet via 3 or 4G USB key and will have dynamic IP address.</p>

<p>An OpenVPN Server is running in my Office</p>

<p><em>Note : I want to avoid DynDNS service to reduce cost.</em></p>

<p><a href=""https://i.stack.imgur.com/ydrW1.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ydrW1.png"" alt=""enter image description here""></a></p>

<p><strong>__EDIT__</strong></p>

<p>Question :
How can I tunnel to my 3/4G gateway if it has dynamic IP (and no DynDNS) ?</p>

<p>My first guest was to establish a first tunnel from my 3/4G gateway to my office which have a fixed IP. And then establish a second tunnel from my office to the 3/4G gateway.</p>

<p>Note : I have multiple 3/4G gateway with the same LAN configuration and I want to find a way to tunnel to each one.</p>
","<p>My understanding is that you have multiple remote sites to connect to with:</p>

<ul>
<li>dynamic public IPs</li>
<li>identical LAN IPs from one to the other.</li>
</ul>

<p>Those are actually two separate issues with completely different types of solutions. Handling dynamic public IPs can be done with a standard OpenVPN configuration (no DynDNS). Once the VPN part is in place, you should NAT each LAN to a distinct private IP range, such that your workstation thinks it sees different remote LANs.</p>

<p>So if all the LANs use 192.168.1.0/24, you would map the first one to (for example) 10.0.1.0/24, the second one to 10.0.2.0/24, etc...</p>

<p>Without knowing more about the specific hardware, it's hard to say whether this is best done on your central gateway or on the remote site gateways, though.</p>
","26501"
"Exactly when is PMTUD performed? (Path MTU discovery)","2744","","<p>In discussions that have spurred from <a href=""https://networkengineering.stackexchange.com/questions/13360/how-do-endpoints-in-a-tcp-conversation-determine-their-mss"">other questions</a> on <a href=""https://networkengineering.stackexchange.com/questions/8288/difference-between-mss-and-mtu"">this site</a>, I've realised that I don't have a solid understanding of <strong>when</strong> Path MTU Discovery (PMTUD) is performed.</p>

<p>I know <em>what</em> it does -- discover the lowest MTU on a path from Client to Server).<BR>
I know <em>how</em> it does it -- send progressively larger packets with their ""Don't Fragment"" bit set, and see how big of a packet you can get through without getting a ""ICMP Need to Fragment"" error.</p>

<p>My question is specifically then, <strong><em>when</em> will a host perform PMTUD?</strong></p>

<p>I'm looking for specific cases.  Not just something generic like ""when a host wants to discover the path MTU"".  Bonus points if you can provide a packet capture of a host doing it, or provide instructions for generating such a packet capture.</p>

<p>Also, I am specifically referring to IPv4.  I know in IPv6 transient routers aren't responsible for fragmentation, and can imagine that PMTUD happens much more commonly.  But for now, I'm looking for specific examples of PMTUD in IPv4.  <em>(although if the only packet capture you can put together of PMTUD is in IPv6, I would still love to see it)</em></p>
","<p>The answer is simple: whenever the host pleases. Really. It's that simple.</p>

<p>The explanation below assumes an IPv4-only environment, since IPv6 does away with fragmentation in the routers (forcing the host to always deal with fragmentation and MTU discovery).</p>

<p>There is no strict rule that governs when (or even if) a host does Path MTU Discovery. The reason that PMTUD surfaced is that <a href=""http://www.hpl.hp.com/techreports/Compaq-DEC/WRL-87-3.pdf"">fragmentation is considered harmful</a> for various reasons. To avoid packet fragmentation, the concept of PMTUD was brought to life as a workaround. Of course, a nice operating system <em>should</em> use PMTUD to minimize fragmentation.</p>

<p>So, naturally, the exact semantics of when PMTUD is used depend on the sender's operating system - in particular, the socket implementation. I can only speak for the specific case of Linux, but other UNIX variants are probably not very different.</p>

<p>In Linux, PMTUD is controlled by the <code>IP_MTU_DISCOVER</code> socket option. You can retrieve its current status with <code>getsockopt(2)</code> by specifying the level <code>IPPROTO_IP</code> and the <code>IP_MTU_DISCOVER</code> option. This option is valid for <code>SOCK_STREAM</code> sockets only (a <code>SOCK_STREAM</code> socket is a two-way, connection-oriented, reliable socket; in practice it's a TCP socket, although other protocols are possible), and when set, Linux will perform PMTUD exactly as defined in RFC 1191.</p>

<p>Note that in practice, PMTUD is a continuous process; packets are sent with the DF bit set - including the 3-way handshake packets - you can think of it as a connection property (although an implementation may be willing to accept a certain degree of fragmentation at some point and stop sending packets with the DF bit set). Thus, PMTUD is just a consequence of the fact that everything on that connection is being sent with DF.</p>

<p><strong>What if you don't set <code>IP_MTU_DISCOVER</code>?</strong></p>

<p>There's a default value. By default, <code>IP_MTU_DISCOVER</code> is enabled on <code>SOCK_STREAM</code> sockets. This can be read or changed by reading <code>/proc/sys/net/ipv4/ip_no_pmtu_disc</code>. A zero value means that <code>IP_MTU_DISCOVER</code> is enabled by default in new sockets; a non-zero means the opposite.</p>

<p><strong>What about connectionless sockets?</strong></p>

<p>This is tricky because connectionless, unreliable sockets do not retransmit lost segments. It becomes the user's responsibility to packetize the data in MTU-sized chunks. Also, the user is expected to make the necessary retransmits in case of a <em>Message too big</em> error. So, essentially user code must reimplement PMTUD. Nevertheless, if you're up for the challenge, you can force the DF bit by passing the <code>IP_PMTUDISC_DO</code> flag to <code>setsockopt(2)</code>.</p>

<p><strong>The bottomline</strong></p>

<ul>
<li>The host decides when (and if) to use PMTUD</li>
<li>When it uses PMTUD, it's like a connection attribute, it happens continuously (but at any point the implementation is free to stop doing so)</li>
<li>Different operating systems use different approaches, but usually, reliable, connection-oriented sockets perform PMTUD by default, whereas unreliable, connectionless sockets don't</li>
</ul>
","19612"
"AP3602 with rcvk9w8 image throws ""%CDP_PD-2-POWER_LOW: All radios disabled""","2729","","<p>We recently bought some new <a href=""http://www.cisco.com/en/US/prod/collateral/wireless/ps5678/ps11983/data_sheet_c78-686782.html"">AP3602E</a>s from Cisco.</p>

<p>I'm trying to understand why this AP will not turn on the radio when we are sending enough power to the AP.  I'm using inline power from the switch, but after the AP comes on, it sends <code>%CDP_PD-2-POWER_LOW: All radios disabled</code> to the console.  The LED on the AP flashes green.</p>

<p>Topology:</p>

<pre><code>+---------------+ Gi1/0/1   Gi0/1 +-----------+
|   AP_Test     |                 |           |
|   Cat2960S    |-----------------|  AP3602E  |
|               |                 |           |
+---------------+                 +-----------+
                       &lt;------- cdp Req 13000mW
power inline 13000mW -------&gt;
</code></pre>

<p>The AP is running a 12.4(25e)JAL1a <code>rcvk9w8</code> receive image.</p>

<p>The 2960S is running 12.2(55)SE7.</p>

<p><em>Question</em>: How can I make this AP turn on the radios?</p>

<p><hr>
Misc output...</p>

<p><code>debug cdp ilp</code>...</p>

<pre><code>AP0006.6566.a57b#debug cdp ilp
*May  8 00:11:54.391: CDP-ILP: sent cdp msg:power consumed  pwr=13000
*May  8 00:11:54.391: CDP-ILP: sent cdp msg:power request reqid=47837 manid=3 rlevel(1)=13000
*May  8 00:11:54.635: CDP-ILP: rcvd cdp msg:power available reqid=47837 manid=3 alevel=13000 mlevel=13000
*May  8 00:11:54.635: CDP-ILP: power state:NEGOTIATED_UNCHANGED event:BOTH_ID_unCHANGED unchanged
AP0006.6566.a57b#
</code></pre>

<p><code>show power inline</code>...</p>

<pre><code>AP_Test#show power inline gi1/0/1
Interface Admin  Oper       Power   Device              Class Max
                            (Watts)
--------- ------ ---------- ------- ------------------- ----- ----
Gi1/0/1   auto   on         13.0    AIR-CAP3602E-A-K9     4   30.0

Interface  AdminPowerMax   AdminConsumption
             (Watts)           (Watts)
---------- --------------- ------------------

Gi1/0/1        30.0             30.0
AP_Test#
</code></pre>

<p>2960S switch port interface configuration...</p>

<pre><code>!
interface GigabitEthernet1/0/1
 switchport access vlan 385
 switchport mode access
 switchport nonegotiate
 switchport port-security
 switchport port-security aging time 5
 switchport port-security violation protect
 switchport port-security aging type inactivity
 storm-control broadcast level 0.50
 storm-control action trap
 spanning-tree portfast
 spanning-tree bpduguard enable
end
</code></pre>
","<blockquote>
  <p>it sends <code>%CDP_PD-2-POWER_LOW: All radios disabled to the console</code>...<br>
  Question: How can I make this AP turn on the radios?</p>
</blockquote>

<p>I talked with a Cisco Wireless Consulting SE... The first problem is that the recovery image (i.e. <code>rcv-w8</code> image) does not have the firmware for Dot11 radios... so I had to upload new firmware.</p>

<p>I normally use <code>archive download-sw /force-reload /overwrite tftp://...</code> to upgrade the image when I am dealing with older Cisco AP 1242 models; however, under this image I kept getting an error until I used <a href=""https://supportforums.cisco.com/docs/DOC-18274"" rel=""nofollow noreferrer""><code>debug capwap console cli</code></a>...</p>

<pre><code>AP0006.6566.a57b#arch?
% Unrecognized command
AP0006.6566.a57b#debug capwap console cli
AP0006.6566.a57b#arch?
archive

AP0006.6566.a57b#archive download-sw /force-reload /overwrite tftp://192.0.2.100/ap32g2-k9w7-tar.152-4.JA1.tar
</code></pre>

<p>After upgrading to <code>ap32g2-k9w7-tar.152-4.JA1.tar</code> (the <code>w7</code> is an autonomous AP image) the Dot11radio interfaces came up.</p>

<hr>

<p>Purely informational... this is the open-auth autonomous AP config we're using for our 2.4G and 5.0G survey...</p>

<pre><code>!
version 15.2
no service pad
service tcp-keepalives-in
service tcp-keepalives-out
service timestamps debug datetime localtime show-timezone
service timestamps log datetime localtime show-timezone
service password-encryption
!
hostname Survey_AP
!
!
logging rate-limit console 9
enable secret Cisco
!
aaa new-model
!
!
aaa authentication login default local
!
!
!
!
!
aaa session-id common
clock timezone CST -6 0
clock summer-time CDT recurring
no ip source-route
no ip routing
no ip cef
!
!
!
!
login on-failure log
login on-success log
dot11 syslog
!
dot11 ssid WifiSurvey
   vlan 1
   max-associations 50
   authentication open
   mbssid guest-mode
!
!
dot11 guest
!
!
!
username Cisco password 7 05280F1C2243
!
ip dhcp excluded-address 192.0.2.254
!
ip dhcp pool SURVEY_DHCP
 network 192.0.2.0 255.255.255.0
 lease 0 0 15
 domain-name survey.local
 default-router 192.0.2.254
 dns-server 192.0.2.254
!
!
bridge irb
!
!
!
interface Dot11Radio0
 no ip address
 no ip route-cache
 !
 ssid WifiSurvey
 no shutdown
 !
 antenna gain 0
 ! Block access to 802.11b clients: set 12Mbps as required speed
 speed basic-12.0 m0-7 m8-15
 ! Optional: Power is specified in mW
 ! power local 11
 ! power client 11
 stbc
 mbssid
 station-role root
 world-mode dot11d country-code US indoor
!
interface Dot11Radio0.1
 encapsulation dot1Q 1 native
 no ip route-cache
 bridge-group 1
 bridge-group 1 subscriber-loop-control
 bridge-group 1 spanning-disabled
 bridge-group 1 block-unknown-source
 no bridge-group 1 source-learning
 no bridge-group 1 unicast-flooding
!
interface Dot11Radio1
 no ip address
 no ip route-cache
 !
 ssid WifiSurvey
 no shutdown
 !
 antenna gain 0
 ! Block access to 802.11b clients: set 12Mbps as required speed
 speed basic-12.0 m0-7 m8-15
 ! Optional: Power is specified in mW
 ! power local 11
 ! power client 11
 peakdetect
 dfs band 3 block
 stbc
 mbssid
 channel dfs
 station-role root
 world-mode dot11d country-code US indoor
!
interface Dot11Radio1.1
 encapsulation dot1Q 1 native
 no ip route-cache
 bridge-group 1
 bridge-group 1 subscriber-loop-control
 bridge-group 1 spanning-disabled
 bridge-group 1 block-unknown-source
 no bridge-group 1 source-learning
 no bridge-group 1 unicast-flooding
!
interface GigabitEthernet0
 no ip address
 no ip route-cache
 duplex auto
 speed auto
 bridge-group 1
 bridge-group 1 spanning-disabled
 no bridge-group 1 source-learning
!
interface BVI1
 ip address 192.0.2.254 255.255.255.0
 no ip route-cache
 ipv6 address dhcp
 ipv6 address autoconfig
 ipv6 enable
!
ip forward-protocol nd
ip http server
no ip http secure-server
!
!
!
bridge 1 route ip
!
!
!
line con 0
line vty 0 4
 transport preferred none
 transport input all
!
end
</code></pre>
","3535"
"Cisco ASA: global ACL rule","2727","","<p>Is the <a href=""http://www.cisco.com/c/en/us/td/docs/security/asa/asa84/configuration/guide/asa_84_cli_config/access_rules.html#wp1185516"" rel=""nofollow"">global rule</a> and the implicit deny following it looked at, even if no explicit interface ACL is configured on the interface?</p>

<p><a href=""http://www.cisco.com/c/en/us/td/docs/security/asa/asa84/configuration/guide/asa_84_cli_config/access_rules.html#wp1185516"" rel=""nofollow"">They say</a>:</p>

<blockquote>
  <p>If you configure a global access rule, then the implicit deny comes after the global
  rule is processed. See the following order of operations:</p>
  
  <ol>
  <li><p>Interface access rule.</p></li>
  <li><p>Global access rule.</p></li>
  <li><p>Implicit deny. </p></li>
  </ol>
</blockquote>

<p>What if 1. does not exist and only 2. exists?</p>
","<p>If you don't have an Interface ACL applied, than only the Global ACL and the Implicit Deny at the end of it will be considered.</p>

<p>#3 always exists <em>(so long as either #1 or #2 are applied to an interface)</em>.  You don't have to configure the Implicit Deny (that would make it an explicit deny).  </p>
","16076"
"Expanding an HP IRF topology","2723","","<p>I'm examining options for a future expansion of our infrastructure. We rent space at a colo so we don't have a dedicated datacenter of our own. This means that our next major expansion will likely involve two discrete cages not immediately adjacent. I'm looking at ways of bringing my network into a new cage. </p>

<p>Our current topology has a pair of HP A5820's in an IRF pair, and all of our distribution switches linked to both routers through a 10Gb BAG/Trunk port. That's all well and good.</p>

<p>The question I have comes when we add another full cage. The way I see it, I have two major options:</p>

<ol>
<li>Continue as I am, and connect the distribution switches back to the pair I already have. </li>
<li>Pick up another pair of A5820's and connect the new cage's distribution switches to that, and link that pair to the pair I already have somehow.</li>
</ol>

<p>It's the second option that I'm getting some confusion with.</p>

<p><img src=""https://i.stack.imgur.com/4FuZX.png"" alt=""IRF - linear topo""></p>

<p>This is a pretty standard topology, in that I link the new switches back to the other pair in a linear topology. Anything in Cage 2 needing to go to the other switch will have to transit the full stack, though. I know this will work.</p>

<p>The question here is, can I short-circuit that with a ring topology? Does IRF allow that?</p>

<p><img src=""https://i.stack.imgur.com/oOoFj.png"" alt=""IRF - ring topo""></p>

<p>This would allow a shorter transit of packets. That said, I don't know if IRF allows this kind of setup. If it doesn't...</p>

<p><img src=""https://i.stack.imgur.com/qAQnF.png"" alt=""Paired IRF with trunks""></p>

<p>Or I could create a second IRF device in the new cage, and link the two together with aggregation ports and not bother with IRF at all between them.</p>

<p>Considering each cage would have all of my distribution switches connected to both pairs, the IRF links may not actually get that much traffic across them. If so, I'm over-thinking this.</p>

<p>Am I over thinking it? And if not, does IRF allow a ring topology?</p>
","<p>I'm not HP savvy but I did some quick Googling (hp irf ring topology) and found a couple of docs that indicate it does support a ring topology.</p>

<ul>
<li><a href=""http://bizsupport1.austin.hp.com/bc/docs/support/SupportManual/c02648772/c02648772.pdf"">c02648772.pdf</a></li>
</ul>

<p>Quote from page 5: </p>

<blockquote>
  <p>IRF topologies</p>
  
  <p>Create an IRF virtual device in daisy chain topology,
  or more reliably, ring topology, as shown in Figure 2. In ring chain
  topology, the failure of one IRF link does not cause the IRF virtual
  device to split as in daisy chain topology. Rather, the IRF virtual
  device changes to a daisy chain topology without affecting network
  services.</p>
</blockquote>

<p><a href=""http://h20000.www2.hp.com/bizsupport/TechSupport/Document.jsp?lang=en&amp;cc=us&amp;taskId=120&amp;prodSeriesId=5195279&amp;prodTypeId=12883&amp;objectID=c03239130"">This page</a> has the same quote so at least that seems like a possibility.</p>

<p>HP seems to be recommending the ring but beyond that I can't speak to HP gear.</p>
","762"
"SonicWALL - VPN no LAN conneciton","2723","","<p>Hey guys I have a Problem. </p>

<p>I have no idea why but when I'm connected via VPN I'm not albe to connect to the LAN Servers in our Network. I can surf through the internet with the VPN but I'm not even able to Ping them... It's not a site to site VPN just normal Client To Network.</p>

<p>Did I forgot something? Do you need further information?</p>

<p>1st Pic VPN -> LAN
2nd Pic LAN -> VPN</p>

<p><img src=""https://i.stack.imgur.com/uT03j.png"" alt=""VPN -&gt; LAN Policies"">
<img src=""https://i.stack.imgur.com/xDw8g.png"" alt=""LAN -&gt; VPN Policies""></p>

<pre><code>    netstat -r
Routing tables

Internet:
Destination        Gateway            Flags        Refs      Use   Netif Expire
default            192.168.37.1       UGSc           26        0     en1
80.150.XXX.4       192.168.37.1       UGHS            0        0     en1
127                localhost          UCS             0        0     lo0
localhost          localhost          UH             14 35760176     lo0
169.254            link#5             UCS             0        0     en1
192.168.0.1        192.168.5.3        UH              1        2    ppp0
192.168.5          ppp0               USc             0        0    ppp0
192.168.37         link#5             UCS             1        0     en1
192.168.37.1       68:7f:74:1:d1:5d   UHLWIir        33      173     en1   1162
ersatzbook         localhost          UHS             0       25     lo0
</code></pre>

<p><img src=""https://i.stack.imgur.com/Qa0eG.png"" alt=""NatPolicy""></p>

<p>This is the VPN Access:</p>

<p><img src=""https://i.stack.imgur.com/d3f0w.png"" alt=""VPN Access""></p>

<p>And here we can See the Address Object which is defined in the Firewall.</p>

<p><img src=""https://i.stack.imgur.com/ZggKw.png"" alt=""Address Object""></p>

<p>After all that there are no changes in the connection to the LAN server. But still I'm not able to connect to them.</p>
","<p>First, check if your client has correct routes. Asumming windows, execute <em>route print</em> in cmd. You should see a line containing a route for your LAN throught your VPN interface. Something like</p>

<p>192.168.10.0 (your lan) 255.255.255.0 192.168.10.200 (your VPN asigned IP)</p>

<p>Does this route exist on your client routing table?</p>

<p>In case not, your SonicWall fw is not passing correct network proposals in one of the phases of IPSec negotiation. There are an option where you can specify what networks can be accesible from your remote client.</p>

<p>This VPN allowed networks are not in the firewall rules, they are located in a tab called VPN Access in the user config, i mean the user you configured for VPN access. Check <a href=""https://support.software.dell.com/kb/sw7507"" rel=""nofollow"">this URL</a> for screenshots and a further explanation.</p>
","13074"
"When is BGP needed?","2722","","<p>I have a question about BGP.</p>

<p>When exactly is BGP needed?</p>

<p>I remember reading that BGP is needed for communication between autonomous systems, but is this always true?</p>

<p>For example, in packet tracer I can have a single autonomous system running EIGRP, but I can simply just use a static route to connect that autonomous system to the local ISP routers that are running OSPF.</p>

<p>So I'm struggling to see where BGP is needed.</p>

<p>Any help would be appreciated.</p>

<p>-Artekis</p>
","<p>The generic statement that BGP is required when you need to route between two autonomous systems is fairly misleading.  There are a lot of scenarios in which you may choose to use BGP, or it might even be required.</p>

<p>In the service provider world, BGP is used heavily, as it is THE routing protocol of the Internet - but it sounds like your question is regarding the enterprise.  In that case, you may be required to use BGP when interfacing with service providers for Internet and sometimes WAN connectivity, or you may choose to run BGP internally due to it being the most flexible routing protocol as far as routing policy goes.</p>

<p>Some examples of its use in the enterprise:</p>

<ol>
<li>Your enterprise controls a block of portable public IP space.  ""Portable"" in this case means that the space is registered to your organization by a Regional Internet Registry, like ARIN.  Your organization hosts internet accessible services that utilize addressing from this address space.  You typically have two options for letting the world know how to get to you:</li>
</ol>

<p>a. Your service provider could advertise this space to the Internet via BGP and static route back to your environment.</p>

<p>b. You could peer with your service provider and advertise the space to them via BGP.  In the case where you have more than one ISP, this is the only option.  You'd advertise the space to both service providers and then use various policy / manipulation of attributes to control the paths incoming traffic takes.</p>

<p>In this scenario, the service providers may each advertise a default route to you (rather than the full internet routing table) and you may want to load balance your outbound Internet traffic across ISP's.  In this case, you might need to manipulate BGP to ensure traffic takes the path you want it to and return traffic is influenced back through the same ISP it left on.  This is super high level, but hopefully you get the picture.</p>

<ol start=""2"">
<li>Most of the time when you have MPLS links for WAN connectivity, you're not actually doing anything with MPLS.  MPLS will terminate on the service provider's Provider Edge (PE) router and they will connect to your Customer Edge (CE) router with a regular ethernet link on a /30 point to point connection.  In this case, you'll typically have to redistribute your IGP (internal gateway protocol - OSPF, EIGRP, etc.) routes into BGP to share with the service provider.  They will pass those routes through their MPLS network to their PE at your remote site, which will BGP peer with your CE at that site, at which point, you will learn the routes there and redistribute them again back into the IGP at your remote site.  The same thing will happen in the other direction.</li>
</ol>

<p>BGP isn't a requirement here, but it's typically what the service provider will want to run to keep things consistent across all of their connections to customers.</p>

<ol start=""3"">
<li>As said above, you may run BGP inside of your network, which is known as IBGP.  It's actually the same exact protocol, but when you run BGP between routers in the same AS, a couple of the behaviors of BGP will change.  Anyway, this is really all about control.  You may have layer 2 virtual networks for WAN connectivity or even VPN links that you could run OSPF over, but in some designs, you may need more control over routing policy to achieve the behavior you want over these paths, in which case, BGP might be the right tool for the job.</li>
</ol>

<p>Sorry to be somewhat broad, but every case is really different.  When you're just learning networking, especially from Cisco, they will simplify everything to help you understand the concepts.  In a way, I think they go too far in insinuating that certain generic statements are ""rules"" and even test you on them as if they are 100% strict rules.</p>

<p>The best advice I can give is to learn it their way to get down the concepts and pass your certs, but keep your mind wide open.  If you want to add something a bit less formal and a bit more real world to your network learning/training, definitely pick up some O'Reilly books (related to the topics you're studying) with the animals on them.  You can get them pretty cheap used on the Internet.</p>
","17847"
"How does the ping work from a private IP source address towards a public IP destination address without NAT enabled?","2707","","<p>These are my first questions asked into this forum so could you please help me? These were asked during a job interview:</p>

<ol>
<li><p>How does the ping work when we launch an ICMP echo request message from an internal LAN private IPv4 source address towards a public IPv4 destination address (example <code>8.8.8.8</code> - Google server) without enabling the NAT/PAT protocol on our default/internal gateway router?</p></li>
<li><p>If the ping is unsuccessful (receiving the requested timed out/time exceeded) ICMP error type, which next-hop node will prevent forwarding the traffic (ICMP control) packets towards the Internet? </p></li>
<li><p>Which methods we should use in order to obtain a successful echo reply ping?</p></li>
</ol>

<p>I have thought of a possible answer, which I will share with you after the response in order to see if it's valid or not.</p>
","<p>Private IPv4 addresses are defined by <a href=""https://tools.ietf.org/html/rfc1918"" rel=""nofollow"">RFC1918</a>, in which you will find:</p>

<blockquote>
  <p>Because private addresses have no global meaning, routing information
  about private networks shall not be propagated on inter-enterprise
  links, and packets with private source or destination addresses
  should not be forwarded across such links. Routers in networks not
  using private address space, especially those of Internet service
  providers, are expected to be configured to reject (filter out)
  routing information about private networks. If such a router receives 
  such information the rejection shall not be treated as a routing
  protocol error.</p>
</blockquote>

<p>Without NAT/PAT, the ICMP packet will be dropped by your ISP router. Most of the time, it will be silently drop, but you may have some ICMP message back, depending of the configuration your ISP made.</p>

<p>To have a successful ping reply from an Internet host to a echo request originated by a private IP address there's no other option than NAT/PAT.</p>
","28282"
"Requirements for switches used in IPTV access network","2707","","<p>If we have the following topology of a network:</p>

<pre><code>multimedia servers --- Core network --- Aggregation network --- Access network --- users
</code></pre>

<p>The aggregation and access network are switched (no routers).</p>

<p>What are the requirements for these switches in order to be supported multicast for IPTV ?</p>

<p>When I say requirements I mean protocols or features. The only one I know is they need IGMP Snooping.</p>
","<p>If the multicast is over IPv4, you need IGMP. Bear in mind your IPTV setup may need IGMPv3 for some features, and you need to make sure it's available on your switching gear. If you're using IPv6 to distribute IPTV, you'll need MLD.</p>

<p>Next, multicast transport usually requires good QoS for servicing IPTV, if it's shared infrastructure (internet connectivity is also going over this network), which would mean QoS features need to be present and working. This is the place that usually breaks - QoS is either on the paper, or not working according to spec. There are mysterious drops, and so on.</p>

<p>For L2 domain, if that's what you have from core towards the users, you also need to make sure the L2 config is solid - Spanning Tree is working, converges fast and in predictable manner.</p>
","7860"
"How to ground STP cable?","2700","","<p>I just happened to buy a lot of CAT6a STP cable and shielded CAT6a RJ45 keystone modules for wall outlets. I understand it was completely unnecessary to buy this kind of stuff, but it is too late...</p>

<p>I have an 1 Gbps modem (actually combined modem and router) and 1Gbps integrated ethernet in the motherboards of the PCs and who knows what in the smart TVs. The modem plug does not have grounding. How can I ground the shielding of the STP cable? Is it necessary to ground it?</p>
","<p>sure ,there is no necessary to ground it ,it can work just like normal UTP ,by the way There are a number of reasons you don't use shielded cable in the home environments  ,Technically it should be grounded at one point (the patch panel) using a copper bus bar that attaches to vertically buried 6 foot long copper rod via at least a 6 gauge cable, isolated from the electrical system ground.</p>

<blockquote>
  <p>Don't use the ground pins in the outlets. You will likely cause a
  grounding  loop which will give you more noise (and possibly a 'ground
  short' which can cause a fire) than running unshielded cable.</p>
</blockquote>
","34491"
"Long login delay when cisco device is booted","2690","","<p>Whenever we boot or reboot a Cisco router or switch we have to wait a number of minutes before we can get a username prompt for login. We get a few fail messages</p>

<pre><code>Press RETURN to get started.
% Authentication failed

% Authentication failed

% Authentication failed

Press RETURN to get started.
</code></pre>

<p>After a few minutes the below error message comes up and we can then successfully get a username prompt to start the login process.</p>

<pre><code>Aug  9 09:48:25.719: %AAA-3-DROPACCTFAIL: Accounting record dropped, send to server failed: system
</code></pre>

<p>Our default AAA config was created a long time ago so it may need some updating if it is the cause of our issues.</p>

<p>VRF devices:</p>

<pre><code>!
aaa new-model
aaa group server tacacs+ tacacs1
 server-private &lt;IP&gt; key 7 &lt;key&gt;
 server-private &lt;IP&gt; key 7 &lt;key&gt;
 ip vrf forwarding &lt;vrf-name&gt;
 ip tacacs source-interface &lt;interface&gt;
aaa authentication login default group tacacs1 local
aaa authentication login no_tacacs enable
aaa authentication login eap_methods group rad_eap
aaa authentication login mac_methods local
aaa authentication ppp default group tacacs1
aaa authorization exec default group tacacs1 local
aaa authorization network default group tacacs1 local
aaa accounting exec default start-stop group tacacs1
aaa accounting commands 1 default stop-only group tacacs1
aaa accounting commands 15 default start-stop group tacacs1
aaa accounting network default start-stop group tacacs1
aaa accounting network acct_methods start-stop group rad_acct
aaa accounting connection default start-stop group tacacs1
aaa accounting system default start-stop group tacacs1
aaa session-id common
!
</code></pre>

<p>Non-VRF devices:</p>

<pre><code>!
aaa new-model
aaa authentication login default group tacacs+ local
aaa authentication login no_tacacs enable
aaa authentication ppp default group tacacs+
aaa authentication dot1x default group radius
aaa authorization exec default group tacacs+ local
aaa authorization network default group radius
aaa accounting exec default start-stop group tacacs+
aaa accounting commands 1 default stop-only group tacacs+
aaa accounting commands 15 default start-stop group tacacs+
aaa accounting network default start-stop group tacacs+
aaa accounting connection default start-stop group tacacs+
aaa accounting system default start-stop group tacacs+
aaa session-id common
!
tacacs-server host &lt;ip&gt;
tacacs-server host &lt;ip&gt;
tacacs-server directed-request
tacacs-server key 7 &lt;key&gt;
!
</code></pre>
","<p>If your switch supports it (not all IOS versions do), the following command should fix this for you:</p>

<pre><code>no aaa accounting system guarantee-first
</code></pre>

<p>Here is an article that goes into more depth:  <a href=""http://ccie-in-3-months.blogspot.com/2009/03/would-you-mind-waiting-for-2-3-mins-in.html"">Would you mind waiting for 2-3 mins in a console?</a></p>

<p>And a bit from <a href=""http://www.cisco.com/en/US/docs/ios/security/command/reference/sec_a1.html"">Cisco's documentation</a>:</p>

<blockquote>
  <p>Establishing a Session with a Router if the AAA Server is Unreachable</p>
  
  <p>The aaa accounting system guarantee-first command guarantees system
  accounting as the first record, which is the default condition. In
  some situations, users may be prevented from starting a session on the
  console or terminal connection until after the system reloads, which
  can take more than three minutes.</p>
  
  <p>To establish a console or telnet session with the router if the AAA
  server is unreachable when the router reloads, use the no aaa
  accounting system guarantee-first command.</p>
</blockquote>
","2748"
"Find MAC address of a remote computer using IP","2681","","<p>Is there a way to find out a computer's MAC address if we know its IP address, assuming this computer is outside our LAN? I know we can easily get the physical address of a computer in our LAN using <em>getmac</em> or <em>arp</em> in command prompt, but these commands don't work for other remote hosts.</p>
","<p>Getting a MAC address requires the ability to get broadcast traffic.  </p>

<p>ARP is a broadcast protocol and is therefore only available on a LAN.</p>

<p>Once traffic is routed you are unable to get the MAC address as it is stripped from the packet once it crosses the boundary of a router/L3 device.</p>

<p>Switches have a MAC table.
Routers have a routing table, in general.</p>

<p>You can only get MAC addresses from a LAN.</p>
","25610"
"Cisco + FreeRADIUS: Exec 15 level privilege mode","2681","","<p>I have two routers: Cisco ISR 2921 with IOS version <code>15.0(1r)M9</code> and a Cisco C2600 which is an old guy with IOS <code>12.0(7)XK1</code>. </p>

<p>I have this set up on a FreeRADIUS server:</p>

<pre><code>router-admin   MD5-Password := ""&lt;MD5-Digested-Password&gt;""
               Service-Type = NAS-Prompt-User,
               Cisco-AVPair += ""shell:priv-lvl=15""
</code></pre>

<p>I have set up the following config on both of the routers:</p>

<pre><code>aaa new-model
aaa authentication login default group radius local
</code></pre>

<p>The ISR 2921, when you authenticate, gives you 15th level of privilege (# shell) at once, but the C2600 gives a user mode (> shell). Why would this happen? Maybe the IOS doesn't support that option yet or do I have to do some additional configuration?</p>

<hr>

<h2>Update:</h2>

<p>Actually one more thing that's different is C2600 runs telnet (because it doesn't support SSH) and 2921 runs SSH.</p>

<p>VTY section from 2921:</p>

<pre><code>line vty 0 4
 access-class 50 in
 exec-timeout 5 0
 logging synchronous
 length 0
 transport input ssh
line vty 5 30
 access-class 50 in
 exec-timeout 5 0
 logging synchronous
 transport input ssh
!
</code></pre>

<p>AAA section from 2921:</p>

<pre><code>aaa new-model
aaa authentication login default group radius local
aaa authentication login IPSEC-USERS group radius
aaa authorization exec default group radius local
aaa authorization network IPSEC-USERS group radius
aaa accounting delay-start
aaa accounting update periodic 10
aaa accounting exec default
 group radius
aaa accounting network IPSEC-USERS
 group radius
aaa accounting system default
 group radius
aaa session-id unique
radius-server host 192.168.5.55 auth-port 1812 acct-port 1813
radius-server key 7 &lt;KEY&gt;
</code></pre>

<p>VTY section from C2600:</p>

<pre><code>line vty 0 4
 password 7 &lt;pw&gt;
!
</code></pre>

<p>AAA section from C2600:</p>

<pre><code>aaa new-model
aaa authentication login default group radius local
aaa authorization network default group radius local
aaa accounting exec default start-stop group radius
aaa accounting commands 15 default stop-only group radius
aaa accounting network default start-stop group radius
aaa accounting system default start-stop group radius
</code></pre>
","<p>It seems that this line is missing from the c2600...</p>

<pre><code>aaa authorization exec default group radius local
</code></pre>

<p>Exec authorization is what gives a login session the ability to pay attention to priv information from the RADIUS server.</p>
","6977"
"Connecting HP Procurve 2626 Switch to PC","2680","","<p>Hi I use traditional Direct Console cable to connect from HP Switch to PC.
I changed the settings for Putty as well.</p>

<p>This is what documentation says:</p>

<blockquote>
  <p>Connect a serial console session with the switch, using the black
  console cable that would have shipped in the box of any ProCurve
  switch. The part number of that cable is 5184-1894. The part number is
  stamped directly on the connectors.</p>
  
  <p>Use a VT100-compliant terminal emulator such as Hyper Terminal or Tera
  Term Pro to make the serial connection with the switch. Use the
  following COM port settings to create a terminal session with the
  Switch 4000m: Any baud rate from 2400 to 115200 (the switch
  automatically senses the speed). * 8 data bits, 1 stop bit, no parity,
  XON/XOFF flow control. * For Windows Terminal program, also disable
  (uncheck) the “Use Function, Arrow, and Ctrl Keys for Windows” option.</p>
</blockquote>

<p>I don't know where is disable (uncheck) the “Use Function, Arrow, and Ctrl Keys for Windows” option is?</p>
","<p>Use Putty instead!</p>

<p><a href=""https://i.stack.imgur.com/ZAG02.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ZAG02.png"" alt=""enter image description here""></a></p>

<p><a href=""https://i.stack.imgur.com/dZzbo.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/dZzbo.png"" alt=""enter image description here""></a></p>

<p>You might need to decrease the speed to 9600 baud on some devices, but the newer HPs with autosensing console lines should handle 115200 baud without a problem, just remember to hit enter two times after you open the session so the switch wakes up the serial session. </p>
","32443"
"How can I generate traffic on a Cisco ASA?","2661","","<p>In a lot of locations, we have only one Cisco ASA 5505 each and one or more WiFi APs, besides the provider router. No servers or PCs, just WiFi service for occasional visitors. I want to remotely check if the provider gives us the contracted bandwidth. I could see used bandwidth on the ASA monitoring, and test one direction by sending traffic to the ASA using Iperf on my side.</p>

<p>Is there any way to let the ASA generate substantial traffic?</p>
","<p>(Just noticed your comment about Raspberrys, and I want to follow up)</p>

<p>We have a large MPLS network where we need to measure bandwith and jitter across sites to make sure that our most sensitive applications isn't hurting.</p>

<p>One great way of doing this is, like you mentioned, deploying Raspberrys. They are small enough, so you can install them nearly anywhere. One great toolf for testing bandwith/jitter is <a href=""https://code.google.com/p/iperf/"">iperf</a>, which you then can set up to run as a (filtered!) daemon on each PI. Then just initiate tests from a central management station.</p>
","262"
"Weird TCP ports open on remote host, Apple Airport Extreme, my network only","2658","","<p>I'm getting strange results for open ports on internet hosts on my network.  I suspect some kind of weird router behavior, but I can't really figure out what it is.</p>

<p>NMAP from my workstation (on my network) to www.google.com:</p>

<pre><code>$ sudo nmap 173.194.67.105

Starting Nmap 6.00 ( http://nmap.org ) at 2013-06-13 10:56 MDT
Nmap scan report for wi-in-f105.1e100.net (173.194.67.105)
Host is up (0.055s latency).
Not shown: 994 filtered ports
PORT     STATE  SERVICE
21/tcp   open   ftp
80/tcp   open   http
113/tcp  closed ident
443/tcp  open   https
554/tcp  open   rtsp
7070/tcp open   realserver

Nmap done: 1 IP address (1 host up) scanned in 12.15 seconds
</code></pre>

<p>nmap from neutral cloud provider to www.google.com:</p>

<pre><code>$ sudo nmap 173.194.67.105

Starting Nmap 5.21 ( http://nmap.org ) at 2013-06-13 16:55 UTC
Nmap scan report for wi-in-f105.1e100.net (173.194.67.105)
Host is up (0.0049s latency).
Not shown: 997 filtered ports
PORT    STATE  SERVICE
25/tcp  closed smtp
80/tcp  open   http
443/tcp open   https

Nmap done: 1 IP address (1 host up) scanned in 4.55 seconds
</code></pre>

<p>What can I do to debug further?  Some hosts, that port 21 is actually connectable with <code>telnet &lt;host&gt; 21</code>, but prints no results when I type things to it.  Sometimes it connects then disconnects immediately.</p>

<p>I would appreciate any help.  I'm really at a loss!</p>

<p><strong>UPDATE:</strong> I have an apple airport extreme router.  I believe this could be complicating the question.  However, it's the only router I have.</p>
","<p>¿Does this help?</p>

<ul>
<li>""Are ports 21, 554, and 7070 open or closed? The answer is yes."" - <a href=""http://blog.nephtaliproject.com/?p=129"">http://blog.nephtaliproject.com/?p=129</a></li>
</ul>

<p>Also, try comparing the output of:</p>

<ul>
<li>traceroute -n 173.194.67.105</li>
<li>sudo traceroute -n -T -p 21 173.194.67.105</li>
</ul>

<p>This should get you to know with some precision where are the ports being proxied. If you get a 1-step response, your gateway is to blame. If you get a 2-step response, then is some place after your gateway, and so on.</p>

<p>Also, can you log in to your router and see if there is any way to disable proxy-related or optimization-related settings?</p>
","1861"
"Why don't we use MAC address instead of IP for having ""Internet"" or doing communication?","2657","","<p>We know MAC address is unique in each devices.So why can't we just send/receive data using MAC address only?</p>
","<p>MAC is Media Access Control which provides physical connectivity only. IP Address provides Host or Network interface Identification and Location addressing. </p>

<p>For your second question, Let we have two connections, one is for Local connection and other is for internet or virtual machines are running in the system. what happen the IP of both connection will be different but the physical address of machine same. In this case what will you do? In this case IP address defines the address where the system will communicate. </p>
","32359"
"Huawei switch Hybrid port","2657","","<p>i am trying to understand when we can use hybrid ports on a huawei switch. i understand the difference between Trunk and Hybrid port, but so far I've been unable to find a scenario where i can see and understand better the use of Hybrid ports.</p>

<p>what i know:</p>

<p>hybrid ports can carry multiple untagged vlan traffic, while trunk ports can only carry untagged traffic for the default vlan. </p>

<p>Can anyone enlighten me where one can use a hybrid port?</p>
","<p>Probably im not 100% right but from my point of view a hybrid port is either an access or trunk. you dont have to specify it when you configure the port, by just adding the vlans to the the port, the port will act as trunk or access.</p>
","46561"
"Force use of gateway for communication on same subnet","2655","","<p>I currently have a set of four virtual hosts on a private network, with a fifth host running pfSense to act as the gateway.</p>

<p>When communicating with hosts outside of the private network, all traffic is routed via the pfSense gateway (10.0.0.1). However, when two hosts on the same subnet communicate, they do not do so via the gateway. I have gathered that these hosts realise they are on the same subnet and switch and opt to communicate via MAC address w/ARP rather than using the IP gateway I have set up.</p>

<p>I would like these hosts to communicate via the gateway so that I can monitor the traffic between the hosts on the private network. I have attempted to set static routes, for example:
<code>ip route add 10.0.0.4 via 10.0.0.1 dev eth0</code></p>

<p>The first traceroute subsequent to this will correctly route via the gateway:</p>

<pre><code>root@file-server ~ # traceroute 10.0.0.4
traceroute to 10.0.0.4 (10.0.0.4), 30 hops max, 60 byte packets
 1  10.0.0.1 (10.0.0.1) 0.241ms 0.287ms 0.274ms
 2  10.0.0.4 (10.0.0.4) 0.559ms 0.567ms 0.574ms
</code></pre>

<p>If I then perform the traceroute again however, the route stops using the gateway.</p>

<pre><code>root@file-server ~ # traceroute 10.0.0.4
 1  10.0.0.4 (10.0.0.4) 0.345ms 0.376ms 0.362ms
</code></pre>

<p>My guess would be that perhaps my host has populated its ARP table with the MAC address of the traceroute target after the initial traceroute, and opts to use that for communication in future.</p>

<p>If that is the case, I am not sure how to counter it. I believed that my static route would take precedent over any other decisions taken by the system. I would like to research further, but I am not actually sure where to look to solve this issue as I am not sure why my static route is not adhered to.</p>

<p>Can someone please provide insight as to why my static route is only adhered to with my initial traceroute, and how I would go about forcing a static route to the gateway for same-subnet communications?</p>

<p>**Edit: ** I should add that this set-up is for experimentation, so I am not restricted to solely things that would be a good idea in the real world. </p>
","<p>You would have to capture packets to be sure, but I suspect what is going on is an ICMP Redirect.</p>

<p>If a Router receives a packet for which a better next-hop exists, it can send an ICMP Redirect to the original sender to inform them to use the better next-hop when trying to speak to that same destination.</p>

<p>The initial sender will update its routing table temporarily with the new information. I believe for 10 minutes, but this is probably different with each OS/vendor/implementation.</p>

<p>There is generally a way to disable ICMP redirects at the Router. And there is more than likely a way to disable accepting ICMP redirects on the Host. If not specifically, then indirectly by blocking it with an ACL or iptables entry.</p>

<p>You can read more about ICMP Redirects here:
<a href=""http://www.cymru.com/gillsr/documents/icmp-redirects-are-bad.htm"" rel=""nofollow"">http://www.cymru.com/gillsr/documents/icmp-redirects-are-bad.htm</a></p>

<p>The are now-a-days considered a security vulnerability, but when they were created they were based on good intentions. As the Internet got bigger, and less trust-able, however, their use has been significantly reduced -- and discouraged, for that matter.</p>
","28024"
"Access Cisco Call Manager Express on 2811 Router","2652","","<p>I'm trying to gain access to my business' Cisco 2811.</p>

<p>I did the standard password reset following these procedures: <a href=""http://www.cisco.com/en/US/products/hw/routers/ps259/products_password_recovery09186a0080094675.shtml"" rel=""nofollow"">http://www.cisco.com/en/US/products/hw/routers/ps259/products_password_recovery09186a0080094675.shtml</a>
I changed the passwords and rebooted.</p>

<p>However, when the system booted back up all but three of the phones returned to their normal state. The other three simply sit at <strong>""Configuring IP""</strong> and never come back online. I've tried erasing the configuration on one and that didn't help at all. The phones are all Cisco 7960s.</p>

<p>I've taken a couple Cisco CCNA exam prep classes but that was a <em>long</em> time ago so some of this is coming back to me but some I'm having to google around to find the answers.</p>

<p>My questions are:<br>
<strong>How do I bring the other three phones back online?</strong><br>
<strong>How do I access the Cisco CME of the router to make changes to the quick buttons and directory on the other phones?</strong></p>

<p>I've found out that the fa0/1 interface is trunked out to two VLANs, one VLAN operates the PC's (192.168.1.0/24) and the other VLAN operates the phones (10.10.10.0/24)</p>

<p>Interface fa0/0 is empty so I thought that maybe if I configured that port to access the 10.10.10.0 network and set it to assign IPs by DHCP I'd be able to open the browser on my computer (that is connected to this 10.10.10.0 network after getting an IP from DHCP) and navigate to the router 10.10.10.1 through my browser and access the CME. Is this correct?</p>

<p>Posted below is the current running config.</p>

<p><strong>EDIT: Entire config</strong></p>

<pre><code>Current configuration : 21515 bytes
!
! Last configuration change at 18:12:47 GMT Tue Dec 17 2013
! NVRAM config last updated at 10:05:30 GMT Sat Dec 14 2013
!
version 12.4
service timestamps debug datetime msec
service timestamps log datetime msec
no service password-encryption
!
hostname Router2811
!
boot-start-marker
boot-end-marker
!
enable secret 5 $1$lVWu$dwhlnh3hzJz9nLwt8RoDY/
enable password password
!
no aaa new-model
!
resource policy
!
clock timezone GMT -8
clock summer-time GMT recurring
!
!
ip cef
no ip dhcp use vrf connected
ip dhcp excluded-address 10.10.10.1 10.10.10.10
!
ip dhcp pool phone
   network 10.10.10.0 255.255.255.0
   default-router 10.10.10.1
   option 150 ip 10.10.10.1
!
!
ip ftp username username
ip ftp password password
ip name-server 64.2.21.107
ip name-server 64.2.21.213
!
!
!
voice-card 0
 no dspfarm
!
!
!
voice service voip
 allow-connections h323 to h323
 allow-connections h323 to sip
 allow-connections sip to h323
 allow-connections sip to sip
 supplementary-service h450.12
 h323
 sip
  registrar server expires max 3600 min 3600
!
!
voice class codec 1
 codec preference 1 g711ulaw
!
!
!
!
!
!
!
!
!
!
!
!
voice translation-rule 9
 rule 1 /^911$/ /911/
 rule 2 /^9\(.*\)/ /\1/
!
!
!
!
username admin privilege 15 secret 5 $1$laKi$pfrWq3A4KxaXliCisHhkl0
!
!
class-map match-all L3-to-L2_VoIP-Cntrl
 match ip dscp af31
class-map match-all L3-to-L2_VoIP-RTP
 match ip dscp ef
class-map match-all SIP
 match protocol sip
class-map match-all RTP
 match protocol rtp
!
policy-map EthOut
 class RTP
policy-map output-L3-to-L2
 class L3-to-L2_VoIP-RTP
  set cos 5
 class L3-to-L2_VoIP-Cntrl
  set cos 3
!
!
!
!
!
!
!
interface Loopback0
 ip address 10.1.10.2 255.255.255.0
!
interface FastEthernet0/0
 description ** DHCP Client mode **
 ip address dhcp
 ip nat outside
 ip virtual-reassembly
 duplex auto
 speed auto
!
interface Service-Engine0/0
 ip unnumbered Loopback0
 service-module ip address 10.1.10.1 255.255.255.0
 service-module ip default-gateway 10.1.10.2
!
interface FastEthernet0/1
 no ip address
 no ip mroute-cache
 duplex auto
 speed auto
!
interface FastEthernet0/1.1
 description ** Data VLAN **
 encapsulation dot1Q 1 native
 ip address 192.168.1.2 255.255.255.0
 ip nat inside
 ip virtual-reassembly
!
interface FastEthernet0/1.2
 description ** Voice VLAN **
 encapsulation dot1Q 2
 ip address 10.10.10.1 255.255.255.0
 service-policy output output-L3-to-L2
!
ip route 10.1.10.1 255.255.255.255 Service-Engine0/0
!
!
ip http server
ip http authentication local
no ip http secure-server
ip http path flash:
ip nat inside source list 1 interface FastEthernet0/0 overload
!
access-list 1 remark SDM_ACL Category=2
access-list 1 permit 192.168.10.0 0.0.0.255
!
!
!
!
!
tftp-server flash:P0030702T023.loads
tftp-server flash:P0030702T023.sb2
tftp-server flash:P0030702T023.sbn
tftp-server flash:P0030702T023.bin
tftp-server flash:CP7902080001SCCP051117A.sbin
tftp-server flash:Analog1.raw
tftp-server flash:Analog2.raw
tftp-server flash:AreYouThere.raw
tftp-server flash:AreYouThereF.raw
tftp-server flash:Bass.raw
tftp-server flash:CallBack.raw
tftp-server flash:Chime.raw
tftp-server flash:Classic1.raw
tftp-server flash:Classic2.raw
tftp-server flash:ClockShop.raw
tftp-server flash:DistinctiveRingList.xml
tftp-server flash:Drums1.raw
tftp-server flash:Drums2.raw
tftp-server flash:FilmScore.raw
tftp-server flash:HarpSynth.raw
tftp-server flash:Jamaica.raw
tftp-server flash:KotoEffect.raw
tftp-server flash:MusicBox.raw
tftp-server flash:Piano1.raw
tftp-server flash:Piano2.raw
tftp-server flash:Pop.raw
tftp-server flash:Ring1.raw
tftp-server flash:Ring2.raw
tftp-server flash:Ring3.raw
tftp-server flash:Ring4.raw
tftp-server flash:Ring5.raw
tftp-server flash:Ring6.raw
tftp-server flash:Ring7.raw
tftp-server flash:RingList.xml
tftp-server flash:Sax1.raw
tftp-server flash:Sax2.raw
tftp-server flash:Vibe.raw
tftp-server flash:Pulse1.raw
!
control-plane
!
!
!
voice-port 0/0/0
 connection plar opx 2000
 caller-id enable
!
voice-port 0/0/1
 connection plar opx 2000
 caller-id enable
!
voice-port 0/0/2
 connection plar opx 2000
 caller-id enable
!
voice-port 0/0/3
 connection plar opx 2000
 caller-id enable
!
voice-port 0/1/0
 auto-cut-through
 operation 4-wire
 type 5
 signal immediate
 description Overhead Paging Port 0
!
voice-port 0/1/1
 auto-cut-through
 operation 4-wire
 type 5
 signal immediate
 description Overhead Paging Port 1
!
!
!
!
dial-peer cor custom
 name internal
 name local
 name domestic
 name international
 name 900
 name 976
!
!
dial-peer cor list call-internal
 member internal
!
dial-peer cor list call-local
 member local
!
dial-peer cor list call-domestic
 member domestic
!
dial-peer cor list call-international
 member international
!
dial-peer cor list call-900
 member 900
!
dial-peer cor list call-976
 member 976
!
dial-peer cor list user-internal
 member internal
!
dial-peer cor list user-local
 member internal
 member local
!
dial-peer cor list user-domestic
 member internal
 member local
 member domestic
!
dial-peer cor list user-international
 member internal
 member local
 member domestic
 member international
!
dial-peer cor list user900-internal
 member internal
 member 900
 member 976
!
dial-peer cor list user900-local
 member internal
 member local
 member 900
 member 976
!
dial-peer cor list user900-domestic
 member internal
 member local
 member domestic
 member 900
 member 976
!
dial-peer cor list user900-international
 member internal
 member local
 member domestic
 member international
 member 900
 member 976
!
!
dial-peer voice 1 pots
 description ** FXO Incoming call **
 incoming called-number .
 direct-inward-dial
 port 0/0/0
 forward-digits all
!
dial-peer voice 2 pots
 description ** FXO Incoming call **
 incoming called-number .
 direct-inward-dial
 port 0/0/1
 forward-digits all
!
dial-peer voice 3 pots
 description ** FXO Incoming call **
 incoming called-number .
 direct-inward-dial
 port 0/0/2
 forward-digits all
!
dial-peer voice 4 pots
 description ** FXO Incoming call **
 incoming called-number .
 direct-inward-dial
 port 0/0/3
 forward-digits all
!
dial-peer voice 5 pots
 description ** FXO pots dial-peer **
 destination-pattern 911
 port 0/0/0
 forward-digits all
!
dial-peer voice 6 pots
 description ** FXO pots dial-peer **
 destination-pattern 9911
 port 0/0/0
 forward-digits 3
!
dial-peer voice 7 pots
 corlist outgoing call-local
 description ** FXO pots dial-peer **
 destination-pattern 9[2-9]......
 port 0/0/0
 forward-digits 7
!
dial-peer voice 8 pots
 corlist outgoing call-domestic
 description ** FXO pots dial-peer **
 destination-pattern 91..........
 port 0/0/0
 forward-digits 11
!
dial-peer voice 9 pots
 corlist outgoing call-international
 description ** FXO pots dial-peer **
 destination-pattern 9011T
 port 0/0/0
 prefix 011
!
dial-peer voice 10 pots
 corlist outgoing call-900
 description ** FXO pots dial-peer **
 destination-pattern 91900.......
 port 0/0/0
 forward-digits 11
!
dial-peer voice 11 pots
 corlist outgoing call-976
 description ** FXO pots dial-peer **
 destination-pattern 91976.......
 port 0/0/0
 forward-digits 11
!
dial-peer voice 12 pots
 description ** FXO pots dial-peer **
 destination-pattern 911
 port 0/0/1
 forward-digits all
!
dial-peer voice 13 pots
 description ** FXO pots dial-peer **
 destination-pattern 9911
 port 0/0/1
 forward-digits 3
!
dial-peer voice 14 pots
 corlist outgoing call-local
 description ** FXO pots dial-peer **
 destination-pattern 9[2-9]......
 port 0/0/1
 forward-digits 7
!
dial-peer voice 15 pots
 corlist outgoing call-domestic
 description ** FXO pots dial-peer **
 destination-pattern 91..........
 port 0/0/1
 forward-digits 11
!
dial-peer voice 16 pots
 corlist outgoing call-international
 description ** FXO pots dial-peer **
 destination-pattern 9011T
 port 0/0/1
 prefix 011
!
dial-peer voice 17 pots
 corlist outgoing call-900
 description ** FXO pots dial-peer **
 destination-pattern 91900.......
 port 0/0/1
 forward-digits 11
!
dial-peer voice 18 pots
 corlist outgoing call-976
 description ** FXO pots dial-peer **
 destination-pattern 91976.......
 port 0/0/1
 forward-digits 11
!
dial-peer voice 19 pots
 description ** FXO pots dial-peer **
 destination-pattern 911
 port 0/0/2
 forward-digits all
!
dial-peer voice 20 pots
 description ** FXO pots dial-peer **
 destination-pattern 9911
 port 0/0/2
 forward-digits 3
!
dial-peer voice 21 pots
 corlist outgoing call-local
 description ** FXO pots dial-peer **
 destination-pattern 9[2-9]......
 port 0/0/2
 forward-digits 7
!
dial-peer voice 22 pots
 corlist outgoing call-domestic
 description ** FXO pots dial-peer **
 destination-pattern 91..........
 port 0/0/2
 forward-digits 11
!
dial-peer voice 23 pots
 corlist outgoing call-international
 description ** FXO pots dial-peer **
 destination-pattern 9011T
 port 0/0/2
 prefix 011
!
dial-peer voice 24 pots
 corlist outgoing call-900
 description ** FXO pots dial-peer **
 destination-pattern 91900.......
 port 0/0/2
 forward-digits 11
!
dial-peer voice 25 pots
 corlist outgoing call-976
 description ** FXO pots dial-peer **
 destination-pattern 91976.......
 port 0/0/2
 forward-digits 11
!
dial-peer voice 26 pots
 description ** FXO pots dial-peer **
 destination-pattern 911
 port 0/0/3
 forward-digits all
!
dial-peer voice 27 pots
 description ** FXO pots dial-peer **
 destination-pattern 9911
 port 0/0/3
 forward-digits 3
!
dial-peer voice 28 pots
 corlist outgoing call-local
 description ** FXO pots dial-peer **
 destination-pattern 9[2-9]......
 port 0/0/3
 forward-digits 7
!
dial-peer voice 29 pots
 corlist outgoing call-domestic
 description ** FXO pots dial-peer **
 destination-pattern 91..........
 port 0/0/3
 forward-digits 11
!
dial-peer voice 30 pots
 corlist outgoing call-international
 description ** FXO pots dial-peer **
 destination-pattern 9011T
 port 0/0/3
 prefix 011
!
dial-peer voice 31 pots
 corlist outgoing call-900
 description ** FXO pots dial-peer **
 destination-pattern 91900.......
 port 0/0/3
 forward-digits 11
!
dial-peer voice 32 pots
 corlist outgoing call-976
 description ** FXO pots dial-peer **
 destination-pattern 91976.......
 port 0/0/3
 forward-digits 11
!
dial-peer voice 33 voip
 description ** cue voicemail pilot number **
 translation-profile outgoing PSTN_CallForwarding
 destination-pattern 6000
 session protocol sipv2
 session target ipv4:10.1.10.1
 dtmf-relay sip-notify
 codec g711ulaw
 no vad
!
dial-peer voice 34 voip
 description ** cue auto attendant number **
 translation-profile outgoing PSTN_CallForwarding
 destination-pattern 6001
 session protocol sipv2
 session target ipv4:10.1.10.1
 dtmf-relay sip-notify
 codec g711ulaw
 no vad
!
dial-peer voice 40 pots
 description E&amp;M port 0 to overhead
 destination-pattern 4000
 port 0/1/0
!
!
!
!
!
telephony-service
 load 7960-7940 P0030702T023
 load 7902 CP7902080001SCCP051117A
 max-ephones 36
 max-dn 108
 ip source-address 10.10.10.1 port 2000
 calling-number initiator
 system message Duanes
 time-zone 5
 voicemail 6000
 max-conferences 2 gain -6
 call-forward pattern .T
 call-forward system redirecting-expanded
 moh MOH_LO.WAV
 multicast moh 239.1.1.1 port 2000
 web admin system name cisco secret 5 $1$YBdL$OzdL4acKoWcaLAvCI1OLW1
 dn-webedit
 time-webedit
 transfer-system full-consult dss
 transfer-pattern 9.T
!
!
ephone-template  1
 softkeys idle  Redial Dnd Newcall Cfwdall Pickup
 softkeys seized  Redial Endcall Cfwdall Pickup
 softkeys alerting  Callback Endcall
 softkeys connected  Hold Trnsfer Endcall Confrn Park
!
!
ephone-template  2
 softkeys idle  Redial Dnd Newcall Pickup
 softkeys seized  Redial Endcall Pickup
 softkeys alerting  Callback Endcall
 softkeys connected  Hold Trnsfer Endcall Confrn Park
!
!
ephone-dn  1  dual-line
 number 2001
 label 2001
 description Erik-Line2
 name Erik-Line2
 preference 1
 call-forward busy 6000
 call-forward noan 6000 timeout 16
 corlist incoming user900-international
 huntstop channel
 no huntstop
 hold-alert 30 originator
!
!
ephone-dn  2  dual-line
 number 2002
 label 2002
 description Jane Doe-Line2
 name Jane Doe-Line2
 preference 1
 call-forward busy 6000
 call-forward noan 6000 timeout 16
 corlist incoming user900-international
 no huntstop
 hold-alert 30 originator
!
!
ephone-dn  3  dual-line
 number 2003
 label 2003
 description Audrey Wall
 name Audrey Wall
 preference 1
 call-forward busy 6000
 call-forward noan 6000 timeout 10
 corlist incoming user900-international
 huntstop channel
 hold-alert 30 originator
!
!
ephone-dn  4  dual-line
 number 2000
 label 2000
 description Receptionist
 name Receptionist
 call-forward noan 2100 timeout 8
 corlist incoming user-international
 huntstop channel
 no huntstop
 hold-alert 30 originator
!
!
ephone-dn  5  dual-line
 number 2001
 label 2001
 description Stan
 name Stan
 call-forward noan 6000 timeout 15
 corlist incoming user-international
 huntstop channel
 no huntstop
 hold-alert 30 originator
!
!
ephone-dn  6  dual-line
 number 2002
 label 2002
 description Jane Doe
 name Jane Doe
 call-forward noan 6000 timeout 15
 corlist incoming user-international
 huntstop channel
 no huntstop
 hold-alert 30 originator
!
!
ephone-dn  7  dual-line
 number 2003
 label 2003
 description Audrey Wall
 name Audrey Wall
 call-forward noan 6000 timeout 10
 corlist incoming user-international
 huntstop channel
 no huntstop
 hold-alert 30 originator
!
!
ephone-dn  8  dual-line
 number 2004
 label 2004
 description Amber McInerney
 name Amber McInerney
 call-forward busy 6000
 call-forward noan 6000 timeout 15
 corlist incoming user-international
 huntstop channel
!
!
ephone-dn  9  dual-line
 number 2005
 label 2005
 description Jose Conseco
 name Jose Conseco
 call-forward noan 6000 timeout 16
 corlist incoming user-international
 huntstop channel
 no huntstop
 hold-alert 30 originator
!
!
ephone-dn  10  dual-line
 number 2006
 label 2006
 description Matt Mullen
 name Matt Mullen
 call-forward noan 6000 timeout 24
 corlist incoming user900-international
 huntstop channel
 no huntstop
 hold-alert 30 originator
!
!
ephone-dn  11  dual-line
 number 2007
 label 2007
 description Delivery Area
 name Delivery Area
 call-forward busy 6000
 call-forward noan 6000 timeout 24
 corlist incoming user900-international
 hold-alert 30 originator
!
!
ephone-dn  12  dual-line
 number 2008
 label 2008
 description Brian Allen
 name Brian Allen
 call-forward noan 6000 timeout 24
 corlist incoming user900-international
 huntstop channel
 no huntstop
 hold-alert 30 originator
!
!
ephone-dn  13  dual-line
 number 2009
 label 2009
 description Time Clock
 name Time Clock
 call-forward busy 6000
 call-forward noan 6000 timeout 24
 corlist incoming user900-international
 hold-alert 30 originator
!
!
ephone-dn  14  dual-line
 number 2010
 label 2010
 description Empty Office
 name Empty Office
 call-forward busy 6000
 call-forward noan 6000 timeout 15
 corlist incoming user900-international
 hold-alert 30 originator
!
!
ephone-dn  15  dual-line
 number 2011
 label 2011
 description Tony Davis
 name Tony Davis
 call-forward noan 6000 timeout 10
 corlist incoming user900-international
 huntstop channel
 no huntstop
 hold-alert 30 originator
!
!
ephone-dn  16
 number 8000....
 mwi on
!
!
ephone-dn  17
 number 8001....
 mwi off
!
!
ephone-dn  18
 number 1000
 park-slot timeout 30 limit 4 notify 2000 only transfer 2000 retry 15 limit 2
!
!
ephone-dn  19
 number 1001
 park-slot timeout 30 limit 4 notify 2000 only transfer 2000 retry 15 limit 2
!
!
ephone-dn  20
 number 1002
 park-slot timeout 30 limit 4 notify 2000 only transfer 2000 retry 15 limit 2
!
!
ephone-dn  21
 number 1003
 park-slot timeout 30 limit 4 notify 2000 only transfer 2000 retry 15 limit 2
!
!
ephone-dn  22  dual-line
 number 2000
 label 2000
 description Receptionist-Line2
 name Receptionist-Line2
 preference 1
 call-forward busy 2100
 call-forward noan 2100 timeout 8
 corlist incoming user900-international
 huntstop channel
 no huntstop
 hold-alert 30 originator
!
!
ephone-dn  23  dual-line
 number 2004
 label 2004
 description Amber Line 2
 name Amber McInerney
 preference 1
 call-forward busy 6000
 call-forward noan 6000 timeout 16
 corlist incoming user900-international
 huntstop channel
 hold-alert 30 originator
!
!
ephone-dn  24  dual-line
 number 2100
 label Main
 call-forward noan 5000 timeout 16
 corlist incoming user900-international
 huntstop channel
 no huntstop
 hold-alert 30 originator
!
!
ephone-dn  25  dual-line
 number 2100
 label Main
 description MainLine Rollover2
 preference 1
 call-forward busy 5000
 call-forward noan 5000 timeout 16
 corlist incoming user900-international
 huntstop channel
 no huntstop
 hold-alert 30 originator
!
!
ephone-dn  26
 number 5000
 label GeneralVM
 description GeneralVM
 name GeneralVM
 call-forward busy 6000
 call-forward noan 6000 timeout 3
 corlist incoming user900-international
 hold-alert 30 originator
!
!
ephone-dn  27  dual-line
 number 2011
 label 2011
 description Tony Davis
 name Tony Davis
 preference 1
 call-forward busy 6000
 call-forward noan 6000 timeout 10
 corlist incoming user900-international
 huntstop channel
 hold-alert 30 originator
!
!
ephone-dn  28  dual-line
 number 2009
 label 2009
 description test line
 preference 1
!
!
ephone-dn  29  dual-line
 number 2012
 label 2012
 description New User
 name New User
 call-forward busy 6000
 call-forward noan 6000 timeout 12
 corlist incoming user900-international
 hold-alert 30 originator
!
!
ephone-dn  30  dual-line
 number 2006
 label 2006
 description Matt Line 2
 name Matt Mullen
 call-forward busy 6000
 call-forward noan 6000 timeout 24
 corlist incoming user900-international
 huntstop channel
 hold-alert 30 originator
!
!
ephone-dn  31  dual-line
 number 2008
 label 2008
 description Brian Allen
 name Brian Allen
 preference 1
 call-forward busy 6000
 call-forward noan 6000 timeout 24
 corlist incoming user900-international
 huntstop channel
 hold-alert 30 originator
!
!
ephone-dn  32  dual-line
 number 2005
 label 2005
 description Jose Conseco
 name Jose Conseco
 preference 1
 call-forward busy 6000
 call-forward noan 6000 timeout 16
 corlist incoming user-international
 huntstop channel
 no huntstop
 hold-alert 30 originator
!
!
ephone-dn  33  dual-line
 number 2013
 label 2013
 description Ken Garton
 name Ken Garton
 call-forward busy 6000
 call-forward noan 6000 timeout 24
 corlist incoming user-international
 huntstop channel
 hold-alert 30 originator
!
!
ephone  1
 device-security-mode none
 mac-address 0013.608F.98F3
 ephone-template 1
 speed-dial 1 4000 label ""Overhead Page""
 type 7960
 button  1:4 2:22 3:24 4:25
 button  5m26
!
!
!
ephone  2
 device-security-mode none
 mac-address 0007.8599.2E3F
 ephone-template 1
 speed-dial 1 4000 label ""Overhead Page""
 type 7960
 button  1:8 2:23 3:24 4:25
 button  5m26
!
!
!
ephone  3
 device-security-mode none
 mac-address 0013.C4AA.C42A
 ephone-template 1
 speed-dial 1 4000 label ""Overhead Page""
 type 7960
 button  1:5 2:1 3:24 4:25
 button  5m26
!
!
!
ephone  4
 device-security-mode none
 mac-address 0013.6039.8BFA
 ephone-template 1
 speed-dial 1 4000 label ""Overhead Page""
 type 7960
 button  1:6 2:2 3:24 4:25
 button  5m26
!
!
!
ephone  5
 device-security-mode none
 mac-address 0017.E013.41A9
 ephone-template 1
 username ""swall""
 speed-dial 1 4000 label ""Overhead Page""
 type 7960
 button  1:7 2:3 3:24 4:25
 button  5m26
!
!
!
ephone  6
 device-security-mode none
 mac-address 0017.E013.412F
 ephone-template 2
 speed-dial 1 4000 label ""Overhead Page""
 type 7960
 button  1:10 2:30 3:24 4:25
 button  5m26
!
!
!
ephone  7
 device-security-mode none
 mac-address 0015.62EA.6944
 ephone-template 1
 speed-dial 1 4000 label ""Overhead Page""
 type 7960
 button  1:9 2:32 3:24 4:25
 button  5m26
!
!
!
ephone  8
 device-security-mode none
 mac-address 0013.601C.1A23
 ephone-template 2
 type 7960
 button  1:11
!
!
!
ephone  9
 device-security-mode none
 mac-address 0015.621B.2A9B
 ephone-template 2
 speed-dial 1 4000 label ""Overhead Page""
 type 7960
 button  1:12 2:31 3:24 4:25
 button  5m26
!
!
!
ephone  10
 device-security-mode none
 mac-address 0013.1AFF.302E
 ephone-template 2
 type 7960
 button  1:13 2:28
!
!
!
ephone  11
 device-security-mode none
 mac-address 0015.62B5.FAE2
 ephone-template 2
 type 7960
 button  1:14
!
!
!
ephone  12
 device-security-mode none
 mac-address 0017.955B.0A32
 ephone-template 1
 username ""jcoffinberry""
 speed-dial 1 4000 label ""Overhead Page""
 type 7960
 button  1:15 2:27 3:24 4:25
 button  5m26
!
!
!
ephone  13
 device-security-mode none
 mac-address 0017.E013.2BFC
 ephone-template 2
 username ""newuser""
 button  1:29
!
!
!
ephone  14
 device-security-mode none
 mac-address 000F.341F.FE6A
 ephone-template 1
 speed-dial 1 4000 label ""Overhead Page""
 type 7960
 button  1:15 2:27 3:24 4:25
 button  5m26
!
!
!
ephone  15
 device-security-mode none
 mac-address 0014.A981.86F5
 speed-dial 1 4000 label ""Overhead Page""
 type 7960
 button  1:33
!
!
alias exec cue service-module service-engine 0/0 session
!
line con 0
 password !du@ne5
 login
line aux 0
line 194
 no activation-character
 no exec
 transport preferred none
 transport input all
 transport output pad telnet rlogin lapb-ta mop udptn v120 ssh
line vty 0 4
 password !du@ne5
 login
!
scheduler allocate 20000 1000
ntp clock-period 17180231
ntp master
ntp server 64.2.21.49
ntp server 64.2.21.107
!
webvpn context Default_context
 ssl authenticate verify all
 !
 no inservice
!
!
end
</code></pre>

<p><strong>EDIT: added the MACs of the three phones not receiving IPs.</strong>
The three phones that are not receiving IPs have this in their status message.<br>
ephone 15 - mac address 00:14:A9:81:86:F5<br>
Status Message:<br>
SEP0014A98186F5.cnf.xml</p>

<p>ephone 2 - mac address 00:07:85:99:2E:3F<br>
Status Message<br>
SEP000785992E3F.cnf.xml</p>

<p>ephone 8 - mac address 00:13:60:1C:1A:23<br>
No status messages.</p>

<p><strong>EDIT: Results of show ip dhcp binding</strong></p>

<pre><code>Bindings from all pools not associated with VRF:
IP address          Client-ID/              Lease expiration        Type
                    Hardware address/
                    User name
10.10.10.11         0100.0785.992e.3f       Dec 20 2013 03:52 PM    Automatic
10.10.10.15         0100.14a9.8186.f5       Dec 20 2013 03:52 PM    Automatic
10.10.10.18         0100.1360.1c1a.23       Dec 20 2013 03:52 PM    Automatic
</code></pre>
","<p>The dhcp server shows they do actually have an address.  The status messages suggest they aren't able to find all the files they're looking for; the telephony-service should be creating those, but I don't see a <code>create cnf-files</code> in your config.  <code>show telephony-service tftp-bindings</code> will show what configs it's created and mapped.  The SCCP firmware requires option 66 (tftp server), not option 150 -- the phones will remember the last server if dhcp doesn't present one. (it can be manually configured as well.)</p>

<p>(even without most of the files, it'll still boot and register with the CM. I was updating eBay'd 7960's that weren't known to my CM last night. They only needed to see: OS79XX.TXT, SEPDefault.cnf, and XMLDefault.cnf.xml, and the firmware files)</p>
","5562"
"IPv4 Segment 100.64.0.0/10","2650","","<p>I recently got to know that IP segment <code>100.64.0.0/10</code> has been reserved by IANA for 'Shared Address Space'.</p>

<p>My question is: Can I use the IP Segment <code>100.64.0.0/10</code> as a private range in my network (like the way we are using <code>10.0.0.0/8</code>)?</p>

<p>If yes, then do I need to upgrade my network appliances (like firewall or router) before using this, or can I use it as it is?</p>

<p>If no, then why not, and for what purposes this is segment reserved?</p>

<p>If possible, please share some document (or BCP) explaining (or talking about) this segment.</p>
","<p>The <code>100.64.0.0/10</code> address block is <strong>not</strong> <em>private</em> address space; it is <em>shared</em> address space. This is spelled out in <a href=""https://tools.ietf.org/html/rfc6598"" rel=""noreferrer"">RFC 6598, IANA-Reserved IPv4 Prefix for Shared Address Space</a> (I highlighted the relevant verbiage):</p>

<blockquote>
  <ol>
  <li><p>Introduction</p>
  
  <p>IPv4 address space is nearly exhausted.  However, ISPs must
  continue to support IPv4 growth until IPv6 is fully deployed.  To
  that end, many ISPs will deploy a Carrier-Grade NAT (CGN) device,
  such as that described in [<a href=""https://tools.ietf.org/html/rfc6264"" rel=""noreferrer"">RFC6264</a>].  Because CGNs are used on
  networks where public address space is expected, and currently
  available private address space causes operational issues when used
  in this context, ISPs require a new IPv4 /10 address block.  This
  address block will be called the ""Shared Address Space"" and will be
  used to number the interfaces that connect CGN devices to Customer
  Premises Equipment (CPE).</p>
  
  <p>Shared Address Space is similar to [<a href=""https://tools.ietf.org/html/rfc1918"" rel=""noreferrer"">RFC1918</a>] private address space
  in that it is not globally routable address space and can be used
  by multiple pieces of equipment.  <strong><em>However, Shared Address Space has
  limitations in its use that the current [<a href=""https://tools.ietf.org/html/rfc1918"" rel=""noreferrer"">RFC1918</a>] private address
  space does not have.  In particular, Shared Address Space can only
  be used in Service Provider networks or on routing equipment that
  is able to do address translation across router interfaces when the
  addresses are identical on two different interfaces.</em></strong></p>
  
  <p>This document requests the allocation of an IPv4 /10 address block
  to be used as Shared Address Space.  In conversations with many
  ISPs, a /10 is the smallest block that will allow them to deploy
  CGNs on a regional basis without requiring nested CGNs.  For
  instance, as described in [<a href=""https://tools.ietf.org/html/rfc6598#ref-ISP-SHARED-ADDR"" rel=""noreferrer"">ISP-SHARED-ADDR</a>], a /10 is sufficient to
  service Points of Presence in the Tokyo area.</p>
  
  <p>This document details the allocation of an additional special-use
  IPv4 address block and updates [<a href=""https://tools.ietf.org/html/rfc5735"" rel=""noreferrer"">RFC5735</a>].</p></li>
  </ol>
</blockquote>
","35966"
"What is the difference between layer-2 and layer-3 broadcasts? Please explain with an example","2646","","<p>What is the difference between broadcast addresses <code>ff.ff.ff.ff.ff.ff</code> (Layer 2) and <code>255.255.255.255</code> (Layer 3)?</p>
","<p>You need to understand the difference between layer-2 and layer-3 for an answer to have any real meaning for you, and I suspect you don't.</p>

<p>A layer-2 network is a LAN, and all hosts on it are peers. A LAN is bounded by layer-3. The layer-2 frames are delivered to the host with the destination MAC address in the frame. I one host wants to send something to all the hosts on the LAN, it will address the frame(s) with the <code>ffff:ffff:ffff</code> MAC address. Each host is obligated to strip the frame and inspect the packet to see if the packet is meant for it.</p>

<p>A layer-3 network is usually, but not always, on a layer-2 LAN. Router use layer-3 to send packets between LANs. A host on a LAN cannot send a layer-3 packet without first encapsulating it in a layer-2 frame, and that requires layer-2 MAC addresses.</p>

<p>You need ARP (or an equivalent, see IPv6) to resolve the layer-3 address to a layer-2 address. When a host sends a packet to another host on the same LAN, it first looks in its ARP cache to see if it has a layer-2 address for the layer-3 address. If it does not, it sends an ARP request. The ARP request is broadcast at layer-2 to all hosts on the LAN, looking for the host which owns the layer-3 address. The host owning that address will respond with an ARP reply, giving the requesting host its MAC address. In this case, a layer-2 broadcast gets the attention of all the hosts on the LAN, but only the host with the layer-3 address responds.</p>

<p>A layer-3 broadcast packet is meant for all hosts on the layer-3 network. When a host needs to resolve the layer-3 broadcast, it uses the layer-2 broadcast address for the frame.</p>

<p>There are two types of layer-3 broadcast: the limited broadcast, <code>255.255.255.255</code>, as you noted, and the network broadcast, the highest IP address in a network. The limited broadcast can never cross a router, while a network broadcast may cross a router if the router has been configured that way, although that is considered a security risk, and routers do not allow this, by default, but that was not always the case.</p>
","29273"
"NEWBIE: How can two computers communicate if they are behind firewalls?","2638","","<p>This is something I have wondered for awhile and couldn't find answer of. Apologies for the stupid question, but here it goes:</p>

<p>If two computers have static IP's then they can easily send each other packets over TCP/IP.</p>

<p>If a computer is behind a firewall/router/another device that connects it to the internet the computer doesn't have an external IP address. Instead it has a LAN address, e.g. 192.168.<em>.</em>. If this computer wants to access a webpage, it knows the webserver's IP address, or uses DNS to obtain it. It sends a TCP/IP package, but how does the server then know what IP to send the answer to?</p>

<p>I imagine the following:</p>

<pre><code>Request:  A --[send to C, return to A]-&gt; B --[send to C, return to B]-&gt; C
Response: A &lt;-[send to A, return to C]-- B &lt;-[send to B, return to C]-- C
</code></pre>

<p>where <code>A</code> is the computer in question, <code>B</code> is the router it sits behind, and <code>C</code> is the target webserver. This doesn't seem realistic though, as <code>B</code> would have to memorize who to forward replies to for <strong>every packet it routed out</strong>. Which is probably a lot.</p>

<p>So my <strong>question 1</strong> is: How does <code>C</code> reply to <code>A</code>?</p>

<p>In another scenario, computer <code>A</code> wants to send a packet to computer <code>D</code> both of which live in separate LAN networks. Is this possible without a central server <code>E</code>? I imagine something like this:</p>

<pre><code>Request:  A --[s.t. D, r.t. A]-&gt; B --[s.t. D, r.t. B]-&gt; C --[s.t. D, r.t. C]-&gt; D
</code></pre>

<p>However, there is no way <code>A</code> could know the address of <code>D</code>, as <code>D</code> in fact does not have an external IP address. The only solution using a central server <code>E</code> is this:</p>

<pre><code>A connects to E; has an id in E's system which is id_A
D connects to E; has an id in E's system which is id_D
A sends a message to D indirectly, by sending it to E and saying it is for id_D
E forwards the message to D, as it knows how to communicate with D
</code></pre>

<p>And even in this case, I don't quite get how can <code>E</code> send a message to <code>D</code>, if <code>D</code> didn't request it (as my model for PC &lt;-> Server communication depends on the assumption that the PC requests and the Server responds; see question 1).</p>

<p>My <strong>question 2</strong> is: Is it possible and how can two computers that only have LAN IP's communicate directly, if they are in different LAN's.</p>

<p>If you can point me to some beginners literature, that would be more than enough.</p>

<p>Thank you for your time.</p>
","<p>First: What you describe is NAT, not firewalling. A firewall just filters what can go through, a NAT device changes addresses in packets.</p>

<p>You almost answer the first question yourself. Yes, a NAT device needs to keep track of every session going through it. Most communication on the internet uses TCP or UDP. Both of these protocols use port numbers. A session is defined by source address, source port number, destination address and destination port number. The NAT device needs to maintain a mapping between which numbers on the inside correspond to which numbers on the outside. And then it has to match every packet to an entry in its mapping table and adjust the packet accordingly.</p>

<p>This is also why NAT devices are less than optimal: a normal router is stateless. It doesn't need to keep track of what happened previously and it doesn't need to adjust the numbers and addresses in the packet. If a router fails another router can take over immediately. When a NAT device fails the device that takes over doesn't have the same mapping table and all sessions break and have to be re-established.</p>

<p>Your second question is more complex. One option is to configure port forwarding in one of the NAT devices. Then you let A send a packet to the forwarded port on C. B will change the source address and port to one of its own. When the packet arrives at C it then adjusts the destination address and port so the packet is forwarded to D. Reply packets do exactly the same in the opposite direction.</p>

<p>If there is no port forwarding then it gets more difficult. You need to have the assistance of an external server E. Both A and D have to initiate connections to E. Then E has to coordinate setting up the session between A and D. A and D both send outbound packets to trick B and C into adding entries to their mapping tables. Once those mappings are in place they can communicate directly.</p>

<p>To summarise: the way things usually work is that for outbound packets you have a device that performs source NAT. It changes the source address and port of the internal device to one of its own. For inbound packets you have a device that performs destination NAT. It changes the destination address and port to what is in its mapping table. The mapping table is filled either by manual configuration, by a protocol that lets internal systems request a mapping (didn't talk about those, look up UPNP and PCP) or automatically when the NAT device creates an entry for an outbound packet.</p>
","11258"
"Policy Based Routing for VPN connections with VPN Client configuration","2633","","<p>We have a Cisco 2800 router in our company that also serves as a VPN server. We use the VPN Client to connect to our corporate network (pls don't laugh, I know that it is very obsolete but I haven't had the time lately to switch to SSL VPN).</p>

<p>The router has two WAN connections. One is the primary wan (""<em>slow wan</em>"" link with slower upload 10D/1U mbps) and it is used for the corporate workstations used by the employees. The other is our backup link. It has higher upload speed - 11D/11U mbps, (<em>fast wan</em>), and thus we also use the high upload link for our webserver (I have done this using PBR just for the http traffic from the webserver). For numerous other reasons we can not use the <code>fast wan</code> connection as our primary connection and it is used only as a failover in case the primary link fails.</p>

<p>The <code>fast wan</code> also has a static IP address and we use this static IP for the VPN Client configuration.</p>

<p>Now the thing is that because of the failover, when we connect from the outside using the VPN Client, the traffic comes from the<code>fast wan</code> interface, but exits from the <code>slow wan</code> interface. And because the <code>slow wan</code> has only 1mbps upload the vpn connection is slow.</p>

<p>Is there any way for us to redirect the vpn traffic to always use the <code>fast wan</code> interface and to take advantage of the 11mbps upload speed of that connection?</p>

<p>Bellow is a sanitized config of our router</p>

<pre><code>!
crypto isakmp policy 1
encr 3des
authentication pre-share
group 2
!
crypto isakmp client configuration group dc
key ***
dns 192.168.5.7
domain corp.local
pool SDM_POOL_1
acl 101
max-users 3
netmask 255.255.255.0
crypto isakmp profile sdm-ike-profile-1
   match identity group dc
   isakmp authorization list sdm_vpn_group_ml_1
   client configuration address respond
   virtual-template 1
!
!
crypto ipsec transform-set ESP-3DES-SHA esp-3des esp-sha-hmac
!
crypto ipsec profile SDM_Profile1
set security-association idle-time 3600
set transform-set ESP-3DES-SHA
set isakmp-profile sdm-ike-profile-1
!
!
!
!
interface Loopback0
ip address 10.10.10.1 255.255.255.0
!
interface FastEthernet0/0
description *WAN*
no ip address
ip mtu 1396
duplex auto
speed auto
!
interface FastEthernet0/0.3
description FAST-WAN-11D-11U
encapsulation dot1Q 3
ip address 88.XX.XX.75 255.255.255.248
ip load-sharing per-packet
ip nat outside
ip virtual-reassembly
!
interface FastEthernet0/0.4
description SLOW-WAN-10D-1U
encapsulation dot1Q 4
ip address dhcp
ip nat outside
ip virtual-reassembly
no cdp enable
!
interface FastEthernet0/1
description *LOCAL*
no ip address
ip virtual-reassembly
duplex auto
speed auto
!
interface FastEthernet0/1.10
description VLAN 10 192-168-5-0
encapsulation dot1Q 10
ip address 192.168.5.1 255.255.255.0
ip nat inside
ip virtual-reassembly max-reassemblies 32
no cdp enable
!
interface FastEthernet0/1.20
description VLAN 20 10-10-0-0
encapsulation dot1Q 20
ip address 10.10.0.254 255.255.255.0
ip access-group PERMIT-MNG out
ip nat inside
ip virtual-reassembly
!
!!! NOTE: This route map is used to PBR the http traffic for our server
ip policy route-map REDIRECT-VIA-FAST-WAN
no cdp enable
!
interface Virtual-Template1 type tunnel
ip unnumbered Loopback0
tunnel mode ipsec ipv4
tunnel protection ipsec profile SDM_Profile1
!
interface Virtual-Template3
no ip address
!
interface Virtual-Template4
no ip address
!
!
ip local pool SDM_POOL_1 192.168.5.150 192.168.5.152
ip forward-protocol nd
!
!
!
!!! SLOW-WAN NEXT HOP DEFAULT ADDRESS
ip route 0.0.0.0 0.0.0.0 89.XX.XX.1 5
!
!!! FAST-WAN NEXT HOP DEFAULT ADDRESS
ip route 0.0.0.0 0.0.0.0 88.XX.XX.73 10
!
!
!
ip nat inside source route-map FAST-WAN-NAT-RMAP interface FastEthernet0/0.3 overload
ip nat inside source route-map SLOW-WAN-NAT-RMAP interface FastEthernet0/0.4 overload
!
!
access-list 101 remark SDM_ACL Category=4
access-list 101 permit ip 192.168.5.0 0.0.0.255 any
access-list 101 permit ip 10.10.0.0 0.0.0.255 any
!
ip access-list extended FAST-WAN-NAT
permit tcp 192.168.5.0 0.0.0.255 range 1025 65535 any
permit udp 192.168.5.0 0.0.0.255 range 1025 65535 any
permit icmp 192.168.5.0 0.0.0.255 any
permit tcp 10.10.0.0 0.0.0.255 range 1025 65535 any
permit udp 10.10.0.0 0.0.0.255 range 1025 65535 any
permit icmp 10.10.0.0 0.0.0.255 any
ip access-list extended REDIRECT-VIA-FAST-WAN
deny   tcp host 10.10.0.43 eq 443 9675 192.168.5.0 0.0.0.255
permit tcp host 10.10.0.43 eq 443 9675 any
ip access-list extended SLOW-WAN-NAT
permit ip 192.168.5.0 0.0.0.255 any
permit ip 10.10.0.0 0.0.0.255 any
!
!
route-map FAST-WAN-NAT-RMAP permit 10
match ip address FAST-WAN-NAT
match interface FastEthernet0/0.3
!
route-map REDIRECT-VIA-FAST-WAN permit 10
match ip address REDIRECT-VIA-FAST-WAN
set ip next-hop 88.XX.XX.73
!
route-map SLOW-WAN-NAT-RMAP permit 10
match ip address SLOW-WAN-NAT
match interface FastEthernet0/0.4
!
!
</code></pre>

<p>P.S. Also feel free to suggest a better name (more descriptive name) for this post</p>

<h2>UPDATE: 20.12.2013</h2>

<p>I did as John Kennedy suggested. However the traffic was still routed OUT the <code>slow-wan</code> interface.
I created a separate <code>route-map</code> for the other lan interface. This is the config and the <code>show</code> output:</p>

<p>At the time of executing this commands I am actually SSHed from the VPN. I also tried to disconnect and reconnect again just in case. </p>

<p><strong>You may notice bellow that when I execute a <code>show access-list</code> command that there are no matched packets for the ESP or AHP protocols.</strong></p>

<p>Also for the newly created route map <code>REDIRECT-VIA-FAST-WAN2</code> there are no matched packets yet my vpn assigned IP address is into the 192.168.5.0 subnet.</p>

<pre><code>Router# sh run inter fa0/1.10
!
interface FastEthernet0/1.10
 description VLAN 10 192-168-5-0
 encapsulation dot1Q 10
 ip address 192.168.5.1 255.255.255.0
 ip nat inside
 ip virtual-reassembly max-reassemblies 32
 ip policy route-map REDIRECT-VIA-FAST-WAN2
 no cdp enable
end

Router#
Router#sh run inter fa0/1.20
Building configuration...

Current configuration : 251 bytes
!
interface FastEthernet0/1.20
 description VLAN 20 10-10-0-0
 encapsulation dot1Q 20
 ip address 10.10.0.254 255.255.255.0
 ip access-group PERMIT-MNG out
 ip nat inside
 ip virtual-reassembly
 ip policy route-map REDIRECT-VIA-FAST-WAN
 no cdp enable
end

Router#
Router#sh route-map
route-map REDIRECT-VIA-FAST-WAN2, permit, sequence 10
  Match clauses:
    ip address (access-lists): REDIRECT-VIA-FAST-WAN2
  Set clauses:
    ip next-hop 88.XX.XX.73
  Policy routing matches: 0 packets, 0 bytes
!
route-map REDIRECT-VIA-FAST-WAN, permit, sequence 10
  Match clauses:
    ip address (access-lists): REDIRECT-VIA-FAST-WAN
  Set clauses:
    ip next-hop 88.XX.XX.73
  Policy routing matches: 1948323 packets, 2212263065 bytes
!
Router#
Router#sh access-lists REDIRECT-VIA-FAST-WAN
Extended IP access list REDIRECT-VIA-FAST-WAN
    10 deny tcp host 10.10.0.43 eq 443 9675 192.168.5.0 0.0.0.255 (2068620 matches)
    20 permit tcp host 10.10.0.43 eq 443 9675 any (1948603 matches)
    30 permit esp any any
    40 permit ahp any any
    !
    !!! NOTE: FIRST I TRIED WITHOUT THESE. THEY WERE ADDED AFTERWARDS JUST IN CASE. 
    !!! ALSO THE ROUTER ITSELF CORRECTED THE PORT NUMBERS INTO THE CORRESPONDING PROTOCOLS
    50 permit udp any any eq isakmp
    60 permit udp any any eq 10000
    !
    !!! I MAY ASSUME THAT THE CORRECTED ENTRY non500-isakmp ACTUALY MEANS ""THIS WILL NOT BE USED FOR ISAKMP
    70 permit udp any any eq non500-isakmp 
    80 permit tcp any any eq 4500
Router#sh access-lists REDIRECT-VIA-FAST-WAN2
Extended IP access list REDIRECT-VIA-FAST-WAN2
    10 permit ahp any any
    20 permit esp any any
    30 permit udp any any eq isakmp
    40 permit udp any any eq 10000
    50 permit udp any any eq non500-isakmp
    60 permit tcp any any eq 4500
Router#
</code></pre>
","<p>You can simply append the ACL ""REDIRECT-VIA-FAST-WAN"" to route IPSEC traffic out your ""fast wan"" interface.</p>

<pre><code>ip access-list extended REDIRECT-VIA-FAST-WAN
deny   tcp host 10.10.0.43 eq 443 9675 192.168.5.0 0.0.0.255
permit tcp host 10.10.0.43 eq 443 9675 any
permit ahp any any
permit esp any any
</code></pre>

<p>Or if your router does not have the ""ahp"" and ""esp"" options for an extended ACL, you can simply add in the specific ports that the ipsec client tunnels over, namely UDP ports 500, 10000, and 4500, and also TCP 4500 for good measure. </p>

<pre><code>ip access-list extended REDIRECT-VIA-FAST-WAN
deny   tcp host 10.10.0.43 eq 443 9675 192.168.5.0 0.0.0.255
permit tcp host 10.10.0.43 eq 443 9675 any
permit udp any any eq 500
permit udp any any eq 10000
permit udp any any eq 4500
permit tcp any any eq 4500
</code></pre>

<p>You may also have to append your ""PERMIT-MNG"" ACL to allow outbound IPSEC traffic (depending on what that ACL is configured to do) but you stripped it out of the running config so I can not fully comment on that.</p>
","5554"
"Cisco 1260 AP no longer responds to ping, ssh after upgrade to latest 15.x firmware","2629","","<p>I have a 1260 AP that I upgraded this morning.  Prior to the upgrade, the system permitted ssh and would respond to pings on the network, however now it does not respond.</p>

<p>I hooked up a serial cable and surfing around the config I can't seem to find anything amiss, and turning on ssh debugging is not producing any output.</p>

<p>I tried regenerating the RSA key in the off chance that was causing ssh to not come online, however it has not affected the inability to contact the unit over the network.</p>

<p>I also tried turning on ""ip routing"" and ""ip cef"" thinking they might be the issue, but no effect.  I also added a static default route out to our management gateway in hopes that perhaps it was a default route issue but it also did not help</p>

<p>Here's the current version of IOS on the unit:</p>

<pre><code>Cisco IOS Software, C1260 Software (AP3G1-K9W7-M), Version 15.2(2)JB, RELEASE SOFTWARE (fc1)
Technical Support: http://www.cisco.com/techsupport
Copyright (c) 1986-2012 by Cisco Systems, Inc.
Compiled Mon 10-Dec-12 23:42 by prod_rel_team

ROM: Bootstrap program is C1260 boot loader
BOOTLDR: C1260 Boot Loader (AP3G1-BOOT-M), Version 12.4 [mpleso-ap_jmr3_esc_0514 125]
</code></pre>

<p>Here's the current running config:</p>

<pre><code>DEN-AP01#sh run full
Building configuration...

Current configuration : 3535 bytes
!
! Last configuration change at 00:22:30 UTC Mon Mar 1 1993 by gbeech
version 15.2
no service pad
service timestamps debug datetime msec
service timestamps log datetime msec
service password-encryption
!
hostname DEN-AP01
!
!
logging rate-limit console 9
logging console warnings
enable secret 5 redacted
!
no aaa new-model
ip cef
ip domain name ds.stackexchange.com
!
!
!
dot11 syslog
dot11 vlan-name DEN-CLIENTS vlan 20
dot11 vlan-name DEN-MGMT vlan 10
dot11 vlan-name DEN-WIRELESS vlan 50
!
dot11 ssid StackGuest
   vlan 50
   authentication open
   authentication key-management wpa version 2
   mbssid guest-mode
   wpa-psk ascii 7 redacted
!
!
dot11 network-map
crypto pki token default removal timeout 0
!
!
!
!
bridge irb
!
!
!
interface Dot11Radio0
 no ip address
 no ip route-cache
 !
 encryption mode ciphers tkip
 !
 encryption vlan 50 mode ciphers aes-ccm tkip
 !
 ssid StackGuest
 !
 antenna gain 0
 mbssid
 speed  basic-1.0 basic-2.0 basic-5.5 basic-11.0 basic-6.0 basic-9.0 basic-12.0 basic-18.0 basic-24.0 basic-36.0 basic-48.0 basic-54.0
 channel 2427
 station-role root
 bridge-group 1
 bridge-group 1 subscriber-loop-control
 bridge-group 1 spanning-disabled
 bridge-group 1 block-unknown-source
 no bridge-group 1 source-learning
 no bridge-group 1 unicast-flooding
!
interface Dot11Radio0.50
 encapsulation dot1Q 50
 no ip route-cache
 bridge-group 50
 bridge-group 50 subscriber-loop-control
 bridge-group 50 spanning-disabled
 bridge-group 50 block-unknown-source
 no bridge-group 50 source-learning
 no bridge-group 50 unicast-flooding
!
interface Dot11Radio1
 no ip address
 no ip route-cache
 !
 encryption vlan 50 mode ciphers tkip
 !
 encryption mode ciphers tkip
 !
 ssid StackGuest
 !
 antenna gain 0
 dfs band 3 block
 mbssid
 channel dfs
 station-role root
 bridge-group 1
 bridge-group 1 subscriber-loop-control
 bridge-group 1 spanning-disabled
 bridge-group 1 block-unknown-source
 no bridge-group 1 source-learning
 no bridge-group 1 unicast-flooding
!
interface Dot11Radio1.50
 encapsulation dot1Q 50
 no ip route-cache
 bridge-group 50
 bridge-group 50 subscriber-loop-control
 bridge-group 50 spanning-disabled
 bridge-group 50 block-unknown-source
 no bridge-group 50 source-learning
 no bridge-group 50 unicast-flooding
!
interface GigabitEthernet0
 no ip address
 no ip route-cache
 duplex auto
 speed auto
 no keepalive
 bridge-group 20
 bridge-group 20 spanning-disabled
 no bridge-group 20 source-learning
!
interface GigabitEthernet0.10
 encapsulation dot1Q 10
 no ip route-cache
 bridge-group 1
 bridge-group 1 spanning-disabled
 no bridge-group 1 source-learning
!
interface GigabitEthernet0.50
 encapsulation dot1Q 50
 no ip route-cache
 bridge-group 50
 bridge-group 50 spanning-disabled
 no bridge-group 50 source-learning
!
interface BVI1
 ip address 10.15.0.6 255.255.255.0
 no ip route-cache
!
interface BVI50
 no ip address
 no ip route-cache
!
ip default-gateway 10.15.0.1
ip forward-protocol nd
ip http server
no ip http secure-server
ip http help-path http://www.cisco.com/warp/public/779/smbiz/prodconfig/help/eag
ip route 0.0.0.0 0.0.0.0 10.15.0.1
!
access-list 111 permit tcp any any neq telnet
bridge 1 route ip
!
!
!
line con 0
 access-class 111 in
line vty 0 4
 login local
 transport input ssh
line vty 5 15
 login local
 transport input ssh
!
end
</code></pre>

<p>Any suggestions would be appreciated, I'm pretty stumped as to why this would suddenly go wrong.</p>

<p><strong>EDIT</strong>: Here's the recreating of crypto keys output.</p>

<pre><code>DEN-AP01(config)#crypto key generate rsa modulus 1024
% You already have RSA keys defined named DEN-AP01.ds.stackexchange.com.
% They will be replaced.

% The key modulus size is 1024 bits
% Generating 1024 bit RSA keys, keys will be non-exportable...
[OK] (elapsed time was 1 seconds)

DEN-AP01(config)#
*Mar  1 01:02:01.411: %SSH-5-DISABLED: SSH 1.99 has been disabled
*Mar  1 01:02:02.515: %SSH-5-ENABLED: SSH 1.99 has been enabled

</code></pre>
","<p>After restoring the unit to factory defaults and reprogramming it, the AP began functioning properly once more.  I'm chalking it up to ""attempted upgrade gone awry.""</p>
","513"
"Replacing switches in production environment (3750 to 3850)","2629","","<p>I have about 15-18 stacks of Cisco 3750 switches and each of the stack have 3-4 switched in it. Now, we need to upgrade the switch to 3850 ( replace all the 3750 switches with the 3850). Did anybody done this kind of projects? Please help me by providing the detail procedure on how to physically replace the switch in the production environment and how to transfer the current configurations in the switches. We need to have all the previous configuration in the new switch. The switch replacement is done in weekends.</p>

<p>I have researched almost every where, but could not find any answers.</p>

<p>Thanks in advance.</p>
","<p>Make sure your port names and numbers match exactly between the old and new stacks. This means that for example, GigabitEthernet1/0/1 is on the top most switch and is actually named GigabitEthernet1/0/1 on both switches. Since this is 3750 to 3850, that shouldn't be a problem. You just want to make sure the top switch is 1, the second switch is 2, etc. on both stacks. You can use the show switch detail to make sure and the switch number (I think) command to make any changes.</p>

<p>Where you might run into issues is if you use a different SFP port for your fiber uplink trunks. Make sure those are in the same ports to make porting the config easier.</p>

<p>Set up a TFTP server on a PC and use the copy run tftp command to copy the config over to the PC.</p>

<p>Set up an IP address on the 3850 stack (and gateway if the PC will be on a different network) and use the copy command (i.e. copy tftp newconfig) to copy it over to the new stack. </p>

<p>I believe 3850s also have a USB port so you can play with putting the config on a thumb drive and copy from the USB port (disk0: I think) to the flash in the switch.</p>

<p>Do a copy newconfig start command to copy the new config to the startup-config which is what the switch will use when reloaded. newconfig is whatever you named the file when you copied it over. start is short for ""startup-config""</p>

<p>Do a show start command to make sure the copy took.</p>

<p>Do a reload command to reload the stack and monitor the reload for errors. There might be commands in the old config that have been changed or deprecated. Cisco usually does a good job of handling these assuming the 3850 is running a newer version of IOS than the 3750.</p>

<p>Make sure you are connected to the switch via a console cable when you do all this. The same PC that the console cable is connected to can also be your TFTP server connected directly to the switch to make it easier.</p>

<p>You may also have license file issues to deal with. At the very least, make sure that if your 3750s were running IP Base, the 3850s are at also running IP Base or IP Services and not LAN Base. The 3750s will probably be running the IOS 12 train which I do not think uses the new license PAK scheme. The 3850s are probably running IOS 15 train which may need license codes to enable certain features.</p>
","30867"
"Cisco OSPF type 5 /32 routes in database, but not in routing table","2621","","<p>Our network runs OSPF for IPv4 on Cisco hardware. The following image shows the relevant topology:</p>

<p><strong>Topology</strong></p>

<p><img src=""https://imgur.com/1OEPu4v.png"" alt=""Problem Topology""></p>

<p><strong>Problem Statement</strong></p>

<p>We have a Cisco ASA firewall, which also is the VPN gateway for incoming VPN connections. As said, we are running OSPF as internal routing protocol. The ASA performs reverse route injection (RRI) for the VPN clients, which means it creates a static /32 route for every VPN connection. Those /32 routes are then redistributed into the OSPF domain.</p>

<p>The Router on the right is our perimeter router running BGP. In between there is a Multilayer Switch (Cat6500 w/ Sup720-3B and IPServices) also running OSPF. The problem is, that those /32 routers are visible in the OSPF database both at the MLS and the Router, but are not inserted into the routing table on the MLS. At the router, they however are in the routing table.</p>

<p><strong>Debugging Output</strong></p>

<p>There are two such subnets (two different VPN profiles), which are xx.xx.37.0/24 and xx.xx.202.0/24. As those /32 routers are redistributed into OSPF, they appear as LSA type 5 in the rest of the routing domain, however, they are not injected into the routing table at the MLS.</p>

<p>We can see those LSAs at the database:</p>

<pre><code>show ip ospf database external | i xx.xx.202.
  Link State ID: xx.xx.202.5 (External Network Number )
  Link State ID: xx.xx.202.6 (External Network Number )
  Link State ID: xx.xx.202.8 (External Network Number )
</code></pre>

<p>If we look at the specific LSA, we also can see that the routing bit is set, hence the LSA is eligible for OSPF routing:</p>

<pre><code>show ip ospf database external xx.xx.202.5

            OSPF Router with ID (xx.xx.207.4) (Process ID 2)

                Type-5 AS External Link States

  Routing Bit Set on this LSA
  LS age: 1887
  Options: (No TOS-capability, DC)
  LS Type: AS External Link
  Link State ID: xx.xx.202.5 (External Network Number )
  Advertising Router: xx.xx.192.20
  LS Seq Number: 80000001
  Checksum: 0x8147
  Length: 36
  Network Mask: /32
        Metric Type: 2 (Larger than any link state path)
        TOS: 0
        Metric: 20
        Forward Address: xx.xx.192.21
        External Route Tag: 0
</code></pre>

<p>Further, debugging the SPF of the OSPF process shows, that the partial update is received and processed, and no error can be found (debug ip ospf spf):</p>

<pre><code>Feb  2 16:17:40.537: OSPF: Schedule partial SPF - type 5 id xx.xx.202.5 adv rtr xx.xx.192.20
Feb  2 16:17:40.537: OSPF: Service partial SPF 0/1/0
Feb  2 16:17:40.537: OSPF process partial spfQ entry
Feb  2 16:17:40.537: OSPF process partial spfQ entry
Feb  2 16:17:40.537: OSPF process partial spfQ LSA id xx.xx.202.5: mask 255.255.255.255, type 5 adv_rtr xx.xx.192.20, age 1, seq 0x80000001 (Area dummy area)
Feb  2 16:17:40.537: OSPF: Start partial processing Type 5 External LSA xx.xx.202.5, mask 255.255.255.255, adv xx.xx.192.20, age 1, seq 0x80000001, metric 20, metric-type 2
Feb  2 16:17:40.537:    Add path: next-hop xx.xx.192.21, interface Vlan511
Feb  2 16:17:40.537: OSPF: insert route list LS ID xx.xx.202.5, type 5, adv rtr xx.xx.192.20
Feb  2 16:17:40.537: OSPF process partial spfQ entry
</code></pre>

<p>However, the route is not inserted into the routing table. As a work around, we added a static route using the /24 subnet. This however is no reason why the /32 subnet is not placed into the table. While the AD is lower (1 static route vs 110 OSPF external), the longest prefix match rule is evaluated first, hence the /32 subnet should be added.</p>

<p>Interestingly, at the Router behind the MLS, the /32 route is added to the routing table as expected.</p>

<p><strong>Further Information</strong></p>

<p>MLS is a Cisco 6500 Chassis w/ Sup720-3B (MSFC3) SUP running ""s72033-ipservicesk9-mz.122-33.SXI14.bin"" software. The Router is a Cisco ASR1001-F router, running ""asr1000rp1-advipservicesk9.03.04.06.S.151-3.S6.bin"" software.</p>

<p>There are no routing filters in place, the OSPF config of the devices is pretty basic. OSPF adjacencies are OK, all other routes or OK.</p>

<p>OSPF configuration of MLS:</p>

<pre><code>router ospf 2
 router-id xx.xx.207.4
 log-adjacency-changes
 auto-cost reference-bandwidth 100000
 area 0 authentication message-digest
 passive-interface default
 no passive-interface ...
 network 0.0.0.0 255.255.255.255 area 0
</code></pre>

<p>OSPF configuration Router:</p>

<pre><code>router ospf 2
 router-id xx.xx.207.1
 auto-cost reference-bandwidth 100000
 area 0 authentication message-digest
 traffic-share min across-interfaces
 passive-interface default
 no passive-interface ...
 default-information originate always metric-type 1
</code></pre>

<p><strong>New Information</strong></p>

<p>After some further troubleshooting, I may have found the issue, however, have no idea how to solve it. Looking at the firewall, the generated static route looks like this:</p>

<pre><code>S xx.xx.202.13 255.255.255.255 [1/0] via xx.xx.192.21, outside
</code></pre>

<p>The default behaviour of RRI is to set the next-hop of the generated static route to the default gateway of the ASA interface where the crypto map is applied (which is outside in our case). In our case, it is xx.xx.192.21, which is the interface of the MLS!</p>

<p>According to <a href=""http://www.cisco.com/c/en/us/support/docs/ip/open-shortest-path-first-ospf/13682-10.html"" rel=""nofollow noreferrer"">Cisco Documentation</a>, a non-zero forwarding address is set, if the following conditions are met:</p>

<blockquote>
  <p>OSPF is enabled on the ASBR’s next hop interface AND
  ASBR’s next hop interface is non-passive under OSPF AND
  ASBR’s next hop interface is not point-to-point AND
  ASBR’s next hop interface is not point-to-multipoint AND
  ASBR’s next hop interface address falls under the network range specified in the router ospf command.</p>
</blockquote>

<p>All these conditions are met, as we need the outside interface (which is next hop) enabled in OSPF, as it is the interface pointing to the MLS.</p>

<p>As written above, the LSA at the MLS contains the forwarding address of xx.xx.192.21 which is the address of the MLS in the subnet between MPLS and ASA. According to the documentation linked above, the forwarding address needs to be known as internal OSPF route. This is given at the Router, and the routing entries are added to the routing table. This however is not given at the MLS.</p>

<p><strong>Question</strong></p>

<p>Why are the routes not added to the routing table? I appreciate any idea.</p>
","<p>As pointed out by DanielDib, the problem is the wrong forward address set in the type 5 LSA.</p>

<p>According to the <a href=""http://www.cisco.com/c/en/us/support/docs/ip/open-shortest-path-first-ospf/13682-10.html"" rel=""nofollow noreferrer"">Cisco documentation</a>, the forward address is basically set, if the next hop Interface of the static route generated by RRI participates in the OSPF routing process. Further details can be found in the linked documentation.</p>

<p>The next-hop of the RRI static routes is set to the default gateway of the ASA interface where the crypto map is applied, in our case the outside interface pointing to the MLS. This next-hop IP is the IP of the interface of the MLS.</p>

<p>At the MLS, the forward address of the LSA (xx.xx.192.21) is an IP address of one of its own interfaces. As the foward address needs to be known as internal OSPF route, the route is not considered to be added to the routing table. The solution hence may be either to have a correct forward address, or to supress the forward address, if required. <a href=""https://networkengineering.stackexchange.com/questions/17183/cisco-asa-rri-and-ospf-redistribution"">This question</a> may include further details on this solution. </p>
","17184"
"Different subnets in the same LAN","2620","","<p>I have a very rudimentary doubt. We know that a LAN has addresses in the same subnet. 
The LAN ends at the gateway router with that interface also belonging to the same subnet.
But what exactly will break in the forwarding operation if we assign LAN addresses that belong to different subnets.</p>
","<p>The PC's in the other subnet should be able to communicate with each other. However if they attempt to ping an IP on a different subnet, it won't work unless the default gateway is setup on the router and some form of routing (static/dynamic) is setup on the router. </p>
","39032"
"Cisco 3725 - ping encapsulation failed","2620","","<p>I am unable to ping from R1 to R2. <code>debug ip packet detail</code> returns <code>IP: s=172.16.12.1 (local), d=172.16.12.2 (FastEthernet0/0.12), len 100, encapsulation failed</code>. I understand this means it can't resolve an arp address. I am looking for some guidance on what could be causing this.  </p>

<p>I am using GNS3 to test some configurations. I have three 3725 routers. One acting as a switch (R1, R2, SW1). <code>ip cef</code> is enabled on all three devices.</p>

<p><code>R1</code> and <code>R2</code> connect to <code>SW1</code>, from their <code>f0/0</code> to <code>f1/1</code> &amp; <code>F1/2</code> respectively. <code>R1</code> &amp; <code>R2</code> have subinterfaces enabled on <code>f0/0.12</code> VLAN 12. <code>SW1 f1/1</code> &amp; <code>f1/2</code> are both assigned to <code>vlan 12</code>.</p>

<p>Is there a feature on <code>SW1</code> I need to disable/enable? What am I missing?</p>

<p><code>R1</code> config  </p>

<pre><code>interface FastEthernet0/0.12  
 encapsulation dot1Q 12  
 ip address 172.16.12.1 255.255.255.0  
</code></pre>

<p><code>R2</code> config  </p>

<pre><code>interface FastEthernet0/0.12  
 encapsulation dot1Q 12  
 ip address 172.16.12.2 255.255.255.0  
</code></pre>

<p><code>SW1</code> config  </p>

<pre><code>interface FastEthernet1/1  
 switchport access vlan 12  
 switchport mode trunk  
 duplex full  
 speed 100  
!  
interface FastEthernet1/2  
 switchport access vlan 12  
 switchport mode trunk  
 duplex full  
 speed 100  
</code></pre>
","<p>Before you can forward traffic on a VLAN, you have to create it in the switch's VLAN database.  For older switches, there is a separate configuration mode for VLANs.  From privileged (enable) mode type:</p>

<pre><code>switch# vlan database
switch(vlan)# vlan 12
switch(vlan)# exit
switch#
</code></pre>
","6093"
"NAT Network setup with DSL modem and Mikrotik router","2617","","<p>I have littel experience in this kind of setups, so please bear with me. I think the question is kind of basic.</p>

<p>I have to install a router in a LAN since I'll have to have it mandle a VPN tonnel later. In short I have to go from this:</p>

<p>&lt; PUBLIC IP ><strong>[DSL Modem]</strong>&lt;192.168.1.1> ------ &lt;192.168.1.0><strong>[A BUNCH OF SERVERS]</strong></p>

<p>to this:</p>

<p>&lt; PUBLIC IP ><strong>[DSL Modem]</strong>&lt;192.168.0.1> --- &lt;192.168.0.2><strong>[Mikrotik Routerboard]</strong>&lt;192.168.1.1> --- &lt;192.168.1.0><strong>[A BUNCH OF SERVERS]</strong></p>

<p>I NATted the services I need to forward to the servers using the DSL modem interface (mail, rdp, ssh, etc). Now with the new setup I'm really confused on how should I procede.</p>

<p>Is it sensible to have 2 NAT ""hops""? DSL modem forwarding all services requests from the WAN to 192.168.0.2 (again by using the NAT interface) and then forwarding them again to the server (from the router)? Does NAT work this way? Is there another smarter way to solve this?</p>
","<p>Don't know what DSL modem you're using, but you're probably better to make that DSL modem work in bridge mode and have your MikroTik router working as a normal WAN router facing WAN and LAN sides. That way you'll have no issues with VPN, be able to forward traffic as you like and set up a good firewall. This is very typical and good setup. And this is how I'd do it.</p>

<p>If you haven't got enough control over your DSL modem, then sure, you can do chained NAT, forward everything to MT router or, as Benoit suggested, set up a DMZ feature. That way you'll still be able to bring the VPN tunnel up, but only as a client.</p>
","28597"
"List over assigned global Ethernet MAC multicast address","2609","","<p>Where are global Ethernet multicast MAC addresses assigned?  Is this by Organizationally Unique Identifier (OUI), and if so, is there a homepage that shows all the assigned global Ethernet MAC multicast address?</p>

<p>Examples of currently assigned multicast MAC addresses are:</p>

<ul>
<li><p>01-00-5E-??-??-?? : <a href=""https://en.wikipedia.org/wiki/IP_multicast#Layer_2_delivery"" rel=""nofollow"">IPv4 Multicast</a></p></li>
<li><p>01-80-C2-00-00-0? : <a href=""https://en.wikipedia.org/wiki/Spanning_tree_protocol"" rel=""nofollow"">Spanning Tree Protocol</a></p></li>
</ul>
","<p>01-00-5E-??-??-?? : <a href=""http://www.iana.org/assignments/ethernet-numbers/ethernet-numbers.xhtml#ethernet-numbers-3"" rel=""nofollow"">IANA Ethernet Numbers</a><br>
01-80-C2-00-00-0? : <a href=""http://standards.ieee.org/develop/regauth/grpmac/public.html"" rel=""nofollow"">IEEE Standards Group Listings</a></p>

<p>That covers the two OUI's you listed.</p>

<blockquote>
  <p>Is there a homepage which shows all assigned global Ethernet MAC multicast address?</p>
</blockquote>

<p>There is no <em>single</em> source, because each organization controls the use of their OUI. (IANA and IEEE in the above examples.) Any mac address is converted to multicast by <a href=""http://en.wikipedia.org/wiki/Multicast_address#Ethernet"" rel=""nofollow"">changing a single bit</a></p>
","8132"
"How do I set up a Catalyst 2960 as a dumb switch?","2603","","<p>I am completely new to network management (I'm just a linux sysadmin, myself), and have no idea at all how to set up this thing. </p>

<p>It's not for a production environment, I'm just using it for my home network (as I got it as a gift and I gladly took it :P) </p>

<p>I've already got console access and everything (via telnet, e.g. <code>telnet 10.0.0.1</code> etc.)</p>

<p>Help, please?</p>
","<p>You do not need to do anything. If the switch has no config setup, all of its ports will be in VLAN1 and the device will act as a typical unmanaged switch.</p>

<p>If some config exists, then you need to reset it to the defaults or just check if all of the ports are in the same VLAN and if they are setup as an access ports. </p>

<p>Here's the guide on how to reset the switch to the defaults:
<a href=""http://www.cisco.com/c/en/us/support/docs/switches/catalyst-2900-xl-series-switches/24328-156.html"" rel=""nofollow"">http://www.cisco.com/c/en/us/support/docs/switches/catalyst-2900-xl-series-switches/24328-156.html</a></p>

<p>Regards! </p>
","32278"
"What are the differences between classful and classless subnetting?","2597","","<p><img src=""https://i.stack.imgur.com/17s29.png"" alt=""1""></p>

<p><img src=""https://i.stack.imgur.com/zwYt9.png"" alt=""2""></p>

<p>ip: 10.5.2.1
<br>
subnetmask: 255.255.255.240
<br>
{10.5.2.1/28}
<br>
what is correct maximum subnetworks ???? <br>
What are the differences between classful and CIDR subnetting????</p>
","<p>The difference in how the two calculate the number of networks is that the classful calculation is based on the classful network. Based on the network range it falls in, the base network that is subnetted is 10.0.0.0/8, allowing for 1,048,576 /28 networks within it.</p>

<p>Based on CIDR, where classes don't exist, generally a tool like this will base it's calculations on a /24 giving 10.5.2.0/24 16 available networks.</p>

<p>As to which is correct, both depending on the context, but classful networking hasn't been widely used in networking for nearly two decades.</p>
","18663"
"Cisco: storm-control unicast","2587","","<p>Within a typical service provider environment I can see how broadcast and multicast storm control can be useful. I am confused regarding unicast storm control though.</p>

<p>Reading the Cisco docs online they give examples such as protecting against port flooding if the destination MAC of an incoming frame isn't in the CAM tables. This makes good sense to me. So does <code>storm-control unicast</code> only measure the pps rate (or bps rate) of frames that are for destinations not in the CAM tables, or all destinations that aren't a broadcast or multicast address (so just the total number of unicast frames)?</p>

<p>I'm worried that configuring such a feature could shut a port down that shouldn't be shut down simply because it has a high pps rate. An example of this is ports with voice services attached that have high frame rates but are low bpp rates of unicast frames.</p>

<p>Is this feature only measuring the frame/packet rate of unknown destination addresses or all unicast frames, what are the dangers here?</p>
","<blockquote>
  <p>So does storm-control unicast only measure the pps rate (or bps rate) of frames that are for destinations not in the CAM tables, or all destinations that aren't a broadcast or multicast address (so just the total number of unicast frames)?</p>
</blockquote>

<p>I have to confess that I mistakenly trusted the Nexus doc below which said only unknown unicast is rate-limited; however, that's definitely wrong for Cisco IOS.  The reality is (at least on IOS platforms) that unicast storm control affects <em>all unicast traffic</em>; the Cisco Nexus doc I quoted said it only affected traffic that was unknown unicast.  I will endeavor to test on Nexus at a later date.</p>

<p>In an effort to atone for my mistake, I built a quick screencast of what happens when I:</p>

<ul>
<li>Configure a Cisco IOS switch with unicast storm-control to throttle at 1Mbps.</li>
<li>Use <a href=""https://github.com/sivel/speedtest-cli"" rel=""nofollow noreferrer""><code>speedtest_cli.py</code></a> to start a unicast download from speedtest.net</li>
<li>Reconfigure the switch without unicast storm control</li>
<li>Download from speedtest.net again...</li>
</ul>

<p><em>Hit your refresh button to restart the screencast at the beginning</em></p>

<p><img src=""https://i.stack.imgur.com/eToC8.gif"" alt=""storm-control screencast""></p>

<h2>Bottom line</h2>

<ul>
<li>Unicast storm-control affects all unicast traffic in Cisco IOS</li>
<li>Unicast storm-control is applied on traffic <em>inbound to the switchport</em></li>
</ul>

<h2>My Original quote from the Nexus docs, which I applied to the OP's Cisco 2960</h2>

<p><strike>
Quoting the <a href=""http://www.cisco.com/en/US/docs/switches/datacenter/nexus5000/sw/configuration/guide/cli_rel_4_0_1a/traffstorm.html"" rel=""nofollow noreferrer"">Nexus Storm Control Docs</a> (emphasis mine):</p>

<p>""You can use the traffic storm control feature to prevent disruptions on Layer 2 ports by a broadcast, multicast, or <em>unknown unicast traffic storm</em> on physical interfaces. ""</p>

<p>Storm control operates the same way across Cisco platforms; if the destination-mac-address is not in the CAM table, then then the switch must flood it out all ports in the Vlan (except the one it came in on).  Suffient quantities of this kind of traffic would trigger your Unicast Storm Control thresholds.</strike></p>
","5345"
"How are PBX extensions configured and how are outside lines obtained?","2587","","<p>I'm trying to understand how to properly configure a PBX (Private Branch Exchange). I've stumbled into a few brick walls, and I feel like the answers to these should be obvious, but the Internet has not helped at all. After consulting stackexchange.com/sites, this seemed like the best place to post regarding telephony networking,</p>

<p>First of all, does a PBX require its own power supply? Standalone telephones work in a power outage since they are directly connected to the central office, but in a PBX setup, the telephones are connected to the PBX, which is linked via outside lines to the central office. So, would the PBX/telephones work in an outage, or does it need backup power? If your PBX is Centrex (hosted at the exchange), will the telephone company supply power to your PBX in an outage?</p>

<p>How does one actually configure extensions in a PBX? How would one set the system up so if you dial '1010' it rings a specific line somewhere in the building? Since there is no software or computer-interfaces in a PBX, and it is analog, rather than digital, how does the system know which line is which?</p>

<p>Also, does each outside line need to be paid for individually, or are there trunk leases? If everyone dialed out at once, would some users get ""no circuits are available"" if you have 50 internal lines but only 25 outside lines? Would you need as many outside lines as inside lines? And I know many organizations have assigned prefixes (they own all the numbers in 555-345-XXXX) where they own all the X numbers. Do you just ask the telephone company to lease an entire prefix, or part of a prefix?</p>

<p>Also, if the PBX loses power, can I just unplug an outside line from the PBX and plug a telephone into it? Is there any reason that wouldn't work? (like if the line is part of a trunk line instead of an individual cable)</p>
","<blockquote>
  <p>First of all, does a PBX require its own power supply?</p>
</blockquote>

<p>A PBX does require it's own power, and you must have batteries or a UPS in the event of a power outage.</p>

<blockquote>
  <p>If your PBX is Centrex (hosted at the exchange), will the telephone
  company supply power to your PBX in an outage?</p>
</blockquote>

<p>Most telcos will insist on and install a UPS for any of their equipment which they install on your premises.</p>

<blockquote>
  <p>How does one actually configure extensions in a PBX?</p>
</blockquote>

<p>How a PBX is configured depends on the particular make/model. It can be pretty complex on some systems, and most PBX vendors offer training (for a price).</p>

<blockquote>
  <p>Since there is no software or computer-interfaces in a PBX and it is
  analog, rather than digital, how does the system know which line is
  which?</p>
</blockquote>

<p>Many PBXes use software and have computers and network interfaces built in. Also, there are both analog and digital PBXes, as well as VoIP PBXes. Analog and proprietary digital PBXes are circuit switched, so the PBX know which phone is which by the circuit to which it is connected, they same way the telco knows which line is yours.</p>

<blockquote>
  <p>Also, does each outside line need to be paid for individually or are
  there trunk leases?</p>
</blockquote>

<p>How circuits are delivered depends on the PBX make/model, and what your local telco offers.</p>

<blockquote>
  <p>If everyone dialed out at once, would some users get ""no circuits are
  available"" if you have 50 internal lines but only 25 outside lines?</p>
</blockquote>

<p>If you have more users trying to make outside calls than there are outside lines, then you will get some sort of message or tone indicating a problem when trying to dial an outside line.</p>

<blockquote>
  <p>Would you need as many outside lines as inside lines?</p>
</blockquote>

<p>There are various calculations (Erlang), depending on the business model, to determine the number of outside lines you should have based on the number of users. This is almost never close to one-to-one, but there are exceptions, depending on the type of business.</p>

<blockquote>
  <p>Do you just ask the telephone company to lease an entire prefix, or
  part of a prefix?</p>
</blockquote>

<p>Most telcos will assign/sell you one or more DID (Direct Inward Dial) range of numbers, and these can be much larger than the actual number of outside lines that you have. This can be an entire exchange (expensive), or a small range (e.g. 10 numbers).</p>

<hr>

<p><em>Seriously, and I mean this with respect, if you need to ask these questions, you should not be doing this; you should hire a professional to do this for you. This is very easy to get wrong, and your business is on the line (no pun intended).</em></p>
","33128"
"RADIUS VLAN Assignment with Cisco ISE","2583","","<p>I am trying to install Cisco ISE 2.1 to be used as a RADIUS server with 802.1x on my switches. I want to dynamically assign a VLAN based to a user who connects on the switch port.</p>

<p>The problem is that, although my end client is authenticated and authorized by ISE, the VLAN id never gets received on the switch from ISE.</p>

<p>On ISE, I see my end user being authenticated with the correct policy, and authorized with the policy I created.</p>

<p><a href=""https://i.stack.imgur.com/NrSJt.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/NrSJt.png"" alt=""DOT1X config ISE""></a></p>

<p>As seen on this image, I want to assign VLAN 56. However, my port does not get this information and stays in the hardcoded VLAN.</p>

<p>What could be the issue here? </p>

<p>Could it be that RADIUS options 064,065,081 are not forwarded from the ISE to the switch? I have a firewall between them.</p>

<p>Here is the configuration for dot1x on my switch :</p>

<pre><code>aaa new-model
aaa group server tacacs+ ServISE
 server-private X.X.X.X key XXXXX
aaa authentication login default local
aaa authentication login CON none
aaa authentication login VTY group ServISE local
aaa authentication dot1x default group radius local
aaa authorization console
aaa authorization exec CON none
aaa authorization exec VTY group ServISE local if-authenticated
aaa authorization network default group radius

radius-server host X.X.X.X auth-port 1645 acct-port 1646 key 7 XXXX


interface FastEthernet0/10
 switchport access vlan 88
 switchport mode access
 switchport voice vlan 372
 authentication event fail action next-method
 authentication event server dead action authorize vlan 56
 authentication event server alive action reinitialize
 authentication host-mode multi-auth
 authentication port-control auto
 authentication violation restrict
 dot1x pae authenticator
 spanning-tree portfast
</code></pre>

<p>And here is an output when the end user is authenticated through dot1x : </p>

<pre><code> Dot1x Info for FastEthernet0/10
 -----------------------------------
 PAE                       = AUTHENTICATOR
 PortControl               = AUTO
 ControlDirection          = Both
 HostMode                  = MULTI_AUTH
 QuietPeriod               = 60
 ServerTimeout             = 0
 SuppTimeout               = 30
 ReAuthMax                 = 2
 MaxReq                    = 2
 TxPeriod                  = 30

 Dot1x Authenticator Client List
 -------------------------------
 Supplicant                = 34e6.d735.483c
 Session ID                = 84A8A830000000254EE2CCAB
     Auth SM State         = AUTHENTICATED
     Auth BEND SM State    = IDLE
 Port Status               = AUTHORIZED
</code></pre>

<p>Here is the output of a debug dot1x all </p>

<pre><code>275: Jun 16 18:30:40.370: dot1x-ev(Fa0/10): dot1x_exec_reauth_interface: Reauthenticating Authenticator instances
276: Jun 16 18:30:40.370: dot1x-sm(Fa0/10): Posting REAUTHENTICATE on Client 0xF5000034
277: Jun 16 18:30:40.370:     dot1x_auth Fa0/10: during state auth_authenticated, got event 17(reAuthenticate)
278: Jun 16 18:30:40.370: @@@ dot1x_auth Fa0/10: auth_authenticated -&gt; auth_restart
279: Jun 16 18:30:40.370: dot1x-sm(Fa0/10): 0xF5000034:auth_authenticated_exit called
280  Jun 16 18:30:40.370: dot1x-sm(Fa0/10): 0xF5000034:auth_restart_enter called
281: Jun 16 18:30:40.370: dot1x-ev(Fa0/10): Sending create new context event to EAP for 0xF5000034 (34e6.d735.483c)
282: Jun 16 18:30:40.370: dot1x-sm(Fa0/10): 0xF5000034:auth_authenticated_restart_action called
283: Jun 16 18:30:40.370: dot1x-sm(Fa0/10): Posting !EAP_RESTART on Client 0xF5000034
284: Jun 16 18:30:40.370:     dot1x_auth Fa0/10: during state auth_restart, got event 6(no_eapRestart)
285: Jun 16 18:30:40.370: @@@ dot1x_auth Fa0/10: auth_restart -&gt; auth_connecting
286: Jun 16 18:30:40.370: dot1x-sm(Fa0/10): 0xF5000034:auth_connecting_enter called
287: Jun 16 18:30:40.370: dot1x-sm(Fa0/10): 0xF5000034:auth_restart_connecting_action called
288: Jun 16 18:30:40.370: dot1x-sm(Fa0/10): Posting RX_REQ on Client 0xF5000034
289: Jun 16 18:30:40.370:     dot1x_auth Fa0/10: during state auth_connecting, got event 10(eapReq_no_reAuthMax)
290: Jun 16 18:30:40.370: @@@ dot1x_auth Fa0/10: auth_connecting -&gt; auth_authenticating
291: Jun 16 18:30:40.370: dot1x-sm(Fa0/10): 0xF5000034:auth_authenticating_enter called
292: Jun 16 18:30:40.370: dot1x-sm(Fa0/10): 0xF5000034:auth_connecting_authenticating_action called
293: Jun 16 18:30:40.370: dot1x-sm(Fa0/10): Posting AUTH_START for 0xF5000034
294: Jun 16 18:30:40.370:     dot1x_auth_bend Fa0/10: during state auth_bend_idle, got event 4(eapReq_authStart)
295: Jun 16 18:30:40.370: @@@ dot1x_auth_bend Fa0/10: auth_bend_idle -&gt; auth_bend_request
296: Jun 16 18:30:40.370: dot1x-sm(Fa0/10): 0xF5000034:auth_bend_request_enter called
297: Jun 16 18:30:40.370: dot1x-packet(Fa0/10): EAP code: 0x1  id: 0x4E length: 0x0005 type: 0x1  data:
298: Jun 16 18:30:40.370: dot1x-ev(Fa0/10): Sending EAPOL packet to 34e6.d735.483c
299: Jun 16 18:30:40.370: dot1x-ev(Fa0/10): Role determination not required
300: Jun 16 18:30:40.370: dot1x-registry:registry:dot1x_ether_macaddr called
301: Jun 16 18:30:40.370: dot1x-ev(Fa0/10): Sending out EAPOL packet
302: Jun 16 18:30:40.370: EAPOL pak dump Tx
303: Jun 16 18:30:40.370: EAPOL Version: 0x2  type: 0x0  length: 0x0005
304: Jun 16 18:30:40.370: EAP code: 0x1  id: 0x4E length: 0x0005 type: 0x1
305: Jun 16 18:30:40.370: dot1x-packet(Fa0/10): EAPOL packet sent to client 0xF5000034 (34e6.d735.483c)
306: Jun 16 18:30:40.370: dot1x-sm(Fa0/10): 0xF5000034:auth_bend_idle_request_action called
307: Jun 16 18:30:40.378: dot1x-ev(Fa0/10): Role determination not required
308: Jun 16 18:30:40.378: dot1x-packet(Fa0/10): Queuing an EAPOL pkt on Authenticator Q
309: Jun 16 18:30:40.378: dot1x-ev:Enqueued the eapol packet to the global authenticator queue
310: Jun 16 18:30:40.378: EAPOL pak dump rx
311: Jun 16 18:30:40.378: EAPOL Version: 0x1  type: 0x0  length: 0x0020
312: Jun 16 18:30:40.378: dot1x-ev:dot1x_auth_queue_event: Int Fa0/10 CODE= 2,TYPE= 1,LEN= 32
313: Jun 16 18:30:40.378: dot1x-packet(Fa0/10): Received an EAPOL frame
314: Jun 16 18:30:40.378: dot1x-ev(Fa0/10): Received pkt saddr =34e6.d735.483c , daddr = 0180.c200.0003, pae-ether-type = 888e.0100.0020
315: Jun 16 18:30:40.378: dot1x-packet(Fa0/10): Received an EAP packet
316: Jun 16 18:30:40.378: EAPOL pak dump rx
317: Jun 16 18:30:40.378: EAPOL Version: 0x1  type: 0x0  length: 0x0020
318: Jun 16 18:30:40.378: dot1x-packet(Fa0/10): Received an EAP packet from 34e6.d735.483c
319: Jun 16 18:30:40.378: dot1x-sm(Fa0/10): Posting EAPOL_EAP for 0xF5000034
320: Jun 16 18:30:40.378:     dot1x_auth_bend Fa0/10: during state auth_bend_request, got event 6(eapolEap)
321: Jun 16 18:30:40.378: @@@ dot1x_auth_bend Fa0/10: auth_bend_request -&gt; auth_bend_response
322: Jun 16 18:30:40.378: dot1x-sm(Fa0/10): 0xF5000034:auth_bend_response_enter called
323: Jun 16 18:30:40.378: dot1x-ev(Fa0/10): dot1x_sendRespToServer: Response sent to the server from 0xF5000034 (34e6.d735.483c)
324: Jun 16 18:30:40.378: dot1x-sm(Fa0/10): 0xF5000034:auth_bend_request_response_action called
325: Jun 16 18:30:40.395: dot1x-sm(Fa0/10): Posting EAP_REQ for 0xF5000034
326: Jun 16 18:30:40.395:     dot1x_auth_bend Fa0/10: during state auth_bend_response, got event 7(eapReq)
327: Jun 16 18:30:40.395: @@@ dot1x_auth_bend Fa0/10: auth_bend_response -&gt; auth_bend_request
328: Jun 16 18:30:40.395: dot1x-sm(Fa0/10): 0xF5000034:auth_bend_response_exit called
329: Jun 16 18:30:40.395: dot1x-sm(Fa0/10): 0xF5000034:auth_bend_request_enter called
330: Jun 16 18:30:40.395: dot1x-packet(Fa0/10): EAP code: 0x1  id: 0x2B length: 0x0006 type: 0xD  data:
331: Jun 16 18:30:40.395: dot1x-ev(Fa0/10): Sending EAPOL packet to 34e6.d735.483c
332: Jun 16 18:30:40.395: dot1x-ev(Fa0/10): Role determination not required
333: Jun 16 18:30:40.395: dot1x-registry:registry:dot1x_ether_macaddr called
334: Jun 16 18:30:40.395: dot1x-ev(Fa0/10): Sending out EAPOL packet
335: Jun 16 18:30:40.395: EAPOL pak dump Tx
336: Jun 16 18:30:40.395: EAPOL Version: 0x2  type:0x0  length: 0x0006
337: Jun 16 18:30:40.395: EAP code: 0x1  id: 0x2B length: 0x0006 type: 0xD
338: Jun 16 18:30:40.395: dot1x-packet(Fa0/10): EAPOL packet sent to client 0xF5000034 (34e6.d735.483c)
339: Jun 16 18:30:40.395: dot1x-sm(Fa0/10): 0xF5000034:auth_bend_response_request_action called
340: Jun 16 18:30:40.404: dot1x-ev(Fa0/10): Role determination not required
341: Jun 16 18:30:40.404: dot1x-packet(Fa0/10): Queuing an EAPOL pkt on Authenticator Q
342: Jun 16 18:30:40.404: dot1x-ev:Enqueued the eapol packet to the global authenticator queue
343: Jun 16 18:30:40.404: EAPOL pak dump rx
344: Jun 16 18:30:40.404: EAPOL Version: 0x1  type: 0x0  length: 0x0006
345: Jun 16 18:30:40.404: dot1x-ev:dot1x_auth_queue_event: Int Fa0/10 CODE= 2,TYPE= 3,LEN= 6
</code></pre>

<p>Here is the output for ""debug radius authentication""</p>

<pre><code>685: Jun 17 09:06:23.838: RADIUS/ENCODE(000004D5):Orig. component type = DOT1X
686: Jun 17 09:06:23.838: RADIUS(000004D5): Config NAS IP: 0.0.0.0
687: Jun 17 09:06:23.838: RADIUS/ENCODE(000004D5): acct_session_id: 1237
688: Jun 17 09:06:23.838: RADIUS(000004D5): sending
689: Jun 17 09:06:23.838: RADIUS/ENCODE: Best Local IP-Address 1.1.1.1 for Radius-Server X.X.X.X
690: Jun 17 09:06:23.838: RADIUS(000004D5): Send Access-Request to X.X.X.X:1645 id 1645/16, len 236
691: Jun 17 09:06:23.838: RADIUS:  authenticator C8 97 74 7C 01 99 CE 9E - 11 D2 87 96 10 15 A4 43
692: Jun 17 09:06:23.838: RADIUS:  User-Name           [1]   29  ""host/MyComputer.testdomain.com""
693: Jun 17 09:06:23.838: RADIUS:  Service-Type        [6]   6   Framed                    [2]
694: Jun 17 09:06:23.838: RADIUS:  Framed-MTU          [12]  6   1500
695: Jun 17 09:06:23.838: RADIUS:  Called-Station-Id   [30]  19  ""C8-F9-F9-C9-45-0C""
696: Jun 17 09:06:23.838: RADIUS:  Calling-Station-Id  [31]  19  ""34-E6-D7-35-48-3C""
697: Jun 17 09:06:23.838: RADIUS:  EAP-Message         [79]  34
698: Jun 17 09:06:23.838: RADIUS:   02 85 00 20 01 68 6F 73 74 2F 47 52 45 30 34 37 39 34 37 2E  [ host/MyComputer.]
699: Jun 17 09:06:23.838: RADIUS:   69 6E 74 72 61 2E 63 65 61 2E 66 72      [ testdomain.com]
700: Jun 17 09:06:23.838: RADIUS:  Message-Authenticato[80]  18
701: Jun 17 09:06:23.838: RADIUS:   02 09 C8 4B FC 82 96 B9 61 8A 24 F6 81 4A 0B C2[ Ka$J]
702: Jun 17 09:06:23.846: RADIUS:  Vendor, Cisco       [26]  49
703: Jun 17 09:06:23.846: RADIUS:   Cisco AVpair       [1]   43  ""audit-session-id=84A8A830000000254EE2CCAB""
704: Jun 17 09:06:23.846: RADIUS:  NAS-Port-Type       [61]  6   Ethernet                  [15]
705: Jun 17 09:06:23.846: RADIUS:  NAS-Port            [5]   6   5    0
706: Jun 17 09:06:23.846: RADIUS:  NAS-Port-Id         [87]  18  ""FastEthernet0/10""
707: Jun 17 09:06:23.846: RADIUS:  NAS-IP-Address      [4]   6   1.1.1.1
708: Jun 17 09:06:23.846: RADIUS: Received from id 1645/16 X.X.X.X:1645, Access-Challenge, len 127
709: Jun 17 09:06:23.846: RADIUS:  authenticator 71 6A C0 FC 82 FE 8A 64 - 22 FA 09 EE 44 33 5A ED
710: Jun 17 09:06:23.846: RADIUS:  State               [24]  81
711: Jun 17 09:06:23.846: RADIUS:   33 37 43 50 4D 53 65 73 73 69 6F 6E 49 44 3D 38  [37CPMSessionID=8]
712: Jun 17 09:06:23.855: RADIUS:   34 41 38 41 38 33 30 30 30 30 30 30 30 32 35 34  [4A8A830000000254]
713: Jun 17 09:06:23.855: RADIUS:   45 45 32 43 43 41 42 3B 33 36 53 65 73 73 69 6F  [EE2CCAB;36Sessio]
714: Jun 17 09:06:23.855: RADIUS:   6E 49 44 3D 67 72 65 78 70 33 31 32 61 64 6D 2F  [nID=MyComputer/]
715: Jun 17 09:06:23.855: RADIUS:   32 35 34 38 33 38 36 35 35 2F 31 38 37 35 3B   [ 254838655/1875;]
716: Jun 17 09:06:23.855: RADIUS:  EAP-Message         [79]  8
717: Jun 17 09:06:23.855: RADIUS:   01 44 00 06 0D 20[ D ]
718: Jun 17 09:06:23.855: RADIUS:  Message-Authenticato[80]  18
719: Jun 17 09:06:23.855: RADIUS:   AF 6F 4C 96 0A 75 CE 3D 4B 4C 7D ED E9 A9 94 48          [ oLu=KL}H]
720: Jun 17 09:06:23.855: RADIUS(000004D5): Received from id 1645/16
721: Jun 17 09:06:23.855: RADIUS/DECODE: EAP-Message fragments, 6, total 6 bytes
</code></pre>
","<p>For those still interested in this issue, I had to upgrade the IOS to 12.2(55)SE10. Now it's working with the initial configuration.</p>
","33508"
"Checklist for replacing failed ASA hardware","2581","","<p>I have a failing Cisco ASA that is being replaced under a support contract. It is a single-point-of-failure in production at a branch office that can tolerate downtime.  I will physically replace the device at that site myself.  Prior to the hardware failure the configuration was just fine.  My goal is to get back to the working state prior to the hardware failure.  </p>

<p>While I have worked a fair amount with ASAs I have never had to perform a hardware replacement so this is new territory for me.  What I am looking for is a checklist, runbook, or procedure to serve the following purpose:</p>

<ul>
<li>help to ensure I don't miss some critical configuration step</li>
<li>help to avoid some critical configuration error</li>
<li>aid in advance preparation to reduce the downtime while the hardware swap takes place</li>
<li>provide some advance insight into how long this is likely to take</li>
</ul>

<p>Off the top of my head the following things that I ought to consider come to mind:</p>

<ul>
<li>document cable connections</li>
<li>export the current <code>running-config</code></li>
<li>document the old ASA's firmware version</li>
<li>change the new ASA's firmware to the same version as the old one</li>
<li>Do admin passwords need to be set separately from the config?</li>
<li>Where are VPN user passwords stored?</li>
<li>What about certificates?</li>
</ul>

<p>Things start to get pretty vague near the bottom of that list.  I also feel like I might be missing some important items entirely.</p>

<p>What are all the things that need to be done when replacing failed Cisco ASA hardware?</p>
","<p><em>I opted to use the Cisco support methods of swapping out my ASA.  You might also consider <a href=""https://networkengineering.stackexchange.com/a/20375/2662"">Ricky Beam's suggestion to swap CF cards</a> which is <a href=""https://networkengineering.stackexchange.com/questions/20366/checklist-for-replacing-failed-asa-hardware#comment30902_20375"">unsupported by Cisco</a></em></p>

<hr>

<p>I just finished the swap and definitely have much more clarity about what needs to happen to gracefully swap an ASA5505.  There will be, of course, site-specific considerations, but I have tried to mention anything that probably applies in general.</p>

<h3>Setup and Pre-Configuration</h3>

<p>These tasks can all be done before taking the old ASA out of service.</p>

<ul>
<li><strong>Find a Second ASA Power Supply</strong> - AFAICT Cisco doesn't send you a second power supply to help you to replace failing hardware.  If your ASA needs an external power supply and you only have one, you're going to have to take down the old ASA while you configure the new one.  This creates a lot more downtime than is necessary.</li>
<li><strong>Document Cable Connections</strong> - You are going to be ripping and replacing-with-same. There is also the the possibility of reverting back to the original ASA if the replacement is DOA.  There is also a likelihood that you'll need to perform partial connections as you get the replacement ASA up and running so you need a pretty clear way of matching cables to ports on both the old and new ASA.</li>
<li><strong>Diff <code>show activation-key detail</code></strong> - Connect to the console of the new ASA and dump <code>show activation-key detail</code> to a file.  Do the same on the old ASA.  Diff the two files and see what stands out.  The replacement ASA I received was activated to the wrong license and there was a wait to get new activation keys.</li>
<li><strong>Download Binaries from Cisco.com and old ASA</strong> - Download same-version binaries for the firmware and ASDM from both cisco.com and the old ASA.  Compare checksums of the old and new binaries of each.  If the cause of the problems was file corruption, the checksums won't match which might provide a clue.</li>
<li><strong>Save Output of Various Commands from old ASA</strong> - There are a number of items that are necessary or might come in handy that can only be obtained from the old ASA.  I recommend running and saving the output of the following commands:

<ul>
<li><code>show version</code></li>
<li><code>show activation-key detail</code></li>
<li><code>show asdm image</code></li>
<li><code>show running-config</code></li>
</ul></li>
<li><strong>Confirm Workstation/ASA Connectivity</strong> - You're almost certainly going to need both console and SSH access to set up the new ASA.  You might as well ensure that those connections are working with the old ASA prior to replacing it with the new ASA.</li>
<li><strong>Set up a workstation with an independent network connection</strong> - There's a good chance you'll need to be connected via SSH to the new unconfigured ASA at the same time you need google.  Accordingly, you need a connection to the internet that doesn't depend on troubled ASA.</li>
<li><strong>Load the new ASA with the right Binaries</strong> - I think there are a few ways of accomplishing this.  I used the console of the new ASA to alter its running configuration just enough to enable TFTP of the appropriate firmware and ASDM binaries to the new ASA's flash.</li>
<li><strong>Change the new ASA's Firmware Version</strong> - Use the console to issue <code>boot system</code>, <code>wr mem</code>, and <code>reload</code> commands to switch the firmware version to the same as the old ASA</li>
<li><strong>Change the new ASA's ASDM Image</strong> - Use the console to issue <code>asdm image</code> and <code>wr mem</code> commands to change the asdm image to the same as the old ASA.</li>
<li><strong>Apply and Iterate on Running Config</strong> - I determined that it took some iteration to get the new ASA to accept all aspects of the old ASA's running-config.  Here are the steps to that iteration:

<ol>
<li>Paste the old ASA's running configuration into the console of the new ASA.</li>
<li>Save the output of <code>show running-config</code> to a file.</li>
<li>Diff that file with the configuration of the old ASA so you can see what is different.</li>
<li>Issue corrective commands to try to correct the differences.  Go back to step 2 and repeat until the old and new running configurations are the same.</li>
</ol></li>
<li><strong>Generate New Crypto Keys</strong> - Use the console to issue a <code>crypto key generate rsa</code> command.  Without issuing that command, you cannot connect to the ASA over SSH.</li>
</ul>

<h3>Rip and Replace</h3>

<p>Once <em>all</em> the setup and configuration tasks are done, it should just be a matter of swapping hardware.  This should take only minutes.</p>

<ul>
<li>remove the old ASA</li>
<li>transfer any brackets and modules to the new ASA</li>
<li>mount the new ASA</li>
<li>connect all cables except power to the new ASA (you should connect the console port to a terminal so you can watch the boot)</li>
<li>connect power to the new ASA</li>
<li>monitor the boot sequence for success</li>
</ul>

<h3>Post-Replacement Tests</h3>

<p>At this point, at least basic connectivity should be working on the ASA.  To prove the different aspects of workingness, do at least the following:</p>

<ul>
<li>from the console, ping the following:

<ul>
<li>8.8.8.8</li>
<li>the management workstation that will be connecting over SSH</li>
<li>any other node that will help you test that the new hardware is working as desired</li>
</ul></li>
<li>connect over SSH to the new ASA</li>
<li>connect using ASDM to the new ASA</li>
<li>test any VPN connections</li>
</ul>
","20978"
"Subnetting a subnet - VLSM","2575","","<p>This is from a fake test before the real exam. It's a course which goes through Cisco academy - a course in networking. </p>

<blockquote>
  <ol>
  <li>Use the address space 10.10.16.0/24 to design an addressing scheme.
  a) Split the address space into two equal-sized networks by subnetting it again.</li>
  </ol>
</blockquote>

<p>I consider the question a bit unclear, for instance ""subnetting it again"". I guess they mean VLSM?</p>

<p>I have really tried to subnetting with VLSM this packettracer network but I always fail. </p>

<p>It's a network 10.10.16.0/24 that is to be subnetted effectively into two equal networks, that is not wasting any addresses. (VLSM). There are one router that is to be configured with the new parameters which should be applied to the router interface g0/0 and g0/1. There are two switches and two computers. See the image.</p>

<p><img src=""https://i.stack.imgur.com/mq1Ah.jpg"" alt=""enter image description here""></p>

<p>I have tried to first borrow 3 bits from 10.10.16.0/24 taking the new network 10.10.16.32 and subnetting that again taking two bits so I lastly get a 10.10.16.40/29 network.</p>

<p>This is now I got network 1 and I calculated network 2 to 10.10.16.48/29.</p>

<p>So - then packettracer wants me to take the first and last hostaddress for the router interface and the pc-computer.  I did so, and yes, the PC:s can ping the default gateway and each other. But I fail completely according to the answer. </p>
","<p>Subnetting will always be a ""2n"" bit-wise operation. Subnets fall on specific bit boundaries, no matter what. You can't subnet on arbitrary boundaries or addresses. Just think, ""always equal proportions."" Not any different than cutting a pie into equal proportions.</p>

<p>I always use a /24 as a ""base"" to start from. Again, this is a 2n (ie multiply or divide by 2) operation, so you go from a single subnet, to two halves, or four quarters, or eighths, sixteenths, etc.</p>

<p>If you split a /24 into two halves, each one of those halves will be a /25 subnet.</p>

<p>If you split a /24 into four quarters, each one of those quarters is a /26 subnet.</p>

<p>If you split a /24 into eighths, each eighth is a /27 subnet.</p>

<p>The converse is true when going in the opposite direction.</p>

<p>If you combine two /24's into a single subnet, you end up with a /23.</p>

<p>If you combine four /24's into a single subnet, you end up with a /22.</p>

<p>If you combine eight /24's into a single subnet, you end up with a /21.</p>

<p>To answer your question, if you split 10.10.16.0/24 into two equal-sized subnets, you end up with:</p>

<pre><code>1. 10.10.16.0/25
2. 10.10.16.128/25
</code></pre>

<p>The first and last usable from each subnet would be:</p>

<pre><code>1. 10.10.16.1/25 and 10.10.16.126/25
2. 10.10.16.129/25 and 10.10.16.254/25
</code></pre>

<p>Hope this helps.</p>
","13366"
"How does Cisco perform authentication server reachability on aaa?","2575","","<p>Let's suppose we have a line like this:</p>

<pre><code>aaa authentication login default group radius group tacacs+ local 
</code></pre>

<p>According to the <a href=""http://www.cisco.com/c/en/us/td/docs/ios/12_2/security/configuration/guide/fsecur_c/scfathen.html#wp1000924"">IOS 12.2 documentation</a>:</p>

<blockquote>
  <p>If R1 authenticates the user, it issues a PASS response to the network access server and the user is allowed to access the network. If R1 returns a FAIL response, the user is denied access and the session is terminated. <strong>If R1 does not respond</strong>, then the network access server processes that as an <strong>ERROR</strong> and queries R2 for authentication information</p>
  
  <p>It is important to remember that a FAIL response is significantly different from an ERROR. A FAIL means that the user has not met the criteria contained in the applicable authentication database to be successfully authenticated. Authentication ends with a FAIL response. An ERROR means that the security server has not responded to an authentication query. Because of this, no authentication has been attempted. Only when an ERROR is detected will AAA select the next authentication method defined in the authentication method list. </p>
</blockquote>

<p>My question is: How does a Cisco device exactly perform the check on an authentication server? Is it possible to modify/extend this method?</p>

<p>The motivation behind this question is to ensure that the reachability creteria meet some specific L7 methods rather than L3/L4.</p>
","<p>The router sends the initial request, and simply waits for a well-formed answer from the Radius/TACACS server.  There are no active ""keepalive"" style health checks; the router doesn't ping the server and look at response-times or anything like that.</p>

<p>What the router does next, depends on your configured criteria.  In general, once the timeout expires (default is 5 seconds), or if a malformed response is received, the router will try the secondary server or fail down to the next configured authentication method.</p>

<p>Radius, unlike TACACS, can also mark a server as ""dead"" and cease to try authentications against it for a preconfigured amount of time.</p>

<p>See the following settings to tweak this behavior:</p>

<p><strong>Timeout Configuration:</strong></p>

<pre><code>TEST-1861(config)#tacacs-server timeout ?
  &lt;1-1000&gt;  Wait time (default 5 seconds)

TEST-1861(config)#radius-server timeout ?
  &lt;1-1000&gt;  Wait time (default 5 seconds)
</code></pre>

<p><strong>Radius Dead-timer configuration:</strong></p>

<pre><code>TEST-1861(config)#radius-server deadtime ?
  &lt;1-1440&gt;  time in minutes

TEST-1861(config)#radius-server dead-criteria ?
  time   The time during which no properly formed 
         response must be recieved from the RADIUS server
  tries  The number of times the router must fail 
         to receive a response from the radius server
         to mark it as dead

TEST-1861(config)#radius-server dead-criteria time ?
  &lt;1-120&gt;  Time in seconds during which no response must
  be received from the RADIUS server in order to consider it dead

TEST-1861(config)#radius-server dead-criteria tries ?
  &lt;1-100&gt;  Number of transmits to radius server without 
  responses before marking server as dead
</code></pre>
","6633"
"How to run redundant BGP via Quagga on /30 netblock?","2572","","<p>My new BGP upstream has allocated a IPv4 /30 netblock as the glue block for connecting our routers. I however want to run two routers, and failover between them. If the netblock was larger (/29), I could easily run BGP sessions from both of my routers, with or without VRRP (they could run VRRP too).</p>

<p>Is there a reasonable VRRP/keepalived failover configuration that I can implement without getting them to expand the glue block?</p>

<p>Both of my routers are running Linux (one Ubuntu, one Gentoo), with Quagga; the basic configuration works fine.</p>
","<p>You have multiple Linux solutions for first hop redundancy out of your LAN to the two routers (Quagga itself doesn't support VRRP but you can use Quagga in conjunction with any of these without any issues):</p>

<ul>
<li><a href=""http://www.keepalived.org/"" rel=""nofollow"">keepalived</a> (as you've already mentioned)</li>
<li><a href=""http://www.pureftpd.org/project/ucarp"" rel=""nofollow"">uCARP</a> - A Linux port of OpenBSD's CARP (Common Address Redundancy Protocol)</li>
<li><a href=""http://off.net/~jme/vrrpd/"" rel=""nofollow"">vrrpd</a> - A sparsely documented and largely untested VRRP daemon, but an option nonetheless</li>
</ul>

<p>Note that none of these have anything to do with BGP redundancy, which I believe is the real problem you're trying to solve. However, it should be quite possible to run VRRP on the provider side of your two Quagga hosts and configure the VRRP virtual IP as ""your side"" of your ISP-assigned /30 and use that to peer with your ISP. The failover time would likely be close to the same (if not just a hair faster than) the solution with Linux-HA below. With that said, I'd personally believe that the Linux-HA solution would be cleaner and simpler, but this also may depend on the topology.</p>

<p>As for your options with BGP, there is an <a href=""http://tools.ietf.org/html/draft-ietf-idr-bgp-multisession-07"" rel=""nofollow"">IETF draft for ""multisesssion BGP""</a> that introduces a new BGP capability code which aims to support multiple BGP sessions with the same peer over the same address, but this draft assumes that both of the sessions would be on the same device, however the draft is brand new and support for this is not likely to be in current revisions of Quagga.</p>

<p>One other option is to use <a href=""http://www.linux-ha.org/doc/users-guide/users-guide.html"" rel=""nofollow"">Linux-HA</a> to set up a heartbeat cluster between your two boxes, and configure it as such so that if the primary router fails, the heartbeat will recognize this and turn up Quagga/BGPd/etc on the standby router when that happens.</p>
","5356"
"Why do we need master/slave relationship to exchange DBD in OSPF?","2571","","<p>I am confused with master and slave relationship in OSPF? Why ospf need the election for master and slave relationship to exchange DBD?</p>
","<p>This is explained in <a href=""http://tools.ietf.org/html/rfc2328#page-103"" rel=""nofollow"">RFC 2328 - OSPF Version 2, Section 10.8</a></p>

<blockquote>
<pre><code>   Master
     Database Description packets are sent when either a) the slave acknowledges 
     the previous Database Description packet by echoing the DD sequence number 
     or b) RxmtInterval seconds elapse without an acknowledgment, in which case 
     the previous Database Description packet is retransmitted.

   Slave
     Database Description packets are sent only in response to Database 
     Description packets received from the master. If the Database Description 
     packet received from the master is new, a new Database Description packet 
     is sent, otherwise the previous Database Description packet is resent.
</code></pre>
</blockquote>

<p>In short, only one DBD sequence number can be unacknowledged at any given time.   The Master is in charge of ensuring that DBD sequence numbers are correctly acknowledged.  Two cooks in the kitchen doesn't work... one must have control over sequence numbers (the master) and one must acknowledge (the slave).</p>
","7271"
"Routing table in QNX","2568","","<p>I've an embedded system running on QNX 6.2.1.  (I'll call it QNX box.) The QNX box has two network adaptors. I've configured the driver, so they appear as en0 and en1. Here are their IP settings:</p>

<pre><code>en0: IP address 10.0.0.2, subnetmask 255.255.240.0 
en1: IP address 10.1.0.3, subnetmask 255.255.240.0
</code></pre>

<p>The en0 and en1 are connected to different PCs with IP address 10.0.0.1 and 10.1.0.4 respectively. I can ping en0 and en1 from the connected PCs. No problem.</p>

<p>Now I want to ping one PC from the other PC, so the traffic must pass through the QNX box. The QNX box must have a routing table.</p>

<p>Can anyone suggest how I should do this?</p>

<p>I've tried </p>

<pre><code>route add 10.0.0.1 -interface 10.0.0.2
route add 10.1.0.4 -interface 10.1.0.4 
</code></pre>

<p>... doesn't seem to work.</p>

<p>Any suggestion?</p>

<p>Thanks in advance.</p>

<p>I've added</p>

<pre><code>sysctl -w net.inet.ip.forwarding=1
</code></pre>

<p>the output is</p>

<pre><code>net.inet.ip.forwarding: 0 -&gt; 1
</code></pre>

<p>The output for <code>netstat -r</code> is</p>

<pre><code>Routing tables

Internet:
Destination        Gateway            Flags     Refs     Use    Mtu  Interface
default            link#2             UCS         0        0   1500  en0
10/20              link#2             UC          1        0   1500  en0
10.0.0.1           00:17:3f:cf:03:95  UHL         7      130   1500  en0
10.1/20            link#3             UC          1        0   1500  en1
10.1.0.4           2c:27:d7:26:fd:91  UHL         0        4   1500  en1
127.0.0.1          127.0.0.1          UH          0        0  33212  lo0
</code></pre>
","<p>According to <a href=""http://www.qnx.com/developers/docs/6.4.1/neutrino/utilities/s/sysctl.html"" rel=""nofollow"">documents</a> you need explicitly enable IP forwarding:</p>

<blockquote>
  <p>net.inet.ip.forwarding<br>
  Disable (0) or enable (1) IP forwarding. If this is enabled, the host acts as a router.</p>
</blockquote>

<p>That would be 'sysctl -w net.inet.ip.forwarding=1'</p>

<p>I don't have QNX to test, but I don't think you need to add any routes, as the connected interfaces already have network, i.e. route already exists.</p>

<p>But confirm with 'netstat -r'</p>
","1777"
"SonicWall tz 215 with three LAN and three WAN","2568","","<p>Due to some local needs, we need to have a maximum of 50 work stations per WAN. We would like to avoid having one SonicWall for each 50 PCs, as X0 is LAN and X1 is WAN. Is it possible to set X2 and X4 as LAN and X3, X5 as WAN?</p>

<p>The idea is to have something like this:</p>

<pre><code>                 LAN   WAN
PC  1 to 50    -&gt; X0 -&gt; X1     

PC 51 to 100   -&gt; X2 -&gt; X3     

PC 101 to 150  -&gt; X4 -&gt; X5
</code></pre>

<p>ALl PCs are in the same LAN and see each other, but each group is directed to its respective gateway (X0 ip, X2 ip, X4 IP) and then it goes to its respective WAN, as we need an external server to detect PCs coming from different external IPs.</p>

<p>Can it be done?</p>
","<p>Since you're doing static DHCP leases in the same subnet based on MAC I would recommend the following:</p>

<p>Use the X0 interface for your LAN and setup the DHCP server with the static leases.  To do this look under Network->DHCP Server and select 'Add Static' to set each lease.  Use X1, X2 and X3 as your WAN interfaces.  </p>

<p>Under Network->Address Objects setup 3 objects as ranges for the IPs you wish to group. Such as X.X.X.1 to X.X.X.51 as IP Group 1.  </p>

<p>Under Network->Routing setup static routes for outbound traffic for each range to use the desired gateway.  As an example:</p>

<p>SOURCE: IP Group 1 (address object for first IP group)
Destination:  All WAN IP
SERVICE: ANY
GATEWAY: X1 Default Gateway (This is the first ISP connection)
INTERFACE: X1
METRIC: 2
COMMENT: IP GROUP 1 TO ISP 1</p>

<p>I would also recommend checking 'Disable Route when the interface is disconnected' to allow for low-level failover if the interface gets unplugged.  </p>

<p>This will allow you to use 1 LAN interface to accomplish what you wanted to setup.</p>
","8037"
"Is Ethernet considered a reliable protocol?","2564","","<p>Ethernet uses a sliding window to resend lost frames (error correction). It uses a sequence number to account for unordered frames (error correction). It has a frame check sequence to discard corrupted frames (error detection). Does this makes it ""reliable""?</p>
","<p>Not even remotely. There are no mechanisms for signaling a dropped frame (or why it was dropped -- CRC error, too small (""runt""), too big, no buffer space), thus there is no means to know what needs to be resent. There are no sequence numbers in ethernet frames -- the payload may contain one.</p>

<p>The only time <em>ethernet</em> will resend a frame is when the transmitter knows a collision occurred. But with 99.99999% of gear being full duplex today, collisions never happen.</p>

<p>BTW, this is why iSCSI SANs use special switches with very large internal, per-port buffers. And why FCoE (fibre channel over ethernet) uses special hardware. Both require a reliable transport, and ethernet on it's own isn't.</p>
","10004"
"How can I apply an ACL to interface on a Layer 3 switch?","2559","","<p>I try to accept ACL on L3 switch inteface. I've created standard ACL via:</p>

<pre><code>SW-L3(config)#access-list 1 permit host 1.1.1.2
SW-L3(config)#access-list 1 permit host 1.1.1.3
</code></pre>

<p>Then i tried to execute this, but there's no such command:</p>

<pre><code>SW-L3(config)#int fa0/5
SW-L3(config-if)#ip access-group 
                 ^
% Invalid input detected at '^' marker.
</code></pre>

<p>(I use packet tracker 7 if it's important)</p>

<p>So, what i'm doing wrong? Is it possible to deal with ACL on L3 switches?</p>

<h2>#</h2>

<p>I'm stuck with ACL again. My scheme is:
<a href=""https://i.stack.imgur.com/bPkWE.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/bPkWE.png"" alt=""enter image description here""></a></p>

<p>L3 <code>sh run</code>:</p>

<pre><code>interface Vlan1
ip address 192.168.10.1 255.255.255.0
interface Vlan10
mac-address 00d0.bca6.0e03
no ip address
interface Vlan111
mac-address 00d0.bca6.0e01
ip address 1.1.1.1 255.255.255.0
interface Vlan222
mac-address 00d0.bca6.0e02
ip address 2.2.2.1 255.255.255.0
ip classless
ip flow-export version 9
access-list 1 permit host 2.2.2.2
</code></pre>

<p>I'd like to have access to server only from '2.2.2.2'. I have ACL :</p>

<pre><code>access-list 1 permit host 2.2.2.2
</code></pre>

<p>on int fa0/5 IN. But it doesn't work.
pkt file is <a href=""https://drive.google.com/open?id=0B10D5qhZfuIocUtieXVBTGhlamc"" rel=""nofollow noreferrer"">here</a></p>
","<p>By default, interfaces on Cicso L3 switches are layer 2, so you would have to apply the ACLto the SVI (VLAN interface).  In order to make the interface a layer 3 interface use the command </p>

<pre><code>no switchport
</code></pre>

<p>EDIT:
I can't tell which interface is Fa0/5, but I also notice you haven't applied the ACL to any interface.</p>

<p>if you want to use a standard ACL, you can apply ACL 1 on VLAN outbound:</p>

<pre><code>Interface VLAN 1
ip access-group 1 out
</code></pre>

<p>A better way is to use an extended ACL on the inbound interface:</p>

<pre><code>access-list 100 permit ip host 192.168.10.2  host 2.2.2.2
interface VLAN 1
ip access-group 100 in
</code></pre>
","35861"
"How do I set up secure remote access to my home lab network?","2554","","<p>My current setup is the following:</p>

<p>ATT ISP ---- ATT wireless router ---- cisco 890 wireless router</p>

<p>My cisco 890 is for internet and remote VPN access from home to my company, however, I don't have access/priv to modify or look at the running config of the router. I could however, connect to some of the ethernet port of the 890 for non-corporate traffic, which I'm allowed 1 or 2 ports for this access.</p>

<p>So I use the cisco router for corporate access mostly, but use the ATT wireless router for regular home use (for my wife actually).</p>

<p>I'm in the process of acquiring 4 cisco 3560 switches and setting up a server with GNS3 for CCIE R/S studying.</p>

<p>My goal is to set up a secure remote connection from the internet to my home server with GNS3, but not sure where to set up or terminate the connection, that is on the ATT or Cisco router or even on the server.</p>

<p>I've heard it can be done via port forwarding, but not recommended. Instead use SSH or VPN. I'm sure my IP from the ISP is via DHCP, so somehow I need to get it static or find other way to still work even if via dhcp.</p>

<p>Is it better to use SSH and terminate at the server?
If so, how would I handle this via the att/cisco routers as intermediary devices?</p>

<p>Or is it better to use VPN?
I guess I would need to terminate the VPN at the cisco router, but this assumes my company allows me to modify the config.
If so, how could I handle this from the ATT router as an intermediary device?</p>

<p>appreciate the help!</p>
","<p>I would pick up a cheap Cisco router/ASA/pix device and set it up with port forwarding/DMZ on the ATT router so all packets going to your public IP that aren't receiving traffic for connections like your wife, go to the router/ASA/pix. Then I would configure it as a remote VPN termination point.</p>

<p>An ASA5505 will probably set you back $200. But you might be able to find an 1800/2800 series router to work with for less. If you get an ISR like those, make sure it has the security IOS or you have a way to get the security or better IOS on it.</p>

<p>As you most likely have a dynamic public address, I would use something like no-ip.com or another dynamic DNS service to have a domain that points to your public IP and updates when it changes. This might be configurable on the ATT router or you may need to run software on a computer in the network.</p>

<p>This would allow secure access to your private network. Once on the VPN, you could connect to your lab equipment via SSH/HTTP/Console depending on how you setup the internal side.</p>

<p>EDIT: If you're already doing port forwarding/DMZ to your company router, then you would need to ask them to allow you to have a VPN termination point on it for your private network.</p>
","1765"
"ISR routers - difference between routed and switched ports","2553","","<p>On a Cisco ISR router - would you say there are any benefits from purchasing an HWIC or EHWIC to connect to the next set of switches within the branch network?</p>

<p>For instance. Lets say Gig0/0 and Gig0/1 are routed ports that come on a 2901. Is there really any difference from using Gig0/1 along with sub-interfaces to uplink to the switch versus using Gig1/0/1, from an EHWIC and defining VLAN interfaces then assigning them to the interface as a trunkport.</p>
","<p>I would use ESW card in router if I had small office that needs to have 5 users connected. Then I would have router and switch in same device instead of buying a separate 2960 or such.</p>

<p>The only benefit I see with using EHWIC card would be if you need to use LAN features like port security, private VLAN, DHCP snooping etc. However in the first case you mentioned you would use the router as pure router and leave switching features for a real switch.</p>

<p>So it boils down to if you want to have routing/switching in one device or multiple. The only real use case I see for it is small office that doesn't need 24-p switch. You would only need to manage one device as well.</p>
","1552"
"Should I increase the timeout value for UDP on our VPN router-device?","2551","","<p>We have a SonicWALL NSA 2400. We have numerous (100+) personnel in different offices in different physical locations that establish VPN sessions successfully every day. Some of these client computers are behind routers. One of these offices is reporting that, with four office computers, they sometimes cannot get some or all of their four VPN sessions to connect.</p>

<p>When I check our SonicWALL logs, I see that our NSA 2400 is receiving packets from their office router. Our NSA then tries to acknowledge these packets, but this results in a time-out message for the ack. (Unfortunately, I don't have the specific error messages.) </p>

<p>I checked our settings and our UDP timeout value for this connection (LAN->VPN) is 30 seconds. This seems low and I would like to increase this in an attempt to remedy the problem with the timeout ack messages, but I don't know what effect this will have on the rest of the connecting VPN sessions. Our TCP timeout value is 900 minutes, by the way, for reference. I suspect some previous administrator changed the TCP settings but forgot/ignored the UDP settings.</p>

<p>The NSA logs also have messages about UDP packets being dropped, as well, both incoming and outgoing. The messages are for various port numbers and services (DNS, IKE (Transversal), etc.), so changing the UDP settings might help in removing these messages.</p>

<p>My fear is that changing these settings will affect the existing VPN connections. However, the NSA has 512 MB of RAM and our peak connection usage has been around 6200 connections out of 32000 max. We run about 1500 connections on average.  </p>

<p>I have researched this on the web, but have only found general troubleshooting recommendations to ""increase the UDP timeout and see if that fixes it"". </p>

<p>So will increasing the UDP timeout to 300 seconds negatively affect the other existing VPN connections? It doesn't look like we are close to our connection limit.</p>
","<p>NAT Traversal is the standard solution for what you are describing.  Specifically, you need to verify the NAT Traversal keep alive setting.  Let me explain.</p>

<p>More than likely, you are using IPsec in ESP mode.  In a non-NAT traversal scenario, your data packets will look like this (after negotiation):</p>

<p><code>[Outer IP header][ESP Header][Encrypted/Authenticated Data][ESP Trailer]</code></p>

<p>The outer IP header will include the the Source/Destination IP of your VPN gateway device (your NSA 2400) and whatever WAN IP the remote office is using.</p>

<p>In your case, you have multiple clients sharing a single source IP -- which is a very common PAT configuration.  As such, the Remote router needs to re-write the source IP of each of your clients, as well as the source port.  If that router were to have encountered a packet like the one above (with no L4 header between the L3 header and the data), it would drop it claiming it is a malformed packet.</p>

<p>NAT Traversal inserts an additional L4 header in the packet.  So it would look like this:</p>

<p><code>[Outer IP header][NAT-T UDP 4500 header][ESP Header][Encrypted/Authenticated Data][ESP Trailer]</code></p>

<p>This header starts with UDP source and destination port 4500 (by default, this is configurable).  The destination port typically does not change (on route TO your VPN head end device).  The source port typically <em>does</em> get changed by the transient NAT device (in this case, the remote office router).</p>

<p>Now.  MOST Stateful Firewalls or Routers have a very low UDP connection time out.  UDP is, by nature, connection-less, so it is very common for UDP connection timeouts to be less than a minute.  Cisco ASA's are 30 seconds, if I recall (don't quote me, its from memory).  By comparison, TCP timeouts are inherently high, because usually the stateful device is looking for the RST or FINs to purge an entry from its connection table.  A TCP timeout is just a stop gap in case both ends of the communication exploded simultaneously and weren't able to send out a RST/FIN.  So a higher TCP timeout than UDP timeout is normal, and even suggested behavior.</p>

<p>With that said, we can describe what is probably going on with your issue...</p>

<p>If the first time a remote office client connects, and their NAT-T header's source port gets re-written to 2222, the VPN Head end device is going to expect all future communication for that particular VPN connection to arrive with a source port of 2222.  It will also encapsulate and send all return traffic back to the remote router's IP, with a destination port of 2222.  This will work just fine, so long as this particular NAT translation stays active in the remote router.</p>

<p>But <em>IF</em> the Remote Router purges its NAT translation table, the next packet sent from Client to Server will get a new UDP source, say 3333.  When that gets to the VPN Head end device, it will consider it a new ""connection"", and expect a full re-negotiation of IPsec (which from a security standpoint, is the right thing to do).</p>

<p>Additionally, <em>if</em> the Remote Router purges its NAT translation table, and the next packet sent is from Server to Client (aka, destined to port 2222), the Remote Router won't have any record of an outbound translation for that source port, so the packet will simply be dropped.  Remember, PAT is uni-directional.  </p>

<p>All that said.  Since its common and perfectly normal for VPN connections to go silent.  There is a function built into NAT Traversal called the ""NAT Traversal Keepalive"".  It is simply an empty packet that is sent every 10-15 seconds (differs by implementation) from Client to Server, and the sole purpose of this packet is to keep the NAT translation alive in transient NAT devices, like the remote Router.</p>

<p>So it sounds to me like you have your NAT Traversal Keepalive set to too high.  I would start by decreasing that one.  Because its a software change you can make on your Head End device, and should affect all your clients, without forcing you to replace hardware on the other end.</p>

<p>Lastly, to re-iterate what Ricky mentioned.  If any time out needs to be adjusted, it will be on the Remote router, not on the VPN Head end device.  </p>
","23188"
"Sonicwall blocking RDP to server 2012, but not server 2008","2548","","<p>I have recently added a dell sonicwall TZ 215 wireless-N to my network and have found that I can no longer RDP onto any of my windows 2012 servers. If I run a cable directly from my router to my machine I can connect, but not via the sonicwall. </p>

<p>I have 12 servers to test this issue on and the behaviour is very consistent... all server 2008 machines work, all server 2012 do not. </p>

<p>Thanks in advance.</p>
","<p>Just an idea: Is there some kind of protocol inspection for RDP enabled on the firewall? </p>

<p>If seen this with other vendors as well. Most (un)famous Cisco Pix and SMTP, but also CheckPoint with MS-SQL.</p>

<hr>

<p>The exact <a href=""https://networkengineering.stackexchange.com/questions/7397/sonicwall-blocking-rdp-to-server-2012-but-not-server-2008#comment12197_7397"">changes</a> Greg made were:</p>

<blockquote>
  <p>I have disabled the Local Appflow monitor. The setting can be found under Appflow > Flow Reporting > Settings Tab: I unchecked the following: Enable Real-Time Data Collection, Enable Aggregate AppFlow Report Data Collection, Enable AppFlow To Local Collector. I rebooted the firewall after these changes</p>
</blockquote>
","7403"
"How to configure OOB access via IP","2545","","<p>Single Cisco IOS device in a remote DC, I have an <a href=""/tags/oob"" title=""Out of Band"">OOB</a> connection delivered into the rack (length of Cat5e into my rack from another onsite providers rack, who have diverse routes from my own, in and out of the building) which is simply a L3 connection to the Internet, a /29 is delivered down it.</p>

<p>VTY access via Telnet or SSH is typically limited by an access list to on-net devices, with IPs local to the network/AS. This remote router is in a PoP with long-haul Ethernet circuits back to the core network. The OOB connection would be used in emergencies by off-net devices (such a broken link, dead IGP, etc), with connections coming from potentially any IP or Autonomous System around the world.</p>

<p>If we theorise that the device is configured as below, with the OOB interface configured with a public IP from the OOB connection provider;</p>

<pre><code>Interface Fa0/2
 Descriptioc OOB Connection
 ip address 5.5.5.1 255.255.255.248
!
line vty 0 4
 access-class 10
!
access-list 10 remark ACL-ON-NET-MANAGEMENT-IPS
access-list 10 permit 10.0.0.0 0.0.0.255
</code></pre>

<p>My question is essential two really;</p>

<p>How do I handle a scenario during which the devices has a L3 melt down, and it can't route traffic out of the PoP because IGP has collapsed or similar; the routing table has emptied its self now containing only locally connected routes. <strong>If I'm on holiday and connect to the OOB IP from some Hotel Wi-fi, traffic isn't going to have a route back to my remote IP</strong> if IGP has collapsed and the devices have lost their peers.</p>

<p>I could put the OOB interface Fa0/2 into a VRF and add a static 0/0 route via the OOB provider gateway address within the /29 they have assigned to me. I could change the vty statement to be:</p>

<pre><code> access-class 10 in vrf-also
</code></pre>

<p>To allow management access from the VRF interface, but this will clash with my ACL. I would need to add 0/0 to the ACL, removing the point in having the ACL. <strong>Can I keep the ACL as it is, but allow any IP to connect when connecting to the OOB interface specifically?</strong></p>

<p>Perhaps I can use a route-map some how to route any traffic that come in from the OOB interface back out via that gateway? Or don't use a VRF, and add a 0.0.0.0/0 route to the default table with metric 254, and add an ACL outbound on the OOB interface that only allows out traffic coming from TCP 22 from that interface's IP (so SSH management traffic). That way only management traffic would be allowed out? I'm lost for idea's here.</p>
","<p>Depending on the hardware you're talking about you should take different considerations. </p>

<p>For instance Cisco provides a dedicated set of port/RAM and flash for OOB access on SUP2T, so you would be able to access to your device even when RP hangs. OTOH, in some Juniper boxes, the management port is attached directly to the RE and so you should easily hang your router from there.</p>

<p>That said, I would recommend you to put a management CPE between your devices and your OOB internet access and set up a GRE tunnel between it and your central management server.</p>
","2541"
"Detecting 2G/3G/4G Devices","2544","","<p>There are one or two answers that come close to answering this question but they either fall short or go in straight at the deeper end.</p>

<p>Essentially, I am interested (for genuinely academic reasons!) in being able to record the number of active devices (cell phones, basically) in different locations in space/time. I absolutely DO NOT want to know what they are doing, who they are, or anything about the users, I just want to know a) how many phones in a given radius and b) if it helps, some sort of signal strength so I can normalise/measure how many devices are present in each locale.</p>

<p>1) Is this possible? I am half-decent with Linux, a rasp pi and a bit of Python... (factor that in)
2) What hardware is needed?
3) Any links to help me out on this topic?</p>

<p>I am not an infosec person at all, so this is a world I know little about... be kind :)</p>
","<p>You could use one of many IMSI catchers available out there, but that would be quite costly. If you want a more ""DIY"" approach, you better use a software defined radio card and write some code.</p>

<p>The <a href=""http://openbts.org/"" rel=""nofollow"">OpenBTS</a> project develops a software defined GSM base station, and their <a href=""http://openbts.org/hardware/"" rel=""nofollow"">hardware page</a> has some links to compatible SDR devices. Buy one and then go through their code to implement your own software defined IMSI catcher (publish the code if possible).</p>

<p>Modifying an ISP-provided femtocell device is possible in theory, however you'll need to spend ages on reverse-engineering how to talk to the GSM chip - there is no publicly-available documentation and the only thing you'll have to work with is the binary that handles the femtocell stuff.</p>
","18080"
"MacBook Air only uses 20MHz of a 40MHz 2.4GHz wifi channel","2541","","<p>My AP is set up to use a 40MHz channel:</p>

<p><a href=""http://kepfeltoltes.hu/140917/pic_www.kepfeltoltes.hu_.png"" rel=""nofollow noreferrer"">router http://kepfeltoltes.hu/140917/pic_www.kepfeltoltes.hu_.png</a></p>

<p>However, my macbook Air (2012 model) says that the connection is only 20mhz. I don't really know why, it should be 40MHz.</p>

<p>Any ideas?</p>
","<p>The reason for this is that while the standard allows the use of a 40Mhz channel on 2.4GHz, this makes for only a single non-overlapping channel.  As the instances where you can actually do this without negatively impacting surrounding 802.11 networks are incredibly rare, the industry best practices state that you should only use 20Mhz wide channels in 2.4GHz.</p>

<p>As such, many wireless client devices will be configured by default to only utilize a 20MHz wide channel on 2.4GHz.  While some drivers will allow you to adjust this setting, others will not.  On MacBooks, you generally can't tweak the driver settings for most hardware options.</p>
","11026"
"Is there any way to differentiate MAC address of an Access Point from that of a client?","2539","","<p>If I have got a list of MAC addresses, is there any possible way to differentiate MAC of an AP from that of a Client. I am asking whether there is any pattern of the characters in the MAC address by which we can identify it belongs to an Access Point? </p>
","<p>Short answer:  No.</p>

<p>Long answer:  You can narrow down your list to a few candidates.  The first 3 bytes of the MAC address is called the OUI (Organizationally Unique Identifier) and is assigned to manufacturers.  You can look up the manufacturer of a MAC address by using a tool like <a href=""http://www.wireshark.org/tools/oui-lookup.html"" rel=""nofollow"">http://www.wireshark.org/tools/oui-lookup.html</a></p>

<p>Based on the manufacturer, you can get a pretty good idea of who is who.  If the manufacturer is ""Cisco,"" odds are it's an AP.  If the mfr is ""Dell,"" it's probably a PC.  This isn't perfect, but as you collect more data, you will able to be more certain of your results.</p>
","5756"
"Quality of Service based on Layer 7 traffic","2538","","<p>How can one perform quality of service based on layer 7 traffic? How would you classify the traffic and actively monitor and respond (dynamically prioritizing traffic)? Are there any solutions which provide a kind of weather map?</p>
","<p>I think this depends heavily on the platform on which you want to accomplish this. For example, IOS uses NBAR to classify transit traffic, primarily for QoS and security mechanisms. But as far as I know, NBAR QoS configurations are entirely static.</p>

<p>For centralized monitoring, NetFlow is probably your best bet.</p>
","11"
"OSI model and physical location of the layers","2537","","<p>Hi Cisco student/newbie here!</p>

<p>I understand that data passes down through the OSI model and then at the physical layer is transported as bits across the networkcables. But I'm confused at exactly where the layers are happening (in the PC, in the router etc ?). Does the processes at layers 7-2 happen in a PC before the data goes out on the cables as per layer 1? That doesn't sound right, as I know switches operate at layer 2 and routers at layer 3. But then wouldn't the data have already needed to go out on the cables to get to the switch or router? Thanks :-)</p>
","<p><strong>tl;dr</strong> Many different devices can encounter multiple OSI levels.  Whichever end point is requesting something from a layer 7 protocol (like HTTP), will use all 7 layers before putting it on the wire.  Intermediate nodes, like routers and switches might only use up to the first 3 layers, firewalls or WAN accelerators can affect layer 4, load balancers do interesting things as well.</p>

<p>If you're interested in a more detailed answer, look below - I <em>tried(?)</em> to keep it fairly simple, and use a real world example.</p>

<p>For reference:</p>

<p><strong>OSI Model</strong></p>

<p><img src=""https://i.stack.imgur.com/JkC1I.png"" alt=""OSI Model""></p>

<p><em>Source: <a href=""http://www.tcpipguide.com/free/t_DataEncapsulationProtocolDataUnitsPDUsandServiceDa.htm"" rel=""nofollow noreferrer"">TCP/IP Guide</a></em></p>

<p>What layers encapsulate the data depends on what generates the data.  In general, de-encapsulation will only happen for what is relevant to the data's current place in the network (on a router, on a host, etc.)  </p>

<p>By this I mean, if I'm a router, I don't care that there is an HTTP request buried in this packet if all I'm trying to do is route traffic via Layer 3 - I will only strip off enough headers to get what I need, do my job, and move on to the next packet.</p>

<p>We all use the internet everyday in some way, so here's what a typical HTTP request will look like, taking the OSI model into account.  For simplicity's sake, we can assume the network is available and there aren't any problems.</p>

<ol>
<li>I type ""<a href=""http://google.com"" rel=""nofollow noreferrer"">http://google.com</a>"" into a browser, and hit enter.</li>
<li><strong>[Layer 7]</strong> Your PC/Server will generate an HTTP GET request to send toward your specified webserver, in this case we're talking about google.com.  So if you look above, we have that GET request, which is considered ""data"".  HTTP is a layer 7 protocol, we're going to add that header.  Because there is nothing else to do at this layer, lets pass it down to layer 6.</li>
<li><strong>[Layer 6]</strong> We can think of layer 6 as how the data should be formatted, for a website nothing is really going to happen here, but an administrator/developer/engineer could do something with this if they chose to.  Our PC/Server is still going to add a header on top of the layer 7 (HTTP) header, and send it down to layer 5.</li>
<li><strong>[Layer 5]</strong> At this point because our PC/Server knows we're trying to contact a webserver, we need to make this request in a format the application as a whole can understand, for this we use an Application Program Interface (API).  This is what manages the <strong>applications session</strong>, this is so the web server will know what ""stream"" the data is a part of.  Let's add our layer 5 header, and pass it down to Layer 4.</li>
<li><strong>[Layer 4]</strong> Network engineers care about all data, but this is where it starts to get very specific for us.  Layer 4 is our transport layer, this is where we decide <strong>how</strong> our data gets there, not the path, but how - i.e. TCP or UDP.  In this case, our PC/Server needs to establish a connection with the web server.  I'm going to skip over some things for simplicity, but this is where your typical TCP 3-way handshake would happen.  We encapsulate what we currently have in a TCP header, this contains things like source and destination port numbers, sequence and acknowledgment numbers, and TCP windowing information.  </li>
<li><strong>[Layer 3]</strong> Here's the other layer we as engineers really care about, the network layer.  This is where packets are addressed to their destinations, we need IP addresses to get to places on a network.  Our PC/Server will add its source and destination IP address.  Not only will the packets get to the right destination, but that endpoint will use our source IP address to send it back to us when it needs to send us data of any kind.  Now, something to note here is that even PCs/Servers can have multiple interfaces, so we need to send the data to the correct place.  Our PC/Server will have a routing table just like routers, typically if your a host of some kind, your packets will be routed to your default gateway in the hopes that it will know how to get the packet to its destination.  Lets add that IP header and hand it off to the data link layer.</li>
<li><strong>[Layer 2]</strong> Our PC/Server's network interface card (NIC), doesn't know how to speak IP on its own, so it uses media access control (MAC) addresses to move that data.  Your PC/Server is going to have ARP entries for each IP it can reach, so in this case its going to have an entry for your default gateway.  Your gateways IP address, will correlate to a destination MAC address.  So let's add our L2 header that destination MAC address, this header also contains our PC/Server NIC's MAC address as the source.  Now we have everything we need to put that data onto the wire as bits.</li>
<li><strong>[Layer 1]</strong> As you mentioned in your question, this is where the data flows over the wire, it's where we see the raw 1's and 0's.  Now there isn't a Layer 1 header per se, if you look at the diagram on layer 2 you'll see that.  The data that is up until now which has all of the headers from L7 down to L2, will be converted to those 1's and 0's.</li>
<li>Now we have bits on the wire, on it's way to your gateway router.  Up until this point, your PC/Server has done <strong>ALL</strong> of the work encapsulating the data that bound for google.com's web server.  </li>
</ol>

<p><img src=""https://i.stack.imgur.com/FwBF2.png"" alt=""OSI-at-L3""></p>

<ol start=""10"">
<li><strong>[Layer 1]</strong> Now your gateway router receives the 1's and 0's.  The NIC (interface) on the router gets that data and basically says ""I have no idea how to read this!"" and brings it up to layer 2 so it can read the data.  </li>
<li><strong>[Layer 2]</strong> The gateway router now inspects the L2 frame, it says ""okay cool you came from this MAC, neat.  I see your destination MAC was set to my MAC address, so I am allowed to keep doing the work.  It will de-encapsulate the L2 header so it can get a look at the IP header (layer 3).</li>
<li><strong>[Layer 3]</strong> Your gateway router is going to look at the source and destination IP address now.  It says ""Okay, you came from this source, cool.  Your destination is this IP address.  Hmm I don't own this IP address, but I know who does.""  It will lookup a route for the destination IP address (google.com) in its routing table and use that entry.</li>
<li>After all of this, the same general process repeats.  It will check what interface it needs to send the packet, use that interfaces MAC address, turn it to bits and send it.  The next router will do the same thing, and so on.  In general these packets will only be stripped back down to the layer 7 when it reach its final destination.  As I mentioned before, the routers only care about getting the packets to their destination, so it is only going to care about Layer 3, so it won't have a reason to look at anything else besides what it needs to in order to get to that information.  So it will see L1/L2/L3 information, but nothing else.</li>
<li>Eventually the data will hopefully get to the destination web-server and at that point the data will have its outer layers stripped all the way down to the HTTP header for the web server to read, and do whatever is necessary to process that request.</li>
</ol>

<p><strong>NOTE:</strong> It's fair to mention that other things can interfere with the typical behavior (firewalls, NAT/PAT, ACL's, etc.)  But it's best to have a very solid understanding of where all the encapsulation and de-encapsulation is taking place to understand how those affect the network and the traffic.</p>
","13371"
"Impact of removing VTP from a production network","2535","","<p>We are planning to remove VTP from a production network that has RPVST running. This is at the core (a pair of Cisco 3750s) and we are trying to weigh the impact it has on the production network. </p>

<p>In theory, this should not effect anything, the VLANs are already in the switches' VLAN database and they would continue humming along. </p>

<p>This following is quoted from the Cisco 3560 configuration guide.</p>

<blockquote>
  <p>Note: You can use the vtp mode transparent global configuration
  command to disable VTP on the switch and then to change its VLAN
  information without affecting the other switches in the VTP domain.</p>
</blockquote>

<p>I may have answered own question above but the real question really is:</p>

<p><strong>Has anyone done this configuration before to test the theory above?</strong></p>
","<p>In theory, you'll want to migrate the clients to transparent before you remove the server from the equation.  This makes absolute certain that things will continue to function without any gotchas.</p>

<p>In practice, it doesn't matter.  A server will just stop sending summary advertisements to the VTP domain and the clients will continue using the last seen revision.</p>

<p>We just went through this on one of our tiny, alternate networks.  Someone completely wiped out the VTP server and it went unnoticed for months before anyone looked.</p>
","13183"
"IPv6 DHCP Server vs Router","2534","","<p>I am setting up a testing environment for <strong>dualstack</strong>.</p>

<p>I currently have a server (Windows 2008 R2), 2 switches and a router installed and configured. The server is the Primary Domain Controller and it has the DHCP role installed. </p>

<p>I am using <strong>VLANs</strong> to separate the computers from each other. Now I am stuck on a problem and I can't seem to figure it out, so I really hope you guys can help me! </p>

<p>I created both <strong>IPv4</strong> and <strong>IPv6</strong> Scopes on the server. On the router I have my sub-interfaces for the use of the VLANs and IPv4 works fine.</p>

<p>I seem to be having a problem with IPv6. I gave my NIC a static IPv6 address, in this case <strong>2001:db8:a:1::10</strong>. I also created multiple scopes (to use the VLANs).</p>

<p>The configuration of two interfaces on my router is: 
<img src=""https://i.stack.imgur.com/iJWw0.png"" alt=""Configuration Router""></p>

<p>The IP's that are given to the computers who are connected on the default VLAN (DEFAULT) receive the IPv6 addresses from the DHCP server. But the ones that are connected with the other VLANs <strong>receive an IP address from the router without me creating a DHCP pool</strong> (NOTE: they receive an IP address in the range of the IP that I gave to the sub-interfaces).</p>

<p>I want this <strong>not</strong> to happen and make it that they get the IP addresses from the Scope on the DHCP server (and so they show up in the lease).</p>

<p>Any help would be <em>greatly appreciated</em>!</p>
","<p>IPv6 has more options for configuring addresses than IPv4. The process works as follows:</p>

<ol>
<li>A new client joins the network and sends a Router Solicitation (RS)</li>
<li>Each router (can be multiple) sends a Router Advertisement (RA)
<ul>
<li>This happens both on request (when receiving an RS) as well as periodically</li>
</ul></li>
<li>The RA contains a lot of information on how the network is run:
<ul>
<li>If the router sending the RA can be a default gateway, and for how long</li>
<li>Telling clients if there is a stateless (not giving out addresses, only providing extra information like DNS settings) DHCPv6 server on the network (the O=other flag)</li>
<li>Telling clients if there is a stateful (like in IPv4) DHCPv6 server on the network (the M=managed flag)</li>
<li>Telling clients about the prefixes in use on the network
<ul>
<li>For each prefix: tell the clients if they can auto-configure an address by themselves  (the A=autoconf flag)</li>
</ul></li>
<li>And possibly lots of other stuff</li>
</ul></li>
</ol>

<p>If you want to run a fully managed network where the DHCPv6 server manages all the addresses (and please think why you want this before choosing it, if you don't use the information in the DHCPv6 server then letting clients configure their own addresses is much easier) then the router has to turn off the A (autoconf) flag for every prefix it announces and turn on the M (managed) flag so that clients know that they are not allowed to choose their own addresses but that there is a DHCPv6 server available to help them.</p>

<p>This is how to do that on a Cisco router:</p>

<pre><code>; Go to the interface configuration
interface FastEthernet0/0
  ; Tell clients that auto configuration is not allowed
  ; This changes the default parameters.
  ; You have to specify the timers, so I use the standard values
  ipv6 nd prefix default 2592000 604800 no-autoconfig
  ;
  ; Tell the clients that there is a stateful DHCPv6 server available
  ipv6 nd managed-config-flag

; Repeat this for every (sub)interface where you want to force clients to use DHCPv6.
</code></pre>

<p>Also note: You need those RA packets. DHCPv6 only provides information, and optionally addresses. It does not provide a default gateway. That is done using RA. The idea here is that routers usually have better information on routing and gateways than DHCP servers, with the added benefit that you can have multiple routers on one subnet acting as default gateways with clients load balancing between them etc.</p>
","7159"
"Difference between ""show route forwarding-table"" and ""show pfe route ip"" in JUNOS?","2531","","<p>Am I correct that ""show pfe route ip"" extracts information from PFE and ""show route forwarding-table"" extracts information from routing-engine copy of forwarding table? So this means that in latter case there is no RE&lt;->PFE communication?</p>
","<p>Correct, a little review.</p>

<p>The Routing Engine(s) are the control plane, they build the routing table based on all of the information given to it by whatever protocols are configured, and it also builds the forwarding table.  The routing engine will then copy it's version of the forwarding table to the appropriate PFE'(s) (forwarding plane).</p>

<p>All in all, the RE has a copy of the routing table and the forwarding table, and all of the PFE's have their respective forwarding entries to be used to actually forward traffic.</p>

<ul>
<li><code>show route</code> - will display the routing table.</li>
<li><code>show route forwarding-table</code> - will show the routing engine's version
of the forwarding table</li>
<li><code>show pfe route ip</code> - will show the forwarding table/entries that are
actually installed in each PFE.</li>
</ul>

<blockquote>
  <p>So this means that in latter case there is no RE&lt;->PFE communication?</p>
</blockquote>

<p>Yes, but lets be clear.  In the case of <code>show pfe route ip</code>, the RE still has to communicate with the PFE to query their version of the forwarding table, but it will not query its own copy of the forwarding table.  </p>

<p>I'll be happy to update my answer if necessary.</p>
","22618"
"Why use PPPoE and not use IP directly?","2526","","<p>As far as I understand, PPPoE operates over ethernet, so for PPPoE to be usable you should already be able to send Ethernet frames to your ISP.</p>

<p>At that point, why use PPPoE at all? Why not just run IP directly over that Ethernet-like link, assign an IP via DHCP and be done with it?</p>
","<p>Another reason may be that PPPoE is a tunnelling protocol which is useful for security and hiding an ISPs infrastructure.  A tunnel is created between the end user CPE and ISP’s centralised BRAS.  The network in-between is hidden from the user and the user cannot interact with other users directly over the ISP’s distribution network until it reaches the BRAS where policy may be enforced.</p>

<p>This is also useful where the connection to an end user passes over another service provider’s network before it reaches the contracted ISP.  The tunnel can make it appear as though there is a direct connection to the contracted ISP.  For example, in the UK, BT are regulated by the government and must provide wholesale services to other ISPs.  An ISP will buy a DSL connection to an end user’s home from BT and BT will backhaul the connection to the ISP at a handover point.  The ISP then provides connectivity to the Internet, DNS, email etc.  The PPPoE tunnel hides all of this complexity from the user.  All they see is a single hop to their ISP. </p>
","34054"
"Cisco WLC External WebAuth Apparent Random Behavior","2524","","<p>On <strong>Cisco 5508</strong> v7.2.103.0, I have a couple of WLANs configured.  Call them ABC and XYZ for the sake of this question.  ABC uses 802.1X and gets a splash page redirect URL pushed down.
XYZ uses PSK and uses the WebAuth external config to push a login page redirect URL.
Both the splash and login pages are served under the same base (external web server) URL such as <a href=""http://webauth.example.com/splash.html"" rel=""nofollow"">http://webauth.example.com/splash.html</a> and /login.html.</p>

<pre><code>WLAN ABC - Splash-Page-Web-Redirect[WPA + WPA2][Auth(802.1X + CCKM)]
WLAN XYZ - Web-Passthrough[WPA2][Auth(PSK)]
</code></pre>

<blockquote>
  <p>I see what appears to be inconsistent behavior on when the redirect
  URLs show on devices, the webauth/NAC RUN state, and the ability to
  actually get Internet access (or not get it when I should).</p>
</blockquote>

<p>I understand the login page requires acceptance (no username required) before allowing traffic to pass and the WLC merely has to think the splash page was seen by the device (acceptance not necessary) for traffic to flow here.</p>

<p>I've seen <em>virtually all conditions possible</em>, but the cases where traffic flows don't always make sense.</p>

<ol>
<li>Splash or Login page redirect occurs when browsing to a non-secure, plain-text URL; webauth shows Authenticated with NAC state RUN, traffic flows.  This is what's expected to happen, but doesn't happen often.</li>
<li>Splash or Login page redirect does not occur when browsing to a non-secure, plain-text URL; webauth shows Authenticated with NAC state RUN, traffic flows (but shouldn't after removing client from WLC to force webauth redirect which didn't show).</li>
<li>Splash or Login page redirect doesn't occur when browsing to a non-secure, plain-text URL; webauth not authenticated with NAC state WEBAUTH, traffic flows (but shouldn't).</li>
<li>Splash or Login page redirect occurs when browsing to a non-secure, plain-text URL; webauth shows Unauthenticated with NAC state WEBAUTH, traffic doesn't flow (but should if WEBAUTH was shown as passed).</li>
<li>Splash or Login page redirect doesn't occur when browsing to a non-secure, plain-text URL; webauth not authenticated with NAC state WEBAUTH, traffic doesn't flow (as expected).</li>
</ol>

<p>In all cases, the client detail shows the redirect URL was set.<br>
In the two cases where everything worked as expected with the redirect, webauth/run state, and traffic flow (being either allowed or denied), I don't think the ACLs are the issue.  Nothing else is being pushed down from ACS other than the redirect URL.  The two WLANs are hardcoded to different VLANs.</p>

<p>Could this be random behavior or are my eyes just playing a trick on me?  I seen slightly different behavior with different devices -- some more random, some less.</p>

<p>What's the best approach to narrow this problem down?  </p>

<p><strong>Update</strong>: DNS is not the issue.  General IP reachability randomly works in browser.  Regardless of the webauth state (RUN vs WEBAUTH-REQD), sometimes the browser gets through and sometimes does not.  (Initial requests are always plain-text HTTP.)  I've even seen regular traffic get through for non-web apps such as SMTP, so I'm really thinking Webauth is mucking with this, but I don't see anything obviously wrong.  I have a <em>preauth</em> ACL that's fairly liberal and a <em>guests</em> ACL.  I've even added permit any/any to both ACLs that didn't make a difference.</p>
","<p>I've seen similar issues twice in the past. </p>

<p>The first time, it had to do with DNS resolution. I performed a DNS lookup on a client that was having issues, and realized that the client wasn't capable of resolving the URL that I was passing for the login page. This was because I was passing an external DNS server. Check that first. I resolved that by passing the IP in the URL, although you could create a cname that resolves to 1.1.1.1.</p>

<p>The second time, it was a certificate issue. Some default browsers won't show the splash screen if the user must accept a self-signed certificate. I would test that by manually browsing to the splash screen or login page from a client that does not automatically show it.</p>

<p>Hope one of those helps you out. I know that I was ready to pull my hair out when I saw this the first time. </p>
","778"
"DNS Doctoring / Reply Modification on Cisco 1900 series ISR","2519","","<p>We have a <strong>Cisco 1900 ISR</strong> and have recently setup a web-server at <code>ourdomain.com</code>. 
The site works perfectly, however from the LAN we cannot use <code>ourdomain.com</code> to access the site, instead everyone has to use the local IP address <code>10.1.1.xxx</code>.</p>

<p>I've come to understand that its a limitation with Cisco routers. My extensive googling has turned up <strong>DNS doctoring</strong> (or DNS reply modification)</p>

<p>I've attempted many time to setup DNS doctoring but I just cant get it work, I believe because our ISR doesnt have the capability to peform the commands I'm trying:</p>

<pre><code>object network our_server
host 10.1.1.xx
nat (inside,outside) static 50.100.100.10 dns
</code></pre>

<p><strong>Is there another way to achieve DNS doctoring or otherwise access our local server using the external address?</strong></p>

<p>Our network config is as follows: <code>Modem &gt; ISR &gt; Switch &gt; End Users</code></p>

<p>Our ISR is running: <code>Cisco IOS Software, C1900 Software (C1900-UNIVERSALK9-M), Version 15.1(4)M4, RELEASE SOFTWARE (fc1)</code></p>
","<blockquote>
  <p>I've attempted many time to setup DNS doctoring but I just cant get it work, I believe because our ISR doesnt have the capability to peform the commands I'm trying</p>
</blockquote>

<p>Your first problem is that you're using Cisco ASA commands on a Cisco router; you're also assuming this is a problem with your Cisco router.</p>

<p>In reality, this is a DNS issue that can be solved with your Cisco router; however, it's normally solved with a <a href=""http://en.wikipedia.org/wiki/Split-horizon_DNS"">split-DNS</a></p>

<blockquote>
  <p>Is there another way to achieve DNS doctoring or otherwise access our local server using the external address?</p>
</blockquote>

<p>Yes... Cisco calls it Network address translation (or <code>nat</code>)... Let's assume you have this topology...</p>

<pre><code>                               +------------+
                        Fa0/0  | Cisco ISR  | Fa0/1
LAN w/ Webhost-----------------|            |-------------------
                        inside |            | outside (To ISP)
                   10.1.1.0/24 +------------+ 192.0.2.1
                                              192.0.2.2 (static translation for the webhost)

interface Fa0/0
 ip address 10.1.1.1 255.255.255.0
 no ip proxy-arp
 ip nat inside
interface Fa0/1
 ip address 192.0.2.1 255.255.255.0
 no ip proxy-arp
 ip nat outside
!
ip nat inside source list INSIDE_ADDRS interface FastEthernet0/1 overload
ip nat inside source static 10.1.1.50 192.0.2.2
!
ip access-list extended INSIDE_ADDRS
 permit ip 10.1.1.0 0.0.0.255 any
 deny   ip any any
!
ip route 0.0.0.0 0.0.0.0 192.0.2.254
</code></pre>

<p>Assume your internal Webhost address is 10.1.1.50 and you're using 192.0.2.2 (a second address given by your ISP) for your public A-record..  Thus, when you resolve ""ourdomain.com"" from google's resolver, you get...</p>

<pre><code>[mpenning@Bucksnort ~]$ dig +short @8.8.8.8 ourdomain.com
10.1.1.50
[mpenning@Bucksnort ~]$
</code></pre>

<p>Assuming Bucksnort is 10.1.1.12, if you perform <code>debug ip nat</code> on your router during a DNS query, you see...</p>

<pre><code>Sep 23 23:12:29.132 CDT: NAT: s=10.1.1.12-&gt;192.0.2.1, d=8.8.8.8 [0]
Sep 23 23:12:29.132 CDT: NAT: DNS resource record 192.0.2.2 -&gt; 10.1.1.50
Sep 23 23:12:29.136 CDT: NAT: s=8.8.8.8, d=192.0.2.1-&gt;10.1.1.12 [628]
Sep 23 23:12:29.140 CDT: NAT: s=10.1.1.12-&gt;192.0.2.1, d=8.8.8.8 [0]
Sep 23 23:12:29.140 CDT: NAT: DNS resource record 192.0.2.2 -&gt; 10.1.1.50
Sep 23 23:12:29.140 CDT: NAT: s=8.8.8.8, d=192.0.2.1-&gt;10.1.1.12 [629]
Sep 23 23:12:29.144 CDT: NAT: s=10.1.1.12-&gt;192.0.2.1, d=8.8.8.8 [0]
Sep 23 23:12:29.148 CDT: NAT: DNS resource record 192.0.2.2 -&gt; 10.1.1.50
Sep 23 23:12:29.148 CDT: NAT: s=8.8.8.8, d=192.0.2.1-&gt;10.1.1.12 [630]
</code></pre>
","3350"
"Mixing OM-2 with OM-3/4 Patchcords/Installation Fibers","2515","","<p>is it possible to mix OM-2 with OM-3/4 Patchcords or installed Fiber.
As far as i know, they are the same diameter of 50µm, they only have different bandwith caracteristics.</p>

<p>Is there any other reason to don't do that? (except for the orange/aqua mess in the racks ;))</p>
","<p>If you have OM2 in the walls, it makes no difference, and if you have a mixture of OM2/3/4 in the walls, it's probably a good idea to use (only) patch cords that match the highest grade fiber in the walls, as they won't hurt the lower grade runs, though it does run a risk of making the uninformed think that all the cables in the wall are OM4 when they are not. But the uninformed are rather hard to sort out in any case.</p>

<p>If you have OM3/4 in the walls, it's <strong>not a good idea</strong>, though it may ""work"" for some value of ""work."" But it's a terrible place to ""save"" a few bucks while wasting/degrading a few kilobucks of installed fiber plant.</p>
","19135"
"""transport input"" for AUX port in Cisco routers","2509","","<p>On physical layer AUX port works on asynchronous serial RS-232 protocol. However, one can specify various application layer protocols like telnet or SSH as allowed input protocols under AUX line configuration. Am I correct that those protocols are specified only to enable or disable reverse-telnet or reverse-SSH?</p>
","<blockquote>
  <p>On physical layer AUX port works on asynchronous serial RS-232 protocol. However, one can specify various application layer protocols like telnet or SSH as allowed input protocols under AUX line configuration. Am I correct that those protocols are specified only to enable or disable reverse-telnet or reverse-SSH?</p>
</blockquote>

<p><em>Short Answer</em>:</p>

<p>On an aux line, <a href=""http://www.cisco.com/c/en/us/td/docs/ios-xml/ios/sec_usr_ssh/configuration/15-mt/sec-usr-ssh-15-mt-book/sec-rev-ssh-enhanmt.html#GUID-4EE79965-9220-499C-8D06-DC91855D0AC2"" rel=""nofollow noreferrer""><code>transport input</code></a> tells the router what protocols are permitted to reverse-telnet on the aux line.</p>

<h3><em>Example</em>:</h3>

<p>I have the following lab setup...</p>

<pre><code>  lab-rt1                                       sw1
+--------+ aux                           con +-------+
|  c1841 |-------{rolled serial cable}-------| c3560 |
+--------+                                   +-------+
           speed 115200                  speed 115200
</code></pre>

<p>A ""rolled cable"" is just a normal Cisco console cable, which has</p>

<ul>
<li>pin 8 connected to 1</li>
<li>pin 7 connected to 2</li>
<li>etc...</li>
</ul>

<p>If you have some older Cisco cables lying around, it usually looks like this...</p>

<p><img src=""https://i.stack.imgur.com/sQKuq.jpg"" alt=""console cable""></p>

<p>These days, Cisco doesn't ship rolled cables with two RJ45 connectors; now they have DB9 on one end.  I made my rolled cable with some crimpers.</p>

<h3><em>Lab Configuration</em>:</h3>

<p>I have the following configured on a Cisco 1841 lab router (<code>transport input none</code> is default on aux in my IOS)...</p>

<pre><code>lab-rt1#sh runn | b line aux
line aux 0
 no exec
 exec-timeout 15 0
 speed 115200
</code></pre>

<p>The <code>aux</code> reverse-telnet port is tcp/2001 on the c1841 (you have to add 2000 to whatever line is shown below)...</p>

<pre><code>lab-rt1#sh line | i CTY|AUX
      0    0 CTY              -    -      -    -    -     0      0    0/0      -
      1    1 AUX 115200/115200-    -      -    -    -     5      5    3/0      -
lab-rt1#
lab-rt1#
</code></pre>

<h3><em>Example 1 (without <code>transport input ...</code>)</em>:</h3>

<p>If I try to telnet to that router <em>without</em> <code>transport input telnet</code>, then it fails...</p>

<pre><code>[mpenning@tsunami]$ telnet rt1 2001
Trying 172.16.1.210...
telnet: Unable to connect to remote host: Connection refused
[mpenning@tsunami]$
</code></pre>

<h3><em>Example 2 (using <code>transport input ...</code>)</em>:</h3>

<p>However, if I configure this on the c1841's aux port, reverse-telnet and reverse-ssh work...</p>

<pre><code>lab-rt1(config)#line aux 0
lab-rt1(config-line)#transport input telnet ssh
lab-rt1(config-line)#end
lab-rt1#
</code></pre>

<p>Now I telnet again to port 2001...</p>

<pre><code>[mpenning@tsunami]$ telnet rt1 2001
Trying 172.16.1.210...
Connected to rt1-lo0.lab.pennington.net.
Escape character is '^]'.


User Access Verification

Username: mpenning
Password:


sw1 con0 is now available


Press RETURN to get started.
</code></pre>

<p>SSH reverse telnet is a little strange... </p>

<ul>
<li>You might be tempted to ssh to port 2001 on the terminal router (i.e. <code>ssh -p 2001 rt1</code>), but that fails; use port 22 and see the next bullet.</li>
<li>You also have to mangle your username as <code>&lt;username&gt;:&lt;line_number&gt;</code>... in my case, I have to use line 1 to get to the aux (from <code>show line</code>, above)</li>
</ul>

<p>Example... I have username <code>mpenning</code> configured on rt1, and I'm making a reverse-ssh to aux 0 (which is line number 1)...</p>

<pre><code>[mpenning@tsunami]$ ssh -l mpenning:1 rt1
Password:

sw1 con0 is now available


Press RETURN to get started.
</code></pre>
","17002"
"Are Brocade configuration commands the same across most or all their products?","2508","","<p>Are the commands to configure things like LAG bundles, STP, VLANs, OSPF, MPLS, etc the same between all the platforms or is it different for each? It appears that Brocade uses different OS for each product line.</p>

<p>Put this in comparison to Cisco where most of the configuration for anything on a Catalyst switch and ISRs using classic IOS is the same.</p>
","<p>Brocade's products come from multiple backgrounds, which is the cause of fragmentation in their command set - ie: their *Iron gear is from their acquisition of Foundry, whereas their fibrechannel products are their core product.</p>

<p>Cisco actually suffers the same problem when you branch out of the core routing/switching arena. Their WAAS products ape IOS, but that's really just a shell on top of the underlying product. The WLCs are off in their own little command structure land. Even the NX-OS gear looks an awful lot like IOS, but it's not definitively identical.</p>
","1235"
"VPN Connection: Can ping printer but not server what is blocking things?","2506","","<p>I have a VPN set up between several offices. All but one work fine. With one office, I can ping the printer 192.168.45.30 but not a server 192.168.45.242. Well, I say I can't but when the server was first powered up, I could ping it for about 30 seconds and then it disappeared. I can still ping it from the remote router (local to the server) but not from my desktop across the VPN. </p>

<p>This problem has been going on for some time so I replaced the router at the remote office with a similar (not identical) router and had the same problem. </p>

<p>I had Draytek support look at the routers and they seem fine.</p>

<p>I set up the original router at my home and created a VPN connection to there, set up a duplicate server and everything worked as expected. I sent the duplicate server to the remote office... I can ping it a little as it starts up then it dissappears.</p>

<p>Head Office 192.168.42.0 (Firewall / VPN concentrator Draytek Vigor 2955 through a Cisco 1841 router<br/>
My PC 192.168.42.249</p>

<p>Remote office 192.168.45.0 (Draytek Vigor 2830 ADSL router<br/>
Remote printer 192.168.45.30 (can ping)<br/>
Remote server 192.168.45.242 (can't ping)</p>

<p>Home office (using old Draytek Vigor 2820 router from remote office) 192.168.5.0<br/>
Duplicate server 192.168.5.237 (could ping etc but now at remote office)</p>

<p>As far as I can see the routers are working correctly and so is the server so where is my connection being blocked?<br/>Can another device on the network block the connection to the server? At present the server is plugged directly into the router. </p>

<p>Unfortunately it is difficult for me to get to the remote office and I obviously have restricted connectivity, but any ideas of things I could check or try would be much appreciated.  </p>

<hr>

<p>Ah ha! I just asked somebody at the remote office to unplug everything from the router except the server and I can get a stable connection to it. So it must be another device on the network. Any suggestions where to look? </p>

<hr>

<p>Edit after fixing the problem by changing IP address of server to 192.168.45.29<br/>
I can't ping 192.168.45.242 from my workstation, but I can still do so from the remote router, so there is obviously something there, but it must be set to only respond to local pings.</p>
","<p>Since you are temporarily able to ping the server, VPN and ACLs should be fine.</p>

<p>I recommend to verify:</p>

<ul>
<li><p>A local firewall on the server could block the ICMP requests. The fact that it responds at startup, but stops later, leads to this assumption.</p></li>
<li><p>There may be an IP conflict, i.e. another device in the network with the same IP. That cause is possible since it works if you unplug all other devices.</p></li>
</ul>
","1719"
"VPN , DMZ services port forwarding ASA","2506","","<p>Hey i am a bit confused about port forwarding and how is suppose to work. </p>

<p>In the lab , i set up VPN access to the outside interface and that works find. 
Users contacting the outside interface of ASA with ip 10.177.5.40 are prompted to download cisco any connect etc. This is done when a user types the ip in the browser and automatically gets redirected to a https page. port 443</p>

<p>Now i want users from the outside to have access to my DMZ server services HTTP and FTP. Users by typing the http: //10.177.5.40 or ftp: //10.177.5.40 to get access to dmz services. Is it possible or i have to use another ip like 10.177.5.41 . </p>

<p>After watching tutorials for some hours now i have to admit i am more confused that before :)</p>
","<p>Clients can download the software vpn client only if they access the ip via https port 443, i.e. <code>https://10.177.5.40</code>, unless there is automatic redirection from http to https at the client.</p>

<p>Therefore ports 80 http and ftp on the same ip address are free for you to use, take a look at the section: Single Address for FTP, HTTP, and SMTP (Static NAT-with-Port-Translation) in Cisco ASA Firewall configuration guide. </p>

<p><a href=""http://www.cisco.com/en/US/docs/security/asa/asa91/asdm71/firewall/nat_objects.html#wpxref67001"" rel=""nofollow"">http://www.cisco.com/en/US/docs/security/asa/asa91/asdm71/firewall/nat_objects.html#wpxref67001</a></p>
","5758"
"Can't ping default gateway but have internet connection","2502","","<p>I am connected to a distant box in my vlan using ssh (This openwrt box is in cascade with a router).</p>

<p>When I ping the default gateway, it won't work:</p>

<pre><code>route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
default         10.14.164.126   0.0.0.0         UG    0      0        0 eth0
</code></pre>

<p>Ping: </p>

<pre><code>ping 10.14.164.126
PING 10.14.164.126 (10.14.164.126): 56 data bytes
^C
--- 10.14.164.126 ping statistics ---
11 packets transmitted, 0 packets received, 100% packet loss
</code></pre>

<p>At the same time traceroute is using the default gateway and it can go out to reach Internet:</p>

<pre><code>traceroute google.com
traceroute to google.com (173.194.40.128), 30 hops max, 38 byte packets
 1  10.14.164.126 (10.14.164.126)  0.359 ms  0.706 ms  0.349 ms
 2  172.24.120.93 (172.24.120.93)  2.318 ms  2.809 ms  2.417 ms
..etc
</code></pre>

<p>I would like to know why the ping is not working !</p>
","<p>Is your default gateway configured to respond to pings?</p>

<p>If you can ping through the DG (eg. to google.com) but can't ping it, then the routing is fine.</p>

<p>Regards</p>
","20306"
"OSPF For Routed Access","2493","","<p>I have a Telecommunications provider installing a router running OSPF v3 in area 0, I want to integrate my switches with it to exchange routes.</p>

<p>Seems straightforward however I will be using OSPF for Routed access which I'm not familiar with.</p>

<p>Does anyone know if the below will work?</p>

<pre><code>router ospf 1
 network 1.1.1.0 0.0.0.255 area 0 #Subnet to Router
 network 2.2.2.0 0.0.0.255 area 0 #My Network to advertise
!
</code></pre>
","<p>""OSPF for Routed Access"" is a Cisco licensing term. It is a normal OSPF implementation, but it's limited by licensing to 1 instance and 200 learned routes (see <a href=""http://www.cisco.com/c/en/us/products/collateral/switches/catalyst-4500-series-switches/product_bulletin_c25-553133.html"" rel=""nofollow"">here</a>). If you want to run more instances or learn more routes, you need to upgrade to another license (from IP Base to IP Sevices in general).</p>

<p>Your config should work, as long as it is OSPF v2 (not v3) and you're not using authentication (which you should consider in my opinion).  </p>
","14613"
"how to read the STP status (FORWARD/BLOCKING) of each interface/port via SNMP","2488","","<p>how can I read the STP port status of each interface (in my software/program)?
There is a MIB called BRIDGE-MIB with OID ""dot1dStpPortState=1.3.6.1.2.1.17.2.15.1.3"" that returns the FORWARDING OR BLOCKING state.
BUT my problem is that i can not associate the returned value with the port/interface.
It seems the index of the OID is the ""nbr"" that is shown in the output of the ""show spanning-tree"" command, yet again I dont know how this relates to the interface number (it seems there is a fix offset added to the interface number, but how is that calculated?) the output for a typical show spanning-tree cmd is shown:</p>

<pre><code>Switch2#show spanning-tree
VLAN0001
Spanning tree enabled protocol ieee
 Root ID    Priority    32769
         Address     0006.d6ab.a040
         Cost        19
         Port        11 (FastEthernet0/11)
         Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
  Bridge ID  Priority    32769  (priority 32768 sys-id-ext 1)
         Address     0006.d6ac.46c0
         Hello Time   2 sec  Max Age 20 sec  Forward Delay 15 sec
         Aging Time 15
Interface        Role Sts Cost      Prio.**Nbr** Type
---------------- ---- --- --------- --------        -------------------------------
Fa0/2            Desg FWD 19        128.4    P2p
Fa0/11           Root FWD 19        128.13   P2p
Fa0/12           Altn BLK 19        128.14   P2p
</code></pre>

<p>the last three rows show that status of each interface/port and the relating priority.Nbr (Does anyone know how nbr for each interface is calculated?)</p>

<p>Is there any OID that would simply show the STP status of each port?</p>

<p>Thanks for the help in advance.</p>
","<p>What you're getting at the OID you mentioned is a table:</p>

<pre><code>BRIDGE-MIB::dot1dStpPortState.1025 = INTEGER: blocking(2)
BRIDGE-MIB::dot1dStpPortState.1026 = INTEGER: blocking(2)
BRIDGE-MIB::dot1dStpPortState.1027 = INTEGER: blocking(2)
BRIDGE-MIB::dot1dStpPortState.1028 = INTEGER: forwarding(5)
BRIDGE-MIB::dot1dStpPortState.1029 = INTEGER: blocking(2)
BRIDGE-MIB::dot1dStpPortState.1030 = INTEGER: blocking(2)
BRIDGE-MIB::dot1dStpPortState.1031 = INTEGER: forwarding(5)
BRIDGE-MIB::dot1dStpPortState.1032 = INTEGER: blocking(2)
BRIDGE-MIB::dot1dStpPortState.1033 = INTEGER: blocking(2)
BRIDGE-MIB::dot1dStpPortState.1034 = INTEGER: blocking(2)
BRIDGE-MIB::dot1dStpPortState.1035 = INTEGER: blocking(2)
BRIDGE-MIB::dot1dStpPortState.1036 = INTEGER: blocking(2)
</code></pre>

<p>Then match the bridge port to the interface index by querying .1.3.6.1.2.1.17.1.4.1.2.1033</p>

<pre><code>BRIDGE-MIB::dot1dBasePortIfIndex.1033 = INTEGER: 62009
</code></pre>

<p>Then look it up in the interface table </p>

<pre><code>IF-MIB::ifName.62009 = STRING: ge.6.9
</code></pre>
","25187"
"Cisco wireless: APs with and without CleanAir","2479","","<p>We have a Cisco 5508 wireless controller, Cisco Prime NCS, and the Cisco MSE.  Our company needs three SSIDs, and each SSID must have a different Vlan.  We have a mixture of Cisco 1242 and Cisco 3602i APs; our environment is mostly Windows 7.  We want to use the CleanAir technology on the 3602i APs.</p>

<p>Is there a problem using CleanAir on the 3602i APs in the same building with the 1242 APs, which don't have CleanAir?  If it's ok to do this, how do I set CleanAir up on the 3602i and no CleanAir on the 1242 APs?</p>

<p>Are we able to mix 1242 APs with CleanAir 3602i APs on the same SSID?  If so, how do I set this up?  Are there any problems to watch out for?</p>
","<p>Clean Air is enabled by default on the radios of AP that support Clean Air. It is primarily hardware based so it is 'bound' to a radio, not SSID. You can mix them (APs), but only the ones with Clean Air will do spectrum monitoring on the channel they are on and report configured events.</p>

<p>You enable Clean Air for <code>a/n</code> and <code>b/g/n</code> under the wireless tab at your WLC. You can configure it to report detected interference and tune what type of interference to ignore or detect. Also you can disable Clean Air on AP basis, you should see Clean Air capable field somewhere on the configuration page for the AP. This will override the global WLC setting for that AP since it is more specific.</p>
","2831"
"Wireshark Broadcast Storm","2478","","<p>Suppose I'm using Wireshark to monitor a broadcast storm. I want to find out the exact instant of time when the capture buffer runs out of memory. How do I monitor this and obtain the exact time moment when Wireshark capture buffer runs out of memory?</p>
","<p>If you are capturing to memory only and stopping when the buffer runs out, then in the case of a broadcast storm the last frame time will be when the buffer ran out of memory.  I'm not sure why you'd want to do this instead of capturing to disk.</p>
","34896"
"VRRP and VRRP-Extended","2476","","<p>Is VRRP-E a completely separate standard than VRRP or does it just add on features to the VRRP standard? What are some major differences between VRRP and VRRP-E?</p>
","<p>VRRP-E is Brocade only. From Brocade documentation:</p>

<blockquote>
  <p>VRRP-E is a Brocade protocol that provides the benefits of VRRP
  without the limitations. VRRP-E is unlike VRRP in the following ways:</p>
  
  <ul>
  <li><p>There is no “Owner” router. You do not need to use an IP address configured on one of the Layer 3 Switches as the virtual router ID
  (VRID), which is the address you are backing up for redundancy. The
  VRID is independent of the IP interfaces configured in the Layer 3
  Switches. As a result, the protocol does not have an “Owner” as VRRP
  does.</p></li>
  <li><p>There is no restriction on which router can be the default master router. In VRRP, the “Owner” (the Layer 3 Switch on which the IP
  interface that is used for the VRID is configured) must be the default
  Master.</p></li>
  </ul>
  
  <p>Brocade Layer 3 Switches configured for VRRP-E can interoperate only
  with other Brocade Layer 3 Switches.</p>
</blockquote>
","1415"
"Traceroute to an internet address when I'm behind a Dynamic-PAT firewall?","2476","","<p>Consider this network diagram: </p>

<p><img src=""https://i.stack.imgur.com/aZxsAm.png"" alt=""enter image description here""></p>

<p>In this scenario, the router is performing ""Dynamic PAT"" (I'm using <a href=""http://www.cisco.com/en/US/docs/security/asa/asa82/configuration/guide/nat_dynamic.html#wp1079326"" rel=""nofollow noreferrer"">Cisco's definition</a>) where all ""real"" or ""inside"" addresses are mapped to a single outside address provided by my ISP.  Can host 192.168.1.20 traceroute the hops between 108.180.223.48 and 8.8.8.8?</p>

<p>From google I see numerous threads indicating that many people seem to expect this to work if only you configure NAT and access-lists correctly -- but I don't see how that's possible.  Here's why:</p>

<p><a href=""https://en.wikipedia.org/wiki/Traceroute"" rel=""nofollow noreferrer"">Traceroute</a> relies on <code>ICMP Time Exceeded</code> packets to be returned to the sender of an ICMP echo or UDP packet when received with a TTL of 1.  When a traceroute is initiated from 192.168.1.20, the router constructs an ICMP echo or UDP session in anticipation of reply traffic from the destination and translates the source address to 108.180.223.48.  When the <code>ICMP Time Exceeded packet</code> is sent back from each hop, that packet isn't an expected part of the ICMP echo or UDP session.  Without something fancy going on, it seems the router would have no way of unambiguously knowing to which ICMP echo or UDP session an <code>ICMP Time Exceeded</code> packet belongs.  The router would neither know to allow the Time Exceeded packet through nor to which host to send it.</p>

<p>Am I missing something here?  Can routers or firewalls do something fancy to make traceroutes work behind a Dynamic-PAT firewall?  If so, how?</p>
","<p>Yes, you're missing something. And yes, ""<em>something fancy</em>"" is going on.  The router's NAT state table will map the inside-outside translation for the traceroute probe. (UDP normally)  As is required for ICMP to work through any firewall, an ICMP error message will be allowed as part of an established flow.  The ""fancy"" part is the fact the ICMP error carries the header of the packet that caused the error, so the router can match this against it's NAT table for translation to the correct host.</p>

<p>Note: Cisco's firewall product (ASA) will not map icmp errors unless configured to do so:</p>

<pre><code>policy-map global_policy
 class inspection_default
  ...
  inspect icmp error
</code></pre>

<p>IOS does so without any specific configuration.</p>
","3828"
"What use are MAC addresses?","2469","","<p>I know that MAC addresses are used in networks for several things, e.g. static fixed IP addresses assigned by DHCP servers or for Wireless access points. But why is it necessary in the Internet?</p>

<p>Let's say I send a packet to someone not on my local network, e.g. <code>www.example.com</code> using a <code>ICMP echo</code> signal. The <code>ICMP echo</code> doesn't contain any application layer or transport layer. DNS will find out that the IP address of <code>www.example.com</code> is <code>93.184.216.34</code>.</p>

<p>Well, but how does it find out it's MAC address needed for <code>802.11</code> data link layer? No machine on my local network knows it. Why is it even necessary to add the MAC address? The IP address will already uniquely identify it, won't it? And how do routers look up the IP address, if it is hidden beneath the data link layer?</p>

<p><strong>EDIT:</strong></p>

<p>I learned that the <code>802.11</code> header as well as the <code>802.3</code> header contains a field for Destination MAC addresses. I know that my machine contains an ARP table which contains the MAC address of my router. But what MAC address will be written inside that field between my router and the destination router?</p>
","<blockquote>
  <p>Well, but how does it find out it's [www.example.com's] MAC address needed for 802.11 data link layer? </p>
</blockquote>

<p>Your computer doesn't, nor does it need to do so. Since the MAC address is only used within the same L2 network, when you are sending traffic to a different L3 network, all it needs to know is that www.example.com is on a different L3 network and how to get to that L3 network.</p>

<p>Generally this is the default gateway for most devices, and as you point out, your computer already has the information for your router in your ARP table. The router will adjust the L2 information before it passes the traffic on to the next L3 device.</p>

<blockquote>
  <p>Why is it even necessary to add the MAC address? The IP address will already uniquely identify it, won't it? </p>
</blockquote>

<p>No, IP address are not necessarily unique. They must be unique on the local network, but they can be re-used. This is one of the reasons that NAT exists.</p>

<p>Further, Ethernet is only one L2 protocol. IP is designed to work without concern for the underlying protocol, so you could replace Ethernet with something else (like Token Ring or Frame Relay) or you could create your own L2 protocol if you wanted. IP wouldn't care or be bothered by the change.</p>

<blockquote>
  <p>And how do routers look up the IP adress, if it is hidden beneath the data link layer? I don't really get it...</p>
</blockquote>

<p>The L3 header is not ""hidden"" by the L2 header. The L2 header doesn't change the content that becomes the L2 payload, it is simply pre-pended or added before the L3 header. Many devices will strip off the L2 header before L3 processing, but even if this isn't always the case it doesn't obscure the meaning of the rest of the message.</p>

<p>Think of it this way, let's say I send you a message that said, ""How are you today?"" This passes through a translator who changes it to, ""Hello, how are you today?"" Can you still understand my original message even though a new ""header"" was added to it? And that additional header may be removed before final delivery to you.</p>

<blockquote>
  <p>But what MAC address will be written inside that field between my router and the destination router?</p>
</blockquote>

<p>When your router sends the traffic to the next router (assuming they are using Ethernet), it will use the MAC address of it's interface as the source MAC address and the MAC address of the next router's interface as the destination address.</p>

<p>There are probably dozens of questions on this site that focus on different aspects of these questions. Please feel free to use the search function to find them. Here are a few to get you started:</p>

<ul>
<li><a href=""https://networkengineering.stackexchange.com/q/23351/33"">How are MAC/IP addresses used in routing</a></li>
<li><a href=""https://networkengineering.stackexchange.com/q/3329/33"">Reason for both a MAC and an IP address</a></li>
<li><a href=""https://networkengineering.stackexchange.com/q/24803/33"">IP Address vs MAC Address, how does that really work together illustration</a></li>
<li><a href=""https://networkengineering.stackexchange.com/q/9571/33"">Why use IP if we already have a MAC address?</a></li>
</ul>

<p>And since you touched on 802.11:</p>

<ul>
<li><a href=""https://networkengineering.stackexchange.com/q/25100/33"">Four layer-2 addresses in 802.11 frame header</a></li>
</ul>
","26545"
"Find IP Address of Cisco 2811","2466","","<p>I'm trying to configure the phone configuration on my business' Cisco 2811 router. Without buying a bunch of dongles and connecting through the console port of the router, I'd like to try to SSH or Telnet into the router. <strong>My problem is that I don't know the IP of the Cisco 2811 router.</strong> The topology goes something like this.</p>

<pre><code>DSL -&gt; DSL Motorola Modem -&gt; Cisco 2950 Switch -&gt; Cisco 2811 Router -&gt; Phones                                           
                                               -&gt; Workstations
</code></pre>

<p>I'm pretty sure that the modem is acting as a DHCP server and being a pretty dumb modem it doesn't offer a DHCP table to show which devices are getting which IP's.</p>

<p>What I basically need to do is backtrack through a workstation, to the switch, to somehow get the IP of the switch and SSH/Telnet into the switch to find out which IP the router is getting. Once I have the IP of the router I can try SSH/Telnetting into the router and be able to configure it that way.</p>

<p>Someone please correct me if I'm wrong but would this be a way to go about this?</p>
","<p>If your 2811 is providing the phone services for your Cisco IP Phones at this site, finding the IP Address of the 2811 is relatively easy:</p>

<ol>
<li>Press the ""settings"" button on one of the phones</li>
<li>Choose ""Device Configuration""</li>
<li>Choose ""Unifed CM Configuration""</li>
<li>Choose ""Unified CM 1"" or whichever says ""Active""</li>
<li>The listed IP address is the IP address of whatever device is controlling the phones (either the 2811 on site, or a CUCM at another facility)</li>
</ol>

<p>The specific steps may vary depending on your phone models and firmware versions, but this should guide you in the right direction.</p>

<hr>

<p>With all of that said, it really sounds like (based on your previous question and this one) that you're taking some stabs in the dark.   I <strong><em>HIGHLY</em></strong> recommend checking out Jeremy Ciora's book from Cisco Press: ""<a href=""http://rads.stackoverflow.com/amzn/click/1587204177"" rel=""nofollow"">CCNA Voice 640-461 Official Cert Guide</a>"".  It will help guide you through many of the questions you might have about Cisco IP telephony, and IP telephony in general.   I've given it to several folks over the years, and it has helped them greatly.</p>
","4995"
"Python Script to change ip-helper IP on Cisco devices?","2465","","<p>New to stack exchange and Python. Hopefully this is allowed to be asked.</p>

<p>I am taking a class on Python and finally starting to dip my toe into the water.</p>

<p>I have a ton to learn but I already have a use case that I personally would find helpful and practical.</p>

<p>I have an upcoming project that will require me to login and touch every device, finding all instances of ""ip-helper"" configured and altering the current IP addresses stored.</p>

<p>Since the ip-helper exists under any number of SVIs, not only would you have to be able to do a show run and find all instances of ip-helper being configured but you'd also have to be able to identify what SVI its configured under to then generate the new config that would have to be applied.</p>

<p>Would anyone have a working example of a script that would do this that I can learn from and use?</p>

<p>I would think something like this could be applied to many things when it comes to Cisco device configuration?  Finding any number of strings, checking to make sure if it is a sub configuration and what the parent would be prior to generating and applying new replacement config?</p>
","<h2>Welcome to SE!</h2>

<p>As a network engineer I too have recently started programming in Python to better support my own internal automation efforts. In the interest of avoiding a lot of manual work handling the low-level ssh processing that comes with working with CLI, I have focused exclusively on the scripting interface that comes with the SecureCRT application. If you have SecureCRT you can review its scripting capabilities and its documentation will show you how you can use Python scripts like the one below with it. Even if you do not have SecureCRT, you can use the following code as a general outline of how you can put such a script together using native ssh daemons, provided you handle all of the low-level SSH/CLI work separately. Please note that this code was created under the assumption that you are only working with modern Cisco wired network devices with relatively recent versions of IOS.</p>

<h2>I MAKE NO WARRANTY OF ANY KIND ON THIS CODE IN ITS CURRENT STATE. THIS IS BASIC TESTING CODE AND NOT INTENDED FOR PRODUCTION. IT MAY BREAK YOUR NETWORK!</h2>

<p>You have been warned :)</p>

<pre><code># $language = ""python""
# $interface = ""1.0""
import sys
import re

# Your hosts file should just be a list of IP's, each on its own line
HOSTSFILE = '\path_to\your_hosts_file.txt'
USER = 'username'
PASS = 'password'
ENABLEP = 'enablepassword'
NEW_HELPER_CMD = 'ip helper-address x.x.x.x'

def Wait():
    # Wait for a prompt
    while True:
        if not crt.Screen.WaitForCursor(1):
            break
def Get_prompt():
    row = crt.Screen.CurrentRow
    prompt = crt.Screen.Get(row, 0, row, crt.Screen.CurrentColumn - 1).strip()
    return prompt
def Get_list_from_file(file_path):
    f = open(file_path, 'r')
    hostlist = f.readlines()
    f.close()
    return hostlist
def Log_in(host):
    login_command = '/SSH2 /L {0} /PASSWORD {1} {2}'.format(USER, PASS, host)
    try:
        crt.Session.Connect(login_command)
        crt.Session.Synchronous = True
        Wait()
        return True
    except:
        # More specific except clauses needed
        # For specific error conditions, add corresponding error messages
        return False
def Exec_mode():
    prompt = Get_prompt()
    tries = 0
    # Enter priveleged exec mode if not already there
    while tries &gt; 4:
        if re.search(r'#$', prompt):
            break
        elif re.search(r'[&gt;]$', prompt):
            crt.Screen.Send('enable\n')
            Wait()
            prompt = Get_prompt()
            if re.search(r'Password:', prompt):
                crt.Screen.Send('{0}\n'.format(ENABLEP))
                Wait()
        elif re.search(r'\)$', prompt):
            crt.Screen.Send('end\n')
            Wait()
        tries += 1
    if tries &gt;= 4:
        # Add an error code stating that exec_mode failed
        return False
    else:
        return True
def Config_mode():
    prompt = Get_prompt()
    if re.search(r'#$', prompt):
        crt.Screen.Send('config t\n')
        Wait()
    else:
        b = Exec_mode()
        if b:
            crt.Screen.Send('config t\n')
            Wait()
    prompt = Get_prompt()
    if re.search(r'\)$', prompt):
        return True
    else:
        return False
def Pull_and_parse_config():
    Wait()
    crt.Screen.Send('term len 0\n')
    Wait()
    prompt = Get_prompt()
    # Output the runnning config
    crt.Screen.Send(r'sh running-config\n')
    crt.Screen.WaitForString(r'\n')
    # Capture config output to string var 'config'
    # Note: If there is any duplicate of the 'prompt' string in the config, it will stop the
    # capture prematurely
    config = crt.Screen.ReadString(prompt)
    Wait()
    # Split the captured config into a list, containing the interface string, old ip helper string, and
    # remaining config. Will capture each interface on the device that currently has an ip helper command
    # Note: this only captures the first ip helper command on each interface
    configlist = re.split(r'(interface [^\n]+?)\n[^!]*?(ip helper-address .+?)\n', config, flags=re.DOTALL)
    if len(configlist) &gt; 1:
        configlist.pop(0)
        return configlist
    else:
        # add message stating no interfaces matched
        return False
def Update_config(configlist):
    # For each interface with an ip helper command, remove old command and add new helper command
    while len(configlist) &gt; 2:
        int_id = configlist.pop(0)
        old_helper_cmd = configlist.pop(0)
        if re.search(r'interface .+', int_id) and re.search(r'ip helper-address .+', old_helper_cmd):
            Enter_config_mode()
            # Here is where you actually update the config
            # If you don't want to remove old helper command, remove ""no {1}\n"" from the following string
            crt.Screen.Send('{0}\n no {1}\n {2}\n'.format(int_id, old_helper_cmd, NEW_HELPER_CMD))
            Wait()
            return True
        elif not re.search(r'interface .+', int_id):
            # add error message stating invalid interface id
            return False
        else:
            # add error message stating invalid ip helper command
            return False
def Main():
    hostfile = Get_list_from_file(HOSTSFLIE)
    for host in hostfile:
        ok = Log_in(host)
        if not ok:
            # add error message stating login failed
            continue
        ok = Exec_mode()
        if not ok:
            # add error message here
            continue
        configlist = Pull_and_parse_config()
        if not configlist:
            # add error message stating config capture failed
        ok = Update_config(configlist)
        if not ok:
            # add error message stating config update failed
        else:
            # add success message stating config on host successfully updated

Main()
</code></pre>

<p>You will see that this involves a fair amount of code for something that seems like it should be simple, and this performs only one specific task! If you are still new to the scripting/programming world I highly recommend you consult with a more experienced programmer before attempting to implement any scripts in your production network, particularly anything like this that involves modifying configs. Although I adapted this code from some previous work I have done, I have not tested this and I cannot guarantee that any of this will work. Nevertheless, this should provide you with a good starting point. Good luck!</p>
","26495"
"Redistribute connected/static interfaces into ospf?","2464","","<p>If you are running eBGP with several transit providers, what is best practice for redistributing into ospf?  Would we want to redistribute the connected/static subnets into ospf?</p>

<p>If yes, what is the benefit of doing that?</p>

<p>If not, what is the reason for not doing it?</p>

<p>Thanks</p>
","<h2>Adding BGP next-hops to OSPF</h2>

<p>Promoting my comments to an answer...</p>

<blockquote>
  <p>If you are running eBGP with several transit providers, what is best practice for redistributing into ospf? Would we want to redistribute the connected/static subnets into ospf?</p>
</blockquote>

<p>You should only redistribute your routes to connected BGP next-hops into OSPF as a last resort.   Whenever you redistribute routes in OSPF:</p>

<ul>
<li>You're <a href=""https://networkengineering.stackexchange.com/questions/7021/redistribute-connected-static-interfaces-into-ospf#comment11493_7021"">requiring yet another Type4 LSA for every OSPF ASBR</a> (if you're in a multiple-OSPF-area scenario)</li>
<li>You're <a href=""https://networkengineering.stackexchange.com/questions/7021/redistribute-connected-static-interfaces-into-ospf#comment11498_7021"">building bad OSPF configuration habits</a></li>
</ul>

<p>One of OSPF's scaling points is based on the number of LSAs carried in the AS (<a href=""http://www.cisco.com/c/en/us/support/docs/ip/open-shortest-path-first-ospf/7039-1.html#t34a"" rel=""nofollow noreferrer"">especially external LSAs</a>).  You should generally try to avoid unnecessary LSA generation, because these additional LSAs incrementally slow down convergence during topology changes, due to flooding requirements.</p>

<p>Furthermore, since <code>redistribute connected</code> creates OSPF external routes; these external routes can only be summarized at the originating <a href=""http://en.wikipedia.org/wiki/Open_Shortest_Path_First#Autonomous_system_boundary_router"" rel=""nofollow noreferrer"">OSPF ASBR</a> or <a href=""http://en.wikipedia.org/wiki/Open_Shortest_Path_First#Not-so-stubby_area"" rel=""nofollow noreferrer"">NSSA</a> ABR.  External routes limit your ability to aggregate address space (and laying out address space such that you can <a href=""http://www.cisco.com/c/en/us/support/docs/ip/open-shortest-path-first-ospf/7039-1.html#t29"" rel=""nofollow noreferrer"">summarize</a> at <a href=""http://en.wikipedia.org/wiki/Open_Shortest_Path_First#Area_border_router"" rel=""nofollow noreferrer"">OSPF ABR</a>s is a key principle of good IGP/OSPF design).</p>

<p>In short: always prefer internal OSPF routes, if possible.  There are valid use-cases for external routes, but needlessly spamming OSPF E1 or E2 routes throughout the AS with <code>redistribute connected</code> could eventually cause you more pain than necessary... sometimes a lot of pain.</p>

<h2>eBGP Next-Hop resolution</h2>

<p>One of BGP's decision points is whether the eBGP next-hop is reachable for a prefix.  If the eBGP next-hop is not reachable (perhaps you didn't include it in your OSPF table), then the route is rejected as a candidate best-path.</p>

<p>There are a few ways that you can ensure that the eBGP next-hop always resolves... I'm listing them in order or preference.</p>

<ol>
<li>When using direct BGP peering, ensure your <a href=""https://networkengineering.stackexchange.com/questions/7021/redistribute-connected-static-interfaces-into-ospf#comment11493_7021"">BGP peering interfaces are included in your IGP</a> (in this case, OSPF)</li>
<li>When using indirect (i.e. <a href=""http://wiki.nil.com/EBGP_load_balancing_with_EBGP_session_between_loopback_interfaces"" rel=""nofollow noreferrer"" title=""Load balance with eBGP Multihop"">eBGP multi-hop</a>), redistribute your static routes to the BGP peer's next-hop.</li>
<li>Use <a href=""http://www.cisco.com/c/en/us/td/docs/ios/iproute_bgp/command/reference/irg_book/irg_bgp3.html#wp1108213"" rel=""nofollow noreferrer""><code>next-hop self</code></a> on iBGP sessions (which generally means you won't need to worry about next-hop resolution, but comes at the expense of knowing IGP costs to the next-hop)</li>
<li>Use a default route, as was <a href=""https://networkengineering.stackexchange.com/questions/7021/redistribute-connected-static-interfaces-into-ospf#comment11496_7021"">suggested above</a></li>
</ol>

<p>The key take-away is that your BGP route will be rejected if the <a href=""http://www.cisco.com/c/en/us/support/docs/ip/border-gateway-protocol-bgp/13753-25.html#background"" rel=""nofollow noreferrer"">eBGP next-hop IP address does not resolve through an IGP route</a> (ref: <em>Paths for which the NEXT_HOP is inaccessible</em>).</p>

<p>Even so, the four options listed above are not equal, because BGP also considers the <a href=""http://www.cisco.com/c/en/us/support/docs/ip/border-gateway-protocol-bgp/13753-25.html#bestpath"" rel=""nofollow noreferrer"">IGP cost to the next-hop</a> as a path discriminator.  If one relies on a default route to resolve next-hops, you have:</p>

<ul>
<li>Removed this as a decision point, making your BGP path selection less accurate (by default)</li>
<li>Made eBGP outbound load-distribution less granular (in other words, you wind up sending all BGP traffic through the default, unless you have an explicit next-hop in the IGP)</li>
<li>Created a potential black-hole if the default route doesn't cover all possible next-hop routers.</li>
</ul>

<p>The aforementioned disadvantages go away if you simply add your BGP next-hop interfaces into OSPF.</p>
","7025"
"Brocade switches per vlan STP support","2463","","<p>Do Brocade switches(FastIron, NetIron, ICX, etc) support using a per vlan spanning tree or do they only support a single spanning tree instance for all VLANs? </p>

<p>If they support per vlan:</p>

<ul>
<li>Is it enabled by default?  </li>
<li>What command(s) are used to disable/enable per vlan spanning tree for STP and RSTP?</li>
</ul>

<p>We are not going to use MST so disregard that as a semi-answer.</p>
","<p>It's important to note that PVST/PVST+ is Cisco proprietary.</p>

<p>They do support one instance of STP per VLAN, and it is enabled by default. You can enable/disable STP on the following levels (taken from the NetIron config docs):</p>

<ul>
<li><strong>Globally</strong> - Affects all VLANs</li>
<li><strong>Individual VLAN</strong> - Affects all ports within the specified VLAN. When you enable or disable STP within a VLAN, the setting overrides the global setting. Thus, you can enable STP for the ports within a VLAN even when STP is globally disabled, or disable the ports within a port-based VLAN when STP is globally enabled.</li>
<li><strong>Individual Port</strong> - Affects only the individual port. However, if you change the STP state of the primary port in a LAG group, the change affects all ports in the LAG group.</li>
</ul>

<p>Depending on your code rev, you can enter config mode for the VLAN and either do:</p>

<pre><code>[no] spanning-tree
</code></pre>

<p>or</p>

<pre><code>[no] rstp
[no] spanning-tree 802-1w (used on older versions of code)
</code></pre>

<p>I know that newer NetIron gear has PVST/PVST+ compatibility modes which you can turn on at the interface level with:</p>

<pre><code>pvst-mode
</code></pre>

<p>But this also implies that you're going to be running MST, which you said you're not going to do.</p>
","1233"
"Which address should I choose to send a multicast message on an wireles ad-hoc meshed network?","2462","","<p>I am trying to implement a wireless multicast ad-hoc network, but I don't know how it works. </p>

<p>I think I have to send my packets to a specific 224.0.0.* address, but I don't which one choose.</p>

<p>My network is 192.168.1.0 and the packets are using the UDP protocol.</p>

<p>To which address should I send the packets ?</p>

<p>Do I have to configure something before ?</p>

<p>Which IP address my computers should have ? Do I need to change of network ?</p>
","<p>You don't configure multicast address anywhere.</p>

<p>Some box sends traffic out with multicast destination, this will automatically get L2 multicast address on the link.</p>

<p>This L2 multicast address is normally broadcasted in L2, unless there are some specific features enabled, like IGMP snooping to stop the flooding.</p>

<p>If IGMP snooping is enabled, then the L2 switch will learn which ports want to receive the multicast (they do IGMP join to the multicast group) and will not flood traffic to other than interested ports.</p>

<p>If L3 is involved, then you'll learn via PIM which ports are interested in receiving the multicast.</p>

<p>I can recommend <a href=""http://rads.stackoverflow.com/amzn/click/0201746123"">this</a> book for multicast basics, it's not JNPR specific.</p>

<p>If you don't know which addresses to use, if you have 2byte ASN, you should use 
233.0.0.0/8 GLOP block (with your ASN in it) if you don't have 2byte ASN your best bet is 239.0.0.0/8 which can be thought has RFC1918 (e.g. 10.0.0.0/8) for multicast.</p>
","1822"
"How does FDM and TDM work in relation to Circuit Switching?","2455","","<p>I am currently trying to understand what exactly is FDM and TDM. I understand the definitions, but I am having trouble visualizing it. First, in Circuit switching a connection between host A and host B must be made where we have created a path for the connection to travel. </p>

<p>Now, if we are talking about FDM, and we have 4 users is that saying that the 4 users are going to use that very same path created but at different frequencies? </p>

<p>Also, if we are talking about TDM, and we have 4 users is that also saying that for that same path users will get to use it at different times?</p>
","<p>In circuit switching, resources remain allocated during the full length of a communication, after a circuit is established and until the circuit is terminated and the allocated resources are freed. Resources remain allocated even if no data is flowing on a circuit, hereby wasting link capacity when a circuit does not carry as much traffic as the allocation permits. This is a major issue since frequencies (in FDM) or time slots (in TDM) are available in finite quantity on each link, and establishing a circuit consumes one of these frequencies or slots on each link of the circuit.</p>

<p>More detailed information:<a href=""http://www.cs.virginia.edu/~mngroup/projects/mpls/documents/thesis/node8.html"" rel=""nofollow"">http://www.cs.virginia.edu/~mngroup/projects/mpls/documents/thesis/node8.html</a></p>
","33834"
"How to test Wi-Fi Multimedia (WMM) QoS management with LANforge?","2453","","<p>I would like to test the Wi-Fi Multimedia (WMM) feature of an access point AP.</p>

<p>How can I test it using Candela Technologies LANforge-WiFIRE WiFi traffic generator?</p>

<p>Some thoughts after reading the WMM whitepaper:</p>

<ol>
<li><p>Assuming the capacity of the wireless link is 60 Mbps, set up a virtual station STA-1 with a video UDP uplink stream of 30 Mbps.</p></li>
<li><p>Set up another virtual station STA-2 with a background TCP uplink stream of 30 Mbps.</p></li>
<li><p>Set up another STA-3 with a background TCP uplink stream of 30 Mbps, starting after 10 seconds.</p></li>
</ol>

<p>When WMM is enabled, there should be a drastic drop in throughput for the first background stream while there should be no change for the video stream. When WMM is disabled, the video stream should suffer a loss in rate.</p>

<p>What should be the best procedure?</p>
","<p>This is the record of the testing done on the AP using the LANforge.</p>

<p>Inside the anechoic chamber, the LANforge (eth1) is connected to the AP under test via a LAN cable.</p>

<p>I set up 4 virtual stations in the LANforge, with the same SSID as the AP. This results in a loop that allows the LANforge to measure the throughputs of the various streams. The stations are named:</p>

<p>STA-1-BK (background)
STA-2-BE (best effort)
STA-3-VI (video)
STA-4-VO (voice)</p>

<p>I configure 1 uplink stream per station. Each stream is set as 10 Mbps UDP. Notice that the streams are in an increasing order of priority.</p>

<p>Tests are conducted when WMM is disabled, and the same tests are conducted when WMM is enabled.</p>

<p>The test procedure is as follows:</p>

<p>STA-1 starts transmitting.
Then STA-i starts transmitting at time (i-1)*30 s.</p>

<p>I found that the video and voice streams are not able to achieve the desired 10 Mbps, when WMM is disabled.</p>

<p>Next, WMM is enabled.</p>

<p>When WMM is enabled, the QoS priority of the data streams are taken into account. When the video or voice streams are turned on, they maintain the constant desired throughput, while the background and best effort streams are starved of throughput.</p>

<p>Also, when WMM is enabled, only the background and best effort streams shows large latency. The video and voice streams have very little latency.</p>

<p>Therefore, it can be seen that the WMM feature is working in AP under test.</p>

<p>Reference:
Wi-Fi Multimedia (WMM)
www.uniroma2.it/didattica/TPI2/deposito/wmm.pdf</p>
","3685"
"Does port mirroring cause additional latency?","2451","","<p>If I'm sending traffic from host A to B by a switch, will enabling a mirror/SPAN port increase the time it takes for my frames to get from A to B?</p>

<p>Nb: I'm not worried about the time it takes for the mirrored frame to reach my monitoring host. Just wondering if it will affect the network performance in a time-critical environment.</p>

<p>Has anyone tested this? (I would also welcome any links to a post/paper on this)</p>
","<p>Typically, according to Cisco, ""The impact on the high-speed switching fabric is negligible"".</p>

<p>This of course depends on your switch, its fabric and the load on the switch itself. The port that is being sent the copied data could drop packets however, if it's oversubscribed too heavily. Personally, I've never experienced any sort of detriment by using mirroring or SPAN.</p>

<p>Here's a doc from Cisco directly about the subject on some of their cat lines: <a href=""http://www.cisco.com/c/en/us/support/docs/switches/catalyst-6500-series-switches/10570-41.html#anc48"" rel=""nofollow"">http://www.cisco.com/c/en/us/support/docs/switches/catalyst-6500-series-switches/10570-41.html#anc48</a></p>
","18996"
"How can I view a list of which MACs an interface is restricted to on a Juniper SRX?","2449","","<p>JUNOS has functions for either limiting the number of mac addresses on a port or locking a port to particular mac addresses. I know that I can set filters as:</p>

<pre><code>user@switch# set interface all allowed-mac 00:05:85:3A:82:80
user@switch# set interface all allowed-mac 00:05:85:3A:82:81
user@switch# set interface all allowed-mac 00:05:85:3A:82:83
</code></pre>

<p>But how can I list these via a show command? </p>
","<p>You can use show <code>ethernet switching table</code>.</p>

<p>The following is taken from, <a href=""https://www.juniper.net/documentation/en_US/junos12.1/topics/example/layer-2-mac-limit-port-security-configuring.html#jd0e104"" rel=""nofollow"">Configuring MAC Limiting</a> (Official Juniper Documentation).</p>

<p><strong>Configure:</strong></p>

<pre><code>[edit ethernet-switching-options secure-access-port]
user@host# set interface all allowed-mac 00:05:85:3A:82:80
user@host# set interface all allowed-mac 00:05:85:3A:82:81
user@host# set interface all allowed-mac 00:05:85:3A:82:83
</code></pre>

<p><strong>Verify:</strong></p>

<pre><code>user@host&gt; show ethernet-switching table
Ethernet-switching table: 7 entries, 6 learned
VLAN MAC address Type Age Interfaces
employee-vlan * Flood - ge-0/0/2.0
employee-vlan 00:05:85:3A:82:77 Learn 0 ge-0/0/1.0
employee-vlan 00:05:85:3A:82:79 Learn 0 ge-0/0/1.0
employee-vlan 00:05:85:3A:82:80 Learn 0 ge-0/0/2.0
employee-vlan 00:05:85:3A:82:81 Learn 0 ge-0/0/2.0
employee-vlan 00:05:85:3A:82:83 Learn 0 ge-0/0/2.0
employee-vlan 00:05:85:3A:82:85 Learn 0 ge-0/0/2.0
</code></pre>

<p>Also too, since you're configuring the MAC's to be allowed on any of the interfaces in that VLAN, if you wanted to know which interface had a specific MAC entry - you'd use:</p>

<pre><code>show ethernet switching table | match ""$mac-address""
</code></pre>

<p>Obviously replacing <em>$mac-address</em> with the appropriate MAC.</p>

<p>If you want to view the configured MAC addresses vs. what is actually being learned (or not learned) by each interface, you would have to use (as @ParlorTricks mentioned):</p>

<pre><code>show configuration | display set | match allowed-mac
</code></pre>
","19218"
"When/Why to use OSPF?","2444","","<p>This question has been hanging around in my head for a while; all the way from back in 2012, when we replaced our core network switch. </p>

<p>This switch was actually a stacked pair of old 3Com 4900sx, and it was responsible for layer 3 routing between VLANs in our network. We're just a two-man IT shop, where a lot of our internal expertise is more in workstation, server, and application support, with only basic network engineering, so we engaged a consulting firm for this project. The consultant's task was to look at how our network was configured, and what growth we were having, to make sure the new switch was set up well (not just matching what we had, but also looking to the future), as well as help with the cut-over to minimize downtime. </p>

<p>To make a long story short (<a href=""https://www.youtube.com/watch?v=YCP2QQH4uuQ"" rel=""noreferrer"">too late</a>), there were two noticeable configuration differences from the old to the new. The first difference is a much shorter ARP timeout. This makes sense to me; the rise of Wi-Fi means a device might move from one place to another and end up on a different port, invalidating cached ARP information. The second difference is the old switch used OSPF areas, but the new switch does not do any OSPF configuration at all. This part I do not understand. It's not so much that it doesn't make sense, as that I lack a frame of reference for knowing when or why one would want to use OSPF at all.</p>

<p>And so there is my question: when does it make sense to add OSPF to a network, or why would you choose OSPF over another option? I've been through several resources on this in the past, but never quite had this solved to my satisfaction.</p>
","<p>Routing protocols, such as OSPF, are to share routes between routers. If your routing is done on a single router, or a pair of routers connected to the same networks (your layer-3 switches), it doesn't make any sense to use CPU cycles for the routing protocol, since routers inherently know about directly connected networks. Both your layer-3 switches already have all the routes that the other layer-3 switch has.</p>

<p>OSPF is one choice for a routing protocol, but it is an industry standard, and just about every business-grade router supports it. It is also very well understood by most network engineers, and fairly simple to configure.</p>
","30304"
"Switch interface config for IP Phones","2440","","<p>I have seen both of the following methods of switch interface configuration for supporting IP Phones.</p>

<pre><code> switchport access vlan &lt;data-vlan&gt;
 switchport voice vlan &lt;voice-vlan&gt;
 switchport mode access
</code></pre>

<p>and</p>

<pre><code> switchport trunk native vlan &lt;data-vlan&gt;
 switchport trunk allowed vlan &lt;data-vlan&gt;,&lt;voice-vlan&gt;
 switchport mode trunk
</code></pre>

<p>Can anyone provide a good pro or con of standardizing on either method or does it just come down to a matter of personal preference which one you should choose to implement?</p>
","<p>The first method also works for Avaya phones - only they must have the proper DHCP option strings on the data vlan to know which voice vlan it should try and tag its traffic to afterwards.</p>

<p>I usually add #sw host
(which adds spanning-tree portfast and sw mode access automatically when configuring ports)</p>

<p>Portfast allows the port to go directly into forwarding state when the interface is up - otherwise you're going to be waiting 45 seconds per port!</p>
","994"
"bgp simulation tool","2438","","<p>Has anyone heard of a good (preferably GUI-based) BGP simulator for Windows? </p>

<p>One that would bind itself to a specific NIC and would act as a proper BGP speaker.  I need this for testing purposes.</p>

<p>I know that I can ping/telnet to 169, but in my case I don't have access to the box on the other side.  I want to make sure they advertise the correct subnets to me before actually connecting it to my network. </p>
","<p>How about installing a real BGP speaker in a VM?  Vyatta Core or Mikrotik RouterOS or Cisco CSR1000v should work.  My preferred option is <a href=""http://vyos.net/"" rel=""nofollow"">VyOS</a>, the community fork of Vyatta.</p>
","1877"
"Serial connection via Ethernet port on Mac OS X","2438","","<p>I have some devices that are only accessible via RS-232 cables. The problem is that I have no RS-232 to USB adapters so I can't access them.</p>

<p>What I <em>do</em> have is a bunch of serial cables, most interestingly Cisco RJ45 (8P8C) to RJ45, that happen to fit in ethernet ports.</p>

<p>I've found <a href=""http://blog.philippklaus.de/2011/08/make-rs232-serial-devices-accessible-via-ethernet/"" rel=""nofollow"">this article</a> that points out that you can use <code>socat</code> (installable via Homebrew) to open a <code>PTY</code> to work with serial over Ethernet, but it doesn't go into any detail on how that would work.</p>

<p>It also points to Multicom, but again, without any useful setup instructions. </p>

<p>Is using a serial cable even the correct one for Serial via Ethernet?</p>
","<p>Just because it <em>fits</em> doesn't make it a serial port. (Fibre Channel uses DB-9, but that's not RS-232 either!)</p>

<p>You'll need to find a USB/Serial adapter. Or find a ""serial console server"" (aka ""terminal server"") that is an ethernet device. (Digi PortServer, for example. Lots of people still make 'em.) In a pinch, you could use ye'old <em>Cisco reverse telnet</em> to make the <em>aux</em> port a ""network serial port"".</p>
","18764"
"How is the payload distributed across Multilink PPP connections","2431","","<p>A site I support uses 3 T1s setup with multilink PPP.  They are trying to use <a href=""http://www.getjive.com/"">Jive</a> which is a hosted VoIP provider, with horrible results.  <strong>I want to know how packets are distributed between the individual T1s since I think this may help explain what is going on.</strong></p>

<p>SNMP monitoring of the multilink interface shows that they have available capacity, but their VoIP test calls are horrible.  It acts as if there is a huge amount of jitter and dropped packets.  Though simple tests with PING/Iperf to not show jitter/latency that is as bad as you might expect given the call quality.</p>

<p>How are packets distributed between the multiple T1s.  I assume that it isn't the same as Ethernet bonding.</p>

<p>If the multi-link PPP is an issue what can I look at on the routers that will show this? Can it be corrected?  The routers are Cisco, I believe they are 2800s, but I would have to double check.</p>
","<p>Oi...lemme dredge up those long-unused neurons to remember how Multilink PPP works.</p>

<p>During the LCP phase when the first link is brought up during a non-multilink PPP session, the two sides negotiate the MRU (Maximum Receive Unit) for each direction of the link...basically each side tells the other how big of a packet it can handle being sent to it.</p>

<p>With Multilink PPP, they negotiate that, but they also negotiate, when the first link is brought up, an MRRU, or Maximum Reconstructed Receive Unit.</p>

<p>Because Multilink PPP added extra frame header space, the creators were concerned about Path MTU problems, so they decided that Multilink would be able to fragment and reassemble packets on either end of the Multilink PPP session.</p>

<p>So, yes, unlike Ethernet bonding, its not just a matter of balancing frames across the multiple links...the frames can actually be fragmented and reassembled.  This can cause a jump in latency and jitter.</p>

<p>On T-1's you should be able to configure each side with a significantly larger MRU and MRRU than any packets that would likely need to cross the link, and if the MRU is as large as, or larger than the MRRU, then you shouldn't see any fragmentation and reassembly occuring.  Hopefully this will get the latency and jitter under control and help out your VoIP behavior.  You will likely need to adjust this configuration on both sides of the links, though, as each direction is negotiated independently.</p>

<p>In general, I wouldn't expect VoIP packets to need to be fragmented, though...they tend to not be big enough to need that.  Worth a shot to check your MRU and MRRU sizes on the links and the Multilink session, maybe they're way out of whack and causing problems.</p>
","168"
"Why would a VPN require a T1?","2427","","<p>Forgive me as I have very little domain knowledge in this area, I'm helping out at my parent's office and was asked to look into speeding up the internet. They've been using this IT guy that I think is ripping them off... They have a T1 line which costs a ton and only provides 3 Up, 3 Down. The IT guy is convinced that it is necessary for the VPN which is used by employees to access documents on the office server when they're out of the office. They also use it to access some applications which run on the server.</p>

<p>I understand that this is for reliability but if you don't have a T1 line going to your house, how are you going to see that reliability? Am I missing something about VPNs? Is the T1 necessary at all? I'd think you need T1's from point to point? Why can't we just put a VPN on a normal cable connection?</p>

<p>I'm just about to finish my CS degree, but know very little about networking, so be gentle please.</p>
","<p>First of all, T1 gives you around 1.5Mbit/s in both directions, not 3Mbit/s. If you're seeing 3Mbit/s, it may be bundled from two separate lines.</p>

<p>Now, for VPN, if that's IP-based VPN as 99% of VPNs currently are, of course it doesn't matter if your physical interface is T1, E1, ATM OC-3 or 10GE WAN PHY - it's just used to provide higher-layer connectivity - which for VPNs (IPsec, DTLS or whatever) is usually IP connectivity. As soon as you obtain IP connectivity, you should be able to establish VPN sessions.</p>

<p>From the description you provide, that T1 line (or bundled T1 line) is used as a hub for employee remote connectivity. This may mean, that the VPN device has T1 ports built-in and that's why the ""IT guy"" claims T1 is needed to provide the connectivity, or there are some other constraints.</p>

<p>Given the costs of dedicated circuits, I'd rather ask local available ISPs about Ethernet line - be it 10Mbit/s, 100Mbit/s or sub-rate 1GE/full-rate 1GE. You'll get more for less (propably), and still get IP connectivity which is needed for VPN sessions.</p>
","16022"
"Simple circuit-switched network","2427","","<p>I'm having a problem understanding this question regarding circuit-switched networks. I get the main concept that the connections are reserved for each link, but these two questions are confusing me. I was asked to find two things:</p>

<ol>
<li>The maximum number of simultaneous connections that can be in progress at any one time.</li>
<li>The maximum number of simultaneous connections that can be in progress at any one time if all the connections are between the switch in the upper-left-hand corner and the switch in the lower-right-had corner.</li>
</ol>

<p>I'm not sure about the first question (my guess is 4 connections), but I'm pretty positive that the answer for the second question is 4 connections.
I'm not asking for an answer. I'm just trying to understand the difference between the two questions. Thanks for the help.</p>

<p><img src=""https://i.stack.imgur.com/zLEv9.jpg"" alt=""enter image description here""></p>

<p>Solution for question 2:</p>

<p><img src=""https://i.stack.imgur.com/dV7aB.jpg"" alt=""enter image description here""></p>
","<p>Circuit-switched networks have to reserve a segment for each hop along the journey, so the farther away the two connected endpoints are, the more links are reserved for the call. In your case, if the upper-left router were making calls to the lower-left router, only the segments on the left side of the diagram were being in use, while all the others were still free, but as shown, when it calls the lower-right router, it has to use segments from two of the sides to get there.</p>

<p>You can fit a lot more calls in if each call just needs one hope than if each call needs multiple.</p>
","3143"
"Routing on SG300 with VLANs","2423","","<p>My setup:</p>

<p>I receive from my ISP a <code>/24</code> public IP subnet (e.g: <code>20.20.20.0/24</code>).</p>

<p>Some of our departments want to have full control over their public IPs, so I split it up to several <code>/27</code> subnets.</p>

<p>For the beginning I wanted to set up 3 VLANs:</p>

<ol>
<li>VLAN 100: <code>20.20.20.32/27</code></li>
<li>VLAN 200: <code>20.20.20.128/27</code></li>
<li>VLAN 5 (WAN connect): <code>20.20.20.0/30</code></li>
</ol>

<p>The Gateway of the switch is <code>20.20.20.1</code>.</p>

<p>I configured a static route on the SG300-28 (is in L3 mode):</p>

<p><code>0.0.0.0/0</code> over <code>20.20.20.1</code></p>

<p>Clients in the VLAN 100 or the VLAN 200 can't reach the ISP Gateway or the internet.</p>

<p>If I put the client in the VLAN 5 he can of course connect to the GW and the internet.</p>

<p>I am to blind to see the mistake, so I count on you guys.</p>

<p><strong>Cisco Packet Tracer Example: <a href=""http://files.fuerst.it/sg300.pkt"" rel=""nofollow"" title=""PKT File"">PKT File</a></strong></p>

<p>Config: </p>

<pre><code>config-file-header
switche5bce7
v1.4.5.02 / R800_NIK_1_4_194_194
CLI v1.0
set system mode router 

file SSD indicator encrypted
@
ssd-control-start 
ssd config 
ssd file passphrase control unrestricted 
no ssd file integrity control 
ssd-control-end cb0a3fdb1f3a1af4e4430033719968c0 
!
vlan database
vlan 5,10,100,200 
exit
voice vlan oui-table add 0001e3 Siemens_AG_phone________
voice vlan oui-table add 00036b Cisco_phone_____________
voice vlan oui-table add 00096e Avaya___________________
voice vlan oui-table add 000fe2 H3C_Aolynk______________
voice vlan oui-table add 0060b9 Philips_and_NEC_AG_phone
voice vlan oui-table add 00d01e Pingtel_phone___________
voice vlan oui-table add 00e075 Polycom/Veritel_phone___
voice vlan oui-table add 00e0bb 3Com_phone______________
ip dhcp server 
ip dhcp pool network Pool_5
address low 20.20.20.6 high 20.20.20.10 255.255.255.224 
default-router 20.20.20.5
dns-server 8.8.8.8
exit
ip dhcp pool network Pool_100
address low 20.20.20.34 high 20.20.20.62 255.255.255.224 
default-router 20.20.20.33
dns-server 8.8.8.8
exit
ip dhcp pool network Pool_200
address low 20.20.20.130 high 20.20.20.158 255.255.255.224 
default-router 20.20.20.129
dns-server 8.8.8.8
exit
bonjour interface range vlan 1
ip access-list extended VLAN_100-IN
permit ip any any ace-priority 1
exit
ip access-list extended VLAN_1-IN
permit ip any any ace-priority 1
exit
hostname switche5bce7
line console
no autobaud
exit
no passwords complexity enable 
username cisco password encrypted d033e22ae348aeb5660fc2140aec35850c4da997 privilege 15 
ip ssh server
ip ssh-client server authentication 
ip telnet server
!
interface vlan 1
 no ip address dhcp 
 service-acl input VLAN_1-IN default-action permit-any 
!
interface vlan 5
 name WAN 
!
interface vlan 10
 name MGMT 
 ip address 10.10.10.10 255.255.255.0 
!
interface vlan 100
 name VLAN_100 
 ip address 20.20.20.33 255.255.255.224 
 service-acl input VLAN_100-IN default-action permit-any 
!
interface vlan 200
 name VLAN_200 
 ip address 20.20.20.129 255.255.255.224 
!
interface gigabitethernet1
 ip address 20.20.20.2 255.255.255.252 
!
interface gigabitethernet2
 switchport mode access 
 switchport access vlan 5 
!
interface gigabitethernet3
 switchport mode access 
!
interface gigabitethernet4
 switchport mode access 
!
interface gigabitethernet5
 switchport mode access 
!
interface gigabitethernet10
 service-acl input VLAN_100-IN 
 switchport mode access 
 switchport access vlan 100 
!
interface gigabitethernet20
 switchport mode access 
 switchport access vlan 200 
!
interface gigabitethernet25
 switchport mode access 
 switchport access vlan 10 
!
interface gigabitethernet26
 switchport mode access 
 switchport access vlan 10 
!
exit
ip default-gateway 20.20.20.1 
</code></pre>
","<p>It doesn't work because of a limitation of the SG300. <br>
The SG300 doesn't have routed ports.</p>

<p>I set up a clean SG300 config but it was not possible to reach the ISP Gateway: <br>
Config of SG300:</p>

<pre><code>config-file-header
switche5bce7
v1.4.5.02 / R800_NIK_1_4_194_194
CLI v1.0
set system mode router 

file SSD indicator encrypted
@
ssd-control-start 
ssd config 
ssd file passphrase control unrestricted 
no ssd file integrity control 
ssd-control-end cb0a3fdb1f3a1af4e4430033719968c0 
!
vlan database
vlan 100,200 
exit
voice vlan oui-table add 0001e3 Siemens_AG_phone________
voice vlan oui-table add 00036b Cisco_phone_____________
voice vlan oui-table add 00096e Avaya___________________
voice vlan oui-table add 000fe2 H3C_Aolynk______________
voice vlan oui-table add 0060b9 Philips_and_NEC_AG_phone
voice vlan oui-table add 00d01e Pingtel_phone___________
voice vlan oui-table add 00e075 Polycom/Veritel_phone___
voice vlan oui-table add 00e0bb 3Com_phone______________
bonjour interface range vlan 1
hostname switche5bce7
no passwords complexity enable 
username cisco password encrypted d033e22ae348aeb5660fc2140aec35850c4da997 privilege 15 
!
interface vlan 100
 name ""VLAN100"" 
 ip address 20.20.20.33 255.255.255.224 
!
interface vlan 200
 name ""VLAN200"" 
 ip address 20.20.20.129 255.255.255.224 
!
interface gigabitethernet1
 ip address 20.20.20.2 255.255.255.252 
!
interface gigabitethernet10
 switchport mode access 
 switchport access vlan 100 
!
interface gigabitethernet20
 switchport mode access 
 switchport access vlan 200 
!
exit
ip default-gateway 20.20.20.1
</code></pre>

<p>Afterwards I set up a Catalyst 3750 Switch with the same VLANs and config and I was able to issue <code>no switchport</code> on <code>Interface Gigabit1/0/1</code>. <br>
<br>
Now I can reach the ISP Gateway how it should be. <br>
Config of 3750: </p>

<pre><code>Current configuration : 3535 bytes
!
version 12.2
no service pad
service timestamps debug datetime msec
service timestamps log datetime msec
no service password-encryption
!
hostname Switch
!
boot-start-marker
boot-end-marker
!
!
!
!
no aaa new-model
switch 1 provision ws-c3750x-24p
system mtu routing 1500
ip routing
!
!
!         
!
crypto pki trustpoint TP-self-signed-2617031040
 enrollment selfsigned
 subject-name cn=IOS-Self-Signed-Certificate-2617031040
 revocation-check none
 rsakeypair TP-self-signed-2617031040
!
!
spanning-tree mode pvst
spanning-tree extend system-id
!
!
!
!
vlan internal allocation policy ascending
!
!
!
interface FastEthernet0
 no ip address
 no ip route-cache cef
 no ip route-cache
 no ip mroute-cache
!
interface GigabitEthernet1/0/1
 no switchport
 ip address 20.20.20.2 255.255.255.252
!
interface GigabitEthernet1/0/2
!
interface GigabitEthernet1/0/3
!
interface GigabitEthernet1/0/4
!
interface GigabitEthernet1/0/5
!
interface GigabitEthernet1/0/6
!
interface GigabitEthernet1/0/7
!
interface GigabitEthernet1/0/8
!
interface GigabitEthernet1/0/9
!
interface GigabitEthernet1/0/10
 switchport access vlan 100
 switchport mode access
!         
interface GigabitEthernet1/0/11
!
interface GigabitEthernet1/0/12
!
interface GigabitEthernet1/0/13
!
interface GigabitEthernet1/0/14
!
interface GigabitEthernet1/0/15
!
interface GigabitEthernet1/0/16
!
interface GigabitEthernet1/0/17
!
interface GigabitEthernet1/0/18
!
interface GigabitEthernet1/0/19
!
interface GigabitEthernet1/0/20
!
interface GigabitEthernet1/0/21
!
interface GigabitEthernet1/0/22
!
interface GigabitEthernet1/0/23
!
interface GigabitEthernet1/0/24
!
interface GigabitEthernet1/1/1
!
interface GigabitEthernet1/1/2
!
interface GigabitEthernet1/1/3
!
interface GigabitEthernet1/1/4
!
interface TenGigabitEthernet1/1/1
!
interface TenGigabitEthernet1/1/2
!
interface Vlan1
 no ip address
!
interface Vlan100
 ip address 20.20.20.33 255.255.255.224
!         
ip classless
ip route 0.0.0.0 0.0.0.0 20.20.20.1
ip http server
ip http secure-server
!
ip sla enable reaction-alerts
!
!
line con 0
line vty 0 4
 login
line vty 5 15
 login
!
end
</code></pre>
","36153"
"Wireshark TCP and window size","2420","","<p>Can please someone explain me on the below screenshot why host 192.168.1.200 on packet 9 sends an ACK for the packets 6 - 7 - 8? The total packet size does not correspond to the window size agreed. If I understood it correctly the window size is the amount o data that a device can send without acknowledging.</p>

<p>Thank you</p>

<p><img src=""https://i.stack.imgur.com/C9r7m.png"" alt=""enter image description here""></p>
","<blockquote>
  <p>Can please someone explain me on the below screenshot why host 192.168.1.200 on packet 9 sends an ACK for the packets 6 - 7 - 8? The total packet size does not correspond to the window size agreed. If I understood it correctly the window size is the amount o data that a device can send without acknowledging.</p>
</blockquote>

<p>The window size is the <em>maximum</em> amount of unacknowledged data that can be outstanding in a socket; however, there is no requirement to fill this window before ACK-ing.  In fact, most low-latency connections do not fill the window because stations acknowledge data so quickly.  What you are seeing is normal, there is no problem.</p>
","5053"
"Addition of new switch to an existing stack","2417","","<p>I have a existing switch stack with 5 switches in the stack (all of them are 3750). Now, I have to add another switch (3750) to that stack. I turned on the new switch that I got from my company to make sure if there is any unnecessary configurations, and I found out that the the member number of the new switch is 1 (which is default) and the priority is set as 15.</p>

<p>Here is how I am planing to add this switch:</p>

<ol>
<li>Turn off the power of the new switch</li>
<li>connect the stacking cable (according to Cisco documentation)</li>
<li>Turn on the power of the new switch</li>
</ol>

<p>By doing this the switch should automatically get the stack number and priority value of 1.</p>

<p>Now my question is: since the new switch has priority value of 15 before adding it to the stack, after adding the switch to the stack following above procedure, can this switch reboot the entire stack and reelect the master switch? If yes, how can I avoid this.</p>
","<p>You should set the switch number and priority before adding it to the stack. You should also define the new switch on the stack before adding it to the stack, and you should verify that it is running the same IOS version as the stack before adding it to the stack. A switch will <em>not</em> automatically change its priority when added to the stack.</p>

<p>On the stack you should have the switch priority set on each the way you want. Don't depend on an election of equal priority members. The best practice is to manually set the switch priorities so that you have a deterministic failover. For instance:</p>

<p>Existing stack:</p>

<pre><code>Switch 1: priority 15 (master)
Switch 2: priority 14
Switch 3: priority 13
Switch 4: priority 12
</code></pre>

<p>New switch:</p>

<pre><code>Switch 5: priority 11
</code></pre>

<p>There is always a risk when adding something to a device or stack that the device or stack will reboot, but adding an unpowered switch to the stack, then powering it up, should not cause the stack to reboot.</p>
","32817"
"Only One Path in the Looking Glass","2410","","<p>I understand that only the best path is advertised to eBGP neighbors, but is this true of iBGP? If I peer with two providers, I was under the impression that anyone else peering with both of my providers would have two paths to me. After inspecting a number of looking glasses, it appears this isn't so.</p>
","<p>BGP always only advertises the best path onward to its peers.  This is true for eBGP, iBGP, route reflection (which is merely a special case of iBGP), and any other way you might use BGP.</p>

<p>But, yes, you are correct, if you are sending advertisements to providers A and B, and I have connections and BGP sessions also with providers A and B, then I should see both paths in my BGP tables.  I may not see multiple routes created in my routing tables...that's a question of the configuration of my devices and whether I allow multiple routes of equal AS Path lengths to be inserted into the routing table...typically BGP will only install a single route.  The BGP tables, though, should show advertisements from both providers.</p>

<p>Actually...even if I'm peering with providers B and C, or even C and D, I should still see multiple paths in my BGP tables as long as you are reachable through B, C, and D.  All other things being equal, my devices should pick B because that should be the shortest AS PATH, but I would still see the paths with the longer AS PATHs from C and D.  Now, perhaps C and D have both decided that the path through A is better than the path through B, then the paths that I would see would have AS PATHs of ""A C"" and ""A D"", so it would appear as if you weren't connected to B at all, but if the path through A went away, then the path through B would get propagated onward through C and D.</p>

<p>If you can give some specifics...maybe even your blocks that you're advertising if you're willing to share that....others can take a look at what we're seeing and perhaps give some more specific guidance.</p>
","173"
"How to calculate random subnet first/last address","2409","","<p>Lets say I have to create 256 subnets (it could be any number), how would I find the first and last (network/broadcast addresses) for a randomly chosen subnet? For instance, subnet 139. </p>

<p>I'll give an example. 
Network IP: 145.0.0.0/8 
This IP needs to be subsetted into 300 subnets. 
Network mask: 255.0.0.0
Network address (first address):145.0.0.0/8 
Broadcast address: 145.255.255.255/8
Number of hosts: 2^(32-8) = 16777216
Addresses/subnet: 65536 (16777216/256)
Subnet mask: /16 </p>

<p>I'm not really concerned about usable addresses, just trying to understand a concept. </p>

<p>The first subnet would be:
Network address: 145.0.0.0/16
Broadcast Address: 145.0.255.255</p>

<p>So, is there a formula or method to finding a randomly picked subnet's network/broadcast address? </p>
","<p>Take the subnet number, subtract one (the first one is <code>0</code>), and put that in the subnet part of the address. In your example, <code>145.0.0.0/8</code> will have 256 <code>/16</code> subnets. The 139th subnet will be <code>145.138.0.0/16</code>. You only need the subnet and the mask to figure out anything else.</p>

<p>To do this correctly (otherwise you can make some serious mistakes with non-octet bounded networks), you need to do it in binary. See <a href=""https://networkengineering.stackexchange.com/a/7117/8499"">this answer</a> for how to do all the calculations.</p>
","38657"
"Bit and byte stuffing in HDLC frames","2404","","<p>I'm just learning about bit and byte stuffing. So far, it seems that they're both trying to prevent the same thing from happening in say, HDLC frames, that is, to avoid treating a 0x7E value in the data frame as the 0x7E flag that delimits a frame. The difference is bit stuffing works on a bit-by-bit basis, while byte stuffing works on a byte-by-byte basis. Does this mean that both bit and byte stuffing cannot occur in the same traffic? For example, if I find that the frames contain bit stuffing, then it cannot be byte stuffed as well?</p>
","<p>You are correct that bit-stuffing and byte-stuffing perform broadly the same role, but note:</p>

<ul>
<li>There is no reason in principle why you cannot do both at the same time, though this is not typically done - rather:
<ul>
<li>Bit stuffing is typically used on synchronous serial links.</li>
<li>Byte stuffing is typically used on asynchronous serial links (eg. RS-232).</li>
</ul></li>
<li>In any case, both ends must agree in advance which convention (bit stuffing, byte stuffing, both, something else) is in force: the sender can't simply choose one, or else the receiver won't know how to interpret the transmissions.</li>
<li>Bit stuffing is not just to distinguish the inter-frame marker <code>01111110</code> from the data value 0x7e (which would otherwise also be sent as <code>01111110</code>) - bits must also be inserted when bits in adjacent bytes might look like the inter-frame marker (as with two bytes <code>00000111 11100000</code>). This scenario does not arise with byte stuffing.</li>
<li>Bit stuffing is typically done by the serial hardware; byte stuffing is often done in software. Thus, unless you're directly measuring the electrical signals on the wire, you're unlikely to observe bit stuffing directly - but you may be able to observe byte stuffing via (for example) a debugger.</li>
</ul>
","13281"
"Reliablity vs unreliable service at IP and Link Layer","2404","","<p>I am taking about the 5 layer model. It is well documented that TCP is a reliable service and IP is best-effort delivery and hence unreliable (ref <a href=""http://www.ietf.org/rfc/rfc792.txt"" rel=""nofollow"">RFC 792 - TCP</a>).  Also, the data link layer is 'reliable' because of its ARQ mechanism guaranteeing sequential delivery of packets (<a href=""http://web.cs.wpi.edu/~cs4514/b98/week3-dll/week3-dll.html"" rel=""nofollow"">ref</a>).</p>

<p>I cannot make sense of sending packets of reliable service (TCP) on a lower unreliable service (IP) which in turn sends packets on a layer which provides reliability (Link Layer). Why can't we do away with reliability at link layer as IP is unreliable?</p>
","<p>The issue is that you're operating under the notion that each layer is in and of itself a separate, autonomous entity. Understand that IP is not the only packet delivery protocol in existence, it just happens to be the most common one. Also understand that these ""layers"" are simply abstraction tools - the take away is that each ""layer"" is dependent on the one beneath it for some functions, and the layers further down the stack can hand off certain duties (ie reliable data transmission) to the layers above them when appropriate to keep overhead low and performance high. Each lower layer encapsulates data sent from the layers above it on its way down to the wire, and the lower layers decapsulate the data on the way back up the stack to the application.</p>

<p>The paper you linked about the data link layer even states that while its delivery mechanisms are <em>intended</em> to be reliable, they are <em>still best effort</em>, and there is an assumption made that higher layer protocols (ie TCP) will handle retransmission if necessary.</p>
","6564"
"Router not assigning DHCP IP Addresses to Interconnecting Switches","2402","","<p>I am having problems connecting from some of my switches to the router/internet. I have a Cisco 1900 series router with four different 2960 series switches. All Gigabit Ethernet ports are configured to be trunk. The router is connected to FF_Switch using the Gig0/1 port while the Gig0/2 port is connected to a Fiber/T Transceiver(Fiber connection converted to RJ45 using Fiber/T Transceiver) passed over fiber connection to another Fiber/T Transceiver, from which it is connected to Gig0/1 of SVOSwitch2. Gig0/2 of SVOSwitch2 connects to Gig0/1 of SVOSwitch3. Gig0/2 of SVOSwitch3 connects to Gig0/1 of SVOSwitch1. </p>

<p>SVOSwitch1 has the ports on VLAN1 and 3, SVOSwitch2 has the ports on VLAN 4 and 5 while SVO Switch 3 has the ports on VLAN 5 and 6. </p>

<p>The problem is that whenever I connect to any of the ports, I can only connect and get DHCP on the ports on VLAN 1 and 4.</p>

<p>The configuration for the router is given below;</p>

<pre><code>    ip dhcp pool FF_SWITCH
network 192.168.1.0 255.255.255.0
dns-server xxx.xxx.xxx.xxx xxx.xxx.xxx.xxx 
default-router 192.168.1.1 
!
ip dhcp pool SVOSwitch1
network 192.168.3.0 255.255.255.0
dns-server xxx.xxx.xxx.xxx xxx.xxx.xxx.xxx 
default-router 192.168.3.1 
!
ip dhcp pool SVOSwitch2
network 192.168.4.0 255.255.255.0
dns-server xxx.xxx.xxx.xxx xxx.xxx.xxx.xxx 
default-router 192.168.4.1 
!
ip dhcp pool SVOSwitchVlanPool1
network 192.168.6.0 255.255.255.0
dns-server xxx.xxx.xxx.xxx xxx.xxx.xxx.xxx 
default-router 192.168.6.1 
!
ip dhcp pool SVOSwitch3
network 192.168.5.0 255.255.255.0
dns-server xxx.xxx.xxx.xxx xxx.xxx.xxx.xxx 
default-router 192.168.5.1 
!
ip dhcp pool SVOSwitchVlanPool2
network 192.168.7.0 255.255.255.0
dns-server xxx.xxx.xxx.xxx xxx.xxx.xxx.xxx 
default-router 192.168.7.1

interface GigabitEthernet0/0
description ### WAN INTERFACE ###
ip address xxx.xxx.xxx.xxx 255.255.xxx.xxx
ip flow ingress
ip nat outside
ip virtual-reassembly in
duplex full
speed auto
no cdp enable
!
interface GigabitEthernet0/1
description ### LAN INTERFACE ###
no ip address
ip flow ingress
ip virtual-reassembly in
duplex auto
speed auto
!
interface GigabitEthernet0/1.1
description ###1st FLR NETWORK ###
encapsulation dot1Q 1 native
ip address 192.168.1.1 255.255.255.0
ip access-group 110 in
ip accounting output-packets
ip flow ingress
ip flow egress
ip nat inside
ip virtual-reassembly in
!
interface GigabitEthernet0/1.3
description ### TNB WIRELESS NETWORK ###
encapsulation dot1Q 3
ip address 192.168.3.1 255.255.255.0
ip access-group 110 in
ip accounting output-packets
ip flow ingress
ip flow egress
ip nat inside
ip virtual-reassembly in
!
interface GigabitEthernet0/1.4
description ### TNB 1ST WING NETWORK ###
encapsulation dot1Q 4
ip address 192.168.4.1 255.255.255.0
ip access-group 110 in
ip accounting output-packets
ip flow ingress
ip flow egress
ip nat inside
ip virtual-reassembly in
!
interface GigabitEthernet0/1.5
description ### TNB 2ND WING NETWORK ###
encapsulation dot1Q 5
ip address 192.168.5.1 255.255.255.0
ip access-group 110 in
ip accounting output-packets
ip flow ingress
ip flow egress
ip nat inside
ip virtual-reassembly in
!
interface GigabitEthernet0/1.6
description ### TNB PENTHOUSE NETWORK ###
encapsulation dot1Q 6
ip address 192.168.6.1 255.255.255.0
ip access-group 110 in
ip accounting output-packets
ip flow ingress
ip flow egress
ip nat inside
ip virtual-reassembly in
!
interface GigabitEthernet0/1.7
description ### TNB OTHER NETWORK ###
encapsulation dot1Q 7
ip address 192.168.7.1 255.255.255.0
ip access-group 110 in
ip accounting output-packets
ip flow ingress
ip flow egress
ip nat inside
ip virtual-reassembly in
!
interface GigabitEthernet0/0/0
switchport access vlan 100
no ip address
!
interface GigabitEthernet0/0/1
no ip address
!
interface GigabitEthernet0/0/2
no ip address
!
interface GigabitEthernet0/0/3
no ip address
!
interface Vlan1
no ip address
!
interface Vlan100
ip address xxx.xxx.xxd.ddd xxx.xxx.xxx.xxx
!
ip forward-protocol nd
!
ip http server
ip http authentication local
ip http secure-server
ip http timeout-policy idle 60 life 86400 requests 10000
ip flow-export source GigabitEthernet0/1
ip flow-export version 9
ip flow-export destination 192.168.1.120 9996
!
ip nat inside source list NAT interface GigabitEthernet0/0 overload
ip route 0.0.0.0 0.0.0.0 aaa.aaa.aaa.aaa
!
ip access-list standard NAT
permit 192.168.1.0 0.0.0.255
permit 192.168.3.0 0.0.0.255
permit 192.168.4.0 0.0.0.255
permit 192.168.5.0 0.0.0.255
permit 192.168.6.0 0.0.0.255
!
!
!
snmp-server community public RO
snmp-server community private RW
snmp-server ifindex persist
</code></pre>

<p>Please what am I doing wrong?</p>

<p>EDIT:</p>

<p>As Avery Abbott requested, here is it from SVOSwitch3</p>

<pre><code>SVOSwitch3#show vlan brief

VLAN Name                             Status    Ports
---- -------------------------------- --------- -------------------------------
1    default                          active    
5    VLAN0005                         active    Fa0/1, Fa0/2, Fa0/3, Fa0/4
                                                Fa0/5, Fa0/6
6    VLAN0006                         active    Fa0/7, Fa0/8, Fa0/9, Fa0/10
                                                Fa0/11, Fa0/12, Fa0/13, Fa0/14
                                                Fa0/15, Fa0/16, Fa0/17, Fa0/18
                                                Fa0/19, Fa0/20, Fa0/21, Fa0/22
                                                Fa0/23, Fa0/24
1002 fddi-default                     act/unsup 
1003 token-ring-default               act/unsup 
1004 fddinet-default                  act/unsup 
1005 trnet-default                    act/unsup 


SVOSwitch3#show interface trun    

Port        Mode             Encapsulation  Status        Native vlan
Gi0/1       on               802.1q         trunking      1
Gi0/2       on               802.1q         trunking      1

Port        Vlans allowed on trunk
Gi0/1       1-4094
Gi0/2       1-4094

Port        Vlans allowed and active in management domain
Gi0/1       1,5-6
Gi0/2       1,5-6

Port        Vlans in spanning tree forwarding state and not pruned
Gi0/1       1,5-6
Gi0/2       1,5-6
SVOSwitch3#show run int gi0/1
Building configuration...

Current configuration : 59 bytes
!
interface GigabitEthernet0/1
 switchport mode trunk
end

SVOSwitch3#show run int gi0/2
Building configuration...

Current configuration : 59 bytes
!
interface GigabitEthernet0/2
 switchport mode trunk
end
</code></pre>

<p>And for the running config, I have,</p>

<pre><code>version 12.2
no service pad
service timestamps debug datetime msec
service timestamps log datetime msec
no service password-encryption
!
hostname SVOSwitch3
!
boot-start-marker
boot-end-marker
!
enable secret 5 1/
!
!
!
no aaa new-model
system mtu routing 1500
!
!
!
!         
crypto pki trustpoint TP-self-signed-14
     enrollment selfsigned
 subject-name cn=IOS-Self-Signed-Certificate-14
 revocation-check none
 rsakeypair TP-self-signed-14
!
!
crypto pki certificate chain TP-self-signed-14
  quit
!
!
!
spanning-tree mode pvst
spanning-tree extend system-id
!
vlan internal allocation policy ascending
!
!
!
interface FastEthernet0/1
 switchport access vlan 5
!
interface FastEthernet0/2
 switchport access vlan 5
!
interface FastEthernet0/3
 switchport access vlan 5
!
interface FastEthernet0/4
 switchport access vlan 5
!
interface FastEthernet0/5
 switchport access vlan 5
!
interface FastEthernet0/6
 switchport access vlan 5
!
interface FastEthernet0/7
 switchport access vlan 6
!
interface FastEthernet0/8
 switchport access vlan 6
!
interface FastEthernet0/9
 switchport access vlan 6
!
interface FastEthernet0/10
 switchport access vlan 6
!         
interface FastEthernet0/11
 switchport access vlan 6
!
interface FastEthernet0/12
 switchport access vlan 6
!
interface FastEthernet0/13
 switchport access vlan 6
!
interface FastEthernet0/14
 switchport access vlan 6
!
interface FastEthernet0/15
 switchport access vlan 6
!
interface FastEthernet0/16
 switchport access vlan 6
!
interface FastEthernet0/17
 switchport access vlan 6
!
interface FastEthernet0/18
 switchport access vlan 6
!
interface FastEthernet0/19
 switchport access vlan 6
!
interface FastEthernet0/20
 switchport access vlan 6
!
interface FastEthernet0/21
 switchport access vlan 6
!
interface FastEthernet0/22
 switchport access vlan 6
!
interface FastEthernet0/23
 switchport access vlan 6
!
interface FastEthernet0/24
 switchport access vlan 6
!
interface GigabitEthernet0/1
 switchport mode trunk
!
interface GigabitEthernet0/2
 switchport mode trunk
!
interface Vlan1
 ip address 192.168.1.9 255.255.255.0
 no ip route-cache
!
ip default-gateway 192.168.5.1
ip http server
ip http secure-server
</code></pre>

<p>That was picked from the SVOSwitch3.</p>
","<p>All thanks to the comment by Avery Abbott, I was able to solve the problem by making sure that all [cascading] switches have the corresponding vlans created so that the trunks can carry data for that vlan across the switch.</p>

<p>thanks all.</p>
","9978"
"Cisco VPN Logs Do Not Show The Username","2391","","<p>I have a Cisco VPN (not sure exactly which hardware) whose logs are forwarded to our Splunk server. It appears the username is redacted. All I see are asterisks. Is this something that can be changed on the VPN and how? Hopefully there is enough consistency between devices that the question can be answered. Thanks! </p>

<p>Snip below:</p>

<pre><code>IP  xx.xx.xx.xx
_raw    Jun 26 10:23:31 xx.xx.xx.xx %ASA-6-113005: AAA user authentication Rejected : reason = Invalid password : server = xx.xx.xx.xx : user = ***** : user IP = xx.xx.xx.xx   
_time   2014-06-26T10:23:31.000-0400    
app     
date_hour   10  
date_mday   26  
date_minute 23  
date_month  june    
date_second 31  
date_wday   thursday    
date_year   2014    
date_zone   local   
eventtype       
host    xx.xx.xx.xx 
ids_type        
index   main    
linecount   1   
pid     
process %ASA-6-113005   
product     
punct   __::_..._%--:_____:__=___:__=_..._:__=_*****_:___=  
reason  Invalid 
server  xx.xx.xx.xx 
source  syslog  
sourcetype  syslog  
splunk_server   xx.xx.xx    
tag::eventtype      
timeendpos  15  
timestartpos    0   
user    *****   
vendor      
</code></pre>
","<p>This is a Splunk issue and not a network issue. As you can see from my Splunk log of an invalid login attempt (non-LDAP though):</p>

<pre><code>Jul  5 17:55:52 firewall.local %ASA-6-113015: AAA user 
  authentication Rejected : reason = Invalid password : local database : 
  user = legioxi
</code></pre>

<p>It shows the username in plaintext. The syslog ID is different because I do not have LDAP configured on my lab ASA.</p>

<p>The answers you seek will most likely be found in the Splunk manual as it will be as YLearn mentioned, in your <a href=""http://docs.splunk.com/Documentation/Splunk/6.1.1/Data/Anonymizedatausingconfigurationfiles"" rel=""nofollow"">splunk config files</a></p>

<p>This is an <a href=""http://www.cisco.com/c/en/us/td/docs/security/asa/syslog-guide/syslogs/logsevp.html#pgfId-1053227"" rel=""nofollow"">explanation (cisco.com)</a> of the syslog ID you're seeing.</p>
","9796"
"QoS or more bandwidth?","2391","","<p>Being in SP field I sometimes hear folks say ""we do not need QoS, just let's make sure we have enough bandwidth"".
This has always been bothering me, because currently we have a network without any QoS in the core and there are no problems with services (Internet, IPTV, VPN).</p>

<p>The core links (bundled 10Gs) are utilized in 50%-70% at peak time. </p>

<p>Correct me if I'm wrong, but I think that we are just lucky enough to carry traffic that is not that bursty to fill up the links.</p>

<p>My understanding is that because of bursty nature of IP traffic QoS should be implemented on core links regardless of their utilization, or in the worst case, 
when the utilization reaches 50%. </p>

<p>EDIT:</p>

<p>Thanks for your comments. Actually my primary concern are microbursts. 
I understand the result of a microburst as a packet drop which occur when there is no noticeable congestion on an interface. I also understand that microbursts happen in every packet network.</p>

<p>I was curious if there is any ""magic"" link utilization percentage below which microbursts are harmless? (and we should be safe without QoS). 
I think I saw 50% as a best practice in some QoS book, but I don't remember the details.</p>
","<p>There are at least two questions in your one question :)</p>

<p>""Throwing more bandwidth"" at the problem doesn't solve anything, it just hides the problem. In IP network you should always prepare baseline QoS architecture to guarantee delivery of critical traffic and manage other traffic parameters (like jitter or delay) for different classes of traffic. You can take a look into NANOG presentation archives for extensive amount of material generated in that kind of discussions, with usual outcome being ""yeah, maybe we should do QoS"". </p>

<p>Traditionally, QoS is perceived as the ""hard thing to do right"" as the PHB model for IP network is indeed quite complex to plan and implement right. Historically, it was usually also connected with specific hardware requirements, architectures and configuration complexity which didn't help. But when you look at traditional SPs and their networks - they generally implement at least 3-4 classes of traffic and QoS policies to manage traffic flow within their networks. Throught last couple of years traditional certification testing tends to move from testing 4 classes and queues to 8-16 for transport network.</p>

<p>OTOH, not having any QoS in the network usually also means those saying ""QoS is not needed, I don't have it and everything works OK"" have no actual means of monitoring how the network behaves and what is the actual environment applications have for their own use. TCP has great adaptability to network conditions and sometimes problems are not visible with ""naked"" eye, but become painfully obvious when we dig into details and bit flows.</p>

<p>As for the second part of your question - there is nothing that can help you to fight with microburst apart from having deep enough buffers to accomodate them. Which leads almost immediately to things like buffer bloat and additional delays on the path if you tend to simplify and throw packet buffers with memory fast enough to actually deal with microburst (which is not simple and cheap). QoS unfortunately (at least - the mechanisms available in the usual toolset of networking gear) doesn't help 'control' microburst. Good news however is that You'll find microburst dangerous or damaging usually only in HPC and generally DC environments, not in typical transport networks.</p>
","17865"
"massive ping times and a failing wireless sytem","2391","","<p>I work at a school district that has about 1000 students that is split into two buildings.  In our junior high/high school building, we have about 300 student laptops with about 25 teachers that each have a laptop and most also have a desktop with a wireless connection.  </p>

<p>Our elementary building has about 200 student laptops and another 20 teacher laptops.</p>

<p>Here is our problem.  All year we have had a seemingly sporadically slow network.  At certain periods of the day, things become very bogged down, people begin losing their connections often...it's a nightmare.</p>

<p>We started with a Ubiquiti Unifi wireless system with full building coverage in both buildings and netgear GS748TPS, 748TP, and 724TPS switches.  The entire wireless system is built on a cat 6 infrastructure.</p>

<p>If a teacher laptop is connected to an access point, everything is fine.  When a jr high or high school student connects to an access point and tries to do anything over the network (pulling files from the file server, udp desktop monitoring traffic) except for http access, ping times for everybody on that access point, including teachers, skyrockets into the thousands.</p>

<p>In the elementary building, there is not a single problem with any connections or ping times.  If I ping from the high school to a laptop in the elementary school 8 miles away, I get an average of 1ms ping times.  </p>

<p>We have tried removing any software that could create an issue, we have tried removing all startup programs, we have replaced access points to see if it was a bad access point, we have replaced the POE adapters, we have replaced the ends on the cable runs, we have tried reverting everything from the netgear switches to our old HP Procurve 2810-48g switches and removing the netgears entirely, we have tried removing the Unifi access points and putting our HP Procurve wireless system back into production, we have tried any version of the wireless driver driver for that particular laptop that we can find.  </p>

<p>None of these issues happened at all last year, but it has been non stop this year and it is severely detrimental to any classroom activities.  We also have standardized testing coming up.  </p>

<p>I am pretty much at a loss as to what else could possibly be causing the problem and am very open to any and all suggestions and recommendations.  Please let me know if there are any resources that would help out.</p>
","<p>The <em>actual</em> solution is to change a few settings of the wireless NIC in windows.  </p>

<p>Three things needed to be changed in the card's settings in order to fix this.</p>

<p>1) Change the 802.11n channel width from the default (20) to auto</p>

<p>2) Turn off bluetooth in the card's properties</p>

<p>3) Set the Roaming aggressiveness to High</p>

<p>Immediately after, we were getting 100 Mbps downloads over the LAN when we were previously getting 500 Kbps.</p>

<p><em><strong>The originally accepted solution below is no longer valid.  Unifi products are not, in fact, the cause of the issue.</em></strong></p>

<p>After extensive testing and multiple situations, it appears that the Intel Centrino 2230 Wireless NIC is simply incompatible with Ubiquiti Unifi access points.  </p>

<p>Replacing the NIC with a 1x1 WLAN NIC from previous machines completely alleviated the problem.  Connecting to the access points of three other brands worked fine as well.</p>

<p>We attempted to connect them to a Unifi AC access point, as well.  Nothing changed.</p>

<p>Neither updating nor backdating drivers on the chipset and WLAN didn't work.  </p>

<p>It appears to just be totally incompatible between the Centrino 2230 WLAN NIC and Ubiquiti Unifi access points.</p>
","6198"
"vlan/trunk/etherchannel differences in cisco switch (noob lots of q's)","2388","","<p>I am just learning on a 2948G managed switch. I have 48 ports and I would like to divide those up into 4 networks with 12 ports each. I don't want them to be able to communicate between networks at all as a security measure.</p>

<p>I know I have a lot of questions and I have tried to read and understand these on my own. I have put the more important questions at the top if you can answer any of them I would appreciate it!</p>

<p>I am trying to understand the difference between VLAN and trunking and etherchannel and which one would do what I am trying to do above. It sounds like VLAN might be it, but isn't that about the same as just letting the connected devices assign static IPs in the same range? Or does setting it up as a VLAN ensure that none of the devices try to change their IP to connect to another port in another subnet that I don't want it to access?</p>

<p>Does trunking in effect connect those separate networks? For instance, if network A has ports 1-12 and network B 13-24, would port 3 and 18 still be able to communicate with trunking on?</p>

<p>Also I'm not sure if there are specific groups of ports that would make traffic move more smoothly. Eg) is there one central hub in the back of the switch that all data going form port 1->2 and also 1->48 will pass through? Or can 1 communicate with 2 without interfering with data from 47 to 48? Or when the ports are all in module 1, does that mean the module itself has a central hub that all data will pass through?</p>
","<p>What you are trying to achieve is done with VLANs. A VLAN is basically a logical L2 domain so two hosts on the same VLAN will be able to communicate without a router.</p>

<p>Trunking basically means 'allow more than one VLAN on the same port'. You can do that to allow a host to be able to connect to different VLANs using the same port or for interswitch communications. If you have two switches you will want to connect them with a trunk so the hosts in VLAN A on SW1 can communicate with hosts in VLAN A on SW2.</p>

<p>Etherchannel is used to aggregate two ports into one logical port adding the bandwidth.</p>

<p>About the architecture of this specific hardware I am not sure. Usually ports are connected by groups. Ports 1-8 belong to the same ASIC, so port 2 to get to port 9 (which is in a different ASIC) will have to go through the backplane. However, from port 1 to port 2 you do not need to get to the backplane. However, this is very platform specific so read the switch architecture to be sure about this.</p>

<p>Regards.</p>
","2441"
"How effective is Channelfly from Ruckus?","2380","","<p>From what I can tell, best practice for setting up WLANs in the 2.4GHz spectrum has been to limit channel selection to 1, 6, and 11.</p>

<p>Channelfly does away with that meaning any channel can be used if the algorithm thinks it is less congested.</p>

<p>Has anyone had experience with this in practice? I have seen a few reports that it is not very effective.</p>

<p>In my opinion, it also makes it harder for other techs such as 802.15.4 to co-exist in a friendly way.</p>

<p>How effective is channelfly in reality?</p>
","<p>Channelfly, and similar features from other manufacturers (e.g., Cisco Clean Air) attempt to improve wifi performance by directing an AP to change to a different channel when it detects interference.  The idea is that the AP can switch to another channel to avoid the interference, for example, from a microwave oven or even an overly crowded channel. </p>

<p>While this sounds good in theory, there are a couple of factors that limit its effectiveness.  First, there are only 3 usable channels in the 2.4GHz band.  Because the entire band is often crowded and shares the spectrum with non-wifi devices (microwave ovens, garage door openers, wireless video cameras, <em>etc.</em>), its is often the case that if one channel is being interfered with, so are the other two.  Microwave ovens operate approximately on channel 9, where they interfere with both 6 an 11.  That leaves just channel 1 as a possible substitute.  There is no guarantee that it has less interference or lower channel utilization.</p>

<p>Second, in a large wireless system, there is usually a central controller that controls and coordinates the channel of every access point.  The controller tries to adjust each APs channel so that no two adjacent APs are on the same channel (reducing co-channel interference).  If one AP has to change channels to avoid interference, then its surrounding APs also have to change channels to avoid co-channel interference.  That in turn causes other APs to change, cascading the channel change throughout the network.  You might end up reducing interference in one location, only to increase it somewhere else.</p>
","6940"
"Selecting IPv6 Unique Local Addresses (ie, choosing least-sig 40 bits)","2378","","<p>We started with fec0::/10 for site-local addresses -- but that is now deprecated. Instead, we now have fc00::/7 reserved, with fd00::/8 dedicated to /48 nets for Unique Local Addresses.</p>

<p>What's the best practice for picking the least-sig 40 bits to give you an org-level /48?</p>

<p>...is everyone using the <a href=""http://www.sixxs.net/tools/grh/ula/"">SIXXS</a> voluntary registry? (seems dubious to me)<br>
...just use <a href=""http://tools.ietf.org/html/rfc4193"">RFC4193</a>'s guidance for picking (via it's algo)?<br>
...anyone have an online implementation of that algo?</p>

<p>Picking our 40 bits doesn't seem hard; I'm just trying to pick them the ""right"" way, if I can.</p>
","<p>Its always best to stick to the relevant RFC when possible. In this case, your two options aren't mutually exclusive. SIXXS' generator should actually generate you a prefix based on RFC4193's algorithm.</p>

<p>So you would just generate your prefix using SIXXS' tool (or another one you find), and if you feel like it, register it with SIXXS.</p>
","274"
"Interface NAT vs Policy based NAT on Juniper SSG ScreenOS","2375","","<p>I have inherited a network using a mix of SSG140s, 350M and 550M. Each of them is configured with a Trust, Untrust and VPN VR with multiple custom zones on each (we don't use the default zones).</p>

<pre><code>[Zone: ISP Link]--(Untrust-VR)--(Trust-VR)--[Zone: Routed: Internal A]
                                          \
                                           -[Zone: NAT: Internal B]
</code></pre>

<p>I am struggling to understand the difference functional difference between how some of the zone are configured. We have two flavours:</p>

<ul>
<li>Zones with Interface Type Route and policy based NAT applied.

<ul>
<li>The policy is configured to use the egress IP (no DIP)</li>
</ul></li>
<li>Zones with Interface Type NAT, which just standard policies applied.</li>
</ul>

<p>With an Interface in a Zone attached to the Trust-VR set to NAT, I can see from the logs that, NAT is not applied on traffic going to other Zones attached to the same Trust-VR.</p>

<p>As background I specifically ask because we had an issue with RTMP (TCP media streaming) over a zone configured with Policy based nat. It looked like it should work, the traffic logs shows the NAT being translated correctly but the TCP handshake never completed and no packets came back. I moved the source of the stream to a Zone with is configured with a NAT interface and it worked, the translation looked the same from the logs. This issue was specifically seen on an ssg140.</p>

<p>To sum up:</p>

<ul>
<li>What is the difference between Policy NAT with no DIP and Interface based NAT?</li>
<li>Can I configure all Zones/Interfaces connected to the Trust-VR as NAT and not lose any functionality? </li>
</ul>
","<blockquote>
  <p>What is the difference between Policy NAT with no DIP and Interface
  based NAT? </p>
</blockquote>

<p>Interface-based NAT only works from the Trust zone to the Untrust zone (as in the default zones).  Traffic between other zones will always be routed.  The exception to all this (as you have discovered) is when the destination zone is in the Untrust VR, in which case, all traffic will be source NATted.</p>

<p>This is a hang-over from back in the Netscreen days, where there were no custom zones and most boxes had &lt;=3 usable interfaces.  They were automatically placed into Zones (these were actually silk-screened above the ports).</p>

<p>Policy-based source-NAT on the other hand will be applied whenever traffic matches the policy, regardless of zone/VR.</p>

<p>If you configure both (e.g. set the interface to NAT mode, and then configure a policy-based NAT) then the policy NAT will override the Interface NAT for that traffic.</p>

<blockquote>
  <p>Can I configure all Zones/Interfaces connected to the
  Trust-VR as NAT and not lose any functionality?</p>
</blockquote>

<p>Yes, this should work fine - as above, all this traffic will be routed unless use a Trust or Untrust zone.  If there are any NAT requirements, you can configure policy-based to override specific cases.</p>

<p>References:
Juniper KB6725 - [ScreenOS] Configuration example using interface-based NAT:</p>

<p><a href=""http://kb.juniper.net/InfoCenter/index?page=content&amp;id=KB6725&amp;pmv=print&amp;actp=search&amp;searchid=1236690693051&amp;type=currentpaging"" rel=""nofollow"">http://kb.juniper.net/InfoCenter/index?page=content&amp;id=KB6725&amp;pmv=print&amp;actp=search&amp;searchid=1236690693051&amp;type=currentpaging</a></p>
","26618"
"What's the difference between interdomain and intradomain load balancing?","2373","","<p>So I read that when a router knows two paths with equal cost to a destination it can perform load balancing. This load balancing occurs interdomain or intradomain. I can't undestand that because I know that BGP choose the ""small"" ip address when two paths has the same cost.</p>
","<p>To answer this question, we have to define the term ""domain"". Easily spoken, the Internet is a network of networks. In BGP terminology, there are many Autonomous Systems (AS) on the Internet, each of them being a network (or domain). One company for example may have a very large network, but is represented by a single AS, hence is a single ""node"" in BGP.</p>

<p>The term interdomain routing describes the process of routing prefixes between Autonomous Systems, whereis intradomain routing refers to routing <strong>inside</strong> a single AS.</p>

<p>Im not sure however what you mean with your last sentence. When two paths to the same destination have the same cost (that is in most basic BGP the length of the AS path, hence the number of ASs the route has crossed). For detailed discussion how BGP chooses paths look for example at this <a href=""http://www.cisco.com/c/en/us/support/docs/ip/border-gateway-protocol-bgp/13753-25.html"" rel=""nofollow"">Cisco document</a>.</p>

<p><strong>Update</strong></p>

<p>As turned out in the comments I might have mis-interpreted the OPs question. The question actually is how load-balancing is performed and where are the differences in load-balancing in common interdomain routing protocols and intradomain routing protocols.</p>

<p><strong>Interdomain Routing</strong></p>

<p>BGP, being the de-facto standard for interdomain routing, will not perform load-balancing by default. It can however be configured to do so. Two main options exist here:</p>

<ol>
<li>Configuring BGP to pair using loopback interface and use some unterlying routing (for example static routing or another internal routing protocol) to provide to equal paths to the opposite side, which will effectively turn on load-balancing</li>
<li>Using the BGP multipathing feature, which is however a little more complex. One has to consider whether load-balancing should be performed with an iBGP (internal) or eBGP (external) peer or possibly both. To be candidates for multipathing, the routes must be equal in the following attributes:

<ul>
<li>Weight</li>
<li>Local preference</li>
<li>AS-PATH Length</li>
<li>Origin</li>
<li>MED</li>
</ul></li>
</ol>

<p>You can find detailed information on BGP multipathing by searching for this keyword or having a look at this <a href=""http://www.cisco.com/c/en/us/td/docs/ios/12_2sx/feature/guide/fsxeibmp.html"" rel=""nofollow"">Cisco document</a>.</p>

<p><strong>Intradomain Routing</strong></p>

<p>Most of the internal routing protocols support easier load-balancing. As soon as the one metric being used is equal, multiple equal costs routes can be installed into the routing table. OSPF for example by default uses up to four equal cost routes. Other routing protocols such as EIGRP can even do unequal cost multipathing. Refer to the definition of the actual routing protocol to find out their default behaviour.</p>

<p><strong>Final sentence</strong></p>

<p>To make on thing clear: it is up to the routing protocol whether equal paths can be used or not. In any case, if there are equal paths, both paths are installed into the local forwarding table on the router and other, not ruouting protocol specific, mechanisms such as CEF on Cisco routers are used for the actual load-balancing.</p>
","32543"
"Why are my equal cost LSP's not load balancing equally when using auto-bandwidth?","2372","","<p>First, I'm adding this question and answering myself because this type of behavior was absolutely no where to be found, hopefully it will help someone.</p>

<p><strong>Problem:</strong></p>

<p>We use auto bandwidth to handle the bandwidth subscriptions for our LSPs.  The LSPs are equal cost and appear in our forwarding/routing tables appropriately as available next hops for each destination.</p>

<p>However for a single destination, the 4 equal cost LSPs are not load balancing equally (or even close to equally).  We understand that JUNOS uses a per-flow load balancing algorithm despite the statement ""per-packet"" in the policy to enable load-balancing.  But that does not explain the major difference between each subscription for the LSP (this subscription imbalance happens multiple times per day, it is not a one off occurrence), like so:</p>

<pre><code>jhead@R1&gt; show route protocol rsvp 1.1.1.1 detail

1.1.1.1/32 (2 entries, 1 announced)
        State: &lt;FlashAll&gt;
        *RSVP   Preference: 7/1
                Next hop: 192.168.1.1 via xe-0/0/0.0 weight 0x1 balance 35%, selected
                Label-switched-path LSP1
                Next hop: 192.168.1.2 via xe-1/0/0.0 weight 0x1 balance 35%
                Label-switched-path LSP2
                Next hop: 192.168.1.3 via xe-0/0/1.0 weight 0x1 balance 26%
                Label-switched-path LSP3
                Next hop: 192.168.1.4 via xe-0/0/0.0 weight 0x1 balance 5%
                Label-switched-path LSP4
</code></pre>

<p>R1-R4 are MX480's and CORE-R1-R4 are MX960's.</p>

<p>Below are graphs comparing RSVP subscription and utilization of the LSP.  Red is subscription, green is utilization.  You can see that the utilization follows the reservation almost exactly throughout the day.  We <em>should</em> see subscriptions be very close to each other between the LSPs toward the same destination.</p>

<p><img src=""https://i.stack.imgur.com/bJo2q.png"" alt=""enter image description here"">
<img src=""https://i.stack.imgur.com/UKnU7.png"" alt=""enter image description here"">
<img src=""https://i.stack.imgur.com/zGgbP.png"" alt=""enter image description here"">
<img src=""https://i.stack.imgur.com/qB0H3.png"" alt=""enter image description here""></p>

<p><strong>Topology:</strong></p>

<p>R1 - R4 are ingress routers for all of the LSP's, they have either 2 or 4 LSP's toward each core router.</p>

<p><img src=""https://i.stack.imgur.com/ZEPGD.png"" alt=""enter image description here""></p>

<p><strong>Configuration:</strong></p>

<p>The LSP configuration is a single destination from R1, just as an example.  All LSP's are configured exactly the same way (again, with either 2 or 4).</p>

<pre><code>[edit protocols mpls]
    statistics {
        file mpls-stats;
        interval 300;
        auto-bandwidth;
    }
    traffic-engineering bgp;
    label-switched-path LSP1 {
        to 1.1.1.1;
        optimize-timer 300;
        auto-bandwidth {
            adjust-interval 7200;
            adjust-threshold 10;
            minimum-bandwidth 100m;
            maximum-bandwidth 4g;
            adjust-threshold-overflow-limit 2;
            adjust-threshold-underflow-limit 4;
        }
        primary primary-loose;
    }
    label-switched-path LSP2 {
        to 1.1.1.1;
        optimize-timer 300;
        auto-bandwidth {
            adjust-interval 7200;
            adjust-threshold 10;
            minimum-bandwidth 100m;
            maximum-bandwidth 4g;
            adjust-threshold-overflow-limit 2;
            adjust-threshold-underflow-limit 4;
        }
        primary primary-loose;
    }
    label-switched-path LSP3 {
        to 1.1.1.1;
        optimize-timer 300;
        auto-bandwidth {
            adjust-interval 7200;
            adjust-threshold 10;
            minimum-bandwidth 100m;
            maximum-bandwidth 4g;
            adjust-threshold-overflow-limit 2;
            adjust-threshold-underflow-limit 4;
        }
        primary primary-loose;
    }
    label-switched-path LSP4 {
        to 1.1.1.1;
        optimize-timer 300;
        auto-bandwidth {
            adjust-interval 7200;
            adjust-threshold 10;
            minimum-bandwidth 100m;
            maximum-bandwidth 4g;
            adjust-threshold-overflow-limit 2;
            adjust-threshold-underflow-limit 4;
        }
        primary primary-loose;
    }

[edit protocols rsvp]
load-balance bandwidth
interface xe-0/0/0.0 {
    bandwidth 9g;
}
interface xe-0/0/1.0 {
    bandwidth 9g;
}
interface xe-1/0/0.0 {
    bandwidth 9g;
}

[edit routing-options forwarding-table]
export load-balance;
</code></pre>
","<p>The problem is the:</p>

<pre><code>[edit protocols rsvp]
load-balance bandwidth
</code></pre>

<p>If you look at the Juniper documentation for <a href=""http://www.juniper.net/techpubs/en_US/junos13.1/information-products/topic-collections/nog-mpls-frr/index.html?topic-19850.html"" rel=""nofollow noreferrer"">Unequal Cost Load Balancing RSVP LSPs</a>, it states:</p>

<blockquote>
  <p>For uneven load balancing using bandwidth to work, you must have at least two equal-cost LSPs toward the same egress router and at least one of the LSPs must have a bandwidth value configured at the [edit protocols mpls label-switched-path lsp-path-name] hierarchy level. <strong>If no LSPs have bandwidth configured, equal distribution load balancing is performed. If only some LSPs have bandwidth configured, the LSPs without any bandwidth configured do not receive any traffic.</strong></p>
</blockquote>

<p>This implies that regardless of that feature being configured, that no equal cost load balancing will happen if you do not statically set a bandwidth value on an individual LSP, like so:</p>

<pre><code>[edit protocols mpls label-switched-path LSP1]
bandwidth 2g
</code></pre>

<p>However, auto-bandwidth does in fact count as setting a bandwidth value, despite it not being present in the configuration.  </p>

<p>When auto bandwidth is enabled, RPD will begin monitoring bandwidth consumption.  It will assign bandwidth values based on utilization, and then the ""load-balance bandwidth"" statement in RSVP will immediately begin attempting to keep the traffic ratios within those subscriptions (35, 35, 26, 5 respectively).  The problem with this is that it never gives auto-bandwidth the chance to adjust evenly, because the ""load-balance bandwidth""s goal, is to keep the traffic as close to those ratios as possible.  This makes sense when they're  set of something like, 10, 30, 20, 40.</p>

<p>It is essentially a race condition between ""load-balance bandwidth"" and ""auto-bandwidth""</p>

<p>After removing:</p>

<p>[edit protocols rsvp]
load-balance bandwidth</p>

<p>Traffic adjusted (with a slight hiccup, seen below):</p>

<p><strong>NOTE:</strong> This is an example from a different router that was affected by the same issue.</p>

<pre><code>jhead@R1&gt; show log mpls-stats

LSP1 (LSP ID 3388, Tunnel ID 2646)    177150801 pkt   155450491134 Byte 178572 pps 152286259 Bps Util 228.46% Reserved Bw 66660264 Bps
LSP2 (LSP ID 3393, Tunnel ID 2647)            0 pkt              0 Byte      0 pps        0 Bps Util  0.00% Reserved Bw 116698880 Bps
</code></pre>

<p>Since you remove the ability to load-balance (for RSVP), the PFE will reprogram to only a single path until an auto-bandwidth adjust occurs automatically, or you can force an adjustment:</p>

<pre><code>request mpls lsp adjust-autobandwidth
</code></pre>

<p>And below, are the bandwidth adjusts for 2 LSP's with the same symptoms, the configurations change and adjustments happened mid-day Friday, you can see the different in subscriptions almost immediately.</p>

<p><img src=""https://i.stack.imgur.com/By3XY.png"" alt=""enter image description here"">
<img src=""https://i.stack.imgur.com/ZE1XO.png"" alt=""enter image description here""></p>
","19368"
"How do testers (i.e. Fluke) get the port they're connected to?","2365","","<p>At work I've been tasked to create a program that acts similar to Fluke testing devices (such as LinkRunners) but will be much more extensive and specific to our needs. One of the capabilities that has been requested is determining the interface port that the testing device is currently connected to.</p>

<p>So before I run off into detail, <strong>does Cisco deploy a standard or proprietary protocol that handles all this?</strong> Somehow a Fluke LinkRunner is retrieving the information without logging in administratively, an operation that I would like to mimic.</p>

<p>To put this in perspective, a laptop with the loaded software will either connect directly to an Ethernet port on the switch or through permalink by testing on the jack-end where it is terminated for the customer. Like Fluke testing devices they would like for it to display the switch name, interface, port, VLAN, etc. so that the technician may verify that everything is working properly.</p>

<p>What I don't know (since I'm only a student engineer being trained on the job) is how Cisco communicates with a testing device and provides this information. I understand that you can determine what a device is connected to on the administrative end by checking for the MAC Address in the ARP table or looking up the client IP but this is to work on the front-end. I could try to use SNMP but with how the college has set up the network the switches are on a different, secure VLAN. The laptop would not be able to jump onto this VLAN to run SNMP and fetch the required information.</p>

<p>Ideas, suggestions, questions, critcism?</p>

<p><strong>EDIT</strong></p>

<p>CDP/LLDP was pointed out and I feel silly for working with these but not having had yet researched them. From this I can get information, however this brings up another question if it must be enabled on the switch to allow retrieving said information.</p>

<p>A comment upon the answer has finished fulfilling my questions. Special thanks to the two who helped!</p>
","<p>I'm almost 100% positive that for Cisco switches it would be CDP (Cisco Discovery Protocol) while on other vendors, they would use the industry standard LLDP (Link Layer Discovery Protocol). From CDP, you can get information such as switch port, VLAN, switch name, and link negotiation info (e.g. full vs half duplex) to name a few.</p>

<p>I hope this helps.</p>
","16885"
"DHCPv6 (with PD) client on Juniper SRX","2365","","<p>OK, this one may technically be off-topic since I'm actually doing this at home, but I could easily see the exact same scenario arises in a small enterprise type of setup...</p>

<p>Using an SRX210 to be a router for a Time Warner Cable connection (using a DOCSIS mini-pim on the SRX, but I don't think that's actually relevant to this).  Running 12.1X46-D10.2.  Trying to get IPv6 working on the cable setup (confirmed that TWC is providing IPv6 via DHCPv6 in our area).</p>

<p>Here's what I've got in relevant config sections (if you want to see any other parts of the config, feel free to ask, but I think I've gotten everything relevant):</p>

<pre><code>interfaces {
    cm-1/0/0 {                          
        unit 0 {                        
            family inet {               
                dhcp-client;            
            }                           
            family inet6 {              
                dad-disable;            
                dhcpv6-client {         
                    client-type statefull;
                    client-ia-type ia-na;
                    client-ia-type ia-pd;
                    rapid-commit;       
                    client-identifier duid-type duid-llt;
                    req-option dns-server;
                    req-option fqdn;    
                    retransmission-attempt 9;
                }                       
            }                           
        }                               
    }
}

security {                              
    forwarding-options {                
        family {                        
            inet6 {                     
                mode flow-based;        
            }                           
        }                               
    }
    zones {                                                           
        security-zone untrust {         
            interfaces {                
                cm-1/0/0.0 {            
                    host-inbound-traffic {
                        system-services {
                            dhcp;       
                            dns;        
                            ntp;        
                            ping;       
                            ssh;        
                            traceroute; 
                            dhcpv6;     
                            bootp;      
                        }               
                        protocols {     
                            router-discovery;
                        }               
                    }                   
                }                       
            }                           
        }                               
    }                                   
}
</code></pre>

<p>""show dhcpv6 client statistics"" shows DHCPV6_SOLICIT messages being sent, but absolutely nothing else.</p>

<p>I know dhcpv6 client support in the SRXen is very new, but does anyone else have any experience troubleshooting this?</p>

<p>One hypothesis that I'm trying to check is that it apparently is sending the DHCP request with an IAID (whether for the IA-NA or IA-PD) of 0x00000000.  Perhaps TWCs DHCPv6 server doesn't like that value?</p>

<p>Anyone have any ideas?</p>
","<p>OK, so I have revisited this issue several times, and now have working IPv6 with TWC via my SRX.  I wish I could mark several answers and comments as correct as several of you gave me parts of the overall solution.  Thank you all, for that.  I've upvoted the answers that contributed to give as much as I could to contributors.</p>

<p>As it turns out, the DOCSIS cable modem mini-pim <strong>was</strong> part of the problem.</p>

<p>It seems that TWC will not send IPv6 RA messages to you if you have an ""unsupported"" modem.</p>

<p>So the solution to my problem was to go by a TWC supported modem (I got a Motorola SB6141), and connect it to one of the gigabit ports on my SRX.  My interface config now looks like:</p>

<blockquote>
<pre><code>    unit 0 {                        
        family inet {               
            dhcp-client;            
        }                           
        family inet6 {              
            dad-disable;            
            dhcpv6-client {         
                client-type statefull;
                client-ia-type ia-pd;
                client-ia-type ia-na;
                inactive: update-router-advertisement {
                    interface ge-0/0/0.0;
                }                   
                client-identifier duid-type duid-ll;
            }                       
        }                           
    }
</code></pre>
</blockquote>

<p>As one of the answers and comments alluded to, apparently you can't send a IA-PD prefix hint with the SRX, and TWC gives a /64 when it doesn't get a hint.  The SRX then tries to subdivide the /64 65,536 ways and picks the first resultant network to delegate...which means it was trying to put a /80 on ge-0/0/0, which kinda doesn't help much as SLAAC doesn't work.  :/</p>

<p>I went with the work around, to see what /64 I get, then manually configured protocol router-advertisement on the inside interface with the block I was delegated (which should be stable as long as they system's DUID remains the same).  Kinda lame, but it's where we are right now.</p>

<p>I will continue to keep an eye on this entry to see if anyone has other ideas on making this a better setup.  If you have questions on parts of it that I didn't go into enough detail on, please let me know and I'll edit.</p>
","20777"
"Why does the MTU need to match on interior link state routing protocols like EIGRP and OSPF?","2361","","<p>If one tries to configure the neighbor adjacencys  without matching MTU, The routers fail to become neighbors.  I assume this is to protect the routing protocol from it self but I don't understand what it is saving itself from?  What would(Could) the consequence be without matching MTU?</p>
","<p><a href=""https://networkengineering.stackexchange.com/questions/17298/why-does-the-mtu-need-to-match-on-interior-link-state-routing-protocols-like-eig#comment25399_17298"">Pete said</a>:</p>

<blockquote>
  <p>I can't think of a situation where you would need this. I just wanted to know what the logic was that makes this an explicit check in these routing protocols.</p>
</blockquote>

<h1>Short answer</h1>

<p>Routing protocols are some of the most fundamental building blocks on the internet; we need them to be very reliable in every possible case.  It does no good to bring up an OSPF or EIGRP adjacency on a mismatched MTU.</p>

<p>Routing protocols must remove any potential mismatched MTUs from the router's forwarding path.</p>

<h1>Long answer</h1>

<p>I can think of three possible situations where you'd find mismatched IGP MTUs...</p>

<ol>
<li><em>Unintentional MTU mismatch</em> at Layer2 (for instance, if someone accidentally mismatched MTUs on a serial line, or different vendors had <a href=""http://www.net-gyver.com/?p=1086"" rel=""nofollow noreferrer"">different default MTUs</a> on the same media)</li>
<li>Matching Layer2 MTUs, but a the router implementation has <a href=""https://tools.cisco.com/bugsearch/bug/CSCse01519"" rel=""nofollow noreferrer"" title=""Some old versions of IOS didn&#39;t handle GRE Tunnel MTUs correctly""><em>bug</em> which miscalculates the required interface IP MTU</a></li>
<li><em>Intentional MTU mismatch</em></li>
</ol>

<p>IP MTUs are directly correlated to Layer2 MTUs (at least for Case 1, above).  No matter what we do, we are always at the mercy of mitigating the problems from unintentional Layer2 MTU mismatches, since there is no Layer2 MTU discovery mechanism (unlike IP, which has ICMP error messages).</p>

<p>This means that we have to do everything possible to avoid Layer2 MTU mismatches, even if Cases 2 and 3 above are casualties of mitigating problems with Case number 1.  Case 1 has colossal implications unless we solve it; i.e. black-holing all traffic just because we permitted mismatched MTUs.</p>

<p>We're always limited to the least common denominator on the link.  Frames larger than the receive MTU of an interface are silently discarded, and the router has <em>no way of knowing</em> whether the MTU was intentionally mismatched, or whether it happened accidentally.</p>

<p>Consequently, EIGRP and OSPF require valid Layer2 adjacencies <sup>Note 1</sup> (including MTUs).</p>

<blockquote>
  <p>What would(Could) the consequence be without matching MTU?</p>
</blockquote>

<p>Quoting <a href=""https://tools.ietf.org/html/rfc2329#page-4"" rel=""nofollow noreferrer"" title=""RFC 2329, Page 4"">John Moy (OSPF's author) in RFC 2329 Page 4</a>:</p>

<ul>
<li>Problems with all IP forwarding</li>
<li>OSPF Problems</li>
</ul>

<p>Also quoting him from the <a href=""http://marc.info/?l=ms-ospf&amp;m=103430314528495&amp;w=2"" rel=""nofollow noreferrer"">OSPF mailing list</a>:</p>

<p><a href=""http://marc.info/?l=ms-ospf&amp;m=103430314528495&amp;w=2"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/DhFT1.png"" alt=""John Moy - OSPF MTU mismatches"" title=""John Moy commenting on MTU mismatches""></a></p>

<hr>

<p><sup>Note 1</sup> some people misunderstand the meaning of adjacency as strictly an IP routing protocol concept.  This assertion misses the reality that everything (including IP) <a href=""https://networkengineering.stackexchange.com/a/7285/775"">requires matching layer2 MTUs</a>, for Layer2 domains to work properly.</p>

<p>One of the most important functions of a routing protocol is building a valid FIB / CEF / forwarding table.  That table maps the information learned via routing protocols to <a href=""https://networkengineering.stackexchange.com/a/1528/775"">layer2 rewrite info</a>.   Those Layer2 relationships on the same physical link are what Cisco also calls adjacencies.</p>
","17301"
"What is SNR Margin and Line Attenuation?","2351","","<p>I'm currently using an adsl connection and last week an engineer from my ISP came and told me that my SNR margin and line attenuation is not good, and they need to replace the main telephone cable to provide cable tv. I tried researching on SNR margin and line attenuation but I'm not sure how accurate the information are. So, can anyone explain me what is SNR margin and line attenuation?</p>
","<p>The SNR margin is the <strong>Signal to Noise Ratio</strong> margin.</p>

<p>Signal to Noise Ratio is the relation between the <code>data signal level</code> and the <code>noise level</code>. 
Even the most perfect cable absorbs some noise. This <em>""noise""</em> is electromagnetic interference produced by:</p>

<ul>
<li><p>other cables running near the cable.</p></li>
<li><p>Faulty connectors.</p></li>
<li><p>Motors or transformers near the cable.</p></li>
<li><p>Radio systems.</p></li>
</ul>

<p><a href=""https://i.stack.imgur.com/37eg0.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/37eg0.gif"" alt=""enter image description here""></a></p>

<p>If the noise is strong then the signal cannot be recognized.</p>

<p>Higher ratios means better cables. Below 10dB is very bad and more than 20dB is good.</p>

<p>At higher ratios, more speed can be achieved and lower ratios mean error-prone cable and lower speeds.</p>

<p>The SNR margin is the difference between  the SNR of the cable and the SNR needed to get an specific speed.</p>

<p>Suppose that the SNR of the cable is 34dB and the SNR to sync at 6Mb is 30dB, then the SNR margin is 34-30 = 4dB</p>

<hr>

<p><strong>Attenuation</strong></p>

<p>Every cable on earth suffers of attenuation. It is a measure of how the signal <strong>loses strength</strong> when running through the cable. </p>

<p><a href=""https://i.stack.imgur.com/WKc28.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/WKc28.jpg"" alt=""enter image description here""></a></p>

<p>Suppose you put <code>5 volts</code> in the end of a 1 Kilometer cable. If you measure the voltage in the other end you get, for example <code>4.5 volts</code>. There was an attenuation of the original voltage. If the cable was longer, for example, 5 kilometers then the voltage on the far side could be very low.</p>

<p>For data signal this is key because if the original signal is strongly atternuated it could be gibberish for the equipment.</p>
","43792"
"Is ATM still used as a transport protocol?","2351","","<p>In addition to reading new material, I enjoy reading older networking books in attempt to see where we've come from and possibly where we're going. Currently, I'm reading a book called Cisco LAN switching, which was published in 1999 as part of the CCIE Professional Development series. The book talks quite a bit about using ATM in network backbones, and it occurred to me that I rarely see anything about ATM anymore in today's network engineering. </p>

<p>Is ATM used anymore or has it mostly been replaced with other technologies at this point in time?</p>
","<p>It is still used a bit, but most providers are phasing it out.</p>
","1796"
"How can ISPs on one continent connect to ISPs on another continent?","2346","","<p>How can ISPs on one continent connect to ISPs on another continent? From a physical layer standpoint? </p>

<p>Say one ISP is located in Asia and another one in Europe how would they connect their fiber optic cable to exchange traffic? Also how would they connect physically through IXP (<a href=""http://en.wikipedia.org/wiki/List_of_Internet_exchange_points_by_size"" rel=""nofollow"">Internet Exchange Points</a>). </p>

<p>Do they have to drag their fiber optics cable all the way to these locations?</p>
","<p>There are a number of things ISP's do:</p>

<ul>
<li>drag bundles of fibers across continents. Since this is very costly, only a smallnumber of very large companies do this and many ISP's rent fiberpairs from these companies</li>
<li>rent capacity (a wavelength, VLAN, MPLS circuit, etc) between to an IXP from a company who owns (or rents) fibers. Since capacity on fibers is shared, this usually is less costly</li>
<li>buy IP <a href=""https://en.wikipedia.org/wiki/Internet_transit"" rel=""noreferrer"">transit</a> from a transit provider. These transit providers typically have their own global connectivity. Transit providers can offer ISP's routes to the entire internet, so an ISP does not have to be present on every IXP to connect to every other ISP on the planet. </li>
</ul>

<p>The last option is most common. There is only a limited number of transit providers who don't buy transit from another ISP, they're usually called <a href=""https://en.wikipedia.org/wiki/Tier_1_network"" rel=""noreferrer"">Tier 1</a>. Most ISP's combine IXP connectivity and IP transit for their global connectivity.</p>

<p><strong>Edit:</strong>
Here's a real world example: I used <a href=""http://ring.nlnog.net"" rel=""noreferrer"">NLNOG Ring's</a> <code>ring-trace</code> to create a graph of how networks around the world reach Facebook's network.
<img src=""https://i.stack.imgur.com/gGkZ8.jpg"" alt=""ring-trace to www.facebook.com"">. </p>

<p>As you can see from this example, a lot of networks reach Facebook via DE-CIX (the IXP in Frankfurt, Germany, one of the largest in the world), but there are also a large number of networks which use Telia (AS1299) and NTT (AS2914) to reach Facebook. Telia and NTT are tier 1 transit providers.</p>

<p><strong>Edit 2:</strong>
Since the image is downscaled it's hard to read. <a href=""http://teun.tv/stuff/facebook.jpg"" rel=""noreferrer"">here</a> is a fullsize version.</p>
","6210"
"Enterprise Network Equipment vulnerable to heartbleed","2344","","<p>On 09/04/2014 the <a href=""http://heartbleed.com/"">The Heartbleed vulerability</a> was <a href=""https://www.openssl.org/news/secadv_20140407.txt"">disclosed by the OpenSSL team</a>.</p>

<blockquote>
  <p>The Heartbleed Bug is a serious vulnerability in the popular OpenSSL cryptographic software library. This weakness allows stealing the information protected, under normal conditions, by the SSL/TLS encryption used to secure the Internet.</p>
</blockquote>

<p>Can we build a list of enterprise networking devices that are vulnerable to <a href=""https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-0160"">heartbleed</a>?</p>
","<p>As with any new vulnerability, it's impacts are far-reaching.  Infrastructure devices are no different.  Most of them do incorporate vulnerable OpenSSL packages.</p>

<p>It's nearly impossible to compile a listing of every vulnerable product<sup><strong>1</strong></sup>, since it affects anything that included OpenSSL libraries built with the original <a href=""https://github.com/openssl/openssl/commit/4817504d069b4c5082161b02a22116ad75f822b1"" rel=""nofollow noreferrer"" title=""Committed on Dec 31, 2011"">OpenSSL TLS heartbeat implementation</a> until the heartbleed patch <a href=""https://github.com/openssl/openssl/commit/731f431497f463f3a2a97236fe0187b11c44aead"" rel=""nofollow noreferrer"" title=""Committed April 2014"">was committed to OpenSSL stable branch</a>; however, we can list the major vendors' products here.</p>

<p><br></p>

<h1>This is a community wiki, feel free to contribute.</h1>

<p><br></p>

<h2>Aruba</h2>

<blockquote>
  <ul>
  <li>ArubaOS 6.3.x, 6.4.x</li>
  <li>ClearPass 6.1.x, 6.2.x, 6.3.x</li>
  <li><strong>Previous versions</strong> of these products used an earlier version of OpenSSL 
  that is <strong>not vulnerable</strong>.</li>
  </ul>
</blockquote>

<p><sup><a href=""http://www.arubanetworks.com/support/alerts/aid-040814.asc"" rel=""nofollow noreferrer"">OpenSSL 1.0.1 library (Heartbleed) vulnerability.</a> </sup></p>

<h2>Checkpoint Networks</h2>

<p><a href=""https://supportcenter.checkpoint.com/supportcenter/portal?eventSubmit_doGoviewsolutiondetails=&amp;solutionid=sk100173&amp;js_peid=P-114a7bc3b09-10006&amp;partition=General&amp;product=Security"" rel=""nofollow noreferrer"">SK 100173</a> asserts that Checkpoint products are not vulnerable.</p>

<h2>Cisco</h2>

<p>The following Cisco products are affected by this vulnerability:</p>

<blockquote>
  <ul>
  <li>Cisco AnyConnect Secure Mobility Client for iOS [CSCuo17488]</li>
  <li>Cisco Desktop Collaboration Experience DX650</li>
  <li>Cisco Unified 7800 series IP Phones</li>
  <li>Cisco Unified 8961 IP Phone</li>
  <li>Cisco Unified 9951 IP Phone</li>
  <li>Cisco Unified 9971 IP Phone</li>
  <li>Cisco IOS XE [CSCuo19730]</li>
  <li>Cisco Unified Communications Manager (UCM) 10.0</li>
  <li>Cisco Universal Small Cell 5000 Series running V3.4.2.x software</li>
  <li>Cisco Universal Small Cell 7000 Series running V3.4.2.x software</li>
  <li>Small Cell factory recovery root filesystem V2.99.4 or later</li>
  <li>Cisco MS200X Ethernet Access Switch</li>
  <li>Cisco Mobility Service Engine (MSE)</li>
  <li>Cisco TelePresence Video Communication Server (VCS) [CSCuo16472]</li>
  <li>Cisco TelePresence Conductor</li>
  <li>Cisco TelePresence Supervisor MSE 8050</li>
  <li>Cisco TelePresence Server 8710, 7010</li>
  <li>Cisco TelePresence Server on Multiparty Media 310, 320</li>
  <li>Cisco TelePresence Server on Virtual Machine</li>
  <li>Cisco TelePresence ISDN Gateway 8321 and 3201 Series</li>
  <li>Cisco TelePresence Serial Gateway Series</li>
  <li>Cisco TelePresence IP Gateway Series</li>
  <li>Cisco WebEx Meetings Server versions 2.x [CSCuo17528]</li>
  <li>Cisco Security Manager [CSCuo19265]</li>
  </ul>
</blockquote>

<p><sup><a href=""http://tools.cisco.com/security/center/content/CiscoSecurityAdvisory/cisco-sa-20140409-heartbleed"" rel=""nofollow noreferrer"">Cisco Security Advisory - OpenSSL Heartbeat Extension Vulnerability in Multiple Cisco Products</a></sup></p>

<h2>D-Link</h2>

<blockquote>
  <p>As of April 15, 2014 D-Link has no vulnerable products.</p>
</blockquote>

<p><sup><a href=""http://securityadvisories.dlink.com/security/publication.aspx?name=SAP10022"" rel=""nofollow noreferrer"">Security Incident Response for D-Link Devices and Services</a></sup></p>

<h2>Fortigate</h2>

<blockquote>
  <ul>
  <li>FortiGate (FortiOS) 5.x</li>
  <li>FortiAuthenticator 3.x</li>
  <li>FortiMail 5.x</li>
  <li>FortiVoice</li>
  <li>FortiRecorder</li>
  <li>FortiADC D-Series models 1500D, 2000D and 4000D</li>
  <li>FortiADC E-Series 3.x</li>
  <li>Coyote Point Equalizer GX / LX 10.x</li>
  </ul>
</blockquote>

<p><sup><a href=""http://www.fortiguard.com/advisory/FG-IR-14-011/"" rel=""nofollow noreferrer"">Information Disclosure Vulnerability in OpenSSL</a></sup></p>

<h2>F5</h2>

<p>As of April 10, 2014 the following F5 Products / Releases are known to be vulnerable</p>

<blockquote>
  <ul>
  <li>BigIP LTM Versions 11.5.0 - 11.5.1 (Mgmt Interface, compat SSL ciphers)</li>
  <li>BigIP AAM Versions 11.5.0 - 11.5.1 (Mgmt Interface, compat SSL ciphers)</li>
  <li>BigIP AFM Versions 11.5.0 - 11.5.1 (Mgmt Interface, compat SSL ciphers)</li>
  <li>BigIP Analytics Versions 11.5.0 - 11.5.1 (Mgmt Interface, compat SSL ciphers)</li>
  <li>BigIP APM Versions 11.5.0 - 11.5.1 (Mgmt Interface, compat SSL ciphers)</li>
  <li>BigIP ASM Versions 11.5.0 - 11.5.1 (Mgmt Interface, compat SSL ciphers)</li>
  <li>BigIP GTM Versions 11.5.0 - 11.5.1 (Mgmt Interface, compat SSL ciphers)</li>
  <li>BigIP Link Controller Versions 11.5.0 - 11.5.1 (Mgmt Interface, compat SSL ciphers)</li>
  <li>BigIP PEM Versions 11.5.0 - 11.5.1 (Mgmt Interface, compat SSL ciphers)</li>
  <li>BigIP PSM Versions 11.5.0 - 11.5.1 (Mgmt Interface, compat SSL ciphers)</li>
  <li>BIG-IP Edge Clients for Apple iOS Versions 1.0.5, 2.0.0 - 2.0.1 (VPN)</li>
  <li>BIG-IP Edge Clients for Linux Versions 6035 - 7101 (VPN)</li>
  <li>BIG-IP Edge Clients for Mac OSX Versions 6035 - 7101 (VPN)</li>
  <li>BIG-IP Edge Clients for Windows Versions 6035 - 7101 (VPN)</li>
  </ul>
</blockquote>

<p><sup><a href=""http://support.f5.com/kb/en-us/solutions/public/15000/100/sol15159.html"" rel=""nofollow noreferrer"">F5 Networks SOL 15159 OpenSSL Vulnerability CVE-2014-0160</a></sup></p>

<h2>HP</h2>

<p>As of April 10</p>

<blockquote>
  <p>""We have determined the products we have investigated are not vulnerable due to either using a version of OpenSSL that is not vulnerable or are not using OpenSSL.""</p>
</blockquote>

<p><sup><a href=""http://h17007.www1.hp.com/docs/advisories/HPNetworkingSecurityAdvisory-OpenSSL-HeartbleedVulnerability.pdf"" rel=""nofollow noreferrer"">HP Networking Communication: OpenSSL HeartBleed Vulnerability</a></sup></p>

<h2>Huawei</h2>

<p>As of April 14</p>

<blockquote>
  <p>The investigation has been completed and it is confirmed that some Huawei products are affected. Huawei has prepared a fixing plan and started the development and test of fixed versions. Huawei will release an SA as soon as possible. Please stay tuned.</p>
</blockquote>

<p><sup><a href=""http://www.huawei.com/en/security/psirt/security-bulletins/security-notices/hw-331856.htm"" rel=""nofollow noreferrer"">Security Notice-Statement on OpenSSL Heartbeat Extension Vulnerability</a></sup></p>

<h2>Juniper</h2>

<p>Vulnerable Products</p>

<blockquote>
  <ul>
  <li>Junos OS 13.3R1</li>
  <li>Odyssey client 5.6r5 and later</li>
  <li>SSL VPN (IVEOS) 7.4r1 and later, and SSL VPN (IVEOS) 8.0r1 and later (Fixed code is listed in the ""Solution"" section)</li>
  <li>UAC 4.4r1 and later, and UAC 5.0r1 and later (Fixed code is listed in the ""Solution"" section)</li>
  <li>Junos Pulse (Desktop) 5.0r1 and later, and Junos Pulse (Desktop) 4.0r5 and later</li>
  <li>Network Connect (windows only) version 7.4R5 to 7.4R9.1 &amp; 8.0R1 to 8.0R3.1. (This client is only impacted when used in FIPS mode.)</li>
  <li>Junos Pulse (Mobile) on Android version 4.2R1 and higher.</li>
  <li>Junos Pulse (Mobile) on iOS version 4.2R1 and higher. (This client is only impacted when used in FIPS mode.)</li>
  </ul>
</blockquote>

<p><sup><a href=""http://kb.juniper.net/InfoCenter/index?page=content&amp;id=JSA10623"" rel=""nofollow noreferrer"">Juniper Knowledge Center - 2014-04 Out of Cycle Security Bulletin: Multiple products affected by OpenSSL ""Heartbleed"" issue (CVE-2014-0160)</a></sup></p>

<h2>Palo Alto Networks</h2>

<p><a href=""http://researchcenter.paloaltonetworks.com/2014/04/palo-alto-networks-addresses-heartbleed-vulnerability-cve-2014-0160/"" rel=""nofollow noreferrer"">PAN-OS was not affected by heartbleed</a></p>

<hr>

<h1>Workarounds</h1>

<p>Disable resources that utilize SSL, if you can, and rely on SSH which, as <a href=""https://superuser.com/a/739350/77053"">Mike Pennington commented</a> is not vulnerable.  </p>

<hr>

<p><sup>1</sup><sub>This listing was taken on 10 April 2014, vendors may still have their products under investigation. This listing is <strong>not</strong> a vulnerability guideline, and only serves to give the original poster an understanding of the scope of impact on networking equipment.</sub></p>
","7305"
"ASA not routing with IP from ISP dhcp","2341","","<p>I think it is a similar case like <a href=""https://networkengineering.stackexchange.com/questions/6690/configuring-a-cisco-asa-5505-for-routing"">this</a> one. The only problem is that here I have a dynamic IP from the ISP, which gets updated from dhcp.</p>

<p>The asa can ping outside, however the inside hosts on vlan1 cannot ping internet IP addresses (eg. google).</p>

<p>This is my config:</p>

<pre><code>ASA Version 9.2(3)4
!
hostname myname
enable password aaa encrypted
passwd aaaa encrypted
names
!
interface Ethernet0/0
 switchport access vlan 2
!
interface Ethernet0/1
!
interface Ethernet0/2
!
interface Ethernet0/3
!
interface Ethernet0/4
!
interface Ethernet0/5
!
interface Ethernet0/6
!
interface Ethernet0/7
!
interface Vlan1
 nameif inside
 security-level 100
 ip address 192.168.1.2 255.255.255.0
!
interface Vlan2
 nameif outside
 security-level 0
 ip address dhcp setroute
!
boot system disk0:/asa923-4-k8.bin
ftp mode passive
clock timezone CET 1
clock summer-time CET recurring last Sun Mar 2:00 last Sun Oct 3:00
object network obj_any
 subnet 0.0.0.0 0.0.0.0
pager lines 24
logging asdm informational
mtu inside 1500
mtu outside 1500
icmp unreachable rate-limit 1 burst-size 1
asdm image disk0:/asdm-741.bin
no asdm history enable
arp timeout 14400
no arp permit-nonconnected
timeout xlate 3:00:00
timeout pat-xlate 0:00:30
timeout conn 1:00:00 half-closed 0:10:00 udp 0:02:00 icmp 0:00:02
timeout sunrpc 0:10:00 h323 0:05:00 h225 1:00:00 mgcp 0:05:00 mgcp-pat 0:05:00
timeout sip 0:30:00 sip_media 0:02:00 sip-invite 0:03:00 sip-disconnect 0:02:00
timeout sip-provisional-media 0:02:00 uauth 0:05:00 absolute
timeout tcp-proxy-reassembly 0:01:00
timeout floating-conn 0:00:00
dynamic-access-policy-record DfltAccessPolicy
user-identity default-domain LOCAL
aaa authentication ssh console LOCAL
http server enable
http 192.168.1.0 255.255.255.0 inside
no snmp-server location
no snmp-server contact
crypto ipsec security-association pmtu-aging infinite
crypto ca trustpoint _SmartCallHome_ServerCA
 no validation-usage
 crl configure
crypto ca trustpoint ASDM_Launcher_Access_TrustPoint_0
 enrollment self
 fqdn none
 subject-name CN=192.168.1.26,CN=sergioasa
 keypair ASDM_LAUNCHER
 crl configure
crypto ca trustpool policy
crypto ca certificate chain _SmartCallHome_ServerCA
 certificate ca ***cert stuff***
  quit
crypto ca certificate chain ASDM_Launcher_Access_TrustPoint_0
 certificate ***cert stuff***
  quit
telnet timeout 5
ssh stricthostkeycheck
ssh 0.0.0.0 0.0.0.0 inside
ssh timeout 5
ssh version 2
ssh key-exchange group dh-group1-sha1
console timeout 0

dhcpd auto_config outside
!
dhcprelay server 192.168.1.1 outside
dhcprelay enable inside
dhcprelay setroute inside
dhcprelay timeout 60
threat-detection basic-threat
threat-detection statistics access-list
no threat-detection statistics tcp-intercept
ssl trust-point ASDM_Launcher_Access_TrustPoint_0
username sergio password aaaa encrypted
!
!
prompt hostname context
call-home reporting anonymous
Cryptochecksum:chesumnumbers
</code></pre>

<p>I think probably a route is missing... but how to add a route that sends all the outside traffic to vlan2 instead than to a precise IP address?</p>

<p>After adding:</p>

<pre><code>object network obj_any
 nat (inside,outside) dynamic interface
</code></pre>

<p>I run:</p>

<pre><code>packet-tracer input inside tcp 192.168.1.100 323 8.8.8.8 80 detailed
</code></pre>

<p>And I got:</p>

<pre><code>Phase: 1
Type: ROUTE-LOOKUP
Subtype: Resolve Egress Interface
Result: ALLOW
Config:
Additional Information:
in   0.0.0.0         0.0.0.0         via 192.168.0.1, outside

Phase: 2
Type: NAT
Subtype:
Result: ALLOW
Config:
object network obj_any
 nat (inside,outside) dynamic interface
Additional Information:
Dynamic translate 192.168.1.100/323 to 192.168.0.12/323
 Forward Flow based lookup yields rule:
 in  id=0xcd238b10, priority=6, domain=nat, deny=false
        hits=1, user_data=0xcd02f3c0, cs_id=0x0, flags=0x0, protocol=0
        src ip/id=0.0.0.0, mask=0.0.0.0, port=0, tag=0
        dst ip/id=0.0.0.0, mask=0.0.0.0, port=0, tag=0, dscp=0x0
        input_ifc=inside, output_ifc=outside

Phase: 3
Type: NAT
Subtype: per-session
Result: ALLOW
Config:
Additional Information:
 Forward Flow based lookup yields rule:
 in  id=0xcc34e8e8, priority=0, domain=nat-per-session, deny=false
        hits=810, user_data=0x0, cs_id=0x0, reverse, use_real_addr, flags=0x0, protocol=6
        src ip/id=0.0.0.0, mask=0.0.0.0, port=0, tag=0
        dst ip/id=0.0.0.0, mask=0.0.0.0, port=0, tag=0, dscp=0x0
        input_ifc=any, output_ifc=any

Phase: 4
Type: IP-OPTIONS
Subtype:
Result: ALLOW
Config:
Additional Information:
 Forward Flow based lookup yields rule:
 in  id=0xcc9bf968, priority=0, domain=inspect-ip-options, deny=true
        hits=1341, user_data=0x0, cs_id=0x0, reverse, flags=0x0, protocol=0
        src ip/id=0.0.0.0, mask=0.0.0.0, port=0, tag=0
        dst ip/id=0.0.0.0, mask=0.0.0.0, port=0, tag=0, dscp=0x0
        input_ifc=inside, output_ifc=any

Phase: 5
Type: NAT
Subtype: per-session
Result: ALLOW
Config:
Additional Information:
 Reverse Flow based lookup yields rule:
 in  id=0xcc34e8e8, priority=0, domain=nat-per-session, deny=false
        hits=812, user_data=0x0, cs_id=0x0, reverse, use_real_addr, flags=0x0, protocol=6
        src ip/id=0.0.0.0, mask=0.0.0.0, port=0, tag=0
        dst ip/id=0.0.0.0, mask=0.0.0.0, port=0, tag=0, dscp=0x0
        input_ifc=any, output_ifc=any

Phase: 6
Type: IP-OPTIONS
Subtype:
Result: ALLOW
Config:
Additional Information:
 Reverse Flow based lookup yields rule:
 in  id=0xcc9d68d0, priority=0, domain=inspect-ip-options, deny=true
        hits=1075, user_data=0x0, cs_id=0x0, reverse, flags=0x0, protocol=0
        src ip/id=0.0.0.0, mask=0.0.0.0, port=0, tag=0
        dst ip/id=0.0.0.0, mask=0.0.0.0, port=0, tag=0, dscp=0x0
        input_ifc=outside, output_ifc=any

Phase: 7
Type: FLOW-CREATION
Subtype:
Result: ALLOW
Config:
Additional Information:
New flow created with id 1249, packet dispatched to next module
Module information for forward flow ...
snp_fp_tracer_drop
snp_fp_inspect_ip_options
snp_fp_tcp_normalizer
snp_fp_translate
snp_fp_adjacency
snp_fp_fragment
snp_ifc_stat

Module information for reverse flow ...
snp_fp_tracer_drop
snp_fp_inspect_ip_options
snp_fp_translate
snp_fp_tcp_normalizer
snp_fp_adjacency
snp_fp_fragment
snp_ifc_stat

Result:
input-interface: inside
input-status: up
input-line-status: up
output-interface: outside
output-status: up
output-line-status: up
Action: allow
</code></pre>

<p>On the ISR(dhcp server) I have the following routing table:</p>

<pre><code>Gateway of last resort is not set

     10.0.0.0/24 is subnetted, 1 subnets
C       10.11.0.0 is directly connected, Loopback0
C    192.168.1.0/24 is directly connected, BVI1
</code></pre>

<p>On the ASA the routing table is:</p>

<pre><code>Gateway of last resort is 192.168.0.1 to network 0.0.0.0

S*    0.0.0.0 0.0.0.0 [1/0] via 192.168.0.1, outside
C        192.168.0.0 255.255.255.0 is directly connected, outside
L        192.168.0.12 255.255.255.255 is directly connected, outside
C        192.168.1.0 255.255.255.0 is directly connected, inside
L        192.168.1.2 255.255.255.255 is directly connected, inside
</code></pre>
","<p>If the ASA can ping the internet then routing on the firewall is fine.</p>

<p>Although I did noticed I can't see a NAT statement to nat your traffic from your inside to the outside address</p>

<p>Apply the NAT under your object.</p>

<p>object network obj_any
<br>
nat (inside,outside) dynamic interface</p>

<p>If this doesn't resolve your issue please post the output from the following command
<br>
<br><br>
packet-tracer input inside tcp 192.168.1.100 323 8.8.8.8 80 detailed</p>
","17945"
"Better Enterprise Multihoming","2335","","<p>I would like to get some opinions regarding ways in which I can improve a BGP dual-provider, dual-router design. Each provider supplies a /24 public subnet. I will refer to the routers, circuits, subnets, HSRP groups and providers as A and B, respectively. The bandwidth on each circuit is adequate for the entire load.</p>

<p><strong>Current Design</strong></p>

<p>The current design attempts to achieve per-provider symmetry. In a steady state, the intended routing logic is that traffic to/from subnet A transits only circuit A and traffic to/from subnet B transits only circuit B. The circuits would back each other up in a failed state.</p>

<p>The providers only advertise the default route. Outbound routing entails a mix of PBR and HSRP. The routers have no routing between them: No iBGP, no OSPF, no static routing. Instead, there are two HSRP groups tracking the default route. Router A is primary for HSRP group A and router B is primary for HSRP group B. Downstream devices have a default route pointing to HSRP group A and PBR which directs traffic sourced from subnet B to HSRP group B. Inbound routing is influenced with prepending and communities. Subnet A is prepended and communitied on circuit B and subnet B is prepended and communitied on circuit A.</p>

<p>I see much room for improvement in this design. The lack of Internet topology awareness combined with circuit affinity completely eliminates best path selection. There are concerns about the tier designation of the providers and the design has been rationalized as providing ‘acceptable performance’ and simpler to troubleshoot. Indeed, the design couldn’t possibly get any simpler. I have demonstrated that transiting an extra AS adds 6 hops and 63ms (+421%) to the RTT. I would prefer not to settle for acceptable.</p>

<p><strong>Better Design</strong></p>

<p>The better design provides the routers with as much Internet topology awareness as possible. The best path algorithm is left to determine the inbound and outbound routing logic. The circuits would back each other up in a failed state.</p>

<p>The providers advertise the full view. The routers run iBGP and OSPF. HSRP is eliminated. The outbound routing would be purely destination-based best path and the inbound routing would be left to the best path algorithm and transit provider whims.</p>

<p>Now that I type it out, it does seem simpler. At the very least, it took fewer words to explain. There are concerns about asymmetry, but I have seen plenty of asymmetry in the current design. I would think they are probably equally prone to asymmetry and it really doesn’t worry me. We have never seen problems as a result. Presently it is relegated to the realm of ifs, “What ‘if’ we had to troubleshoot something?”</p>

<p>Am I way off base here or did I hit the nail on the head? How have others solved this problem? What would Google do?</p>
","<p>Yes, you did hit the nail on the head.</p>

<p>You will get asymmetry in the improved design, but asymmetry is a fact of life on the Internet, and there's really no good reason to expect symmetric routing of traffic to/from.  Shoot, the whole concept of packet routing is that separate packets are routed independently of each other and may take different paths, even packets going in the same direction.</p>

<p>Personally, I loath PBR.  Its one of those technologies that when I decide that its the best solution to the problem, I stop and take a step back to see if I really understand the real nature of the problem, even back to figuring out what the business problem to be solved is.  When I do so, I almost always find that there is a way to solve the problem without using a technology like that.</p>

<p>Having full Internet routes in your routers will take some getting used to, but once you get used to it, it is indeed very easy to understand and troubleshoot.  Certainly there are fewer ""moving parts"" of different protocols to worry about.</p>

<p>You don't want to have full Internet routes in your OSPF database, so you'll want to advertise a default via OSPF into the interior of your network (or perhaps static default...personally I prefer default in OSPF).  That will move traffic towards the BGP speaking Internet routers which can make the more fully informed decision of having the full Internet routes.</p>

<p>That will give you close to ""destination based best path"".  There will still be cases where the traffic will do things you don't quite expect, so you'll want to get familiar with the BGP route selection process.</p>
","78"
"Problem with VPN tunel from remote location through ISP (PPTP)","2329","","<p>I have network situation like this:</p>

<p><img src=""https://i.stack.imgur.com/bGkmM.png"" alt=""Problem with VPN tunel from remote location through ISP (PPTP)""></p>

<ul>
<li><strong>ISP Router (modem)</strong> - device given to us by our ISP - modem &amp; router in one but it is set into transparent mode - ISP say so ;D we have to find it that it is true :)</li>
<li><strong>MikroTik Router (MTR)</strong> - our edge router with firewall</li>
<li><strong>Server NAS &amp; VPN Server (NAS)</strong> - Synology box with our data storage and also with VPN server with running PPTP, OpenVPN, L2TP/IPSec services- to which workers from our local company and from remote location conect to get data</li>
<li><strong>Local station (LS)</strong> - workers at our network site - they are using Windows 8 which means they use PPTP</li>
<li><strong>Remote station (RS)</strong> - workers at remote site behind different ISP`s</li>
</ul>

<hr>

<p>Bellow I present our Mikrotik configuration:</p>

<p><strong><em>Routing table:</em></strong></p>

<pre><code>Dst. address   | Gateway      | Distance | Pref. source   |
0.0.0.0/0      | 1.1.1.9      | 2        | -              |
1.1.1.8/30     | ether1       | -        | 1.1.1.8/30     |
192.168.1.0/24 | bridge local | -        | 192.168.1.0/24 |
</code></pre>

<p><strong><em>Firewall:</em></strong></p>

<pre><code>Action | Chain | Dst. Address  | Protocol | Dst. Port |
accept | input | 192.168.1.230 | 6 (TCP)  | 1723      |
accept | input | 192.168.1.230 | 47 (GRE) | -         |
accept | input | 192.168.1.230 | 6 (TCP)  | 5006      |
</code></pre>

<p><strong><em>NAT:</em></strong></p>

<pre><code>Action     | Chain  | Source Addr    | Dst Address   | Proto    | Dst Port | Out Intf   |
masquerade | srcnat | -              | -             | -        | -        | ether1     |
dstnat     | dstnat | -              | 1.1.1.9       | 6 (TCP)  | 1723     | -          |
dstnat     | dstnat | -              | 1.1.1.9       | 47 (GRE) | -        | -          |
dstnat     | dstnat | -              | 1.1.1.9       | 6 (TCP)  | 5006     | -          |
masquerade | srcnat | 192.168.1.0/24 | 192.168.1.230 | -        | -        | -          |
</code></pre>

<p><em>The last rule is used to avoid hairpin occurrence</em></p>

<p><strong>Rules at Mikrotik are made for now only for PPTP protocol !!!</strong></p>

<hr>

<p><strong>Our LS have no problem to connect to to NAS within PPTP VPN tunel. The problem starts when our RS  workers from different locations trying to get VPN tunnel to our NAS. They receive a Windows 619 VPN error code.</strong></p>

<hr>

<p>I made some tests.</p>

<p>I connected directly from ISP site and I eliminated ISP modem and host which I used to the test (it had 1.1.1.9 IP addr. and gateway 1.1.1.10) and it worked fine - but in the NAT rules at MTR were set 1.1.1.10 destinations addresses not 1.1.1.9 like now. </p>

<p>I changed it because when I use what.is.my.ip I received our public address within 1.1.1.9 - I also use this adres in dynDNS. That why I changed it. </p>

<p>So when there is 1.1.1.10 there is no problem to get VPN tunel (only remotes had them - so it could be port blocking at ISP site I think) but when I use 1.1.1.9 in NAT rules also my host acting like a ISP modem get 619 error code.</p>

<p>Today they get 800 VPN error code instead of 619 :/</p>

<p>What could be the cause of my problem ?</p>

<p>Why it works from our side when I use 1.1.1.10 and I get error using 1.1.1.9 in NAT table ?</p>
","<blockquote>
  <p>Why it works from our side when I use 1.1.1.10 and I get error using 1.1.1.9 in NAT table?</p>
</blockquote>

<p>You have a problem with the 1.1.1.9 configuration as an external NAT IP on the Mikrotik.   The outside interface of the Mikrotik is a /30; you're using 1.1.1.9/30 as the default gateway <em>and</em> an outside NAT IP on the Mikrotik.  If you're going to use 1.1.1.9/30 on the Mikrotik, you need 1.1.1.10 as a default-gateway.</p>

<p>As it stands, you're currently using 1.1.1.9 as both default-gateway and external NAT IP.</p>

<p>Current Routing table:</p>

<pre><code>Dst. address   | Gateway      | Distance | Pref. source   |
0.0.0.0/0      | 1.1.1.9      | 2        | -              |
</code></pre>

<p>Current NAT table:</p>

<pre><code>Action     | Chain  | Source Addr    | Dst Address   | Proto    | Dst Port | Out Intf   |
masquerade | srcnat | -              | -             | -        | -        | ether1     |
dstnat     | dstnat | -              | 1.1.1.9       | 6 (TCP)  | 1723     | -          |
dstnat     | dstnat | -              | 1.1.1.9       | 47 (GRE) | -        | -          |
dstnat     | dstnat | -              | 1.1.1.9       | 6 (TCP)  | 5006     | -          |
masquerade | srcnat | 192.168.1.0/24 | 192.168.1.230 | -        | -        | -          |
</code></pre>

<p>What's a little confusing is the diagram, which says the ISP-A's router is in transparent ""modem state"".  Please be sure that the IP addressing scheme you're using on the Mikrotik is consistent with ISP-A's expectations.  If the router is transparent, I'm not entirely sure you should have an IP address on it.</p>
","9941"
"Why central mikrotik router not routing secondary networks (PPTP VPN)?","2329","","<p>I have 3 offices:</p>

<pre><code>1.2.1.0/24 main1      office
1.2.2.0/24 secondary2 office
1.2.3.0/24 secondary3 office
</code></pre>

<p>There are three <code>Mikrotik 951Ui-2HnD</code> (current-firmware: <code>3.18</code>) in each office:</p>

<pre><code>main1:      LAN: 1.2.1.1 | WAN: XXX.XXX.XXX.115
secondary2: LAN: 1.2.2.1 | WAN: XXX.XXX.XXX.112
secondary3: LAN: 1.2.3.1 | WAN: XXX.XXX.XXX.116
</code></pre>

<p>There are no any <code>/ip firewall</code> rules yet in each mikrotiks.</p>

<h3>Main1 mikrotik configuration</h3>

<pre><code>/interface pptp-server server
set enabled=yes

/ip address
add address=1.2.1.1/24 interface=bridge-local network=1.2.1.0
add address=XXX.XXX.XXX.115/29 interface=ether1-gateway network=XXX.XXX.XXX.112

/ip route
add distance=1 gateway=XXX.XXX.XXX.113
add distance=2 dst-address=1.2.2.0/24 gateway=172.16.1.2
add distance=2 dst-address=1.2.3.0/24 gateway=172.16.1.3

/ppp secret
add local-address=172.16.1.1 name=secondary3 password=123 profile=pptp-in remote-address=172.16.1.3 service=pptp
add local-address=172.16.1.1 name=secondary2 password=123 profile=pptp-in remote-address=172.16.1.2 service=pptp
</code></pre>

<h3>Secondary2 mikrotik configuration</h3>

<pre><code>/interface pptp-client
add add-default-route=no allow=mschap1,mschap2 connect-to=XXX.XXX.XXX.115 dial-on-demand=no disabled=no keepalive-timeout=60 max-mru=1450 \
    max-mtu=1450 mrru=disabled name=pptp-out1 password=123 profile=default-encryption user=secondary2

/ip address
add address=1.2.2.1/24 interface=bridge-local network=1.2.2.0
add address=XXX.XXX.XXX.117/29 interface=ether1-gateway network=XXX.XXX.XXX.112

/ip route
add distance=1 gateway=XXX.XXX.XXX.113
add distance=1 dst-address=1.2.1.0/24 gateway=172.16.1.1
add distance=1 dst-address=1.2.3.0/24 gateway=172.16.1.1
</code></pre>

<h3>Secondary3 mikrotik configuration</h3>

<pre><code>interface pptp-client
add add-default-route=no allow=mschap1,mschap2 connect-to=XXX.XXX.XXX.115 dial-on-demand=no disabled=no keepalive-timeout=60 max-mru=1450 \
    max-mtu=1450 mrru=disabled name=pptp-out1 password=123 profile=default-encryption user=secondary3

/ip address
add address=1.2.3.1/24 interface=bridge-local network=1.2.3.0
add address=XXX.XXX.XXX.116/29 interface=ether1-gateway network=XXX.XXX.XXX.112

/ip route
add distance=1 gateway=XXX.XXX.XXX.113
add distance=1 dst-address=1.2.1.0/24 gateway=172.16.1.1
add distance=1 dst-address=1.2.2.0/24 gateway=172.16.1.1
</code></pre>

<h2>Secondary2 see's Main1, but not see's secondary3</h2>

<pre><code>[secondary2 ] /ping 1.2.1.1 ... ok
[secondary2 ] /ping 1.2.3.1 ... timeout

[secondary2 ] /tool traceroute 1.2.3.1
  # ADDRESS                          LOSS SENT    LAST
  1 172.16.1.1                         0%    1     2ms
  2                                  100%    1 timeout
  ...

[secondary2 ] /ip address print  
  Flags: X - disabled, I - invalid, D - dynamic 
  #   ADDRESS            NETWORK         INTERFACE                                                                                          
  0   1.2.2.1/24         1.2.2.0         bridge-local                                                                                       
  1   XXX.XXX.XXX.117/29   XXX.XXX.XXX.112   ether1-gateway                                                                                     
  2 D 172.16.1.2/32      172.16.1.1      pptp-out1  


[secondary2 ] /ip route print
  Flags: X - disabled, A - active, D - dynamic, C - connect, S - static, r - rip, b - bgp, o - ospf, m - mme, 
  B - blackhole, U - unreachable, P - prohibit 
   #      DST-ADDRESS        PREF-SRC        GATEWAY            DISTANCE
   0 A S  0.0.0.0/0                          XXX.XXX.XXX.113             1
   1 A S  1.2.1.0/24                         172.16.1.1                1
   2 ADC  1.2.2.0/24         1.2.2.1         bridge-local              0
   3 A S  1.2.3.0/24                         172.16.1.1                1
   4 ADC  XXX.XXX.XXX.112/29   XXX.XXX.XXX.117   ether1-gateway            0
   5 ADC  172.16.1.1/32      172.16.1.2      pptp-out1                 0
</code></pre>

<h2>Secondary3 see's Main1, but not see's secondary2</h2>

<pre><code>[secondary3 ] /ping 1.2.1.1 ... ok
[secondary3 ] /ping 1.2.2.1 ... timeout

[secondary3 ] /tool traceroute 1.2.2.1
  # ADDRESS                          LOSS SENT    LAST
  1 172.16.1.1                         0%    1     2ms
  2                                  100%    1 timeout
  ...

[secondary3 ] /ip address print  
 Flags: X - disabled, I - invalid, D - dynamic 
 #   ADDRESS            NETWORK         INTERFACE                                                                                          
 0   1.2.3.1/24         1.2.3.0         bridge-local                                                                                       
 1   XXX.XXX.XXX.116/29   XXX.XXX.XXX.112   ether1-gateway                                                                                     
 2 D 172.16.1.3/32      172.16.1.1      pptp-out1


[secondary3 ] /ip route print
 Flags: X - disabled, A - active, D - dynamic, C - connect, S - static, r - rip, b - bgp, o - ospf, m - mme, 
 B - blackhole, U - unreachable, P - prohibit 
  #      DST-ADDRESS        PREF-SRC        GATEWAY            DISTANCE
  0 A S  0.0.0.0/0                          XXX.XXX.XXX.113             1
  1 A S  1.2.1.0/24                         172.16.1.1                1
  2 A S  1.2.2.0/24                         172.16.1.1                1
  3 ADC  1.2.3.0/24         1.2.3.1         bridge-local              0
  4 ADC  XXX.XXX.XXX.112/29   XXX.XXX.XXX.116   ether1-gateway            0
  5 ADC  172.16.1.1/32      172.16.1.3      pptp-out1                 0
</code></pre>

<h2>Main1 see's both</h2>

<pre><code>[main1 ] /ping 1.2.2.1 ... ok (mikrotik secondary2)
[main1 ] /ping 1.2.2.2 ... ok (bd_server secondary2)
[main1 ] /ping 1.2.3.1 ... ok (mikrotik secondary3)
[main1 ] /ping 1.2.3.2 ... ok (bd_server secondary3)

[main1 ] /tool traceroute 1.2.3.2
  # ADDRESS                          LOSS SENT    LAST     AVG    BEST   WORST STD-DEV STATUS                                               
  1 172.16.1.3                         0%    3   0.6ms     0.7     0.6     0.8     0.1                                                      
  2 1.2.3.2                            0%    3   0.6ms     0.8     0.6     1.3     0.3

[main1 ] /ip address print
  Flags: X - disabled, I - invalid, D - dynamic 
  #   ADDRESS            NETWORK         INTERFACE                                                                                          
  0   1.2.1.1/24         1.2.1.0         bridge-local                                                                                       
  1   XXX.XXX.XXX.115/29   XXX.XXX.XXX.112   ether1-gateway                                                                                     
  2 D 172.16.1.1/32      172.16.1.3      &lt;pptp-secondary3&gt;                                                                                      
  3 D 172.16.1.1/32      172.16.1.2      &lt;pptp-secondary2&gt;   

[main1 ] /ip firewall filter&lt;SAFE&gt; /ip route print
  Flags: X - disabled, A - active, D - dynamic, C - connect, S - static, r - rip, b - bgp, o - ospf, m - mme, 
  B - blackhole, U - unreachable, P - prohibit 
  #      DST-ADDRESS        PREF-SRC        GATEWAY            DISTANCE
  0 A S  0.0.0.0/0                          XXX.XXX.XXX.113             1
  1 ADC  1.2.1.0/24         1.2.1.1         bridge-local                  0
  2 A S  1.2.2.0/24                         172.16.1.2                    2
  3 A S  1.2.3.0/24                         172.16.1.3                    2
  4 ADC  XXX.XXX.XXX.112/29   XXX.XXX.XXX.115   ether1-gateway                0
  5 ADC  172.16.1.2/32      172.16.1.1      &lt;pptp-secondary2&gt;             0
  6 ADC  172.16.1.3/32      172.16.1.1      &lt;pptp-secondary3&gt;             0
</code></pre>
","<p><strong>1. 1.2.0.0/16 is bad address space for LAN, except it really public IP.</strong> Use private addresses.</p>

<p><strong>2. ping from secondary2 get source IP 172.16.1.2, and secondary3 don't have route to reply (really it reply over default route, whats wrong).</strong></p>

<p>It can be fixed in many ways, but simplest for You - add appropriate routes.</p>

<p>Secondary2:</p>

<pre><code> /ip route
 add distance=1 gateway=XXX.XXX.XXX.113
 add distance=1 dst-address=1.2.1.0/24 gateway=172.16.1.1
 add distance=1 dst-address=1.2.3.0/24 gateway=172.16.1.1

 # missing route
 add distance=1 dst-address=172.16.1.0/24 gateway=172.16.1.1
</code></pre>

<p>Similar for secindary3</p>

<p>Or add preferred-source for routes</p>

<p>Secondary2:</p>

<pre><code> /ip route
 add distance=1 gateway=XXX.XXX.XXX.113
 add distance=1 dst-address=1.2.1.0/24 gateway=172.16.1.1 preferred-source=1.2.2.1
 add distance=1 dst-address=1.2.3.0/24 gateway=172.16.1.1 preferred-source=1.2.2.1
</code></pre>

<p>Similar for secindary3</p>

<p><strong>3. Or just ignore it. It ""problem"" for routers, not for hosts behind it.</strong></p>

<p>If You need ping for diagnostic, define src-address of LAN router interface:</p>

<pre><code>/ping 1.2.3.1 src-address=1.2.2.1
</code></pre>
","33410"
"Preferred method splicing together UTP cable","2324","","<p>I was wondering what the preferred method is for 'butt'splicing together two pieces of &lt;100m UTP cable - or if that is discouraged in general.</p>

<p>Relaying the cable is not possible, but it does need to be redirected from a certain point on. I know that for other cables IDC gel crimps are useful, but they usually only seem to exist for up to four wires.</p>

<p>I can crimp some 8P8C ends on both sides and use a two-way block connector, but that hardly seems ideal.</p>

<p>Thanks so much in advance.</p>
","<p>Given your comment that it's that it's stranded then i'd suggest going with two plugs and a coupler. If you want to run high speeds then getting a coupler that is actually cat5e rated rather than a generic RJ45 coupler with no internal impedance control is probablly a good idea.</p>

<p>Punch down connections are only suitable for solid cable. Soldering and heatshrinking is possible but will create an impedance bump which may cause issues at higher speeds. The jelly connectors that telephone companies use will likely create an even bigger impedance bump than carefully applied solder/heatshrink and are also unisuitable for stranded cable.</p>
","23992"
"Computer booting due to (I guess) untraceable wake-on-lan packet","2320","","<p>There is a desktop computer in our LAN that keeps booting almost every time seconds after it  has been turned off manually. </p>

<p>I suspected it was a Wake-on-LAN issue since the beginning, and it looks like it: the problem disappears if the ethernet cable is disconnected before turning the computer off. Also, although the BIOS does not have an specific option to disable WOL, it has a power saving option that switches off the network card when the computer is not running, and this solves the problem too.</p>

<p>The thing is I cannot find who is sending WOL packets. I am sniffing the whole LAN with Wireshark using the capture filter ""ether proto 0x0842 or udp"", as suggested in <a href=""http://wiki.wireshark.org/WakeOnLAN"" rel=""nofollow noreferrer"">http://wiki.wireshark.org/WakeOnLAN</a> and it does not detect anything. But when I manually send WOL packets from different computers on the network Wireshark does catch these packets.</p>

<p>I don't see anything weird when capturing all traffic to and from this computer either.</p>

<p>UPDATE</p>

<p>This ""Wake on Pattern Match"" option is enabled on the computer. According to <a href=""https://superuser.com/questions/560175/what-is-wake-on-pattern-match-in-network-card-preferences"">https://superuser.com/questions/560175/what-is-wake-on-pattern-match-in-network-card-preferences</a> the default patterns are: magic packet, NetBIOS name query, TCPv4 SYN, TCPv6 SYN, IPv6 Neighbour Solicitation.</p>

<p>The other PCs have this option enable too, but they do not randomly wake up. I am going to check if this computer is receiving any of these.</p>

<p><img src=""https://i.stack.imgur.com/B2tgP.png"" alt=""Power Management options of the computer""></p>
","<p>Mystery solved.</p>

<p>The Windows 7 computer was continuously receiving TCP SYN packets to the 9100 port from another computer in the same LAN, waking up as a result when ""Wake on Pattern Match"" was activated.</p>

<p>This port is used by network printers. The IP of the Windows 7 computer belonged before to a long-time discarded HP printer. </p>

<p>The computer sending the packets is old, and it is always on as it is used sometimes to run software that only works in Windows XP. This computer still had the old network printer configured, pointing to the local IP address that now belongs to the Windows 7 computer having the problems. There were still documents in the printing queue, so the Windows XP computer was continuously sending TCP SYN packets to the Windows 7 computer, thinking it was the network printer. Removing the old printer from Windows XP and its associated TCP/IP Printer Port solved the problem.</p>

<p>I could not catch this traffic between both computers from mine using Wireshark. I had to install it on the affected computer and run it with promiscuous mode disabled.</p>
","13050"
"Network Byte Order","2317","","<p>According to big endian byte ordering or network byte order the bits are transmitted in this order: bits 0-7 first, then bits 8-15, then 16-23 and bits 24-31 last. 
Does this means that bits from version, identification, TTL etc go first and then bits from next fields?</p>

<p><a href=""https://i.stack.imgur.com/CH80Q.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/CH80Q.png"" alt=""enter image description here""></a></p>
","<p>There is a confusion here. The network byte order does not specify how bits are transmitted over the network. It specifies how values are stored in multi byte fields.</p>

<p><strong>Example</strong>:</p>

<p>The <em>Total Length</em> field is composed of two bytes. It specifies in bytes the size of the packet.</p>

<p>Lets say we have the value 500 for that field. Using the Network Byte Order it will be seen over the wire like this, being transmitted transmission from left to right:</p>

<pre><code>00000001 11110100
</code></pre>

<p>If we would use the little endian format then it would have been seen over the wire like this:</p>

<pre><code>11110100 00000001
</code></pre>

<p>After the whole packet is constructed the bits will be sent starting with the lowest addressed bit of the header (bit 0), so the transmission will start with the <em>Version</em> field.</p>

<p>A final point to make here is that the Network byte order is, as you mentioned, the Big Endian Order. This was chosen arbitrarily to have a common format for all network protocols and implementations. </p>
","24272"
"UDP Message Length Field and Pseudo Header","2315","","<p>I'm learning some tcp/ip basics, and am having trouble understanding the Message Length field in UDP. In my book, it says that the Message Length represents the UDP header and data in octets, and since the UDP header is 8 octets, the minimum Message Length value is 8. I have a scenario where the UDP header is 8 octets, and the data is a 13 character string(13 octets). However, the example I'm looking at says the message length is 20 + 13, and then explains that it's 20 octets for the header and 13 octets for the data. I thought that UDP headers were 8 octets, not 20, so why is this 20?</p>

<p>I suspect that it might have to do with the pseudo header, which is 12 octets, so 12 from the pseudo and 8 from the actual header = 20 total header octets. Is this the case? It's really not making any sense to me. Also doesn't the 13 octet data need to be rounded to a multiple of 4? The way it is presented in my book makes it look like the data needs to be padded to 32 bits(4 octets).</p>

<p>Sorry for this confusion, just trying to understand the layout here. If you guys need any additional information just ask.</p>

<p><img src=""https://i.stack.imgur.com/YX8nN.png"" alt=""Here is the example""></p>
","<p>You're right UDP header is 8 bytes. So I can't really explain your 12+8 scenario. Pseudoheader refers to the header which is considered when calculating checksum, is is combination of IP + UDP + payload, but not all of if, hence pseudo.</p>

<p>20B is normal size for IPV4 (and TCP). So maybe confusion lies there?</p>

<p>If you can put your example online, it might help understanding what the author tries to communicate.</p>

<p><strong>EDIT</strong> the packet you entered is 20+8+13 bytes. If your document claims 20+13, it is missing the UDP header.</p>
","1365"
"Behavior of LLDP packets through tagged port","2312","","<p>I have this simple topology -</p>

<pre><code>[S1][p1]----[p2][S2]
</code></pre>

<p>Port p1 of switch S1 is connected to port p2 of S2. And port p2 on S2 is tagged.</p>

<p>My doubt is if an LLDP packet is sent from p1 to p2, considering p2 is tagged, will the LLDP packet be processed at CPU of S2? Or will it be dropped at hardware level? </p>

<p>We know untagged packets which don't have 802.1Q tag in Ethernet frames are dropped on tagged ports. I wanted to know what's the behavior if the packet is LLDP.</p>
","<p>It depends on the hardware involved. Juniper for example will <a href=""http://kb.juniper.net/InfoCenter/index?page=content&amp;id=KB23996"" rel=""nofollow"">drop the LLDP packets</a> when there is no native VLAN configured (a VLAN in which all untagged traffic will be forwarded in).</p>

<p>Cisco for example will always send the LLDP tagged in VLAN 1. Juniper itself sends the LLDP untagged.</p>

<p>So it highly depends on your gear.</p>
","9533"
"ICMP type 3 code 1 and 7, what is the diference?","2308","","<p>What exactly is the difference between ICMP type 3 code 1 and code 7 messages? By reading their descriptions they seem to be used for the same purpose. I am trying to understand when a router will choose to send one or the other.</p>
","<p>The differences are explained in <a href=""http://tools.ietf.org/html/rfc1812#page-81"" rel=""nofollow"">RFC 1812 IPv4 Router Requirements, page 81</a>:</p>

<blockquote>
  <p>1 = Host Unreachable - generated by a router if a forwarding path
          (route) to the destination host on a directly connected network
          is not available (does not respond to ARP);</p>
  
  <p>7 = Destination Host Unknown - generated only when a router can
          determine (from link layer advice) that the destination host
          does not exist;</p>
</blockquote>

<p>Later in the RFC, it requires routers not to send a ""Network Unreachable"" instead of Type 3 Codes 1 or 7 when other hosts on the subnet <em>are</em> reachable...</p>

<blockquote>
  <p>Routers MUST use Host Unreachable or Destination Host Unknown codes
     whenever other hosts on the same destination network might be
     reachable; otherwise, the source host may erroneously conclude that
     all hosts on the network are unreachable, and that may not be the
     case.</p>
</blockquote>

<p>Speaking practically, I haven't seen a router implement Type 3 Code 7 (Destination Host Unknown), normally I see Type 3 Code 1 (Host Unreachable).</p>
","8193"
"Can't upload the config file of an HP Procurve switch inti a tftp server on ubuntu","2305","","<p>In the HP Procurve manual it says to use the following command to up load a file from the switch to a tftp server: </p>

<p><code>HP2512# copy startup-config tftp 13.28.227.105 d:\configs\sw2512</code></p>

<p>In my case, my tftp server is on a ubuntu 14.04 LTS machine, so I did the following:</p>

<p><code>HP2512# copy startup-config tftp myIP /tftpboot/swconf</code></p>

<p>But it didn't work : </p>

<p><code>Transport Error.</code></p>
","<p>It's most likely a tftpd configuration problem: it is rather picky. Check you are running as a user with write permissions, that SELinux isn't preventing writes; read very carefully the man page, especially the bits about --create and --permissive. If that doesn't get you anywhere, crank up the verbosity and check the syslogs. </p>
","29383"
"How can I speed up CLI typing in Cisco IOS using shortcuts?","2302","","<p>I know we can use auto-completion (tab key) and abbreviated commands (such as <code>sh ip int bri</code>) to speed up typing.</p>

<p>However, I'm still not satisfied with typing crypting chains such as <code>sh ip dh sn bi | i 20.12</code> for <code>show ip dhcp snooping binding | include 20.12</code>.</p>

<p>Can I define shortcuts for often used command sequences, and how?</p>
","<p>We can use the <a href=""http://www.cisco.com/en/US/docs/ios/fundamentals/command/reference/cf_a1.html#wp1013037""><code>alias</code></a>  command in global conf mode:</p>

<pre><code>alias &lt;mode&gt; &lt;command-alias&gt; &lt;original-command&gt;
</code></pre>

<p><code>&lt;mode&gt;</code> is one of the many <a href=""http://www.cisco.com/en/US/docs/ios/12_2/configfun/configuration/guide/fcf019.html"">IOS command modes</a>. If you need it in different modes, you have to call it for each one - type <code>alias ?</code> to get a long list of modes.</p>

<p>An example for checking for a dhcp snooped IP, type in global conf mode</p>

<pre><code>alias exec snoop show ip dhcp snooping binding | include
</code></pre>

<p>Now you can simply type <code>snoop 172.16.20.12</code> to check for this IP or <code>snoop 801</code> for checking all IPs in VLAN 801, for example. Do similarly for <code>show mac-address-table | include</code> and you're faster in searching and troubleshooting.</p>

<p>Further tipps:</p>

<ul>
<li>document your aliases for you and for your collegues</li>
<li><code>sh aliases</code> shows your aliases plus the predefined ones</li>
<li>while <code>no alias &lt;mode&gt; &lt;command&gt;</code> can be guessed for removing an alias, <code>no alias &lt;mode&gt;</code> deletes the aliases for a complete mode - so you can clear several at once, <code>default alias &lt;mode&gt;</code> works similarly, as expected</li>
<li>if you decide to use aliases, deploy them once everywhere you may need them</li>
<li>tools like Cisco Prime can help in deploying</li>
<li>don't forget the original commands ;-)</li>
</ul>
","1005"
"Creating an isolated subnet","2295","","<p>First off; I'm not a networking expert so forgive me if anything I ask here is blindingly obvious, or I use the terminology incorrectly :)</p>

<p>My company has recently moved office to a new building where internet access is included in the rent. However, from what I can gather all machines in the building simply connect to one big switch (I can see lots of unknown machines on the network, and presumably they can also see our machines).</p>

<p>For the record, we have about six Windows 7 machines, a Windows Server 2008 machine and some printers.</p>

<p>I'd like to create an isolated network for the company but still maintain access to the internet. How can I achieve this? </p>

<p>We have a couple of off-the-shelf routers that were used in our previous office - will we need to buy additional hardware to create the setup we want (a managed switch and/or firewall, for example?)</p>
","<p>There is several different approaches you could take. The best solution depends on your needs. In my answers I assume that your office has wall-mounted ethernet sockets, that currently connect directly to the central switch(es).</p>

<ul>
<li>You can use one of your off-the-shelf routers and configure it to provide a different subnet on it's LAN interfaces, connect it's WAN interface to one of the ethernet sockets in the office, and run your own cabling to the PCs in your office (or alternatively have them connect wirelessly).</li>
<li>If you have access to the networking equipment in the building, you can buy a new switch and router, and have it set up alongside the other equipment. Then it's a simple matter of moving the patch cables in the switching rack from the old switch to your new one. Usually a switching rack will have a few patch panels where you can connect a patch cable from a switch to one of said patch sockets, that will then connect to one of the ethernet sockets in the office. These are usually labelled both on the wall socket and on the patch panel.</li>
<li>You could have whoever currently administers the networking equipment create a separate VLAN for your office on the existing switch, and configure the existing router to serve a new subnet only to that VLAN.</li>
</ul>

<p>For the most control over your networking environment, I'd say get your own switch and router in the rack and have the ISP assign you a new public IP for your office only. But then, it really depends on your needs.</p>
","20317"
"Four layer-2 addresses in 802.11 frame header","2289","","<p>I am new to wireless LAN. I see that it has 4 addresses in the frame header. In case of a Wired Ethernet, there are only 2 mac addresses, the source and the destination (which is essentially the address of the next hop). But in case of the wireless LAN, why do we always need the end points address. This task is for the IP layer essentially? </p>

<p>So what is the need of the extra source and destination address, apart from the transmitter and receiver address?</p>
","<p>The distinction to understand is that while an 802.11 device is transmitting to a receiving device, either one (or both) of these devices may not be the actual source or destination of the L2 traffic. So this can create situations where you need four different distinct addresses:</p>

<ul>
<li>Transmitter Address (TA)</li>
<li>Receiver Address (RA)</li>
<li>Source Address (SA)</li>
<li>Destination Address (DA)</li>
</ul>

<p>The BSSID of the wireless network may be the TA or RA, but it can also may be an identifier to associate traffic to a BSS. Unless the access point (AP) uses the same MAC address for the management interface and the BSSID, you generally won't have any traffic where the BSSID is either the SA or DA.</p>

<p>The use the address fields in an 802.11 header is tied to the To/From DS (distribution system) flags. Depending on how the To/From DS flags are set, this determines which of the four fields are required and what information each provides.</p>

<p>Here are a couple quick summary tables that I took from an <a href=""http://www.ieee802.org/1/files/public/802_architecture_group/802-11/4-address-format.doc"" rel=""nofollow noreferrer"">IEEE document</a>:</p>

<p><a href=""https://i.stack.imgur.com/iOipv.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/iOipv.png"" alt=""enter image description here""></a></p>

<p><a href=""https://i.stack.imgur.com/7lV31.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/7lV31.png"" alt=""enter image description here""></a></p>

<p>Let me add a couple of images to provide examples take from <a href=""http://shop.oreilly.com/product/9780596100520.do"" rel=""nofollow noreferrer"">802.11 Wireless Networks: The Definitive Guide</a> by O'Reilly Press:</p>

<p><a href=""https://i.stack.imgur.com/tKBIj.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/tKBIj.png"" alt=""enter image description here""></a></p>

<p><a href=""https://i.stack.imgur.com/BrKbS.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/BrKbS.png"" alt=""enter image description here""></a></p>
","25102"
"Adding VLANs to existing infrastructure","2274","","<p>At this moment in my company i have two gigabit switches (zyxel dimension gs1116) and one 24 port 100M linksys switch . None of them is managed. In server room are 2 switches. One gigabit switch and linksys. Second gigabit switch is located on buildings 4th floor. Also somewhere is basic 8 port edimax switches (2 or 3).<br>
Now we bought <code>HP V1910-48G</code> witch is 48 port gigabit switch. Now i remove two switches in server room and place HP there. New switch is placed, because we need to separate public wifi from company's network. And also move cash registers into separate network. 
I created two VLANs. VLAN with id 2 is company network and vlan with id 3 is for guest wireless access.<br>
VLAN 2 and 3 have assigned port range from 1 to 32. Booth VLANs port membership is tagged.<br>
<code>And question is:</code> if i connect all cables to new switch, all stuff works? Or i can get in trouble.<br>
Of course i will replace switches after working hours and test connectivity. I am asking, because to be know if i need made some changes to router too. And does basic switches can handle VLANs ? Or they don't care that?<br>
<code>Firewall:</code> Firewall is basic computer running <code>iptables</code> (shorewall). I know that i must reconfigure firewall, to forward wifi guest packets to gateway interface only.</p>

<p>VLAN with id 1 (default) i leave unchanged (all ports is assigned as untagged).</p>

<p>I imagined second scenario: company network uses untagged ports and only mark public wifi traffic? </p>

<p>Public wifi is planned to mark via separate SSID</p>
","<p>If you assign switch ports to specific VLANs, the switch treats them as if they were all in their own little Ethernet network, and the end stations are usually unaware that they're connected to a VLAN-based switch.</p>

<p>If a switch port is tagged, that means that all of the frames that aren't in the default VLAN (usually 1, which you're right to leave alone) have a 4-byte 802.1q header attached that says what VLAN they go with (as well as basic QoS information). A device attached to a tagged port needs to be aware of the VLAN setup if it's going to properly process such packets, but these are typically other switches (either traditional switches or software switches inside a VM hypervisor).</p>

<p>You should usually force end-user ports to untagged to ensure that someone can't insert a custom VLAN tag and get access to a different VLAN (known as VLAN hopping). On your switch, all of the ports should be untagged unless the WiFi APs are capable of talking on multiple VLANs so that they can have a management address on a different VLAN from the one they're sending client traffic over, or so that single APs can connect multiple SSIDs to different VLANs.</p>

<p>Whether a ""basic"" switch ""handles"" VLANs depends on what each term means. Most unmanaged switches will simply pass 802.1q-tagged frames along as-is, with no attempt to direct them anywhere in particular, so plugging an unmanaged switch into an untagged port is simply the same as not using VLANs at all, while plugging one into a tagged port is like having a shared tagged segment among the different equipment that knows about the VLANs.</p>
","3672"
"SRX DHCP client compatibility with HP Procurve DHCP Relay","2270","","<p>I am trying to bootstrap the config on some Juniper SRX100s and am having some DHCP issues.</p>

<p>Specifically, I am connecting the 0/0 port (fe-0/0/0 in the software) to my existing network, where DHCP has worked quite reliably for just about every other device I've used.  The SRX100s are not getting DHCP addresses.  The SRX100 is out-of-the-box default config when I'm attempting this.</p>

<p>I brought one of the devices to my house and plugged it into my home network and it got an IP address on my home network via DHCP with no problems.</p>

<p>My office network has a Procurve 1400 (layer 2 only) switch on my desktop, uplinked to a Polycom IP670 IP phone (acts as a simple layer 2 switch), uplinked to a Procurve 3500yl switch acting as a router for the network with ""ip helper-address 1.1.1.1"" on the vlan interface pointing to the DHCP server for DHCP relay.</p>

<p>Does anyone have any experience with getting an SRX DHCP client getting an IP address via a Procurve (running K.15.09.0012 software...though the problem has existed across multiple firmware versions on the Procurve).  The SRX100s seem to have 11.2 on them when they come out the box, though I think the problem continues to exist when upgraded to 12.1X44-D10.4.</p>

<p>Does anyone have any suggestions for troubleshooting this?  The Procurve 3500yl doesn't seem to admit to having seen the DHCP client request coming in from the SRX100, but troubleshooting info on the Procurves in this area seems limited.  The DHCP server definitely does not see any DHCPDISCOVER packets arrive relating to the SRX100.</p>

<p>My workaround has been to statically configure an IP address on the SRX100s to get them on the network and do the rest of my config, but the project I am working on involves sending the SRX100s out to remote locations that are not under my control and, thus, depends on them reliably getting DHCP addresses for connectivity so I would really like to troubleshoot this and run down a specific cause so I know what to potentially look for if this happens at remote sites.</p>

<p><strong>Update:</strong>  I have (to double-check) factory-defaulted the SRX100, and plugged it directly into a port on a Procurve 3500yl and am still seeing the problem, so that removes the 1400 and the IP670 phone from the discussion.  I've included the tcpdump output from the SRX100 below...as you can see, its sending out about the simplest possible DHCP packet possible, when tends to suggest that the problem is with the dhcp-relay function on the 3500yl.  I can't find any way to get any debug output from the 3500yl showing packets hitting the dhcp-relay function (successfully or otherwise).  Suggestions on how to debug this function on the 3500yl would be greatly appreciated.</p>

<pre><code>tcpdump -n -s 0 -c 1 -vvv -r juniper.dhcp.pcap 
reading from file juniper.dhcp.pcap, link-type JUNIPER_ETHER (Juniper Ethernet)
17:49:11.538670 
Juniper PCAP Flags [Ext], PCAP Extension(s) total length 16
  Device Media Type Extension TLV #3, length 1, value Ethernet (1)
  Logical Interface Encapsulation Extension TLV #6, length 1, value Ethernet (14)
  Device Interface Index Extension TLV #1, length 2, value 34304
  Logical Interface Index Extension TLV #4, length 4, value 70
-----original packet-----
IP (tos 0x0, ttl 1, id 13874, offset 0, flags [none], proto UDP (17), length 328)
0.0.0.0.68 &gt; 255.255.255.255.67: [udp sum ok] BOOTP/DHCP, Request from a8:d0:e5:1c:68:80, length 300, xid 0x643c9869, Flags [Broadcast] (0x8000)
  Client-Ethernet-Address a8:d0:e5:1c:68:80
  Vendor-rfc1048 Extensions
    Magic Cookie 0x63825363
    DHCP-Message Option 53, length 1: Discover
    END Option 255, length 0
    PAD Option 0, length 0, occurs 56
</code></pre>
","<p>I opened a case with HP concerning this issue.  After escalating past the useless Level 1 tech, the Level 2 tech very alertly spotted something that I had not.</p>

<p>The SRX is sending its DHCPDISCOVER packet with a TTL of 1.  The Procurve's apparently will decrement the TTL and use the resulting TTL in the relay'ed packet to the DHCP server.  In this case, the decrement leaves the TTL at 0 meaning the packet gets dropped on the floor.</p>

<p>This is actually in spec for DHCP/BOOTP relay, though clearly it causes reduced interoperability.  I have asked HPNetworking to treat this as a bug/RFE and change the behavior.  No immediate response to that request in the case.</p>

<p>The SRX sending the DHCPDISCOVER with a TTL of 1 is also probably within spec, but, again, a choice of reduced interoperability, so I plan to open a case with JTAC on the same basis.</p>

<p>I'll add more info on the response of Juniper and HP as it becomes available.</p>

<p>Incidentally, I have tested the relay behavior of a Cisco 4506 (firmware version not immediately available), and a Brocade/Foundry FastIron Edge X (7.2 or 7.3 firmware, I believe, don't have immediate access to confirm) and they both handle relaying the request with TTL 1 without issue.</p>

<p><strong>UPDATE</strong>
There is a way to change the TTL value that the SRX uses on its DHCP requests, but its not from within the JunOS cli...its done from the underlying Unix OS.</p>

<pre><code>root@% sysctl -w net.inet.ip.mcast_ttl=64
</code></pre>

<p>I have opened an RFE with HP to make their relaying function more resilient, but not response from them yet on if/when that will be worked on.</p>
","1703"
"Cisco: monitoring users input","2268","","<p>Is there a way to monitor a user's input on a cisco device? </p>

<p>Clarification: the commands a user have entered as in configuration mode AND normal mode. (especialy normal mode. Configuration mode can be done with ""show history"").</p>
","<p>Have a look at this IOSHints post: <a href=""http://blog.ioshints.info/2006/11/cli-command-logging-without-tacacs.html"">CLI command logging without TACACS+</a>. And the title seems to imply it can also be done with TACACS+.</p>
","529"
"RIB vs FIB differences?","2267","","<p>Can someone explain the differences between a RIB and FIB a little further? I didn't see any similar questions on the site so I thought this would be a good addition. The RIB routes and the FIB forwards? Is that all there is to it?</p>
","<p>The forwarding information base (FIB) is the actual information that a routing/switching device uses to choose the interface that a given packet will use for egress.  For example, the FIB might be programmed such that a packet bound to a destination in 192.168.1.0/24 should be sent out of physical port ethernet1/2.  There may actually be multiple FIB's on a device for unicast forwarding vs multicast RPF checking, different protocols (ip vs mpls vs ipv6) but the basic function is the same - selection criteria (usually destination) mapping to output interface/encapsulation.  Individual FIB's may also be partitioned to achieve concurrent independent forwarding tables (i.e. vrf's).</p>

<p>Each FIB is programmed by one or more routing information bases (RIB).  The RIB is a selection of routing information learned via static definition or a dynamic routing protocol.  The algorithms used within various RIB's will vary - so, for example, the means by which BGP or OSPF determines potential best paths vary quite a bit.  The means by which multiple RIB's are programmed into a common (set) of FIB's in a box will vary by implementation but this is where concepts like administrative distance are used (e.g. identical paths are learned via eBGP and OSPF, the eBGP is usually preferred for FIB injection).  Again, RIB's may also be potentially partitioned to allow for multiple vrf's, etc.  </p>
","38590"
"Layer 3 Switching in Packet Tracer not working","2266","","<p>I am studying for ICND1 through CBTNuggets,</p>

<p>I recently watched videos on how to interact between different vlans using separate interfaces, sub-interfaces and Layer 3 Switching.</p>

<p>The first two worked fine for me, but the Layer 3 Switching is not working when i am pinging PC in one VLAN to the PC in other VLAN.</p>

<p>Suppose PC A is connected to Fa0/1 of Switcher and PC B is connected to Fa0/2 of Switcher.</p>

<p>Here is what I did,</p>

<p>I went to Switcher CLI,
Went to Global Configuration mode,</p>

<p>created two vlans using commands, </p>

<pre><code># vlan 10
# vlan 20
</code></pre>

<p>Now I moved <code>fa0/0</code> port to <code>vlan 10</code> and <code>fa0/1</code> port to <code>vlan 20</code></p>

<p>I assigned IP addresses to PCs,</p>

<p>PC A (fa0/1): </p>

<pre><code>10.1.1.100 
</code></pre>

<p>Default Gateway: <code>10.1.1.1</code>
Subnet Mask: <code>255.255.255.0</code></p>

<p>PC B (fa0/2):</p>

<pre><code>10.1.2.100
</code></pre>

<p>Subnet Mask: <code>255.255.255.0</code>
Default Gateway: <code>10.1.2.1</code></p>

<p>Now i went to the CLi of switcher and did this in Global mode,</p>

<pre><code># interface vlan 10
# ip address 10.1.1.1 255.255.255.0
# no shutdown
# exit
# interface vlan 20
# ip address 10.1.2.1 255.255.255.0
# no shutdown
# exit
</code></pre>

<p>Both vlans <code>10</code> and <code>20</code> are up and running and all the ports are up too, but I couldn't be able to ping <code>PC B</code> from <code>PC A</code>.</p>

<p>This is exactly what the guy did in the video and he managed to ping.</p>

<p>What did i miss ?</p>

<p>P.S: I also tried to erase arp tables but still couldn't be able to ping.</p>
","<p>On the switch, your IP for interface vlan 20 is wrong.</p>

<pre><code># interface vlan 20
# ip address 10.1.2.1 255.255.255.0
# no shutdown
</code></pre>

<p>Then make sure you have <code>ip routing</code> on.</p>

<p>Also the gateway for PC A should be <code>10.1.1.1</code> while the gateway for PC B should be <code>10.1.2.1</code>. The subnet mask should be <code>255.255.255.0</code> not the gateway.</p>

<p>Once fixed, make sure you can ping the gateway of each PC from the respective PCs as well.</p>
","9807"
"What is benefit of using CBWFQ with fair-queue statement","2260","","<p>I mostly seeing configuration of QoS queues based on CBWFQ, witch is tripped off by shaping map. Something like below example.</p>

<pre><code>policy-map test
 class test
  bandwidth remaining percent 20
  random-detect dscp-based
 class test2
  bandwidth remaining percent 20
  random-detect dscp-based
 class test3
  bandwidth remaining percent 20
  random-detect dscp-based
 class test4
  bandwidth remaining percent 20
  random-detect dscp-based
 class class-default
  bandwidth remaining percent 20
  random-detect dscp-based      
policy-map shape-test
 class class-default
  shape average xxx
  service-policy test
</code></pre>

<p>Of course it's configured on appropriated interface (out).</p>

<p>I know about simple variant of CBWFQ called WFQ. Where I don't have to specify classes (automatic creation of classes). Yea I also know that it's done by hash from header, and each class has weight... And so one...
Almost always, I see configuration of fair-queue on interface or simply, in the default class called 'class-default'. This default-class is configured on appropriate interfaces thanks to police-map. So both ways should has same result.</p>

<p>But, today I saw something that made me feel jittery. I saw something like CBWFQ with fair-queue statement in class-default. For better explain, example.</p>

<pre><code>policy-map test
 class test
  bandwidth remaining percent 20
  random-detect dscp-based
 class test2
  bandwidth remaining percent 20
  random-detect dscp-based
 class test3
  bandwidth remaining percent 20
  random-detect dscp-based
 class test4
  bandwidth remaining percent 20
  random-detect dscp-based
 class class-default
  fair-queue
  queue-limit 1024 packets
policy-map shape-test
 class class-default
  shape average xxx
  service-policy test
</code></pre>

<p>Here my question starts... It means that the guy that configured class-default with   'fair-queue', 'queue-limit 1024 packets' made from CBWFQ normal WFQ? Same as we can configure it on interface? And just specified the WFQ classes fixedly, instead of automatically specification that Cisco devices does?</p>

<p>But why? It doesn't look like a standard solution, isn't it? 
<em>It is possible that the man did not know what he did...</em></p>

<p>Thank you for any answer, or links that could point me to understand it properly!</p>

<p>DANIEL</p>
","<p><strong>To summarize my comments:</strong></p>

<p>The benefit of using <strong>CBWFQ</strong> (class based weighted fair queuing) with the <code>fair-queue</code> statement in the <code>class-default</code> queue (your second example):</p>

<pre><code>...
 class class-default
  fair-queue
  queue-limit 1024 packets
...
</code></pre>

<ul>
<li>Packets use <strong>WFQ</strong> (weighted fair queuing) for scheduling and are de-queued based on their calculated weight.</li>
</ul>

<p>When using <strong>CBWFQ</strong> without the <code>fair-queue</code> statement in the <code>class-default</code> queue (your first example): </p>

<pre><code>...
 class class-default
  bandwidth remaining percent 20
  random-detect dscp-based      
...
</code></pre>

<ul>
<li>Packets are de-queued using the <strong>FIFO</strong> (first in first out) method.</li>
</ul>
","14772"
"omnidirectional antennas and the dipole antenna","2251","","<p>This <a href=""http://www.cisco.com/en/US/prod/collateral/wireless/ps7183/ps469/prod_white_paper0900aecd806a1a3e.html"">article</a> on Cisco's website is the clearest explantion of omnidirectional antennas I've found.</p>

<p>What isn't so clear to me is...</p>

<p>1) Why is the dipole antenna the most common design for omnidirectional antennas?<br>
2) For example, why not have an antenna that has a power source on one end, and then emits current to the other end?<br>
3) Also, why does the radiation pattern (given on the linked page) take an odd spherical-like shape, instead of say, a cylinder?  </p>
","<p>The dipole antenna is the most common because it is inherently simple and very inexpensive to produce.</p>

<p>Your example, doesn't make much sense, beause that is exactly what is done with all antennas.  You have a power source (the transmitter) on one end.  The signal is radiated based on the shape of the antenna and any characteristics of the antenna to focus the signal.</p>

<p>As to why a dipole emits an ""odd spherical-like shape"" (often referenced as a toroid or doughnut), that is a relatively simple concept.  A dipole antenna is often just a straight piece of wire.  The amount of surface area available directly relates to how much signal is transmitted in any direction.  You have a much larger surface area around the lenght of the wire than you do at the tip or base, allowing much more signal to be radiated from the sides.</p>
","331"
"Cisco IOS: Service Config","2251","","<p>For Cisco routers/switches, I use the <code>no service conifg</code> in production.</p>

<p>What's the impact for the production system if I use the <code>service config</code> command when I have the configuration already loaded in my devices?</p>

<pre><code>%Error opening tftp://255.255.255.255/cisconet.cfg (Timed out)
%Error opening tftp://255.255.255.255/cbrvbc01-tgobc02-confg (Timed out)
%Error opening tftp://255.255.255.255/cbrvbc01.cfg (Timed out)
%Error opening tftp://255.255.255.255/network-confg (Timed out)
%Error opening tftp://255.255.255.255/cisconet.cfg (Timed out)
</code></pre>

<p>Security? Network traffic? Others?</p>
","<p>The <code>service config</code> command is used to load configuration files on boot.  It should have no impact to your current configuration unless you reboot.</p>

<p>It's worth noting that even Cisco considers configuration autoloading an <a href=""http://www.ciscopress.com/articles/article.asp?p=99029&amp;seqNum=2"" rel=""nofollow"">unneeded vulnerability</a>.  It's <a href=""http://www.cisco.com/c/en/us/td/docs/ios/12_2/configfun/command/reference/ffun_r/frf007.html#wp1017913"" rel=""nofollow"">default is off</a>, and probably for good reason.</p>
","6663"
"What is the transport protocol used in wget?","2247","","<p><code>wget</code> is basically to retrieve HTTP contents from web servers. I want to know if wget is based on TCP or UDP? I did a search but some resources said it is TCP while others said UDP.</p>
","<p>By default, <code>wget</code> uses HTTP to retrieve files. Which means <code>wget</code> uses TCP/80... unless you specify HTTPS, in which case it uses TCP/443. </p>
","30431"
"Tacacs VRF authentication","2245","","<p>We just got a new Supervisor7 with os 3.4.1.  I'm trying to configure authentication with tacacs, and I can't understand how to make it work.  This configuration works on our other switches, but it doesn't work on this 4500.</p>

<pre><code>aaa new-model
username cisco privilege 15 secret 5 $1$qLGb$VQ7BdaJEpzGFqPeC979Uh1
tacacs-server host 10.4.25.8 key ourKeyIsSecret
aaa authentication login default group tacacs+ local
line vty 0 15
 login authen default
</code></pre>

<p>We can only login with the fallback password.  The switch is not even trying to contact tacacs.</p>

<p>Can anyone help?</p>
","<blockquote>
  <p>This configuration works on our other switches, but it doesn't work on this 4500.</p>
</blockquote>

<p>You're using the on-board Sup7 FastEthernet port, so this is your problem:</p>

<pre><code>aaa authentication login default group tacacs+ local
                                 ^^^^^^^^^^^^^
</code></pre>

<p><a href=""http://www.cisco.com/en/US/docs/switches/lan/catalyst4500/15.1/XE_330SG/configuration/guide/sw_int.html#wp1138747"">The Sup7 OOB port is in a VRF</a>; therefore, you have to configure <a href=""http://www.cisco.com/en/US/docs/ios-xml/ios/sec_usr_tacacs/configuration/xe-3s/sec-vrf-tacas-svrs.html"">Tacacs+ in a VRF</a></p>

<pre><code>aaa new-model
!
no tacacs-server host 10.4.25.8
!
aaa group server tacacs+ TacacsVrf
  server-private 10.4.25.8 key 7 ourKeyIsSecret
  ip vrf forwarding mgmtVrf
  ip tacacs source FastEthernet1
!
aaa authentication login default group TacacsVrf local
</code></pre>
","2711"
"What is a FEC in MPLS domain?","2245","","<p>Does FEC correspond to a Next-hop ipaddress or Destination Ipaddress or a combination of Next-hop/Destination Ipaddress and QOS values ?</p>
","<p>FEC or 'Forwarding equivalence class' identifies identity for packet which will determine path it will take in the network.</p>

<p>For pure IPv4 forwarding, with routing-table 10.0.0.0/24 -> 192.0.2.1 you can think that addresses 10.0.0.0 - 10.0.0.255 share that FEC, as they are treated same way, each of them are going to go to 192.0.2.1.</p>

<p>In MPLS typically FEC is the same, some prefix gets specific label, and these are all sharing FEC. However it's completely valid to add more differentiation there, QoS (dscp, cos) could be another differentiator. So 10.0.0.0/24, CoS 1, could get label 42 and 10.0.0.0/24, CoS 0 could get label 100. </p>

<p>In IPv4 FEC is determined hop-by-hop, first hop could have 10.0.0.0/24 next-hop could have 10.0.0.0/25 and 10.0.0.128/25, causing traffic that used be in one FEC, to diverge into two FECs.<br>
In MPLS FEC is only determined by ingress PE, the traffic will then share same FEC all the way to egress PE.</p>

<p>So FEC is way to describe shared path in network for some group of packets, it does not strictly define how that group is defined.</p>
","4931"
"Mac address and IP address in physical addressing in Data-Link layer","2241","","<p>Framing is done in Data-Link layer. We give physical addresses there. Destination address, source address and MAC.</p>

<p>If two PCs in different networks, we try to sent data from one another, we specify the IP address of the destination PC in the Network layer for each packet. What do we do in Data-Link layer? What about the physical address? Whose addresses are they? How come the sender PC for another network knows the MAC address of receiver PC?</p>
","<p>The MAC addresses are the physical addresses for protocols that use MAC addresses, e.g. ethernet. The source and destination MAC addresses are used in the Data-Link frame header for protocols that use MAC addresses.</p>

<p>IP (both IPv4 and IPv6) addresses are Network Layer addresses that are used in the Network Layer packet header.</p>

<p>When a layer-3 packet is being sent, it must be encapsulated by a layer-2 frame. If the layer-2 protocol uses MAC addresses, it uses ARP (Address <em>Resolution</em> Protocol) to <em>resolve</em> the layer-3 address to a layer-2 address.</p>

<p>If the destination host is on the same network as the source host, then the source host will use ARP to get the destination layer-2 address. If the destination host is on a different network, the source host will use ARP to get the layer-2 address of its configured gateway. The layer-2 frame will be addressed with the destination layer-2 address of either the destination host (same network) or the source host's configured gateway (different network).</p>

<p>ARP basically sends a LAN broadcast asking every host on the LAN, ""<em>Who has the layer-2 address for this layer-3 address?</em>"" The host with the layer-3 address will reply with its layer-2 address. The host asking this will then save the layer-3 to layer-2 resolution in an ARP cache so that it doesn't need to ask the next time. Entries in the ARP cache will eventually time out and be purged. They can also change based on traffic the host sees.</p>

<blockquote>
  <p>How come the sender PC for another network knows the MAC address of
  receiver PC?</p>
</blockquote>

<p>A layer-2 (MAC) address is only relevant, or even seen, in the local LAN, so a PC on another network does <em>not</em> know, or even care, what the MAC address of a host on another network is. A host sending to a host in a different LAN uses the MAC address of its configured gateway. The gateway strips the layer-2 frame off the layer-3 packet to forward the layer-3 packet toward its destination network, and the router will build a new layer-2 frame for the next interface.</p>
","37049"
"Is a DSP required with a SIP trunk?","2240","","<p>Assuming a Cisco 3825 router, if the Cisco SCCP phones on the network are using G.711 µ-law and are traversing a CUCME system connected to a SIP trunk that supports G.711 µ-law, is a PVDM2 DSP card required since the codecs are the same? Does having a Unity Express module installed on the system require a DSP card?</p>
","<p>You should be good without DSPs.  The major use of DSPs on a router is when you have to convert from a TDM trunk (FXO or T1/PRI) to an IP resource.  Since SIP is all IP-based, you shouldn't have to do any conversion.</p>

<p>Do be aware that any conference calling features will consume DSPs unless you have a hardware conference bridge.</p>
","976"
"Establish an iBGP connection using BIRD","2233","","<p>I'm trying to setup an iBGP session between two nodes running BIRD 1.4.5 in my lab network but I can't establish a working session.</p>

<p>My config looks like this on both hosts except the different neighbor ip and router id:</p>

<pre><code>log syslog { debug, trace, info, remote, warning, error, auth, fatal, bug };
router id 10.142.0.6;
debug protocols all;

protocol kernel {
import none;
export filter {
    if source = RTS_STATIC then reject;
    accept;
  };

}

protocol static {
    route 10.142.120.0/22 reject;
}

protocol bgp {
    local as 76118;
    neighbor 10.142.12.2 as 76118;
    export where source=RTS_STATIC;
    import all;
    direct;
    next hop self;
}
</code></pre>

<p>The two hosts are connected via a tinc vpn and are both in the 10.142.12.0/24 subnet. The interfaces are configured properly.</p>

<p>With this setup there is no error in my log files but the BGP session is only in idle state. I've checked my config with some other people running almost the same config and it works for them.</p>

<p>If I remove the ""direct"" and ""next hop self"" config options it results in this routes in the master routing table.</p>

<pre><code>10.142.112.0/22    unreachable [bgp1 16:38:55 from 10.142.12.2] * (100/-) [i]
10.142.120.0/22    unreachable [static1 16:25:50] * (200)
</code></pre>
","<p>So I've got the problem fixed.</p>

<p>The first problem was the missing device protocol. This protocol is needed to get the interfaces of the router.</p>

<p>The second problem is connected with the first. BIRD has to know the route to the interface where my vpn network is connected to. To get this routes I've to add a static route at the static protocol block or I've to get theme dynamically with a direct protocol definition.</p>

<p>As a last modification I have to delete the direct option. I don't exactly know why but with the direct; option defined the two BIRD instances can't connect and there ins't traffic on the interface between them. So I have to run this iBGP BIRD Session in multihop mode. It would be great if someone can explane this last little problem.</p>

<p>My working config looks like this:</p>

<pre><code>log syslog { debug, trace, info, remote, warning, error, auth, fatal, bug };
router id 10.142.0.2;
protocol device {
    scan time 10;
};
debug protocols all;
protocol kernel {
export filter {    
    if source = RTS_STATIC then reject;
    accept;
  };

}
protocol direct {
        interface ""*"";
}

protocol static {
    route 10.142.112.0/22 reject;
#   route 10.142.12.0/24 via ""mapbone"";
}

protocol bgp {
    local as 76118;
    neighbor 10.142.12.6 as 76118;
    export where source=RTS_STATIC;
    import all;
    next hop self;
}
</code></pre>
","25126"
"Options when facing DHCP Exhaustion?","2232","","<p>I've seen twice, an organization's network exhausts its dhcp range.</p>

<h1>What to do when a network approaches/hits DHCP exhaustion?</h1>

<hr>

<h3>The first case I've seen:</h3>

<p>Their solution was to put the wifi network on its own subnet with very short dhcp lease times, eg somewhere in the 2hr ~ 8hr ~ 12hr range.
This approach means that the daily capacity of the wifi network is that of its dhcp range; but does not handle any more, and can still congest/deny service.</p>

<h3>The second case I've seen:</h3>

<p>Their solution was again to provision a separate subnet, this time for dedicated devices, but separate from the primary subnet with its dedicated devices as well as occasional wifi usage.</p>

<hr>

<p>Neither of what I've seen in practice seems like a great solution.</p>
","<p>If you are running out of IP address in a DHCP pool, you really only have four options to address the problem:</p>

<ol>
<li><strong>Return unused address to the pool faster</strong>: this is done by reducing the lease time. This is a popular option for situations like wireless networks at EDUs where they may have hundreds of devices moving in/out of a building as classes change. This will not help if you don't have devices moving on/off the network fairly frequently.</li>
<li><strong>Add additional IP addresses to the pool</strong>: The simplest way to do this is to check any static DHCP assignments (or reserved ranges of IPs) to make sure they are current and remove any outdated/unused/unneeded assignments releasing those IP addresses back into the pool. If not, or this was already done, two additional ways to do this would be to increase the size of the subnet (i.e. moving from a /24 to a /23) or to add an additional subnet to the pool; both of these options may require addition configuration on the network or individual devices (i.e. ones that may be configured to not use DHCP).</li>
<li><strong>Remove devices from the pool</strong>: by reducing the number of devices requesting addresses, this should make more available. Remove old/unused devices from the network or if the pool is shared by both wired and wireless devices, ensure that a device isn't requesting an address on both at the same time (allowing one device to take up two IP addresses from the pool).</li>
<li><strong>Create a new pool</strong>: this can almost be viewed as part of #3 as some devices will need to be moved to this new pool. However it is a bit more involved as it requires additional configuration of the DHCP server (or a second server), typically additional configuration on the router/gateway devices, and usually a new VLAN/subnet which may mean additional configuration changes through the network.</li>
</ol>

<p>I think that covers just about every solution to this problem that I have worked with in my career. Which actual solution will work best in any given situation is highly dependent on that environment.</p>
","19009"
"Static Routing SIOCADDRT: Network is unreachable","2227","","<p>How can I use 1.1.1.35 as gateway to reach 2.2.2.168/29 (.248) with the configuration below? I can ping 1.1.1.35 so it is reachable. When I traceroute it it uses gateway 1.1.1.1.</p>

<pre><code># route -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         1.1.1.1         0.0.0.0         UG    0      0        0 eth1
10.30.2.0       0.0.0.0         255.255.255.0   U     0      0        0 eth0
10.40.2.0       0.0.0.0         255.255.255.0   U     0      0        0 eth0
10.50.2.0       0.0.0.0         255.255.255.0   U     0      0        0 eth0
192.168.200.100 10.40.2.1       255.255.255.255 UGH   0      0        0 eth0
192.168.200.101 10.40.2.1       255.255.255.255 UGH   0      0        0 eth0
192.168.200.102 10.40.2.1       255.255.255.255 UGH   0      0        0 eth0
1.1.1.0         0.0.0.0         255.255.255.224 U     0      0        0 eth1

# ip route list
default via 1.1.1.1 dev eth1 
10.30.2.0/24 dev eth0  scope link 
10.40.2.0/24 dev eth0  proto kernel  scope link  src 10.40.2.36 
10.50.2.0/24 dev eth0  scope link 
192.168.200.100 via 10.40.2.1 dev eth0 
192.168.200.101 via 10.40.2.1 dev eth0 
192.168.200.102 via 10.40.2.1 dev eth0 
1.1.1.0/27 dev eth1  proto kernel  scope link  src 1.1.1.10 

eth0      Link encap:Ethernet  HWaddr ..... 
          inet addr:10.40.2.36  Bcast:10.40.2.255  Mask:255.255.255.0

eth1      Link encap:Ethernet  HWaddr .....  
          inet addr:1.1.1.10  Bcast:1.1.1.31  Mask:255.255.255.224
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1

root@mymachine:~# route add -net 2.2.2.168 netmask 255.255.255.248 gateway 1.1.1.35
SIOCADDRT: Network is unreachable

traceroute to 1.1.1.35 (1.1.1.35), 30 hops max, 60 byte packets
 1  1.1.1.1 (1.1.1.1)  0.224 ms  0.207 ms  0.194 ms
 2  * * *
 3  * * *

PING 1.1.1.35 (1.1.1.35) 56(84) bytes of data.
64 bytes from 1.1.1.35: icmp_seq=1 ttl=63 time=0.362 ms
</code></pre>
","<p>When you use static routing, you need to provide the next hop to the destination, and <code>1.1.1.35</code> can't be the next hop from your host, since your host is not on the same network as <code>1.1.1.35</code>. You can't dictate a multihop path through a network from your host; you can only tell it the next hop to use, and the next hop must either be directly connected to the destination, or it must have a next hop toward the destination.</p>

<p>You have <code>1.1.1.1</code> as the default gateway, which will be used for any <em>off-net</em> destination (any destination <em>not</em> in the same network as <code>1.1.1.0/27</code>, which is your network on <code>eth1</code>). You can't use a gateway which is not directly reachable from your host because you can't get a layer-2 (MAC) address for a host or gateway not directly connected to your host.</p>

<p>You need to provide a route to <code>2.2.2.168/29</code> (which, by the way, doesn't include <code>2.2.2.248</code>) on the <code>1.1.1.1</code> gateway which points to <code>1.1.1.35</code>, assuming <code>1.1.1.35</code> is directly attached to <code>1.1.1.1</code>.</p>
","29857"
"RAM and ROM size on Cisco Router","2227","","<p>I am trying to identify the size of memory available on the CISCO router. I do not have physical access to the router but I am able to login to the console and fire commands in privilege mode. <strong>I see that Flash and NVRAM memory sizes have been explicitly called out, but I don't see any information for RAM, and ROM</strong>.</p>

<p>Here are some snippets from the show version command,</p>

<pre><code>Cisco IOS Software, 2800 Software (C2800NM-ADVIPSERVICESK9-M), Version 12.4(15)T1, RELEASE SOFTWARE (fc2)


cisco 2811 (MPC860) processor (revision 0x200) with 60416K/5120K bytes of memory
Processor board ID JAD05190MTZ (4292891495)
M860 processor: part number 0, mask 49
2 FastEthernet/IEEE 802.3 interface(s)
2 Low-speed serial(sync/async) network interface(s)
239K bytes of NVRAM.
62720K bytes of processor board System flash (Read/Write)
</code></pre>

<p>Also in the line - ""cisco 2811 (MPC860) processor (revision 0x200) with 60416K/5120K bytes of memory"" how do I interpret ""<strong>60416K/5120K</strong>""?</p>
","<p>When you see a line like <code>with 60416K/5120K bytes of memory</code> in a router, this indicates the amount of DRAM and packet memory installed in the router. For many platforms, part of the DRAM is assigned to packet memory, so you take this in two ways:</p>

<ol>
<li>If the first number is a ""normal"" amount of RAM (binary or multiple of two), use only the first number. For examples from a 4500 switch, the following output would indicated 64M of RAM: <code>65536K/2072K bytes of memory</code></li>
<li>Otherwise, you will need to add the two numbers. In the example you provided, you would add the two and also get 64M of RAM.</li>
</ol>

<p>While there are many ROM only components in many Cisco devices, usually this is used as a misnomer for persistent storage on the device (i.e. where the bootable images, configuration, and other such files are stored), also often referred to as flash or NVRAM. After all, we don't really care how much ROM is installed as you can't use ROM memory.</p>

<p>The line <code>62720K bytes of processor board System flash (Read/Write)</code> clearly indicates how much you have installed.</p>

<p>Now some routers and switches will allow you to use other sources of flash as well, such as compact flash. So this is another source of storage that may not be represented on a show version.</p>
","24447"
"Can I use an OM3 fiber optics cable on 1gb transceiver J4858C?","2225","","<p>I have this multimode transceiver product:
<a href=""http://www8.hp.com/h20195/v2/gethtml.aspx?docname=c04168409&amp;search=J4858C"" rel=""nofollow"">http://www8.hp.com/h20195/v2/gethtml.aspx?docname=c04168409&amp;search=J4858C</a></p>

<p>I am going to use it on the following switch:
<a href=""http://www8.hp.com/h20195/v2/gethtml.aspx?docname=c04111401&amp;search=J9727A"" rel=""nofollow"">http://www8.hp.com/h20195/v2/gethtml.aspx?docname=c04111401&amp;search=J9727A</a></p>

<p>I was wondering if I could use the following fiber optic cable to connect to a same configuration at 200 meter distance (which has been cabled by an electrician and it is a multimode type but I don't know about the OM number) :
<strong>LC-LC 0200 50/125µ OM3 Duplex 2m</strong></p>

<p>What are the limitations in terms of bandwidth/distance?
I really don't understand the MHz*km bandwidth thing.</p>
","<p><strong>EDIT:</strong> Fixing answer now that I'm on a real laptop.</p>

<p>Yes, OM3 is just ""laser optimized"" multimode, it will work with both your optic and distance.</p>

<blockquote>
  <p>What are the limitations in terms of bandwidth/distance?</p>
</blockquote>

<p><strong>Max Distance @ 1Gbit/s</strong> (per the product page): 550m</p>

<p>This also lines up with the OM3 specification
<a href=""http://en.m.wikipedia.org/wiki/Multi-mode_optical_fiber#Types"" rel=""nofollow noreferrer"">http://en.m.wikipedia.org/wiki/Multi-mode_optical_fiber#Types</a></p>

<blockquote>
  <p>I really don't understand the MHz*km bandwidth thing.</p>
</blockquote>

<p>This is called modal dispersion, it's an inherent property of multimode fiber - it's basically the relationship between distance and bandwidth.</p>

<p>So first you need to understand that <strong>multi</strong>mode fiber is named that way for a reason.  There are multiple modes of light that are sent over the cable, so when light is transmitted it looks something like this:</p>

<p><img src=""https://i.stack.imgur.com/pxTXU.jpg"" alt=""enter image description here""></p>

<p>All of those lines are the ""modes"".</p>

<p>Because they're using the entire width of the fiber, they ""bounce"" from ""top to bottom"" as you see in the picture.  Modes traveling at the boundaries of the fiber travel faster, and modes traveling at the center travel a little bit slower.  If you look at the picture where it says ""Dispersion"" you see that they don't quite arrive at the same time, this is a very very minute amount of time, however its enough to reduce bandwidth.</p>

<p>So for something like 1GB, because it doesn't need to carry as much data, it has much more tolerance for distance (550m).  If you want it to carry 10GB, you need to compensate by shortening the distance because of this dispersion.  I hope this helps.</p>
","18578"
"Juniper SRX blank proxy-identity","2224","","<p>I would really appreciate some clarification in the following matter.</p>

<h2>What I'm seeing</h2>

<p>I'm looking at two different SRX210 firewalls and specifically at their <em>ipsec</em> stanza.
I'm seeing the following which makes me wonder about <em>proxy-identity</em>:</p>

<pre><code>admin@firewall&gt; show configuration security ipsec vpn &lt;vpn-name&gt;
bind-interface st0.1;
ike {
    gateway &lt;gateway&gt;;
    proxy-identity;
    ipsec-policy &lt;policy-name&gt;;
}
</code></pre>

<p>If I make a questionmark after <em>ike</em>, the following is produced which is of no help to me in understanding this:</p>

<pre><code>admin@firewall# set security ipsec vpn &lt;vpn-name&gt; ike ?
Possible completions:
&gt; proxy-identity       IPSec proxy-id to use in IKE negotiations
</code></pre>

<h2>The question</h2>

<p>What are the effects, if any, by entering nothing after <em>proxy-identity</em> in the configuration of a SRX?</p>

<p><em>Mark: all names and identites have been replaced for security sakes</em></p>

<p>Thanks in advance!</p>
","<p>Proxy-identity defaults to whatever you have set on the policy (in case of policy-based VPN). In case of route-based VPN, it defaults to:</p>

<pre><code>proxy-identity {
   local 0.0.0.0/0;
   remote 0.0.0.0/0;
   service any;
}
</code></pre>

<p>Proxy-identity is used only for negotiating the IKE phase of the VPN, and has to mirror the proxy-identity that is set on the other site of the VPN tunnel. It has no effect on actually routing or permitting traffic through the tunnel once it has been established, that has to be done with routes and/or policies.</p>

<p>This is easily verified if you have access to Juniper routers where you can mess around with the VPN settings.</p>

<h3>no proxy-identity settings</h3>

<p>Testing default settings without mentioning proxy-identity.</p>

<pre><code>vpn ike-vpn {
    bind-interface st0.0;
    ike {
        gateway gw-vpn;
        ipsec-policy ipsec-phase2-policy;
    }
}
</code></pre>

<p>The VPN is established, using 0.0.0.0/0 as local and remote subnets:</p>

<pre><code>root@srx-01&gt; show security ipsec security-associations detail
  ID: 131073 Virtual-system: root, VPN Name: ike-vpn
  Local Gateway: 192.168.159.133, Remote Gateway: 192.168.159.128
  Local Identity: ipv4_subnet(any:0,[0..7]=0.0.0.0/0)
  Remote Identity: ipv4_subnet(any:0,[0..7]=0.0.0.0/0
</code></pre>

<h3>real proxy-identity settings</h3>

<p>As a second test, I've added real proxy-identity settings to match my remote and local subnets:</p>

<pre><code>vpn ike-vpn {
    bind-interface st0.0;
    ike {
        gateway gw-vpn;
        proxy-identity {
            local 10.2.1.0/24;
            remote 10.1.1.0/24;
        }
        ipsec-policy ipsec-phase2-policy;
    }
}
</code></pre>

<p>As expected, the tunnel is established using the proper local and remote subnet information: </p>

<pre><code>root@srx-01# run show security ipsec security-associations detail
  ID: 131073 Virtual-system: root, VPN Name: ike-vpn
  Local Gateway: 192.168.159.133, Remote Gateway: 192.168.159.128
  Local Identity: ipv4_subnet(any:0,[0..7]=10.2.1.0/24)
  Remote Identity: ipv4_subnet(any:0,[0..7]=10.1.1.0/24)
</code></pre>

<h3>blank proxy-identity</h3>

<p>Now I'll remove the local and remote subnets from the proxy-identity stanza:</p>

<pre><code>vpn ike-vpn {
    bind-interface st0.0;
    ike {
        gateway gw-vpn;
        proxy-identity;
        ipsec-policy ipsec-phase2-policy;
    }
}
</code></pre>

<p>The tunnel is reastablished using 0.0.0.0/0 as local and remote subnets.</p>

<pre><code>root@srx-02# run show security ipsec security-associations detail
  ID: 131073 Virtual-system: root, VPN Name: ike-vpn
  Local Gateway: 192.168.159.128, Remote Gateway: 192.168.159.133
  Local Identity: ipv4_subnet(any:0,[0..7]=0.0.0.0/0)
  Remote Identity: ipv4_subnet(any:0,[0..7]=0.0.0.0/0)
</code></pre>

<p>In other words, my assumption is correct and leaving the stanza blank means the router uses its default settings.</p>
","16359"
"is multicast possible in tcp?","2222","","<p>I got an assignment to implement unicast , multicast and broadcast in udp or tcp in java, so I searched for it  and I only got udp implementation of multicast.
my question is -- Is there multicast possible in tcp?</p>
","<p>In a word: <strong>NO</strong></p>

<p>Multicast is a one-to-many system. TCP requires a one-to-one handshake to synchronize counters (sequence numbers) to ensure reliable transport. This cannot be done with many receivers as the sender has no way to know how many receivers there are and thus how many ACKs to expect, or what to do if one of the receivers disappears mid-transfer, etc.</p>

<p>Think of multicast as a speaker in a lecture hall. They don't know how many people are supposed to be there, nor care if some are late or leave. Nor do they know (or care) if everyone in the hall is hearing everything they say.</p>
","16173"
"Static routes between 3 windows routers and vyatta","2218","","<p>Hi for a school project I have to build a network this is the current situation:</p>

<p><img src=""https://i.stack.imgur.com/b44m5.png"" alt=""Situation""></p>

<p>I can ping between 172.16.0.0/19, 172.16.32.0/19 and 172.16.64.0/19. I <em>can</em> ping from my router (172.16.128.15) to those 3 networks and I <em>can</em> ping from 172.16.32.0 and 64.0 to the router on 172.16.128.15.  However, I <em>can't</em> ping from 172.16.32.0/19 and 172.16.64/19 to the DMZ and internet.</p>

<p>Rules on Firewall/Router:</p>

<pre><code>Static routes: 
route 172.16.0.0/19 next-hop 172.16.128.101 
route 172.16.32.0/19 next-hop 172.16.128.101 
route 172.16.64.0/19 next-hop 172.16.128.101 
route 172.16.96.0/19 next-hop 172.16.96.1
route 172.16.128.0/19 next-hop 172.16.128.15 
route 172.16.160.0/19 next-hop 172.16.128.101

nat rule: 
outbound-interface eth0 source address 0.0.0.0 type masquerade
</code></pre>

<p>The following static routes I have on my router in 172.16.32.0/19 subnet</p>

<pre><code>172.16.0.0 mask 255.255.224.0 172.16.160.6
172.16.32.0 mask 255.255.224.0 172.16.32.3
172.16.64.0 mask 255.255.224.0 172.16.160.7
172.16.128.0 mask 255.255.224.0 172.160.6
</code></pre>

<p>Yes indeed router 2 and router 3 are missing 172.16.96.0 mask 255.255.224.0 172.16.128.15 and 0.0.0.0 mask 0.0.0.0 172.16.128.15. But when I add those it still doesn't work. So where can it go wrong?</p>

<p>On DC1 and router1 everything works fine towards the outside.</p>

<p>How can I access the internet from subnet 172.16.32.0 and 172.16.64.0?</p>
","<blockquote>
  <p>Yes indeed router 2 and router 3 are missing 172.16.96.0 mask 255.255.224.0 172.16.128.15 and 0.0.0.0 mask 0.0.0.0 172.16.128.15. But when I add those it still doesn't work. So where can it go wrong?</p>
</blockquote>

<p>The routes you proposed are incorrect according to the diagram you provided, the routes you need to configure on R2 and R3 are</p>

<pre><code>0.0.0.0 0.0.0.0 172.16.160.6
172.16.96.0 255.255.224.0 172.16.160.6 (you don't need this route actually but I'm including it anyway).
</code></pre>

<p>The reason for this is that R2 and R3 do not have an interface connected to the 172.16.128.1/19 network, only R1 does. Since that network is not directly connected to R2 or R3, you cannot use it as a ""next hop"" for your static routes - it is not the next hop. R2 and R3 would have to forward traffic to R1 to reach the internet first, so it must be configured as the gateway for the default routes on R2 and R3. </p>
","5374"
"Router can ping external IP, PC going thru same router can't","2216","","<p>I have a lab setup with 3 routers and 3 switches, but for simplicity for this issue, I turned on only 1 router and 1 switch and ran this test with the same results so I'm pretty sure it has nothing to do with my ip route statements.</p>

<pre><code>PC &gt;&gt; Cisco Router &gt;&gt; Cisco switch &gt;&gt; Home Router
</code></pre>

<blockquote>
  <p>Router</p>
  
  <p>FE0/0 192.168.1.15 /24</p>
  
  <p>FE0/1 192.168.10.1 /24</p>
  
  <p>ip route 0.0.0.0 0.0.0.0 192.168.1.1</p>
</blockquote>

<hr>

<blockquote>
  <p>Switch (default vlan1 only)</p>
  
  <p>192.168.1.20 /24</p>
  
  <p>ip default-gateway 192.168.1.1</p>
</blockquote>

<p>The default-gateway is my live/home router that I access the internet.</p>

<p>The problem is: The router (192.168.1.15) can ping outside addresses, but even if I plug my PC directly into the routers FE0/1 port (192.168.10.1), the router will not forward anything to the outside world from my PC. If the router can get out, why can't my PC? The PC has no problem pinging the FE0/0 interface.</p>

<blockquote>
  <p>PC</p>
  
  <p>IP 192.168.10.51 /24</p>
  
  <p>Gateway 192.168.10.1</p>
  
  <p>DNS 192.168.1.1</p>
</blockquote>

<p>Router - show ip route...</p>

<blockquote>
  <p>Gateway of last resort is 192.168.1.1 to network 0.0.0.0</p>
  
  <p>S*    0.0.0.0/0 [1/0] via 192.168.1.1</p>
  
  <p>192.168.1.0/24 is variably subnetted, 2 subnets, 2 masks</p>
  
  <p>C        192.168.1.0/24 is directly connected, FastEthernet0/0</p>
  
  <p>L        192.168.1.15/32 is directly connected, FastEthernet0/0</p>
</blockquote>

<p>Any help is appreciated,
Thanks!</p>
","<p>Your home router needs a route to the <code>192.168.10.0/24</code> route. It needs a route to know where to send traffic destined for that route, else it will send it out the default route (WAN).</p>
","23045"
"How to make CLI enter new line automatically","2212","","<p>I would like to know the command to configure CLI on cisco equipment to make the cursor move to the new line right away after it showed the message. 
<strong>So for example:</strong></p>

<pre><code>Router#
Router#
*00:00:00: Interface Ethernet0 chaged state to up.Link blablalba* ***(cursor is here)**** 
</code></pre>

<p>and then the cursor stays on the same line where the message was displayed..</p>

<p>I want it to move to the next line right away automatically.</p>

<p><strong>Example:</strong></p>

<pre><code>Router#
Router#
00:00:00: Interface Ethernet0 chaged state to up. Line protocol blablalba
Router#****(cursor is here)**** 
</code></pre>
","<p>I think you're looking for ""logging synchronous"".</p>
","3885"
"Is it possible to set idle-timeout for the Junos root user?","2209","","<p>We have all of our network devices attached to console servers for out-of-band access. Occasionally, someone will log in as the local root user and forget to log out. Whoever happens to log into that device next via the console server will be greeted by an open console session.</p>

<p>I'm aware that you can <a href=""http://forums.juniper.net/t5/SRX-Services-Gateway/Console-vty-login-session-inactivity-timeout/td-p/145386"" rel=""nofollow"">configure idle timeouts under login classes</a>, but that doesn't seem to be an option for the built-in super-user class:</p>

<pre><code># set system login class super-user idle-timeout 10 
warning: 'super-user' is a predefined class name; changing to 'super-user-local'
</code></pre>

<p>Nor can we assign the root user to a custom class:</p>

<pre><code># set system login user root class root
# commit 
error: cannot create user account: root
error: user name is used by a system account
error: commit failed: daemon file propagation failed
</code></pre>

<p>Does anyone have any clever tricks around this? We could certainly use a separate user account instead of root, but that still leaves open the possibility that someone will log in as root during a maintenance action and forget to log out.</p>
","<p>Setting idle-timeout for root directly from the CLI is not possible, unfortunately.</p>

<p>I wrote an event script that does what you need.</p>

<p>Basically, every 5 minutes it checks:</p>

<ul>
<li>If root is logged in via console (verified by a ""-"" in the FROM
section of ""show system users"") </li>
<li>If root is logged in, has it been
idle for 15 minutes or more (checked in seconds, so 900 seconds). </li>
<li>If
all of those requirements are met, issue ""request system logout
terminal $TERM"" (uses whatever terminal is present in the information
the script pulled).</li>
</ul>

<p><strong>Non-XML version of what is pulled:</strong></p>

<pre><code>jhead@VPN-EP1&gt; show system users
 4:02PM  up 2:56, 2 users, load averages: 0.07, 0.02, 0.00
USER     TTY      FROM                              LOGIN@  IDLE WHAT
root     v0       -                                3:55PM      6 cli
jhead    p0       172.16.67.1                      1:09PM      - -cli (cli)
</code></pre>

<p>You can see a closer representation of what information the script parses by issuing:</p>

<pre><code>show system users | display xml
</code></pre>

<p><strong>The Script Itself: (filename: <code>terminate-idle-root.slax</code>)</strong></p>

<pre><code>/*
 * Author        : Jordan Head
 * Company       : Juniper Networks
 * Version       : 1.0
 * Last Modified : December 13, 2015
 * Platform      : all
 *
 * Description   : This event script periodically checks for root user sessions logged in
 * via out-of-band console that have been idle for 15 minutes or more, and terminates the session.
 *
 */

version 1.0;

ns junos = ""http://xml.juniper.net/junos/*/junos"";
ns xnm = ""http://xml.juniper.net/xnm/1.1/xnm"";
ns jcs = ""http://xml.juniper.net/junos/commit-scripts/1.0"";

import ""../import/junos.xsl"";

var $event-definition = {
  &lt;event-options&gt; {
    &lt;generate-event&gt; {
      &lt;name&gt; ""5-minute-delay"";
      &lt;time-interval&gt; ""300"";
    }
    &lt;policy&gt; {
      &lt;name&gt; ""terminate-idle-root"";
      &lt;events&gt; ""5-minute-delay"";
      &lt;then&gt; {
        &lt;event-script&gt; {
          &lt;name&gt; ""terminate-idle-root.slax"";
        }
      }
    }
  }
}

match / {
    &lt;op-script-results&gt; {

      var $root_user = ""root"";
      var $idle_time = ""900"";
      var $from = ""-"";

      var $show-system-users-output = &lt;get-system-users-information&gt;;
      var $show-system-users = jcs:invoke($show-system-users-output);

      for-each ($show-system-users/uptime-information/user-table/user-entry) {
          var $user_check = ./user;
          var $idle_time_check = ./idle-time/@junos:seconds;
          var $from_check = ./from;
          var $tty = ./tty;
              if ($user_check == $root_user &amp;&amp; $idle_time_check &gt;= $idle_time &amp;&amp; $from_check == $from) {
                  var $terminate_root_console = &lt;command&gt; ""request system logout terminal "" _ $tty;
                  expr jcs:invoke($terminate_root_console);
              }
      }
    }
}
</code></pre>

<p><strong>Applying the Script:</strong></p>

<p>If the commit is successful, it means that the script's syntax is valid.</p>

<pre><code>jhead@VPN-EP1&gt; configure exclusive
warning: uncommitted changes will be discarded on exit
Entering configuration mode

[edit]
jhead@VPN-EP1# set event-options event-script file terminate-idle-root.slax

[edit]
jhead@VPN-EP1# commit and-quit
commit complete
Exiting configuration mode
</code></pre>

<p>Hope this helps, feel free to comment if anything is unclear and I'll be happy to update my answer.</p>

<p>Just a final note: @bob is right, that should work.  I've just seen console appliances that maintain a connection, but allow access to the box itself so it wouldn't terminate.  If you're doing a typical setup, his solution will work - but I've seen implementations where it wouldn't.</p>

<p><strong>Adjusting Timeout for root Shells:</strong></p>

<p>Just wanted to add one more quick thing someone brought to my attention.  </p>

<p>If you're concerned with idle timeout on root user shell sessions (not CLI), you can jump into a shell and set:</p>

<pre><code>set autologout=X  ## Where X is the number of minutes of idle time before session is terminated.
</code></pre>

<p>You add/edit the file /etc/csh.login</p>
","25189"
"Juniper SRX HA links passing through switch","2209","","<p>it is necessary to join two srx650 in chassis cluster (Passive/Active) via two switches EX4200 . I need to choose one from three examples.
Please , help to define correct choice and describe what the settings should be on Srx650 and switch ex4200.
Also important moment- is it possible connect swithes via fiber-optic ?
Three Diagrams below outlines the logical configuration:</p>

<p><em>Option 1</em>:
<a href=""https://i.stack.imgur.com/MOMRR.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/MOMRR.jpg"" alt=""enter image description here""></a></p>

<p><em>Option 2</em>:
<a href=""https://i.stack.imgur.com/daGUZ.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/daGUZ.jpg"" alt=""enter image description here""></a></p>

<p><em>Option 3</em>:
<a href=""https://i.stack.imgur.com/vhWg7.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/vhWg7.jpg"" alt=""enter image description here""></a></p>
","<p>Things you should be aware of: SRX HA links communicate using <strong>jumbo frames</strong> and <strong>multicast addresses</strong>. So to make this work you need at least the following changes on the EX switches:</p>

<ol>
<li><p>Configure a jumbo MTU on the HA links and the links between the EX switches. This will enable jumbo frames to go trough the switch infrastructure.</p>

<pre><code>set interface x mtu 9216
</code></pre></li>
<li><p>Deactivate igmp-snooping for the HA VLAN or if not needed delete it completely. If you leave it enabled the switch will not forward the multicast frames because there are no IGMP messages to tell the switch which port is listening for these frames.</p>

<pre><code>set protocols igmp-snooping vlan HA-VLAN disable
</code></pre>

<p>or</p>

<pre><code>delete protocols igmp-snooping
</code></pre></li>
</ol>

<p>Over which media you connect the switches with each other is not important, you can use copper or fiber as you wish. I would use an <code>ae</code> bundle interface with two or more links to reduce the chance of one link failure killing the whole connection between the switches. <strong>Don't forget to enable LACP on the ae bundle.</strong> If possible have the two links take different routes to prevent someone cutting both fibers at the same time.</p>

<p>This being said, <strong>if possible I would always suggest directly connecting the HA links</strong> of any firewall device. This reduces the risk that a problem on the switch (hardware failure, software bug, human error) will cause you a split-brain situation (both firewalls become master) which will certainly ruin your day (BTDT).</p>
","6813"
"I disabled an interface in vyatta, how do I enable it?","2206","","<p>I entered <code>set interfaces eth0 disabled</code> which worked. <code>show interfaces</code> shows that the interface is administratively down. However I can figure out how to bring it back up.</p>
","<pre><code>delete interfaces eth0 disabled
</code></pre>
","19988"
"Upgrading ASA and ASDM on a ASA5510","2206","","<p>I have a single Cisco ASA 5510 in production.</p>

<p>It has:</p>

<ul>
<li>ASA version <code>8.0(2)</code></li>
<li>ASDM version <code>6.0(2)</code></li>
<li>1GB RAM (upgraded recently from 256MB)</li>
<li>64MB Flash</li>
</ul>

<p>I have backed up the flash and the configuration.</p>

<p>We need to upgrade the ASA version to <code>9.1(4)</code> and ASDM version to <code>7.1(5)</code></p>

<p>I have the following queries:</p>

<ol>
<li>Do I need to upgrade the Flash from 64MB to a larger one for the software upgrade?</li>
<li>What is the recommended upgrade path from <code>8.0(2)</code> to <code>9.1(4)</code>?</li>
<li>Do I need to manually update the start-up configuration due to changes in NAT syntax etc between these versions or will this be done automatically if I follow a recomended upgrade path?</li>
</ol>

<p>Thanks for your time!</p>
","<ol>
<li><p>It is recommended you upgrade the flash to at least the current shipping default of 256mb in the fine print (number 11) of the 8.3 memory upgrade guide. (<a href=""http://www.cisco.com/c/en/us/td/docs/security/asa/hw/maintenance/guide/asa_hw/overview.html#pgfId-1054519"">http://www.cisco.com/c/en/us/td/docs/security/asa/hw/maintenance/guide/asa_hw/overview.html#pgfId-1054519</a>). The same would apply for 9.1. The concern would come with loading the ASA code it self, along with ASDM and AnyConnect.</p></li>
<li><p>As for the upgrade path you can find the recommended path in the release notes for 9.1</p>

<ul>
<li>""You cannot upgrade directly to 9.0 or later. You must first upgrade to Version 8.3 or 8.4 for a successful migration."" <a href=""http://www.cisco.com/c/en/us/td/docs/security/asa/asa91/release/notes/asarn91.html"">http://www.cisco.com/c/en/us/td/docs/security/asa/asa91/release/notes/asarn91.html</a></li>
</ul></li>
<li><p>There are provisions to migrate the old NAT config to the new NAT config however we have seen in the past they may not be the most accurate, however your mileage may vary depending on the complexity of your configuration. This would occur the 8.3 to 8.4 portion of the upgrade.</p></li>
</ol>
","7113"
"How router receives packets which it is going to route","2205","","<p>This will be probably a stupid question, but I'm just trying to understand networking. I decided to <code>nmap</code> my router, and found that its only open ports are 23 (telnet) and 80 (http) which is understandable as telnet is for low level configuration, and http is for web interface. I get it. But if those are only open ports, where the router actually receive packets that are going to its default gateway (and internet)? When I <code>nmap</code> its default gateway, I'm getting open 179 (bgp) and 646 (ldp) ports. I don't understand fully what they are specifically for, but it gives my at least some explanation where data from my router is going. But how is my router receving my packets that it's going to route?</p>
","<p><strong>Understanding routing requires a fundamental understanding of switching.</strong>  Whereas <strong>routing occurs at network layer (L3)</strong> where IP addresses are concerned and <strong>switching occurs at the data-link layer (L2)</strong> where MAC addresses exist, the source device needing a packet to be routed to a different network (or subnet) will send the packet to its default gateway [IP address].  <em>We won't concern ourselves with how the gateway address gets assigned.</em>  The destination address is known to the source usually via DNS (which we won't cover either), so we can focus on the OP's question.  <strong>A key point to routing is that the source IP and gateway IP are on the <em>same</em> network which uses switching.</strong></p>

<p>The open ports discovered on the router via <em>nmap</em> are used only when sending packets <em>destined</em> to the router (i.e., sent to one of the router's own IP addresses) such as telnet'ing to tcp/23 or when another router speaks BGP to it on tcp/179.  The router is mostly handling packets sent <em>through</em> (transit) which are not addressed to it by IP.  The ports are transport layer (L4) TCP or UDP ports on top of IP (L3).</p>

<blockquote>
  <p>To route (IP addresses), you need to switch (via MAC addresses)</p>
</blockquote>

<p>So you need the MAC address of the gateway (router).  Using the ARP protocol at L2, your source device will craft a packet seeking the MAC address of the gateway IP address.  This ARP packet contains the its source IP and MAC address along with the IP address of the gateway with a placeholder for the unknown MAC address.  The router recognizes the ARP request matches one of its own IP addresses and sends an ARP reply to the source device with the gateway MAC address.  The source is now able to send packets to the distant IP address through the router.  See <a href=""https://networkengineering.stackexchange.com/questions/3329/reason-for-both-a-mac-and-an-ip-address/3335#3335"">Reason for both a MAC and an IP address</a>.</p>

<hr>

<p>Example:</p>

<pre><code>Source IP: 1.1.1.2 (/24)
Source MAC: 11:11:11:22:22:22
Destination IP: 3.4.5.6
Destination MAC: We don't ever need this... (left as an exercise for the reader on why)
Gateway IP: 1.1.1.1
Gateway MAC: 11:11:11:11:11:11
</code></pre>

<ol>
<li>Source IP 1.1.1.2 wants to send packet to destination IP 3.4.5.6.</li>
<li>Source ARPs for MAC address of 1.1.1.1 (gateway).  </li>
<li>Router receives ARP and responds with its 11:11:11:11:11:11 MAC.</li>
<li>Source sends Ethernet frame to destination MAC 11:11:11:11:11:11 (router) with destination IP 3.4.5.6.</li>
<li>Router receives ingress Ethernet frame addressed to its MAC.</li>
<li>Router looks up destination IP 3.4.5.6 in its route table to determine which egress interface to use.</li>
<li>Router sends packet to next hop after <strong>rewriting source MAC with its own MAC of the egress interface and the destination MAC of the next hop</strong>.</li>
</ol>

<p>Another key point here is that the router also needs to do L2 switching and ARP for the MAC address of the next hop to move the packet along, and this routing/switching one-two combo continues along the hops until the destination IP is reached.</p>
","9667"
"Routing on firewall vs L3 switches","2203","","<p>So we have an environment with several VLANs connected to a FortiNet firewall using multiple interfaces trunked back to our L3 Dell PowerConnect 6248P switches.</p>

<p>Currently the FortiNet is setup to do the routing for all networks but I was curious performance benefit we may get by moving routing from the FortiNet to the Dell switches. I created a test by creating IP addresses for a couple of VLANs on our network on the Dell switches and made sure routing was enabled on the switches. I then set my computer up to use the new test gateway for that switch.</p>

<p>I did a simple ping test to get the latency and it came back with an average of about 1.5ms every time I pinged the new IP address for that VLAN on the switch.</p>

<p>If I change back so my gateway is going through the FortiNet so it does the routing and ping the IP address assigned for the VLAN on the FortiNet, I get an average latency of 0.5ms.</p>

<p>Shouldn't routing through the L3 switches have reduced latency over the FortiNet?</p>

<p>Am I missing some obvious crucial piece to getting this working as I had expected?</p>
","<blockquote>
  <p>Am I missing some obvious crucial piece to getting this working as I had expected?</p>
</blockquote>

<p>You musn't confuse the latency of traffic destined <em>to</em> the switch with the latency <em>through</em> the switch.</p>

<p>When you ping a VLAN interface on a switch, you are quite often hitting the CPU/Control plane, which in the case of most enterprise-grade switches, is not a very powerful processor, and treats thing like inbound ICMP with a very low priority.</p>

<p>Re-run your test by rapidly pinging a device (multiple times) on another subnet when the Firewall is the gateway, and again when the switch is the gateway.  You will probably find that latency measurements are now virtually indistinguishable.</p>

<p>Where you will get the best performance improvement though is routing throughput - most switches should be able route L3 at line rate (at least the majority should for the majority of their interfaces).</p>

<p>Use a tool like iperf to measure throughput between two hosts on different subnets with both the firewall and the switch in path and see what your results look like.</p>

<p>You didn't mention the model of your firewall, but it may handle 1Gbps of traffic without any issue, so be sure to scale your testing!</p>
","12741"
"""simple"" question about VLAN switching","2202","","<p>Well, some days ago I had a interview for a IT networking job.</p>

<p>One of the questions was about switching, and says the following:</p>

<p>We have a computer A connected to a switch configured in VLAN2, and computer B connected to other switch configured with VLAN3. Considering the link between switches as access mode, has the computers A and B connection trough ping?</p>

<p><img src=""https://i.stack.imgur.com/T0XGx.png"" alt=""Connection""></p>

<p>As I think the answer is NO, because if we are using dot1Q we need at least one router to join different VLANs (VLAN2 VLAN3). Am I wrong?</p>
","<p>In this case, you are wrong.  Since the link between the two switches is an access port, there is no VLAN tagging involved.</p>

<p>Think of it this way, switch two is a unconfigured switch (i.e. operating like a dumb switch) so all ports are in VLAN 1.  This would still provide connectivity as well.</p>
","9507"
"Do MPLS LSRs require a Layer 3 IP routing protocol?","2201","","<p>Recently I've been trying to get my head around MPLS, it's a part of the project we're doing. During one of our meetings one of the participant ask a question: </p>

<blockquote>
  <p>Since LSRs doesn't check IP routing table when it's forwarding packets. If we're sure that every packet is going through MPLS not the normal IP networks, is it necessary to have IP protocols running on LSRs?</p>
</blockquote>

<p>I've been trying to get the answer to this question, but can't seems to find a clear enough answer. The closest one I can find is here.
<a href=""https://networkengineering.stackexchange.com/questions/6218/mpls-can-reroute-but-can-it-route"">MPLS can reroute, but can it route?</a>.  That question says MPLS requires a layer 3 protocol to work properly.</p>

<p>But what if the whole network from end-to-end is an MPLS network, will the IP protocol still be necessary? My guess is it's still necessary but my understanding to MPLS is not clear enough so that I can point out a situation that this won't work.</p>
","<p>In theory you can run MPLS without an IGP, any sane network admin would not though. MPLS labels can be assigned through:</p>

<pre><code>LDP
RSVP-TE
</code></pre>

<p>Generally a router runs IGP to populate the Routing Information Base (RIB). This is the control plane, routes are then installed into the Forwarding Information Base (FIB). This is the data plane forwarding, depending on platform, there may also be distributed forwarding on linecards so the linecard will have a local database.</p>

<p>When running LDP, labels are advertised to adjacent routers based on the RIB. The labels are then stored in the Label Information Base (LIB). This is the control plane and equivalent to the RIB but contains labels. The LIB is then one of the components used to build the Label Forwarding Information Base (LFIB) which is the equivalent of the FIB.</p>

<p>Running LDP, without an IGP, the labels would not be assigned because there are no routes in the RIB. This could be solved by entering static routes but it's obviously not a scalable solution.</p>

<p>When using RSVP-TE, labels are not assigned through the RIB. Tunnels are manually defined, connectivity is still needed between the headend and tailend, which is usually done through IGP but could be done through static routing as well.</p>

<p>There are special cases where routing is not needed with RSVP-TE because the neighbor is statically defined such as in the configuration below:</p>

<pre><code>interface FastEthernet1/0
ip address 20.0.23.2 255.255.255.0
mpls traffic-eng tunnels
mpls traffic-eng passive-interface nbr-te-id 3.3.3.3 nbr-if-addr 20.0.23.3
</code></pre>

<p>Example above came from <a href=""http://mellowd.co.uk/ccie/?p=4106"" rel=""nofollow"">RSVP-TE without IGP</a></p>

<p>So the configuration is possible but definitely not recommended. To be able to reach the router remotely for management you would want to have an IGP running, also possible to solve through static routes of course. In the end it's about scalability and how prone to error each solution is.</p>
","10300"
"Cisco Switch (Cayalyst 2960-X) How to add a rule to the access list that filters out l2tp packet when a specific MAC address appears in it?","2198","","<p>I am using a Cayalyst 2960-X series Cisco Switch, Whose 2 SFPs are connecting between 2 hosts (A,B). </p>

<p>A,B are connected to the switch's 1,2 ports respectively.
The host communicates using an l2tp based protocol. As you know <a href=""https://en.wikipedia.org/wiki/Layer_2_Tunneling_Protocol"" rel=""nofollow"">l2tp</a> is a link layer protocol.</p>

<p>As part of the l2tp traffic sourced at host A whose destination is B, there are few packets I want to deny from getting to port 2 / Host B. </p>

<p>The packets that I want to drop have a source MAC address of <code>88:77:66:55:44:33</code> in their Ethernet 2 metadata, which is part of the whole l2tp packet (see the byte layout bellow). </p>

<p>I would like to set a rule or an access list that drops the l2tp packet by inspecting its Ethernet 2 attribute and in case the specific <code>88:77:66:55:44:33</code> MAC address appears in the SA.</p>

<p>I am familiar with the <code>mac access-list</code> command but every manual I had seen explicitly says that ACLs filter only <code>non-IP protocols</code>. In spite of that I tried to use <code>mac access-list</code> and indeed it didn't help. </p>

<p>Moreover, I found the <a href=""http://www.cisco.com/c/en/us/td/docs/switches/lan/catalyst2960x/software/15-0_2_EX/security/configuration_guide/b_sec_152ex_2960-x_cg.pdf"" rel=""nofollow"">Catalyst 2960-X Switch Security Configuration Guide, Cisco IOS
Release 15.0(2)EX</a>, and under the <code>Restrictions for Configuring Network Security with ACLs</code> section it says:</p>

<blockquote>
  <p>You cannot apply named MAC extended ACLs to Layer 3 interfaces.</p>
</blockquote>

<p><strong>Isn't it feasible to filter ip protocols by drill down and inspecting their Ethernet 2 Mac addresses data?</strong> </p>

<hr>

<p>By sniffing the traffic between the 2 hosts, I can tell the packets has the following byte layout (As I see on Wireshark):</p>

<pre><code> 0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |        Ethernet 2 (14 Bytes)     |       IP(20 Bytes)         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | IP  |L2TP 4B|HDLC 4B| Data                                    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</code></pre>
","<p>There seems to be some confusion about this topic for you. Let's begin by clearing up a few details.</p>

<blockquote>
  <p>I am familiar with the mac access-list command but every manual I had seen explicitly says that ACLs filter only non-IP protocols.</p>
</blockquote>

<p>If you think about this a bit, it makes sense. An IP packet doesn't contain a MAC addresses, so this would be difficult.  However, IP traffic is encapsulated in a L2 protocol, typically Ethernet which does utilize MAC addresses.</p>

<blockquote>
  <p>You cannot apply named MAC extended ACLs to Layer 3 interfaces.</p>
</blockquote>

<p>Again, this is natural. Since MAC ACLs function on L2, they wouldn't really need/want them on a L3 interface anyway.</p>

<p>However, by default interfaces on a 2960-X are layer 2 interfaces, so you can apply a MAC access-list to them.</p>

<p>So, this series of commands should provide the result you want (using the first SFP port on a WS-C2960X-48FPS-L so adjust as necessary):</p>

<pre><code>! Create the ACL
mac access-list extended TestACL
deny host 8877.6655.4433 any
permit any any

! Now apply to the interface
interface Gi1/0/49
mac access-group TestACL in
</code></pre>

<hr>

<p><strong>Edit based on comments</strong>: if you want to rule out the source port being incorrect, you can use the following with the above ACL to block all traffic from that MAC going out the second SFP port:</p>

<pre><code>! Now apply to the interface
interface Gi1/0/50
mac access-group TestACL out
</code></pre>

<p>If that doesn't work, then the MAC address has to be incorrect and you need to provide more information.</p>

<p>The ACL will work no matter if the MAC address table is updated dynamically or if you add a static entry. However, if the dynamic entry for this MAC is flapping between different ports, that could explain why the ACL didn't work as intended.  Additionally, without additional features configured, the static entry will not have an effect on traffic arriving on a port, only on the destination port used for the traffic.</p>

<p>And finally, the packet being highlighted in red by Wireshark doesn't tell me much. Different versions of Wireshark have used different coloring rules, the default rules typically include a number of matches that get colored red, and many of us use our own custom rules. You would need to provide more detail or the actual capture for us to know what exactly that means.</p>
","19499"
"OSPF LSA Refresh Time","2196","","<p>Is there a Cisco command that would allow one to modify the default value of 1800 seconds (30 min) for the OSPF LSA refresh rate?</p>
","<p>You cannot change the LSRefreshTime because it's hard-coded as an ""architectural constant"" in the <a href=""http://tools.ietf.org/html/rfc2328#page-217"" rel=""nofollow"">OSPF RFC</a>.</p>
","1531"
"Limit Internal LAN Traffic and Internet Traffic - Managed Switch?","2192","","<p>I have a small business network (<code>192.168.10.x/24</code>) with a pfSense firewall (about 20 hosts: mix of Windows, Macs and Linux machines and printers...). The ISP modem from the WWW connects to the firewall which connects to a 16-port switch, and all the workstations/servers/printers connect to other switches downstream. All the switches (except for the hidden, because I'm not sure) are Netgear ProSafe (5-, 8- and 16-port) gigabit switches (unmanaged).</p>

<p>What I'm trying to accomplish are two things:</p>

<p>First, if someone is streaming video or up/down-loading a large file through the Internet, this bogs down the entire network, so I'd like to set it up so this doesn't affect others on the network.</p>

<p>Second, if someone transfers a large file to/from a file server on the LAN (not through the Internet), this also bogs down the network, so I'd also like to set it up so this doesn't affect others on the network.</p>

<p>A common use case is like this: I have one user uploading files to a file share service on the web (via HTTP/HTTPS) and another user accessing an Apache web server on the subnet (on <code>192.168.10.x</code>) and the user on the subnet accessing the web server sees really slow responses for the web app (to the extent that sometimes it times out). When the file is done, accessing the web server is normal again.</p>

<p>One additional side-question that has been bothering me... If I have a layer-2 unmanaged switch and it stands in the way of two workstations or servers that communicate with one another, am I correct in my understanding that the switch will log the MAC addresses and route traffic without contacting the firewall?</p>

<p>I should note as well that the speeds I usually see with a speed test are:</p>

<pre><code>60 Mbps down (+/- 5 Mbps)
12 Mbps up (+/- 3 Mbps)
</code></pre>

<p>Here is a diagram of the network in question:</p>

<p><img src=""https://i.stack.imgur.com/x8sK2.png"" alt=""enter image description here""></p>

<p>In this case, the hidden switch doesn't come into play. I'm running tests now and the loop is from a host on the left side of the diagram to the right side.</p>

<p>Thanks for the feedback on this question. I was hoping to get some more concrete feedback, but I suppose since this is a tricky question, more troubleshooting is in need.</p>

<p>Regarding gear... I've been considering a managed switch. I see that Cisco has some 10-port gigabit managed switches for under $200, which seems reasonable to me.</p>

<p>My question is would it help to replace the 16-port unmanaged switch with a 10-port managed switch? I know that this would allow for better troubleshooting in the future, but would it also help me bottleneck issues?</p>
","<p>Not all together happy with how this post turned out, but I've learned things that I didn't know before, so that's good. </p>

<p>For example, normally if two nodes (A and B) are connected to a switch which is on the downstream side of another device like your firewall, the switch will route packets from A -> B and vise versa without contacting anything upstream (from @Tedwin).</p>

<p>I decided to post my own answer with the good parts from the comments with @Panther Modern.</p>

<ul>
<li><p>Use higher quality hardware. Since I'm using Netgear ProSafe unmanaged switches, I'm considering upgrading to something like Cisco. @Mike Pennington suggested the SG300 series, which I have researched before and found on Amazon for less than $200. @Panther Modern suggests Arista, Cisco, Juniper and Brocade switches.</p></li>
<li><p>Troubleshoot each piece independently and isolate the problem. I've done some of this, to the extent that I have isolated the general path, but in an environment where 100% uptime makes people happy and allows them to get work done, this can be tricky. But point taken...</p></li>
<li><p>Consider topology and where you have access to and how many users you have. These factors can influence your choices for gear and how you go about answering your questions.</p></li>
<li><p>Find good networking tools and use those to help troubleshoot your issue. pfSense helped a lot concerning traffic that passed through the firewall. I also learned about <a href=""http://en.wikipedia.org/wiki/Robocopy"" rel=""nofollow"">Robocopy</a> for limiting traffic on the client. This tool works pretty well.</p></li>
</ul>
","16278"
"After TCP is established which BGP peer will send open message first?","2188","","<p>After a Tcp connection is established between two bgp peers. which peer will send the open message first ? the active peer(which is initiating outbound connection) or the passive peer?(peer which is accepting a inbound connection).</p>

<p>Or is it independent of this active passive state ? Can any of the peer send the first open message based on scheduling?</p>

<p>What will happen when a open mesage is received before the local router sends out a open message?</p>

<p>Is there any good BGP Peer fsm diagram? RFC4271 doesn't have a fsm diagram :(</p>
","<blockquote>
  <p>which peer will send the open message first?</p>
</blockquote>

<p>Normally, the speaker that opens the socket sends the first OPEN message. But it actually doesn't matter (ref the <a href=""http://tools.ietf.org/html/rfc4271#page-41"">DelayOpen timer</a>), because BGP also provides a way to delay the OPEN message so the opposite peer can send first:</p>

<pre>
    Option 1:     DelayOpen

    Description: The DelayOpen optional session attribute allows
                 implementations to be configured to delay sending
                 an OPEN message for a specific time period
                 (DelayOpenTime).  The delay allows the remote BGP
                 Peer time to send the first OPEN message.

         Value:       TRUE or FALSE
</pre>

<p>In the event that both speakers open duplicate TCP sessions and send OPEN messages on each socket simultaneously, the BGP Identifier is used to resolve which socket should be closed.  See <a href=""http://tools.ietf.org/html/rfc4271#section-6.8"">RFC 4271, Section 6.8</a>:</p>

<pre><code>6.8. BGP Connection Collision Detection

If a pair of BGP speakers try to establish a BGP connection with each other 
simultaneously, then two parallel connections well be formed. If the source IP address 
used by one of these connections is the same as the destination IP address used by the 
other, and the destination IP address used by the first connection is the same as the 
source IP address used by the other, connection collision has occurred. In the event 
of connection collision, one of the connections MUST be closed.

Based on the value of the BGP Identifier, a convention is established for detecting 
which BGP connection is to be preserved when a collision occurs. The convention is to 
compare the BGP Identifiers of the peers involved in the collision and to retain only 
the connection initiated by the BGP speaker with the higher-valued BGP Identifier. 
</code></pre>

<blockquote>
  <p>Is there any good BGP Peer fsm diagram?</p>
</blockquote>

<p>Wikipedia has this <a href=""http://upload.wikimedia.org/wikipedia/commons/a/a8/BGP_FSM.svg"">simplified BGP FSM</a>.</p>
","5314"
"How are dynamic IP addresses in any way traceable?","2186","","<p>I'm a beginner to networking and learning a lot of basic concepts and tripped a little over this.</p>

<p>My understanding is that dynamic IP addresses are assigned to the average user every time they connect to the internet, and that generally the address will change with each new session.</p>

<p>But I also am under the impression you can obtain a certain limited amount of information about a given IP address with tools such as reverse DNS, such as what state it's from and so on.</p>

<p>But if the IP addresses are changing all the time, what's the guarantee that the info you're getting still applies to the person you're looking to trace? How do you know that IP hasn't by now been reassigned to someone else, somewhere else?</p>
","<p>The entity assigning you an IP address (e.g. your DSL provider via PPPoE) will most likley log which IP address was assigned to which user in a give time frame. They need this information for troubleshooting, abuse management (and accounting).  They might be forced to keep this information for a longer time frame if required by law. </p>

<p>For dynamic IP addresses reverse DNS will only point you to the provider (as will a whois lookup). </p>
","14920"
"Cisco 6509 as PPPoE BRAS","2186","","<p>I have read that SIP-400 and SPA are compatible with 6509 series switch. These SIP and SPA are used to terminate PPP sessions on 7600 routers. If I installed this SIP and SPA (SPA-5X1GE-V2 for example) on my 6509 chassis, could I configure the switch to terminate PPPoE sessions as a <a href=""http://en.wikipedia.org/wiki/Broadband_Remote_Access_Server"" rel=""nofollow"">BRAS</a>? In that case, which IOS would support this feature?</p>

<p>The switch has SUP720-PFC3BXL supervisors.</p>
","<blockquote>
  <p>I have read that SIP-400 and SPA are compatible with 6509 series switch. These SIP and SPA are used to terminate PPP sessions on 7600 routers. If i installed this SIP and SPA (SPA-5X1GE-V2 for example) on my 6509 chassis, could i configure the switch to terminate PPPoE sessions? In that case, which IOS would support this feature?</p>
  
  <p>The switch has SUP720-PFC3BXL supervisors.</p>
</blockquote>

<p>I have some good news, and bad news:</p>

<p>Good news, the <a href=""http://www.cisco.com/en/US/docs/ios-xml/ios/bbdsl/configuration/12-4t/bba-pppoe-baa.html#GUID-86B54017-934C-44DA-9B60-B96A8CF0D603"" rel=""nofollow"">Cisco 7600 supports PPPoE on 7600-SIP-400</a>, see the <a href=""http://www.cisco.com/en/US/docs/ios-xml/ios/bbdsl/configuration/12-4t/bba-pppoe-baa.html#GUID-86B54017-934C-44DA-9B60-B96A8CF0D603"" rel=""nofollow"" title=""PPPoE on 7600-SIP-400"">SIP-400 PPPoE configuration guide</a>.  However, starting in IOS 15.2(4)S, the 7600 does <em>not</em> support PPPoE.<sup>1</sup></p>

<p>Bad news, PPPoE on SIP-400 requires 12.2SR, and the <a href=""http://www.cisco.com/en/US/docs/routers/7600/Hardware/12.2SR_supported_hw/7600_hwd.html#wp1030645"" rel=""nofollow"" title=""I'm sorry, I know it sucks"">Sup720-3CXL is <em>not</em> supported in 12.2SR</a>.<sup>2</sup>; however, Sup720-3B / 3BXL <em>are</em> supported in 12.2SR (see the <a href=""http://www.cisco.com/en/US/docs/routers/7600/Hardware/12.2SR_supported_hw/7600_hwd.html"" rel=""nofollow"">List of 12.2SR supported hardware</a> for more details).</p>

<p>PPPoE on <a href=""http://www.cisco.com/en/US/prod/collateral/routers/ps368/product_data_sheet0900aecd8027c9e6.html"" rel=""nofollow"">SIP-400</a> Requirements:</p>

<ul>
<li><a href=""http://www.cisco.com/en/US/prod/collateral/routers/ps368/product_data_sheet0900aecd8057f3b6.html"" rel=""nofollow"">RSP720</a>, Sup720-3B, or Sup720-3BXL</li>
<li>When using 7600-SIP-400, <a href=""https://supportforums.cisco.com/thread/246912"" rel=""nofollow"">Load at least IOS 12.2(33)SRC</a> (or later 12.2SR) on the system</li>
<li>The <a href=""https://www.cisco.com/en/US/prod/collateral/iosswrel/ps8802/ps6970/ps1838/prod_bulletin0900aecd805ddce3.pdf"" rel=""nofollow"">7600 ES+ Series supports PPPoE starting in 12.2(33)SRE</a></li>
</ul>

<p>Restrictions:</p>

<ul>
<li>Customers are discouraged from loading 12.2SR on a Catalyst 6500 branded chassis for PPPoE functionality.  Please contact your Cisco account manager if you want to do this.</li>
<li>Sup720-3C is not supported, only Sup720-3B, Sup720-3BXL and RSP720 are supported</li>
<li>Up to 8000 PPPoE sessions per SIP-400, maximum 32000 PPPoE sessions per chassis (across multple linecards)</li>
<li>PBR is not supported on Virtual Template interfaces</li>
</ul>

<p><hr>
<sup>1</sup> <sub>After Feb 2012, Cisco encourages customers to use the ASR9K for PPPoE termination.</sub><br>
<sup>2</sup> <sub>The 6500 and 7600 used to share a lot of hardware and software (sometimes on different SW releases), but <a href=""http://www.cisco.com/en/US/prod/collateral/iosswrel/ps8802/ps6970/ps6017/ps9673/product_bulletin_c25-503086.html"" rel=""nofollow"">that sharing has decreased</a> after the release of 12.2(33)SR / 12.2(33)SX.</sub></p>
","6056"
"console connection via Cisco router's AUX port","2185","","<p>my question is simple: if I am logged into a Cisco router via console or ethernet in priviledged mode, is there a command to initiate a connection through the local AUX port to a nearby console port of another router/switch?</p>

<p>(alternatively, could I accomplish this if I configured reverse telnet on the local router and then type the command ""telnet local_loopbackIP 2xxx"" port?)</p>

<p>Thanks.</p>
","<p>Yes, just telnet to a local (up) interface using port 2001.  Aux 0 is (always?) line 1.</p>

<pre><code>int loopback0
 ip address 192.168.1.1 255.255.255.255
!
line aux 0
 transport input all
 transport output all
</code></pre>

<p>Telnet 192.168.1.1 2001.</p>
","11031"
"What is difference between standard VLAN extended VLAN?","2182","","<p>I know that the range of standard VLAN is 1-1005 and in extended VLAN the range is 1-4094.<br>
But is just range is the difference?</p>
","<p>VLAN are introduced by the <a href=""http://standards.ieee.org/getieee802/download/802.1Q-2003.pdf"" rel=""nofollow noreferrer"">IEEE 802.1Q standard</a>, which doesn't have this notion of standard or extended VLAN, nor made any difference between VLAN under or above 1005.</p>

<p>This is Cisco implementation that introduce this segregation.
The first Cisco implementation actually supported only VLAN up to 1001, and Cisco reserved VLAN 1002-1005 for FDDI and Token Ring. They added support for VLAN 1006-4094 later, and called them ""Extended VLAN"". My guess is that since it was an addition, and probably to enforce backward compatibility, those VLAN are technically different, within Cisco IOS</p>

<p>Quoted from <a href=""http://www.cisco.com/c/en/us/td/docs/ios/12_4t/12_4t15/ht_xvlan.html#wp1049404"" rel=""nofollow noreferrer"">Extended VLAN ID</a> (Disclaimer: this document date from 2007 and part of the content may be outdated)</p>

<blockquote>
  <p>Before Cisco IOS Release 12.4(15)T, users were permitted to configure
  VLANs numbered from 2 to 1001. The remaining VLANs (numbered from 1006
  to 4094) were reserved for use as internal VLANs configured by
  applications. Beginning with Cisco IOS Release 12.4(15)T, all VLAN
  numbers except those reserved for default and reserved VLANs are
  available for user configuration. The result is that users and
  applications share the VLAN number space from 1006 to 4094.</p>
</blockquote>

<p>You can find in <a href=""http://www.cisco.com/c/en/us/td/docs/switches/lan/catalyst4500/12-2/25ew/configuration/guide/conf/vlans.html"" rel=""nofollow noreferrer"">this documentation</a> for example this table:</p>

<p><a href=""https://i.stack.imgur.com/acJOb.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/acJOb.png"" alt=""enter image description here""></a></p>

<p>Note that as pointed out by @Andriy Berestovskyy this table is outdated and Extended VLANs are propagated by VTP version 3</p>
","41383"
"Point Of Presence vs. Central Office","2182","","<p>What is the difference between these two (in distance and function)?  I understand that a Central Office is a place where the ISP stores equipment that connects many clients. But the POP has a similar definition.  It is a place where many clients connect and there are multiple POP's for each ISP. </p>

<p>What am I missing?</p>
","<blockquote>
  <p>What is the difference between this two (in distance and function).</p>
</blockquote>

<p><em>Short answer</em>: </p>

<ul>
<li>Distances - not very much, these days</li>
<li>Function - Basic / Enhanced 911 is still processed through the Central Office; however other <a href=""http://en.wikipedia.org/wiki/Competitive_local_exchange_carrier"">CLECs</a> can trunk customers' 911 calls back to the <a href=""http://en.wikipedia.org/wiki/Public-safety_answering_point"">Public Service Answering Point (PSAP)</a> via the local Central Office... I also think <a href=""http://www.intrado.com/"">Intrado</a> has equipment for <a href=""http://en.wikipedia.org/wiki/Competitive_local_exchange_carrier"">CLECs</a> to provide 911 services...</li>
</ul>

<p><em>Long answer</em>:</p>

<p>The differences between them have much more to do with historical context...</p>

<ul>
<li><p>Central Office is a term that has deep roots in the <a href=""http://en.wikipedia.org/wiki/Bell_System"">Bell companies</a>, where the Central Office also called a <a href=""http://en.wikipedia.org/wiki/Telephone_exchange"">telephone exchange</a>.  Originally they housed circuit-switching technologies; these days they have similar routers and switches as you'll see in a <a href=""http://en.wikipedia.org/wiki/Point_of_presence"">Point of Presence</a>.  Telephone copper pairs star out of the Central Office to normally about 15,000-18,000 feet; however, you can also star the copper out from a <a href=""http://en.wikipedia.org/wiki/Digital_loop_carrier"">DLC can</a> to cover a much larger area, because the DLCs can be connected via fiber.  The key points to remember:</p>

<ol>
<li>Because the Central Office is associated with the <a href=""http://en.wikipedia.org/wiki/Bell_System"">Bell companies</a>, they are heavily regulated by the government.  Incumbent carriers in many other countries are also regulated in a similar manner.</li>
<li>Construction and installations within a Central Office normally comply with Telecordia standards, such as <a href=""http://telecom-info.telcordia.com/site-cgi/ido/docs.cgi?ID=SEARCH&amp;DOCUMENT=GR-63?"">GR-63 NEBS</a>.  NEBS-compliant equipment is a big deal to RBOCs and incumbents... NEBS requires routers / switches to have front-to-back cooling and other features that comply with Telecordia's requirements.</li>
<li>They always have responsibility for maintaining last-mile transport to customers.</li>
<li>Basic / Enhanced 911 is routed through the Central Office</li>
<li>Most of the labor is unionized.</li>
</ol></li>
<li><p><a href=""http://en.wikipedia.org/wiki/Point_of_presence"">Point of Presence</a> does not always carry the same loaded meaning that Central Office does.  Most of the time, it refers to a building that is carefully selected to host internet circuits between various carriers.  Customer connectivity to a Point of Presence these days is usually over <a href=""http://en.wikipedia.org/wiki/Metro_Ethernet"">Metro ethernet</a> or <a href=""http://en.wikipedia.org/wiki/Synchronous_optical_networking"">SONET rings</a>.</p>

<ol>
<li>These facilities are often not regulated by the government.</li>
<li>Construction and installations don't need to comply with Telecordia standards, such as <a href=""http://telecom-info.telcordia.com/site-cgi/ido/docs.cgi?ID=SEARCH&amp;DOCUMENT=GR-63?"">GR-63 NEBS</a></li>
<li>The carriers within a POP often are <em>not</em> associated with the remains of the original <a href=""http://en.wikipedia.org/wiki/Bell_System"">Bell companies</a>, and they are not required to host last-mile transport to a customer (although they often do). It's quite common for the local AT&amp;T / Verizon / other bellco to offer <a href=""http://en.wikipedia.org/wiki/T-carrier"">T-carrier</a> services from a POP because they will co-locate within the POP to spoon as much transport business as they can from the other carriers who might need last-mile transport to customers.</li>
<li>POPs don't have to handle 911</li>
<li>Labor might not be unionized.</li>
</ol></li>
</ul>
","2763"
"View Power On Self Test (POST) details on Cisco 1841 Routers and Cisco 2950 switches","2182","","<p>I need to view POST details on Cisco 1841 Routers and Cisco 2950 switches.</p>

<p>I have tried <code>show post</code> and <code>show diagnostics post</code>. However, both these commands are not available.</p>

<p>What is the command that needs to be used?</p>

<p>Thank you for your time!</p>
","<p><code>show post</code> should work on the Catalyst 2950, maybe you need to upgrade to a newer version of IOS?
Even if it works, it won't display more than ""Pass"" or ""Fail"".</p>

<p>For the 1841, I don't think there is a command to show post information.</p>

<blockquote>
  <p>For Cisco IOS, the equivalent command is show diagnostic which was
  introduced in 12.1(11b)E for the Catalyst 6000 series and show
  diagnostics(with an s) which was introduced in for the Catalyst 4000
  Series. Both commands display Power-On Self Test (POST) results. For
  Cisco IOS on the 2900/3500XL, <strong>2950/2955</strong>, 3550, 2970 and 3750 series
  switches, the <strong>equivalent command is show post</strong> which displays the
  results of the switch POST.</p>
  
  <p>Note: For Catalyst 3750, 3550, 2970 , 2950/2955, and 2900/3500XL
  Series switches use the show post command, which indicates <strong>a simple
  pass or fail for the hw status</strong>. Use the LEDs on these switches to help
  you understand the POST results.</p>
</blockquote>
","7398"
"Using channel-group mode on in my full Cisco enviroment","2178","","<p>this is my first question over here.</p>

<p>I have a question about using <code>channel-group mode on</code> or <code>channel-group mode active</code>.</p>

<p>I have a core 3750x with 2 stacked SFPs nodes. Each pair of ports of a node with the same port number is an etherchannel:</p>

<ul>
<li>Gi1/0/1 + Gi2/0/1 = <strong>Po1</strong></li>
<li>Gi1/0/2 + Gi2/0/2 = <strong>Po2</strong> </li>
<li>and so on</li>
</ul>

<p>These etherchannel connects to the 2960 switches, where they have a SFP module, using 2 SFPs ports to connect to the 3750x. Those two ports are also an etherchannel.</p>

<p>All the Po's interfaces are in <code>channel-group mode on</code> on <strong>both sides</strong>.
The Po interfaces are ok, all UP and not giving me errors.</p>

<p>But I'd like to know: </p>

<ul>
<li>Is this a good pratice?</li>
<li>Is it better to use LACP? Why?</li>
<li>Any of you guys ever had any problem using mode on?</li>
</ul>

<p>Thank you very much!</p>

<p>Obs.:
I read the article <a href=""https://networkengineering.stackexchange.com/questions/1390/preventing-stp-loops-in-etherchannels-configurations"">Preventing STP loops in etherchannels configurations</a></p>

<p>But in my case I know and I manage both sides of the connection</p>
","<p>LACP gives you a significant advantage in that it verifies connectivity in both directions over each link.  You can think of it as also combining the features of UDLD with link aggregation.  For example, imagine you have the links configured in ""mode on"".  Now lets say one of the links from the 3750 to the 2960 fails but in only one direction, say the direction toward the 2960 (lets say the fiber got kinked and only one of the two strands has broken).  The 3750 will still see link on both ports (because the direction from the 2960 to the 3750 is fine) and it will still try to use the failed path because it does not know that the 2960 has lost link.</p>

<p>If you configure ""mode active"" the LACP packets must flow over the link in both directions between the 3750 and the 2960.  If the link fails in one direction, LACP fails to work and the 3750 stops forwarding over the failed link even though it still has light from the 2960.</p>

<p>So -- using LACP gives you protection against unidirectional link failure.  It also gives you protection against plugging the link into the wrong port.  If you accidentally plug the link into the wrong port, LACP will fail, the 3750 will not bring that link up, and you have protected yourself against a problem that is difficult to troubleshoot.</p>
","19123"
"Why can't I ping from one computer to another using L3 cisco 3550 switch?","2177","","<p>I have configured my 3550 L3 switch to redirect HTTP traffic to a significant Machine:</p>

<p>This is my scenario ( PCs instead of Routers):</p>

<p><img src=""https://i.stack.imgur.com/583Py.png"" alt=""enter image description here""></p>

<p>This is the switch configuration:</p>

<pre><code>CAT3550# show running-config 
Building configuration...
.
.
!
interface Vlan1
ip address 10.10.10.1 255.255.255.0 
!
interface Vlan2
ip address 20.20.20.1 255.255.255.0
ip policy route-map pbr
!
interface Vlan3
ip address 30.30.30.1 255.255.255.0
!
ip route 0.0.0.0 0.0.0.0 10.10.10.2
ip classless
ip http server
!
!
access-list 10 permit 20.20.20.0 0.0.0.255
route-map pbr permit 10
match ip address 10
set ip next-hop 30.30.30.2
!
. 
!
end
</code></pre>

<p>on the PCs I have put an IP address and a GW:<br></p>

<p>for example 10.10.10.2 and the gw is:10.10.10.1</p>

<p>My questions is:</p>

<p>Why can't I ping from one computer to another for example (from 20.20.20.4):</p>

<blockquote>
  <p>ping 10.10.10.2 </p>
  
  <p>return :Request time out.</p>
</blockquote>
","<p>You seem to be missing the <code>ip routing</code> command which enables L3 routing on the switch.</p>
","9725"
"HP V1910-48G cannot route to Internet from VLANs","2174","","<p>I have an HP V1910-48G and SonicWALL TZ 105 set up with two VLANs that should be able to reach the Internet but they cannot.</p>

<p>My network configuration:</p>

<p>VLAN 1 - 192.168.1.0/24 - Transport Network</p>

<p>VLAN 50 - 192.168.50.0/24 - Infrastructure 1 (Ideally can reach and be reached from Internet)</p>

<p>VLAN 100 - 192.168.100.0/24 - Infrastructure 2 (Ideally can reach and be reached from Internet)</p>

<p>192.168.1.1 - SonicWALL LAN interface</p>

<p>192.168.1.254 - Switch VLAN interface</p>

<p>192.168.50.1 - Switch VLAN interface</p>

<p>192.168.100.1 - Switch VLAN interface</p>

<p>The odd thing is that a client in one of the infrastructure networks, say, 192.168.50.55 can ping every VLAN interface i.e. 192.168.50.1, 192.168.100.1, 192.168.1.254 but cannot ping the SonicWALL at 192.168.1.1. Even stranger is that using the diagnostic tools on both the SonicWALL and the Switch, I can ping both devices from eachother i.e. SonicWALL can ping 192.168.1.254 and Switch can ping 192.168.1.1. So I know there is connectivity.</p>

<p>It seems as if the issue is either my VLAN membership/tagging configuration or routing configuration on the HP Switch or a combination of the two.</p>

<p>VLAN Setup:
<img src=""https://i.stack.imgur.com/eurw2.png"" alt=""enter image description here"">
VLAN Interfaces:
<img src=""https://i.stack.imgur.com/eAcgB.png"" alt=""enter image description here"">
Routing:
<img src=""https://i.stack.imgur.com/bBYBr.png"" alt=""enter image description here""></p>

<p>Any ideas?</p>
","<p>@Ron</p>

<p>That was it. Forgot that packets would not know how to get back to the source IP.</p>

<p>Created two static routes on SonicWALL with gateway 192.168.1.254 for networks 192.168.50.0/24 and 192.168.100.0/24.</p>
","14924"
"Cisco IOS versions vs Cisco ASA versions?","2173","","<p>I'm very confused by Cisco versions, but perhaps I'm just over thinking it. Are IOs versions and ASA versions the same? E.g. If I have an ASA 5510 and I type </p>

<pre><code>show version
</code></pre>

<p>and it comes back with </p>

<pre><code>Cisco Adaptive Security Appliance Software Version 8.3(2)
Device Manager Version 6.9(4)
</code></pre>

<p>does that mean it's running IOS 8.3? </p>

<p>Or will accept IOS 8.3 level commands?</p>

<p>Or do ASA devices have their own version separate from the IOS versions?</p>

<p>(p.s. the version numbers above are made up so they won't make sense). </p>

<p>More generally, how do you know which commands a Cisco device is going to accept? If you show up at a clients and start trying to do named access lists (which apparently started with IOS 11.2?) how do you know if they are going to work? Or do you just try, curse and revert to older commands on the fly if they aren't recognized?</p>

<p>I've searched long and hard and nothing seems to show what versions which commands should work on.</p>
","<p>Cisco has a whole bunch of different operating systems for a variety of products:</p>

<ul>
<li><strong>IOS</strong> runs on most Cisco routers and switches.</li>
<li><strong>IOS XE</strong> is a more modern, modular version of IOS.</li>
<li><strong>IOS XR</strong> runs on high-end routers.</li>
<li><strong>NX-OS</strong> runs on the Nexus line of datacenter switches.</li>
<li><strong>ASA OS</strong> runs on Cisco ASA devices.</li>
<li><strong>AireOS</strong> runs on Access Points.</li>
<li>And I'm probably forgetting a lot of other devices and appliances.</li>
</ul>

<p>Version numbers for all these operating systems are unrelated. And even within the same OS there can be different release trains for different platforms. </p>

<p>If you want to know which commands should work on a specific device, you can check the <a href=""http://tools.cisco.com/ITDIT/CFN/jsp/index.jsp"">Cisco Feature Navigator</a>.</p>
","26673"
"Difference between ad-hoc and wifi hotspots","2169","","<p>Reason why I'm asking this is because I want to know why mobile phones cannot discover ad-hoc networks created by laptops or PCs?</p>
","<p>Wi-Fi has two working modes - IBSS (ad-hoc) and BSS (infrastructure mode). The main difference between these two modes is access-point. This kind of device is available only in infrastructure mode. </p>

<ol>
<li>In ad-hoc mode when station A wants to transmit a frame to station B it just transmits this frame to station B.</li>
<li>In infrastructure mode, station A at first transmits this frame to access-point, and access point retransmits this frame to station B.</li>
</ol>

<p>And why your mobile phone can't connect with ad-hoc networks? I believe here is the answer: <a href=""https://stackoverflow.com/questions/5100928/how-to-connect-android-wifi-to-adhoc-wifi"">https://stackoverflow.com/questions/5100928/how-to-connect-android-wifi-to-adhoc-wifi</a> (at least for Android).</p>
","19291"
"SNMPv3 Setup - Cisco 3750","2162","","<p>I am not a network guru by any means but need to setup our router/switch to use SNMPv3.  I am installing What's Up Gold on our system and configured the settings (changed for this post) as follows:</p>

<pre><code>Username: testusername
Authentication
Protocol: sha
Password: testpassword
</code></pre>

<p>On my router, I have ran the following:</p>

<pre><code>snmp-server view TESTVIEW mib-2 included 

snmp-server group TESTGROUP v3 auth read TESTVIEW 

snmp-server user ALL TESTGROUP v3 auth sha testpassword 

snmp-server host 192.168.12.2 version 3 auth testusername 

snmp-server host 192.168.12.2 informs version 3 auth testusername
</code></pre>

<p>After inserting these commands, I go back to the SNMP software and attempt to discover the seed address 192.168.12.254, the gateway, but cannot receive a valid connection.  I turned debugging on the router but receive nothing in <code>show log</code>.  I setup SNMPv2 to test and see if it could even see that and it worked just fine...I am guessing I am missing something in my router configuration...any ideas?</p>
","<p>I think your username is wrong in your commands, try substituting <code>testusername</code> for <code>ALL</code></p>

<pre><code>snmp-server view TESTVIEW mib-2 included 
snmp-server group TESTGROUP v3 auth read TESTVIEW 
snmp-server user testusername TESTGROUP v3 auth sha testpassword 
</code></pre>
","12589"
"How to set the DHCP server IP address to windows 7 client","2161","","<p>I configured a windows 2012 server inside virtual machine in Ubuntu 14.04.
I installed DHCP, DNS, AD.</p>

<p>I want to setup client's to use my DHCP server instead of Routers.</p>

<p>1) Now how can I assign my server's Ip address to WIndows 7, which is in another VM in the same Ubuntu host? </p>

<p>I know how to setup DNS server's address in client PC. 
 But How do we do it for DHCP?</p>

<p>2) Is it possible to access my DHCP server which is in VM by Other machines on the same network ? How?</p>

<p>info:</p>

<pre><code> windows 2012 VM IP: 192.168.247.201

 Linux Host ip     : 192.168.0.102   
</code></pre>
","<p>Short Answer... the DHCP server who replies first to the DHCPDISCOVER wins.</p>

<p>Long Answer...</p>

<p>DHCP utilizes <strong>broadcast</strong> for communication between client and server.</p>

<ol>
<li>Client initiates the process by sending a <strong>DHCPDISCOVER</strong> frame.</li>
<li>Server receives the frame and sends back a <strong>DHCPOFFER</strong> (=network configuration settings for client)</li>
<li>Client sends a <strong>DHCPREQUEST</strong> frame to the server to request the address slot it got via the DHCPOFFER frame</li>
<li>Server sends a  <strong>DHCPACK</strong> to acknowledge the request</li>
<li>Client assigns the ip address settings</li>
</ol>

<p>In case there are multiple dhcp servers the one who responds first wins. If a client already received a DHCPOFFER it will still send back a DHCPREQUEST to decline the offer.</p>

<p>To workaround your issue I would recommend using a Host-Only or NAT network adapter to isolate your lab environment from your network.</p>
","23181"
"Trying to configure HP Procurve VLANs to segment Unifi guest traffic to another network","2157","","<p>My goal is to put all guest network traffic from the Ubiquiti Unifi access points onto their own subnet using VLAN 20 on a series of HP Procurve 2610-48-PWR switches.  </p>

<p>The Unifi Access controller allows me to set the guest network to work with a given VLAN ID,  which I obviously set to 20.  </p>

<p>I want all guest traffic to be filtered to our secondary ISP on a separate firewall that will also issue DHCP addressing.  The ISP runs to a firewall that runs to a web filter, then to the central Procurve.  The Procurve then splits to the other two Procurves in the other wings of the campus.  </p>

<p>On the Procurves, I configured each to use VLAN 20 over the designated subnet and tagged every port that has an access point plugged into it.  All three switches have IP addresses that are contained within the desired subnet.  </p>

<p>I was under the impression that configuring a VLAN with the same ID on each connected switch, as well as supplying an IP address within the correct addressing scheme would allow them to communicate.  The switches can communicate with each other over the separate subnet, but they can't reach the filter or the firewall.  They also can't reach a client plugged into the switch with a statically assigned IP address in the correct subnet.</p>

<p>I have been at this for a few hours and am running out of ideas.  Any advice would be much appreciated.  </p>
","<p>First off, the switches don't have to have an address in VLAN 20; in fact you absolutely <em>don't</em> want that. (unless you want guests hacking into your switches)  VLAN 20 should exist on ports connected to (a) the APs, (b) the inter-switch links, and (c) the router infrastructure (firewall, etc.)  That will be <em>tagged</em> everywhere but the access ports going to the router/firewall/etc.</p>

<p>(Your switches aren't routers; they're just layer-2 switches.  The address they're assigned is for <em>management</em>.)</p>
","5573"
"Wireless Access Point and Proxy Server Setup","2150","","<p>I was tasked to put up a network for a new department with about 7 users using wired and wireless connection.  Our Main network has DHCP and PROXY Server using Windows Server 2003.  </p>

<p>Here's my simple diagram setup for the new department:  </p>

<pre><code>Main network     --&gt; switch          --&gt; wireless access point
(dhcp/proxy svr)     (wired systems)     (wireless systems)
</code></pre>

<p>Access Point Configuration:  </p>

<ul>
<li>DHCP is Disabled  </li>
<li>local IP: acquired from DHCP</li>
<li>WPA security disabled  </li>
<li>No other configuration applied to avoid complication.</li>
</ul>

<p>Results:  </p>

<ul>
<li>wired users can connect to the internet  </li>
<li>wireless users cannot connect to the internet  </li>
</ul>

<p>I compared the <code>ipconfig</code> of both wired and wireless clients and they have the same configuration.</p>

<p>Why are the wireless users unable to connect to internet?</p>
","<p>Since you've clarified (comments above) that IP net/mask/gw are the same for wired/wireless clients, then your AP is bridging (as opposed to routing or NAT'ing the wireless clients.)</p>

<ol>
<li><p>Verify the wireless systems are getting DNS servers via DHCP. If ""cannot access Internet"" means ""web sites do not load"", this may be all that is wrong.</p></li>
<li><p>Verify your Internet edge router, (and/or firewall,) isn't blocking the traffic. You
might have everything configured correctly from the network and IP
point of view, and then not realize that the edge router has special
rules to only permit certain of your internal LAN IP addresses out.
(For example, your DHCP server could be configured to give specific
IPs to certain DHCP clients (the boss's desktop), while servicing
the rest of the clients (eg, printers) from a pool of numbers which aren't generally permitted out to the Internet.</p></li>
</ol>
","1990"
"Cisco 2511 term svr - change baud rate on one reverse telnet connection?","2147","","<p>I'm not sure this can be done, but figure I'd ask the Gurus here ;)</p>

<p>I have a 2511 router acting as a terminal server for my lab. All the current equipment I have connected to it have serial port baud rates of 9600bps, but now I have a new piece of equipment that has its serial port baud rate set to 115200. For various reasons, i don't want to change this piece of equipment. Is there any way to set the one reverse telnet connection to run at 115200?</p>
","<p>Based on my testing, you would just have to edit the existing <code>line</code> configuration to specify the speed you want on Line 8, for example if that is where you connected your new device.  <em>I tested this on a Cisco 2611 with the NM-16A async module.</em></p>

<p>Existing configuration:</p>

<pre><code>line 1 16
 no exec
 exec-timeout 0 0
 password 7 xxxxxxxxxxxxxxxxx
 login
 transport input all
 stopbits 1
</code></pre>

<p>Configuration for device on Line 8 to connect at 115200 bps instead of the default 9600 bps:</p>

<pre><code>line 1 7
 no exec
 exec-timeout 0 0
 password 7 xxxxxxxxxxxxxxxxx
 login
 transport input all
 stopbits 1
line 8
 no exec
 exec-timeout 0 0
 password 7 xxxxxxxxxxxxxxxxx
 login
 transport input all
 speed 115200
 stopbits 1
line 9 16
 no exec
 exec-timeout 0 0
 password 7 xxxxxxxxxxxxxxxxx
 login
 transport input all
 stopbits 1
</code></pre>
","6161"
"How to limit the internet bandwidth to specific department in my company, using a Cisco Router?","2133","","<p>I have this case:</p>

<p>In my Company we have 2 Internet Access in production R1-A router and R2-B router they are both in separate networks, R2-B have the highest priority which it use to Call Center.</p>

<p>were i Want to focus on R1-A that router is a Cisco Router 829F is currently performing NAT Overload to a Huawei HG8245H (Modem ISP) then the hole company connects to a 24-Port Gigabit Rackmount Switch TL-SG1024 (Non Administrable Switch).</p>

<p>All network infracture in the internal network IP adress is 192.168.1.0/24</p>

<p>My internet bandwidth is 10/10 mpbs </p>

<p>Topology:</p>

<pre><code>Modem--&gt; Router Cisco 829F--&gt; Switch
</code></pre>

<p>How do i preform a bandwidth control to specific department or specific host?</p>

<p>What topic or subject i should research? (VLAN,Inter-Vlan Routing)?</p>

<p>What is the best approach or solution? </p>
","<p><a href=""http://www.cisco.com/c/en/us/support/docs/quality-of-service-qos/qos-policing/10118-cbpcar.html"" rel=""nofollow"">Class-Based Policing</a>.  Since you cannot administer the switch, you will likely have to match traffic based on IP access list with can be processor intensive.  In any case search cisco.com for class-based policing for additional configuration examples.</p>

<pre><code>    Router(config)# class-map access-match
     Router(config-cmap)# match access-group 1
     Router(config-cmap)# exit
     Router(config)# policy-map police-setting
     Router(config-pmap)# class access-match
     Router(config-pmap-c)# police 8000 1000 conform-action transmit exceed-action drop
     Router(config-pmap-c)# exit
     Router(config-pmap)# exit
     Router(config)# interface fastethernet 0/0
     Router(config-if)# service-policy output police-setting
</code></pre>
","18349"
"Alcatel-Lucent BGP Default-Originate","2131","","<p>I've been looking around trying to find the ALU version of Cisco's ""default-originate"" but have been unable to find it.  Is there a way to generate a zero route towards a BGP neighbor without having to redistribute a static/dynamic zero route into the BGP table?</p>
","<p>I'm quite sure there is no such command or feature in TiMOS. The one way you can emulate such behavior is with a static blackhole-route, a prefix-list and a policy-statement. It's not what you asked but still pretty decent. Sample configuration:</p>

<pre><code>configure router
    static-route 0.0.0.0/0 black-hole
    static-route ::/0 black-hole
    policy-options
        prefix-list ""default-only""
            prefix 0.0.0.0/0 exact
            prefix ::/0 exact
        exit
        policy-statement ""default-originate""
            entry 10
                from
                    protocol static
                    prefix-list ""default-only""
                    family ipv4 ipv6
                exit
                action accept
                exit
            exit
            default-action next-policy
        exit
</code></pre>

<p>Now you can apply that policy as an export policy in BGP group level before your normal export policy.</p>

<p>edit: Of course advertising default to your CE device without knowing if you have upstream connectivity could be considered as poor design. One way to enhance the configuration above is to make prefix-list of known dynamically learned prefixes from your network (or internet) and make those static blackhole routes conditional. This can be achieved with <code>prefix-list &lt;name&gt; [all|none]</code> parameter in the static-route context. By default, logical OR is used.</p>
","2678"
"What is VLAN1 interface in routers?","2129","","<p>Yesterday I had a look at my router configuration, and I saw that my office's local LAN gateway's IP address is written on the router's VLAN1 interface.</p>

<ul>
<li>What is a VLAN1 interface in a router?</li>
<li>Is it different from a switch's VLAN?</li>
<li>Why is it not configured on a gigabit interface?</li>
<li>Does it mean that all interfaces refer to VLAN1?</li>
<li>If yes, how can we assign each port to VLAN1?</li>
<li>How can we create VLANs?</li>
</ul>
","<p>Since you have included the router model, I will assume it is a Cisco router, something like an ISR with a built-in switch module.</p>

<p>Some Cisco routers can have a built-in or optional, add-on switch modules. The interfaces for this module are switch interfaces, not router interfaces. You need to create VLAN interfaces to link the layer-2 switch to the layer-3 router.</p>

<p>You configure the switch interfaces the same way that you do for a layer-2 switch. They are switch interfaces, not router interfaces, so you cannot configure layer-3 on those interfaces. That is where the SVIs come in. You assign a VLAN to each switch interface, and create an SVI for each VLAN. The SVIs get configured with the layer-3 information for the VLAN. The layer-3 addresses configured on the SVIs will be the gateways for the VLANs.</p>

<p>The router will also have some router interfaces that get configured for layer-3. Routers will, by default, route everything between its layer-3 interfaces, including SVIs configured for layer-3.</p>

<hr>

<p>Let's assume you have eight switch interfaces (GigabitEthernet0 - 7), and two router interfaces (GigabitEthernet8 - 9), like a Cisco 892 router. There are two connections to other routers, and there are four VLANs (two switch interfaces on each VLAN). The first eight interfaces are switch interfaces, and they are configured like a layer-2 switch. The last two interfaces are router interfaces, and they are configured with layer-3. The four VLAN interfaces are configured as layer-3 interfaces. Routing between the VLANs and the router interfaces will happen, as long as they are configured for layer-3, and there are no other configurations to block, e.g. ACLs. The gateways for the VLANs will be the addresses configured on the VLAN interfaces.</p>

<p>You could have something like this:</p>

<pre><code>interface GigbitEthernet0
 description VLAN 1
 switchport access vlan 1
 switchport mode access
 no shutdown
!
interface GigbitEthernet1
 description VLAN 1
 switchport access vlan 1
 switchport mode access
 no shutdown
!
interface GigbitEthernet2
 description VLAN 2
 switchport access vlan 2
 switchport mode access
 no shutdown
!
interface GigbitEthernet3
 description VLAN 2
 switchport access vlan 2
 switchport mode access
 no shutdown
!
interface GigbitEthernet4
 description VLAN 3
 switchport access vlan 3
 switchport mode access
 no shutdown
!
interface GigbitEthernet5
 description VLAN 3
 switchport access vlan 3
 switchport mode access
 no shutdown
!
interface GigbitEthernet6
 description VLAN 4
 switchport access vlan 4
 switchport mode access
 no shutdown
!
interface GigbitEthernet7
 description VLAN 4
 switchport access vlan 4
 switchport mode access
 no shutdown
!
interface GigbitEthernet8
 description Link to Router 2
 ip address 10.2.0.1 255.255.255.252
 no ip redirects
 no ip unreachables
 no ip proxy-arp
 no shutdown
!
interface GigbitEthernet9
 description Link to Router 3
 ip address 10.3.0.1 255.255.255.252
 no ip redirects
 no ip unreachables
 no ip proxy-arp
 no shutdown
!
interface Vlan1
 description VLAN1
 ip address 192.168.1.0 255.255.255.0
 no ip redirects
 no ip unreachables
 no ip proxy-arp
 no shutdown
!
interface Vlan2
 description VLAN2
 ip address 192.168.2.0 255.255.255.0
 no ip redirects
 no ip unreachables
 no ip proxy-arp
 no shutdown
!
interface Vlan3
 description VLAN3
 ip address 192.168.3.0 255.255.255.0
 no ip redirects
 no ip unreachables
 no ip proxy-arp
 no shutdown
!
interface Vlan4
 description VLAN4
 ip address 192.168.4.0 255.255.255.0
 no ip redirects
 no ip unreachables
 no ip proxy-arp
 no shutdown
!
</code></pre>
","38461"
"ASA logging IPSec","2117","","<p>Can someone gave some hints on how to enable logging on IPSec tunnel on ASA ? I have typical scenario S2S IPSec and i like to monitor when it goes down and other information. But can't find a way to do this.</p>
","<h2>General Logging</h2>

<p>To log IPSec events, you will want to run the following commands:</p>

<pre><code>logging enable
logging emblem ! (optional for Cisco's emblem format)
logging timestamp
logging buffered notifications 
</code></pre>

<p>Some of these commands will already be on your ASA as you're sending your buffered log to an FTP server. I won't include the FTP commands due to this. Then you will want to look for the <a href=""http://www.cisco.com/c/en/us/td/docs/security/asa/syslog-guide/syslogs/logmsgs.html"" rel=""nofollow"">specific codes</a> you're interested in, in the log on the FTP server.</p>

<p>Example IPSec L2L disconnect message:</p>

<blockquote>
  <p>%ASA-4-113019: Group = 202.XXX.YYY.ZZZ, Username = 202.XXX.YYY.ZZZ, IP =
  202.XXX.YYY.ZZZ, Session disconnected. Session Type: LAN-to-LAN, Duration: 1d 1h:13m:46s, Bytes xmt: 372142455, Bytes rcv: 384146009,
  Reason: Lost Service</p>
</blockquote>

<h2>Emailed Notifications</h2>

<p>First create your list of events you want to catch.</p>

<p><strong>Catch All IPSec List</strong></p>

<pre><code>logging list IPSec_Notifications level notification class vpn
</code></pre>

<p><strong>Specific Event List</strong></p>

<pre><code>logging list IPSec_Notifications message 113019
! Replace XXXXXX with next code
logging list IPSec_Notifications message XXXXXX
! Repeat for the rest of the codes you're interested in
</code></pre>

<p>Now setup the email settings.</p>

<pre><code>logging mail IPSec_Notifications
logging from-address your-from-address@your-domain.com
logging recipient-address who-should-receive-emails@your-domain.com level notifications
smtp-server X.X.X.X ! Replace with your SMTP server IP
</code></pre>

<h2>Notes</h2>

<p>All of the logging above is limited to notifications and higher level (i.e. level 5, 4, 3, 2 and 1). If you find a code of a lower level, you will need to replace <code>level notifications</code> with <code>level informational</code> or <code>level debugging</code>.</p>

<p>The example event above (<code>ASA-4-113019</code>) is <code>level warnings</code> which you can see from the <code>ASA-4</code> prefix on the event.</p>
","10499"
"EIGRP topology table - unexpected behavior","2116","","<p>Prepping for CCNP - In my topology the path R1 takes to a Loopback Ip is via R2 by default.  My goal is to have a feasible successor route through R3.  I've attached a diagram of topology.</p>

<p><a href=""https://imgur.com/a/6KZPz#4"" rel=""nofollow noreferrer"">http://imgur.com/a/6KZPz#4</a></p>

<p>Problem is: R1 only has one entry for the loopback ip of 3.3.3.3 in it's topology table.  When I look at R3, it has two entries for this network, but somehow it's not sharing it.. </p>

<p>I had planned to manipulate delay to add the FS route in R1, so I tried that on all links from R3 to the loopback (reduced delay to 10 usec), and for one update I saw R1 have both entries.. after another update though it removed it.. </p>

<p>My understanding was that even if it wasn't a FS the topology table (using the 'detail' switch) would show all possibilities?  What am I missing?</p>
","<p>Try using the command</p>

<pre><code>show ip eigrp topology all-links
</code></pre>

<p>This should allow you to view all routes including non-successor/non-feasible routes</p>
","2609"
"Cisco router telnet troubleshooting - connection timeout; unresponsive host","2114","","<p>I cannot figure out how to establish a telnet connection between two routers in Cisco Packet Tracer. This is a relatively simple process, I know, but I have been back and forth looking for how to fix this issue. At first, I thought I created the ip addresses with a subnet that was too small, but after increasing the size of the subnet from 255.255.255.252 to a standard class C subnet, I've realized that wasn't the problem. I will post the information that is related to this issue to simply your ability to help me. Please help me to understand what I am doing wrong. I will look at resources you post, but please be aware that I've been looking at resources on google for 2 weeks now. There are no users configured for the routers, because I figured that if I can't get the connection to even establish, then logging in is another problem I can deal with after.</p>

<p>When I telnet from router one with ""telnet 172.16.3.1"", I continue to recieve that the connection timed out and that the remote host isn't responding. It is the same from router2 to 172.16.1.1.</p>

<p>Do I need to set a line to connection from one console port to another or what? I am lost on what to do next. I appreciate all help. I need to do this so I can change the motd remotely. It's a demonstration I am doing for class, and the teacher refuses to help. Please and thank you. I'll update any additional information you feel is necessary to help me.</p>

<pre><code>Router1#
fa0/0 172.16.2.1 255.255.255.0
s2/0 172.16.1.1 255.255.255.0

Router2#
fa0/0 172.16.4.1 255.255.255.0
s2/0 172.16.3.1 255.255.255.0

vty 0 4
! for both routers
 password password
 login local
</code></pre>
","<p>Assuming you're trying to telnet via the serial interfaces s2/0...</p>

<p>Are Router1 and Router2 connected serially on their respective s2/0 interfaces? Make sure they are. And if they are, the IP addresses you have assigned to them (172.16.1.1 and 172.16.3.1) are not in the same subnet with your specified 255.255.255.0 subnet mask. Either change your subnet mask to something that will encompass both IP addresses (e.g., 255.255.0.0) <strong>OR</strong> change the IP address(es) to the same subnet (e.g., 172.16.1.1 and 172.16.1.2).</p>
","16887"
"What is this UDP 5002 broadcast?","2105","","<p>I hope this is an appropriate place to ask this.</p>

<p>I'm confused because it's a broadcast at Layer 2 but it's UDP inside a VLAN with a destination to a unicast address (Y.Y.Y.Y).</p>

<p>I was just wondering if someone could tell me in what scenario one might see such a specimen.  I see ""virtual desktop"" and ""vmware"" so my best guess is it's a broadcast being sent out by one of the virtual machines using a virtual adapter and therefore encapsulated in VLAN 1101.  I also see port 5002, radio free ethernet.</p>

<pre><code>Frame 1: 348 bytes on wire (2784 bits), 348 bytes captured (2784 bits)
Encapsulation type: Ethernet (1)
Arrival Time: Mar 14, 2014 09:56:22.074016230 EDT
[Time shift for this packet: 0.000000000 seconds]
Epoch Time: 1394805382.074016230 seconds
[Time delta from previous captured frame: 0.000000000 seconds]
[Time delta from previous displayed frame: 0.000000000 seconds]
[Time since reference or first frame: 0.000000000 seconds]
Frame Number: 1
Frame Length: 348 bytes (2784 bits)
Capture Length: 348 bytes (2784 bits)
[Frame is marked: False]
[Frame is ignored: False]
[Protocols in frame: eth:vlan:ip:udp:data]
Ethernet II, Src: Vmware_80:39:6f (00:50:56:80:39:6f), Dst: Broadcast (ff:ff:ff:ff:ff:ff)
Destination: Broadcast (ff:ff:ff:ff:ff:ff)
    Address: Broadcast (ff:ff:ff:ff:ff:ff)
    .... ..1. .... .... .... .... = LG bit: Locally administered address (this is NOT the factory default)
    .... ...1 .... .... .... .... = IG bit: Group address (multicast/broadcast)
Source: Vmware_80:39:6f (00:50:56:80:39:6f)
    Address: Vmware_80:39:6f (00:50:56:80:39:6f)
    .... ..0. .... .... .... .... = LG bit: Globally unique address (factory default)
    .... ...0 .... .... .... .... = IG bit: Individual address (unicast)
Type: 802.1Q Virtual LAN (0x8100)
802.1Q Virtual LAN, PRI: 0, CFI: 0, ID: 1101
000. .... .... .... = Priority: Best Effort (default) (0)
...0 .... .... .... = CFI: Canonical (0)
.... 0100 0100 1101 = ID: 1101
Type: IP (0x0800)
Internet Protocol Version 4, Src: X.X.X.X (X.X.X.X), Dst: Y.Y.Y.Y (Y.Y.Y.Y)
Version: 4
Header length: 20 bytes
Differentiated Services Field: 0x00 (DSCP 0x00: Default; ECN: 0x00: Not-ECT (Not ECN-Capable Transport))
    0000 00.. = Differentiated Services Codepoint: Default (0x00)
    .... ..00 = Explicit Congestion Notification: Not-ECT (Not ECN-Capable Transport) (0x00)
Total Length: 334
Identification: 0x58f0 (22768)
Flags: 0x00
    0... .... = Reserved bit: Not set
    .0.. .... = Don't fragment: Not set
    ..0. .... = More fragments: Not set
Fragment offset: 0
Time to live: 128
Protocol: UDP (17)
Header checksum: 0x0ed6 [correct]
    [Good: True]
    [Bad: False]
Source: X.X.X.X (X.X.X.X)
Destination: Y.Y.Y.Y (Y.Y.Y.Y)
[Source GeoIP: Unknown]
[Destination GeoIP: Unknown]
User Datagram Protocol, Src Port: 57787 (57787), Dst Port: rfe (5002)
Source port: 57787 (57787)
Destination port: rfe (5002)
Length: 314 (bogus, payload length 310)
    [Expert Info (Error/Malformed): Bad length value 314 &gt; IP payload length]
        [Message: Bad length value 314 &gt; IP payload length]
        [Severity level: Error]
        [Group: Malformed]
Checksum: 0x507f [unchecked, not all data available]
    [Good Checksum: False]
    [Bad Checksum: False]
Data (302 bytes)

0000  44 52 49 4e 45 54 54 4d d1 de 97 0c c6 b9 00 00   DRINETTM........
0010  00 1e 9b 74 1c 1a 78 da fe ff ff ff 22 15 99 74   ...t..x.....""..t
0020  50 99 b4 77 00 00 99 74 02 00 00 00 00 00 00 00   P..w...t........
0030  01 00 69 71 6e 2e 31 39 39 31 2d 30 35 2e 63 6f   ..iqn.1991-05.co
0040  6d 2e 6d 69 63 72 6f 73 6f 66 74 3a 64 65 73 6b   m.microsoft:desk
0050  74 6f 70 30 30 32 2e 63 6f 72 70 2e 76 69 72 74   top002.corp.virt
0060  75 61 70 72 69 73 65 2e 63 6f 6d 00 00 00 00 00   uaprise.com.....
0070  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00   ................
0080  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00   ................
0090  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00   ................
00a0  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00   ................
00b0  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00   ................
00c0  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00   ................
00d0  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00   ................
00e0  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00   ................
00f0  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00   ................
0100  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00   ................
0110  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00   ................
0120  00 00 00 00 00 00 00 00 00 00 00 00 00 00         ..............
Data: 4452494e4554544dd1de970cc6b90000001e9b741c1a78da...
[Length: 302]
</code></pre>
","<p>You appear to have a VMware guest running <a href=""http://support.drobo.com/app/answers/detail/a_id/257/~/which-tcp%2Fudp-ports-need-to-be-open-on-a-firewall-for-my-drobo-fs-or-droboshare%3F"" rel=""noreferrer"">Drobo Dashboard</a>, and it's looking for a Drobo NAS for an iSCSI volume called iqn.1991-05.com.microsoft:desktop002.corp.virtuaprise.com. Port 5002 in this case is just a random port chosen by Drobo for this session.</p>

<p>The global broadcast MAC address is just your switch flooding the frame to all ports because the Drobo's MAC address is not in (or has expired out of) its CAM table. Once the switch observes a response from the Drobo, it will update its CAM table with the destination's MAC address, so subsequent frames can be properly directed to it.</p>
","6828"
"Redundant IP link aggregation for failover operation without route failure detection","2102","","<p>I am looking for a technology to achieve TCP connection fault tolerance with the help of two links between hosts and without time delays for route failure detection. Something like this:</p>

<pre><code>                       link1   packet1copy1-&gt;
                     --------------------------
      packet1-&gt;     /                          \    packet1copy1/packet1copy2-&gt;
host1--------router1                            router2 ------------------------host2
                    \  link2   packet1copy2-&gt;  /
                     --------------------------
</code></pre>

<p><code>host1</code> and <code>host2</code> are connected via <code>router1</code> and <code>router2</code> with two links between them. Each router duplicates every packet coming from hosts before forwarding them into both links simultaneously. Then either the peer router or the destination host IP stack take care of redundant packet elimination.</p>

<p><strong>Edit:</strong>
This is in fact a search for a general purpose <em>fault-tolerance-by-replication</em> solution for TCP (IP) transport. The solution should be of <em>no-need-to-recover</em> type as opposed to <em>reasonably-fast-to-recover</em> approaches like BGP / OSPF / Cisco IP SLA, etc. Some proprietary packet redundancy solutions are known already, though insufficiently universal. In particular, Engage Communication offers <a href=""http://www.engageinc.com/downloads/IPTube_Protector_White.pdf"" rel=""nofollow noreferrer"">IP Tube Protector</a> for VoIP. Unfortunately this solution 1) is more of equipment than of standard technology and 2) is confined to VoIP domain only. It may be also worth noting <a href=""https://www.juniper.net/techpubs/en_US/ctp6.5/topics/concept/packet-protection.html"" rel=""nofollow noreferrer"">Juniper Packet Redundancy</a> technology, though it looks like limited to single link only, and not to redundant links.</p>

<p>I wonder why I can't find anything similar from Cisco... Does any standard or at least general purpose technology address this?</p>
","<p>With Mikrotik routers, you can using bonding in broadcast mode, see <a href=""https://wiki.mikrotik.com/wiki/Manual:Interface/Bonding"" rel=""nofollow noreferrer"">bonding</a>. I made some tests accross a 4G link connection, it does reduce packet loss going from 1 to 2 and I benefit from TCP speed improvements. Packet losses are not completely eliminated but going to 3 links does not further improve. I would investigate next in network coded TCP.</p>
","39274"
"Connecting/configuring two switches to a router?","2099","","<p>I'm a first year network engineering student and just got into Cisco today, so please bear with me..</p>

<p>I'm trying to setup two switches to connect to each other via a router</p>

<blockquote>
  <p>.
  <a href=""https://i.stack.imgur.com/BflYN.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/BflYN.png"" alt=""like this""></a></p>
</blockquote>

<p>but I can't seem to make devices from the A switch to connect to devices from the B switch. I tried searchinig on Youtube and found one that works but it uses a DHCP server to assign IPs to the connected devices like this..</p>

<blockquote>
  <p>.
  <a href=""https://i.stack.imgur.com/abNqr.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/abNqr.png"" alt=""dhcp""></a></p>
</blockquote>

<p>Is there a way to connect devices from the A switch to B switch via a router without DHCP server ? If yes, can you help me configure it? I have uploaded the .pkt file if needed</p>
","<p>You don't need DHCP to make them talk to each other.</p>

<p>First make sure you can ping the default gateway (it's the LAN facing interface of the router Fa0/0 and Fa0/1).</p>

<p>Check the IP addressing. The router has two directly attached networks. To make it work only proper IP addressing is required. Did you configure VLAN's ? </p>
","29763"
"IPv6 NAT with Link-Local Address","2096","","<p>It's more than usual to find NAT translating IPv4 private addresses (such as 192.168.0.0/16 or 10.0.0.0/8) to non private addresses.</p>

<p>Is it possible that NAT translates even IPv6 link-local addresses (such as FE80::/64) to non local IPv6 addresses instead of allocating a non local IPv6 address directly to the host? </p>

<p>If it's possibile, is it a common approach?</p>
","<p>IPv6 doesn't have NAT. NAT is a hack or kludge in order to forestall the depletion of IPv4 addresses until IPv6 could become ubiquitous. NAT breaks the end-to-end connectivity which is fundamental to the IP design. IPv6 restores the end-to-end connectivity.</p>
","28177"
"Why is RIP not scalable?","2095","","<p>Most of the references say ""RIP is not scalable"" hence can be used only in smaller networks. But none say ""WHY?"" What is that in RIP that actually preventing it from scaling to larger networks? And HOW OSPF overcomes the disadvantage of RIP?</p>
","<blockquote>
  <p>Most of the references say ""RIP is not scalable"" hence can be used only in smaller networks. But none say ""WHY?"" What is that in RIP that actually preventing it from scaling to larger networks? And HOW OSPF overcomes the disadvantage of RIP?</p>
</blockquote>

<h3>Summary</h3>

<ul>
<li><a href=""http://tools.ietf.org/html/rfc1058"">RIPv1</a> floods routes frequently (every 30 seconds), which introduces large CPU loads as the size of the routing table increases.  This is compounded by the reality that <a href=""http://tools.ietf.org/html/rfc1058"">RIP</a> recalculates metrics for every route, every time it floods the route out a new interface.  <em>This is prevents <a href=""http://tools.ietf.org/html/rfc1058"">RIP</a> from scaling as well as other protocols as the number of routes increases.</em></li>
<li><a href=""http://tools.ietf.org/html/rfc1058"">RIPv1</a> is <a href=""http://en.wikipedia.org/wiki/Classful_network"">classful</a></li>
<li><a href=""http://tools.ietf.org/html/rfc2328"">OSPF</a> floods routes infrequently, and performs distributed metric calculations at end nodes (instead of at every flooding router, as <a href=""http://tools.ietf.org/html/rfc1058"">RIP</a> does).  <em>Distributed route calculations, on <a href=""http://en.wikipedia.org/wiki/Link-state_advertisement"">LSA</a>s which are flooded infrequently, make <a href=""http://tools.ietf.org/html/rfc2328"">OSPF</a> scale well.</em></li>
<li><a href=""http://tools.ietf.org/html/rfc2328"">OSPF</a> is a classless protocol, which supports <a href=""http://en.wikipedia.org/wiki/Cidr"">CIDR</a>, which also makes it a more scalable protocol than <a href=""http://tools.ietf.org/html/rfc1058"">RIPv1</a></li>
</ul>

<h3><a href=""http://tools.ietf.org/html/rfc1058"">RIPv1</a> Details:</h3>

<p><a href=""http://tools.ietf.org/html/rfc1058"">RIP</a> is a <a href=""http://en.wikipedia.org/wiki/Distance-vector_routing_protocol"">Distance Vector protocol</a>; all <a href=""http://en.wikipedia.org/wiki/Distance-vector_routing_protocol"">Distance Vector protocol</a>s run the <a href=""http://en.wikipedia.org/wiki/Bellman-Ford_algorithm#Applications_in_routing"">Bellman-Ford</a> algorithm.  At a high level, this means:</p>

<ul>
<li>All routes in the routing table are periodically announced through all interfaces.</li>
<li><a href=""http://tools.ietf.org/html/rfc1058"">RIP</a> floods routes out every <a href=""http://tools.ietf.org/html/rfc1058"">RIP</a> interface every 30 seconds.  Since <a href=""http://tools.ietf.org/html/rfc1058"">RIP</a> routes <a href=""http://jjrinehart.wordpress.com/2012/06/26/gossip-girlrouting-by-rumor-part-i/"">by rumor</a>, this means every router in the topology must work in direct proportion to the size of the routing table every 30 seconds.  The CPU load and traffic jitter implications of this become scary as you approach thousands of routes (particularly on CPU-based routers with no hardware forwarding).</li>
<li>The <a href=""http://tools.ietf.org/html/rfc1058"">RIP</a> protocol itself has a fixed maximum hop-count at 15 hops (which is small if you need to do any form of path-weighting).</li>
<li>Protocols based on <a href=""http://en.wikipedia.org/wiki/Bellman-Ford_algorithm#Applications_in_routing"">Bellman-Ford</a> algorithms are prone to <a href=""http://en.wikipedia.org/wiki/Routing_loop_problem"">routing loops</a>, and <a href=""http://en.wikipedia.org/wiki/Distance-vector_routing_protocol#Count-to-infinity_problem"">count-to-infinity</a> issues.</li>
</ul>

<h3><a href=""http://tools.ietf.org/html/rfc2328"">OSPF</a> Details:</h3>

<p>By way of contrast, <a href=""http://tools.ietf.org/html/rfc2328"">OSPF</a> is a <a href=""http://en.wikipedia.org/wiki/Link-state_routing_protocol"">link-state protocol</a> running <a href=""http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm"">Dijkstra's algorithm</a>.  As such:</p>

<ul>
<li>Each router only announces its <em>directly connected and redistributed routes</em> in routing updates (called <a href=""http://en.wikipedia.org/wiki/Link-state_advertisement"">LSA</a>s).</li>
<li>Each router floods their own <a href=""http://en.wikipedia.org/wiki/Link-state_advertisement"">LSA</a> every 30 minutes by default (because the route refresh timer is 3600 seconds, or 1 hour)</li>
<li><a href=""http://en.wikipedia.org/wiki/Link-state_advertisement"">LSA</a>s are also flooded when triggered by changes in the routing table</li>
<li>Routers use <a href=""http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm"">Dijkstra's algorithm</a> to perform distributed <a href=""http://en.wikipedia.org/wiki/Link-state_advertisement"">LSA</a> path calculations only when necessary.</li>
</ul>
","5896"